(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function dC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Vg={exports:{}},Ku={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iS;function i2(){if(iS)return Ku;iS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var c in s)c!=="key"&&(a[c]=s[c])}else a=s;return s=a.ref,{$$typeof:t,type:i,key:l,ref:s!==void 0?s:null,props:a}}return Ku.Fragment=e,Ku.jsx=n,Ku.jsxs=n,Ku}var rS;function r2(){return rS||(rS=1,Vg.exports=i2()),Vg.exports}var b=r2(),Og={exports:{}},Fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sS;function s2(){if(sS)return Fe;sS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function w(H){return H===null||typeof H!="object"?null:(H=T&&H[T]||H["@@iterator"],typeof H=="function"?H:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,V={};function z(H,te,fe){this.props=H,this.context=te,this.refs=V,this.updater=fe||N}z.prototype.isReactComponent={},z.prototype.setState=function(H,te){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,te,"setState")},z.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function F(){}F.prototype=z.prototype;function q(H,te,fe){this.props=H,this.context=te,this.refs=V,this.updater=fe||N}var K=q.prototype=new F;K.constructor=q,P(K,z.prototype),K.isPureReactComponent=!0;var X=Array.isArray;function G(){}var I={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function R(H,te,fe){var pe=fe.ref;return{$$typeof:t,type:H,key:te,ref:pe!==void 0?pe:null,props:fe}}function L(H,te){return R(H.type,te,H.props)}function M(H){return typeof H=="object"&&H!==null&&H.$$typeof===t}function O(H){var te={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(fe){return te[fe]})}var U=/\/+/g;function we(H,te){return typeof H=="object"&&H!==null&&H.key!=null?O(""+H.key):te.toString(36)}function ve(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(G,G):(H.status="pending",H.then(function(te){H.status==="pending"&&(H.status="fulfilled",H.value=te)},function(te){H.status==="pending"&&(H.status="rejected",H.reason=te)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function ee(H,te,fe,pe,Ae){var Me=typeof H;(Me==="undefined"||Me==="boolean")&&(H=null);var Ue=!1;if(H===null)Ue=!0;else switch(Me){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(H.$$typeof){case t:case e:Ue=!0;break;case g:return Ue=H._init,ee(Ue(H._payload),te,fe,pe,Ae)}}if(Ue)return Ae=Ae(H),Ue=pe===""?"."+we(H,0):pe,X(Ae)?(fe="",Ue!=null&&(fe=Ue.replace(U,"$&/")+"/"),ee(Ae,te,fe,"",function(Cn){return Cn})):Ae!=null&&(M(Ae)&&(Ae=L(Ae,fe+(Ae.key==null||H&&H.key===Ae.key?"":(""+Ae.key).replace(U,"$&/")+"/")+Ue)),te.push(Ae)),1;Ue=0;var $t=pe===""?".":pe+":";if(X(H))for(var xe=0;xe<H.length;xe++)pe=H[xe],Me=$t+we(pe,xe),Ue+=ee(pe,te,fe,Me,Ae);else if(xe=w(H),typeof xe=="function")for(H=xe.call(H),xe=0;!(pe=H.next()).done;)pe=pe.value,Me=$t+we(pe,xe++),Ue+=ee(pe,te,fe,Me,Ae);else if(Me==="object"){if(typeof H.then=="function")return ee(ve(H),te,fe,pe,Ae);throw te=String(H),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function ce(H,te,fe){if(H==null)return H;var pe=[],Ae=0;return ee(H,pe,"","",function(Me){return te.call(fe,Me,Ae++)}),pe}function he(H){if(H._status===-1){var te=H._result;te=te(),te.then(function(fe){(H._status===0||H._status===-1)&&(H._status=1,H._result=fe)},function(fe){(H._status===0||H._status===-1)&&(H._status=2,H._result=fe)}),H._status===-1&&(H._status=0,H._result=te)}if(H._status===1)return H._result.default;throw H._result}var Ie=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},De={map:ce,forEach:function(H,te,fe){ce(H,function(){te.apply(this,arguments)},fe)},count:function(H){var te=0;return ce(H,function(){te++}),te},toArray:function(H){return ce(H,function(te){return te})||[]},only:function(H){if(!M(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return Fe.Activity=E,Fe.Children=De,Fe.Component=z,Fe.Fragment=n,Fe.Profiler=s,Fe.PureComponent=q,Fe.StrictMode=i,Fe.Suspense=d,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Fe.__COMPILER_RUNTIME={__proto__:null,c:function(H){return I.H.useMemoCache(H)}},Fe.cache=function(H){return function(){return H.apply(null,arguments)}},Fe.cacheSignal=function(){return null},Fe.cloneElement=function(H,te,fe){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var pe=P({},H.props),Ae=H.key;if(te!=null)for(Me in te.key!==void 0&&(Ae=""+te.key),te)!x.call(te,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&te.ref===void 0||(pe[Me]=te[Me]);var Me=arguments.length-2;if(Me===1)pe.children=fe;else if(1<Me){for(var Ue=Array(Me),$t=0;$t<Me;$t++)Ue[$t]=arguments[$t+2];pe.children=Ue}return R(H.type,Ae,pe)},Fe.createContext=function(H){return H={$$typeof:l,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:a,_context:H},H},Fe.createElement=function(H,te,fe){var pe,Ae={},Me=null;if(te!=null)for(pe in te.key!==void 0&&(Me=""+te.key),te)x.call(te,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(Ae[pe]=te[pe]);var Ue=arguments.length-2;if(Ue===1)Ae.children=fe;else if(1<Ue){for(var $t=Array(Ue),xe=0;xe<Ue;xe++)$t[xe]=arguments[xe+2];Ae.children=$t}if(H&&H.defaultProps)for(pe in Ue=H.defaultProps,Ue)Ae[pe]===void 0&&(Ae[pe]=Ue[pe]);return R(H,Me,Ae)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(H){return{$$typeof:c,render:H}},Fe.isValidElement=M,Fe.lazy=function(H){return{$$typeof:g,_payload:{_status:-1,_result:H},_init:he}},Fe.memo=function(H,te){return{$$typeof:h,type:H,compare:te===void 0?null:te}},Fe.startTransition=function(H){var te=I.T,fe={};I.T=fe;try{var pe=H(),Ae=I.S;Ae!==null&&Ae(fe,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(G,Ie)}catch(Me){Ie(Me)}finally{te!==null&&fe.types!==null&&(te.types=fe.types),I.T=te}},Fe.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Fe.use=function(H){return I.H.use(H)},Fe.useActionState=function(H,te,fe){return I.H.useActionState(H,te,fe)},Fe.useCallback=function(H,te){return I.H.useCallback(H,te)},Fe.useContext=function(H){return I.H.useContext(H)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(H,te){return I.H.useDeferredValue(H,te)},Fe.useEffect=function(H,te){return I.H.useEffect(H,te)},Fe.useEffectEvent=function(H){return I.H.useEffectEvent(H)},Fe.useId=function(){return I.H.useId()},Fe.useImperativeHandle=function(H,te,fe){return I.H.useImperativeHandle(H,te,fe)},Fe.useInsertionEffect=function(H,te){return I.H.useInsertionEffect(H,te)},Fe.useLayoutEffect=function(H,te){return I.H.useLayoutEffect(H,te)},Fe.useMemo=function(H,te){return I.H.useMemo(H,te)},Fe.useOptimistic=function(H,te){return I.H.useOptimistic(H,te)},Fe.useReducer=function(H,te,fe){return I.H.useReducer(H,te,fe)},Fe.useRef=function(H){return I.H.useRef(H)},Fe.useState=function(H){return I.H.useState(H)},Fe.useSyncExternalStore=function(H,te,fe){return I.H.useSyncExternalStore(H,te,fe)},Fe.useTransition=function(){return I.H.useTransition()},Fe.version="19.2.0",Fe}var oS;function fv(){return oS||(oS=1,Og.exports=s2()),Og.exports}var $=fv();const An=dC($);var Ug={exports:{}},Ju={},Fg={exports:{}},qg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aS;function o2(){return aS||(aS=1,(function(t){function e(ee,ce){var he=ee.length;ee.push(ce);e:for(;0<he;){var Ie=he-1>>>1,De=ee[Ie];if(0<s(De,ce))ee[Ie]=ce,ee[he]=De,he=Ie;else break e}}function n(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var ce=ee[0],he=ee.pop();if(he!==ce){ee[0]=he;e:for(var Ie=0,De=ee.length,H=De>>>1;Ie<H;){var te=2*(Ie+1)-1,fe=ee[te],pe=te+1,Ae=ee[pe];if(0>s(fe,he))pe<De&&0>s(Ae,fe)?(ee[Ie]=Ae,ee[pe]=he,Ie=pe):(ee[Ie]=fe,ee[te]=he,Ie=te);else if(pe<De&&0>s(Ae,he))ee[Ie]=Ae,ee[pe]=he,Ie=pe;else break e}}return ce}function s(ee,ce){var he=ee.sortIndex-ce.sortIndex;return he!==0?he:ee.id-ce.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var d=[],h=[],g=1,E=null,T=3,w=!1,N=!1,P=!1,V=!1,z=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function K(ee){for(var ce=n(h);ce!==null;){if(ce.callback===null)i(h);else if(ce.startTime<=ee)i(h),ce.sortIndex=ce.expirationTime,e(d,ce);else break;ce=n(h)}}function X(ee){if(P=!1,K(ee),!N)if(n(d)!==null)N=!0,G||(G=!0,O());else{var ce=n(h);ce!==null&&ve(X,ce.startTime-ee)}}var G=!1,I=-1,x=5,R=-1;function L(){return V?!0:!(t.unstable_now()-R<x)}function M(){if(V=!1,G){var ee=t.unstable_now();R=ee;var ce=!0;try{e:{N=!1,P&&(P=!1,F(I),I=-1),w=!0;var he=T;try{t:{for(K(ee),E=n(d);E!==null&&!(E.expirationTime>ee&&L());){var Ie=E.callback;if(typeof Ie=="function"){E.callback=null,T=E.priorityLevel;var De=Ie(E.expirationTime<=ee);if(ee=t.unstable_now(),typeof De=="function"){E.callback=De,K(ee),ce=!0;break t}E===n(d)&&i(d),K(ee)}else i(d);E=n(d)}if(E!==null)ce=!0;else{var H=n(h);H!==null&&ve(X,H.startTime-ee),ce=!1}}break e}finally{E=null,T=he,w=!1}ce=void 0}}finally{ce?O():G=!1}}}var O;if(typeof q=="function")O=function(){q(M)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,we=U.port2;U.port1.onmessage=M,O=function(){we.postMessage(null)}}else O=function(){z(M,0)};function ve(ee,ce){I=z(function(){ee(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(ee){switch(T){case 1:case 2:case 3:var ce=3;break;default:ce=T}var he=T;T=ce;try{return ee()}finally{T=he}},t.unstable_requestPaint=function(){V=!0},t.unstable_runWithPriority=function(ee,ce){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var he=T;T=ee;try{return ce()}finally{T=he}},t.unstable_scheduleCallback=function(ee,ce,he){var Ie=t.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Ie+he:Ie):he=Ie,ee){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=he+De,ee={id:g++,callback:ce,priorityLevel:ee,startTime:he,expirationTime:De,sortIndex:-1},he>Ie?(ee.sortIndex=he,e(h,ee),n(d)===null&&ee===n(h)&&(P?(F(I),I=-1):P=!0,ve(X,he-Ie))):(ee.sortIndex=De,e(d,ee),N||w||(N=!0,G||(G=!0,O()))),ee},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(ee){var ce=T;return function(){var he=T;T=ce;try{return ee.apply(this,arguments)}finally{T=he}}}})(qg)),qg}var lS;function a2(){return lS||(lS=1,Fg.exports=o2()),Fg.exports}var Bg={exports:{}},Jn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uS;function l2(){if(uS)return Jn;uS=1;var t=fv();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(d,h,g){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:d,containerInfo:h,implementation:g}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Jn.createPortal=function(d,h){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(d,h,null,g)},Jn.flushSync=function(d){var h=l.T,g=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=h,i.p=g,i.d.f()}},Jn.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(d,h))},Jn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},Jn.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var g=h.as,E=c(g,h.crossOrigin),T=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;g==="style"?i.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:w}):g==="script"&&i.d.X(d,{crossOrigin:E,integrity:T,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Jn.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var g=c(h.as,h.crossOrigin);i.d.M(d,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(d)},Jn.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var g=h.as,E=c(g,h.crossOrigin);i.d.L(d,g,{crossOrigin:E,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Jn.preloadModule=function(d,h){if(typeof d=="string")if(h){var g=c(h.as,h.crossOrigin);i.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(d)},Jn.requestFormReset=function(d){i.d.r(d)},Jn.unstable_batchedUpdates=function(d,h){return d(h)},Jn.useFormState=function(d,h,g){return l.H.useFormState(d,h,g)},Jn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Jn.version="19.2.0",Jn}var cS;function hC(){if(cS)return Bg.exports;cS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Bg.exports=l2(),Bg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fS;function u2(){if(fS)return Ju;fS=1;var t=a2(),e=fv(),n=hC();function i(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var o=r,u=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(u=o.return),r=o.return;while(r)}return o.tag===3?u:null}function l(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function c(r){if(r.tag===31){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function d(r){if(a(r)!==r)throw Error(i(188))}function h(r){var o=r.alternate;if(!o){if(o=a(r),o===null)throw Error(i(188));return o!==r?null:r}for(var u=r,f=o;;){var v=u.return;if(v===null)break;var _=v.alternate;if(_===null){if(f=v.return,f!==null){u=f;continue}break}if(v.child===_.child){for(_=v.child;_;){if(_===u)return d(v),r;if(_===f)return d(v),o;_=_.sibling}throw Error(i(188))}if(u.return!==f.return)u=v,f=_;else{for(var A=!1,D=v.child;D;){if(D===u){A=!0,u=v,f=_;break}if(D===f){A=!0,f=v,u=_;break}D=D.sibling}if(!A){for(D=_.child;D;){if(D===u){A=!0,u=_,f=v;break}if(D===f){A=!0,f=_,u=v;break}D=D.sibling}if(!A)throw Error(i(189))}}if(u.alternate!==f)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?r:o}function g(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=g(r),o!==null)return o;r=r.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),q=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function O(r){return r===null||typeof r!="object"?null:(r=M&&r[M]||r["@@iterator"],typeof r=="function"?r:null)}var U=Symbol.for("react.client.reference");function we(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===U?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case P:return"Fragment";case z:return"Profiler";case V:return"StrictMode";case X:return"Suspense";case G:return"SuspenseList";case R:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case N:return"Portal";case q:return r.displayName||"Context";case F:return(r._context.displayName||"Context")+".Consumer";case K:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case I:return o=r.displayName||null,o!==null?o:we(r.type)||"Memo";case x:o=r._payload,r=r._init;try{return we(r(o))}catch{}}return null}var ve=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},Ie=[],De=-1;function H(r){return{current:r}}function te(r){0>De||(r.current=Ie[De],Ie[De]=null,De--)}function fe(r,o){De++,Ie[De]=r.current,r.current=o}var pe=H(null),Ae=H(null),Me=H(null),Ue=H(null);function $t(r,o){switch(fe(Me,o),fe(Ae,r),fe(pe,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?CT(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=CT(o),r=IT(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}te(pe),fe(pe,r)}function xe(){te(pe),te(Ae),te(Me)}function Cn(r){r.memoizedState!==null&&fe(Ue,r);var o=pe.current,u=IT(o,r.type);o!==u&&(fe(Ae,r),fe(pe,u))}function ut(r){Ae.current===r&&(te(pe),te(Ae)),Ue.current===r&&(te(Ue),Hu._currentValue=he)}var _n,Vn;function In(r){if(_n===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);_n=o&&o[1]||"",Vn=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_n+r+Vn}var En=!1;function xn(r,o){if(!r||En)return"";En=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(o){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(ne){var Z=ne}Reflect.construct(r,[],ae)}else{try{ae.call()}catch(ne){Z=ne}r.call(ae.prototype)}}else{try{throw Error()}catch(ne){Z=ne}(ae=r())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(ne){if(ne&&Z&&typeof ne.stack=="string")return[ne.stack,Z.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=f.DetermineComponentFrameRoot(),A=_[0],D=_[1];if(A&&D){var B=A.split(`
`),Q=D.split(`
`);for(v=f=0;f<B.length&&!B[f].includes("DetermineComponentFrameRoot");)f++;for(;v<Q.length&&!Q[v].includes("DetermineComponentFrameRoot");)v++;if(f===B.length||v===Q.length)for(f=B.length-1,v=Q.length-1;1<=f&&0<=v&&B[f]!==Q[v];)v--;for(;1<=f&&0<=v;f--,v--)if(B[f]!==Q[v]){if(f!==1||v!==1)do if(f--,v--,0>v||B[f]!==Q[v]){var re=`
`+B[f].replace(" at new "," at ");return r.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",r.displayName)),re}while(1<=f&&0<=v);break}}}finally{En=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?In(u):""}function Bi(r,o){switch(r.tag){case 26:case 27:case 5:return In(r.type);case 16:return In("Lazy");case 13:return r.child!==o&&o!==null?In("Suspense Fallback"):In("Suspense");case 19:return In("SuspenseList");case 0:case 15:return xn(r.type,!1);case 11:return xn(r.type.render,!1);case 1:return xn(r.type,!0);case 31:return In("Activity");default:return""}}function Ci(r){try{var o="",u=null;do o+=Bi(r,u),u=r,r=r.return;while(r);return o}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var mi=Object.prototype.hasOwnProperty,ni=t.unstable_scheduleCallback,ii=t.unstable_cancelCallback,cr=t.unstable_shouldYield,zi=t.unstable_requestPaint,ct=t.unstable_now,Tn=t.unstable_getCurrentPriorityLevel,ze=t.unstable_ImmediatePriority,Ct=t.unstable_UserBlockingPriority,Yt=t.unstable_NormalPriority,me=t.unstable_LowPriority,ft=t.unstable_IdlePriority,nn=t.log,It=t.unstable_setDisableYieldValue,Rn=null,un=null;function oe(r){if(typeof nn=="function"&&It(r),un&&typeof un.setStrictMode=="function")try{un.setStrictMode(Rn,r)}catch{}}var Te=Math.clz32?Math.clz32:St,Se=Math.log,je=Math.LN2;function St(r){return r>>>=0,r===0?32:31-(Se(r)/je|0)|0}var Ye=256,We=262144,at=4194304;function rt(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function ke(r,o,u){var f=r.pendingLanes;if(f===0)return 0;var v=0,_=r.suspendedLanes,A=r.pingedLanes;r=r.warmLanes;var D=f&134217727;return D!==0?(f=D&~_,f!==0?v=rt(f):(A&=D,A!==0?v=rt(A):u||(u=D&~r,u!==0&&(v=rt(u))))):(D=f&~_,D!==0?v=rt(D):A!==0?v=rt(A):u||(u=f&~r,u!==0&&(v=rt(u)))),v===0?0:o!==0&&o!==v&&(o&_)===0&&(_=v&-v,u=o&-o,_>=u||_===32&&(u&4194048)!==0)?o:v}function $e(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function Sn(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hi(){var r=at;return at<<=1,(at&62914560)===0&&(at=4194304),r}function rn(r){for(var o=[],u=0;31>u;u++)o.push(r);return o}function kt(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function bt(r,o,u,f,v,_){var A=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var D=r.entanglements,B=r.expirationTimes,Q=r.hiddenUpdates;for(u=A&~u;0<u;){var re=31-Te(u),ae=1<<re;D[re]=0,B[re]=-1;var Z=Q[re];if(Z!==null)for(Q[re]=null,re=0;re<Z.length;re++){var ne=Z[re];ne!==null&&(ne.lane&=-536870913)}u&=~ae}f!==0&&ri(r,f,0),_!==0&&v===0&&r.tag!==0&&(r.suspendedLanes|=_&~(A&~o))}function ri(r,o,u){r.pendingLanes|=o,r.suspendedLanes&=~o;var f=31-Te(o);r.entangledLanes|=o,r.entanglements[f]=r.entanglements[f]|1073741824|u&261930}function Ht(r,o){var u=r.entangledLanes|=o;for(r=r.entanglements;u;){var f=31-Te(u),v=1<<f;v&o|r[f]&o&&(r[f]|=o),u&=~v}}function $n(r,o){var u=o&-o;return u=(u&42)!==0?1:Gi(u),(u&(r.suspendedLanes|o))!==0?0:u}function Gi(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function On(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function si(){var r=ce.p;return r!==0?r:(r=window.event,r===void 0?32:WT(r.type))}function $r(r,o){var u=ce.p;try{return ce.p=r,o()}finally{ce.p=u}}var Ii=Math.random().toString(36).slice(2),Lt="__reactFiber$"+Ii,sn="__reactProps$"+Ii,xi="__reactContainer$"+Ii,ji="__reactEvents$"+Ii,Ri="__reactListeners$"+Ii,Vo="__reactHandles$"+Ii,fr="__reactResources$"+Ii,$i="__reactMarker$"+Ii;function Ki(r){delete r[Lt],delete r[sn],delete r[ji],delete r[Ri],delete r[Vo]}function gi(r){var o=r[Lt];if(o)return o;for(var u=r.parentNode;u;){if(o=u[xi]||u[Lt]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(r=PT(r);r!==null;){if(u=r[Lt])return u;r=PT(r)}return o}r=u,u=r.parentNode}return null}function Ji(r){if(r=r[Lt]||r[xi]){var o=r.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return r}return null}function Ir(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(i(33))}function oi(r){var o=r[fr];return o||(o=r[fr]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Gt(r){r[$i]=!0}var dr=new Set,hr={};function ai(r,o){xr(r,o),xr(r+"Capture",o)}function xr(r,o){for(hr[r]=o,r=0;r<o.length;r++)dr.add(o[r])}var Op=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),eu={},tu={};function af(r){return mi.call(tu,r)?!0:mi.call(eu,r)?!1:Op.test(r)?tu[r]=!0:(eu[r]=!0,!1)}function Cs(r,o,u){if(af(o))if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var f=o.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+u)}}function Is(r,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+u)}}function Yi(r,o,u,f){if(f===null)r.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(o,u,""+f)}}function li(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function lf(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Up(r,o,u){var f=Object.getOwnPropertyDescriptor(r.constructor.prototype,o);if(!r.hasOwnProperty(o)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var v=f.get,_=f.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return v.call(this)},set:function(A){u=""+A,_.call(this,A)}}),Object.defineProperty(r,o,{enumerable:f.enumerable}),{getValue:function(){return u},setValue:function(A){u=""+A},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function xa(r){if(!r._valueTracker){var o=lf(r)?"checked":"value";r._valueTracker=Up(r,o,""+r[o])}}function nu(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var u=o.getValue(),f="";return r&&(f=lf(r)?r.checked?"true":"false":r.value),r=f,r!==u?(o.setValue(r),!0):!1}function Ra(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Kr=/[\n"\\]/g;function Wt(r){return r.replace(Kr,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function xs(r,o,u,f,v,_,A,D){r.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?r.type=A:r.removeAttribute("type"),o!=null?A==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+li(o)):r.value!==""+li(o)&&(r.value=""+li(o)):A!=="submit"&&A!=="reset"||r.removeAttribute("value"),o!=null?Na(r,A,li(o)):u!=null?Na(r,A,li(u)):f!=null&&r.removeAttribute("value"),v==null&&_!=null&&(r.defaultChecked=!!_),v!=null&&(r.checked=v&&typeof v!="function"&&typeof v!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?r.name=""+li(D):r.removeAttribute("name")}function Oo(r,o,u,f,v,_,A,D){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.type=_),o!=null||u!=null){if(!(_!=="submit"&&_!=="reset"||o!=null)){xa(r);return}u=u!=null?""+li(u):"",o=o!=null?""+li(o):u,D||o===r.value||(r.value=o),r.defaultValue=o}f=f??v,f=typeof f!="function"&&typeof f!="symbol"&&!!f,r.checked=D?r.checked:!!f,r.defaultChecked=!!f,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(r.name=A),xa(r)}function Na(r,o,u){o==="number"&&Ra(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function dt(r,o,u,f){if(r=r.options,o){o={};for(var v=0;v<u.length;v++)o["$"+u[v]]=!0;for(u=0;u<r.length;u++)v=o.hasOwnProperty("$"+r[u].value),r[u].selected!==v&&(r[u].selected=v),v&&f&&(r[u].defaultSelected=!0)}else{for(u=""+li(u),o=null,v=0;v<r.length;v++){if(r[v].value===u){r[v].selected=!0,f&&(r[v].defaultSelected=!0);return}o!==null||r[v].disabled||(o=r[v])}o!==null&&(o.selected=!0)}}function Uo(r,o,u){if(o!=null&&(o=""+li(o),o!==r.value&&(r.value=o),u==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=u!=null?""+li(u):""}function Rs(r,o,u,f){if(o==null){if(f!=null){if(u!=null)throw Error(i(92));if(ve(f)){if(1<f.length)throw Error(i(93));f=f[0]}u=f}u==null&&(u=""),o=u}u=li(o),r.defaultValue=u,f=r.textContent,f===u&&f!==""&&f!==null&&(r.value=f),xa(r)}function Wi(r,o){if(o){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=o;return}}r.textContent=o}var Fp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function iu(r,o,u){var f=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?f?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":f?r.setProperty(o,u):typeof u!="number"||u===0||Fp.has(o)?o==="float"?r.cssFloat=u:r[o]=(""+u).trim():r[o]=u+"px"}function uf(r,o,u){if(o!=null&&typeof o!="object")throw Error(i(62));if(r=r.style,u!=null){for(var f in u)!u.hasOwnProperty(f)||o!=null&&o.hasOwnProperty(f)||(f.indexOf("--")===0?r.setProperty(f,""):f==="float"?r.cssFloat="":r[f]="");for(var v in o)f=o[v],o.hasOwnProperty(v)&&u[v]!==f&&iu(r,v,f)}else for(var _ in o)o.hasOwnProperty(_)&&iu(r,_,o[_])}function ru(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rr(r){return Bp.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Nn(){}var Da=null;function Ma(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Jr=null,Ni=null;function cf(r){var o=Ji(r);if(o&&(r=o.stateNode)){var u=r[sn]||null;e:switch(r=o.stateNode,o.type){case"input":if(xs(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Wt(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var f=u[o];if(f!==r&&f.form===r.form){var v=f[sn]||null;if(!v)throw Error(i(90));xs(f,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<u.length;o++)f=u[o],f.form===r.form&&nu(f)}break e;case"textarea":Uo(r,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&dt(r,!!u.multiple,o,!1)}}}var su=!1;function ff(r,o,u){if(su)return r(o,u);su=!0;try{var f=r(o);return f}finally{if(su=!1,(Jr!==null||Ni!==null)&&(ad(),Jr&&(o=Jr,r=Ni,Ni=Jr=null,cf(o),r)))for(o=0;o<r.length;o++)cf(r[o])}}function yi(r,o){var u=r.stateNode;if(u===null)return null;var f=u[sn]||null;if(f===null)return null;u=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(r=r.type,f=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!f;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(i(231,o,typeof u));return u}var pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ou=!1;if(pr)try{var Nr={};Object.defineProperty(Nr,"passive",{get:function(){ou=!0}}),window.addEventListener("test",Nr,Nr),window.removeEventListener("test",Nr,Nr)}catch{ou=!1}var Di=null,ka=null,Dr=null;function Ns(){if(Dr)return Dr;var r,o=ka,u=o.length,f,v="value"in Di?Di.value:Di.textContent,_=v.length;for(r=0;r<u&&o[r]===v[r];r++);var A=u-r;for(f=1;f<=A&&o[u-f]===v[_-f];f++);return Dr=v.slice(r,1<f?1-f:void 0)}function Fo(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function Ds(){return!0}function Vt(){return!1}function Kn(r){function o(u,f,v,_,A){this._reactName=u,this._targetInst=v,this.type=f,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var D in r)r.hasOwnProperty(D)&&(u=r[D],this[D]=u?u(_):_[D]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Ds:Vt,this.isPropagationStopped=Vt,this}return E(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Ds)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Ds)},persist:function(){},isPersistent:Ds}),o}var Yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qo=Kn(Yr),Ms=E({},Yr,{view:0,detail:0}),df=Kn(Ms),ks,Pa,ui,Bo=E({},Ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ls,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ui&&(ui&&r.type==="mousemove"?(ks=r.screenX-ui.screenX,Pa=r.screenY-ui.screenY):Pa=ks=0,ui=r),ks)},movementY:function(r){return"movementY"in r?r.movementY:Pa}}),hf=Kn(Bo),zo=E({},Bo,{dataTransfer:0}),pf=Kn(zo),au=E({},Ms,{relatedTarget:0}),Ps=Kn(au),mf=E({},Yr,{animationName:0,elapsedTime:0,pseudoElement:0}),La=Kn(mf),zp=E({},Yr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),gf=Kn(zp),Ho=E({},Yr,{data:0}),lu=Kn(Ho),yf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vf(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=cu[r])?!!o[r]:!1}function Ls(){return vf}var _f=E({},Ms,{key:function(r){if(r.key){var o=yf[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=Fo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?uu[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ls,charCode:function(r){return r.type==="keypress"?Fo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Fo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Ef=Kn(_f),Wr=E({},Bo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fu=Kn(Wr),Tf=E({},Ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ls}),Sf=Kn(Tf),bf=E({},Yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Va=Kn(bf),ci=E({},Bo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Af=Kn(ci),wf=E({},Yr,{newState:0,oldState:0}),Vs=Kn(wf),m=[9,13,27,32],S=pr&&"CompositionEvent"in window,C=null;pr&&"documentMode"in document&&(C=document.documentMode);var k=pr&&"TextEvent"in window&&!C,Y=pr&&(!S||C&&8<C&&11>=C),ie=" ",de=!1;function _t(r,o){switch(r){case"keyup":return m.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cn(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ke=!1;function Dn(r,o){switch(r){case"compositionend":return cn(o);case"keypress":return o.which!==32?null:(de=!0,ie);case"textInput":return r=o.data,r===ie&&de?null:r;default:return null}}function Mn(r,o){if(Ke)return r==="compositionend"||!S&&_t(r,o)?(r=Ns(),Dr=ka=Di=null,Ke=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Y&&o.locale!=="ko"?null:o.data;default:return null}}var Os={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vi(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!Os[r.type]:o==="textarea"}function Go(r,o,u,f){Jr?Ni?Ni.push(f):Ni=[f]:Jr=f,o=pd(o,"onChange"),0<o.length&&(u=new qo("onChange","change",null,u,f),r.push({event:u,listeners:o}))}var Qr=null,du=null;function N1(r){ET(r,0)}function Cf(r){var o=Ir(r);if(nu(o))return r}function F0(r,o){if(r==="change")return o}var q0=!1;if(pr){var Hp;if(pr){var Gp="oninput"in document;if(!Gp){var B0=document.createElement("div");B0.setAttribute("oninput","return;"),Gp=typeof B0.oninput=="function"}Hp=Gp}else Hp=!1;q0=Hp&&(!document.documentMode||9<document.documentMode)}function z0(){Qr&&(Qr.detachEvent("onpropertychange",H0),du=Qr=null)}function H0(r){if(r.propertyName==="value"&&Cf(du)){var o=[];Go(o,du,r,Ma(r)),ff(N1,o)}}function D1(r,o,u){r==="focusin"?(z0(),Qr=o,du=u,Qr.attachEvent("onpropertychange",H0)):r==="focusout"&&z0()}function M1(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Cf(du)}function k1(r,o){if(r==="click")return Cf(o)}function P1(r,o){if(r==="input"||r==="change")return Cf(o)}function L1(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var Mi=typeof Object.is=="function"?Object.is:L1;function hu(r,o){if(Mi(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var u=Object.keys(r),f=Object.keys(o);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var v=u[f];if(!mi.call(o,v)||!Mi(r[v],o[v]))return!1}return!0}function G0(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function j0(r,o){var u=G0(r);r=0;for(var f;u;){if(u.nodeType===3){if(f=r+u.textContent.length,r<=o&&f>=o)return{node:u,offset:o-r};r=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=G0(u)}}function $0(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?$0(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function K0(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=Ra(r.document);o instanceof r.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)r=o.contentWindow;else break;o=Ra(r.document)}return o}function jp(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var V1=pr&&"documentMode"in document&&11>=document.documentMode,Oa=null,$p=null,pu=null,Kp=!1;function J0(r,o,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Kp||Oa==null||Oa!==Ra(f)||(f=Oa,"selectionStart"in f&&jp(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),pu&&hu(pu,f)||(pu=f,f=pd($p,"onSelect"),0<f.length&&(o=new qo("onSelect","select",null,o,u),r.push({event:o,listeners:f}),o.target=Oa)))}function jo(r,o){var u={};return u[r.toLowerCase()]=o.toLowerCase(),u["Webkit"+r]="webkit"+o,u["Moz"+r]="moz"+o,u}var Ua={animationend:jo("Animation","AnimationEnd"),animationiteration:jo("Animation","AnimationIteration"),animationstart:jo("Animation","AnimationStart"),transitionrun:jo("Transition","TransitionRun"),transitionstart:jo("Transition","TransitionStart"),transitioncancel:jo("Transition","TransitionCancel"),transitionend:jo("Transition","TransitionEnd")},Jp={},Y0={};pr&&(Y0=document.createElement("div").style,"AnimationEvent"in window||(delete Ua.animationend.animation,delete Ua.animationiteration.animation,delete Ua.animationstart.animation),"TransitionEvent"in window||delete Ua.transitionend.transition);function $o(r){if(Jp[r])return Jp[r];if(!Ua[r])return r;var o=Ua[r],u;for(u in o)if(o.hasOwnProperty(u)&&u in Y0)return Jp[r]=o[u];return r}var W0=$o("animationend"),Q0=$o("animationiteration"),X0=$o("animationstart"),O1=$o("transitionrun"),U1=$o("transitionstart"),F1=$o("transitioncancel"),Z0=$o("transitionend"),e_=new Map,Yp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yp.push("scrollEnd");function mr(r,o){e_.set(r,o),ai(o,[r])}var If=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Qi=[],Fa=0,Wp=0;function xf(){for(var r=Fa,o=Wp=Fa=0;o<r;){var u=Qi[o];Qi[o++]=null;var f=Qi[o];Qi[o++]=null;var v=Qi[o];Qi[o++]=null;var _=Qi[o];if(Qi[o++]=null,f!==null&&v!==null){var A=f.pending;A===null?v.next=v:(v.next=A.next,A.next=v),f.pending=v}_!==0&&t_(u,v,_)}}function Rf(r,o,u,f){Qi[Fa++]=r,Qi[Fa++]=o,Qi[Fa++]=u,Qi[Fa++]=f,Wp|=f,r.lanes|=f,r=r.alternate,r!==null&&(r.lanes|=f)}function Qp(r,o,u,f){return Rf(r,o,u,f),Nf(r)}function Ko(r,o){return Rf(r,null,null,o),Nf(r)}function t_(r,o,u){r.lanes|=u;var f=r.alternate;f!==null&&(f.lanes|=u);for(var v=!1,_=r.return;_!==null;)_.childLanes|=u,f=_.alternate,f!==null&&(f.childLanes|=u),_.tag===22&&(r=_.stateNode,r===null||r._visibility&1||(v=!0)),r=_,_=_.return;return r.tag===3?(_=r.stateNode,v&&o!==null&&(v=31-Te(u),r=_.hiddenUpdates,f=r[v],f===null?r[v]=[o]:f.push(o),o.lane=u|536870912),_):null}function Nf(r){if(50<Vu)throw Vu=0,og=null,Error(i(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var qa={};function q1(r,o,u,f){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ki(r,o,u,f){return new q1(r,o,u,f)}function Xp(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Xr(r,o){var u=r.alternate;return u===null?(u=ki(r.tag,o,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=o,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,o=r.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function n_(r,o){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,o=u.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function Df(r,o,u,f,v,_){var A=0;if(f=r,typeof r=="function")Xp(r)&&(A=1);else if(typeof r=="string")A=jN(r,u,pe.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case R:return r=ki(31,u,o,v),r.elementType=R,r.lanes=_,r;case P:return Jo(u.children,v,_,o);case V:A=8,v|=24;break;case z:return r=ki(12,u,o,v|2),r.elementType=z,r.lanes=_,r;case X:return r=ki(13,u,o,v),r.elementType=X,r.lanes=_,r;case G:return r=ki(19,u,o,v),r.elementType=G,r.lanes=_,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case q:A=10;break e;case F:A=9;break e;case K:A=11;break e;case I:A=14;break e;case x:A=16,f=null;break e}A=29,u=Error(i(130,r===null?"null":typeof r,"")),f=null}return o=ki(A,u,o,v),o.elementType=r,o.type=f,o.lanes=_,o}function Jo(r,o,u,f){return r=ki(7,r,f,o),r.lanes=u,r}function Zp(r,o,u){return r=ki(6,r,null,o),r.lanes=u,r}function i_(r){var o=ki(18,null,null,0);return o.stateNode=r,o}function em(r,o,u){return o=ki(4,r.children!==null?r.children:[],r.key,o),o.lanes=u,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var r_=new WeakMap;function Xi(r,o){if(typeof r=="object"&&r!==null){var u=r_.get(r);return u!==void 0?u:(o={value:r,source:o,stack:Ci(o)},r_.set(r,o),o)}return{value:r,source:o,stack:Ci(o)}}var Ba=[],za=0,Mf=null,mu=0,Zi=[],er=0,Us=null,Mr=1,kr="";function Zr(r,o){Ba[za++]=mu,Ba[za++]=Mf,Mf=r,mu=o}function s_(r,o,u){Zi[er++]=Mr,Zi[er++]=kr,Zi[er++]=Us,Us=r;var f=Mr;r=kr;var v=32-Te(f)-1;f&=~(1<<v),u+=1;var _=32-Te(o)+v;if(30<_){var A=v-v%5;_=(f&(1<<A)-1).toString(32),f>>=A,v-=A,Mr=1<<32-Te(o)+v|u<<v|f,kr=_+r}else Mr=1<<_|u<<v|f,kr=r}function tm(r){r.return!==null&&(Zr(r,1),s_(r,1,0))}function nm(r){for(;r===Mf;)Mf=Ba[--za],Ba[za]=null,mu=Ba[--za],Ba[za]=null;for(;r===Us;)Us=Zi[--er],Zi[er]=null,kr=Zi[--er],Zi[er]=null,Mr=Zi[--er],Zi[er]=null}function o_(r,o){Zi[er++]=Mr,Zi[er++]=kr,Zi[er++]=Us,Mr=o.id,kr=o.overflow,Us=r}var Un=null,Ot=null,st=!1,Fs=null,tr=!1,im=Error(i(519));function qs(r){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gu(Xi(o,r)),im}function a_(r){var o=r.stateNode,u=r.type,f=r.memoizedProps;switch(o[Lt]=r,o[sn]=f,u){case"dialog":Xe("cancel",o),Xe("close",o);break;case"iframe":case"object":case"embed":Xe("load",o);break;case"video":case"audio":for(u=0;u<Uu.length;u++)Xe(Uu[u],o);break;case"source":Xe("error",o);break;case"img":case"image":case"link":Xe("error",o),Xe("load",o);break;case"details":Xe("toggle",o);break;case"input":Xe("invalid",o),Oo(o,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":Xe("invalid",o);break;case"textarea":Xe("invalid",o),Rs(o,f.value,f.defaultValue,f.children)}u=f.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||f.suppressHydrationWarning===!0||AT(o.textContent,u)?(f.popover!=null&&(Xe("beforetoggle",o),Xe("toggle",o)),f.onScroll!=null&&Xe("scroll",o),f.onScrollEnd!=null&&Xe("scrollend",o),f.onClick!=null&&(o.onclick=Nn),o=!0):o=!1,o||qs(r,!0)}function l_(r){for(Un=r.return;Un;)switch(Un.tag){case 5:case 31:case 13:tr=!1;return;case 27:case 3:tr=!0;return;default:Un=Un.return}}function Ha(r){if(r!==Un)return!1;if(!st)return l_(r),st=!0,!1;var o=r.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||Tg(r.type,r.memoizedProps)),u=!u),u&&Ot&&qs(r),l_(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Ot=kT(r)}else if(o===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Ot=kT(r)}else o===27?(o=Ot,eo(r.type)?(r=Cg,Cg=null,Ot=r):Ot=o):Ot=Un?ir(r.stateNode.nextSibling):null;return!0}function Yo(){Ot=Un=null,st=!1}function rm(){var r=Fs;return r!==null&&(Si===null?Si=r:Si.push.apply(Si,r),Fs=null),r}function gu(r){Fs===null?Fs=[r]:Fs.push(r)}var sm=H(null),Wo=null,es=null;function Bs(r,o,u){fe(sm,o._currentValue),o._currentValue=u}function ts(r){r._currentValue=sm.current,te(sm)}function om(r,o,u){for(;r!==null;){var f=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),r===u)break;r=r.return}}function am(r,o,u,f){var v=r.child;for(v!==null&&(v.return=r);v!==null;){var _=v.dependencies;if(_!==null){var A=v.child;_=_.firstContext;e:for(;_!==null;){var D=_;_=v;for(var B=0;B<o.length;B++)if(D.context===o[B]){_.lanes|=u,D=_.alternate,D!==null&&(D.lanes|=u),om(_.return,u,r),f||(A=null);break e}_=D.next}}else if(v.tag===18){if(A=v.return,A===null)throw Error(i(341));A.lanes|=u,_=A.alternate,_!==null&&(_.lanes|=u),om(A,u,r),A=null}else A=v.child;if(A!==null)A.return=v;else for(A=v;A!==null;){if(A===r){A=null;break}if(v=A.sibling,v!==null){v.return=A.return,A=v;break}A=A.return}v=A}}function Ga(r,o,u,f){r=null;for(var v=o,_=!1;v!==null;){if(!_){if((v.flags&524288)!==0)_=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var A=v.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var D=v.type;Mi(v.pendingProps.value,A.value)||(r!==null?r.push(D):r=[D])}}else if(v===Ue.current){if(A=v.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(r!==null?r.push(Hu):r=[Hu])}v=v.return}r!==null&&am(o,r,u,f),o.flags|=262144}function kf(r){for(r=r.firstContext;r!==null;){if(!Mi(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Qo(r){Wo=r,es=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Fn(r){return u_(Wo,r)}function Pf(r,o){return Wo===null&&Qo(r),u_(r,o)}function u_(r,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},es===null){if(r===null)throw Error(i(308));es=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else es=es.next=o;return u}var B1=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(u,f){r.push(f)}};this.abort=function(){o.aborted=!0,r.forEach(function(u){return u()})}},z1=t.unstable_scheduleCallback,H1=t.unstable_NormalPriority,fn={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lm(){return{controller:new B1,data:new Map,refCount:0}}function yu(r){r.refCount--,r.refCount===0&&z1(H1,function(){r.controller.abort()})}var vu=null,um=0,ja=0,$a=null;function G1(r,o){if(vu===null){var u=vu=[];um=0,ja=dg(),$a={status:"pending",value:void 0,then:function(f){u.push(f)}}}return um++,o.then(c_,c_),o}function c_(){if(--um===0&&vu!==null){$a!==null&&($a.status="fulfilled");var r=vu;vu=null,ja=0,$a=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function j1(r,o){var u=[],f={status:"pending",value:null,reason:null,then:function(v){u.push(v)}};return r.then(function(){f.status="fulfilled",f.value=o;for(var v=0;v<u.length;v++)(0,u[v])(o)},function(v){for(f.status="rejected",f.reason=v,v=0;v<u.length;v++)(0,u[v])(void 0)}),f}var f_=ee.S;ee.S=function(r,o){JE=ct(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&G1(r,o),f_!==null&&f_(r,o)};var Xo=H(null);function cm(){var r=Xo.current;return r!==null?r:Mt.pooledCache}function Lf(r,o){o===null?fe(Xo,Xo.current):fe(Xo,o.pool)}function d_(){var r=cm();return r===null?null:{parent:fn._currentValue,pool:r}}var Ka=Error(i(460)),fm=Error(i(474)),Vf=Error(i(542)),Of={then:function(){}};function h_(r){return r=r.status,r==="fulfilled"||r==="rejected"}function p_(r,o,u){switch(u=r[u],u===void 0?r.push(o):u!==o&&(o.then(Nn,Nn),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,g_(r),r;default:if(typeof o.status=="string")o.then(Nn,Nn);else{if(r=Mt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=o,r.status="pending",r.then(function(f){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=f}},function(f){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=f}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,g_(r),r}throw ea=o,Ka}}function Zo(r){try{var o=r._init;return o(r._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(ea=u,Ka):u}}var ea=null;function m_(){if(ea===null)throw Error(i(459));var r=ea;return ea=null,r}function g_(r){if(r===Ka||r===Vf)throw Error(i(483))}var Ja=null,_u=0;function Uf(r){var o=_u;return _u+=1,Ja===null&&(Ja=[]),p_(Ja,r,o)}function Eu(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function Ff(r,o){throw o.$$typeof===T?Error(i(525)):(r=Object.prototype.toString.call(o),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function y_(r){function o(J,j){if(r){var W=J.deletions;W===null?(J.deletions=[j],J.flags|=16):W.push(j)}}function u(J,j){if(!r)return null;for(;j!==null;)o(J,j),j=j.sibling;return null}function f(J){for(var j=new Map;J!==null;)J.key!==null?j.set(J.key,J):j.set(J.index,J),J=J.sibling;return j}function v(J,j){return J=Xr(J,j),J.index=0,J.sibling=null,J}function _(J,j,W){return J.index=W,r?(W=J.alternate,W!==null?(W=W.index,W<j?(J.flags|=67108866,j):W):(J.flags|=67108866,j)):(J.flags|=1048576,j)}function A(J){return r&&J.alternate===null&&(J.flags|=67108866),J}function D(J,j,W,se){return j===null||j.tag!==6?(j=Zp(W,J.mode,se),j.return=J,j):(j=v(j,W),j.return=J,j)}function B(J,j,W,se){var Re=W.type;return Re===P?re(J,j,W.props.children,se,W.key):j!==null&&(j.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===x&&Zo(Re)===j.type)?(j=v(j,W.props),Eu(j,W),j.return=J,j):(j=Df(W.type,W.key,W.props,null,J.mode,se),Eu(j,W),j.return=J,j)}function Q(J,j,W,se){return j===null||j.tag!==4||j.stateNode.containerInfo!==W.containerInfo||j.stateNode.implementation!==W.implementation?(j=em(W,J.mode,se),j.return=J,j):(j=v(j,W.children||[]),j.return=J,j)}function re(J,j,W,se,Re){return j===null||j.tag!==7?(j=Jo(W,J.mode,se,Re),j.return=J,j):(j=v(j,W),j.return=J,j)}function ae(J,j,W){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=Zp(""+j,J.mode,W),j.return=J,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case w:return W=Df(j.type,j.key,j.props,null,J.mode,W),Eu(W,j),W.return=J,W;case N:return j=em(j,J.mode,W),j.return=J,j;case x:return j=Zo(j),ae(J,j,W)}if(ve(j)||O(j))return j=Jo(j,J.mode,W,null),j.return=J,j;if(typeof j.then=="function")return ae(J,Uf(j),W);if(j.$$typeof===q)return ae(J,Pf(J,j),W);Ff(J,j)}return null}function Z(J,j,W,se){var Re=j!==null?j.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Re!==null?null:D(J,j,""+W,se);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case w:return W.key===Re?B(J,j,W,se):null;case N:return W.key===Re?Q(J,j,W,se):null;case x:return W=Zo(W),Z(J,j,W,se)}if(ve(W)||O(W))return Re!==null?null:re(J,j,W,se,null);if(typeof W.then=="function")return Z(J,j,Uf(W),se);if(W.$$typeof===q)return Z(J,j,Pf(J,W),se);Ff(J,W)}return null}function ne(J,j,W,se,Re){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return J=J.get(W)||null,D(j,J,""+se,Re);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case w:return J=J.get(se.key===null?W:se.key)||null,B(j,J,se,Re);case N:return J=J.get(se.key===null?W:se.key)||null,Q(j,J,se,Re);case x:return se=Zo(se),ne(J,j,W,se,Re)}if(ve(se)||O(se))return J=J.get(W)||null,re(j,J,se,Re,null);if(typeof se.then=="function")return ne(J,j,W,Uf(se),Re);if(se.$$typeof===q)return ne(J,j,W,Pf(j,se),Re);Ff(j,se)}return null}function be(J,j,W,se){for(var Re=null,ht=null,Ce=j,Ge=j=0,tt=null;Ce!==null&&Ge<W.length;Ge++){Ce.index>Ge?(tt=Ce,Ce=null):tt=Ce.sibling;var pt=Z(J,Ce,W[Ge],se);if(pt===null){Ce===null&&(Ce=tt);break}r&&Ce&&pt.alternate===null&&o(J,Ce),j=_(pt,j,Ge),ht===null?Re=pt:ht.sibling=pt,ht=pt,Ce=tt}if(Ge===W.length)return u(J,Ce),st&&Zr(J,Ge),Re;if(Ce===null){for(;Ge<W.length;Ge++)Ce=ae(J,W[Ge],se),Ce!==null&&(j=_(Ce,j,Ge),ht===null?Re=Ce:ht.sibling=Ce,ht=Ce);return st&&Zr(J,Ge),Re}for(Ce=f(Ce);Ge<W.length;Ge++)tt=ne(Ce,J,Ge,W[Ge],se),tt!==null&&(r&&tt.alternate!==null&&Ce.delete(tt.key===null?Ge:tt.key),j=_(tt,j,Ge),ht===null?Re=tt:ht.sibling=tt,ht=tt);return r&&Ce.forEach(function(so){return o(J,so)}),st&&Zr(J,Ge),Re}function Pe(J,j,W,se){if(W==null)throw Error(i(151));for(var Re=null,ht=null,Ce=j,Ge=j=0,tt=null,pt=W.next();Ce!==null&&!pt.done;Ge++,pt=W.next()){Ce.index>Ge?(tt=Ce,Ce=null):tt=Ce.sibling;var so=Z(J,Ce,pt.value,se);if(so===null){Ce===null&&(Ce=tt);break}r&&Ce&&so.alternate===null&&o(J,Ce),j=_(so,j,Ge),ht===null?Re=so:ht.sibling=so,ht=so,Ce=tt}if(pt.done)return u(J,Ce),st&&Zr(J,Ge),Re;if(Ce===null){for(;!pt.done;Ge++,pt=W.next())pt=ae(J,pt.value,se),pt!==null&&(j=_(pt,j,Ge),ht===null?Re=pt:ht.sibling=pt,ht=pt);return st&&Zr(J,Ge),Re}for(Ce=f(Ce);!pt.done;Ge++,pt=W.next())pt=ne(Ce,J,Ge,pt.value,se),pt!==null&&(r&&pt.alternate!==null&&Ce.delete(pt.key===null?Ge:pt.key),j=_(pt,j,Ge),ht===null?Re=pt:ht.sibling=pt,ht=pt);return r&&Ce.forEach(function(n2){return o(J,n2)}),st&&Zr(J,Ge),Re}function Nt(J,j,W,se){if(typeof W=="object"&&W!==null&&W.type===P&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case w:e:{for(var Re=W.key;j!==null;){if(j.key===Re){if(Re=W.type,Re===P){if(j.tag===7){u(J,j.sibling),se=v(j,W.props.children),se.return=J,J=se;break e}}else if(j.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===x&&Zo(Re)===j.type){u(J,j.sibling),se=v(j,W.props),Eu(se,W),se.return=J,J=se;break e}u(J,j);break}else o(J,j);j=j.sibling}W.type===P?(se=Jo(W.props.children,J.mode,se,W.key),se.return=J,J=se):(se=Df(W.type,W.key,W.props,null,J.mode,se),Eu(se,W),se.return=J,J=se)}return A(J);case N:e:{for(Re=W.key;j!==null;){if(j.key===Re)if(j.tag===4&&j.stateNode.containerInfo===W.containerInfo&&j.stateNode.implementation===W.implementation){u(J,j.sibling),se=v(j,W.children||[]),se.return=J,J=se;break e}else{u(J,j);break}else o(J,j);j=j.sibling}se=em(W,J.mode,se),se.return=J,J=se}return A(J);case x:return W=Zo(W),Nt(J,j,W,se)}if(ve(W))return be(J,j,W,se);if(O(W)){if(Re=O(W),typeof Re!="function")throw Error(i(150));return W=Re.call(W),Pe(J,j,W,se)}if(typeof W.then=="function")return Nt(J,j,Uf(W),se);if(W.$$typeof===q)return Nt(J,j,Pf(J,W),se);Ff(J,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,j!==null&&j.tag===6?(u(J,j.sibling),se=v(j,W),se.return=J,J=se):(u(J,j),se=Zp(W,J.mode,se),se.return=J,J=se),A(J)):u(J,j)}return function(J,j,W,se){try{_u=0;var Re=Nt(J,j,W,se);return Ja=null,Re}catch(Ce){if(Ce===Ka||Ce===Vf)throw Ce;var ht=ki(29,Ce,null,J.mode);return ht.lanes=se,ht.return=J,ht}finally{}}}var ta=y_(!0),v_=y_(!1),zs=!1;function dm(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hm(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Hs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Gs(r,o,u){var f=r.updateQueue;if(f===null)return null;if(f=f.shared,(yt&2)!==0){var v=f.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),f.pending=o,o=Nf(r),t_(r,null,u),o}return Rf(r,f,o,u),Nf(r)}function Tu(r,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var f=o.lanes;f&=r.pendingLanes,u|=f,o.lanes=u,Ht(r,u)}}function pm(r,o){var u=r.updateQueue,f=r.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var v=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var A={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};_===null?v=_=A:_=_.next=A,u=u.next}while(u!==null);_===null?v=_=o:_=_.next=o}else v=_=o;u={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:_,shared:f.shared,callbacks:f.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=o:r.next=o,u.lastBaseUpdate=o}var mm=!1;function Su(){if(mm){var r=$a;if(r!==null)throw r}}function bu(r,o,u,f){mm=!1;var v=r.updateQueue;zs=!1;var _=v.firstBaseUpdate,A=v.lastBaseUpdate,D=v.shared.pending;if(D!==null){v.shared.pending=null;var B=D,Q=B.next;B.next=null,A===null?_=Q:A.next=Q,A=B;var re=r.alternate;re!==null&&(re=re.updateQueue,D=re.lastBaseUpdate,D!==A&&(D===null?re.firstBaseUpdate=Q:D.next=Q,re.lastBaseUpdate=B))}if(_!==null){var ae=v.baseState;A=0,re=Q=B=null,D=_;do{var Z=D.lane&-536870913,ne=Z!==D.lane;if(ne?(et&Z)===Z:(f&Z)===Z){Z!==0&&Z===ja&&(mm=!0),re!==null&&(re=re.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var be=r,Pe=D;Z=o;var Nt=u;switch(Pe.tag){case 1:if(be=Pe.payload,typeof be=="function"){ae=be.call(Nt,ae,Z);break e}ae=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Pe.payload,Z=typeof be=="function"?be.call(Nt,ae,Z):be,Z==null)break e;ae=E({},ae,Z);break e;case 2:zs=!0}}Z=D.callback,Z!==null&&(r.flags|=64,ne&&(r.flags|=8192),ne=v.callbacks,ne===null?v.callbacks=[Z]:ne.push(Z))}else ne={lane:Z,tag:D.tag,payload:D.payload,callback:D.callback,next:null},re===null?(Q=re=ne,B=ae):re=re.next=ne,A|=Z;if(D=D.next,D===null){if(D=v.shared.pending,D===null)break;ne=D,D=ne.next,ne.next=null,v.lastBaseUpdate=ne,v.shared.pending=null}}while(!0);re===null&&(B=ae),v.baseState=B,v.firstBaseUpdate=Q,v.lastBaseUpdate=re,_===null&&(v.shared.lanes=0),Ys|=A,r.lanes=A,r.memoizedState=ae}}function __(r,o){if(typeof r!="function")throw Error(i(191,r));r.call(o)}function E_(r,o){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)__(u[r],o)}var Ya=H(null),qf=H(0);function T_(r,o){r=cs,fe(qf,r),fe(Ya,o),cs=r|o.baseLanes}function gm(){fe(qf,cs),fe(Ya,Ya.current)}function ym(){cs=qf.current,te(Ya),te(qf)}var Pi=H(null),nr=null;function js(r){var o=r.alternate;fe(on,on.current&1),fe(Pi,r),nr===null&&(o===null||Ya.current!==null||o.memoizedState!==null)&&(nr=r)}function vm(r){fe(on,on.current),fe(Pi,r),nr===null&&(nr=r)}function S_(r){r.tag===22?(fe(on,on.current),fe(Pi,r),nr===null&&(nr=r)):$s()}function $s(){fe(on,on.current),fe(Pi,Pi.current)}function Li(r){te(Pi),nr===r&&(nr=null),te(on)}var on=H(0);function Bf(r){for(var o=r;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Ag(u)||wg(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ns=0,He=null,xt=null,dn=null,zf=!1,Wa=!1,na=!1,Hf=0,Au=0,Qa=null,$1=0;function Qt(){throw Error(i(321))}function _m(r,o){if(o===null)return!1;for(var u=0;u<o.length&&u<r.length;u++)if(!Mi(r[u],o[u]))return!1;return!0}function Em(r,o,u,f,v,_){return ns=_,He=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,ee.H=r===null||r.memoizedState===null?sE:Lm,na=!1,_=u(f,v),na=!1,Wa&&(_=A_(o,u,f,v)),b_(r),_}function b_(r){ee.H=Iu;var o=xt!==null&&xt.next!==null;if(ns=0,dn=xt=He=null,zf=!1,Au=0,Qa=null,o)throw Error(i(300));r===null||hn||(r=r.dependencies,r!==null&&kf(r)&&(hn=!0))}function A_(r,o,u,f){He=r;var v=0;do{if(Wa&&(Qa=null),Au=0,Wa=!1,25<=v)throw Error(i(301));if(v+=1,dn=xt=null,r.updateQueue!=null){var _=r.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}ee.H=oE,_=o(u,f)}while(Wa);return _}function K1(){var r=ee.H,o=r.useState()[0];return o=typeof o.then=="function"?wu(o):o,r=r.useState()[0],(xt!==null?xt.memoizedState:null)!==r&&(He.flags|=1024),o}function Tm(){var r=Hf!==0;return Hf=0,r}function Sm(r,o,u){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~u}function bm(r){if(zf){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}zf=!1}ns=0,dn=xt=He=null,Wa=!1,Au=Hf=0,Qa=null}function fi(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?He.memoizedState=dn=r:dn=dn.next=r,dn}function an(){if(xt===null){var r=He.alternate;r=r!==null?r.memoizedState:null}else r=xt.next;var o=dn===null?He.memoizedState:dn.next;if(o!==null)dn=o,xt=r;else{if(r===null)throw He.alternate===null?Error(i(467)):Error(i(310));xt=r,r={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},dn===null?He.memoizedState=dn=r:dn=dn.next=r}return dn}function Gf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wu(r){var o=Au;return Au+=1,Qa===null&&(Qa=[]),r=p_(Qa,r,o),o=He,(dn===null?o.memoizedState:dn.next)===null&&(o=o.alternate,ee.H=o===null||o.memoizedState===null?sE:Lm),r}function jf(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return wu(r);if(r.$$typeof===q)return Fn(r)}throw Error(i(438,String(r)))}function Am(r){var o=null,u=He.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var f=He.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(o={data:f.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=Gf(),He.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(r),f=0;f<r;f++)u[f]=L;return o.index++,u}function is(r,o){return typeof o=="function"?o(r):o}function $f(r){var o=an();return wm(o,xt,r)}function wm(r,o,u){var f=r.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=u;var v=r.baseQueue,_=f.pending;if(_!==null){if(v!==null){var A=v.next;v.next=_.next,_.next=A}o.baseQueue=v=_,f.pending=null}if(_=r.baseState,v===null)r.memoizedState=_;else{o=v.next;var D=A=null,B=null,Q=o,re=!1;do{var ae=Q.lane&-536870913;if(ae!==Q.lane?(et&ae)===ae:(ns&ae)===ae){var Z=Q.revertLane;if(Z===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),ae===ja&&(re=!0);else if((ns&Z)===Z){Q=Q.next,Z===ja&&(re=!0);continue}else ae={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},B===null?(D=B=ae,A=_):B=B.next=ae,He.lanes|=Z,Ys|=Z;ae=Q.action,na&&u(_,ae),_=Q.hasEagerState?Q.eagerState:u(_,ae)}else Z={lane:ae,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},B===null?(D=B=Z,A=_):B=B.next=Z,He.lanes|=ae,Ys|=ae;Q=Q.next}while(Q!==null&&Q!==o);if(B===null?A=_:B.next=D,!Mi(_,r.memoizedState)&&(hn=!0,re&&(u=$a,u!==null)))throw u;r.memoizedState=_,r.baseState=A,r.baseQueue=B,f.lastRenderedState=_}return v===null&&(f.lanes=0),[r.memoizedState,f.dispatch]}function Cm(r){var o=an(),u=o.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=r;var f=u.dispatch,v=u.pending,_=o.memoizedState;if(v!==null){u.pending=null;var A=v=v.next;do _=r(_,A.action),A=A.next;while(A!==v);Mi(_,o.memoizedState)||(hn=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),u.lastRenderedState=_}return[_,f]}function w_(r,o,u){var f=He,v=an(),_=st;if(_){if(u===void 0)throw Error(i(407));u=u()}else u=o();var A=!Mi((xt||v).memoizedState,u);if(A&&(v.memoizedState=u,hn=!0),v=v.queue,Rm(x_.bind(null,f,v,r),[r]),v.getSnapshot!==o||A||dn!==null&&dn.memoizedState.tag&1){if(f.flags|=2048,Xa(9,{destroy:void 0},I_.bind(null,f,v,u,o),null),Mt===null)throw Error(i(349));_||(ns&127)!==0||C_(f,o,u)}return u}function C_(r,o,u){r.flags|=16384,r={getSnapshot:o,value:u},o=He.updateQueue,o===null?(o=Gf(),He.updateQueue=o,o.stores=[r]):(u=o.stores,u===null?o.stores=[r]:u.push(r))}function I_(r,o,u,f){o.value=u,o.getSnapshot=f,R_(o)&&N_(r)}function x_(r,o,u){return u(function(){R_(o)&&N_(r)})}function R_(r){var o=r.getSnapshot;r=r.value;try{var u=o();return!Mi(r,u)}catch{return!0}}function N_(r){var o=Ko(r,2);o!==null&&bi(o,r,2)}function Im(r){var o=fi();if(typeof r=="function"){var u=r;if(r=u(),na){oe(!0);try{u()}finally{oe(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:r},o}function D_(r,o,u,f){return r.baseState=u,wm(r,xt,typeof f=="function"?f:is)}function J1(r,o,u,f,v){if(Yf(r))throw Error(i(485));if(r=o.action,r!==null){var _={payload:v,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};ee.T!==null?u(!0):_.isTransition=!1,f(_),u=o.pending,u===null?(_.next=o.pending=_,M_(o,_)):(_.next=u.next,o.pending=u.next=_)}}function M_(r,o){var u=o.action,f=o.payload,v=r.state;if(o.isTransition){var _=ee.T,A={};ee.T=A;try{var D=u(v,f),B=ee.S;B!==null&&B(A,D),k_(r,o,D)}catch(Q){xm(r,o,Q)}finally{_!==null&&A.types!==null&&(_.types=A.types),ee.T=_}}else try{_=u(v,f),k_(r,o,_)}catch(Q){xm(r,o,Q)}}function k_(r,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(f){P_(r,o,f)},function(f){return xm(r,o,f)}):P_(r,o,u)}function P_(r,o,u){o.status="fulfilled",o.value=u,L_(o),r.state=u,o=r.pending,o!==null&&(u=o.next,u===o?r.pending=null:(u=u.next,o.next=u,M_(r,u)))}function xm(r,o,u){var f=r.pending;if(r.pending=null,f!==null){f=f.next;do o.status="rejected",o.reason=u,L_(o),o=o.next;while(o!==f)}r.action=null}function L_(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function V_(r,o){return o}function O_(r,o){if(st){var u=Mt.formState;if(u!==null){e:{var f=He;if(st){if(Ot){t:{for(var v=Ot,_=tr;v.nodeType!==8;){if(!_){v=null;break t}if(v=ir(v.nextSibling),v===null){v=null;break t}}_=v.data,v=_==="F!"||_==="F"?v:null}if(v){Ot=ir(v.nextSibling),f=v.data==="F!";break e}}qs(f)}f=!1}f&&(o=u[0])}}return u=fi(),u.memoizedState=u.baseState=o,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:V_,lastRenderedState:o},u.queue=f,u=nE.bind(null,He,f),f.dispatch=u,f=Im(!1),_=Pm.bind(null,He,!1,f.queue),f=fi(),v={state:o,dispatch:null,action:r,pending:null},f.queue=v,u=J1.bind(null,He,v,_,u),v.dispatch=u,f.memoizedState=r,[o,u,!1]}function U_(r){var o=an();return F_(o,xt,r)}function F_(r,o,u){if(o=wm(r,o,V_)[0],r=$f(is)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var f=wu(o)}catch(A){throw A===Ka?Vf:A}else f=o;o=an();var v=o.queue,_=v.dispatch;return u!==o.memoizedState&&(He.flags|=2048,Xa(9,{destroy:void 0},Y1.bind(null,v,u),null)),[f,_,r]}function Y1(r,o){r.action=o}function q_(r){var o=an(),u=xt;if(u!==null)return F_(o,u,r);an(),o=o.memoizedState,u=an();var f=u.queue.dispatch;return u.memoizedState=r,[o,f,!1]}function Xa(r,o,u,f){return r={tag:r,create:u,deps:f,inst:o,next:null},o=He.updateQueue,o===null&&(o=Gf(),He.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=r.next=r:(f=u.next,u.next=r,r.next=f,o.lastEffect=r),r}function B_(){return an().memoizedState}function Kf(r,o,u,f){var v=fi();He.flags|=r,v.memoizedState=Xa(1|o,{destroy:void 0},u,f===void 0?null:f)}function Jf(r,o,u,f){var v=an();f=f===void 0?null:f;var _=v.memoizedState.inst;xt!==null&&f!==null&&_m(f,xt.memoizedState.deps)?v.memoizedState=Xa(o,_,u,f):(He.flags|=r,v.memoizedState=Xa(1|o,_,u,f))}function z_(r,o){Kf(8390656,8,r,o)}function Rm(r,o){Jf(2048,8,r,o)}function W1(r){He.flags|=4;var o=He.updateQueue;if(o===null)o=Gf(),He.updateQueue=o,o.events=[r];else{var u=o.events;u===null?o.events=[r]:u.push(r)}}function H_(r){var o=an().memoizedState;return W1({ref:o,nextImpl:r}),function(){if((yt&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function G_(r,o){return Jf(4,2,r,o)}function j_(r,o){return Jf(4,4,r,o)}function $_(r,o){if(typeof o=="function"){r=r();var u=o(r);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function K_(r,o,u){u=u!=null?u.concat([r]):null,Jf(4,4,$_.bind(null,o,r),u)}function Nm(){}function J_(r,o){var u=an();o=o===void 0?null:o;var f=u.memoizedState;return o!==null&&_m(o,f[1])?f[0]:(u.memoizedState=[r,o],r)}function Y_(r,o){var u=an();o=o===void 0?null:o;var f=u.memoizedState;if(o!==null&&_m(o,f[1]))return f[0];if(f=r(),na){oe(!0);try{r()}finally{oe(!1)}}return u.memoizedState=[f,o],f}function Dm(r,o,u){return u===void 0||(ns&1073741824)!==0&&(et&261930)===0?r.memoizedState=o:(r.memoizedState=u,r=WE(),He.lanes|=r,Ys|=r,u)}function W_(r,o,u,f){return Mi(u,o)?u:Ya.current!==null?(r=Dm(r,u,f),Mi(r,o)||(hn=!0),r):(ns&42)===0||(ns&1073741824)!==0&&(et&261930)===0?(hn=!0,r.memoizedState=u):(r=WE(),He.lanes|=r,Ys|=r,o)}function Q_(r,o,u,f,v){var _=ce.p;ce.p=_!==0&&8>_?_:8;var A=ee.T,D={};ee.T=D,Pm(r,!1,o,u);try{var B=v(),Q=ee.S;if(Q!==null&&Q(D,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var re=j1(B,f);Cu(r,o,re,Ui(r))}else Cu(r,o,f,Ui(r))}catch(ae){Cu(r,o,{then:function(){},status:"rejected",reason:ae},Ui())}finally{ce.p=_,A!==null&&D.types!==null&&(A.types=D.types),ee.T=A}}function Q1(){}function Mm(r,o,u,f){if(r.tag!==5)throw Error(i(476));var v=X_(r).queue;Q_(r,v,o,he,u===null?Q1:function(){return Z_(r),u(f)})}function X_(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:he},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:u},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function Z_(r){var o=X_(r);o.next===null&&(o=r.alternate.memoizedState),Cu(r,o.next.queue,{},Ui())}function km(){return Fn(Hu)}function eE(){return an().memoizedState}function tE(){return an().memoizedState}function X1(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var u=Ui();r=Hs(u);var f=Gs(o,r,u);f!==null&&(bi(f,o,u),Tu(f,o,u)),o={cache:lm()},r.payload=o;return}o=o.return}}function Z1(r,o,u){var f=Ui();u={lane:f,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Yf(r)?iE(o,u):(u=Qp(r,o,u,f),u!==null&&(bi(u,r,f),rE(u,o,f)))}function nE(r,o,u){var f=Ui();Cu(r,o,u,f)}function Cu(r,o,u,f){var v={lane:f,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Yf(r))iE(o,v);else{var _=r.alternate;if(r.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var A=o.lastRenderedState,D=_(A,u);if(v.hasEagerState=!0,v.eagerState=D,Mi(D,A))return Rf(r,o,v,0),Mt===null&&xf(),!1}catch{}finally{}if(u=Qp(r,o,v,f),u!==null)return bi(u,r,f),rE(u,o,f),!0}return!1}function Pm(r,o,u,f){if(f={lane:2,revertLane:dg(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Yf(r)){if(o)throw Error(i(479))}else o=Qp(r,u,f,2),o!==null&&bi(o,r,2)}function Yf(r){var o=r.alternate;return r===He||o!==null&&o===He}function iE(r,o){Wa=zf=!0;var u=r.pending;u===null?o.next=o:(o.next=u.next,u.next=o),r.pending=o}function rE(r,o,u){if((u&4194048)!==0){var f=o.lanes;f&=r.pendingLanes,u|=f,o.lanes=u,Ht(r,u)}}var Iu={readContext:Fn,use:jf,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useLayoutEffect:Qt,useInsertionEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useSyncExternalStore:Qt,useId:Qt,useHostTransitionStatus:Qt,useFormState:Qt,useActionState:Qt,useOptimistic:Qt,useMemoCache:Qt,useCacheRefresh:Qt};Iu.useEffectEvent=Qt;var sE={readContext:Fn,use:jf,useCallback:function(r,o){return fi().memoizedState=[r,o===void 0?null:o],r},useContext:Fn,useEffect:z_,useImperativeHandle:function(r,o,u){u=u!=null?u.concat([r]):null,Kf(4194308,4,$_.bind(null,o,r),u)},useLayoutEffect:function(r,o){return Kf(4194308,4,r,o)},useInsertionEffect:function(r,o){Kf(4,2,r,o)},useMemo:function(r,o){var u=fi();o=o===void 0?null:o;var f=r();if(na){oe(!0);try{r()}finally{oe(!1)}}return u.memoizedState=[f,o],f},useReducer:function(r,o,u){var f=fi();if(u!==void 0){var v=u(o);if(na){oe(!0);try{u(o)}finally{oe(!1)}}}else v=o;return f.memoizedState=f.baseState=v,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:v},f.queue=r,r=r.dispatch=Z1.bind(null,He,r),[f.memoizedState,r]},useRef:function(r){var o=fi();return r={current:r},o.memoizedState=r},useState:function(r){r=Im(r);var o=r.queue,u=nE.bind(null,He,o);return o.dispatch=u,[r.memoizedState,u]},useDebugValue:Nm,useDeferredValue:function(r,o){var u=fi();return Dm(u,r,o)},useTransition:function(){var r=Im(!1);return r=Q_.bind(null,He,r.queue,!0,!1),fi().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,u){var f=He,v=fi();if(st){if(u===void 0)throw Error(i(407));u=u()}else{if(u=o(),Mt===null)throw Error(i(349));(et&127)!==0||C_(f,o,u)}v.memoizedState=u;var _={value:u,getSnapshot:o};return v.queue=_,z_(x_.bind(null,f,_,r),[r]),f.flags|=2048,Xa(9,{destroy:void 0},I_.bind(null,f,_,u,o),null),u},useId:function(){var r=fi(),o=Mt.identifierPrefix;if(st){var u=kr,f=Mr;u=(f&~(1<<32-Te(f)-1)).toString(32)+u,o="_"+o+"R_"+u,u=Hf++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=$1++,o="_"+o+"r_"+u.toString(32)+"_";return r.memoizedState=o},useHostTransitionStatus:km,useFormState:O_,useActionState:O_,useOptimistic:function(r){var o=fi();o.memoizedState=o.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=Pm.bind(null,He,!0,u),u.dispatch=o,[r,o]},useMemoCache:Am,useCacheRefresh:function(){return fi().memoizedState=X1.bind(null,He)},useEffectEvent:function(r){var o=fi(),u={impl:r};return o.memoizedState=u,function(){if((yt&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},Lm={readContext:Fn,use:jf,useCallback:J_,useContext:Fn,useEffect:Rm,useImperativeHandle:K_,useInsertionEffect:G_,useLayoutEffect:j_,useMemo:Y_,useReducer:$f,useRef:B_,useState:function(){return $f(is)},useDebugValue:Nm,useDeferredValue:function(r,o){var u=an();return W_(u,xt.memoizedState,r,o)},useTransition:function(){var r=$f(is)[0],o=an().memoizedState;return[typeof r=="boolean"?r:wu(r),o]},useSyncExternalStore:w_,useId:eE,useHostTransitionStatus:km,useFormState:U_,useActionState:U_,useOptimistic:function(r,o){var u=an();return D_(u,xt,r,o)},useMemoCache:Am,useCacheRefresh:tE};Lm.useEffectEvent=H_;var oE={readContext:Fn,use:jf,useCallback:J_,useContext:Fn,useEffect:Rm,useImperativeHandle:K_,useInsertionEffect:G_,useLayoutEffect:j_,useMemo:Y_,useReducer:Cm,useRef:B_,useState:function(){return Cm(is)},useDebugValue:Nm,useDeferredValue:function(r,o){var u=an();return xt===null?Dm(u,r,o):W_(u,xt.memoizedState,r,o)},useTransition:function(){var r=Cm(is)[0],o=an().memoizedState;return[typeof r=="boolean"?r:wu(r),o]},useSyncExternalStore:w_,useId:eE,useHostTransitionStatus:km,useFormState:q_,useActionState:q_,useOptimistic:function(r,o){var u=an();return xt!==null?D_(u,xt,r,o):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:Am,useCacheRefresh:tE};oE.useEffectEvent=H_;function Vm(r,o,u,f){o=r.memoizedState,u=u(f,o),u=u==null?o:E({},o,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var Om={enqueueSetState:function(r,o,u){r=r._reactInternals;var f=Ui(),v=Hs(f);v.payload=o,u!=null&&(v.callback=u),o=Gs(r,v,f),o!==null&&(bi(o,r,f),Tu(o,r,f))},enqueueReplaceState:function(r,o,u){r=r._reactInternals;var f=Ui(),v=Hs(f);v.tag=1,v.payload=o,u!=null&&(v.callback=u),o=Gs(r,v,f),o!==null&&(bi(o,r,f),Tu(o,r,f))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var u=Ui(),f=Hs(u);f.tag=2,o!=null&&(f.callback=o),o=Gs(r,f,u),o!==null&&(bi(o,r,u),Tu(o,r,u))}};function aE(r,o,u,f,v,_,A){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(f,_,A):o.prototype&&o.prototype.isPureReactComponent?!hu(u,f)||!hu(v,_):!0}function lE(r,o,u,f){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,f),o.state!==r&&Om.enqueueReplaceState(o,o.state,null)}function ia(r,o){var u=o;if("ref"in o){u={};for(var f in o)f!=="ref"&&(u[f]=o[f])}if(r=r.defaultProps){u===o&&(u=E({},u));for(var v in r)u[v]===void 0&&(u[v]=r[v])}return u}function uE(r){If(r)}function cE(r){console.error(r)}function fE(r){If(r)}function Wf(r,o){try{var u=r.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(f){setTimeout(function(){throw f})}}function dE(r,o,u){try{var f=r.onCaughtError;f(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Um(r,o,u){return u=Hs(u),u.tag=3,u.payload={element:null},u.callback=function(){Wf(r,o)},u}function hE(r){return r=Hs(r),r.tag=3,r}function pE(r,o,u,f){var v=u.type.getDerivedStateFromError;if(typeof v=="function"){var _=f.value;r.payload=function(){return v(_)},r.callback=function(){dE(o,u,f)}}var A=u.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(r.callback=function(){dE(o,u,f),typeof v!="function"&&(Ws===null?Ws=new Set([this]):Ws.add(this));var D=f.stack;this.componentDidCatch(f.value,{componentStack:D!==null?D:""})})}function eN(r,o,u,f,v){if(u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(o=u.alternate,o!==null&&Ga(o,u,v,!0),u=Pi.current,u!==null){switch(u.tag){case 31:case 13:return nr===null?ld():u.alternate===null&&Xt===0&&(Xt=3),u.flags&=-257,u.flags|=65536,u.lanes=v,f===Of?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([f]):o.add(f),ug(r,f,v)),!1;case 22:return u.flags|=65536,f===Of?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([f])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([f]):u.add(f)),ug(r,f,v)),!1}throw Error(i(435,u.tag))}return ug(r,f,v),ld(),!1}if(st)return o=Pi.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,f!==im&&(r=Error(i(422),{cause:f}),gu(Xi(r,u)))):(f!==im&&(o=Error(i(423),{cause:f}),gu(Xi(o,u))),r=r.current.alternate,r.flags|=65536,v&=-v,r.lanes|=v,f=Xi(f,u),v=Um(r.stateNode,f,v),pm(r,v),Xt!==4&&(Xt=2)),!1;var _=Error(i(520),{cause:f});if(_=Xi(_,u),Lu===null?Lu=[_]:Lu.push(_),Xt!==4&&(Xt=2),o===null)return!0;f=Xi(f,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,r=v&-v,u.lanes|=r,r=Um(u.stateNode,f,r),pm(u,r),!1;case 1:if(o=u.type,_=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ws===null||!Ws.has(_))))return u.flags|=65536,v&=-v,u.lanes|=v,v=hE(v),pE(v,r,u,f),pm(u,v),!1}u=u.return}while(u!==null);return!1}var Fm=Error(i(461)),hn=!1;function qn(r,o,u,f){o.child=r===null?v_(o,null,u,f):ta(o,r.child,u,f)}function mE(r,o,u,f,v){u=u.render;var _=o.ref;if("ref"in f){var A={};for(var D in f)D!=="ref"&&(A[D]=f[D])}else A=f;return Qo(o),f=Em(r,o,u,A,_,v),D=Tm(),r!==null&&!hn?(Sm(r,o,v),rs(r,o,v)):(st&&D&&tm(o),o.flags|=1,qn(r,o,f,v),o.child)}function gE(r,o,u,f,v){if(r===null){var _=u.type;return typeof _=="function"&&!Xp(_)&&_.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=_,yE(r,o,_,f,v)):(r=Df(u.type,null,f,o,o.mode,v),r.ref=o.ref,r.return=o,o.child=r)}if(_=r.child,!Km(r,v)){var A=_.memoizedProps;if(u=u.compare,u=u!==null?u:hu,u(A,f)&&r.ref===o.ref)return rs(r,o,v)}return o.flags|=1,r=Xr(_,f),r.ref=o.ref,r.return=o,o.child=r}function yE(r,o,u,f,v){if(r!==null){var _=r.memoizedProps;if(hu(_,f)&&r.ref===o.ref)if(hn=!1,o.pendingProps=f=_,Km(r,v))(r.flags&131072)!==0&&(hn=!0);else return o.lanes=r.lanes,rs(r,o,v)}return qm(r,o,u,f,v)}function vE(r,o,u,f){var v=f.children,_=r!==null?r.memoizedState:null;if(r===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((o.flags&128)!==0){if(_=_!==null?_.baseLanes|u:u,r!==null){for(f=o.child=r.child,v=0;f!==null;)v=v|f.lanes|f.childLanes,f=f.sibling;f=v&~_}else f=0,o.child=null;return _E(r,o,_,u,f)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&Lf(o,_!==null?_.cachePool:null),_!==null?T_(o,_):gm(),S_(o);else return f=o.lanes=536870912,_E(r,o,_!==null?_.baseLanes|u:u,u,f)}else _!==null?(Lf(o,_.cachePool),T_(o,_),$s(),o.memoizedState=null):(r!==null&&Lf(o,null),gm(),$s());return qn(r,o,v,u),o.child}function xu(r,o){return r!==null&&r.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function _E(r,o,u,f,v){var _=cm();return _=_===null?null:{parent:fn._currentValue,pool:_},o.memoizedState={baseLanes:u,cachePool:_},r!==null&&Lf(o,null),gm(),S_(o),r!==null&&Ga(r,o,f,!0),o.childLanes=v,null}function Qf(r,o){return o=Zf({mode:o.mode,children:o.children},r.mode),o.ref=r.ref,r.child=o,o.return=r,o}function EE(r,o,u){return ta(o,r.child,null,u),r=Qf(o,o.pendingProps),r.flags|=2,Li(o),o.memoizedState=null,r}function tN(r,o,u){var f=o.pendingProps,v=(o.flags&128)!==0;if(o.flags&=-129,r===null){if(st){if(f.mode==="hidden")return r=Qf(o,f),o.lanes=536870912,xu(null,r);if(vm(o),(r=Ot)?(r=MT(r,tr),r=r!==null&&r.data==="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Us!==null?{id:Mr,overflow:kr}:null,retryLane:536870912,hydrationErrors:null},u=i_(r),u.return=o,o.child=u,Un=o,Ot=null)):r=null,r===null)throw qs(o);return o.lanes=536870912,null}return Qf(o,f)}var _=r.memoizedState;if(_!==null){var A=_.dehydrated;if(vm(o),v)if(o.flags&256)o.flags&=-257,o=EE(r,o,u);else if(o.memoizedState!==null)o.child=r.child,o.flags|=128,o=null;else throw Error(i(558));else if(hn||Ga(r,o,u,!1),v=(u&r.childLanes)!==0,hn||v){if(f=Mt,f!==null&&(A=$n(f,u),A!==0&&A!==_.retryLane))throw _.retryLane=A,Ko(r,A),bi(f,r,A),Fm;ld(),o=EE(r,o,u)}else r=_.treeContext,Ot=ir(A.nextSibling),Un=o,st=!0,Fs=null,tr=!1,r!==null&&o_(o,r),o=Qf(o,f),o.flags|=4096;return o}return r=Xr(r.child,{mode:f.mode,children:f.children}),r.ref=o.ref,o.child=r,r.return=o,r}function Xf(r,o){var u=o.ref;if(u===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(r===null||r.ref!==u)&&(o.flags|=4194816)}}function qm(r,o,u,f,v){return Qo(o),u=Em(r,o,u,f,void 0,v),f=Tm(),r!==null&&!hn?(Sm(r,o,v),rs(r,o,v)):(st&&f&&tm(o),o.flags|=1,qn(r,o,u,v),o.child)}function TE(r,o,u,f,v,_){return Qo(o),o.updateQueue=null,u=A_(o,f,u,v),b_(r),f=Tm(),r!==null&&!hn?(Sm(r,o,_),rs(r,o,_)):(st&&f&&tm(o),o.flags|=1,qn(r,o,u,_),o.child)}function SE(r,o,u,f,v){if(Qo(o),o.stateNode===null){var _=qa,A=u.contextType;typeof A=="object"&&A!==null&&(_=Fn(A)),_=new u(f,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Om,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=f,_.state=o.memoizedState,_.refs={},dm(o),A=u.contextType,_.context=typeof A=="object"&&A!==null?Fn(A):qa,_.state=o.memoizedState,A=u.getDerivedStateFromProps,typeof A=="function"&&(Vm(o,u,A,f),_.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&Om.enqueueReplaceState(_,_.state,null),bu(o,f,_,v),Su(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),f=!0}else if(r===null){_=o.stateNode;var D=o.memoizedProps,B=ia(u,D);_.props=B;var Q=_.context,re=u.contextType;A=qa,typeof re=="object"&&re!==null&&(A=Fn(re));var ae=u.getDerivedStateFromProps;re=typeof ae=="function"||typeof _.getSnapshotBeforeUpdate=="function",D=o.pendingProps!==D,re||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(D||Q!==A)&&lE(o,_,f,A),zs=!1;var Z=o.memoizedState;_.state=Z,bu(o,f,_,v),Su(),Q=o.memoizedState,D||Z!==Q||zs?(typeof ae=="function"&&(Vm(o,u,ae,f),Q=o.memoizedState),(B=zs||aE(o,u,B,f,Z,Q,A))?(re||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=Q),_.props=f,_.state=Q,_.context=A,f=B):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{_=o.stateNode,hm(r,o),A=o.memoizedProps,re=ia(u,A),_.props=re,ae=o.pendingProps,Z=_.context,Q=u.contextType,B=qa,typeof Q=="object"&&Q!==null&&(B=Fn(Q)),D=u.getDerivedStateFromProps,(Q=typeof D=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==ae||Z!==B)&&lE(o,_,f,B),zs=!1,Z=o.memoizedState,_.state=Z,bu(o,f,_,v),Su();var ne=o.memoizedState;A!==ae||Z!==ne||zs||r!==null&&r.dependencies!==null&&kf(r.dependencies)?(typeof D=="function"&&(Vm(o,u,D,f),ne=o.memoizedState),(re=zs||aE(o,u,re,f,Z,ne,B)||r!==null&&r.dependencies!==null&&kf(r.dependencies))?(Q||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(f,ne,B),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(f,ne,B)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===r.memoizedProps&&Z===r.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&Z===r.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=ne),_.props=f,_.state=ne,_.context=B,f=re):(typeof _.componentDidUpdate!="function"||A===r.memoizedProps&&Z===r.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&Z===r.memoizedState||(o.flags|=1024),f=!1)}return _=f,Xf(r,o),f=(o.flags&128)!==0,_||f?(_=o.stateNode,u=f&&typeof u.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,r!==null&&f?(o.child=ta(o,r.child,null,v),o.child=ta(o,null,u,v)):qn(r,o,u,v),o.memoizedState=_.state,r=o.child):r=rs(r,o,v),r}function bE(r,o,u,f){return Yo(),o.flags|=256,qn(r,o,u,f),o.child}var Bm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zm(r){return{baseLanes:r,cachePool:d_()}}function Hm(r,o,u){return r=r!==null?r.childLanes&~u:0,o&&(r|=Oi),r}function AE(r,o,u){var f=o.pendingProps,v=!1,_=(o.flags&128)!==0,A;if((A=_)||(A=r!==null&&r.memoizedState===null?!1:(on.current&2)!==0),A&&(v=!0,o.flags&=-129),A=(o.flags&32)!==0,o.flags&=-33,r===null){if(st){if(v?js(o):$s(),(r=Ot)?(r=MT(r,tr),r=r!==null&&r.data!=="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Us!==null?{id:Mr,overflow:kr}:null,retryLane:536870912,hydrationErrors:null},u=i_(r),u.return=o,o.child=u,Un=o,Ot=null)):r=null,r===null)throw qs(o);return wg(r)?o.lanes=32:o.lanes=536870912,null}var D=f.children;return f=f.fallback,v?($s(),v=o.mode,D=Zf({mode:"hidden",children:D},v),f=Jo(f,v,u,null),D.return=o,f.return=o,D.sibling=f,o.child=D,f=o.child,f.memoizedState=zm(u),f.childLanes=Hm(r,A,u),o.memoizedState=Bm,xu(null,f)):(js(o),Gm(o,D))}var B=r.memoizedState;if(B!==null&&(D=B.dehydrated,D!==null)){if(_)o.flags&256?(js(o),o.flags&=-257,o=jm(r,o,u)):o.memoizedState!==null?($s(),o.child=r.child,o.flags|=128,o=null):($s(),D=f.fallback,v=o.mode,f=Zf({mode:"visible",children:f.children},v),D=Jo(D,v,u,null),D.flags|=2,f.return=o,D.return=o,f.sibling=D,o.child=f,ta(o,r.child,null,u),f=o.child,f.memoizedState=zm(u),f.childLanes=Hm(r,A,u),o.memoizedState=Bm,o=xu(null,f));else if(js(o),wg(D)){if(A=D.nextSibling&&D.nextSibling.dataset,A)var Q=A.dgst;A=Q,f=Error(i(419)),f.stack="",f.digest=A,gu({value:f,source:null,stack:null}),o=jm(r,o,u)}else if(hn||Ga(r,o,u,!1),A=(u&r.childLanes)!==0,hn||A){if(A=Mt,A!==null&&(f=$n(A,u),f!==0&&f!==B.retryLane))throw B.retryLane=f,Ko(r,f),bi(A,r,f),Fm;Ag(D)||ld(),o=jm(r,o,u)}else Ag(D)?(o.flags|=192,o.child=r.child,o=null):(r=B.treeContext,Ot=ir(D.nextSibling),Un=o,st=!0,Fs=null,tr=!1,r!==null&&o_(o,r),o=Gm(o,f.children),o.flags|=4096);return o}return v?($s(),D=f.fallback,v=o.mode,B=r.child,Q=B.sibling,f=Xr(B,{mode:"hidden",children:f.children}),f.subtreeFlags=B.subtreeFlags&65011712,Q!==null?D=Xr(Q,D):(D=Jo(D,v,u,null),D.flags|=2),D.return=o,f.return=o,f.sibling=D,o.child=f,xu(null,f),f=o.child,D=r.child.memoizedState,D===null?D=zm(u):(v=D.cachePool,v!==null?(B=fn._currentValue,v=v.parent!==B?{parent:B,pool:B}:v):v=d_(),D={baseLanes:D.baseLanes|u,cachePool:v}),f.memoizedState=D,f.childLanes=Hm(r,A,u),o.memoizedState=Bm,xu(r.child,f)):(js(o),u=r.child,r=u.sibling,u=Xr(u,{mode:"visible",children:f.children}),u.return=o,u.sibling=null,r!==null&&(A=o.deletions,A===null?(o.deletions=[r],o.flags|=16):A.push(r)),o.child=u,o.memoizedState=null,u)}function Gm(r,o){return o=Zf({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function Zf(r,o){return r=ki(22,r,null,o),r.lanes=0,r}function jm(r,o,u){return ta(o,r.child,null,u),r=Gm(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function wE(r,o,u){r.lanes|=o;var f=r.alternate;f!==null&&(f.lanes|=o),om(r.return,o,u)}function $m(r,o,u,f,v,_){var A=r.memoizedState;A===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:v,treeForkCount:_}:(A.isBackwards=o,A.rendering=null,A.renderingStartTime=0,A.last=f,A.tail=u,A.tailMode=v,A.treeForkCount=_)}function CE(r,o,u){var f=o.pendingProps,v=f.revealOrder,_=f.tail;f=f.children;var A=on.current,D=(A&2)!==0;if(D?(A=A&1|2,o.flags|=128):A&=1,fe(on,A),qn(r,o,f,u),f=st?mu:0,!D&&r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&wE(r,u,o);else if(r.tag===19)wE(r,u,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(v){case"forwards":for(u=o.child,v=null;u!==null;)r=u.alternate,r!==null&&Bf(r)===null&&(v=u),u=u.sibling;u=v,u===null?(v=o.child,o.child=null):(v=u.sibling,u.sibling=null),$m(o,!1,v,u,_,f);break;case"backwards":case"unstable_legacy-backwards":for(u=null,v=o.child,o.child=null;v!==null;){if(r=v.alternate,r!==null&&Bf(r)===null){o.child=v;break}r=v.sibling,v.sibling=u,u=v,v=r}$m(o,!0,u,null,_,f);break;case"together":$m(o,!1,null,null,void 0,f);break;default:o.memoizedState=null}return o.child}function rs(r,o,u){if(r!==null&&(o.dependencies=r.dependencies),Ys|=o.lanes,(u&o.childLanes)===0)if(r!==null){if(Ga(r,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(i(153));if(o.child!==null){for(r=o.child,u=Xr(r,r.pendingProps),o.child=u,u.return=o;r.sibling!==null;)r=r.sibling,u=u.sibling=Xr(r,r.pendingProps),u.return=o;u.sibling=null}return o.child}function Km(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&kf(r)))}function nN(r,o,u){switch(o.tag){case 3:$t(o,o.stateNode.containerInfo),Bs(o,fn,r.memoizedState.cache),Yo();break;case 27:case 5:Cn(o);break;case 4:$t(o,o.stateNode.containerInfo);break;case 10:Bs(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,vm(o),null;break;case 13:var f=o.memoizedState;if(f!==null)return f.dehydrated!==null?(js(o),o.flags|=128,null):(u&o.child.childLanes)!==0?AE(r,o,u):(js(o),r=rs(r,o,u),r!==null?r.sibling:null);js(o);break;case 19:var v=(r.flags&128)!==0;if(f=(u&o.childLanes)!==0,f||(Ga(r,o,u,!1),f=(u&o.childLanes)!==0),v){if(f)return CE(r,o,u);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),fe(on,on.current),f)break;return null;case 22:return o.lanes=0,vE(r,o,u,o.pendingProps);case 24:Bs(o,fn,r.memoizedState.cache)}return rs(r,o,u)}function IE(r,o,u){if(r!==null)if(r.memoizedProps!==o.pendingProps)hn=!0;else{if(!Km(r,u)&&(o.flags&128)===0)return hn=!1,nN(r,o,u);hn=(r.flags&131072)!==0}else hn=!1,st&&(o.flags&1048576)!==0&&s_(o,mu,o.index);switch(o.lanes=0,o.tag){case 16:e:{var f=o.pendingProps;if(r=Zo(o.elementType),o.type=r,typeof r=="function")Xp(r)?(f=ia(r,f),o.tag=1,o=SE(null,o,r,f,u)):(o.tag=0,o=qm(null,o,r,f,u));else{if(r!=null){var v=r.$$typeof;if(v===K){o.tag=11,o=mE(null,o,r,f,u);break e}else if(v===I){o.tag=14,o=gE(null,o,r,f,u);break e}}throw o=we(r)||r,Error(i(306,o,""))}}return o;case 0:return qm(r,o,o.type,o.pendingProps,u);case 1:return f=o.type,v=ia(f,o.pendingProps),SE(r,o,f,v,u);case 3:e:{if($t(o,o.stateNode.containerInfo),r===null)throw Error(i(387));f=o.pendingProps;var _=o.memoizedState;v=_.element,hm(r,o),bu(o,f,null,u);var A=o.memoizedState;if(f=A.cache,Bs(o,fn,f),f!==_.cache&&am(o,[fn],u,!0),Su(),f=A.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:A.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=bE(r,o,f,u);break e}else if(f!==v){v=Xi(Error(i(424)),o),gu(v),o=bE(r,o,f,u);break e}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Ot=ir(r.firstChild),Un=o,st=!0,Fs=null,tr=!0,u=v_(o,null,f,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Yo(),f===v){o=rs(r,o,u);break e}qn(r,o,f,u)}o=o.child}return o;case 26:return Xf(r,o),r===null?(u=UT(o.type,null,o.pendingProps,null))?o.memoizedState=u:st||(u=o.type,r=o.pendingProps,f=md(Me.current).createElement(u),f[Lt]=o,f[sn]=r,Bn(f,u,r),Gt(f),o.stateNode=f):o.memoizedState=UT(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return Cn(o),r===null&&st&&(f=o.stateNode=LT(o.type,o.pendingProps,Me.current),Un=o,tr=!0,v=Ot,eo(o.type)?(Cg=v,Ot=ir(f.firstChild)):Ot=v),qn(r,o,o.pendingProps.children,u),Xf(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&st&&((v=f=Ot)&&(f=MN(f,o.type,o.pendingProps,tr),f!==null?(o.stateNode=f,Un=o,Ot=ir(f.firstChild),tr=!1,v=!0):v=!1),v||qs(o)),Cn(o),v=o.type,_=o.pendingProps,A=r!==null?r.memoizedProps:null,f=_.children,Tg(v,_)?f=null:A!==null&&Tg(v,A)&&(o.flags|=32),o.memoizedState!==null&&(v=Em(r,o,K1,null,null,u),Hu._currentValue=v),Xf(r,o),qn(r,o,f,u),o.child;case 6:return r===null&&st&&((r=u=Ot)&&(u=kN(u,o.pendingProps,tr),u!==null?(o.stateNode=u,Un=o,Ot=null,r=!0):r=!1),r||qs(o)),null;case 13:return AE(r,o,u);case 4:return $t(o,o.stateNode.containerInfo),f=o.pendingProps,r===null?o.child=ta(o,null,f,u):qn(r,o,f,u),o.child;case 11:return mE(r,o,o.type,o.pendingProps,u);case 7:return qn(r,o,o.pendingProps,u),o.child;case 8:return qn(r,o,o.pendingProps.children,u),o.child;case 12:return qn(r,o,o.pendingProps.children,u),o.child;case 10:return f=o.pendingProps,Bs(o,o.type,f.value),qn(r,o,f.children,u),o.child;case 9:return v=o.type._context,f=o.pendingProps.children,Qo(o),v=Fn(v),f=f(v),o.flags|=1,qn(r,o,f,u),o.child;case 14:return gE(r,o,o.type,o.pendingProps,u);case 15:return yE(r,o,o.type,o.pendingProps,u);case 19:return CE(r,o,u);case 31:return tN(r,o,u);case 22:return vE(r,o,u,o.pendingProps);case 24:return Qo(o),f=Fn(fn),r===null?(v=cm(),v===null&&(v=Mt,_=lm(),v.pooledCache=_,_.refCount++,_!==null&&(v.pooledCacheLanes|=u),v=_),o.memoizedState={parent:f,cache:v},dm(o),Bs(o,fn,v)):((r.lanes&u)!==0&&(hm(r,o),bu(o,null,null,u),Su()),v=r.memoizedState,_=o.memoizedState,v.parent!==f?(v={parent:f,cache:f},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),Bs(o,fn,f)):(f=_.cache,Bs(o,fn,f),f!==v.cache&&am(o,[fn],u,!0))),qn(r,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function ss(r){r.flags|=4}function Jm(r,o,u,f,v){if((o=(r.mode&32)!==0)&&(o=!1),o){if(r.flags|=16777216,(v&335544128)===v)if(r.stateNode.complete)r.flags|=8192;else if(eT())r.flags|=8192;else throw ea=Of,fm}else r.flags&=-16777217}function xE(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!HT(o))if(eT())r.flags|=8192;else throw ea=Of,fm}function ed(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?Hi():536870912,r.lanes|=o,nl|=o)}function Ru(r,o){if(!st)switch(r.tailMode){case"hidden":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:f.sibling=null}}function Ut(r){var o=r.alternate!==null&&r.alternate.child===r.child,u=0,f=0;if(o)for(var v=r.child;v!==null;)u|=v.lanes|v.childLanes,f|=v.subtreeFlags&65011712,f|=v.flags&65011712,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)u|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=f,r.childLanes=u,o}function iN(r,o,u){var f=o.pendingProps;switch(nm(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(o),null;case 1:return Ut(o),null;case 3:return u=o.stateNode,f=null,r!==null&&(f=r.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),ts(fn),xe(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(Ha(o)?ss(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,rm())),Ut(o),null;case 26:var v=o.type,_=o.memoizedState;return r===null?(ss(o),_!==null?(Ut(o),xE(o,_)):(Ut(o),Jm(o,v,null,f,u))):_?_!==r.memoizedState?(ss(o),Ut(o),xE(o,_)):(Ut(o),o.flags&=-16777217):(r=r.memoizedProps,r!==f&&ss(o),Ut(o),Jm(o,v,r,f,u)),null;case 27:if(ut(o),u=Me.current,v=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==f&&ss(o);else{if(!f){if(o.stateNode===null)throw Error(i(166));return Ut(o),null}r=pe.current,Ha(o)?a_(o):(r=LT(v,f,u),o.stateNode=r,ss(o))}return Ut(o),null;case 5:if(ut(o),v=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==f&&ss(o);else{if(!f){if(o.stateNode===null)throw Error(i(166));return Ut(o),null}if(_=pe.current,Ha(o))a_(o);else{var A=md(Me.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof f.is=="string"?A.createElement("select",{is:f.is}):A.createElement("select"),f.multiple?_.multiple=!0:f.size&&(_.size=f.size);break;default:_=typeof f.is=="string"?A.createElement(v,{is:f.is}):A.createElement(v)}}_[Lt]=o,_[sn]=f;e:for(A=o.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===o)break e;for(;A.sibling===null;){if(A.return===null||A.return===o)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}o.stateNode=_;e:switch(Bn(_,v,f),v){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&ss(o)}}return Ut(o),Jm(o,o.type,r===null?null:r.memoizedProps,o.pendingProps,u),null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==f&&ss(o);else{if(typeof f!="string"&&o.stateNode===null)throw Error(i(166));if(r=Me.current,Ha(o)){if(r=o.stateNode,u=o.memoizedProps,f=null,v=Un,v!==null)switch(v.tag){case 27:case 5:f=v.memoizedProps}r[Lt]=o,r=!!(r.nodeValue===u||f!==null&&f.suppressHydrationWarning===!0||AT(r.nodeValue,u)),r||qs(o,!0)}else r=md(r).createTextNode(f),r[Lt]=o,o.stateNode=r}return Ut(o),null;case 31:if(u=o.memoizedState,r===null||r.memoizedState!==null){if(f=Ha(o),u!==null){if(r===null){if(!f)throw Error(i(318));if(r=o.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[Lt]=o}else Yo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ut(o),r=!1}else u=rm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=u),r=!0;if(!r)return o.flags&256?(Li(o),o):(Li(o),null);if((o.flags&128)!==0)throw Error(i(558))}return Ut(o),null;case 13:if(f=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(v=Ha(o),f!==null&&f.dehydrated!==null){if(r===null){if(!v)throw Error(i(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[Lt]=o}else Yo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ut(o),v=!1}else v=rm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(Li(o),o):(Li(o),null)}return Li(o),(o.flags&128)!==0?(o.lanes=u,o):(u=f!==null,r=r!==null&&r.memoizedState!==null,u&&(f=o.child,v=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(v=f.alternate.memoizedState.cachePool.pool),_=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(_=f.memoizedState.cachePool.pool),_!==v&&(f.flags|=2048)),u!==r&&u&&(o.child.flags|=8192),ed(o,o.updateQueue),Ut(o),null);case 4:return xe(),r===null&&gg(o.stateNode.containerInfo),Ut(o),null;case 10:return ts(o.type),Ut(o),null;case 19:if(te(on),f=o.memoizedState,f===null)return Ut(o),null;if(v=(o.flags&128)!==0,_=f.rendering,_===null)if(v)Ru(f,!1);else{if(Xt!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(_=Bf(r),_!==null){for(o.flags|=128,Ru(f,!1),r=_.updateQueue,o.updateQueue=r,ed(o,r),o.subtreeFlags=0,r=u,u=o.child;u!==null;)n_(u,r),u=u.sibling;return fe(on,on.current&1|2),st&&Zr(o,f.treeForkCount),o.child}r=r.sibling}f.tail!==null&&ct()>sd&&(o.flags|=128,v=!0,Ru(f,!1),o.lanes=4194304)}else{if(!v)if(r=Bf(_),r!==null){if(o.flags|=128,v=!0,r=r.updateQueue,o.updateQueue=r,ed(o,r),Ru(f,!0),f.tail===null&&f.tailMode==="hidden"&&!_.alternate&&!st)return Ut(o),null}else 2*ct()-f.renderingStartTime>sd&&u!==536870912&&(o.flags|=128,v=!0,Ru(f,!1),o.lanes=4194304);f.isBackwards?(_.sibling=o.child,o.child=_):(r=f.last,r!==null?r.sibling=_:o.child=_,f.last=_)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=ct(),r.sibling=null,u=on.current,fe(on,v?u&1|2:u&1),st&&Zr(o,f.treeForkCount),r):(Ut(o),null);case 22:case 23:return Li(o),ym(),f=o.memoizedState!==null,r!==null?r.memoizedState!==null!==f&&(o.flags|=8192):f&&(o.flags|=8192),f?(u&536870912)!==0&&(o.flags&128)===0&&(Ut(o),o.subtreeFlags&6&&(o.flags|=8192)):Ut(o),u=o.updateQueue,u!==null&&ed(o,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==u&&(o.flags|=2048),r!==null&&te(Xo),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),ts(fn),Ut(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function rN(r,o){switch(nm(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return ts(fn),xe(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return ut(o),null;case 31:if(o.memoizedState!==null){if(Li(o),o.alternate===null)throw Error(i(340));Yo()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 13:if(Li(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(i(340));Yo()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return te(on),null;case 4:return xe(),null;case 10:return ts(o.type),null;case 22:case 23:return Li(o),ym(),r!==null&&te(Xo),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return ts(fn),null;case 25:return null;default:return null}}function RE(r,o){switch(nm(o),o.tag){case 3:ts(fn),xe();break;case 26:case 27:case 5:ut(o);break;case 4:xe();break;case 31:o.memoizedState!==null&&Li(o);break;case 13:Li(o);break;case 19:te(on);break;case 10:ts(o.type);break;case 22:case 23:Li(o),ym(),r!==null&&te(Xo);break;case 24:ts(fn)}}function Nu(r,o){try{var u=o.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var v=f.next;u=v;do{if((u.tag&r)===r){f=void 0;var _=u.create,A=u.inst;f=_(),A.destroy=f}u=u.next}while(u!==v)}}catch(D){wt(o,o.return,D)}}function Ks(r,o,u){try{var f=o.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var _=v.next;f=_;do{if((f.tag&r)===r){var A=f.inst,D=A.destroy;if(D!==void 0){A.destroy=void 0,v=o;var B=u,Q=D;try{Q()}catch(re){wt(v,B,re)}}}f=f.next}while(f!==_)}}catch(re){wt(o,o.return,re)}}function NE(r){var o=r.updateQueue;if(o!==null){var u=r.stateNode;try{E_(o,u)}catch(f){wt(r,r.return,f)}}}function DE(r,o,u){u.props=ia(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(f){wt(r,o,f)}}function Du(r,o){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var f=r.stateNode;break;case 30:f=r.stateNode;break;default:f=r.stateNode}typeof u=="function"?r.refCleanup=u(f):u.current=f}}catch(v){wt(r,o,v)}}function Pr(r,o){var u=r.ref,f=r.refCleanup;if(u!==null)if(typeof f=="function")try{f()}catch(v){wt(r,o,v)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(v){wt(r,o,v)}else u.current=null}function ME(r){var o=r.type,u=r.memoizedProps,f=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&f.focus();break e;case"img":u.src?f.src=u.src:u.srcSet&&(f.srcset=u.srcSet)}}catch(v){wt(r,r.return,v)}}function Ym(r,o,u){try{var f=r.stateNode;CN(f,r.type,u,o),f[sn]=o}catch(v){wt(r,r.return,v)}}function kE(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&eo(r.type)||r.tag===4}function Wm(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||kE(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&eo(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Qm(r,o,u){var f=r.tag;if(f===5||f===6)r=r.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(r),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Nn));else if(f!==4&&(f===27&&eo(r.type)&&(u=r.stateNode,o=null),r=r.child,r!==null))for(Qm(r,o,u),r=r.sibling;r!==null;)Qm(r,o,u),r=r.sibling}function td(r,o,u){var f=r.tag;if(f===5||f===6)r=r.stateNode,o?u.insertBefore(r,o):u.appendChild(r);else if(f!==4&&(f===27&&eo(r.type)&&(u=r.stateNode),r=r.child,r!==null))for(td(r,o,u),r=r.sibling;r!==null;)td(r,o,u),r=r.sibling}function PE(r){var o=r.stateNode,u=r.memoizedProps;try{for(var f=r.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);Bn(o,f,u),o[Lt]=r,o[sn]=u}catch(_){wt(r,r.return,_)}}var os=!1,pn=!1,Xm=!1,LE=typeof WeakSet=="function"?WeakSet:Set,kn=null;function sN(r,o){if(r=r.containerInfo,_g=Sd,r=K0(r),jp(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var v=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var A=0,D=-1,B=-1,Q=0,re=0,ae=r,Z=null;t:for(;;){for(var ne;ae!==u||v!==0&&ae.nodeType!==3||(D=A+v),ae!==_||f!==0&&ae.nodeType!==3||(B=A+f),ae.nodeType===3&&(A+=ae.nodeValue.length),(ne=ae.firstChild)!==null;)Z=ae,ae=ne;for(;;){if(ae===r)break t;if(Z===u&&++Q===v&&(D=A),Z===_&&++re===f&&(B=A),(ne=ae.nextSibling)!==null)break;ae=Z,Z=ae.parentNode}ae=ne}u=D===-1||B===-1?null:{start:D,end:B}}else u=null}u=u||{start:0,end:0}}else u=null;for(Eg={focusedElem:r,selectionRange:u},Sd=!1,kn=o;kn!==null;)if(o=kn,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,kn=r;else for(;kn!==null;){switch(o=kn,_=o.alternate,r=o.flags,o.tag){case 0:if((r&4)!==0&&(r=o.updateQueue,r=r!==null?r.events:null,r!==null))for(u=0;u<r.length;u++)v=r[u],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&_!==null){r=void 0,u=o,v=_.memoizedProps,_=_.memoizedState,f=u.stateNode;try{var be=ia(u.type,v);r=f.getSnapshotBeforeUpdate(be,_),f.__reactInternalSnapshotBeforeUpdate=r}catch(Pe){wt(u,u.return,Pe)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,u=r.nodeType,u===9)bg(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":bg(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=o.sibling,r!==null){r.return=o.return,kn=r;break}kn=o.return}}function VE(r,o,u){var f=u.flags;switch(u.tag){case 0:case 11:case 15:ls(r,u),f&4&&Nu(5,u);break;case 1:if(ls(r,u),f&4)if(r=u.stateNode,o===null)try{r.componentDidMount()}catch(A){wt(u,u.return,A)}else{var v=ia(u.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(v,o,r.__reactInternalSnapshotBeforeUpdate)}catch(A){wt(u,u.return,A)}}f&64&&NE(u),f&512&&Du(u,u.return);break;case 3:if(ls(r,u),f&64&&(r=u.updateQueue,r!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{E_(r,o)}catch(A){wt(u,u.return,A)}}break;case 27:o===null&&f&4&&PE(u);case 26:case 5:ls(r,u),o===null&&f&4&&ME(u),f&512&&Du(u,u.return);break;case 12:ls(r,u);break;case 31:ls(r,u),f&4&&FE(r,u);break;case 13:ls(r,u),f&4&&qE(r,u),f&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=pN.bind(null,u),PN(r,u))));break;case 22:if(f=u.memoizedState!==null||os,!f){o=o!==null&&o.memoizedState!==null||pn,v=os;var _=pn;os=f,(pn=o)&&!_?us(r,u,(u.subtreeFlags&8772)!==0):ls(r,u),os=v,pn=_}break;case 30:break;default:ls(r,u)}}function OE(r){var o=r.alternate;o!==null&&(r.alternate=null,OE(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&Ki(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var jt=null,_i=!1;function as(r,o,u){for(u=u.child;u!==null;)UE(r,o,u),u=u.sibling}function UE(r,o,u){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(Rn,u)}catch{}switch(u.tag){case 26:pn||Pr(u,o),as(r,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:pn||Pr(u,o);var f=jt,v=_i;eo(u.type)&&(jt=u.stateNode,_i=!1),as(r,o,u),qu(u.stateNode),jt=f,_i=v;break;case 5:pn||Pr(u,o);case 6:if(f=jt,v=_i,jt=null,as(r,o,u),jt=f,_i=v,jt!==null)if(_i)try{(jt.nodeType===9?jt.body:jt.nodeName==="HTML"?jt.ownerDocument.body:jt).removeChild(u.stateNode)}catch(_){wt(u,o,_)}else try{jt.removeChild(u.stateNode)}catch(_){wt(u,o,_)}break;case 18:jt!==null&&(_i?(r=jt,NT(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),cl(r)):NT(jt,u.stateNode));break;case 4:f=jt,v=_i,jt=u.stateNode.containerInfo,_i=!0,as(r,o,u),jt=f,_i=v;break;case 0:case 11:case 14:case 15:Ks(2,u,o),pn||Ks(4,u,o),as(r,o,u);break;case 1:pn||(Pr(u,o),f=u.stateNode,typeof f.componentWillUnmount=="function"&&DE(u,o,f)),as(r,o,u);break;case 21:as(r,o,u);break;case 22:pn=(f=pn)||u.memoizedState!==null,as(r,o,u),pn=f;break;default:as(r,o,u)}}function FE(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{cl(r)}catch(u){wt(o,o.return,u)}}}function qE(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{cl(r)}catch(u){wt(o,o.return,u)}}function oN(r){switch(r.tag){case 31:case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new LE),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new LE),o;default:throw Error(i(435,r.tag))}}function nd(r,o){var u=oN(r);o.forEach(function(f){if(!u.has(f)){u.add(f);var v=mN.bind(null,r,f);f.then(v,v)}})}function Ei(r,o){var u=o.deletions;if(u!==null)for(var f=0;f<u.length;f++){var v=u[f],_=r,A=o,D=A;e:for(;D!==null;){switch(D.tag){case 27:if(eo(D.type)){jt=D.stateNode,_i=!1;break e}break;case 5:jt=D.stateNode,_i=!1;break e;case 3:case 4:jt=D.stateNode.containerInfo,_i=!0;break e}D=D.return}if(jt===null)throw Error(i(160));UE(_,A,v),jt=null,_i=!1,_=v.alternate,_!==null&&(_.return=null),v.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)BE(o,r),o=o.sibling}var gr=null;function BE(r,o){var u=r.alternate,f=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Ei(o,r),Ti(r),f&4&&(Ks(3,r,r.return),Nu(3,r),Ks(5,r,r.return));break;case 1:Ei(o,r),Ti(r),f&512&&(pn||u===null||Pr(u,u.return)),f&64&&os&&(r=r.updateQueue,r!==null&&(f=r.callbacks,f!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?f:u.concat(f))));break;case 26:var v=gr;if(Ei(o,r),Ti(r),f&512&&(pn||u===null||Pr(u,u.return)),f&4){var _=u!==null?u.memoizedState:null;if(f=r.memoizedState,u===null)if(f===null)if(r.stateNode===null){e:{f=r.type,u=r.memoizedProps,v=v.ownerDocument||v;t:switch(f){case"title":_=v.getElementsByTagName("title")[0],(!_||_[$i]||_[Lt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=v.createElement(f),v.head.insertBefore(_,v.querySelector("head > title"))),Bn(_,f,u),_[Lt]=r,Gt(_),f=_;break e;case"link":var A=BT("link","href",v).get(f+(u.href||""));if(A){for(var D=0;D<A.length;D++)if(_=A[D],_.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&_.getAttribute("rel")===(u.rel==null?null:u.rel)&&_.getAttribute("title")===(u.title==null?null:u.title)&&_.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){A.splice(D,1);break t}}_=v.createElement(f),Bn(_,f,u),v.head.appendChild(_);break;case"meta":if(A=BT("meta","content",v).get(f+(u.content||""))){for(D=0;D<A.length;D++)if(_=A[D],_.getAttribute("content")===(u.content==null?null:""+u.content)&&_.getAttribute("name")===(u.name==null?null:u.name)&&_.getAttribute("property")===(u.property==null?null:u.property)&&_.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&_.getAttribute("charset")===(u.charSet==null?null:u.charSet)){A.splice(D,1);break t}}_=v.createElement(f),Bn(_,f,u),v.head.appendChild(_);break;default:throw Error(i(468,f))}_[Lt]=r,Gt(_),f=_}r.stateNode=f}else zT(v,r.type,r.stateNode);else r.stateNode=qT(v,f,r.memoizedProps);else _!==f?(_===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):_.count--,f===null?zT(v,r.type,r.stateNode):qT(v,f,r.memoizedProps)):f===null&&r.stateNode!==null&&Ym(r,r.memoizedProps,u.memoizedProps)}break;case 27:Ei(o,r),Ti(r),f&512&&(pn||u===null||Pr(u,u.return)),u!==null&&f&4&&Ym(r,r.memoizedProps,u.memoizedProps);break;case 5:if(Ei(o,r),Ti(r),f&512&&(pn||u===null||Pr(u,u.return)),r.flags&32){v=r.stateNode;try{Wi(v,"")}catch(be){wt(r,r.return,be)}}f&4&&r.stateNode!=null&&(v=r.memoizedProps,Ym(r,v,u!==null?u.memoizedProps:v)),f&1024&&(Xm=!0);break;case 6:if(Ei(o,r),Ti(r),f&4){if(r.stateNode===null)throw Error(i(162));f=r.memoizedProps,u=r.stateNode;try{u.nodeValue=f}catch(be){wt(r,r.return,be)}}break;case 3:if(vd=null,v=gr,gr=gd(o.containerInfo),Ei(o,r),gr=v,Ti(r),f&4&&u!==null&&u.memoizedState.isDehydrated)try{cl(o.containerInfo)}catch(be){wt(r,r.return,be)}Xm&&(Xm=!1,zE(r));break;case 4:f=gr,gr=gd(r.stateNode.containerInfo),Ei(o,r),Ti(r),gr=f;break;case 12:Ei(o,r),Ti(r);break;case 31:Ei(o,r),Ti(r),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,nd(r,f)));break;case 13:Ei(o,r),Ti(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(rd=ct()),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,nd(r,f)));break;case 22:v=r.memoizedState!==null;var B=u!==null&&u.memoizedState!==null,Q=os,re=pn;if(os=Q||v,pn=re||B,Ei(o,r),pn=re,os=Q,Ti(r),f&8192)e:for(o=r.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(u===null||B||os||pn||ra(r)),u=null,o=r;;){if(o.tag===5||o.tag===26){if(u===null){B=u=o;try{if(_=B.stateNode,v)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{D=B.stateNode;var ae=B.memoizedProps.style,Z=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;D.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(be){wt(B,B.return,be)}}}else if(o.tag===6){if(u===null){B=o;try{B.stateNode.nodeValue=v?"":B.memoizedProps}catch(be){wt(B,B.return,be)}}}else if(o.tag===18){if(u===null){B=o;try{var ne=B.stateNode;v?DT(ne,!0):DT(B.stateNode,!1)}catch(be){wt(B,B.return,be)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}f&4&&(f=r.updateQueue,f!==null&&(u=f.retryQueue,u!==null&&(f.retryQueue=null,nd(r,u))));break;case 19:Ei(o,r),Ti(r),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,nd(r,f)));break;case 30:break;case 21:break;default:Ei(o,r),Ti(r)}}function Ti(r){var o=r.flags;if(o&2){try{for(var u,f=r.return;f!==null;){if(kE(f)){u=f;break}f=f.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var v=u.stateNode,_=Wm(r);td(r,_,v);break;case 5:var A=u.stateNode;u.flags&32&&(Wi(A,""),u.flags&=-33);var D=Wm(r);td(r,D,A);break;case 3:case 4:var B=u.stateNode.containerInfo,Q=Wm(r);Qm(r,Q,B);break;default:throw Error(i(161))}}catch(re){wt(r,r.return,re)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function zE(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;zE(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function ls(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)VE(r,o.alternate,o),o=o.sibling}function ra(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:Ks(4,o,o.return),ra(o);break;case 1:Pr(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&DE(o,o.return,u),ra(o);break;case 27:qu(o.stateNode);case 26:case 5:Pr(o,o.return),ra(o);break;case 22:o.memoizedState===null&&ra(o);break;case 30:ra(o);break;default:ra(o)}r=r.sibling}}function us(r,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var f=o.alternate,v=r,_=o,A=_.flags;switch(_.tag){case 0:case 11:case 15:us(v,_,u),Nu(4,_);break;case 1:if(us(v,_,u),f=_,v=f.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(Q){wt(f,f.return,Q)}if(f=_,v=f.updateQueue,v!==null){var D=f.stateNode;try{var B=v.shared.hiddenCallbacks;if(B!==null)for(v.shared.hiddenCallbacks=null,v=0;v<B.length;v++)__(B[v],D)}catch(Q){wt(f,f.return,Q)}}u&&A&64&&NE(_),Du(_,_.return);break;case 27:PE(_);case 26:case 5:us(v,_,u),u&&f===null&&A&4&&ME(_),Du(_,_.return);break;case 12:us(v,_,u);break;case 31:us(v,_,u),u&&A&4&&FE(v,_);break;case 13:us(v,_,u),u&&A&4&&qE(v,_);break;case 22:_.memoizedState===null&&us(v,_,u),Du(_,_.return);break;case 30:break;default:us(v,_,u)}o=o.sibling}}function Zm(r,o){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&yu(u))}function eg(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&yu(r))}function yr(r,o,u,f){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)HE(r,o,u,f),o=o.sibling}function HE(r,o,u,f){var v=o.flags;switch(o.tag){case 0:case 11:case 15:yr(r,o,u,f),v&2048&&Nu(9,o);break;case 1:yr(r,o,u,f);break;case 3:yr(r,o,u,f),v&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&yu(r)));break;case 12:if(v&2048){yr(r,o,u,f),r=o.stateNode;try{var _=o.memoizedProps,A=_.id,D=_.onPostCommit;typeof D=="function"&&D(A,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(B){wt(o,o.return,B)}}else yr(r,o,u,f);break;case 31:yr(r,o,u,f);break;case 13:yr(r,o,u,f);break;case 23:break;case 22:_=o.stateNode,A=o.alternate,o.memoizedState!==null?_._visibility&2?yr(r,o,u,f):Mu(r,o):_._visibility&2?yr(r,o,u,f):(_._visibility|=2,Za(r,o,u,f,(o.subtreeFlags&10256)!==0||!1)),v&2048&&Zm(A,o);break;case 24:yr(r,o,u,f),v&2048&&eg(o.alternate,o);break;default:yr(r,o,u,f)}}function Za(r,o,u,f,v){for(v=v&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var _=r,A=o,D=u,B=f,Q=A.flags;switch(A.tag){case 0:case 11:case 15:Za(_,A,D,B,v),Nu(8,A);break;case 23:break;case 22:var re=A.stateNode;A.memoizedState!==null?re._visibility&2?Za(_,A,D,B,v):Mu(_,A):(re._visibility|=2,Za(_,A,D,B,v)),v&&Q&2048&&Zm(A.alternate,A);break;case 24:Za(_,A,D,B,v),v&&Q&2048&&eg(A.alternate,A);break;default:Za(_,A,D,B,v)}o=o.sibling}}function Mu(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=r,f=o,v=f.flags;switch(f.tag){case 22:Mu(u,f),v&2048&&Zm(f.alternate,f);break;case 24:Mu(u,f),v&2048&&eg(f.alternate,f);break;default:Mu(u,f)}o=o.sibling}}var ku=8192;function el(r,o,u){if(r.subtreeFlags&ku)for(r=r.child;r!==null;)GE(r,o,u),r=r.sibling}function GE(r,o,u){switch(r.tag){case 26:el(r,o,u),r.flags&ku&&r.memoizedState!==null&&$N(u,gr,r.memoizedState,r.memoizedProps);break;case 5:el(r,o,u);break;case 3:case 4:var f=gr;gr=gd(r.stateNode.containerInfo),el(r,o,u),gr=f;break;case 22:r.memoizedState===null&&(f=r.alternate,f!==null&&f.memoizedState!==null?(f=ku,ku=16777216,el(r,o,u),ku=f):el(r,o,u));break;default:el(r,o,u)}}function jE(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function Pu(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var f=o[u];kn=f,KE(f,r)}jE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)$E(r),r=r.sibling}function $E(r){switch(r.tag){case 0:case 11:case 15:Pu(r),r.flags&2048&&Ks(9,r,r.return);break;case 3:Pu(r);break;case 12:Pu(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,id(r)):Pu(r);break;default:Pu(r)}}function id(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var f=o[u];kn=f,KE(f,r)}jE(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:Ks(8,o,o.return),id(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,id(o));break;default:id(o)}r=r.sibling}}function KE(r,o){for(;kn!==null;){var u=kn;switch(u.tag){case 0:case 11:case 15:Ks(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var f=u.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:yu(u.memoizedState.cache)}if(f=u.child,f!==null)f.return=u,kn=f;else e:for(u=r;kn!==null;){f=kn;var v=f.sibling,_=f.return;if(OE(f),f===u){kn=null;break e}if(v!==null){v.return=_,kn=v;break e}kn=_}}}var aN={getCacheForType:function(r){var o=Fn(fn),u=o.data.get(r);return u===void 0&&(u=r(),o.data.set(r,u)),u},cacheSignal:function(){return Fn(fn).controller.signal}},lN=typeof WeakMap=="function"?WeakMap:Map,yt=0,Mt=null,Qe=null,et=0,At=0,Vi=null,Js=!1,tl=!1,tg=!1,cs=0,Xt=0,Ys=0,sa=0,ng=0,Oi=0,nl=0,Lu=null,Si=null,ig=!1,rd=0,JE=0,sd=1/0,od=null,Ws=null,bn=0,Qs=null,il=null,fs=0,rg=0,sg=null,YE=null,Vu=0,og=null;function Ui(){return(yt&2)!==0&&et!==0?et&-et:ee.T!==null?dg():si()}function WE(){if(Oi===0)if((et&536870912)===0||st){var r=We;We<<=1,(We&3932160)===0&&(We=262144),Oi=r}else Oi=536870912;return r=Pi.current,r!==null&&(r.flags|=32),Oi}function bi(r,o,u){(r===Mt&&(At===2||At===9)||r.cancelPendingCommit!==null)&&(rl(r,0),Xs(r,et,Oi,!1)),kt(r,u),((yt&2)===0||r!==Mt)&&(r===Mt&&((yt&2)===0&&(sa|=u),Xt===4&&Xs(r,et,Oi,!1)),Lr(r))}function QE(r,o,u){if((yt&6)!==0)throw Error(i(327));var f=!u&&(o&127)===0&&(o&r.expiredLanes)===0||$e(r,o),v=f?fN(r,o):lg(r,o,!0),_=f;do{if(v===0){tl&&!f&&Xs(r,o,0,!1);break}else{if(u=r.current.alternate,_&&!uN(u)){v=lg(r,o,!1),_=!1;continue}if(v===2){if(_=o,r.errorRecoveryDisabledLanes&_)var A=0;else A=r.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){o=A;e:{var D=r;v=Lu;var B=D.current.memoizedState.isDehydrated;if(B&&(rl(D,A).flags|=256),A=lg(D,A,!1),A!==2){if(tg&&!B){D.errorRecoveryDisabledLanes|=_,sa|=_,v=4;break e}_=Si,Si=v,_!==null&&(Si===null?Si=_:Si.push.apply(Si,_))}v=A}if(_=!1,v!==2)continue}}if(v===1){rl(r,0),Xs(r,o,0,!0);break}e:{switch(f=r,_=v,_){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:Xs(f,o,Oi,!Js);break e;case 2:Si=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(v=rd+300-ct(),10<v)){if(Xs(f,o,Oi,!Js),ke(f,0,!0)!==0)break e;fs=o,f.timeoutHandle=xT(XE.bind(null,f,u,Si,od,ig,o,Oi,sa,nl,Js,_,"Throttled",-0,0),v);break e}XE(f,u,Si,od,ig,o,Oi,sa,nl,Js,_,null,-0,0)}}break}while(!0);Lr(r)}function XE(r,o,u,f,v,_,A,D,B,Q,re,ae,Z,ne){if(r.timeoutHandle=-1,ae=o.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Nn},GE(o,_,ae);var be=(_&62914560)===_?rd-ct():(_&4194048)===_?JE-ct():0;if(be=KN(ae,be),be!==null){fs=_,r.cancelPendingCommit=be(oT.bind(null,r,o,_,u,f,v,A,D,B,re,ae,null,Z,ne)),Xs(r,_,A,!Q);return}}oT(r,o,_,u,f,v,A,D,B)}function uN(r){for(var o=r;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var f=0;f<u.length;f++){var v=u[f],_=v.getSnapshot;v=v.value;try{if(!Mi(_(),v))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Xs(r,o,u,f){o&=~ng,o&=~sa,r.suspendedLanes|=o,r.pingedLanes&=~o,f&&(r.warmLanes|=o),f=r.expirationTimes;for(var v=o;0<v;){var _=31-Te(v),A=1<<_;f[_]=-1,v&=~A}u!==0&&ri(r,u,o)}function ad(){return(yt&6)===0?(Ou(0),!1):!0}function ag(){if(Qe!==null){if(At===0)var r=Qe.return;else r=Qe,es=Wo=null,bm(r),Ja=null,_u=0,r=Qe;for(;r!==null;)RE(r.alternate,r),r=r.return;Qe=null}}function rl(r,o){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,RN(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),fs=0,ag(),Mt=r,Qe=u=Xr(r.current,null),et=o,At=0,Vi=null,Js=!1,tl=$e(r,o),tg=!1,nl=Oi=ng=sa=Ys=Xt=0,Si=Lu=null,ig=!1,(o&8)!==0&&(o|=o&32);var f=r.entangledLanes;if(f!==0)for(r=r.entanglements,f&=o;0<f;){var v=31-Te(f),_=1<<v;o|=r[v],f&=~_}return cs=o,xf(),u}function ZE(r,o){He=null,ee.H=Iu,o===Ka||o===Vf?(o=m_(),At=3):o===fm?(o=m_(),At=4):At=o===Fm?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Vi=o,Qe===null&&(Xt=1,Wf(r,Xi(o,r.current)))}function eT(){var r=Pi.current;return r===null?!0:(et&4194048)===et?nr===null:(et&62914560)===et||(et&536870912)!==0?r===nr:!1}function tT(){var r=ee.H;return ee.H=Iu,r===null?Iu:r}function nT(){var r=ee.A;return ee.A=aN,r}function ld(){Xt=4,Js||(et&4194048)!==et&&Pi.current!==null||(tl=!0),(Ys&134217727)===0&&(sa&134217727)===0||Mt===null||Xs(Mt,et,Oi,!1)}function lg(r,o,u){var f=yt;yt|=2;var v=tT(),_=nT();(Mt!==r||et!==o)&&(od=null,rl(r,o)),o=!1;var A=Xt;e:do try{if(At!==0&&Qe!==null){var D=Qe,B=Vi;switch(At){case 8:ag(),A=6;break e;case 3:case 2:case 9:case 6:Pi.current===null&&(o=!0);var Q=At;if(At=0,Vi=null,sl(r,D,B,Q),u&&tl){A=0;break e}break;default:Q=At,At=0,Vi=null,sl(r,D,B,Q)}}cN(),A=Xt;break}catch(re){ZE(r,re)}while(!0);return o&&r.shellSuspendCounter++,es=Wo=null,yt=f,ee.H=v,ee.A=_,Qe===null&&(Mt=null,et=0,xf()),A}function cN(){for(;Qe!==null;)iT(Qe)}function fN(r,o){var u=yt;yt|=2;var f=tT(),v=nT();Mt!==r||et!==o?(od=null,sd=ct()+500,rl(r,o)):tl=$e(r,o);e:do try{if(At!==0&&Qe!==null){o=Qe;var _=Vi;t:switch(At){case 1:At=0,Vi=null,sl(r,o,_,1);break;case 2:case 9:if(h_(_)){At=0,Vi=null,rT(o);break}o=function(){At!==2&&At!==9||Mt!==r||(At=7),Lr(r)},_.then(o,o);break e;case 3:At=7;break e;case 4:At=5;break e;case 7:h_(_)?(At=0,Vi=null,rT(o)):(At=0,Vi=null,sl(r,o,_,7));break;case 5:var A=null;switch(Qe.tag){case 26:A=Qe.memoizedState;case 5:case 27:var D=Qe;if(A?HT(A):D.stateNode.complete){At=0,Vi=null;var B=D.sibling;if(B!==null)Qe=B;else{var Q=D.return;Q!==null?(Qe=Q,ud(Q)):Qe=null}break t}}At=0,Vi=null,sl(r,o,_,5);break;case 6:At=0,Vi=null,sl(r,o,_,6);break;case 8:ag(),Xt=6;break e;default:throw Error(i(462))}}dN();break}catch(re){ZE(r,re)}while(!0);return es=Wo=null,ee.H=f,ee.A=v,yt=u,Qe!==null?0:(Mt=null,et=0,xf(),Xt)}function dN(){for(;Qe!==null&&!cr();)iT(Qe)}function iT(r){var o=IE(r.alternate,r,cs);r.memoizedProps=r.pendingProps,o===null?ud(r):Qe=o}function rT(r){var o=r,u=o.alternate;switch(o.tag){case 15:case 0:o=TE(u,o,o.pendingProps,o.type,void 0,et);break;case 11:o=TE(u,o,o.pendingProps,o.type.render,o.ref,et);break;case 5:bm(o);default:RE(u,o),o=Qe=n_(o,cs),o=IE(u,o,cs)}r.memoizedProps=r.pendingProps,o===null?ud(r):Qe=o}function sl(r,o,u,f){es=Wo=null,bm(o),Ja=null,_u=0;var v=o.return;try{if(eN(r,v,o,u,et)){Xt=1,Wf(r,Xi(u,r.current)),Qe=null;return}}catch(_){if(v!==null)throw Qe=v,_;Xt=1,Wf(r,Xi(u,r.current)),Qe=null;return}o.flags&32768?(st||f===1?r=!0:tl||(et&536870912)!==0?r=!1:(Js=r=!0,(f===2||f===9||f===3||f===6)&&(f=Pi.current,f!==null&&f.tag===13&&(f.flags|=16384))),sT(o,r)):ud(o)}function ud(r){var o=r;do{if((o.flags&32768)!==0){sT(o,Js);return}r=o.return;var u=iN(o.alternate,o,cs);if(u!==null){Qe=u;return}if(o=o.sibling,o!==null){Qe=o;return}Qe=o=r}while(o!==null);Xt===0&&(Xt=5)}function sT(r,o){do{var u=rN(r.alternate,r);if(u!==null){u.flags&=32767,Qe=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(r=r.sibling,r!==null)){Qe=r;return}Qe=r=u}while(r!==null);Xt=6,Qe=null}function oT(r,o,u,f,v,_,A,D,B){r.cancelPendingCommit=null;do cd();while(bn!==0);if((yt&6)!==0)throw Error(i(327));if(o!==null){if(o===r.current)throw Error(i(177));if(_=o.lanes|o.childLanes,_|=Wp,bt(r,u,_,A,D,B),r===Mt&&(Qe=Mt=null,et=0),il=o,Qs=r,fs=u,rg=_,sg=v,YE=f,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,gN(Yt,function(){return fT(),null})):(r.callbackNode=null,r.callbackPriority=0),f=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||f){f=ee.T,ee.T=null,v=ce.p,ce.p=2,A=yt,yt|=4;try{sN(r,o,u)}finally{yt=A,ce.p=v,ee.T=f}}bn=1,aT(),lT(),uT()}}function aT(){if(bn===1){bn=0;var r=Qs,o=il,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=ee.T,ee.T=null;var f=ce.p;ce.p=2;var v=yt;yt|=4;try{BE(o,r);var _=Eg,A=K0(r.containerInfo),D=_.focusedElem,B=_.selectionRange;if(A!==D&&D&&D.ownerDocument&&$0(D.ownerDocument.documentElement,D)){if(B!==null&&jp(D)){var Q=B.start,re=B.end;if(re===void 0&&(re=Q),"selectionStart"in D)D.selectionStart=Q,D.selectionEnd=Math.min(re,D.value.length);else{var ae=D.ownerDocument||document,Z=ae&&ae.defaultView||window;if(Z.getSelection){var ne=Z.getSelection(),be=D.textContent.length,Pe=Math.min(B.start,be),Nt=B.end===void 0?Pe:Math.min(B.end,be);!ne.extend&&Pe>Nt&&(A=Nt,Nt=Pe,Pe=A);var J=j0(D,Pe),j=j0(D,Nt);if(J&&j&&(ne.rangeCount!==1||ne.anchorNode!==J.node||ne.anchorOffset!==J.offset||ne.focusNode!==j.node||ne.focusOffset!==j.offset)){var W=ae.createRange();W.setStart(J.node,J.offset),ne.removeAllRanges(),Pe>Nt?(ne.addRange(W),ne.extend(j.node,j.offset)):(W.setEnd(j.node,j.offset),ne.addRange(W))}}}}for(ae=[],ne=D;ne=ne.parentNode;)ne.nodeType===1&&ae.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<ae.length;D++){var se=ae[D];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}Sd=!!_g,Eg=_g=null}finally{yt=v,ce.p=f,ee.T=u}}r.current=o,bn=2}}function lT(){if(bn===2){bn=0;var r=Qs,o=il,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=ee.T,ee.T=null;var f=ce.p;ce.p=2;var v=yt;yt|=4;try{VE(r,o.alternate,o)}finally{yt=v,ce.p=f,ee.T=u}}bn=3}}function uT(){if(bn===4||bn===3){bn=0,zi();var r=Qs,o=il,u=fs,f=YE;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?bn=5:(bn=0,il=Qs=null,cT(r,r.pendingLanes));var v=r.pendingLanes;if(v===0&&(Ws=null),On(u),o=o.stateNode,un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(Rn,o,void 0,(o.current.flags&128)===128)}catch{}if(f!==null){o=ee.T,v=ce.p,ce.p=2,ee.T=null;try{for(var _=r.onRecoverableError,A=0;A<f.length;A++){var D=f[A];_(D.value,{componentStack:D.stack})}}finally{ee.T=o,ce.p=v}}(fs&3)!==0&&cd(),Lr(r),v=r.pendingLanes,(u&261930)!==0&&(v&42)!==0?r===og?Vu++:(Vu=0,og=r):Vu=0,Ou(0)}}function cT(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,yu(o)))}function cd(){return aT(),lT(),uT(),fT()}function fT(){if(bn!==5)return!1;var r=Qs,o=rg;rg=0;var u=On(fs),f=ee.T,v=ce.p;try{ce.p=32>u?32:u,ee.T=null,u=sg,sg=null;var _=Qs,A=fs;if(bn=0,il=Qs=null,fs=0,(yt&6)!==0)throw Error(i(331));var D=yt;if(yt|=4,$E(_.current),HE(_,_.current,A,u),yt=D,Ou(0,!1),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(Rn,_)}catch{}return!0}finally{ce.p=v,ee.T=f,cT(r,o)}}function dT(r,o,u){o=Xi(u,o),o=Um(r.stateNode,o,2),r=Gs(r,o,2),r!==null&&(kt(r,2),Lr(r))}function wt(r,o,u){if(r.tag===3)dT(r,r,u);else for(;o!==null;){if(o.tag===3){dT(o,r,u);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Ws===null||!Ws.has(f))){r=Xi(u,r),u=hE(2),f=Gs(o,u,2),f!==null&&(pE(u,f,o,r),kt(f,2),Lr(f));break}}o=o.return}}function ug(r,o,u){var f=r.pingCache;if(f===null){f=r.pingCache=new lN;var v=new Set;f.set(o,v)}else v=f.get(o),v===void 0&&(v=new Set,f.set(o,v));v.has(u)||(tg=!0,v.add(u),r=hN.bind(null,r,o,u),o.then(r,r))}function hN(r,o,u){var f=r.pingCache;f!==null&&f.delete(o),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,Mt===r&&(et&u)===u&&(Xt===4||Xt===3&&(et&62914560)===et&&300>ct()-rd?(yt&2)===0&&rl(r,0):ng|=u,nl===et&&(nl=0)),Lr(r)}function hT(r,o){o===0&&(o=Hi()),r=Ko(r,o),r!==null&&(kt(r,o),Lr(r))}function pN(r){var o=r.memoizedState,u=0;o!==null&&(u=o.retryLane),hT(r,u)}function mN(r,o){var u=0;switch(r.tag){case 31:case 13:var f=r.stateNode,v=r.memoizedState;v!==null&&(u=v.retryLane);break;case 19:f=r.stateNode;break;case 22:f=r.stateNode._retryCache;break;default:throw Error(i(314))}f!==null&&f.delete(o),hT(r,u)}function gN(r,o){return ni(r,o)}var fd=null,ol=null,cg=!1,dd=!1,fg=!1,Zs=0;function Lr(r){r!==ol&&r.next===null&&(ol===null?fd=ol=r:ol=ol.next=r),dd=!0,cg||(cg=!0,vN())}function Ou(r,o){if(!fg&&dd){fg=!0;do for(var u=!1,f=fd;f!==null;){if(r!==0){var v=f.pendingLanes;if(v===0)var _=0;else{var A=f.suspendedLanes,D=f.pingedLanes;_=(1<<31-Te(42|r)+1)-1,_&=v&~(A&~D),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(u=!0,yT(f,_))}else _=et,_=ke(f,f===Mt?_:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(_&3)===0||$e(f,_)||(u=!0,yT(f,_));f=f.next}while(u);fg=!1}}function yN(){pT()}function pT(){dd=cg=!1;var r=0;Zs!==0&&xN()&&(r=Zs);for(var o=ct(),u=null,f=fd;f!==null;){var v=f.next,_=mT(f,o);_===0?(f.next=null,u===null?fd=v:u.next=v,v===null&&(ol=u)):(u=f,(r!==0||(_&3)!==0)&&(dd=!0)),f=v}bn!==0&&bn!==5||Ou(r),Zs!==0&&(Zs=0)}function mT(r,o){for(var u=r.suspendedLanes,f=r.pingedLanes,v=r.expirationTimes,_=r.pendingLanes&-62914561;0<_;){var A=31-Te(_),D=1<<A,B=v[A];B===-1?((D&u)===0||(D&f)!==0)&&(v[A]=Sn(D,o)):B<=o&&(r.expiredLanes|=D),_&=~D}if(o=Mt,u=et,u=ke(r,r===o?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),f=r.callbackNode,u===0||r===o&&(At===2||At===9)||r.cancelPendingCommit!==null)return f!==null&&f!==null&&ii(f),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||$e(r,u)){if(o=u&-u,o===r.callbackPriority)return o;switch(f!==null&&ii(f),On(u)){case 2:case 8:u=Ct;break;case 32:u=Yt;break;case 268435456:u=ft;break;default:u=Yt}return f=gT.bind(null,r),u=ni(u,f),r.callbackPriority=o,r.callbackNode=u,o}return f!==null&&f!==null&&ii(f),r.callbackPriority=2,r.callbackNode=null,2}function gT(r,o){if(bn!==0&&bn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(cd()&&r.callbackNode!==u)return null;var f=et;return f=ke(r,r===Mt?f:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),f===0?null:(QE(r,f,o),mT(r,ct()),r.callbackNode!=null&&r.callbackNode===u?gT.bind(null,r):null)}function yT(r,o){if(cd())return null;QE(r,o,!0)}function vN(){NN(function(){(yt&6)!==0?ni(ze,yN):pT()})}function dg(){if(Zs===0){var r=ja;r===0&&(r=Ye,Ye<<=1,(Ye&261888)===0&&(Ye=256)),Zs=r}return Zs}function vT(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Rr(""+r)}function _T(r,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,r.id&&u.setAttribute("form",r.id),o.parentNode.insertBefore(u,o),r=new FormData(r),u.parentNode.removeChild(u),r}function _N(r,o,u,f,v){if(o==="submit"&&u&&u.stateNode===v){var _=vT((v[sn]||null).action),A=f.submitter;A&&(o=(o=A[sn]||null)?vT(o.formAction):A.getAttribute("formAction"),o!==null&&(_=o,A=null));var D=new qo("action","action",null,f,v);r.push({event:D,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Zs!==0){var B=A?_T(v,A):new FormData(v);Mm(u,{pending:!0,data:B,method:v.method,action:_},null,B)}}else typeof _=="function"&&(D.preventDefault(),B=A?_T(v,A):new FormData(v),Mm(u,{pending:!0,data:B,method:v.method,action:_},_,B))},currentTarget:v}]})}}for(var hg=0;hg<Yp.length;hg++){var pg=Yp[hg],EN=pg.toLowerCase(),TN=pg[0].toUpperCase()+pg.slice(1);mr(EN,"on"+TN)}mr(W0,"onAnimationEnd"),mr(Q0,"onAnimationIteration"),mr(X0,"onAnimationStart"),mr("dblclick","onDoubleClick"),mr("focusin","onFocus"),mr("focusout","onBlur"),mr(O1,"onTransitionRun"),mr(U1,"onTransitionStart"),mr(F1,"onTransitionCancel"),mr(Z0,"onTransitionEnd"),xr("onMouseEnter",["mouseout","mouseover"]),xr("onMouseLeave",["mouseout","mouseover"]),xr("onPointerEnter",["pointerout","pointerover"]),xr("onPointerLeave",["pointerout","pointerover"]),ai("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ai("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ai("onBeforeInput",["compositionend","keypress","textInput","paste"]),ai("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ai("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ai("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Uu));function ET(r,o){o=(o&4)!==0;for(var u=0;u<r.length;u++){var f=r[u],v=f.event;f=f.listeners;e:{var _=void 0;if(o)for(var A=f.length-1;0<=A;A--){var D=f[A],B=D.instance,Q=D.currentTarget;if(D=D.listener,B!==_&&v.isPropagationStopped())break e;_=D,v.currentTarget=Q;try{_(v)}catch(re){If(re)}v.currentTarget=null,_=B}else for(A=0;A<f.length;A++){if(D=f[A],B=D.instance,Q=D.currentTarget,D=D.listener,B!==_&&v.isPropagationStopped())break e;_=D,v.currentTarget=Q;try{_(v)}catch(re){If(re)}v.currentTarget=null,_=B}}}}function Xe(r,o){var u=o[ji];u===void 0&&(u=o[ji]=new Set);var f=r+"__bubble";u.has(f)||(TT(o,r,2,!1),u.add(f))}function mg(r,o,u){var f=0;o&&(f|=4),TT(u,r,f,o)}var hd="_reactListening"+Math.random().toString(36).slice(2);function gg(r){if(!r[hd]){r[hd]=!0,dr.forEach(function(u){u!=="selectionchange"&&(SN.has(u)||mg(u,!1,r),mg(u,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[hd]||(o[hd]=!0,mg("selectionchange",!1,o))}}function TT(r,o,u,f){switch(WT(o)){case 2:var v=WN;break;case 8:v=QN;break;default:v=Dg}u=v.bind(null,o,u,r),v=void 0,!ou||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),f?v!==void 0?r.addEventListener(o,u,{capture:!0,passive:v}):r.addEventListener(o,u,!0):v!==void 0?r.addEventListener(o,u,{passive:v}):r.addEventListener(o,u,!1)}function yg(r,o,u,f,v){var _=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var A=f.tag;if(A===3||A===4){var D=f.stateNode.containerInfo;if(D===v)break;if(A===4)for(A=f.return;A!==null;){var B=A.tag;if((B===3||B===4)&&A.stateNode.containerInfo===v)return;A=A.return}for(;D!==null;){if(A=gi(D),A===null)return;if(B=A.tag,B===5||B===6||B===26||B===27){f=_=A;continue e}D=D.parentNode}}f=f.return}ff(function(){var Q=_,re=Ma(u),ae=[];e:{var Z=e_.get(r);if(Z!==void 0){var ne=qo,be=r;switch(r){case"keypress":if(Fo(u)===0)break e;case"keydown":case"keyup":ne=Ef;break;case"focusin":be="focus",ne=Ps;break;case"focusout":be="blur",ne=Ps;break;case"beforeblur":case"afterblur":ne=Ps;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=hf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=pf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=Sf;break;case W0:case Q0:case X0:ne=La;break;case Z0:ne=Va;break;case"scroll":case"scrollend":ne=df;break;case"wheel":ne=Af;break;case"copy":case"cut":case"paste":ne=gf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=fu;break;case"toggle":case"beforetoggle":ne=Vs}var Pe=(o&4)!==0,Nt=!Pe&&(r==="scroll"||r==="scrollend"),J=Pe?Z!==null?Z+"Capture":null:Z;Pe=[];for(var j=Q,W;j!==null;){var se=j;if(W=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||W===null||J===null||(se=yi(j,J),se!=null&&Pe.push(Fu(j,se,W))),Nt)break;j=j.return}0<Pe.length&&(Z=new ne(Z,be,null,u,re),ae.push({event:Z,listeners:Pe}))}}if((o&7)===0){e:{if(Z=r==="mouseover"||r==="pointerover",ne=r==="mouseout"||r==="pointerout",Z&&u!==Da&&(be=u.relatedTarget||u.fromElement)&&(gi(be)||be[xi]))break e;if((ne||Z)&&(Z=re.window===re?re:(Z=re.ownerDocument)?Z.defaultView||Z.parentWindow:window,ne?(be=u.relatedTarget||u.toElement,ne=Q,be=be?gi(be):null,be!==null&&(Nt=a(be),Pe=be.tag,be!==Nt||Pe!==5&&Pe!==27&&Pe!==6)&&(be=null)):(ne=null,be=Q),ne!==be)){if(Pe=hf,se="onMouseLeave",J="onMouseEnter",j="mouse",(r==="pointerout"||r==="pointerover")&&(Pe=fu,se="onPointerLeave",J="onPointerEnter",j="pointer"),Nt=ne==null?Z:Ir(ne),W=be==null?Z:Ir(be),Z=new Pe(se,j+"leave",ne,u,re),Z.target=Nt,Z.relatedTarget=W,se=null,gi(re)===Q&&(Pe=new Pe(J,j+"enter",be,u,re),Pe.target=W,Pe.relatedTarget=Nt,se=Pe),Nt=se,ne&&be)t:{for(Pe=bN,J=ne,j=be,W=0,se=J;se;se=Pe(se))W++;se=0;for(var Re=j;Re;Re=Pe(Re))se++;for(;0<W-se;)J=Pe(J),W--;for(;0<se-W;)j=Pe(j),se--;for(;W--;){if(J===j||j!==null&&J===j.alternate){Pe=J;break t}J=Pe(J),j=Pe(j)}Pe=null}else Pe=null;ne!==null&&ST(ae,Z,ne,Pe,!1),be!==null&&Nt!==null&&ST(ae,Nt,be,Pe,!0)}}e:{if(Z=Q?Ir(Q):window,ne=Z.nodeName&&Z.nodeName.toLowerCase(),ne==="select"||ne==="input"&&Z.type==="file")var ht=F0;else if(vi(Z))if(q0)ht=P1;else{ht=M1;var Ce=D1}else ne=Z.nodeName,!ne||ne.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?Q&&ru(Q.elementType)&&(ht=F0):ht=k1;if(ht&&(ht=ht(r,Q))){Go(ae,ht,u,re);break e}Ce&&Ce(r,Z,Q),r==="focusout"&&Q&&Z.type==="number"&&Q.memoizedProps.value!=null&&Na(Z,"number",Z.value)}switch(Ce=Q?Ir(Q):window,r){case"focusin":(vi(Ce)||Ce.contentEditable==="true")&&(Oa=Ce,$p=Q,pu=null);break;case"focusout":pu=$p=Oa=null;break;case"mousedown":Kp=!0;break;case"contextmenu":case"mouseup":case"dragend":Kp=!1,J0(ae,u,re);break;case"selectionchange":if(V1)break;case"keydown":case"keyup":J0(ae,u,re)}var Ge;if(S)e:{switch(r){case"compositionstart":var tt="onCompositionStart";break e;case"compositionend":tt="onCompositionEnd";break e;case"compositionupdate":tt="onCompositionUpdate";break e}tt=void 0}else Ke?_t(r,u)&&(tt="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(tt="onCompositionStart");tt&&(Y&&u.locale!=="ko"&&(Ke||tt!=="onCompositionStart"?tt==="onCompositionEnd"&&Ke&&(Ge=Ns()):(Di=re,ka="value"in Di?Di.value:Di.textContent,Ke=!0)),Ce=pd(Q,tt),0<Ce.length&&(tt=new lu(tt,r,null,u,re),ae.push({event:tt,listeners:Ce}),Ge?tt.data=Ge:(Ge=cn(u),Ge!==null&&(tt.data=Ge)))),(Ge=k?Dn(r,u):Mn(r,u))&&(tt=pd(Q,"onBeforeInput"),0<tt.length&&(Ce=new lu("onBeforeInput","beforeinput",null,u,re),ae.push({event:Ce,listeners:tt}),Ce.data=Ge)),_N(ae,r,Q,u,re)}ET(ae,o)})}function Fu(r,o,u){return{instance:r,listener:o,currentTarget:u}}function pd(r,o){for(var u=o+"Capture",f=[];r!==null;){var v=r,_=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||_===null||(v=yi(r,u),v!=null&&f.unshift(Fu(r,v,_)),v=yi(r,o),v!=null&&f.push(Fu(r,v,_))),r.tag===3)return f;r=r.return}return[]}function bN(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function ST(r,o,u,f,v){for(var _=o._reactName,A=[];u!==null&&u!==f;){var D=u,B=D.alternate,Q=D.stateNode;if(D=D.tag,B!==null&&B===f)break;D!==5&&D!==26&&D!==27||Q===null||(B=Q,v?(Q=yi(u,_),Q!=null&&A.unshift(Fu(u,Q,B))):v||(Q=yi(u,_),Q!=null&&A.push(Fu(u,Q,B)))),u=u.return}A.length!==0&&r.push({event:o,listeners:A})}var AN=/\r\n?/g,wN=/\u0000|\uFFFD/g;function bT(r){return(typeof r=="string"?r:""+r).replace(AN,`
`).replace(wN,"")}function AT(r,o){return o=bT(o),bT(r)===o}function Rt(r,o,u,f,v,_){switch(u){case"children":typeof f=="string"?o==="body"||o==="textarea"&&f===""||Wi(r,f):(typeof f=="number"||typeof f=="bigint")&&o!=="body"&&Wi(r,""+f);break;case"className":Is(r,"class",f);break;case"tabIndex":Is(r,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Is(r,u,f);break;case"style":uf(r,f,_);break;case"data":if(o!=="object"){Is(r,"data",f);break}case"src":case"href":if(f===""&&(o!=="a"||u!=="href")){r.removeAttribute(u);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){r.removeAttribute(u);break}f=Rr(""+f),r.setAttribute(u,f);break;case"action":case"formAction":if(typeof f=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(u==="formAction"?(o!=="input"&&Rt(r,o,"name",v.name,v,null),Rt(r,o,"formEncType",v.formEncType,v,null),Rt(r,o,"formMethod",v.formMethod,v,null),Rt(r,o,"formTarget",v.formTarget,v,null)):(Rt(r,o,"encType",v.encType,v,null),Rt(r,o,"method",v.method,v,null),Rt(r,o,"target",v.target,v,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){r.removeAttribute(u);break}f=Rr(""+f),r.setAttribute(u,f);break;case"onClick":f!=null&&(r.onclick=Nn);break;case"onScroll":f!=null&&Xe("scroll",r);break;case"onScrollEnd":f!=null&&Xe("scrollend",r);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(u=f.__html,u!=null){if(v.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"multiple":r.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":r.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){r.removeAttribute("xlink:href");break}u=Rr(""+f),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,""+f):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":f===!0?r.setAttribute(u,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,f):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?r.setAttribute(u,f):r.removeAttribute(u);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?r.removeAttribute(u):r.setAttribute(u,f);break;case"popover":Xe("beforetoggle",r),Xe("toggle",r),Cs(r,"popover",f);break;case"xlinkActuate":Yi(r,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Yi(r,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Yi(r,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Yi(r,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Yi(r,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Yi(r,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Yi(r,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Yi(r,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Yi(r,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Cs(r,"is",f);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=qp.get(u)||u,Cs(r,u,f))}}function vg(r,o,u,f,v,_){switch(u){case"style":uf(r,f,_);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(u=f.__html,u!=null){if(v.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"children":typeof f=="string"?Wi(r,f):(typeof f=="number"||typeof f=="bigint")&&Wi(r,""+f);break;case"onScroll":f!=null&&Xe("scroll",r);break;case"onScrollEnd":f!=null&&Xe("scrollend",r);break;case"onClick":f!=null&&(r.onclick=Nn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hr.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(v=u.endsWith("Capture"),o=u.slice(2,v?u.length-7:void 0),_=r[sn]||null,_=_!=null?_[u]:null,typeof _=="function"&&r.removeEventListener(o,_,v),typeof f=="function")){typeof _!="function"&&_!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(o,f,v);break e}u in r?r[u]=f:f===!0?r.setAttribute(u,""):Cs(r,u,f)}}}function Bn(r,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",r),Xe("load",r);var f=!1,v=!1,_;for(_ in u)if(u.hasOwnProperty(_)){var A=u[_];if(A!=null)switch(_){case"src":f=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Rt(r,o,_,A,u,null)}}v&&Rt(r,o,"srcSet",u.srcSet,u,null),f&&Rt(r,o,"src",u.src,u,null);return;case"input":Xe("invalid",r);var D=_=A=v=null,B=null,Q=null;for(f in u)if(u.hasOwnProperty(f)){var re=u[f];if(re!=null)switch(f){case"name":v=re;break;case"type":A=re;break;case"checked":B=re;break;case"defaultChecked":Q=re;break;case"value":_=re;break;case"defaultValue":D=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,o));break;default:Rt(r,o,f,re,u,null)}}Oo(r,_,D,B,Q,A,v,!1);return;case"select":Xe("invalid",r),f=A=_=null;for(v in u)if(u.hasOwnProperty(v)&&(D=u[v],D!=null))switch(v){case"value":_=D;break;case"defaultValue":A=D;break;case"multiple":f=D;default:Rt(r,o,v,D,u,null)}o=_,u=A,r.multiple=!!f,o!=null?dt(r,!!f,o,!1):u!=null&&dt(r,!!f,u,!0);return;case"textarea":Xe("invalid",r),_=v=f=null;for(A in u)if(u.hasOwnProperty(A)&&(D=u[A],D!=null))switch(A){case"value":f=D;break;case"defaultValue":v=D;break;case"children":_=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(i(91));break;default:Rt(r,o,A,D,u,null)}Rs(r,f,v,_);return;case"option":for(B in u)if(u.hasOwnProperty(B)&&(f=u[B],f!=null))switch(B){case"selected":r.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Rt(r,o,B,f,u,null)}return;case"dialog":Xe("beforetoggle",r),Xe("toggle",r),Xe("cancel",r),Xe("close",r);break;case"iframe":case"object":Xe("load",r);break;case"video":case"audio":for(f=0;f<Uu.length;f++)Xe(Uu[f],r);break;case"image":Xe("error",r),Xe("load",r);break;case"details":Xe("toggle",r);break;case"embed":case"source":case"link":Xe("error",r),Xe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in u)if(u.hasOwnProperty(Q)&&(f=u[Q],f!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Rt(r,o,Q,f,u,null)}return;default:if(ru(o)){for(re in u)u.hasOwnProperty(re)&&(f=u[re],f!==void 0&&vg(r,o,re,f,u,void 0));return}}for(D in u)u.hasOwnProperty(D)&&(f=u[D],f!=null&&Rt(r,o,D,f,u,null))}function CN(r,o,u,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,_=null,A=null,D=null,B=null,Q=null,re=null;for(ne in u){var ae=u[ne];if(u.hasOwnProperty(ne)&&ae!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":B=ae;default:f.hasOwnProperty(ne)||Rt(r,o,ne,null,f,ae)}}for(var Z in f){var ne=f[Z];if(ae=u[Z],f.hasOwnProperty(Z)&&(ne!=null||ae!=null))switch(Z){case"type":_=ne;break;case"name":v=ne;break;case"checked":Q=ne;break;case"defaultChecked":re=ne;break;case"value":A=ne;break;case"defaultValue":D=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,o));break;default:ne!==ae&&Rt(r,o,Z,ne,f,ae)}}xs(r,A,D,B,Q,re,_,v);return;case"select":ne=A=D=Z=null;for(_ in u)if(B=u[_],u.hasOwnProperty(_)&&B!=null)switch(_){case"value":break;case"multiple":ne=B;default:f.hasOwnProperty(_)||Rt(r,o,_,null,f,B)}for(v in f)if(_=f[v],B=u[v],f.hasOwnProperty(v)&&(_!=null||B!=null))switch(v){case"value":Z=_;break;case"defaultValue":D=_;break;case"multiple":A=_;default:_!==B&&Rt(r,o,v,_,f,B)}o=D,u=A,f=ne,Z!=null?dt(r,!!u,Z,!1):!!f!=!!u&&(o!=null?dt(r,!!u,o,!0):dt(r,!!u,u?[]:"",!1));return;case"textarea":ne=Z=null;for(D in u)if(v=u[D],u.hasOwnProperty(D)&&v!=null&&!f.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:Rt(r,o,D,null,f,v)}for(A in f)if(v=f[A],_=u[A],f.hasOwnProperty(A)&&(v!=null||_!=null))switch(A){case"value":Z=v;break;case"defaultValue":ne=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==_&&Rt(r,o,A,v,f,_)}Uo(r,Z,ne);return;case"option":for(var be in u)if(Z=u[be],u.hasOwnProperty(be)&&Z!=null&&!f.hasOwnProperty(be))switch(be){case"selected":r.selected=!1;break;default:Rt(r,o,be,null,f,Z)}for(B in f)if(Z=f[B],ne=u[B],f.hasOwnProperty(B)&&Z!==ne&&(Z!=null||ne!=null))switch(B){case"selected":r.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:Rt(r,o,B,Z,f,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pe in u)Z=u[Pe],u.hasOwnProperty(Pe)&&Z!=null&&!f.hasOwnProperty(Pe)&&Rt(r,o,Pe,null,f,Z);for(Q in f)if(Z=f[Q],ne=u[Q],f.hasOwnProperty(Q)&&Z!==ne&&(Z!=null||ne!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,o));break;default:Rt(r,o,Q,Z,f,ne)}return;default:if(ru(o)){for(var Nt in u)Z=u[Nt],u.hasOwnProperty(Nt)&&Z!==void 0&&!f.hasOwnProperty(Nt)&&vg(r,o,Nt,void 0,f,Z);for(re in f)Z=f[re],ne=u[re],!f.hasOwnProperty(re)||Z===ne||Z===void 0&&ne===void 0||vg(r,o,re,Z,f,ne);return}}for(var J in u)Z=u[J],u.hasOwnProperty(J)&&Z!=null&&!f.hasOwnProperty(J)&&Rt(r,o,J,null,f,Z);for(ae in f)Z=f[ae],ne=u[ae],!f.hasOwnProperty(ae)||Z===ne||Z==null&&ne==null||Rt(r,o,ae,Z,f,ne)}function wT(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function IN(){if(typeof performance.getEntriesByType=="function"){for(var r=0,o=0,u=performance.getEntriesByType("resource"),f=0;f<u.length;f++){var v=u[f],_=v.transferSize,A=v.initiatorType,D=v.duration;if(_&&D&&wT(A)){for(A=0,D=v.responseEnd,f+=1;f<u.length;f++){var B=u[f],Q=B.startTime;if(Q>D)break;var re=B.transferSize,ae=B.initiatorType;re&&wT(ae)&&(B=B.responseEnd,A+=re*(B<D?1:(D-Q)/(B-Q)))}if(--f,o+=8*(_+A)/(v.duration/1e3),r++,10<r)break}}if(0<r)return o/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var _g=null,Eg=null;function md(r){return r.nodeType===9?r:r.ownerDocument}function CT(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function IT(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function Tg(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Sg=null;function xN(){var r=window.event;return r&&r.type==="popstate"?r===Sg?!1:(Sg=r,!0):(Sg=null,!1)}var xT=typeof setTimeout=="function"?setTimeout:void 0,RN=typeof clearTimeout=="function"?clearTimeout:void 0,RT=typeof Promise=="function"?Promise:void 0,NN=typeof queueMicrotask=="function"?queueMicrotask:typeof RT<"u"?function(r){return RT.resolve(null).then(r).catch(DN)}:xT;function DN(r){setTimeout(function(){throw r})}function eo(r){return r==="head"}function NT(r,o){var u=o,f=0;do{var v=u.nextSibling;if(r.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"||u==="/&"){if(f===0){r.removeChild(v),cl(o);return}f--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")f++;else if(u==="html")qu(r.ownerDocument.documentElement);else if(u==="head"){u=r.ownerDocument.head,qu(u);for(var _=u.firstChild;_;){var A=_.nextSibling,D=_.nodeName;_[$i]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&_.rel.toLowerCase()==="stylesheet"||u.removeChild(_),_=A}}else u==="body"&&qu(r.ownerDocument.body);u=v}while(u);cl(o)}function DT(r,o){var u=r;r=0;do{var f=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),f&&f.nodeType===8)if(u=f.data,u==="/$"){if(r===0)break;r--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||r++;u=f}while(u)}function bg(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":bg(u),Ki(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function MN(r,o,u,f){for(;r.nodeType===1;){var v=u;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!f&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(f){if(!r[$i])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(_=r.getAttribute("rel"),_==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(_!==v.rel||r.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||r.getAttribute("title")!==(v.title==null?null:v.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(_=r.getAttribute("src"),(_!==(v.src==null?null:v.src)||r.getAttribute("type")!==(v.type==null?null:v.type)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&_&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var _=v.name==null?null:""+v.name;if(v.type==="hidden"&&r.getAttribute("name")===_)return r}else return r;if(r=ir(r.nextSibling),r===null)break}return null}function kN(r,o,u){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=ir(r.nextSibling),r===null))return null;return r}function MT(r,o){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=ir(r.nextSibling),r===null))return null;return r}function Ag(r){return r.data==="$?"||r.data==="$~"}function wg(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function PN(r,o){var u=r.ownerDocument;if(r.data==="$~")r._reactRetry=o;else if(r.data!=="$?"||u.readyState!=="loading")o();else{var f=function(){o(),u.removeEventListener("DOMContentLoaded",f)};u.addEventListener("DOMContentLoaded",f),r._reactRetry=f}}function ir(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return r}var Cg=null;function kT(r){r=r.nextSibling;for(var o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"||u==="/&"){if(o===0)return ir(r.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}r=r.nextSibling}return null}function PT(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return r;o--}else u!=="/$"&&u!=="/&"||o++}r=r.previousSibling}return null}function LT(r,o,u){switch(o=md(u),r){case"html":if(r=o.documentElement,!r)throw Error(i(452));return r;case"head":if(r=o.head,!r)throw Error(i(453));return r;case"body":if(r=o.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function qu(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);Ki(r)}var rr=new Map,VT=new Set;function gd(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var ds=ce.d;ce.d={f:LN,r:VN,D:ON,C:UN,L:FN,m:qN,X:zN,S:BN,M:HN};function LN(){var r=ds.f(),o=ad();return r||o}function VN(r){var o=Ji(r);o!==null&&o.tag===5&&o.type==="form"?Z_(o):ds.r(r)}var al=typeof document>"u"?null:document;function OT(r,o,u){var f=al;if(f&&typeof o=="string"&&o){var v=Wt(o);v='link[rel="'+r+'"][href="'+v+'"]',typeof u=="string"&&(v+='[crossorigin="'+u+'"]'),VT.has(v)||(VT.add(v),r={rel:r,crossOrigin:u,href:o},f.querySelector(v)===null&&(o=f.createElement("link"),Bn(o,"link",r),Gt(o),f.head.appendChild(o)))}}function ON(r){ds.D(r),OT("dns-prefetch",r,null)}function UN(r,o){ds.C(r,o),OT("preconnect",r,o)}function FN(r,o,u){ds.L(r,o,u);var f=al;if(f&&r&&o){var v='link[rel="preload"][as="'+Wt(o)+'"]';o==="image"&&u&&u.imageSrcSet?(v+='[imagesrcset="'+Wt(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(v+='[imagesizes="'+Wt(u.imageSizes)+'"]')):v+='[href="'+Wt(r)+'"]';var _=v;switch(o){case"style":_=ll(r);break;case"script":_=ul(r)}rr.has(_)||(r=E({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:r,as:o},u),rr.set(_,r),f.querySelector(v)!==null||o==="style"&&f.querySelector(Bu(_))||o==="script"&&f.querySelector(zu(_))||(o=f.createElement("link"),Bn(o,"link",r),Gt(o),f.head.appendChild(o)))}}function qN(r,o){ds.m(r,o);var u=al;if(u&&r){var f=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+Wt(f)+'"][href="'+Wt(r)+'"]',_=v;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=ul(r)}if(!rr.has(_)&&(r=E({rel:"modulepreload",href:r},o),rr.set(_,r),u.querySelector(v)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(zu(_)))return}f=u.createElement("link"),Bn(f,"link",r),Gt(f),u.head.appendChild(f)}}}function BN(r,o,u){ds.S(r,o,u);var f=al;if(f&&r){var v=oi(f).hoistableStyles,_=ll(r);o=o||"default";var A=v.get(_);if(!A){var D={loading:0,preload:null};if(A=f.querySelector(Bu(_)))D.loading=5;else{r=E({rel:"stylesheet",href:r,"data-precedence":o},u),(u=rr.get(_))&&Ig(r,u);var B=A=f.createElement("link");Gt(B),Bn(B,"link",r),B._p=new Promise(function(Q,re){B.onload=Q,B.onerror=re}),B.addEventListener("load",function(){D.loading|=1}),B.addEventListener("error",function(){D.loading|=2}),D.loading|=4,yd(A,o,f)}A={type:"stylesheet",instance:A,count:1,state:D},v.set(_,A)}}}function zN(r,o){ds.X(r,o);var u=al;if(u&&r){var f=oi(u).hoistableScripts,v=ul(r),_=f.get(v);_||(_=u.querySelector(zu(v)),_||(r=E({src:r,async:!0},o),(o=rr.get(v))&&xg(r,o),_=u.createElement("script"),Gt(_),Bn(_,"link",r),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},f.set(v,_))}}function HN(r,o){ds.M(r,o);var u=al;if(u&&r){var f=oi(u).hoistableScripts,v=ul(r),_=f.get(v);_||(_=u.querySelector(zu(v)),_||(r=E({src:r,async:!0,type:"module"},o),(o=rr.get(v))&&xg(r,o),_=u.createElement("script"),Gt(_),Bn(_,"link",r),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},f.set(v,_))}}function UT(r,o,u,f){var v=(v=Me.current)?gd(v):null;if(!v)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=ll(u.href),u=oi(v).hoistableStyles,f=u.get(o),f||(f={type:"style",instance:null,count:0,state:null},u.set(o,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=ll(u.href);var _=oi(v).hoistableStyles,A=_.get(r);if(A||(v=v.ownerDocument||v,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(r,A),(_=v.querySelector(Bu(r)))&&!_._p&&(A.instance=_,A.state.loading=5),rr.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},rr.set(r,u),_||GN(v,r,u,A.state))),o&&f===null)throw Error(i(528,""));return A}if(o&&f!==null)throw Error(i(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=ul(u),u=oi(v).hoistableScripts,f=u.get(o),f||(f={type:"script",instance:null,count:0,state:null},u.set(o,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function ll(r){return'href="'+Wt(r)+'"'}function Bu(r){return'link[rel="stylesheet"]['+r+"]"}function FT(r){return E({},r,{"data-precedence":r.precedence,precedence:null})}function GN(r,o,u,f){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?f.loading=1:(o=r.createElement("link"),f.preload=o,o.addEventListener("load",function(){return f.loading|=1}),o.addEventListener("error",function(){return f.loading|=2}),Bn(o,"link",u),Gt(o),r.head.appendChild(o))}function ul(r){return'[src="'+Wt(r)+'"]'}function zu(r){return"script[async]"+r}function qT(r,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var f=r.querySelector('style[data-href~="'+Wt(u.href)+'"]');if(f)return o.instance=f,Gt(f),f;var v=E({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return f=(r.ownerDocument||r).createElement("style"),Gt(f),Bn(f,"style",v),yd(f,u.precedence,r),o.instance=f;case"stylesheet":v=ll(u.href);var _=r.querySelector(Bu(v));if(_)return o.state.loading|=4,o.instance=_,Gt(_),_;f=FT(u),(v=rr.get(v))&&Ig(f,v),_=(r.ownerDocument||r).createElement("link"),Gt(_);var A=_;return A._p=new Promise(function(D,B){A.onload=D,A.onerror=B}),Bn(_,"link",f),o.state.loading|=4,yd(_,u.precedence,r),o.instance=_;case"script":return _=ul(u.src),(v=r.querySelector(zu(_)))?(o.instance=v,Gt(v),v):(f=u,(v=rr.get(_))&&(f=E({},u),xg(f,v)),r=r.ownerDocument||r,v=r.createElement("script"),Gt(v),Bn(v,"link",f),r.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(f=o.instance,o.state.loading|=4,yd(f,u.precedence,r));return o.instance}function yd(r,o,u){for(var f=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=f.length?f[f.length-1]:null,_=v,A=0;A<f.length;A++){var D=f[A];if(D.dataset.precedence===o)_=D;else if(_!==v)break}_?_.parentNode.insertBefore(r,_.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(r,o.firstChild))}function Ig(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function xg(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var vd=null;function BT(r,o,u){if(vd===null){var f=new Map,v=vd=new Map;v.set(u,f)}else v=vd,f=v.get(u),f||(f=new Map,v.set(u,f));if(f.has(r))return f;for(f.set(r,null),u=u.getElementsByTagName(r),v=0;v<u.length;v++){var _=u[v];if(!(_[$i]||_[Lt]||r==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(o)||"";A=r+A;var D=f.get(A);D?D.push(_):f.set(A,[_])}}return f}function zT(r,o,u){r=r.ownerDocument||r,r.head.insertBefore(u,o==="title"?r.querySelector("head > title"):null)}function jN(r,o,u){if(u===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function HT(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function $N(r,o,u,f){if(u.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var v=ll(f.href),_=o.querySelector(Bu(v));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(r.count++,r=_d.bind(r),o.then(r,r)),u.state.loading|=4,u.instance=_,Gt(_);return}_=o.ownerDocument||o,f=FT(f),(v=rr.get(v))&&Ig(f,v),_=_.createElement("link"),Gt(_);var A=_;A._p=new Promise(function(D,B){A.onload=D,A.onerror=B}),Bn(_,"link",f),u.instance=_}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(r.count++,u=_d.bind(r),o.addEventListener("load",u),o.addEventListener("error",u))}}var Rg=0;function KN(r,o){return r.stylesheets&&r.count===0&&Td(r,r.stylesheets),0<r.count||0<r.imgCount?function(u){var f=setTimeout(function(){if(r.stylesheets&&Td(r,r.stylesheets),r.unsuspend){var _=r.unsuspend;r.unsuspend=null,_()}},6e4+o);0<r.imgBytes&&Rg===0&&(Rg=62500*IN());var v=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Td(r,r.stylesheets),r.unsuspend)){var _=r.unsuspend;r.unsuspend=null,_()}},(r.imgBytes>Rg?50:800)+o);return r.unsuspend=u,function(){r.unsuspend=null,clearTimeout(f),clearTimeout(v)}}:null}function _d(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Td(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Ed=null;function Td(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Ed=new Map,o.forEach(JN,r),Ed=null,_d.call(r))}function JN(r,o){if(!(o.state.loading&4)){var u=Ed.get(r);if(u)var f=u.get(null);else{u=new Map,Ed.set(r,u);for(var v=r.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<v.length;_++){var A=v[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(u.set(A.dataset.precedence,A),f=A)}f&&u.set(null,f)}v=o.instance,A=v.getAttribute("data-precedence"),_=u.get(A)||f,_===f&&u.set(null,v),u.set(A,v),this.count++,f=_d.bind(this),v.addEventListener("load",f),v.addEventListener("error",f),_?_.parentNode.insertBefore(v,_.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(v,r.firstChild)),o.state.loading|=4}}var Hu={$$typeof:q,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function YN(r,o,u,f,v,_,A,D,B){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=rn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rn(0),this.hiddenUpdates=rn(null),this.identifierPrefix=f,this.onUncaughtError=v,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function GT(r,o,u,f,v,_,A,D,B,Q,re,ae){return r=new YN(r,o,u,A,B,Q,re,ae,D),o=1,_===!0&&(o|=24),_=ki(3,null,null,o),r.current=_,_.stateNode=r,o=lm(),o.refCount++,r.pooledCache=o,o.refCount++,_.memoizedState={element:f,isDehydrated:u,cache:o},dm(_),r}function jT(r){return r?(r=qa,r):qa}function $T(r,o,u,f,v,_){v=jT(v),f.context===null?f.context=v:f.pendingContext=v,f=Hs(o),f.payload={element:u},_=_===void 0?null:_,_!==null&&(f.callback=_),u=Gs(r,f,o),u!==null&&(bi(u,r,o),Tu(u,r,o))}function KT(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<o?u:o}}function Ng(r,o){KT(r,o),(r=r.alternate)&&KT(r,o)}function JT(r){if(r.tag===13||r.tag===31){var o=Ko(r,67108864);o!==null&&bi(o,r,67108864),Ng(r,67108864)}}function YT(r){if(r.tag===13||r.tag===31){var o=Ui();o=Gi(o);var u=Ko(r,o);u!==null&&bi(u,r,o),Ng(r,o)}}var Sd=!0;function WN(r,o,u,f){var v=ee.T;ee.T=null;var _=ce.p;try{ce.p=2,Dg(r,o,u,f)}finally{ce.p=_,ee.T=v}}function QN(r,o,u,f){var v=ee.T;ee.T=null;var _=ce.p;try{ce.p=8,Dg(r,o,u,f)}finally{ce.p=_,ee.T=v}}function Dg(r,o,u,f){if(Sd){var v=Mg(f);if(v===null)yg(r,o,f,bd,u),QT(r,f);else if(ZN(v,r,o,u,f))f.stopPropagation();else if(QT(r,f),o&4&&-1<XN.indexOf(r)){for(;v!==null;){var _=Ji(v);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=rt(_.pendingLanes);if(A!==0){var D=_;for(D.pendingLanes|=2,D.entangledLanes|=2;A;){var B=1<<31-Te(A);D.entanglements[1]|=B,A&=~B}Lr(_),(yt&6)===0&&(sd=ct()+500,Ou(0))}}break;case 31:case 13:D=Ko(_,2),D!==null&&bi(D,_,2),ad(),Ng(_,2)}if(_=Mg(f),_===null&&yg(r,o,f,bd,u),_===v)break;v=_}v!==null&&f.stopPropagation()}else yg(r,o,f,null,u)}}function Mg(r){return r=Ma(r),kg(r)}var bd=null;function kg(r){if(bd=null,r=gi(r),r!==null){var o=a(r);if(o===null)r=null;else{var u=o.tag;if(u===13){if(r=l(o),r!==null)return r;r=null}else if(u===31){if(r=c(o),r!==null)return r;r=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return bd=r,null}function WT(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Tn()){case ze:return 2;case Ct:return 8;case Yt:case me:return 32;case ft:return 268435456;default:return 32}default:return 32}}var Pg=!1,to=null,no=null,io=null,Gu=new Map,ju=new Map,ro=[],XN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function QT(r,o){switch(r){case"focusin":case"focusout":to=null;break;case"dragenter":case"dragleave":no=null;break;case"mouseover":case"mouseout":io=null;break;case"pointerover":case"pointerout":Gu.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ju.delete(o.pointerId)}}function $u(r,o,u,f,v,_){return r===null||r.nativeEvent!==_?(r={blockedOn:o,domEventName:u,eventSystemFlags:f,nativeEvent:_,targetContainers:[v]},o!==null&&(o=Ji(o),o!==null&&JT(o)),r):(r.eventSystemFlags|=f,o=r.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),r)}function ZN(r,o,u,f,v){switch(o){case"focusin":return to=$u(to,r,o,u,f,v),!0;case"dragenter":return no=$u(no,r,o,u,f,v),!0;case"mouseover":return io=$u(io,r,o,u,f,v),!0;case"pointerover":var _=v.pointerId;return Gu.set(_,$u(Gu.get(_)||null,r,o,u,f,v)),!0;case"gotpointercapture":return _=v.pointerId,ju.set(_,$u(ju.get(_)||null,r,o,u,f,v)),!0}return!1}function XT(r){var o=gi(r.target);if(o!==null){var u=a(o);if(u!==null){if(o=u.tag,o===13){if(o=l(u),o!==null){r.blockedOn=o,$r(r.priority,function(){YT(u)});return}}else if(o===31){if(o=c(u),o!==null){r.blockedOn=o,$r(r.priority,function(){YT(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Ad(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var u=Mg(r.nativeEvent);if(u===null){u=r.nativeEvent;var f=new u.constructor(u.type,u);Da=f,u.target.dispatchEvent(f),Da=null}else return o=Ji(u),o!==null&&JT(o),r.blockedOn=u,!1;o.shift()}return!0}function ZT(r,o,u){Ad(r)&&u.delete(o)}function e2(){Pg=!1,to!==null&&Ad(to)&&(to=null),no!==null&&Ad(no)&&(no=null),io!==null&&Ad(io)&&(io=null),Gu.forEach(ZT),ju.forEach(ZT)}function wd(r,o){r.blockedOn===o&&(r.blockedOn=null,Pg||(Pg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,e2)))}var Cd=null;function eS(r){Cd!==r&&(Cd=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Cd===r&&(Cd=null);for(var o=0;o<r.length;o+=3){var u=r[o],f=r[o+1],v=r[o+2];if(typeof f!="function"){if(kg(f||u)===null)continue;break}var _=Ji(u);_!==null&&(r.splice(o,3),o-=3,Mm(_,{pending:!0,data:v,method:u.method,action:f},f,v))}}))}function cl(r){function o(B){return wd(B,r)}to!==null&&wd(to,r),no!==null&&wd(no,r),io!==null&&wd(io,r),Gu.forEach(o),ju.forEach(o);for(var u=0;u<ro.length;u++){var f=ro[u];f.blockedOn===r&&(f.blockedOn=null)}for(;0<ro.length&&(u=ro[0],u.blockedOn===null);)XT(u),u.blockedOn===null&&ro.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(f=0;f<u.length;f+=3){var v=u[f],_=u[f+1],A=v[sn]||null;if(typeof _=="function")A||eS(u);else if(A){var D=null;if(_&&_.hasAttribute("formAction")){if(v=_,A=_[sn]||null)D=A.formAction;else if(kg(v)!==null)continue}else D=A.action;typeof D=="function"?u[f+1]=D:(u.splice(f,3),f-=3),eS(u)}}}function tS(){function r(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return v=A})},focusReset:"manual",scroll:"manual"})}function o(){v!==null&&(v(),v=null),f||setTimeout(u,20)}function u(){if(!f&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,v=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){f=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),v!==null&&(v(),v=null)}}}function Lg(r){this._internalRoot=r}Id.prototype.render=Lg.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(i(409));var u=o.current,f=Ui();$T(u,f,r,o,null,null)},Id.prototype.unmount=Lg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;$T(r.current,2,null,r,null,null),ad(),o[xi]=null}};function Id(r){this._internalRoot=r}Id.prototype.unstable_scheduleHydration=function(r){if(r){var o=si();r={blockedOn:null,target:r,priority:o};for(var u=0;u<ro.length&&o!==0&&o<ro[u].priority;u++);ro.splice(u,0,r),u===0&&XT(r)}};var nS=e.version;if(nS!=="19.2.0")throw Error(i(527,nS,"19.2.0"));ce.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=h(o),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var t2={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xd.isDisabled&&xd.supportsFiber)try{Rn=xd.inject(t2),un=xd}catch{}}return Ju.createRoot=function(r,o){if(!s(r))throw Error(i(299));var u=!1,f="",v=uE,_=cE,A=fE;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError)),o=GT(r,1,!1,null,null,u,f,null,v,_,A,tS),r[xi]=o.current,gg(r),new Lg(o)},Ju.hydrateRoot=function(r,o,u){if(!s(r))throw Error(i(299));var f=!1,v="",_=uE,A=cE,D=fE,B=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(A=u.onCaughtError),u.onRecoverableError!==void 0&&(D=u.onRecoverableError),u.formState!==void 0&&(B=u.formState)),o=GT(r,1,!0,o,u??null,f,v,B,_,A,D,tS),o.context=jT(null),u=o.current,f=Ui(),f=Gi(f),v=Hs(f),v.callback=null,Gs(u,v,f),u=f,o.current.lanes=u,kt(o,u),Lr(o),r[xi]=o.current,gg(r),new Id(o)},Ju.version="19.2.0",Ju}var dS;function c2(){if(dS)return Ug.exports;dS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ug.exports=u2(),Ug.exports}var f2=c2();const d2=dC(f2),h2=()=>{};var hS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},p2=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[i++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],l=t[n++],c=t[n++],d=((s&7)<<18|(a&63)<<12|(l&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const a=t[n++],l=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return e.join("")},mC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const a=t[s],l=s+1<t.length,c=l?t[s+1]:0,d=s+2<t.length,h=d?t[s+2]:0,g=a>>2,E=(a&3)<<4|c>>4;let T=(c&15)<<2|h>>6,w=h&63;d||(w=64,l||(T=64)),i.push(n[g],n[E],n[T],n[w])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(pC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):p2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const E=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||c==null||h==null||E==null)throw new m2;const T=a<<2|c>>4;if(i.push(T),h!==64){const w=c<<4&240|h>>2;if(i.push(w),E!==64){const N=h<<6&192|E;i.push(N)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class m2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const g2=function(t){const e=pC(t);return mC.encodeByteArray(e,!0)},_h=function(t){return g2(t).replace(/\./g,"")},gC=function(t){try{return mC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2=()=>y2().__FIREBASE_DEFAULTS__,_2=()=>{if(typeof process>"u"||typeof hS>"u")return;const t=hS.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},E2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&gC(t[1]);return e&&JSON.parse(e)},np=()=>{try{return h2()||v2()||_2()||E2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},yC=t=>{var e,n;return(n=(e=np())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},dv=t=>{const e=yC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},vC=()=>{var t;return(t=np())===null||t===void 0?void 0:t.config},_C=t=>{var e;return(e=np())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ip(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[_h(JSON.stringify(n)),_h(JSON.stringify(l)),""].join(".")}const hc={};function S2(){const t={prod:[],emulator:[]};for(const e of Object.keys(hc))hc[e]?t.emulator.push(e):t.prod.push(e);return t}function b2(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let pS=!1;function rp(t,e){if(typeof window>"u"||typeof document>"u"||!bs(window.location.host)||hc[t]===e||hc[t]||pS)return;hc[t]=e;function n(T){return`__firebase__banner__${T}`}const i="__firebase__banner",a=S2().prod.length>0;function l(){const T=document.getElementById(i);T&&T.remove()}function c(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function d(T,w){T.setAttribute("width","24"),T.setAttribute("id",w),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function h(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{pS=!0,l()},T}function g(T,w){T.setAttribute("id",w),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=b2(i),w=n("text"),N=document.getElementById(w)||document.createElement("span"),P=n("learnmore"),V=document.getElementById(P)||document.createElement("a"),z=n("preprendIcon"),F=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const q=T.element;c(q),g(V,P);const K=h();d(F,z),q.append(F,N,V,K),document.body.appendChild(q)}a?(N.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function A2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ti())}function w2(){var t;const e=(t=np())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function C2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function I2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function x2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function R2(){const t=ti();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function N2(){return!w2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function D2(){try{return typeof indexedDB=="object"}catch{return!1}}function M2(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2="FirebaseError";class Gr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=k2,Object.setPrototypeOf(this,Gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hc.prototype.create)}}class Hc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?P2(a,i):"Error",c=`${this.serviceName}: ${l} (${s}).`;return new Gr(s,c,i)}}function P2(t,e){return t.replace(L2,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const L2=/\{\$([^}]+)}/g;function V2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ya(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const a=t[s],l=e[s];if(mS(a)&&mS(l)){if(!ya(a,l))return!1}else if(a!==l)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function mS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function nc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,a]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function ic(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function O2(t,e){const n=new U2(t,e);return n.subscribe.bind(n)}class U2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");F2(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=zg),s.error===void 0&&(s.error=zg),s.complete===void 0&&(s.complete=zg);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function F2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function zg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(t){return t&&t._delegate?t._delegate:t}class ys{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new T2;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(z2(e))try{this.getOrInitializeService({instanceIdentifier:aa})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});i.resolve(a)}catch{}}}}clearInstance(e=aa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=aa){return this.instances.has(e)}getOptions(e=aa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[a,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);i===c&&l.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),a=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:B2(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=aa){return this.component?this.component.multipleInstances?e:aa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function B2(t){return t===aa?void 0:t}function z2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new q2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(nt||(nt={}));const G2={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},j2=nt.INFO,$2={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},K2=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=$2[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hv{constructor(e){this.name=e,this._logLevel=j2,this._logHandler=K2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?G2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const J2=(t,e)=>e.some(n=>t instanceof n);let gS,yS;function Y2(){return gS||(gS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function W2(){return yS||(yS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const TC=new WeakMap,cy=new WeakMap,SC=new WeakMap,Hg=new WeakMap,pv=new WeakMap;function Q2(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{n(yo(t.result)),s()},l=()=>{i(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&TC.set(n,t)}).catch(()=>{}),pv.set(e,t),e}function X2(t){if(cy.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{n(),s()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});cy.set(t,e)}let fy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return cy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||SC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Z2(t){fy=t(fy)}function eD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Gg(this),e,...n);return SC.set(i,e.sort?e.sort():[e]),yo(i)}:W2().includes(t)?function(...e){return t.apply(Gg(this),e),yo(TC.get(this))}:function(...e){return yo(t.apply(Gg(this),e))}}function tD(t){return typeof t=="function"?eD(t):(t instanceof IDBTransaction&&X2(t),J2(t,Y2())?new Proxy(t,fy):t)}function yo(t){if(t instanceof IDBRequest)return Q2(t);if(Hg.has(t))return Hg.get(t);const e=tD(t);return e!==t&&(Hg.set(t,e),pv.set(e,t)),e}const Gg=t=>pv.get(t);function nD(t,e,{blocked:n,upgrade:i,blocking:s,terminated:a}={}){const l=indexedDB.open(t,e),c=yo(l);return i&&l.addEventListener("upgradeneeded",d=>{i(yo(l.result),d.oldVersion,d.newVersion,yo(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),c.then(d=>{a&&d.addEventListener("close",()=>a()),s&&d.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const iD=["get","getKey","getAll","getAllKeys","count"],rD=["put","add","delete","clear"],jg=new Map;function vS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jg.get(e))return jg.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=rD.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||iD.includes(n)))return;const a=async function(l,...c){const d=this.transaction(l,s?"readwrite":"readonly");let h=d.store;return i&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),s&&d.done]))[0]};return jg.set(e,a),a}Z2(t=>({...t,get:(e,n,i)=>vS(e,n)||t.get(e,n,i),has:(e,n)=>!!vS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(oD(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function oD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const dy="@firebase/app",_S="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=new hv("@firebase/app"),aD="@firebase/app-compat",lD="@firebase/analytics-compat",uD="@firebase/analytics",cD="@firebase/app-check-compat",fD="@firebase/app-check",dD="@firebase/auth",hD="@firebase/auth-compat",pD="@firebase/database",mD="@firebase/data-connect",gD="@firebase/database-compat",yD="@firebase/functions",vD="@firebase/functions-compat",_D="@firebase/installations",ED="@firebase/installations-compat",TD="@firebase/messaging",SD="@firebase/messaging-compat",bD="@firebase/performance",AD="@firebase/performance-compat",wD="@firebase/remote-config",CD="@firebase/remote-config-compat",ID="@firebase/storage",xD="@firebase/storage-compat",RD="@firebase/firestore",ND="@firebase/ai",DD="@firebase/firestore-compat",MD="firebase",kD="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy="[DEFAULT]",PD={[dy]:"fire-core",[aD]:"fire-core-compat",[uD]:"fire-analytics",[lD]:"fire-analytics-compat",[fD]:"fire-app-check",[cD]:"fire-app-check-compat",[dD]:"fire-auth",[hD]:"fire-auth-compat",[pD]:"fire-rtdb",[mD]:"fire-data-connect",[gD]:"fire-rtdb-compat",[yD]:"fire-fn",[vD]:"fire-fn-compat",[_D]:"fire-iid",[ED]:"fire-iid-compat",[TD]:"fire-fcm",[SD]:"fire-fcm-compat",[bD]:"fire-perf",[AD]:"fire-perf-compat",[wD]:"fire-rc",[CD]:"fire-rc-compat",[ID]:"fire-gcs",[xD]:"fire-gcs-compat",[RD]:"fire-fst",[DD]:"fire-fst-compat",[ND]:"fire-vertex","fire-js":"fire-js",[MD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh=new Map,LD=new Map,py=new Map;function ES(t,e){try{t.container.addComponent(e)}catch(n){vs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function So(t){const e=t.name;if(py.has(e))return vs.debug(`There were multiple attempts to register component ${e}.`),!1;py.set(e,t);for(const n of Eh.values())ES(n,t);for(const n of LD.values())ES(n,t);return!0}function jc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function hi(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vo=new Hc("app","Firebase",VD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ys("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa=kD;function bC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:hy,automaticDataCollectionEnabled:!0},e),s=i.name;if(typeof s!="string"||!s)throw vo.create("bad-app-name",{appName:String(s)});if(n||(n=vC()),!n)throw vo.create("no-options");const a=Eh.get(s);if(a){if(ya(n,a.options)&&ya(i,a.config))return a;throw vo.create("duplicate-app",{appName:s})}const l=new H2(s);for(const d of py.values())l.addComponent(d);const c=new OD(n,i,l);return Eh.set(s,c),c}function sp(t=hy){const e=Eh.get(t);if(!e&&t===hy&&vC())return bC();if(!e)throw vo.create("no-app",{appName:t});return e}function ar(t,e,n){var i;let s=(i=PD[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${s}" with version "${e}":`];a&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vs.warn(c.join(" "));return}So(new ys(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD="firebase-heartbeat-database",FD=1,Dc="firebase-heartbeat-store";let $g=null;function AC(){return $g||($g=nD(UD,FD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Dc)}catch(n){console.warn(n)}}}}).catch(t=>{throw vo.create("idb-open",{originalErrorMessage:t.message})})),$g}async function qD(t){try{const n=(await AC()).transaction(Dc),i=await n.objectStore(Dc).get(wC(t));return await n.done,i}catch(e){if(e instanceof Gr)vs.warn(e.message);else{const n=vo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vs.warn(n.message)}}}async function TS(t,e){try{const i=(await AC()).transaction(Dc,"readwrite");await i.objectStore(Dc).put(e,wC(t)),await i.done}catch(n){if(n instanceof Gr)vs.warn(n.message);else{const i=vo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});vs.warn(i.message)}}}function wC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD=1024,zD=30;class HD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new jD(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=SS();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>zD){const l=$D(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){vs.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=SS(),{heartbeatsToSend:i,unsentEntries:s}=GD(this._heartbeatsCache.heartbeats),a=_h(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return vs.warn(n),""}}}function SS(){return new Date().toISOString().substring(0,10)}function GD(t,e=BD){const n=[];let i=t.slice();for(const s of t){const a=n.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),bS(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),bS(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class jD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return D2()?M2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await qD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return TS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return TS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function bS(t){return _h(JSON.stringify({version:2,heartbeats:t})).length}function $D(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(t){So(new ys("platform-logger",e=>new sD(e),"PRIVATE")),So(new ys("heartbeat",e=>new HD(e),"PRIVATE")),ar(dy,_S,t),ar(dy,_S,"esm2017"),ar("fire-js","")}KD("");function mv(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function CC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const JD=CC,IC=new Hc("auth","Firebase",CC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th=new hv("@firebase/auth");function YD(t,...e){Th.logLevel<=nt.WARN&&Th.warn(`Auth (${Aa}): ${t}`,...e)}function eh(t,...e){Th.logLevel<=nt.ERROR&&Th.error(`Auth (${Aa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(t,...e){throw yv(t,...e)}function br(t,...e){return yv(t,...e)}function gv(t,e,n){const i=Object.assign(Object.assign({},JD()),{[e]:n});return new Hc("auth","Firebase",i).create(e,{appName:t.name})}function gs(t){return gv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function WD(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&ur(t,"argument-error"),gv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function yv(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return IC.create(t,...e)}function Le(t,e,...n){if(!t)throw yv(e,...n)}function ps(t){const e="INTERNAL ASSERTION FAILED: "+t;throw eh(e),new Error(e)}function _s(t,e){t||ps(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function QD(){return AS()==="http:"||AS()==="https:"}function AS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QD()||I2()||"connection"in navigator)?navigator.onLine:!0}function ZD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,n){this.shortDelay=e,this.longDelay=n,_s(n>e,"Short delay should be less than long delay!"),this.isMobile=A2()||x2()}get(){return XD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(t,e){_s(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ps("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ps("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ps("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],nM=new $c(3e4,6e4);function No(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Do(t,e,n,i,s={}){return RC(t,s,async()=>{let a={},l={};i&&(e==="GET"?l=i:a={body:JSON.stringify(i)});const c=Gc(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:d},a);return C2()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&bs(t.emulatorConfig.host)&&(h.credentials="include"),xC.fetch()(await NC(t,t.config.apiHost,n,c),h)})}async function RC(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},eM),e);try{const s=new rM(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw Rd(t,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const c=a.ok?l.errorMessage:l.error.message,[d,h]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rd(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Rd(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw Rd(t,"user-disabled",l);const g=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw gv(t,g,h);ur(t,g)}}catch(s){if(s instanceof Gr)throw s;ur(t,"network-request-failed",{message:String(s)})}}async function Kc(t,e,n,i,s={}){const a=await Do(t,e,n,i,s);return"mfaPendingCredential"in a&&ur(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function NC(t,e,n,i){const s=`${e}${n}?${i}`,a=t,l=a.config.emulator?vv(t.config,s):`${t.config.apiScheme}://${s}`;return tM.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function iM(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class rM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(br(this.auth,"network-request-failed")),nM.get())})}}function Rd(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=br(t,e,i);return s.customData._tokenResponse=n,s}function wS(t){return t!==void 0&&t.enterprise!==void 0}class sM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return iM(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function oM(t,e){return Do(t,"GET","/v2/recaptchaConfig",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aM(t,e){return Do(t,"POST","/v1/accounts:delete",e)}async function Sh(t,e){return Do(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lM(t,e=!1){const n=zt(t),i=await n.getIdToken(e),s=_v(i);Le(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:s,token:i,authTime:pc(Kg(s.auth_time)),issuedAtTime:pc(Kg(s.iat)),expirationTime:pc(Kg(s.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Kg(t){return Number(t)*1e3}function _v(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return eh("JWT malformed, contained fewer than 3 sections"),null;try{const s=gC(n);return s?JSON.parse(s):(eh("Failed to decode base64 JWT payload"),null)}catch(s){return eh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function CS(t){const e=_v(t);return Le(e,"internal-error"),Le(typeof e.exp<"u","internal-error"),Le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mc(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Gr&&uM(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function uM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=pc(this.lastLoginAt),this.creationTime=pc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bh(t){var e;const n=t.auth,i=await t.getIdToken(),s=await Mc(t,Sh(n,{idToken:i}));Le(s==null?void 0:s.users.length,n,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?DC(a.providerUserInfo):[],c=dM(t.providerData,l),d=t.isAnonymous,h=!(t.email&&a.passwordHash)&&!(c!=null&&c.length),g=d?h:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new gy(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(t,E)}async function fM(t){const e=zt(t);await bh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dM(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function DC(t){return t.map(e=>{var{providerId:n}=e,i=mv(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hM(t,e){const n=await RC(t,{},async()=>{const i=Gc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,l=await NC(t,s,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:c,body:i};return t.emulatorConfig&&bs(t.emulatorConfig.host)&&(d.credentials="include"),xC.fetch()(l,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function pM(t,e){return Do(t,"POST","/v2/accounts:revokeToken",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Le(e.idToken,"internal-error"),Le(typeof e.idToken<"u","internal-error"),Le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):CS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Le(e.length!==0,"internal-error");const n=CS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:a}=await hM(e,n);this.updateTokensAndExpiration(i,s,Number(a))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:a}=n,l=new bl;return i&&(Le(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(Le(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),a&&(Le(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bl,this.toJSON())}_performRefresh(){return ps("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oo(t,e){Le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Er{constructor(e){var{uid:n,auth:i,stsTokenManager:s}=e,a=mv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new gy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Mc(this,this.stsTokenManager.getToken(this.auth,e));return Le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return lM(this,e)}reload(){return fM(this)}_assign(e){this!==e&&(Le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Er(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await bh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hi(this.auth.app))return Promise.reject(gs(this.auth));const e=await this.getIdToken();return await Mc(this,aM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,s,a,l,c,d,h,g;const E=(i=n.displayName)!==null&&i!==void 0?i:void 0,T=(s=n.email)!==null&&s!==void 0?s:void 0,w=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,N=(l=n.photoURL)!==null&&l!==void 0?l:void 0,P=(c=n.tenantId)!==null&&c!==void 0?c:void 0,V=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,z=(h=n.createdAt)!==null&&h!==void 0?h:void 0,F=(g=n.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:q,emailVerified:K,isAnonymous:X,providerData:G,stsTokenManager:I}=n;Le(q&&I,e,"internal-error");const x=bl.fromJSON(this.name,I);Le(typeof q=="string",e,"internal-error"),oo(E,e.name),oo(T,e.name),Le(typeof K=="boolean",e,"internal-error"),Le(typeof X=="boolean",e,"internal-error"),oo(w,e.name),oo(N,e.name),oo(P,e.name),oo(V,e.name),oo(z,e.name),oo(F,e.name);const R=new Er({uid:q,auth:e,email:T,emailVerified:K,displayName:E,isAnonymous:X,photoURL:N,phoneNumber:w,tenantId:P,stsTokenManager:x,createdAt:z,lastLoginAt:F});return G&&Array.isArray(G)&&(R.providerData=G.map(L=>Object.assign({},L))),V&&(R._redirectEventId=V),R}static async _fromIdTokenResponse(e,n,i=!1){const s=new bl;s.updateFromServerResponse(n);const a=new Er({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await bh(a),a}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];Le(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?DC(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),c=new bl;c.updateFromIdToken(i);const d=new Er({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:l}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new gy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS=new Map;function ms(t){_s(t instanceof Function,"Expected a class definition");let e=IS.get(t);return e?(_s(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,IS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}MC.type="NONE";const xS=MC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(t,e,n){return`firebase:${t}:${e}:${n}`}class Al{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:a}=this.auth;this.fullUserKey=th(this.userKey,s.apiKey,a),this.fullPersistenceKey=th("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Sh(this.auth,{idToken:e}).catch(()=>{});return n?Er._fromGetAccountInfoResponse(this.auth,n,e):null}return Er._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Al(ms(xS),e,i);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=s[0]||ms(xS);const l=th(i,e.config.apiKey,e.name);let c=null;for(const h of n)try{const g=await h._get(l);if(g){let E;if(typeof g=="string"){const T=await Sh(e,{idToken:g}).catch(()=>{});if(!T)break;E=await Er._fromGetAccountInfoResponse(e,T,g)}else E=Er._fromJSON(e,g);h!==a&&(c=E),a=h;break}}catch{}const d=s.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new Al(a,e,i):(a=d[0],c&&await a._set(l,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==a)try{await h._remove(l)}catch{}})),new Al(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(VC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(UC(e))return"Blackberry";if(FC(e))return"Webos";if(PC(e))return"Safari";if((e.includes("chrome/")||LC(e))&&!e.includes("edge/"))return"Chrome";if(OC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function kC(t=ti()){return/firefox\//i.test(t)}function PC(t=ti()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function LC(t=ti()){return/crios\//i.test(t)}function VC(t=ti()){return/iemobile/i.test(t)}function OC(t=ti()){return/android/i.test(t)}function UC(t=ti()){return/blackberry/i.test(t)}function FC(t=ti()){return/webos/i.test(t)}function Ev(t=ti()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function mM(t=ti()){var e;return Ev(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gM(){return R2()&&document.documentMode===10}function qC(t=ti()){return Ev(t)||OC(t)||FC(t)||UC(t)||/windows phone/i.test(t)||VC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(t,e=[]){let n;switch(t){case"Browser":n=RS(ti());break;case"Worker":n=`${RS(ti())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Aa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=a=>new Promise((l,c)=>{try{const d=e(a);l(d)}catch(d){c(d)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vM(t,e={}){return Do(t,"GET","/v2/passwordPolicy",No(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M=6;class EM{constructor(e){var n,i,s,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:_M,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,s,a,l,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(a=d.containsUppercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new NS(this),this.idTokenSubscription=new NS(this),this.beforeStateQueue=new yM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=IC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ms(n)),this._initializationPromise=this.queue(async()=>{var i,s,a;if(!this._deleted&&(this.persistenceManager=await Al.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Sh(this,{idToken:e}),i=await Er._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(hi(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&(d!=null&&d.user)&&(s=d.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await bh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ZD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hi(this.app))return Promise.reject(gs(this));const n=e?zt(e):null;return n&&Le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hi(this.app)?Promise.reject(gs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hi(this.app)?Promise.reject(gs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ms(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vM(this),n=new EM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Hc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await pM(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ms(e)||this._popupRedirectResolver;Le(n,this,"argument-error"),this.redirectPersistenceManager=await Al.create(this,[ms(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Le(c,this,"internal-error"),c.then(()=>{l||a(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,s);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=BC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(hi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&YD(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Mo(t){return zt(t)}class NS{constructor(e){this.auth=e,this.observer=null,this.addObserver=O2(n=>this.observer=n)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let op={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SM(t){op=t}function zC(t){return op.loadJS(t)}function bM(){return op.recaptchaEnterpriseScript}function AM(){return op.gapiScript}function wM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class CM{constructor(){this.enterprise=new IM}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class IM{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const xM="recaptcha-enterprise",HC="NO_RECAPTCHA";class RM{constructor(e){this.type=xM,this.auth=Mo(e)}async verify(e="verify",n=!1){async function i(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,c)=>{oM(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new sM(d);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,l(h.siteKey)}}).catch(d=>{c(d)})})}function s(a,l,c){const d=window.grecaptcha;wS(d)?d.enterprise.ready(()=>{d.enterprise.execute(a,{action:e}).then(h=>{l(h)}).catch(()=>{l(HC)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new CM().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{i(this.auth).then(c=>{if(!n&&wS(window.grecaptcha))s(c,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=bM();d.length!==0&&(d+=c),zC(d).then(()=>{s(c,a,l)}).catch(h=>{l(h)})}}).catch(c=>{l(c)})})}}async function DS(t,e,n,i=!1,s=!1){const a=new RM(t);let l;if(s)l=HC;else try{l=await a.verify(n)}catch{l=await a.verify(n,!0)}const c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return i?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function yy(t,e,n,i,s){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await DS(t,e,n,n==="getOobCode");return i(t,l)}else return i(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await DS(t,e,n,n==="getOobCode");return i(t,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NM(t,e){const n=jc(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(ya(a,e??{}))return s;ur(s,"already-initialized")}return n.initialize({options:e})}function DM(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ms);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function MM(t,e,n){const i=Mo(t);Le(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,a=GC(e),{host:l,port:c}=kM(e),d=c===null?"":`:${c}`,h={url:`${a}//${l}${d}/`},g=Object.freeze({host:l,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Le(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Le(ya(h,i.config.emulator)&&ya(g,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=g,i.settings.appVerificationDisabledForTesting=!0,bs(l)?(ip(`${a}//${l}${d}`),rp("Auth",!0)):PM()}function GC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function kM(t){const e=GC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const a=s[1];return{host:a,port:MS(i.substr(a.length+1))}}else{const[a,l]=i.split(":");return{host:a,port:MS(l)}}}function MS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function PM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ps("not implemented")}_getIdTokenResponse(e){return ps("not implemented")}_linkToIdToken(e,n){return ps("not implemented")}_getReauthenticationResolver(e){return ps("not implemented")}}async function LM(t,e){return Do(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VM(t,e){return Kc(t,"POST","/v1/accounts:signInWithPassword",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OM(t,e){return Kc(t,"POST","/v1/accounts:signInWithEmailLink",No(t,e))}async function UM(t,e){return Kc(t,"POST","/v1/accounts:signInWithEmailLink",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc extends Tv{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new kc(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new kc(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yy(e,n,"signInWithPassword",VM);case"emailLink":return OM(e,{email:this._email,oobCode:this._password});default:ur(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yy(e,i,"signUpPassword",LM);case"emailLink":return UM(e,{idToken:n,email:this._email,oobCode:this._password});default:ur(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(t,e){return Kc(t,"POST","/v1/accounts:signInWithIdp",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM="http://localhost";class va extends Tv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new va(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ur("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=n,a=mv(n,["providerId","signInMethod"]);if(!i||!s)return null;const l=new va(i,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return wl(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,wl(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,wl(e,n)}buildRequest(){const e={requestUri:FM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Gc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function BM(t){const e=nc(ic(t)).link,n=e?nc(ic(e)).deep_link_id:null,i=nc(ic(t)).deep_link_id;return(i?nc(ic(i)).link:null)||i||n||e||t}class Sv{constructor(e){var n,i,s,a,l,c;const d=nc(ic(e)),h=(n=d.apiKey)!==null&&n!==void 0?n:null,g=(i=d.oobCode)!==null&&i!==void 0?i:null,E=qM((s=d.mode)!==null&&s!==void 0?s:null);Le(h&&g&&E,"argument-error"),this.apiKey=h,this.operation=E,this.code=g,this.continueUrl=(a=d.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(l=d.lang)!==null&&l!==void 0?l:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=BM(e);try{return new Sv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(){this.providerId=Hl.PROVIDER_ID}static credential(e,n){return kc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Sv.parseLink(n);return Le(i,"argument-error"),kc._fromEmailAndCode(e,i.code,i.tenantId)}}Hl.PROVIDER_ID="password";Hl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Hl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc extends bv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao extends Jc{constructor(){super("facebook.com")}static credential(e){return va._fromParams({providerId:ao.PROVIDER_ID,signInMethod:ao.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ao.credentialFromTaggedObject(e)}static credentialFromError(e){return ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ao.credential(e.oauthAccessToken)}catch{return null}}}ao.FACEBOOK_SIGN_IN_METHOD="facebook.com";ao.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends Jc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return va._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return hs.credential(n,i)}catch{return null}}}hs.GOOGLE_SIGN_IN_METHOD="google.com";hs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo extends Jc{constructor(){super("github.com")}static credential(e){return va._fromParams({providerId:lo.PROVIDER_ID,signInMethod:lo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lo.credentialFromTaggedObject(e)}static credentialFromError(e){return lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lo.credential(e.oauthAccessToken)}catch{return null}}}lo.GITHUB_SIGN_IN_METHOD="github.com";lo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo extends Jc{constructor(){super("twitter.com")}static credential(e,n){return va._fromParams({providerId:uo.PROVIDER_ID,signInMethod:uo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return uo.credentialFromTaggedObject(e)}static credentialFromError(e){return uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return uo.credential(n,i)}catch{return null}}}uo.TWITTER_SIGN_IN_METHOD="twitter.com";uo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zM(t,e){return Kc(t,"POST","/v1/accounts:signUp",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const a=await Er._fromIdTokenResponse(e,i,s),l=kS(i);return new _a({user:a,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=kS(i);return new _a({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function kS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah extends Gr{constructor(e,n,i,s){var a;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Ah.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new Ah(e,n,i,s)}}function jC(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Ah._fromErrorAndOperation(t,a,e,i):a})}async function HM(t,e,n=!1){const i=await Mc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return _a._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GM(t,e,n=!1){const{auth:i}=t;if(hi(i.app))return Promise.reject(gs(i));const s="reauthenticate";try{const a=await Mc(t,jC(i,s,e,t),n);Le(a.idToken,i,"internal-error");const l=_v(a.idToken);Le(l,i,"internal-error");const{sub:c}=l;return Le(t.uid===c,i,"user-mismatch"),_a._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ur(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $C(t,e,n=!1){if(hi(t.app))return Promise.reject(gs(t));const i="signIn",s=await jC(t,i,e),a=await _a._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(a.user),a}async function jM(t,e){return $C(Mo(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KC(t){const e=Mo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function $M(t,e,n){if(hi(t.app))return Promise.reject(gs(t));const i=Mo(t),l=await yy(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zM).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&KC(t),d}),c=await _a._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(c.user),c}function KM(t,e,n){return hi(t.app)?Promise.reject(gs(t)):jM(zt(t),Hl.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&KC(t),i})}function JM(t,e,n,i){return zt(t).onIdTokenChanged(e,n,i)}function YM(t,e,n){return zt(t).beforeAuthStateChanged(e,n)}function WM(t,e,n,i){return zt(t).onAuthStateChanged(e,n,i)}function QM(t){return zt(t).signOut()}const wh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(wh,"1"),this.storage.removeItem(wh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM=1e3,ZM=10;class YC extends JC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,c,d)=>{this.notifyListeners(l,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},a=this.storage.getItem(i);gM()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,ZM):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},XM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}YC.type="LOCAL";const ek=YC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC extends JC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}WC.type="SESSION";const QC=WC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new ap(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:a}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const c=Array.from(l).map(async h=>h(n.origin,a)),d=await tk(c);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ap.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((c,d)=>{const h=Av("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(E){const T=E;if(T.data.eventId===h)switch(T.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(T.data.response);break;default:clearTimeout(g),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(){return window}function ik(t){Ur().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(){return typeof Ur().WorkerGlobalScope<"u"&&typeof Ur().importScripts=="function"}async function rk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function sk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ok(){return XC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC="firebaseLocalStorageDb",ak=1,Ch="firebaseLocalStorage",eI="fbase_key";class Yc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function lp(t,e){return t.transaction([Ch],e?"readwrite":"readonly").objectStore(Ch)}function lk(){const t=indexedDB.deleteDatabase(ZC);return new Yc(t).toPromise()}function vy(){const t=indexedDB.open(ZC,ak);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Ch,{keyPath:eI})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Ch)?e(i):(i.close(),await lk(),e(await vy()))})})}async function PS(t,e,n){const i=lp(t,!0).put({[eI]:e,value:n});return new Yc(i).toPromise()}async function uk(t,e){const n=lp(t,!1).get(e),i=await new Yc(n).toPromise();return i===void 0?null:i.value}function LS(t,e){const n=lp(t,!0).delete(e);return new Yc(n).toPromise()}const ck=800,fk=3;class tI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>fk)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return XC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ap._getInstance(ok()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await rk(),!this.activeServiceWorker)return;this.sender=new nk(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||sk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vy();return await PS(e,wh,"1"),await LS(e,wh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>PS(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>uk(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>LS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=lp(s,!1).getAll();return new Yc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ck)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tI.type="LOCAL";const dk=tI;new $c(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(t,e){return e?ms(e):(Le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv extends Tv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return wl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return wl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function hk(t){return $C(t.auth,new wv(t),t.bypassAuthState)}function pk(t){const{auth:e,user:n}=t;return Le(n,e,"internal-error"),GM(n,new wv(t),t.bypassAuthState)}async function mk(t){const{auth:e,user:n}=t;return Le(n,e,"internal-error"),HM(n,new wv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,n,i,s,a=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:a,error:l,type:c}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hk;case"linkViaPopup":case"linkViaRedirect":return mk;case"reauthViaPopup":case"reauthViaRedirect":return pk;default:ur(this.auth,"internal-error")}}resolve(e){_s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk=new $c(2e3,1e4);async function yk(t,e,n){if(hi(t.app))return Promise.reject(br(t,"operation-not-supported-in-this-environment"));const i=Mo(t);WD(t,e,bv);const s=nI(i,n);return new ua(i,"signInViaPopup",e,s).executeNotNull()}class ua extends iI{constructor(e,n,i,s,a){super(e,n,s,a),this.provider=i,this.authWindow=null,this.pollId=null,ua.currentPopupAction&&ua.currentPopupAction.cancel(),ua.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Le(e,this.auth,"internal-error"),e}async onExecution(){_s(this.filter.length===1,"Popup operations only handle one event");const e=Av();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(br(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(br(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ua.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(br(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,gk.get())};e()}}ua.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk="pendingRedirect",nh=new Map;class _k extends iI{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=nh.get(this.auth._key());if(!e){try{const i=await Ek(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}nh.set(this.auth._key(),e)}return this.bypassAuthState||nh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ek(t,e){const n=bk(e),i=Sk(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function Tk(t,e){nh.set(t._key(),e)}function Sk(t){return ms(t._redirectPersistence)}function bk(t){return th(vk,t.config.apiKey,t.name)}async function Ak(t,e,n=!1){if(hi(t.app))return Promise.reject(gs(t));const i=Mo(t),s=nI(i,e),l=await new _k(i,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk=600*1e3;class Ck{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Ik(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!rI(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(br(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wk&&this.cachedEventUids.clear(),this.cachedEventUids.has(VS(e))}saveEventToCache(e){this.cachedEventUids.add(VS(e)),this.lastProcessedEventTime=Date.now()}}function VS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function rI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Ik(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xk(t,e={}){return Do(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Nk=/^https?/;async function Dk(t){if(t.config.emulator)return;const{authorizedDomains:e}=await xk(t);for(const n of e)try{if(Mk(n))return}catch{}ur(t,"unauthorized-domain")}function Mk(t){const e=my(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!Nk.test(n))return!1;if(Rk.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=new $c(3e4,6e4);function OS(){const t=Ur().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Pk(t){return new Promise((e,n)=>{var i,s,a;function l(){OS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{OS(),n(br(t,"network-request-failed"))},timeout:kk.get()})}if(!((s=(i=Ur().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Ur().gapi)===null||a===void 0)&&a.load)l();else{const c=wM("iframefcb");return Ur()[c]=()=>{gapi.load?l():n(br(t,"network-request-failed"))},zC(`${AM()}?onload=${c}`).catch(d=>n(d))}}).catch(e=>{throw ih=null,e})}let ih=null;function Lk(t){return ih=ih||Pk(t),ih}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=new $c(5e3,15e3),Ok="__/auth/iframe",Uk="emulator/auth/iframe",Fk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Bk(t){const e=t.config;Le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?vv(e,Uk):`https://${t.config.authDomain}/${Ok}`,i={apiKey:e.apiKey,appName:t.name,v:Aa},s=qk.get(t.config.apiHost);s&&(i.eid=s);const a=t._getFrameworks();return a.length&&(i.fw=a.join(",")),`${n}?${Gc(i).slice(1)}`}async function zk(t){const e=await Lk(t),n=Ur().gapi;return Le(n,t,"internal-error"),e.open({where:document.body,url:Bk(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fk,dontclear:!0},i=>new Promise(async(s,a)=>{await i.restyle({setHideOnLeave:!1});const l=br(t,"network-request-failed"),c=Ur().setTimeout(()=>{a(l)},Vk.get());function d(){Ur().clearTimeout(c),s(i)}i.ping(d).then(d,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Gk=500,jk=600,$k="_blank",Kk="http://localhost";class US{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Jk(t,e,n,i=Gk,s=jk){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const d=Object.assign(Object.assign({},Hk),{width:i.toString(),height:s.toString(),top:a,left:l}),h=ti().toLowerCase();n&&(c=LC(h)?$k:n),kC(h)&&(e=e||Kk,d.scrollbars="yes");const g=Object.entries(d).reduce((T,[w,N])=>`${T}${w}=${N},`,"");if(mM(h)&&c!=="_self")return Yk(e||"",c),new US(null);const E=window.open(e||"",c,g);Le(E,t,"popup-blocked");try{E.focus()}catch{}return new US(E)}function Yk(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk="__/auth/handler",Qk="emulator/auth/handler",Xk=encodeURIComponent("fac");async function FS(t,e,n,i,s,a){Le(t.config.authDomain,t,"auth-domain-config-required"),Le(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Aa,eventId:s};if(e instanceof bv){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",V2(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,E]of Object.entries({}))l[g]=E}if(e instanceof Jc){const g=e.getScopes().filter(E=>E!=="");g.length>0&&(l.scopes=g.join(","))}t.tenantId&&(l.tid=t.tenantId);const c=l;for(const g of Object.keys(c))c[g]===void 0&&delete c[g];const d=await t._getAppCheckToken(),h=d?`#${Xk}=${encodeURIComponent(d)}`:"";return`${Zk(t)}?${Gc(c).slice(1)}${h}`}function Zk({config:t}){return t.emulator?vv(t,Qk):`https://${t.authDomain}/${Wk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg="webStorageSupport";class eP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=QC,this._completeRedirectFn=Ak,this._overrideRedirectResult=Tk}async _openPopup(e,n,i,s){var a;_s((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await FS(e,n,i,my(),s);return Jk(e,l,Av())}async _openRedirect(e,n,i,s){await this._originValidation(e);const a=await FS(e,n,i,my(),s);return ik(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(_s(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await zk(e),i=new Ck(e);return n.register("authEvent",s=>(Le(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Jg,{type:Jg},s=>{var a;const l=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[Jg];l!==void 0&&n(!!l),ur(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Dk(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return qC()||PC()||Ev()}}const tP=eP;var qS="@firebase/auth",BS="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rP(t){So(new ys("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=i.options;Le(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BC(t)},h=new TM(i,s,a,d);return DM(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),So(new ys("auth-internal",e=>{const n=Mo(e.getProvider("auth").getImmediate());return(i=>new nP(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ar(qS,BS,iP(t)),ar(qS,BS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=300,oP=_C("authIdTokenMaxAge")||sP;let zS=null;const aP=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>oP)return;const s=n==null?void 0:n.token;zS!==s&&(zS=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function lP(t=sp()){const e=jc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=NM(t,{popupRedirectResolver:tP,persistence:[dk,ek,QC]}),i=_C("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const l=aP(a.toString());YM(n,l,()=>l(n.currentUser)),JM(n,c=>l(c))}}const s=yC("auth");return s&&MM(n,`http://${s}`),n}function uP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}SM({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const a=br("internal-error");a.customData=s,n(a)},i.type="text/javascript",i.charset="UTF-8",uP().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rP("Browser");var cP="firebase",fP="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ar(cP,fP,"app");var HS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _o,sI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,x){function R(){}R.prototype=x.prototype,I.D=x.prototype,I.prototype=new R,I.prototype.constructor=I,I.C=function(L,M,O){for(var U=Array(arguments.length-2),we=2;we<arguments.length;we++)U[we-2]=arguments[we];return x.prototype[M].apply(L,U)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,x,R){R||(R=0);var L=Array(16);if(typeof x=="string")for(var M=0;16>M;++M)L[M]=x.charCodeAt(R++)|x.charCodeAt(R++)<<8|x.charCodeAt(R++)<<16|x.charCodeAt(R++)<<24;else for(M=0;16>M;++M)L[M]=x[R++]|x[R++]<<8|x[R++]<<16|x[R++]<<24;x=I.g[0],R=I.g[1],M=I.g[2];var O=I.g[3],U=x+(O^R&(M^O))+L[0]+3614090360&4294967295;x=R+(U<<7&4294967295|U>>>25),U=O+(M^x&(R^M))+L[1]+3905402710&4294967295,O=x+(U<<12&4294967295|U>>>20),U=M+(R^O&(x^R))+L[2]+606105819&4294967295,M=O+(U<<17&4294967295|U>>>15),U=R+(x^M&(O^x))+L[3]+3250441966&4294967295,R=M+(U<<22&4294967295|U>>>10),U=x+(O^R&(M^O))+L[4]+4118548399&4294967295,x=R+(U<<7&4294967295|U>>>25),U=O+(M^x&(R^M))+L[5]+1200080426&4294967295,O=x+(U<<12&4294967295|U>>>20),U=M+(R^O&(x^R))+L[6]+2821735955&4294967295,M=O+(U<<17&4294967295|U>>>15),U=R+(x^M&(O^x))+L[7]+4249261313&4294967295,R=M+(U<<22&4294967295|U>>>10),U=x+(O^R&(M^O))+L[8]+1770035416&4294967295,x=R+(U<<7&4294967295|U>>>25),U=O+(M^x&(R^M))+L[9]+2336552879&4294967295,O=x+(U<<12&4294967295|U>>>20),U=M+(R^O&(x^R))+L[10]+4294925233&4294967295,M=O+(U<<17&4294967295|U>>>15),U=R+(x^M&(O^x))+L[11]+2304563134&4294967295,R=M+(U<<22&4294967295|U>>>10),U=x+(O^R&(M^O))+L[12]+1804603682&4294967295,x=R+(U<<7&4294967295|U>>>25),U=O+(M^x&(R^M))+L[13]+4254626195&4294967295,O=x+(U<<12&4294967295|U>>>20),U=M+(R^O&(x^R))+L[14]+2792965006&4294967295,M=O+(U<<17&4294967295|U>>>15),U=R+(x^M&(O^x))+L[15]+1236535329&4294967295,R=M+(U<<22&4294967295|U>>>10),U=x+(M^O&(R^M))+L[1]+4129170786&4294967295,x=R+(U<<5&4294967295|U>>>27),U=O+(R^M&(x^R))+L[6]+3225465664&4294967295,O=x+(U<<9&4294967295|U>>>23),U=M+(x^R&(O^x))+L[11]+643717713&4294967295,M=O+(U<<14&4294967295|U>>>18),U=R+(O^x&(M^O))+L[0]+3921069994&4294967295,R=M+(U<<20&4294967295|U>>>12),U=x+(M^O&(R^M))+L[5]+3593408605&4294967295,x=R+(U<<5&4294967295|U>>>27),U=O+(R^M&(x^R))+L[10]+38016083&4294967295,O=x+(U<<9&4294967295|U>>>23),U=M+(x^R&(O^x))+L[15]+3634488961&4294967295,M=O+(U<<14&4294967295|U>>>18),U=R+(O^x&(M^O))+L[4]+3889429448&4294967295,R=M+(U<<20&4294967295|U>>>12),U=x+(M^O&(R^M))+L[9]+568446438&4294967295,x=R+(U<<5&4294967295|U>>>27),U=O+(R^M&(x^R))+L[14]+3275163606&4294967295,O=x+(U<<9&4294967295|U>>>23),U=M+(x^R&(O^x))+L[3]+4107603335&4294967295,M=O+(U<<14&4294967295|U>>>18),U=R+(O^x&(M^O))+L[8]+1163531501&4294967295,R=M+(U<<20&4294967295|U>>>12),U=x+(M^O&(R^M))+L[13]+2850285829&4294967295,x=R+(U<<5&4294967295|U>>>27),U=O+(R^M&(x^R))+L[2]+4243563512&4294967295,O=x+(U<<9&4294967295|U>>>23),U=M+(x^R&(O^x))+L[7]+1735328473&4294967295,M=O+(U<<14&4294967295|U>>>18),U=R+(O^x&(M^O))+L[12]+2368359562&4294967295,R=M+(U<<20&4294967295|U>>>12),U=x+(R^M^O)+L[5]+4294588738&4294967295,x=R+(U<<4&4294967295|U>>>28),U=O+(x^R^M)+L[8]+2272392833&4294967295,O=x+(U<<11&4294967295|U>>>21),U=M+(O^x^R)+L[11]+1839030562&4294967295,M=O+(U<<16&4294967295|U>>>16),U=R+(M^O^x)+L[14]+4259657740&4294967295,R=M+(U<<23&4294967295|U>>>9),U=x+(R^M^O)+L[1]+2763975236&4294967295,x=R+(U<<4&4294967295|U>>>28),U=O+(x^R^M)+L[4]+1272893353&4294967295,O=x+(U<<11&4294967295|U>>>21),U=M+(O^x^R)+L[7]+4139469664&4294967295,M=O+(U<<16&4294967295|U>>>16),U=R+(M^O^x)+L[10]+3200236656&4294967295,R=M+(U<<23&4294967295|U>>>9),U=x+(R^M^O)+L[13]+681279174&4294967295,x=R+(U<<4&4294967295|U>>>28),U=O+(x^R^M)+L[0]+3936430074&4294967295,O=x+(U<<11&4294967295|U>>>21),U=M+(O^x^R)+L[3]+3572445317&4294967295,M=O+(U<<16&4294967295|U>>>16),U=R+(M^O^x)+L[6]+76029189&4294967295,R=M+(U<<23&4294967295|U>>>9),U=x+(R^M^O)+L[9]+3654602809&4294967295,x=R+(U<<4&4294967295|U>>>28),U=O+(x^R^M)+L[12]+3873151461&4294967295,O=x+(U<<11&4294967295|U>>>21),U=M+(O^x^R)+L[15]+530742520&4294967295,M=O+(U<<16&4294967295|U>>>16),U=R+(M^O^x)+L[2]+3299628645&4294967295,R=M+(U<<23&4294967295|U>>>9),U=x+(M^(R|~O))+L[0]+4096336452&4294967295,x=R+(U<<6&4294967295|U>>>26),U=O+(R^(x|~M))+L[7]+1126891415&4294967295,O=x+(U<<10&4294967295|U>>>22),U=M+(x^(O|~R))+L[14]+2878612391&4294967295,M=O+(U<<15&4294967295|U>>>17),U=R+(O^(M|~x))+L[5]+4237533241&4294967295,R=M+(U<<21&4294967295|U>>>11),U=x+(M^(R|~O))+L[12]+1700485571&4294967295,x=R+(U<<6&4294967295|U>>>26),U=O+(R^(x|~M))+L[3]+2399980690&4294967295,O=x+(U<<10&4294967295|U>>>22),U=M+(x^(O|~R))+L[10]+4293915773&4294967295,M=O+(U<<15&4294967295|U>>>17),U=R+(O^(M|~x))+L[1]+2240044497&4294967295,R=M+(U<<21&4294967295|U>>>11),U=x+(M^(R|~O))+L[8]+1873313359&4294967295,x=R+(U<<6&4294967295|U>>>26),U=O+(R^(x|~M))+L[15]+4264355552&4294967295,O=x+(U<<10&4294967295|U>>>22),U=M+(x^(O|~R))+L[6]+2734768916&4294967295,M=O+(U<<15&4294967295|U>>>17),U=R+(O^(M|~x))+L[13]+1309151649&4294967295,R=M+(U<<21&4294967295|U>>>11),U=x+(M^(R|~O))+L[4]+4149444226&4294967295,x=R+(U<<6&4294967295|U>>>26),U=O+(R^(x|~M))+L[11]+3174756917&4294967295,O=x+(U<<10&4294967295|U>>>22),U=M+(x^(O|~R))+L[2]+718787259&4294967295,M=O+(U<<15&4294967295|U>>>17),U=R+(O^(M|~x))+L[9]+3951481745&4294967295,I.g[0]=I.g[0]+x&4294967295,I.g[1]=I.g[1]+(M+(U<<21&4294967295|U>>>11))&4294967295,I.g[2]=I.g[2]+M&4294967295,I.g[3]=I.g[3]+O&4294967295}i.prototype.u=function(I,x){x===void 0&&(x=I.length);for(var R=x-this.blockSize,L=this.B,M=this.h,O=0;O<x;){if(M==0)for(;O<=R;)s(this,I,O),O+=this.blockSize;if(typeof I=="string"){for(;O<x;)if(L[M++]=I.charCodeAt(O++),M==this.blockSize){s(this,L),M=0;break}}else for(;O<x;)if(L[M++]=I[O++],M==this.blockSize){s(this,L),M=0;break}}this.h=M,this.o+=x},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var x=1;x<I.length-8;++x)I[x]=0;var R=8*this.o;for(x=I.length-8;x<I.length;++x)I[x]=R&255,R/=256;for(this.u(I),I=Array(16),x=R=0;4>x;++x)for(var L=0;32>L;L+=8)I[R++]=this.g[x]>>>L&255;return I};function a(I,x){var R=c;return Object.prototype.hasOwnProperty.call(R,I)?R[I]:R[I]=x(I)}function l(I,x){this.h=x;for(var R=[],L=!0,M=I.length-1;0<=M;M--){var O=I[M]|0;L&&O==x||(R[M]=O,L=!1)}this.g=R}var c={};function d(I){return-128<=I&&128>I?a(I,function(x){return new l([x|0],0>x?-1:0)}):new l([I|0],0>I?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return E;if(0>I)return V(h(-I));for(var x=[],R=1,L=0;I>=R;L++)x[L]=I/R|0,R*=4294967296;return new l(x,0)}function g(I,x){if(I.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(I.charAt(0)=="-")return V(g(I.substring(1),x));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=h(Math.pow(x,8)),L=E,M=0;M<I.length;M+=8){var O=Math.min(8,I.length-M),U=parseInt(I.substring(M,M+O),x);8>O?(O=h(Math.pow(x,O)),L=L.j(O).add(h(U))):(L=L.j(R),L=L.add(h(U)))}return L}var E=d(0),T=d(1),w=d(16777216);t=l.prototype,t.m=function(){if(P(this))return-V(this).m();for(var I=0,x=1,R=0;R<this.g.length;R++){var L=this.i(R);I+=(0<=L?L:4294967296+L)*x,x*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(N(this))return"0";if(P(this))return"-"+V(this).toString(I);for(var x=h(Math.pow(I,6)),R=this,L="";;){var M=K(R,x).g;R=z(R,M.j(x));var O=((0<R.g.length?R.g[0]:R.h)>>>0).toString(I);if(R=M,N(R))return O+L;for(;6>O.length;)O="0"+O;L=O+L}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function N(I){if(I.h!=0)return!1;for(var x=0;x<I.g.length;x++)if(I.g[x]!=0)return!1;return!0}function P(I){return I.h==-1}t.l=function(I){return I=z(this,I),P(I)?-1:N(I)?0:1};function V(I){for(var x=I.g.length,R=[],L=0;L<x;L++)R[L]=~I.g[L];return new l(R,~I.h).add(T)}t.abs=function(){return P(this)?V(this):this},t.add=function(I){for(var x=Math.max(this.g.length,I.g.length),R=[],L=0,M=0;M<=x;M++){var O=L+(this.i(M)&65535)+(I.i(M)&65535),U=(O>>>16)+(this.i(M)>>>16)+(I.i(M)>>>16);L=U>>>16,O&=65535,U&=65535,R[M]=U<<16|O}return new l(R,R[R.length-1]&-2147483648?-1:0)};function z(I,x){return I.add(V(x))}t.j=function(I){if(N(this)||N(I))return E;if(P(this))return P(I)?V(this).j(V(I)):V(V(this).j(I));if(P(I))return V(this.j(V(I)));if(0>this.l(w)&&0>I.l(w))return h(this.m()*I.m());for(var x=this.g.length+I.g.length,R=[],L=0;L<2*x;L++)R[L]=0;for(L=0;L<this.g.length;L++)for(var M=0;M<I.g.length;M++){var O=this.i(L)>>>16,U=this.i(L)&65535,we=I.i(M)>>>16,ve=I.i(M)&65535;R[2*L+2*M]+=U*ve,F(R,2*L+2*M),R[2*L+2*M+1]+=O*ve,F(R,2*L+2*M+1),R[2*L+2*M+1]+=U*we,F(R,2*L+2*M+1),R[2*L+2*M+2]+=O*we,F(R,2*L+2*M+2)}for(L=0;L<x;L++)R[L]=R[2*L+1]<<16|R[2*L];for(L=x;L<2*x;L++)R[L]=0;return new l(R,0)};function F(I,x){for(;(I[x]&65535)!=I[x];)I[x+1]+=I[x]>>>16,I[x]&=65535,x++}function q(I,x){this.g=I,this.h=x}function K(I,x){if(N(x))throw Error("division by zero");if(N(I))return new q(E,E);if(P(I))return x=K(V(I),x),new q(V(x.g),V(x.h));if(P(x))return x=K(I,V(x)),new q(V(x.g),x.h);if(30<I.g.length){if(P(I)||P(x))throw Error("slowDivide_ only works with positive integers.");for(var R=T,L=x;0>=L.l(I);)R=X(R),L=X(L);var M=G(R,1),O=G(L,1);for(L=G(L,2),R=G(R,2);!N(L);){var U=O.add(L);0>=U.l(I)&&(M=M.add(R),O=U),L=G(L,1),R=G(R,1)}return x=z(I,M.j(x)),new q(M,x)}for(M=E;0<=I.l(x);){for(R=Math.max(1,Math.floor(I.m()/x.m())),L=Math.ceil(Math.log(R)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),O=h(R),U=O.j(x);P(U)||0<U.l(I);)R-=L,O=h(R),U=O.j(x);N(O)&&(O=T),M=M.add(O),I=z(I,U)}return new q(M,I)}t.A=function(I){return K(this,I).h},t.and=function(I){for(var x=Math.max(this.g.length,I.g.length),R=[],L=0;L<x;L++)R[L]=this.i(L)&I.i(L);return new l(R,this.h&I.h)},t.or=function(I){for(var x=Math.max(this.g.length,I.g.length),R=[],L=0;L<x;L++)R[L]=this.i(L)|I.i(L);return new l(R,this.h|I.h)},t.xor=function(I){for(var x=Math.max(this.g.length,I.g.length),R=[],L=0;L<x;L++)R[L]=this.i(L)^I.i(L);return new l(R,this.h^I.h)};function X(I){for(var x=I.g.length+1,R=[],L=0;L<x;L++)R[L]=I.i(L)<<1|I.i(L-1)>>>31;return new l(R,I.h)}function G(I,x){var R=x>>5;x%=32;for(var L=I.g.length-R,M=[],O=0;O<L;O++)M[O]=0<x?I.i(O+R)>>>x|I.i(O+R+1)<<32-x:I.i(O+R);return new l(M,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,sI=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=h,l.fromString=g,_o=l}).apply(typeof HS<"u"?HS:typeof self<"u"?self:typeof window<"u"?window:{});var Nd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oI,rc,aI,rh,_y,lI,uI,cI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,S,C){return m==Array.prototype||m==Object.prototype||(m[S]=C.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nd=="object"&&Nd];for(var S=0;S<m.length;++S){var C=m[S];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=n(this);function s(m,S){if(S)e:{var C=i;m=m.split(".");for(var k=0;k<m.length-1;k++){var Y=m[k];if(!(Y in C))break e;C=C[Y]}m=m[m.length-1],k=C[m],S=S(k),S!=k&&S!=null&&e(C,m,{configurable:!0,writable:!0,value:S})}}function a(m,S){m instanceof String&&(m+="");var C=0,k=!1,Y={next:function(){if(!k&&C<m.length){var ie=C++;return{value:S(ie,m[ie]),done:!1}}return k=!0,{done:!0,value:void 0}}};return Y[Symbol.iterator]=function(){return Y},Y}s("Array.prototype.values",function(m){return m||function(){return a(this,function(S,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(m){var S=typeof m;return S=S!="object"?S:m?Array.isArray(m)?"array":S:"null",S=="array"||S=="object"&&typeof m.length=="number"}function h(m){var S=typeof m;return S=="object"&&m!=null||S=="function"}function g(m,S,C){return m.call.apply(m.bind,arguments)}function E(m,S,C){if(!m)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var Y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Y,k),m.apply(S,Y)}}return function(){return m.apply(S,arguments)}}function T(m,S,C){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:E,T.apply(null,arguments)}function w(m,S){var C=Array.prototype.slice.call(arguments,1);return function(){var k=C.slice();return k.push.apply(k,arguments),m.apply(this,k)}}function N(m,S){function C(){}C.prototype=S.prototype,m.aa=S.prototype,m.prototype=new C,m.prototype.constructor=m,m.Qb=function(k,Y,ie){for(var de=Array(arguments.length-2),_t=2;_t<arguments.length;_t++)de[_t-2]=arguments[_t];return S.prototype[Y].apply(k,de)}}function P(m){const S=m.length;if(0<S){const C=Array(S);for(let k=0;k<S;k++)C[k]=m[k];return C}return[]}function V(m,S){for(let C=1;C<arguments.length;C++){const k=arguments[C];if(d(k)){const Y=m.length||0,ie=k.length||0;m.length=Y+ie;for(let de=0;de<ie;de++)m[Y+de]=k[de]}else m.push(k)}}class z{constructor(S,C){this.i=S,this.j=C,this.h=0,this.g=null}get(){let S;return 0<this.h?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function F(m){return/^[\s\xa0]*$/.test(m)}function q(){var m=c.navigator;return m&&(m=m.userAgent)?m:""}function K(m){return K[" "](m),m}K[" "]=function(){};var X=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function G(m,S,C){for(const k in m)S.call(C,m[k],k,m)}function I(m,S){for(const C in m)S.call(void 0,m[C],C,m)}function x(m){const S={};for(const C in m)S[C]=m[C];return S}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(m,S){let C,k;for(let Y=1;Y<arguments.length;Y++){k=arguments[Y];for(C in k)m[C]=k[C];for(let ie=0;ie<R.length;ie++)C=R[ie],Object.prototype.hasOwnProperty.call(k,C)&&(m[C]=k[C])}}function M(m){var S=1;m=m.split(":");const C=[];for(;0<S&&m.length;)C.push(m.shift()),S--;return m.length&&C.push(m.join(":")),C}function O(m){c.setTimeout(()=>{throw m},0)}function U(){var m=Ie;let S=null;return m.g&&(S=m.g,m.g=m.g.next,m.g||(m.h=null),S.next=null),S}class we{constructor(){this.h=this.g=null}add(S,C){const k=ve.get();k.set(S,C),this.h?this.h.next=k:this.g=k,this.h=k}}var ve=new z(()=>new ee,m=>m.reset());class ee{constructor(){this.next=this.g=this.h=null}set(S,C){this.h=S,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,he=!1,Ie=new we,De=()=>{const m=c.Promise.resolve(void 0);ce=()=>{m.then(H)}};var H=()=>{for(var m;m=U();){try{m.h.call(m.g)}catch(C){O(C)}var S=ve;S.j(m),100>S.h&&(S.h++,m.next=S.g,S.g=m)}he=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(m,S){this.type=m,this.g=this.target=S,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var pe=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,S=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const C=()=>{};c.addEventListener("test",C,S),c.removeEventListener("test",C,S)}catch{}return m})();function Ae(m,S){if(fe.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var C=this.type=m.type,k=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=S,S=m.relatedTarget){if(X){e:{try{K(S.nodeName);var Y=!0;break e}catch{}Y=!1}Y||(S=null)}}else C=="mouseover"?S=m.fromElement:C=="mouseout"&&(S=m.toElement);this.relatedTarget=S,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:Me[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&Ae.aa.h.call(this)}}N(Ae,fe);var Me={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Ue="closure_listenable_"+(1e6*Math.random()|0),$t=0;function xe(m,S,C,k,Y){this.listener=m,this.proxy=null,this.src=S,this.type=C,this.capture=!!k,this.ha=Y,this.key=++$t,this.da=this.fa=!1}function Cn(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function ut(m){this.src=m,this.g={},this.h=0}ut.prototype.add=function(m,S,C,k,Y){var ie=m.toString();m=this.g[ie],m||(m=this.g[ie]=[],this.h++);var de=Vn(m,S,k,Y);return-1<de?(S=m[de],C||(S.fa=!1)):(S=new xe(S,this.src,ie,!!k,Y),S.fa=C,m.push(S)),S};function _n(m,S){var C=S.type;if(C in m.g){var k=m.g[C],Y=Array.prototype.indexOf.call(k,S,void 0),ie;(ie=0<=Y)&&Array.prototype.splice.call(k,Y,1),ie&&(Cn(S),m.g[C].length==0&&(delete m.g[C],m.h--))}}function Vn(m,S,C,k){for(var Y=0;Y<m.length;++Y){var ie=m[Y];if(!ie.da&&ie.listener==S&&ie.capture==!!C&&ie.ha==k)return Y}return-1}var In="closure_lm_"+(1e6*Math.random()|0),En={};function xn(m,S,C,k,Y){if(Array.isArray(S)){for(var ie=0;ie<S.length;ie++)xn(m,S[ie],C,k,Y);return null}return C=Tn(C),m&&m[Ue]?m.K(S,C,h(k)?!!k.capture:!1,Y):Bi(m,S,C,!1,k,Y)}function Bi(m,S,C,k,Y,ie){if(!S)throw Error("Invalid event type");var de=h(Y)?!!Y.capture:!!Y,_t=zi(m);if(_t||(m[In]=_t=new ut(m)),C=_t.add(S,C,k,de,ie),C.proxy)return C;if(k=Ci(),C.proxy=k,k.src=m,k.listener=C,m.addEventListener)pe||(Y=de),Y===void 0&&(Y=!1),m.addEventListener(S.toString(),k,Y);else if(m.attachEvent)m.attachEvent(ii(S.toString()),k);else if(m.addListener&&m.removeListener)m.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Ci(){function m(C){return S.call(m.src,m.listener,C)}const S=cr;return m}function mi(m,S,C,k,Y){if(Array.isArray(S))for(var ie=0;ie<S.length;ie++)mi(m,S[ie],C,k,Y);else k=h(k)?!!k.capture:!!k,C=Tn(C),m&&m[Ue]?(m=m.i,S=String(S).toString(),S in m.g&&(ie=m.g[S],C=Vn(ie,C,k,Y),-1<C&&(Cn(ie[C]),Array.prototype.splice.call(ie,C,1),ie.length==0&&(delete m.g[S],m.h--)))):m&&(m=zi(m))&&(S=m.g[S.toString()],m=-1,S&&(m=Vn(S,C,k,Y)),(C=-1<m?S[m]:null)&&ni(C))}function ni(m){if(typeof m!="number"&&m&&!m.da){var S=m.src;if(S&&S[Ue])_n(S.i,m);else{var C=m.type,k=m.proxy;S.removeEventListener?S.removeEventListener(C,k,m.capture):S.detachEvent?S.detachEvent(ii(C),k):S.addListener&&S.removeListener&&S.removeListener(k),(C=zi(S))?(_n(C,m),C.h==0&&(C.src=null,S[In]=null)):Cn(m)}}}function ii(m){return m in En?En[m]:En[m]="on"+m}function cr(m,S){if(m.da)m=!0;else{S=new Ae(S,this);var C=m.listener,k=m.ha||m.src;m.fa&&ni(m),m=C.call(k,S)}return m}function zi(m){return m=m[In],m instanceof ut?m:null}var ct="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tn(m){return typeof m=="function"?m:(m[ct]||(m[ct]=function(S){return m.handleEvent(S)}),m[ct])}function ze(){te.call(this),this.i=new ut(this),this.M=this,this.F=null}N(ze,te),ze.prototype[Ue]=!0,ze.prototype.removeEventListener=function(m,S,C,k){mi(this,m,S,C,k)};function Ct(m,S){var C,k=m.F;if(k)for(C=[];k;k=k.F)C.push(k);if(m=m.M,k=S.type||S,typeof S=="string")S=new fe(S,m);else if(S instanceof fe)S.target=S.target||m;else{var Y=S;S=new fe(k,m),L(S,Y)}if(Y=!0,C)for(var ie=C.length-1;0<=ie;ie--){var de=S.g=C[ie];Y=Yt(de,k,!0,S)&&Y}if(de=S.g=m,Y=Yt(de,k,!0,S)&&Y,Y=Yt(de,k,!1,S)&&Y,C)for(ie=0;ie<C.length;ie++)de=S.g=C[ie],Y=Yt(de,k,!1,S)&&Y}ze.prototype.N=function(){if(ze.aa.N.call(this),this.i){var m=this.i,S;for(S in m.g){for(var C=m.g[S],k=0;k<C.length;k++)Cn(C[k]);delete m.g[S],m.h--}}this.F=null},ze.prototype.K=function(m,S,C,k){return this.i.add(String(m),S,!1,C,k)},ze.prototype.L=function(m,S,C,k){return this.i.add(String(m),S,!0,C,k)};function Yt(m,S,C,k){if(S=m.i.g[String(S)],!S)return!0;S=S.concat();for(var Y=!0,ie=0;ie<S.length;++ie){var de=S[ie];if(de&&!de.da&&de.capture==C){var _t=de.listener,cn=de.ha||de.src;de.fa&&_n(m.i,de),Y=_t.call(cn,k)!==!1&&Y}}return Y&&!k.defaultPrevented}function me(m,S,C){if(typeof m=="function")C&&(m=T(m,C));else if(m&&typeof m.handleEvent=="function")m=T(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(S)?-1:c.setTimeout(m,S||0)}function ft(m){m.g=me(()=>{m.g=null,m.i&&(m.i=!1,ft(m))},m.l);const S=m.h;m.h=null,m.m.apply(null,S)}class nn extends te{constructor(S,C){super(),this.m=S,this.l=C,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:ft(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function It(m){te.call(this),this.h=m,this.g={}}N(It,te);var Rn=[];function un(m){G(m.g,function(S,C){this.g.hasOwnProperty(C)&&ni(S)},m),m.g={}}It.prototype.N=function(){It.aa.N.call(this),un(this)},It.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var oe=c.JSON.stringify,Te=c.JSON.parse,Se=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function je(){}je.prototype.h=null;function St(m){return m.h||(m.h=m.i())}function Ye(){}var We={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function at(){fe.call(this,"d")}N(at,fe);function rt(){fe.call(this,"c")}N(rt,fe);var ke={},$e=null;function Sn(){return $e=$e||new ze}ke.La="serverreachability";function Hi(m){fe.call(this,ke.La,m)}N(Hi,fe);function rn(m){const S=Sn();Ct(S,new Hi(S))}ke.STAT_EVENT="statevent";function kt(m,S){fe.call(this,ke.STAT_EVENT,m),this.stat=S}N(kt,fe);function bt(m){const S=Sn();Ct(S,new kt(S,m))}ke.Ma="timingevent";function ri(m,S){fe.call(this,ke.Ma,m),this.size=S}N(ri,fe);function Ht(m,S){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},S)}function $n(){this.g=!0}$n.prototype.xa=function(){this.g=!1};function Gi(m,S,C,k,Y,ie){m.info(function(){if(m.g)if(ie)for(var de="",_t=ie.split("&"),cn=0;cn<_t.length;cn++){var Ke=_t[cn].split("=");if(1<Ke.length){var Dn=Ke[0];Ke=Ke[1];var Mn=Dn.split("_");de=2<=Mn.length&&Mn[1]=="type"?de+(Dn+"="+Ke+"&"):de+(Dn+"=redacted&")}}else de=null;else de=ie;return"XMLHTTP REQ ("+k+") [attempt "+Y+"]: "+S+`
`+C+`
`+de})}function On(m,S,C,k,Y,ie,de){m.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+Y+"]: "+S+`
`+C+`
`+ie+" "+de})}function si(m,S,C,k){m.info(function(){return"XMLHTTP TEXT ("+S+"): "+Ii(m,C)+(k?" "+k:"")})}function $r(m,S){m.info(function(){return"TIMEOUT: "+S})}$n.prototype.info=function(){};function Ii(m,S){if(!m.g)return S;if(!S)return null;try{var C=JSON.parse(S);if(C){for(m=0;m<C.length;m++)if(Array.isArray(C[m])){var k=C[m];if(!(2>k.length)){var Y=k[1];if(Array.isArray(Y)&&!(1>Y.length)){var ie=Y[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(var de=1;de<Y.length;de++)Y[de]=""}}}}return oe(C)}catch{return S}}var Lt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},sn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xi;function ji(){}N(ji,je),ji.prototype.g=function(){return new XMLHttpRequest},ji.prototype.i=function(){return{}},xi=new ji;function Ri(m,S,C,k){this.j=m,this.i=S,this.l=C,this.R=k||1,this.U=new It(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Vo}function Vo(){this.i=null,this.g="",this.h=!1}var fr={},$i={};function Ki(m,S,C){m.L=1,m.v=Uo(Wt(S)),m.m=C,m.P=!0,gi(m,null)}function gi(m,S){m.F=Date.now(),oi(m),m.A=Wt(m.v);var C=m.A,k=m.R;Array.isArray(k)||(k=[String(k)]),Jr(C.i,"t",k),m.C=0,C=m.j.J,m.h=new Vo,m.g=Sf(m.j,C?S:null,!m.m),0<m.O&&(m.M=new nn(T(m.Y,m,m.g),m.O)),S=m.U,C=m.g,k=m.ca;var Y="readystatechange";Array.isArray(Y)||(Y&&(Rn[0]=Y.toString()),Y=Rn);for(var ie=0;ie<Y.length;ie++){var de=xn(C,Y[ie],k||S.handleEvent,!1,S.h||S);if(!de)break;S.g[de.key]=de}S=m.H?x(m.H):{},m.m?(m.u||(m.u="POST"),S["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,S)):(m.u="GET",m.g.ea(m.A,m.u,null,S)),rn(),Gi(m.i,m.u,m.A,m.l,m.R,m.m)}Ri.prototype.ca=function(m){m=m.target;const S=this.M;S&&ui(m)==3?S.j():this.Y(m)},Ri.prototype.Y=function(m){try{if(m==this.g)e:{const Mn=ui(this.g);var S=this.g.Ba();const Os=this.g.Z();if(!(3>Mn)&&(Mn!=3||this.g&&(this.h.h||this.g.oa()||Bo(this.g)))){this.J||Mn!=4||S==7||(S==8||0>=Os?rn(3):rn(2)),dr(this);var C=this.g.Z();this.X=C;t:if(Ji(this)){var k=Bo(this.g);m="";var Y=k.length,ie=ui(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ai(this),hr(this);var de="";break t}this.h.i=new c.TextDecoder}for(S=0;S<Y;S++)this.h.h=!0,m+=this.h.i.decode(k[S],{stream:!(ie&&S==Y-1)});k.length=0,this.h.g+=m,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=C==200,On(this.i,this.u,this.A,this.l,this.R,Mn,C),this.o){if(this.T&&!this.K){t:{if(this.g){var _t,cn=this.g;if((_t=cn.g?cn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(_t)){var Ke=_t;break t}}Ke=null}if(C=Ke)si(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xr(this,C);else{this.o=!1,this.s=3,bt(12),ai(this),hr(this);break e}}if(this.P){C=!0;let vi;for(;!this.J&&this.C<de.length;)if(vi=Ir(this,de),vi==$i){Mn==4&&(this.s=4,bt(14),C=!1),si(this.i,this.l,null,"[Incomplete Response]");break}else if(vi==fr){this.s=4,bt(15),si(this.i,this.l,de,"[Invalid Chunk]"),C=!1;break}else si(this.i,this.l,vi,null),xr(this,vi);if(Ji(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mn!=4||de.length!=0||this.h.h||(this.s=1,bt(16),C=!1),this.o=this.o&&C,!C)si(this.i,this.l,de,"[Invalid Chunked Response]"),ai(this),hr(this);else if(0<de.length&&!this.W){this.W=!0;var Dn=this.j;Dn.g==this&&Dn.ba&&!Dn.M&&(Dn.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),cu(Dn),Dn.M=!0,bt(11))}}else si(this.i,this.l,de,null),xr(this,de);Mn==4&&ai(this),this.o&&!this.J&&(Mn==4?_f(this.j,this):(this.o=!1,oi(this)))}else hf(this.g),C==400&&0<de.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),ai(this),hr(this)}}}catch{}finally{}};function Ji(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function Ir(m,S){var C=m.C,k=S.indexOf(`
`,C);return k==-1?$i:(C=Number(S.substring(C,k)),isNaN(C)?fr:(k+=1,k+C>S.length?$i:(S=S.slice(k,k+C),m.C=k+C,S)))}Ri.prototype.cancel=function(){this.J=!0,ai(this)};function oi(m){m.S=Date.now()+m.I,Gt(m,m.I)}function Gt(m,S){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Ht(T(m.ba,m),S)}function dr(m){m.B&&(c.clearTimeout(m.B),m.B=null)}Ri.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?($r(this.i,this.A),this.L!=2&&(rn(),bt(17)),ai(this),this.s=2,hr(this)):Gt(this,this.S-m)};function hr(m){m.j.G==0||m.J||_f(m.j,m)}function ai(m){dr(m);var S=m.M;S&&typeof S.ma=="function"&&S.ma(),m.M=null,un(m.U),m.g&&(S=m.g,m.g=null,S.abort(),S.ma())}function xr(m,S){try{var C=m.j;if(C.G!=0&&(C.g==m||Cs(C.h,m))){if(!m.K&&Cs(C.h,m)&&C.G==3){try{var k=C.Da.g.parse(S)}catch{k=null}if(Array.isArray(k)&&k.length==3){var Y=k;if(Y[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<m.F)Ls(C),Ps(C);else break e;uu(C),bt(18)}}else C.za=Y[1],0<C.za-C.T&&37500>Y[2]&&C.F&&C.v==0&&!C.C&&(C.C=Ht(T(C.Za,C),6e3));if(1>=af(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else Wr(C,11)}else if((m.K||C.g==m)&&Ls(C),!F(S))for(Y=C.Da.g.parse(S),S=0;S<Y.length;S++){let Ke=Y[S];if(C.T=Ke[0],Ke=Ke[1],C.G==2)if(Ke[0]=="c"){C.K=Ke[1],C.ia=Ke[2];const Dn=Ke[3];Dn!=null&&(C.la=Dn,C.j.info("VER="+C.la));const Mn=Ke[4];Mn!=null&&(C.Aa=Mn,C.j.info("SVER="+C.Aa));const Os=Ke[5];Os!=null&&typeof Os=="number"&&0<Os&&(k=1.5*Os,C.L=k,C.j.info("backChannelRequestTimeoutMs_="+k)),k=C;const vi=m.g;if(vi){const Go=vi.g?vi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Go){var ie=k.h;ie.g||Go.indexOf("spdy")==-1&&Go.indexOf("quic")==-1&&Go.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(Is(ie,ie.h),ie.h=null))}if(k.D){const Qr=vi.g?vi.g.getResponseHeader("X-HTTP-Session-Id"):null;Qr&&(k.ya=Qr,dt(k.I,k.D,Qr))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-m.F,C.j.info("Handshake RTT: "+C.R+"ms")),k=C;var de=m;if(k.qa=Tf(k,k.J?k.ia:null,k.W),de.K){Yi(k.h,de);var _t=de,cn=k.L;cn&&(_t.I=cn),_t.B&&(dr(_t),oi(_t)),k.g=de}else yf(k);0<C.i.length&&La(C)}else Ke[0]!="stop"&&Ke[0]!="close"||Wr(C,7);else C.G==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?Wr(C,7):au(C):Ke[0]!="noop"&&C.l&&C.l.ta(Ke),C.v=0)}}rn(4)}catch{}}var Op=class{constructor(m,S){this.g=m,this.map=S}};function eu(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tu(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function af(m){return m.h?1:m.g?m.g.size:0}function Cs(m,S){return m.h?m.h==S:m.g?m.g.has(S):!1}function Is(m,S){m.g?m.g.add(S):m.h=S}function Yi(m,S){m.h&&m.h==S?m.h=null:m.g&&m.g.has(S)&&m.g.delete(S)}eu.prototype.cancel=function(){if(this.i=li(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function li(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let S=m.i;for(const C of m.g.values())S=S.concat(C.D);return S}return P(m.i)}function lf(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(d(m)){for(var S=[],C=m.length,k=0;k<C;k++)S.push(m[k]);return S}S=[],C=0;for(k in m)S[C++]=m[k];return S}function Up(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(d(m)||typeof m=="string"){var S=[];m=m.length;for(var C=0;C<m;C++)S.push(C);return S}S=[],C=0;for(const k in m)S[C++]=k;return S}}}function xa(m,S){if(m.forEach&&typeof m.forEach=="function")m.forEach(S,void 0);else if(d(m)||typeof m=="string")Array.prototype.forEach.call(m,S,void 0);else for(var C=Up(m),k=lf(m),Y=k.length,ie=0;ie<Y;ie++)S.call(void 0,k[ie],C&&C[ie],m)}var nu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ra(m,S){if(m){m=m.split("&");for(var C=0;C<m.length;C++){var k=m[C].indexOf("="),Y=null;if(0<=k){var ie=m[C].substring(0,k);Y=m[C].substring(k+1)}else ie=m[C];S(ie,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function Kr(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof Kr){this.h=m.h,xs(this,m.j),this.o=m.o,this.g=m.g,Oo(this,m.s),this.l=m.l;var S=m.i,C=new Rr;C.i=S.i,S.g&&(C.g=new Map(S.g),C.h=S.h),Na(this,C),this.m=m.m}else m&&(S=String(m).match(nu))?(this.h=!1,xs(this,S[1]||"",!0),this.o=Rs(S[2]||""),this.g=Rs(S[3]||"",!0),Oo(this,S[4]),this.l=Rs(S[5]||"",!0),Na(this,S[6]||"",!0),this.m=Rs(S[7]||"")):(this.h=!1,this.i=new Rr(null,this.h))}Kr.prototype.toString=function(){var m=[],S=this.j;S&&m.push(Wi(S,iu,!0),":");var C=this.g;return(C||S=="file")&&(m.push("//"),(S=this.o)&&m.push(Wi(S,iu,!0),"@"),m.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&m.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&m.push("/"),m.push(Wi(C,C.charAt(0)=="/"?ru:uf,!0))),(C=this.i.toString())&&m.push("?",C),(C=this.m)&&m.push("#",Wi(C,Bp)),m.join("")};function Wt(m){return new Kr(m)}function xs(m,S,C){m.j=C?Rs(S,!0):S,m.j&&(m.j=m.j.replace(/:$/,""))}function Oo(m,S){if(S){if(S=Number(S),isNaN(S)||0>S)throw Error("Bad port number "+S);m.s=S}else m.s=null}function Na(m,S,C){S instanceof Rr?(m.i=S,cf(m.i,m.h)):(C||(S=Wi(S,qp)),m.i=new Rr(S,m.h))}function dt(m,S,C){m.i.set(S,C)}function Uo(m){return dt(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Rs(m,S){return m?S?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Wi(m,S,C){return typeof m=="string"?(m=encodeURI(m).replace(S,Fp),C&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Fp(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var iu=/[#\/\?@]/g,uf=/[#\?:]/g,ru=/[#\?]/g,qp=/[#\?@]/g,Bp=/#/g;function Rr(m,S){this.h=this.g=null,this.i=m||null,this.j=!!S}function Nn(m){m.g||(m.g=new Map,m.h=0,m.i&&Ra(m.i,function(S,C){m.add(decodeURIComponent(S.replace(/\+/g," ")),C)}))}t=Rr.prototype,t.add=function(m,S){Nn(this),this.i=null,m=Ni(this,m);var C=this.g.get(m);return C||this.g.set(m,C=[]),C.push(S),this.h+=1,this};function Da(m,S){Nn(m),S=Ni(m,S),m.g.has(S)&&(m.i=null,m.h-=m.g.get(S).length,m.g.delete(S))}function Ma(m,S){return Nn(m),S=Ni(m,S),m.g.has(S)}t.forEach=function(m,S){Nn(this),this.g.forEach(function(C,k){C.forEach(function(Y){m.call(S,Y,k,this)},this)},this)},t.na=function(){Nn(this);const m=Array.from(this.g.values()),S=Array.from(this.g.keys()),C=[];for(let k=0;k<S.length;k++){const Y=m[k];for(let ie=0;ie<Y.length;ie++)C.push(S[k])}return C},t.V=function(m){Nn(this);let S=[];if(typeof m=="string")Ma(this,m)&&(S=S.concat(this.g.get(Ni(this,m))));else{m=Array.from(this.g.values());for(let C=0;C<m.length;C++)S=S.concat(m[C])}return S},t.set=function(m,S){return Nn(this),this.i=null,m=Ni(this,m),Ma(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[S]),this.h+=1,this},t.get=function(m,S){return m?(m=this.V(m),0<m.length?String(m[0]):S):S};function Jr(m,S,C){Da(m,S),0<C.length&&(m.i=null,m.g.set(Ni(m,S),P(C)),m.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],S=Array.from(this.g.keys());for(var C=0;C<S.length;C++){var k=S[C];const ie=encodeURIComponent(String(k)),de=this.V(k);for(k=0;k<de.length;k++){var Y=ie;de[k]!==""&&(Y+="="+encodeURIComponent(String(de[k]))),m.push(Y)}}return this.i=m.join("&")};function Ni(m,S){return S=String(S),m.j&&(S=S.toLowerCase()),S}function cf(m,S){S&&!m.j&&(Nn(m),m.i=null,m.g.forEach(function(C,k){var Y=k.toLowerCase();k!=Y&&(Da(this,k),Jr(this,Y,C))},m)),m.j=S}function su(m,S){const C=new $n;if(c.Image){const k=new Image;k.onload=w(yi,C,"TestLoadImage: loaded",!0,S,k),k.onerror=w(yi,C,"TestLoadImage: error",!1,S,k),k.onabort=w(yi,C,"TestLoadImage: abort",!1,S,k),k.ontimeout=w(yi,C,"TestLoadImage: timeout",!1,S,k),c.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=m}else S(!1)}function ff(m,S){const C=new $n,k=new AbortController,Y=setTimeout(()=>{k.abort(),yi(C,"TestPingServer: timeout",!1,S)},1e4);fetch(m,{signal:k.signal}).then(ie=>{clearTimeout(Y),ie.ok?yi(C,"TestPingServer: ok",!0,S):yi(C,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(Y),yi(C,"TestPingServer: error",!1,S)})}function yi(m,S,C,k,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),k(C)}catch{}}function pr(){this.g=new Se}function ou(m,S,C){const k=C||"";try{xa(m,function(Y,ie){let de=Y;h(Y)&&(de=oe(Y)),S.push(k+ie+"="+encodeURIComponent(de))})}catch(Y){throw S.push(k+"type="+encodeURIComponent("_badmap")),Y}}function Nr(m){this.l=m.Ub||null,this.j=m.eb||!1}N(Nr,je),Nr.prototype.g=function(){return new Di(this.l,this.j)},Nr.prototype.i=(function(m){return function(){return m}})({});function Di(m,S){ze.call(this),this.D=m,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Di,ze),t=Di.prototype,t.open=function(m,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=S,this.readyState=1,Ns(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const S={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(S.body=m),(this.D||c).fetch(new Request(this.A,S)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Dr(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Ns(this)),this.g&&(this.readyState=3,Ns(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ka(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function ka(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var S=m.value?m.value:new Uint8Array(0);(S=this.v.decode(S,{stream:!m.done}))&&(this.response=this.responseText+=S)}m.done?Dr(this):Ns(this),this.readyState==3&&ka(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,Dr(this))},t.Qa=function(m){this.g&&(this.response=m,Dr(this))},t.ga=function(){this.g&&Dr(this)};function Dr(m){m.readyState=4,m.l=null,m.j=null,m.v=null,Ns(m)}t.setRequestHeader=function(m,S){this.u.append(m,S)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],S=this.h.entries();for(var C=S.next();!C.done;)C=C.value,m.push(C[0]+": "+C[1]),C=S.next();return m.join(`\r
`)};function Ns(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Di.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Fo(m){let S="";return G(m,function(C,k){S+=k,S+=":",S+=C,S+=`\r
`}),S}function Ds(m,S,C){e:{for(k in C){var k=!1;break e}k=!0}k||(C=Fo(C),typeof m=="string"?C!=null&&encodeURIComponent(String(C)):dt(m,S,C))}function Vt(m){ze.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Vt,ze);var Kn=/^https?$/i,Yr=["POST","PUT"];t=Vt.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,S,C,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);S=S?S.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xi.g(),this.v=this.o?St(this.o):St(xi),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(S,String(m),!0),this.B=!1}catch(ie){qo(this,ie);return}if(m=C||"",C=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var Y in k)C.set(Y,k[Y]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const ie of k.keys())C.set(ie,k.get(ie));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(C.keys()).find(ie=>ie.toLowerCase()=="content-type"),Y=c.FormData&&m instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Yr,S,void 0))||k||Y||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,de]of C)this.g.setRequestHeader(ie,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Pa(this),this.u=!0,this.g.send(m),this.u=!1}catch(ie){qo(this,ie)}};function qo(m,S){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=S,m.m=5,Ms(m),ks(m)}function Ms(m){m.A||(m.A=!0,Ct(m,"complete"),Ct(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Ct(this,"complete"),Ct(this,"abort"),ks(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ks(this,!0)),Vt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?df(this):this.bb())},t.bb=function(){df(this)};function df(m){if(m.h&&typeof l<"u"&&(!m.v[1]||ui(m)!=4||m.Z()!=2)){if(m.u&&ui(m)==4)me(m.Ea,0,m);else if(Ct(m,"readystatechange"),ui(m)==4){m.h=!1;try{const de=m.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var C;if(!(C=S)){var k;if(k=de===0){var Y=String(m.D).match(nu)[1]||null;!Y&&c.self&&c.self.location&&(Y=c.self.location.protocol.slice(0,-1)),k=!Kn.test(Y?Y.toLowerCase():"")}C=k}if(C)Ct(m,"complete"),Ct(m,"success");else{m.m=6;try{var ie=2<ui(m)?m.g.statusText:""}catch{ie=""}m.l=ie+" ["+m.Z()+"]",Ms(m)}}finally{ks(m)}}}}function ks(m,S){if(m.g){Pa(m);const C=m.g,k=m.v[0]?()=>{}:null;m.g=null,m.v=null,S||Ct(m,"ready");try{C.onreadystatechange=k}catch{}}}function Pa(m){m.I&&(c.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function ui(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<ui(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var S=this.g.responseText;return m&&S.indexOf(m)==0&&(S=S.substring(m.length)),Te(S)}};function Bo(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function hf(m){const S={};m=(m.g&&2<=ui(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<m.length;k++){if(F(m[k]))continue;var C=M(m[k]);const Y=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const ie=S[Y]||[];S[Y]=ie,ie.push(C)}I(S,function(k){return k.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zo(m,S,C){return C&&C.internalChannelParams&&C.internalChannelParams[m]||S}function pf(m){this.Aa=0,this.i=[],this.j=new $n,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zo("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zo("baseRetryDelayMs",5e3,m),this.cb=zo("retryDelaySeedMs",1e4,m),this.Wa=zo("forwardChannelMaxRetries",2,m),this.wa=zo("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new eu(m&&m.concurrentRequestLimit),this.Da=new pr,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=pf.prototype,t.la=8,t.G=1,t.connect=function(m,S,C,k){bt(0),this.W=m,this.H=S||{},C&&k!==void 0&&(this.H.OSID=C,this.H.OAID=k),this.F=this.X,this.I=Tf(this,null,this.W),La(this)};function au(m){if(mf(m),m.G==3){var S=m.U++,C=Wt(m.I);if(dt(C,"SID",m.K),dt(C,"RID",S),dt(C,"TYPE","terminate"),Ho(m,C),S=new Ri(m,m.j,S),S.L=2,S.v=Uo(Wt(C)),C=!1,c.navigator&&c.navigator.sendBeacon)try{C=c.navigator.sendBeacon(S.v.toString(),"")}catch{}!C&&c.Image&&(new Image().src=S.v,C=!0),C||(S.g=Sf(S.j,null),S.g.ea(S.v)),S.F=Date.now(),oi(S)}fu(m)}function Ps(m){m.g&&(cu(m),m.g.cancel(),m.g=null)}function mf(m){Ps(m),m.u&&(c.clearTimeout(m.u),m.u=null),Ls(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&c.clearTimeout(m.s),m.s=null)}function La(m){if(!tu(m.h)&&!m.s){m.s=!0;var S=m.Ga;ce||De(),he||(ce(),he=!0),Ie.add(S,m),m.B=0}}function zp(m,S){return af(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=S.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Ht(T(m.Ga,m,S),Ef(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const Y=new Ri(this,this.j,m);let ie=this.o;if(this.S&&(ie?(ie=x(ie),L(ie,this.S)):ie=this.S),this.m!==null||this.O||(Y.H=ie,ie=null),this.P)e:{for(var S=0,C=0;C<this.i.length;C++){t:{var k=this.i[C];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(S+=k,4096<S){S=C;break e}if(S===4096||C===this.i.length-1){S=C+1;break e}}S=1e3}else S=1e3;S=lu(this,Y,S),C=Wt(this.I),dt(C,"RID",m),dt(C,"CVER",22),this.D&&dt(C,"X-HTTP-Session-Id",this.D),Ho(this,C),ie&&(this.O?S="headers="+encodeURIComponent(String(Fo(ie)))+"&"+S:this.m&&Ds(C,this.m,ie)),Is(this.h,Y),this.Ua&&dt(C,"TYPE","init"),this.P?(dt(C,"$req",S),dt(C,"SID","null"),Y.T=!0,Ki(Y,C,null)):Ki(Y,C,S),this.G=2}}else this.G==3&&(m?gf(this,m):this.i.length==0||tu(this.h)||gf(this))};function gf(m,S){var C;S?C=S.l:C=m.U++;const k=Wt(m.I);dt(k,"SID",m.K),dt(k,"RID",C),dt(k,"AID",m.T),Ho(m,k),m.m&&m.o&&Ds(k,m.m,m.o),C=new Ri(m,m.j,C,m.B+1),m.m===null&&(C.H=m.o),S&&(m.i=S.D.concat(m.i)),S=lu(m,C,1e3),C.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),Is(m.h,C),Ki(C,k,S)}function Ho(m,S){m.H&&G(m.H,function(C,k){dt(S,k,C)}),m.l&&xa({},function(C,k){dt(S,k,C)})}function lu(m,S,C){C=Math.min(m.i.length,C);var k=m.l?T(m.l.Na,m.l,m):null;e:{var Y=m.i;let ie=-1;for(;;){const de=["count="+C];ie==-1?0<C?(ie=Y[0].g,de.push("ofs="+ie)):ie=0:de.push("ofs="+ie);let _t=!0;for(let cn=0;cn<C;cn++){let Ke=Y[cn].g;const Dn=Y[cn].map;if(Ke-=ie,0>Ke)ie=Math.max(0,Y[cn].g-100),_t=!1;else try{ou(Dn,de,"req"+Ke+"_")}catch{k&&k(Dn)}}if(_t){k=de.join("&");break e}}}return m=m.i.splice(0,C),S.D=m,k}function yf(m){if(!m.g&&!m.u){m.Y=1;var S=m.Fa;ce||De(),he||(ce(),he=!0),Ie.add(S,m),m.v=0}}function uu(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Ht(T(m.Fa,m),Ef(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,vf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Ht(T(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),Ps(this),vf(this))};function cu(m){m.A!=null&&(c.clearTimeout(m.A),m.A=null)}function vf(m){m.g=new Ri(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var S=Wt(m.qa);dt(S,"RID","rpc"),dt(S,"SID",m.K),dt(S,"AID",m.T),dt(S,"CI",m.F?"0":"1"),!m.F&&m.ja&&dt(S,"TO",m.ja),dt(S,"TYPE","xmlhttp"),Ho(m,S),m.m&&m.o&&Ds(S,m.m,m.o),m.L&&(m.g.I=m.L);var C=m.g;m=m.ia,C.L=1,C.v=Uo(Wt(S)),C.m=null,C.P=!0,gi(C,m)}t.Za=function(){this.C!=null&&(this.C=null,Ps(this),uu(this),bt(19))};function Ls(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function _f(m,S){var C=null;if(m.g==S){Ls(m),cu(m),m.g=null;var k=2}else if(Cs(m.h,S))C=S.D,Yi(m.h,S),k=1;else return;if(m.G!=0){if(S.o)if(k==1){C=S.m?S.m.length:0,S=Date.now()-S.F;var Y=m.B;k=Sn(),Ct(k,new ri(k,C)),La(m)}else yf(m);else if(Y=S.s,Y==3||Y==0&&0<S.X||!(k==1&&zp(m,S)||k==2&&uu(m)))switch(C&&0<C.length&&(S=m.h,S.i=S.i.concat(C)),Y){case 1:Wr(m,5);break;case 4:Wr(m,10);break;case 3:Wr(m,6);break;default:Wr(m,2)}}}function Ef(m,S){let C=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(C*=2),C*S}function Wr(m,S){if(m.j.info("Error code "+S),S==2){var C=T(m.fb,m),k=m.Xa;const Y=!k;k=new Kr(k||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||xs(k,"https"),Uo(k),Y?su(k.toString(),C):ff(k.toString(),C)}else bt(2);m.G=0,m.l&&m.l.sa(S),fu(m),mf(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function fu(m){if(m.G=0,m.ka=[],m.l){const S=li(m.h);(S.length!=0||m.i.length!=0)&&(V(m.ka,S),V(m.ka,m.i),m.h.i.length=0,P(m.i),m.i.length=0),m.l.ra()}}function Tf(m,S,C){var k=C instanceof Kr?Wt(C):new Kr(C);if(k.g!="")S&&(k.g=S+"."+k.g),Oo(k,k.s);else{var Y=c.location;k=Y.protocol,S=S?S+"."+Y.hostname:Y.hostname,Y=+Y.port;var ie=new Kr(null);k&&xs(ie,k),S&&(ie.g=S),Y&&Oo(ie,Y),C&&(ie.l=C),k=ie}return C=m.D,S=m.ya,C&&S&&dt(k,C,S),dt(k,"VER",m.la),Ho(m,k),k}function Sf(m,S,C){if(S&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return S=m.Ca&&!m.pa?new Vt(new Nr({eb:C})):new Vt(m.pa),S.Ha(m.J),S}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function bf(){}t=bf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Va(){}Va.prototype.g=function(m,S){return new ci(m,S)};function ci(m,S){ze.call(this),this.g=new pf(S),this.l=m,this.h=S&&S.messageUrlParams||null,m=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(m?m["X-WebChannel-Content-Type"]=S.messageContentType:m={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.va&&(m?m["X-WebChannel-Client-Profile"]=S.va:m={"X-WebChannel-Client-Profile":S.va}),this.g.S=m,(m=S&&S.Sb)&&!F(m)&&(this.g.m=m),this.v=S&&S.supportsCrossDomainXhr||!1,this.u=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!F(S)&&(this.g.D=S,m=this.h,m!==null&&S in m&&(m=this.h,S in m&&delete m[S])),this.j=new Vs(this)}N(ci,ze),ci.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ci.prototype.close=function(){au(this.g)},ci.prototype.o=function(m){var S=this.g;if(typeof m=="string"){var C={};C.__data__=m,m=C}else this.u&&(C={},C.__data__=oe(m),m=C);S.i.push(new Op(S.Ya++,m)),S.G==3&&La(S)},ci.prototype.N=function(){this.g.l=null,delete this.j,au(this.g),delete this.g,ci.aa.N.call(this)};function Af(m){at.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var S=m.__sm__;if(S){e:{for(const C in S){m=C;break e}m=void 0}(this.i=m)&&(m=this.i,S=S!==null&&m in S?S[m]:void 0),this.data=S}else this.data=m}N(Af,at);function wf(){rt.call(this),this.status=1}N(wf,rt);function Vs(m){this.g=m}N(Vs,bf),Vs.prototype.ua=function(){Ct(this.g,"a")},Vs.prototype.ta=function(m){Ct(this.g,new Af(m))},Vs.prototype.sa=function(m){Ct(this.g,new wf)},Vs.prototype.ra=function(){Ct(this.g,"b")},Va.prototype.createWebChannel=Va.prototype.g,ci.prototype.send=ci.prototype.o,ci.prototype.open=ci.prototype.m,ci.prototype.close=ci.prototype.close,cI=function(){return new Va},uI=function(){return Sn()},lI=ke,_y={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Lt.NO_ERROR=0,Lt.TIMEOUT=8,Lt.HTTP_ERROR=6,rh=Lt,sn.COMPLETE="complete",aI=sn,Ye.EventType=We,We.OPEN="a",We.CLOSE="b",We.ERROR="c",We.MESSAGE="d",ze.prototype.listen=ze.prototype.K,rc=Ye,Vt.prototype.listenOnce=Vt.prototype.L,Vt.prototype.getLastError=Vt.prototype.Ka,Vt.prototype.getLastErrorCode=Vt.prototype.Ba,Vt.prototype.getStatus=Vt.prototype.Z,Vt.prototype.getResponseJson=Vt.prototype.Oa,Vt.prototype.getResponseText=Vt.prototype.oa,Vt.prototype.send=Vt.prototype.ea,Vt.prototype.setWithCredentials=Vt.prototype.Ha,oI=Vt}).apply(typeof Nd<"u"?Nd:typeof self<"u"?self:typeof window<"u"?window:{});const GS="@firebase/firestore",jS="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xn.UNAUTHENTICATED=new Xn(null),Xn.GOOGLE_CREDENTIALS=new Xn("google-credentials-uid"),Xn.FIRST_PARTY=new Xn("first-party-uid"),Xn.MOCK_USER=new Xn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gl="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=new hv("@firebase/firestore");function gl(){return Ea.logLevel}function _e(t,...e){if(Ea.logLevel<=nt.DEBUG){const n=e.map(Cv);Ea.debug(`Firestore (${Gl}): ${t}`,...n)}}function Es(t,...e){if(Ea.logLevel<=nt.ERROR){const n=e.map(Cv);Ea.error(`Firestore (${Gl}): ${t}`,...n)}}function bo(t,...e){if(Ea.logLevel<=nt.WARN){const n=e.map(Cv);Ea.warn(`Firestore (${Gl}): ${t}`,...n)}}function Cv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,fI(t,i,n)}function fI(t,e,n){let i=`FIRESTORE (${Gl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Es(i),new Error(i)}function Tt(t,e,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,t||fI(e,s,i)}function Be(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends Gr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Xn.UNAUTHENTICATED)))}shutdown(){}}class hP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class pP{constructor(e){this.t=e,this.currentUser=Xn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Tt(this.o===void 0,42304);let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let a=new fa;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new fa,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const d=a;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},c=d=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>c(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new fa)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Tt(typeof i.accessToken=="string",31837,{l:i}),new dI(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Tt(e===null||typeof e=="string",2055,{h:e}),new Xn(e)}}class mP{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Xn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class gP{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new mP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Xn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class $S{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Tt(this.o===void 0,3512);const i=a=>{a.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,_e("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const s=a=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new $S(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Tt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new $S(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=vP(40);for(let a=0;a<s.length;++a)i.length<20&&s[a]<n&&(i+=e.charAt(s[a]%62))}return i}}function Je(t,e){return t<e?-1:t>e?1:0}function Ey(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),s=e.codePointAt(n);if(i!==s){if(i<128&&s<128)return Je(i,s);{const a=hI(),l=_P(a.encode(KS(t,n)),a.encode(KS(e,n)));return l!==0?l:Je(i,s)}}n+=i>65535?2:1}return Je(t.length,e.length)}function KS(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function _P(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Je(t[n],e[n]);return Je(t.length,e.length)}function Pl(t,e,n){return t.length===e.length&&t.every(((i,s)=>n(i,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS="__name__";class Or{constructor(e,n,i){n===void 0?n=0:n>e.length&&Ve(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Ve(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Or.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Or?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const a=Or.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return Je(e.length,n.length)}static compareSegments(e,n){const i=Or.isNumericId(e),s=Or.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?Or.extractNumericId(e).compare(Or.extractNumericId(n)):Ey(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _o.fromString(e.substring(4,e.length-2))}}class Pt extends Or{construct(e,n,i){return new Pt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ee(le.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((s=>s.length>0)))}return new Pt(n)}static emptyPath(){return new Pt([])}}const EP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gn extends Or{construct(e,n,i){return new Gn(e,n,i)}static isValidIdentifier(e){return EP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===JS}static keyField(){return new Gn([JS])}static fromServerFormat(e){const n=[];let i="",s=0;const a=()=>{if(i.length===0)throw new Ee(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Ee(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Ee(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else c==="`"?(l=!l,s++):c!=="."||l?(i+=c,s++):(a(),s++)}if(a(),l)throw new Ee(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gn(n)}static emptyPath(){return new Gn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(Pt.fromString(e))}static fromName(e){return new Ne(Pt.fromString(e).popFirst(5))}static empty(){return new Ne(Pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new Pt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(t,e,n){if(!n)throw new Ee(le.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function TP(t,e,n,i){if(e===!0&&i===!0)throw new Ee(le.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function YS(t){if(!Ne.isDocumentKey(t))throw new Ee(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function WS(t){if(Ne.isDocumentKey(t))throw new Ee(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function mI(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function up(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ve(12329,{type:typeof t})}function Eo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ee(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=up(t);throw new Ee(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Wc(t,e){if(!mI(t))throw new Ee(le.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const s=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const l=t[i];if(s&&typeof l!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(a!==void 0&&l!==a.value){n=`Expected '${i}' field to equal '${a.value}'`;break}}if(n)throw new Ee(le.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=-62135596800,XS=1e6;class Bt{static now(){return Bt.fromMillis(Date.now())}static fromDate(e){return Bt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*XS);return new Bt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ee(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ee(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<QS)throw new Ee(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/XS}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Bt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wc(e,Bt._jsonSchema))return new Bt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-QS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Bt._jsonSchemaVersion="firestore/timestamp/1.0",Bt._jsonSchema={type:yn("string",Bt._jsonSchemaVersion),seconds:yn("number"),nanoseconds:yn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new Bt(0,0))}static max(){return new Oe(new Bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=-1;function SP(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=Oe.fromTimestamp(i===1e9?new Bt(n+1,0):new Bt(n,i));return new Ao(s,Ne.empty(),e)}function bP(t){return new Ao(t.readTime,t.key,Pc)}class Ao{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ao(Oe.min(),Ne.empty(),Pc)}static max(){return new Ao(Oe.max(),Ne.empty(),Pc)}}function AP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ne.comparator(t.documentKey,e.documentKey),n!==0?n:Je(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class CP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jl(t){if(t.code!==le.FAILED_PRECONDITION||t.message!==wP)throw t;_e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ue(((i,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(i,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ue?n:ue.resolve(n)}catch(n){return ue.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.reject(n)}static resolve(e){return new ue(((n,i)=>{n(e)}))}static reject(e){return new ue(((n,i)=>{i(e)}))}static waitFor(e){return new ue(((n,i)=>{let s=0,a=0,l=!1;e.forEach((c=>{++s,c.next((()=>{++a,l&&a===s&&n()}),(d=>i(d)))})),l=!0,a===s&&n()}))}static or(e){let n=ue.resolve(!1);for(const i of e)n=n.next((s=>s?ue.resolve(s):i()));return n}static forEach(e,n){const i=[];return e.forEach(((s,a)=>{i.push(n.call(this,s,a))})),this.waitFor(i)}static mapArray(e,n){return new ue(((i,s)=>{const a=e.length,l=new Array(a);let c=0;for(let d=0;d<a;d++){const h=d;n(e[h]).next((g=>{l[h]=g,++c,c===a&&i(l)}),(g=>s(g)))}}))}static doWhile(e,n){return new ue(((i,s)=>{const a=()=>{e()===!0?n().next((()=>{a()}),s):i()};a()}))}}function IP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function $l(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this._e(i),this.ae=i=>n.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}cp.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=-1;function fp(t){return t==null}function Ih(t){return t===0&&1/t==-1/0}function xP(t){return typeof t=="number"&&Number.isInteger(t)&&!Ih(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI="";function RP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=ZS(e)),e=NP(t.get(n),e);return ZS(e)}function NP(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case gI:n+="";break;default:n+=a}}return n}function ZS(t){return t+gI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ko(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function yI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n){this.comparator=e,this.root=n||Hn.EMPTY}insert(e,n){return new Jt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Hn.BLACK,null,null))}remove(e){return new Jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dd(this.root,e,this.comparator,!0)}}class Dd{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?i(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Hn{constructor(e,n,i,s,a){this.key=e,this.value=n,this.color=i??Hn.RED,this.left=s??Hn.EMPTY,this.right=a??Hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,a){return new Hn(e??this.key,n??this.value,i??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const a=i(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,i),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Hn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ve(27949);return e+(this.isRed()?0:1)}}Hn.EMPTY=null,Hn.RED=!0,Hn.BLACK=!1;Hn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve(57766)}get value(){throw Ve(16141)}get color(){throw Ve(16727)}get left(){throw Ve(29726)}get right(){throw Ve(36894)}copy(e,n,i,s,a){return this}insert(e,n,i){return new Hn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.comparator=e,this.data=new Jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new tb(this.data.getIterator())}getIteratorFrom(e){return new tb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof wn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=i.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new wn(this.comparator);return n.data=e,n}}class tb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e){this.fields=e,e.sort(Gn.comparator)}static empty(){return new Fi([])}unionWith(e){let n=new wn(Gn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Fi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Pl(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new vI("Invalid base64 string: "+a):a}})(e);return new jn(n)}static fromUint8Array(e){const n=(function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a})(e);return new jn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jn.EMPTY_BYTE_STRING=new jn("");const DP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wo(t){if(Tt(!!t,39018),typeof t=="string"){let e=0;const n=DP.exec(t);if(Tt(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ln(t.seconds),nanos:ln(t.nanos)}}function ln(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Co(t){return typeof t=="string"?jn.fromBase64String(t):jn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I="server_timestamp",EI="__type__",TI="__previous_value__",SI="__local_write_time__";function Rv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[EI])===null||n===void 0?void 0:n.stringValue)===_I}function dp(t){const e=t.mapValue.fields[TI];return Rv(e)?dp(e):e}function Lc(t){const e=wo(t.mapValue.fields[SI].timestampValue);return new Bt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e,n,i,s,a,l,c,d,h,g){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=h,this.isUsingEmulator=g}}const xh="(default)";class Vc{constructor(e,n){this.projectId=e,this.database=n||xh}static empty(){return new Vc("","")}get isDefaultDatabase(){return this.database===xh}isEqual(e){return e instanceof Vc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI="__type__",kP="__max__",Md={mapValue:{}},AI="__vector__",Rh="value";function Io(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Rv(t)?4:LP(t)?9007199254740991:PP(t)?10:11:Ve(28295,{value:t})}function Hr(t,e){if(t===e)return!0;const n=Io(t);if(n!==Io(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Lc(t).isEqual(Lc(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=wo(s.timestampValue),c=wo(a.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,a){return Co(s.bytesValue).isEqual(Co(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,a){return ln(s.geoPointValue.latitude)===ln(a.geoPointValue.latitude)&&ln(s.geoPointValue.longitude)===ln(a.geoPointValue.longitude)})(t,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return ln(s.integerValue)===ln(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=ln(s.doubleValue),c=ln(a.doubleValue);return l===c?Ih(l)===Ih(c):isNaN(l)&&isNaN(c)}return!1})(t,e);case 9:return Pl(t.arrayValue.values||[],e.arrayValue.values||[],Hr);case 10:case 11:return(function(s,a){const l=s.mapValue.fields||{},c=a.mapValue.fields||{};if(eb(l)!==eb(c))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(c[d]===void 0||!Hr(l[d],c[d])))return!1;return!0})(t,e);default:return Ve(52216,{left:t})}}function Oc(t,e){return(t.values||[]).find((n=>Hr(n,e)))!==void 0}function Ll(t,e){if(t===e)return 0;const n=Io(t),i=Io(e);if(n!==i)return Je(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Je(t.booleanValue,e.booleanValue);case 2:return(function(a,l){const c=ln(a.integerValue||a.doubleValue),d=ln(l.integerValue||l.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1})(t,e);case 3:return nb(t.timestampValue,e.timestampValue);case 4:return nb(Lc(t),Lc(e));case 5:return Ey(t.stringValue,e.stringValue);case 6:return(function(a,l){const c=Co(a),d=Co(l);return c.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(a,l){const c=a.split("/"),d=l.split("/");for(let h=0;h<c.length&&h<d.length;h++){const g=Je(c[h],d[h]);if(g!==0)return g}return Je(c.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,l){const c=Je(ln(a.latitude),ln(l.latitude));return c!==0?c:Je(ln(a.longitude),ln(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return ib(t.arrayValue,e.arrayValue);case 10:return(function(a,l){var c,d,h,g;const E=a.fields||{},T=l.fields||{},w=(c=E[Rh])===null||c===void 0?void 0:c.arrayValue,N=(d=T[Rh])===null||d===void 0?void 0:d.arrayValue,P=Je(((h=w==null?void 0:w.values)===null||h===void 0?void 0:h.length)||0,((g=N==null?void 0:N.values)===null||g===void 0?void 0:g.length)||0);return P!==0?P:ib(w,N)})(t.mapValue,e.mapValue);case 11:return(function(a,l){if(a===Md.mapValue&&l===Md.mapValue)return 0;if(a===Md.mapValue)return 1;if(l===Md.mapValue)return-1;const c=a.fields||{},d=Object.keys(c),h=l.fields||{},g=Object.keys(h);d.sort(),g.sort();for(let E=0;E<d.length&&E<g.length;++E){const T=Ey(d[E],g[E]);if(T!==0)return T;const w=Ll(c[d[E]],h[g[E]]);if(w!==0)return w}return Je(d.length,g.length)})(t.mapValue,e.mapValue);default:throw Ve(23264,{le:n})}}function nb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Je(t,e);const n=wo(t),i=wo(e),s=Je(n.seconds,i.seconds);return s!==0?s:Je(n.nanos,i.nanos)}function ib(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const a=Ll(n[s],i[s]);if(a)return a}return Je(n.length,i.length)}function Vl(t){return Ty(t)}function Ty(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const i=wo(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Co(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ne.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",s=!0;for(const a of n.values||[])s?s=!1:i+=",",i+=Ty(a);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){const i=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const l of i)a?a=!1:s+=",",s+=`${l}:${Ty(n.fields[l])}`;return s+"}"})(t.mapValue):Ve(61005,{value:t})}function sh(t){switch(Io(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=dp(t);return e?16+sh(e):16;case 5:return 2*t.stringValue.length;case 6:return Co(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,a)=>s+sh(a)),0)})(t.arrayValue);case 10:case 11:return(function(i){let s=0;return ko(i.fields,((a,l)=>{s+=a.length+sh(l)})),s})(t.mapValue);default:throw Ve(13486,{value:t})}}function rb(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Sy(t){return!!t&&"integerValue"in t}function Nv(t){return!!t&&"arrayValue"in t}function sb(t){return!!t&&"nullValue"in t}function ob(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function oh(t){return!!t&&"mapValue"in t}function PP(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[bI])===null||n===void 0?void 0:n.stringValue)===AI}function mc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ko(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=mc(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=mc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function LP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===kP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this.value=e}static empty(){return new wi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!oh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=mc(n)}setAll(e){let n=Gn.emptyPath(),i={},s=[];e.forEach(((l,c)=>{if(!n.isImmediateParentOf(c)){const d=this.getFieldsMap(n);this.applyChanges(d,i,s),i={},s=[],n=c.popLast()}l?i[c.lastSegment()]=mc(l):s.push(c.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,i,s)}delete(e){const n=this.field(e.popLast());oh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Hr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];oh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){ko(n,((s,a)=>e[s]=a));for(const s of i)delete e[s]}clone(){return new wi(mc(this.value))}}function wI(t){const e=[];return ko(t.fields,((n,i)=>{const s=new Gn([n]);if(oh(i)){const a=wI(i.mapValue).fields;if(a.length===0)e.push(s);else for(const l of a)e.push(s.child(l))}else e.push(s)})),new Fi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,n,i,s,a,l,c){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=a,this.data=l,this.documentState=c}static newInvalidDocument(e){return new Zn(e,0,Oe.min(),Oe.min(),Oe.min(),wi.empty(),0)}static newFoundDocument(e,n,i,s){return new Zn(e,1,n,Oe.min(),i,s,0)}static newNoDocument(e,n){return new Zn(e,2,n,Oe.min(),Oe.min(),wi.empty(),0)}static newUnknownDocument(e,n){return new Zn(e,3,n,Oe.min(),Oe.min(),wi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,n){this.position=e,this.inclusive=n}}function ab(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const a=e[s],l=t.position[s];if(a.field.isKeyField()?i=Ne.comparator(Ne.fromName(l.referenceValue),n.key):i=Ll(l,n.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function lb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Hr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n="asc"){this.field=e,this.dir=n}}function VP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{}class gn extends CI{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new UP(e,n,i):n==="array-contains"?new BP(e,i):n==="in"?new zP(e,i):n==="not-in"?new HP(e,i):n==="array-contains-any"?new GP(e,i):new gn(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new FP(e,i):new qP(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ll(n,this.value)):n!==null&&Io(this.value)===Io(n)&&this.matchesComparison(Ll(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wr extends CI{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new wr(e,n)}matches(e){return II(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function II(t){return t.op==="and"}function xI(t){return OP(t)&&II(t)}function OP(t){for(const e of t.filters)if(e instanceof wr)return!1;return!0}function by(t){if(t instanceof gn)return t.field.canonicalString()+t.op.toString()+Vl(t.value);if(xI(t))return t.filters.map((e=>by(e))).join(",");{const e=t.filters.map((n=>by(n))).join(",");return`${t.op}(${e})`}}function RI(t,e){return t instanceof gn?(function(i,s){return s instanceof gn&&i.op===s.op&&i.field.isEqual(s.field)&&Hr(i.value,s.value)})(t,e):t instanceof wr?(function(i,s){return s instanceof wr&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((a,l,c)=>a&&RI(l,s.filters[c])),!0):!1})(t,e):void Ve(19439)}function NI(t){return t instanceof gn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Vl(n.value)}`})(t):t instanceof wr?(function(n){return n.op.toString()+" {"+n.getFilters().map(NI).join(" ,")+"}"})(t):"Filter"}class UP extends gn{constructor(e,n,i){super(e,n,i),this.key=Ne.fromName(i.referenceValue)}matches(e){const n=Ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class FP extends gn{constructor(e,n){super(e,"in",n),this.keys=DI("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class qP extends gn{constructor(e,n){super(e,"not-in",n),this.keys=DI("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function DI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((i=>Ne.fromName(i.referenceValue)))}class BP extends gn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Nv(n)&&Oc(n.arrayValue,this.value)}}class zP extends gn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Oc(this.value.arrayValue,n)}}class HP extends gn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Oc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Oc(this.value.arrayValue,n)}}class GP extends gn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Nv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Oc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e,n=null,i=[],s=[],a=null,l=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=a,this.startAt=l,this.endAt=c,this.Pe=null}}function ub(t,e=null,n=[],i=[],s=null,a=null,l=null){return new jP(t,e,n,i,s,a,l)}function Dv(t){const e=Be(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>by(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),fp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Vl(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Vl(i))).join(",")),e.Pe=n}return e.Pe}function Mv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!VP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!RI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!lb(t.startAt,e.startAt)&&lb(t.endAt,e.endAt)}function Ay(t){return Ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,n=null,i=[],s=[],a=null,l="F",c=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=a,this.limitType=l,this.startAt=c,this.endAt=d,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function $P(t,e,n,i,s,a,l,c){return new Qc(t,e,n,i,s,a,l,c)}function kv(t){return new Qc(t)}function cb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function MI(t){return t.collectionGroup!==null}function gc(t){const e=Be(t);if(e.Te===null){e.Te=[];const n=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),n.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new wn(Gn.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Te.push(new Dh(a,i))})),n.has(Gn.keyField().canonicalString())||e.Te.push(new Dh(Gn.keyField(),i))}return e.Te}function Fr(t){const e=Be(t);return e.Ie||(e.Ie=KP(e,gc(t))),e.Ie}function KP(t,e){if(t.limitType==="F")return ub(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new Dh(s.field,a)}));const n=t.endAt?new Nh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Nh(t.startAt.position,t.startAt.inclusive):null;return ub(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function wy(t,e){const n=t.filters.concat([e]);return new Qc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Cy(t,e,n){return new Qc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function hp(t,e){return Mv(Fr(t),Fr(e))&&t.limitType===e.limitType}function kI(t){return`${Dv(Fr(t))}|lt:${t.limitType}`}function yl(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((s=>NI(s))).join(", ")}]`),fp(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((s=>Vl(s))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((s=>Vl(s))).join(",")),`Target(${i})`})(Fr(t))}; limitType=${t.limitType})`}function pp(t,e){return e.isFoundDocument()&&(function(i,s){const a=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Ne.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(t,e)&&(function(i,s){for(const a of gc(i))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(i,s){for(const a of i.filters)if(!a.matches(s))return!1;return!0})(t,e)&&(function(i,s){return!(i.startAt&&!(function(l,c,d){const h=ab(l,c,d);return l.inclusive?h<=0:h<0})(i.startAt,gc(i),s)||i.endAt&&!(function(l,c,d){const h=ab(l,c,d);return l.inclusive?h>=0:h>0})(i.endAt,gc(i),s))})(t,e)}function JP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function PI(t){return(e,n)=>{let i=!1;for(const s of gc(t)){const a=YP(s,e,n);if(a!==0)return a;i=i||s.field.isKeyField()}return 0}}function YP(t,e,n){const i=t.field.isKeyField()?Ne.comparator(e.key,n.key):(function(a,l,c){const d=l.data.field(a),h=c.data.field(a);return d!==null&&h!==null?Ll(d,h):Ve(42886)})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Ve(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,a]of i)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ko(this.inner,((n,i)=>{for(const[s,a]of i)e(s,a)}))}isEmpty(){return yI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP=new Jt(Ne.comparator);function Ts(){return WP}const LI=new Jt(Ne.comparator);function sc(...t){let e=LI;for(const n of t)e=e.insert(n.key,n);return e}function VI(t){let e=LI;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function ca(){return yc()}function OI(){return yc()}function yc(){return new wa((t=>t.toString()),((t,e)=>t.isEqual(e)))}const QP=new Jt(Ne.comparator),XP=new wn(Ne.comparator);function it(...t){let e=XP;for(const n of t)e=e.add(n);return e}const ZP=new wn(Je);function eL(){return ZP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ih(e)?"-0":e}}function UI(t){return{integerValue:""+t}}function tL(t,e){return xP(e)?UI(e):Pv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(){this._=void 0}}function nL(t,e,n){return t instanceof Mh?(function(s,a){const l={fields:{[EI]:{stringValue:_I},[SI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Rv(a)&&(a=dp(a)),a&&(l.fields[TI]=a),{mapValue:l}})(n,e):t instanceof Uc?qI(t,e):t instanceof Fc?BI(t,e):(function(s,a){const l=FI(s,a),c=fb(l)+fb(s.Ee);return Sy(l)&&Sy(s.Ee)?UI(c):Pv(s.serializer,c)})(t,e)}function iL(t,e,n){return t instanceof Uc?qI(t,e):t instanceof Fc?BI(t,e):n}function FI(t,e){return t instanceof kh?(function(i){return Sy(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class Mh extends mp{}class Uc extends mp{constructor(e){super(),this.elements=e}}function qI(t,e){const n=zI(e);for(const i of t.elements)n.some((s=>Hr(s,i)))||n.push(i);return{arrayValue:{values:n}}}class Fc extends mp{constructor(e){super(),this.elements=e}}function BI(t,e){let n=zI(e);for(const i of t.elements)n=n.filter((s=>!Hr(s,i)));return{arrayValue:{values:n}}}class kh extends mp{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function fb(t){return ln(t.integerValue||t.doubleValue)}function zI(t){return Nv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function rL(t,e){return t.field.isEqual(e.field)&&(function(i,s){return i instanceof Uc&&s instanceof Uc||i instanceof Fc&&s instanceof Fc?Pl(i.elements,s.elements,Hr):i instanceof kh&&s instanceof kh?Hr(i.Ee,s.Ee):i instanceof Mh&&s instanceof Mh})(t.transform,e.transform)}class sL{constructor(e,n){this.version=e,this.transformResults=n}}class Ar{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ar}static exists(e){return new Ar(void 0,e)}static updateTime(e){return new Ar(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ah(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class gp{}function HI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Lv(t.key,Ar.none()):new Xc(t.key,t.data,Ar.none());{const n=t.data,i=wi.empty();let s=new wn(Gn.comparator);for(let a of e.fields)if(!s.has(a)){let l=n.field(a);l===null&&a.length>1&&(a=a.popLast(),l=n.field(a)),l===null?i.delete(a):i.set(a,l),s=s.add(a)}return new Po(t.key,i,new Fi(s.toArray()),Ar.none())}}function oL(t,e,n){t instanceof Xc?(function(s,a,l){const c=s.value.clone(),d=hb(s.fieldTransforms,a,l.transformResults);c.setAll(d),a.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Po?(function(s,a,l){if(!ah(s.precondition,a))return void a.convertToUnknownDocument(l.version);const c=hb(s.fieldTransforms,a,l.transformResults),d=a.data;d.setAll(GI(s)),d.setAll(c),a.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(t,e,n):(function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function vc(t,e,n,i){return t instanceof Xc?(function(a,l,c,d){if(!ah(a.precondition,l))return c;const h=a.value.clone(),g=pb(a.fieldTransforms,d,l);return h.setAll(g),l.convertToFoundDocument(l.version,h).setHasLocalMutations(),null})(t,e,n,i):t instanceof Po?(function(a,l,c,d){if(!ah(a.precondition,l))return c;const h=pb(a.fieldTransforms,d,l),g=l.data;return g.setAll(GI(a)),g.setAll(h),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(t,e,n,i):(function(a,l,c){return ah(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(t,e,n)}function aL(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),a=FI(i.transform,s||null);a!=null&&(n===null&&(n=wi.empty()),n.set(i.field,a))}return n||null}function db(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Pl(i,s,((a,l)=>rL(a,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Xc extends gp{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Po extends gp{constructor(e,n,i,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function GI(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function hb(t,e,n){const i=new Map;Tt(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const a=t[s],l=a.transform,c=e.data.field(a.field);i.set(a.field,iL(l,c,n[s]))}return i}function pb(t,e,n){const i=new Map;for(const s of t){const a=s.transform,l=n.data.field(s.field);i.set(s.field,nL(a,l,e))}return i}class Lv extends gp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lL extends gp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&oL(a,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=vc(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=vc(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=OI();return this.mutations.forEach((s=>{const a=e.get(s.key),l=a.overlayedDocument;let c=this.applyToLocalView(l,a.mutatedFields);c=n.has(s.key)?null:c;const d=HI(l,c);d!==null&&i.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(Oe.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),it())}isEqual(e){return this.batchId===e.batchId&&Pl(this.mutations,e.mutations,((n,i)=>db(n,i)))&&Pl(this.baseMutations,e.baseMutations,((n,i)=>db(n,i)))}}class Vv{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){Tt(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let s=(function(){return QP})();const a=e.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,i[l].version);return new Vv(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mn,lt;function dL(t){switch(t){case le.OK:return Ve(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return Ve(15467,{code:t})}}function jI(t){if(t===void 0)return Es("GRPC error has no .code"),le.UNKNOWN;switch(t){case mn.OK:return le.OK;case mn.CANCELLED:return le.CANCELLED;case mn.UNKNOWN:return le.UNKNOWN;case mn.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case mn.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case mn.INTERNAL:return le.INTERNAL;case mn.UNAVAILABLE:return le.UNAVAILABLE;case mn.UNAUTHENTICATED:return le.UNAUTHENTICATED;case mn.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case mn.NOT_FOUND:return le.NOT_FOUND;case mn.ALREADY_EXISTS:return le.ALREADY_EXISTS;case mn.PERMISSION_DENIED:return le.PERMISSION_DENIED;case mn.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case mn.ABORTED:return le.ABORTED;case mn.OUT_OF_RANGE:return le.OUT_OF_RANGE;case mn.UNIMPLEMENTED:return le.UNIMPLEMENTED;case mn.DATA_LOSS:return le.DATA_LOSS;default:return Ve(39323,{code:t})}}(lt=mn||(mn={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL=new _o([4294967295,4294967295],0);function mb(t){const e=hI().encode(t),n=new sI;return n.update(e),new Uint8Array(n.digest())}function gb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new _o([n,i],0),new _o([s,a],0)]}class Ov{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new oc(`Invalid padding: ${n}`);if(i<0)throw new oc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new oc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new oc(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=_o.fromNumber(this.fe)}pe(e,n,i){let s=e.add(n.multiply(_o.fromNumber(i)));return s.compare(hL)===1&&(s=new _o([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=mb(e),[i,s]=gb(n);for(let a=0;a<this.hashCount;a++){const l=this.pe(i,s,a);if(!this.ye(l))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new Ov(a,s,n);return i.forEach((c=>l.insert(c))),l}insert(e){if(this.fe===0)return;const n=mb(e),[i,s]=gb(n);for(let a=0;a<this.hashCount;a++){const l=this.pe(i,s,a);this.we(l)}}we(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class oc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,n,i,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,Zc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new yp(Oe.min(),s,new Jt(Je),Ts(),it())}}class Zc{constructor(e,n,i,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Zc(i,n,it(),it(),it())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n,i,s){this.Se=e,this.removedTargetIds=n,this.key=i,this.be=s}}class $I{constructor(e,n){this.targetId=e,this.De=n}}class KI{constructor(e,n,i=jn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class yb{constructor(){this.ve=0,this.Ce=vb(),this.Fe=jn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=it(),n=it(),i=it();return this.Ce.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:Ve(38017,{changeType:a})}})),new Zc(this.Fe,this.Me,e,n,i)}ke(){this.xe=!1,this.Ce=vb()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Tt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class pL{constructor(e){this.We=e,this.Ge=new Map,this.ze=Ts(),this.je=kd(),this.Je=kd(),this.He=new Jt(Je)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,(n=>{const i=this.tt(n);switch(e.state){case 0:this.nt(n)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),i.Be(e.resumeToken));break;default:Ve(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach(((i,s)=>{this.nt(s)&&n(s)}))}it(e){const n=e.targetId,i=e.De.count,s=this.st(n);if(s){const a=s.target;if(Ay(a))if(i===0){const l=new Ne(a.path);this.Xe(n,l,Zn.newNoDocument(l,Oe.min()))}else Tt(i===1,20013,{expectedCount:i});else{const l=this.ot(n);if(l!==i){const c=this._t(e),d=c?this.ut(c,e,l):1;if(d!==0){this.rt(n);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,h)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=n;let l,c;try{l=Co(i).toUint8Array()}catch(d){if(d instanceof vI)return bo("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new Ov(l,s,a)}catch(d){return bo(d instanceof oc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.fe===0?null:c}ut(e,n,i){return n.De.count===i-this.ht(e,n.targetId)?0:2}ht(e,n){const i=this.We.getRemoteKeysForTarget(n);let s=0;return i.forEach((a=>{const l=this.We.lt(),c=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.Xe(n,a,null),s++)})),s}Pt(e){const n=new Map;this.Ge.forEach(((a,l)=>{const c=this.st(l);if(c){if(a.current&&Ay(c.target)){const d=new Ne(c.target.path);this.Tt(d).has(l)||this.It(l,d)||this.Xe(l,d,Zn.newNoDocument(d,e))}a.Ne&&(n.set(l,a.Le()),a.ke())}}));let i=it();this.Je.forEach(((a,l)=>{let c=!0;l.forEachWhile((d=>{const h=this.st(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(i=i.add(a))})),this.ze.forEach(((a,l)=>l.setReadTime(e)));const s=new yp(e,n,this.He,this.ze,i);return this.ze=Ts(),this.je=kd(),this.Je=kd(),this.He=new Jt(Je),s}Ze(e,n){if(!this.nt(e))return;const i=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,i),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,i){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),i&&(this.ze=this.ze.insert(n,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new yb,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new wn(Je),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new wn(Je),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||_e("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new yb),this.We.getRemoteKeysForTarget(e).forEach((n=>{this.Xe(e,n,null)}))}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function kd(){return new Jt(Ne.comparator)}function vb(){return new Jt(Ne.comparator)}const mL={asc:"ASCENDING",desc:"DESCENDING"},gL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yL={and:"AND",or:"OR"};class vL{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Iy(t,e){return t.useProto3Json||fp(e)?e:{value:e}}function Ph(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function JI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function _L(t,e){return Ph(t,e.toTimestamp())}function qr(t){return Tt(!!t,49232),Oe.fromTimestamp((function(n){const i=wo(n);return new Bt(i.seconds,i.nanos)})(t))}function Uv(t,e){return xy(t,e).canonicalString()}function xy(t,e){const n=(function(s){return new Pt(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function YI(t){const e=Pt.fromString(t);return Tt(ex(e),10190,{key:e.toString()}),e}function Ry(t,e){return Uv(t.databaseId,e.path)}function Yg(t,e){const n=YI(e);if(n.get(1)!==t.databaseId.projectId)throw new Ee(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ee(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ne(QI(n))}function WI(t,e){return Uv(t.databaseId,e)}function EL(t){const e=YI(t);return e.length===4?Pt.emptyPath():QI(e)}function Ny(t){return new Pt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function QI(t){return Tt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function _b(t,e,n){return{name:Ry(t,e),fields:n.value.mapValue.fields}}function TL(t,e){let n;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ve(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(h,g){return h.useProto3Json?(Tt(g===void 0||typeof g=="string",58123),jn.fromBase64String(g||"")):(Tt(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),jn.fromUint8Array(g||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(h){const g=h.code===void 0?le.UNKNOWN:jI(h.code);return new Ee(g,h.message||"")})(l);n=new KI(i,s,a,c||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Yg(t,i.document.name),a=qr(i.document.updateTime),l=i.document.createTime?qr(i.document.createTime):Oe.min(),c=new wi({mapValue:{fields:i.document.fields}}),d=Zn.newFoundDocument(s,a,l,c),h=i.targetIds||[],g=i.removedTargetIds||[];n=new lh(h,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Yg(t,i.document),a=i.readTime?qr(i.readTime):Oe.min(),l=Zn.newNoDocument(s,a),c=i.removedTargetIds||[];n=new lh([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Yg(t,i.document),a=i.removedTargetIds||[];n=new lh([],a,s,null)}else{if(!("filter"in e))return Ve(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:a}=i,l=new fL(s,a),c=i.targetId;n=new $I(c,l)}}return n}function SL(t,e){let n;if(e instanceof Xc)n={update:_b(t,e.key,e.value)};else if(e instanceof Lv)n={delete:Ry(t,e.key)};else if(e instanceof Po)n={update:_b(t,e.key,e.data),updateMask:DL(e.fieldMask)};else{if(!(e instanceof lL))return Ve(16599,{Rt:e.type});n={verify:Ry(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(a,l){const c=l.transform;if(c instanceof Mh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Uc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Fc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof kh)return{fieldPath:l.field.canonicalString(),increment:c.Ee};throw Ve(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:_L(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ve(27497)})(t,e.precondition)),n}function bL(t,e){return t&&t.length>0?(Tt(e!==void 0,14353),t.map((n=>(function(s,a){let l=s.updateTime?qr(s.updateTime):qr(a);return l.isEqual(Oe.min())&&(l=qr(a)),new sL(l,s.transformResults||[])})(n,e)))):[]}function AL(t,e){return{documents:[WI(t,e.path)]}}function wL(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=WI(t,s);const a=(function(h){if(h.length!==0)return ZI(wr.create(h,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const l=(function(h){if(h.length!==0)return h.map((g=>(function(T){return{field:vl(T.field),direction:xL(T.dir)}})(g)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const c=Iy(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{Vt:n,parent:s}}function CL(t){let e=EL(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Tt(i===1,65062);const g=n.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let a=[];n.where&&(a=(function(E){const T=XI(E);return T instanceof wr&&xI(T)?T.getFilters():[T]})(n.where));let l=[];n.orderBy&&(l=(function(E){return E.map((T=>(function(N){return new Dh(_l(N.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(T)))})(n.orderBy));let c=null;n.limit&&(c=(function(E){let T;return T=typeof E=="object"?E.value:E,fp(T)?null:T})(n.limit));let d=null;n.startAt&&(d=(function(E){const T=!!E.before,w=E.values||[];return new Nh(w,T)})(n.startAt));let h=null;return n.endAt&&(h=(function(E){const T=!E.before,w=E.values||[];return new Nh(w,T)})(n.endAt)),$P(e,s,l,a,c,"F",d,h)}function IL(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function XI(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=_l(n.unaryFilter.field);return gn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=_l(n.unaryFilter.field);return gn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=_l(n.unaryFilter.field);return gn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=_l(n.unaryFilter.field);return gn.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ve(61313);default:return Ve(60726)}})(t):t.fieldFilter!==void 0?(function(n){return gn.create(_l(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ve(58110);default:return Ve(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return wr.create(n.compositeFilter.filters.map((i=>XI(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ve(1026)}})(n.compositeFilter.op))})(t):Ve(30097,{filter:t})}function xL(t){return mL[t]}function RL(t){return gL[t]}function NL(t){return yL[t]}function vl(t){return{fieldPath:t.canonicalString()}}function _l(t){return Gn.fromServerFormat(t.fieldPath)}function ZI(t){return t instanceof gn?(function(n){if(n.op==="=="){if(ob(n.value))return{unaryFilter:{field:vl(n.field),op:"IS_NAN"}};if(sb(n.value))return{unaryFilter:{field:vl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ob(n.value))return{unaryFilter:{field:vl(n.field),op:"IS_NOT_NAN"}};if(sb(n.value))return{unaryFilter:{field:vl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vl(n.field),op:RL(n.op),value:n.value}}})(t):t instanceof wr?(function(n){const i=n.getFilters().map((s=>ZI(s)));return i.length===1?i[0]:{compositeFilter:{op:NL(n.op),filters:i}}})(t):Ve(54877,{filter:t})}function DL(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function ex(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,n,i,s,a=Oe.min(),l=Oe.min(),c=jn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new mo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new mo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new mo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new mo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e){this.gt=e}}function kL(t){const e=CL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Cy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(){this.Dn=new LL}addToCollectionParentIndex(e,n){return this.Dn.add(n),ue.resolve()}getCollectionParents(e,n){return ue.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return ue.resolve()}deleteFieldIndex(e,n){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,n){return ue.resolve()}getDocumentsMatchingTarget(e,n){return ue.resolve(null)}getIndexType(e,n){return ue.resolve(0)}getFieldIndexes(e,n){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,n){return ue.resolve(Ao.min())}getMinOffsetFromCollectionGroup(e,n){return ue.resolve(Ao.min())}updateCollectionGroup(e,n,i){return ue.resolve()}updateIndexEntries(e,n){return ue.resolve()}}class LL{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new wn(Pt.comparator),a=!s.has(i);return this.index[n]=s.add(i),a}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new wn(Pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tx=41943040;class Ai{static withCacheSize(e){return new Ai(e,Ai.DEFAULT_COLLECTION_PERCENTILE,Ai.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ai.DEFAULT_COLLECTION_PERCENTILE=10,Ai.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ai.DEFAULT=new Ai(tx,Ai.DEFAULT_COLLECTION_PERCENTILE,Ai.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ai.DISABLED=new Ai(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ol(0)}static ur(){return new Ol(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb="LruGarbageCollector",VL=1048576;function Sb([t,e],[n,i]){const s=Je(t,n);return s===0?Je(e,i):s}class OL{constructor(e){this.Tr=e,this.buffer=new wn(Sb),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Sb(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class UL{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){_e(Tb,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){$l(n)?_e(Tb,"Ignoring IndexedDB error during garbage collection: ",n):await jl(n)}await this.Rr(3e5)}))}}class FL{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return ue.resolve(cp.ue);const i=new OL(n);return this.Vr.forEachTarget(e,(s=>i.Er(s.sequenceNumber))).next((()=>this.Vr.gr(e,(s=>i.Er(s))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(Eb)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Eb):this.pr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let i,s,a,l,c,d,h;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,l=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(i=E,c=Date.now(),this.removeTargets(e,i,n)))).next((E=>(a=E,d=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(h=Date.now(),gl()<=nt.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${s} in `+(c-l)+`ms
	Removed ${a} targets in `+(d-c)+`ms
	Removed ${E} documents in `+(h-d)+`ms
Total Duration: ${h-g}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:E}))))}}function qL(t,e){return new FL(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(){this.changes=new wa((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Zn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ue.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(i!==null&&vc(i.mutation,s,Fi.empty(),Bt.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,it()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=it()){const s=ca();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,i).next((a=>{let l=sc();return a.forEach(((c,d)=>{l=l.insert(c,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const i=ca();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,it())))}populateOverlays(e,n,i){const s=[];return i.forEach((a=>{n.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((l,c)=>{n.set(l,c)}))}))}computeViews(e,n,i,s){let a=Ts();const l=yc(),c=(function(){return yc()})();return n.forEach(((d,h)=>{const g=i.get(h.key);s.has(h.key)&&(g===void 0||g.mutation instanceof Po)?a=a.insert(h.key,h):g!==void 0?(l.set(h.key,g.mutation.getFieldMask()),vc(g.mutation,h,g.mutation.getFieldMask(),Bt.now())):l.set(h.key,Fi.empty())})),this.recalculateAndSaveOverlays(e,a).next((d=>(d.forEach(((h,g)=>l.set(h,g))),n.forEach(((h,g)=>{var E;return c.set(h,new zL(g,(E=l.get(h))!==null&&E!==void 0?E:null))})),c)))}recalculateAndSaveOverlays(e,n){const i=yc();let s=new Jt(((l,c)=>l-c)),a=it();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const c of l)c.keys().forEach((d=>{const h=n.get(d);if(h===null)return;let g=i.get(d)||Fi.empty();g=c.applyToLocalView(h,g),i.set(d,g);const E=(s.get(c.batchId)||it()).add(d);s=s.insert(c.batchId,E)}))})).next((()=>{const l=[],c=s.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),h=d.key,g=d.value,E=OI();g.forEach((T=>{if(!a.has(T)){const w=HI(n.get(T),i.get(T));w!==null&&E.set(T,w),a=a.add(T)}})),l.push(this.documentOverlayCache.saveOverlays(e,h,E))}return ue.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,s){return(function(l){return Ne.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):MI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next((a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-a.size):ue.resolve(ca());let c=Pc,d=a;return l.next((h=>ue.forEach(h,((g,E)=>(c<E.largestBatchId&&(c=E.largestBatchId),a.get(g)?ue.resolve():this.remoteDocumentCache.getEntry(e,g).next((T=>{d=d.insert(g,T)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,d,h,it()))).next((g=>({batchId:c,changes:VI(g)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ne(n)).next((i=>{let s=sc();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const a=n.collectionGroup;let l=sc();return this.indexManager.getCollectionParents(e,a).next((c=>ue.forEach(c,(d=>{const h=(function(E,T){return new Qc(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,d.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,s).next((g=>{g.forEach(((E,T)=>{l=l.insert(E,T)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,i,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,a,s)))).next((l=>{a.forEach(((d,h)=>{const g=h.getKey();l.get(g)===null&&(l=l.insert(g,Zn.newInvalidDocument(g)))}));let c=sc();return l.forEach(((d,h)=>{const g=a.get(d);g!==void 0&&vc(g.mutation,h,Fi.empty(),Bt.now()),pp(n,h)&&(c=c.insert(d,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return ue.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:qr(s.createTime)}})(n)),ue.resolve()}getNamedQuery(e,n){return ue.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(s){return{name:s.name,query:kL(s.bundledQuery),readTime:qr(s.readTime)}})(n)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(){this.overlays=new Jt(Ne.comparator),this.kr=new Map}getOverlay(e,n){return ue.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ca();return ue.forEach(n,(s=>this.getOverlay(e,s).next((a=>{a!==null&&i.set(s,a)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((s,a)=>{this.wt(e,n,a)})),ue.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.kr.get(i);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.kr.delete(i)),ue.resolve()}getOverlaysForCollection(e,n,i){const s=ca(),a=n.length+1,l=new Ne(n.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const d=c.getNext().value,h=d.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===a&&d.largestBatchId>i&&s.set(d.getKey(),d)}return ue.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let a=new Jt(((h,g)=>h-g));const l=this.overlays.getIterator();for(;l.hasNext();){const h=l.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let g=a.get(h.largestBatchId);g===null&&(g=ca(),a=a.insert(h.largestBatchId,g)),g.set(h.getKey(),h)}}const c=ca(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,g)=>c.set(h,g))),!(c.size()>=s)););return ue.resolve(c)}wt(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.kr.get(s.largestBatchId).delete(i.key);this.kr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new cL(n,i));let a=this.kr.get(n);a===void 0&&(a=it(),this.kr.set(n,a)),this.kr.set(n,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(){this.sessionToken=jn.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(){this.qr=new wn(Ln.Qr),this.$r=new wn(Ln.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const i=new Ln(e,n);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new Ln(e,n))}Gr(e,n){e.forEach((i=>this.removeReference(i,n)))}zr(e){const n=new Ne(new Pt([])),i=new Ln(n,e),s=new Ln(n,e+1),a=[];return this.$r.forEachInRange([i,s],(l=>{this.Wr(l),a.push(l.key)})),a}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Ne(new Pt([])),i=new Ln(n,e),s=new Ln(n,e+1);let a=it();return this.$r.forEachInRange([i,s],(l=>{a=a.add(l.key)})),a}containsKey(e){const n=new Ln(e,0),i=this.qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Ln{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Ne.comparator(e.key,n.key)||Je(e.Hr,n.Hr)}static Ur(e,n){return Je(e.Hr,n.Hr)||Ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new wn(Ln.Qr)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new uL(a,n,i,s);this.mutationQueue.push(l);for(const c of s)this.Yr=this.Yr.add(new Ln(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ue.resolve(l)}lookupMutationBatch(e,n){return ue.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.Xr(i),a=s<0?0:s;return ue.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?xv:this.er-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Ln(n,0),s=new Ln(n,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([i,s],(l=>{const c=this.Zr(l.Hr);a.push(c)})),ue.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new wn(Je);return n.forEach((s=>{const a=new Ln(s,0),l=new Ln(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,l],(c=>{i=i.add(c.Hr)}))})),ue.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let a=i;Ne.isDocumentKey(a)||(a=a.child(""));const l=new Ln(new Ne(a),0);let c=new wn(Je);return this.Yr.forEachWhile((d=>{const h=d.key.path;return!!i.isPrefixOf(h)&&(h.length===s&&(c=c.add(d.Hr)),!0)}),l),ue.resolve(this.ei(c))}ei(e){const n=[];return e.forEach((i=>{const s=this.Zr(i);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){Tt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return ue.forEach(n.mutations,(s=>{const a=new Ln(s.key,n.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,n){const i=new Ln(n,0),s=this.Yr.firstAfterOrEqual(i);return ue.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(e){this.ni=e,this.docs=(function(){return new Jt(Ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),a=s?s.size:0,l=this.ni(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return ue.resolve(i?i.document.mutableCopy():Zn.newInvalidDocument(n))}getEntries(e,n){let i=Ts();return n.forEach((s=>{const a=this.docs.get(s);i=i.insert(s,a?a.document.mutableCopy():Zn.newInvalidDocument(s))})),ue.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let a=Ts();const l=n.path,c=new Ne(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:h,value:{document:g}}=d.getNext();if(!l.isPrefixOf(h.path))break;h.path.length>l.length+1||AP(bP(g),i)<=0||(s.has(g.key)||pp(n,g))&&(a=a.insert(g.key,g.mutableCopy()))}return ue.resolve(a)}getAllFromCollectionGroup(e,n,i,s){Ve(9500)}ri(e,n){return ue.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new YL(this)}getSize(e){return ue.resolve(this.size)}}class YL extends BL{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(i)})),ue.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(e){this.persistence=e,this.ii=new wa((n=>Dv(n)),Mv),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.si=0,this.oi=new Fv,this.targetCount=0,this._i=Ol.ar()}forEachTarget(e,n){return this.ii.forEach(((i,s)=>n(s))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.si&&(this.si=n),ue.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Ol(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,ue.resolve()}updateTargetData(e,n){return this.hr(n),ue.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,n,i){let s=0;const a=[];return this.ii.forEach(((l,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.ii.delete(l),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),ue.waitFor(a).next((()=>s))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,n){const i=this.ii.get(n)||null;return ue.resolve(i)}addMatchingKeys(e,n,i){return this.oi.Kr(n,i),ue.resolve()}removeMatchingKeys(e,n,i){this.oi.Gr(n,i);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach((l=>{a.push(s.markPotentiallyOrphaned(e,l))})),ue.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),ue.resolve()}getMatchingKeysForTargetId(e,n){const i=this.oi.Jr(n);return ue.resolve(i)}containsKey(e,n){return ue.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,n){this.ai={},this.overlays={},this.ui=new cp(0),this.ci=!1,this.ci=!0,this.li=new $L,this.referenceDelegate=e(this),this.hi=new WL(this),this.indexManager=new PL,this.remoteDocumentCache=(function(s){return new JL(s)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new ML(n),this.Ti=new GL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new jL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ai[e.toKey()];return i||(i=new KL(n,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,i){_e("MemoryPersistence","Starting transaction:",e);const s=new QL(this.ui.next());return this.referenceDelegate.Ii(),i(s).next((a=>this.referenceDelegate.di(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ei(e,n){return ue.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,n))))}}class QL extends CP{constructor(e){super(),this.currentSequenceNumber=e}}class qv{constructor(e){this.persistence=e,this.Ai=new Fv,this.Ri=null}static Vi(e){return new qv(e)}get mi(){if(this.Ri)return this.Ri;throw Ve(60996)}addReference(e,n,i){return this.Ai.addReference(i,n),this.mi.delete(i.toString()),ue.resolve()}removeReference(e,n,i){return this.Ai.removeReference(i,n),this.mi.add(i.toString()),ue.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),ue.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach((s=>this.mi.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((a=>this.mi.add(a.toString())))})).next((()=>i.removeTargetData(e,n)))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.mi,(i=>{const s=Ne.fromPath(i);return this.fi(e,s).next((a=>{a||n.removeEntry(s,Oe.min())}))})).next((()=>(this.Ri=null,n.apply(e))))}updateLimboDocument(e,n){return this.fi(e,n).next((i=>{i?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(e){return 0}fi(e,n){return ue.or([()=>ue.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Lh{constructor(e,n){this.persistence=e,this.gi=new wa((i=>RP(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=qL(this,n)}static Vi(e,n){return new Lh(e,n)}Ii(){}di(e){return ue.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((s=>i+s))))}yr(e){let n=0;return this.gr(e,(i=>{n++})).next((()=>n))}gr(e,n){return ue.forEach(this.gi,((i,s)=>this.Sr(e,i,s).next((a=>a?ue.resolve():n(s)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ri(e,(l=>this.Sr(e,l,n).next((c=>{c||(i++,a.removeEntry(l,Oe.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),ue.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),ue.resolve()}removeReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),ue.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=sh(e.data.value)),n}Sr(e,n,i){return ue.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return ue.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Is=i,this.ds=s}static Es(e,n){let i=it(),s=it();for(const a of n.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Bv(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return N2()?8:IP(ti())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,i,s){const a={result:null};return this.ps(e,n).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ys(e,n,s,i).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new XL;return this.ws(e,n,l).next((c=>{if(a.result=c,this.Rs)return this.Ss(e,n,l,c.size)}))})).next((()=>a.result))}Ss(e,n,i,s){return i.documentReadCount<this.Vs?(gl()<=nt.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",yl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ue.resolve()):(gl()<=nt.DEBUG&&_e("QueryEngine","Query:",yl(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.fs*s?(gl()<=nt.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",yl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fr(n))):ue.resolve())}ps(e,n){if(cb(n))return ue.resolve(null);let i=Fr(n);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Cy(n,null,"F"),i=Fr(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const l=it(...a);return this.gs.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,i).next((d=>{const h=this.bs(n,c);return this.Ds(n,h,l,d.readTime)?this.ps(e,Cy(n,null,"F")):this.vs(e,h,n,d)}))))})))))}ys(e,n,i,s){return cb(n)||s.isEqual(Oe.min())?ue.resolve(null):this.gs.getDocuments(e,i).next((a=>{const l=this.bs(n,a);return this.Ds(n,l,i,s)?ue.resolve(null):(gl()<=nt.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),yl(n)),this.vs(e,l,n,SP(s,Pc)).next((c=>c)))}))}bs(e,n){let i=new wn(PI(e));return n.forEach(((s,a)=>{pp(e,a)&&(i=i.add(a))})),i}Ds(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ws(e,n,i){return gl()<=nt.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",yl(n)),this.gs.getDocumentsMatchingQuery(e,n,Ao.min(),i)}vs(e,n,i,s){return this.gs.getDocumentsMatchingQuery(e,i,s).next((a=>(n.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv="LocalStore",eV=3e8;class tV{constructor(e,n,i,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new Jt(Je),this.Ms=new wa((a=>Dv(a)),Mv),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HL(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Fs)))}}function nV(t,e,n,i){return new tV(t,e,n,i)}async function ix(t,e){const n=Be(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next((a=>(s=a,n.Ns(e),n.mutationQueue.getAllMutationBatches(i)))).next((a=>{const l=[],c=[];let d=it();for(const h of s){l.push(h.batchId);for(const g of h.mutations)d=d.add(g.key)}for(const h of a){c.push(h.batchId);for(const g of h.mutations)d=d.add(g.key)}return n.localDocuments.getDocuments(i,d).next((h=>({Bs:h,removedBatchIds:l,addedBatchIds:c})))}))}))}function iV(t,e){const n=Be(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=e.batch.keys(),a=n.Os.newChangeBuffer({trackRemovals:!0});return(function(c,d,h,g){const E=h.batch,T=E.keys();let w=ue.resolve();return T.forEach((N=>{w=w.next((()=>g.getEntry(d,N))).next((P=>{const V=h.docVersions.get(N);Tt(V!==null,48541),P.version.compareTo(V)<0&&(E.applyToRemoteDocument(P,h),P.isValidDocument()&&(P.setReadTime(h.commitVersion),g.addEntry(P)))}))})),w.next((()=>c.mutationQueue.removeMutationBatch(d,E)))})(n,i,e,a).next((()=>a.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(c){let d=it();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(d=d.add(c.batch.mutations[h].key));return d})(e)))).next((()=>n.localDocuments.getDocuments(i,s)))}))}function rx(t){const e=Be(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.hi.getLastRemoteSnapshotVersion(n)))}function rV(t,e){const n=Be(t),i=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const c=[];e.targetChanges.forEach(((g,E)=>{const T=s.get(E);if(!T)return;c.push(n.hi.removeMatchingKeys(a,g.removedDocuments,E).next((()=>n.hi.addMatchingKeys(a,g.addedDocuments,E))));let w=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?w=w.withResumeToken(jn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):g.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(g.resumeToken,i)),s=s.insert(E,w),(function(P,V,z){return P.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=eV?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(T,w,g)&&c.push(n.hi.updateTargetData(a,w))}));let d=Ts(),h=it();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,g))})),c.push(sV(a,l,e.documentUpdates).next((g=>{d=g.Ls,h=g.ks}))),!i.isEqual(Oe.min())){const g=n.hi.getLastRemoteSnapshotVersion(a).next((E=>n.hi.setTargetsMetadata(a,a.currentSequenceNumber,i)));c.push(g)}return ue.waitFor(c).next((()=>l.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,d,h))).next((()=>d))})).then((a=>(n.Fs=s,a)))}function sV(t,e,n){let i=it(),s=it();return n.forEach((a=>i=i.add(a))),e.getEntries(t,i).next((a=>{let l=Ts();return n.forEach(((c,d)=>{const h=a.get(c);d.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),d.isNoDocument()&&d.version.isEqual(Oe.min())?(e.removeEntry(c,d.readTime),l=l.insert(c,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),l=l.insert(c,d)):_e(zv,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",d.version)})),{Ls:l,ks:s}}))}function oV(t,e){const n=Be(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=xv),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function aV(t,e){const n=Be(t);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return n.hi.getTargetData(i,e).next((a=>a?(s=a,ue.resolve(s)):n.hi.allocateTargetId(i).next((l=>(s=new mo(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.hi.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=n.Fs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(i.targetId,i),n.Ms.set(e,i.targetId)),i}))}async function Dy(t,e,n){const i=Be(t),s=i.Fs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",a,(l=>i.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!$l(l))throw l;_e(zv,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(s.target)}function bb(t,e,n){const i=Be(t);let s=Oe.min(),a=it();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,h,g){const E=Be(d),T=E.Ms.get(g);return T!==void 0?ue.resolve(E.Fs.get(T)):E.hi.getTargetData(h,g)})(i,l,Fr(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(l,c.targetId).next((d=>{a=d}))})).next((()=>i.Cs.getDocumentsMatchingQuery(l,e,n?s:Oe.min(),n?a:it()))).next((c=>(lV(i,JP(e),c),{documents:c,qs:a})))))}function lV(t,e,n){let i=t.xs.get(e)||Oe.min();n.forEach(((s,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),t.xs.set(e,i)}class Ab{constructor(){this.activeTargetIds=eL()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uV{constructor(){this.Fo=new Ab,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,i){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Ab,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb="ConnectivityMonitor";class Cb{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){_e(wb,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){_e(wb,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pd=null;function My(){return Pd===null?Pd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Pd++,"0x"+Pd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg="RestConnection",fV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dV{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${i}/databases/${s}`,this.Ko=this.databaseId.database===xh?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Wo(e,n,i,s,a){const l=My(),c=this.Go(e,n.toUriEncodedString());_e(Wg,`Sending RPC '${e}' ${l}:`,c,i);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(d,s,a);const{host:h}=new URL(c),g=bs(h);return this.jo(e,c,d,i,g).then((E=>(_e(Wg,`Received RPC '${e}' ${l}: `,E),E)),(E=>{throw bo(Wg,`RPC '${e}' ${l} failed with error: `,E,"url: ",c,"request:",i),E}))}Jo(e,n,i,s,a,l){return this.Wo(e,n,i,s,a)}zo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Gl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,a)=>e[a]=s)),i&&i.headers.forEach(((s,a)=>e[a]=s))}Go(e,n){const i=fV[e];return`${this.$o}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yn="WebChannelConnection";class pV extends dV{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,i,s,a){const l=My();return new Promise(((c,d)=>{const h=new oI;h.setWithCredentials(!0),h.listenOnce(aI.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case rh.NO_ERROR:const E=h.getResponseJson();_e(Yn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(E)),c(E);break;case rh.TIMEOUT:_e(Yn,`RPC '${e}' ${l} timed out`),d(new Ee(le.DEADLINE_EXCEEDED,"Request time out"));break;case rh.HTTP_ERROR:const T=h.getStatus();if(_e(Yn,`RPC '${e}' ${l} failed with status:`,T,"response text:",h.getResponseText()),T>0){let w=h.getResponseJson();Array.isArray(w)&&(w=w[0]);const N=w==null?void 0:w.error;if(N&&N.status&&N.message){const P=(function(z){const F=z.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(F)>=0?F:le.UNKNOWN})(N.status);d(new Ee(P,N.message))}else d(new Ee(le.UNKNOWN,"Server responded with status "+h.getStatus()))}else d(new Ee(le.UNAVAILABLE,"Connection failed."));break;default:Ve(9055,{c_:e,streamId:l,l_:h.getLastErrorCode(),h_:h.getLastError()})}}finally{_e(Yn,`RPC '${e}' ${l} completed.`)}}));const g=JSON.stringify(s);_e(Yn,`RPC '${e}' ${l} sending request:`,s),h.send(n,"POST",g,i,15)}))}P_(e,n,i){const s=My(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=cI(),c=uI(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.zo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const g=a.join("");_e(Yn,`Creating RPC '${e}' stream ${s}: ${g}`,d);const E=l.createWebChannel(g,d);this.T_(E);let T=!1,w=!1;const N=new hV({Ho:V=>{w?_e(Yn,`Not sending because RPC '${e}' stream ${s} is closed:`,V):(T||(_e(Yn,`Opening RPC '${e}' stream ${s} transport.`),E.open(),T=!0),_e(Yn,`RPC '${e}' stream ${s} sending:`,V),E.send(V))},Yo:()=>E.close()}),P=(V,z,F)=>{V.listen(z,(q=>{try{F(q)}catch(K){setTimeout((()=>{throw K}),0)}}))};return P(E,rc.EventType.OPEN,(()=>{w||(_e(Yn,`RPC '${e}' stream ${s} transport opened.`),N.s_())})),P(E,rc.EventType.CLOSE,(()=>{w||(w=!0,_e(Yn,`RPC '${e}' stream ${s} transport closed`),N.__(),this.I_(E))})),P(E,rc.EventType.ERROR,(V=>{w||(w=!0,bo(Yn,`RPC '${e}' stream ${s} transport errored. Name:`,V.name,"Message:",V.message),N.__(new Ee(le.UNAVAILABLE,"The operation could not be completed")))})),P(E,rc.EventType.MESSAGE,(V=>{var z;if(!w){const F=V.data[0];Tt(!!F,16349);const q=F,K=(q==null?void 0:q.error)||((z=q[0])===null||z===void 0?void 0:z.error);if(K){_e(Yn,`RPC '${e}' stream ${s} received error:`,K);const X=K.status;let G=(function(R){const L=mn[R];if(L!==void 0)return jI(L)})(X),I=K.message;G===void 0&&(G=le.INTERNAL,I="Unknown error status: "+X+" with message "+K.message),w=!0,N.__(new Ee(G,I)),E.close()}else _e(Yn,`RPC '${e}' stream ${s} received:`,F),N.a_(F)}})),P(c,lI.STAT_EVENT,(V=>{V.stat===_y.PROXY?_e(Yn,`RPC '${e}' stream ${s} detected buffering proxy`):V.stat===_y.NOPROXY&&_e(Yn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{N.o_()}),0),N}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((n=>n===e))}}function Qg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(t){return new vL(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,n,i=1e3,s=1.5,a=6e4){this.Fi=e,this.timerId=n,this.d_=i,this.E_=s,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-i);s>0&&_e("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="PersistentStream";class ox{constructor(e,n,i,s,a,l,c,d){this.Fi=e,this.w_=i,this.S_=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new sx(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===le.RESOURCE_EXHAUSTED?(Es(n.toString()),Es("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.b_===n&&this.W_(i,s)}),(i=>{e((()=>{const s=new Ee(le.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(s)}))}))}W_(e,n){const i=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((s=>{i((()=>this.G_(s)))})),this.stream.onMessage((s=>{i((()=>++this.C_==1?this.j_(s):this.onNext(s)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return _e(Ib,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget((()=>this.b_===e?n():(_e(Ib,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class mV extends ox{constructor(e,n,i,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,l),this.serializer=a}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=TL(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Oe.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Oe.min():l.readTime?qr(l.readTime):Oe.min()})(e);return this.listener.J_(n,i)}H_(e){const n={};n.database=Ny(this.serializer),n.addTarget=(function(a,l){let c;const d=l.target;if(c=Ay(d)?{documents:AL(a,d)}:{query:wL(a,d).Vt},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=JI(a,l.resumeToken);const h=Iy(a,l.expectedCount);h!==null&&(c.expectedCount=h)}else if(l.snapshotVersion.compareTo(Oe.min())>0){c.readTime=Ph(a,l.snapshotVersion.toTimestamp());const h=Iy(a,l.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const i=IL(this.serializer,e);i&&(n.labels=i),this.k_(n)}Y_(e){const n={};n.database=Ny(this.serializer),n.removeTarget=e,this.k_(n)}}class gV extends ox{constructor(e,n,i,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,l),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Tt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Tt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Tt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=bL(e.writeResults,e.commitTime),i=qr(e.commitTime);return this.listener.ta(i,n)}na(){const e={};e.database=Ny(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>SL(this.serializer,i)))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{}class vV extends yV{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new Ee(le.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Wo(e,xy(n,i),s,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ee(le.UNKNOWN,a.toString())}))}Jo(e,n,i,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Jo(e,xy(n,i),s,l,c,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ee(le.UNKNOWN,l.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class _V{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Es(n),this._a=!1):_e("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta="RemoteStore";class EV{constructor(e,n,i,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo((l=>{i.enqueueAndForget((async()=>{Ca(this)&&(_e(Ta,"Restarting streams for network reachability change."),await(async function(d){const h=Be(d);h.Ia.add(4),await ef(h),h.Aa.set("Unknown"),h.Ia.delete(4),await _p(h)})(this))}))})),this.Aa=new _V(i,s)}}async function _p(t){if(Ca(t))for(const e of t.da)await e(!0)}async function ef(t){for(const e of t.da)await e(!1)}function ax(t,e){const n=Be(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),$v(n)?jv(n):Kl(n).x_()&&Gv(n,e))}function Hv(t,e){const n=Be(t),i=Kl(n);n.Ta.delete(e),i.x_()&&lx(n,e),n.Ta.size===0&&(i.x_()?i.B_():Ca(n)&&n.Aa.set("Unknown"))}function Gv(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Kl(t).H_(e)}function lx(t,e){t.Ra.$e(e),Kl(t).Y_(e)}function jv(t){t.Ra=new pL({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Kl(t).start(),t.Aa.aa()}function $v(t){return Ca(t)&&!Kl(t).M_()&&t.Ta.size>0}function Ca(t){return Be(t).Ia.size===0}function ux(t){t.Ra=void 0}async function TV(t){t.Aa.set("Online")}async function SV(t){t.Ta.forEach(((e,n)=>{Gv(t,e)}))}async function bV(t,e){ux(t),$v(t)?(t.Aa.la(e),jv(t)):t.Aa.set("Unknown")}async function AV(t,e,n){if(t.Aa.set("Online"),e instanceof KI&&e.state===2&&e.cause)try{await(async function(s,a){const l=a.cause;for(const c of a.targetIds)s.Ta.has(c)&&(await s.remoteSyncer.rejectListen(c,l),s.Ta.delete(c),s.Ra.removeTarget(c))})(t,e)}catch(i){_e(Ta,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Vh(t,i)}else if(e instanceof lh?t.Ra.Ye(e):e instanceof $I?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Oe.min()))try{const i=await rx(t.localStore);n.compareTo(i)>=0&&await(function(a,l){const c=a.Ra.Pt(l);return c.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const g=a.Ta.get(h);g&&a.Ta.set(h,g.withResumeToken(d.resumeToken,l))}})),c.targetMismatches.forEach(((d,h)=>{const g=a.Ta.get(d);if(!g)return;a.Ta.set(d,g.withResumeToken(jn.EMPTY_BYTE_STRING,g.snapshotVersion)),lx(a,d);const E=new mo(g.target,d,h,g.sequenceNumber);Gv(a,E)})),a.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(i){_e(Ta,"Failed to raise snapshot:",i),await Vh(t,i)}}async function Vh(t,e,n){if(!$l(e))throw e;t.Ia.add(1),await ef(t),t.Aa.set("Offline"),n||(n=()=>rx(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{_e(Ta,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await _p(t)}))}function cx(t,e){return e().catch((n=>Vh(t,n,e)))}async function Ep(t){const e=Be(t),n=xo(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:xv;for(;wV(e);)try{const s=await oV(e.localStore,i);if(s===null){e.Pa.length===0&&n.B_();break}i=s.batchId,CV(e,s)}catch(s){await Vh(e,s)}fx(e)&&dx(e)}function wV(t){return Ca(t)&&t.Pa.length<10}function CV(t,e){t.Pa.push(e);const n=xo(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function fx(t){return Ca(t)&&!xo(t).M_()&&t.Pa.length>0}function dx(t){xo(t).start()}async function IV(t){xo(t).na()}async function xV(t){const e=xo(t);for(const n of t.Pa)e.X_(n.mutations)}async function RV(t,e,n){const i=t.Pa.shift(),s=Vv.from(i,e,n);await cx(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await Ep(t)}async function NV(t,e){e&&xo(t).Z_&&await(async function(i,s){if((function(l){return dL(l)&&l!==le.ABORTED})(s.code)){const a=i.Pa.shift();xo(i).N_(),await cx(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,s))),await Ep(i)}})(t,e),fx(t)&&dx(t)}async function xb(t,e){const n=Be(t);n.asyncQueue.verifyOperationInProgress(),_e(Ta,"RemoteStore received new credentials");const i=Ca(n);n.Ia.add(3),await ef(n),i&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await _p(n)}async function DV(t,e){const n=Be(t);e?(n.Ia.delete(2),await _p(n)):e||(n.Ia.add(2),await ef(n),n.Aa.set("Unknown"))}function Kl(t){return t.Va||(t.Va=(function(n,i,s){const a=Be(n);return a.ia(),new mV(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Zo:TV.bind(null,t),e_:SV.bind(null,t),n_:bV.bind(null,t),J_:AV.bind(null,t)}),t.da.push((async e=>{e?(t.Va.N_(),$v(t)?jv(t):t.Aa.set("Unknown")):(await t.Va.stop(),ux(t))}))),t.Va}function xo(t){return t.ma||(t.ma=(function(n,i,s){const a=Be(n);return a.ia(),new gV(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:IV.bind(null,t),n_:NV.bind(null,t),ea:xV.bind(null,t),ta:RV.bind(null,t)}),t.da.push((async e=>{e?(t.ma.N_(),await Ep(t)):(await t.ma.stop(),t.Pa.length>0&&(_e(Ta,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e,n,i,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=a,this.deferred=new fa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,a){const l=Date.now()+i,c=new Kv(e,n,l,s,a);return c.start(i),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jv(t,e){if(Es("AsyncQueue",`${e}: ${t}`),$l(t))return new Ee(le.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{static emptySet(e){return new Cl(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ne.comparator(n.key,i.key):(n,i)=>Ne.comparator(n.key,i.key),this.keyedMap=sc(),this.sortedSet=new Jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Cl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=i.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Cl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(){this.fa=new Jt(Ne.comparator)}track(e){const n=e.doc.key,i=this.fa.get(n);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(n,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(n):e.type===1&&i.type===2?this.fa=this.fa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Ve(63341,{At:e,ga:i}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Ul{constructor(e,n,i,s,a,l,c,d,h){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,n,i,s,a){const l=[];return n.forEach((c=>{l.push({type:0,doc:c})})),new Ul(e,n,Cl.emptySet(n),l,i,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class kV{constructor(){this.queries=Nb(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,i){const s=Be(n),a=s.queries;s.queries=Nb(),a.forEach(((l,c)=>{for(const d of c.wa)d.onError(i)}))})(this,new Ee(le.ABORTED,"Firestore shutting down"))}}function Nb(){return new wa((t=>kI(t)),hp)}async function PV(t,e){const n=Be(t);let i=3;const s=e.query;let a=n.queries.get(s);a?!a.Sa()&&e.ba()&&(i=2):(a=new MV,i=e.ba()?0:1);try{switch(i){case 0:a.ya=await n.onListen(s,!0);break;case 1:a.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const c=Jv(l,`Initialization of query '${yl(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,a),a.wa.push(e),e.va(n.onlineState),a.ya&&e.Ca(a.ya)&&Yv(n)}async function LV(t,e){const n=Be(t),i=e.query;let s=3;const a=n.queries.get(i);if(a){const l=a.wa.indexOf(e);l>=0&&(a.wa.splice(l,1),a.wa.length===0?s=e.ba()?0:1:!a.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function VV(t,e){const n=Be(t);let i=!1;for(const s of e){const a=s.query,l=n.queries.get(a);if(l){for(const c of l.wa)c.Ca(s)&&(i=!0);l.ya=s}}i&&Yv(n)}function OV(t,e,n){const i=Be(t),s=i.queries.get(e);if(s)for(const a of s.wa)a.onError(n);i.queries.delete(e)}function Yv(t){t.Da.forEach((e=>{e.next()}))}var ky,Db;(Db=ky||(ky={})).Fa="default",Db.Cache="cache";class UV{constructor(e,n,i){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Ul(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const i=n!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Ul.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==ky.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e){this.key=e}}class px{constructor(e){this.key=e}}class FV{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=it(),this.mutatedKeys=it(),this.Xa=PI(e),this.eu=new Cl(this.Xa)}get tu(){return this.Ha}nu(e,n){const i=n?n.ru:new Rb,s=n?n.eu:this.eu;let a=n?n.mutatedKeys:this.mutatedKeys,l=s,c=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,E)=>{const T=s.get(g),w=pp(this.query,E)?E:null,N=!!T&&this.mutatedKeys.has(T.key),P=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let V=!1;T&&w?T.data.isEqual(w.data)?N!==P&&(i.track({type:3,doc:w}),V=!0):this.iu(T,w)||(i.track({type:2,doc:w}),V=!0,(d&&this.Xa(w,d)>0||h&&this.Xa(w,h)<0)&&(c=!0)):!T&&w?(i.track({type:0,doc:w}),V=!0):T&&!w&&(i.track({type:1,doc:T}),V=!0,(d||h)&&(c=!0)),V&&(w?(l=l.add(w),a=P?a.add(g):a.delete(g)):(l=l.delete(g),a=a.delete(g)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),a=a.delete(g.key),i.track({type:1,doc:g})}return{eu:l,ru:i,Ds:c,mutatedKeys:a}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const l=e.ru.pa();l.sort(((g,E)=>(function(w,N){const P=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve(20277,{At:V})}};return P(w)-P(N)})(g.type,E.type)||this.Xa(g.doc,E.doc))),this.su(i),s=s!=null&&s;const c=n&&!s?this.ou():[],d=this.Za.size===0&&this.current&&!s?1:0,h=d!==this.Ya;return this.Ya=d,l.length!==0||h?{snapshot:new Ul(this.query,e.eu,a,l,e.mutatedKeys,d===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Rb,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=it(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const n=[];return e.forEach((i=>{this.Za.has(i)||n.push(new px(i))})),this.Za.forEach((i=>{e.has(i)||n.push(new hx(i))})),n}uu(e){this.Ha=e.qs,this.Za=it();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Ul.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Wv="SyncEngine";class qV{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class BV{constructor(e){this.key=e,this.lu=!1}}class zV{constructor(e,n,i,s,a,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.hu={},this.Pu=new wa((c=>kI(c)),hp),this.Tu=new Map,this.Iu=new Set,this.du=new Jt(Ne.comparator),this.Eu=new Map,this.Au=new Fv,this.Ru={},this.Vu=new Map,this.mu=Ol.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function HV(t,e,n=!0){const i=Ex(t);let s;const a=i.Pu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.cu()):s=await mx(i,e,n,!0),s}async function GV(t,e){const n=Ex(t);await mx(n,e,!0,!1)}async function mx(t,e,n,i){const s=await aV(t.localStore,Fr(e)),a=s.targetId,l=t.sharedClientState.addLocalQueryTarget(a,n);let c;return i&&(c=await jV(t,e,a,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&ax(t.remoteStore,s),c}async function jV(t,e,n,i,s){t.gu=(E,T,w)=>(async function(P,V,z,F){let q=V.view.nu(z);q.Ds&&(q=await bb(P.localStore,V.query,!1).then((({documents:I})=>V.view.nu(I,q))));const K=F&&F.targetChanges.get(V.targetId),X=F&&F.targetMismatches.get(V.targetId)!=null,G=V.view.applyChanges(q,P.isPrimaryClient,K,X);return kb(P,V.targetId,G._u),G.snapshot})(t,E,T,w);const a=await bb(t.localStore,e,!0),l=new FV(e,a.qs),c=l.nu(a.documents),d=Zc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),h=l.applyChanges(c,t.isPrimaryClient,d);kb(t,n,h._u);const g=new qV(e,n,l);return t.Pu.set(e,g),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),h.snapshot}async function $V(t,e,n){const i=Be(t),s=i.Pu.get(e),a=i.Tu.get(s.targetId);if(a.length>1)return i.Tu.set(s.targetId,a.filter((l=>!hp(l,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Dy(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),n&&Hv(i.remoteStore,s.targetId),Py(i,s.targetId)})).catch(jl)):(Py(i,s.targetId),await Dy(i.localStore,s.targetId,!0))}async function KV(t,e){const n=Be(t),i=n.Pu.get(e),s=n.Tu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Hv(n.remoteStore,i.targetId))}async function JV(t,e,n){const i=tO(t);try{const s=await(function(l,c){const d=Be(l),h=Bt.now(),g=c.reduce(((w,N)=>w.add(N.key)),it());let E,T;return d.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let N=Ts(),P=it();return d.Os.getEntries(w,g).next((V=>{N=V,N.forEach(((z,F)=>{F.isValidDocument()||(P=P.add(z))}))})).next((()=>d.localDocuments.getOverlayedDocuments(w,N))).next((V=>{E=V;const z=[];for(const F of c){const q=aL(F,E.get(F.key).overlayedDocument);q!=null&&z.push(new Po(F.key,q,wI(q.value.mapValue),Ar.exists(!0)))}return d.mutationQueue.addMutationBatch(w,h,z,c)})).next((V=>{T=V;const z=V.applyToLocalDocumentSet(E,P);return d.documentOverlayCache.saveOverlays(w,V.batchId,z)}))})).then((()=>({batchId:T.batchId,changes:VI(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),(function(l,c,d){let h=l.Ru[l.currentUser.toKey()];h||(h=new Jt(Je)),h=h.insert(c,d),l.Ru[l.currentUser.toKey()]=h})(i,s.batchId,n),await tf(i,s.changes),await Ep(i.remoteStore)}catch(s){const a=Jv(s,"Failed to persist write");n.reject(a)}}async function gx(t,e){const n=Be(t);try{const i=await rV(n.localStore,e);e.targetChanges.forEach(((s,a)=>{const l=n.Eu.get(a);l&&(Tt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.lu=!0:s.modifiedDocuments.size>0?Tt(l.lu,14607):s.removedDocuments.size>0&&(Tt(l.lu,42227),l.lu=!1))})),await tf(n,i,e)}catch(i){await jl(i)}}function Mb(t,e,n){const i=Be(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Pu.forEach(((a,l)=>{const c=l.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(l,c){const d=Be(l);d.onlineState=c;let h=!1;d.queries.forEach(((g,E)=>{for(const T of E.wa)T.va(c)&&(h=!0)})),h&&Yv(d)})(i.eventManager,e),s.length&&i.hu.J_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function YV(t,e,n){const i=Be(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Eu.get(e),a=s&&s.key;if(a){let l=new Jt(Ne.comparator);l=l.insert(a,Zn.newNoDocument(a,Oe.min()));const c=it().add(a),d=new yp(Oe.min(),new Map,new Jt(Je),l,c);await gx(i,d),i.du=i.du.remove(a),i.Eu.delete(e),Qv(i)}else await Dy(i.localStore,e,!1).then((()=>Py(i,e,n))).catch(jl)}async function WV(t,e){const n=Be(t),i=e.batch.batchId;try{const s=await iV(n.localStore,e);vx(n,i,null),yx(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await tf(n,s)}catch(s){await jl(s)}}async function QV(t,e,n){const i=Be(t);try{const s=await(function(l,c){const d=Be(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let g;return d.mutationQueue.lookupMutationBatch(h,c).next((E=>(Tt(E!==null,37113),g=E.keys(),d.mutationQueue.removeMutationBatch(h,E)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,g,c))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,g))).next((()=>d.localDocuments.getDocuments(h,g)))}))})(i.localStore,e);vx(i,e,n),yx(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await tf(i,s)}catch(s){await jl(s)}}function yx(t,e){(t.Vu.get(e)||[]).forEach((n=>{n.resolve()})),t.Vu.delete(e)}function vx(t,e,n){const i=Be(t);let s=i.Ru[i.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),i.Ru[i.currentUser.toKey()]=s}}function Py(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Tu.get(e))t.Pu.delete(i),n&&t.hu.pu(i,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach((i=>{t.Au.containsKey(i)||_x(t,i)}))}function _x(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Hv(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Qv(t))}function kb(t,e,n){for(const i of n)i instanceof hx?(t.Au.addReference(i.key,e),XV(t,i)):i instanceof px?(_e(Wv,"Document no longer in limbo: "+i.key),t.Au.removeReference(i.key,e),t.Au.containsKey(i.key)||_x(t,i.key)):Ve(19791,{yu:i})}function XV(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Iu.has(i)||(_e(Wv,"New document in limbo: "+n),t.Iu.add(i),Qv(t))}function Qv(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new Ne(Pt.fromString(e)),i=t.mu.next();t.Eu.set(i,new BV(n)),t.du=t.du.insert(n,i),ax(t.remoteStore,new mo(Fr(kv(n.path)),i,"TargetPurposeLimboResolution",cp.ue))}}async function tf(t,e,n){const i=Be(t),s=[],a=[],l=[];i.Pu.isEmpty()||(i.Pu.forEach(((c,d)=>{l.push(i.gu(d,e,n).then((h=>{var g;if((h||n)&&i.isPrimaryClient){const E=h?!h.fromCache:(g=n==null?void 0:n.targetChanges.get(d.targetId))===null||g===void 0?void 0:g.current;i.sharedClientState.updateQueryState(d.targetId,E?"current":"not-current")}if(h){s.push(h);const E=Bv.Es(d.targetId,h);a.push(E)}})))})),await Promise.all(l),i.hu.J_(s),await(async function(d,h){const g=Be(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ue.forEach(h,(T=>ue.forEach(T.Is,(w=>g.persistence.referenceDelegate.addReference(E,T.targetId,w))).next((()=>ue.forEach(T.ds,(w=>g.persistence.referenceDelegate.removeReference(E,T.targetId,w)))))))))}catch(E){if(!$l(E))throw E;_e(zv,"Failed to update sequence numbers: "+E)}for(const E of h){const T=E.targetId;if(!E.fromCache){const w=g.Fs.get(T),N=w.snapshotVersion,P=w.withLastLimboFreeSnapshotVersion(N);g.Fs=g.Fs.insert(T,P)}}})(i.localStore,a))}async function ZV(t,e){const n=Be(t);if(!n.currentUser.isEqual(e)){_e(Wv,"User change. New user:",e.toKey());const i=await ix(n.localStore,e);n.currentUser=e,(function(a,l){a.Vu.forEach((c=>{c.forEach((d=>{d.reject(new Ee(le.CANCELLED,l))}))})),a.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await tf(n,i.Bs)}}function eO(t,e){const n=Be(t),i=n.Eu.get(e);if(i&&i.lu)return it().add(i.key);{let s=it();const a=n.Tu.get(e);if(!a)return s;for(const l of a){const c=n.Pu.get(l);s=s.unionWith(c.view.tu)}return s}}function Ex(t){const e=Be(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=gx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YV.bind(null,e),e.hu.J_=VV.bind(null,e.eventManager),e.hu.pu=OV.bind(null,e.eventManager),e}function tO(t){const e=Be(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QV.bind(null,e),e}class Oh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vp(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return nV(this.persistence,new ZL,e.initialUser,this.serializer)}Du(e){return new nx(qv.Vi,this.serializer)}bu(e){return new uV}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Oh.provider={build:()=>new Oh};class nO extends Oh{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Tt(this.persistence.referenceDelegate instanceof Lh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new UL(i,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Ai.withCacheSize(this.cacheSizeBytes):Ai.DEFAULT;return new nx((i=>Lh.Vi(i,n)),this.serializer)}}class Ly{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Mb(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZV.bind(null,this.syncEngine),await DV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new kV})()}createDatastore(e){const n=vp(e.databaseInfo.databaseId),i=(function(a){return new pV(a)})(e.databaseInfo);return(function(a,l,c,d){return new vV(a,l,c,d)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,s,a,l,c){return new EV(i,s,a,l,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>Mb(this.syncEngine,n,0)),(function(){return Cb.C()?new Cb:new cV})())}createSyncEngine(e,n){return(function(s,a,l,c,d,h,g){const E=new zV(s,a,l,c,d,h);return g&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(s){const a=Be(s);_e(Ta,"RemoteStore shutting down."),a.Ia.add(5),await ef(a),a.Ea.shutdown(),a.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ly.provider={build:()=>new Ly};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Es("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro="FirestoreClient";class rO{constructor(e,n,i,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Xn.UNAUTHENTICATED,this.clientId=Iv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async l=>{_e(Ro,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(_e(Ro,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Jv(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Xg(t,e){t.asyncQueue.verifyOperationInProgress(),_e(Ro,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async s=>{i.isEqual(s)||(await ix(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener((()=>{bo("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then((()=>{_e("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((s=>{bo("Terminating Firestore due to IndexedDb database deletion failed",s)}))})),t._offlineComponents=e}async function Pb(t,e){t.asyncQueue.verifyOperationInProgress();const n=await sO(t);_e(Ro,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>xb(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,s)=>xb(e.remoteStore,s))),t._onlineComponents=e}async function sO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){_e(Ro,"Using user provided OfflineComponentProvider");try{await Xg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===le.FAILED_PRECONDITION||s.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;bo("Error using user provided cache. Falling back to memory cache: "+n),await Xg(t,new Oh)}}else _e(Ro,"Using default OfflineComponentProvider"),await Xg(t,new nO(void 0));return t._offlineComponents}async function Tx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(_e(Ro,"Using user provided OnlineComponentProvider"),await Pb(t,t._uninitializedComponentsProvider._online)):(_e(Ro,"Using default OnlineComponentProvider"),await Pb(t,new Ly))),t._onlineComponents}function oO(t){return Tx(t).then((e=>e.syncEngine))}async function Lb(t){const e=await Tx(t),n=e.eventManager;return n.onListen=HV.bind(null,e.syncEngine),n.onUnlisten=$V.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=GV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=KV.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx="firestore.googleapis.com",Ob=!0;class Ub{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bx,this.ssl=Ob}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Ob;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=tx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<VL)throw new Ee(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Sx((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ee(le.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ee(le.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ee(le.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Tp{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ub({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ub(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new dP;switch(i.type){case"firstParty":return new gP(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ee(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=Vb.get(n);i&&(_e("ComponentProvider","Removing Datastore"),Vb.delete(n),i.terminate())})(this),Promise.resolve()}}function aO(t,e,n,i={}){var s;t=Eo(t,Tp);const a=bs(e),l=t._getSettings(),c=Object.assign(Object.assign({},l),{emulatorOptions:t._getEmulatorOptions()}),d=`${e}:${n}`;a&&(ip(`https://${d}`),rp("Firestore",!0)),l.host!==bx&&l.host!==d&&bo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},l),{host:d,ssl:a,emulatorOptions:i});if(!ya(h,c)&&(t._setSettings(h),i.mockUserToken)){let g,E;if(typeof i.mockUserToken=="string")g=i.mockUserToken,E=Xn.MOCK_USER;else{g=EC(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new Ee(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Xn(T)}t._authCredentials=new hP(new dI(g,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Jl(this.firestore,e,this._query)}}class vn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new To(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vn(this.firestore,e,this._key)}toJSON(){return{type:vn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Wc(n,vn._jsonSchema))return new vn(e,i||null,new Ne(Pt.fromString(n.referencePath)))}}vn._jsonSchemaVersion="firestore/documentReference/1.0",vn._jsonSchema={type:yn("string",vn._jsonSchemaVersion),referencePath:yn("string")};class To extends Jl{constructor(e,n,i){super(e,n,kv(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vn(this.firestore,null,new Ne(e))}withConverter(e){return new To(this.firestore,e,this._path)}}function Yl(t,e,...n){if(t=zt(t),pI("collection","path",e),t instanceof Tp){const i=Pt.fromString(e,...n);return WS(i),new To(t,null,i)}{if(!(t instanceof vn||t instanceof To))throw new Ee(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Pt.fromString(e,...n));return WS(i),new To(t.firestore,null,i)}}function nf(t,e,...n){if(t=zt(t),arguments.length===1&&(e=Iv.newId()),pI("doc","path",e),t instanceof Tp){const i=Pt.fromString(e,...n);return YS(i),new vn(t,null,new Ne(i))}{if(!(t instanceof vn||t instanceof To))throw new Ee(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Pt.fromString(e,...n));return YS(i),new vn(t.firestore,t instanceof To?t.converter:null,new Ne(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb="AsyncQueue";class qb{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new sx(this,"async_queue_retry"),this.oc=()=>{const i=Qg();i&&_e(Fb,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const n=Qg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Qg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new fa;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!$l(e))throw e;_e(Fb,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const n=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,Es("INTERNAL UNHANDLED ERROR: ",Bb(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=n,n}enqueueAfterDelay(e,n,i){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=Kv.createAndSchedule(this,e,n,i,(a=>this.lc(a)));return this.ec.push(s),s}ac(){this.tc&&Ve(47125,{hc:Bb(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function Bb(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(t){return(function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of i)if(a in s&&typeof s[a]=="function")return!0;return!1})(t,["next","error","complete"])}class Fl extends Tp{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new qb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new qb(e),this._firestoreClient=void 0,await e}}}function lO(t,e){const n=typeof t=="object"?t:sp(),i=typeof t=="string"?t:xh,s=jc(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const a=dv("firestore");a&&aO(s,...a)}return s}function Ax(t){if(t._terminated)throw new Ee(le.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||uO(t),t._firestoreClient}function uO(t){var e,n,i;const s=t._freezeSettings(),a=(function(c,d,h,g){return new MP(c,d,h,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,Sx(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new rO(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&(function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this._byteString=e}static fromBase64String(e){try{return new or(jn.fromBase64String(e))}catch(n){throw new Ee(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new or(jn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:or._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wc(e,or._jsonSchema))return or.fromBase64String(e.bytes)}}or._jsonSchemaVersion="firestore/bytes/1.0",or._jsonSchema={type:yn("string",or._jsonSchemaVersion),bytes:yn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ee(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ee(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ee(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Br._jsonSchemaVersion}}static fromJSON(e){if(Wc(e,Br._jsonSchema))return new Br(e.latitude,e.longitude)}}Br._jsonSchemaVersion="firestore/geoPoint/1.0",Br._jsonSchema={type:yn("string",Br._jsonSchemaVersion),latitude:yn("number"),longitude:yn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:zr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wc(e,zr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new zr(e.vectorValues);throw new Ee(le.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}zr._jsonSchemaVersion="firestore/vectorValue/1.0",zr._jsonSchema={type:yn("string",zr._jsonSchemaVersion),vectorValues:yn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO=/^__.*__$/;class fO{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Po(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xc(e,this.data,n,this.fieldTransforms)}}class wx{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Po(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Cx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve(40011,{Ec:t})}}class Zv{constructor(e,n,i,s,a,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Zv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:i,mc:!1});return s.fc(e),s}gc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:i,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Uh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Cx(this.Ec)&&cO.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class dO{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||vp(e)}Dc(e,n,i,s=!1){return new Zv({Ec:e,methodName:n,bc:i,path:Gn.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function e0(t){const e=t._freezeSettings(),n=vp(t._databaseId);return new dO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hO(t,e,n,i,s,a={}){const l=t.Dc(a.merge||a.mergeFields?2:0,e,n,s);t0("Data must be an object, but it was:",l,i);const c=Ix(i,l);let d,h;if(a.merge)d=new Fi(l.fieldMask),h=l.fieldTransforms;else if(a.mergeFields){const g=[];for(const E of a.mergeFields){const T=Vy(e,E,n);if(!l.contains(T))throw new Ee(le.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);Rx(g,T)||g.push(T)}d=new Fi(g),h=l.fieldTransforms.filter((E=>d.covers(E.field)))}else d=null,h=l.fieldTransforms;return new fO(new wi(c),d,h)}class bp extends Xv{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bp}}function pO(t,e,n,i){const s=t.Dc(1,e,n);t0("Data must be an object, but it was:",s,i);const a=[],l=wi.empty();ko(i,((d,h)=>{const g=n0(e,d,n);h=zt(h);const E=s.gc(g);if(h instanceof bp)a.push(g);else{const T=rf(h,E);T!=null&&(a.push(g),l.set(g,T))}}));const c=new Fi(a);return new wx(l,c,s.fieldTransforms)}function mO(t,e,n,i,s,a){const l=t.Dc(1,e,n),c=[Vy(e,i,n)],d=[s];if(a.length%2!=0)throw new Ee(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)c.push(Vy(e,a[T])),d.push(a[T+1]);const h=[],g=wi.empty();for(let T=c.length-1;T>=0;--T)if(!Rx(h,c[T])){const w=c[T];let N=d[T];N=zt(N);const P=l.gc(w);if(N instanceof bp)h.push(w);else{const V=rf(N,P);V!=null&&(h.push(w),g.set(w,V))}}const E=new Fi(h);return new wx(g,E,l.fieldTransforms)}function gO(t,e,n,i=!1){return rf(n,t.Dc(i?4:3,e))}function rf(t,e){if(xx(t=zt(t)))return t0("Unsupported field value:",e,t),Ix(t,e);if(t instanceof Xv)return(function(i,s){if(!Cx(s.Ec))throw s.wc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,s){const a=[];let l=0;for(const c of i){let d=rf(c,s.yc(l));d==null&&(d={nullValue:"NULL_VALUE"}),a.push(d),l++}return{arrayValue:{values:a}}})(t,e)}return(function(i,s){if((i=zt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return tL(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Bt.fromDate(i);return{timestampValue:Ph(s.serializer,a)}}if(i instanceof Bt){const a=new Bt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ph(s.serializer,a)}}if(i instanceof Br)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof or)return{bytesValue:JI(s.serializer,i._byteString)};if(i instanceof vn){const a=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(a))throw s.wc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Uv(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof zr)return(function(l,c){return{mapValue:{fields:{[bI]:{stringValue:AI},[Rh]:{arrayValue:{values:l.toArray().map((h=>{if(typeof h!="number")throw c.wc("VectorValues must only contain numeric values.");return Pv(c.serializer,h)}))}}}}}})(i,s);throw s.wc(`Unsupported field value: ${up(i)}`)})(t,e)}function Ix(t,e){const n={};return yI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ko(t,((i,s)=>{const a=rf(s,e.Vc(i));a!=null&&(n[i]=a)})),{mapValue:{fields:n}}}function xx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Bt||t instanceof Br||t instanceof or||t instanceof vn||t instanceof Xv||t instanceof zr)}function t0(t,e,n){if(!xx(n)||!mI(n)){const i=up(n);throw i==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+i)}}function Vy(t,e,n){if((e=zt(e))instanceof Sp)return e._internalPath;if(typeof e=="string")return n0(t,e);throw Uh("Field path arguments must be of type string or ",t,!1,void 0,n)}const yO=new RegExp("[~\\*/\\[\\]]");function n0(t,e,n){if(e.search(yO)>=0)throw Uh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Sp(...e.split("."))._internalPath}catch{throw Uh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Uh(t,e,n,i,s){const a=i&&!i.isEmpty(),l=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(a||l)&&(d+=" (found",a&&(d+=` in field ${i}`),l&&(d+=` in document ${s}`),d+=")"),new Ee(le.INVALID_ARGUMENT,c+t+d)}function Rx(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e,n,i,s,a){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new vn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Dx("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class vO extends Nx{data(){return super.data()}}function Dx(t,e){return typeof e=="string"?n0(t,e):e instanceof Sp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _O(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ee(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class i0{}class EO extends i0{}function r0(t,e,...n){let i=[];e instanceof i0&&i.push(e),i=i.concat(n),(function(a){const l=a.filter((d=>d instanceof o0)).length,c=a.filter((d=>d instanceof s0)).length;if(l>1||l>0&&c>0)throw new Ee(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const s of i)t=s._apply(t);return t}class s0 extends EO{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new s0(e,n,i)}_apply(e){const n=this._parse(e);return Mx(e._query,n),new Jl(e.firestore,e.converter,wy(e._query,n))}_parse(e){const n=e0(e.firestore);return(function(a,l,c,d,h,g,E){let T;if(h.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new Ee(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){Gb(E,g);const N=[];for(const P of E)N.push(Hb(d,a,P));T={arrayValue:{values:N}}}else T=Hb(d,a,E)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||Gb(E,g),T=gO(c,l,E,g==="in"||g==="not-in");return gn.create(h,g,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class o0 extends i0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new o0(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:wr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,a){let l=s;const c=a.getFlattenedFilters();for(const d of c)Mx(l,d),l=wy(l,d)})(e._query,n),new Jl(e.firestore,e.converter,wy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Hb(t,e,n){if(typeof(n=zt(n))=="string"){if(n==="")throw new Ee(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!MI(e)&&n.indexOf("/")!==-1)throw new Ee(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Pt.fromString(n));if(!Ne.isDocumentKey(i))throw new Ee(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return rb(t,new Ne(i))}if(n instanceof vn)return rb(t,n._key);throw new Ee(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${up(n)}.`)}function Gb(t,e){if(!Array.isArray(t)||t.length===0)throw new Ee(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Mx(t,e){const n=(function(s,a){for(const l of s)for(const c of l.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ee(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class TO{convertValue(e,n="none"){switch(Io(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ln(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Co(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ve(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return ko(e,((s,a)=>{i[s]=this.convertValue(a,n)})),i}convertVectorValue(e){var n,i,s;const a=(s=(i=(n=e.fields)===null||n===void 0?void 0:n[Rh].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map((l=>ln(l.doubleValue)));return new zr(a)}convertGeoPoint(e){return new Br(ln(e.latitude),ln(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=dp(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Lc(e));default:return null}}convertTimestamp(e){const n=wo(e);return new Bt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Pt.fromString(e);Tt(ex(i),9688,{name:e});const s=new Vc(i.get(1),i.get(3)),a=new Ne(i.popFirst(5));return s.isEqual(n)||Es(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class ac{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class da extends Nx{constructor(e,n,i,s,a,l){super(e,n,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new uh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Dx("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(le.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=da._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}da._jsonSchemaVersion="firestore/documentSnapshot/1.0",da._jsonSchema={type:yn("string",da._jsonSchemaVersion),bundleSource:yn("string","DocumentSnapshot"),bundleName:yn("string"),bundle:yn("string")};class uh extends da{data(e={}){return super.data(e)}}class Il{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ac(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new uh(this._firestore,this._userDataWriter,i.key,i,new ac(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ee(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((c=>{const d=new uh(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ac(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const d=new uh(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ac(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,g=-1;return c.type!==0&&(h=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),g=l.indexOf(c.doc.key)),{type:bO(c.type),doc:d,oldIndex:h,newIndex:g}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(le.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Il._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Iv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function bO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve(61501,{type:t})}}Il._jsonSchemaVersion="firestore/querySnapshot/1.0",Il._jsonSchema={type:yn("string",Il._jsonSchemaVersion),bundleSource:yn("string","QuerySnapshot"),bundleName:yn("string"),bundle:yn("string")};class kx extends TO{constructor(e){super(),this.firestore=e}convertBytes(e){return new or(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new vn(this.firestore,null,n)}}function AO(t,e,n,...i){t=Eo(t,vn);const s=Eo(t.firestore,Fl),a=e0(s);let l;return l=typeof(e=zt(e))=="string"||e instanceof Sp?mO(a,"updateDoc",t._key,e,n,i):pO(a,"updateDoc",t._key,e),c0(s,[l.toMutation(t._key,Ar.exists(!0))])}function a0(t){return c0(Eo(t.firestore,Fl),[new Lv(t._key,Ar.none())])}function l0(t,e){const n=Eo(t.firestore,Fl),i=nf(t),s=SO(t.converter,e);return c0(n,[hO(e0(t.firestore),"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,Ar.exists(!1))]).then((()=>i))}function u0(t,...e){var n,i,s;t=zt(t);let a={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||zb(e[l])||(a=e[l++]);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(zb(e[l])){const E=e[l];e[l]=(n=E.next)===null||n===void 0?void 0:n.bind(E),e[l+1]=(i=E.error)===null||i===void 0?void 0:i.bind(E),e[l+2]=(s=E.complete)===null||s===void 0?void 0:s.bind(E)}let d,h,g;if(t instanceof vn)h=Eo(t.firestore,Fl),g=kv(t._key.path),d={next:E=>{e[l]&&e[l](wO(h,t,E))},error:e[l+1],complete:e[l+2]};else{const E=Eo(t,Jl);h=Eo(E.firestore,Fl),g=E._query;const T=new kx(h);d={next:w=>{e[l]&&e[l](new Il(h,T,E,w))},error:e[l+1],complete:e[l+2]},_O(t._query)}return(function(T,w,N,P){const V=new iO(P),z=new UV(w,V,N);return T.asyncQueue.enqueueAndForget((async()=>PV(await Lb(T),z))),()=>{V.Ou(),T.asyncQueue.enqueueAndForget((async()=>LV(await Lb(T),z)))}})(Ax(h),g,c,d)}function c0(t,e){return(function(i,s){const a=new fa;return i.asyncQueue.enqueueAndForget((async()=>JV(await oO(i),s,a))),a.promise})(Ax(t),e)}function wO(t,e,n){const i=n.docs.get(e._key),s=new kx(t);return new da(t,s,e._key,i,new ac(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Gl=s})(Aa),So(new ys("firestore",((i,{instanceIdentifier:s,options:a})=>{const l=i.getProvider("app").getImmediate(),c=new Fl(new pP(i.getProvider("auth-internal")),new yP(l,i.getProvider("app-check-internal")),(function(h,g){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ee(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vc(h.options.projectId,g)})(l,s),l);return a=Object.assign({useFetchStreams:n},a),c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),ar(GS,jS,e),ar(GS,jS,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px="firebasestorage.googleapis.com",Lx="storageBucket",CO=120*1e3,IO=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn extends Gr{constructor(e,n,i=0){super(Zg(e),`Firebase Storage: ${n} (${Zg(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,tn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Zg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var en;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(en||(en={}));function Zg(t){return"storage/"+t}function f0(){const t="An unknown error occurred, please check the error payload for server response.";return new tn(en.UNKNOWN,t)}function xO(t){return new tn(en.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function RO(t){return new tn(en.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function NO(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new tn(en.UNAUTHENTICATED,t)}function DO(){return new tn(en.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function MO(t){return new tn(en.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function kO(){return new tn(en.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function PO(){return new tn(en.CANCELED,"User canceled the upload/download.")}function LO(t){return new tn(en.INVALID_URL,"Invalid URL '"+t+"'.")}function VO(t){return new tn(en.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function OO(){return new tn(en.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Lx+"' property when initializing the app?")}function UO(){return new tn(en.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function FO(){return new tn(en.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function qO(t){return new tn(en.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Oy(t){return new tn(en.INVALID_ARGUMENT,t)}function Vx(){return new tn(en.APP_DELETED,"The Firebase app was deleted.")}function BO(t){return new tn(en.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function _c(t,e){return new tn(en.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Yu(t){throw new tn(en.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=qi.makeFromUrl(e,n)}catch{return new qi(e,"")}if(i.path==="")return i;throw VO(e)}static makeFromUrl(e,n){let i=null;const s="([A-Za-z0-9.\\-_]+)";function a(K){K.path.charAt(K.path.length-1)==="/"&&(K.path_=K.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+s+l,"i"),d={bucket:1,path:3};function h(K){K.path_=decodeURIComponent(K.path)}const g="v[A-Za-z0-9_]+",E=n.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",w=new RegExp(`^https?://${E}/${g}/b/${s}/o${T}`,"i"),N={bucket:1,path:3},P=n===Px?"(?:storage.googleapis.com|storage.cloud.google.com)":n,V="([^?#]*)",z=new RegExp(`^https?://${P}/${s}/${V}`,"i"),q=[{regex:c,indices:d,postModify:a},{regex:w,indices:N,postModify:h},{regex:z,indices:{bucket:1,path:2},postModify:h}];for(let K=0;K<q.length;K++){const X=q[K],G=X.regex.exec(e);if(G){const I=G[X.indices.bucket];let x=G[X.indices.path];x||(x=""),i=new qi(I,x),X.postModify(i);break}}if(i==null)throw LO(e);return i}}class zO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(t,e,n){let i=1,s=null,a=null,l=!1,c=0;function d(){return c===2}let h=!1;function g(...V){h||(h=!0,e.apply(null,V))}function E(V){s=setTimeout(()=>{s=null,t(w,d())},V)}function T(){a&&clearTimeout(a)}function w(V,...z){if(h){T();return}if(V){T(),g.call(null,V,...z);return}if(d()||l){T(),g.call(null,V,...z);return}i<64&&(i*=2);let q;c===1?(c=2,q=0):q=(i+Math.random())*1e3,E(q)}let N=!1;function P(V){N||(N=!0,T(),!h&&(s!==null?(V||(c=2),clearTimeout(s),E(0)):V||(c=1)))}return E(0),a=setTimeout(()=>{l=!0,P(!0)},n),P}function GO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jO(t){return t!==void 0}function $O(t){return typeof t=="object"&&!Array.isArray(t)}function d0(t){return typeof t=="string"||t instanceof String}function jb(t){return h0()&&t instanceof Blob}function h0(){return typeof Blob<"u"}function $b(t,e,n,i){if(i<e)throw Oy(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Oy(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function Ox(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const s=e(i)+"="+e(t[i]);n=n+s+"&"}return n=n.slice(0,-1),n}var ha;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ha||(ha={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e,n,i,s,a,l,c,d,h,g,E,T=!0,w=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=g,this.connectionFactory_=E,this.retry=T,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,P)=>{this.resolve_=N,this.reject_=P,this.start_()})}start_(){const e=(i,s)=>{if(s){i(!1,new Ld(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const l=c=>{const d=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const c=a.getErrorCode()===ha.NO_ERROR,d=a.getStatus();if(!c||KO(d,this.additionalRetryCodes_)&&this.retry){const g=a.getErrorCode()===ha.ABORT;i(!1,new Ld(!1,null,g));return}const h=this.successCodes_.indexOf(d)!==-1;i(!0,new Ld(h,a))})},n=(i,s)=>{const a=this.resolve_,l=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());jO(d)?a(d):a()}catch(d){l(d)}else if(c!==null){const d=f0();d.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,d)):l(d)}else if(s.canceled){const d=this.appDelete_?Vx():PO();l(d)}else{const d=kO();l(d)}};this.canceled_?n(!1,new Ld(!1,null,!0)):this.backoffId_=HO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&GO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ld{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function YO(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function WO(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function QO(t,e){e&&(t["X-Firebase-GMPID"]=e)}function XO(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function ZO(t,e,n,i,s,a,l=!0,c=!1){const d=Ox(t.urlParams),h=t.url+d,g=Object.assign({},t.headers);return QO(g,e),YO(g,n),WO(g,a),XO(g,i),new JO(h,t.method,g,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,l,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function t4(...t){const e=e4();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(h0())return new Blob(t);throw new tn(en.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function n4(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(t){if(typeof atob>"u")throw qO("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ey{constructor(e,n){this.data=e,this.contentType=n||null}}function Ux(t,e){switch(t){case Tr.RAW:return new ey(Fx(e));case Tr.BASE64:case Tr.BASE64URL:return new ey(qx(t,e));case Tr.DATA_URL:return new ey(s4(e),o4(e))}throw f0()}function Fx(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=i,l=t.charCodeAt(++n);i=65536|(a&1023)<<10|l&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function r4(t){let e;try{e=decodeURIComponent(t)}catch{throw _c(Tr.DATA_URL,"Malformed data URL.")}return Fx(e)}function qx(t,e){switch(t){case Tr.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw _c(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Tr.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw _c(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=i4(e)}catch(s){throw s.message.includes("polyfill")?s:_c(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}class Bx{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw _c(Tr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=a4(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function s4(t){const e=new Bx(t);return e.base64?qx(Tr.BASE64,e.rest):r4(e.rest)}function o4(t){return new Bx(t).contentType}function a4(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n){let i=0,s="";jb(e)?(this.data_=e,i=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(jb(this.data_)){const i=this.data_,s=n4(i,e,n);return s===null?null:new co(s)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new co(i,!0)}}static getBlob(...e){if(h0()){const n=e.map(i=>i instanceof co?i.data_:i);return new co(t4.apply(null,n))}else{const n=e.map(l=>d0(l)?Ux(Tr.RAW,l).data:l.data_);let i=0;n.forEach(l=>{i+=l.byteLength});const s=new Uint8Array(i);let a=0;return n.forEach(l=>{for(let c=0;c<l.length;c++)s[a++]=l[c]}),new co(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(t){let e;try{e=JSON.parse(t)}catch{return null}return $O(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l4(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function u4(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function Hx(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c4(t,e){return e}class di{constructor(e,n,i,s){this.server=e,this.local=n||e,this.writable=!!i,this.xform=s||c4}}let Vd=null;function f4(t){return!d0(t)||t.length<2?t:Hx(t)}function Gx(){if(Vd)return Vd;const t=[];t.push(new di("bucket")),t.push(new di("generation")),t.push(new di("metageneration")),t.push(new di("name","fullPath",!0));function e(a,l){return f4(l)}const n=new di("name");n.xform=e,t.push(n);function i(a,l){return l!==void 0?Number(l):l}const s=new di("size");return s.xform=i,t.push(s),t.push(new di("timeCreated")),t.push(new di("updated")),t.push(new di("md5Hash",null,!0)),t.push(new di("cacheControl",null,!0)),t.push(new di("contentDisposition",null,!0)),t.push(new di("contentEncoding",null,!0)),t.push(new di("contentLanguage",null,!0)),t.push(new di("contentType",null,!0)),t.push(new di("metadata","customMetadata",!0)),Vd=t,Vd}function d4(t,e){function n(){const i=t.bucket,s=t.fullPath,a=new qi(i,s);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function h4(t,e,n){const i={};i.type="file";const s=n.length;for(let a=0;a<s;a++){const l=n[a];i[l.local]=l.xform(i,e[l.server])}return d4(i,t),i}function jx(t,e,n){const i=zx(e);return i===null?null:h4(t,i,n)}function p4(t,e,n,i){const s=zx(e);if(s===null||!d0(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const l=encodeURIComponent;return a.split(",").map(h=>{const g=t.bucket,E=t.fullPath,T="/b/"+l(g)+"/o/"+l(E),w=p0(T,n,i),N=Ox({alt:"media",token:h});return w+N})[0]}function m4(t,e){const n={},i=e.length;for(let s=0;s<i;s++){const a=e[s];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class $x{constructor(e,n,i,s){this.url=e,this.method=n,this.handler=i,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(t){if(!t)throw f0()}function g4(t,e){function n(i,s){const a=jx(t,s,e);return Kx(a!==null),a}return n}function y4(t,e){function n(i,s){const a=jx(t,s,e);return Kx(a!==null),p4(a,s,t.host,t._protocol)}return n}function Jx(t){function e(n,i){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=DO():s=NO():n.getStatus()===402?s=RO(t.bucket):n.getStatus()===403?s=MO(t.path):s=i,s.status=n.getStatus(),s.serverResponse=i.serverResponse,s}return e}function v4(t){const e=Jx(t);function n(i,s){let a=e(i,s);return i.getStatus()===404&&(a=xO(t.path)),a.serverResponse=s.serverResponse,a}return n}function _4(t,e,n){const i=e.fullServerUrl(),s=p0(i,t.host,t._protocol),a="GET",l=t.maxOperationRetryTime,c=new $x(s,a,y4(t,n),l);return c.errorHandler=v4(e),c}function E4(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function T4(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=E4(null,e)),i}function S4(t,e,n,i,s){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let q="";for(let K=0;K<2;K++)q=q+Math.random().toString().slice(2);return q}const d=c();l["Content-Type"]="multipart/related; boundary="+d;const h=T4(e,i,s),g=m4(h,n),E="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+d+`\r
Content-Type: `+h.contentType+`\r
\r
`,T=`\r
--`+d+"--",w=co.getBlob(E,i,T);if(w===null)throw UO();const N={name:h.fullPath},P=p0(a,t.host,t._protocol),V="POST",z=t.maxUploadRetryTime,F=new $x(P,V,g4(t,n),z);return F.urlParams=N,F.headers=l,F.body=w.uploadData(),F.errorHandler=Jx(e),F}class b4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ha.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ha.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ha.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,s,a){if(this.sent_)throw Yu("cannot .send() more than once");if(bs(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const l in a)a.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,a[l].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Yu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Yu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Yu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Yu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class A4 extends b4{initXhr(){this.xhr_.responseType="text"}}function Yx(){return new A4}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,n){this._service=e,n instanceof qi?this._location=n:this._location=qi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Sa(e,n)}get root(){const e=new qi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Hx(this._location.path)}get storage(){return this._service}get parent(){const e=l4(this._location.path);if(e===null)return null;const n=new qi(this._location.bucket,e);return new Sa(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw BO(e)}}function w4(t,e,n){t._throwIfRoot("uploadBytes");const i=S4(t.storage,t._location,Gx(),new co(e,!0),n);return t.storage.makeRequestWithTokens(i,Yx).then(s=>({metadata:s,ref:t}))}function C4(t,e,n=Tr.RAW,i){t._throwIfRoot("uploadString");const s=Ux(n,e),a=Object.assign({},i);return a.contentType==null&&s.contentType!=null&&(a.contentType=s.contentType),w4(t,s.data,a)}function I4(t){t._throwIfRoot("getDownloadURL");const e=_4(t.storage,t._location,Gx());return t.storage.makeRequestWithTokens(e,Yx).then(n=>{if(n===null)throw FO();return n})}function x4(t,e){const n=u4(t._location.path,e),i=new qi(t._location.bucket,n);return new Sa(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R4(t){return/^[A-Za-z]+:\/\//.test(t)}function N4(t,e){return new Sa(t,e)}function Wx(t,e){if(t instanceof m0){const n=t;if(n._bucket==null)throw OO();const i=new Sa(n,n._bucket);return e!=null?Wx(i,e):i}else return e!==void 0?x4(t,e):t}function D4(t,e){if(e&&R4(e)){if(t instanceof m0)return N4(t,e);throw Oy("To use ref(service, url), the first argument must be a Storage instance.")}else return Wx(t,e)}function Kb(t,e){const n=e==null?void 0:e[Lx];return n==null?null:qi.makeFromBucketSpec(n,t)}function M4(t,e,n,i={}){t.host=`${e}:${n}`;const s=bs(e);s&&(ip(`https://${t.host}/b`),rp("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:a}=i;a&&(t._overrideAuthToken=typeof a=="string"?a:EC(a,t.app.options.projectId))}class m0{constructor(e,n,i,s,a,l=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=l,this._bucket=null,this._host=Px,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=CO,this._maxUploadRetryTime=IO,this._requests=new Set,s!=null?this._bucket=qi.makeFromBucketSpec(s,this._host):this._bucket=Kb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qi.makeFromBucketSpec(this._url,e):this._bucket=Kb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){$b("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){$b("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(hi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Sa(this,e)}_makeRequest(e,n,i,s,a=!0){if(this._deleted)return new zO(Vx());{const l=ZO(e,this._appId,i,s,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,s).getPromise()}}const Jb="@firebase/storage",Yb="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx="storage";function k4(t,e,n,i){return t=zt(t),C4(t,e,n,i)}function P4(t){return t=zt(t),I4(t)}function L4(t,e){return t=zt(t),D4(t,e)}function V4(t=sp(),e){t=zt(t);const i=jc(t,Qx).getImmediate({identifier:e}),s=dv("storage");return s&&O4(i,...s),i}function O4(t,e,n,i={}){M4(t,e,n,i)}function U4(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new m0(n,i,s,e,Aa)}function F4(){So(new ys(Qx,U4,"PUBLIC").setMultipleInstances(!0)),ar(Jb,Yb,""),ar(Jb,Yb,"esm2017")}F4();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(e,n,i,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,hi(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||n.get().then(a=>this.auth=a,()=>{}),this.messaging||i.get().then(a=>this.messaging=a,()=>{}),this.appCheck||s==null||s.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),i=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:i,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy="us-central1";class B4{constructor(e,n,i,s,a=Uy,l=(...c)=>fetch(...c)){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new q4(e,n,i,s),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(a);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=Uy}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function z4(t,e,n){const i=bs(e);t.emulatorOrigin=`http${i?"s":""}://${e}:${n}`,i&&(ip(t.emulatorOrigin),rp("Functions",!0))}const Wb="@firebase/functions",Qb="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4="auth-internal",G4="app-check-internal",j4="messaging-internal";function $4(t){const e=(n,{instanceIdentifier:i})=>{const s=n.getProvider("app").getImmediate(),a=n.getProvider(H4),l=n.getProvider(j4),c=n.getProvider(G4);return new B4(s,a,l,c,i)};So(new ys(Xx,e,"PUBLIC").setMultipleInstances(!0)),ar(Wb,Qb,t),ar(Wb,Qb,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K4(t=sp(),e=Uy){const i=jc(zt(t),Xx).getImmediate({identifier:e}),s=dv("functions");return s&&J4(i,...s),i}function J4(t,e,n){z4(zt(t),e,n)}$4();const Y4={apiKey:"AIzaSyAoMQ8oVPP5oFjw8YzgF0H1Dy4DAJmNaKM",authDomain:"dresscode-ai-32c50.firebaseapp.com",projectId:"dresscode-ai-32c50",storageBucket:"dresscode-ai-32c50.firebasestorage.app",messagingSenderId:"215593114437",appId:"1:215593114437:web:5d9c1f3161182802f37c2c"},Ap=bC(Y4),lc=lP(Ap),W4=new hs,jr=lO(Ap),Q4=V4(Ap);K4(Ap);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let X4,Z4;function eU(){return{geminiUrl:X4,vertexUrl:Z4}}function tU(t,e,n,i){var s,a;if(!(t!=null&&t.baseUrl)){const l=eU();return e?(s=l.vertexUrl)!==null&&s!==void 0?s:n:(a=l.geminiUrl)!==null&&a!==void 0?a:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class As{}function ye(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const a=e[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function y(t,e,n){for(let a=0;a<e.length-1;a++){const l=e[a];if(l.endsWith("[]")){const c=l.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(t[c])){const d=t[c];if(Array.isArray(n))for(let h=0;h<d.length;h++){const g=d[h];y(g,e.slice(a+1),n[h])}else for(const h of d)y(h,e.slice(a+1),n)}return}else if(l.endsWith("[0]")){const c=l.slice(0,-3);c in t||(t[c]=[{}]);const d=t[c];y(d[0],e.slice(a+1),n);return}(!t[l]||typeof t[l]!="object")&&(t[l]={}),t=t[l]}const i=e[e.length-1],s=t[i];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function p(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const s=e[i];if(s.endsWith("[]")){const a=s.slice(0,-2);if(a in t){const l=t[a];return Array.isArray(l)?l.map(c=>p(c,e.slice(i+1),n)):n}else return n}else t=t[s]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function nU(t,e){for(const[n,i]of Object.entries(e)){const s=n.split("."),a=i.split("."),l=new Set;let c=-1;for(let d=0;d<s.length;d++)if(s[d]==="*"){c=d;break}if(c!==-1&&a.length>c)for(let d=c;d<a.length;d++){const h=a[d];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&l.add(h)}Fy(t,s,a,0,l)}}function Fy(t,e,n,i,s){if(i>=e.length||typeof t!="object"||t===null)return;const a=e[i];if(a.endsWith("[]")){const l=a.slice(0,-2),c=t;if(l in c&&Array.isArray(c[l]))for(const d of c[l])Fy(d,e,n,i+1,s)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const l=t,c=Object.keys(l).filter(h=>!h.startsWith("_")&&!s.has(h)),d={};for(const h of c)d[h]=l[h];for(const[h,g]of Object.entries(d)){const E=[];for(const T of n.slice(i))T==="*"?E.push(h):E.push(T);y(l,E,g)}for(const h of c)delete l[h]}}else{const l=t;a in l&&Fy(l[a],e,n,i+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function g0(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iU(t){const e={},n=p(t,["operationName"]);n!=null&&y(e,["operationName"],n);const i=p(t,["resourceName"]);return i!=null&&y(e,["_url","resourceName"],i),e}function rU(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["metadata"]);i!=null&&y(e,["metadata"],i);const s=p(t,["done"]);s!=null&&y(e,["done"],s);const a=p(t,["error"]);a!=null&&y(e,["error"],a);const l=p(t,["response","generateVideoResponse"]);return l!=null&&y(e,["response"],oU(l)),e}function sU(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["metadata"]);i!=null&&y(e,["metadata"],i);const s=p(t,["done"]);s!=null&&y(e,["done"],s);const a=p(t,["error"]);a!=null&&y(e,["error"],a);const l=p(t,["response"]);return l!=null&&y(e,["response"],aU(l)),e}function oU(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>lU(l))),y(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const s=p(t,["raiMediaFilteredReasons"]);return s!=null&&y(e,["raiMediaFilteredReasons"],s),e}function aU(t){const e={},n=p(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>uU(l))),y(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const s=p(t,["raiMediaFilteredReasons"]);return s!=null&&y(e,["raiMediaFilteredReasons"],s),e}function lU(t){const e={},n=p(t,["video"]);return n!=null&&y(e,["video"],mU(n)),e}function uU(t){const e={},n=p(t,["_self"]);return n!=null&&y(e,["video"],gU(n)),e}function cU(t){const e={},n=p(t,["operationName"]);return n!=null&&y(e,["_url","operationName"],n),e}function fU(t){const e={},n=p(t,["operationName"]);return n!=null&&y(e,["_url","operationName"],n),e}function dU(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["metadata"]);i!=null&&y(e,["metadata"],i);const s=p(t,["done"]);s!=null&&y(e,["done"],s);const a=p(t,["error"]);a!=null&&y(e,["error"],a);const l=p(t,["response"]);return l!=null&&y(e,["response"],hU(l)),e}function hU(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&y(e,["parent"],i);const s=p(t,["documentName"]);return s!=null&&y(e,["documentName"],s),e}function Zx(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["metadata"]);i!=null&&y(e,["metadata"],i);const s=p(t,["done"]);s!=null&&y(e,["done"],s);const a=p(t,["error"]);a!=null&&y(e,["error"],a);const l=p(t,["response"]);return l!=null&&y(e,["response"],pU(l)),e}function pU(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&y(e,["parent"],i);const s=p(t,["documentName"]);return s!=null&&y(e,["documentName"],s),e}function mU(t){const e={},n=p(t,["uri"]);n!=null&&y(e,["uri"],n);const i=p(t,["encodedVideo"]);i!=null&&y(e,["videoBytes"],g0(i));const s=p(t,["encoding"]);return s!=null&&y(e,["mimeType"],s),e}function gU(t){const e={},n=p(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&y(e,["videoBytes"],g0(i));const s=p(t,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Xb;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Xb||(Xb={}));var Zb;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Zb||(Zb={}));var eA;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(eA||(eA={}));var qe;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(qe||(qe={}));var tA;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(tA||(tA={}));var nA;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(nA||(nA={}));var iA;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(iA||(iA={}));var rA;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(rA||(rA={}));var sA;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(sA||(sA={}));var oA;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(oA||(oA={}));var aA;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(aA||(aA={}));var lA;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(lA||(lA={}));var uA;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(uA||(uA={}));var cA;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(cA||(cA={}));var fA;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(fA||(fA={}));var dA;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(dA||(dA={}));var hA;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(hA||(hA={}));var pA;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(pA||(pA={}));var Fh;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Fh||(Fh={}));var mA;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(mA||(mA={}));var gA;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(gA||(gA={}));var yA;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(yA||(yA={}));var qy;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(qy||(qy={}));var vA;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(vA||(vA={}));var _A;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(_A||(_A={}));var EA;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(EA||(EA={}));var TA;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(TA||(TA={}));var SA;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(SA||(SA={}));var bA;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(bA||(bA={}));var AA;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(AA||(AA={}));var wA;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(wA||(wA={}));var CA;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(CA||(CA={}));var IA;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(IA||(IA={}));var xA;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(xA||(xA={}));var RA;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(RA||(RA={}));var NA;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(NA||(NA={}));var DA;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(DA||(DA={}));var MA;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(MA||(MA={}));var kA;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(kA||(kA={}));var PA;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(PA||(PA={}));var LA;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(LA||(LA={}));var VA;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(VA||(VA={}));var OA;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(OA||(OA={}));var UA;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(UA||(UA={}));var FA;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(FA||(FA={}));var qA;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(qA||(qA={}));var BA;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(BA||(BA={}));var zA;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(zA||(zA={}));var HA;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(HA||(HA={}));var GA;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(GA||(GA={}));var jA;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(jA||(jA={}));var $A;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})($A||($A={}));var Tl;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Tl||(Tl={}));class By{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Wu{get text(){var e,n,i,s,a,l,c,d;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",g=!1;const E=[];for(const T of(d=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[w,N]of Object.entries(T))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(N!==null||N!==void 0)&&E.push(w);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;g=!0,h+=T.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),g?h:void 0}get data(){var e,n,i,s,a,l,c,d;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const g=[];for(const E of(d=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[T,w]of Object.entries(E))T!=="inlineData"&&(w!==null||w!==void 0)&&g.push(T);E.inlineData&&typeof E.inlineData.data=="string"&&(h+=atob(E.inlineData.data))}return g.length>0&&console.warn(`there are non-data parts ${g} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,n,i,s,a,l,c,d;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(d=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(g=>g.functionCall).map(g=>g.functionCall).filter(g=>g!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,n,i,s,a,l,c,d,h;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const g=(d=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((g==null?void 0:g.length)!==0)return(h=g==null?void 0:g[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,n,i,s,a,l,c,d,h;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const g=(d=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((g==null?void 0:g.length)!==0)return(h=g==null?void 0:g[0])===null||h===void 0?void 0:h.output}}class KA{}class JA{}class yU{}class vU{}class _U{}class EU{}class YA{}class WA{}class QA{}class TU{}class qh{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new qh;let s;const a=e;return n?s=sU(a):s=rU(a),Object.assign(i,s),i}}class XA{}class ZA{}class ew{}class SU{}class bU{}class AU{}class y0{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new y0,a=dU(e);return Object.assign(i,a),i}}class wU{}class CU{}class IU{}class tw{}class xU{get text(){var e,n,i;let s="",a=!1;const l=[];for(const c of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[d,h]of Object.entries(c))d!=="text"&&d!=="thought"&&h!==null&&l.push(d);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;a=!0,s+=c.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var e,n,i;let s="";const a=[];for(const l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,d]of Object.entries(l))c!=="inlineData"&&d!==null&&a.push(c);l.inlineData&&typeof l.inlineData.data=="string"&&(s+=atob(l.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class RU{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class v0{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new v0,a=Zx(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function eR(t,e){const n=gt(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function tR(t){return Array.isArray(t)?t.map(e=>Bh(e)):[Bh(t)]}function Bh(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function nR(t){const e=Bh(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function iR(t){const e=Bh(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function nw(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function rR(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>nw(e)):[nw(t)]}function zy(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function iw(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function rw(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function ei(t){if(t==null)throw new Error("ContentUnion is required");return zy(t)?t:{role:"user",parts:rR(t)}}function _0(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=ei(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=ei(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>ei(n)):[ei(e)]}function lr(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(iw(t)||rw(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ei(t)]}const e=[],n=[],i=zy(t[0]);for(const s of t){const a=zy(s);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(s);else{if(iw(s)||rw(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return i||e.push({role:"user",parts:rR(n)}),e}function NU(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(qe).includes(n[0].toUpperCase())?n[0].toUpperCase():qe.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(qe).includes(i.toUpperCase())?i.toUpperCase():qe.TYPE_UNSPECIFIED})}}function xl(t){const e={},n=["items"],i=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&NU(t.type,e);for(const[l,c]of Object.entries(t))if(c!=null)if(l=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(qe).includes(c.toUpperCase())?c.toUpperCase():qe.TYPE_UNSPECIFIED}else if(n.includes(l))e[l]=xl(c);else if(i.includes(l)){const d=[];for(const h of c){if(h.type=="null"){e.nullable=!0;continue}d.push(xl(h))}e[l]=d}else if(s.includes(l)){const d={};for(const[h,g]of Object.entries(c))d[h]=xl(g);e[l]=d}else{if(l==="additionalProperties")continue;e[l]=c}return e}function E0(t){return xl(t)}function T0(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function S0(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Wl(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=xl(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=xl(e.response));return t}function Ql(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function DU(t,e,n,i=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function ws(t,e){if(typeof e!="string")throw new Error("name must be a string");return DU(t,e,"cachedContents")}function sR(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Lo(t){return g0(t)}function MU(t){return t!=null&&typeof t=="object"&&"name"in t}function kU(t){return t!=null&&typeof t=="object"&&"video"in t}function PU(t){return t!=null&&typeof t=="object"&&"uri"in t}function oR(t){var e;let n;if(MU(t)&&(n=t.name),!(PU(t)&&(n=t.uri,n===void 0))&&!(kU(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function aR(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function lR(t){for(const e of["models","tunedModels","publisherModels"])if(LU(t,e))return t[e];return[]}function LU(t,e){return t!==null&&typeof t=="object"&&e in t}function VU(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function OU(t,e={}){const n=[],i=new Set;for(const s of t){const a=s.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const l=VU(s,e);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function uR(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function UU(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function cR(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let a=!1;for(const l of s){if(typeof l!="object"||l===null)continue;const d=l.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Xl(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function fR(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FU(t){const e={},n=p(t,["responsesFile"]);n!=null&&y(e,["fileName"],n);const i=p(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>g3(l))),y(e,["inlinedResponses"],a)}const s=p(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),y(e,["inlinedEmbedContentResponses"],a)}return e}function qU(t){const e={},n=p(t,["predictionsFormat"]);n!=null&&y(e,["format"],n);const i=p(t,["gcsDestination","outputUriPrefix"]);i!=null&&y(e,["gcsUri"],i);const s=p(t,["bigqueryDestination","outputUri"]);return s!=null&&y(e,["bigqueryUri"],s),e}function BU(t){const e={},n=p(t,["format"]);n!=null&&y(e,["predictionsFormat"],n);const i=p(t,["gcsUri"]);i!=null&&y(e,["gcsDestination","outputUriPrefix"],i);const s=p(t,["bigqueryUri"]);if(s!=null&&y(e,["bigqueryDestination","outputUri"],s),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(p(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ch(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["metadata","displayName"]);i!=null&&y(e,["displayName"],i);const s=p(t,["metadata","state"]);s!=null&&y(e,["state"],fR(s));const a=p(t,["metadata","createTime"]);a!=null&&y(e,["createTime"],a);const l=p(t,["metadata","endTime"]);l!=null&&y(e,["endTime"],l);const c=p(t,["metadata","updateTime"]);c!=null&&y(e,["updateTime"],c);const d=p(t,["metadata","model"]);d!=null&&y(e,["model"],d);const h=p(t,["metadata","output"]);return h!=null&&y(e,["dest"],FU(cR(h))),e}function Hy(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["displayName"]);i!=null&&y(e,["displayName"],i);const s=p(t,["state"]);s!=null&&y(e,["state"],fR(s));const a=p(t,["error"]);a!=null&&y(e,["error"],a);const l=p(t,["createTime"]);l!=null&&y(e,["createTime"],l);const c=p(t,["startTime"]);c!=null&&y(e,["startTime"],c);const d=p(t,["endTime"]);d!=null&&y(e,["endTime"],d);const h=p(t,["updateTime"]);h!=null&&y(e,["updateTime"],h);const g=p(t,["model"]);g!=null&&y(e,["model"],g);const E=p(t,["inputConfig"]);E!=null&&y(e,["src"],zU(E));const T=p(t,["outputConfig"]);T!=null&&y(e,["dest"],qU(cR(T)));const w=p(t,["completionStats"]);return w!=null&&y(e,["completionStats"],w),e}function zU(t){const e={},n=p(t,["instancesFormat"]);n!=null&&y(e,["format"],n);const i=p(t,["gcsSource","uris"]);i!=null&&y(e,["gcsUri"],i);const s=p(t,["bigquerySource","inputUri"]);return s!=null&&y(e,["bigqueryUri"],s),e}function HU(t,e){const n={};if(p(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=p(e,["fileName"]);i!=null&&y(n,["fileName"],i);const s=p(e,["inlinedRequests"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>m3(t,l))),y(n,["requests","requests"],a)}return n}function GU(t){const e={},n=p(t,["format"]);n!=null&&y(e,["instancesFormat"],n);const i=p(t,["gcsUri"]);i!=null&&y(e,["gcsSource","uris"],i);const s=p(t,["bigqueryUri"]);if(s!=null&&y(e,["bigquerySource","inputUri"],s),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function jU(t){const e={},n=p(t,["data"]);if(n!=null&&y(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function $U(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],Xl(t,i)),n}function KU(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],Xl(t,i)),n}function JU(t){const e={},n=p(t,["content"]);n!=null&&y(e,["content"],n);const i=p(t,["citationMetadata"]);i!=null&&y(e,["citationMetadata"],YU(i));const s=p(t,["tokenCount"]);s!=null&&y(e,["tokenCount"],s);const a=p(t,["finishReason"]);a!=null&&y(e,["finishReason"],a);const l=p(t,["avgLogprobs"]);l!=null&&y(e,["avgLogprobs"],l);const c=p(t,["groundingMetadata"]);c!=null&&y(e,["groundingMetadata"],c);const d=p(t,["index"]);d!=null&&y(e,["index"],d);const h=p(t,["logprobsResult"]);h!=null&&y(e,["logprobsResult"],h);const g=p(t,["safetyRatings"]);if(g!=null){let T=g;Array.isArray(T)&&(T=T.map(w=>w)),y(e,["safetyRatings"],T)}const E=p(t,["urlContextMetadata"]);return E!=null&&y(e,["urlContextMetadata"],E),e}function YU(t){const e={},n=p(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),y(e,["citations"],i)}return e}function dR(t){const e={},n=p(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>b3(a))),y(e,["parts"],s)}const i=p(t,["role"]);return i!=null&&y(e,["role"],i),e}function WU(t,e){const n={},i=p(t,["displayName"]);if(e!==void 0&&i!=null&&y(e,["batch","displayName"],i),p(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function QU(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const s=p(t,["dest"]);return e!==void 0&&s!=null&&y(e,["outputConfig"],BU(UU(s))),n}function sw(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const s=p(e,["src"]);s!=null&&y(n,["batch","inputConfig"],HU(t,uR(t,s)));const a=p(e,["config"]);return a!=null&&WU(a,n),n}function XU(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["model"],gt(t,i));const s=p(e,["src"]);s!=null&&y(n,["inputConfig"],GU(uR(t,s)));const a=p(e,["config"]);return a!=null&&QU(a,n),n}function ZU(t,e){const n={},i=p(t,["displayName"]);return e!==void 0&&i!=null&&y(e,["batch","displayName"],i),n}function e3(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const s=p(e,["src"]);s!=null&&y(n,["batch","inputConfig"],a3(t,s));const a=p(e,["config"]);return a!=null&&ZU(a,n),n}function t3(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],Xl(t,i)),n}function n3(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],Xl(t,i)),n}function i3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["name"]);i!=null&&y(e,["name"],i);const s=p(t,["done"]);s!=null&&y(e,["done"],s);const a=p(t,["error"]);return a!=null&&y(e,["error"],a),e}function r3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["name"]);i!=null&&y(e,["name"],i);const s=p(t,["done"]);s!=null&&y(e,["done"],s);const a=p(t,["error"]);return a!=null&&y(e,["error"],a),e}function s3(t,e){const n={},i=p(e,["contents"]);if(i!=null){let a=_0(t,i);Array.isArray(a)&&(a=a.map(l=>l)),y(n,["requests[]","request","content"],a)}const s=p(e,["config"]);return s!=null&&(y(n,["_self"],o3(s,n)),nU(n,{"requests[].*":"requests[].request.*"})),n}function o3(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&y(e,["requests[]","taskType"],i);const s=p(t,["title"]);e!==void 0&&s!=null&&y(e,["requests[]","title"],s);const a=p(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&y(e,["requests[]","outputDimensionality"],a),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function a3(t,e){const n={},i=p(e,["fileName"]);i!=null&&y(n,["file_name"],i);const s=p(e,["inlinedRequests"]);return s!=null&&y(n,["requests"],s3(t,s)),n}function l3(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function u3(t,e,n){const i={},s=p(e,["systemInstruction"]);n!==void 0&&s!=null&&y(n,["systemInstruction"],dR(ei(s)));const a=p(e,["temperature"]);a!=null&&y(i,["temperature"],a);const l=p(e,["topP"]);l!=null&&y(i,["topP"],l);const c=p(e,["topK"]);c!=null&&y(i,["topK"],c);const d=p(e,["candidateCount"]);d!=null&&y(i,["candidateCount"],d);const h=p(e,["maxOutputTokens"]);h!=null&&y(i,["maxOutputTokens"],h);const g=p(e,["stopSequences"]);g!=null&&y(i,["stopSequences"],g);const E=p(e,["responseLogprobs"]);E!=null&&y(i,["responseLogprobs"],E);const T=p(e,["logprobs"]);T!=null&&y(i,["logprobs"],T);const w=p(e,["presencePenalty"]);w!=null&&y(i,["presencePenalty"],w);const N=p(e,["frequencyPenalty"]);N!=null&&y(i,["frequencyPenalty"],N);const P=p(e,["seed"]);P!=null&&y(i,["seed"],P);const V=p(e,["responseMimeType"]);V!=null&&y(i,["responseMimeType"],V);const z=p(e,["responseSchema"]);z!=null&&y(i,["responseSchema"],E0(z));const F=p(e,["responseJsonSchema"]);if(F!=null&&y(i,["responseJsonSchema"],F),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const q=p(e,["safetySettings"]);if(n!==void 0&&q!=null){let O=q;Array.isArray(O)&&(O=O.map(U=>A3(U))),y(n,["safetySettings"],O)}const K=p(e,["tools"]);if(n!==void 0&&K!=null){let O=Ql(K);Array.isArray(O)&&(O=O.map(U=>w3(Wl(U)))),y(n,["tools"],O)}const X=p(e,["toolConfig"]);if(n!==void 0&&X!=null&&y(n,["toolConfig"],X),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=p(e,["cachedContent"]);n!==void 0&&G!=null&&y(n,["cachedContent"],ws(t,G));const I=p(e,["responseModalities"]);I!=null&&y(i,["responseModalities"],I);const x=p(e,["mediaResolution"]);x!=null&&y(i,["mediaResolution"],x);const R=p(e,["speechConfig"]);if(R!=null&&y(i,["speechConfig"],T0(R)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=p(e,["thinkingConfig"]);L!=null&&y(i,["thinkingConfig"],L);const M=p(e,["imageConfig"]);return M!=null&&y(i,["imageConfig"],M),i}function c3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(h=>JU(h))),y(e,["candidates"],d)}const s=p(t,["modelVersion"]);s!=null&&y(e,["modelVersion"],s);const a=p(t,["promptFeedback"]);a!=null&&y(e,["promptFeedback"],a);const l=p(t,["responseId"]);l!=null&&y(e,["responseId"],l);const c=p(t,["usageMetadata"]);return c!=null&&y(e,["usageMetadata"],c),e}function f3(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],Xl(t,i)),n}function d3(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],Xl(t,i)),n}function h3(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function p3(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function m3(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["request","model"],gt(t,i));const s=p(e,["contents"]);if(s!=null){let c=lr(s);Array.isArray(c)&&(c=c.map(d=>dR(d))),y(n,["request","contents"],c)}const a=p(e,["metadata"]);a!=null&&y(n,["metadata"],a);const l=p(e,["config"]);return l!=null&&y(n,["request","generationConfig"],u3(t,l,p(n,["request"],{}))),n}function g3(t){const e={},n=p(t,["response"]);n!=null&&y(e,["response"],c3(n));const i=p(t,["error"]);return i!=null&&y(e,["error"],i),e}function y3(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);if(e!==void 0&&s!=null&&y(e,["_query","pageToken"],s),p(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function v3(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);e!==void 0&&s!=null&&y(e,["_query","pageToken"],s);const a=p(t,["filter"]);return e!==void 0&&a!=null&&y(e,["_query","filter"],a),n}function _3(t){const e={},n=p(t,["config"]);return n!=null&&y3(n,e),e}function E3(t){const e={},n=p(t,["config"]);return n!=null&&v3(n,e),e}function T3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const s=p(t,["operations"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>ch(l))),y(e,["batchJobs"],a)}return e}function S3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const s=p(t,["batchPredictionJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Hy(l))),y(e,["batchJobs"],a)}return e}function b3(t){const e={},n=p(t,["functionCall"]);n!=null&&y(e,["functionCall"],n);const i=p(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const s=p(t,["executableCode"]);s!=null&&y(e,["executableCode"],s);const a=p(t,["fileData"]);a!=null&&y(e,["fileData"],l3(a));const l=p(t,["functionResponse"]);l!=null&&y(e,["functionResponse"],l);const c=p(t,["inlineData"]);c!=null&&y(e,["inlineData"],jU(c));const d=p(t,["text"]);d!=null&&y(e,["text"],d);const h=p(t,["thought"]);h!=null&&y(e,["thought"],h);const g=p(t,["thoughtSignature"]);g!=null&&y(e,["thoughtSignature"],g);const E=p(t,["videoMetadata"]);return E!=null&&y(e,["videoMetadata"],E),e}function A3(t){const e={},n=p(t,["category"]);if(n!=null&&y(e,["category"],n),p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=p(t,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function w3(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(E=>E)),y(e,["functionDeclarations"],g)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const s=p(t,["computerUse"]);s!=null&&y(e,["computerUse"],s);const a=p(t,["fileSearch"]);a!=null&&y(e,["fileSearch"],a);const l=p(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],h3(c));const d=p(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],p3(d));const h=p(t,["urlContext"]);return h!=null&&y(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ss;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Ss||(Ss={}));class Ia{constructor(e,n,i,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,s)}init(e,n,i){var s,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!i||Object.keys(i).length===0?l={config:{}}:typeof i=="object"?l=Object.assign({},i):l=i,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(a=(s=l.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class C3 extends As{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new Ia(Ss.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=sw(this.apiClient,e),i=n._url,s=ye("{model}:batchGenerateContent",i),c=n.batch.inputConfig.requests,d=c.requests,h=[];for(const g of d){const E=Object.assign({},g);if(E.systemInstruction){const T=E.systemInstruction;delete E.systemInstruction;const w=E.request;w.systemInstruction=T,E.request=w}h.push(E)}return c.requests=h,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},s=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${s}`),i.dest===void 0){const a=this.getGcsUri(e),l=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${s}`;else if(l)i.dest=`${l}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=XU(this.apiClient,e);return c=ye("batchPredictionJobs",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>Hy(g))}else{const h=sw(this.apiClient,e);return c=ye("{model}:batchGenerateContent",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>ch(g))}}async createEmbeddingsInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=e3(this.apiClient,e);return a=ye("{model}:asyncBatchEmbedContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>ch(d))}}async get(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=d3(this.apiClient,e);return c=ye("batchPredictionJobs/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>Hy(g))}else{const h=f3(this.apiClient,e);return c=ye("batches/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>ch(g))}}async cancel(e){var n,i,s,a;let l="",c={};if(this.apiClient.isVertexAI()){const d=KU(this.apiClient,e);l=ye("batchPredictionJobs/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=$U(this.apiClient,e);l=ye("batches/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=E3(e);return c=ye("batchPredictionJobs",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=S3(g),T=new tw;return Object.assign(T,E),T})}else{const h=_3(e);return c=ye("batches",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=T3(g),T=new tw;return Object.assign(T,E),T})}}async delete(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=n3(this.apiClient,e);return c=ye("batchPredictionJobs/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>r3(g))}else{const h=t3(this.apiClient,e);return c=ye("batches/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>i3(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function I3(t){const e={},n=p(t,["data"]);if(n!=null&&y(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function ow(t){const e={},n=p(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>J3(a))),y(e,["parts"],s)}const i=p(t,["role"]);return i!=null&&y(e,["role"],i),e}function x3(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const s=p(t,["expireTime"]);e!==void 0&&s!=null&&y(e,["expireTime"],s);const a=p(t,["displayName"]);e!==void 0&&a!=null&&y(e,["displayName"],a);const l=p(t,["contents"]);if(e!==void 0&&l!=null){let g=lr(l);Array.isArray(g)&&(g=g.map(E=>ow(E))),y(e,["contents"],g)}const c=p(t,["systemInstruction"]);e!==void 0&&c!=null&&y(e,["systemInstruction"],ow(ei(c)));const d=p(t,["tools"]);if(e!==void 0&&d!=null){let g=d;Array.isArray(g)&&(g=g.map(E=>Y3(E))),y(e,["tools"],g)}const h=p(t,["toolConfig"]);if(e!==void 0&&h!=null&&y(e,["toolConfig"],h),p(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function R3(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const s=p(t,["expireTime"]);e!==void 0&&s!=null&&y(e,["expireTime"],s);const a=p(t,["displayName"]);e!==void 0&&a!=null&&y(e,["displayName"],a);const l=p(t,["contents"]);if(e!==void 0&&l!=null){let E=lr(l);Array.isArray(E)&&(E=E.map(T=>T)),y(e,["contents"],E)}const c=p(t,["systemInstruction"]);e!==void 0&&c!=null&&y(e,["systemInstruction"],ei(c));const d=p(t,["tools"]);if(e!==void 0&&d!=null){let E=d;Array.isArray(E)&&(E=E.map(T=>W3(T))),y(e,["tools"],E)}const h=p(t,["toolConfig"]);e!==void 0&&h!=null&&y(e,["toolConfig"],h);const g=p(t,["kmsKeyName"]);return e!==void 0&&g!=null&&y(e,["encryption_spec","kmsKeyName"],g),n}function N3(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["model"],eR(t,i));const s=p(e,["config"]);return s!=null&&x3(s,n),n}function D3(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["model"],eR(t,i));const s=p(e,["config"]);return s!=null&&R3(s,n),n}function M3(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],ws(t,i)),n}function k3(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],ws(t,i)),n}function P3(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function L3(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function V3(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function O3(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&y(e,["description"],n);const i=p(t,["name"]);i!=null&&y(e,["name"],i);const s=p(t,["parameters"]);s!=null&&y(e,["parameters"],s);const a=p(t,["parametersJsonSchema"]);a!=null&&y(e,["parametersJsonSchema"],a);const l=p(t,["response"]);l!=null&&y(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&y(e,["responseJsonSchema"],c),e}function U3(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],ws(t,i)),n}function F3(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],ws(t,i)),n}function q3(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function B3(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function z3(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);return e!==void 0&&s!=null&&y(e,["_query","pageToken"],s),n}function H3(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);return e!==void 0&&s!=null&&y(e,["_query","pageToken"],s),n}function G3(t){const e={},n=p(t,["config"]);return n!=null&&z3(n,e),e}function j3(t){const e={},n=p(t,["config"]);return n!=null&&H3(n,e),e}function $3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const s=p(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),y(e,["cachedContents"],a)}return e}function K3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const s=p(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),y(e,["cachedContents"],a)}return e}function J3(t){const e={},n=p(t,["functionCall"]);n!=null&&y(e,["functionCall"],n);const i=p(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const s=p(t,["executableCode"]);s!=null&&y(e,["executableCode"],s);const a=p(t,["fileData"]);a!=null&&y(e,["fileData"],V3(a));const l=p(t,["functionResponse"]);l!=null&&y(e,["functionResponse"],l);const c=p(t,["inlineData"]);c!=null&&y(e,["inlineData"],I3(c));const d=p(t,["text"]);d!=null&&y(e,["text"],d);const h=p(t,["thought"]);h!=null&&y(e,["thought"],h);const g=p(t,["thoughtSignature"]);g!=null&&y(e,["thoughtSignature"],g);const E=p(t,["videoMetadata"]);return E!=null&&y(e,["videoMetadata"],E),e}function Y3(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(E=>E)),y(e,["functionDeclarations"],g)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const s=p(t,["computerUse"]);s!=null&&y(e,["computerUse"],s);const a=p(t,["fileSearch"]);a!=null&&y(e,["fileSearch"],a);const l=p(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],q3(c));const d=p(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],B3(d));const h=p(t,["urlContext"]);return h!=null&&y(e,["urlContext"],h),e}function W3(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(T=>O3(T))),y(e,["functionDeclarations"],E)}const i=p(t,["retrieval"]);i!=null&&y(e,["retrieval"],i);const s=p(t,["googleSearchRetrieval"]);s!=null&&y(e,["googleSearchRetrieval"],s);const a=p(t,["computerUse"]);if(a!=null&&y(e,["computerUse"],a),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=p(t,["codeExecution"]);l!=null&&y(e,["codeExecution"],l);const c=p(t,["enterpriseWebSearch"]);c!=null&&y(e,["enterpriseWebSearch"],c);const d=p(t,["googleMaps"]);d!=null&&y(e,["googleMaps"],d);const h=p(t,["googleSearch"]);h!=null&&y(e,["googleSearch"],h);const g=p(t,["urlContext"]);return g!=null&&y(e,["urlContext"],g),e}function Q3(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const s=p(t,["expireTime"]);return e!==void 0&&s!=null&&y(e,["expireTime"],s),n}function X3(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const s=p(t,["expireTime"]);return e!==void 0&&s!=null&&y(e,["expireTime"],s),n}function Z3(t,e){const n={},i=p(e,["name"]);i!=null&&y(n,["_url","name"],ws(t,i));const s=p(e,["config"]);return s!=null&&Q3(s,n),n}function e6(t,e){const n={},i=p(e,["name"]);i!=null&&y(n,["_url","name"],ws(t,i));const s=p(e,["config"]);return s!=null&&X3(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class t6 extends As{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ia(Ss.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=D3(this.apiClient,e);return c=ye("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>g)}else{const h=N3(this.apiClient,e);return c=ye("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async get(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=F3(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>g)}else{const h=U3(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async delete(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=k3(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=L3(g),T=new ZA;return Object.assign(T,E),T})}else{const h=M3(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=P3(g),T=new ZA;return Object.assign(T,E),T})}}async update(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=e6(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>g)}else{const h=Z3(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async listInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=j3(e);return c=ye("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=K3(g),T=new ew;return Object.assign(T,E),T})}else{const h=G3(e);return c=ye("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=$3(g),T=new ew;return Object.assign(T,E),T})}}}function aw(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function qt(t){return this instanceof qt?(this.v=t,this):new qt(t)}function Rl(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),s[Symbol.asyncIterator]=function(){return this},s;function l(w){return function(N){return Promise.resolve(N).then(w,E)}}function c(w,N){i[w]&&(s[w]=function(P){return new Promise(function(V,z){a.push([w,P,V,z])>1||d(w,P)})},N&&(s[w]=N(s[w])))}function d(w,N){try{h(i[w](N))}catch(P){T(a[0][3],P)}}function h(w){w.value instanceof qt?Promise.resolve(w.value.v).then(g,E):T(a[0][2],w)}function g(w){d("next",w)}function E(w){d("throw",w)}function T(w,N){w(N),a.shift(),a.length&&d(a[0][0],a[0][1])}}function Ec(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof aw=="function"?aw(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(l){return new Promise(function(c,d){l=t[a](l),s(c,d,l.done,l.value)})}}function s(a,l,c,d){Promise.resolve(d).then(function(h){a({value:h,done:c})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function n6(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:hR(n)}function hR(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function i6(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function lw(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const s=[];let a=!0;for(;i<n&&t[i].role==="model";)s.push(t[i]),a&&!hR(t[i])&&(a=!1),i++;a?e.push(...s):e.pop()}return e}class r6{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new s6(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class s6{constructor(e,n,i,s={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),i6(a)}async sendMessage(e){var n;await this.sendPromise;const i=ei(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,l,c;const d=await s,h=(l=(a=d.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content,g=d.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let T=[];g!=null&&(T=(c=g.slice(E))!==null&&c!==void 0?c:[]);const w=h?[h]:[];this.recordHistory(i,w,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const i=ei(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,i)}getHistory(e=!1){const n=e?lw(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,s;return Rl(this,arguments,function*(){var l,c,d,h;const g=[];try{for(var E=!0,T=Ec(e),w;w=yield qt(T.next()),l=w.done,!l;E=!0){h=w.value,E=!1;const N=h;if(n6(N)){const P=(s=(i=N.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content;P!==void 0&&g.push(P)}yield yield qt(N)}}catch(N){c={error:N}}finally{try{!E&&!l&&(d=T.return)&&(yield qt(d.call(T)))}finally{if(c)throw c.error}}this.recordHistory(n,g)})}recordHistory(e,n,i){let s=[];n.length>0&&n.every(a=>a.role!==void 0)?s=n:s.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...lw(i)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wp extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,wp.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function o6(t){const e={},n=p(t,["file"]);return n!=null&&y(e,["file"],n),e}function a6(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function l6(t){const e={},n=p(t,["name"]);return n!=null&&y(e,["_url","file"],oR(n)),e}function u6(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function c6(t){const e={},n=p(t,["name"]);return n!=null&&y(e,["_url","file"],oR(n)),e}function f6(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);return e!==void 0&&s!=null&&y(e,["_query","pageToken"],s),n}function d6(t){const e={},n=p(t,["config"]);return n!=null&&f6(n,e),e}function h6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const s=p(t,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),y(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class p6 extends As{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ia(Ss.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=d6(e);return a=ye("files",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>{const h=h6(d),g=new wU;return Object.assign(g,h),g})}}async createInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=o6(e);return a=ye("upload/v1beta/files",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=a6(d),g=new CU;return Object.assign(g,h),g})}}async get(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=c6(e);return a=ye("files/{file}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=l6(e);return a=ye("files/{file}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>{const h=u6(d),g=new IU;return Object.assign(g,h),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fh(t){const e={},n=p(t,["data"]);if(n!=null&&y(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function m6(t){const e={},n=p(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>N6(a))),y(e,["parts"],s)}const i=p(t,["role"]);return i!=null&&y(e,["role"],i),e}function g6(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function y6(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&y(e,["description"],n);const i=p(t,["name"]);i!=null&&y(e,["name"],i);const s=p(t,["parameters"]);s!=null&&y(e,["parameters"],s);const a=p(t,["parametersJsonSchema"]);a!=null&&y(e,["parametersJsonSchema"],a);const l=p(t,["response"]);l!=null&&y(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&y(e,["responseJsonSchema"],c),e}function v6(t){const e={},n=p(t,["modelSelectionConfig"]);n!=null&&y(e,["modelConfig"],n);const i=p(t,["responseJsonSchema"]);i!=null&&y(e,["responseJsonSchema"],i);const s=p(t,["audioTimestamp"]);s!=null&&y(e,["audioTimestamp"],s);const a=p(t,["candidateCount"]);a!=null&&y(e,["candidateCount"],a);const l=p(t,["enableAffectiveDialog"]);l!=null&&y(e,["enableAffectiveDialog"],l);const c=p(t,["frequencyPenalty"]);c!=null&&y(e,["frequencyPenalty"],c);const d=p(t,["logprobs"]);d!=null&&y(e,["logprobs"],d);const h=p(t,["maxOutputTokens"]);h!=null&&y(e,["maxOutputTokens"],h);const g=p(t,["mediaResolution"]);g!=null&&y(e,["mediaResolution"],g);const E=p(t,["presencePenalty"]);E!=null&&y(e,["presencePenalty"],E);const T=p(t,["responseLogprobs"]);T!=null&&y(e,["responseLogprobs"],T);const w=p(t,["responseMimeType"]);w!=null&&y(e,["responseMimeType"],w);const N=p(t,["responseModalities"]);N!=null&&y(e,["responseModalities"],N);const P=p(t,["responseSchema"]);P!=null&&y(e,["responseSchema"],P);const V=p(t,["routingConfig"]);V!=null&&y(e,["routingConfig"],V);const z=p(t,["seed"]);z!=null&&y(e,["seed"],z);const F=p(t,["speechConfig"]);F!=null&&y(e,["speechConfig"],pR(F));const q=p(t,["stopSequences"]);q!=null&&y(e,["stopSequences"],q);const K=p(t,["temperature"]);K!=null&&y(e,["temperature"],K);const X=p(t,["thinkingConfig"]);X!=null&&y(e,["thinkingConfig"],X);const G=p(t,["topK"]);G!=null&&y(e,["topK"],G);const I=p(t,["topP"]);if(I!=null&&y(e,["topP"],I),p(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function _6(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function E6(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function T6(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],i);const s=p(t,["responseModalities"]);e!==void 0&&s!=null&&y(e,["setup","generationConfig","responseModalities"],s);const a=p(t,["temperature"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","temperature"],a);const l=p(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=p(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const d=p(t,["maxOutputTokens"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","maxOutputTokens"],d);const h=p(t,["mediaResolution"]);e!==void 0&&h!=null&&y(e,["setup","generationConfig","mediaResolution"],h);const g=p(t,["seed"]);e!==void 0&&g!=null&&y(e,["setup","generationConfig","seed"],g);const E=p(t,["speechConfig"]);e!==void 0&&E!=null&&y(e,["setup","generationConfig","speechConfig"],S0(E));const T=p(t,["thinkingConfig"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","thinkingConfig"],T);const w=p(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],w);const N=p(t,["systemInstruction"]);e!==void 0&&N!=null&&y(e,["setup","systemInstruction"],m6(ei(N)));const P=p(t,["tools"]);if(e!==void 0&&P!=null){let G=Ql(P);Array.isArray(G)&&(G=G.map(I=>M6(Wl(I)))),y(e,["setup","tools"],G)}const V=p(t,["sessionResumption"]);e!==void 0&&V!=null&&y(e,["setup","sessionResumption"],D6(V));const z=p(t,["inputAudioTranscription"]);e!==void 0&&z!=null&&y(e,["setup","inputAudioTranscription"],z);const F=p(t,["outputAudioTranscription"]);e!==void 0&&F!=null&&y(e,["setup","outputAudioTranscription"],F);const q=p(t,["realtimeInputConfig"]);e!==void 0&&q!=null&&y(e,["setup","realtimeInputConfig"],q);const K=p(t,["contextWindowCompression"]);e!==void 0&&K!=null&&y(e,["setup","contextWindowCompression"],K);const X=p(t,["proactivity"]);return e!==void 0&&X!=null&&y(e,["setup","proactivity"],X),n}function S6(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],v6(i));const s=p(t,["responseModalities"]);e!==void 0&&s!=null&&y(e,["setup","generationConfig","responseModalities"],s);const a=p(t,["temperature"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","temperature"],a);const l=p(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=p(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const d=p(t,["maxOutputTokens"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","maxOutputTokens"],d);const h=p(t,["mediaResolution"]);e!==void 0&&h!=null&&y(e,["setup","generationConfig","mediaResolution"],h);const g=p(t,["seed"]);e!==void 0&&g!=null&&y(e,["setup","generationConfig","seed"],g);const E=p(t,["speechConfig"]);e!==void 0&&E!=null&&y(e,["setup","generationConfig","speechConfig"],pR(S0(E)));const T=p(t,["thinkingConfig"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","thinkingConfig"],T);const w=p(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],w);const N=p(t,["systemInstruction"]);e!==void 0&&N!=null&&y(e,["setup","systemInstruction"],ei(N));const P=p(t,["tools"]);if(e!==void 0&&P!=null){let G=Ql(P);Array.isArray(G)&&(G=G.map(I=>k6(Wl(I)))),y(e,["setup","tools"],G)}const V=p(t,["sessionResumption"]);e!==void 0&&V!=null&&y(e,["setup","sessionResumption"],V);const z=p(t,["inputAudioTranscription"]);e!==void 0&&z!=null&&y(e,["setup","inputAudioTranscription"],z);const F=p(t,["outputAudioTranscription"]);e!==void 0&&F!=null&&y(e,["setup","outputAudioTranscription"],F);const q=p(t,["realtimeInputConfig"]);e!==void 0&&q!=null&&y(e,["setup","realtimeInputConfig"],q);const K=p(t,["contextWindowCompression"]);e!==void 0&&K!=null&&y(e,["setup","contextWindowCompression"],K);const X=p(t,["proactivity"]);return e!==void 0&&X!=null&&y(e,["setup","proactivity"],X),n}function b6(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["setup","model"],gt(t,i));const s=p(e,["config"]);return s!=null&&y(n,["config"],T6(s,n)),n}function A6(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["setup","model"],gt(t,i));const s=p(e,["config"]);return s!=null&&y(n,["config"],S6(s,n)),n}function w6(t){const e={},n=p(t,["musicGenerationConfig"]);return n!=null&&y(e,["musicGenerationConfig"],n),e}function C6(t){const e={},n=p(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),y(e,["weightedPrompts"],i)}return e}function I6(t){const e={},n=p(t,["media"]);if(n!=null){let h=tR(n);Array.isArray(h)&&(h=h.map(g=>fh(g))),y(e,["mediaChunks"],h)}const i=p(t,["audio"]);i!=null&&y(e,["audio"],fh(iR(i)));const s=p(t,["audioStreamEnd"]);s!=null&&y(e,["audioStreamEnd"],s);const a=p(t,["video"]);a!=null&&y(e,["video"],fh(nR(a)));const l=p(t,["text"]);l!=null&&y(e,["text"],l);const c=p(t,["activityStart"]);c!=null&&y(e,["activityStart"],c);const d=p(t,["activityEnd"]);return d!=null&&y(e,["activityEnd"],d),e}function x6(t){const e={},n=p(t,["media"]);if(n!=null){let h=tR(n);Array.isArray(h)&&(h=h.map(g=>g)),y(e,["mediaChunks"],h)}const i=p(t,["audio"]);i!=null&&y(e,["audio"],iR(i));const s=p(t,["audioStreamEnd"]);s!=null&&y(e,["audioStreamEnd"],s);const a=p(t,["video"]);a!=null&&y(e,["video"],nR(a));const l=p(t,["text"]);l!=null&&y(e,["text"],l);const c=p(t,["activityStart"]);c!=null&&y(e,["activityStart"],c);const d=p(t,["activityEnd"]);return d!=null&&y(e,["activityEnd"],d),e}function R6(t){const e={},n=p(t,["setupComplete"]);n!=null&&y(e,["setupComplete"],n);const i=p(t,["serverContent"]);i!=null&&y(e,["serverContent"],i);const s=p(t,["toolCall"]);s!=null&&y(e,["toolCall"],s);const a=p(t,["toolCallCancellation"]);a!=null&&y(e,["toolCallCancellation"],a);const l=p(t,["usageMetadata"]);l!=null&&y(e,["usageMetadata"],P6(l));const c=p(t,["goAway"]);c!=null&&y(e,["goAway"],c);const d=p(t,["sessionResumptionUpdate"]);return d!=null&&y(e,["sessionResumptionUpdate"],d),e}function N6(t){const e={},n=p(t,["functionCall"]);n!=null&&y(e,["functionCall"],n);const i=p(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const s=p(t,["executableCode"]);s!=null&&y(e,["executableCode"],s);const a=p(t,["fileData"]);a!=null&&y(e,["fileData"],g6(a));const l=p(t,["functionResponse"]);l!=null&&y(e,["functionResponse"],l);const c=p(t,["inlineData"]);c!=null&&y(e,["inlineData"],fh(c));const d=p(t,["text"]);d!=null&&y(e,["text"],d);const h=p(t,["thought"]);h!=null&&y(e,["thought"],h);const g=p(t,["thoughtSignature"]);g!=null&&y(e,["thoughtSignature"],g);const E=p(t,["videoMetadata"]);return E!=null&&y(e,["videoMetadata"],E),e}function D6(t){const e={},n=p(t,["handle"]);if(n!=null&&y(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function pR(t){const e={},n=p(t,["languageCode"]);n!=null&&y(e,["languageCode"],n);const i=p(t,["voiceConfig"]);if(i!=null&&y(e,["voiceConfig"],i),p(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function M6(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(E=>E)),y(e,["functionDeclarations"],g)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const s=p(t,["computerUse"]);s!=null&&y(e,["computerUse"],s);const a=p(t,["fileSearch"]);a!=null&&y(e,["fileSearch"],a);const l=p(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],_6(c));const d=p(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],E6(d));const h=p(t,["urlContext"]);return h!=null&&y(e,["urlContext"],h),e}function k6(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(T=>y6(T))),y(e,["functionDeclarations"],E)}const i=p(t,["retrieval"]);i!=null&&y(e,["retrieval"],i);const s=p(t,["googleSearchRetrieval"]);s!=null&&y(e,["googleSearchRetrieval"],s);const a=p(t,["computerUse"]);if(a!=null&&y(e,["computerUse"],a),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=p(t,["codeExecution"]);l!=null&&y(e,["codeExecution"],l);const c=p(t,["enterpriseWebSearch"]);c!=null&&y(e,["enterpriseWebSearch"],c);const d=p(t,["googleMaps"]);d!=null&&y(e,["googleMaps"],d);const h=p(t,["googleSearch"]);h!=null&&y(e,["googleSearch"],h);const g=p(t,["urlContext"]);return g!=null&&y(e,["urlContext"],g),e}function P6(t){const e={},n=p(t,["promptTokenCount"]);n!=null&&y(e,["promptTokenCount"],n);const i=p(t,["cachedContentTokenCount"]);i!=null&&y(e,["cachedContentTokenCount"],i);const s=p(t,["candidatesTokenCount"]);s!=null&&y(e,["responseTokenCount"],s);const a=p(t,["toolUsePromptTokenCount"]);a!=null&&y(e,["toolUsePromptTokenCount"],a);const l=p(t,["thoughtsTokenCount"]);l!=null&&y(e,["thoughtsTokenCount"],l);const c=p(t,["totalTokenCount"]);c!=null&&y(e,["totalTokenCount"],c);const d=p(t,["promptTokensDetails"]);if(d!=null){let w=d;Array.isArray(w)&&(w=w.map(N=>N)),y(e,["promptTokensDetails"],w)}const h=p(t,["cacheTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(N=>N)),y(e,["cacheTokensDetails"],w)}const g=p(t,["candidatesTokensDetails"]);if(g!=null){let w=g;Array.isArray(w)&&(w=w.map(N=>N)),y(e,["responseTokensDetails"],w)}const E=p(t,["toolUsePromptTokensDetails"]);if(E!=null){let w=E;Array.isArray(w)&&(w=w.map(N=>N)),y(e,["toolUsePromptTokensDetails"],w)}const T=p(t,["trafficType"]);return T!=null&&y(e,["trafficType"],T),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function L6(t){const e={},n=p(t,["data"]);if(n!=null&&y(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function V6(t){const e={},n=p(t,["content"]);n!=null&&y(e,["content"],n);const i=p(t,["citationMetadata"]);i!=null&&y(e,["citationMetadata"],O6(i));const s=p(t,["tokenCount"]);s!=null&&y(e,["tokenCount"],s);const a=p(t,["finishReason"]);a!=null&&y(e,["finishReason"],a);const l=p(t,["avgLogprobs"]);l!=null&&y(e,["avgLogprobs"],l);const c=p(t,["groundingMetadata"]);c!=null&&y(e,["groundingMetadata"],c);const d=p(t,["index"]);d!=null&&y(e,["index"],d);const h=p(t,["logprobsResult"]);h!=null&&y(e,["logprobsResult"],h);const g=p(t,["safetyRatings"]);if(g!=null){let T=g;Array.isArray(T)&&(T=T.map(w=>w)),y(e,["safetyRatings"],T)}const E=p(t,["urlContextMetadata"]);return E!=null&&y(e,["urlContextMetadata"],E),e}function O6(t){const e={},n=p(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),y(e,["citations"],i)}return e}function U6(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const s=p(e,["contents"]);if(s!=null){let a=lr(s);Array.isArray(a)&&(a=a.map(l=>l)),y(n,["contents"],a)}return n}function F6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["tokensInfo"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),y(e,["tokensInfo"],s)}return e}function q6(t){const e={},n=p(t,["values"]);n!=null&&y(e,["values"],n);const i=p(t,["statistics"]);return i!=null&&y(e,["statistics"],B6(i)),e}function B6(t){const e={},n=p(t,["truncated"]);n!=null&&y(e,["truncated"],n);const i=p(t,["token_count"]);return i!=null&&y(e,["tokenCount"],i),e}function Cp(t){const e={},n=p(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>$5(a))),y(e,["parts"],s)}const i=p(t,["role"]);return i!=null&&y(e,["role"],i),e}function z6(t){const e={},n=p(t,["controlType"]);n!=null&&y(e,["controlType"],n);const i=p(t,["enableControlImageComputation"]);return i!=null&&y(e,["computeControl"],i),e}function H6(t){const e={};if(p(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function G6(t,e){const n={},i=p(t,["systemInstruction"]);e!==void 0&&i!=null&&y(e,["systemInstruction"],ei(i));const s=p(t,["tools"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>_R(c))),y(e,["tools"],l)}const a=p(t,["generationConfig"]);return e!==void 0&&a!=null&&y(e,["generationConfig"],k5(a)),n}function j6(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const s=p(e,["contents"]);if(s!=null){let l=lr(s);Array.isArray(l)&&(l=l.map(c=>Cp(c))),y(n,["contents"],l)}const a=p(e,["config"]);return a!=null&&H6(a),n}function $6(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const s=p(e,["contents"]);if(s!=null){let l=lr(s);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["contents"],l)}const a=p(e,["config"]);return a!=null&&G6(a,n),n}function K6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["totalTokens"]);i!=null&&y(e,["totalTokens"],i);const s=p(t,["cachedContentTokenCount"]);return s!=null&&y(e,["cachedContentTokenCount"],s),e}function J6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["totalTokens"]);return i!=null&&y(e,["totalTokens"],i),e}function Y6(t,e){const n={},i=p(e,["model"]);return i!=null&&y(n,["_url","name"],gt(t,i)),n}function W6(t,e){const n={},i=p(e,["model"]);return i!=null&&y(n,["_url","name"],gt(t,i)),n}function Q6(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function X6(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function Z6(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const s=p(t,["negativePrompt"]);e!==void 0&&s!=null&&y(e,["parameters","negativePrompt"],s);const a=p(t,["numberOfImages"]);e!==void 0&&a!=null&&y(e,["parameters","sampleCount"],a);const l=p(t,["aspectRatio"]);e!==void 0&&l!=null&&y(e,["parameters","aspectRatio"],l);const c=p(t,["guidanceScale"]);e!==void 0&&c!=null&&y(e,["parameters","guidanceScale"],c);const d=p(t,["seed"]);e!==void 0&&d!=null&&y(e,["parameters","seed"],d);const h=p(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&y(e,["parameters","safetySetting"],h);const g=p(t,["personGeneration"]);e!==void 0&&g!=null&&y(e,["parameters","personGeneration"],g);const E=p(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&y(e,["parameters","includeSafetyAttributes"],E);const T=p(t,["includeRaiReason"]);e!==void 0&&T!=null&&y(e,["parameters","includeRaiReason"],T);const w=p(t,["language"]);e!==void 0&&w!=null&&y(e,["parameters","language"],w);const N=p(t,["outputMimeType"]);e!==void 0&&N!=null&&y(e,["parameters","outputOptions","mimeType"],N);const P=p(t,["outputCompressionQuality"]);e!==void 0&&P!=null&&y(e,["parameters","outputOptions","compressionQuality"],P);const V=p(t,["addWatermark"]);e!==void 0&&V!=null&&y(e,["parameters","addWatermark"],V);const z=p(t,["labels"]);e!==void 0&&z!=null&&y(e,["labels"],z);const F=p(t,["editMode"]);e!==void 0&&F!=null&&y(e,["parameters","editMode"],F);const q=p(t,["baseSteps"]);return e!==void 0&&q!=null&&y(e,["parameters","editConfig","baseSteps"],q),n}function e5(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const s=p(e,["prompt"]);s!=null&&y(n,["instances[0]","prompt"],s);const a=p(e,["referenceImages"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>X5(d))),y(n,["instances[0]","referenceImages"],c)}const l=p(e,["config"]);return l!=null&&Z6(l,n),n}function t5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Ip(a))),y(e,["generatedImages"],s)}return e}function n5(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&y(e,["requests[]","taskType"],i);const s=p(t,["title"]);e!==void 0&&s!=null&&y(e,["requests[]","title"],s);const a=p(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&y(e,["requests[]","outputDimensionality"],a),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function i5(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&y(e,["instances[]","task_type"],i);const s=p(t,["title"]);e!==void 0&&s!=null&&y(e,["instances[]","title"],s);const a=p(t,["outputDimensionality"]);e!==void 0&&a!=null&&y(e,["parameters","outputDimensionality"],a);const l=p(t,["mimeType"]);e!==void 0&&l!=null&&y(e,["instances[]","mimeType"],l);const c=p(t,["autoTruncate"]);return e!==void 0&&c!=null&&y(e,["parameters","autoTruncate"],c),n}function r5(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const s=p(e,["contents"]);if(s!=null){let c=_0(t,s);Array.isArray(c)&&(c=c.map(d=>d)),y(n,["requests[]","content"],c)}const a=p(e,["config"]);a!=null&&n5(a,n);const l=p(e,["model"]);return l!==void 0&&y(n,["requests[]","model"],gt(t,l)),n}function s5(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const s=p(e,["contents"]);if(s!=null){let l=_0(t,s);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["instances[]","content"],l)}const a=p(e,["config"]);return a!=null&&i5(a,n),n}function o5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),y(e,["embeddings"],a)}const s=p(t,["metadata"]);return s!=null&&y(e,["metadata"],s),e}function a5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>q6(l))),y(e,["embeddings"],a)}const s=p(t,["metadata"]);return s!=null&&y(e,["metadata"],s),e}function l5(t){const e={},n=p(t,["endpoint"]);n!=null&&y(e,["name"],n);const i=p(t,["deployedModelId"]);return i!=null&&y(e,["deployedModelId"],i),e}function u5(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function c5(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&y(e,["description"],n);const i=p(t,["name"]);i!=null&&y(e,["name"],i);const s=p(t,["parameters"]);s!=null&&y(e,["parameters"],s);const a=p(t,["parametersJsonSchema"]);a!=null&&y(e,["parametersJsonSchema"],a);const l=p(t,["response"]);l!=null&&y(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&y(e,["responseJsonSchema"],c),e}function f5(t,e,n){const i={},s=p(e,["systemInstruction"]);n!==void 0&&s!=null&&y(n,["systemInstruction"],Cp(ei(s)));const a=p(e,["temperature"]);a!=null&&y(i,["temperature"],a);const l=p(e,["topP"]);l!=null&&y(i,["topP"],l);const c=p(e,["topK"]);c!=null&&y(i,["topK"],c);const d=p(e,["candidateCount"]);d!=null&&y(i,["candidateCount"],d);const h=p(e,["maxOutputTokens"]);h!=null&&y(i,["maxOutputTokens"],h);const g=p(e,["stopSequences"]);g!=null&&y(i,["stopSequences"],g);const E=p(e,["responseLogprobs"]);E!=null&&y(i,["responseLogprobs"],E);const T=p(e,["logprobs"]);T!=null&&y(i,["logprobs"],T);const w=p(e,["presencePenalty"]);w!=null&&y(i,["presencePenalty"],w);const N=p(e,["frequencyPenalty"]);N!=null&&y(i,["frequencyPenalty"],N);const P=p(e,["seed"]);P!=null&&y(i,["seed"],P);const V=p(e,["responseMimeType"]);V!=null&&y(i,["responseMimeType"],V);const z=p(e,["responseSchema"]);z!=null&&y(i,["responseSchema"],E0(z));const F=p(e,["responseJsonSchema"]);if(F!=null&&y(i,["responseJsonSchema"],F),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const q=p(e,["safetySettings"]);if(n!==void 0&&q!=null){let O=q;Array.isArray(O)&&(O=O.map(U=>Z5(U))),y(n,["safetySettings"],O)}const K=p(e,["tools"]);if(n!==void 0&&K!=null){let O=Ql(K);Array.isArray(O)&&(O=O.map(U=>sF(Wl(U)))),y(n,["tools"],O)}const X=p(e,["toolConfig"]);if(n!==void 0&&X!=null&&y(n,["toolConfig"],X),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=p(e,["cachedContent"]);n!==void 0&&G!=null&&y(n,["cachedContent"],ws(t,G));const I=p(e,["responseModalities"]);I!=null&&y(i,["responseModalities"],I);const x=p(e,["mediaResolution"]);x!=null&&y(i,["mediaResolution"],x);const R=p(e,["speechConfig"]);if(R!=null&&y(i,["speechConfig"],T0(R)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=p(e,["thinkingConfig"]);L!=null&&y(i,["thinkingConfig"],L);const M=p(e,["imageConfig"]);return M!=null&&y(i,["imageConfig"],M),i}function d5(t,e,n){const i={},s=p(e,["systemInstruction"]);n!==void 0&&s!=null&&y(n,["systemInstruction"],ei(s));const a=p(e,["temperature"]);a!=null&&y(i,["temperature"],a);const l=p(e,["topP"]);l!=null&&y(i,["topP"],l);const c=p(e,["topK"]);c!=null&&y(i,["topK"],c);const d=p(e,["candidateCount"]);d!=null&&y(i,["candidateCount"],d);const h=p(e,["maxOutputTokens"]);h!=null&&y(i,["maxOutputTokens"],h);const g=p(e,["stopSequences"]);g!=null&&y(i,["stopSequences"],g);const E=p(e,["responseLogprobs"]);E!=null&&y(i,["responseLogprobs"],E);const T=p(e,["logprobs"]);T!=null&&y(i,["logprobs"],T);const w=p(e,["presencePenalty"]);w!=null&&y(i,["presencePenalty"],w);const N=p(e,["frequencyPenalty"]);N!=null&&y(i,["frequencyPenalty"],N);const P=p(e,["seed"]);P!=null&&y(i,["seed"],P);const V=p(e,["responseMimeType"]);V!=null&&y(i,["responseMimeType"],V);const z=p(e,["responseSchema"]);z!=null&&y(i,["responseSchema"],E0(z));const F=p(e,["responseJsonSchema"]);F!=null&&y(i,["responseJsonSchema"],F);const q=p(e,["routingConfig"]);q!=null&&y(i,["routingConfig"],q);const K=p(e,["modelSelectionConfig"]);K!=null&&y(i,["modelConfig"],K);const X=p(e,["safetySettings"]);if(n!==void 0&&X!=null){let ee=X;Array.isArray(ee)&&(ee=ee.map(ce=>ce)),y(n,["safetySettings"],ee)}const G=p(e,["tools"]);if(n!==void 0&&G!=null){let ee=Ql(G);Array.isArray(ee)&&(ee=ee.map(ce=>_R(Wl(ce)))),y(n,["tools"],ee)}const I=p(e,["toolConfig"]);n!==void 0&&I!=null&&y(n,["toolConfig"],I);const x=p(e,["labels"]);n!==void 0&&x!=null&&y(n,["labels"],x);const R=p(e,["cachedContent"]);n!==void 0&&R!=null&&y(n,["cachedContent"],ws(t,R));const L=p(e,["responseModalities"]);L!=null&&y(i,["responseModalities"],L);const M=p(e,["mediaResolution"]);M!=null&&y(i,["mediaResolution"],M);const O=p(e,["speechConfig"]);O!=null&&y(i,["speechConfig"],vR(T0(O)));const U=p(e,["audioTimestamp"]);U!=null&&y(i,["audioTimestamp"],U);const we=p(e,["thinkingConfig"]);we!=null&&y(i,["thinkingConfig"],we);const ve=p(e,["imageConfig"]);return ve!=null&&y(i,["imageConfig"],ve),i}function uw(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const s=p(e,["contents"]);if(s!=null){let l=lr(s);Array.isArray(l)&&(l=l.map(c=>Cp(c))),y(n,["contents"],l)}const a=p(e,["config"]);return a!=null&&y(n,["generationConfig"],f5(t,a,n)),n}function cw(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const s=p(e,["contents"]);if(s!=null){let l=lr(s);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["contents"],l)}const a=p(e,["config"]);return a!=null&&y(n,["generationConfig"],d5(t,a,n)),n}function fw(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(h=>V6(h))),y(e,["candidates"],d)}const s=p(t,["modelVersion"]);s!=null&&y(e,["modelVersion"],s);const a=p(t,["promptFeedback"]);a!=null&&y(e,["promptFeedback"],a);const l=p(t,["responseId"]);l!=null&&y(e,["responseId"],l);const c=p(t,["usageMetadata"]);return c!=null&&y(e,["usageMetadata"],c),e}function dw(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(g=>g)),y(e,["candidates"],h)}const s=p(t,["createTime"]);s!=null&&y(e,["createTime"],s);const a=p(t,["modelVersion"]);a!=null&&y(e,["modelVersion"],a);const l=p(t,["promptFeedback"]);l!=null&&y(e,["promptFeedback"],l);const c=p(t,["responseId"]);c!=null&&y(e,["responseId"],c);const d=p(t,["usageMetadata"]);return d!=null&&y(e,["usageMetadata"],d),e}function h5(t,e){const n={};if(p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=p(t,["numberOfImages"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const s=p(t,["aspectRatio"]);e!==void 0&&s!=null&&y(e,["parameters","aspectRatio"],s);const a=p(t,["guidanceScale"]);if(e!==void 0&&a!=null&&y(e,["parameters","guidanceScale"],a),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=p(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&y(e,["parameters","safetySetting"],l);const c=p(t,["personGeneration"]);e!==void 0&&c!=null&&y(e,["parameters","personGeneration"],c);const d=p(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&y(e,["parameters","includeSafetyAttributes"],d);const h=p(t,["includeRaiReason"]);e!==void 0&&h!=null&&y(e,["parameters","includeRaiReason"],h);const g=p(t,["language"]);e!==void 0&&g!=null&&y(e,["parameters","language"],g);const E=p(t,["outputMimeType"]);e!==void 0&&E!=null&&y(e,["parameters","outputOptions","mimeType"],E);const T=p(t,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&y(e,["parameters","outputOptions","compressionQuality"],T),p(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(p(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=p(t,["imageSize"]);if(e!==void 0&&w!=null&&y(e,["parameters","sampleImageSize"],w),p(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function p5(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const s=p(t,["negativePrompt"]);e!==void 0&&s!=null&&y(e,["parameters","negativePrompt"],s);const a=p(t,["numberOfImages"]);e!==void 0&&a!=null&&y(e,["parameters","sampleCount"],a);const l=p(t,["aspectRatio"]);e!==void 0&&l!=null&&y(e,["parameters","aspectRatio"],l);const c=p(t,["guidanceScale"]);e!==void 0&&c!=null&&y(e,["parameters","guidanceScale"],c);const d=p(t,["seed"]);e!==void 0&&d!=null&&y(e,["parameters","seed"],d);const h=p(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&y(e,["parameters","safetySetting"],h);const g=p(t,["personGeneration"]);e!==void 0&&g!=null&&y(e,["parameters","personGeneration"],g);const E=p(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&y(e,["parameters","includeSafetyAttributes"],E);const T=p(t,["includeRaiReason"]);e!==void 0&&T!=null&&y(e,["parameters","includeRaiReason"],T);const w=p(t,["language"]);e!==void 0&&w!=null&&y(e,["parameters","language"],w);const N=p(t,["outputMimeType"]);e!==void 0&&N!=null&&y(e,["parameters","outputOptions","mimeType"],N);const P=p(t,["outputCompressionQuality"]);e!==void 0&&P!=null&&y(e,["parameters","outputOptions","compressionQuality"],P);const V=p(t,["addWatermark"]);e!==void 0&&V!=null&&y(e,["parameters","addWatermark"],V);const z=p(t,["labels"]);e!==void 0&&z!=null&&y(e,["labels"],z);const F=p(t,["imageSize"]);e!==void 0&&F!=null&&y(e,["parameters","sampleImageSize"],F);const q=p(t,["enhancePrompt"]);return e!==void 0&&q!=null&&y(e,["parameters","enhancePrompt"],q),n}function m5(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const s=p(e,["prompt"]);s!=null&&y(n,["instances[0]","prompt"],s);const a=p(e,["config"]);return a!=null&&h5(a,n),n}function g5(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const s=p(e,["prompt"]);s!=null&&y(n,["instances[0]","prompt"],s);const a=p(e,["config"]);return a!=null&&p5(a,n),n}function y5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>R5(l))),y(e,["generatedImages"],a)}const s=p(t,["positivePromptSafetyAttributes"]);return s!=null&&y(e,["positivePromptSafetyAttributes"],gR(s)),e}function v5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>Ip(l))),y(e,["generatedImages"],a)}const s=p(t,["positivePromptSafetyAttributes"]);return s!=null&&y(e,["positivePromptSafetyAttributes"],yR(s)),e}function _5(t,e){const n={},i=p(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i),p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=p(t,["durationSeconds"]);if(e!==void 0&&s!=null&&y(e,["parameters","durationSeconds"],s),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=p(t,["aspectRatio"]);e!==void 0&&a!=null&&y(e,["parameters","aspectRatio"],a);const l=p(t,["resolution"]);e!==void 0&&l!=null&&y(e,["parameters","resolution"],l);const c=p(t,["personGeneration"]);if(e!==void 0&&c!=null&&y(e,["parameters","personGeneration"],c),p(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=p(t,["negativePrompt"]);e!==void 0&&d!=null&&y(e,["parameters","negativePrompt"],d);const h=p(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&y(e,["parameters","enhancePrompt"],h),p(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const g=p(t,["lastFrame"]);e!==void 0&&g!=null&&y(e,["instances[0]","lastFrame"],xp(g));const E=p(t,["referenceImages"]);if(e!==void 0&&E!=null){let T=E;Array.isArray(T)&&(T=T.map(w=>vF(w))),y(e,["instances[0]","referenceImages"],T)}if(p(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(p(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function E5(t,e){const n={},i=p(t,["numberOfVideos"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const s=p(t,["outputGcsUri"]);e!==void 0&&s!=null&&y(e,["parameters","storageUri"],s);const a=p(t,["fps"]);e!==void 0&&a!=null&&y(e,["parameters","fps"],a);const l=p(t,["durationSeconds"]);e!==void 0&&l!=null&&y(e,["parameters","durationSeconds"],l);const c=p(t,["seed"]);e!==void 0&&c!=null&&y(e,["parameters","seed"],c);const d=p(t,["aspectRatio"]);e!==void 0&&d!=null&&y(e,["parameters","aspectRatio"],d);const h=p(t,["resolution"]);e!==void 0&&h!=null&&y(e,["parameters","resolution"],h);const g=p(t,["personGeneration"]);e!==void 0&&g!=null&&y(e,["parameters","personGeneration"],g);const E=p(t,["pubsubTopic"]);e!==void 0&&E!=null&&y(e,["parameters","pubsubTopic"],E);const T=p(t,["negativePrompt"]);e!==void 0&&T!=null&&y(e,["parameters","negativePrompt"],T);const w=p(t,["enhancePrompt"]);e!==void 0&&w!=null&&y(e,["parameters","enhancePrompt"],w);const N=p(t,["generateAudio"]);e!==void 0&&N!=null&&y(e,["parameters","generateAudio"],N);const P=p(t,["lastFrame"]);e!==void 0&&P!=null&&y(e,["instances[0]","lastFrame"],Cr(P));const V=p(t,["referenceImages"]);if(e!==void 0&&V!=null){let q=V;Array.isArray(q)&&(q=q.map(K=>_F(K))),y(e,["instances[0]","referenceImages"],q)}const z=p(t,["mask"]);e!==void 0&&z!=null&&y(e,["instances[0]","mask"],yF(z));const F=p(t,["compressionQuality"]);return e!==void 0&&F!=null&&y(e,["parameters","compressionQuality"],F),n}function T5(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["metadata"]);i!=null&&y(e,["metadata"],i);const s=p(t,["done"]);s!=null&&y(e,["done"],s);const a=p(t,["error"]);a!=null&&y(e,["error"],a);const l=p(t,["response","generateVideoResponse"]);return l!=null&&y(e,["response"],w5(l)),e}function S5(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["metadata"]);i!=null&&y(e,["metadata"],i);const s=p(t,["done"]);s!=null&&y(e,["done"],s);const a=p(t,["error"]);a!=null&&y(e,["error"],a);const l=p(t,["response"]);return l!=null&&y(e,["response"],C5(l)),e}function b5(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const s=p(e,["prompt"]);s!=null&&y(n,["instances[0]","prompt"],s);const a=p(e,["image"]);a!=null&&y(n,["instances[0]","image"],xp(a));const l=p(e,["video"]);l!=null&&y(n,["instances[0]","video"],ER(l));const c=p(e,["source"]);c!=null&&I5(c,n);const d=p(e,["config"]);return d!=null&&_5(d,n),n}function A5(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const s=p(e,["prompt"]);s!=null&&y(n,["instances[0]","prompt"],s);const a=p(e,["image"]);a!=null&&y(n,["instances[0]","image"],Cr(a));const l=p(e,["video"]);l!=null&&y(n,["instances[0]","video"],TR(l));const c=p(e,["source"]);c!=null&&x5(c,n);const d=p(e,["config"]);return d!=null&&E5(d,n),n}function w5(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>D5(l))),y(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const s=p(t,["raiMediaFilteredReasons"]);return s!=null&&y(e,["raiMediaFilteredReasons"],s),e}function C5(t){const e={},n=p(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>M5(l))),y(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const s=p(t,["raiMediaFilteredReasons"]);return s!=null&&y(e,["raiMediaFilteredReasons"],s),e}function I5(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const s=p(t,["image"]);e!==void 0&&s!=null&&y(e,["instances[0]","image"],xp(s));const a=p(t,["video"]);return e!==void 0&&a!=null&&y(e,["instances[0]","video"],ER(a)),n}function x5(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const s=p(t,["image"]);e!==void 0&&s!=null&&y(e,["instances[0]","image"],Cr(s));const a=p(t,["video"]);return e!==void 0&&a!=null&&y(e,["instances[0]","video"],TR(a)),n}function R5(t){const e={},n=p(t,["_self"]);n!=null&&y(e,["image"],U5(n));const i=p(t,["raiFilteredReason"]);i!=null&&y(e,["raiFilteredReason"],i);const s=p(t,["_self"]);return s!=null&&y(e,["safetyAttributes"],gR(s)),e}function Ip(t){const e={},n=p(t,["_self"]);n!=null&&y(e,["image"],mR(n));const i=p(t,["raiFilteredReason"]);i!=null&&y(e,["raiFilteredReason"],i);const s=p(t,["_self"]);s!=null&&y(e,["safetyAttributes"],yR(s));const a=p(t,["prompt"]);return a!=null&&y(e,["enhancedPrompt"],a),e}function N5(t){const e={},n=p(t,["_self"]);n!=null&&y(e,["mask"],mR(n));const i=p(t,["labels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),y(e,["labels"],s)}return e}function D5(t){const e={},n=p(t,["video"]);return n!=null&&y(e,["video"],mF(n)),e}function M5(t){const e={},n=p(t,["_self"]);return n!=null&&y(e,["video"],gF(n)),e}function k5(t){const e={},n=p(t,["modelSelectionConfig"]);n!=null&&y(e,["modelConfig"],n);const i=p(t,["responseJsonSchema"]);i!=null&&y(e,["responseJsonSchema"],i);const s=p(t,["audioTimestamp"]);s!=null&&y(e,["audioTimestamp"],s);const a=p(t,["candidateCount"]);a!=null&&y(e,["candidateCount"],a);const l=p(t,["enableAffectiveDialog"]);l!=null&&y(e,["enableAffectiveDialog"],l);const c=p(t,["frequencyPenalty"]);c!=null&&y(e,["frequencyPenalty"],c);const d=p(t,["logprobs"]);d!=null&&y(e,["logprobs"],d);const h=p(t,["maxOutputTokens"]);h!=null&&y(e,["maxOutputTokens"],h);const g=p(t,["mediaResolution"]);g!=null&&y(e,["mediaResolution"],g);const E=p(t,["presencePenalty"]);E!=null&&y(e,["presencePenalty"],E);const T=p(t,["responseLogprobs"]);T!=null&&y(e,["responseLogprobs"],T);const w=p(t,["responseMimeType"]);w!=null&&y(e,["responseMimeType"],w);const N=p(t,["responseModalities"]);N!=null&&y(e,["responseModalities"],N);const P=p(t,["responseSchema"]);P!=null&&y(e,["responseSchema"],P);const V=p(t,["routingConfig"]);V!=null&&y(e,["routingConfig"],V);const z=p(t,["seed"]);z!=null&&y(e,["seed"],z);const F=p(t,["speechConfig"]);F!=null&&y(e,["speechConfig"],vR(F));const q=p(t,["stopSequences"]);q!=null&&y(e,["stopSequences"],q);const K=p(t,["temperature"]);K!=null&&y(e,["temperature"],K);const X=p(t,["thinkingConfig"]);X!=null&&y(e,["thinkingConfig"],X);const G=p(t,["topK"]);G!=null&&y(e,["topK"],G);const I=p(t,["topP"]);if(I!=null&&y(e,["topP"],I),p(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function P5(t,e){const n={},i=p(e,["model"]);return i!=null&&y(n,["_url","name"],gt(t,i)),n}function L5(t,e){const n={},i=p(e,["model"]);return i!=null&&y(n,["_url","name"],gt(t,i)),n}function V5(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function O5(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function U5(t){const e={},n=p(t,["bytesBase64Encoded"]);n!=null&&y(e,["imageBytes"],Lo(n));const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function mR(t){const e={},n=p(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&y(e,["imageBytes"],Lo(i));const s=p(t,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}function xp(t){const e={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=p(t,["imageBytes"]);n!=null&&y(e,["bytesBase64Encoded"],Lo(n));const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Cr(t){const e={},n=p(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const i=p(t,["imageBytes"]);i!=null&&y(e,["bytesBase64Encoded"],Lo(i));const s=p(t,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}function F5(t,e,n){const i={},s=p(e,["pageSize"]);n!==void 0&&s!=null&&y(n,["_query","pageSize"],s);const a=p(e,["pageToken"]);n!==void 0&&a!=null&&y(n,["_query","pageToken"],a);const l=p(e,["filter"]);n!==void 0&&l!=null&&y(n,["_query","filter"],l);const c=p(e,["queryBase"]);return n!==void 0&&c!=null&&y(n,["_url","models_url"],aR(t,c)),i}function q5(t,e,n){const i={},s=p(e,["pageSize"]);n!==void 0&&s!=null&&y(n,["_query","pageSize"],s);const a=p(e,["pageToken"]);n!==void 0&&a!=null&&y(n,["_query","pageToken"],a);const l=p(e,["filter"]);n!==void 0&&l!=null&&y(n,["_query","filter"],l);const c=p(e,["queryBase"]);return n!==void 0&&c!=null&&y(n,["_url","models_url"],aR(t,c)),i}function B5(t,e){const n={},i=p(e,["config"]);return i!=null&&F5(t,i,n),n}function z5(t,e){const n={},i=p(e,["config"]);return i!=null&&q5(t,i,n),n}function H5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const s=p(t,["_self"]);if(s!=null){let a=lR(s);Array.isArray(a)&&(a=a.map(l=>Gy(l))),y(e,["models"],a)}return e}function G5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const s=p(t,["_self"]);if(s!=null){let a=lR(s);Array.isArray(a)&&(a=a.map(l=>jy(l))),y(e,["models"],a)}return e}function j5(t){const e={},n=p(t,["maskMode"]);n!=null&&y(e,["maskMode"],n);const i=p(t,["segmentationClasses"]);i!=null&&y(e,["maskClasses"],i);const s=p(t,["maskDilation"]);return s!=null&&y(e,["dilation"],s),e}function Gy(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["displayName"]);i!=null&&y(e,["displayName"],i);const s=p(t,["description"]);s!=null&&y(e,["description"],s);const a=p(t,["version"]);a!=null&&y(e,["version"],a);const l=p(t,["_self"]);l!=null&&y(e,["tunedModelInfo"],oF(l));const c=p(t,["inputTokenLimit"]);c!=null&&y(e,["inputTokenLimit"],c);const d=p(t,["outputTokenLimit"]);d!=null&&y(e,["outputTokenLimit"],d);const h=p(t,["supportedGenerationMethods"]);h!=null&&y(e,["supportedActions"],h);const g=p(t,["temperature"]);g!=null&&y(e,["temperature"],g);const E=p(t,["maxTemperature"]);E!=null&&y(e,["maxTemperature"],E);const T=p(t,["topP"]);T!=null&&y(e,["topP"],T);const w=p(t,["topK"]);w!=null&&y(e,["topK"],w);const N=p(t,["thinking"]);return N!=null&&y(e,["thinking"],N),e}function jy(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["displayName"]);i!=null&&y(e,["displayName"],i);const s=p(t,["description"]);s!=null&&y(e,["description"],s);const a=p(t,["versionId"]);a!=null&&y(e,["version"],a);const l=p(t,["deployedModels"]);if(l!=null){let E=l;Array.isArray(E)&&(E=E.map(T=>l5(T))),y(e,["endpoints"],E)}const c=p(t,["labels"]);c!=null&&y(e,["labels"],c);const d=p(t,["_self"]);d!=null&&y(e,["tunedModelInfo"],aF(d));const h=p(t,["defaultCheckpointId"]);h!=null&&y(e,["defaultCheckpointId"],h);const g=p(t,["checkpoints"]);if(g!=null){let E=g;Array.isArray(E)&&(E=E.map(T=>T)),y(e,["checkpoints"],E)}return e}function $5(t){const e={},n=p(t,["functionCall"]);n!=null&&y(e,["functionCall"],n);const i=p(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const s=p(t,["executableCode"]);s!=null&&y(e,["executableCode"],s);const a=p(t,["fileData"]);a!=null&&y(e,["fileData"],u5(a));const l=p(t,["functionResponse"]);l!=null&&y(e,["functionResponse"],l);const c=p(t,["inlineData"]);c!=null&&y(e,["inlineData"],L6(c));const d=p(t,["text"]);d!=null&&y(e,["text"],d);const h=p(t,["thought"]);h!=null&&y(e,["thought"],h);const g=p(t,["thoughtSignature"]);g!=null&&y(e,["thoughtSignature"],g);const E=p(t,["videoMetadata"]);return E!=null&&y(e,["videoMetadata"],E),e}function K5(t){const e={},n=p(t,["productImage"]);return n!=null&&y(e,["image"],Cr(n)),e}function J5(t,e){const n={},i=p(t,["numberOfImages"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const s=p(t,["baseSteps"]);e!==void 0&&s!=null&&y(e,["parameters","baseSteps"],s);const a=p(t,["outputGcsUri"]);e!==void 0&&a!=null&&y(e,["parameters","storageUri"],a);const l=p(t,["seed"]);e!==void 0&&l!=null&&y(e,["parameters","seed"],l);const c=p(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&y(e,["parameters","safetySetting"],c);const d=p(t,["personGeneration"]);e!==void 0&&d!=null&&y(e,["parameters","personGeneration"],d);const h=p(t,["addWatermark"]);e!==void 0&&h!=null&&y(e,["parameters","addWatermark"],h);const g=p(t,["outputMimeType"]);e!==void 0&&g!=null&&y(e,["parameters","outputOptions","mimeType"],g);const E=p(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&y(e,["parameters","outputOptions","compressionQuality"],E);const T=p(t,["enhancePrompt"]);e!==void 0&&T!=null&&y(e,["parameters","enhancePrompt"],T);const w=p(t,["labels"]);return e!==void 0&&w!=null&&y(e,["labels"],w),n}function Y5(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const s=p(e,["source"]);s!=null&&Q5(s,n);const a=p(e,["config"]);return a!=null&&J5(a,n),n}function W5(t){const e={},n=p(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Ip(s))),y(e,["generatedImages"],i)}return e}function Q5(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const s=p(t,["personImage"]);e!==void 0&&s!=null&&y(e,["instances[0]","personImage","image"],Cr(s));const a=p(t,["productImages"]);if(e!==void 0&&a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>K5(c))),y(e,["instances[0]","productImages"],l)}return n}function X5(t){const e={},n=p(t,["referenceImage"]);n!=null&&y(e,["referenceImage"],Cr(n));const i=p(t,["referenceId"]);i!=null&&y(e,["referenceId"],i);const s=p(t,["referenceType"]);s!=null&&y(e,["referenceType"],s);const a=p(t,["maskImageConfig"]);a!=null&&y(e,["maskImageConfig"],j5(a));const l=p(t,["controlImageConfig"]);l!=null&&y(e,["controlImageConfig"],z6(l));const c=p(t,["styleImageConfig"]);c!=null&&y(e,["styleImageConfig"],c);const d=p(t,["subjectImageConfig"]);return d!=null&&y(e,["subjectImageConfig"],d),e}function gR(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const i=p(t,["safetyAttributes","scores"]);i!=null&&y(e,["scores"],i);const s=p(t,["contentType"]);return s!=null&&y(e,["contentType"],s),e}function yR(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const i=p(t,["safetyAttributes","scores"]);i!=null&&y(e,["scores"],i);const s=p(t,["contentType"]);return s!=null&&y(e,["contentType"],s),e}function Z5(t){const e={},n=p(t,["category"]);if(n!=null&&y(e,["category"],n),p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=p(t,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function eF(t){const e={},n=p(t,["image"]);return n!=null&&y(e,["image"],Cr(n)),e}function tF(t,e){const n={},i=p(t,["mode"]);e!==void 0&&i!=null&&y(e,["parameters","mode"],i);const s=p(t,["maxPredictions"]);e!==void 0&&s!=null&&y(e,["parameters","maxPredictions"],s);const a=p(t,["confidenceThreshold"]);e!==void 0&&a!=null&&y(e,["parameters","confidenceThreshold"],a);const l=p(t,["maskDilation"]);e!==void 0&&l!=null&&y(e,["parameters","maskDilation"],l);const c=p(t,["binaryColorThreshold"]);e!==void 0&&c!=null&&y(e,["parameters","binaryColorThreshold"],c);const d=p(t,["labels"]);return e!==void 0&&d!=null&&y(e,["labels"],d),n}function nF(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const s=p(e,["source"]);s!=null&&rF(s,n);const a=p(e,["config"]);return a!=null&&tF(a,n),n}function iF(t){const e={},n=p(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>N5(s))),y(e,["generatedMasks"],i)}return e}function rF(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const s=p(t,["image"]);e!==void 0&&s!=null&&y(e,["instances[0]","image"],Cr(s));const a=p(t,["scribbleImage"]);return e!==void 0&&a!=null&&y(e,["instances[0]","scribble"],eF(a)),n}function vR(t){const e={},n=p(t,["languageCode"]);n!=null&&y(e,["languageCode"],n);const i=p(t,["voiceConfig"]);if(i!=null&&y(e,["voiceConfig"],i),p(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function sF(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(E=>E)),y(e,["functionDeclarations"],g)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const s=p(t,["computerUse"]);s!=null&&y(e,["computerUse"],s);const a=p(t,["fileSearch"]);a!=null&&y(e,["fileSearch"],a);const l=p(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],V5(c));const d=p(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],O5(d));const h=p(t,["urlContext"]);return h!=null&&y(e,["urlContext"],h),e}function _R(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(T=>c5(T))),y(e,["functionDeclarations"],E)}const i=p(t,["retrieval"]);i!=null&&y(e,["retrieval"],i);const s=p(t,["googleSearchRetrieval"]);s!=null&&y(e,["googleSearchRetrieval"],s);const a=p(t,["computerUse"]);if(a!=null&&y(e,["computerUse"],a),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=p(t,["codeExecution"]);l!=null&&y(e,["codeExecution"],l);const c=p(t,["enterpriseWebSearch"]);c!=null&&y(e,["enterpriseWebSearch"],c);const d=p(t,["googleMaps"]);d!=null&&y(e,["googleMaps"],d);const h=p(t,["googleSearch"]);h!=null&&y(e,["googleSearch"],h);const g=p(t,["urlContext"]);return g!=null&&y(e,["urlContext"],g),e}function oF(t){const e={},n=p(t,["baseModel"]);n!=null&&y(e,["baseModel"],n);const i=p(t,["createTime"]);i!=null&&y(e,["createTime"],i);const s=p(t,["updateTime"]);return s!=null&&y(e,["updateTime"],s),e}function aF(t){const e={},n=p(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&y(e,["baseModel"],n);const i=p(t,["createTime"]);i!=null&&y(e,["createTime"],i);const s=p(t,["updateTime"]);return s!=null&&y(e,["updateTime"],s),e}function lF(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const s=p(t,["description"]);e!==void 0&&s!=null&&y(e,["description"],s);const a=p(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&y(e,["defaultCheckpointId"],a),n}function uF(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const s=p(t,["description"]);e!==void 0&&s!=null&&y(e,["description"],s);const a=p(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&y(e,["defaultCheckpointId"],a),n}function cF(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","name"],gt(t,i));const s=p(e,["config"]);return s!=null&&lF(s,n),n}function fF(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const s=p(e,["config"]);return s!=null&&uF(s,n),n}function dF(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const s=p(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&y(e,["parameters","safetySetting"],s);const a=p(t,["personGeneration"]);e!==void 0&&a!=null&&y(e,["parameters","personGeneration"],a);const l=p(t,["includeRaiReason"]);e!==void 0&&l!=null&&y(e,["parameters","includeRaiReason"],l);const c=p(t,["outputMimeType"]);e!==void 0&&c!=null&&y(e,["parameters","outputOptions","mimeType"],c);const d=p(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&y(e,["parameters","outputOptions","compressionQuality"],d);const h=p(t,["enhanceInputImage"]);e!==void 0&&h!=null&&y(e,["parameters","upscaleConfig","enhanceInputImage"],h);const g=p(t,["imagePreservationFactor"]);e!==void 0&&g!=null&&y(e,["parameters","upscaleConfig","imagePreservationFactor"],g);const E=p(t,["labels"]);e!==void 0&&E!=null&&y(e,["labels"],E);const T=p(t,["numberOfImages"]);e!==void 0&&T!=null&&y(e,["parameters","sampleCount"],T);const w=p(t,["mode"]);return e!==void 0&&w!=null&&y(e,["parameters","mode"],w),n}function hF(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const s=p(e,["image"]);s!=null&&y(n,["instances[0]","image"],Cr(s));const a=p(e,["upscaleFactor"]);a!=null&&y(n,["parameters","upscaleConfig","upscaleFactor"],a);const l=p(e,["config"]);return l!=null&&dF(l,n),n}function pF(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Ip(a))),y(e,["generatedImages"],s)}return e}function mF(t){const e={},n=p(t,["uri"]);n!=null&&y(e,["uri"],n);const i=p(t,["encodedVideo"]);i!=null&&y(e,["videoBytes"],Lo(i));const s=p(t,["encoding"]);return s!=null&&y(e,["mimeType"],s),e}function gF(t){const e={},n=p(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&y(e,["videoBytes"],Lo(i));const s=p(t,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}function yF(t){const e={},n=p(t,["image"]);n!=null&&y(e,["_self"],Cr(n));const i=p(t,["maskMode"]);return i!=null&&y(e,["maskMode"],i),e}function vF(t){const e={},n=p(t,["image"]);n!=null&&y(e,["image"],xp(n));const i=p(t,["referenceType"]);return i!=null&&y(e,["referenceType"],i),e}function _F(t){const e={},n=p(t,["image"]);n!=null&&y(e,["image"],Cr(n));const i=p(t,["referenceType"]);return i!=null&&y(e,["referenceType"],i),e}function ER(t){const e={},n=p(t,["uri"]);n!=null&&y(e,["uri"],n);const i=p(t,["videoBytes"]);i!=null&&y(e,["encodedVideo"],Lo(i));const s=p(t,["mimeType"]);return s!=null&&y(e,["encoding"],s),e}function TR(t){const e={},n=p(t,["uri"]);n!=null&&y(e,["gcsUri"],n);const i=p(t,["videoBytes"]);i!=null&&y(e,["bytesBase64Encoded"],Lo(i));const s=p(t,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const EF="Content-Type",TF="X-Server-Timeout",SF="User-Agent",$y="x-goog-api-client",bF="1.29.1",AF=`google-genai-sdk/${bF}`,wF="v1beta1",CF="v1beta",hw=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class IF{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:wF,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:CF,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const s=[this.getRequestUrlInternal(n)];return i&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[l,c]of Object.entries(e.queryParams))s.searchParams.append(l,String(c));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,s.toString(),e.abortSignal),this.unaryApiCall(s,a,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[s,a]of Object.entries(n))typeof a=="object"?i[s]=Object.assign(Object.assign({},i[s]),a):a!==void 0&&(i[s]=a);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,i);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,s.toString(),e.abortSignal),this.streamApiCall(s,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,s){if(n&&n.timeout||s){const a=new AbortController,l=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const c=setTimeout(()=>a.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}s&&s.addEventListener("abort",()=>{a.abort()}),e.signal=l}return n&&n.extraBody!==null&&xF(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async s=>(await pw(s),new By(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async s=>(await pw(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var n;return Rl(this,arguments,function*(){const s=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let l="";for(;;){const{done:c,value:d}=yield qt(s.read());if(c){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=a.decode(d,{stream:!0});try{const E=JSON.parse(h);if("error"in E){const T=JSON.parse(JSON.stringify(E.error)),w=T.status,N=T.code,P=`got status: ${w}. ${JSON.stringify(E)}`;if(N>=400&&N<600)throw new wp({message:P,status:N})}}catch(E){if(E.name==="ApiError")throw E}l+=h;let g=l.match(hw);for(;g;){const E=g[1];try{const T=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield qt(new By(T)),l=l.slice(g[0].length),g=l.match(hw)}catch(T){throw new Error(`exception parsing stream chunk ${E}. ${T}`)}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=AF+" "+this.clientOptions.userAgentExtra;return e[SF]=n,e[$y]=n,e[EF]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[s,a]of Object.entries(e.headers))i.append(s,a);e.timeout&&e.timeout>0&&i.append(TF,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,l=await a.stat(e);s.sizeBytes=String(l.size);const c=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=c;const d={file:s},h=this.getFileName(e),g=ye("upload/v1beta/files",d._url),E=await this.fetchUploadUrl(g,s.sizeBytes,s.mimeType,h,d,n==null?void 0:n.httpOptions);return a.upload(e,E,this)}async uploadFileToFileSearchStore(e,n,i){var s;const a=this.clientOptions.uploader,l=await a.stat(n),c=String(l.size),d=(s=i==null?void 0:i.mimeType)!==null&&s!==void 0?s:l.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,g=this.getFileName(n),E={};i!=null&&i.customMetadata&&(E.customMetadata=i.customMetadata),i!=null&&i.chunkingConfig&&(E.chunkingConfig=i.chunkingConfig);const T=await this.fetchUploadUrl(h,c,d,g,E,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(n,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,s,a,l){var c;let d={};l?d=l:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},s?{"X-Goog-Upload-File-Name":s}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:d});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const g=(c=h==null?void 0:h.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(g===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return g}}async function pw(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(i);throw n>=400&&n<600?new wp({message:s,status:n}):new Error(s)}}function xF(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,l){const c=Object.assign({},a);for(const d in l)if(Object.prototype.hasOwnProperty.call(l,d)){const h=l[d],g=c[d];h&&typeof h=="object"&&!Array.isArray(h)&&g&&typeof g=="object"&&!Array.isArray(g)?c[d]=i(g,h):(g&&h&&typeof g!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof g}, New type: ${typeof h}. Overwriting.`),c[d]=h)}return c}const s=i(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RF="mcp_used/unknown";let NF=!1;function SR(t){for(const e of t)if(DF(e)||typeof e=="object"&&"inputSchema"in e)return!0;return NF}function bR(t){var e;const n=(e=t[$y])!==null&&e!==void 0?e:"";t[$y]=(n+` ${RF}`).trimStart()}function DF(t){return t!==null&&typeof t=="object"&&t instanceof b0}function MF(t,e=100){return Rl(this,arguments,function*(){let i,s=0;for(;s<e;){const a=yield qt(t.listTools({cursor:i}));for(const l of a.tools)yield yield qt(l),s++;if(!a.nextCursor)break;i=a.nextCursor}})}class b0{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new b0(e,n)}async initialize(){var e,n,i,s;if(this.mcpTools.length>0)return;const a={},l=[];for(const g of this.mcpClients)try{for(var c=!0,d=(n=void 0,Ec(MF(g))),h;h=await d.next(),e=h.done,!e;c=!0){s=h.value,c=!1;const E=s;l.push(E);const T=E.name;if(a[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);a[T]=g}}catch(E){n={error:E}}finally{try{!c&&!e&&(i=d.return)&&await i.call(d)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),OU(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const l=await s.callTool({name:i.name,arguments:i.args},void 0,a);n.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function kF(t,e,n){const i=new RU;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(i,s),e(i)}class PF{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),l=OF(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),d=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${c}`;let h=()=>{};const g=new Promise(q=>{h=q}),E=e.callbacks,T=function(){h({})},w=this.apiClient,N={onopen:T,onmessage:q=>{kF(w,E.onmessage,q)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(q){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(q){}},P=this.webSocketFactory.create(d,VF(l),N);P.connect(),await g;const F={setup:{model:gt(this.apiClient,e.model)}};return P.send(JSON.stringify(F)),new LF(P,this.apiClient)}}class LF{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=C6(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=w6(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Tl.PLAY)}pause(){this.sendPlaybackControl(Tl.PAUSE)}stop(){this.sendPlaybackControl(Tl.STOP)}resetContext(){this.sendPlaybackControl(Tl.RESET_CONTEXT)}close(){this.conn.close()}}function VF(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function OF(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UF="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function FF(t,e,n){const i=new xU;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const a=JSON.parse(s);if(t.isVertexAI()){const l=R6(a);Object.assign(i,l)}else Object.assign(i,a);e(i)}class qF{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new PF(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,s,a,l,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let g;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&SR(e.config.tools)&&bR(E);const T=GF(E);if(this.apiClient.isVertexAI())g=`${d}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,g);else{const R=this.apiClient.getApiKey();let L="BidiGenerateContent",M="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),L="BidiGenerateContentConstrained",M="access_token"),g=`${d}/ws/google.ai.generativelanguage.${h}.GenerativeService.${L}?${M}=${R}`}let w=()=>{};const N=new Promise(R=>{w=R}),P=e.callbacks,V=function(){var R;(R=P==null?void 0:P.onopen)===null||R===void 0||R.call(P),w({})},z=this.apiClient,F={onopen:V,onmessage:R=>{FF(z,P.onmessage,R)},onerror:(n=P==null?void 0:P.onerror)!==null&&n!==void 0?n:function(R){},onclose:(i=P==null?void 0:P.onclose)!==null&&i!==void 0?i:function(R){}},q=this.webSocketFactory.create(g,HF(T),F);q.connect(),await N;let K=gt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&K.startsWith("publishers/")){const R=this.apiClient.getProject(),L=this.apiClient.getLocation();K=`projects/${R}/locations/${L}/`+K}let X={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Fh.AUDIO]}:e.config.responseModalities=[Fh.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const G=(c=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[],I=[];for(const R of G)if(this.isCallableTool(R)){const L=R;I.push(await L.tool())}else I.push(R);I.length>0&&(e.config.tools=I);const x={model:K,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?X=A6(this.apiClient,x):X=b6(this.apiClient,x),delete X.config,q.send(JSON.stringify(X)),new zF(q,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const BF={turnComplete:!0};class zF{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=lr(n.turns),e.isVertexAI()||(i=i.map(s=>Cp(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(UF)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},BF),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:x6(e)}:n={realtimeInput:I6(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function HF(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function GF(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mw=10;function gw(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const l of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Nl(l)){s=!0;break}if(!s)return!0;const a=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Nl(t){return"callTool"in t&&typeof t.callTool=="function"}function jF(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>Nl(s)))!==null&&i!==void 0?i:!1}function yw(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,s)=>{if(Nl(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(s)}),n}function vw(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $F extends As{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,s,a,l,c;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!jF(n)||gw(n.config))return await this.generateContentInternal(d);const h=yw(n);if(h.length>0){const P=h.map(V=>`tools[${V}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${P}.`)}let g,E;const T=lr(d.contents),w=(a=(s=(i=d.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:mw;let N=0;for(;N<w&&(g=await this.generateContentInternal(d),!(!g.functionCalls||g.functionCalls.length===0));){const P=g.candidates[0].content,V=[];for(const z of(c=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[])if(Nl(z)){const q=await z.callTool(g.functionCalls);V.push(...q)}N++,E={role:"user",parts:V},d.contents=lr(d.contents),d.contents.push(P),d.contents.push(E),vw(d.config)&&(T.push(P),T.push(E))}return vw(d.config)&&(g.automaticFunctionCallingHistory=T),g},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),gw(n.config)){const s=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(s)}const i=yw(n);if(i.length>0){const s=i.map(a=>`tools[${a}]`).join(", ");throw new Error(`Incompatible tools found at ${s}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var s;let a;const l=[];if(i!=null&&i.generatedImages)for(const d of i.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((s=d==null?void 0:d.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=d==null?void 0:d.safetyAttributes:l.push(d);let c;return a?c={generatedImages:l,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:c={generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},c}),this.list=async n=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new Ia(Ss.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(l),l)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var i,s,a,l,c,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.uri&&(!((d=(c=n.source)===null||c===void 0?void 0:c.video)===null||d===void 0)&&d.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,s;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const l=await Promise.all(a.map(async d=>Nl(d)?await d.tool():d)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(c.config.tools=l,e.config&&e.config.tools&&SR(e.config.tools)){const d=(s=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&s!==void 0?s:{};let h=Object.assign({},d);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),bR(h),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return c}async initAfcToolsMap(e){var n,i,s;const a=new Map;for(const l of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Nl(l)){const c=l,d=await c.tool();for(const h of(s=d.functionDeclarations)!==null&&s!==void 0?s:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,c)}}return a}async processAfcStream(e){var n,i,s;const a=(s=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:mw;let l=!1,c=0;const d=await this.initAfcToolsMap(e);return(function(h,g,E){var T,w;return Rl(this,arguments,function*(){for(var N,P,V,z;c<a;){l&&(c++,l=!1);const X=yield qt(h.processParamsMaybeAddMcpUsage(E)),G=yield qt(h.generateContentStreamInternal(X)),I=[],x=[];try{for(var F=!0,q=(P=void 0,Ec(G)),K;K=yield qt(q.next()),N=K.done,!N;F=!0){z=K.value,F=!1;const R=z;if(yield yield qt(R),R.candidates&&(!((T=R.candidates[0])===null||T===void 0)&&T.content)){x.push(R.candidates[0].content);for(const L of(w=R.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(c<a&&L.functionCall){if(!L.functionCall.name)throw new Error("Function call name was not returned by the model.");if(g.has(L.functionCall.name)){const M=yield qt(g.get(L.functionCall.name).callTool([L.functionCall]));I.push(...M)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${g.keys()}, mising tool: ${L.functionCall.name}`)}}}}catch(R){P={error:R}}finally{try{!F&&!N&&(V=q.return)&&(yield qt(V.call(q)))}finally{if(P)throw P.error}}if(I.length>0){l=!0;const R=new Wu;R.candidates=[{content:{role:"user",parts:I}}],yield yield qt(R);const L=[];L.push(...x),L.push({role:"user",parts:I});const M=lr(E.contents).concat(L);E.contents=M}else break}})})(this,d,e)}async generateContentInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=cw(this.apiClient,e);return c=ye("{model}:generateContent",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=dw(g),T=new Wu;return Object.assign(T,E),T})}else{const h=uw(this.apiClient,e);return c=ye("{model}:generateContent",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=fw(g),T=new Wu;return Object.assign(T,E),T})}}async generateContentStreamInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=cw(this.apiClient,e);return c=ye("{model}:streamGenerateContent?alt=sse",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(E){return Rl(this,arguments,function*(){var T,w,N,P;try{for(var V=!0,z=Ec(E),F;F=yield qt(z.next()),T=F.done,!T;V=!0){P=F.value,V=!1;const q=P,K=dw(yield qt(q.json()));K.sdkHttpResponse={headers:q.headers};const X=new Wu;Object.assign(X,K),yield yield qt(X)}}catch(q){w={error:q}}finally{try{!V&&!T&&(N=z.return)&&(yield qt(N.call(z)))}finally{if(w)throw w.error}}})})}else{const h=uw(this.apiClient,e);return c=ye("{model}:streamGenerateContent?alt=sse",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),l.then(function(E){return Rl(this,arguments,function*(){var T,w,N,P;try{for(var V=!0,z=Ec(E),F;F=yield qt(z.next()),T=F.done,!T;V=!0){P=F.value,V=!1;const q=P,K=fw(yield qt(q.json()));K.sdkHttpResponse={headers:q.headers};const X=new Wu;Object.assign(X,K),yield yield qt(X)}}catch(q){w={error:q}}finally{try{!V&&!T&&(N=z.return)&&(yield qt(N.call(z)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=s5(this.apiClient,e);return c=ye("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=a5(g),T=new KA;return Object.assign(T,E),T})}else{const h=r5(this.apiClient,e);return c=ye("{model}:batchEmbedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=o5(g),T=new KA;return Object.assign(T,E),T})}}async generateImagesInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=g5(this.apiClient,e);return c=ye("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=v5(g),T=new JA;return Object.assign(T,E),T})}else{const h=m5(this.apiClient,e);return c=ye("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=y5(g),T=new JA;return Object.assign(T,E),T})}}async editImageInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=e5(this.apiClient,e);return a=ye("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>{const h=t5(d),g=new yU;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=hF(this.apiClient,e);return a=ye("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>{const h=pF(d),g=new vU;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=Y5(this.apiClient,e);return a=ye("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=W5(d),g=new _U;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=nF(this.apiClient,e);return a=ye("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=iF(d),g=new EU;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=L5(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>jy(g))}else{const h=P5(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>Gy(g))}}async listInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=z5(this.apiClient,e);return c=ye("{models_url}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=G5(g),T=new YA;return Object.assign(T,E),T})}else{const h=B5(this.apiClient,e);return c=ye("{models_url}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=H5(g),T=new YA;return Object.assign(T,E),T})}}async update(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=fF(this.apiClient,e);return c=ye("{model}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>jy(g))}else{const h=cF(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>Gy(g))}}async delete(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=W6(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=X6(g),T=new WA;return Object.assign(T,E),T})}else{const h=Y6(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=Q6(g),T=new WA;return Object.assign(T,E),T})}}async countTokens(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=$6(this.apiClient,e);return c=ye("{model}:countTokens",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=J6(g),T=new QA;return Object.assign(T,E),T})}else{const h=j6(this.apiClient,e);return c=ye("{model}:countTokens",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=K6(g),T=new QA;return Object.assign(T,E),T})}}async computeTokens(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=U6(this.apiClient,e);return a=ye("{model}:computeTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>{const h=F6(d),g=new TU;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=A5(this.apiClient,e);return c=ye("{model}:predictLongRunning",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>{const E=S5(g),T=new qh;return Object.assign(T,E),T})}else{const h=b5(this.apiClient,e);return c=ye("{model}:predictLongRunning",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>{const E=T5(g),T=new qh;return Object.assign(T,E),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KF extends As{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=fU(e);return c=ye("{operationName}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l}else{const h=cU(e);return c=ye("{operationName}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l}}async fetchPredictVideosOperationInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=iU(e);return a=ye("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JF(t){const e={},n=p(t,["data"]);if(n!=null&&y(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function YF(t){const e={},n=p(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>i9(a))),y(e,["parts"],s)}const i=p(t,["role"]);return i!=null&&y(e,["role"],i),e}function WF(t,e,n){const i={},s=p(e,["expireTime"]);n!==void 0&&s!=null&&y(n,["expireTime"],s);const a=p(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&y(n,["newSessionExpireTime"],a);const l=p(e,["uses"]);n!==void 0&&l!=null&&y(n,["uses"],l);const c=p(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&y(n,["bidiGenerateContentSetup"],n9(t,c));const d=p(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&y(n,["fieldMask"],d),i}function QF(t,e){const n={},i=p(e,["config"]);return i!=null&&y(n,["config"],WF(t,i,n)),n}function XF(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function ZF(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function e9(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function t9(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],i);const s=p(t,["responseModalities"]);e!==void 0&&s!=null&&y(e,["setup","generationConfig","responseModalities"],s);const a=p(t,["temperature"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","temperature"],a);const l=p(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=p(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const d=p(t,["maxOutputTokens"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","maxOutputTokens"],d);const h=p(t,["mediaResolution"]);e!==void 0&&h!=null&&y(e,["setup","generationConfig","mediaResolution"],h);const g=p(t,["seed"]);e!==void 0&&g!=null&&y(e,["setup","generationConfig","seed"],g);const E=p(t,["speechConfig"]);e!==void 0&&E!=null&&y(e,["setup","generationConfig","speechConfig"],S0(E));const T=p(t,["thinkingConfig"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","thinkingConfig"],T);const w=p(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],w);const N=p(t,["systemInstruction"]);e!==void 0&&N!=null&&y(e,["setup","systemInstruction"],YF(ei(N)));const P=p(t,["tools"]);if(e!==void 0&&P!=null){let G=Ql(P);Array.isArray(G)&&(G=G.map(I=>s9(Wl(I)))),y(e,["setup","tools"],G)}const V=p(t,["sessionResumption"]);e!==void 0&&V!=null&&y(e,["setup","sessionResumption"],r9(V));const z=p(t,["inputAudioTranscription"]);e!==void 0&&z!=null&&y(e,["setup","inputAudioTranscription"],z);const F=p(t,["outputAudioTranscription"]);e!==void 0&&F!=null&&y(e,["setup","outputAudioTranscription"],F);const q=p(t,["realtimeInputConfig"]);e!==void 0&&q!=null&&y(e,["setup","realtimeInputConfig"],q);const K=p(t,["contextWindowCompression"]);e!==void 0&&K!=null&&y(e,["setup","contextWindowCompression"],K);const X=p(t,["proactivity"]);return e!==void 0&&X!=null&&y(e,["setup","proactivity"],X),n}function n9(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["setup","model"],gt(t,i));const s=p(e,["config"]);return s!=null&&y(n,["config"],t9(s,n)),n}function i9(t){const e={},n=p(t,["functionCall"]);n!=null&&y(e,["functionCall"],n);const i=p(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const s=p(t,["executableCode"]);s!=null&&y(e,["executableCode"],s);const a=p(t,["fileData"]);a!=null&&y(e,["fileData"],XF(a));const l=p(t,["functionResponse"]);l!=null&&y(e,["functionResponse"],l);const c=p(t,["inlineData"]);c!=null&&y(e,["inlineData"],JF(c));const d=p(t,["text"]);d!=null&&y(e,["text"],d);const h=p(t,["thought"]);h!=null&&y(e,["thought"],h);const g=p(t,["thoughtSignature"]);g!=null&&y(e,["thoughtSignature"],g);const E=p(t,["videoMetadata"]);return E!=null&&y(e,["videoMetadata"],E),e}function r9(t){const e={},n=p(t,["handle"]);if(n!=null&&y(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function s9(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(E=>E)),y(e,["functionDeclarations"],g)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const s=p(t,["computerUse"]);s!=null&&y(e,["computerUse"],s);const a=p(t,["fileSearch"]);a!=null&&y(e,["fileSearch"],a);const l=p(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],ZF(c));const d=p(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],e9(d));const h=p(t,["urlContext"]);return h!=null&&y(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function o9(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const s=Object.keys(i).map(a=>`${n}.${a}`);e.push(...s)}else e.push(n)}return e.join(",")}function a9(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const a=o9(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];s.length>0&&(c=s.map(h=>l.includes(h)?`generationConfig.${h}`:h));const d=[];a&&d.push(a),c.length>0&&d.push(...c),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class l9 extends As{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=QF(this.apiClient,e);a=ye("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const d=a9(c,e.config);return s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function u9(t,e){const n={},i=p(t,["displayName"]);return e!==void 0&&i!=null&&y(e,["displayName"],i),n}function c9(t){const e={},n=p(t,["config"]);return n!=null&&u9(n,e),e}function f9(t,e){const n={},i=p(t,["force"]);return e!==void 0&&i!=null&&y(e,["_query","force"],i),n}function d9(t){const e={},n=p(t,["name"]);n!=null&&y(e,["_url","name"],n);const i=p(t,["config"]);return i!=null&&f9(i,e),e}function h9(t){const e={},n=p(t,["name"]);return n!=null&&y(e,["_url","name"],n),e}function p9(t,e){const n={},i=p(t,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),y(e,["customMetadata"],a)}const s=p(t,["chunkingConfig"]);return e!==void 0&&s!=null&&y(e,["chunkingConfig"],s),n}function m9(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["metadata"]);i!=null&&y(e,["metadata"],i);const s=p(t,["done"]);s!=null&&y(e,["done"],s);const a=p(t,["error"]);a!=null&&y(e,["error"],a);const l=p(t,["response"]);return l!=null&&y(e,["response"],y9(l)),e}function g9(t){const e={},n=p(t,["fileSearchStoreName"]);n!=null&&y(e,["_url","file_search_store_name"],n);const i=p(t,["fileName"]);i!=null&&y(e,["fileName"],i);const s=p(t,["config"]);return s!=null&&p9(s,e),e}function y9(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&y(e,["parent"],i);const s=p(t,["documentName"]);return s!=null&&y(e,["documentName"],s),e}function v9(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);return e!==void 0&&s!=null&&y(e,["_query","pageToken"],s),n}function _9(t){const e={},n=p(t,["config"]);return n!=null&&v9(n,e),e}function E9(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const s=p(t,["fileSearchStores"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),y(e,["fileSearchStores"],a)}return e}function T9(t,e){const n={},i=p(t,["mimeType"]);e!==void 0&&i!=null&&y(e,["mimeType"],i);const s=p(t,["displayName"]);e!==void 0&&s!=null&&y(e,["displayName"],s);const a=p(t,["customMetadata"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>d)),y(e,["customMetadata"],c)}const l=p(t,["chunkingConfig"]);return e!==void 0&&l!=null&&y(e,["chunkingConfig"],l),n}function S9(t){const e={},n=p(t,["fileSearchStoreName"]);n!=null&&y(e,["_url","file_search_store_name"],n);const i=p(t,["config"]);return i!=null&&T9(i,e),e}function b9(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function A9(t,e){const n={},i=p(t,["force"]);return e!==void 0&&i!=null&&y(e,["_query","force"],i),n}function w9(t){const e={},n=p(t,["name"]);n!=null&&y(e,["_url","name"],n);const i=p(t,["config"]);return i!=null&&A9(i,e),e}function C9(t){const e={},n=p(t,["name"]);return n!=null&&y(e,["_url","name"],n),e}function I9(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);return e!==void 0&&s!=null&&y(e,["_query","pageToken"],s),n}function x9(t){const e={},n=p(t,["parent"]);n!=null&&y(e,["_url","parent"],n);const i=p(t,["config"]);return i!=null&&I9(i,e),e}function R9(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const s=p(t,["documents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),y(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class N9 extends As{constructor(e){super(),this.apiClient=e,this.list=async n=>new Ia(Ss.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=C9(e);return a=ye("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,i;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=w9(e);s=ye("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=x9(e);return a=ye("{parent}/documents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=R9(d),g=new SU;return Object.assign(g,h),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class D9 extends As{constructor(e,n=new N9(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new Ia(Ss.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=c9(e);return a=ye("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async get(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=h9(e);return a=ye("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,i;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=d9(e);s=ye("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=_9(e);return a=ye("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=E9(d),g=new bU;return Object.assign(g,h),g})}}async uploadToFileSearchStoreInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=S9(e);return a=ye("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=b9(d),g=new AU;return Object.assign(g,h),g})}}async importFile(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=g9(e);return a=ye("{file_search_store_name}:importFile",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=m9(d),g=new y0;return Object.assign(g,h),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function M9(t,e){const n={},i=p(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function k9(t,e){const n={},i=p(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function P9(t,e,n){const i={};if(p(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=p(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&y(e,["displayName"],s),p(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=p(t,["epochCount"]);e!==void 0&&a!=null&&y(e,["tuningTask","hyperparameters","epochCount"],a);const l=p(t,["learningRateMultiplier"]);if(l!=null&&y(i,["tuningTask","hyperparameters","learningRateMultiplier"],l),p(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(p(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(p(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=p(t,["batchSize"]);e!==void 0&&c!=null&&y(e,["tuningTask","hyperparameters","batchSize"],c);const d=p(t,["learningRate"]);if(e!==void 0&&d!=null&&y(e,["tuningTask","hyperparameters","learningRate"],d),p(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(p(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function L9(t,e,n){const i={};let s=p(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const w=p(t,["validationDataset"]);e!==void 0&&w!=null&&y(e,["supervisedTuningSpec"],_w(w))}else if(s==="PREFERENCE_TUNING"){const w=p(t,["validationDataset"]);e!==void 0&&w!=null&&y(e,["preferenceOptimizationSpec"],_w(w))}const a=p(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&y(e,["tunedModelDisplayName"],a);const l=p(t,["description"]);e!==void 0&&l!=null&&y(e,["description"],l);let c=p(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const w=p(t,["epochCount"]);e!==void 0&&w!=null&&y(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(c==="PREFERENCE_TUNING"){const w=p(t,["epochCount"]);e!==void 0&&w!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let d=p(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const w=p(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&y(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(d==="PREFERENCE_TUNING"){const w=p(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let h=p(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const w=p(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&y(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(h==="PREFERENCE_TUNING"){const w=p(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&y(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let g=p(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const w=p(t,["adapterSize"]);e!==void 0&&w!=null&&y(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(g==="PREFERENCE_TUNING"){const w=p(t,["adapterSize"]);e!==void 0&&w!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(p(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(p(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=p(t,["labels"]);e!==void 0&&E!=null&&y(e,["labels"],E);const T=p(t,["beta"]);return e!==void 0&&T!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),i}function V9(t,e){const n={},i=p(t,["baseModel"]);i!=null&&y(n,["baseModel"],i);const s=p(t,["preTunedModel"]);s!=null&&y(n,["preTunedModel"],s);const a=p(t,["trainingDataset"]);a!=null&&K9(a);const l=p(t,["config"]);return l!=null&&P9(l,n),n}function O9(t,e){const n={},i=p(t,["baseModel"]);i!=null&&y(n,["baseModel"],i);const s=p(t,["preTunedModel"]);s!=null&&y(n,["preTunedModel"],s);const a=p(t,["trainingDataset"]);a!=null&&J9(a,n,e);const l=p(t,["config"]);return l!=null&&L9(l,n,e),n}function U9(t,e){const n={},i=p(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function F9(t,e){const n={},i=p(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function q9(t,e,n){const i={},s=p(t,["pageSize"]);e!==void 0&&s!=null&&y(e,["_query","pageSize"],s);const a=p(t,["pageToken"]);e!==void 0&&a!=null&&y(e,["_query","pageToken"],a);const l=p(t,["filter"]);return e!==void 0&&l!=null&&y(e,["_query","filter"],l),i}function B9(t,e,n){const i={},s=p(t,["pageSize"]);e!==void 0&&s!=null&&y(e,["_query","pageSize"],s);const a=p(t,["pageToken"]);e!==void 0&&a!=null&&y(e,["_query","pageToken"],a);const l=p(t,["filter"]);return e!==void 0&&l!=null&&y(e,["_query","filter"],l),i}function z9(t,e){const n={},i=p(t,["config"]);return i!=null&&q9(i,n),n}function H9(t,e){const n={},i=p(t,["config"]);return i!=null&&B9(i,n),n}function G9(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const s=p(t,["nextPageToken"]);s!=null&&y(n,["nextPageToken"],s);const a=p(t,["tunedModels"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>AR(c))),y(n,["tuningJobs"],l)}return n}function j9(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const s=p(t,["nextPageToken"]);s!=null&&y(n,["nextPageToken"],s);const a=p(t,["tuningJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>Ky(c))),y(n,["tuningJobs"],l)}return n}function $9(t,e){const n={},i=p(t,["name"]);i!=null&&y(n,["model"],i);const s=p(t,["name"]);return s!=null&&y(n,["endpoint"],s),n}function K9(t,e){const n={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=p(t,["examples"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),y(n,["examples","examples"],s)}return n}function J9(t,e,n){const i={};let s=p(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const l=p(t,["gcsUri"]);e!==void 0&&l!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(s==="PREFERENCE_TUNING"){const l=p(t,["gcsUri"]);e!==void 0&&l!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let a=p(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const l=p(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(a==="PREFERENCE_TUNING"){const l=p(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(p(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function AR(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const s=p(t,["name"]);s!=null&&y(n,["name"],s);const a=p(t,["state"]);a!=null&&y(n,["state"],sR(a));const l=p(t,["createTime"]);l!=null&&y(n,["createTime"],l);const c=p(t,["tuningTask","startTime"]);c!=null&&y(n,["startTime"],c);const d=p(t,["tuningTask","completeTime"]);d!=null&&y(n,["endTime"],d);const h=p(t,["updateTime"]);h!=null&&y(n,["updateTime"],h);const g=p(t,["description"]);g!=null&&y(n,["description"],g);const E=p(t,["baseModel"]);E!=null&&y(n,["baseModel"],E);const T=p(t,["_self"]);return T!=null&&y(n,["tunedModel"],$9(T)),n}function Ky(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const s=p(t,["name"]);s!=null&&y(n,["name"],s);const a=p(t,["state"]);a!=null&&y(n,["state"],sR(a));const l=p(t,["createTime"]);l!=null&&y(n,["createTime"],l);const c=p(t,["startTime"]);c!=null&&y(n,["startTime"],c);const d=p(t,["endTime"]);d!=null&&y(n,["endTime"],d);const h=p(t,["updateTime"]);h!=null&&y(n,["updateTime"],h);const g=p(t,["error"]);g!=null&&y(n,["error"],g);const E=p(t,["description"]);E!=null&&y(n,["description"],E);const T=p(t,["baseModel"]);T!=null&&y(n,["baseModel"],T);const w=p(t,["tunedModel"]);w!=null&&y(n,["tunedModel"],w);const N=p(t,["preTunedModel"]);N!=null&&y(n,["preTunedModel"],N);const P=p(t,["supervisedTuningSpec"]);P!=null&&y(n,["supervisedTuningSpec"],P);const V=p(t,["preferenceOptimizationSpec"]);V!=null&&y(n,["preferenceOptimizationSpec"],V);const z=p(t,["tuningDataStats"]);z!=null&&y(n,["tuningDataStats"],z);const F=p(t,["encryptionSpec"]);F!=null&&y(n,["encryptionSpec"],F);const q=p(t,["partnerModelTuningSpec"]);q!=null&&y(n,["partnerModelTuningSpec"],q);const K=p(t,["customBaseModel"]);K!=null&&y(n,["customBaseModel"],K);const X=p(t,["experiment"]);X!=null&&y(n,["experiment"],X);const G=p(t,["labels"]);G!=null&&y(n,["labels"],G);const I=p(t,["outputUri"]);I!=null&&y(n,["outputUri"],I);const x=p(t,["pipelineJob"]);x!=null&&y(n,["pipelineJob"],x);const R=p(t,["serviceAccount"]);R!=null&&y(n,["serviceAccount"],R);const L=p(t,["tunedModelDisplayName"]);L!=null&&y(n,["tunedModelDisplayName"],L);const M=p(t,["veoTuningSpec"]);return M!=null&&y(n,["veoTuningSpec"],M),n}function Y9(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const s=p(t,["name"]);s!=null&&y(n,["name"],s);const a=p(t,["metadata"]);a!=null&&y(n,["metadata"],a);const l=p(t,["done"]);l!=null&&y(n,["done"],l);const c=p(t,["error"]);return c!=null&&y(n,["error"],c),n}function _w(t,e){const n={},i=p(t,["gcsUri"]);i!=null&&y(n,["validationDatasetUri"],i);const s=p(t,["vertexDatasetResource"]);return s!=null&&y(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class W9 extends As{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Ia(Ss.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:s});return a.baseModel=void 0,await this.tuneInternal(a)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),a=await this.tuneMldevInternal(s);let l="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?l=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(l=a.name.split("/operations/")[0]),{name:l,state:qy.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=F9(e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>Ky(g))}else{const h=U9(e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>AR(g))}}async listInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=H9(e);return c=ye("tuningJobs",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=j9(g),T=new XA;return Object.assign(T,E),T})}else{const h=z9(e);return c=ye("tunedModels",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:g.headers},T})),l.then(g=>{const E=G9(g),T=new XA;return Object.assign(T,E),T})}}async cancel(e){var n,i,s,a;let l="",c={};if(this.apiClient.isVertexAI()){const d=k9(e);l=ye("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=M9(e);l=ye("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=O9(e,e);return a=ye("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>Ky(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=V9(e);return a=ye("tunedModels",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>Y9(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Q9{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const X9=1024*1024*8,Z9=3,eq=1e3,tq=2,zh="x-goog-upload-status";async function nq(t,e,n){var i;const s=await wR(t,e,n),a=await(s==null?void 0:s.json());if(((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[zh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function iq(t,e,n){var i;const s=await wR(t,e,n),a=await(s==null?void 0:s.json());if(((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[zh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=Zx(a),c=new v0;return Object.assign(c,l),c}async function wR(t,e,n){var i,s;let a=0,l=0,c=new By(new Response),d="upload";for(a=t.size;l<a;){const h=Math.min(X9,a-l),g=t.slice(l,l+h);l+h>=a&&(d+=", finalize");let E=0,T=eq;for(;E<Z9&&(c=await n.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(l),"Content-Length":String(h)}}}),!(!((i=c==null?void 0:c.headers)===null||i===void 0)&&i[zh]));)E++,await sq(T),T=T*tq;if(l+=h,((s=c==null?void 0:c.headers)===null||s===void 0?void 0:s[zh])!=="active")break;if(a<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function rq(t){return{size:t.size,type:t.type}}function sq(t){return new Promise(e=>setTimeout(e,t))}class oq{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await nq(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await iq(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await rq(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aq{create(e,n,i){return new lq(e,n,i)}}class lq{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ew="x-goog-api-key";class uq{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(Ew)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Ew,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cq="gl-node/";class fq{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=tU(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const s=new uq(this.apiKey);this.apiClient=new IF({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:cq+"web",uploader:new oq,downloader:new Q9}),this.models=new $F(this.apiClient),this.live=new qF(this.apiClient,s,new aq),this.batches=new C3(this.apiClient),this.chats=new r6(this.models,this.apiClient),this.caches=new t6(this.apiClient),this.files=new p6(this.apiClient),this.operations=new KF(this.apiClient),this.authTokens=new l9(this.apiClient),this.tunings=new W9(this.apiClient),this.fileSearchStores=new D9(this.apiClient)}}const CR={geminiApiKey:"AIzaSyBAzdNikRnpu5iyeg8VJ03fc0HXVG2B2iY",openWeatherApiKey:"074ebc9404ca1a72d5b0759070161539"},Rp=new fq({apiKey:CR.geminiApiKey});async function dq(t){const e={text:`Analyse chacune des images de vtements fournies. Pour chaque image, dans l'ordre, extrais les informations suivantes en franais :
    1. Une description concise incluant son type (ex: T-shirt, jean), sa couleur principale, et son style.
    2. Sa catgorie : "Hauts", "Bas", "Chaussures", ou "Accessoires".
    3. Sa couleur principale (ex: "Bleu", "Noir"). Sois concis.
    4. Sa matire principale (ex: "Coton", "Cuir"). Sois concis.
    
    Retourne le rsultat sous la forme d'un objet JSON unique contenant une cl "items", qui est un tableau d'objets. Chaque objet du tableau doit correspondre  une image et contenir les champs : "analysis", "category", "color", et "material".`},n=t.map(s=>({inlineData:{data:s,mimeType:"image/jpeg"}})),i=await Rp.models.generateContent({model:"gemini-flash-latest",contents:{parts:[e,...n]},config:{responseMimeType:"application/json",responseSchema:{type:qe.OBJECT,properties:{items:{type:qe.ARRAY,description:"Un tableau d'analyses pour chaque vtement.",items:{type:qe.OBJECT,properties:{analysis:{type:qe.STRING,description:"La description concise du vtement."},category:{type:qe.STRING,description:'La catgorie du vtement parmi "Hauts", "Bas", "Chaussures", ou "Accessoires".',enum:["Hauts","Bas","Chaussures","Accessoires"]},color:{type:qe.STRING,description:"La couleur principale du vtement."},material:{type:qe.STRING,description:"La matire principale du vtement."}},required:["analysis","category","color","material"]}}},required:["items"]}}});try{const s=JSON.parse(i.text),a=["Hauts","Bas","Chaussures","Accessoires"];return s.items.forEach(l=>{a.includes(l.category)||(console.warn(`Catgorie invalide reue de l'IA: ${l.category}, fallback sur "Accessoires"`),l.category="Accessoires")}),s.items}catch(s){throw console.error("Erreur de parsing de la rponse de l'IA pour l'analyse par lot:",s),console.error("Rponse reue:",i.text),new Error("L'IA a renvoy une rponse d'analyse malforme.")}}function hq(t){return t&&t.name&&Array.isArray(t.itemIds)}async function pq(t,e,n,i){const s=new Set((e||[]).flatMap(T=>T.itemIds)),l=t.filter(T=>!s.has(T.id)).map(T=>`- ${T.analysis} (ID: ${T.id}, Cat: ${T.category}, Couleur: ${T.color}, Mat: ${T.material})`).join(`
`),c=e.map(T=>`- ${T.name} (Ensemble, ID: ${T.id})`).join(`
`),d=[l,c].filter(Boolean).join(`
`),h=i?`
**RGLE D'ANCRAGE : Chaque tenue DOIT imprativement inclure l'article ou l'ensemble suivant : "${hq(i)?i.name:i.analysis} (ID: ${i.id})". C'est la pice matresse.**
`:"",g=`
    Tu es un styliste de mode expert. Ta mission est de crer des tenues pertinentes, compltes et harmonieuses.

    Contexte de l'utilisateur : "${n}"
    
    Vtements et Ensembles disponibles (utilise leur ID, Cat, Couleur, Mat) :
    ${d}
    ${h}

    ---
    RGLES DE STYLE (CRITIQUES) :
    Ce sont des rgles impratives.
    1. **Montre :** Chaque tenue DOIT inclure une montre (Cat: "Accessoires"). Choisis la plus adapte au style de la tenue. Si aucune montre n'est disponible, n'en invente pas.
    2. **Mto (Veste) :** Le "Contexte" inclut la mto. Si la temprature est infrieure  20C, la tenue DOIT inclure une veste, un manteau, ou un gilet (Cat: "Hauts").
    3. **Pull Col V :** Si tu inclus un pull  col en "V" (Cat: "Hauts"), tu DOIS imprativement le superposer avec une chemise  col boutonn (Cat: "Hauts") en dessous.
    4. **Pull Col Zipp :** Si tu inclus un pull  col zipp (Cat: "Hauts"), tu DOIS imprativement le superposer avec une chemise ou un t-shirt (Cat: "Hauts") en dessous.

    ---
    RGLES DE STYLE (GNRALES) :
    1. **Cohrence :** Une tenue doit tre complte et logique. Elle doit inclure au moins un "Hauts" et un "Bas". Si des "Chaussures" pertinentes existent, inclus-les.
    2. **Harmonie :** Assure-toi que les couleurs et les matires de la tenue sont bien assorties.
    3. **Varit :** Les 3 tenues proposes doivent tre distinctes les unes des autres.

    ---
    RGLES DE FORMAT (OBLIGATOIRES) :
    1. Base-toi **uniquement** sur les vtements et ensembles lists ci-dessus.
    2. Pour chaque article que tu slectionnes, tu DOIS fournir son ID exact et sa description.
    3. Les articles marqus comme "(Ensemble)" sont insparables.

    Cre 3 tenues distinctes. Pour chaque tenue, fournis :
    1. Un "titre" court et accrocheur.
    2. Une "description" brve du style et *pourquoi* elle est adapte au contexte et respecte les rgles.
    3. Une liste "vetements" d'objets, o chaque objet contient "id" et "description" de l'article ou de l'ensemble utilis.

    Rponds en franais.
  `,E=await Rp.models.generateContent({model:"gemini-flash-latest",contents:g,config:{responseMimeType:"application/json",responseSchema:{type:qe.OBJECT,properties:{tenues:{type:qe.ARRAY,description:"La liste des suggestions de tenues.",items:{type:qe.OBJECT,properties:{titre:{type:qe.STRING,description:"Le nom de la tenue."},description:{type:qe.STRING,description:"Une brve description du style de la tenue."},vetements:{type:qe.ARRAY,description:"La liste des objets vtements composant la tenue.",items:{type:qe.OBJECT,properties:{id:{type:qe.STRING,description:"L'ID de l'article ou de l'ensemble."},description:{type:qe.STRING,description:"La description de l'article."}},required:["id","description"]}}},required:["titre","description","vetements"]}}},required:["tenues"]}}});try{return JSON.parse(E.text).tenues}catch(T){throw console.error("Erreur de parsing JSON de la rponse Gemini:",T),console.error("Rponse reue:",E.text),new Error("L'IA a renvoy une rponse malforme.")}}async function mq(t,e){const n=t.map(a=>`${a.category}: ${a.analysis}, couleur ${a.color}, matire ${a.material}`).join(`
`),i=`Tu es un expert en mode et stylisme. Analyse cette garde-robe et suggre des pices stratgiques  acheter pour la rendre plus versatile et polyvalente.

GARDE-ROBE ACTUELLE (${t.length} pices):
${n}

Analyse la garde-robe et identifie:
1. Les points forts de cette garde-robe
2. Les manques ou gaps  combler
3. Les pices  acheter pour maximiser la polyvalence

Suggre 3-5 pices maximum en priorisant les basiques polyvalents.`,s=await Rp.models.generateContent({model:"gemini-flash-latest",contents:i,config:{responseMimeType:"application/json",responseSchema:{type:qe.OBJECT,properties:{summary:{type:qe.STRING,description:"Rsum gnral de la garde-robe (2-3 phrases)"},strengths:{type:qe.ARRAY,items:{type:qe.STRING},description:"Liste des points forts"},gaps:{type:qe.ARRAY,items:{type:qe.STRING},description:"Liste des manques"},suggestions:{type:qe.ARRAY,items:{type:qe.OBJECT,properties:{category:{type:qe.STRING},description:{type:qe.STRING},reason:{type:qe.STRING},priority:{type:qe.STRING,enum:["high","medium","low"]},estimatedPrice:{type:qe.STRING}},required:["category","description","reason","priority","estimatedPrice"]}}},required:["summary","strengths","gaps","suggestions"]}}});try{return JSON.parse(s.text)}catch(a){throw console.error("Erreur:",a),a}}async function gq(t,e,n,i){const s=new Set((e||[]).flatMap(E=>E.itemIds)),l=t.filter(E=>!s.has(E.id)).map(E=>`- ${E.analysis} (ID: ${E.id}, Cat: ${E.category}, Couleur: ${E.color}, Mat: ${E.material})`).join(`
`),c=e.map(E=>`- ${E.name} (Ensemble, ID: ${E.id})`).join(`
`),d=[l,c].filter(Boolean).join(`
`),h=`
    Tu es un styliste de voyage. Ta mission est de crer une valise optimise.

    Dtails du voyage :
    - Dure : ${n} jour(s)
    - Contexte / Mto : "${i}"

    Vtements et Ensembles disponibles (utilise leur ID, Cat, Couleur, Mat) :
    ${d}
    
    RGLES :
    1. Cre une liste "valise" polyvalente et minimale. Vise la "mix-and-match" (articles qui vont ensemble).
    2. Ne slectionne QUE des articles de la liste fournie.
    3. Pour chaque article que tu slectionnes, tu DOIS fournir son ID exact et sa description.
    4. Les articles marqus comme "(Ensemble)" sont insparables.
    5. Prends en compte le Contexte/Mto pour la slection.

    Rponds avec un "titre", un "resume" (explique la stratgie de la valise), et la liste "valise".
    La liste "valise" doit contenir des objets, o chaque objet contient "id" et "description".
    `,g=await Rp.models.generateContent({model:"gemini-flash-latest",contents:h,config:{responseMimeType:"application/json",responseSchema:{type:qe.OBJECT,properties:{titre:{type:qe.STRING,description:"Le nom du plan de valise."},resume:{type:qe.STRING,description:"Un bref rsum de la stratgie de la valise."},valise:{type:qe.ARRAY,description:"La liste des objets vtements  emporter.",items:{type:qe.OBJECT,properties:{id:{type:qe.STRING,description:"L'ID de l'article ou de l'ensemble."},description:{type:qe.STRING,description:"La description de l'article."}},required:["id","description"]}}},required:["titre","resume","valise"]}}});try{return JSON.parse(g.text)}catch(E){throw console.error("Erreur de parsing JSON:",E),new Error("L'IA a renvoy une rponse malforme.")}}const yq=httpsCallable(functions,"generateVisualOutfitOnServer");async function vq(t,e){console.log("Appel de la Cloud Function 'generateVisualOutfitOnServer'...");try{const n={context:e,items:t.map(a=>({analysis:a.analysis,imageSrc:a.imageSrc}))},s=(await yq(n)).data;if(!s||!s.imageUrl)throw new Error("La Cloud Function n'a pas renvoy d'URL d'image.");return console.log("Rendu visuel reu de la Cloud Function."),s.imageUrl}catch(n){throw console.error("Erreur lors de l'appel  la Cloud Function:",n),new Error(`chec de la gnration : ${n}`)}}const _q=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),Eq=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),Tw=()=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),IR=({className:t="h-8 w-8 text-gold"})=>b.jsxs("svg",{className:`animate-spin ${t}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[b.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),b.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),A0=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{d:"M10 3a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0V7H8a1 1 0 110-2h1V4a1 1 0 011-1zM4 9a1 1 0 011 1v1h1a1 1 0 110 2H5v1a1 1 0 11-2 0v-1H2a1 1 0 110-2h1v-1a1 1 0 011-1zM16 9a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})}),w0=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Sw=()=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.5 6.6C12.5 5.54903 11.651 4.7 10.6 4.7C9.54903 4.7 8.7 5.54903 8.7 6.6V8.7C8.7 9.36274 9.23726 9.9 9.9 9.9H14.1C14.7627 9.9 15.3 9.36274 15.3 8.7V7.8"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.10879 16.5C4.43285 14.805 5.86246 13.5 7.6 13.5H16.4C18.1375 13.5 19.5672 14.805 19.8912 16.5L20.5 19.5H3.5L4.10879 16.5Z"})]}),xR=()=>b.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4 0 1.132-.497 2.16-1.32 2.874-.823.714-1.823 1.126-2.904 1.126H12v.01M12 17h.01"})}),Tq=()=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 4h6l2 5-2 1-3-4-3 4-2-1 2-5z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v10m-3-10v10h6V10"})]}),Sq=()=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 4h12v10H6z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 14v6h-2L6 4"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 14v6h2l1-16"})]}),bq=()=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 18h16l-3-6H7L4 18z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 12V7a2 2 0 012-2h0a2 2 0 012 2v5"})]}),Aq=()=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 000-18 9 9 0 000 18z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11.5l-3.5 3.5"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.5 8.5l-3.5 3.5"})]}),wq=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),C0=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Np=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),I0=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),Cq=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),Iq=()=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[b.jsx("path",{d:"M8 3a1 1 0 000 2h4a1 1 0 100-2H8z"}),b.jsx("path",{fillRule:"evenodd",d:"M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 3a1 1 0 011-1h10a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1V7z",clipRule:"evenodd"})]}),x0=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 016.364 0L12 7.5l1.318-1.182a4.5 4.5 0 116.364 6.364L12 18.75l-7.682-7.682a4.5 4.5 0 010-6.364z"})}),Dp=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),xq=()=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})]}),Rq=({theme:t,toggleTheme:e,children:n})=>b.jsx("header",{className:"bg-snow/80 dark:bg-onyx/80 backdrop-blur-lg border-b border-black/5 dark:border-white/10 sticky top-0 z-50",children:b.jsxs("div",{className:"container mx-auto px-4 lg:px-8 h-24 flex justify-between items-center",children:[b.jsxs("h1",{className:"text-4xl font-serif font-bold tracking-wider text-raisin-black dark:text-snow",children:["Dress ",b.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),b.jsxs("div",{className:"flex items-center gap-4",children:[n,b.jsx("button",{onClick:e,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-black/5 dark:hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx transition-colors","aria-label":"Changer le thme",children:t==="light"?b.jsx(Eq,{}):b.jsx(_q,{})})]})]})}),bw=({user:t})=>{var w,N,P;const[e,n]=$.useState(""),[i,s]=$.useState(""),[a,l]=$.useState(!1),[c,d]=$.useState(!1),h=$.useRef(null);$.useEffect(()=>{const V=z=>{h.current&&!h.current.contains(z.target)&&d(!1)};return c&&document.addEventListener("mousedown",V),()=>{document.removeEventListener("mousedown",V)}},[c]);const g=async()=>{try{await yk(lc,W4)}catch(V){console.error("Erreur de connexion Google:",V)}},E=async V=>{V.preventDefault();try{a?await $M(lc,e,i):await KM(lc,e,i)}catch(z){console.error("Erreur d'authentification:",z)}},T=async()=>{try{await QM(lc)}catch(V){console.error("Erreur de dconnexion:",V)}};return t?b.jsxs("div",{className:"relative",ref:h,children:[b.jsxs("button",{onClick:()=>d(!c),className:"flex items-center gap-3 px-4 py-2 rounded-full bg-gold/10 hover:bg-gold/20 transition-all border border-gold/30",children:[b.jsx("div",{className:"w-8 h-8 rounded-full bg-gold flex items-center justify-center text-onyx font-bold",children:(((w=t.displayName)==null?void 0:w[0])||((N=t.email)==null?void 0:N[0])||"U").toUpperCase()}),b.jsx("span",{className:"hidden md:block text-sm font-medium",children:t.displayName||((P=t.email)==null?void 0:P.split("@")[0])})]}),c&&b.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-raisin-black rounded-xl shadow-2xl border border-black/10 dark:border-white/10 overflow-hidden z-50",children:[b.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[b.jsx("p",{className:"text-sm font-medium",children:t.displayName||"Utilisateur"}),b.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.email})]}),b.jsxs("button",{onClick:T,className:"w-full px-4 py-3 text-left text-sm hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors flex items-center gap-2",children:[b.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Dconnexion"]})]})]}):b.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl p-8 max-w-md mx-auto border border-black/5 dark:border-white/10",children:[b.jsxs("div",{className:"text-center mb-8",children:[b.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:["Dress ",b.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:a?"Crez votre compte":"Bienvenue"})]}),b.jsxs("button",{onClick:g,className:"w-full mb-6 px-6 py-4 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl hover:border-gold hover:shadow-lg hover:shadow-gold/20 transition-all duration-300 flex items-center justify-center gap-3 group",children:[b.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[b.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),b.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),b.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),b.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),b.jsx("span",{className:"font-semibold group-hover:text-gold transition-colors",children:"Continuer avec Google"})]}),b.jsxs("div",{className:"relative my-6",children:[b.jsx("div",{className:"absolute inset-0 flex items-center",children:b.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),b.jsx("div",{className:"relative flex justify-center text-sm",children:b.jsx("span",{className:"px-4 bg-white dark:bg-raisin-black text-gray-500",children:"Ou avec email"})})]}),b.jsxs("form",{onSubmit:E,className:"space-y-4",children:[b.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:V=>n(V.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),b.jsx("input",{type:"password",placeholder:"Mot de passe",value:i,onChange:V=>s(V.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),b.jsx("button",{type:"submit",className:"w-full px-6 py-4 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all duration-300 font-bold",children:a?"Crer mon compte":"Se connecter"})]}),b.jsx("button",{onClick:()=>l(!a),className:"w-full mt-6 text-sm text-gray-500 hover:text-gold transition-colors",children:a?"Dj un compte ? Se connecter":"Pas encore de compte ? S'inscrire"})]})},Nq=({onAnalyze:t,isAnalyzing:e})=>{const n=$.useRef(null),[i,s]=$.useState([]),[a,l]=$.useState(!1),[c,d]=$.useState(!1);$.useEffect(()=>{const F=()=>d(window.innerWidth<1024);return F(),window.addEventListener("resize",F),()=>window.removeEventListener("resize",F)},[]),$.useEffect(()=>()=>{i.forEach(F=>URL.revokeObjectURL(F.preview))},[i]);const h=F=>{const q=F.map(K=>({id:`${K.name}-${K.lastModified}-${Math.random()}`,file:K,preview:URL.createObjectURL(K)}));s(K=>[...K,...q])},g=F=>{F.target.files&&(h(Array.from(F.target.files)),F.target.value="")},E=()=>{var F;e||(F=n.current)==null||F.click()},T=F=>{c||(F.preventDefault(),F.stopPropagation(),l(!0))},w=F=>{c||(F.preventDefault(),F.stopPropagation(),l(!1))},N=F=>{c||(F.preventDefault(),F.stopPropagation())},P=F=>{c||(F.preventDefault(),F.stopPropagation(),l(!1),F.dataTransfer.files&&F.dataTransfer.files.length>0&&(h(Array.from(F.dataTransfer.files)),F.dataTransfer.clearData()))},V=F=>{const q=i.find(K=>K.id===F);q&&URL.revokeObjectURL(q.preview),s(K=>K.filter(X=>X.id!==F))},z=()=>{i.length>0&&!e&&(t(i.map(F=>F.file)),s([]))};return b.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",onDragEnter:T,onDragLeave:w,onDragOver:N,onDrop:P,children:[b.jsx("h2",{className:"text-2xl font-serif font-bold mb-6 text-gold",children:"Ajouter  ma garde-robe"}),b.jsxs("div",{onClick:E,className:`relative bg-snow dark:bg-onyx rounded-lg p-12 text-center transition-all duration-300 ring-1 ring-dashed ring-black/20 dark:ring-white/20 ${e?"cursor-default":"cursor-pointer hover:ring-gold dark:hover:ring-gold"}`,children:[b.jsx("input",{type:"file",ref:n,onChange:g,className:"hidden",accept:"image/png, image/jpeg, image/webp",multiple:!0,disabled:e}),b.jsx("div",{className:"flex flex-col items-center justify-center min-h-[8rem]",children:e?b.jsxs(b.Fragment,{children:[b.jsx(IR,{}),b.jsx("p",{className:"mt-4 text-sm font-medium text-gray-500 dark:text-gray-400 tracking-wide",children:"Analyse en cours..."})]}):b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:b.jsx(Tw,{})}),b.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:c?"Appuyez pour ajouter des photos":"Glissez-dposez vos photos"}),b.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["ou ",b.jsx("span",{className:"text-gold font-medium",children:"cliquez pour slectionner"})]})]})}),a&&!c&&b.jsxs("div",{className:"absolute inset-0 bg-gold/90 backdrop-blur-sm rounded-lg flex flex-col items-center justify-center transition-opacity",children:[b.jsx("div",{className:"text-black transform-gpu scale-110",children:b.jsx(Tw,{})}),b.jsx("p",{className:"mt-2 font-bold text-lg text-black",children:"Dposez pour ajouter"})]})]}),i.length>0&&!e&&b.jsxs("div",{className:"mt-8",children:[b.jsx("h3",{className:"font-semibold mb-4 text-gray-600 dark:text-gray-300",children:"Prts pour l'analyse :"}),b.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 mb-6",children:i.map(F=>b.jsxs("div",{className:"relative group aspect-square",children:[b.jsx("img",{src:F.preview,alt:F.file.name,className:"w-full h-full object-cover rounded-md shadow-md"}),b.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity rounded-md"}),b.jsx("button",{onClick:()=>V(F.id),className:"absolute -top-2 -right-2 p-1 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white opacity-0 group-hover:opacity-100 transition-all hover:bg-red-500 hover:scale-110 focus:opacity-100","aria-label":"Supprimer",children:b.jsx(w0,{})})]},F.id))}),b.jsxs("button",{onClick:z,disabled:e||i.length===0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[b.jsx(A0,{}),"Analyser les ",i.length," article(s)"]})]})]})},Dq=({imageSrc:t,analysis:e,onClick:n,onRemove:i,isSelected:s,isSet:a,isFavorite:l})=>b.jsxs("div",{onClick:n,className:"group relative aspect-square bg-raisin-black rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 cursor-pointer",children:[b.jsx("img",{src:t,alt:e,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"}),b.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${s?"ring-4 ring-gold":"ring-2 ring-transparent"} rounded-lg`}),b.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),s?b.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-gold rounded-full text-onyx z-10",children:b.jsx(I0,{})}):l?b.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-red-500 z-10",children:b.jsx(Dp,{})}):a?b.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:b.jsx(Np,{})}):null,b.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:b.jsx("p",{className:"text-white text-sm font-medium line-clamp-2",children:e})}),b.jsx("button",{onClick:i,className:"absolute top-2 right-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-500 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-red-500","aria-label":"Supprimer",children:b.jsx(w0,{})})]}),Mq={Hauts:{color:"Toutes",material:"Toutes"},Bas:{color:"Toutes",material:"Toutes"},Chaussures:{color:"Toutes",material:"Toutes"},Accessoires:{color:"Toutes",material:"Toutes"}},kq=({clothingItems:t,clothingSets:e=[],onItemClick:n,onDeleteItem:i,onCreateSet:s})=>{const[a,l]=$.useState("Hauts"),[c,d]=$.useState(Mq),[h,g]=$.useState(!1),[E,T]=$.useState(new Set),w=$.useMemo(()=>e||[],[e]),N=$.useMemo(()=>new Set(w.flatMap(M=>M.itemIds||[])),[w]),P=t.length,V=[{name:"Hauts",icon:Tq},{name:"Bas",icon:Sq},{name:"Chaussures",icon:bq},{name:"Accessoires",icon:Aq}],z=M=>{h?T(O=>{const U=new Set(O);return U.has(M.id)?U.delete(M.id):U.add(M.id),U}):n(M)},F=(M,O)=>{M.stopPropagation(),E.has(O)&&T(U=>{const we=new Set(U);return we.delete(O),we}),i(O)},q=$.useMemo(()=>t.filter(M=>{if(!(M.category===a))return!1;const U=a?c[a]:{color:"Toutes",material:"Toutes"},we=U.color==="Toutes"||M.color===U.color,ve=U.material==="Toutes"||M.material===U.material;return we&&ve}),[t,a,c]),K=$.useMemo(()=>{if(!a)return[];const M=t.filter(O=>O.category===a).map(O=>O.color);return["Toutes",...Array.from(new Set(M))]},[t,a]),X=$.useMemo(()=>{if(!a)return[];const M=t.filter(O=>O.category===a).map(O=>O.material);return["Toutes",...Array.from(new Set(M))]},[t,a]),G=M=>{a&&d(O=>({...O,[a]:{...O[a],color:M}}))},I=M=>{a&&d(O=>({...O,[a]:{...O[a],material:M}}))},x=M=>{l(a===M?null:M)},R=()=>{g(!h),T(new Set)},L=()=>{if(E.size<2){alert("Veuillez slectionner au moins 2 articles pour crer un ensemble.");return}const M=window.prompt("Donnez un nom  cet ensemble :");M&&(s(M,Array.from(E)),R())};return P===0?b.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-8 text-center",children:[b.jsx(Sw,{className:"w-20 h-20 mx-auto text-gray-400 dark:text-gray-600 mb-4"}),b.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-700 dark:text-gray-300",children:"Votre garde-robe est vide"}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Ajoutez vos premiers vtements pour commencer  crer vos tenues !"})]}):b.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",children:[b.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-8",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(Sw,{className:"w-8 h-8 text-gold"}),b.jsxs("div",{children:[b.jsxs("h2",{className:"text-3xl font-serif font-bold tracking-tight",children:[b.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),b.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[P," vtement",P>1?"s":""]})]})]}),h?b.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[b.jsx("button",{onClick:R,className:"flex-shrink-0 px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors text-sm font-medium",children:"Annuler"}),b.jsxs("button",{onClick:L,disabled:E.size<2,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 text-sm disabled:opacity-50",children:["Valider (",E.size,")"]})]}):b.jsxs("button",{onClick:R,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300 text-sm",children:[b.jsx(Np,{}),"Crer un ensemble"]})]}),h&&b.jsxs("div",{className:"bg-gold/10 border border-gold/30 text-gold-dark dark:text-gold p-4 rounded-lg mb-6 text-center",children:[b.jsx("p",{className:"font-semibold",children:"Mode Cration d'Ensemble"}),b.jsx("p",{className:"text-sm",children:"Slectionnez les articles que vous souhaitez lier."})]}),b.jsx("div",{className:"space-y-6",children:V.map(({name:M,icon:O})=>{const U=t.filter(ve=>ve.category===M),we=a===M;return b.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-lg overflow-hidden",children:[b.jsxs("button",{onClick:()=>x(M),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900/50 hover:bg-gray-100 dark:hover:bg-gray-900 transition-colors",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(O,{className:"w-5 h-5 text-gold"}),b.jsx("span",{className:"font-semibold text-lg",children:M}),b.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",U.length,")"]})]}),b.jsx(wq,{className:`w-5 h-5 transition-transform ${we?"rotate-180":""}`})]}),we&&b.jsxs("div",{className:"p-6 space-y-6",children:[b.jsxs("div",{className:"flex flex-wrap gap-4",children:[b.jsxs("div",{className:"flex-1 min-w-[200px]",children:[b.jsx("label",{className:"block text-sm font-medium mb-2",children:"Couleur"}),b.jsx("select",{value:c[M].color,onChange:ve=>G(ve.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:K.map(ve=>b.jsx("option",{value:ve,children:ve},ve))})]}),b.jsxs("div",{className:"flex-1 min-w-[200px]",children:[b.jsx("label",{className:"block text-sm font-medium mb-2",children:"Matire"}),b.jsx("select",{value:c[M].material,onChange:ve=>I(ve.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:X.map(ve=>b.jsx("option",{value:ve,children:ve},ve))})]})]}),q.length>0?b.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:q.map(ve=>b.jsx(Dq,{imageSrc:ve.imageSrc,analysis:ve.analysis,onClick:()=>z(ve),onRemove:ee=>F(ee,ve.id),isSelected:E.has(ve.id),isSet:N.has(ve.id),isFavorite:ve.isFavorite},ve.id))}):b.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"Aucun vtement ne correspond aux filtres slectionns."})]})]},M)})})]})},RR=({clothingItems:t,clothingSets:e,onGenerate:n,isGenerating:i,weatherInfo:s,weatherError:a})=>{const[l,c]=An.useState(""),d=g=>{g.preventDefault(),n(l||"Casual")},h=["Casual","Soire chic","Travail (formel)"];return b.jsxs("div",{children:[b.jsxs("div",{className:"text-center mb-6 p-3 rounded-lg bg-snow dark:bg-onyx border border-black/10 dark:border-white/10",children:[s&&b.jsxs("p",{className:"text-sm font-medium text-blue-500 dark:text-blue-400",children:["Mto : ",s," "]}),a&&b.jsx("p",{className:"text-sm font-medium text-red-500",children:a}),!s&&!a&&b.jsx("p",{className:"text-sm font-medium text-gray-400 animate-pulse",children:"Rcupration de la mto..."})]}),b.jsx("form",{onSubmit:d,children:b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"occasion",className:"block text-sm font-medium text-center text-gray-500 dark:text-gray-400 mb-3",children:"Pour quelle occasion ?"}),b.jsx("div",{className:"flex justify-center gap-2 mb-4",children:h.map(g=>b.jsx("button",{type:"button",onClick:()=>c(g),className:`px-4 py-1.5 rounded-full text-sm font-semibold transition-colors duration-200 ${l===g?"bg-gold text-onyx":"bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 hover:border-gold dark:hover:border-gold text-gray-700 dark:text-gray-300"}`,disabled:i,children:g},g))}),b.jsx("input",{id:"occasion",type:"text",value:l,onChange:g=>c(g.target.value),placeholder:"Ou dcrivez... (ex: Brunch dcontract)",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i})]}),b.jsxs("button",{type:"submit",disabled:i,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[b.jsx(A0,{}),i?"Gnration...":"Gnrer des Tenues"]})]})})]})},Hh=({outfits:t,allClothingItems:e,allClothingSets:n,favoriteOutfits:i,onToggleFavorite:s,onGenerateVisual:a,generatingVisualFor:l})=>{const[c,d]=$.useState(null);$.useEffect(()=>{if(!c)return;const g=E=>{E.key==="Escape"&&d(null)};return window.addEventListener("keydown",g),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",g),document.body.style.overflow="auto"}},[c]);const h=g=>{const{id:E,description:T}=g;let w=e.find(P=>P.id===E);if(w)return w;let N=n.find(P=>P.id===E);if(N)return N;if(w=e.find(P=>P.analysis===E),w||(w=e.find(P=>P.analysis===T),w))return w};return b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"mt-10 space-y-8",children:t.map((g,E)=>{const T=i.some(N=>N.titre===g.titre&&N.description===g.description),w=l===g.titre;return b.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5 transition-all duration-300 hover:shadow-lg hover:border-gold/50",children:[b.jsxs("div",{className:"flex justify-between items-start",children:[b.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:g.titre}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("button",{onClick:()=>a(g),disabled:w,className:"p-1.5 text-gray-400 hover:text-gold dark:hover:text-gold transition-colors disabled:cursor-not-allowed","aria-label":"Gnrer un rendu visuel",title:"Gnrer un rendu visuel",children:w?b.jsx(IR,{className:"h-5 w-5"}):b.jsx(xq,{})}),b.jsx("button",{onClick:()=>s(g),className:"p-1.5 text-gray-400 hover:text-gold dark:hover:text-gold transition-colors","aria-label":T?"Retirer des favoris":"Ajouter aux favoris",children:T?b.jsx(Dp,{className:"w-6 h-6 text-gold"}):b.jsx(x0,{className:"w-6 h-6"})})]})]})," ",b.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:g.description}),b.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:g.vetements.map((N,P)=>{const V=h(N),z=V?V.imageSrc:null;return b.jsx("button",{onClick:()=>z&&d(z),className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden transition-transform duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx disabled:cursor-default disabled:hover:scale-100",disabled:!z,"aria-label":`Agrandir l'image de : ${N.description}`,children:z?b.jsx("img",{src:z,alt:N.description,className:"w-full h-full object-cover"}):b.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:b.jsx(xR,{})})},P)})}),b.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:g.vetements.map((N,P)=>b.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:N.description},P))})]},E)})}),c&&b.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:()=>d(null),role:"dialog","aria-modal":"true",children:b.jsxs("div",{className:"relative",onClick:g=>g.stopPropagation(),children:[b.jsx("img",{src:c,alt:"Vue agrandie",className:"max-w-[90vw] max-h-[85vh] object-contain rounded-lg shadow-2xl"}),b.jsx("button",{onClick:()=>d(null),className:"absolute -top-3 -right-3 p-1.5 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white hover:bg-red-500 hover:scale-110 transition-all focus:outline-none focus:ring-2 focus:ring-gold","aria-label":"Fermer",children:b.jsx(C0,{})})]})})]})},Pq=({item:t,clothingSets:e,onClose:n,onUpdate:i,onGenerateFrom:s,onRemoveSet:a,onDelete:l})=>{const[c,d]=$.useState({analysis:t.analysis,category:t.category,color:t.color,material:t.material}),[h,g]=$.useState(!1),E=e.find(V=>V.itemIds.includes(t.id));$.useEffect(()=>{d({analysis:t.analysis,category:t.category,color:t.color,material:t.material})},[t]),$.useEffect(()=>{const V=z=>{z.key==="Escape"&&n()};return document.body.style.overflow="hidden",window.addEventListener("keydown",V),()=>{document.body.style.overflow="auto",window.removeEventListener("keydown",V)}},[n]);const T=V=>{const{name:z,value:F}=V.target;d(q=>({...q,[z]:F}))},w=V=>{V.preventDefault(),i({...t,...c}),g(!0),setTimeout(()=>{g(!1)},2e3)},N=()=>{window.confirm("tes-vous sr de vouloir supprimer cet article ? Cette action est irrversible.")&&(l(t.id),n())},P=V=>{V.stopPropagation(),i({...t,isFavorite:!t.isFavorite})};return b.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:n,role:"dialog","aria-modal":"true","aria-labelledby":"clothing-item-title",children:b.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col overflow-hidden",onClick:V=>V.stopPropagation(),children:[b.jsxs("div",{className:"relative",children:[b.jsx("img",{src:t.imageSrc,alt:t.analysis,className:"w-full h-auto max-h-[50vh] object-cover"}),b.jsx("button",{onClick:P,className:"absolute top-3 left-3 p-1.5 bg-black/40 backdrop-blur-sm rounded-full text-white hover:bg-black/60 transition-colors","aria-label":"Ajouter aux favoris",children:t.isFavorite?b.jsx(Dp,{className:"w-6 h-6 text-red-500"}):b.jsx(x0,{className:"w-6 h-6"})}),b.jsx("button",{onClick:n,className:"absolute top-3 right-3 p-1.5 bg-black/40 backdrop-blur-sm rounded-full text-white hover:bg-black/60 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-raisin-black","aria-label":"Fermer la vue dtaille",children:b.jsx(C0,{})})]}),b.jsxs("form",{onSubmit:w,className:"p-6 overflow-y-auto flex-grow flex flex-col",children:[b.jsxs("div",{className:"space-y-4 flex-grow",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"analysis",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Description"}),b.jsx("textarea",{id:"analysis",name:"analysis",value:c.analysis,onChange:T,rows:3,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Catgorie"}),b.jsx("select",{id:"category",name:"category",value:c.category,onChange:T,className:"mt-1 w-full appearance-none px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow",children:["Hauts","Bas","Chaussures","Accessoires"].map(V=>b.jsx("option",{value:V,children:V},V))})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Couleur"}),b.jsx("input",{type:"text",id:"color",name:"color",value:c.color,onChange:T,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"material",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Matire"}),b.jsx("input",{type:"text",id:"material",name:"material",value:c.material,onChange:T,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]})]}),E&&b.jsxs("div",{className:"bg-gold/10 dark:bg-gold/20 p-3 rounded-lg flex items-center justify-between gap-4",children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-xs font-semibold text-gold uppercase tracking-wider",children:"Fait partie de l'ensemble"}),b.jsx("p",{className:"font-medium text-onyx dark:text-snow truncate",title:E.name,children:E.name})]}),b.jsxs("button",{type:"button",onClick:()=>{a(E.id),n()},className:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white dark:bg-onyx text-rose-500 border border-rose-500/50 rounded-md hover:bg-rose-500 hover:text-white transition-colors",title:"Dissocier l'ensemble",children:[b.jsx(Cq,{}),b.jsx("span",{children:"Dissocier"})]})]})]}),b.jsxs("div",{className:"mt-6 pt-4 border-t border-black/10 dark:border-white/10 flex flex-col sm:flex-row gap-3 justify-between",children:[b.jsxs("button",{type:"button",onClick:N,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2.5 bg-red-500/10 text-red-500 font-bold rounded-lg hover:bg-red-500/20 transition-all duration-300",children:[b.jsx(w0,{}),"Supprimer"]}),b.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[b.jsxs("button",{type:"button",onClick:()=>s(t),className:"w-full sm:w-auto flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300",children:[b.jsx(A0,{}),"Crer une tenue"]}),b.jsx("button",{type:"submit",disabled:h,className:`w-full sm:w-auto px-6 py-2.5 font-bold rounded-lg transition-all duration-300 flex items-center justify-center gap-2 ${h?"bg-green-600 text-white cursor-not-allowed":"bg-gold text-onyx hover:bg-gold-dark"}`,children:h?b.jsxs(b.Fragment,{children:[b.jsx(I0,{}),"Enregistr !"]}):"Enregistrer"})]})]})]})]})})},NR=({clothingItems:t,clothingSets:e,onGeneratePlan:n,isGenerating:i})=>{const[s,a]=$.useState(3),[l,c]=$.useState(""),d=h=>{h.preventDefault();const g=l||"";g.trim()&&s>0&&n(s,g)};return b.jsxs("form",{onSubmit:d,className:"space-y-6",children:[b.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 items-end",children:[b.jsxs("div",{className:"sm:col-span-1",children:[b.jsx("label",{htmlFor:"days",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Dure (jours)"}),b.jsx("input",{id:"days",type:"number",value:s,onChange:h=>a(parseInt(h.target.value,10)||1),min:"1",max:"30",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i,required:!0})]}),b.jsxs("div",{className:"sm:col-span-2",children:[b.jsx("label",{htmlFor:"vacation-context",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Destination / Mto"}),b.jsx("input",{id:"vacation-context",type:"text",value:l,onChange:h=>c(h.target.value),placeholder:"Ex: Weekend  Rome, temps doux",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center sm:text-left",disabled:i,required:!0})]})]}),b.jsxs("button",{type:"submit",disabled:i||!(l||"").trim()||s<=0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[b.jsx(Iq,{}),i?"Prparation...":"Gnrer la valise"]})]})},DR=({plan:t,allClothingItems:e,allClothingSets:n})=>{const i=s=>{const{id:a,description:l}=s;let c=e.find(h=>h.id===a);if(c)return c;let d=n.find(h=>h.id===a);if(d)return d;if(c=e.find(h=>h.analysis===a),c||(c=e.find(h=>h.analysis===l),c))return c};return b.jsx("div",{className:"mt-10",children:b.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5",children:[b.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:t.titre}),b.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:t.resume}),b.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:t.valise.map((s,a)=>{const l=i(s),c=l?l.imageSrc:null;return b.jsxs("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden relative group",title:s.description,children:[c?b.jsx("img",{src:c,alt:s.description,className:"w-full h-full object-cover"}):b.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:b.jsx(xR,{})}),b.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center p-2",children:b.jsx("p",{className:"text-white text-xs text-center line-clamp-3",children:s.description})})]},a)})}),b.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:t.valise.map((s,a)=>b.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:s.description},a))})]})})},Lq=({onFilesSelected:t,isAnalyzing:e,isOtherModalOpen:n})=>{const[i,s]=$.useState(!1),a=l=>{const c=Array.from(l.target.files||[]);c.length>0&&(t(c),s(!1))};return b.jsxs(b.Fragment,{children:[!n&&b.jsx("button",{onClick:()=>s(!0),disabled:e,className:"md:hidden fixed bottom-24 right-6 w-16 h-16 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-full shadow-2xl hover:shadow-gold/50 transition-all duration-300 flex items-center justify-center z-40 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95","aria-label":"Ajouter un vtement",children:e?b.jsxs("svg",{className:"animate-spin h-8 w-8",fill:"none",viewBox:"0 0 24 24",children:[b.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),b.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):b.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})}),i&&b.jsx("div",{className:"md:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end",onClick:()=>s(!1),children:b.jsxs("div",{className:"bg-white dark:bg-raisin-black w-full rounded-t-3xl p-6 pb-8 animate-slide-up",onClick:l=>l.stopPropagation(),children:[b.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mb-6"}),b.jsx("h3",{className:"text-xl font-bold mb-6 text-center",children:"Ajouter un vtement"}),b.jsxs("div",{className:"space-y-3",children:[b.jsxs("label",{className:"block",children:[b.jsx("input",{type:"file",accept:"image/*",capture:"environment",multiple:!0,onChange:a,className:"hidden"}),b.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gradient-to-r from-gold/10 to-gold-dark/10 hover:from-gold/20 hover:to-gold-dark/20 border-2 border-gold/30 rounded-xl transition-all cursor-pointer active:scale-98",children:[b.jsx("div",{className:"w-12 h-12 bg-gold rounded-full flex items-center justify-center flex-shrink-0",children:b.jsxs("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),b.jsxs("div",{className:"flex-1",children:[b.jsx("p",{className:"font-semibold",children:"Appareil Photo"}),b.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Prendre une photo"})]})]})]}),b.jsxs("label",{className:"block",children:[b.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:a,className:"hidden"}),b.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 rounded-xl transition-all cursor-pointer active:scale-98",children:[b.jsx("div",{className:"w-12 h-12 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center flex-shrink-0",children:b.jsx("svg",{className:"w-6 h-6 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),b.jsxs("div",{className:"flex-1",children:[b.jsx("p",{className:"font-semibold",children:"Galerie"}),b.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Choisir depuis vos photos"})]})]})]})]}),b.jsx("button",{onClick:()=>s(!1),className:"w-full mt-4 py-3 text-gray-500 dark:text-gray-400 font-medium",children:"Annuler"})]})})]})},Vq=({onAnalyzeWardrobe:t,onScrollToOutfits:e,onScrollToVacation:n,onStartSetCreation:i,onShowFavorites:s,isAnalyzingWardrobe:a,clothingCount:l,favoriteOutfitCount:c})=>b.jsxs("div",{className:"space-y-4 pb-24",children:[b.jsxs("div",{className:"text-center py-6",children:[b.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:[b.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),b.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[l," vtement",l>1?"s":""," dans votre collection"]})]}),b.jsxs("div",{className:"space-y-3 px-4",children:[l>=3&&b.jsx("button",{onClick:t,disabled:a,className:"w-full bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-2xl p-5 text-left transition-all active:scale-98 disabled:opacity-50",children:b.jsxs("div",{className:"flex items-start gap-4",children:[b.jsx("div",{className:"w-12 h-12 bg-gold rounded-xl flex items-center justify-center flex-shrink-0",children:a?b.jsxs("svg",{className:"animate-spin h-6 w-6 text-onyx",fill:"none",viewBox:"0 0 24 24",children:[b.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),b.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):b.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),b.jsxs("div",{className:"flex-1",children:[b.jsx("h3",{className:"text-lg font-bold mb-1",children:" Analyser ma garde-robe"}),b.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour plus de polyvalence"})]})]})}),b.jsx("button",{onClick:e,className:"w-full bg-gradient-to-r from-purple-500/10 to-pink-500/10 border-2 border-purple-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:b.jsxs("div",{className:"flex items-start gap-4",children:[b.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center flex-shrink-0",children:b.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),b.jsxs("div",{className:"flex-1",children:[b.jsx("h3",{className:"text-lg font-bold mb-1",children:" Crateur de Tenues"}),b.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Gnrez des looks personnaliss avec l'IA"})]})]})}),b.jsx("button",{onClick:n,className:"w-full bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border-2 border-blue-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:b.jsxs("div",{className:"flex items-start gap-4",children:[b.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center flex-shrink-0",children:b.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),b.jsxs("div",{className:"flex-1",children:[b.jsx("h3",{className:"text-lg font-bold mb-1",children:" Planificateur de Valise"}),b.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Prparez votre valise optimale pour votre voyage"})]})]})})]}),b.jsx("div",{className:"px-4 pt-6",children:b.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-2xl p-4",children:[b.jsx("h4",{className:"font-semibold mb-3 text-sm text-gray-600 dark:text-gray-400",children:"Aperu rapide"}),b.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[b.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center",children:[b.jsx("p",{className:"text-2xl font-bold text-gold",children:l}),b.jsx("p",{className:"text-xs text-gray-500",children:"Vtements"})]}),b.jsxs("button",{onClick:i,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[b.jsx("div",{className:"text-green-500",children:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),b.jsx("p",{className:"text-xs text-gray-500 mt-1.5 font-medium",children:"Crer un ensemble"})]}),b.jsxs("button",{onClick:s,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[b.jsxs("div",{className:"text-red-500",children:[b.jsx(x0,{})," "]}),b.jsx("p",{className:"text-2xl font-bold",children:c}),b.jsx("p",{className:"text-xs text-gray-500 mt-0.5 font-medium",children:"Favorites"})]})]})]})})]}),Oq=({activeTab:t,onTabChange:e,counts:n})=>{const i=[{id:"home",label:"Home",icon:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),count:null},{id:"hauts",label:"Hauts",icon:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),count:n.hauts},{id:"bas",label:"Bas",icon:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),count:n.bas},{id:"chaussures",label:"Chaussures",icon:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5"})}),count:n.chaussures},{id:"accessoires",label:"Accessoires",icon:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),count:n.accessoires}];return b.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-raisin-black border-t border-black/10 dark:border-white/10 z-30 pb-8",children:b.jsx("div",{className:"flex justify-around items-center h-16",children:i.map(s=>{const a=t===s.id;return b.jsxs("button",{onClick:()=>e(s.id),className:`flex flex-col items-center justify-center gap-1 px-3 py-2 transition-all flex-1 ${a?"text-gold":"text-gray-500 dark:text-gray-400"}`,children:[b.jsxs("div",{className:"relative",children:[s.icon,s.count!==null&&s.count>0&&b.jsx("span",{className:`absolute -top-1 -right-1 text-[10px] font-bold px-1.5 py-0.5 rounded-full ${a?"bg-gold text-onyx":"bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300"}`,children:s.count})]}),b.jsx("span",{className:`text-xs font-medium ${a?"font-bold":""}`,children:s.label})]},s.id)})})})},Uq=({analysis:t,onClose:e})=>{if(!t)return null;const n={high:"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20",medium:"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 border-yellow-500/20",low:"bg-green-500/10 text-green-600 dark:text-green-400 border-green-500/20"},i={high:"Priorit haute",medium:"Priorit moyenne",low:"Bonne ide"};return b.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:b.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[b.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-gold to-gold-dark p-6 rounded-t-2xl",children:b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("h2",{className:"text-2xl font-serif font-bold text-onyx",children:" Suggestions d'Achats"}),b.jsx("button",{onClick:e,className:"p-2 hover:bg-black/10 rounded-full transition",children:b.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),b.jsxs("div",{className:"p-6 space-y-6",children:[b.jsxs("div",{className:"bg-gold/5 border border-gold/20 rounded-xl p-4",children:[b.jsx("h3",{className:"font-semibold text-lg mb-2",children:" Analyse de votre garde-robe"}),b.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:t.summary})]}),b.jsxs("div",{children:[b.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[b.jsx("span",{className:"text-green-500",children:""})," Points forts"]}),b.jsx("div",{className:"grid gap-2",children:t.strengths.map((s,a)=>b.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[b.jsx("span",{className:"text-green-500 mt-0.5",children:""}),b.jsx("span",{children:s})]},a))})]}),b.jsxs("div",{children:[b.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[b.jsx("span",{className:"text-orange-500",children:""})," Opportunits d'amlioration"]}),b.jsx("div",{className:"grid gap-2",children:t.gaps.map((s,a)=>b.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[b.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),b.jsx("span",{children:s})]},a))})]}),b.jsxs("div",{children:[b.jsxs("h3",{className:"font-semibold text-xl mb-4 flex items-center gap-2",children:[b.jsx("span",{children:""})," Pices recommandes"]}),b.jsx("div",{className:"grid gap-4",children:t.suggestions.map((s,a)=>b.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-xl p-5 hover:shadow-lg transition-shadow",children:[b.jsxs("div",{className:"flex justify-between items-start mb-3",children:[b.jsxs("div",{children:[b.jsx("h4",{className:"font-bold text-lg",children:s.description}),b.jsx("p",{className:"text-sm text-gray-500",children:s.category})]}),b.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${n[s.priority]}`,children:i[s.priority]})]}),b.jsxs("p",{className:"text-sm mb-3 text-gray-700 dark:text-gray-300",children:[b.jsx("span",{className:"font-semibold",children:"Pourquoi ?"})," ",s.reason]}),s.estimatedPrice&&b.jsxs("div",{className:"flex items-center gap-2 text-sm text-gold font-semibold",children:[b.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.estimatedPrice]})]},a))})]})]})]})})};var Fq=qq()?$.useLayoutEffect:$.useEffect;function qq(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function Bq(){var t=$.useState(Object.create(null)),e=t[1];return $.useCallback(function(){e(Object.create(null))},[])}var zq=hC(),Hq=function(e){var n=e.children,i=e.type,s=i===void 0?"reach-portal":i,a=$.useRef(null),l=$.useRef(null),c=Bq();return Fq(function(){if(a.current){var d=a.current.ownerDocument;return l.current=d==null?void 0:d.createElement(s),d.body.appendChild(l.current),c(),function(){l.current&&l.current.ownerDocument&&l.current.ownerDocument.body.removeChild(l.current)}}},[s,c]),l.current?zq.createPortal(n,l.current):$.createElement("span",{ref:a})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ge=function(){return ge=Object.assign||function(e){for(var n,i=1,s=arguments.length;i<s;i++){n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ge.apply(this,arguments)};function R0(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function ot(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function mt(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),s,a=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(c){l={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return a}function Ft(t,e,n){if(arguments.length===2)for(var i=0,s=e.length,a;i<s;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return t.concat(a||Array.prototype.slice.call(e))}var Dt;(function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"})(Dt||(Dt={}));var ql;(function(t){t.Parent="#_parent",t.Internal="#_internal"})(ql||(ql={}));var Jy=Dt.Start,N0=Dt.Stop,sf=Dt.Raise,Mp=Dt.Send,MR=Dt.Cancel,Gq=Dt.NullEvent,D0=Dt.Assign;Dt.After;Dt.DoneState;var kR=Dt.Log,jq=Dt.Init,Yy=Dt.Invoke;Dt.ErrorExecution;var Aw=Dt.ErrorPlatform,$q=Dt.ErrorCustom,PR=Dt.Update,Kq=Dt.Choose,Jq=Dt.Pure,LR=".",ww={},Wy="xstate.guard",Yq="",Od;function M0(t,e,n){n===void 0&&(n=LR);var i=Tc(t,n),s=Tc(e,n);return Et(s)?Et(i)?s===i:!1:Et(i)?i in s:Object.keys(i).every(function(a){return a in s?M0(i[a],s[a]):!1})}function VR(t){try{return Et(t)||typeof t=="number"?"".concat(t):t.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function Qy(t,e){try{return Zl(t)?t:t.toString().split(e)}catch{throw new Error("'".concat(t,"' is not a valid state path."))}}function Wq(t){return typeof t=="object"&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function Tc(t,e){if(Wq(t))return t.value;if(Zl(t))return Gh(t);if(typeof t!="string")return t;var n=Qy(t,e);return Gh(n)}function Gh(t){if(t.length===1)return t[0];for(var e={},n=e,i=0;i<t.length-1;i++)i===t.length-2?n[t[i]]=t[i+1]:(n[t[i]]={},n=n[t[i]]);return e}function uc(t,e){for(var n={},i=Object.keys(t),s=0;s<i.length;s++){var a=i[s];n[a]=e(t[a],a,t,s)}return n}function Cw(t,e,n){var i,s,a={};try{for(var l=ot(Object.keys(t)),c=l.next();!c.done;c=l.next()){var d=c.value,h=t[d];n(h)&&(a[d]=e(h,d,t))}}catch(g){i={error:g}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}return a}var Qq=function(t){return function(e){var n,i,s=e;try{for(var a=ot(t),l=a.next();!l.done;l=a.next()){var c=l.value;s=s[c]}}catch(d){n={error:d}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return s}};function Xq(t,e){return function(n){var i,s,a=n;try{for(var l=ot(t),c=l.next();!c.done;c=l.next()){var d=c.value;a=a[e][d]}}catch(h){i={error:h}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}return a}}function dh(t){if(!t)return[[]];if(Et(t))return[[t]];var e=Kt(Object.keys(t).map(function(n){var i=t[n];return typeof i!="string"&&(!i||!Object.keys(i).length)?[[n]]:dh(t[n]).map(function(s){return[n].concat(s)})}));return e}function Kt(t){var e;return(e=[]).concat.apply(e,Ft([],mt(t),!1))}function OR(t){return Zl(t)?t:[t]}function vr(t){return t===void 0?[]:OR(t)}function jh(t,e,n){var i,s;if(vt(t))return t(e,n.data);var a={};try{for(var l=ot(Object.keys(t)),c=l.next();!c.done;c=l.next()){var d=c.value,h=t[d];vt(h)?a[d]=h(e,n.data):a[d]=h}}catch(g){i={error:g}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}return a}function Zq(t){return/^(done|error)\./.test(t)}function Iw(t){return!!(t instanceof Promise||t!==null&&(vt(t)||typeof t=="object")&&vt(t.then))}function eB(t){return t!==null&&typeof t=="object"&&"transition"in t&&typeof t.transition=="function"}function tB(t,e){var n,i,s=mt([[],[]],2),a=s[0],l=s[1];try{for(var c=ot(t),d=c.next();!d.done;d=c.next()){var h=d.value;e(h)?a.push(h):l.push(h)}}catch(g){n={error:g}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return[a,l]}function UR(t,e){return uc(t.states,function(n,i){if(n){var s=(Et(e)?void 0:e[i])||(n?n.current:void 0);if(s)return{current:s,states:UR(n,s)}}})}function nB(t,e){return{current:e,states:UR(t,e)}}function xw(t,e,n,i){var s=t&&n.reduce(function(a,l){var c,d,h=l.assignment,g={state:i,action:l,_event:e},E={};if(vt(h))E=h(a,e.data,g);else try{for(var T=ot(Object.keys(h)),w=T.next();!w.done;w=T.next()){var N=w.value,P=h[N];E[N]=vt(P)?P(a,e.data,g):P}}catch(V){c={error:V}}finally{try{w&&!w.done&&(d=T.return)&&d.call(T)}finally{if(c)throw c.error}}return Object.assign({},a,E)},t);return s}var iB=function(){};function Zl(t){return Array.isArray(t)}function vt(t){return typeof t=="function"}function Et(t){return typeof t=="string"}function FR(t,e){if(t)return Et(t)?{type:Wy,name:t,predicate:e?e[t]:void 0}:vt(t)?{type:Wy,name:t.name,predicate:t}:t}function rB(t){try{return"subscribe"in t&&vt(t.subscribe)}catch{return!1}}var fo=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();Od={},Od[fo]=function(){return this},Od[Symbol.observable]=function(){return this};function Bl(t){return!!t&&"__xstatenode"in t}function sB(t){return!!t&&typeof t.send=="function"}function kp(t,e){return Et(t)||typeof t=="number"?ge({type:t},e):t}function zn(t,e){if(!Et(t)&&"$$type"in t&&t.$$type==="scxml")return t;var n=kp(t);return ge({name:n.type,data:n,$$type:"scxml",type:"external"},e)}function fl(t,e){var n=OR(e).map(function(i){return typeof i>"u"||typeof i=="string"||Bl(i)?{target:i,event:t}:ge(ge({},i),{event:t})});return n}function oB(t){if(!(t===void 0||t===Yq))return vr(t)}function qR(t,e,n,i,s){var a=t.options.guards,l={state:s,cond:e,_event:i};if(e.type===Wy)return((a==null?void 0:a[e.name])||e.predicate)(n,i.data,l);var c=a==null?void 0:a[e.type];if(!c)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return c(n,i.data,l)}function BR(t){return typeof t=="string"?{type:t}:t}function hh(t,e,n){var i=function(){},s=typeof t=="object",a=s?t:null;return{next:((s?t.next:t)||i).bind(a),error:((s?t.error:e)||i).bind(a),complete:((s?t.complete:n)||i).bind(a)}}function Ud(t,e){return"".concat(t,":invocation[").concat(e,"]")}function Xy(t){return(t.type===sf||t.type===Mp&&t.to===ql.Internal)&&typeof t.delay!="number"}var Dl=zn({type:jq});function Zy(t,e){return e&&e[t]||void 0}function qc(t,e){var n;if(Et(t)||typeof t=="number"){var i=Zy(t,e);vt(i)?n={type:t,exec:i}:i?n=i:n={type:t,exec:void 0}}else if(vt(t))n={type:t.name||t.toString(),exec:t};else{var i=Zy(t.type,e);if(vt(i))n=ge(ge({},t),{exec:i});else if(i){var s=i.type||t.type;n=ge(ge(ge({},i),t),{type:s})}else n=t}return n}var ho=function(t,e){if(!t)return[];var n=Zl(t)?t:[t];return n.map(function(i){return qc(i,e)})};function k0(t){var e=qc(t);return ge(ge({id:Et(t)?t:e.id},e),{type:e.type})}function aB(t,e){return{type:sf,event:typeof t=="function"?t:kp(t),delay:e?e.delay:void 0,id:e==null?void 0:e.id}}function lB(t,e,n,i){var s={_event:n},a=zn(vt(t.event)?t.event(e,n.data,s):t.event),l;if(Et(t.delay)){var c=i&&i[t.delay];l=vt(c)?c(e,n.data,s):c}else l=vt(t.delay)?t.delay(e,n.data,s):t.delay;return ge(ge({},t),{type:sf,_event:a,delay:l})}function uB(t,e){return{to:e?e.to:void 0,type:Mp,event:vt(t)?t:kp(t),delay:e?e.delay:void 0,id:e&&e.id!==void 0?e.id:vt(t)?t.name:VR(t)}}function cB(t,e,n,i){var s={_event:n},a=zn(vt(t.event)?t.event(e,n.data,s):t.event),l;if(Et(t.delay)){var c=i&&i[t.delay];l=vt(c)?c(e,n.data,s):c}else l=vt(t.delay)?t.delay(e,n.data,s):t.delay;var d=vt(t.to)?t.to(e,n.data,s):t.to;return ge(ge({},t),{to:d,_event:a,event:a.data,delay:l})}var fB=function(t,e,n){return ge(ge({},t),{value:Et(t.expr)?t.expr:t.expr(e,n.data,{_event:n})})},dB=function(t){return{type:MR,sendId:t}};function hB(t){var e=k0(t);return{type:Dt.Start,activity:e,exec:void 0}}function pB(t){var e=vt(t)?t:k0(t);return{type:Dt.Stop,activity:e,exec:void 0}}function mB(t,e,n){var i=vt(t.activity)?t.activity(e,n.data):t.activity,s=typeof i=="string"?{id:i}:i,a={type:Dt.Stop,activity:s};return a}var gB=function(t){return{type:D0,assignment:t}};function yB(t,e){var n=e?"#".concat(e):"";return"".concat(Dt.After,"(").concat(t,")").concat(n)}function Fd(t,e){var n="".concat(Dt.DoneState,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}function ph(t,e){var n="".concat(Dt.DoneInvoke,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}function cc(t,e){var n="".concat(Dt.ErrorPlatform,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}var vB=function(t){var e,n,i=[];try{for(var s=ot(t),a=s.next();!a.done;a=s.next())for(var l=a.value,c=0;c<l.actions.length;){if(l.actions[c].type===D0){i.push(l.actions[c]),l.actions.splice(c,1);continue}c++}}catch(d){e={error:d}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return i};function $h(t,e,n,i,s,a,l){l===void 0&&(l=!1);var c=l?[]:vB(s),d=c.length?xw(n,i,c,e):n,h=l?[n]:void 0,g=[];function E(N,P){var V;switch(P.type){case sf:{var z=lB(P,d,i,t.options.delays);return a&&typeof z.delay=="number"&&a(z,d,i),z}case Mp:var F=cB(P,d,i,t.options.delays);return a&&F.to!==ql.Internal&&(N==="entry"?g.push(F):a(F,d,i)),F;case kR:{var q=fB(P,d,i);return a==null||a(q,d,i),q}case Kq:{var K=P,X=(V=K.conds.find(function(ee){var ce=FR(ee.cond,t.options.guards);return!ce||qR(t,ce,d,i,a?void 0:e)}))===null||V===void 0?void 0:V.actions;if(!X)return[];var G=mt($h(t,e,d,i,[{type:N,actions:ho(vr(X),t.options.actions)}],a,l),2),I=G[0],x=G[1];return d=x,h==null||h.push(d),I}case Jq:{var X=P.get(d,i.data);if(!X)return[];var R=mt($h(t,e,d,i,[{type:N,actions:ho(vr(X),t.options.actions)}],a,l),2),L=R[0],M=R[1];return d=M,h==null||h.push(d),L}case N0:{var q=mB(P,d,i);return a==null||a(q,n,i),q}case D0:{d=xw(d,i,[P],a?void 0:e),h==null||h.push(d);break}default:var O=qc(P,t.options.actions),U=O.exec;if(a)a(O,d,i);else if(U&&h){var we=h.length-1,ve=ge(ge({},O),{exec:function(ee){for(var ce=[],he=1;he<arguments.length;he++)ce[he-1]=arguments[he];U.apply(void 0,Ft([h[we]],mt(ce),!1))}});O=ve}return O}}function T(N){var P,V,z=[];try{for(var F=ot(N.actions),q=F.next();!q.done;q=F.next()){var K=q.value,X=E(N.type,K);X&&(z=z.concat(X))}}catch(G){P={error:G}}finally{try{q&&!q.done&&(V=F.return)&&V.call(F)}finally{if(P)throw P.error}}return g.forEach(function(G){a(G,d,i)}),g.length=0,z}var w=Kt(s.map(T));return[w,d]}var El=function(t,e){var n=e(t);return n};function zR(t){var e;return e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}},e[fo]=function(){return this},e}function _B(t,e,n,i){var s,a=BR(t.src),l=(s=e==null?void 0:e.options.services)===null||s===void 0?void 0:s[a.type],c=t.data?jh(t.data,n,i):void 0,d=l?HR(l,t.id,c):zR(t.id);return d.meta=t,d}function HR(t,e,n){var i=zR(e);if(i.deferred=!0,Bl(t)){var s=i.state=El(void 0,function(){return(n?t.withContext(n):t).initialState});i.getSnapshot=function(){return s}}return i}function EB(t){try{return typeof t.send=="function"}catch{return!1}}function TB(t){return EB(t)&&"id"in t}function SB(t){var e;return ge((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e[fo]=function(){return this},e),t)}var Kh=function(t){return t.type==="atomic"||t.type==="final"};function GR(t){return Object.keys(t.states).map(function(e){return t.states[e]})}function Bc(t){return GR(t).filter(function(e){return e.type!=="history"})}function jR(t){var e=[t];return Kh(t)?e:e.concat(Kt(Bc(t).map(jR)))}function fc(t,e){var n,i,s,a,l,c,d,h,g=new Set(t),E=ev(g),T=new Set(e);try{for(var w=ot(T),N=w.next();!N.done;N=w.next())for(var P=N.value,V=P.parent;V&&!T.has(V);)T.add(V),V=V.parent}catch(R){n={error:R}}finally{try{N&&!N.done&&(i=w.return)&&i.call(w)}finally{if(n)throw n.error}}var z=ev(T);try{for(var F=ot(T),q=F.next();!q.done;q=F.next()){var P=q.value;if(P.type==="compound"&&(!z.get(P)||!z.get(P).length))E.get(P)?E.get(P).forEach(function(L){return T.add(L)}):P.initialStateNodes.forEach(function(L){return T.add(L)});else if(P.type==="parallel")try{for(var K=(l=void 0,ot(Bc(P))),X=K.next();!X.done;X=K.next()){var G=X.value;T.has(G)||(T.add(G),E.get(G)?E.get(G).forEach(function(L){return T.add(L)}):G.initialStateNodes.forEach(function(L){return T.add(L)}))}}catch(L){l={error:L}}finally{try{X&&!X.done&&(c=K.return)&&c.call(K)}finally{if(l)throw l.error}}}}catch(R){s={error:R}}finally{try{q&&!q.done&&(a=F.return)&&a.call(F)}finally{if(s)throw s.error}}try{for(var I=ot(T),x=I.next();!x.done;x=I.next())for(var P=x.value,V=P.parent;V&&!T.has(V);)T.add(V),V=V.parent}catch(R){d={error:R}}finally{try{x&&!x.done&&(h=I.return)&&h.call(I)}finally{if(d)throw d.error}}return T}function $R(t,e){var n=e.get(t);if(!n)return{};if(t.type==="compound"){var i=n[0];if(i){if(Kh(i))return i.key}else return{}}var s={};return n.forEach(function(a){s[a.key]=$R(a,e)}),s}function ev(t){var e,n,i=new Map;try{for(var s=ot(t),a=s.next();!a.done;a=s.next()){var l=a.value;i.has(l)||i.set(l,[]),l.parent&&(i.has(l.parent)||i.set(l.parent,[]),i.get(l.parent).push(l))}}catch(c){e={error:c}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return i}function bB(t,e){var n=fc([t],e);return $R(t,ev(n))}function dc(t,e){return Array.isArray(t)?t.some(function(n){return n===e}):t instanceof Set?t.has(e):!1}function AB(t){return Ft([],mt(new Set(Kt(Ft([],mt(t.map(function(e){return e.ownEvents})),!1)))),!1)}function mh(t,e){return e.type==="compound"?Bc(e).some(function(n){return n.type==="final"&&dc(t,n)}):e.type==="parallel"?Bc(e).every(function(n){return mh(t,n)}):!1}function wB(t){return t===void 0&&(t=[]),t.reduce(function(e,n){return n.meta!==void 0&&(e[n.id]=n.meta),e},{})}function Rw(t){return new Set(Kt(t.map(function(e){return e.tags})))}function KR(t,e){if(t===e)return!0;if(t===void 0||e===void 0)return!1;if(Et(t)||Et(e))return t===e;var n=Object.keys(t),i=Object.keys(e);return n.length===i.length&&n.every(function(s){return KR(t[s],e[s])})}function CB(t){return typeof t!="object"||t===null?!1:"value"in t&&"_event"in t}function IB(t,e){var n=t.exec,i=ge(ge({},t),{exec:n!==void 0?function(){return n(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0});return i}var sr=(function(){function t(e){var n=this,i;this.actions=[],this.activities=ww,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||ww,this.meta=wB(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=(i=Array.isArray(e.tags)?new Set(e.tags):e.tags)!==null&&i!==void 0?i:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return AB(n.configuration)}})}return t.from=function(e,n){if(e instanceof t)return e.context!==n?new t({value:e.value,context:n,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,events:[],configuration:[],transitions:[],children:{}}):e;var i=Dl;return new t({value:e,context:n,_event:i,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,n){if(e instanceof t){if(!e.actions.length)return e;var i=Dl;return new t({value:e.value,context:n,_event:i,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,n)},t.prototype.toStrings=function(e,n){var i=this;if(e===void 0&&(e=this.value),n===void 0&&(n="."),Et(e))return[e];var s=Object.keys(e);return s.concat.apply(s,Ft([],mt(s.map(function(a){return i.toStrings(e[a],n).map(function(l){return a+n+l})})),!1))},t.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var n=e.tags;e.machine;var i=R0(e,["configuration","transitions","tags","machine"]);return ge(ge({},i),{tags:Array.from(n)})},t.prototype.matches=function(e){return M0(e,this.value)},t.prototype.hasTag=function(e){return this.tags.has(e)},t.prototype.can=function(e){var n;iB(!!this.machine);var i=(n=this.machine)===null||n===void 0?void 0:n.getTransitionData(this,e);return!!(i!=null&&i.transitions.length)&&i.transitions.some(function(s){return s.target!==void 0||s.actions.length})},t})(),xB={deferEvents:!1},Nw=(function(){function t(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=ge(ge({},xB),e)}return t.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents){this.schedule(e);return}this.process(e)}this.flushEvents()},t.prototype.schedule=function(e){if(!this.initialized||this.processingEvent){this.queue.push(e);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},t.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(n){throw this.clear(),n}finally{this.processingEvent=!1}},t})(),ty=new Map,RB=0,Qu={bookId:function(){return"x:".concat(RB++)},register:function(t,e){return ty.set(t,e),t},get:function(t){return ty.get(t)},free:function(t){ty.delete(t)}};function P0(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function NB(){var t=P0();if(t&&"__xstate__"in t)return t.__xstate__}function DB(t){if(P0()){var e=NB();e&&e.register(t)}}function MB(t,e){e===void 0&&(e={});var n=t.initialState,i=new Set,s=[],a=!1,l=function(){if(!a){for(a=!0;s.length>0;){var h=s.shift();n=t.transition(n,h,d),i.forEach(function(g){return g.next(n)})}a=!1}},c=SB({id:e.id,send:function(h){s.push(h),l()},getSnapshot:function(){return n},subscribe:function(h,g,E){var T=hh(h,g,E);return i.add(T),T.next(n),{unsubscribe:function(){i.delete(T)}}}}),d={parent:e.parent,self:c,id:e.id||"anonymous",observers:i};return n=t.start?t.start(d):n,c}var kB={sync:!1,autoForward:!1},Pn;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(Pn||(Pn={}));var PB=(function(){function t(e,n){n===void 0&&(n=t.defaultOptions);var i=this;this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=Pn.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(g,E){if(Zl(g))return i.batch(g),i.state;var T=zn(kp(g,E));if(i.status===Pn.Stopped)return i.state;if(i.status!==Pn.Running&&!i.options.deferEvents)throw new Error('Event "'.concat(T.name,'" was sent to uninitialized service "').concat(i.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(T.data)));return i.scheduler.schedule(function(){i.forward(T);var w=i._nextState(T);i.update(w,T)}),i._state},this.sendTo=function(g,E,T){var w=i.parent&&(E===ql.Parent||i.parent.id===E),N=w?i.parent:Et(E)?E===ql.Internal?i:i.children.get(E)||Qu.get(E):sB(E)?E:void 0;if(!N){if(!w)throw new Error("Unable to send event to child '".concat(E,"' from service '").concat(i.id,"'."));return}if("machine"in N){if(i.status!==Pn.Stopped||i.parent!==N||i.state.done){var P=ge(ge({},g),{name:g.name===$q?"".concat(cc(i.id)):g.name,origin:i.sessionId});!T&&i.machine.config.predictableActionArguments?i._outgoingQueue.push([N,P]):N.send(P)}}else!T&&i.machine.config.predictableActionArguments?i._outgoingQueue.push([N,g.data]):N.send(g.data)},this._exec=function(g,E,T,w){w===void 0&&(w=i.machine.options.actions);var N=g.exec||Zy(g.type,w),P=vt(N)?N:N?N.exec:g.exec;if(P)try{return P(E,T.data,i.machine.config.predictableActionArguments?{action:g,_event:T}:{action:g,state:i.state,_event:T})}catch(we){throw i.parent&&i.parent.send({type:"xstate.error",data:we}),we}switch(g.type){case sf:{var V=g;i.defer(V);break}case Mp:var z=g;if(typeof z.delay=="number"){i.defer(z);return}else z.to?i.sendTo(z._event,z.to,T===Dl):i.send(z._event);break;case MR:i.cancel(g.sendId);break;case Jy:{if(i.status!==Pn.Running)return;var F=g.activity;if(!i.machine.config.predictableActionArguments&&!i.state.activities[F.id||F.type])break;if(F.type===Dt.Invoke){var q=BR(F.src),K=i.machine.options.services?i.machine.options.services[q.type]:void 0,X=F.id,G=F.data,I="autoForward"in F?F.autoForward:!!F.forward;if(!K)return;var x=G?jh(G,E,T):void 0;if(typeof K=="string")return;var R=vt(K)?K(E,T.data,{data:x,src:q,meta:F.meta}):K;if(!R)return;var L=void 0;Bl(R)&&(R=x?R.withContext(x):R,L={autoForward:I}),i.spawn(R,X,L)}else i.spawnActivity(F);break}case N0:{i.stopChild(g.activity.id);break}case kR:var M=g,O=M.label,U=M.value;O?i.logger(O,U):i.logger(U);break}};var s=ge(ge({},t.defaultOptions),n),a=s.clock,l=s.logger,c=s.parent,d=s.id,h=d!==void 0?d:e.id;this.id=h,this.logger=l,this.clock=a,this.parent=c,this.options=s,this.scheduler=new Nw({deferEvents:this.options.deferEvents}),this.sessionId=Qu.bookId()}return Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:El(this,function(){return e._initialState=e.machine.initialState,e._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(e,n){var i,s;try{for(var a=ot(e.actions),l=a.next();!l.done;l=a.next()){var c=l.value;this.exec(c,e,n)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}},t.prototype.update=function(e,n){var i,s,a,l,c,d,h,g,E=this;if(e._sessionid=this.sessionId,this._state=e,(!this.machine.config.predictableActionArguments||n===Dl)&&this.options.execute)this.execute(this.state);else for(var T=void 0;T=this._outgoingQueue.shift();)T[0].send(T[1]);if(this.children.forEach(function(R){E.state.children[R.id]=R}),this.devTools&&this.devTools.send(n.data,e),e.event)try{for(var w=ot(this.eventListeners),N=w.next();!N.done;N=w.next()){var P=N.value;P(e.event)}}catch(R){i={error:R}}finally{try{N&&!N.done&&(s=w.return)&&s.call(w)}finally{if(i)throw i.error}}try{for(var V=ot(this.listeners),z=V.next();!z.done;z=V.next()){var P=z.value;P(e,e.event)}}catch(R){a={error:R}}finally{try{z&&!z.done&&(l=V.return)&&l.call(V)}finally{if(a)throw a.error}}try{for(var F=ot(this.contextListeners),q=F.next();!q.done;q=F.next()){var K=q.value;K(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(R){c={error:R}}finally{try{q&&!q.done&&(d=F.return)&&d.call(F)}finally{if(c)throw c.error}}if(this.state.done){var X=e.configuration.find(function(R){return R.type==="final"&&R.parent===E.machine}),G=X&&X.doneData?jh(X.doneData,e.context,n):void 0;this._doneEvent=ph(this.id,G);try{for(var I=ot(this.doneListeners),x=I.next();!x.done;x=I.next()){var P=x.value;P(this._doneEvent)}}catch(R){h={error:R}}finally{try{x&&!x.done&&(g=I.return)&&g.call(I)}finally{if(h)throw h.error}}this._stop(),this._stopChildren(),Qu.free(this.sessionId)}},t.prototype.onTransition=function(e){return this.listeners.add(e),this.status===Pn.Running&&e(this.state,this.state.event),this},t.prototype.subscribe=function(e,n,i){var s=this,a=hh(e,n,i);this.listeners.add(a.next),this.status!==Pn.NotStarted&&a.next(this.state);var l=function(){s.doneListeners.delete(l),s.stopListeners.delete(l),a.complete()};return this.status===Pn.Stopped?a.complete():(this.onDone(l),this.onStop(l)),{unsubscribe:function(){s.listeners.delete(a.next),s.doneListeners.delete(l),s.stopListeners.delete(l)}}},t.prototype.onEvent=function(e){return this.eventListeners.add(e),this},t.prototype.onSend=function(e){return this.sendListeners.add(e),this},t.prototype.onChange=function(e){return this.contextListeners.add(e),this},t.prototype.onStop=function(e){return this.stopListeners.add(e),this},t.prototype.onDone=function(e){return this.status===Pn.Stopped&&this._doneEvent?e(this._doneEvent):this.doneListeners.add(e),this},t.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},t.prototype.start=function(e){var n=this;if(this.status===Pn.Running)return this;this.machine._init(),Qu.register(this.sessionId,this),this.initialized=!0,this.status=Pn.Running;var i=e===void 0?this.initialState:El(this,function(){return CB(e)?n.machine.resolveState(e):n.machine.resolveState(sr.from(e,n.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){n.update(i,Dl)}),this},t.prototype._stopChildren=function(){this.children.forEach(function(e){vt(e.stop)&&e.stop()}),this.children.clear()},t.prototype._stop=function(){var e,n,i,s,a,l,c,d,h,g;try{for(var E=ot(this.listeners),T=E.next();!T.done;T=E.next()){var w=T.value;this.listeners.delete(w)}}catch(I){e={error:I}}finally{try{T&&!T.done&&(n=E.return)&&n.call(E)}finally{if(e)throw e.error}}try{for(var N=ot(this.stopListeners),P=N.next();!P.done;P=N.next()){var w=P.value;w(),this.stopListeners.delete(w)}}catch(I){i={error:I}}finally{try{P&&!P.done&&(s=N.return)&&s.call(N)}finally{if(i)throw i.error}}try{for(var V=ot(this.contextListeners),z=V.next();!z.done;z=V.next()){var w=z.value;this.contextListeners.delete(w)}}catch(I){a={error:I}}finally{try{z&&!z.done&&(l=V.return)&&l.call(V)}finally{if(a)throw a.error}}try{for(var F=ot(this.doneListeners),q=F.next();!q.done;q=F.next()){var w=q.value;this.doneListeners.delete(w)}}catch(I){c={error:I}}finally{try{q&&!q.done&&(d=F.return)&&d.call(F)}finally{if(c)throw c.error}}if(!this.initialized)return this;this.initialized=!1,this.status=Pn.Stopped,this._initialState=void 0;try{for(var K=ot(Object.keys(this.delayedEventsMap)),X=K.next();!X.done;X=K.next()){var G=X.value;this.clock.clearTimeout(this.delayedEventsMap[G])}}catch(I){h={error:I}}finally{try{X&&!X.done&&(g=K.return)&&g.call(K)}finally{if(h)throw h.error}}this.scheduler.clear(),this.scheduler=new Nw({deferEvents:this.options.deferEvents})},t.prototype.stop=function(){var e=this,n=this.scheduler;return this._stop(),n.schedule(function(){var i;if(!(!((i=e._state)===null||i===void 0)&&i.done)){var s=zn({type:"xstate.stop"}),a=El(e,function(){var l=Kt(Ft([],mt(e.state.configuration),!1).sort(function(E,T){return T.order-E.order}).map(function(E){return ho(E.onExit,e.machine.options.actions)})),c=mt($h(e.machine,e.state,e.state.context,s,[{type:"exit",actions:l}],e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),d=c[0],h=c[1],g=new sr({value:e.state.value,context:h,_event:s,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:d.filter(function(E){return!Xy(E)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return g.changed=!0,g});e.update(a,s),e._stopChildren(),Qu.free(e.sessionId)}}),this},t.prototype.batch=function(e){var n=this;if(!(this.status===Pn.NotStarted&&this.options.deferEvents)){if(this.status!==Pn.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'))}if(e.length){var i=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var s,a,l=n.state,c=!1,d=[],h=function(w){var N=zn(w);n.forward(N),l=El(n,function(){return n.machine.transition(l,N,void 0,i||void 0)}),d.push.apply(d,Ft([],mt(n.machine.config.predictableActionArguments?l.actions:l.actions.map(function(P){return IB(P,l)})),!1)),c=c||!!l.changed};try{for(var g=ot(e),E=g.next();!E.done;E=g.next()){var T=E.value;h(T)}}catch(w){s={error:w}}finally{try{E&&!E.done&&(a=g.return)&&a.call(g)}finally{if(s)throw s.error}}l.changed=c,l.actions=d,n.update(l,zn(e[e.length-1]))})}},t.prototype.sender=function(e){return this.send.bind(this,e)},t.prototype._nextState=function(e,n){var i=this;n===void 0&&(n=!!this.machine.config.predictableActionArguments&&this._exec);var s=zn(e);if(s.name.indexOf(Aw)===0&&!this.state.nextEvents.some(function(l){return l.indexOf(Aw)===0}))throw s.data.data;var a=El(this,function(){return i.machine.transition(i.state,s,void 0,n||void 0)});return a},t.prototype.nextState=function(e){return this._nextState(e,!1)},t.prototype.forward=function(e){var n,i;try{for(var s=ot(this.forwardTo),a=s.next();!a.done;a=s.next()){var l=a.value,c=this.children.get(l);if(!c)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(l,"'."));c.send(e)}}catch(d){n={error:d}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.defer=function(e){var n=this,i=this.clock.setTimeout(function(){"to"in e&&e.to?n.sendTo(e._event,e.to,!0):n.send(e._event)},e.delay);e.id&&(this.delayedEventsMap[e.id]=i)},t.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},t.prototype.exec=function(e,n,i){i===void 0&&(i=this.machine.options.actions),this._exec(e,n.context,n._event,i)},t.prototype.removeChild=function(e){var n;this.children.delete(e),this.forwardTo.delete(e),(n=this.state)===null||n===void 0||delete n.children[e]},t.prototype.stopChild=function(e){var n=this.children.get(e);n&&(this.removeChild(e),vt(n.stop)&&n.stop())},t.prototype.spawn=function(e,n,i){if(this.status!==Pn.Running)return HR(e,n);if(Iw(e))return this.spawnPromise(Promise.resolve(e),n);if(vt(e))return this.spawnCallback(e,n);if(TB(e))return this.spawnActor(e,n);if(rB(e))return this.spawnObservable(e,n);if(Bl(e))return this.spawnMachine(e,ge(ge({},i),{id:n}));if(eB(e))return this.spawnBehavior(e,n);throw new Error('Unable to spawn entity "'.concat(n,'" of type "').concat(typeof e,'".'))},t.prototype.spawnMachine=function(e,n){var i=this;n===void 0&&(n={});var s=new t(e,ge(ge({},this.options),{parent:this,id:n.id||e.id})),a=ge(ge({},kB),n);a.sync&&s.onTransition(function(c){i.send(PR,{state:c,id:s.id})});var l=s;return this.children.set(s.id,l),a.autoForward&&this.forwardTo.add(s.id),s.onDone(function(c){i.removeChild(s.id),i.send(zn(c,{origin:s.id}))}).start(),l},t.prototype.spawnBehavior=function(e,n){var i=MB(e,{id:n,parent:this});return this.children.set(n,i),i},t.prototype.spawnPromise=function(e,n){var i,s=this,a=!1,l;e.then(function(d){a||(l=d,s.removeChild(n),s.send(zn(ph(n,d),{origin:n})))},function(d){if(!a){s.removeChild(n);var h=cc(n,d);try{s.send(zn(h,{origin:n}))}catch{s.devTools&&s.devTools.send(h,s.state),s.machine.strict&&s.stop()}}});var c=(i={id:n,send:function(){},subscribe:function(d,h,g){var E=hh(d,h,g),T=!1;return e.then(function(w){T||(E.next(w),!T&&E.complete())},function(w){T||E.error(w)}),{unsubscribe:function(){return T=!0}}},stop:function(){a=!0},toJSON:function(){return{id:n}},getSnapshot:function(){return l}},i[fo]=function(){return this},i);return this.children.set(n,c),c},t.prototype.spawnCallback=function(e,n){var i,s=this,a=!1,l=new Set,c=new Set,d,h=function(T){d=T,c.forEach(function(w){return w(T)}),!a&&s.send(zn(T,{origin:n}))},g;try{g=e(h,function(T){l.add(T)})}catch(T){this.send(cc(n,T))}if(Iw(g))return this.spawnPromise(g,n);var E=(i={id:n,send:function(T){return l.forEach(function(w){return w(T)})},subscribe:function(T){var w=hh(T);return c.add(w.next),{unsubscribe:function(){c.delete(w.next)}}},stop:function(){a=!0,vt(g)&&g()},toJSON:function(){return{id:n}},getSnapshot:function(){return d}},i[fo]=function(){return this},i);return this.children.set(n,E),E},t.prototype.spawnObservable=function(e,n){var i,s=this,a,l=e.subscribe(function(d){a=d,s.send(zn(d,{origin:n}))},function(d){s.removeChild(n),s.send(zn(cc(n,d),{origin:n}))},function(){s.removeChild(n),s.send(zn(ph(n),{origin:n}))}),c=(i={id:n,send:function(){},subscribe:function(d,h,g){return e.subscribe(d,h,g)},stop:function(){return l.unsubscribe()},getSnapshot:function(){return a},toJSON:function(){return{id:n}}},i[fo]=function(){return this},i);return this.children.set(n,c),c},t.prototype.spawnActor=function(e,n){return this.children.set(n,e),e},t.prototype.spawnActivity=function(e){var n=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(n){var i=n(this.state.context,e);this.spawnEffect(e.id,i)}},t.prototype.spawnEffect=function(e,n){var i;this.children.set(e,(i={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:n||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}},i[fo]=function(){return this},i))},t.prototype.attachDev=function(){var e=P0();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var n=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(ge(ge({name:this.id,autoPause:!0,stateSanitizer:function(i){return{value:i.value,context:i.context,actions:i.actions}}},n),{features:ge({jump:!1,skip:!1},n?n.features:void 0)}),this.machine),this.devTools.init(this.state)}DB(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[fo]=function(){return this},t.prototype.getSnapshot=function(){return this.status===Pn.NotStarted?this.initialState:this._state},t.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,n){return setTimeout(e,n)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},t.interpret=JR,t})();function JR(t,e){var n=new PB(t,e);return n}function LB(t){if(typeof t=="string"){var e={type:t};return e.toString=function(){return t},e}return t}function qd(t){return ge(ge({type:Yy},t),{toJSON:function(){t.onDone,t.onError;var e=R0(t,["onDone","onError"]);return ge(ge({},e),{type:Yy,src:LB(t.src)})}})}var Bd="",tv="#",ny="*",dl={},hl=function(t){return t[0]===tv},VB=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},OB=(function(){function t(e,n,i,s){i===void 0&&(i="context"in e?e.context:void 0);var a=this,l;this.config=e,this._context=i,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(VB(),n),this.parent=s==null?void 0:s.parent,this.key=this.config.key||(s==null?void 0:s.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:LR),this.id=this.config.id||Ft([this.machine.key],mt(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(l=this.config.schema)!==null&&l!==void 0?l:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?uc(this.config.states,function(h,g){var E,T=new t(h,{},void 0,{parent:a,key:g});return Object.assign(a.idMap,ge((E={},E[T.id]=T,E),T.idMap)),T}):dl;var c=0;function d(h){var g,E;h.order=c++;try{for(var T=ot(GR(h)),w=T.next();!w.done;w=T.next()){var N=w.value;d(N)}}catch(P){g={error:P}}finally{try{w&&!w.done&&(E=T.return)&&E.call(T)}finally{if(g)throw g.error}}}d(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(h){var g=h.event;return g===Bd}):Bd in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=vr(this.config.entry||this.config.onEntry).map(function(h){return qc(h)}),this.onExit=vr(this.config.exit||this.config.onExit).map(function(h){return qc(h)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=vr(this.config.invoke).map(function(h,g){var E,T;if(Bl(h)){var w=Ud(a.id,g);return a.machine.options.services=ge((E={},E[w]=h,E),a.machine.options.services),qd({src:w,id:w})}else if(Et(h.src)){var w=h.id||Ud(a.id,g);return qd(ge(ge({},h),{id:w,src:h.src}))}else if(Bl(h.src)||vt(h.src)){var w=h.id||Ud(a.id,g);return a.machine.options.services=ge((T={},T[w]=h.src,T),a.machine.options.services),qd(ge(ge({id:w},h),{src:w}))}else{var N=h.src;return qd(ge(ge({id:Ud(a.id,g)},h),{src:N}))}}),this.activities=vr(this.config.activities).concat(this.invoke).map(function(h){return k0(h)}),this.transition=this.transition.bind(this),this.tags=vr(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||jR(this).forEach(function(e){return e.on})},t.prototype.withConfig=function(e,n){var i=this.options,s=i.actions,a=i.activities,l=i.guards,c=i.services,d=i.delays;return new t(this.config,{actions:ge(ge({},s),e.actions),activities:ge(ge({},a),e.activities),guards:ge(ge({},l),e.guards),services:ge(ge({},c),e.services),delays:ge(ge({},d),e.delays)},n??this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return vt(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:uc(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce(function(n,i){return n[i.eventType]=n[i.eventType]||[],n[i.eventType].push(i),n},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var n=e===Bd,i=this.transitions.filter(function(s){var a=s.eventType===e;return n?a:a||s.eventType===ny});return this.__cache.candidates[e]=i,i},t.prototype.getDelayedTransitions=function(){var e=this,n=this.config.after;if(!n)return[];var i=function(a,l){var c=vt(a)?"".concat(e.id,":delay[").concat(l,"]"):a,d=yB(c,e.id);return e.onEntry.push(uB(d,{delay:a})),e.onExit.push(dB(d)),d},s=Zl(n)?n.map(function(a,l){var c=i(a.delay,l);return ge(ge({},a),{event:c})}):Kt(Object.keys(n).map(function(a,l){var c=n[a],d=Et(c)?{target:c}:c,h=isNaN(+a)?a:+a,g=i(h,l);return vr(d).map(function(E){return ge(ge({},E),{event:g,delay:h})})}));return s.map(function(a){var l=a.delay;return ge(ge({},e.formatTransition(a)),{delay:l})})},t.prototype.getStateNodes=function(e){var n,i=this;if(!e)return[];var s=e instanceof sr?e.value:Tc(e,this.delimiter);if(Et(s)){var a=this.getStateNode(s).initial;return a!==void 0?this.getStateNodes((n={},n[s]=a,n)):[this,this.states[s]]}var l=Object.keys(s),c=[this];return c.push.apply(c,Ft([],mt(Kt(l.map(function(d){return i.getStateNode(d).getStateNodes(s[d])}))),!1)),c},t.prototype.handles=function(e){var n=VR(e);return this.events.includes(n)},t.prototype.resolveState=function(e){var n=e instanceof sr?e:sr.create(e),i=Array.from(fc([],this.getStateNodes(n.value)));return new sr(ge(ge({},n),{value:this.resolve(n.value),configuration:i,done:mh(i,this),tags:Rw(i),machine:this.machine}))},t.prototype.transitionLeafNode=function(e,n,i){var s=this.getStateNode(e),a=s.next(n,i);return!a||!a.transitions.length?this.next(n,i):a},t.prototype.transitionCompoundNode=function(e,n,i){var s=Object.keys(e),a=this.getStateNode(s[0]),l=a._transition(e[s[0]],n,i);return!l||!l.transitions.length?this.next(n,i):l},t.prototype.transitionParallelNode=function(e,n,i){var s,a,l={};try{for(var c=ot(Object.keys(e)),d=c.next();!d.done;d=c.next()){var h=d.value,g=e[h];if(g){var E=this.getStateNode(h),T=E._transition(g,n,i);T&&(l[h]=T)}}}catch(z){s={error:z}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(s)throw s.error}}var w=Object.keys(l).map(function(z){return l[z]}),N=Kt(w.map(function(z){return z.transitions})),P=w.some(function(z){return z.transitions.length>0});if(!P)return this.next(n,i);var V=Kt(Object.keys(l).map(function(z){return l[z].configuration}));return{transitions:N,exitSet:Kt(w.map(function(z){return z.exitSet})),configuration:V,source:n,actions:Kt(Object.keys(l).map(function(z){return l[z].actions}))}},t.prototype._transition=function(e,n,i){return Et(e)?this.transitionLeafNode(e,n,i):Object.keys(e).length===1?this.transitionCompoundNode(e,n,i):this.transitionParallelNode(e,n,i)},t.prototype.getTransitionData=function(e,n){return this._transition(e.value,e,zn(n))},t.prototype.next=function(e,n){var i,s,a=this,l=n.name,c=[],d=[],h;try{for(var g=ot(this.getCandidates(l)),E=g.next();!E.done;E=g.next()){var T=E.value,w=T.cond,N=T.in,P=e.context,V=N?Et(N)&&hl(N)?e.matches(Tc(this.getStateNodeById(N).path,this.delimiter)):M0(Tc(N,this.delimiter),Qq(this.path.slice(0,-2))(e.value)):!0,z=!1;try{z=!w||qR(this.machine,w,P,n,e)}catch(K){throw new Error("Unable to evaluate guard '".concat(w.name||w.type,"' in transition for event '").concat(l,"' in state node '").concat(this.id,`':
`).concat(K.message))}if(z&&V){T.target!==void 0&&(d=T.target),c.push.apply(c,Ft([],mt(T.actions),!1)),h=T;break}}}catch(K){i={error:K}}finally{try{E&&!E.done&&(s=g.return)&&s.call(g)}finally{if(i)throw i.error}}if(h){if(!d.length)return{transitions:[h],exitSet:[],configuration:e.value?[this]:[],source:e,actions:c};var F=Kt(d.map(function(K){return a.getRelativeStateNodes(K,e.historyValue)})),q=!!h.internal;return{transitions:[h],exitSet:q?[]:Kt(d.map(function(K){return a.getPotentiallyReenteringNodes(K)})),configuration:F,source:e,actions:c}}},t.prototype.getPotentiallyReenteringNodes=function(e){if(this.order<e.order)return[this];for(var n=[],i=this,s=e;i&&i!==s;)n.push(i),i=i.parent;return i!==s?[]:(n.push(s),n)},t.prototype.getActions=function(e,n,i,s,a,l,c){var d,h,g,E,T=this,w=l?fc([],this.getStateNodes(l.value)):[],N=new Set;try{for(var P=ot(Array.from(e).sort(function(M,O){return M.order-O.order})),V=P.next();!V.done;V=P.next()){var z=V.value;(!dc(w,z)||dc(i.exitSet,z)||z.parent&&N.has(z.parent))&&N.add(z)}}catch(M){d={error:M}}finally{try{V&&!V.done&&(h=P.return)&&h.call(P)}finally{if(d)throw d.error}}try{for(var F=ot(w),q=F.next();!q.done;q=F.next()){var z=q.value;(!dc(e,z)||dc(i.exitSet,z.parent))&&i.exitSet.push(z)}}catch(M){g={error:M}}finally{try{q&&!q.done&&(E=F.return)&&E.call(F)}finally{if(g)throw g.error}}i.exitSet.sort(function(M,O){return O.order-M.order});var K=Array.from(N).sort(function(M,O){return M.order-O.order}),X=new Set(i.exitSet),G=Kt(K.map(function(M){var O=[];if(M.type!=="final")return O;var U=M.parent;if(!U.parent)return O;O.push(Fd(M.id,M.doneData),Fd(U.id,M.doneData?jh(M.doneData,s,a):void 0));var we=U.parent;return we.type==="parallel"&&Bc(we).every(function(ve){return mh(i.configuration,ve)})&&O.push(Fd(we.id)),O})),I=K.map(function(M){var O=M.onEntry,U=M.activities.map(function(we){return hB(we)});return{type:"entry",actions:ho(c?Ft(Ft([],mt(O),!1),mt(U),!1):Ft(Ft([],mt(U),!1),mt(O),!1),T.machine.options.actions)}}).concat({type:"state_done",actions:G.map(function(M){return aB(M)})}),x=Array.from(X).map(function(M){return{type:"exit",actions:ho(Ft(Ft([],mt(M.onExit),!1),mt(M.activities.map(function(O){return pB(O)})),!1),T.machine.options.actions)}}),R=x.concat({type:"transition",actions:ho(i.actions,this.machine.options.actions)}).concat(I);if(n){var L=ho(Kt(Ft([],mt(e),!1).sort(function(M,O){return O.order-M.order}).map(function(M){return M.onExit})),this.machine.options.actions).filter(function(M){return!Xy(M)});return R.concat({type:"stop",actions:L})}return R},t.prototype.transition=function(e,n,i,s){e===void 0&&(e=this.initialState);var a=zn(n),l;if(e instanceof sr)l=i===void 0?e:this.resolveState(sr.from(e,i));else{var c=Et(e)?this.resolve(Gh(this.getResolvedPath(e))):this.resolve(e),d=i??this.machine.context;l=this.resolveState(sr.from(c,d))}if(this.strict&&!this.events.includes(a.name)&&!Zq(a.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(a.name,"'"));var h=this._transition(l.value,l,a)||{transitions:[],configuration:[],exitSet:[],source:l,actions:[]},g=fc([],this.getStateNodes(l.value)),E=h.configuration.length?fc(g,h.configuration):g;return h.configuration=Ft([],mt(E),!1),this.resolveTransition(h,l,l.context,s,a)},t.prototype.resolveRaisedTransition=function(e,n,i,s){var a,l=e.actions;return e=this.transition(e,n,void 0,s),e._event=i,e.event=i.data,(a=e.actions).unshift.apply(a,Ft([],mt(l),!1)),e},t.prototype.resolveTransition=function(e,n,i,s,a){var l,c,d,h,g=this;a===void 0&&(a=Dl);var E=e.configuration,T=!n||e.transitions.length>0,w=T?e.configuration:n?n.configuration:[],N=mh(w,this),P=T?bB(this.machine,E):void 0,V=n?n.historyValue?n.historyValue:e.source?this.machine.historyValue(n.value):void 0:void 0,z=this.getActions(new Set(w),N,e,i,a,n,s),F=n?ge({},n.activities):{};try{for(var q=ot(z),K=q.next();!K.done;K=q.next()){var X=K.value;try{for(var G=(d=void 0,ot(X.actions)),I=G.next();!I.done;I=G.next()){var x=I.value;x.type===Jy?F[x.activity.id||x.activity.type]=x:x.type===N0&&(F[x.activity.id||x.activity.type]=!1)}}catch(pe){d={error:pe}}finally{try{I&&!I.done&&(h=G.return)&&h.call(G)}finally{if(d)throw d.error}}}}catch(pe){l={error:pe}}finally{try{K&&!K.done&&(c=q.return)&&c.call(q)}finally{if(l)throw l.error}}var R=mt($h(this,n,i,a,z,s,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),L=R[0],M=R[1],O=mt(tB(L,Xy),2),U=O[0],we=O[1],ve=L.filter(function(pe){var Ae;return pe.type===Jy&&((Ae=pe.activity)===null||Ae===void 0?void 0:Ae.type)===Yy}),ee=ve.reduce(function(pe,Ae){return pe[Ae.activity.id]=_B(Ae.activity,g.machine,M,a),pe},n?ge({},n.children):{}),ce=new sr({value:P||n.value,context:M,_event:a,_sessionid:n?n._sessionid:null,historyValue:P?V?nB(V,P):void 0:n?n.historyValue:void 0,history:!P||e.source?n:void 0,actions:P?we:[],activities:P?F:n?n.activities:{},events:[],configuration:w,transitions:e.transitions,children:ee,done:N,tags:Rw(w),machine:this}),he=i!==M;ce.changed=a.name===PR||he;var Ie=ce.history;Ie&&delete Ie.history;var De=!N&&(this._transient||E.some(function(pe){return pe._transient}));if(!T&&(!De||a.name===Bd))return ce;var H=ce;if(!N)for(De&&(H=this.resolveRaisedTransition(H,{type:Gq},a,s));U.length;){var te=U.shift();H=this.resolveRaisedTransition(H,te._event,a,s)}var fe=H.changed||(Ie?!!H.actions.length||he||typeof Ie.value!=typeof H.value||!KR(H.value,Ie.value):void 0);return H.changed=fe,H.history=Ie,H},t.prototype.getStateNode=function(e){if(hl(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var n=this.states[e];if(!n)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return n},t.prototype.getStateNodeById=function(e){var n=hl(e)?e.slice(tv.length):e;if(n===this.id)return this;var i=this.machine.idMap[n];if(!i)throw new Error("Child state node '#".concat(n,"' does not exist on machine '").concat(this.id,"'"));return i},t.prototype.getStateNodeByPath=function(e){if(typeof e=="string"&&hl(e))try{return this.getStateNodeById(e.slice(1))}catch{}for(var n=Qy(e,this.delimiter).slice(),i=this;n.length;){var s=n.shift();if(!s.length)break;i=i.getStateNode(s)}return i},t.prototype.resolve=function(e){var n,i=this;if(!e)return this.initialStateValue||dl;switch(this.type){case"parallel":return uc(this.initialStateValue,function(a,l){return a?i.getStateNode(l).resolve(e[l]||a):dl});case"compound":if(Et(e)){var s=this.getStateNode(e);return s.type==="parallel"||s.type==="compound"?(n={},n[e]=s.initialStateValue,n):e}return Object.keys(e).length?uc(e,function(a,l){return a?i.getStateNode(l).resolve(a):dl}):this.initialStateValue||{};default:return e||dl}},t.prototype.getResolvedPath=function(e){if(hl(e)){var n=this.machine.idMap[e.slice(tv.length)];if(!n)throw new Error("Unable to find state node '".concat(e,"'"));return n.path}return Qy(e,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var n;if(this.type==="parallel")n=Cw(this.states,function(i){return i.initialStateValue||dl},function(i){return i.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));n=Kh(this.states[this.initial])?this.initial:(e={},e[this.initial]=this.states[this.initial].initialStateValue,e)}else n={};return this.__cache.initialStateValue=n,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(e,n){this._init();var i=this.getStateNodes(e);return this.resolveTransition({configuration:i,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,n??this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var e;if(this.type==="history"){var n=this.config;Et(n.target)?e=hl(n.target)?Gh(this.machine.getStateNodeById(n.target).path.slice(this.path.length-1)):n.target:e=n.target}return e},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(e,n,i){return i===void 0&&(i=!0),i?e.type==="history"?e.resolveHistory(n):e.initialStateNodes:[e]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var e=this;if(Kh(this))return[this];if(this.type==="compound"&&!this.initial)return[this];var n=dh(this.initialStateValue);return Kt(n.map(function(i){return e.getFromRelativePath(i)}))},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var n=mt(e),i=n[0],s=n.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(i,"' from node with no states"));var a=this.getStateNode(i);if(a.type==="history")return a.resolveHistory();if(!this.states[i])throw new Error("Child state '".concat(i,"' does not exist on '").concat(this.id,"'"));return this.states[i].getFromRelativePath(s)},t.prototype.historyValue=function(e){if(Object.keys(this.states).length)return{current:e||this.initialStateValue,states:Cw(this.states,function(n,i){if(!e)return n.historyValue();var s=Et(e)?void 0:e[i];return n.historyValue(s||n.initialStateValue)},function(n){return!n.history})}},t.prototype.resolveHistory=function(e){var n=this;if(this.type!=="history")return[this];var i=this.parent;if(!e){var s=this.target;return s?Kt(dh(s).map(function(l){return i.getFromRelativePath(l)})):i.initialStateNodes}var a=Xq(i.path,"states")(e).current;return Et(a)?[i.getStateNode(a)]:Kt(dh(a).map(function(l){return n.history==="deep"?i.getFromRelativePath(l):[i.states[l[0]]]}))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var e=this,n=Kt(Object.keys(this.states).map(function(i){return e.states[i].stateIds}));return[this.id].concat(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var e,n,i,s;if(this.__cache.events)return this.__cache.events;var a=this.states,l=new Set(this.ownEvents);if(a)try{for(var c=ot(Object.keys(a)),d=c.next();!d.done;d=c.next()){var h=d.value,g=a[h];if(g.states)try{for(var E=(i=void 0,ot(g.events)),T=E.next();!T.done;T=E.next()){var w=T.value;l.add("".concat(w))}}catch(N){i={error:N}}finally{try{T&&!T.done&&(s=E.return)&&s.call(E)}finally{if(i)throw i.error}}}}catch(N){e={error:N}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(l)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter(function(n){return!(!n.target&&!n.actions.length&&n.internal)}).map(function(n){return n.eventType}));return Array.from(e)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(e){var n=this;if(e!==void 0)return e.map(function(i){if(!Et(i))return i;var s=i[0]===n.delimiter;if(s&&!n.parent)return n.getStateNodeByPath(i.slice(1));var a=s?n.key+i:i;if(n.parent)try{var l=n.parent.getStateNodeByPath(a);return l}catch(c){throw new Error("Invalid transition definition for state node '".concat(n.id,`':
`).concat(c.message))}else return n.getStateNodeByPath(a)})},t.prototype.formatTransition=function(e){var n=this,i=oB(e.target),s="internal"in e?e.internal:i?i.some(function(d){return Et(d)&&d[0]===n.delimiter}):!0,a=this.machine.options.guards,l=this.resolveTarget(i),c=ge(ge({},e),{actions:ho(vr(e.actions)),cond:FR(e.cond,a),target:l,source:this,internal:s,eventType:e.event,toJSON:function(){return ge(ge({},c),{target:c.target?c.target.map(function(d){return"#".concat(d.id)}):void 0,source:"#".concat(n.id)})}});return c},t.prototype.formatTransitions=function(){var e,n,i=this,s;if(!this.config.on)s=[];else if(Array.isArray(this.config.on))s=this.config.on;else{var a=this.config.on,l=ny,c=a[l],d=c===void 0?[]:c,h=R0(a,[typeof l=="symbol"?l:l+""]);s=Kt(Object.keys(h).map(function(F){var q=fl(F,h[F]);return q}).concat(fl(ny,d)))}var g=this.config.always?fl("",this.config.always):[],E=this.config.onDone?fl(String(Fd(this.id)),this.config.onDone):[],T=Kt(this.invoke.map(function(F){var q=[];return F.onDone&&q.push.apply(q,Ft([],mt(fl(String(ph(F.id)),F.onDone)),!1)),F.onError&&q.push.apply(q,Ft([],mt(fl(String(cc(F.id)),F.onError)),!1)),q})),w=this.after,N=Kt(Ft(Ft(Ft(Ft([],mt(E),!1),mt(T),!1),mt(s),!1),mt(g),!1).map(function(F){return vr(F).map(function(q){return i.formatTransition(q)})}));try{for(var P=ot(w),V=P.next();!V.done;V=P.next()){var z=V.value;N.push(z)}}catch(F){e={error:F}}finally{try{V&&!V.done&&(n=P.return)&&n.call(P)}finally{if(e)throw e.error}}return N},t})();function UB(t,e,n){return n===void 0&&(n=t.context),new OB(t,e,n)}var FB=gB,nv;(function(t){t[t.Effect=1]="Effect",t[t.LayoutEffect=2]="LayoutEffect"})(nv||(nv={}));var Sc=$.useLayoutEffect;function Dw(t){var e=$.useRef();return e.current||(e.current={v:t()}),e.current.v}var qB=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),s,a=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(c){l={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return a},BB=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function zB(t,e){var n,i,s=qB([[],[]],2),a=s[0],l=s[1];try{for(var c=BB(t),d=c.next();!d.done;d=c.next()){var h=d.value;e(h)?a.push(h):l.push(h)}}catch(g){n={error:g}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return[a,l]}var Xu=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),s,a=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(c){l={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return a},Mw=function(t,e,n){if(n||arguments.length===2)for(var i=0,s=e.length,a;i<s;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return t.concat(a||Array.prototype.slice.call(e))};function kw(t,e){var n=t.exec,i=n(e.context,e._event.data,{action:t,state:e,_event:e._event});i()}function HB(t){var e=$.useRef([]),n=$.useRef([]);Sc(function(){var i=t.subscribe(function(s){var a,l;if(s.actions.length){var c=s.actions.filter(function(E){return typeof E.exec=="function"&&"__effect"in E.exec}),d=Xu(zB(c,function(E){return E.exec.__effect===nv.Effect}),2),h=d[0],g=d[1];(a=e.current).push.apply(a,Mw([],Xu(h.map(function(E){return[E,s]})),!1)),(l=n.current).push.apply(l,Mw([],Xu(g.map(function(E){return[E,s]})),!1))}});return function(){i.unsubscribe()}},[]),Sc(function(){for(;n.current.length;){var i=Xu(n.current.shift(),2),s=i[0],a=i[1];kw(s,a)}}),$.useEffect(function(){for(;e.current.length;){var i=Xu(e.current.shift(),2),s=i[0],a=i[1];kw(s,a)}})}var bc=function(){return bc=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},bc.apply(this,arguments)},GB=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function jB(t,e,n){if(typeof t=="object")return t;var i=function(){};return{next:t,error:e||i,complete:n||i}}function $B(t,e,n){e===void 0&&(e={});var i=Dw(function(){return typeof t=="function"?t():t}),s=e.context,a=e.guards,l=e.actions,c=e.activities,d=e.services,h=e.delays,g=e.state,E=GB(e,["context","guards","actions","activities","services","delays","state"]),T=Dw(function(){var w={context:s,guards:a,actions:l,activities:c,services:d,delays:h},N=i.withConfig(w,function(){return bc(bc({},i.context),s)});return JR(N,bc({deferEvents:!0},E))});return Sc(function(){var w;return n&&(w=T.subscribe(jB(n))),function(){w==null||w.unsubscribe()}},[n]),Sc(function(){return T.start(g?sr.create(g):void 0),function(){T.stop()}},[]),Sc(function(){Object.assign(T.machine.options.actions,l),Object.assign(T.machine.options.guards,a),Object.assign(T.machine.options.activities,c),Object.assign(T.machine.options.services,d),Object.assign(T.machine.options.delays,h)},[l,a,c,d,h]),HB(T),T}var KB=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),s,a=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(c){l={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return a};function JB(t,e){e===void 0&&(e={});var n=$.useCallback(function(c){var d=c.changed===void 0&&Object.keys(c.children).length;(c.changed||d)&&l(c)},[]),i=$B(t,e,n),s=KB($.useState(function(){var c=i.machine.initialState;return e.state?sr.create(e.state):c}),2),a=s[0],l=s[1];return[a,i.send,i]}function Zt(){return Zt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Zt.apply(null,arguments)}function Ml(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}const Ze={arr:Array.isArray,obj:t=>Object.prototype.toString.call(t)==="[object Object]",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0,nul:t=>t===null,set:t=>t instanceof Set,map:t=>t instanceof Map,equ(t,e){if(typeof t!=typeof e)return!1;if(Ze.str(t)||Ze.num(t))return t===e;if(Ze.obj(t)&&Ze.obj(e)&&Object.keys(t).length+Object.keys(e).length===0)return!0;let n;for(n in t)if(!(n in e))return!1;for(n in e)if(t[n]!==e[n])return!1;return Ze.und(n)?t===e:!0}};function YB(t,e){return n=>(Ze.arr(n)?n:Object.keys(n)).reduce((i,s)=>{const a=s;return i[a]=t(a),i},t)}function WB(){const t=$.useState(!1),e=t[1];return $.useCallback(()=>e(i=>!i),[])}function oa(t,e){return Ze.und(t)||Ze.nul(t)?e:t}function zd(t){return Ze.und(t)?[]:Ze.arr(t)?t:[t]}function Sl(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Ze.fun(t)?t(...n):t}function QB(t){return t.to,t.from,t.config,t.onStart,t.onRest,t.onFrame,t.children,t.reset,t.reverse,t.force,t.immediate,t.delay,t.attach,t.destroyed,t.interpolateTo,t.ref,t.lazy,Ml(t,["to","from","config","onStart","onRest","onFrame","children","reset","reverse","force","immediate","delay","attach","destroyed","interpolateTo","ref","lazy"])}function iy(t){const e=QB(t);if(Ze.und(e))return Zt({to:e},t);const n=Object.keys(t).reduce((i,s)=>Ze.und(e[s])?Zt({},i,{[s]:t[s]}):i,{});return Zt({to:e},n)}function XB(t,e){return e&&(Ze.fun(e)?e(t):Ze.obj(e)&&(e.current=t)),t}class _r{constructor(){this.payload=void 0,this.children=[]}getAnimatedValue(){return this.getValue()}getPayload(){return this.payload||this}attach(){}detach(){}getChildren(){return this.children}addChild(e){this.children.length===0&&this.attach(),this.children.push(e)}removeChild(e){const n=this.children.indexOf(e);this.children.splice(n,1),this.children.length===0&&this.detach()}}class iv extends _r{constructor(){super(...arguments),this.payload=[],this.attach=()=>this.payload.forEach(e=>e instanceof _r&&e.addChild(this)),this.detach=()=>this.payload.forEach(e=>e instanceof _r&&e.removeChild(this))}}class YR extends _r{constructor(){super(...arguments),this.payload={},this.attach=()=>Object.values(this.payload).forEach(e=>e instanceof _r&&e.addChild(this)),this.detach=()=>Object.values(this.payload).forEach(e=>e instanceof _r&&e.removeChild(this))}getValue(e){e===void 0&&(e=!1);const n={};for(const i in this.payload){const s=this.payload[i];e&&!(s instanceof _r)||(n[i]=s instanceof _r?s[e?"getAnimatedValue":"getValue"]():s)}return n}getAnimatedValue(){return this.getValue(!0)}}let L0;function ZB(t,e){L0={fn:t,transform:e}}let WR;function ez(t){WR=t}let QR=t=>typeof window<"u"?window.requestAnimationFrame(t):-1,Jh;function tz(t){Jh=t}let XR=()=>Date.now(),nz=t=>t.current,ZR;function iz(t){ZR=t}class rz extends YR{constructor(e,n){super(),this.update=void 0,this.payload=e.style?Zt({},e,{style:ZR(e.style)}):e,this.update=n,this.attach()}}const sz=t=>Ze.fun(t)&&!(t.prototype instanceof An.Component),oz=t=>$.forwardRef((n,i)=>{const s=WB(),a=$.useRef(!0),l=$.useRef(null),c=$.useRef(null),d=$.useCallback(T=>{const w=l.current,N=()=>{let P=!1;c.current&&(P=L0.fn(c.current,l.current.getAnimatedValue())),(!c.current||P===!1)&&s()};l.current=new rz(T,N),w&&w.detach()},[]);$.useEffect(()=>()=>{a.current=!1,l.current&&l.current.detach()},[]),$.useImperativeHandle(i,()=>nz(c)),d(n);const h=l.current.getValue();h.scrollTop,h.scrollLeft;const g=Ml(h,["scrollTop","scrollLeft"]),E=sz(t)?void 0:T=>c.current=XB(T,i);return An.createElement(t,Zt({},g,{ref:E}))});let Ac=!1;const pa=new Set,e1=()=>{if(!Ac)return!1;let t=XR();for(let e of pa){let n=!1;for(let i=0;i<e.configs.length;i++){let s=e.configs[i],a,l;for(let c=0;c<s.animatedValues.length;c++){let d=s.animatedValues[c];if(d.done)continue;let h=s.fromValues[c],g=s.toValues[c],E=d.lastPosition,T=g instanceof _r,w=Array.isArray(s.initialVelocity)?s.initialVelocity[c]:s.initialVelocity;if(T&&(g=g.getValue()),s.immediate){d.setValue(g),d.done=!0;continue}if(typeof h=="string"||typeof g=="string"){d.setValue(g),d.done=!0;continue}if(s.duration!==void 0)E=h+s.easing((t-d.startTime)/s.duration)*(g-h),a=t>=d.startTime+s.duration;else if(s.decay)E=h+w/(1-.998)*(1-Math.exp(-.0020000000000000018*(t-d.startTime))),a=Math.abs(d.lastPosition-E)<.1,a&&(g=E);else{l=d.lastTime!==void 0?d.lastTime:t,w=d.lastVelocity!==void 0?d.lastVelocity:s.initialVelocity,t>l+64&&(l=t);let N=Math.floor(t-l);for(let F=0;F<N;++F){let q=-s.tension*(E-g),K=-s.friction*w,X=(q+K)/s.mass;w=w+X*1/1e3,E=E+w*1/1e3}let P=s.clamp&&s.tension!==0?h<g?E>g:E<g:!1,V=Math.abs(w)<=s.precision,z=s.tension!==0?Math.abs(g-E)<=s.precision:!0;a=P||V&&z,d.lastVelocity=w,d.lastTime=t}T&&!s.toValues[c].done&&(a=!1),a?(d.value!==g&&(E=g),d.done=!0):n=!0,d.setValue(E),d.lastPosition=E}e.props.onFrame&&(e.values[s.name]=s.interpolation.getValue())}e.props.onFrame&&e.props.onFrame(e.values),n||(pa.delete(e),e.stop(!0))}return pa.size?QR(e1):Ac=!1,Ac},az=t=>{pa.has(t)||pa.add(t),Ac||(Ac=!0,QR(e1))},lz=t=>{pa.has(t)&&pa.delete(t)};function Yh(t,e,n){if(typeof t=="function")return t;if(Array.isArray(t))return Yh({range:t,output:e,extrapolate:n});if(Jh&&typeof t.output[0]=="string")return Jh(t);const i=t,s=i.output,a=i.range||[0,1],l=i.extrapolateLeft||i.extrapolate||"extend",c=i.extrapolateRight||i.extrapolate||"extend",d=i.easing||(h=>h);return h=>{const g=cz(h,a);return uz(h,a[g],a[g+1],s[g],s[g+1],d,l,c,i.map)}}function uz(t,e,n,i,s,a,l,c,d){let h=d?d(t):t;if(h<e){if(l==="identity")return h;l==="clamp"&&(h=e)}if(h>n){if(c==="identity")return h;c==="clamp"&&(h=n)}return i===s?i:e===n?t<=e?i:s:(e===-1/0?h=-h:n===1/0?h=h-e:h=(h-e)/(n-e),h=a(h),i===-1/0?h=-h:s===1/0?h=h+i:h=h*(s-i)+i,h)}function cz(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}class zl extends iv{constructor(e,n,i,s){super(),this.calc=void 0,this.payload=e instanceof iv&&!(e instanceof zl)?e.getPayload():Array.isArray(e)?e:[e],this.calc=Yh(n,i,s)}getValue(){return this.calc(...this.payload.map(e=>e.getValue()))}updateConfig(e,n,i){this.calc=Yh(e,n,i)}interpolate(e,n,i){return new zl(this,e,n,i)}}const pl=(t,e,n)=>t&&new zl(t,e,n),fz={default:{tension:170,friction:26}};function t1(t,e){"update"in t?e.add(t):t.getChildren().forEach(n=>t1(n,e))}class rv extends _r{constructor(e){var n;super(),n=this,this.animatedStyles=new Set,this.value=void 0,this.startPosition=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.startTime=void 0,this.lastTime=void 0,this.done=!1,this.setValue=function(i,s){s===void 0&&(s=!0),n.value=i,s&&n.flush()},this.value=e,this.startPosition=e,this.lastPosition=e}flush(){this.animatedStyles.size===0&&t1(this,this.animatedStyles),this.animatedStyles.forEach(e=>e.update())}clearStyles(){this.animatedStyles.clear()}getValue(){return this.value}interpolate(e,n,i){return new zl(this,e,n,i)}}class dz extends iv{constructor(e){super(),this.payload=e.map(n=>new rv(n))}setValue(e,n){n===void 0&&(n=!0),Array.isArray(e)?e.length===this.payload.length&&e.forEach((i,s)=>this.payload[s].setValue(i,n)):this.payload.forEach(i=>i.setValue(e,n))}getValue(){return this.payload.map(e=>e.getValue())}interpolate(e,n){return new zl(this,e,n)}}let hz=0,pz=class{constructor(){this.id=void 0,this.idle=!0,this.hasChanged=!1,this.guid=0,this.local=0,this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.listeners=[],this.queue=[],this.localQueue=void 0,this.getValues=()=>this.interpolations,this.id=hz++}update(e){if(!e)return this;const n=iy(e),i=n.delay,s=i===void 0?0:i,a=n.to,l=Ml(n,["delay","to"]);if(Ze.arr(a)||Ze.fun(a))this.queue.push(Zt({},l,{delay:s,to:a}));else if(a){let c={};Object.entries(a).forEach(d=>{let h=d[0],g=d[1];const E=Zt({to:{[h]:g},delay:Sl(s,h)},l),T=c[E.delay]&&c[E.delay].to;c[E.delay]=Zt({},c[E.delay],E,{to:Zt({},T,E.to)})}),this.queue=Object.values(c)}return this.queue=this.queue.sort((c,d)=>c.delay-d.delay),this.diff(l),this}start(e){if(this.queue.length){this.idle=!1,this.localQueue&&this.localQueue.forEach(s=>{let a=s.from,l=a===void 0?{}:a,c=s.to,d=c===void 0?{}:c;Ze.obj(l)&&(this.merged=Zt({},l,this.merged)),Ze.obj(d)&&(this.merged=Zt({},this.merged,d))});const n=this.local=++this.guid,i=this.localQueue=this.queue;this.queue=[],i.forEach((s,a)=>{let l=s.delay,c=Ml(s,["delay"]);const d=g=>{a===i.length-1&&n===this.guid&&g&&(this.idle=!0,this.props.onRest&&this.props.onRest(this.merged)),e&&e()};let h=Ze.arr(c.to)||Ze.fun(c.to);l?setTimeout(()=>{n===this.guid&&(h?this.runAsync(c,d):this.diff(c).start(d))},l):h?this.runAsync(c,d):this.diff(c).start(d)})}else Ze.fun(e)&&this.listeners.push(e),this.props.onStart&&this.props.onStart(),az(this);return this}stop(e){return this.listeners.forEach(n=>n(e)),this.listeners=[],this}pause(e){return this.stop(!0),e&&lz(this),this}runAsync(e,n){var i=this;e.delay;let s=Ml(e,["delay"]);const a=this.local;let l=Promise.resolve(void 0);if(Ze.arr(s.to))for(let c=0;c<s.to.length;c++){const d=c,h=Zt({},s,iy(s.to[d]));Ze.arr(h.config)&&(h.config=h.config[d]),l=l.then(()=>{if(a===this.guid)return new Promise(g=>this.diff(h).start(g))})}else if(Ze.fun(s.to)){let c=0,d;l=l.then(()=>s.to(h=>{const g=Zt({},s,iy(h));if(Ze.arr(g.config)&&(g.config=g.config[c]),c++,a===this.guid)return d=new Promise(E=>this.diff(g).start(E))},function(h){return h===void 0&&(h=!0),i.stop(h)}).then(()=>d))}l.then(n)}diff(e){this.props=Zt({},this.props,e);let n=this.props,i=n.from,s=i===void 0?{}:i,a=n.to,l=a===void 0?{}:a,c=n.config,d=c===void 0?{}:c,h=n.reverse,g=n.attach,E=n.reset,T=n.immediate;if(h){var w=[l,s];s=w[0],l=w[1]}this.merged=Zt({},s,this.merged,l),this.hasChanged=!1;let N=g&&g(this);if(this.animations=Object.entries(this.merged).reduce((P,V)=>{let z=V[0],F=V[1],q=P[z]||{};const K=Ze.num(F),X=Ze.str(F)&&!F.startsWith("#")&&!/\d/.test(F)&&!WR[F],G=Ze.arr(F),I=!K&&!G&&!X;let x=Ze.und(s[z])?F:s[z],R=K||G||X?F:1,L=Sl(d,z);N&&(R=N.animations[z].parent);let M=q.parent,O=q.interpolation,U=zd(N?R.getPayload():R),we,ve=F;I&&(ve=Jh({range:[0,1],output:[F,F]})(1));let ee=O&&O.getValue();const he=!Ze.und(M)&&q.animatedValues.some(te=>!te.done),Ie=!Ze.equ(ve,ee),De=!Ze.equ(ve,q.previous),H=!Ze.equ(L,q.config);if(E||De&&Ie||H){if(K||X)M=O=q.parent||new rv(x);else if(G)M=O=q.parent||new dz(x);else if(I){let te=q.interpolation&&q.interpolation.calc(q.parent.value);te=te!==void 0&&!E?te:x,q.parent?(M=q.parent,M.setValue(0,!1)):M=new rv(0);const fe={output:[te,F]};q.interpolation?(O=q.interpolation,q.interpolation.updateConfig(fe)):O=M.interpolate(fe)}return U=zd(N?R.getPayload():R),we=zd(M.getPayload()),E&&!I&&M.setValue(x,!1),this.hasChanged=!0,we.forEach(te=>{te.startPosition=te.value,te.lastPosition=te.value,te.lastVelocity=he?te.lastVelocity:void 0,te.lastTime=he?te.lastTime:void 0,te.startTime=XR(),te.done=!1,te.animatedStyles.clear()}),Sl(T,z)&&M.setValue(I?R:F,!1),Zt({},P,{[z]:Zt({},q,{name:z,parent:M,interpolation:O,animatedValues:we,toValues:U,previous:ve,config:L,fromValues:zd(M.getValue()),immediate:Sl(T,z),initialVelocity:oa(L.velocity,0),clamp:oa(L.clamp,!1),precision:oa(L.precision,.01),tension:oa(L.tension,170),friction:oa(L.friction,26),mass:oa(L.mass,1),duration:L.duration,easing:oa(L.easing,te=>te),decay:L.decay})})}else return Ie?P:(I&&(M.setValue(1,!1),O.updateConfig({output:[ve,ve]})),M.done=!0,this.hasChanged=!0,Zt({},P,{[z]:Zt({},P[z],{previous:ve})}))},this.animations),this.hasChanged){this.configs=Object.values(this.animations),this.values={},this.interpolations={};for(let P in this.animations)this.interpolations[P]=this.animations[P].interpolation,this.values[P]=this.animations[P].interpolation.getValue()}return this}destroy(){this.stop(),this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.local=0}};const mz=(t,e)=>{const n=$.useRef(!1),i=$.useRef(),s=Ze.fun(e),a=$.useMemo(()=>{i.current&&(i.current.map(E=>E.destroy()),i.current=void 0);let g;return[new Array(t).fill().map((E,T)=>{const w=new pz,N=s?Sl(e,T,w):e[T];return T===0&&(g=N.ref),w.update(N),g||w.start(),w}),g]},[t]),l=a[0],c=a[1];i.current=l,$.useImperativeHandle(c,()=>({start:()=>Promise.all(i.current.map(g=>new Promise(E=>g.start(E)))),stop:g=>i.current.forEach(E=>E.stop(g)),get controllers(){return i.current}}));const d=$.useMemo(()=>g=>i.current.map((E,T)=>{E.update(s?Sl(g,T,E):g[T]),c||E.start()}),[t]);$.useEffect(()=>{n.current?s||d(e):c||i.current.forEach(g=>g.start())}),$.useEffect(()=>(n.current=!0,()=>i.current.forEach(g=>g.destroy())),[]);const h=i.current.map(g=>g.getValues());return s?[h,d,g=>i.current.forEach(E=>E.pause(g))]:h},gz=t=>{const e=Ze.fun(t),n=mz(1,e?t:[t]),i=n[0],s=n[1],a=n[2];return e?[i[0],s,a]:i};class yz extends YR{constructor(e){e===void 0&&(e={}),super(),e.transform&&!(e.transform instanceof _r)&&(e=L0.transform(e)),this.payload=e}}const Wh={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Sr="[-+]?\\d*\\.?\\d+",Qh=Sr+"%";function Pp(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}const vz=new RegExp("rgb"+Pp(Sr,Sr,Sr)),_z=new RegExp("rgba"+Pp(Sr,Sr,Sr,Sr)),Ez=new RegExp("hsl"+Pp(Sr,Qh,Qh)),Tz=new RegExp("hsla"+Pp(Sr,Qh,Qh,Sr)),Sz=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,bz=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Az=/^#([0-9a-fA-F]{6})$/,wz=/^#([0-9a-fA-F]{8})$/;function Cz(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=Az.exec(t))?parseInt(e[1]+"ff",16)>>>0:Wh.hasOwnProperty(t)?Wh[t]:(e=vz.exec(t))?(ml(e[1])<<24|ml(e[2])<<16|ml(e[3])<<8|255)>>>0:(e=_z.exec(t))?(ml(e[1])<<24|ml(e[2])<<16|ml(e[3])<<8|Vw(e[4]))>>>0:(e=Sz.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=wz.exec(t))?parseInt(e[1],16)>>>0:(e=bz.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Ez.exec(t))?(Pw(Lw(e[1]),Hd(e[2]),Hd(e[3]))|255)>>>0:(e=Tz.exec(t))?(Pw(Lw(e[1]),Hd(e[2]),Hd(e[3]))|Vw(e[4]))>>>0:null}function ry(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Pw(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,s=2*n-i,a=ry(s,i,t+1/3),l=ry(s,i,t),c=ry(s,i,t-1/3);return Math.round(a*255)<<24|Math.round(l*255)<<16|Math.round(c*255)<<8}function ml(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function Lw(t){return(parseFloat(t)%360+360)%360/360}function Vw(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Hd(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function Ow(t){let e=Cz(t);if(e===null)return t;e=e||0;let n=(e&4278190080)>>>24,i=(e&16711680)>>>16,s=(e&65280)>>>8,a=(e&255)/255;return`rgba(${n}, ${i}, ${s}, ${a})`}const Gd=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Iz=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,xz=new RegExp(`(${Object.keys(Wh).join("|")})`,"g"),Rz=t=>{const e=t.output.map(s=>s.replace(Iz,Ow)).map(s=>s.replace(xz,Ow)),n=e[0].match(Gd).map(()=>[]);e.forEach(s=>{s.match(Gd).forEach((a,l)=>n[l].push(+a))});const i=e[0].match(Gd).map((s,a)=>Yh(Zt({},t,{output:n[a]})));return s=>{let a=0;return e[0].replace(Gd,()=>i[a++](s)).replace(/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,(l,c,d,h,g)=>`rgba(${Math.round(c)}, ${Math.round(d)}, ${Math.round(h)}, ${g})`)}};let wc={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};const Nz=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),Dz=["Webkit","Ms","Moz","O"];wc=Object.keys(wc).reduce((t,e)=>(Dz.forEach(n=>t[Nz(n,e)]=t[e]),t),wc);function Mz(t,e,n){return e==null||typeof e=="boolean"||e===""?"":!n&&typeof e=="number"&&e!==0&&!(wc.hasOwnProperty(t)&&wc[t])?e+"px":(""+e).trim()}const Uw={};iz(t=>new yz(t));tz(Rz);ez(Wh);ZB((t,e)=>{if(t.nodeType&&t.setAttribute!==void 0){const s=e.style,a=e.children,l=e.scrollTop,c=e.scrollLeft,d=Ml(e,["style","children","scrollTop","scrollLeft"]),h=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter";l!==void 0&&(t.scrollTop=l),c!==void 0&&(t.scrollLeft=c),a!==void 0&&(t.textContent=a);for(let g in s)if(s.hasOwnProperty(g)){var n=g.indexOf("--")===0,i=Mz(g,s[g],n);g==="float"&&(g="cssFloat"),n?t.style.setProperty(g,i):t.style[g]=i}for(let g in d){const E=h?g:Uw[g]||(Uw[g]=g.replace(/([A-Z])/g,T=>"-"+T.toLowerCase()));typeof t.getAttribute(E)<"u"&&t.setAttribute(E,d[g])}return}else return!1},t=>t);const kz=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Pz=YB(oz),Lz=Pz(kz);function Fw(t,e){return t.map(function(n,i){return n+e[i]})}function n1(t,e){return t.map(function(n,i){return n-e[i]})}function sv(t){return Math.hypot.apply(Math,t)}function Vz(t,e,n){var i=sv(e),s=i===0?0:1/i,a=n===0?0:1/n,l=a*i,c=e.map(function(g){return a*g}),d=e.map(function(g){return s*g}),h=sv(t);return{velocities:c,velocity:l,distance:h,direction:d}}function ov(t){return Math.sign?Math.sign(t):+(t>0)-+(t<0)||+t}function Oz(t,e,n){return Math.max(e,Math.min(t,n))}function Uz(t,e){return Math.pow(t,e*5)}function qw(t,e,n){return e===0||Math.abs(e)===1/0?Uz(t,n):t*e*n/(e+n*t)}function Cc(t,e,n,i){return i===void 0&&(i=.15),i===0?Oz(t,e,n):t<e?-qw(e-t,n-e,i)+e:t>n?+qw(t-n,n-e,i)+n:t}function Fz(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function qz(t,e,n){return e&&Fz(t.prototype,e),t}function pi(){return pi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},pi.apply(this,arguments)}function i1(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Bz(t,e){if(t==null)return{};var n={},i=Object.keys(t),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function jd(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zz(t,e){if(t){if(typeof t=="string")return Bw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bw(t,e)}}function Bw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Lp(t,e){var n;if(typeof Symbol>"u"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=zz(t))||e){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return n=t[Symbol.iterator](),n.next.bind(n)}function r1(){}function s1(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?r1:e.length===1?e[0]:function(){for(var i,s=Lp(e),a;!(a=s()).done;){var l=a.value;i=l.apply(this,arguments)||i}return i}}function po(t,e){if(t===void 0){if(e===void 0)throw new Error("Must define fallback value if undefined is expected");t=e}return Array.isArray(t)?t:[t,t]}function $d(t){if(typeof t=="function"){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return t.apply(void 0,n)}else return t}function V0(t,e){t===void 0&&(t={});for(var n={},i=0,s=Object.entries(e);i<s.length;i++){var a=s[i],l=a[0],c=a[1];switch(typeof c){case"function":n[l]=c.call(n,t[l],l,t);break;case"object":n[l]=V0(t[l],c);break;case"boolean":c&&(n[l]=t[l]);break}}return n}var Hz=180,Gz=.15,jz=.5,$z=60,Kz={threshold:function(e){return e===void 0&&(e=0),po(e)},rubberband:function(e){switch(e===void 0&&(e=0),e){case!0:return po(Gz);case!1:return po(0);default:return po(e)}},enabled:function(e){return e===void 0&&(e=!0),e},triggerAllEvents:function(e){return e===void 0&&(e=!1),e},initial:function(e){return e===void 0&&(e=0),typeof e=="function"?e:po(e)}},o1=pi({},Kz,{axis:!0,lockDirection:function(e){return e===void 0&&(e=!1),e},bounds:function(e){if(e===void 0&&(e={}),typeof e=="function")return function(E){return o1.bounds(e(E))};var n=e,i=n.left,s=i===void 0?-1/0:i,a=n.right,l=a===void 0?1/0:a,c=n.top,d=c===void 0?-1/0:c,h=n.bottom,g=h===void 0?1/0:h;return[[s,l],[d,g]]}}),Jz=typeof window<"u"&&window.document&&window.document.createElement,Yz={enabled:function(e){return e===void 0&&(e=!0),e},domTarget:!0,window:(function(t){function e(n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e})(function(t){return t===void 0&&(t=Jz?window:void 0),t}),eventOptions:function(e){var n=e===void 0?{}:e,i=n.passive,s=i===void 0?!0:i,a=n.capture,l=a===void 0?!1:a;return{passive:s,capture:l}}},Wz=pi({},o1,{threshold:function(e,n,i){var s=i.filterTaps,a=s===void 0?!1:s,l=i.lockDirection,c=l===void 0?!1:l,d=i.axis,h=d===void 0?void 0:d,g=po(e,a?3:c||h?1:0);return this.filterTaps=a||g[0]+g[1]>0,g},swipeVelocity:function(e){return e===void 0&&(e=jz),po(e)},swipeDistance:function(e){return e===void 0&&(e=$z),po(e)},delay:function(e){switch(e===void 0&&(e=0),e){case!0:return Hz;case!1:return 0;default:return e}}});function Qz(t){return t===void 0&&(t={}),V0(t,Yz)}function Xz(t){return t===void 0&&(t={}),V0(t,Wz)}function Zz(t){var e=t.domTarget,n=t.eventOptions,i=t.window,s=t.enabled,a=Bz(t,["domTarget","eventOptions","window","enabled"]),l=Qz({domTarget:e,eventOptions:n,window:i,enabled:s});return l.drag=Xz(a),l}function Zu(t){return pi({_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_lastEventType:void 0,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:r1,canceled:!1,memo:void 0,args:void 0},t)}function a1(){var t={hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1},e=Zu({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,_isTap:!0,_delayedEvent:!1,_pointerId:void 0,tap:!1,swipe:[0,0]}),n=Zu({da:[0,0],vdva:[0,0],origin:void 0,turns:0}),i=Zu({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),s=Zu({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),a=Zu({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0});return{shared:t,drag:e,pinch:n,wheel:i,move:s,scroll:a}}var la=new Map,eH=(function(){function t(n,i){var s=this;i===void 0&&(i=[]),this.controller=n,this.args=i,this.debounced=!0,this.setTimeout=function(a,l){var c;l===void 0&&(l=140),clearTimeout(s.controller.timeouts[s.stateKey]);for(var d=arguments.length,h=new Array(d>2?d-2:0),g=2;g<d;g++)h[g-2]=arguments[g];s.controller.timeouts[s.stateKey]=(c=window).setTimeout.apply(c,[a,l].concat(h))},this.clearTimeout=function(){clearTimeout(s.controller.timeouts[s.stateKey])},this.fireGestureHandler=function(a){if(a===void 0&&(a=!1),s.state._blocked)return s.debounced||(s.state._active=!1,s.clean()),null;if(!a&&!s.state.intentional&&!s.config.triggerAllEvents)return null;if(s.state.intentional){var l=s.state.active,c=s.state._active;s.state.active=c,s.state.first=c&&!l,s.state.last=l&&!c,s.controller.state.shared[s.ingKey]=c}var d=pi({},s.controller.state.shared,s.state,s.mapStateValues(s.state)),h=s.handler(d);return s.state.memo=h!==void 0?h:s.state.memo,s.state._active||s.clean(),d}}var e=t.prototype;return e.updateSharedState=function(i){Object.assign(this.controller.state.shared,i)},e.updateGestureState=function(i){Object.assign(this.state,i)},e.checkIntentionality=function(i,s){return{_intentional:i,_blocked:!1}},e.getMovement=function(i){var s=this.config,a=s.initial,l=s.bounds,c=s.rubberband,d=s.threshold,h=this.state,g=h._bounds,E=h._initial,T=h._active,w=h._intentional,N=h.lastOffset,P=h.movement,V=this.getInternalMovement(i,this.state),z=w[0]===!1?zw(V[0],d[0]):w[0],F=w[1]===!1?zw(V[1],d[1]):w[1],q=this.checkIntentionality([z,F],V);if(q._blocked)return pi({},q,{_movement:V,delta:[0,0]});var K=q._intentional,X=V,G,I;if(K[0]!==!1&&w[0]===!1&&(I=$d(a,this.state),G=$d(l,this.state),E[0]=I[0],g[0]=G[0]),K[1]!==!1&&w[1]===!1){var x,R;I=(x=I)!=null?x:$d(a,this.state),G=(R=G)!=null?R:$d(l,this.state),E[1]=I[1],g[1]=G[1]}var L=[K[0]!==!1?V[0]-K[0]:E[0],K[1]!==!1?V[1]-K[1]:E[1]],M=Fw(L,N),O=T?c:[0,0];return L=Hw(g,Fw(L,E),O),pi({},q,{intentional:K[0]!==!1||K[1]!==!1,_initial:E,_movement:X,movement:L,values:i,offset:Hw(g,M,O),delta:n1(L,P)})},e.clean=function(){this.clearTimeout()},qz(t,[{key:"config",get:function(){return this.controller.config[this.stateKey]}},{key:"enabled",get:function(){return this.controller.config.enabled&&this.config.enabled}},{key:"state",get:function(){return this.controller.state[this.stateKey]}},{key:"handler",get:function(){return this.controller.handlers[this.stateKey]}}]),t})();function zw(t,e){return Math.abs(t)>=e?ov(t)*e:!1}function Hw(t,e,n){var i=e[0],s=e[1],a=n[0],l=n[1],c=t[0],d=c[0],h=c[1],g=t[1],E=g[0],T=g[1];return[Cc(i,d,h,a),Cc(s,E,T,l)]}function sy(t,e,n){var i=t.state,s=t.args,a=e.timeStamp,l=e.type,c=i.values,d=n?0:a-i.startTime;return{_lastEventType:l,event:e,timeStamp:a,elapsedTime:d,args:s,previous:c}}function tH(t,e,n){var i=t.state.offset,s=n.timeStamp;return pi({},a1()[t.stateKey],{_active:!0,values:e,initial:e,offset:i,lastOffset:i,startTime:s})}function nH(t,e){return function(n){for(var i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];return t.call.apply(t,[this,pi({},e,{event:n})].concat(s))}}var iH=function(e){var n=this;this.classes=e,this.bind=function(){for(var i={},s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];for(var c=Lp(n.classes),d;!(d=c()).done;){var h=d.value;new h(n,a).addBindings(i)}for(var g=0,E=Object.entries(n.nativeRefs);g<E.length;g++){var T=E[g],w=T[0],N=T[1];av(i,w,nH(N,pi({},n.state.shared,{args:a})))}return n.config.domTarget?aH(n,i):lH(n,i)},this.effect=function(){return n.config.domTarget&&n.bind(),n.clean},this.clean=function(){var i=u1(n.config),s=n.config.eventOptions;i&&of(i,l1(n.domListeners),s),Object.values(n.timeouts).forEach(clearTimeout),rH(n)},this.state=a1(),this.timeouts={},this.domListeners=[],this.windowListeners={}};function rH(t){var e=t.config,n=e.window,i=e.eventOptions,s=t.windowListeners;if(n){for(var a in s){var l=s[a];of(n,l,i)}t.windowListeners={}}}function sH(t,e){var n=t.config,i=t.windowListeners;n.window&&(of(n.window,i[e],n.eventOptions),delete i[e])}function oH(t,e,n){var i=t.config,s=t.windowListeners;n===void 0&&(n=[]),i.window&&(of(i.window,s[e],i.eventOptions),c1(i.window,s[e]=n,i.eventOptions))}function aH(t,e){var n=t.config,i=t.domListeners,s=u1(n);if(!s)throw new Error("domTarget must be defined");var a=n.eventOptions;of(s,l1(i),a);for(var l=0,c=Object.entries(e);l<c.length;l++){var d=c[l],h=d[0],g=d[1],E=h.slice(2).toLowerCase();i.push([E,s1.apply(void 0,g)])}c1(s,i,a)}function lH(t,e){for(var n=t.config,i={},s=n.eventOptions.capture?"Capture":"",a=0,l=Object.entries(e);a<l.length;a++){var c=l[a],d=c[0],h=c[1],g=Array.isArray(h)?h:[h],E=d+s;i[E]=s1.apply(void 0,g)}return i}function l1(t){return t===void 0&&(t=[]),t.splice(0,t.length)}function u1(t){var e=t.domTarget;return e&&"current"in e?e.current:e}function av(t,e,n){t[e]||(t[e]=[]),t[e].push(n)}function c1(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var i=Lp(e),s;!(s=i()).done;){var a=s.value,l=a[0],c=a[1];t.addEventListener(l,c,n)}}function of(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var i=Lp(e),s;!(s=i()).done;){var a=s.value,l=a[0],c=a[1];t.removeEventListener(l,c,n)}}function uH(t,e,n){n===void 0&&(n={});var i=fH(t),s=An.useMemo(function(){return new iH(i)},[]);return s.config=e,s.handlers=t,s.nativeRefs=n,An.useEffect(s.effect,[]),s.config.domTarget?cH:s.bind}function cH(){}function fH(t){var e=new Set;return t.drag&&e.add(la.get("drag")),t.wheel&&e.add(la.get("wheel")),t.scroll&&e.add(la.get("scroll")),t.move&&e.add(la.get("move")),t.pinch&&e.add(la.get("pinch")),t.hover&&e.add(la.get("hover")),e}var dH=(function(t){i1(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.getInternalMovement=function(s,a){return n1(s,a.initial)},n.checkIntentionality=function(s,a){if(s[0]===!1&&s[1]===!1)return{_intentional:s,axis:this.state.axis};var l=a.map(Math.abs),c=l[0],d=l[1],h=this.state.axis||(c>d?"x":c<d?"y":void 0);return!this.config.axis&&!this.config.lockDirection?{_intentional:s,_blocked:!1,axis:h}:h?this.config.axis&&h!==this.config.axis?{_intentional:s,_blocked:!0,axis:h}:(s[h==="x"?1:0]=!1,{_intentional:s,_blocked:!1,axis:h}):{_intentional:[!1,!1],_blocked:!1,axis:h}},n.getKinematics=function(s,a){var l=this.getMovement(s);if(!l._blocked){var c=a.timeStamp-this.state.timeStamp;Object.assign(l,Vz(l.movement,l.delta,c))}return l},n.mapStateValues=function(s){return{xy:s.values,vxvy:s.velocities}},e})(eH);function f1(t){if("touches"in t){var e=t.targetTouches,n=t.changedTouches;return e.length>0?e:n}return null}function Gw(t){var e="buttons"in t?t.buttons:0,n=f1(t),i=n&&n.length||0,s=i>0||e>0,a=t.shiftKey,l=t.altKey,c=t.metaKey,d=t.ctrlKey;return{touches:i,down:s,buttons:e,shiftKey:a,altKey:l,metaKey:c,ctrlKey:d}}function jw(t){var e=f1(t),n=e?e[0]:t,i=n.clientX,s=n.clientY;return[i,s]}var hH=3,pH=220,mH=(function(t){i1(e,t);function e(){var i;return i=t.apply(this,arguments)||this,i.ingKey="dragging",i.stateKey="drag",i.onDragStart=function(s){!i.enabled||i.state._active||(oH(i.controller,i.stateKey,[["pointermove",i.onDragChange],["pointerup",i.onDragEnd],["pointercancel",i.onDragEnd]]),i.updateGestureState({_pointerId:s.pointerId}),i.config.delay>0?(i.state._delayedEvent=!0,"persist"in s&&typeof s.persist=="function"&&s.persist(),i.setTimeout(i.startDrag.bind(jd(i)),i.config.delay,s)):i.startDrag(s))},i.onDragChange=function(s){if(!i.state.canceled&&s.pointerId===i.state._pointerId){if(!i.state._active){i.state._delayedEvent&&(i.clearTimeout(),i.startDrag(s));return}var a=Gw(s);if(!a.down){i.onDragEnd(s);return}i.updateSharedState(a);var l=jw(s),c=i.getKinematics(l,s),d=sy(jd(i),s),h=i.state._isTap,g=sv(c._movement);h&&g>=hH&&(h=!1),i.updateGestureState(pi({},d,c,{_isTap:h})),i.fireGestureHandler()}},i.onDragEnd=function(s){if(s.pointerId===i.state._pointerId){i.state._active=!1,i.updateSharedState({down:!1,buttons:0,touches:0});var a=i.state._isTap,l=i.state.velocities,c=l[0],d=l[1],h=i.state.movement,g=h[0],E=h[1],T=i.state._intentional,w=T[0],N=T[1],P=i.config.swipeVelocity,V=P[0],z=P[1],F=i.config.swipeDistance,q=F[0],K=F[1],X=pi({},sy(jd(i),s),i.getMovement(i.state.values)),G=[0,0];X.elapsedTime<pH&&(w!==!1&&Math.abs(c)>V&&Math.abs(g)>q&&(G[0]=ov(c)),N!==!1&&Math.abs(d)>z&&Math.abs(E)>K&&(G[1]=ov(d))),i.updateGestureState(pi({},X,{tap:a,swipe:G})),i.fireGestureHandler(a===!0)}},i.clean=function(){t.prototype.clean.call(jd(i)),i.state._delayedEvent=!1,sH(i.controller,i.stateKey)},i.onCancel=function(){i.state.canceled||(i.updateGestureState({canceled:!0}),i.state._active=!1,i.updateSharedState({down:!1,buttons:0,touches:0}),requestAnimationFrame(function(){return i.fireGestureHandler()}))},i.onClick=function(s){i.state._isTap||s.stopPropagation()},i}var n=e.prototype;return n.startDrag=function(s){var a=jw(s);this.updateSharedState(Gw(s)),this.updateGestureState(pi({},tH(this,a,s),sy(this,s,!0),{_pointerId:s.pointerId,cancel:this.onCancel})),this.updateGestureState(this.getMovement(a)),this.fireGestureHandler()},n.addBindings=function(s){if(av(s,"onPointerDown",this.onDragStart),this.config.filterTaps){var a=this.controller.config.eventOptions.capture?"onClick":"onClickCapture";av(s,a,this.onClick)}},e})(dH);function gH(t,e){var n,i=[],s,a=!1;function l(){for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return a&&n===this&&e(d,i)||(s=t.apply(this,d),a=!0,n=this,i=d),s}return l}function gh(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,i,s;if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!gh(t[i],e[i]))return!1;return!0}var a;if(typeof Map=="function"&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(a=t.entries();!(i=a.next()).done;)if(!e.has(i.value[0]))return!1;for(a=t.entries();!(i=a.next()).done;)if(!gh(i.value[1],e.get(i.value[0])))return!1;return!0}if(typeof Set=="function"&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(a=t.entries();!(i=a.next()).done;)if(!e.has(i.value[0]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[i]))return!1;if(typeof Element<"u"&&t instanceof Element)return!1;for(i=n;i--!==0;)if(!(s[i]==="_owner"&&t.$$typeof)&&!gh(t[s[i]],e[s[i]]))return!1;return!0}return t!==t&&e!==e}function yH(t,e){try{return gh(t,e)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}function vH(t,e){e===void 0&&(e={}),la.set("drag",mH);var n=$.useRef();return n.current||(n.current=gH(Zz,yH)),uH({drag:t},n.current(e))}/*!
* tabbable 5.3.3
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var d1=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],Xh=d1.join(","),h1=typeof Element>"u",ba=h1?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,lv=!h1&&Element.prototype.getRootNode?function(t){return t.getRootNode()}:function(t){return t.ownerDocument},p1=function(e,n,i){var s=Array.prototype.slice.apply(e.querySelectorAll(Xh));return n&&ba.call(e,Xh)&&s.unshift(e),s=s.filter(i),s},m1=function t(e,n,i){for(var s=[],a=Array.from(e);a.length;){var l=a.shift();if(l.tagName==="SLOT"){var c=l.assignedElements(),d=c.length?c:l.children,h=t(d,!0,i);i.flatten?s.push.apply(s,h):s.push({scope:l,candidates:h})}else{var g=ba.call(l,Xh);g&&i.filter(l)&&(n||!e.includes(l))&&s.push(l);var E=l.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(l),T=!i.shadowRootFilter||i.shadowRootFilter(l);if(E&&T){var w=t(E===!0?l.children:E.children,!0,i);i.flatten?s.push.apply(s,w):s.push({scope:l,candidates:w})}else a.unshift.apply(a,l.children)}}return s},g1=function(e,n){return e.tabIndex<0&&(n||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||e.isContentEditable)&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},_H=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},y1=function(e){return e.tagName==="INPUT"},EH=function(e){return y1(e)&&e.type==="hidden"},TH=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(i){return i.tagName==="SUMMARY"});return n},SH=function(e,n){for(var i=0;i<e.length;i++)if(e[i].checked&&e[i].form===n)return e[i]},bH=function(e){if(!e.name)return!0;var n=e.form||lv(e),i=function(c){return n.querySelectorAll('input[type="radio"][name="'+c+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=i(window.CSS.escape(e.name));else try{s=i(e.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var a=SH(s,e.form);return!a||a===e},AH=function(e){return y1(e)&&e.type==="radio"},wH=function(e){return AH(e)&&!bH(e)},$w=function(e){var n=e.getBoundingClientRect(),i=n.width,s=n.height;return i===0&&s===0},CH=function(e,n){var i=n.displayCheck,s=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var a=ba.call(e,"details>summary:first-of-type"),l=a?e.parentElement:e;if(ba.call(l,"details:not([open]) *"))return!0;var c=lv(e).host,d=(c==null?void 0:c.ownerDocument.contains(c))||e.ownerDocument.contains(e);if(!i||i==="full"){if(typeof s=="function"){for(var h=e;e;){var g=e.parentElement,E=lv(e);if(g&&!g.shadowRoot&&s(g)===!0)return $w(e);e.assignedSlot?e=e.assignedSlot:!g&&E!==e.ownerDocument?e=E.host:e=g}e=h}if(d)return!e.getClientRects().length}else if(i==="non-zero-area")return $w(e);return!1},IH=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var i=0;i<n.children.length;i++){var s=n.children.item(i);if(s.tagName==="LEGEND")return ba.call(n,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}n=n.parentElement}return!1},Zh=function(e,n){return!(n.disabled||EH(n)||CH(n,e)||TH(n)||IH(n))},uv=function(e,n){return!(wH(n)||g1(n)<0||!Zh(e,n))},xH=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},RH=function t(e){var n=[],i=[];return e.forEach(function(s,a){var l=!!s.scope,c=l?s.scope:s,d=g1(c,l),h=l?t(s.candidates):c;d===0?l?n.push.apply(n,h):n.push(c):i.push({documentOrder:a,tabIndex:d,item:s,isScope:l,content:h})}),i.sort(_H).reduce(function(s,a){return a.isScope?s.push.apply(s,a.content):s.push(a.content),s},[]).concat(n)},NH=function(e,n){n=n||{};var i;return n.getShadowRoot?i=m1([e],n.includeContainer,{filter:uv.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:xH}):i=p1(e,n.includeContainer,uv.bind(null,n)),RH(i)},DH=function(e,n){n=n||{};var i;return n.getShadowRoot?i=m1([e],n.includeContainer,{filter:Zh.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):i=p1(e,n.includeContainer,Zh.bind(null,n)),i},Kd=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return ba.call(e,Xh)===!1?!1:uv(n,e)},MH=d1.concat("iframe").join(","),oy=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return ba.call(e,MH)===!1?!1:Zh(n,e)};/*!
* focus-trap 6.9.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function Kw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function Jw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Kw(Object(n),!0).forEach(function(i){kH(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kw(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function kH(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Yw=(function(){var t=[];return{activateTrap:function(n){if(t.length>0){var i=t[t.length-1];i!==n&&i.pause()}var s=t.indexOf(n);s===-1||t.splice(s,1),t.push(n)},deactivateTrap:function(n){var i=t.indexOf(n);i!==-1&&t.splice(i,1),t.length>0&&t[t.length-1].unpause()}}})(),PH=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},LH=function(e){return e.key==="Escape"||e.key==="Esc"||e.keyCode===27},VH=function(e){return e.key==="Tab"||e.keyCode===9},Ww=function(e){return setTimeout(e,0)},Qw=function(e,n){var i=-1;return e.every(function(s,a){return n(s)?(i=a,!1):!0}),i},ec=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return typeof e=="function"?e.apply(void 0,i):e},Jd=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},OH=function(e,n){var i=(n==null?void 0:n.document)||document,s=Jw({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},n),a={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},l,c=function(G,I,x){return G&&G[I]!==void 0?G[I]:s[x||I]},d=function(G){return a.containerGroups.findIndex(function(I){var x=I.container,R=I.tabbableNodes;return x.contains(G)||R.find(function(L){return L===G})})},h=function(G){var I=s[G];if(typeof I=="function"){for(var x=arguments.length,R=new Array(x>1?x-1:0),L=1;L<x;L++)R[L-1]=arguments[L];I=I.apply(void 0,R)}if(I===!0&&(I=void 0),!I){if(I===void 0||I===!1)return I;throw new Error("`".concat(G,"` was specified but was not a node, or did not return a node"))}var M=I;if(typeof I=="string"&&(M=i.querySelector(I),!M))throw new Error("`".concat(G,"` as selector refers to no known node"));return M},g=function(){var G=h("initialFocus");if(G===!1)return!1;if(G===void 0)if(d(i.activeElement)>=0)G=i.activeElement;else{var I=a.tabbableGroups[0],x=I&&I.firstTabbableNode;G=x||h("fallbackFocus")}if(!G)throw new Error("Your focus-trap needs to have at least one focusable element");return G},E=function(){if(a.containerGroups=a.containers.map(function(G){var I=NH(G,s.tabbableOptions),x=DH(G,s.tabbableOptions);return{container:G,tabbableNodes:I,focusableNodes:x,firstTabbableNode:I.length>0?I[0]:null,lastTabbableNode:I.length>0?I[I.length-1]:null,nextTabbableNode:function(L){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,O=x.findIndex(function(U){return U===L});if(!(O<0))return M?x.slice(O+1).find(function(U){return Kd(U,s.tabbableOptions)}):x.slice(0,O).reverse().find(function(U){return Kd(U,s.tabbableOptions)})}}}),a.tabbableGroups=a.containerGroups.filter(function(G){return G.tabbableNodes.length>0}),a.tabbableGroups.length<=0&&!h("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},T=function X(G){if(G!==!1&&G!==i.activeElement){if(!G||!G.focus){X(g());return}G.focus({preventScroll:!!s.preventScroll}),a.mostRecentlyFocusedNode=G,PH(G)&&G.select()}},w=function(G){var I=h("setReturnFocus",G);return I||(I===!1?!1:G)},N=function(G){var I=Jd(G);if(!(d(I)>=0)){if(ec(s.clickOutsideDeactivates,G)){l.deactivate({returnFocus:s.returnFocusOnDeactivate&&!oy(I,s.tabbableOptions)});return}ec(s.allowOutsideClick,G)||G.preventDefault()}},P=function(G){var I=Jd(G),x=d(I)>=0;x||I instanceof Document?x&&(a.mostRecentlyFocusedNode=I):(G.stopImmediatePropagation(),T(a.mostRecentlyFocusedNode||g()))},V=function(G){var I=Jd(G);E();var x=null;if(a.tabbableGroups.length>0){var R=d(I),L=R>=0?a.containerGroups[R]:void 0;if(R<0)G.shiftKey?x=a.tabbableGroups[a.tabbableGroups.length-1].lastTabbableNode:x=a.tabbableGroups[0].firstTabbableNode;else if(G.shiftKey){var M=Qw(a.tabbableGroups,function(ce){var he=ce.firstTabbableNode;return I===he});if(M<0&&(L.container===I||oy(I,s.tabbableOptions)&&!Kd(I,s.tabbableOptions)&&!L.nextTabbableNode(I,!1))&&(M=R),M>=0){var O=M===0?a.tabbableGroups.length-1:M-1,U=a.tabbableGroups[O];x=U.lastTabbableNode}}else{var we=Qw(a.tabbableGroups,function(ce){var he=ce.lastTabbableNode;return I===he});if(we<0&&(L.container===I||oy(I,s.tabbableOptions)&&!Kd(I,s.tabbableOptions)&&!L.nextTabbableNode(I))&&(we=R),we>=0){var ve=we===a.tabbableGroups.length-1?0:we+1,ee=a.tabbableGroups[ve];x=ee.firstTabbableNode}}}else x=h("fallbackFocus");x&&(G.preventDefault(),T(x))},z=function(G){if(LH(G)&&ec(s.escapeDeactivates,G)!==!1){G.preventDefault(),l.deactivate();return}if(VH(G)){V(G);return}},F=function(G){var I=Jd(G);d(I)>=0||ec(s.clickOutsideDeactivates,G)||ec(s.allowOutsideClick,G)||(G.preventDefault(),G.stopImmediatePropagation())},q=function(){if(a.active)return Yw.activateTrap(l),a.delayInitialFocusTimer=s.delayInitialFocus?Ww(function(){T(g())}):T(g()),i.addEventListener("focusin",P,!0),i.addEventListener("mousedown",N,{capture:!0,passive:!1}),i.addEventListener("touchstart",N,{capture:!0,passive:!1}),i.addEventListener("click",F,{capture:!0,passive:!1}),i.addEventListener("keydown",z,{capture:!0,passive:!1}),l},K=function(){if(a.active)return i.removeEventListener("focusin",P,!0),i.removeEventListener("mousedown",N,!0),i.removeEventListener("touchstart",N,!0),i.removeEventListener("click",F,!0),i.removeEventListener("keydown",z,!0),l};return l={get active(){return a.active},get paused(){return a.paused},activate:function(G){if(a.active)return this;var I=c(G,"onActivate"),x=c(G,"onPostActivate"),R=c(G,"checkCanFocusTrap");R||E(),a.active=!0,a.paused=!1,a.nodeFocusedBeforeActivation=i.activeElement,I&&I();var L=function(){R&&E(),q(),x&&x()};return R?(R(a.containers.concat()).then(L,L),this):(L(),this)},deactivate:function(G){if(!a.active)return this;var I=Jw({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},G);clearTimeout(a.delayInitialFocusTimer),a.delayInitialFocusTimer=void 0,K(),a.active=!1,a.paused=!1,Yw.deactivateTrap(l);var x=c(I,"onDeactivate"),R=c(I,"onPostDeactivate"),L=c(I,"checkCanReturnFocus"),M=c(I,"returnFocus","returnFocusOnDeactivate");x&&x();var O=function(){Ww(function(){M&&T(w(a.nodeFocusedBeforeActivation)),R&&R()})};return M&&L?(L(w(a.nodeFocusedBeforeActivation)).then(O,O),this):(O(),this)},pause:function(){return a.paused||!a.active?this:(a.paused=!0,K(),this)},unpause:function(){return!a.paused||!a.active?this:(a.paused=!1,E(),q(),this)},updateContainerElements:function(G){var I=[].concat(G).filter(Boolean);return a.containers=I.map(function(x){return typeof x=="string"?i.querySelector(x):x}),a.active&&E(),this}},l.updateContainerElements(e),l};function UH(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}else return Array.from(t)}var O0=!1;if(typeof window<"u"){var Xw={get passive(){O0=!0}};window.addEventListener("testPassive",null,Xw),window.removeEventListener("testPassive",null,Xw)}var v1=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),go=[],ep=!1,_1=-1,Ic=void 0,xc=void 0,E1=function(e){return go.some(function(n){return!!(n.options.allowTouchMove&&n.options.allowTouchMove(e))})},tp=function(e){var n=e||window.event;return E1(n.target)||n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)},FH=function(e){if(xc===void 0){var n=!!e&&e.reserveScrollBarGap===!0,i=window.innerWidth-document.documentElement.clientWidth;n&&i>0&&(xc=document.body.style.paddingRight,document.body.style.paddingRight=i+"px")}Ic===void 0&&(Ic=document.body.style.overflow,document.body.style.overflow="hidden")},qH=function(){xc!==void 0&&(document.body.style.paddingRight=xc,xc=void 0),Ic!==void 0&&(document.body.style.overflow=Ic,Ic=void 0)},BH=function(e){return e?e.scrollHeight-e.scrollTop<=e.clientHeight:!1},zH=function(e,n){var i=e.targetTouches[0].clientY-_1;return E1(e.target)?!1:n&&n.scrollTop===0&&i>0||BH(n)&&i<0?tp(e):(e.stopPropagation(),!0)},HH=function(e,n){if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!go.some(function(s){return s.targetElement===e})){var i={targetElement:e,options:n||{}};go=[].concat(UH(go),[i]),v1?(e.ontouchstart=function(s){s.targetTouches.length===1&&(_1=s.targetTouches[0].clientY)},e.ontouchmove=function(s){s.targetTouches.length===1&&zH(s,e)},ep||(document.addEventListener("touchmove",tp,O0?{passive:!1}:void 0),ep=!0)):FH(n)}},GH=function(e){if(!e){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}go=go.filter(function(n){return n.targetElement!==e}),v1?(e.ontouchstart=null,e.ontouchmove=null,ep&&go.length===0&&(document.removeEventListener("touchmove",tp,O0?{passive:!1}:void 0),ep=!1)):go.length||qH()},ma=[],jH=function(){return ma.some(function(t){return t.activeTargets.length>0})},$H=function(){return ma.some(function(t){return t.skippedTargets.length>0})},Zw="ResizeObserver loop completed with undelivered notifications.",KH=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:Zw}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=Zw),window.dispatchEvent(t)},zc;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(zc||(zc={}));var ga=function(t){return Object.freeze(t)},JH=(function(){function t(e,n){this.inlineSize=e,this.blockSize=n,ga(this)}return t})(),T1=(function(){function t(e,n,i,s){return this.x=e,this.y=n,this.width=i,this.height=s,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,ga(this)}return t.prototype.toJSON=function(){var e=this,n=e.x,i=e.y,s=e.top,a=e.right,l=e.bottom,c=e.left,d=e.width,h=e.height;return{x:n,y:i,top:s,right:a,bottom:l,left:c,width:d,height:h}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t})(),U0=function(t){return t instanceof SVGElement&&"getBBox"in t},S1=function(t){if(U0(t)){var e=t.getBBox(),n=e.width,i=e.height;return!n&&!i}var s=t,a=s.offsetWidth,l=s.offsetHeight;return!(a||l||t.getClientRects().length)},eC=function(t){var e;if(t instanceof Element)return!0;var n=(e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(n&&t instanceof n.Element)},YH=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Rc=typeof window<"u"?window:{},Yd=new WeakMap,tC=/auto|scroll/,WH=/^tb|vertical/,QH=/msie|trident/i.test(Rc.navigator&&Rc.navigator.userAgent),Vr=function(t){return parseFloat(t||"0")},kl=function(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=!1),new JH((n?e:t)||0,(n?t:e)||0)},nC=ga({devicePixelContentBoxSize:kl(),borderBoxSize:kl(),contentBoxSize:kl(),contentRect:new T1(0,0,0,0)}),b1=function(t,e){if(e===void 0&&(e=!1),Yd.has(t)&&!e)return Yd.get(t);if(S1(t))return Yd.set(t,nC),nC;var n=getComputedStyle(t),i=U0(t)&&t.ownerSVGElement&&t.getBBox(),s=!QH&&n.boxSizing==="border-box",a=WH.test(n.writingMode||""),l=!i&&tC.test(n.overflowY||""),c=!i&&tC.test(n.overflowX||""),d=i?0:Vr(n.paddingTop),h=i?0:Vr(n.paddingRight),g=i?0:Vr(n.paddingBottom),E=i?0:Vr(n.paddingLeft),T=i?0:Vr(n.borderTopWidth),w=i?0:Vr(n.borderRightWidth),N=i?0:Vr(n.borderBottomWidth),P=i?0:Vr(n.borderLeftWidth),V=E+h,z=d+g,F=P+w,q=T+N,K=c?t.offsetHeight-q-t.clientHeight:0,X=l?t.offsetWidth-F-t.clientWidth:0,G=s?V+F:0,I=s?z+q:0,x=i?i.width:Vr(n.width)-G-X,R=i?i.height:Vr(n.height)-I-K,L=x+V+X+F,M=R+z+K+q,O=ga({devicePixelContentBoxSize:kl(Math.round(x*devicePixelRatio),Math.round(R*devicePixelRatio),a),borderBoxSize:kl(L,M,a),contentBoxSize:kl(x,R,a),contentRect:new T1(E,d,x,R)});return Yd.set(t,O),O},A1=function(t,e,n){var i=b1(t,n),s=i.borderBoxSize,a=i.contentBoxSize,l=i.devicePixelContentBoxSize;switch(e){case zc.DEVICE_PIXEL_CONTENT_BOX:return l;case zc.BORDER_BOX:return s;default:return a}},XH=(function(){function t(e){var n=b1(e);this.target=e,this.contentRect=n.contentRect,this.borderBoxSize=ga([n.borderBoxSize]),this.contentBoxSize=ga([n.contentBoxSize]),this.devicePixelContentBoxSize=ga([n.devicePixelContentBoxSize])}return t})(),w1=function(t){if(S1(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},ZH=function(){var t=1/0,e=[];ma.forEach(function(l){if(l.activeTargets.length!==0){var c=[];l.activeTargets.forEach(function(h){var g=new XH(h.target),E=w1(h.target);c.push(g),h.lastReportedSize=A1(h.target,h.observedBox),E<t&&(t=E)}),e.push(function(){l.callback.call(l.observer,c,l.observer)}),l.activeTargets.splice(0,l.activeTargets.length)}});for(var n=0,i=e;n<i.length;n++){var s=i[n];s()}return t},iC=function(t){ma.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(s){s.isActive()&&(w1(s.target)>t?n.activeTargets.push(s):n.skippedTargets.push(s))})})},e8=function(){var t=0;for(iC(t);jH();)t=ZH(),iC(t);return $H()&&KH(),t>0},ay,C1=[],t8=function(){return C1.splice(0).forEach(function(t){return t()})},n8=function(t){if(!ay){var e=0,n=document.createTextNode(""),i={characterData:!0};new MutationObserver(function(){return t8()}).observe(n,i),ay=function(){n.textContent="".concat(e?e--:e++)}}C1.push(t),ay()},i8=function(t){n8(function(){requestAnimationFrame(t)})},yh=0,r8=function(){return!!yh},s8=250,o8={attributes:!0,characterData:!0,childList:!0,subtree:!0},rC=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],sC=function(t){return t===void 0&&(t=0),Date.now()+t},ly=!1,a8=(function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var n=this;if(e===void 0&&(e=s8),!ly){ly=!0;var i=sC(e);i8(function(){var s=!1;try{s=e8()}finally{if(ly=!1,e=i-sC(),!r8())return;s?n.run(1e3):e>0?n.run(e):n.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,n=function(){return e.observer&&e.observer.observe(document.body,o8)};document.body?n():Rc.addEventListener("DOMContentLoaded",n)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),rC.forEach(function(n){return Rc.addEventListener(n,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),rC.forEach(function(n){return Rc.removeEventListener(n,e.listener,!0)}),this.stopped=!0)},t})(),cv=new a8,oC=function(t){!yh&&t>0&&cv.start(),yh+=t,!yh&&cv.stop()},l8=function(t){return!U0(t)&&!YH(t)&&getComputedStyle(t).display==="inline"},u8=(function(){function t(e,n){this.target=e,this.observedBox=n||zc.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=A1(this.target,this.observedBox,!0);return l8(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t})(),c8=(function(){function t(e,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=n}return t})(),Wd=new WeakMap,aC=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},Qd=(function(){function t(){}return t.connect=function(e,n){var i=new c8(e,n);Wd.set(e,i)},t.observe=function(e,n,i){var s=Wd.get(e),a=s.observationTargets.length===0;aC(s.observationTargets,n)<0&&(a&&ma.push(s),s.observationTargets.push(new u8(n,i&&i.box)),oC(1),cv.schedule())},t.unobserve=function(e,n){var i=Wd.get(e),s=aC(i.observationTargets,n),a=i.observationTargets.length===1;s>=0&&(a&&ma.splice(ma.indexOf(i),1),i.observationTargets.splice(s,1),oC(-1))},t.disconnect=function(e){var n=this,i=Wd.get(e);i.observationTargets.slice().forEach(function(s){return n.unobserve(e,s.target)}),i.activeTargets.splice(0,i.activeTargets.length)},t})(),f8=(function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Qd.connect(this,e)}return t.prototype.observe=function(e,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!eC(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Qd.observe(this,e,n)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!eC(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Qd.unobserve(this,e)},t.prototype.disconnect=function(){Qd.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t})();function Qn(){return Qn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Qn.apply(this,arguments)}function vh(t,e){if(t==null)return{};var n,i,s={},a=Object.keys(t);for(i=0;i<a.length;i++)e.indexOf(n=a[i])>=0||(s[n]=t[n]);return s}var Nc=typeof window<"u"?$.useLayoutEffect:$.useEffect;function tc(t,e,n){return e=(e=+e)==e?e:0,n=(n=+n)==n?n:0,(t=+t)==t&&(t=(t=t<=n?t:n)>=e?t:e),t}function Xd(t){var e=Math.round(t);if(Number.isNaN(t))throw new TypeError("Found a NaN! Check your snapPoints / defaultSnap / snapTo ");return e}var d8={box:"border-box"};function uy(t,e){var n=e.label,i=e.enabled,s=e.resizeSourceRef,a=$.useState(0),l=a[0],c=a[1];$.useDebugValue(n+": "+l);var d=$.useCallback(function(h){c(h[0].borderBoxSize[0].blockSize),s.current="element"},[s]);return Nc(function(){if(t.current&&i){var h=new f8(d);return h.observe(t.current,d8),function(){h.disconnect()}}},[t,d,i]),i?l:0}function Wn(t){return t===void 0&&(t=1e3),new Promise(function(e){return setTimeout(e,t)})}var lC={DRAG:{target:"#overlay.dragging",actions:"onOpenEnd"}},uC={RESIZE:{target:"#overlay.resizing",actions:"onOpenEnd"}},h8=UB({id:"overlay",initial:"closed",context:{initialState:"CLOSED"},states:{closed:{on:{OPEN:"opening",CLOSE:void 0}},opening:{initial:"start",states:{start:{invoke:{src:"onOpenStart",onDone:"transition"}},transition:{always:[{target:"immediately",cond:"initiallyOpen"},{target:"smoothly",cond:"initiallyClosed"}]},immediately:{initial:"open",states:{open:{invoke:{src:"openImmediately",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"#overlay.opening.end"},on:Qn({},lC,uC)}}},smoothly:{initial:"visuallyHidden",states:{visuallyHidden:{invoke:{src:"renderVisuallyHidden",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"open"}},open:{invoke:{src:"openSmoothly",onDone:"#overlay.opening.end"},on:Qn({},lC,uC)}}},end:{invoke:{src:"onOpenEnd",onDone:"done"},on:{CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:Qn({},{CLOSE:{target:"#overlay.closing",actions:"onOpenCancel"}}),onDone:"open"},open:{on:{DRAG:"#overlay.dragging",SNAP:"snapping",RESIZE:"resizing"}},dragging:{on:{SNAP:"snapping"}},snapping:{initial:"start",states:{start:{invoke:{src:"onSnapStart",onDone:"snappingSmoothly"},entry:[FB({y:function(t,e){return e.payload.y},velocity:function(t,e){return e.payload.velocity},snapSource:function(t,e){var n=e.payload.source;return n===void 0?"custom":n}})]},snappingSmoothly:{invoke:{src:"snapSmoothly",onDone:"end"}},end:{invoke:{src:"onSnapEnd",onDone:"done"},on:{RESIZE:"#overlay.resizing",SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{SNAP:{target:"snapping",actions:"onSnapEnd"},RESIZE:{target:"#overlay.resizing",actions:"onSnapCancel"},DRAG:{target:"#overlay.dragging",actions:"onSnapCancel"},CLOSE:{target:"#overlay.closing",actions:"onSnapCancel"}},onDone:"open"},resizing:{initial:"start",states:{start:{invoke:{src:"onResizeStart",onDone:"resizingSmoothly"}},resizingSmoothly:{invoke:{src:"resizeSmoothly",onDone:"end"}},end:{invoke:{src:"onResizeEnd",onDone:"done"},on:{SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{RESIZE:{target:"resizing",actions:"onResizeEnd"},SNAP:{target:"snapping",actions:"onResizeCancel"},DRAG:{target:"#overlay.dragging",actions:"onResizeCancel"},CLOSE:{target:"#overlay.closing",actions:"onResizeCancel"}},onDone:"open"},closing:{initial:"start",states:{start:{invoke:{src:"onCloseStart",onDone:"deactivating"},on:{OPEN:{target:"#overlay.open",actions:"onCloseCancel"}}},deactivating:{invoke:{src:"deactivate",onDone:"closingSmoothly"}},closingSmoothly:{invoke:{src:"closeSmoothly",onDone:"end"}},end:{invoke:{src:"onCloseEnd",onDone:"done"},on:{OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}}},done:{type:"final"}},on:{CLOSE:void 0,OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}},onDone:"closed"}},on:{CLOSE:"closing"}},{actions:{onOpenCancel:function(t,e){},onSnapCancel:function(t,e){},onResizeCancel:function(t,e){},onCloseCancel:function(t,e){},onOpenEnd:function(t,e){},onSnapEnd:function(t,e){},onRezizeEnd:function(t,e){}},services:{onSnapStart:function(){try{return Promise.resolve(Wn()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenStart:function(){try{return Promise.resolve(Wn()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseStart:function(){try{return Promise.resolve(Wn()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeStart:function(){try{return Promise.resolve(Wn()).then(function(){})}catch(t){return Promise.reject(t)}},onSnapEnd:function(){try{return Promise.resolve(Wn()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenEnd:function(){try{return Promise.resolve(Wn()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseEnd:function(){try{return Promise.resolve(Wn()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeEnd:function(){try{return Promise.resolve(Wn()).then(function(){})}catch(t){return Promise.reject(t)}},renderVisuallyHidden:function(t,e){try{return Promise.resolve(Wn()).then(function(){})}catch(n){return Promise.reject(n)}},activate:function(t,e){try{return Promise.resolve(Wn()).then(function(){})}catch(n){return Promise.reject(n)}},deactivate:function(t,e){try{return Promise.resolve(Wn()).then(function(){})}catch(n){return Promise.reject(n)}},openSmoothly:function(t,e){try{return Promise.resolve(Wn()).then(function(){})}catch(n){return Promise.reject(n)}},openImmediately:function(t,e){try{return Promise.resolve(Wn()).then(function(){})}catch(n){return Promise.reject(n)}},snapSmoothly:function(t,e){try{return Promise.resolve(Wn()).then(function(){})}catch(n){return Promise.reject(n)}},resizeSmoothly:function(t,e){try{return Promise.resolve(Wn()).then(function(){})}catch(n){return Promise.reject(n)}},closeSmoothly:function(t,e){try{return Promise.resolve(Wn()).then(function(){})}catch(n){return Promise.reject(n)}}},guards:{initiallyClosed:function(t){return t.initialState==="CLOSED"},initiallyOpen:function(t){return t.initialState==="OPEN"}}}),p8=["children","sibling","className","footer","header","open","initialState","lastSnapRef","initialFocusRef","onDismiss","maxHeight","defaultSnap","snapPoints","blocking","scrollLocking","style","onSpringStart","onSpringCancel","onSpringEnd","reserveScrollBarGap","expandOnContentDrag"],m8=["velocity"],g8=["onRest","config"],I1=fz.default,y8=I1.tension,Zd=I1.friction,v8=An.forwardRef(function(t,e){var n=t.children,i=t.sibling,s=t.className,a=t.footer,l=t.header,c=t.open,d=t.initialState,h=t.lastSnapRef,g=t.initialFocusRef,E=t.onDismiss,T=t.maxHeight,w=t.defaultSnap,N=w===void 0?E8:w,P=t.snapPoints,V=P===void 0?T8:P,z=t.blocking,F=z===void 0||z,q=t.scrollLocking,K=q===void 0||q,X=t.style,G=t.onSpringStart,I=t.onSpringCancel,x=t.onSpringEnd,R=t.reserveScrollBarGap,L=R===void 0?F:R,M=t.expandOnContentDrag,O=M!==void 0&&M,U=vh(t,p8),we=(function(){var oe=$.useState(!1),Te=oe[0],Se=oe[1],je=$.useState({}),St=je[0],Ye=je[1],We=$.useCallback(function(at){return Ye(function(rt){var ke;return Qn({},rt,((ke={})[at]=!1,ke))}),function(){Ye(function(rt){var ke;return Qn({},rt,((ke={})[at]=!0,ke))})}},[]);return $.useEffect(function(){var at=Object.values(St);at.length!==0&&at.every(Boolean)&&Se(!0)},[St]),{ready:Te,registerReady:We}})(),ve=we.ready,ee=we.registerReady,ce=$.useRef(!1),he=$.useRef(G),Ie=$.useRef(I),De=$.useRef(x);$.useEffect(function(){he.current=G,Ie.current=I,De.current=x},[I,G,x]);var H,te,fe=gz(function(){return{y:0,ready:0,maxHeight:0,minSnap:0,maxSnap:0}}),pe=fe[0],Ae=fe[1],Me=$.useRef(null),Ue=$.useRef(null),$t=$.useRef(null),xe=$.useRef(null),Cn=$.useRef(null),ut=$.useRef(null),_n=$.useRef(0),Vn=$.useRef(),In=$.useRef(!1),En=(H=$.useMemo(function(){return typeof window<"u"?window.matchMedia("(prefers-reduced-motion: reduce)"):null},[]),te=$.useRef(H==null?void 0:H.matches),$.useDebugValue(te.current?"reduce":"no-preference"),$.useEffect(function(){var oe=function(Te){te.current=Te.matches};return H==null||H.addListener(oe),function(){return H==null?void 0:H.removeListener(oe)}},[H]),te),xn=(function(oe){var Te=oe.targetRef,Se=oe.enabled,je=oe.reserveScrollBarGap,St=$.useRef({activate:function(){throw new TypeError("Tried to activate scroll lock too early")},deactivate:function(){}});return $.useDebugValue(Se?"Enabled":"Disabled"),$.useEffect(function(){if(!Se)return St.current.deactivate(),void(St.current={activate:function(){},deactivate:function(){}});var Ye=Te.current,We=!1;St.current={activate:function(){We||(We=!0,HH(Ye,{allowTouchMove:function(at){return at.closest("[data-body-scroll-lock-ignore]")},reserveScrollBarGap:je}))},deactivate:function(){We&&(We=!1,GH(Ye))}}},[Se,Te,je]),St})({targetRef:Ue,enabled:ve&&K,reserveScrollBarGap:L}),Bi=(function(oe){var Te=oe.targetRef,Se=oe.enabled,je=$.useRef({activate:function(){throw new TypeError("Tried to activate aria hider too early")},deactivate:function(){}});return $.useDebugValue(Se?"Enabled":"Disabled"),$.useEffect(function(){if(!Se)return je.current.deactivate(),void(je.current={activate:function(){},deactivate:function(){}});var St=Te.current,Ye=!1,We=[],at=[];je.current={activate:function(){if(!Ye){Ye=!0;var rt=St.parentNode;document.querySelectorAll("body > *").forEach(function(ke){if(ke!==rt){var $e=ke.getAttribute("aria-hidden");$e!==null&&$e!=="false"||(We.push($e),at.push(ke),ke.setAttribute("aria-hidden","true"))}})}},deactivate:function(){Ye&&(Ye=!1,at.forEach(function(rt,ke){var $e=We[ke];$e===null?rt.removeAttribute("aria-hidden"):rt.setAttribute("aria-hidden",$e)}),We=[],at=[])}}},[Te,Se]),je})({targetRef:Me,enabled:ve&&F}),Ci=(function(oe){var Te=oe.targetRef,Se=oe.fallbackRef,je=oe.initialFocusRef,St=oe.enabled,Ye=$.useRef({activate:function(){throw new TypeError("Tried to activate focus trap too early")},deactivate:function(){}});return $.useDebugValue(St?"Enabled":"Disabled"),$.useEffect(function(){if(!St)return Ye.current.deactivate(),void(Ye.current={activate:function(){},deactivate:function(){}});var We=Se.current,at=OH(Te.current,{onActivate:void 0,initialFocus:je?function(){return(je==null?void 0:je.current)||We}:void 0,fallbackFocus:We,escapeDeactivates:!1,clickOutsideDeactivates:!1}),rt=!1;Ye.current={activate:function(){try{return rt?Promise.resolve():(rt=!0,Promise.resolve(at.activate()).then(function(){return Promise.resolve(new Promise(function(ke){return setTimeout(function(){return ke(void 0)},0)})).then(function(){})}))}catch(ke){return Promise.reject(ke)}},deactivate:function(){rt&&(rt=!1,at.deactivate())}}},[St,Se,je,Te]),Ye})({targetRef:Me,fallbackRef:ut,initialFocusRef:g||void 0,enabled:ve&&F&&g!==!1}),mi=(function(oe){var Te=oe.getSnapPoints,Se=oe.heightRef,je=oe.lastSnapRef,St=oe.ready,Ye=(function(kt){var bt=kt.contentRef,ri=kt.controlledMaxHeight,Ht=kt.footerEnabled,$n=kt.footerRef,Gi=kt.headerEnabled,On=kt.headerRef,si=kt.registerReady,$r=kt.resizeSourceRef,Ii=$.useMemo(function(){return si("contentHeight")},[si]),Lt=(function(fr,$i,Ki){var gi=$.useMemo(function(){return $i("maxHeight")},[$i]),Ji=$.useState(function(){return Xd(fr)||typeof window<"u"?window.innerHeight:0}),Ir=Ji[0],oi=Ji[1],Gt=Ir>0,dr=$.useRef(0);return $.useDebugValue(fr?"controlled":"auto"),$.useEffect(function(){Gt&&gi()},[Gt,gi]),Nc(function(){if(fr)return oi(Xd(fr)),void(Ki.current="maxheightprop");var hr=function(){dr.current||(dr.current=requestAnimationFrame(function(){oi(window.innerHeight),Ki.current="window",dr.current=0}))};return window.addEventListener("resize",hr),oi(window.innerHeight),Ki.current="window",gi(),function(){window.removeEventListener("resize",hr),cancelAnimationFrame(dr.current)}},[fr,gi,Ki]),Ir})(ri,si,$r),sn=uy(On,{label:"headerHeight",enabled:Gi,resizeSourceRef:$r}),xi=uy(bt,{label:"contentHeight",enabled:!0,resizeSourceRef:$r}),ji=uy($n,{label:"footerHeight",enabled:Ht,resizeSourceRef:$r}),Ri=Math.min(Lt-sn-ji,xi)+sn+ji;$.useDebugValue("minHeight: "+Ri);var Vo=xi>0;return $.useEffect(function(){Vo&&Ii()},[Vo,Ii]),{maxHeight:Lt,minHeight:Ri,headerHeight:sn,footerHeight:ji}})({contentRef:oe.contentRef,controlledMaxHeight:oe.controlledMaxHeight,footerEnabled:oe.footerEnabled,footerRef:oe.footerRef,headerEnabled:oe.headerEnabled,headerRef:oe.headerRef,registerReady:oe.registerReady,resizeSourceRef:oe.resizeSourceRef}),We=Ye.maxHeight,at=Ye.minHeight,rt=Ye.headerHeight,ke=Ye.footerHeight,$e=(function(kt,bt){var ri=[].concat(kt).map(Xd).reduce(function(On,si){return On.add(tc(si,0,bt)),On},new Set),Ht=Array.from(ri),$n=Math.min.apply(Math,Ht);if(Number.isNaN($n))throw new TypeError("minSnap is NaN");var Gi=Math.max.apply(Math,Ht);if(Number.isNaN(Gi))throw new TypeError("maxSnap is NaN");return{snapPoints:Ht,minSnap:$n,maxSnap:Gi}})(St?Te({height:Se.current,footerHeight:ke,headerHeight:rt,minHeight:at,maxHeight:We}):[0],We),Sn=$e.snapPoints,Hi=$e.minSnap,rn=$e.maxSnap;return $.useDebugValue("minSnap: "+Hi+", maxSnap:"+rn),{minSnap:Hi,maxSnap:rn,findSnap:function(kt){var bt=Xd(typeof kt=="function"?kt({footerHeight:ke,headerHeight:rt,height:Se.current,minHeight:at,maxHeight:We,snapPoints:Sn,lastSnap:je.current}):kt);return Sn.reduce(function(ri,Ht){return Math.abs(Ht-bt)<Math.abs(ri-bt)?Ht:ri},Hi)},maxHeight:We}})({contentRef:$t,controlledMaxHeight:T,footerEnabled:!!a,footerRef:Cn,getSnapPoints:V,headerEnabled:l!==!1,headerRef:xe,heightRef:_n,lastSnapRef:h,ready:ve,registerReady:ee,resizeSourceRef:Vn}),ni=mi.minSnap,ii=mi.maxSnap,cr=mi.maxHeight,zi=mi.findSnap,ct=$.useRef(cr),Tn=$.useRef(ni),ze=$.useRef(ii),Ct=$.useRef(zi),Yt=$.useRef(0);Nc(function(){ct.current=cr,ze.current=ii,Tn.current=ni,Ct.current=zi,Yt.current=zi(N)},[zi,N,cr,ii,ni]);var me=$.useCallback(function(oe){var Te=oe.onRest,Se=oe.config,je=(Se=Se===void 0?{}:Se).velocity,St=je===void 0?1:je,Ye=vh(Se,m8),We=vh(oe,g8);return new Promise(function(at){return Ae(Qn({},We,{config:Qn({velocity:St},Ye,{mass:1,tension:y8,friction:Math.max(Zd,Zd+(Zd-Zd*St))}),onRest:function(){var rt=[].slice.call(arguments);at.apply(void 0,rt),Te==null||Te.apply(void 0,rt)}}))})},[Ae]),ft=JB(h8,{devTools:!1,actions:{onOpenCancel:$.useCallback(function(){return Ie.current==null?void 0:Ie.current({type:"OPEN"})},[]),onSnapCancel:$.useCallback(function(oe){return Ie.current==null?void 0:Ie.current({type:"SNAP",source:oe.snapSource})},[]),onCloseCancel:$.useCallback(function(){return Ie.current==null?void 0:Ie.current({type:"CLOSE"})},[]),onResizeCancel:$.useCallback(function(){return Ie.current==null?void 0:Ie.current({type:"RESIZE",source:Vn.current})},[]),onOpenEnd:$.useCallback(function(){return De.current==null?void 0:De.current({type:"OPEN"})},[]),onSnapEnd:$.useCallback(function(oe,Te){return De.current==null?void 0:De.current({type:"SNAP",source:oe.snapSource})},[]),onResizeEnd:$.useCallback(function(){return De.current==null?void 0:De.current({type:"RESIZE",source:Vn.current})},[])},context:{initialState:d},services:{onSnapStart:$.useCallback(function(oe,Te){try{return Promise.resolve(he.current==null?void 0:he.current({type:"SNAP",source:Te.payload.source||"custom"}))}catch(Se){return Promise.reject(Se)}},[]),onOpenStart:$.useCallback(function(){try{return Promise.resolve(he.current==null?void 0:he.current({type:"OPEN"}))}catch(oe){return Promise.reject(oe)}},[]),onCloseStart:$.useCallback(function(){try{return Promise.resolve(he.current==null?void 0:he.current({type:"CLOSE"}))}catch(oe){return Promise.reject(oe)}},[]),onResizeStart:$.useCallback(function(){try{return Promise.resolve(he.current==null?void 0:he.current({type:"RESIZE",source:Vn.current}))}catch(oe){return Promise.reject(oe)}},[]),onSnapEnd:$.useCallback(function(oe,Te){try{return Promise.resolve(De.current==null?void 0:De.current({type:"SNAP",source:oe.snapSource}))}catch(Se){return Promise.reject(Se)}},[]),onOpenEnd:$.useCallback(function(){try{return Promise.resolve(De.current==null?void 0:De.current({type:"OPEN"}))}catch(oe){return Promise.reject(oe)}},[]),onCloseEnd:$.useCallback(function(){try{return Promise.resolve(De.current==null?void 0:De.current({type:"CLOSE"}))}catch(oe){return Promise.reject(oe)}},[]),onResizeEnd:$.useCallback(function(){try{return Promise.resolve(De.current==null?void 0:De.current({type:"RESIZE",source:Vn.current}))}catch(oe){return Promise.reject(oe)}},[]),renderVisuallyHidden:$.useCallback(function(oe,Te){try{return Promise.resolve(me({y:Yt.current,ready:0,maxHeight:ct.current,maxSnap:ze.current,minSnap:Yt.current,immediate:!0})).then(function(){})}catch(Se){return Promise.reject(Se)}},[me]),activate:$.useCallback(function(oe,Te){try{return ce.current=!0,Promise.resolve(Promise.all([xn.current.activate(),Ci.current.activate(),Bi.current.activate()])).then(function(){})}catch(Se){return Promise.reject(Se)}},[Bi,Ci,xn]),deactivate:$.useCallback(function(){try{return xn.current.deactivate(),Ci.current.deactivate(),Bi.current.deactivate(),ce.current=!1,Promise.resolve()}catch(oe){return Promise.reject(oe)}},[Bi,Ci,xn]),openImmediately:$.useCallback(function(){try{return _n.current=Yt.current,Promise.resolve(me({y:Yt.current,ready:1,maxHeight:ct.current,maxSnap:ze.current,minSnap:Yt.current,immediate:!0})).then(function(){})}catch(oe){return Promise.reject(oe)}},[me]),openSmoothly:$.useCallback(function(){try{return Promise.resolve(me({y:0,ready:1,maxHeight:ct.current,maxSnap:ze.current,minSnap:Yt.current,immediate:!0})).then(function(){return _n.current=Yt.current,Promise.resolve(me({y:Yt.current,ready:1,maxHeight:ct.current,maxSnap:ze.current,minSnap:Yt.current,immediate:En.current})).then(function(){})})}catch(oe){return Promise.reject(oe)}},[me,En]),snapSmoothly:$.useCallback(function(oe,Te){try{var Se=Ct.current(oe.y);return _n.current=Se,h.current=Se,Promise.resolve(me({y:Se,ready:1,maxHeight:ct.current,maxSnap:ze.current,minSnap:Tn.current,immediate:En.current,config:{velocity:oe.velocity}})).then(function(){})}catch(je){return Promise.reject(je)}},[me,h,En]),resizeSmoothly:$.useCallback(function(){try{var oe=Ct.current(_n.current);return _n.current=oe,h.current=oe,Promise.resolve(me({y:oe,ready:1,maxHeight:ct.current,maxSnap:ze.current,minSnap:Tn.current,immediate:Vn.current!=="element"||En.current})).then(function(){})}catch(Te){return Promise.reject(Te)}},[me,h,En]),closeSmoothly:$.useCallback(function(oe,Te){try{return me({minSnap:_n.current,immediate:!0}),_n.current=0,Promise.resolve(me({y:0,maxHeight:ct.current,maxSnap:ze.current,immediate:En.current})).then(function(){return Promise.resolve(me({ready:0,immediate:!0})).then(function(){})})}catch(Se){return Promise.reject(Se)}},[me,En])}}),nn=ft[0],It=ft[1];$.useEffect(function(){ve&&It(c?"OPEN":"CLOSE")},[c,It,ve]),Nc(function(){(cr||ii||ni)&&It("RESIZE")},[cr,ii,ni,It]),$.useEffect(function(){return function(){xn.current.deactivate(),Ci.current.deactivate(),Bi.current.deactivate()}},[Bi,Ci,xn]),$.useImperativeHandle(e,function(){return{snapTo:function(oe,Te){var Se=Te===void 0?{}:Te,je=Se.velocity,St=je===void 0?1:je,Ye=Se.source,We=Ye===void 0?"custom":Ye;It("SNAP",{payload:{y:Ct.current(oe),velocity:St,source:We}})},get height(){return _n.current}}},[It]),$.useEffect(function(){var oe=Ue.current,Te=function(je){In.current&&je.preventDefault()},Se=function(je){oe.scrollTop<0&&(requestAnimationFrame(function(){oe.style.overflow="hidden",oe.scrollTop=0,oe.style.removeProperty("overflow")}),je.preventDefault())};return O&&(oe.addEventListener("scroll",Te),oe.addEventListener("touchmove",Te),oe.addEventListener("touchstart",Se)),function(){oe.removeEventListener("scroll",Te),oe.removeEventListener("touchmove",Te),oe.removeEventListener("touchstart",Se)}},[O,Ue]);var Rn=vH(function(oe){var Te=oe.args,Se=(Te=Te===void 0?[]:Te)[0],je=(Se=Se===void 0?{}:Se).closeOnTap,St=je!==void 0&&je,Ye=Se.isContentDragging,We=Ye!==void 0&&Ye,at=oe.cancel,rt=oe.direction[1],ke=oe.down,$e=oe.first,Sn=oe.last,Hi=oe.memo,rn=Hi===void 0?pe.y.getValue():Hi,kt=oe.tap,bt=oe.velocity,ri=-1*oe.movement[1];if(!ce.current)return at(),rn;if(E&&St&&kt)return at(),setTimeout(function(){return E()},0),rn;if(kt)return rn;var Ht=rn+ri,$n=ri*bt,Gi=Math.max(Tn.current,Math.min(ze.current,Ht+2*$n));if(!ke&&E&&rt>0&&Ht+$n<Tn.current/2)return at(),E(),rn;var On=ke?E||Tn.current!==ze.current?Cc(Ht,E?0:Tn.current,ze.current,.55):Ht<Tn.current?Cc(Ht,Tn.current,2*ze.current,.55):Cc(Ht,Tn.current/2,ze.current,.55):Gi;return O&&We?(On>=ze.current&&(On=ze.current),rn===ze.current&&Ue.current.scrollTop>0&&(On=ze.current),In.current=On<ze.current):In.current=!1,$e&&It("DRAG"),Sn?(It("SNAP",{payload:{y:On,velocity:bt>.05?bt:1,source:"dragging"}}),rn):(Ae({y:On,ready:1,maxHeight:ct.current,maxSnap:ze.current,minSnap:Tn.current,immediate:!0,config:{velocity:bt}}),rn)},{filterTaps:!0});if(Number.isNaN(ze.current))throw new TypeError("maxSnapRef is NaN!!");if(Number.isNaN(Tn.current))throw new TypeError("minSnapRef is NaN!!");var un=(function(oe){var Te,Se=oe.spring,je=pl([Se.y,Se.maxHeight],function(ke,$e){return Math.round(tc($e-ke,0,16))+"px"}),St=pl([Se.y,Se.minSnap,Se.maxSnap],function(ke,$e,Sn){return tc(ke,$e,Sn)+"px"}),Ye=pl([Se.y,Se.minSnap,Se.maxSnap],function(ke,$e,Sn){return ke<$e?$e-ke+"px":ke>Sn?Sn-ke+"px":"0px"}),We=pl([Se.y,Se.maxSnap],function(ke,$e){return ke>=$e?Math.ceil(ke-$e):0}),at=pl([Se.y,Se.minSnap],function(ke,$e){if(!$e)return 0;var Sn=Math.max($e/2-45,0);return tc((ke-Sn)*(1/(Math.min($e/2+45,$e)-Sn)+0),0,1)}),rt=pl([Se.y,Se.minSnap],function(ke,$e){return $e?tc(ke/$e,0,1):0});return(Te={})["--rsbs-content-opacity"]=at,Te["--rsbs-backdrop-opacity"]=rt,Te["--rsbs-antigap-scale-y"]=We,Te["--rsbs-overlay-translate-y"]=Ye,Te["--rsbs-overlay-rounded"]=je,Te["--rsbs-overlay-h"]=St,Te})({spring:pe});return An.createElement(Lz.div,Qn({},U,{"data-rsbs-root":!0,"data-rsbs-state":_8.find(nn.matches),"data-rsbs-is-blocking":F,"data-rsbs-is-dismissable":!!E,"data-rsbs-has-header":!!l,"data-rsbs-has-footer":!!a,className:s,ref:Me,style:Qn({},un,X,{opacity:pe.ready})}),i,F&&An.createElement("div",Qn({key:"backdrop","data-rsbs-backdrop":!0},Rn({closeOnTap:!0}))),An.createElement("div",{key:"overlay","aria-modal":"true",role:"dialog","data-rsbs-overlay":!0,tabIndex:-1,ref:ut,onKeyDown:function(oe){oe.key==="Escape"&&(oe.stopPropagation(),E&&E())}},l!==!1&&An.createElement("div",Qn({key:"header","data-rsbs-header":!0,ref:xe},Rn()),l),An.createElement("div",Qn({key:"scroll","data-rsbs-scroll":!0,ref:Ue},O?Rn({isContentDragging:!0}):{}),An.createElement("div",{"data-rsbs-content":!0,ref:$t},n)),a&&An.createElement("div",Qn({key:"footer",ref:Cn,"data-rsbs-footer":!0},Rn()),a)))}),_8=["closed","opening","open","closing","dragging","snapping","resizing"];function E8(t){var e=t.lastSnap;return e??Math.min.apply(Math,t.snapPoints)}function T8(t){return t.minHeight}var S8=["onSpringStart","onSpringEnd","skipInitialTransition"],Vp=$.forwardRef(function(t,e){var n=t.onSpringStart,i=t.onSpringEnd,s=t.skipInitialTransition,a=vh(t,S8),l=$.useState(!1),c=l[0],d=l[1],h=$.useRef(),g=$.useRef(null),E=$.useRef(s&&a.open?"OPEN":"CLOSED");Nc(function(){if(a.open)return cancelAnimationFrame(h.current),d(!0),function(){E.current="CLOSED"}},[a.open]);var T=$.useCallback(function(N){return Promise.resolve(n==null?void 0:n(N)).then(function(){N.type==="OPEN"&&cancelAnimationFrame(h.current)})},[n]),w=$.useCallback(function(N){return Promise.resolve(i==null?void 0:i(N)).then(function(){N.type==="CLOSE"&&(h.current=requestAnimationFrame(function(){return d(!1)}))})},[i]);return c?An.createElement(Hq,{"data-rsbs-portal":!0},An.createElement(v8,Qn({},a,{lastSnapRef:g,ref:e,initialState:E.current,onSpringStart:T,onSpringEnd:w}))):null});const b8=({open:t,clothingItems:e,clothingSets:n,onGenerate:i,isGenerating:s,suggestedOutfits:a,onClose:l,weatherInfo:c,weatherError:d,favoriteOutfits:h,onToggleFavorite:g,onGenerateVisual:E,generatingVisualFor:T})=>{const w=document.documentElement.classList.contains("dark"),N=$.useRef(null);return $.useEffect(()=>{!s&&a.length>0&&N.current&&N.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[s,a.length]),b.jsx(Vp,{open:t,onDismiss:l,className:w?"dark":"",header:b.jsxs("div",{className:"flex items-center justify-between w-full",children:[b.jsx("h2",{className:"text-xl font-bold text-raisin-black",children:" Crateur de Tenues"}),b.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:P})=>P*.65,snapPoints:({minHeight:P,maxHeight:V})=>[P,V*.65,V*.85],children:b.jsxs("div",{className:"p-6 space-y-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[b.jsx(RR,{clothingItems:e,clothingSets:n,onGenerate:i,isGenerating:s,weatherInfo:c,weatherError:d}),s&&b.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[b.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[b.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),b.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),b.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"L'IA compose vos tenues..."})]}),b.jsx("div",{ref:N,children:a.length>0&&b.jsx(Hh,{outfits:a,allClothingItems:e,allClothingSets:n,favoriteOutfits:h,onToggleFavorite:g,onGenerateVisual:E,generatingVisualFor:T})})]})})},A8=({open:t,clothingItems:e,clothingSets:n,onGeneratePlan:i,isGenerating:s,vacationPlan:a,onCreateSet:l,onClose:c})=>{const d=document.documentElement.classList.contains("dark");return b.jsx(Vp,{open:t,onDismiss:c,className:d?"dark":"",header:b.jsxs("div",{className:"flex items-center justify-between w-full",children:[b.jsx("h2",{className:"text-xl font-bold text-raisin-black",children:" Planificateur de Valise"}),b.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:h})=>h*.6,snapPoints:({maxHeight:h})=>[h*.55,h*.85],children:b.jsxs("div",{className:"p-6 space-y-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow min-h-[45vh]",children:[b.jsx(NR,{clothingItems:e,clothingSets:n,onGeneratePlan:i,isGenerating:s}),s&&b.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[b.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[b.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),b.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),b.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"Prparation de votre valise..."})]}),a&&b.jsx(DR,{plan:a,allClothingItems:e,allClothingSets:n,onCreateSet:l})]})})},w8=({open:t,clothingItems:e,clothingSets:n,onClose:i,onCreateSet:s})=>{const[a,l]=$.useState(new Set),c=new Set(n.flatMap(w=>w.itemIds)),h=e.filter(w=>!c.has(w.id)).reduce((w,N)=>(w[N.category]||(w[N.category]=[]),w[N.category].push(N),w),{}),g=w=>{l(N=>{const P=new Set(N);return P.has(w)?P.delete(w):P.add(w),P})},E=()=>{if(a.size<2){alert("Veuillez slectionner au moins 2 articles.");return}const w=window.prompt("Donnez un nom  cet ensemble :");w&&s(w,Array.from(a))},T=document.documentElement.classList.contains("dark");return b.jsx(Vp,{open:t,onDismiss:i,className:T?"dark":"",header:b.jsxs("div",{className:"flex items-center justify-between w-full",children:[b.jsx("h2",{className:"text-xl font-bold text-raisin-black",children:" Crer un ensemble"}),b.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),footer:a.size>0&&b.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 bg-white dark:bg-raisin-black",children:b.jsxs("button",{onClick:E,disabled:a.size<2,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600",children:[b.jsx(Np,{}),"Lier ",a.size," article",a.size>1?"s":""]})}),defaultSnap:({maxHeight:w})=>w*.6,snapPoints:({maxHeight:w})=>[w*.6,w*.85],children:b.jsxs("div",{className:"p-4 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[b.jsx("p",{className:"text-sm text-center text-gray-500 dark:text-gray-400 mb-4",children:"Slectionnez les articles que vous souhaitez lier (ex: une veste et son pantalon)."}),b.jsx("div",{className:"space-y-4",children:Object.keys(h).map(w=>h[w].length>0&&b.jsxs("div",{children:[b.jsx("h3",{className:"font-semibold text-lg mb-2",children:w}),b.jsx("div",{className:"grid grid-cols-3 gap-3",children:h[w].map(N=>{const P=a.has(N.id);return b.jsxs("button",{onClick:()=>g(N.id),className:"relative rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform border-2",style:{borderColor:P?"#D4AF37":"transparent"},children:[P&&b.jsx("div",{className:"absolute top-1 right-1 p-0.5 bg-gold rounded-full text-onyx z-10",children:b.jsx(I0,{})}),b.jsx("div",{className:"aspect-square",children:b.jsx("img",{src:N.imageSrc,alt:N.analysis,className:"w-full h-full object-cover"})}),b.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),b.jsx("p",{className:"absolute bottom-1 left-1 right-1 text-white text-xs font-medium line-clamp-2 p-1",children:N.analysis})]},N.id)})})]},w))})]})})},C8=(t,e)=>{const n=Yl(jr,"users",t,"items"),i=r0(n);return u0(i,a=>{const l=a.docs.map(c=>({id:c.id,...c.data()}));e(l)},a=>{console.error("Erreur (items listener):",a)})},I8=async(t,e)=>{try{const n=Yl(jr,"users",t,"items");return(await l0(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'un vtement:",n),n}},cC=async(t,e,n)=>{try{const i=nf(jr,"users",t,"items",e);await AO(i,n)}catch(i){throw console.error("Erreur lors de la mise  jour d'un vtement:",i),i}},fC=async(t,e)=>{try{const n=nf(jr,"users",t,"items",e);await a0(n)}catch(n){throw console.error("Erreur lors de la suppression d'un vtement:",n),n}},x8=(t,e)=>{const n=Yl(jr,"users",t,"favoriteOutfits"),i=r0(n);return u0(i,a=>{const l=a.docs.map(c=>({id:c.id,...c.data()}));e(l)},a=>{console.error("Erreur (favoriteOutfits listener):",a)})},R8=async(t,e)=>{try{const n=Yl(jr,"users",t,"favoriteOutfits");return(await l0(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'une tenue favorite:",n),n}},N8=async(t,e)=>{try{const n=nf(jr,"users",t,"favoriteOutfits",e);await a0(n)}catch(n){throw console.error("Erreur lors de la suppression d'une tenue favorite:",n),n}},D8=(t,e)=>{const n=Yl(jr,"users",t,"sets"),i=r0(n);return u0(i,a=>{const l=a.docs.map(c=>({id:c.id,...c.data()}));e(l)},a=>{console.error("Erreur (sets listener):",a)})},M8=async(t,e)=>{try{const n=Yl(jr,"users",t,"sets");return(await l0(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'un ensemble:",n),n}},k8=async(t,e)=>{try{const n=nf(jr,"users",t,"sets",e);await a0(n)}catch(n){throw console.error("Erreur lors de la suppression d'un ensemble:",n),n}},P8=async(t,e,n)=>{try{const i=L4(Q4,`users/${t}/clothing/${n}.jpg`);return await k4(i,e,"data_url"),await P4(i)}catch(i){throw console.error("Erreur lors de l'upload de l'image:",i),i}},x1=$.createContext(void 0),L8=({children:t,user:e})=>{const[n,i]=$.useState([]),[s,a]=$.useState([]),[l,c]=$.useState([]),[d,h]=$.useState(!1);$.useEffect(()=>{if(e){const F=C8(e.uid,X=>{i(X)}),q=D8(e.uid,X=>{a(X)}),K=x8(e.uid,X=>{c(X)});return()=>{F(),q(),K()}}else i([]),a([]),c([])},[e]);const g=$.useCallback(async F=>{if(!(F.length===0||!e)){h(!0);try{const q=F.map(x=>new Promise((R,L)=>{const M=new FileReader;M.onload=()=>R(M.result),M.onerror=L,M.readAsDataURL(x)})),K=await Promise.all(q),X=K.map(x=>x.split(",")[1]),G=await dq(X),I=Math.min(G.length,F.length);for(let x=0;x<I;x++){const R=G[x];let L="";try{L=await I8(e.uid,R);const M=await P8(e.uid,K[x],L);await cC(e.uid,L,{imageSrc:M})}catch(M){if(console.error(`chec de cration/upload pour ${F[x].name}.`,M),L){console.log(`Tentative de suppression de l'article orphelin: ${L}`);try{await fC(e.uid,L),console.log(`Article orphelin ${L} supprim avec succs.`)}catch(O){console.error(`chec de la suppression de l'article orphelin ${L}:`,O)}}}}}catch(q){console.error("Erreur lors de l'analyse par lot:",q)}finally{h(!1)}}},[e]),E=$.useCallback(async F=>{if(e)try{await fC(e.uid,F)}catch(q){console.error("Erreur suppression item:",q)}},[e]),T=$.useCallback(async F=>{if(e)try{await cC(e.uid,F.id,F)}catch(q){console.error("Erreur mise  jour item:",q)}},[e]),w=$.useCallback(async F=>{if(e)try{const{id:q,...K}=F;await R8(e.uid,K)}catch(q){console.error("Erreur ajout favori:",q)}},[e]),N=$.useCallback(async F=>{if(e)try{await N8(e.uid,F)}catch(q){console.error("Erreur suppression favori:",q)}},[e]),P=$.useCallback(async(F,q)=>{var G;if(!e)return;const K=((G=n.find(I=>I.id===q[0]))==null?void 0:G.imageSrc)||"",X={name:F,itemIds:q,imageSrc:K};try{await M8(e.uid,X)}catch(I){console.error("Erreur cration set:",I)}},[e,n]),V=$.useCallback(async F=>{if(e)try{await k8(e.uid,F)}catch(q){console.error("Erreur suppression set:",q)}},[e]),z={clothingItems:n,clothingSets:s,favoriteOutfits:l,isAnalyzing:d,analyzeClothingItems:g,deleteClothingItem:E,updateClothingItem:T,createClothingSet:P,deleteClothingSet:V,addFavoriteOutfit:w,deleteFavoriteOutfit:N};return b.jsx(x1.Provider,{value:z,children:t})},V8=()=>{const t=$.useContext(x1);if(t===void 0)throw new Error("useWardrobe doit tre utilis  l'intrieur d'un WardrobeProvider");return t},O8=({open:t,onClose:e,allClothingItems:n,allClothingSets:i,favoriteOutfits:s,onToggleFavorite:a,onGenerateVisual:l,generatingVisualFor:c})=>{const d=document.documentElement.classList.contains("dark");return b.jsx(Vp,{open:t,onDismiss:e,className:d?"dark":"",header:b.jsxs("div",{className:"flex items-center justify-between w-full",children:[b.jsx("h2",{className:"text-xl font-bold text-raisin-black",children:" Tenues Favorites"}),b.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:h})=>h*.9,snapPoints:({minHeight:h,maxHeight:g})=>[h,g*.9,g*.9],children:b.jsx("div",{className:"p-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:s.length>0?b.jsx(Hh,{outfits:s,allClothingItems:n,allClothingSets:i,favoriteOutfits:s,onToggleFavorite:a,onGenerateVisual:l,generatingVisualFor:c}):b.jsxs("div",{className:"text-center py-12",children:[b.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas encore de tenues favorites."}),b.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Cliquez sur le cur  sur une tenue gnre pour l'ajouter."})]})})})},U8=({imageUrl:t,onClose:e})=>($.useEffect(()=>{const n=i=>{i.key==="Escape"&&e()};return window.addEventListener("keydown",n),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",n),document.body.style.overflow="auto"}},[e]),b.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{zIndex:999999},onClick:e,role:"dialog","aria-modal":"true",children:[b.jsx("div",{className:"absolute inset-0 bg-onyx/80 backdrop-blur-md",style:{zIndex:999999}}),b.jsxs("div",{className:"relative bg-white dark:bg-raisin-black rounded-lg shadow-2xl p-4",style:{zIndex:1e6},onClick:n=>n.stopPropagation(),children:[b.jsx("img",{src:t,alt:"Rendu visuel de la tenue",className:"max-w-[85vw] max-h-[75vh] object-contain rounded-lg"}),b.jsx("p",{className:"text-xs text-center text-gray-500 dark:text-gray-400 mt-3",children:"Rendu gnr par IA (image factice)."}),b.jsx("button",{onClick:n=>{n.stopPropagation(),e()},onTouchEnd:n=>{n.stopPropagation(),e()},className:"absolute -top-3 -right-3 p-3 bg-red-500 border-4 border-white rounded-full text-white shadow-2xl hover:bg-red-600 active:scale-95 touch-none",style:{zIndex:1000001},"aria-label":"Fermer",children:b.jsx(C0,{})})]})]})),F8=()=>{const[t,e]=$.useState(null),[n,i]=$.useState(null),[s,a]=$.useState([]),[l,c]=$.useState(!1),[d,h]=$.useState(null),[g,E]=$.useState(!1),[T,w]=$.useState(null),[N,P]=$.useState(!1),[V,z]=$.useState("home"),[F,q]=$.useState(!1),[K,X]=$.useState(!1),[G,I]=$.useState(!1),[x,R]=$.useState(!1),[L,M]=$.useState(null),[O,U]=$.useState(null),[we,ve]=$.useState(null),[ee,ce]=$.useState(null),{clothingItems:he,clothingSets:Ie,isAnalyzing:De,analyzeClothingItems:H,deleteClothingItem:te,createClothingSet:fe,updateClothingItem:pe,deleteClothingSet:Ae,favoriteOutfits:Me,addFavoriteOutfit:Ue,deleteFavoriteOutfit:$t}=V8(),xe=An.useMemo(()=>(he||[]).sort((ft,nn)=>(nn.isFavorite?1:0)-(ft.isFavorite?1:0)),[he]),Cn=$.useCallback(me=>{const ft=Me.find(nn=>nn.titre===me.titre&&nn.description===me.description);ft?$t(ft.id):Ue(me)},[Me,Ue,$t]),ut=An.useMemo(()=>Ie||[],[Ie]),_n=An.useMemo(()=>new Set(ut.flatMap(me=>me.itemIds||[])),[ut]);$.useEffect(()=>{const me=async ft=>{const nn=ft.coords.latitude,It=ft.coords.longitude,Rn=CR.openWeatherApiKey,un=`https://api.openweathermap.org/data/2.5/weather?lat=${nn}&lon=${It}&appid=${Rn}&units=metric&lang=fr`;try{const oe=await fetch(un);if(!oe.ok)throw new Error("Impossible de rcuprer la mto.");const Te=await oe.json(),Se=`${Math.round(Te.main.temp)}C, ${Te.weather[0].description},  ${Te.name}`;M(Se),U(null)}catch{U("Mto indisponible.")}};navigator.geolocation?navigator.geolocation.getCurrentPosition(me,()=>U("Activez la golocalisation pour la mto.")):U("Golocalisation non supporte.")},[]);const Vn=$.useCallback(async(me,ft)=>{if(xe.length===0){i("Veuillez d'abord ajouter des vtements.");return}c(!0),i(null);const nn=L?`Mto actuelle : ${L}. Occasion : ${me}`:`Occasion : ${me}`;try{const It=await pq(xe,ut,nn,ft);a(It)}catch(It){i(It instanceof Error?It.message:"Erreur inconnue")}finally{c(!1)}},[xe,ut,L]),In=$.useCallback(async(me,ft)=>{if(xe.length===0){i("Veuillez d'abord ajouter des vtements.");return}E(!0),i(null);try{const nn=await gq(xe,ut,me,ft);h(nn)}catch(nn){i(nn instanceof Error?nn.message:"Erreur inconnue")}finally{E(!1)}},[xe,ut]),En=$.useCallback(async()=>{if(xe.length<3){i("Ajoutez au moins 3 vtements pour une analyse.");return}P(!0),i(null);try{const me=await mq(xe,ut);w(me)}catch(me){i(me instanceof Error?me.message:"Erreur inconnue")}finally{P(!1)}},[xe,ut]),xn=$.useCallback(async me=>{ve(me.titre),i(null);try{const ft=me.vetements.map(It=>xe.find(Rn=>Rn.id===It.id||Rn.analysis===It.description)).filter(It=>!!It);if(ft.length===0)throw new Error("Impossible de retrouver les articles originaux pour le rendu.");const nn=await vq(ft,me.description);ce(nn)}catch(ft){i(ft instanceof Error?ft.message:"Erreur inconnue lors du rendu visuel")}finally{ve(null)}},[xe]),Bi=$.useCallback(()=>q(!0),[]),Ci=$.useCallback(()=>X(!0),[]),mi=me=>e(me),ni=()=>e(null),ii=me=>{te(me).catch(i),e(null)},cr=me=>{pe(me).catch(i),e(me)},zi=me=>{const ft=`Focus sur l'article : ${me.analysis}`;Vn(ft,me),e(null),window.innerWidth<768&&q(!0)},ct=$.useCallback((me,ft)=>{fe(me,ft).catch(i)},[fe]),Tn=$.useCallback(me=>{Ae(me).catch(i)},[Ae]),ze={hauts:xe.filter(me=>me.category==="Hauts").length,bas:xe.filter(me=>me.category==="Bas").length,chaussures:xe.filter(me=>me.category==="Chaussures").length,accessoires:xe.filter(me=>me.category==="Accessoires").length},Ct=V==="home"?[]:xe.filter(me=>V==="hauts"?me.category==="Hauts":V==="bas"?me.category==="Bas":V==="chaussures"?me.category==="Chaussures":V==="accessoires"?me.category==="Accessoires":!1),Yt=F||K||G||!!t||!!T||!!ee;return b.jsxs("main",{className:"container mx-auto px-4 lg:px-8 py-10",children:[n&&b.jsxs("div",{className:"bg-red-500/20 border border-red-500 text-red-300 px-4 py-3 rounded-lg relative mb-8",role:"alert",children:[b.jsx("strong",{className:"font-bold",children:"Erreur: "}),b.jsx("span",{className:"block sm:inline",children:n})]}),b.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[b.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[xe.length>=3&&b.jsxs("div",{className:"hidden md:block bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-xl p-4 md:p-6 flex flex-col md:flex-row items-start md:items-center gap-4 md:justify-between",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-bold mb-2",children:" Besoin d'inspiration ?"}),b.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour rendre votre garde-robe plus polyvalente"})]}),b.jsx("button",{onClick:En,disabled:N,className:"px-4 md:px-6 py-3 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm md:text-base flex-shrink-0",children:N?"Analyse...":"Analyser ma garde-robe"})]}),b.jsx("div",{className:"hidden md:block",children:b.jsx(Nq,{onAnalyze:H,isAnalyzing:De})}),b.jsx("div",{className:"hidden md:block",children:b.jsx(kq,{clothingItems:xe,clothingSets:ut,onItemClick:mi,onDeleteItem:ii,onCreateSet:ct})}),b.jsxs("div",{className:"md:hidden",children:[V==="home"&&b.jsx(Vq,{onAnalyzeWardrobe:En,onScrollToOutfits:Bi,onScrollToVacation:Ci,onStartSetCreation:()=>I(!0),onShowFavorites:()=>R(!0),isAnalyzingWardrobe:N,clothingCount:xe.length,favoriteOutfitCount:Me.length}),V!=="home"&&b.jsxs("div",{className:"pb-24",children:[b.jsxs("div",{className:"text-center py-6 px-4",children:[b.jsx("h2",{className:"text-2xl font-bold mb-2 capitalize",children:V}),b.jsxs("p",{className:"text-sm text-gray-500",children:[Ct.length," vtement",Ct.length>1?"s":""]})]}),Ct.length>0?b.jsx("div",{className:"grid grid-cols-2 gap-3 px-4",children:Ct.map(me=>b.jsxs("div",{onClick:()=>mi(me),className:"relative bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform",children:[me.isFavorite?b.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-red-500 z-10",children:b.jsx(Dp,{})}):_n.has(me.id)?b.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:b.jsx(Np,{})}):null,b.jsx("div",{className:"aspect-square",children:b.jsx("img",{src:me.imageSrc,alt:me.analysis,className:"w-full h-full object-cover"})}),b.jsxs("div",{className:"p-3",children:[b.jsx("p",{className:"text-sm font-medium line-clamp-2",children:me.analysis}),b.jsx("p",{className:"text-xs text-gray-500 mt-1",children:me.color})]})]},me.id))}):b.jsx("div",{className:"text-center py-12 px-4",children:b.jsx("p",{className:"text-gray-500",children:"Aucun vtement dans cette catgorie"})})]})]})]}),b.jsxs("div",{className:"lg:col-span-1 space-y-10 lg:sticky lg:top-40 hidden md:block",children:[b.jsx("div",{id:"outfit-generator",children:b.jsx(RR,{clothingItems:xe,clothingSets:ut,onGenerate:Vn,isGenerating:l,weatherInfo:L,weatherError:O})}),s.length>0&&b.jsx(Hh,{outfits:s,allClothingItems:xe,allClothingSets:ut,favoriteOutfits:Me,onToggleFavorite:Cn,onGenerateVisual:xn,generatingVisualFor:we}),Me.length>0&&b.jsxs("div",{className:"mt-10",children:[b.jsx("h2",{className:"text-2xl font-serif font-bold mb-6 text-gold",children:"Mes Tenues Favorites"}),b.jsx(Hh,{outfits:Me,allClothingItems:xe,allClothingSets:ut,favoriteOutfits:Me,onToggleFavorite:Cn,onGenerateVisual:xn,generatingVisualFor:we})]}),b.jsx("div",{id:"vacation-planner",children:b.jsx(NR,{clothingItems:xe,clothingSets:ut,onGeneratePlan:In,isGenerating:g})}),d&&b.jsx(DR,{plan:d,allClothingItems:xe,allClothingSets:ut,onCreateSet:ct})]})]}),t&&b.jsx(Pq,{item:t,clothingSets:ut,onClose:ni,onUpdate:cr,onGenerateFrom:zi,onRemoveSet:Tn,onDelete:ii}),T&&b.jsx(Uq,{analysis:T,onClose:()=>w(null)}),ee&&b.jsx(U8,{imageUrl:ee,onClose:()=>ce(null)}),b.jsx(Lq,{onFilesSelected:H,isAnalyzing:De,isOtherModalOpen:Yt}),b.jsx(Oq,{activeTab:V,onTabChange:z,counts:ze}),b.jsx(b8,{open:F,clothingItems:xe,clothingSets:ut,onGenerate:Vn,isGenerating:l,suggestedOutfits:s,onClose:()=>q(!1),weatherInfo:L,weatherError:O,favoriteOutfits:Me,onToggleFavorite:Cn,onGenerateVisual:xn,generatingVisualFor:we}),b.jsx(A8,{open:K,clothingItems:xe,clothingSets:ut,onGeneratePlan:In,isGenerating:g,vacationPlan:d,onCreateSet:ct,onClose:()=>X(!1)}),b.jsx(w8,{open:G,clothingItems:xe,clothingSets:ut,onClose:()=>I(!1),onCreateSet:(me,ft)=>{ct(me,ft),I(!1)}}),b.jsx(O8,{open:x,onClose:()=>R(!1),allClothingItems:xe,allClothingSets:ut,favoriteOutfits:Me,onToggleFavorite:Cn,onGenerateVisual:xn,generatingVisualFor:we})]})},q8=()=>{const[t,e]=$.useState(null),[n,i]=$.useState("dark");$.useEffect(()=>{const a=WM(lc,l=>{e(l)});return()=>a()},[]),$.useEffect(()=>{n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[n]);const s=()=>{i(a=>a==="light"?"dark":"light")};return b.jsx("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow transition-colors duration-300",children:t?b.jsxs(b.Fragment,{children:[b.jsx(Rq,{theme:n,toggleTheme:s,children:b.jsx(bw,{user:t})}),b.jsx(L8,{user:t,children:b.jsx(F8,{})})]}):b.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:b.jsx(bw,{user:t})})})},R1=document.getElementById("root");if(!R1)throw new Error("L'lment root est introuvable dans le DOM");const B8=d2.createRoot(R1);B8.render(b.jsx(An.StrictMode,{children:b.jsx(q8,{})}));
