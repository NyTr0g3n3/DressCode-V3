(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function yS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var bp={exports:{}},Ql={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n0;function mR(){if(n0)return Ql;n0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,a){var u=null;if(a!==void 0&&(u=""+a),o.key!==void 0&&(u=""+o.key),"key"in o){a={};for(var d in o)d!=="key"&&(a[d]=o[d])}else a=o;return o=a.ref,{$$typeof:n,type:i,key:u,ref:o!==void 0?o:null,props:a}}return Ql.Fragment=e,Ql.jsx=t,Ql.jsxs=t,Ql}var i0;function gR(){return i0||(i0=1,bp.exports=mR()),bp.exports}var A=gR(),xp={exports:{}},be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s0;function yR(){if(s0)return be;s0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function R(O){return O===null||typeof O!="object"?null:(O=S&&O[S]||O["@@iterator"],typeof O=="function"?O:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,B={};function ee(O,Z,oe){this.props=O,this.context=Z,this.refs=B,this.updater=oe||L}ee.prototype.isReactComponent={},ee.prototype.setState=function(O,Z){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,Z,"setState")},ee.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function Y(){}Y.prototype=ee.prototype;function W(O,Z,oe){this.props=O,this.context=Z,this.refs=B,this.updater=oe||L}var ie=W.prototype=new Y;ie.constructor=W,z(ie,ee.prototype),ie.isPureReactComponent=!0;var de=Array.isArray;function ue(){}var D={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function x(O,Z,oe){var he=oe.ref;return{$$typeof:n,type:O,key:Z,ref:he!==void 0?he:null,props:oe}}function V(O,Z){return x(O.type,Z,O.props)}function P(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function k(O){var Z={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(oe){return Z[oe]})}var M=/\/+/g;function We(O,Z){return typeof O=="object"&&O!==null&&O.key!=null?k(""+O.key):Z.toString(36)}function we(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(ue,ue):(O.status="pending",O.then(function(Z){O.status==="pending"&&(O.status="fulfilled",O.value=Z)},function(Z){O.status==="pending"&&(O.status="rejected",O.reason=Z)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function $(O,Z,oe,he,Ae){var Me=typeof O;(Me==="undefined"||Me==="boolean")&&(O=null);var Ve=!1;if(O===null)Ve=!0;else switch(Me){case"bigint":case"string":case"number":Ve=!0;break;case"object":switch(O.$$typeof){case n:case e:Ve=!0;break;case v:return Ve=O._init,$(Ve(O._payload),Z,oe,he,Ae)}}if(Ve)return Ae=Ae(O),Ve=he===""?"."+We(O,0):he,de(Ae)?(oe="",Ve!=null&&(oe=Ve.replace(M,"$&/")+"/"),$(Ae,Z,oe,"",function(Jn){return Jn})):Ae!=null&&(P(Ae)&&(Ae=V(Ae,oe+(Ae.key==null||O&&O.key===Ae.key?"":(""+Ae.key).replace(M,"$&/")+"/")+Ve)),Z.push(Ae)),1;Ve=0;var kt=he===""?".":he+":";if(de(O))for(var ft=0;ft<O.length;ft++)he=O[ft],Me=kt+We(he,ft),Ve+=$(he,Z,oe,Me,Ae);else if(ft=R(O),typeof ft=="function")for(O=ft.call(O),ft=0;!(he=O.next()).done;)he=he.value,Me=kt+We(he,ft++),Ve+=$(he,Z,oe,Me,Ae);else if(Me==="object"){if(typeof O.then=="function")return $(we(O),Z,oe,he,Ae);throw Z=String(O),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return Ve}function ae(O,Z,oe){if(O==null)return O;var he=[],Ae=0;return $(O,he,"","",function(Me){return Z.call(oe,Me,Ae++)}),he}function ve(O){if(O._status===-1){var Z=O._result;Z=Z(),Z.then(function(oe){(O._status===0||O._status===-1)&&(O._status=1,O._result=oe)},function(oe){(O._status===0||O._status===-1)&&(O._status=2,O._result=oe)}),O._status===-1&&(O._status=0,O._result=Z)}if(O._status===1)return O._result.default;throw O._result}var Je=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},Ye={map:ae,forEach:function(O,Z,oe){ae(O,function(){Z.apply(this,arguments)},oe)},count:function(O){var Z=0;return ae(O,function(){Z++}),Z},toArray:function(O){return ae(O,function(Z){return Z})||[]},only:function(O){if(!P(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return be.Activity=T,be.Children=Ye,be.Component=ee,be.Fragment=t,be.Profiler=o,be.PureComponent=W,be.StrictMode=i,be.Suspense=p,be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,be.__COMPILER_RUNTIME={__proto__:null,c:function(O){return D.H.useMemoCache(O)}},be.cache=function(O){return function(){return O.apply(null,arguments)}},be.cacheSignal=function(){return null},be.cloneElement=function(O,Z,oe){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var he=z({},O.props),Ae=O.key;if(Z!=null)for(Me in Z.key!==void 0&&(Ae=""+Z.key),Z)!N.call(Z,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&Z.ref===void 0||(he[Me]=Z[Me]);var Me=arguments.length-2;if(Me===1)he.children=oe;else if(1<Me){for(var Ve=Array(Me),kt=0;kt<Me;kt++)Ve[kt]=arguments[kt+2];he.children=Ve}return x(O.type,Ae,he)},be.createContext=function(O){return O={$$typeof:u,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:a,_context:O},O},be.createElement=function(O,Z,oe){var he,Ae={},Me=null;if(Z!=null)for(he in Z.key!==void 0&&(Me=""+Z.key),Z)N.call(Z,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(Ae[he]=Z[he]);var Ve=arguments.length-2;if(Ve===1)Ae.children=oe;else if(1<Ve){for(var kt=Array(Ve),ft=0;ft<Ve;ft++)kt[ft]=arguments[ft+2];Ae.children=kt}if(O&&O.defaultProps)for(he in Ve=O.defaultProps,Ve)Ae[he]===void 0&&(Ae[he]=Ve[he]);return x(O,Me,Ae)},be.createRef=function(){return{current:null}},be.forwardRef=function(O){return{$$typeof:d,render:O}},be.isValidElement=P,be.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:ve}},be.memo=function(O,Z){return{$$typeof:m,type:O,compare:Z===void 0?null:Z}},be.startTransition=function(O){var Z=D.T,oe={};D.T=oe;try{var he=O(),Ae=D.S;Ae!==null&&Ae(oe,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(ue,Je)}catch(Me){Je(Me)}finally{Z!==null&&oe.types!==null&&(Z.types=oe.types),D.T=Z}},be.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},be.use=function(O){return D.H.use(O)},be.useActionState=function(O,Z,oe){return D.H.useActionState(O,Z,oe)},be.useCallback=function(O,Z){return D.H.useCallback(O,Z)},be.useContext=function(O){return D.H.useContext(O)},be.useDebugValue=function(){},be.useDeferredValue=function(O,Z){return D.H.useDeferredValue(O,Z)},be.useEffect=function(O,Z){return D.H.useEffect(O,Z)},be.useEffectEvent=function(O){return D.H.useEffectEvent(O)},be.useId=function(){return D.H.useId()},be.useImperativeHandle=function(O,Z,oe){return D.H.useImperativeHandle(O,Z,oe)},be.useInsertionEffect=function(O,Z){return D.H.useInsertionEffect(O,Z)},be.useLayoutEffect=function(O,Z){return D.H.useLayoutEffect(O,Z)},be.useMemo=function(O,Z){return D.H.useMemo(O,Z)},be.useOptimistic=function(O,Z){return D.H.useOptimistic(O,Z)},be.useReducer=function(O,Z,oe){return D.H.useReducer(O,Z,oe)},be.useRef=function(O){return D.H.useRef(O)},be.useState=function(O){return D.H.useState(O)},be.useSyncExternalStore=function(O,Z,oe){return D.H.useSyncExternalStore(O,Z,oe)},be.useTransition=function(){return D.H.useTransition()},be.version="19.2.0",be}var r0;function xm(){return r0||(r0=1,xp.exports=yR()),xp.exports}var ge=xm();const ru=yS(ge);var Np={exports:{}},Wl={},Mp={exports:{}},Dp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o0;function _R(){return o0||(o0=1,(function(n){function e($,ae){var ve=$.length;$.push(ae);e:for(;0<ve;){var Je=ve-1>>>1,Ye=$[Je];if(0<o(Ye,ae))$[Je]=ae,$[ve]=Ye,ve=Je;else break e}}function t($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var ae=$[0],ve=$.pop();if(ve!==ae){$[0]=ve;e:for(var Je=0,Ye=$.length,O=Ye>>>1;Je<O;){var Z=2*(Je+1)-1,oe=$[Z],he=Z+1,Ae=$[he];if(0>o(oe,ve))he<Ye&&0>o(Ae,oe)?($[Je]=Ae,$[he]=ve,Je=he):($[Je]=oe,$[Z]=ve,Je=Z);else if(he<Ye&&0>o(Ae,ve))$[Je]=Ae,$[he]=ve,Je=he;else break e}}return ae}function o($,ae){var ve=$.sortIndex-ae.sortIndex;return ve!==0?ve:$.id-ae.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var p=[],m=[],v=1,T=null,S=3,R=!1,L=!1,z=!1,B=!1,ee=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function ie($){for(var ae=t(m);ae!==null;){if(ae.callback===null)i(m);else if(ae.startTime<=$)i(m),ae.sortIndex=ae.expirationTime,e(p,ae);else break;ae=t(m)}}function de($){if(z=!1,ie($),!L)if(t(p)!==null)L=!0,ue||(ue=!0,k());else{var ae=t(m);ae!==null&&we(de,ae.startTime-$)}}var ue=!1,D=-1,N=5,x=-1;function V(){return B?!0:!(n.unstable_now()-x<N)}function P(){if(B=!1,ue){var $=n.unstable_now();x=$;var ae=!0;try{e:{L=!1,z&&(z=!1,Y(D),D=-1),R=!0;var ve=S;try{t:{for(ie($),T=t(p);T!==null&&!(T.expirationTime>$&&V());){var Je=T.callback;if(typeof Je=="function"){T.callback=null,S=T.priorityLevel;var Ye=Je(T.expirationTime<=$);if($=n.unstable_now(),typeof Ye=="function"){T.callback=Ye,ie($),ae=!0;break t}T===t(p)&&i(p),ie($)}else i(p);T=t(p)}if(T!==null)ae=!0;else{var O=t(m);O!==null&&we(de,O.startTime-$),ae=!1}}break e}finally{T=null,S=ve,R=!1}ae=void 0}}finally{ae?k():ue=!1}}}var k;if(typeof W=="function")k=function(){W(P)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,We=M.port2;M.port1.onmessage=P,k=function(){We.postMessage(null)}}else k=function(){ee(P,0)};function we($,ae){D=ee(function(){$(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function($){switch(S){case 1:case 2:case 3:var ae=3;break;default:ae=S}var ve=S;S=ae;try{return $()}finally{S=ve}},n.unstable_requestPaint=function(){B=!0},n.unstable_runWithPriority=function($,ae){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ve=S;S=$;try{return ae()}finally{S=ve}},n.unstable_scheduleCallback=function($,ae,ve){var Je=n.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?Je+ve:Je):ve=Je,$){case 1:var Ye=-1;break;case 2:Ye=250;break;case 5:Ye=1073741823;break;case 4:Ye=1e4;break;default:Ye=5e3}return Ye=ve+Ye,$={id:v++,callback:ae,priorityLevel:$,startTime:ve,expirationTime:Ye,sortIndex:-1},ve>Je?($.sortIndex=ve,e(m,$),t(p)===null&&$===t(m)&&(z?(Y(D),D=-1):z=!0,we(de,ve-Je))):($.sortIndex=Ye,e(p,$),L||R||(L=!0,ue||(ue=!0,k()))),$},n.unstable_shouldYield=V,n.unstable_wrapCallback=function($){var ae=S;return function(){var ve=S;S=ae;try{return $.apply(this,arguments)}finally{S=ve}}}})(Dp)),Dp}var a0;function vR(){return a0||(a0=1,Mp.exports=_R()),Mp.exports}var kp={exports:{}},ln={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l0;function TR(){if(l0)return ln;l0=1;var n=xm();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(p,m,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:p,containerInfo:m,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ln.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return a(p,m,null,v)},ln.flushSync=function(p){var m=u.T,v=i.p;try{if(u.T=null,i.p=2,p)return p()}finally{u.T=m,i.p=v,i.d.f()}},ln.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(p,m))},ln.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},ln.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,T=d(v,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,R=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?i.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:R}):v==="script"&&i.d.X(p,{crossOrigin:T,integrity:S,fetchPriority:R,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},ln.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=d(m.as,m.crossOrigin);i.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(p)},ln.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,T=d(v,m.crossOrigin);i.d.L(p,v,{crossOrigin:T,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},ln.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=d(m.as,m.crossOrigin);i.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(p)},ln.requestFormReset=function(p){i.d.r(p)},ln.unstable_batchedUpdates=function(p,m){return p(m)},ln.useFormState=function(p,m,v){return u.H.useFormState(p,m,v)},ln.useFormStatus=function(){return u.H.useHostTransitionStatus()},ln.version="19.2.0",ln}var u0;function ER(){if(u0)return kp.exports;u0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),kp.exports=TR(),kp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c0;function SR(){if(c0)return Wl;c0=1;var n=vR(),e=xm(),t=ER();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var r=s,l=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(l=r.return),s=r.return;while(s)}return r.tag===3?l:null}function u(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function d(s){if(s.tag===31){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function p(s){if(a(s)!==s)throw Error(i(188))}function m(s){var r=s.alternate;if(!r){if(r=a(s),r===null)throw Error(i(188));return r!==s?null:s}for(var l=s,c=r;;){var y=l.return;if(y===null)break;var _=y.alternate;if(_===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===l)return p(y),s;if(_===c)return p(y),r;_=_.sibling}throw Error(i(188))}if(l.return!==c.return)l=y,c=_;else{for(var C=!1,w=y.child;w;){if(w===l){C=!0,l=y,c=_;break}if(w===c){C=!0,c=y,l=_;break}w=w.sibling}if(!C){for(w=_.child;w;){if(w===l){C=!0,l=_,c=y;break}if(w===c){C=!0,c=_,l=y;break}w=w.sibling}if(!C)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:r}function v(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=v(s),r!==null)return r;s=s.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),Y=Symbol.for("react.consumer"),W=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function k(s){return s===null||typeof s!="object"?null:(s=P&&s[P]||s["@@iterator"],typeof s=="function"?s:null)}var M=Symbol.for("react.client.reference");function We(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===M?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case z:return"Fragment";case ee:return"Profiler";case B:return"StrictMode";case de:return"Suspense";case ue:return"SuspenseList";case x:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case L:return"Portal";case W:return s.displayName||"Context";case Y:return(s._context.displayName||"Context")+".Consumer";case ie:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case D:return r=s.displayName||null,r!==null?r:We(s.type)||"Memo";case N:r=s._payload,s=s._init;try{return We(s(r))}catch{}}return null}var we=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},Je=[],Ye=-1;function O(s){return{current:s}}function Z(s){0>Ye||(s.current=Je[Ye],Je[Ye]=null,Ye--)}function oe(s,r){Ye++,Je[Ye]=s.current,s.current=r}var he=O(null),Ae=O(null),Me=O(null),Ve=O(null);function kt(s,r){switch(oe(Me,r),oe(Ae,s),oe(he,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?Iv(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=Iv(r),s=wv(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Z(he),oe(he,s)}function ft(){Z(he),Z(Ae),Z(Me)}function Jn(s){s.memoizedState!==null&&oe(Ve,s);var r=he.current,l=wv(r,s.type);r!==l&&(oe(Ae,s),oe(he,l))}function ui(s){Ae.current===s&&(Z(he),Z(Ae)),Ve.current===s&&(Z(Ve),Jl._currentValue=ve)}var Si,bs;function Mn(s){if(Si===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);Si=r&&r[1]||"",bs=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Si+s+bs}var Ji=!1;function xs(s,r){if(!s||Ji)return"";Ji=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(Q){var K=Q}Reflect.construct(s,[],ne)}else{try{ne.call()}catch(Q){K=Q}s.call(ne.prototype)}}else{try{throw Error()}catch(Q){K=Q}(ne=s())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(Q){if(Q&&K&&typeof Q.stack=="string")return[Q.stack,K.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),C=_[0],w=_[1];if(C&&w){var U=C.split(`
`),J=w.split(`
`);for(y=c=0;c<U.length&&!U[c].includes("DetermineComponentFrameRoot");)c++;for(;y<J.length&&!J[y].includes("DetermineComponentFrameRoot");)y++;if(c===U.length||y===J.length)for(c=U.length-1,y=J.length-1;1<=c&&0<=y&&U[c]!==J[y];)y--;for(;1<=c&&0<=y;c--,y--)if(U[c]!==J[y]){if(c!==1||y!==1)do if(c--,y--,0>y||U[c]!==J[y]){var X=`
`+U[c].replace(" at new "," at ");return s.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",s.displayName)),X}while(1<=c&&0<=y);break}}}finally{Ji=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Mn(l):""}function Jr(s,r){switch(s.tag){case 26:case 27:case 5:return Mn(s.type);case 16:return Mn("Lazy");case 13:return s.child!==r&&r!==null?Mn("Suspense Fallback"):Mn("Suspense");case 19:return Mn("SuspenseList");case 0:case 15:return xs(s.type,!1);case 11:return xs(s.type.render,!1);case 1:return xs(s.type,!0);case 31:return Mn("Activity");default:return""}}function Lo(s){try{var r="",l=null;do r+=Jr(s,l),l=s,s=s.return;while(s);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Ns=Object.prototype.hasOwnProperty,Yn=n.unstable_scheduleCallback,ce=n.unstable_cancelCallback,Ne=n.unstable_shouldYield,Ke=n.unstable_requestPaint,Qe=n.unstable_now,Dn=n.unstable_getCurrentPriorityLevel,st=n.unstable_ImmediatePriority,rt=n.unstable_UserBlockingPriority,ht=n.unstable_NormalPriority,ci=n.unstable_LowPriority,kn=n.unstable_IdlePriority,Kn=n.log,Yr=n.unstable_setDisableYieldValue,Ms=null,on=null;function $n(s){if(typeof Kn=="function"&&Yr(s),on&&typeof on.setStrictMode=="function")try{on.setStrictMode(Ms,s)}catch{}}var pn=Math.clz32?Math.clz32:Vu,bf=Math.log,Wa=Math.LN2;function Vu(s){return s>>>=0,s===0?32:31-(bf(s)/Wa|0)|0}var Kr=256,Ai=262144,Ds=4194304;function di(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Qn(s,r,l){var c=s.pendingLanes;if(c===0)return 0;var y=0,_=s.suspendedLanes,C=s.pingedLanes;s=s.warmLanes;var w=c&134217727;return w!==0?(c=w&~_,c!==0?y=di(c):(C&=w,C!==0?y=di(C):l||(l=w&~s,l!==0&&(y=di(l))))):(w=c&~_,w!==0?y=di(w):C!==0?y=di(C):l||(l=c&~s,l!==0&&(y=di(l)))),y===0?0:r!==0&&r!==y&&(r&_)===0&&(_=y&-y,l=r&-r,_>=l||_===32&&(l&4194048)!==0)?r:y}function ks(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function Oo(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ja(){var s=Ds;return Ds<<=1,(Ds&62914560)===0&&(Ds=4194304),s}function Yi(s){for(var r=[],l=0;31>l;l++)r.push(s);return r}function Ps(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Wt(s,r,l,c,y,_){var C=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var w=s.entanglements,U=s.expirationTimes,J=s.hiddenUpdates;for(l=C&~l;0<l;){var X=31-pn(l),ne=1<<X;w[X]=0,U[X]=-1;var K=J[X];if(K!==null)for(J[X]=null,X=0;X<K.length;X++){var Q=K[X];Q!==null&&(Q.lane&=-536870913)}l&=~ne}c!==0&&Xa(s,c,0),_!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=_&~(C&~r))}function Xa(s,r,l){s.pendingLanes|=r,s.suspendedLanes&=~r;var c=31-pn(r);s.entangledLanes|=r,s.entanglements[c]=s.entanglements[c]|1073741824|l&261930}function Vs(s,r){var l=s.entangledLanes|=r;for(s=s.entanglements;l;){var c=31-pn(l),y=1<<c;y&r|s[c]&r&&(s[c]|=r),l&=~y}}function Us(s,r){var l=r&-r;return l=(l&42)!==0?1:Za(l),(l&(s.suspendedLanes|r))!==0?0:l}function Za(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function el(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ki(){var s=ae.p;return s!==0?s:(s=window.event,s===void 0?32:Qv(s.type))}function Uu(s,r){var l=ae.p;try{return ae.p=s,r()}finally{ae.p=l}}var Ci=Math.random().toString(36).slice(2),St="__reactFiber$"+Ci,jt="__reactProps$"+Ci,Ii="__reactContainer$"+Ci,Ls="__reactEvents$"+Ci,wi="__reactListeners$"+Ci,Lu="__reactHandles$"+Ci,tl="__reactResources$"+Ci,$i="__reactMarker$"+Ci;function $r(s){delete s[St],delete s[jt],delete s[Ls],delete s[wi],delete s[Lu]}function Qi(s){var r=s[St];if(r)return r;for(var l=s.parentNode;l;){if(r=l[Ii]||l[St]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(s=kv(s);s!==null;){if(l=s[St])return l;s=kv(s)}return r}s=l,l=s.parentNode}return null}function Wi(s){if(s=s[St]||s[Ii]){var r=s.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return s}return null}function Qr(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function fi(s){var r=s[tl];return r||(r=s[tl]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function bt(s){s[$i]=!0}var qo=new Set,Os={};function mn(s,r){Ri(s,r),Ri(s+"Capture",r)}function Ri(s,r){for(Os[s]=r,s=0;s<r.length;s++)qo.add(r[s])}var xf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nl={},il={};function Ou(s){return Ns.call(il,s)?!0:Ns.call(nl,s)?!1:xf.test(s)?il[s]=!0:(nl[s]=!0,!1)}function qs(s,r,l){if(Ou(r))if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+l)}}function Bs(s,r,l){if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+l)}}function Wn(s,r,l,c){if(c===null)s.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(r,l,""+c)}}function gn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function qu(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Nf(s,r,l){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,r);if(!s.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,_=c.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return y.call(this)},set:function(C){l=""+C,_.call(this,C)}}),Object.defineProperty(s,r,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(C){l=""+C},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function Bo(s){if(!s._valueTracker){var r=qu(s)?"checked":"value";s._valueTracker=Nf(s,r,""+s[r])}}function sl(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var l=r.getValue(),c="";return s&&(c=qu(s)?s.checked?"true":"false":s.value),s=c,s!==l?(r.setValue(s),!0):!1}function Fo(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var ji=/[\n"\\]/g;function At(s){return s.replace(ji,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Fs(s,r,l,c,y,_,C,w){s.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.type=C:s.removeAttribute("type"),r!=null?C==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+gn(r)):s.value!==""+gn(r)&&(s.value=""+gn(r)):C!=="submit"&&C!=="reset"||s.removeAttribute("value"),r!=null?zo(s,C,gn(r)):l!=null?zo(s,C,gn(l)):c!=null&&s.removeAttribute("value"),y==null&&_!=null&&(s.defaultChecked=!!_),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.name=""+gn(w):s.removeAttribute("name")}function Wr(s,r,l,c,y,_,C,w){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.type=_),r!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||r!=null)){Bo(s);return}l=l!=null?""+gn(l):"",r=r!=null?""+gn(r):l,w||r===s.value||(s.value=r),s.defaultValue=r}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=w?s.checked:!!c,s.defaultChecked=!!c,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(s.name=C),Bo(s)}function zo(s,r,l){r==="number"&&Fo(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function je(s,r,l,c){if(s=s.options,r){r={};for(var y=0;y<l.length;y++)r["$"+l[y]]=!0;for(l=0;l<s.length;l++)y=r.hasOwnProperty("$"+s[l].value),s[l].selected!==y&&(s[l].selected=y),y&&c&&(s[l].defaultSelected=!0)}else{for(l=""+gn(l),r=null,y=0;y<s.length;y++){if(s[y].value===l){s[y].selected=!0,c&&(s[y].defaultSelected=!0);return}r!==null||s[y].disabled||(r=s[y])}r!==null&&(r.selected=!0)}}function jr(s,r,l){if(r!=null&&(r=""+gn(r),r!==s.value&&(s.value=r),l==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=l!=null?""+gn(l):""}function zs(s,r,l,c){if(r==null){if(c!=null){if(l!=null)throw Error(i(92));if(we(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),r=l}l=gn(r),s.defaultValue=l,c=s.textContent,c===l&&c!==""&&c!==null&&(s.value=c),Bo(s)}function jn(s,r){if(r){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=r;return}}s.textContent=r}var Mf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function rl(s,r,l){var c=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":c?s.setProperty(r,l):typeof l!="number"||l===0||Mf.has(r)?r==="float"?s.cssFloat=l:s[r]=(""+l).trim():s[r]=l+"px"}function Bu(s,r,l){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var y in r)c=r[y],r.hasOwnProperty(y)&&l[y]!==c&&rl(s,y,c)}else for(var _ in r)r.hasOwnProperty(_)&&rl(s,_,r[_])}function ol(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Df=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),kf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bi(s){return kf.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Gt(){}var Ho=null;function Go(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Xi=null,Pn=null;function Fu(s){var r=Wi(s);if(r&&(s=r.stateNode)){var l=s[jt]||null;e:switch(s=r.stateNode,r.type){case"input":if(Fs(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+At(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var c=l[r];if(c!==s&&c.form===s.form){var y=c[jt]||null;if(!y)throw Error(i(90));Fs(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<l.length;r++)c=l[r],c.form===s.form&&sl(c)}break e;case"textarea":jr(s,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&je(s,!!l.multiple,r,!1)}}}var al=!1;function zu(s,r,l){if(al)return s(r,l);al=!0;try{var c=s(r);return c}finally{if(al=!1,(Xi!==null||Pn!==null)&&(Oc(),Xi&&(r=Xi,s=Pn,Pn=Xi=null,Fu(r),s)))for(r=0;r<s.length;r++)Fu(s[r])}}function En(s,r){var l=s.stateNode;if(l===null)return null;var c=l[jt]||null;if(c===null)return null;l=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,r,typeof l));return l}var hi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ll=!1;if(hi)try{var xi={};Object.defineProperty(xi,"passive",{get:function(){ll=!0}}),window.addEventListener("test",xi,xi),window.removeEventListener("test",xi,xi)}catch{ll=!1}var Vn=null,Jo=null,Ni=null;function Hs(){if(Ni)return Ni;var s,r=Jo,l=r.length,c,y="value"in Vn?Vn.value:Vn.textContent,_=y.length;for(s=0;s<l&&r[s]===y[s];s++);var C=l-s;for(c=1;c<=C&&r[l-c]===y[_-c];c++);return Ni=y.slice(s,1<c?1-c:void 0)}function Xr(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function Gs(){return!0}function pt(){return!1}function an(s){function r(l,c,y,_,C){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=_,this.target=C,this.currentTarget=null;for(var w in s)s.hasOwnProperty(w)&&(l=s[w],this[w]=l?l(_):_[w]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Gs:pt,this.isPropagationStopped=pt,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Gs)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Gs)},persist:function(){},isPersistent:Gs}),r}var Zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zr=an(Zi),Js=T({},Zi,{view:0,detail:0}),Hu=an(Js),Ys,Yo,yn,eo=T({},Js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$s,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==yn&&(yn&&s.type==="mousemove"?(Ys=s.screenX-yn.screenX,Yo=s.screenY-yn.screenY):Yo=Ys=0,yn=s),Ys)},movementY:function(s){return"movementY"in s?s.movementY:Yo}}),Gu=an(eo),to=T({},eo,{dataTransfer:0}),Ju=an(to),ul=T({},Js,{relatedTarget:0}),Ks=an(ul),Yu=T({},Zi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ko=an(Yu),Pf=T({},Zi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Ku=an(Pf),no=T({},Zi,{data:0}),cl=an(no),$u={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qu(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=fl[s])?!!r[s]:!1}function $s(){return Qu}var Wu=T({},Js,{key:function(s){if(s.key){var r=$u[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=Xr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?dl[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$s,charCode:function(s){return s.type==="keypress"?Xr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Xr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ju=an(Wu),es=T({},eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hl=an(es),Xu=T({},Js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$s}),Zu=an(Xu),ec=T({},Zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),$o=an(ec),_n=T({},eo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),tc=an(_n),nc=T({},Zi,{newState:0,oldState:0}),Qs=an(nc),h=[9,13,27,32],E=hi&&"CompositionEvent"in window,I=null;hi&&"documentMode"in document&&(I=document.documentMode);var b=hi&&"TextEvent"in window&&!I,H=hi&&(!E||I&&8<I&&11>=I),j=" ",le=!1;function nt(s,r){switch(s){case"keyup":return h.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pt(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ue=!1;function Jt(s,r){switch(s){case"compositionend":return Pt(r);case"keypress":return r.which!==32?null:(le=!0,j);case"textInput":return s=r.data,s===j&&le?null:s;default:return null}}function Yt(s,r){if(Ue)return s==="compositionend"||!E&&nt(s,r)?(s=Hs(),Ni=Jo=Vn=null,Ue=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return H&&r.locale!=="ko"?null:r.data;default:return null}}var Ws={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sn(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!Ws[s.type]:r==="textarea"}function io(s,r,l,c){Xi?Pn?Pn.push(c):Pn=[c]:Xi=c,r=Jc(r,"onChange"),0<r.length&&(l=new Zr("onChange","change",null,l,c),s.push({event:l,listeners:r}))}var ts=null,pl=null;function zI(s){vv(s,0)}function ic(s){var r=Qr(s);if(sl(r))return s}function Og(s,r){if(s==="change")return r}var qg=!1;if(hi){var Vf;if(hi){var Uf="oninput"in document;if(!Uf){var Bg=document.createElement("div");Bg.setAttribute("oninput","return;"),Uf=typeof Bg.oninput=="function"}Vf=Uf}else Vf=!1;qg=Vf&&(!document.documentMode||9<document.documentMode)}function Fg(){ts&&(ts.detachEvent("onpropertychange",zg),pl=ts=null)}function zg(s){if(s.propertyName==="value"&&ic(pl)){var r=[];io(r,pl,s,Go(s)),zu(zI,r)}}function HI(s,r,l){s==="focusin"?(Fg(),ts=r,pl=l,ts.attachEvent("onpropertychange",zg)):s==="focusout"&&Fg()}function GI(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ic(pl)}function JI(s,r){if(s==="click")return ic(r)}function YI(s,r){if(s==="input"||s==="change")return ic(r)}function KI(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var Un=typeof Object.is=="function"?Object.is:KI;function ml(s,r){if(Un(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var l=Object.keys(s),c=Object.keys(r);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!Ns.call(r,y)||!Un(s[y],r[y]))return!1}return!0}function Hg(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Gg(s,r){var l=Hg(s);s=0;for(var c;l;){if(l.nodeType===3){if(c=s+l.textContent.length,s<=r&&c>=r)return{node:l,offset:r-s};s=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Hg(l)}}function Jg(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?Jg(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function Yg(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=Fo(s.document);r instanceof s.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)s=r.contentWindow;else break;r=Fo(s.document)}return r}function Lf(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var $I=hi&&"documentMode"in document&&11>=document.documentMode,Qo=null,Of=null,gl=null,qf=!1;function Kg(s,r,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;qf||Qo==null||Qo!==Fo(c)||(c=Qo,"selectionStart"in c&&Lf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),gl&&ml(gl,c)||(gl=c,c=Jc(Of,"onSelect"),0<c.length&&(r=new Zr("onSelect","select",null,r,l),s.push({event:r,listeners:c}),r.target=Qo)))}function so(s,r){var l={};return l[s.toLowerCase()]=r.toLowerCase(),l["Webkit"+s]="webkit"+r,l["Moz"+s]="moz"+r,l}var Wo={animationend:so("Animation","AnimationEnd"),animationiteration:so("Animation","AnimationIteration"),animationstart:so("Animation","AnimationStart"),transitionrun:so("Transition","TransitionRun"),transitionstart:so("Transition","TransitionStart"),transitioncancel:so("Transition","TransitionCancel"),transitionend:so("Transition","TransitionEnd")},Bf={},$g={};hi&&($g=document.createElement("div").style,"AnimationEvent"in window||(delete Wo.animationend.animation,delete Wo.animationiteration.animation,delete Wo.animationstart.animation),"TransitionEvent"in window||delete Wo.transitionend.transition);function ro(s){if(Bf[s])return Bf[s];if(!Wo[s])return s;var r=Wo[s],l;for(l in r)if(r.hasOwnProperty(l)&&l in $g)return Bf[s]=r[l];return s}var Qg=ro("animationend"),Wg=ro("animationiteration"),jg=ro("animationstart"),QI=ro("transitionrun"),WI=ro("transitionstart"),jI=ro("transitioncancel"),Xg=ro("transitionend"),Zg=new Map,Ff="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ff.push("scrollEnd");function pi(s,r){Zg.set(s,r),mn(r,[s])}var sc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Xn=[],jo=0,zf=0;function rc(){for(var s=jo,r=zf=jo=0;r<s;){var l=Xn[r];Xn[r++]=null;var c=Xn[r];Xn[r++]=null;var y=Xn[r];Xn[r++]=null;var _=Xn[r];if(Xn[r++]=null,c!==null&&y!==null){var C=c.pending;C===null?y.next=y:(y.next=C.next,C.next=y),c.pending=y}_!==0&&ey(l,y,_)}}function oc(s,r,l,c){Xn[jo++]=s,Xn[jo++]=r,Xn[jo++]=l,Xn[jo++]=c,zf|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function Hf(s,r,l,c){return oc(s,r,l,c),ac(s)}function oo(s,r){return oc(s,null,null,r),ac(s)}function ey(s,r,l){s.lanes|=l;var c=s.alternate;c!==null&&(c.lanes|=l);for(var y=!1,_=s.return;_!==null;)_.childLanes|=l,c=_.alternate,c!==null&&(c.childLanes|=l),_.tag===22&&(s=_.stateNode,s===null||s._visibility&1||(y=!0)),s=_,_=_.return;return s.tag===3?(_=s.stateNode,y&&r!==null&&(y=31-pn(l),s=_.hiddenUpdates,c=s[y],c===null?s[y]=[r]:c.push(r),r.lane=l|536870912),_):null}function ac(s){if(50<Ol)throw Ol=0,Xh=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var Xo={};function XI(s,r,l,c){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(s,r,l,c){return new XI(s,r,l,c)}function Gf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ns(s,r){var l=s.alternate;return l===null?(l=Ln(s.tag,r,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=r,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,r=s.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function ty(s,r){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,r=l.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function lc(s,r,l,c,y,_){var C=0;if(c=s,typeof s=="function")Gf(s)&&(C=1);else if(typeof s=="string")C=iR(s,l,he.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case x:return s=Ln(31,l,r,y),s.elementType=x,s.lanes=_,s;case z:return ao(l.children,y,_,r);case B:C=8,y|=24;break;case ee:return s=Ln(12,l,r,y|2),s.elementType=ee,s.lanes=_,s;case de:return s=Ln(13,l,r,y),s.elementType=de,s.lanes=_,s;case ue:return s=Ln(19,l,r,y),s.elementType=ue,s.lanes=_,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case W:C=10;break e;case Y:C=9;break e;case ie:C=11;break e;case D:C=14;break e;case N:C=16,c=null;break e}C=29,l=Error(i(130,s===null?"null":typeof s,"")),c=null}return r=Ln(C,l,r,y),r.elementType=s,r.type=c,r.lanes=_,r}function ao(s,r,l,c){return s=Ln(7,s,c,r),s.lanes=l,s}function Jf(s,r,l){return s=Ln(6,s,null,r),s.lanes=l,s}function ny(s){var r=Ln(18,null,null,0);return r.stateNode=s,r}function Yf(s,r,l){return r=Ln(4,s.children!==null?s.children:[],s.key,r),r.lanes=l,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var iy=new WeakMap;function Zn(s,r){if(typeof s=="object"&&s!==null){var l=iy.get(s);return l!==void 0?l:(r={value:s,source:r,stack:Lo(r)},iy.set(s,r),r)}return{value:s,source:r,stack:Lo(r)}}var Zo=[],ea=0,uc=null,yl=0,ei=[],ti=0,js=null,Mi=1,Di="";function is(s,r){Zo[ea++]=yl,Zo[ea++]=uc,uc=s,yl=r}function sy(s,r,l){ei[ti++]=Mi,ei[ti++]=Di,ei[ti++]=js,js=s;var c=Mi;s=Di;var y=32-pn(c)-1;c&=~(1<<y),l+=1;var _=32-pn(r)+y;if(30<_){var C=y-y%5;_=(c&(1<<C)-1).toString(32),c>>=C,y-=C,Mi=1<<32-pn(r)+y|l<<y|c,Di=_+s}else Mi=1<<_|l<<y|c,Di=s}function Kf(s){s.return!==null&&(is(s,1),sy(s,1,0))}function $f(s){for(;s===uc;)uc=Zo[--ea],Zo[ea]=null,yl=Zo[--ea],Zo[ea]=null;for(;s===js;)js=ei[--ti],ei[ti]=null,Di=ei[--ti],ei[ti]=null,Mi=ei[--ti],ei[ti]=null}function ry(s,r){ei[ti++]=Mi,ei[ti++]=Di,ei[ti++]=js,Mi=r.id,Di=r.overflow,js=s}var Xt=null,mt=null,Ge=!1,Xs=null,ni=!1,Qf=Error(i(519));function Zs(s){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _l(Zn(r,s)),Qf}function oy(s){var r=s.stateNode,l=s.type,c=s.memoizedProps;switch(r[St]=s,r[jt]=c,l){case"dialog":qe("cancel",r),qe("close",r);break;case"iframe":case"object":case"embed":qe("load",r);break;case"video":case"audio":for(l=0;l<Bl.length;l++)qe(Bl[l],r);break;case"source":qe("error",r);break;case"img":case"image":case"link":qe("error",r),qe("load",r);break;case"details":qe("toggle",r);break;case"input":qe("invalid",r),Wr(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":qe("invalid",r);break;case"textarea":qe("invalid",r),zs(r,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||c.suppressHydrationWarning===!0||Av(r.textContent,l)?(c.popover!=null&&(qe("beforetoggle",r),qe("toggle",r)),c.onScroll!=null&&qe("scroll",r),c.onScrollEnd!=null&&qe("scrollend",r),c.onClick!=null&&(r.onclick=Gt),r=!0):r=!1,r||Zs(s,!0)}function ay(s){for(Xt=s.return;Xt;)switch(Xt.tag){case 5:case 31:case 13:ni=!1;return;case 27:case 3:ni=!0;return;default:Xt=Xt.return}}function ta(s){if(s!==Xt)return!1;if(!Ge)return ay(s),Ge=!0,!1;var r=s.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||hp(s.type,s.memoizedProps)),l=!l),l&&mt&&Zs(s),ay(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));mt=Dv(s)}else if(r===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));mt=Dv(s)}else r===27?(r=mt,hr(s.type)?(s=_p,_p=null,mt=s):mt=r):mt=Xt?si(s.stateNode.nextSibling):null;return!0}function lo(){mt=Xt=null,Ge=!1}function Wf(){var s=Xs;return s!==null&&(wn===null?wn=s:wn.push.apply(wn,s),Xs=null),s}function _l(s){Xs===null?Xs=[s]:Xs.push(s)}var jf=O(null),uo=null,ss=null;function er(s,r,l){oe(jf,r._currentValue),r._currentValue=l}function rs(s){s._currentValue=jf.current,Z(jf)}function Xf(s,r,l){for(;s!==null;){var c=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),s===l)break;s=s.return}}function Zf(s,r,l,c){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var _=y.dependencies;if(_!==null){var C=y.child;_=_.firstContext;e:for(;_!==null;){var w=_;_=y;for(var U=0;U<r.length;U++)if(w.context===r[U]){_.lanes|=l,w=_.alternate,w!==null&&(w.lanes|=l),Xf(_.return,l,s),c||(C=null);break e}_=w.next}}else if(y.tag===18){if(C=y.return,C===null)throw Error(i(341));C.lanes|=l,_=C.alternate,_!==null&&(_.lanes|=l),Xf(C,l,s),C=null}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===s){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}}function na(s,r,l,c){s=null;for(var y=r,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var C=y.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var w=y.type;Un(y.pendingProps.value,C.value)||(s!==null?s.push(w):s=[w])}}else if(y===Ve.current){if(C=y.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Jl):s=[Jl])}y=y.return}s!==null&&Zf(r,s,l,c),r.flags|=262144}function cc(s){for(s=s.firstContext;s!==null;){if(!Un(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function co(s){uo=s,ss=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Zt(s){return ly(uo,s)}function dc(s,r){return uo===null&&co(s),ly(s,r)}function ly(s,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},ss===null){if(s===null)throw Error(i(308));ss=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else ss=ss.next=r;return l}var ZI=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(l,c){s.push(c)}};this.abort=function(){r.aborted=!0,s.forEach(function(l){return l()})}},ew=n.unstable_scheduleCallback,tw=n.unstable_NormalPriority,Vt={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function eh(){return{controller:new ZI,data:new Map,refCount:0}}function vl(s){s.refCount--,s.refCount===0&&ew(tw,function(){s.controller.abort()})}var Tl=null,th=0,ia=0,sa=null;function nw(s,r){if(Tl===null){var l=Tl=[];th=0,ia=sp(),sa={status:"pending",value:void 0,then:function(c){l.push(c)}}}return th++,r.then(uy,uy),r}function uy(){if(--th===0&&Tl!==null){sa!==null&&(sa.status="fulfilled");var s=Tl;Tl=null,ia=0,sa=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function iw(s,r){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return s.then(function(){c.status="fulfilled",c.value=r;for(var y=0;y<l.length;y++)(0,l[y])(r)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var cy=$.S;$.S=function(s,r){K_=Qe(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&nw(s,r),cy!==null&&cy(s,r)};var fo=O(null);function nh(){var s=fo.current;return s!==null?s:dt.pooledCache}function fc(s,r){r===null?oe(fo,fo.current):oe(fo,r.pool)}function dy(){var s=nh();return s===null?null:{parent:Vt._currentValue,pool:s}}var ra=Error(i(460)),ih=Error(i(474)),hc=Error(i(542)),pc={then:function(){}};function fy(s){return s=s.status,s==="fulfilled"||s==="rejected"}function hy(s,r,l){switch(l=s[l],l===void 0?s.push(r):l!==r&&(r.then(Gt,Gt),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,my(s),s;default:if(typeof r.status=="string")r.then(Gt,Gt);else{if(s=dt,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(c){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=c}},function(c){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,my(s),s}throw po=r,ra}}function ho(s){try{var r=s._init;return r(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(po=l,ra):l}}var po=null;function py(){if(po===null)throw Error(i(459));var s=po;return po=null,s}function my(s){if(s===ra||s===hc)throw Error(i(483))}var oa=null,El=0;function mc(s){var r=El;return El+=1,oa===null&&(oa=[]),hy(oa,s,r)}function Sl(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function gc(s,r){throw r.$$typeof===S?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function gy(s){function r(F,q){if(s){var G=F.deletions;G===null?(F.deletions=[q],F.flags|=16):G.push(q)}}function l(F,q){if(!s)return null;for(;q!==null;)r(F,q),q=q.sibling;return null}function c(F){for(var q=new Map;F!==null;)F.key!==null?q.set(F.key,F):q.set(F.index,F),F=F.sibling;return q}function y(F,q){return F=ns(F,q),F.index=0,F.sibling=null,F}function _(F,q,G){return F.index=G,s?(G=F.alternate,G!==null?(G=G.index,G<q?(F.flags|=67108866,q):G):(F.flags|=67108866,q)):(F.flags|=1048576,q)}function C(F){return s&&F.alternate===null&&(F.flags|=67108866),F}function w(F,q,G,te){return q===null||q.tag!==6?(q=Jf(G,F.mode,te),q.return=F,q):(q=y(q,G),q.return=F,q)}function U(F,q,G,te){var Te=G.type;return Te===z?X(F,q,G.props.children,te,G.key):q!==null&&(q.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===N&&ho(Te)===q.type)?(q=y(q,G.props),Sl(q,G),q.return=F,q):(q=lc(G.type,G.key,G.props,null,F.mode,te),Sl(q,G),q.return=F,q)}function J(F,q,G,te){return q===null||q.tag!==4||q.stateNode.containerInfo!==G.containerInfo||q.stateNode.implementation!==G.implementation?(q=Yf(G,F.mode,te),q.return=F,q):(q=y(q,G.children||[]),q.return=F,q)}function X(F,q,G,te,Te){return q===null||q.tag!==7?(q=ao(G,F.mode,te,Te),q.return=F,q):(q=y(q,G),q.return=F,q)}function ne(F,q,G){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Jf(""+q,F.mode,G),q.return=F,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case R:return G=lc(q.type,q.key,q.props,null,F.mode,G),Sl(G,q),G.return=F,G;case L:return q=Yf(q,F.mode,G),q.return=F,q;case N:return q=ho(q),ne(F,q,G)}if(we(q)||k(q))return q=ao(q,F.mode,G,null),q.return=F,q;if(typeof q.then=="function")return ne(F,mc(q),G);if(q.$$typeof===W)return ne(F,dc(F,q),G);gc(F,q)}return null}function K(F,q,G,te){var Te=q!==null?q.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Te!==null?null:w(F,q,""+G,te);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case R:return G.key===Te?U(F,q,G,te):null;case L:return G.key===Te?J(F,q,G,te):null;case N:return G=ho(G),K(F,q,G,te)}if(we(G)||k(G))return Te!==null?null:X(F,q,G,te,null);if(typeof G.then=="function")return K(F,q,mc(G),te);if(G.$$typeof===W)return K(F,q,dc(F,G),te);gc(F,G)}return null}function Q(F,q,G,te,Te){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return F=F.get(G)||null,w(q,F,""+te,Te);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case R:return F=F.get(te.key===null?G:te.key)||null,U(q,F,te,Te);case L:return F=F.get(te.key===null?G:te.key)||null,J(q,F,te,Te);case N:return te=ho(te),Q(F,q,G,te,Te)}if(we(te)||k(te))return F=F.get(G)||null,X(q,F,te,Te,null);if(typeof te.then=="function")return Q(F,q,G,mc(te),Te);if(te.$$typeof===W)return Q(F,q,G,dc(q,te),Te);gc(q,te)}return null}function me(F,q,G,te){for(var Te=null,Xe=null,ye=q,ke=q=0,Fe=null;ye!==null&&ke<G.length;ke++){ye.index>ke?(Fe=ye,ye=null):Fe=ye.sibling;var Ze=K(F,ye,G[ke],te);if(Ze===null){ye===null&&(ye=Fe);break}s&&ye&&Ze.alternate===null&&r(F,ye),q=_(Ze,q,ke),Xe===null?Te=Ze:Xe.sibling=Ze,Xe=Ze,ye=Fe}if(ke===G.length)return l(F,ye),Ge&&is(F,ke),Te;if(ye===null){for(;ke<G.length;ke++)ye=ne(F,G[ke],te),ye!==null&&(q=_(ye,q,ke),Xe===null?Te=ye:Xe.sibling=ye,Xe=ye);return Ge&&is(F,ke),Te}for(ye=c(ye);ke<G.length;ke++)Fe=Q(ye,F,ke,G[ke],te),Fe!==null&&(s&&Fe.alternate!==null&&ye.delete(Fe.key===null?ke:Fe.key),q=_(Fe,q,ke),Xe===null?Te=Fe:Xe.sibling=Fe,Xe=Fe);return s&&ye.forEach(function(_r){return r(F,_r)}),Ge&&is(F,ke),Te}function Se(F,q,G,te){if(G==null)throw Error(i(151));for(var Te=null,Xe=null,ye=q,ke=q=0,Fe=null,Ze=G.next();ye!==null&&!Ze.done;ke++,Ze=G.next()){ye.index>ke?(Fe=ye,ye=null):Fe=ye.sibling;var _r=K(F,ye,Ze.value,te);if(_r===null){ye===null&&(ye=Fe);break}s&&ye&&_r.alternate===null&&r(F,ye),q=_(_r,q,ke),Xe===null?Te=_r:Xe.sibling=_r,Xe=_r,ye=Fe}if(Ze.done)return l(F,ye),Ge&&is(F,ke),Te;if(ye===null){for(;!Ze.done;ke++,Ze=G.next())Ze=ne(F,Ze.value,te),Ze!==null&&(q=_(Ze,q,ke),Xe===null?Te=Ze:Xe.sibling=Ze,Xe=Ze);return Ge&&is(F,ke),Te}for(ye=c(ye);!Ze.done;ke++,Ze=G.next())Ze=Q(ye,F,ke,Ze.value,te),Ze!==null&&(s&&Ze.alternate!==null&&ye.delete(Ze.key===null?ke:Ze.key),q=_(Ze,q,ke),Xe===null?Te=Ze:Xe.sibling=Ze,Xe=Ze);return s&&ye.forEach(function(pR){return r(F,pR)}),Ge&&is(F,ke),Te}function ct(F,q,G,te){if(typeof G=="object"&&G!==null&&G.type===z&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case R:e:{for(var Te=G.key;q!==null;){if(q.key===Te){if(Te=G.type,Te===z){if(q.tag===7){l(F,q.sibling),te=y(q,G.props.children),te.return=F,F=te;break e}}else if(q.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===N&&ho(Te)===q.type){l(F,q.sibling),te=y(q,G.props),Sl(te,G),te.return=F,F=te;break e}l(F,q);break}else r(F,q);q=q.sibling}G.type===z?(te=ao(G.props.children,F.mode,te,G.key),te.return=F,F=te):(te=lc(G.type,G.key,G.props,null,F.mode,te),Sl(te,G),te.return=F,F=te)}return C(F);case L:e:{for(Te=G.key;q!==null;){if(q.key===Te)if(q.tag===4&&q.stateNode.containerInfo===G.containerInfo&&q.stateNode.implementation===G.implementation){l(F,q.sibling),te=y(q,G.children||[]),te.return=F,F=te;break e}else{l(F,q);break}else r(F,q);q=q.sibling}te=Yf(G,F.mode,te),te.return=F,F=te}return C(F);case N:return G=ho(G),ct(F,q,G,te)}if(we(G))return me(F,q,G,te);if(k(G)){if(Te=k(G),typeof Te!="function")throw Error(i(150));return G=Te.call(G),Se(F,q,G,te)}if(typeof G.then=="function")return ct(F,q,mc(G),te);if(G.$$typeof===W)return ct(F,q,dc(F,G),te);gc(F,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,q!==null&&q.tag===6?(l(F,q.sibling),te=y(q,G),te.return=F,F=te):(l(F,q),te=Jf(G,F.mode,te),te.return=F,F=te),C(F)):l(F,q)}return function(F,q,G,te){try{El=0;var Te=ct(F,q,G,te);return oa=null,Te}catch(ye){if(ye===ra||ye===hc)throw ye;var Xe=Ln(29,ye,null,F.mode);return Xe.lanes=te,Xe.return=F,Xe}finally{}}}var mo=gy(!0),yy=gy(!1),tr=!1;function sh(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rh(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function nr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function ir(s,r,l){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(tt&2)!==0){var y=c.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),c.pending=r,r=ac(s),ey(s,null,l),r}return oc(s,c,r,l),ac(s)}function Al(s,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,Vs(s,l)}}function oh(s,r){var l=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var C={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?y=_=C:_=_.next=C,l=l.next}while(l!==null);_===null?y=_=r:_=_.next=r}else y=_=r;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=r:s.next=r,l.lastBaseUpdate=r}var ah=!1;function Cl(){if(ah){var s=sa;if(s!==null)throw s}}function Il(s,r,l,c){ah=!1;var y=s.updateQueue;tr=!1;var _=y.firstBaseUpdate,C=y.lastBaseUpdate,w=y.shared.pending;if(w!==null){y.shared.pending=null;var U=w,J=U.next;U.next=null,C===null?_=J:C.next=J,C=U;var X=s.alternate;X!==null&&(X=X.updateQueue,w=X.lastBaseUpdate,w!==C&&(w===null?X.firstBaseUpdate=J:w.next=J,X.lastBaseUpdate=U))}if(_!==null){var ne=y.baseState;C=0,X=J=U=null,w=_;do{var K=w.lane&-536870913,Q=K!==w.lane;if(Q?(Be&K)===K:(c&K)===K){K!==0&&K===ia&&(ah=!0),X!==null&&(X=X.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var me=s,Se=w;K=r;var ct=l;switch(Se.tag){case 1:if(me=Se.payload,typeof me=="function"){ne=me.call(ct,ne,K);break e}ne=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=Se.payload,K=typeof me=="function"?me.call(ct,ne,K):me,K==null)break e;ne=T({},ne,K);break e;case 2:tr=!0}}K=w.callback,K!==null&&(s.flags|=64,Q&&(s.flags|=8192),Q=y.callbacks,Q===null?y.callbacks=[K]:Q.push(K))}else Q={lane:K,tag:w.tag,payload:w.payload,callback:w.callback,next:null},X===null?(J=X=Q,U=ne):X=X.next=Q,C|=K;if(w=w.next,w===null){if(w=y.shared.pending,w===null)break;Q=w,w=Q.next,Q.next=null,y.lastBaseUpdate=Q,y.shared.pending=null}}while(!0);X===null&&(U=ne),y.baseState=U,y.firstBaseUpdate=J,y.lastBaseUpdate=X,_===null&&(y.shared.lanes=0),lr|=C,s.lanes=C,s.memoizedState=ne}}function _y(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function vy(s,r){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)_y(l[s],r)}var aa=O(null),yc=O(0);function Ty(s,r){s=ps,oe(yc,s),oe(aa,r),ps=s|r.baseLanes}function lh(){oe(yc,ps),oe(aa,aa.current)}function uh(){ps=yc.current,Z(aa),Z(yc)}var On=O(null),ii=null;function sr(s){var r=s.alternate;oe(xt,xt.current&1),oe(On,s),ii===null&&(r===null||aa.current!==null||r.memoizedState!==null)&&(ii=s)}function ch(s){oe(xt,xt.current),oe(On,s),ii===null&&(ii=s)}function Ey(s){s.tag===22?(oe(xt,xt.current),oe(On,s),ii===null&&(ii=s)):rr()}function rr(){oe(xt,xt.current),oe(On,On.current)}function qn(s){Z(On),ii===s&&(ii=null),Z(xt)}var xt=O(0);function _c(s){for(var r=s;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||gp(l)||yp(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var os=0,De=null,lt=null,Ut=null,vc=!1,la=!1,go=!1,Tc=0,wl=0,ua=null,sw=0;function Ct(){throw Error(i(321))}function dh(s,r){if(r===null)return!1;for(var l=0;l<r.length&&l<s.length;l++)if(!Un(s[l],r[l]))return!1;return!0}function fh(s,r,l,c,y,_){return os=_,De=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,$.H=s===null||s.memoizedState===null?s_:Rh,go=!1,_=l(c,y),go=!1,la&&(_=Ay(r,l,c,y)),Sy(s),_}function Sy(s){$.H=xl;var r=lt!==null&&lt.next!==null;if(os=0,Ut=lt=De=null,vc=!1,wl=0,ua=null,r)throw Error(i(300));s===null||Lt||(s=s.dependencies,s!==null&&cc(s)&&(Lt=!0))}function Ay(s,r,l,c){De=s;var y=0;do{if(la&&(ua=null),wl=0,la=!1,25<=y)throw Error(i(301));if(y+=1,Ut=lt=null,s.updateQueue!=null){var _=s.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}$.H=r_,_=r(l,c)}while(la);return _}function rw(){var s=$.H,r=s.useState()[0];return r=typeof r.then=="function"?Rl(r):r,s=s.useState()[0],(lt!==null?lt.memoizedState:null)!==s&&(De.flags|=1024),r}function hh(){var s=Tc!==0;return Tc=0,s}function ph(s,r,l){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~l}function mh(s){if(vc){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}vc=!1}os=0,Ut=lt=De=null,la=!1,wl=Tc=0,ua=null}function vn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?De.memoizedState=Ut=s:Ut=Ut.next=s,Ut}function Nt(){if(lt===null){var s=De.alternate;s=s!==null?s.memoizedState:null}else s=lt.next;var r=Ut===null?De.memoizedState:Ut.next;if(r!==null)Ut=r,lt=s;else{if(s===null)throw De.alternate===null?Error(i(467)):Error(i(310));lt=s,s={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},Ut===null?De.memoizedState=Ut=s:Ut=Ut.next=s}return Ut}function Ec(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Rl(s){var r=wl;return wl+=1,ua===null&&(ua=[]),s=hy(ua,s,r),r=De,(Ut===null?r.memoizedState:Ut.next)===null&&(r=r.alternate,$.H=r===null||r.memoizedState===null?s_:Rh),s}function Sc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Rl(s);if(s.$$typeof===W)return Zt(s)}throw Error(i(438,String(s)))}function gh(s){var r=null,l=De.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var c=De.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=Ec(),De.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(s),c=0;c<s;c++)l[c]=V;return r.index++,l}function as(s,r){return typeof r=="function"?r(s):r}function Ac(s){var r=Nt();return yh(r,lt,s)}function yh(s,r,l){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var y=s.baseQueue,_=c.pending;if(_!==null){if(y!==null){var C=y.next;y.next=_.next,_.next=C}r.baseQueue=y=_,c.pending=null}if(_=s.baseState,y===null)s.memoizedState=_;else{r=y.next;var w=C=null,U=null,J=r,X=!1;do{var ne=J.lane&-536870913;if(ne!==J.lane?(Be&ne)===ne:(os&ne)===ne){var K=J.revertLane;if(K===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),ne===ia&&(X=!0);else if((os&K)===K){J=J.next,K===ia&&(X=!0);continue}else ne={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},U===null?(w=U=ne,C=_):U=U.next=ne,De.lanes|=K,lr|=K;ne=J.action,go&&l(_,ne),_=J.hasEagerState?J.eagerState:l(_,ne)}else K={lane:ne,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},U===null?(w=U=K,C=_):U=U.next=K,De.lanes|=ne,lr|=ne;J=J.next}while(J!==null&&J!==r);if(U===null?C=_:U.next=w,!Un(_,s.memoizedState)&&(Lt=!0,X&&(l=sa,l!==null)))throw l;s.memoizedState=_,s.baseState=C,s.baseQueue=U,c.lastRenderedState=_}return y===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function _h(s){var r=Nt(),l=r.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var c=l.dispatch,y=l.pending,_=r.memoizedState;if(y!==null){l.pending=null;var C=y=y.next;do _=s(_,C.action),C=C.next;while(C!==y);Un(_,r.memoizedState)||(Lt=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),l.lastRenderedState=_}return[_,c]}function Cy(s,r,l){var c=De,y=Nt(),_=Ge;if(_){if(l===void 0)throw Error(i(407));l=l()}else l=r();var C=!Un((lt||y).memoizedState,l);if(C&&(y.memoizedState=l,Lt=!0),y=y.queue,Eh(Ry.bind(null,c,y,s),[s]),y.getSnapshot!==r||C||Ut!==null&&Ut.memoizedState.tag&1){if(c.flags|=2048,ca(9,{destroy:void 0},wy.bind(null,c,y,l,r),null),dt===null)throw Error(i(349));_||(os&127)!==0||Iy(c,r,l)}return l}function Iy(s,r,l){s.flags|=16384,s={getSnapshot:r,value:l},r=De.updateQueue,r===null?(r=Ec(),De.updateQueue=r,r.stores=[s]):(l=r.stores,l===null?r.stores=[s]:l.push(s))}function wy(s,r,l,c){r.value=l,r.getSnapshot=c,by(r)&&xy(s)}function Ry(s,r,l){return l(function(){by(r)&&xy(s)})}function by(s){var r=s.getSnapshot;s=s.value;try{var l=r();return!Un(s,l)}catch{return!0}}function xy(s){var r=oo(s,2);r!==null&&Rn(r,s,2)}function vh(s){var r=vn();if(typeof s=="function"){var l=s;if(s=l(),go){$n(!0);try{l()}finally{$n(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:s},r}function Ny(s,r,l,c){return s.baseState=l,yh(s,lt,typeof c=="function"?c:as)}function ow(s,r,l,c,y){if(wc(s))throw Error(i(485));if(s=r.action,s!==null){var _={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){_.listeners.push(C)}};$.T!==null?l(!0):_.isTransition=!1,c(_),l=r.pending,l===null?(_.next=r.pending=_,My(r,_)):(_.next=l.next,r.pending=l.next=_)}}function My(s,r){var l=r.action,c=r.payload,y=s.state;if(r.isTransition){var _=$.T,C={};$.T=C;try{var w=l(y,c),U=$.S;U!==null&&U(C,w),Dy(s,r,w)}catch(J){Th(s,r,J)}finally{_!==null&&C.types!==null&&(_.types=C.types),$.T=_}}else try{_=l(y,c),Dy(s,r,_)}catch(J){Th(s,r,J)}}function Dy(s,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){ky(s,r,c)},function(c){return Th(s,r,c)}):ky(s,r,l)}function ky(s,r,l){r.status="fulfilled",r.value=l,Py(r),s.state=l,r=s.pending,r!==null&&(l=r.next,l===r?s.pending=null:(l=l.next,r.next=l,My(s,l)))}function Th(s,r,l){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=l,Py(r),r=r.next;while(r!==c)}s.action=null}function Py(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function Vy(s,r){return r}function Uy(s,r){if(Ge){var l=dt.formState;if(l!==null){e:{var c=De;if(Ge){if(mt){t:{for(var y=mt,_=ni;y.nodeType!==8;){if(!_){y=null;break t}if(y=si(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){mt=si(y.nextSibling),c=y.data==="F!";break e}}Zs(c)}c=!1}c&&(r=l[0])}}return l=vn(),l.memoizedState=l.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vy,lastRenderedState:r},l.queue=c,l=t_.bind(null,De,c),c.dispatch=l,c=vh(!1),_=wh.bind(null,De,!1,c.queue),c=vn(),y={state:r,dispatch:null,action:s,pending:null},c.queue=y,l=ow.bind(null,De,y,_,l),y.dispatch=l,c.memoizedState=s,[r,l,!1]}function Ly(s){var r=Nt();return Oy(r,lt,s)}function Oy(s,r,l){if(r=yh(s,r,Vy)[0],s=Ac(as)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=Rl(r)}catch(C){throw C===ra?hc:C}else c=r;r=Nt();var y=r.queue,_=y.dispatch;return l!==r.memoizedState&&(De.flags|=2048,ca(9,{destroy:void 0},aw.bind(null,y,l),null)),[c,_,s]}function aw(s,r){s.action=r}function qy(s){var r=Nt(),l=lt;if(l!==null)return Oy(r,l,s);Nt(),r=r.memoizedState,l=Nt();var c=l.queue.dispatch;return l.memoizedState=s,[r,c,!1]}function ca(s,r,l,c){return s={tag:s,create:l,deps:c,inst:r,next:null},r=De.updateQueue,r===null&&(r=Ec(),De.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=s.next=s:(c=l.next,l.next=s,s.next=c,r.lastEffect=s),s}function By(){return Nt().memoizedState}function Cc(s,r,l,c){var y=vn();De.flags|=s,y.memoizedState=ca(1|r,{destroy:void 0},l,c===void 0?null:c)}function Ic(s,r,l,c){var y=Nt();c=c===void 0?null:c;var _=y.memoizedState.inst;lt!==null&&c!==null&&dh(c,lt.memoizedState.deps)?y.memoizedState=ca(r,_,l,c):(De.flags|=s,y.memoizedState=ca(1|r,_,l,c))}function Fy(s,r){Cc(8390656,8,s,r)}function Eh(s,r){Ic(2048,8,s,r)}function lw(s){De.flags|=4;var r=De.updateQueue;if(r===null)r=Ec(),De.updateQueue=r,r.events=[s];else{var l=r.events;l===null?r.events=[s]:l.push(s)}}function zy(s){var r=Nt().memoizedState;return lw({ref:r,nextImpl:s}),function(){if((tt&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function Hy(s,r){return Ic(4,2,s,r)}function Gy(s,r){return Ic(4,4,s,r)}function Jy(s,r){if(typeof r=="function"){s=s();var l=r(s);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function Yy(s,r,l){l=l!=null?l.concat([s]):null,Ic(4,4,Jy.bind(null,r,s),l)}function Sh(){}function Ky(s,r){var l=Nt();r=r===void 0?null:r;var c=l.memoizedState;return r!==null&&dh(r,c[1])?c[0]:(l.memoizedState=[s,r],s)}function $y(s,r){var l=Nt();r=r===void 0?null:r;var c=l.memoizedState;if(r!==null&&dh(r,c[1]))return c[0];if(c=s(),go){$n(!0);try{s()}finally{$n(!1)}}return l.memoizedState=[c,r],c}function Ah(s,r,l){return l===void 0||(os&1073741824)!==0&&(Be&261930)===0?s.memoizedState=r:(s.memoizedState=l,s=Q_(),De.lanes|=s,lr|=s,l)}function Qy(s,r,l,c){return Un(l,r)?l:aa.current!==null?(s=Ah(s,l,c),Un(s,r)||(Lt=!0),s):(os&42)===0||(os&1073741824)!==0&&(Be&261930)===0?(Lt=!0,s.memoizedState=l):(s=Q_(),De.lanes|=s,lr|=s,r)}function Wy(s,r,l,c,y){var _=ae.p;ae.p=_!==0&&8>_?_:8;var C=$.T,w={};$.T=w,wh(s,!1,r,l);try{var U=y(),J=$.S;if(J!==null&&J(w,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var X=iw(U,c);bl(s,r,X,zn(s))}else bl(s,r,c,zn(s))}catch(ne){bl(s,r,{then:function(){},status:"rejected",reason:ne},zn())}finally{ae.p=_,C!==null&&w.types!==null&&(C.types=w.types),$.T=C}}function uw(){}function Ch(s,r,l,c){if(s.tag!==5)throw Error(i(476));var y=jy(s).queue;Wy(s,y,r,ve,l===null?uw:function(){return Xy(s),l(c)})}function jy(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:ve},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:l},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function Xy(s){var r=jy(s);r.next===null&&(r=s.alternate.memoizedState),bl(s,r.next.queue,{},zn())}function Ih(){return Zt(Jl)}function Zy(){return Nt().memoizedState}function e_(){return Nt().memoizedState}function cw(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var l=zn();s=nr(l);var c=ir(r,s,l);c!==null&&(Rn(c,r,l),Al(c,r,l)),r={cache:eh()},s.payload=r;return}r=r.return}}function dw(s,r,l){var c=zn();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},wc(s)?n_(r,l):(l=Hf(s,r,l,c),l!==null&&(Rn(l,s,c),i_(l,r,c)))}function t_(s,r,l){var c=zn();bl(s,r,l,c)}function bl(s,r,l,c){var y={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(wc(s))n_(r,y);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var C=r.lastRenderedState,w=_(C,l);if(y.hasEagerState=!0,y.eagerState=w,Un(w,C))return oc(s,r,y,0),dt===null&&rc(),!1}catch{}finally{}if(l=Hf(s,r,y,c),l!==null)return Rn(l,s,c),i_(l,r,c),!0}return!1}function wh(s,r,l,c){if(c={lane:2,revertLane:sp(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},wc(s)){if(r)throw Error(i(479))}else r=Hf(s,l,c,2),r!==null&&Rn(r,s,2)}function wc(s){var r=s.alternate;return s===De||r!==null&&r===De}function n_(s,r){la=vc=!0;var l=s.pending;l===null?r.next=r:(r.next=l.next,l.next=r),s.pending=r}function i_(s,r,l){if((l&4194048)!==0){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,Vs(s,l)}}var xl={readContext:Zt,use:Sc,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useLayoutEffect:Ct,useInsertionEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useSyncExternalStore:Ct,useId:Ct,useHostTransitionStatus:Ct,useFormState:Ct,useActionState:Ct,useOptimistic:Ct,useMemoCache:Ct,useCacheRefresh:Ct};xl.useEffectEvent=Ct;var s_={readContext:Zt,use:Sc,useCallback:function(s,r){return vn().memoizedState=[s,r===void 0?null:r],s},useContext:Zt,useEffect:Fy,useImperativeHandle:function(s,r,l){l=l!=null?l.concat([s]):null,Cc(4194308,4,Jy.bind(null,r,s),l)},useLayoutEffect:function(s,r){return Cc(4194308,4,s,r)},useInsertionEffect:function(s,r){Cc(4,2,s,r)},useMemo:function(s,r){var l=vn();r=r===void 0?null:r;var c=s();if(go){$n(!0);try{s()}finally{$n(!1)}}return l.memoizedState=[c,r],c},useReducer:function(s,r,l){var c=vn();if(l!==void 0){var y=l(r);if(go){$n(!0);try{l(r)}finally{$n(!1)}}}else y=r;return c.memoizedState=c.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},c.queue=s,s=s.dispatch=dw.bind(null,De,s),[c.memoizedState,s]},useRef:function(s){var r=vn();return s={current:s},r.memoizedState=s},useState:function(s){s=vh(s);var r=s.queue,l=t_.bind(null,De,r);return r.dispatch=l,[s.memoizedState,l]},useDebugValue:Sh,useDeferredValue:function(s,r){var l=vn();return Ah(l,s,r)},useTransition:function(){var s=vh(!1);return s=Wy.bind(null,De,s.queue,!0,!1),vn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,l){var c=De,y=vn();if(Ge){if(l===void 0)throw Error(i(407));l=l()}else{if(l=r(),dt===null)throw Error(i(349));(Be&127)!==0||Iy(c,r,l)}y.memoizedState=l;var _={value:l,getSnapshot:r};return y.queue=_,Fy(Ry.bind(null,c,_,s),[s]),c.flags|=2048,ca(9,{destroy:void 0},wy.bind(null,c,_,l,r),null),l},useId:function(){var s=vn(),r=dt.identifierPrefix;if(Ge){var l=Di,c=Mi;l=(c&~(1<<32-pn(c)-1)).toString(32)+l,r="_"+r+"R_"+l,l=Tc++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=sw++,r="_"+r+"r_"+l.toString(32)+"_";return s.memoizedState=r},useHostTransitionStatus:Ih,useFormState:Uy,useActionState:Uy,useOptimistic:function(s){var r=vn();r.memoizedState=r.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=wh.bind(null,De,!0,l),l.dispatch=r,[s,r]},useMemoCache:gh,useCacheRefresh:function(){return vn().memoizedState=cw.bind(null,De)},useEffectEvent:function(s){var r=vn(),l={impl:s};return r.memoizedState=l,function(){if((tt&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},Rh={readContext:Zt,use:Sc,useCallback:Ky,useContext:Zt,useEffect:Eh,useImperativeHandle:Yy,useInsertionEffect:Hy,useLayoutEffect:Gy,useMemo:$y,useReducer:Ac,useRef:By,useState:function(){return Ac(as)},useDebugValue:Sh,useDeferredValue:function(s,r){var l=Nt();return Qy(l,lt.memoizedState,s,r)},useTransition:function(){var s=Ac(as)[0],r=Nt().memoizedState;return[typeof s=="boolean"?s:Rl(s),r]},useSyncExternalStore:Cy,useId:Zy,useHostTransitionStatus:Ih,useFormState:Ly,useActionState:Ly,useOptimistic:function(s,r){var l=Nt();return Ny(l,lt,s,r)},useMemoCache:gh,useCacheRefresh:e_};Rh.useEffectEvent=zy;var r_={readContext:Zt,use:Sc,useCallback:Ky,useContext:Zt,useEffect:Eh,useImperativeHandle:Yy,useInsertionEffect:Hy,useLayoutEffect:Gy,useMemo:$y,useReducer:_h,useRef:By,useState:function(){return _h(as)},useDebugValue:Sh,useDeferredValue:function(s,r){var l=Nt();return lt===null?Ah(l,s,r):Qy(l,lt.memoizedState,s,r)},useTransition:function(){var s=_h(as)[0],r=Nt().memoizedState;return[typeof s=="boolean"?s:Rl(s),r]},useSyncExternalStore:Cy,useId:Zy,useHostTransitionStatus:Ih,useFormState:qy,useActionState:qy,useOptimistic:function(s,r){var l=Nt();return lt!==null?Ny(l,lt,s,r):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:gh,useCacheRefresh:e_};r_.useEffectEvent=zy;function bh(s,r,l,c){r=s.memoizedState,l=l(c,r),l=l==null?r:T({},r,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var xh={enqueueSetState:function(s,r,l){s=s._reactInternals;var c=zn(),y=nr(c);y.payload=r,l!=null&&(y.callback=l),r=ir(s,y,c),r!==null&&(Rn(r,s,c),Al(r,s,c))},enqueueReplaceState:function(s,r,l){s=s._reactInternals;var c=zn(),y=nr(c);y.tag=1,y.payload=r,l!=null&&(y.callback=l),r=ir(s,y,c),r!==null&&(Rn(r,s,c),Al(r,s,c))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var l=zn(),c=nr(l);c.tag=2,r!=null&&(c.callback=r),r=ir(s,c,l),r!==null&&(Rn(r,s,l),Al(r,s,l))}};function o_(s,r,l,c,y,_,C){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,_,C):r.prototype&&r.prototype.isPureReactComponent?!ml(l,c)||!ml(y,_):!0}function a_(s,r,l,c){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,c),r.state!==s&&xh.enqueueReplaceState(r,r.state,null)}function yo(s,r){var l=r;if("ref"in r){l={};for(var c in r)c!=="ref"&&(l[c]=r[c])}if(s=s.defaultProps){l===r&&(l=T({},l));for(var y in s)l[y]===void 0&&(l[y]=s[y])}return l}function l_(s){sc(s)}function u_(s){console.error(s)}function c_(s){sc(s)}function Rc(s,r){try{var l=s.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function d_(s,r,l){try{var c=s.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Nh(s,r,l){return l=nr(l),l.tag=3,l.payload={element:null},l.callback=function(){Rc(s,r)},l}function f_(s){return s=nr(s),s.tag=3,s}function h_(s,r,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var _=c.value;s.payload=function(){return y(_)},s.callback=function(){d_(r,l,c)}}var C=l.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(s.callback=function(){d_(r,l,c),typeof y!="function"&&(ur===null?ur=new Set([this]):ur.add(this));var w=c.stack;this.componentDidCatch(c.value,{componentStack:w!==null?w:""})})}function fw(s,r,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=l.alternate,r!==null&&na(r,l,y,!0),l=On.current,l!==null){switch(l.tag){case 31:case 13:return ii===null?qc():l.alternate===null&&It===0&&(It=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===pc?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([c]):r.add(c),tp(s,c,y)),!1;case 22:return l.flags|=65536,c===pc?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([c]):l.add(c)),tp(s,c,y)),!1}throw Error(i(435,l.tag))}return tp(s,c,y),qc(),!1}if(Ge)return r=On.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,c!==Qf&&(s=Error(i(422),{cause:c}),_l(Zn(s,l)))):(c!==Qf&&(r=Error(i(423),{cause:c}),_l(Zn(r,l))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,c=Zn(c,l),y=Nh(s.stateNode,c,y),oh(s,y),It!==4&&(It=2)),!1;var _=Error(i(520),{cause:c});if(_=Zn(_,l),Ll===null?Ll=[_]:Ll.push(_),It!==4&&(It=2),r===null)return!0;c=Zn(c,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,s=y&-y,l.lanes|=s,s=Nh(l.stateNode,c,s),oh(l,s),!1;case 1:if(r=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ur===null||!ur.has(_))))return l.flags|=65536,y&=-y,l.lanes|=y,y=f_(y),h_(y,s,l,c),oh(l,y),!1}l=l.return}while(l!==null);return!1}var Mh=Error(i(461)),Lt=!1;function en(s,r,l,c){r.child=s===null?yy(r,null,l,c):mo(r,s.child,l,c)}function p_(s,r,l,c,y){l=l.render;var _=r.ref;if("ref"in c){var C={};for(var w in c)w!=="ref"&&(C[w]=c[w])}else C=c;return co(r),c=fh(s,r,l,C,_,y),w=hh(),s!==null&&!Lt?(ph(s,r,y),ls(s,r,y)):(Ge&&w&&Kf(r),r.flags|=1,en(s,r,c,y),r.child)}function m_(s,r,l,c,y){if(s===null){var _=l.type;return typeof _=="function"&&!Gf(_)&&_.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=_,g_(s,r,_,c,y)):(s=lc(l.type,null,c,r,r.mode,y),s.ref=r.ref,s.return=r,r.child=s)}if(_=s.child,!qh(s,y)){var C=_.memoizedProps;if(l=l.compare,l=l!==null?l:ml,l(C,c)&&s.ref===r.ref)return ls(s,r,y)}return r.flags|=1,s=ns(_,c),s.ref=r.ref,s.return=r,r.child=s}function g_(s,r,l,c,y){if(s!==null){var _=s.memoizedProps;if(ml(_,c)&&s.ref===r.ref)if(Lt=!1,r.pendingProps=c=_,qh(s,y))(s.flags&131072)!==0&&(Lt=!0);else return r.lanes=s.lanes,ls(s,r,y)}return Dh(s,r,l,c,y)}function y_(s,r,l,c){var y=c.children,_=s!==null?s.memoizedState:null;if(s===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(_=_!==null?_.baseLanes|l:l,s!==null){for(c=r.child=s.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~_}else c=0,r.child=null;return __(s,r,_,l,c)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&fc(r,_!==null?_.cachePool:null),_!==null?Ty(r,_):lh(),Ey(r);else return c=r.lanes=536870912,__(s,r,_!==null?_.baseLanes|l:l,l,c)}else _!==null?(fc(r,_.cachePool),Ty(r,_),rr(),r.memoizedState=null):(s!==null&&fc(r,null),lh(),rr());return en(s,r,y,l),r.child}function Nl(s,r){return s!==null&&s.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function __(s,r,l,c,y){var _=nh();return _=_===null?null:{parent:Vt._currentValue,pool:_},r.memoizedState={baseLanes:l,cachePool:_},s!==null&&fc(r,null),lh(),Ey(r),s!==null&&na(s,r,c,!0),r.childLanes=y,null}function bc(s,r){return r=Nc({mode:r.mode,children:r.children},s.mode),r.ref=s.ref,s.child=r,r.return=s,r}function v_(s,r,l){return mo(r,s.child,null,l),s=bc(r,r.pendingProps),s.flags|=2,qn(r),r.memoizedState=null,s}function hw(s,r,l){var c=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,s===null){if(Ge){if(c.mode==="hidden")return s=bc(r,c),r.lanes=536870912,Nl(null,s);if(ch(r),(s=mt)?(s=Mv(s,ni),s=s!==null&&s.data==="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:js!==null?{id:Mi,overflow:Di}:null,retryLane:536870912,hydrationErrors:null},l=ny(s),l.return=r,r.child=l,Xt=r,mt=null)):s=null,s===null)throw Zs(r);return r.lanes=536870912,null}return bc(r,c)}var _=s.memoizedState;if(_!==null){var C=_.dehydrated;if(ch(r),y)if(r.flags&256)r.flags&=-257,r=v_(s,r,l);else if(r.memoizedState!==null)r.child=s.child,r.flags|=128,r=null;else throw Error(i(558));else if(Lt||na(s,r,l,!1),y=(l&s.childLanes)!==0,Lt||y){if(c=dt,c!==null&&(C=Us(c,l),C!==0&&C!==_.retryLane))throw _.retryLane=C,oo(s,C),Rn(c,s,C),Mh;qc(),r=v_(s,r,l)}else s=_.treeContext,mt=si(C.nextSibling),Xt=r,Ge=!0,Xs=null,ni=!1,s!==null&&ry(r,s),r=bc(r,c),r.flags|=4096;return r}return s=ns(s.child,{mode:c.mode,children:c.children}),s.ref=r.ref,r.child=s,s.return=r,s}function xc(s,r){var l=r.ref;if(l===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(r.flags|=4194816)}}function Dh(s,r,l,c,y){return co(r),l=fh(s,r,l,c,void 0,y),c=hh(),s!==null&&!Lt?(ph(s,r,y),ls(s,r,y)):(Ge&&c&&Kf(r),r.flags|=1,en(s,r,l,y),r.child)}function T_(s,r,l,c,y,_){return co(r),r.updateQueue=null,l=Ay(r,c,l,y),Sy(s),c=hh(),s!==null&&!Lt?(ph(s,r,_),ls(s,r,_)):(Ge&&c&&Kf(r),r.flags|=1,en(s,r,l,_),r.child)}function E_(s,r,l,c,y){if(co(r),r.stateNode===null){var _=Xo,C=l.contextType;typeof C=="object"&&C!==null&&(_=Zt(C)),_=new l(c,_),r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=xh,r.stateNode=_,_._reactInternals=r,_=r.stateNode,_.props=c,_.state=r.memoizedState,_.refs={},sh(r),C=l.contextType,_.context=typeof C=="object"&&C!==null?Zt(C):Xo,_.state=r.memoizedState,C=l.getDerivedStateFromProps,typeof C=="function"&&(bh(r,l,C,c),_.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(C=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),C!==_.state&&xh.enqueueReplaceState(_,_.state,null),Il(r,c,_,y),Cl(),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(s===null){_=r.stateNode;var w=r.memoizedProps,U=yo(l,w);_.props=U;var J=_.context,X=l.contextType;C=Xo,typeof X=="object"&&X!==null&&(C=Zt(X));var ne=l.getDerivedStateFromProps;X=typeof ne=="function"||typeof _.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,X||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(w||J!==C)&&a_(r,_,c,C),tr=!1;var K=r.memoizedState;_.state=K,Il(r,c,_,y),Cl(),J=r.memoizedState,w||K!==J||tr?(typeof ne=="function"&&(bh(r,l,ne,c),J=r.memoizedState),(U=tr||o_(r,l,U,c,K,J,C))?(X||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=J),_.props=c,_.state=J,_.context=C,c=U):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{_=r.stateNode,rh(s,r),C=r.memoizedProps,X=yo(l,C),_.props=X,ne=r.pendingProps,K=_.context,J=l.contextType,U=Xo,typeof J=="object"&&J!==null&&(U=Zt(J)),w=l.getDerivedStateFromProps,(J=typeof w=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C!==ne||K!==U)&&a_(r,_,c,U),tr=!1,K=r.memoizedState,_.state=K,Il(r,c,_,y),Cl();var Q=r.memoizedState;C!==ne||K!==Q||tr||s!==null&&s.dependencies!==null&&cc(s.dependencies)?(typeof w=="function"&&(bh(r,l,w,c),Q=r.memoizedState),(X=tr||o_(r,l,X,c,K,Q,U)||s!==null&&s.dependencies!==null&&cc(s.dependencies))?(J||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,Q,U),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,Q,U)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||C===s.memoizedProps&&K===s.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&K===s.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=Q),_.props=c,_.state=Q,_.context=U,c=X):(typeof _.componentDidUpdate!="function"||C===s.memoizedProps&&K===s.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&K===s.memoizedState||(r.flags|=1024),c=!1)}return _=c,xc(s,r),c=(r.flags&128)!==0,_||c?(_=r.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:_.render(),r.flags|=1,s!==null&&c?(r.child=mo(r,s.child,null,y),r.child=mo(r,null,l,y)):en(s,r,l,y),r.memoizedState=_.state,s=r.child):s=ls(s,r,y),s}function S_(s,r,l,c){return lo(),r.flags|=256,en(s,r,l,c),r.child}var kh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ph(s){return{baseLanes:s,cachePool:dy()}}function Vh(s,r,l){return s=s!==null?s.childLanes&~l:0,r&&(s|=Fn),s}function A_(s,r,l){var c=r.pendingProps,y=!1,_=(r.flags&128)!==0,C;if((C=_)||(C=s!==null&&s.memoizedState===null?!1:(xt.current&2)!==0),C&&(y=!0,r.flags&=-129),C=(r.flags&32)!==0,r.flags&=-33,s===null){if(Ge){if(y?sr(r):rr(),(s=mt)?(s=Mv(s,ni),s=s!==null&&s.data!=="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:js!==null?{id:Mi,overflow:Di}:null,retryLane:536870912,hydrationErrors:null},l=ny(s),l.return=r,r.child=l,Xt=r,mt=null)):s=null,s===null)throw Zs(r);return yp(s)?r.lanes=32:r.lanes=536870912,null}var w=c.children;return c=c.fallback,y?(rr(),y=r.mode,w=Nc({mode:"hidden",children:w},y),c=ao(c,y,l,null),w.return=r,c.return=r,w.sibling=c,r.child=w,c=r.child,c.memoizedState=Ph(l),c.childLanes=Vh(s,C,l),r.memoizedState=kh,Nl(null,c)):(sr(r),Uh(r,w))}var U=s.memoizedState;if(U!==null&&(w=U.dehydrated,w!==null)){if(_)r.flags&256?(sr(r),r.flags&=-257,r=Lh(s,r,l)):r.memoizedState!==null?(rr(),r.child=s.child,r.flags|=128,r=null):(rr(),w=c.fallback,y=r.mode,c=Nc({mode:"visible",children:c.children},y),w=ao(w,y,l,null),w.flags|=2,c.return=r,w.return=r,c.sibling=w,r.child=c,mo(r,s.child,null,l),c=r.child,c.memoizedState=Ph(l),c.childLanes=Vh(s,C,l),r.memoizedState=kh,r=Nl(null,c));else if(sr(r),yp(w)){if(C=w.nextSibling&&w.nextSibling.dataset,C)var J=C.dgst;C=J,c=Error(i(419)),c.stack="",c.digest=C,_l({value:c,source:null,stack:null}),r=Lh(s,r,l)}else if(Lt||na(s,r,l,!1),C=(l&s.childLanes)!==0,Lt||C){if(C=dt,C!==null&&(c=Us(C,l),c!==0&&c!==U.retryLane))throw U.retryLane=c,oo(s,c),Rn(C,s,c),Mh;gp(w)||qc(),r=Lh(s,r,l)}else gp(w)?(r.flags|=192,r.child=s.child,r=null):(s=U.treeContext,mt=si(w.nextSibling),Xt=r,Ge=!0,Xs=null,ni=!1,s!==null&&ry(r,s),r=Uh(r,c.children),r.flags|=4096);return r}return y?(rr(),w=c.fallback,y=r.mode,U=s.child,J=U.sibling,c=ns(U,{mode:"hidden",children:c.children}),c.subtreeFlags=U.subtreeFlags&65011712,J!==null?w=ns(J,w):(w=ao(w,y,l,null),w.flags|=2),w.return=r,c.return=r,c.sibling=w,r.child=c,Nl(null,c),c=r.child,w=s.child.memoizedState,w===null?w=Ph(l):(y=w.cachePool,y!==null?(U=Vt._currentValue,y=y.parent!==U?{parent:U,pool:U}:y):y=dy(),w={baseLanes:w.baseLanes|l,cachePool:y}),c.memoizedState=w,c.childLanes=Vh(s,C,l),r.memoizedState=kh,Nl(s.child,c)):(sr(r),l=s.child,s=l.sibling,l=ns(l,{mode:"visible",children:c.children}),l.return=r,l.sibling=null,s!==null&&(C=r.deletions,C===null?(r.deletions=[s],r.flags|=16):C.push(s)),r.child=l,r.memoizedState=null,l)}function Uh(s,r){return r=Nc({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function Nc(s,r){return s=Ln(22,s,null,r),s.lanes=0,s}function Lh(s,r,l){return mo(r,s.child,null,l),s=Uh(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function C_(s,r,l){s.lanes|=r;var c=s.alternate;c!==null&&(c.lanes|=r),Xf(s.return,r,l)}function Oh(s,r,l,c,y,_){var C=s.memoizedState;C===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y,treeForkCount:_}:(C.isBackwards=r,C.rendering=null,C.renderingStartTime=0,C.last=c,C.tail=l,C.tailMode=y,C.treeForkCount=_)}function I_(s,r,l){var c=r.pendingProps,y=c.revealOrder,_=c.tail;c=c.children;var C=xt.current,w=(C&2)!==0;if(w?(C=C&1|2,r.flags|=128):C&=1,oe(xt,C),en(s,r,c,l),c=Ge?yl:0,!w&&s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&C_(s,l,r);else if(s.tag===19)C_(s,l,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(l=r.child,y=null;l!==null;)s=l.alternate,s!==null&&_c(s)===null&&(y=l),l=l.sibling;l=y,l===null?(y=r.child,r.child=null):(y=l.sibling,l.sibling=null),Oh(r,!1,y,l,_,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=r.child,r.child=null;y!==null;){if(s=y.alternate,s!==null&&_c(s)===null){r.child=y;break}s=y.sibling,y.sibling=l,l=y,y=s}Oh(r,!0,l,null,_,c);break;case"together":Oh(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function ls(s,r,l){if(s!==null&&(r.dependencies=s.dependencies),lr|=r.lanes,(l&r.childLanes)===0)if(s!==null){if(na(s,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,l=ns(s,s.pendingProps),r.child=l,l.return=r;s.sibling!==null;)s=s.sibling,l=l.sibling=ns(s,s.pendingProps),l.return=r;l.sibling=null}return r.child}function qh(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&cc(s)))}function pw(s,r,l){switch(r.tag){case 3:kt(r,r.stateNode.containerInfo),er(r,Vt,s.memoizedState.cache),lo();break;case 27:case 5:Jn(r);break;case 4:kt(r,r.stateNode.containerInfo);break;case 10:er(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,ch(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(sr(r),r.flags|=128,null):(l&r.child.childLanes)!==0?A_(s,r,l):(sr(r),s=ls(s,r,l),s!==null?s.sibling:null);sr(r);break;case 19:var y=(s.flags&128)!==0;if(c=(l&r.childLanes)!==0,c||(na(s,r,l,!1),c=(l&r.childLanes)!==0),y){if(c)return I_(s,r,l);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),oe(xt,xt.current),c)break;return null;case 22:return r.lanes=0,y_(s,r,l,r.pendingProps);case 24:er(r,Vt,s.memoizedState.cache)}return ls(s,r,l)}function w_(s,r,l){if(s!==null)if(s.memoizedProps!==r.pendingProps)Lt=!0;else{if(!qh(s,l)&&(r.flags&128)===0)return Lt=!1,pw(s,r,l);Lt=(s.flags&131072)!==0}else Lt=!1,Ge&&(r.flags&1048576)!==0&&sy(r,yl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(s=ho(r.elementType),r.type=s,typeof s=="function")Gf(s)?(c=yo(s,c),r.tag=1,r=E_(null,r,s,c,l)):(r.tag=0,r=Dh(null,r,s,c,l));else{if(s!=null){var y=s.$$typeof;if(y===ie){r.tag=11,r=p_(null,r,s,c,l);break e}else if(y===D){r.tag=14,r=m_(null,r,s,c,l);break e}}throw r=We(s)||s,Error(i(306,r,""))}}return r;case 0:return Dh(s,r,r.type,r.pendingProps,l);case 1:return c=r.type,y=yo(c,r.pendingProps),E_(s,r,c,y,l);case 3:e:{if(kt(r,r.stateNode.containerInfo),s===null)throw Error(i(387));c=r.pendingProps;var _=r.memoizedState;y=_.element,rh(s,r),Il(r,c,null,l);var C=r.memoizedState;if(c=C.cache,er(r,Vt,c),c!==_.cache&&Zf(r,[Vt],l,!0),Cl(),c=C.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:C.cache},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){r=S_(s,r,c,l);break e}else if(c!==y){y=Zn(Error(i(424)),r),_l(y),r=S_(s,r,c,l);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(mt=si(s.firstChild),Xt=r,Ge=!0,Xs=null,ni=!0,l=yy(r,null,c,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(lo(),c===y){r=ls(s,r,l);break e}en(s,r,c,l)}r=r.child}return r;case 26:return xc(s,r),s===null?(l=Lv(r.type,null,r.pendingProps,null))?r.memoizedState=l:Ge||(l=r.type,s=r.pendingProps,c=Yc(Me.current).createElement(l),c[St]=r,c[jt]=s,tn(c,l,s),bt(c),r.stateNode=c):r.memoizedState=Lv(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return Jn(r),s===null&&Ge&&(c=r.stateNode=Pv(r.type,r.pendingProps,Me.current),Xt=r,ni=!0,y=mt,hr(r.type)?(_p=y,mt=si(c.firstChild)):mt=y),en(s,r,r.pendingProps.children,l),xc(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&Ge&&((y=c=mt)&&(c=Gw(c,r.type,r.pendingProps,ni),c!==null?(r.stateNode=c,Xt=r,mt=si(c.firstChild),ni=!1,y=!0):y=!1),y||Zs(r)),Jn(r),y=r.type,_=r.pendingProps,C=s!==null?s.memoizedProps:null,c=_.children,hp(y,_)?c=null:C!==null&&hp(y,C)&&(r.flags|=32),r.memoizedState!==null&&(y=fh(s,r,rw,null,null,l),Jl._currentValue=y),xc(s,r),en(s,r,c,l),r.child;case 6:return s===null&&Ge&&((s=l=mt)&&(l=Jw(l,r.pendingProps,ni),l!==null?(r.stateNode=l,Xt=r,mt=null,s=!0):s=!1),s||Zs(r)),null;case 13:return A_(s,r,l);case 4:return kt(r,r.stateNode.containerInfo),c=r.pendingProps,s===null?r.child=mo(r,null,c,l):en(s,r,c,l),r.child;case 11:return p_(s,r,r.type,r.pendingProps,l);case 7:return en(s,r,r.pendingProps,l),r.child;case 8:return en(s,r,r.pendingProps.children,l),r.child;case 12:return en(s,r,r.pendingProps.children,l),r.child;case 10:return c=r.pendingProps,er(r,r.type,c.value),en(s,r,c.children,l),r.child;case 9:return y=r.type._context,c=r.pendingProps.children,co(r),y=Zt(y),c=c(y),r.flags|=1,en(s,r,c,l),r.child;case 14:return m_(s,r,r.type,r.pendingProps,l);case 15:return g_(s,r,r.type,r.pendingProps,l);case 19:return I_(s,r,l);case 31:return hw(s,r,l);case 22:return y_(s,r,l,r.pendingProps);case 24:return co(r),c=Zt(Vt),s===null?(y=nh(),y===null&&(y=dt,_=eh(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=l),y=_),r.memoizedState={parent:c,cache:y},sh(r),er(r,Vt,y)):((s.lanes&l)!==0&&(rh(s,r),Il(r,null,null,l),Cl()),y=s.memoizedState,_=r.memoizedState,y.parent!==c?(y={parent:c,cache:c},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),er(r,Vt,c)):(c=_.cache,er(r,Vt,c),c!==y.cache&&Zf(r,[Vt],l,!0))),en(s,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function us(s){s.flags|=4}function Bh(s,r,l,c,y){if((r=(s.mode&32)!==0)&&(r=!1),r){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(Z_())s.flags|=8192;else throw po=pc,ih}else s.flags&=-16777217}function R_(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!zv(r))if(Z_())s.flags|=8192;else throw po=pc,ih}function Mc(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?ja():536870912,s.lanes|=r,pa|=r)}function Ml(s,r){if(!Ge)switch(s.tailMode){case"hidden":r=s.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function gt(s){var r=s.alternate!==null&&s.alternate.child===s.child,l=0,c=0;if(r)for(var y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=c,s.childLanes=l,r}function mw(s,r,l){var c=r.pendingProps;switch($f(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(r),null;case 1:return gt(r),null;case 3:return l=r.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),rs(Vt),ft(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(ta(r)?us(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Wf())),gt(r),null;case 26:var y=r.type,_=r.memoizedState;return s===null?(us(r),_!==null?(gt(r),R_(r,_)):(gt(r),Bh(r,y,null,c,l))):_?_!==s.memoizedState?(us(r),gt(r),R_(r,_)):(gt(r),r.flags&=-16777217):(s=s.memoizedProps,s!==c&&us(r),gt(r),Bh(r,y,s,c,l)),null;case 27:if(ui(r),l=Me.current,y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&us(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return gt(r),null}s=he.current,ta(r)?oy(r):(s=Pv(y,c,l),r.stateNode=s,us(r))}return gt(r),null;case 5:if(ui(r),y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&us(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return gt(r),null}if(_=he.current,ta(r))oy(r);else{var C=Yc(Me.current);switch(_){case 1:_=C.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=C.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=C.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof c.is=="string"?C.createElement("select",{is:c.is}):C.createElement("select"),c.multiple?_.multiple=!0:c.size&&(_.size=c.size);break;default:_=typeof c.is=="string"?C.createElement(y,{is:c.is}):C.createElement(y)}}_[St]=r,_[jt]=c;e:for(C=r.child;C!==null;){if(C.tag===5||C.tag===6)_.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===r)break e;for(;C.sibling===null;){if(C.return===null||C.return===r)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}r.stateNode=_;e:switch(tn(_,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&us(r)}}return gt(r),Bh(r,r.type,s===null?null:s.memoizedProps,r.pendingProps,l),null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==c&&us(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(s=Me.current,ta(r)){if(s=r.stateNode,l=r.memoizedProps,c=null,y=Xt,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}s[St]=r,s=!!(s.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||Av(s.nodeValue,l)),s||Zs(r,!0)}else s=Yc(s).createTextNode(c),s[St]=r,r.stateNode=s}return gt(r),null;case 31:if(l=r.memoizedState,s===null||s.memoizedState!==null){if(c=ta(r),l!==null){if(s===null){if(!c)throw Error(i(318));if(s=r.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[St]=r}else lo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;gt(r),s=!1}else l=Wf(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return r.flags&256?(qn(r),r):(qn(r),null);if((r.flags&128)!==0)throw Error(i(558))}return gt(r),null;case 13:if(c=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=ta(r),c!==null&&c.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[St]=r}else lo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;gt(r),y=!1}else y=Wf(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(qn(r),r):(qn(r),null)}return qn(r),(r.flags&128)!==0?(r.lanes=l,r):(l=c!==null,s=s!==null&&s.memoizedState!==null,l&&(c=r.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),_=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==y&&(c.flags|=2048)),l!==s&&l&&(r.child.flags|=8192),Mc(r,r.updateQueue),gt(r),null);case 4:return ft(),s===null&&lp(r.stateNode.containerInfo),gt(r),null;case 10:return rs(r.type),gt(r),null;case 19:if(Z(xt),c=r.memoizedState,c===null)return gt(r),null;if(y=(r.flags&128)!==0,_=c.rendering,_===null)if(y)Ml(c,!1);else{if(It!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(_=_c(s),_!==null){for(r.flags|=128,Ml(c,!1),s=_.updateQueue,r.updateQueue=s,Mc(r,s),r.subtreeFlags=0,s=l,l=r.child;l!==null;)ty(l,s),l=l.sibling;return oe(xt,xt.current&1|2),Ge&&is(r,c.treeForkCount),r.child}s=s.sibling}c.tail!==null&&Qe()>Uc&&(r.flags|=128,y=!0,Ml(c,!1),r.lanes=4194304)}else{if(!y)if(s=_c(_),s!==null){if(r.flags|=128,y=!0,s=s.updateQueue,r.updateQueue=s,Mc(r,s),Ml(c,!0),c.tail===null&&c.tailMode==="hidden"&&!_.alternate&&!Ge)return gt(r),null}else 2*Qe()-c.renderingStartTime>Uc&&l!==536870912&&(r.flags|=128,y=!0,Ml(c,!1),r.lanes=4194304);c.isBackwards?(_.sibling=r.child,r.child=_):(s=c.last,s!==null?s.sibling=_:r.child=_,c.last=_)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=Qe(),s.sibling=null,l=xt.current,oe(xt,y?l&1|2:l&1),Ge&&is(r,c.treeForkCount),s):(gt(r),null);case 22:case 23:return qn(r),uh(),c=r.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(l&536870912)!==0&&(r.flags&128)===0&&(gt(r),r.subtreeFlags&6&&(r.flags|=8192)):gt(r),l=r.updateQueue,l!==null&&Mc(r,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==l&&(r.flags|=2048),s!==null&&Z(fo),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),rs(Vt),gt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function gw(s,r){switch($f(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return rs(Vt),ft(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return ui(r),null;case 31:if(r.memoizedState!==null){if(qn(r),r.alternate===null)throw Error(i(340));lo()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 13:if(qn(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));lo()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return Z(xt),null;case 4:return ft(),null;case 10:return rs(r.type),null;case 22:case 23:return qn(r),uh(),s!==null&&Z(fo),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return rs(Vt),null;case 25:return null;default:return null}}function b_(s,r){switch($f(r),r.tag){case 3:rs(Vt),ft();break;case 26:case 27:case 5:ui(r);break;case 4:ft();break;case 31:r.memoizedState!==null&&qn(r);break;case 13:qn(r);break;case 19:Z(xt);break;case 10:rs(r.type);break;case 22:case 23:qn(r),uh(),s!==null&&Z(fo);break;case 24:rs(Vt)}}function Dl(s,r){try{var l=r.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&s)===s){c=void 0;var _=l.create,C=l.inst;c=_(),C.destroy=c}l=l.next}while(l!==y)}}catch(w){at(r,r.return,w)}}function or(s,r,l){try{var c=r.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var _=y.next;c=_;do{if((c.tag&s)===s){var C=c.inst,w=C.destroy;if(w!==void 0){C.destroy=void 0,y=r;var U=l,J=w;try{J()}catch(X){at(y,U,X)}}}c=c.next}while(c!==_)}}catch(X){at(r,r.return,X)}}function x_(s){var r=s.updateQueue;if(r!==null){var l=s.stateNode;try{vy(r,l)}catch(c){at(s,s.return,c)}}}function N_(s,r,l){l.props=yo(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(c){at(s,r,c)}}function kl(s,r){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof l=="function"?s.refCleanup=l(c):l.current=c}}catch(y){at(s,r,y)}}function ki(s,r){var l=s.ref,c=s.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){at(s,r,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){at(s,r,y)}else l.current=null}function M_(s){var r=s.type,l=s.memoizedProps,c=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){at(s,s.return,y)}}function Fh(s,r,l){try{var c=s.stateNode;Ow(c,s.type,l,r),c[jt]=r}catch(y){at(s,s.return,y)}}function D_(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&hr(s.type)||s.tag===4}function zh(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||D_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&hr(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Hh(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(s),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=Gt));else if(c!==4&&(c===27&&hr(s.type)&&(l=s.stateNode,r=null),s=s.child,s!==null))for(Hh(s,r,l),s=s.sibling;s!==null;)Hh(s,r,l),s=s.sibling}function Dc(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?l.insertBefore(s,r):l.appendChild(s);else if(c!==4&&(c===27&&hr(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Dc(s,r,l),s=s.sibling;s!==null;)Dc(s,r,l),s=s.sibling}function k_(s){var r=s.stateNode,l=s.memoizedProps;try{for(var c=s.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);tn(r,c,l),r[St]=s,r[jt]=l}catch(_){at(s,s.return,_)}}var cs=!1,Ot=!1,Gh=!1,P_=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function yw(s,r){if(s=s.containerInfo,dp=Zc,s=Yg(s),Lf(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var C=0,w=-1,U=-1,J=0,X=0,ne=s,K=null;t:for(;;){for(var Q;ne!==l||y!==0&&ne.nodeType!==3||(w=C+y),ne!==_||c!==0&&ne.nodeType!==3||(U=C+c),ne.nodeType===3&&(C+=ne.nodeValue.length),(Q=ne.firstChild)!==null;)K=ne,ne=Q;for(;;){if(ne===s)break t;if(K===l&&++J===y&&(w=C),K===_&&++X===c&&(U=C),(Q=ne.nextSibling)!==null)break;ne=K,K=ne.parentNode}ne=Q}l=w===-1||U===-1?null:{start:w,end:U}}else l=null}l=l||{start:0,end:0}}else l=null;for(fp={focusedElem:s,selectionRange:l},Zc=!1,Kt=r;Kt!==null;)if(r=Kt,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,Kt=s;else for(;Kt!==null;){switch(r=Kt,_=r.alternate,s=r.flags,r.tag){case 0:if((s&4)!==0&&(s=r.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)y=s[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&_!==null){s=void 0,l=r,y=_.memoizedProps,_=_.memoizedState,c=l.stateNode;try{var me=yo(l.type,y);s=c.getSnapshotBeforeUpdate(me,_),c.__reactInternalSnapshotBeforeUpdate=s}catch(Se){at(l,l.return,Se)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,l=s.nodeType,l===9)mp(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":mp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,Kt=s;break}Kt=r.return}}function V_(s,r,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:fs(s,l),c&4&&Dl(5,l);break;case 1:if(fs(s,l),c&4)if(s=l.stateNode,r===null)try{s.componentDidMount()}catch(C){at(l,l.return,C)}else{var y=yo(l.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(y,r,s.__reactInternalSnapshotBeforeUpdate)}catch(C){at(l,l.return,C)}}c&64&&x_(l),c&512&&kl(l,l.return);break;case 3:if(fs(s,l),c&64&&(s=l.updateQueue,s!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{vy(s,r)}catch(C){at(l,l.return,C)}}break;case 27:r===null&&c&4&&k_(l);case 26:case 5:fs(s,l),r===null&&c&4&&M_(l),c&512&&kl(l,l.return);break;case 12:fs(s,l);break;case 31:fs(s,l),c&4&&O_(s,l);break;case 13:fs(s,l),c&4&&q_(s,l),c&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=ww.bind(null,l),Yw(s,l))));break;case 22:if(c=l.memoizedState!==null||cs,!c){r=r!==null&&r.memoizedState!==null||Ot,y=cs;var _=Ot;cs=c,(Ot=r)&&!_?hs(s,l,(l.subtreeFlags&8772)!==0):fs(s,l),cs=y,Ot=_}break;case 30:break;default:fs(s,l)}}function U_(s){var r=s.alternate;r!==null&&(s.alternate=null,U_(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&$r(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Tt=null,An=!1;function ds(s,r,l){for(l=l.child;l!==null;)L_(s,r,l),l=l.sibling}function L_(s,r,l){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(Ms,l)}catch{}switch(l.tag){case 26:Ot||ki(l,r),ds(s,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Ot||ki(l,r);var c=Tt,y=An;hr(l.type)&&(Tt=l.stateNode,An=!1),ds(s,r,l),zl(l.stateNode),Tt=c,An=y;break;case 5:Ot||ki(l,r);case 6:if(c=Tt,y=An,Tt=null,ds(s,r,l),Tt=c,An=y,Tt!==null)if(An)try{(Tt.nodeType===9?Tt.body:Tt.nodeName==="HTML"?Tt.ownerDocument.body:Tt).removeChild(l.stateNode)}catch(_){at(l,r,_)}else try{Tt.removeChild(l.stateNode)}catch(_){at(l,r,_)}break;case 18:Tt!==null&&(An?(s=Tt,xv(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),Sa(s)):xv(Tt,l.stateNode));break;case 4:c=Tt,y=An,Tt=l.stateNode.containerInfo,An=!0,ds(s,r,l),Tt=c,An=y;break;case 0:case 11:case 14:case 15:or(2,l,r),Ot||or(4,l,r),ds(s,r,l);break;case 1:Ot||(ki(l,r),c=l.stateNode,typeof c.componentWillUnmount=="function"&&N_(l,r,c)),ds(s,r,l);break;case 21:ds(s,r,l);break;case 22:Ot=(c=Ot)||l.memoizedState!==null,ds(s,r,l),Ot=c;break;default:ds(s,r,l)}}function O_(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Sa(s)}catch(l){at(r,r.return,l)}}}function q_(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Sa(s)}catch(l){at(r,r.return,l)}}function _w(s){switch(s.tag){case 31:case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new P_),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new P_),r;default:throw Error(i(435,s.tag))}}function kc(s,r){var l=_w(s);r.forEach(function(c){if(!l.has(c)){l.add(c);var y=Rw.bind(null,s,c);c.then(y,y)}})}function Cn(s,r){var l=r.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],_=s,C=r,w=C;e:for(;w!==null;){switch(w.tag){case 27:if(hr(w.type)){Tt=w.stateNode,An=!1;break e}break;case 5:Tt=w.stateNode,An=!1;break e;case 3:case 4:Tt=w.stateNode.containerInfo,An=!0;break e}w=w.return}if(Tt===null)throw Error(i(160));L_(_,C,y),Tt=null,An=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)B_(r,s),r=r.sibling}var mi=null;function B_(s,r){var l=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Cn(r,s),In(s),c&4&&(or(3,s,s.return),Dl(3,s),or(5,s,s.return));break;case 1:Cn(r,s),In(s),c&512&&(Ot||l===null||ki(l,l.return)),c&64&&cs&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=mi;if(Cn(r,s),In(s),c&512&&(Ot||l===null||ki(l,l.return)),c&4){var _=l!==null?l.memoizedState:null;if(c=s.memoizedState,l===null)if(c===null)if(s.stateNode===null){e:{c=s.type,l=s.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":_=y.getElementsByTagName("title")[0],(!_||_[$i]||_[St]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(c),y.head.insertBefore(_,y.querySelector("head > title"))),tn(_,c,l),_[St]=s,bt(_),c=_;break e;case"link":var C=Bv("link","href",y).get(c+(l.href||""));if(C){for(var w=0;w<C.length;w++)if(_=C[w],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){C.splice(w,1);break t}}_=y.createElement(c),tn(_,c,l),y.head.appendChild(_);break;case"meta":if(C=Bv("meta","content",y).get(c+(l.content||""))){for(w=0;w<C.length;w++)if(_=C[w],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){C.splice(w,1);break t}}_=y.createElement(c),tn(_,c,l),y.head.appendChild(_);break;default:throw Error(i(468,c))}_[St]=s,bt(_),c=_}s.stateNode=c}else Fv(y,s.type,s.stateNode);else s.stateNode=qv(y,c,s.memoizedProps);else _!==c?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,c===null?Fv(y,s.type,s.stateNode):qv(y,c,s.memoizedProps)):c===null&&s.stateNode!==null&&Fh(s,s.memoizedProps,l.memoizedProps)}break;case 27:Cn(r,s),In(s),c&512&&(Ot||l===null||ki(l,l.return)),l!==null&&c&4&&Fh(s,s.memoizedProps,l.memoizedProps);break;case 5:if(Cn(r,s),In(s),c&512&&(Ot||l===null||ki(l,l.return)),s.flags&32){y=s.stateNode;try{jn(y,"")}catch(me){at(s,s.return,me)}}c&4&&s.stateNode!=null&&(y=s.memoizedProps,Fh(s,y,l!==null?l.memoizedProps:y)),c&1024&&(Gh=!0);break;case 6:if(Cn(r,s),In(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,l=s.stateNode;try{l.nodeValue=c}catch(me){at(s,s.return,me)}}break;case 3:if(Qc=null,y=mi,mi=Kc(r.containerInfo),Cn(r,s),mi=y,In(s),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Sa(r.containerInfo)}catch(me){at(s,s.return,me)}Gh&&(Gh=!1,F_(s));break;case 4:c=mi,mi=Kc(s.stateNode.containerInfo),Cn(r,s),In(s),mi=c;break;case 12:Cn(r,s),In(s);break;case 31:Cn(r,s),In(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,kc(s,c)));break;case 13:Cn(r,s),In(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Vc=Qe()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,kc(s,c)));break;case 22:y=s.memoizedState!==null;var U=l!==null&&l.memoizedState!==null,J=cs,X=Ot;if(cs=J||y,Ot=X||U,Cn(r,s),Ot=X,cs=J,In(s),c&8192)e:for(r=s.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(l===null||U||cs||Ot||_o(s)),l=null,r=s;;){if(r.tag===5||r.tag===26){if(l===null){U=l=r;try{if(_=U.stateNode,y)C=_.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{w=U.stateNode;var ne=U.memoizedProps.style,K=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;w.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(me){at(U,U.return,me)}}}else if(r.tag===6){if(l===null){U=r;try{U.stateNode.nodeValue=y?"":U.memoizedProps}catch(me){at(U,U.return,me)}}}else if(r.tag===18){if(l===null){U=r;try{var Q=U.stateNode;y?Nv(Q,!0):Nv(U.stateNode,!1)}catch(me){at(U,U.return,me)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=s.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,kc(s,l))));break;case 19:Cn(r,s),In(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,kc(s,c)));break;case 30:break;case 21:break;default:Cn(r,s),In(s)}}function In(s){var r=s.flags;if(r&2){try{for(var l,c=s.return;c!==null;){if(D_(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,_=zh(s);Dc(s,_,y);break;case 5:var C=l.stateNode;l.flags&32&&(jn(C,""),l.flags&=-33);var w=zh(s);Dc(s,w,C);break;case 3:case 4:var U=l.stateNode.containerInfo,J=zh(s);Hh(s,J,U);break;default:throw Error(i(161))}}catch(X){at(s,s.return,X)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function F_(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;F_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function fs(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)V_(s,r.alternate,r),r=r.sibling}function _o(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:or(4,r,r.return),_o(r);break;case 1:ki(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&N_(r,r.return,l),_o(r);break;case 27:zl(r.stateNode);case 26:case 5:ki(r,r.return),_o(r);break;case 22:r.memoizedState===null&&_o(r);break;case 30:_o(r);break;default:_o(r)}s=s.sibling}}function hs(s,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,y=s,_=r,C=_.flags;switch(_.tag){case 0:case 11:case 15:hs(y,_,l),Dl(4,_);break;case 1:if(hs(y,_,l),c=_,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(J){at(c,c.return,J)}if(c=_,y=c.updateQueue,y!==null){var w=c.stateNode;try{var U=y.shared.hiddenCallbacks;if(U!==null)for(y.shared.hiddenCallbacks=null,y=0;y<U.length;y++)_y(U[y],w)}catch(J){at(c,c.return,J)}}l&&C&64&&x_(_),kl(_,_.return);break;case 27:k_(_);case 26:case 5:hs(y,_,l),l&&c===null&&C&4&&M_(_),kl(_,_.return);break;case 12:hs(y,_,l);break;case 31:hs(y,_,l),l&&C&4&&O_(y,_);break;case 13:hs(y,_,l),l&&C&4&&q_(y,_);break;case 22:_.memoizedState===null&&hs(y,_,l),kl(_,_.return);break;case 30:break;default:hs(y,_,l)}r=r.sibling}}function Jh(s,r){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&vl(l))}function Yh(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&vl(s))}function gi(s,r,l,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)z_(s,r,l,c),r=r.sibling}function z_(s,r,l,c){var y=r.flags;switch(r.tag){case 0:case 11:case 15:gi(s,r,l,c),y&2048&&Dl(9,r);break;case 1:gi(s,r,l,c);break;case 3:gi(s,r,l,c),y&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&vl(s)));break;case 12:if(y&2048){gi(s,r,l,c),s=r.stateNode;try{var _=r.memoizedProps,C=_.id,w=_.onPostCommit;typeof w=="function"&&w(C,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(U){at(r,r.return,U)}}else gi(s,r,l,c);break;case 31:gi(s,r,l,c);break;case 13:gi(s,r,l,c);break;case 23:break;case 22:_=r.stateNode,C=r.alternate,r.memoizedState!==null?_._visibility&2?gi(s,r,l,c):Pl(s,r):_._visibility&2?gi(s,r,l,c):(_._visibility|=2,da(s,r,l,c,(r.subtreeFlags&10256)!==0||!1)),y&2048&&Jh(C,r);break;case 24:gi(s,r,l,c),y&2048&&Yh(r.alternate,r);break;default:gi(s,r,l,c)}}function da(s,r,l,c,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var _=s,C=r,w=l,U=c,J=C.flags;switch(C.tag){case 0:case 11:case 15:da(_,C,w,U,y),Dl(8,C);break;case 23:break;case 22:var X=C.stateNode;C.memoizedState!==null?X._visibility&2?da(_,C,w,U,y):Pl(_,C):(X._visibility|=2,da(_,C,w,U,y)),y&&J&2048&&Jh(C.alternate,C);break;case 24:da(_,C,w,U,y),y&&J&2048&&Yh(C.alternate,C);break;default:da(_,C,w,U,y)}r=r.sibling}}function Pl(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=s,c=r,y=c.flags;switch(c.tag){case 22:Pl(l,c),y&2048&&Jh(c.alternate,c);break;case 24:Pl(l,c),y&2048&&Yh(c.alternate,c);break;default:Pl(l,c)}r=r.sibling}}var Vl=8192;function fa(s,r,l){if(s.subtreeFlags&Vl)for(s=s.child;s!==null;)H_(s,r,l),s=s.sibling}function H_(s,r,l){switch(s.tag){case 26:fa(s,r,l),s.flags&Vl&&s.memoizedState!==null&&sR(l,mi,s.memoizedState,s.memoizedProps);break;case 5:fa(s,r,l);break;case 3:case 4:var c=mi;mi=Kc(s.stateNode.containerInfo),fa(s,r,l),mi=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=Vl,Vl=16777216,fa(s,r,l),Vl=c):fa(s,r,l));break;default:fa(s,r,l)}}function G_(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function Ul(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];Kt=c,Y_(c,s)}G_(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)J_(s),s=s.sibling}function J_(s){switch(s.tag){case 0:case 11:case 15:Ul(s),s.flags&2048&&or(9,s,s.return);break;case 3:Ul(s);break;case 12:Ul(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,Pc(s)):Ul(s);break;default:Ul(s)}}function Pc(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];Kt=c,Y_(c,s)}G_(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:or(8,r,r.return),Pc(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,Pc(r));break;default:Pc(r)}s=s.sibling}}function Y_(s,r){for(;Kt!==null;){var l=Kt;switch(l.tag){case 0:case 11:case 15:or(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:vl(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Kt=c;else e:for(l=s;Kt!==null;){c=Kt;var y=c.sibling,_=c.return;if(U_(c),c===l){Kt=null;break e}if(y!==null){y.return=_,Kt=y;break e}Kt=_}}}var vw={getCacheForType:function(s){var r=Zt(Vt),l=r.data.get(s);return l===void 0&&(l=s(),r.data.set(s,l)),l},cacheSignal:function(){return Zt(Vt).controller.signal}},Tw=typeof WeakMap=="function"?WeakMap:Map,tt=0,dt=null,Oe=null,Be=0,ot=0,Bn=null,ar=!1,ha=!1,Kh=!1,ps=0,It=0,lr=0,vo=0,$h=0,Fn=0,pa=0,Ll=null,wn=null,Qh=!1,Vc=0,K_=0,Uc=1/0,Lc=null,ur=null,Ft=0,cr=null,ma=null,ms=0,Wh=0,jh=null,$_=null,Ol=0,Xh=null;function zn(){return(tt&2)!==0&&Be!==0?Be&-Be:$.T!==null?sp():Ki()}function Q_(){if(Fn===0)if((Be&536870912)===0||Ge){var s=Ai;Ai<<=1,(Ai&3932160)===0&&(Ai=262144),Fn=s}else Fn=536870912;return s=On.current,s!==null&&(s.flags|=32),Fn}function Rn(s,r,l){(s===dt&&(ot===2||ot===9)||s.cancelPendingCommit!==null)&&(ga(s,0),dr(s,Be,Fn,!1)),Ps(s,l),((tt&2)===0||s!==dt)&&(s===dt&&((tt&2)===0&&(vo|=l),It===4&&dr(s,Be,Fn,!1)),Pi(s))}function W_(s,r,l){if((tt&6)!==0)throw Error(i(327));var c=!l&&(r&127)===0&&(r&s.expiredLanes)===0||ks(s,r),y=c?Aw(s,r):ep(s,r,!0),_=c;do{if(y===0){ha&&!c&&dr(s,r,0,!1);break}else{if(l=s.current.alternate,_&&!Ew(l)){y=ep(s,r,!1),_=!1;continue}if(y===2){if(_=r,s.errorRecoveryDisabledLanes&_)var C=0;else C=s.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){r=C;e:{var w=s;y=Ll;var U=w.current.memoizedState.isDehydrated;if(U&&(ga(w,C).flags|=256),C=ep(w,C,!1),C!==2){if(Kh&&!U){w.errorRecoveryDisabledLanes|=_,vo|=_,y=4;break e}_=wn,wn=y,_!==null&&(wn===null?wn=_:wn.push.apply(wn,_))}y=C}if(_=!1,y!==2)continue}}if(y===1){ga(s,0),dr(s,r,0,!0);break}e:{switch(c=s,_=y,_){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:dr(c,r,Fn,!ar);break e;case 2:wn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(y=Vc+300-Qe(),10<y)){if(dr(c,r,Fn,!ar),Qn(c,0,!0)!==0)break e;ms=r,c.timeoutHandle=Rv(j_.bind(null,c,l,wn,Lc,Qh,r,Fn,vo,pa,ar,_,"Throttled",-0,0),y);break e}j_(c,l,wn,Lc,Qh,r,Fn,vo,pa,ar,_,null,-0,0)}}break}while(!0);Pi(s)}function j_(s,r,l,c,y,_,C,w,U,J,X,ne,K,Q){if(s.timeoutHandle=-1,ne=r.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Gt},H_(r,_,ne);var me=(_&62914560)===_?Vc-Qe():(_&4194048)===_?K_-Qe():0;if(me=rR(ne,me),me!==null){ms=_,s.cancelPendingCommit=me(rv.bind(null,s,r,_,l,c,y,C,w,U,X,ne,null,K,Q)),dr(s,_,C,!J);return}}rv(s,r,_,l,c,y,C,w,U)}function Ew(s){for(var r=s;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],_=y.getSnapshot;y=y.value;try{if(!Un(_(),y))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function dr(s,r,l,c){r&=~$h,r&=~vo,s.suspendedLanes|=r,s.pingedLanes&=~r,c&&(s.warmLanes|=r),c=s.expirationTimes;for(var y=r;0<y;){var _=31-pn(y),C=1<<_;c[_]=-1,y&=~C}l!==0&&Xa(s,l,r)}function Oc(){return(tt&6)===0?(ql(0),!1):!0}function Zh(){if(Oe!==null){if(ot===0)var s=Oe.return;else s=Oe,ss=uo=null,mh(s),oa=null,El=0,s=Oe;for(;s!==null;)b_(s.alternate,s),s=s.return;Oe=null}}function ga(s,r){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,Fw(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),ms=0,Zh(),dt=s,Oe=l=ns(s.current,null),Be=r,ot=0,Bn=null,ar=!1,ha=ks(s,r),Kh=!1,pa=Fn=$h=vo=lr=It=0,wn=Ll=null,Qh=!1,(r&8)!==0&&(r|=r&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=r;0<c;){var y=31-pn(c),_=1<<y;r|=s[y],c&=~_}return ps=r,rc(),l}function X_(s,r){De=null,$.H=xl,r===ra||r===hc?(r=py(),ot=3):r===ih?(r=py(),ot=4):ot=r===Mh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Bn=r,Oe===null&&(It=1,Rc(s,Zn(r,s.current)))}function Z_(){var s=On.current;return s===null?!0:(Be&4194048)===Be?ii===null:(Be&62914560)===Be||(Be&536870912)!==0?s===ii:!1}function ev(){var s=$.H;return $.H=xl,s===null?xl:s}function tv(){var s=$.A;return $.A=vw,s}function qc(){It=4,ar||(Be&4194048)!==Be&&On.current!==null||(ha=!0),(lr&134217727)===0&&(vo&134217727)===0||dt===null||dr(dt,Be,Fn,!1)}function ep(s,r,l){var c=tt;tt|=2;var y=ev(),_=tv();(dt!==s||Be!==r)&&(Lc=null,ga(s,r)),r=!1;var C=It;e:do try{if(ot!==0&&Oe!==null){var w=Oe,U=Bn;switch(ot){case 8:Zh(),C=6;break e;case 3:case 2:case 9:case 6:On.current===null&&(r=!0);var J=ot;if(ot=0,Bn=null,ya(s,w,U,J),l&&ha){C=0;break e}break;default:J=ot,ot=0,Bn=null,ya(s,w,U,J)}}Sw(),C=It;break}catch(X){X_(s,X)}while(!0);return r&&s.shellSuspendCounter++,ss=uo=null,tt=c,$.H=y,$.A=_,Oe===null&&(dt=null,Be=0,rc()),C}function Sw(){for(;Oe!==null;)nv(Oe)}function Aw(s,r){var l=tt;tt|=2;var c=ev(),y=tv();dt!==s||Be!==r?(Lc=null,Uc=Qe()+500,ga(s,r)):ha=ks(s,r);e:do try{if(ot!==0&&Oe!==null){r=Oe;var _=Bn;t:switch(ot){case 1:ot=0,Bn=null,ya(s,r,_,1);break;case 2:case 9:if(fy(_)){ot=0,Bn=null,iv(r);break}r=function(){ot!==2&&ot!==9||dt!==s||(ot=7),Pi(s)},_.then(r,r);break e;case 3:ot=7;break e;case 4:ot=5;break e;case 7:fy(_)?(ot=0,Bn=null,iv(r)):(ot=0,Bn=null,ya(s,r,_,7));break;case 5:var C=null;switch(Oe.tag){case 26:C=Oe.memoizedState;case 5:case 27:var w=Oe;if(C?zv(C):w.stateNode.complete){ot=0,Bn=null;var U=w.sibling;if(U!==null)Oe=U;else{var J=w.return;J!==null?(Oe=J,Bc(J)):Oe=null}break t}}ot=0,Bn=null,ya(s,r,_,5);break;case 6:ot=0,Bn=null,ya(s,r,_,6);break;case 8:Zh(),It=6;break e;default:throw Error(i(462))}}Cw();break}catch(X){X_(s,X)}while(!0);return ss=uo=null,$.H=c,$.A=y,tt=l,Oe!==null?0:(dt=null,Be=0,rc(),It)}function Cw(){for(;Oe!==null&&!Ne();)nv(Oe)}function nv(s){var r=w_(s.alternate,s,ps);s.memoizedProps=s.pendingProps,r===null?Bc(s):Oe=r}function iv(s){var r=s,l=r.alternate;switch(r.tag){case 15:case 0:r=T_(l,r,r.pendingProps,r.type,void 0,Be);break;case 11:r=T_(l,r,r.pendingProps,r.type.render,r.ref,Be);break;case 5:mh(r);default:b_(l,r),r=Oe=ty(r,ps),r=w_(l,r,ps)}s.memoizedProps=s.pendingProps,r===null?Bc(s):Oe=r}function ya(s,r,l,c){ss=uo=null,mh(r),oa=null,El=0;var y=r.return;try{if(fw(s,y,r,l,Be)){It=1,Rc(s,Zn(l,s.current)),Oe=null;return}}catch(_){if(y!==null)throw Oe=y,_;It=1,Rc(s,Zn(l,s.current)),Oe=null;return}r.flags&32768?(Ge||c===1?s=!0:ha||(Be&536870912)!==0?s=!1:(ar=s=!0,(c===2||c===9||c===3||c===6)&&(c=On.current,c!==null&&c.tag===13&&(c.flags|=16384))),sv(r,s)):Bc(r)}function Bc(s){var r=s;do{if((r.flags&32768)!==0){sv(r,ar);return}s=r.return;var l=mw(r.alternate,r,ps);if(l!==null){Oe=l;return}if(r=r.sibling,r!==null){Oe=r;return}Oe=r=s}while(r!==null);It===0&&(It=5)}function sv(s,r){do{var l=gw(s.alternate,s);if(l!==null){l.flags&=32767,Oe=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(s=s.sibling,s!==null)){Oe=s;return}Oe=s=l}while(s!==null);It=6,Oe=null}function rv(s,r,l,c,y,_,C,w,U){s.cancelPendingCommit=null;do Fc();while(Ft!==0);if((tt&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(_=r.lanes|r.childLanes,_|=zf,Wt(s,l,_,C,w,U),s===dt&&(Oe=dt=null,Be=0),ma=r,cr=s,ms=l,Wh=_,jh=y,$_=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,bw(ht,function(){return cv(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=$.T,$.T=null,y=ae.p,ae.p=2,C=tt,tt|=4;try{yw(s,r,l)}finally{tt=C,ae.p=y,$.T=c}}Ft=1,ov(),av(),lv()}}function ov(){if(Ft===1){Ft=0;var s=cr,r=ma,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=$.T,$.T=null;var c=ae.p;ae.p=2;var y=tt;tt|=4;try{B_(r,s);var _=fp,C=Yg(s.containerInfo),w=_.focusedElem,U=_.selectionRange;if(C!==w&&w&&w.ownerDocument&&Jg(w.ownerDocument.documentElement,w)){if(U!==null&&Lf(w)){var J=U.start,X=U.end;if(X===void 0&&(X=J),"selectionStart"in w)w.selectionStart=J,w.selectionEnd=Math.min(X,w.value.length);else{var ne=w.ownerDocument||document,K=ne&&ne.defaultView||window;if(K.getSelection){var Q=K.getSelection(),me=w.textContent.length,Se=Math.min(U.start,me),ct=U.end===void 0?Se:Math.min(U.end,me);!Q.extend&&Se>ct&&(C=ct,ct=Se,Se=C);var F=Gg(w,Se),q=Gg(w,ct);if(F&&q&&(Q.rangeCount!==1||Q.anchorNode!==F.node||Q.anchorOffset!==F.offset||Q.focusNode!==q.node||Q.focusOffset!==q.offset)){var G=ne.createRange();G.setStart(F.node,F.offset),Q.removeAllRanges(),Se>ct?(Q.addRange(G),Q.extend(q.node,q.offset)):(G.setEnd(q.node,q.offset),Q.addRange(G))}}}}for(ne=[],Q=w;Q=Q.parentNode;)Q.nodeType===1&&ne.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ne.length;w++){var te=ne[w];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}Zc=!!dp,fp=dp=null}finally{tt=y,ae.p=c,$.T=l}}s.current=r,Ft=2}}function av(){if(Ft===2){Ft=0;var s=cr,r=ma,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=$.T,$.T=null;var c=ae.p;ae.p=2;var y=tt;tt|=4;try{V_(s,r.alternate,r)}finally{tt=y,ae.p=c,$.T=l}}Ft=3}}function lv(){if(Ft===4||Ft===3){Ft=0,Ke();var s=cr,r=ma,l=ms,c=$_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ft=5:(Ft=0,ma=cr=null,uv(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(ur=null),el(l),r=r.stateNode,on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(Ms,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=$.T,y=ae.p,ae.p=2,$.T=null;try{for(var _=s.onRecoverableError,C=0;C<c.length;C++){var w=c[C];_(w.value,{componentStack:w.stack})}}finally{$.T=r,ae.p=y}}(ms&3)!==0&&Fc(),Pi(s),y=s.pendingLanes,(l&261930)!==0&&(y&42)!==0?s===Xh?Ol++:(Ol=0,Xh=s):Ol=0,ql(0)}}function uv(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,vl(r)))}function Fc(){return ov(),av(),lv(),cv()}function cv(){if(Ft!==5)return!1;var s=cr,r=Wh;Wh=0;var l=el(ms),c=$.T,y=ae.p;try{ae.p=32>l?32:l,$.T=null,l=jh,jh=null;var _=cr,C=ms;if(Ft=0,ma=cr=null,ms=0,(tt&6)!==0)throw Error(i(331));var w=tt;if(tt|=4,J_(_.current),z_(_,_.current,C,l),tt=w,ql(0,!1),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(Ms,_)}catch{}return!0}finally{ae.p=y,$.T=c,uv(s,r)}}function dv(s,r,l){r=Zn(l,r),r=Nh(s.stateNode,r,2),s=ir(s,r,2),s!==null&&(Ps(s,2),Pi(s))}function at(s,r,l){if(s.tag===3)dv(s,s,l);else for(;r!==null;){if(r.tag===3){dv(r,s,l);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ur===null||!ur.has(c))){s=Zn(l,s),l=f_(2),c=ir(r,l,2),c!==null&&(h_(l,c,r,s),Ps(c,2),Pi(c));break}}r=r.return}}function tp(s,r,l){var c=s.pingCache;if(c===null){c=s.pingCache=new Tw;var y=new Set;c.set(r,y)}else y=c.get(r),y===void 0&&(y=new Set,c.set(r,y));y.has(l)||(Kh=!0,y.add(l),s=Iw.bind(null,s,r,l),r.then(s,s))}function Iw(s,r,l){var c=s.pingCache;c!==null&&c.delete(r),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,dt===s&&(Be&l)===l&&(It===4||It===3&&(Be&62914560)===Be&&300>Qe()-Vc?(tt&2)===0&&ga(s,0):$h|=l,pa===Be&&(pa=0)),Pi(s)}function fv(s,r){r===0&&(r=ja()),s=oo(s,r),s!==null&&(Ps(s,r),Pi(s))}function ww(s){var r=s.memoizedState,l=0;r!==null&&(l=r.retryLane),fv(s,l)}function Rw(s,r){var l=0;switch(s.tag){case 31:case 13:var c=s.stateNode,y=s.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),fv(s,l)}function bw(s,r){return Yn(s,r)}var zc=null,_a=null,np=!1,Hc=!1,ip=!1,fr=0;function Pi(s){s!==_a&&s.next===null&&(_a===null?zc=_a=s:_a=_a.next=s),Hc=!0,np||(np=!0,Nw())}function ql(s,r){if(!ip&&Hc){ip=!0;do for(var l=!1,c=zc;c!==null;){if(s!==0){var y=c.pendingLanes;if(y===0)var _=0;else{var C=c.suspendedLanes,w=c.pingedLanes;_=(1<<31-pn(42|s)+1)-1,_&=y&~(C&~w),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,gv(c,_))}else _=Be,_=Qn(c,c===dt?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(_&3)===0||ks(c,_)||(l=!0,gv(c,_));c=c.next}while(l);ip=!1}}function xw(){hv()}function hv(){Hc=np=!1;var s=0;fr!==0&&Bw()&&(s=fr);for(var r=Qe(),l=null,c=zc;c!==null;){var y=c.next,_=pv(c,r);_===0?(c.next=null,l===null?zc=y:l.next=y,y===null&&(_a=l)):(l=c,(s!==0||(_&3)!==0)&&(Hc=!0)),c=y}Ft!==0&&Ft!==5||ql(s),fr!==0&&(fr=0)}function pv(s,r){for(var l=s.suspendedLanes,c=s.pingedLanes,y=s.expirationTimes,_=s.pendingLanes&-62914561;0<_;){var C=31-pn(_),w=1<<C,U=y[C];U===-1?((w&l)===0||(w&c)!==0)&&(y[C]=Oo(w,r)):U<=r&&(s.expiredLanes|=w),_&=~w}if(r=dt,l=Be,l=Qn(s,s===r?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,l===0||s===r&&(ot===2||ot===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&ce(c),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||ks(s,l)){if(r=l&-l,r===s.callbackPriority)return r;switch(c!==null&&ce(c),el(l)){case 2:case 8:l=rt;break;case 32:l=ht;break;case 268435456:l=kn;break;default:l=ht}return c=mv.bind(null,s),l=Yn(l,c),s.callbackPriority=r,s.callbackNode=l,r}return c!==null&&c!==null&&ce(c),s.callbackPriority=2,s.callbackNode=null,2}function mv(s,r){if(Ft!==0&&Ft!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Fc()&&s.callbackNode!==l)return null;var c=Be;return c=Qn(s,s===dt?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(W_(s,c,r),pv(s,Qe()),s.callbackNode!=null&&s.callbackNode===l?mv.bind(null,s):null)}function gv(s,r){if(Fc())return null;W_(s,r,!0)}function Nw(){zw(function(){(tt&6)!==0?Yn(st,xw):hv()})}function sp(){if(fr===0){var s=ia;s===0&&(s=Kr,Kr<<=1,(Kr&261888)===0&&(Kr=256)),fr=s}return fr}function yv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:bi(""+s)}function _v(s,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,s.id&&l.setAttribute("form",s.id),r.parentNode.insertBefore(l,r),s=new FormData(s),l.parentNode.removeChild(l),s}function Mw(s,r,l,c,y){if(r==="submit"&&l&&l.stateNode===y){var _=yv((y[jt]||null).action),C=c.submitter;C&&(r=(r=C[jt]||null)?yv(r.formAction):C.getAttribute("formAction"),r!==null&&(_=r,C=null));var w=new Zr("action","action",null,c,y);s.push({event:w,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(fr!==0){var U=C?_v(y,C):new FormData(y);Ch(l,{pending:!0,data:U,method:y.method,action:_},null,U)}}else typeof _=="function"&&(w.preventDefault(),U=C?_v(y,C):new FormData(y),Ch(l,{pending:!0,data:U,method:y.method,action:_},_,U))},currentTarget:y}]})}}for(var rp=0;rp<Ff.length;rp++){var op=Ff[rp],Dw=op.toLowerCase(),kw=op[0].toUpperCase()+op.slice(1);pi(Dw,"on"+kw)}pi(Qg,"onAnimationEnd"),pi(Wg,"onAnimationIteration"),pi(jg,"onAnimationStart"),pi("dblclick","onDoubleClick"),pi("focusin","onFocus"),pi("focusout","onBlur"),pi(QI,"onTransitionRun"),pi(WI,"onTransitionStart"),pi(jI,"onTransitionCancel"),pi(Xg,"onTransitionEnd"),Ri("onMouseEnter",["mouseout","mouseover"]),Ri("onMouseLeave",["mouseout","mouseover"]),Ri("onPointerEnter",["pointerout","pointerover"]),Ri("onPointerLeave",["pointerout","pointerover"]),mn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mn("onBeforeInput",["compositionend","keypress","textInput","paste"]),mn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bl));function vv(s,r){r=(r&4)!==0;for(var l=0;l<s.length;l++){var c=s[l],y=c.event;c=c.listeners;e:{var _=void 0;if(r)for(var C=c.length-1;0<=C;C--){var w=c[C],U=w.instance,J=w.currentTarget;if(w=w.listener,U!==_&&y.isPropagationStopped())break e;_=w,y.currentTarget=J;try{_(y)}catch(X){sc(X)}y.currentTarget=null,_=U}else for(C=0;C<c.length;C++){if(w=c[C],U=w.instance,J=w.currentTarget,w=w.listener,U!==_&&y.isPropagationStopped())break e;_=w,y.currentTarget=J;try{_(y)}catch(X){sc(X)}y.currentTarget=null,_=U}}}}function qe(s,r){var l=r[Ls];l===void 0&&(l=r[Ls]=new Set);var c=s+"__bubble";l.has(c)||(Tv(r,s,2,!1),l.add(c))}function ap(s,r,l){var c=0;r&&(c|=4),Tv(l,s,c,r)}var Gc="_reactListening"+Math.random().toString(36).slice(2);function lp(s){if(!s[Gc]){s[Gc]=!0,qo.forEach(function(l){l!=="selectionchange"&&(Pw.has(l)||ap(l,!1,s),ap(l,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[Gc]||(r[Gc]=!0,ap("selectionchange",!1,r))}}function Tv(s,r,l,c){switch(Qv(r)){case 2:var y=lR;break;case 8:y=uR;break;default:y=Ap}l=y.bind(null,r,l,s),y=void 0,!ll||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),c?y!==void 0?s.addEventListener(r,l,{capture:!0,passive:y}):s.addEventListener(r,l,!0):y!==void 0?s.addEventListener(r,l,{passive:y}):s.addEventListener(r,l,!1)}function up(s,r,l,c,y){var _=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var C=c.tag;if(C===3||C===4){var w=c.stateNode.containerInfo;if(w===y)break;if(C===4)for(C=c.return;C!==null;){var U=C.tag;if((U===3||U===4)&&C.stateNode.containerInfo===y)return;C=C.return}for(;w!==null;){if(C=Qi(w),C===null)return;if(U=C.tag,U===5||U===6||U===26||U===27){c=_=C;continue e}w=w.parentNode}}c=c.return}zu(function(){var J=_,X=Go(l),ne=[];e:{var K=Zg.get(s);if(K!==void 0){var Q=Zr,me=s;switch(s){case"keypress":if(Xr(l)===0)break e;case"keydown":case"keyup":Q=ju;break;case"focusin":me="focus",Q=Ks;break;case"focusout":me="blur",Q=Ks;break;case"beforeblur":case"afterblur":Q=Ks;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Gu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Ju;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=Zu;break;case Qg:case Wg:case jg:Q=Ko;break;case Xg:Q=$o;break;case"scroll":case"scrollend":Q=Hu;break;case"wheel":Q=tc;break;case"copy":case"cut":case"paste":Q=Ku;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=hl;break;case"toggle":case"beforetoggle":Q=Qs}var Se=(r&4)!==0,ct=!Se&&(s==="scroll"||s==="scrollend"),F=Se?K!==null?K+"Capture":null:K;Se=[];for(var q=J,G;q!==null;){var te=q;if(G=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||G===null||F===null||(te=En(q,F),te!=null&&Se.push(Fl(q,te,G))),ct)break;q=q.return}0<Se.length&&(K=new Q(K,me,null,l,X),ne.push({event:K,listeners:Se}))}}if((r&7)===0){e:{if(K=s==="mouseover"||s==="pointerover",Q=s==="mouseout"||s==="pointerout",K&&l!==Ho&&(me=l.relatedTarget||l.fromElement)&&(Qi(me)||me[Ii]))break e;if((Q||K)&&(K=X.window===X?X:(K=X.ownerDocument)?K.defaultView||K.parentWindow:window,Q?(me=l.relatedTarget||l.toElement,Q=J,me=me?Qi(me):null,me!==null&&(ct=a(me),Se=me.tag,me!==ct||Se!==5&&Se!==27&&Se!==6)&&(me=null)):(Q=null,me=J),Q!==me)){if(Se=Gu,te="onMouseLeave",F="onMouseEnter",q="mouse",(s==="pointerout"||s==="pointerover")&&(Se=hl,te="onPointerLeave",F="onPointerEnter",q="pointer"),ct=Q==null?K:Qr(Q),G=me==null?K:Qr(me),K=new Se(te,q+"leave",Q,l,X),K.target=ct,K.relatedTarget=G,te=null,Qi(X)===J&&(Se=new Se(F,q+"enter",me,l,X),Se.target=G,Se.relatedTarget=ct,te=Se),ct=te,Q&&me)t:{for(Se=Vw,F=Q,q=me,G=0,te=F;te;te=Se(te))G++;te=0;for(var Te=q;Te;Te=Se(Te))te++;for(;0<G-te;)F=Se(F),G--;for(;0<te-G;)q=Se(q),te--;for(;G--;){if(F===q||q!==null&&F===q.alternate){Se=F;break t}F=Se(F),q=Se(q)}Se=null}else Se=null;Q!==null&&Ev(ne,K,Q,Se,!1),me!==null&&ct!==null&&Ev(ne,ct,me,Se,!0)}}e:{if(K=J?Qr(J):window,Q=K.nodeName&&K.nodeName.toLowerCase(),Q==="select"||Q==="input"&&K.type==="file")var Xe=Og;else if(Sn(K))if(qg)Xe=YI;else{Xe=GI;var ye=HI}else Q=K.nodeName,!Q||Q.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?J&&ol(J.elementType)&&(Xe=Og):Xe=JI;if(Xe&&(Xe=Xe(s,J))){io(ne,Xe,l,X);break e}ye&&ye(s,K,J),s==="focusout"&&J&&K.type==="number"&&J.memoizedProps.value!=null&&zo(K,"number",K.value)}switch(ye=J?Qr(J):window,s){case"focusin":(Sn(ye)||ye.contentEditable==="true")&&(Qo=ye,Of=J,gl=null);break;case"focusout":gl=Of=Qo=null;break;case"mousedown":qf=!0;break;case"contextmenu":case"mouseup":case"dragend":qf=!1,Kg(ne,l,X);break;case"selectionchange":if($I)break;case"keydown":case"keyup":Kg(ne,l,X)}var ke;if(E)e:{switch(s){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else Ue?nt(s,l)&&(Fe="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Fe="onCompositionStart");Fe&&(H&&l.locale!=="ko"&&(Ue||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&Ue&&(ke=Hs()):(Vn=X,Jo="value"in Vn?Vn.value:Vn.textContent,Ue=!0)),ye=Jc(J,Fe),0<ye.length&&(Fe=new cl(Fe,s,null,l,X),ne.push({event:Fe,listeners:ye}),ke?Fe.data=ke:(ke=Pt(l),ke!==null&&(Fe.data=ke)))),(ke=b?Jt(s,l):Yt(s,l))&&(Fe=Jc(J,"onBeforeInput"),0<Fe.length&&(ye=new cl("onBeforeInput","beforeinput",null,l,X),ne.push({event:ye,listeners:Fe}),ye.data=ke)),Mw(ne,s,J,l,X)}vv(ne,r)})}function Fl(s,r,l){return{instance:s,listener:r,currentTarget:l}}function Jc(s,r){for(var l=r+"Capture",c=[];s!==null;){var y=s,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=En(s,l),y!=null&&c.unshift(Fl(s,y,_)),y=En(s,r),y!=null&&c.push(Fl(s,y,_))),s.tag===3)return c;s=s.return}return[]}function Vw(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Ev(s,r,l,c,y){for(var _=r._reactName,C=[];l!==null&&l!==c;){var w=l,U=w.alternate,J=w.stateNode;if(w=w.tag,U!==null&&U===c)break;w!==5&&w!==26&&w!==27||J===null||(U=J,y?(J=En(l,_),J!=null&&C.unshift(Fl(l,J,U))):y||(J=En(l,_),J!=null&&C.push(Fl(l,J,U)))),l=l.return}C.length!==0&&s.push({event:r,listeners:C})}var Uw=/\r\n?/g,Lw=/\u0000|\uFFFD/g;function Sv(s){return(typeof s=="string"?s:""+s).replace(Uw,`
`).replace(Lw,"")}function Av(s,r){return r=Sv(r),Sv(s)===r}function ut(s,r,l,c,y,_){switch(l){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||jn(s,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&jn(s,""+c);break;case"className":Bs(s,"class",c);break;case"tabIndex":Bs(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Bs(s,l,c);break;case"style":Bu(s,c,_);break;case"data":if(r!=="object"){Bs(s,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||l!=="href")){s.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=bi(""+c),s.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(r!=="input"&&ut(s,r,"name",y.name,y,null),ut(s,r,"formEncType",y.formEncType,y,null),ut(s,r,"formMethod",y.formMethod,y,null),ut(s,r,"formTarget",y.formTarget,y,null)):(ut(s,r,"encType",y.encType,y,null),ut(s,r,"method",y.method,y,null),ut(s,r,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=bi(""+c),s.setAttribute(l,c);break;case"onClick":c!=null&&(s.onclick=Gt);break;case"onScroll":c!=null&&qe("scroll",s);break;case"onScrollEnd":c!=null&&qe("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}l=bi(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""+c):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":c===!0?s.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,c):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(l,c):s.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(l):s.setAttribute(l,c);break;case"popover":qe("beforetoggle",s),qe("toggle",s),qs(s,"popover",c);break;case"xlinkActuate":Wn(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Wn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Wn(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Wn(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Wn(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Wn(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Wn(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Wn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Wn(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":qs(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Df.get(l)||l,qs(s,l,c))}}function cp(s,r,l,c,y,_){switch(l){case"style":Bu(s,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof c=="string"?jn(s,c):(typeof c=="number"||typeof c=="bigint")&&jn(s,""+c);break;case"onScroll":c!=null&&qe("scroll",s);break;case"onScrollEnd":c!=null&&qe("scrollend",s);break;case"onClick":c!=null&&(s.onclick=Gt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Os.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),r=l.slice(2,y?l.length-7:void 0),_=s[jt]||null,_=_!=null?_[l]:null,typeof _=="function"&&s.removeEventListener(r,_,y),typeof c=="function")){typeof _!="function"&&_!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(r,c,y);break e}l in s?s[l]=c:c===!0?s.setAttribute(l,""):qs(s,l,c)}}}function tn(s,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",s),qe("load",s);var c=!1,y=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var C=l[_];if(C!=null)switch(_){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:ut(s,r,_,C,l,null)}}y&&ut(s,r,"srcSet",l.srcSet,l,null),c&&ut(s,r,"src",l.src,l,null);return;case"input":qe("invalid",s);var w=_=C=y=null,U=null,J=null;for(c in l)if(l.hasOwnProperty(c)){var X=l[c];if(X!=null)switch(c){case"name":y=X;break;case"type":C=X;break;case"checked":U=X;break;case"defaultChecked":J=X;break;case"value":_=X;break;case"defaultValue":w=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,r));break;default:ut(s,r,c,X,l,null)}}Wr(s,_,w,U,J,C,y,!1);return;case"select":qe("invalid",s),c=C=_=null;for(y in l)if(l.hasOwnProperty(y)&&(w=l[y],w!=null))switch(y){case"value":_=w;break;case"defaultValue":C=w;break;case"multiple":c=w;default:ut(s,r,y,w,l,null)}r=_,l=C,s.multiple=!!c,r!=null?je(s,!!c,r,!1):l!=null&&je(s,!!c,l,!0);return;case"textarea":qe("invalid",s),_=y=c=null;for(C in l)if(l.hasOwnProperty(C)&&(w=l[C],w!=null))switch(C){case"value":c=w;break;case"defaultValue":y=w;break;case"children":_=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:ut(s,r,C,w,l,null)}zs(s,c,y,_);return;case"option":for(U in l)if(l.hasOwnProperty(U)&&(c=l[U],c!=null))switch(U){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ut(s,r,U,c,l,null)}return;case"dialog":qe("beforetoggle",s),qe("toggle",s),qe("cancel",s),qe("close",s);break;case"iframe":case"object":qe("load",s);break;case"video":case"audio":for(c=0;c<Bl.length;c++)qe(Bl[c],s);break;case"image":qe("error",s),qe("load",s);break;case"details":qe("toggle",s);break;case"embed":case"source":case"link":qe("error",s),qe("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in l)if(l.hasOwnProperty(J)&&(c=l[J],c!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:ut(s,r,J,c,l,null)}return;default:if(ol(r)){for(X in l)l.hasOwnProperty(X)&&(c=l[X],c!==void 0&&cp(s,r,X,c,l,void 0));return}}for(w in l)l.hasOwnProperty(w)&&(c=l[w],c!=null&&ut(s,r,w,c,l,null))}function Ow(s,r,l,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,C=null,w=null,U=null,J=null,X=null;for(Q in l){var ne=l[Q];if(l.hasOwnProperty(Q)&&ne!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":U=ne;default:c.hasOwnProperty(Q)||ut(s,r,Q,null,c,ne)}}for(var K in c){var Q=c[K];if(ne=l[K],c.hasOwnProperty(K)&&(Q!=null||ne!=null))switch(K){case"type":_=Q;break;case"name":y=Q;break;case"checked":J=Q;break;case"defaultChecked":X=Q;break;case"value":C=Q;break;case"defaultValue":w=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,r));break;default:Q!==ne&&ut(s,r,K,Q,c,ne)}}Fs(s,C,w,U,J,X,_,y);return;case"select":Q=C=w=K=null;for(_ in l)if(U=l[_],l.hasOwnProperty(_)&&U!=null)switch(_){case"value":break;case"multiple":Q=U;default:c.hasOwnProperty(_)||ut(s,r,_,null,c,U)}for(y in c)if(_=c[y],U=l[y],c.hasOwnProperty(y)&&(_!=null||U!=null))switch(y){case"value":K=_;break;case"defaultValue":w=_;break;case"multiple":C=_;default:_!==U&&ut(s,r,y,_,c,U)}r=w,l=C,c=Q,K!=null?je(s,!!l,K,!1):!!c!=!!l&&(r!=null?je(s,!!l,r,!0):je(s,!!l,l?[]:"",!1));return;case"textarea":Q=K=null;for(w in l)if(y=l[w],l.hasOwnProperty(w)&&y!=null&&!c.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:ut(s,r,w,null,c,y)}for(C in c)if(y=c[C],_=l[C],c.hasOwnProperty(C)&&(y!=null||_!=null))switch(C){case"value":K=y;break;case"defaultValue":Q=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==_&&ut(s,r,C,y,c,_)}jr(s,K,Q);return;case"option":for(var me in l)if(K=l[me],l.hasOwnProperty(me)&&K!=null&&!c.hasOwnProperty(me))switch(me){case"selected":s.selected=!1;break;default:ut(s,r,me,null,c,K)}for(U in c)if(K=c[U],Q=l[U],c.hasOwnProperty(U)&&K!==Q&&(K!=null||Q!=null))switch(U){case"selected":s.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:ut(s,r,U,K,c,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in l)K=l[Se],l.hasOwnProperty(Se)&&K!=null&&!c.hasOwnProperty(Se)&&ut(s,r,Se,null,c,K);for(J in c)if(K=c[J],Q=l[J],c.hasOwnProperty(J)&&K!==Q&&(K!=null||Q!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,r));break;default:ut(s,r,J,K,c,Q)}return;default:if(ol(r)){for(var ct in l)K=l[ct],l.hasOwnProperty(ct)&&K!==void 0&&!c.hasOwnProperty(ct)&&cp(s,r,ct,void 0,c,K);for(X in c)K=c[X],Q=l[X],!c.hasOwnProperty(X)||K===Q||K===void 0&&Q===void 0||cp(s,r,X,K,c,Q);return}}for(var F in l)K=l[F],l.hasOwnProperty(F)&&K!=null&&!c.hasOwnProperty(F)&&ut(s,r,F,null,c,K);for(ne in c)K=c[ne],Q=l[ne],!c.hasOwnProperty(ne)||K===Q||K==null&&Q==null||ut(s,r,ne,K,c,Q)}function Cv(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function qw(){if(typeof performance.getEntriesByType=="function"){for(var s=0,r=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var y=l[c],_=y.transferSize,C=y.initiatorType,w=y.duration;if(_&&w&&Cv(C)){for(C=0,w=y.responseEnd,c+=1;c<l.length;c++){var U=l[c],J=U.startTime;if(J>w)break;var X=U.transferSize,ne=U.initiatorType;X&&Cv(ne)&&(U=U.responseEnd,C+=X*(U<w?1:(w-J)/(U-J)))}if(--c,r+=8*(_+C)/(y.duration/1e3),s++,10<s)break}}if(0<s)return r/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var dp=null,fp=null;function Yc(s){return s.nodeType===9?s:s.ownerDocument}function Iv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wv(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function hp(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var pp=null;function Bw(){var s=window.event;return s&&s.type==="popstate"?s===pp?!1:(pp=s,!0):(pp=null,!1)}var Rv=typeof setTimeout=="function"?setTimeout:void 0,Fw=typeof clearTimeout=="function"?clearTimeout:void 0,bv=typeof Promise=="function"?Promise:void 0,zw=typeof queueMicrotask=="function"?queueMicrotask:typeof bv<"u"?function(s){return bv.resolve(null).then(s).catch(Hw)}:Rv;function Hw(s){setTimeout(function(){throw s})}function hr(s){return s==="head"}function xv(s,r){var l=r,c=0;do{var y=l.nextSibling;if(s.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(c===0){s.removeChild(y),Sa(r);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")zl(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,zl(l);for(var _=l.firstChild;_;){var C=_.nextSibling,w=_.nodeName;_[$i]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&_.rel.toLowerCase()==="stylesheet"||l.removeChild(_),_=C}}else l==="body"&&zl(s.ownerDocument.body);l=y}while(l);Sa(r)}function Nv(s,r){var l=s;s=0;do{var c=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=c}while(l)}function mp(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":mp(l),$r(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function Gw(s,r,l,c){for(;s.nodeType===1;){var y=l;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[$i])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(_=s.getAttribute("rel"),_==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(_!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(_=s.getAttribute("src"),(_!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===_)return s}else return s;if(s=si(s.nextSibling),s===null)break}return null}function Jw(s,r,l){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=si(s.nextSibling),s===null))return null;return s}function Mv(s,r){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=si(s.nextSibling),s===null))return null;return s}function gp(s){return s.data==="$?"||s.data==="$~"}function yp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function Yw(s,r){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=r;else if(s.data!=="$?"||l.readyState!=="loading")r();else{var c=function(){r(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function si(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return s}var _p=null;function Dv(s){s=s.nextSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(r===0)return si(s.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}s=s.nextSibling}return null}function kv(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return s;r--}else l!=="/$"&&l!=="/&"||r++}s=s.previousSibling}return null}function Pv(s,r,l){switch(r=Yc(l),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function zl(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);$r(s)}var ri=new Map,Vv=new Set;function Kc(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var gs=ae.d;ae.d={f:Kw,r:$w,D:Qw,C:Ww,L:jw,m:Xw,X:eR,S:Zw,M:tR};function Kw(){var s=gs.f(),r=Oc();return s||r}function $w(s){var r=Wi(s);r!==null&&r.tag===5&&r.type==="form"?Xy(r):gs.r(s)}var va=typeof document>"u"?null:document;function Uv(s,r,l){var c=va;if(c&&typeof r=="string"&&r){var y=At(r);y='link[rel="'+s+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),Vv.has(y)||(Vv.add(y),s={rel:s,crossOrigin:l,href:r},c.querySelector(y)===null&&(r=c.createElement("link"),tn(r,"link",s),bt(r),c.head.appendChild(r)))}}function Qw(s){gs.D(s),Uv("dns-prefetch",s,null)}function Ww(s,r){gs.C(s,r),Uv("preconnect",s,r)}function jw(s,r,l){gs.L(s,r,l);var c=va;if(c&&s&&r){var y='link[rel="preload"][as="'+At(r)+'"]';r==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+At(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+At(l.imageSizes)+'"]')):y+='[href="'+At(s)+'"]';var _=y;switch(r){case"style":_=Ta(s);break;case"script":_=Ea(s)}ri.has(_)||(s=T({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:s,as:r},l),ri.set(_,s),c.querySelector(y)!==null||r==="style"&&c.querySelector(Hl(_))||r==="script"&&c.querySelector(Gl(_))||(r=c.createElement("link"),tn(r,"link",s),bt(r),c.head.appendChild(r)))}}function Xw(s,r){gs.m(s,r);var l=va;if(l&&s){var c=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+At(c)+'"][href="'+At(s)+'"]',_=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Ea(s)}if(!ri.has(_)&&(s=T({rel:"modulepreload",href:s},r),ri.set(_,s),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Gl(_)))return}c=l.createElement("link"),tn(c,"link",s),bt(c),l.head.appendChild(c)}}}function Zw(s,r,l){gs.S(s,r,l);var c=va;if(c&&s){var y=fi(c).hoistableStyles,_=Ta(s);r=r||"default";var C=y.get(_);if(!C){var w={loading:0,preload:null};if(C=c.querySelector(Hl(_)))w.loading=5;else{s=T({rel:"stylesheet",href:s,"data-precedence":r},l),(l=ri.get(_))&&vp(s,l);var U=C=c.createElement("link");bt(U),tn(U,"link",s),U._p=new Promise(function(J,X){U.onload=J,U.onerror=X}),U.addEventListener("load",function(){w.loading|=1}),U.addEventListener("error",function(){w.loading|=2}),w.loading|=4,$c(C,r,c)}C={type:"stylesheet",instance:C,count:1,state:w},y.set(_,C)}}}function eR(s,r){gs.X(s,r);var l=va;if(l&&s){var c=fi(l).hoistableScripts,y=Ea(s),_=c.get(y);_||(_=l.querySelector(Gl(y)),_||(s=T({src:s,async:!0},r),(r=ri.get(y))&&Tp(s,r),_=l.createElement("script"),bt(_),tn(_,"link",s),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function tR(s,r){gs.M(s,r);var l=va;if(l&&s){var c=fi(l).hoistableScripts,y=Ea(s),_=c.get(y);_||(_=l.querySelector(Gl(y)),_||(s=T({src:s,async:!0,type:"module"},r),(r=ri.get(y))&&Tp(s,r),_=l.createElement("script"),bt(_),tn(_,"link",s),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function Lv(s,r,l,c){var y=(y=Me.current)?Kc(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=Ta(l.href),l=fi(y).hoistableStyles,c=l.get(r),c||(c={type:"style",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=Ta(l.href);var _=fi(y).hoistableStyles,C=_.get(s);if(C||(y=y.ownerDocument||y,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(s,C),(_=y.querySelector(Hl(s)))&&!_._p&&(C.instance=_,C.state.loading=5),ri.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},ri.set(s,l),_||nR(y,s,l,C.state))),r&&c===null)throw Error(i(528,""));return C}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Ea(l),l=fi(y).hoistableScripts,c=l.get(r),c||(c={type:"script",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Ta(s){return'href="'+At(s)+'"'}function Hl(s){return'link[rel="stylesheet"]['+s+"]"}function Ov(s){return T({},s,{"data-precedence":s.precedence,precedence:null})}function nR(s,r,l,c){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=s.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),tn(r,"link",l),bt(r),s.head.appendChild(r))}function Ea(s){return'[src="'+At(s)+'"]'}function Gl(s){return"script[async]"+s}function qv(s,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var c=s.querySelector('style[data-href~="'+At(l.href)+'"]');if(c)return r.instance=c,bt(c),c;var y=T({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),bt(c),tn(c,"style",y),$c(c,l.precedence,s),r.instance=c;case"stylesheet":y=Ta(l.href);var _=s.querySelector(Hl(y));if(_)return r.state.loading|=4,r.instance=_,bt(_),_;c=Ov(l),(y=ri.get(y))&&vp(c,y),_=(s.ownerDocument||s).createElement("link"),bt(_);var C=_;return C._p=new Promise(function(w,U){C.onload=w,C.onerror=U}),tn(_,"link",c),r.state.loading|=4,$c(_,l.precedence,s),r.instance=_;case"script":return _=Ea(l.src),(y=s.querySelector(Gl(_)))?(r.instance=y,bt(y),y):(c=l,(y=ri.get(_))&&(c=T({},l),Tp(c,y)),s=s.ownerDocument||s,y=s.createElement("script"),bt(y),tn(y,"link",c),s.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,$c(c,l.precedence,s));return r.instance}function $c(s,r,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,_=y,C=0;C<c.length;C++){var w=c[C];if(w.dataset.precedence===r)_=w;else if(_!==y)break}_?_.parentNode.insertBefore(s,_.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(s,r.firstChild))}function vp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function Tp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var Qc=null;function Bv(s,r,l){if(Qc===null){var c=new Map,y=Qc=new Map;y.set(l,c)}else y=Qc,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(s))return c;for(c.set(s,null),l=l.getElementsByTagName(s),y=0;y<l.length;y++){var _=l[y];if(!(_[$i]||_[St]||s==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var C=_.getAttribute(r)||"";C=s+C;var w=c.get(C);w?w.push(_):c.set(C,[_])}}return c}function Fv(s,r,l){s=s.ownerDocument||s,s.head.insertBefore(l,r==="title"?s.querySelector("head > title"):null)}function iR(s,r,l){if(l===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function zv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function sR(s,r,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=Ta(c.href),_=r.querySelector(Hl(y));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(s.count++,s=Wc.bind(s),r.then(s,s)),l.state.loading|=4,l.instance=_,bt(_);return}_=r.ownerDocument||r,c=Ov(c),(y=ri.get(y))&&vp(c,y),_=_.createElement("link"),bt(_);var C=_;C._p=new Promise(function(w,U){C.onload=w,C.onerror=U}),tn(_,"link",c),l.instance=_}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=Wc.bind(s),r.addEventListener("load",l),r.addEventListener("error",l))}}var Ep=0;function rR(s,r){return s.stylesheets&&s.count===0&&Xc(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var c=setTimeout(function(){if(s.stylesheets&&Xc(s,s.stylesheets),s.unsuspend){var _=s.unsuspend;s.unsuspend=null,_()}},6e4+r);0<s.imgBytes&&Ep===0&&(Ep=62500*qw());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Xc(s,s.stylesheets),s.unsuspend)){var _=s.unsuspend;s.unsuspend=null,_()}},(s.imgBytes>Ep?50:800)+r);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function Wc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Xc(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var jc=null;function Xc(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,jc=new Map,r.forEach(oR,s),jc=null,Wc.call(s))}function oR(s,r){if(!(r.state.loading&4)){var l=jc.get(s);if(l)var c=l.get(null);else{l=new Map,jc.set(s,l);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var C=y[_];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(l.set(C.dataset.precedence,C),c=C)}c&&l.set(null,c)}y=r.instance,C=y.getAttribute("data-precedence"),_=l.get(C)||c,_===c&&l.set(null,y),l.set(C,y),this.count++,c=Wc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),_?_.parentNode.insertBefore(y,_.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),r.state.loading|=4}}var Jl={$$typeof:W,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function aR(s,r,l,c,y,_,C,w,U){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yi(0),this.hiddenUpdates=Yi(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function Hv(s,r,l,c,y,_,C,w,U,J,X,ne){return s=new aR(s,r,l,C,U,J,X,ne,w),r=1,_===!0&&(r|=24),_=Ln(3,null,null,r),s.current=_,_.stateNode=s,r=eh(),r.refCount++,s.pooledCache=r,r.refCount++,_.memoizedState={element:c,isDehydrated:l,cache:r},sh(_),s}function Gv(s){return s?(s=Xo,s):Xo}function Jv(s,r,l,c,y,_){y=Gv(y),c.context===null?c.context=y:c.pendingContext=y,c=nr(r),c.payload={element:l},_=_===void 0?null:_,_!==null&&(c.callback=_),l=ir(s,c,r),l!==null&&(Rn(l,s,r),Al(l,s,r))}function Yv(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<r?l:r}}function Sp(s,r){Yv(s,r),(s=s.alternate)&&Yv(s,r)}function Kv(s){if(s.tag===13||s.tag===31){var r=oo(s,67108864);r!==null&&Rn(r,s,67108864),Sp(s,67108864)}}function $v(s){if(s.tag===13||s.tag===31){var r=zn();r=Za(r);var l=oo(s,r);l!==null&&Rn(l,s,r),Sp(s,r)}}var Zc=!0;function lR(s,r,l,c){var y=$.T;$.T=null;var _=ae.p;try{ae.p=2,Ap(s,r,l,c)}finally{ae.p=_,$.T=y}}function uR(s,r,l,c){var y=$.T;$.T=null;var _=ae.p;try{ae.p=8,Ap(s,r,l,c)}finally{ae.p=_,$.T=y}}function Ap(s,r,l,c){if(Zc){var y=Cp(c);if(y===null)up(s,r,c,ed,l),Wv(s,c);else if(dR(y,s,r,l,c))c.stopPropagation();else if(Wv(s,c),r&4&&-1<cR.indexOf(s)){for(;y!==null;){var _=Wi(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var C=di(_.pendingLanes);if(C!==0){var w=_;for(w.pendingLanes|=2,w.entangledLanes|=2;C;){var U=1<<31-pn(C);w.entanglements[1]|=U,C&=~U}Pi(_),(tt&6)===0&&(Uc=Qe()+500,ql(0))}}break;case 31:case 13:w=oo(_,2),w!==null&&Rn(w,_,2),Oc(),Sp(_,2)}if(_=Cp(c),_===null&&up(s,r,c,ed,l),_===y)break;y=_}y!==null&&c.stopPropagation()}else up(s,r,c,null,l)}}function Cp(s){return s=Go(s),Ip(s)}var ed=null;function Ip(s){if(ed=null,s=Qi(s),s!==null){var r=a(s);if(r===null)s=null;else{var l=r.tag;if(l===13){if(s=u(r),s!==null)return s;s=null}else if(l===31){if(s=d(r),s!==null)return s;s=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return ed=s,null}function Qv(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dn()){case st:return 2;case rt:return 8;case ht:case ci:return 32;case kn:return 268435456;default:return 32}default:return 32}}var wp=!1,pr=null,mr=null,gr=null,Yl=new Map,Kl=new Map,yr=[],cR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Wv(s,r){switch(s){case"focusin":case"focusout":pr=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":gr=null;break;case"pointerover":case"pointerout":Yl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kl.delete(r.pointerId)}}function $l(s,r,l,c,y,_){return s===null||s.nativeEvent!==_?(s={blockedOn:r,domEventName:l,eventSystemFlags:c,nativeEvent:_,targetContainers:[y]},r!==null&&(r=Wi(r),r!==null&&Kv(r)),s):(s.eventSystemFlags|=c,r=s.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),s)}function dR(s,r,l,c,y){switch(r){case"focusin":return pr=$l(pr,s,r,l,c,y),!0;case"dragenter":return mr=$l(mr,s,r,l,c,y),!0;case"mouseover":return gr=$l(gr,s,r,l,c,y),!0;case"pointerover":var _=y.pointerId;return Yl.set(_,$l(Yl.get(_)||null,s,r,l,c,y)),!0;case"gotpointercapture":return _=y.pointerId,Kl.set(_,$l(Kl.get(_)||null,s,r,l,c,y)),!0}return!1}function jv(s){var r=Qi(s.target);if(r!==null){var l=a(r);if(l!==null){if(r=l.tag,r===13){if(r=u(l),r!==null){s.blockedOn=r,Uu(s.priority,function(){$v(l)});return}}else if(r===31){if(r=d(l),r!==null){s.blockedOn=r,Uu(s.priority,function(){$v(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function td(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var l=Cp(s.nativeEvent);if(l===null){l=s.nativeEvent;var c=new l.constructor(l.type,l);Ho=c,l.target.dispatchEvent(c),Ho=null}else return r=Wi(l),r!==null&&Kv(r),s.blockedOn=l,!1;r.shift()}return!0}function Xv(s,r,l){td(s)&&l.delete(r)}function fR(){wp=!1,pr!==null&&td(pr)&&(pr=null),mr!==null&&td(mr)&&(mr=null),gr!==null&&td(gr)&&(gr=null),Yl.forEach(Xv),Kl.forEach(Xv)}function nd(s,r){s.blockedOn===r&&(s.blockedOn=null,wp||(wp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,fR)))}var id=null;function Zv(s){id!==s&&(id=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){id===s&&(id=null);for(var r=0;r<s.length;r+=3){var l=s[r],c=s[r+1],y=s[r+2];if(typeof c!="function"){if(Ip(c||l)===null)continue;break}var _=Wi(l);_!==null&&(s.splice(r,3),r-=3,Ch(_,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function Sa(s){function r(U){return nd(U,s)}pr!==null&&nd(pr,s),mr!==null&&nd(mr,s),gr!==null&&nd(gr,s),Yl.forEach(r),Kl.forEach(r);for(var l=0;l<yr.length;l++){var c=yr[l];c.blockedOn===s&&(c.blockedOn=null)}for(;0<yr.length&&(l=yr[0],l.blockedOn===null);)jv(l),l.blockedOn===null&&yr.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],_=l[c+1],C=y[jt]||null;if(typeof _=="function")C||Zv(l);else if(C){var w=null;if(_&&_.hasAttribute("formAction")){if(y=_,C=_[jt]||null)w=C.formAction;else if(Ip(y)!==null)continue}else w=C.action;typeof w=="function"?l[c+1]=w:(l.splice(c,3),c-=3),Zv(l)}}}function e0(){function s(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(C){return y=C})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function Rp(s){this._internalRoot=s}sd.prototype.render=Rp.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var l=r.current,c=zn();Jv(l,c,s,r,null,null)},sd.prototype.unmount=Rp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;Jv(s.current,2,null,s,null,null),Oc(),r[Ii]=null}};function sd(s){this._internalRoot=s}sd.prototype.unstable_scheduleHydration=function(s){if(s){var r=Ki();s={blockedOn:null,target:s,priority:r};for(var l=0;l<yr.length&&r!==0&&r<yr[l].priority;l++);yr.splice(l,0,s),l===0&&jv(s)}};var t0=e.version;if(t0!=="19.2.0")throw Error(i(527,t0,"19.2.0"));ae.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=m(r),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var hR={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{Ms=rd.inject(hR),on=rd}catch{}}return Wl.createRoot=function(s,r){if(!o(s))throw Error(i(299));var l=!1,c="",y=l_,_=u_,C=c_;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(C=r.onRecoverableError)),r=Hv(s,1,!1,null,null,l,c,null,y,_,C,e0),s[Ii]=r.current,lp(s),new Rp(r)},Wl.hydrateRoot=function(s,r,l){if(!o(s))throw Error(i(299));var c=!1,y="",_=l_,C=u_,w=c_,U=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(C=l.onCaughtError),l.onRecoverableError!==void 0&&(w=l.onRecoverableError),l.formState!==void 0&&(U=l.formState)),r=Hv(s,1,!0,r,l??null,c,y,U,_,C,w,e0),r.context=Gv(null),l=r.current,c=zn(),c=Za(c),y=nr(c),y.callback=null,ir(l,y,c),l=c,r.current.lanes=l,Ps(r,l),Pi(r),s[Ii]=r.current,lp(s),new sd(r)},Wl.version="19.2.0",Wl}var d0;function AR(){if(d0)return Np.exports;d0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Np.exports=SR(),Np.exports}var CR=AR();const IR=yS(CR),wR=()=>{};var f0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},RR=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],d=n[t++],p=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},vS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,d=u?n[o+1]:0,p=o+2<n.length,m=p?n[o+2]:0,v=a>>2,T=(a&3)<<4|d>>4;let S=(d&15)<<2|m>>6,R=m&63;p||(R=64,u||(S=64)),i.push(t[v],t[T],t[S],t[R])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(_S(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):RR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const m=o<n.length?t[n.charAt(o)]:64;++o;const T=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||m==null||T==null)throw new bR;const S=a<<2|d>>4;if(i.push(S),m!==64){const R=d<<4&240|m>>2;if(i.push(R),T!==64){const L=m<<6&192|T;i.push(L)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class bR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xR=function(n){const e=_S(n);return vS.encodeByteArray(e,!0)},Rd=function(n){return xR(n).replace(/\./g,"")},TS=function(n){try{return vS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=()=>NR().__FIREBASE_DEFAULTS__,DR=()=>{if(typeof process>"u"||typeof f0>"u")return;const n=f0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},kR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&TS(n[1]);return e&&JSON.parse(e)},jd=()=>{try{return wR()||MR()||DR()||kR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},ES=n=>{var e,t;return(t=(e=jd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},SS=n=>{const e=ES(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},AS=()=>{var n;return(n=jd())===null||n===void 0?void 0:n.config},CS=n=>{var e;return(e=jd())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Nm(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Rd(JSON.stringify(t)),Rd(JSON.stringify(u)),""].join(".")}const ou={};function VR(){const n={prod:[],emulator:[]};for(const e of Object.keys(ou))ou[e]?n.emulator.push(e):n.prod.push(e);return n}function UR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let h0=!1;function Mm(n,e){if(typeof window>"u"||typeof document>"u"||!Or(window.location.host)||ou[n]===e||ou[n]||h0)return;ou[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",a=VR().prod.length>0;function u(){const S=document.getElementById(i);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,R){S.setAttribute("width","24"),S.setAttribute("id",R),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function m(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{h0=!0,u()},S}function v(S,R){S.setAttribute("id",R),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=UR(i),R=t("text"),L=document.getElementById(R)||document.createElement("span"),z=t("learnmore"),B=document.getElementById(z)||document.createElement("a"),ee=t("preprendIcon"),Y=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const W=S.element;d(W),v(B,z);const ie=m();p(Y,ee),W.append(Y,L,B,ie),document.body.appendChild(W)}a?(L.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function OR(){var n;const e=(n=jd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function BR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function FR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zR(){const n=hn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function HR(){return!OR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function GR(){try{return typeof indexedDB=="object"}catch{return!1}}function JR(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR="FirebaseError";class Gi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=YR,Object.setPrototypeOf(this,Gi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Au.prototype.create)}}class Au{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?KR(a,i):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new Gi(o,d,i)}}function KR(n,e){return n.replace($R,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const $R=/\{\$([^}]+)}/g;function QR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Co(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],u=e[o];if(p0(a)&&p0(u)){if(!Co(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function p0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Zl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function eu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function WR(n,e){const t=new jR(n,e);return t.subscribe.bind(t)}class jR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");XR(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Pp),o.error===void 0&&(o.error=Pp),o.complete===void 0&&(o.complete=Pp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XR(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Pp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(n){return n&&n._delegate?n._delegate:n}class Nr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new PR;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(t1(e))try{this.getOrInitializeService({instanceIdentifier:To})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=To){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=To){return this.instances.has(e)}getOptions(e=To){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),a=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(o,a);const u=this.instances.get(o);return u&&e(u,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:e1(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=To){return this.component?this.component.multipleInstances?e:To:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function e1(n){return n===To?void 0:n}function t1(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ZR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ze||(ze={}));const i1={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},s1=ze.INFO,r1={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},o1=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=r1[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dm{constructor(e){this.name=e,this._logLevel=s1,this._logHandler=o1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?i1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const a1=(n,e)=>e.some(t=>n instanceof t);let m0,g0;function l1(){return m0||(m0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function u1(){return g0||(g0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wS=new WeakMap,Kp=new WeakMap,RS=new WeakMap,Vp=new WeakMap,km=new WeakMap;function c1(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Ir(n.result)),o()},u=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&wS.set(t,n)}).catch(()=>{}),km.set(e,n),e}function d1(n){if(Kp.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});Kp.set(n,e)}let $p={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Kp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||RS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ir(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function f1(n){$p=n($p)}function h1(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Up(this),e,...t);return RS.set(i,e.sort?e.sort():[e]),Ir(i)}:u1().includes(n)?function(...e){return n.apply(Up(this),e),Ir(wS.get(this))}:function(...e){return Ir(n.apply(Up(this),e))}}function p1(n){return typeof n=="function"?h1(n):(n instanceof IDBTransaction&&d1(n),a1(n,l1())?new Proxy(n,$p):n)}function Ir(n){if(n instanceof IDBRequest)return c1(n);if(Vp.has(n))return Vp.get(n);const e=p1(n);return e!==n&&(Vp.set(n,e),km.set(e,n)),e}const Up=n=>km.get(n);function m1(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),d=Ir(u);return i&&u.addEventListener("upgradeneeded",p=>{i(Ir(u.result),p.oldVersion,p.newVersion,Ir(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{a&&p.addEventListener("close",()=>a()),o&&p.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const g1=["get","getKey","getAll","getAllKeys","count"],y1=["put","add","delete","clear"],Lp=new Map;function y0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Lp.get(e))return Lp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=y1.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||g1.includes(t)))return;const a=async function(u,...d){const p=this.transaction(u,o?"readwrite":"readonly");let m=p.store;return i&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),o&&p.done]))[0]};return Lp.set(e,a),a}f1(n=>({...n,get:(e,t,i)=>y0(e,t)||n.get(e,t,i),has:(e,t)=>!!y0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(v1(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function v1(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Qp="@firebase/app",_0="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es=new Dm("@firebase/app"),T1="@firebase/app-compat",E1="@firebase/analytics-compat",S1="@firebase/analytics",A1="@firebase/app-check-compat",C1="@firebase/app-check",I1="@firebase/auth",w1="@firebase/auth-compat",R1="@firebase/database",b1="@firebase/data-connect",x1="@firebase/database-compat",N1="@firebase/functions",M1="@firebase/functions-compat",D1="@firebase/installations",k1="@firebase/installations-compat",P1="@firebase/messaging",V1="@firebase/messaging-compat",U1="@firebase/performance",L1="@firebase/performance-compat",O1="@firebase/remote-config",q1="@firebase/remote-config-compat",B1="@firebase/storage",F1="@firebase/storage-compat",z1="@firebase/firestore",H1="@firebase/ai",G1="@firebase/firestore-compat",J1="firebase",Y1="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="[DEFAULT]",K1={[Qp]:"fire-core",[T1]:"fire-core-compat",[S1]:"fire-analytics",[E1]:"fire-analytics-compat",[C1]:"fire-app-check",[A1]:"fire-app-check-compat",[I1]:"fire-auth",[w1]:"fire-auth-compat",[R1]:"fire-rtdb",[b1]:"fire-data-connect",[x1]:"fire-rtdb-compat",[N1]:"fire-fn",[M1]:"fire-fn-compat",[D1]:"fire-iid",[k1]:"fire-iid-compat",[P1]:"fire-fcm",[V1]:"fire-fcm-compat",[U1]:"fire-perf",[L1]:"fire-perf-compat",[O1]:"fire-rc",[q1]:"fire-rc-compat",[B1]:"fire-gcs",[F1]:"fire-gcs-compat",[z1]:"fire-fst",[G1]:"fire-fst-compat",[H1]:"fire-vertex","fire-js":"fire-js",[J1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd=new Map,$1=new Map,jp=new Map;function v0(n,e){try{n.container.addComponent(e)}catch(t){Es.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Io(n){const e=n.name;if(jp.has(e))return Es.debug(`There were multiple attempts to register component ${e}.`),!1;jp.set(e,n);for(const t of bd.values())v0(t,n);for(const t of $1.values())v0(t,n);return!0}function Xd(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function xn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wr=new Au("app","Firebase",Q1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Nr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do=Y1;function bS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Wp,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw wr.create("bad-app-name",{appName:String(o)});if(t||(t=AS()),!t)throw wr.create("no-options");const a=bd.get(o);if(a){if(Co(t,a.options)&&Co(i,a.config))return a;throw wr.create("duplicate-app",{appName:o})}const u=new n1(o);for(const p of jp.values())u.addComponent(p);const d=new W1(t,i,u);return bd.set(o,d),d}function Pm(n=Wp){const e=bd.get(n);if(!e&&n===Wp&&AS())return bS();if(!e)throw wr.create("no-app",{appName:n});return e}function Ui(n,e,t){var i;let o=(i=K1[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const a=o.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${o}" with version "${e}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Es.warn(d.join(" "));return}Io(new Nr(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1="firebase-heartbeat-database",X1=1,pu="firebase-heartbeat-store";let Op=null;function xS(){return Op||(Op=m1(j1,X1,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(pu)}catch(t){console.warn(t)}}}}).catch(n=>{throw wr.create("idb-open",{originalErrorMessage:n.message})})),Op}async function Z1(n){try{const t=(await xS()).transaction(pu),i=await t.objectStore(pu).get(NS(n));return await t.done,i}catch(e){if(e instanceof Gi)Es.warn(e.message);else{const t=wr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Es.warn(t.message)}}}async function T0(n,e){try{const i=(await xS()).transaction(pu,"readwrite");await i.objectStore(pu).put(e,NS(n)),await i.done}catch(t){if(t instanceof Gi)Es.warn(t.message);else{const i=wr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Es.warn(i.message)}}}function NS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb=1024,tb=30;class nb{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new sb(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=E0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>tb){const u=rb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Es.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=E0(),{heartbeatsToSend:i,unsentEntries:o}=ib(this._heartbeatsCache.heartbeats),a=Rd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Es.warn(t),""}}}function E0(){return new Date().toISOString().substring(0,10)}function ib(n,e=eb){const t=[];let i=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),S0(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),S0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class sb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return GR()?JR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Z1(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return T0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return T0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function S0(n){return Rd(JSON.stringify({version:2,heartbeats:n})).length}function rb(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(n){Io(new Nr("platform-logger",e=>new _1(e),"PRIVATE")),Io(new Nr("heartbeat",e=>new nb(e),"PRIVATE")),Ui(Qp,_0,n),Ui(Qp,_0,"esm2017"),Ui("fire-js","")}ob("");function Vm(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function MS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ab=MS,DS=new Au("auth","Firebase",MS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd=new Dm("@firebase/auth");function lb(n,...e){xd.logLevel<=ze.WARN&&xd.warn(`Auth (${Do}): ${n}`,...e)}function md(n,...e){xd.logLevel<=ze.ERROR&&xd.error(`Auth (${Do}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(n,...e){throw Lm(n,...e)}function vi(n,...e){return Lm(n,...e)}function Um(n,e,t){const i=Object.assign(Object.assign({},ab()),{[e]:t});return new Au("auth","Firebase",i).create(e,{appName:n.name})}function Ts(n){return Um(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ub(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&li(n,"argument-error"),Um(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Lm(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return DS.create(n,...e)}function Ce(n,e,...t){if(!n)throw Lm(e,...t)}function _s(n){const e="INTERNAL ASSERTION FAILED: "+n;throw md(e),new Error(e)}function Ss(n,e){n||_s(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function cb(){return A0()==="http:"||A0()==="https:"}function A0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cb()||BR()||"connection"in navigator)?navigator.onLine:!0}function fb(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ss(t>e,"Short delay should be less than long delay!"),this.isMobile=LR()||FR()}get(){return db()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(n,e){Ss(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_s("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_s("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_s("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],mb=new Iu(3e4,6e4);function qr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Br(n,e,t,i,o={}){return PS(n,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const d=Cu(Object.assign({key:n.config.apiKey},u)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:p},a);return qR()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Or(n.emulatorConfig.host)&&(m.credentials="include"),kS.fetch()(await VS(n,n.config.apiHost,t,d),m)})}async function PS(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},hb),e);try{const o=new yb(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw od(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[p,m]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw od(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw od(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw od(n,"user-disabled",u);const v=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Um(n,v,m);li(n,v)}}catch(o){if(o instanceof Gi)throw o;li(n,"network-request-failed",{message:String(o)})}}async function wu(n,e,t,i,o={}){const a=await Br(n,e,t,i,o);return"mfaPendingCredential"in a&&li(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function VS(n,e,t,i){const o=`${e}${t}?${i}`,a=n,u=a.config.emulator?Om(n.config,o):`${n.config.apiScheme}://${o}`;return pb.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function gb(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class yb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(vi(this.auth,"network-request-failed")),mb.get())})}}function od(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=vi(n,e,i);return o.customData._tokenResponse=t,o}function C0(n){return n!==void 0&&n.enterprise!==void 0}class _b{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return gb(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function vb(n,e){return Br(n,"GET","/v2/recaptchaConfig",qr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tb(n,e){return Br(n,"POST","/v1/accounts:delete",e)}async function Nd(n,e){return Br(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Eb(n,e=!1){const t=Dt(n),i=await t.getIdToken(e),o=qm(i);Ce(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:o,token:i,authTime:au(qp(o.auth_time)),issuedAtTime:au(qp(o.iat)),expirationTime:au(qp(o.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function qp(n){return Number(n)*1e3}function qm(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return md("JWT malformed, contained fewer than 3 sections"),null;try{const o=TS(t);return o?JSON.parse(o):(md("Failed to decode base64 JWT payload"),null)}catch(o){return md("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function I0(n){const e=qm(n);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mu(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Gi&&Sb(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function Sb({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=au(this.lastLoginAt),this.creationTime=au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Md(n){var e;const t=n.auth,i=await n.getIdToken(),o=await mu(n,Nd(t,{idToken:i}));Ce(o==null?void 0:o.users.length,t,"internal-error");const a=o.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?US(a.providerUserInfo):[],d=Ib(n.providerData,u),p=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(d!=null&&d.length),v=p?m:!1,T={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new Zp(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(n,T)}async function Cb(n){const e=Dt(n);await Md(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Ib(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function US(n){return n.map(e=>{var{providerId:t}=e,i=Vm(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wb(n,e){const t=await PS(n,{},async()=>{const i=Cu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=await VS(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:i};return n.emulatorConfig&&Or(n.emulatorConfig.host)&&(p.credentials="include"),kS.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Rb(n,e){return Br(n,"POST","/v2/accounts:revokeToken",qr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):I0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=I0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await wb(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,u=new ba;return i&&(Ce(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(Ce(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Ce(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ba,this.toJSON())}_performRefresh(){return _s("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(n,e){Ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class yi{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,a=Vm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ab(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Zp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await mu(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Eb(this,e)}reload(){return Cb(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new yi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Md(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xn(this.auth.app))return Promise.reject(Ts(this.auth));const e=await this.getIdToken();return await mu(this,Tb(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,a,u,d,p,m,v;const T=(i=t.displayName)!==null&&i!==void 0?i:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,R=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,L=(u=t.photoURL)!==null&&u!==void 0?u:void 0,z=(d=t.tenantId)!==null&&d!==void 0?d:void 0,B=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,ee=(m=t.createdAt)!==null&&m!==void 0?m:void 0,Y=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:W,emailVerified:ie,isAnonymous:de,providerData:ue,stsTokenManager:D}=t;Ce(W&&D,e,"internal-error");const N=ba.fromJSON(this.name,D);Ce(typeof W=="string",e,"internal-error"),vr(T,e.name),vr(S,e.name),Ce(typeof ie=="boolean",e,"internal-error"),Ce(typeof de=="boolean",e,"internal-error"),vr(R,e.name),vr(L,e.name),vr(z,e.name),vr(B,e.name),vr(ee,e.name),vr(Y,e.name);const x=new yi({uid:W,auth:e,email:S,emailVerified:ie,displayName:T,isAnonymous:de,photoURL:L,phoneNumber:R,tenantId:z,stsTokenManager:N,createdAt:ee,lastLoginAt:Y});return ue&&Array.isArray(ue)&&(x.providerData=ue.map(V=>Object.assign({},V))),B&&(x._redirectEventId=B),x}static async _fromIdTokenResponse(e,t,i=!1){const o=new ba;o.updateFromServerResponse(t);const a=new yi({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Md(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ce(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?US(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),d=new ba;d.updateFromIdToken(i);const p=new yi({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Zp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0=new Map;function vs(n){Ss(n instanceof Function,"Expected a class definition");let e=w0.get(n);return e?(Ss(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,w0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}LS.type="NONE";const R0=LS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gd(n,e,t){return`firebase:${n}:${e}:${t}`}class xa{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=gd(this.userKey,o.apiKey,a),this.fullPersistenceKey=gd("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Nd(this.auth,{idToken:e}).catch(()=>{});return t?yi._fromGetAccountInfoResponse(this.auth,t,e):null}return yi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new xa(vs(R0),e,i);const o=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=o[0]||vs(R0);const u=gd(i,e.config.apiKey,e.name);let d=null;for(const m of t)try{const v=await m._get(u);if(v){let T;if(typeof v=="string"){const S=await Nd(e,{idToken:v}).catch(()=>{});if(!S)break;T=await yi._fromGetAccountInfoResponse(e,S,v)}else T=yi._fromJSON(e,v);m!==a&&(d=T),a=m;break}}catch{}const p=o.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new xa(a,e,i):(a=p[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(u)}catch{}})),new xa(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(FS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(OS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HS(e))return"Blackberry";if(GS(e))return"Webos";if(qS(e))return"Safari";if((e.includes("chrome/")||BS(e))&&!e.includes("edge/"))return"Chrome";if(zS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function OS(n=hn()){return/firefox\//i.test(n)}function qS(n=hn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function BS(n=hn()){return/crios\//i.test(n)}function FS(n=hn()){return/iemobile/i.test(n)}function zS(n=hn()){return/android/i.test(n)}function HS(n=hn()){return/blackberry/i.test(n)}function GS(n=hn()){return/webos/i.test(n)}function Bm(n=hn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function bb(n=hn()){var e;return Bm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function xb(){return zR()&&document.documentMode===10}function JS(n=hn()){return Bm(n)||zS(n)||GS(n)||HS(n)||/windows phone/i.test(n)||FS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(n,e=[]){let t;switch(n){case"Browser":t=b0(hn());break;case"Worker":t=`${b0(hn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Do}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,d)=>{try{const p=e(a);u(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mb(n,e={}){return Br(n,"GET","/v2/passwordPolicy",qr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db=6;class kb{constructor(e){var t,i,o,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:Db,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,a,u,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(a=p.containsUppercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(u=p.containsNumericCharacter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new x0(this),this.idTokenSubscription=new x0(this),this.beforeStateQueue=new Nb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=vs(t)),this._initializationPromise=this.queue(async()=>{var i,o,a;if(!this._deleted&&(this.persistenceManager=await xa.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Nd(this,{idToken:e}),i=await yi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(xn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&(p!=null&&p.user)&&(o=p.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(u){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Md(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fb()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xn(this.app))return Promise.reject(Ts(this));const t=e?Dt(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xn(this.app)?Promise.reject(Ts(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xn(this.app)?Promise.reject(Ts(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Mb(this),t=new kb(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Au("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await Rb(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&vs(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await xa.create(this,[vs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=YS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&lb(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Fr(n){return Dt(n)}class x0{constructor(e){this.auth=e,this.observer=null,this.addObserver=WR(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Vb(n){Zd=n}function KS(n){return Zd.loadJS(n)}function Ub(){return Zd.recaptchaEnterpriseScript}function Lb(){return Zd.gapiScript}function Ob(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class qb{constructor(){this.enterprise=new Bb}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Bb{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Fb="recaptcha-enterprise",$S="NO_RECAPTCHA";class zb{constructor(e){this.type=Fb,this.auth=Fr(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,d)=>{vb(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new _b(p);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,u(m.siteKey)}}).catch(p=>{d(p)})})}function o(a,u,d){const p=window.grecaptcha;C0(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(m=>{u(m)}).catch(()=>{u($S)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new qb().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{i(this.auth).then(d=>{if(!t&&C0(window.grecaptcha))o(d,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=Ub();p.length!==0&&(p+=d),KS(p).then(()=>{o(d,a,u)}).catch(m=>{u(m)})}}).catch(d=>{u(d)})})}}async function N0(n,e,t,i=!1,o=!1){const a=new zb(n);let u;if(o)u=$S;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function em(n,e,t,i,o){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await N0(n,e,t,t==="getOobCode");return i(n,u)}else return i(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await N0(n,e,t,t==="getOobCode");return i(n,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(n,e){const t=Xd(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Co(a,e??{}))return o;li(o,"already-initialized")}return t.initialize({options:e})}function Gb(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(vs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function Jb(n,e,t){const i=Fr(n);Ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=QS(e),{host:u,port:d}=Yb(e),p=d===null?"":`:${d}`,m={url:`${a}//${u}${p}/`},v=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ce(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ce(Co(m,i.config.emulator)&&Co(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=m,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,Or(u)?(Nm(`${a}//${u}${p}`),Mm("Auth",!0)):Kb()}function QS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Yb(n){const e=QS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:M0(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:M0(u)}}}function M0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Kb(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _s("not implemented")}_getIdTokenResponse(e){return _s("not implemented")}_linkToIdToken(e,t){return _s("not implemented")}_getReauthenticationResolver(e){return _s("not implemented")}}async function $b(n,e){return Br(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qb(n,e){return wu(n,"POST","/v1/accounts:signInWithPassword",qr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wb(n,e){return wu(n,"POST","/v1/accounts:signInWithEmailLink",qr(n,e))}async function jb(n,e){return wu(n,"POST","/v1/accounts:signInWithEmailLink",qr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu extends Fm{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new gu(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new gu(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return em(e,t,"signInWithPassword",Qb);case"emailLink":return Wb(e,{email:this._email,oobCode:this._password});default:li(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return em(e,i,"signUpPassword",$b);case"emailLink":return jb(e,{idToken:t,email:this._email,oobCode:this._password});default:li(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Na(n,e){return wu(n,"POST","/v1/accounts:signInWithIdp",qr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb="http://localhost";class wo extends Fm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new wo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):li("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,a=Vm(t,["providerId","signInMethod"]);if(!i||!o)return null;const u=new wo(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Na(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Na(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Na(e,t)}buildRequest(){const e={requestUri:Xb,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Cu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ex(n){const e=Zl(eu(n)).link,t=e?Zl(eu(e)).deep_link_id:null,i=Zl(eu(n)).deep_link_id;return(i?Zl(eu(i)).link:null)||i||t||e||n}class zm{constructor(e){var t,i,o,a,u,d;const p=Zl(eu(e)),m=(t=p.apiKey)!==null&&t!==void 0?t:null,v=(i=p.oobCode)!==null&&i!==void 0?i:null,T=Zb((o=p.mode)!==null&&o!==void 0?o:null);Ce(m&&v&&T,"argument-error"),this.apiKey=m,this.operation=T,this.code=v,this.continueUrl=(a=p.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(u=p.lang)!==null&&u!==void 0?u:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=ex(e);try{return new zm(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(){this.providerId=za.PROVIDER_ID}static credential(e,t){return gu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=zm.parseLink(t);return Ce(i,"argument-error"),gu._fromEmailAndCode(e,i.code,i.tenantId)}}za.PROVIDER_ID="password";za.EMAIL_PASSWORD_SIGN_IN_METHOD="password";za.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru extends Hm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends Ru{constructor(){super("facebook.com")}static credential(e){return wo._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tr.credential(e.oauthAccessToken)}catch{return null}}}Tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Tr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends Ru{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return wo._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ys.credential(t,i)}catch{return null}}}ys.GOOGLE_SIGN_IN_METHOD="google.com";ys.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends Ru{constructor(){super("github.com")}static credential(e){return wo._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Er.credential(e.oauthAccessToken)}catch{return null}}}Er.GITHUB_SIGN_IN_METHOD="github.com";Er.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends Ru{constructor(){super("twitter.com")}static credential(e,t){return wo._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Sr.credential(t,i)}catch{return null}}}Sr.TWITTER_SIGN_IN_METHOD="twitter.com";Sr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tx(n,e){return wu(n,"POST","/v1/accounts:signUp",qr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await yi._fromIdTokenResponse(e,i,o),u=D0(i);return new Ro({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=D0(i);return new Ro({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function D0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd extends Gi{constructor(e,t,i,o){var a;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Dd.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Dd(e,t,i,o)}}function WS(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Dd._fromErrorAndOperation(n,a,e,i):a})}async function nx(n,e,t=!1){const i=await mu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ro._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ix(n,e,t=!1){const{auth:i}=n;if(xn(i.app))return Promise.reject(Ts(i));const o="reauthenticate";try{const a=await mu(n,WS(i,o,e,n),t);Ce(a.idToken,i,"internal-error");const u=qm(a.idToken);Ce(u,i,"internal-error");const{sub:d}=u;return Ce(n.uid===d,i,"user-mismatch"),Ro._forOperation(n,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&li(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jS(n,e,t=!1){if(xn(n.app))return Promise.reject(Ts(n));const i="signIn",o=await WS(n,i,e),a=await Ro._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}async function sx(n,e){return jS(Fr(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XS(n){const e=Fr(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function rx(n,e,t){if(xn(n.app))return Promise.reject(Ts(n));const i=Fr(n),u=await em(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tx).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&XS(n),p}),d=await Ro._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(d.user),d}function ox(n,e,t){return xn(n.app)?Promise.reject(Ts(n)):sx(Dt(n),za.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&XS(n),i})}function ax(n,e,t,i){return Dt(n).onIdTokenChanged(e,t,i)}function lx(n,e,t){return Dt(n).beforeAuthStateChanged(e,t)}function ux(n,e,t,i){return Dt(n).onAuthStateChanged(e,t,i)}function cx(n){return Dt(n).signOut()}const kd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(kd,"1"),this.storage.removeItem(kd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx=1e3,fx=10;class eA extends ZS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=JS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,p)=>{this.notifyListeners(u,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);xb()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,fx):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},dx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}eA.type="LOCAL";const hx=eA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA extends ZS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}tA.type="SESSION";const nA=tA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new ef(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(u).map(async m=>m(t.origin,a)),p=await px(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ef.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((d,p)=>{const m=Gm("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(T){const S=T;if(S.data.eventId===m)switch(S.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(S.data.response);break;default:clearTimeout(v),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(){return window}function gx(n){Li().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(){return typeof Li().WorkerGlobalScope<"u"&&typeof Li().importScripts=="function"}async function yx(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _x(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function vx(){return iA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA="firebaseLocalStorageDb",Tx=1,Pd="firebaseLocalStorage",rA="fbase_key";class bu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function tf(n,e){return n.transaction([Pd],e?"readwrite":"readonly").objectStore(Pd)}function Ex(){const n=indexedDB.deleteDatabase(sA);return new bu(n).toPromise()}function tm(){const n=indexedDB.open(sA,Tx);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Pd,{keyPath:rA})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Pd)?e(i):(i.close(),await Ex(),e(await tm()))})})}async function k0(n,e,t){const i=tf(n,!0).put({[rA]:e,value:t});return new bu(i).toPromise()}async function Sx(n,e){const t=tf(n,!1).get(e),i=await new bu(t).toPromise();return i===void 0?null:i.value}function P0(n,e){const t=tf(n,!0).delete(e);return new bu(t).toPromise()}const Ax=800,Cx=3;class oA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Cx)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ef._getInstance(vx()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await yx(),!this.activeServiceWorker)return;this.sender=new mx(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_x()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await tm();return await k0(e,kd,"1"),await P0(e,kd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>k0(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Sx(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>P0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=tf(o,!1).getAll();return new bu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ax)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}oA.type="LOCAL";const Ix=oA;new Iu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(n,e){return e?vs(e):(Ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm extends Fm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Na(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Na(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Na(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function wx(n){return jS(n.auth,new Jm(n),n.bypassAuthState)}function Rx(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),ix(t,new Jm(n),n.bypassAuthState)}async function bx(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),nx(t,new Jm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wx;case"linkViaPopup":case"linkViaRedirect":return bx;case"reauthViaPopup":case"reauthViaRedirect":return Rx;default:li(this.auth,"internal-error")}}resolve(e){Ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx=new Iu(2e3,1e4);async function Nx(n,e,t){if(xn(n.app))return Promise.reject(vi(n,"operation-not-supported-in-this-environment"));const i=Fr(n);ub(n,e,Hm);const o=aA(i,t);return new Eo(i,"signInViaPopup",e,o).executeNotNull()}class Eo extends lA{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,Eo.currentPopupAction&&Eo.currentPopupAction.cancel(),Eo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){Ss(this.filter.length===1,"Popup operations only handle one event");const e=Gm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(vi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(vi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Eo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xx.get())};e()}}Eo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx="pendingRedirect",yd=new Map;class Dx extends lA{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=yd.get(this.auth._key());if(!e){try{const i=await kx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}yd.set(this.auth._key(),e)}return this.bypassAuthState||yd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function kx(n,e){const t=Ux(e),i=Vx(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function Px(n,e){yd.set(n._key(),e)}function Vx(n){return vs(n._redirectPersistence)}function Ux(n){return gd(Mx,n.config.apiKey,n.name)}async function Lx(n,e,t=!1){if(xn(n.app))return Promise.reject(Ts(n));const i=Fr(n),o=aA(i,e),u=await new Dx(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox=600*1e3;class qx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Bx(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!uA(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(vi(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ox&&this.cachedEventUids.clear(),this.cachedEventUids.has(V0(e))}saveEventToCache(e){this.cachedEventUids.add(V0(e)),this.lastProcessedEventTime=Date.now()}}function V0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function uA({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Bx(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fx(n,e={}){return Br(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hx=/^https?/;async function Gx(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Fx(n);for(const t of e)try{if(Jx(t))return}catch{}li(n,"unauthorized-domain")}function Jx(n){const e=Xp(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!Hx.test(t))return!1;if(zx.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=new Iu(3e4,6e4);function U0(){const n=Li().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Kx(n){return new Promise((e,t)=>{var i,o,a;function u(){U0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{U0(),t(vi(n,"network-request-failed"))},timeout:Yx.get()})}if(!((o=(i=Li().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=Li().gapi)===null||a===void 0)&&a.load)u();else{const d=Ob("iframefcb");return Li()[d]=()=>{gapi.load?u():t(vi(n,"network-request-failed"))},KS(`${Lb()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw _d=null,e})}let _d=null;function $x(n){return _d=_d||Kx(n),_d}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx=new Iu(5e3,15e3),Wx="__/auth/iframe",jx="emulator/auth/iframe",Xx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function eN(n){const e=n.config;Ce(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Om(e,jx):`https://${n.config.authDomain}/${Wx}`,i={apiKey:e.apiKey,appName:n.name,v:Do},o=Zx.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${Cu(i).slice(1)}`}async function tN(n){const e=await $x(n),t=Li().gapi;return Ce(t,n,"internal-error"),e.open({where:document.body,url:eN(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Xx,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=vi(n,"network-request-failed"),d=Li().setTimeout(()=>{a(u)},Qx.get());function p(){Li().clearTimeout(d),o(i)}i.ping(p).then(p,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iN=500,sN=600,rN="_blank",oN="http://localhost";class L0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aN(n,e,t,i=iN,o=sN){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p=Object.assign(Object.assign({},nN),{width:i.toString(),height:o.toString(),top:a,left:u}),m=hn().toLowerCase();t&&(d=BS(m)?rN:t),OS(m)&&(e=e||oN,p.scrollbars="yes");const v=Object.entries(p).reduce((S,[R,L])=>`${S}${R}=${L},`,"");if(bb(m)&&d!=="_self")return lN(e||"",d),new L0(null);const T=window.open(e||"",d,v);Ce(T,n,"popup-blocked");try{T.focus()}catch{}return new L0(T)}function lN(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN="__/auth/handler",cN="emulator/auth/handler",dN=encodeURIComponent("fac");async function O0(n,e,t,i,o,a){Ce(n.config.authDomain,n,"auth-domain-config-required"),Ce(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Do,eventId:o};if(e instanceof Hm){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",QR(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,T]of Object.entries({}))u[v]=T}if(e instanceof Ru){const v=e.getScopes().filter(T=>T!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const p=await n._getAppCheckToken(),m=p?`#${dN}=${encodeURIComponent(p)}`:"";return`${fN(n)}?${Cu(d).slice(1)}${m}`}function fN({config:n}){return n.emulator?Om(n,cN):`https://${n.authDomain}/${uN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp="webStorageSupport";class hN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nA,this._completeRedirectFn=Lx,this._overrideRedirectResult=Px}async _openPopup(e,t,i,o){var a;Ss((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await O0(e,t,i,Xp(),o);return aN(e,u,Gm())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await O0(e,t,i,Xp(),o);return gx(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(Ss(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await tN(e),i=new qx(e);return t.register("authEvent",o=>(Ce(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Bp,{type:Bp},o=>{var a;const u=(a=o==null?void 0:o[0])===null||a===void 0?void 0:a[Bp];u!==void 0&&t(!!u),li(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Gx(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return JS()||qS()||Bm()}}const pN=hN;var q0="@firebase/auth",B0="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yN(n){Io(new Nr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;Ce(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YS(n)},m=new Pb(i,o,a,p);return Gb(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Io(new Nr("auth-internal",e=>{const t=Fr(e.getProvider("auth").getImmediate());return(i=>new mN(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ui(q0,B0,gN(n)),Ui(q0,B0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=300,vN=CS("authIdTokenMaxAge")||_N;let F0=null;const TN=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>vN)return;const o=t==null?void 0:t.token;F0!==o&&(F0=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function EN(n=Pm()){const e=Xd(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Hb(n,{popupRedirectResolver:pN,persistence:[Ix,hx,nA]}),i=CS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=TN(a.toString());lx(t,u,()=>u(t.currentUser)),ax(t,d=>u(d))}}const o=ES("auth");return o&&Jb(t,`http://${o}`),t}function SN(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Vb({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=vi("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",SN().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yN("Browser");var AN="firebase",CN="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ui(AN,CN,"app");var z0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rr,cA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,N){function x(){}x.prototype=N.prototype,D.D=N.prototype,D.prototype=new x,D.prototype.constructor=D,D.C=function(V,P,k){for(var M=Array(arguments.length-2),We=2;We<arguments.length;We++)M[We-2]=arguments[We];return N.prototype[P].apply(V,M)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,N,x){x||(x=0);var V=Array(16);if(typeof N=="string")for(var P=0;16>P;++P)V[P]=N.charCodeAt(x++)|N.charCodeAt(x++)<<8|N.charCodeAt(x++)<<16|N.charCodeAt(x++)<<24;else for(P=0;16>P;++P)V[P]=N[x++]|N[x++]<<8|N[x++]<<16|N[x++]<<24;N=D.g[0],x=D.g[1],P=D.g[2];var k=D.g[3],M=N+(k^x&(P^k))+V[0]+3614090360&4294967295;N=x+(M<<7&4294967295|M>>>25),M=k+(P^N&(x^P))+V[1]+3905402710&4294967295,k=N+(M<<12&4294967295|M>>>20),M=P+(x^k&(N^x))+V[2]+606105819&4294967295,P=k+(M<<17&4294967295|M>>>15),M=x+(N^P&(k^N))+V[3]+3250441966&4294967295,x=P+(M<<22&4294967295|M>>>10),M=N+(k^x&(P^k))+V[4]+4118548399&4294967295,N=x+(M<<7&4294967295|M>>>25),M=k+(P^N&(x^P))+V[5]+1200080426&4294967295,k=N+(M<<12&4294967295|M>>>20),M=P+(x^k&(N^x))+V[6]+2821735955&4294967295,P=k+(M<<17&4294967295|M>>>15),M=x+(N^P&(k^N))+V[7]+4249261313&4294967295,x=P+(M<<22&4294967295|M>>>10),M=N+(k^x&(P^k))+V[8]+1770035416&4294967295,N=x+(M<<7&4294967295|M>>>25),M=k+(P^N&(x^P))+V[9]+2336552879&4294967295,k=N+(M<<12&4294967295|M>>>20),M=P+(x^k&(N^x))+V[10]+4294925233&4294967295,P=k+(M<<17&4294967295|M>>>15),M=x+(N^P&(k^N))+V[11]+2304563134&4294967295,x=P+(M<<22&4294967295|M>>>10),M=N+(k^x&(P^k))+V[12]+1804603682&4294967295,N=x+(M<<7&4294967295|M>>>25),M=k+(P^N&(x^P))+V[13]+4254626195&4294967295,k=N+(M<<12&4294967295|M>>>20),M=P+(x^k&(N^x))+V[14]+2792965006&4294967295,P=k+(M<<17&4294967295|M>>>15),M=x+(N^P&(k^N))+V[15]+1236535329&4294967295,x=P+(M<<22&4294967295|M>>>10),M=N+(P^k&(x^P))+V[1]+4129170786&4294967295,N=x+(M<<5&4294967295|M>>>27),M=k+(x^P&(N^x))+V[6]+3225465664&4294967295,k=N+(M<<9&4294967295|M>>>23),M=P+(N^x&(k^N))+V[11]+643717713&4294967295,P=k+(M<<14&4294967295|M>>>18),M=x+(k^N&(P^k))+V[0]+3921069994&4294967295,x=P+(M<<20&4294967295|M>>>12),M=N+(P^k&(x^P))+V[5]+3593408605&4294967295,N=x+(M<<5&4294967295|M>>>27),M=k+(x^P&(N^x))+V[10]+38016083&4294967295,k=N+(M<<9&4294967295|M>>>23),M=P+(N^x&(k^N))+V[15]+3634488961&4294967295,P=k+(M<<14&4294967295|M>>>18),M=x+(k^N&(P^k))+V[4]+3889429448&4294967295,x=P+(M<<20&4294967295|M>>>12),M=N+(P^k&(x^P))+V[9]+568446438&4294967295,N=x+(M<<5&4294967295|M>>>27),M=k+(x^P&(N^x))+V[14]+3275163606&4294967295,k=N+(M<<9&4294967295|M>>>23),M=P+(N^x&(k^N))+V[3]+4107603335&4294967295,P=k+(M<<14&4294967295|M>>>18),M=x+(k^N&(P^k))+V[8]+1163531501&4294967295,x=P+(M<<20&4294967295|M>>>12),M=N+(P^k&(x^P))+V[13]+2850285829&4294967295,N=x+(M<<5&4294967295|M>>>27),M=k+(x^P&(N^x))+V[2]+4243563512&4294967295,k=N+(M<<9&4294967295|M>>>23),M=P+(N^x&(k^N))+V[7]+1735328473&4294967295,P=k+(M<<14&4294967295|M>>>18),M=x+(k^N&(P^k))+V[12]+2368359562&4294967295,x=P+(M<<20&4294967295|M>>>12),M=N+(x^P^k)+V[5]+4294588738&4294967295,N=x+(M<<4&4294967295|M>>>28),M=k+(N^x^P)+V[8]+2272392833&4294967295,k=N+(M<<11&4294967295|M>>>21),M=P+(k^N^x)+V[11]+1839030562&4294967295,P=k+(M<<16&4294967295|M>>>16),M=x+(P^k^N)+V[14]+4259657740&4294967295,x=P+(M<<23&4294967295|M>>>9),M=N+(x^P^k)+V[1]+2763975236&4294967295,N=x+(M<<4&4294967295|M>>>28),M=k+(N^x^P)+V[4]+1272893353&4294967295,k=N+(M<<11&4294967295|M>>>21),M=P+(k^N^x)+V[7]+4139469664&4294967295,P=k+(M<<16&4294967295|M>>>16),M=x+(P^k^N)+V[10]+3200236656&4294967295,x=P+(M<<23&4294967295|M>>>9),M=N+(x^P^k)+V[13]+681279174&4294967295,N=x+(M<<4&4294967295|M>>>28),M=k+(N^x^P)+V[0]+3936430074&4294967295,k=N+(M<<11&4294967295|M>>>21),M=P+(k^N^x)+V[3]+3572445317&4294967295,P=k+(M<<16&4294967295|M>>>16),M=x+(P^k^N)+V[6]+76029189&4294967295,x=P+(M<<23&4294967295|M>>>9),M=N+(x^P^k)+V[9]+3654602809&4294967295,N=x+(M<<4&4294967295|M>>>28),M=k+(N^x^P)+V[12]+3873151461&4294967295,k=N+(M<<11&4294967295|M>>>21),M=P+(k^N^x)+V[15]+530742520&4294967295,P=k+(M<<16&4294967295|M>>>16),M=x+(P^k^N)+V[2]+3299628645&4294967295,x=P+(M<<23&4294967295|M>>>9),M=N+(P^(x|~k))+V[0]+4096336452&4294967295,N=x+(M<<6&4294967295|M>>>26),M=k+(x^(N|~P))+V[7]+1126891415&4294967295,k=N+(M<<10&4294967295|M>>>22),M=P+(N^(k|~x))+V[14]+2878612391&4294967295,P=k+(M<<15&4294967295|M>>>17),M=x+(k^(P|~N))+V[5]+4237533241&4294967295,x=P+(M<<21&4294967295|M>>>11),M=N+(P^(x|~k))+V[12]+1700485571&4294967295,N=x+(M<<6&4294967295|M>>>26),M=k+(x^(N|~P))+V[3]+2399980690&4294967295,k=N+(M<<10&4294967295|M>>>22),M=P+(N^(k|~x))+V[10]+4293915773&4294967295,P=k+(M<<15&4294967295|M>>>17),M=x+(k^(P|~N))+V[1]+2240044497&4294967295,x=P+(M<<21&4294967295|M>>>11),M=N+(P^(x|~k))+V[8]+1873313359&4294967295,N=x+(M<<6&4294967295|M>>>26),M=k+(x^(N|~P))+V[15]+4264355552&4294967295,k=N+(M<<10&4294967295|M>>>22),M=P+(N^(k|~x))+V[6]+2734768916&4294967295,P=k+(M<<15&4294967295|M>>>17),M=x+(k^(P|~N))+V[13]+1309151649&4294967295,x=P+(M<<21&4294967295|M>>>11),M=N+(P^(x|~k))+V[4]+4149444226&4294967295,N=x+(M<<6&4294967295|M>>>26),M=k+(x^(N|~P))+V[11]+3174756917&4294967295,k=N+(M<<10&4294967295|M>>>22),M=P+(N^(k|~x))+V[2]+718787259&4294967295,P=k+(M<<15&4294967295|M>>>17),M=x+(k^(P|~N))+V[9]+3951481745&4294967295,D.g[0]=D.g[0]+N&4294967295,D.g[1]=D.g[1]+(P+(M<<21&4294967295|M>>>11))&4294967295,D.g[2]=D.g[2]+P&4294967295,D.g[3]=D.g[3]+k&4294967295}i.prototype.u=function(D,N){N===void 0&&(N=D.length);for(var x=N-this.blockSize,V=this.B,P=this.h,k=0;k<N;){if(P==0)for(;k<=x;)o(this,D,k),k+=this.blockSize;if(typeof D=="string"){for(;k<N;)if(V[P++]=D.charCodeAt(k++),P==this.blockSize){o(this,V),P=0;break}}else for(;k<N;)if(V[P++]=D[k++],P==this.blockSize){o(this,V),P=0;break}}this.h=P,this.o+=N},i.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var N=1;N<D.length-8;++N)D[N]=0;var x=8*this.o;for(N=D.length-8;N<D.length;++N)D[N]=x&255,x/=256;for(this.u(D),D=Array(16),N=x=0;4>N;++N)for(var V=0;32>V;V+=8)D[x++]=this.g[N]>>>V&255;return D};function a(D,N){var x=d;return Object.prototype.hasOwnProperty.call(x,D)?x[D]:x[D]=N(D)}function u(D,N){this.h=N;for(var x=[],V=!0,P=D.length-1;0<=P;P--){var k=D[P]|0;V&&k==N||(x[P]=k,V=!1)}this.g=x}var d={};function p(D){return-128<=D&&128>D?a(D,function(N){return new u([N|0],0>N?-1:0)}):new u([D|0],0>D?-1:0)}function m(D){if(isNaN(D)||!isFinite(D))return T;if(0>D)return B(m(-D));for(var N=[],x=1,V=0;D>=x;V++)N[V]=D/x|0,x*=4294967296;return new u(N,0)}function v(D,N){if(D.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(D.charAt(0)=="-")return B(v(D.substring(1),N));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=m(Math.pow(N,8)),V=T,P=0;P<D.length;P+=8){var k=Math.min(8,D.length-P),M=parseInt(D.substring(P,P+k),N);8>k?(k=m(Math.pow(N,k)),V=V.j(k).add(m(M))):(V=V.j(x),V=V.add(m(M)))}return V}var T=p(0),S=p(1),R=p(16777216);n=u.prototype,n.m=function(){if(z(this))return-B(this).m();for(var D=0,N=1,x=0;x<this.g.length;x++){var V=this.i(x);D+=(0<=V?V:4294967296+V)*N,N*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(L(this))return"0";if(z(this))return"-"+B(this).toString(D);for(var N=m(Math.pow(D,6)),x=this,V="";;){var P=ie(x,N).g;x=ee(x,P.j(N));var k=((0<x.g.length?x.g[0]:x.h)>>>0).toString(D);if(x=P,L(x))return k+V;for(;6>k.length;)k="0"+k;V=k+V}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function L(D){if(D.h!=0)return!1;for(var N=0;N<D.g.length;N++)if(D.g[N]!=0)return!1;return!0}function z(D){return D.h==-1}n.l=function(D){return D=ee(this,D),z(D)?-1:L(D)?0:1};function B(D){for(var N=D.g.length,x=[],V=0;V<N;V++)x[V]=~D.g[V];return new u(x,~D.h).add(S)}n.abs=function(){return z(this)?B(this):this},n.add=function(D){for(var N=Math.max(this.g.length,D.g.length),x=[],V=0,P=0;P<=N;P++){var k=V+(this.i(P)&65535)+(D.i(P)&65535),M=(k>>>16)+(this.i(P)>>>16)+(D.i(P)>>>16);V=M>>>16,k&=65535,M&=65535,x[P]=M<<16|k}return new u(x,x[x.length-1]&-2147483648?-1:0)};function ee(D,N){return D.add(B(N))}n.j=function(D){if(L(this)||L(D))return T;if(z(this))return z(D)?B(this).j(B(D)):B(B(this).j(D));if(z(D))return B(this.j(B(D)));if(0>this.l(R)&&0>D.l(R))return m(this.m()*D.m());for(var N=this.g.length+D.g.length,x=[],V=0;V<2*N;V++)x[V]=0;for(V=0;V<this.g.length;V++)for(var P=0;P<D.g.length;P++){var k=this.i(V)>>>16,M=this.i(V)&65535,We=D.i(P)>>>16,we=D.i(P)&65535;x[2*V+2*P]+=M*we,Y(x,2*V+2*P),x[2*V+2*P+1]+=k*we,Y(x,2*V+2*P+1),x[2*V+2*P+1]+=M*We,Y(x,2*V+2*P+1),x[2*V+2*P+2]+=k*We,Y(x,2*V+2*P+2)}for(V=0;V<N;V++)x[V]=x[2*V+1]<<16|x[2*V];for(V=N;V<2*N;V++)x[V]=0;return new u(x,0)};function Y(D,N){for(;(D[N]&65535)!=D[N];)D[N+1]+=D[N]>>>16,D[N]&=65535,N++}function W(D,N){this.g=D,this.h=N}function ie(D,N){if(L(N))throw Error("division by zero");if(L(D))return new W(T,T);if(z(D))return N=ie(B(D),N),new W(B(N.g),B(N.h));if(z(N))return N=ie(D,B(N)),new W(B(N.g),N.h);if(30<D.g.length){if(z(D)||z(N))throw Error("slowDivide_ only works with positive integers.");for(var x=S,V=N;0>=V.l(D);)x=de(x),V=de(V);var P=ue(x,1),k=ue(V,1);for(V=ue(V,2),x=ue(x,2);!L(V);){var M=k.add(V);0>=M.l(D)&&(P=P.add(x),k=M),V=ue(V,1),x=ue(x,1)}return N=ee(D,P.j(N)),new W(P,N)}for(P=T;0<=D.l(N);){for(x=Math.max(1,Math.floor(D.m()/N.m())),V=Math.ceil(Math.log(x)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),k=m(x),M=k.j(N);z(M)||0<M.l(D);)x-=V,k=m(x),M=k.j(N);L(k)&&(k=S),P=P.add(k),D=ee(D,M)}return new W(P,D)}n.A=function(D){return ie(this,D).h},n.and=function(D){for(var N=Math.max(this.g.length,D.g.length),x=[],V=0;V<N;V++)x[V]=this.i(V)&D.i(V);return new u(x,this.h&D.h)},n.or=function(D){for(var N=Math.max(this.g.length,D.g.length),x=[],V=0;V<N;V++)x[V]=this.i(V)|D.i(V);return new u(x,this.h|D.h)},n.xor=function(D){for(var N=Math.max(this.g.length,D.g.length),x=[],V=0;V<N;V++)x[V]=this.i(V)^D.i(V);return new u(x,this.h^D.h)};function de(D){for(var N=D.g.length+1,x=[],V=0;V<N;V++)x[V]=D.i(V)<<1|D.i(V-1)>>>31;return new u(x,D.h)}function ue(D,N){var x=N>>5;N%=32;for(var V=D.g.length-x,P=[],k=0;k<V;k++)P[k]=0<N?D.i(k+x)>>>N|D.i(k+x+1)<<32-N:D.i(k+x);return new u(P,D.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,cA=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=v,Rr=u}).apply(typeof z0<"u"?z0:typeof self<"u"?self:typeof window<"u"?window:{});var ad=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dA,tu,fA,vd,nm,hA,pA,mA;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,E,I){return h==Array.prototype||h==Object.prototype||(h[E]=I.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ad=="object"&&ad];for(var E=0;E<h.length;++E){var I=h[E];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var i=t(this);function o(h,E){if(E)e:{var I=i;h=h.split(".");for(var b=0;b<h.length-1;b++){var H=h[b];if(!(H in I))break e;I=I[H]}h=h[h.length-1],b=I[h],E=E(b),E!=b&&E!=null&&e(I,h,{configurable:!0,writable:!0,value:E})}}function a(h,E){h instanceof String&&(h+="");var I=0,b=!1,H={next:function(){if(!b&&I<h.length){var j=I++;return{value:E(j,h[j]),done:!1}}return b=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}o("Array.prototype.values",function(h){return h||function(){return a(this,function(E,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function p(h){var E=typeof h;return E=E!="object"?E:h?Array.isArray(h)?"array":E:"null",E=="array"||E=="object"&&typeof h.length=="number"}function m(h){var E=typeof h;return E=="object"&&h!=null||E=="function"}function v(h,E,I){return h.call.apply(h.bind,arguments)}function T(h,E,I){if(!h)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,b),h.apply(E,H)}}return function(){return h.apply(E,arguments)}}function S(h,E,I){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:T,S.apply(null,arguments)}function R(h,E){var I=Array.prototype.slice.call(arguments,1);return function(){var b=I.slice();return b.push.apply(b,arguments),h.apply(this,b)}}function L(h,E){function I(){}I.prototype=E.prototype,h.aa=E.prototype,h.prototype=new I,h.prototype.constructor=h,h.Qb=function(b,H,j){for(var le=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)le[nt-2]=arguments[nt];return E.prototype[H].apply(b,le)}}function z(h){const E=h.length;if(0<E){const I=Array(E);for(let b=0;b<E;b++)I[b]=h[b];return I}return[]}function B(h,E){for(let I=1;I<arguments.length;I++){const b=arguments[I];if(p(b)){const H=h.length||0,j=b.length||0;h.length=H+j;for(let le=0;le<j;le++)h[H+le]=b[le]}else h.push(b)}}class ee{constructor(E,I){this.i=E,this.j=I,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function Y(h){return/^[\s\xa0]*$/.test(h)}function W(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function ie(h){return ie[" "](h),h}ie[" "]=function(){};var de=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function ue(h,E,I){for(const b in h)E.call(I,h[b],b,h)}function D(h,E){for(const I in h)E.call(void 0,h[I],I,h)}function N(h){const E={};for(const I in h)E[I]=h[I];return E}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(h,E){let I,b;for(let H=1;H<arguments.length;H++){b=arguments[H];for(I in b)h[I]=b[I];for(let j=0;j<x.length;j++)I=x[j],Object.prototype.hasOwnProperty.call(b,I)&&(h[I]=b[I])}}function P(h){var E=1;h=h.split(":");const I=[];for(;0<E&&h.length;)I.push(h.shift()),E--;return h.length&&I.push(h.join(":")),I}function k(h){d.setTimeout(()=>{throw h},0)}function M(){var h=Je;let E=null;return h.g&&(E=h.g,h.g=h.g.next,h.g||(h.h=null),E.next=null),E}class We{constructor(){this.h=this.g=null}add(E,I){const b=we.get();b.set(E,I),this.h?this.h.next=b:this.g=b,this.h=b}}var we=new ee(()=>new $,h=>h.reset());class ${constructor(){this.next=this.g=this.h=null}set(E,I){this.h=E,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,ve=!1,Je=new We,Ye=()=>{const h=d.Promise.resolve(void 0);ae=()=>{h.then(O)}};var O=()=>{for(var h;h=M();){try{h.h.call(h.g)}catch(I){k(I)}var E=we;E.j(h),100>E.h&&(E.h++,h.next=E.g,E.g=h)}ve=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(h,E){this.type=h,this.g=this.target=E,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var he=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,E=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const I=()=>{};d.addEventListener("test",I,E),d.removeEventListener("test",I,E)}catch{}return h})();function Ae(h,E){if(oe.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var I=this.type=h.type,b=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=E,E=h.relatedTarget){if(de){e:{try{ie(E.nodeName);var H=!0;break e}catch{}H=!1}H||(E=null)}}else I=="mouseover"?E=h.fromElement:I=="mouseout"&&(E=h.toElement);this.relatedTarget=E,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Me[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ae.aa.h.call(this)}}L(Ae,oe);var Me={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ve="closure_listenable_"+(1e6*Math.random()|0),kt=0;function ft(h,E,I,b,H){this.listener=h,this.proxy=null,this.src=E,this.type=I,this.capture=!!b,this.ha=H,this.key=++kt,this.da=this.fa=!1}function Jn(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ui(h){this.src=h,this.g={},this.h=0}ui.prototype.add=function(h,E,I,b,H){var j=h.toString();h=this.g[j],h||(h=this.g[j]=[],this.h++);var le=bs(h,E,b,H);return-1<le?(E=h[le],I||(E.fa=!1)):(E=new ft(E,this.src,j,!!b,H),E.fa=I,h.push(E)),E};function Si(h,E){var I=E.type;if(I in h.g){var b=h.g[I],H=Array.prototype.indexOf.call(b,E,void 0),j;(j=0<=H)&&Array.prototype.splice.call(b,H,1),j&&(Jn(E),h.g[I].length==0&&(delete h.g[I],h.h--))}}function bs(h,E,I,b){for(var H=0;H<h.length;++H){var j=h[H];if(!j.da&&j.listener==E&&j.capture==!!I&&j.ha==b)return H}return-1}var Mn="closure_lm_"+(1e6*Math.random()|0),Ji={};function xs(h,E,I,b,H){if(Array.isArray(E)){for(var j=0;j<E.length;j++)xs(h,E[j],I,b,H);return null}return I=Dn(I),h&&h[Ve]?h.K(E,I,m(b)?!!b.capture:!1,H):Jr(h,E,I,!1,b,H)}function Jr(h,E,I,b,H,j){if(!E)throw Error("Invalid event type");var le=m(H)?!!H.capture:!!H,nt=Ke(h);if(nt||(h[Mn]=nt=new ui(h)),I=nt.add(E,I,b,le,j),I.proxy)return I;if(b=Lo(),I.proxy=b,b.src=h,b.listener=I,h.addEventListener)he||(H=le),H===void 0&&(H=!1),h.addEventListener(E.toString(),b,H);else if(h.attachEvent)h.attachEvent(ce(E.toString()),b);else if(h.addListener&&h.removeListener)h.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return I}function Lo(){function h(I){return E.call(h.src,h.listener,I)}const E=Ne;return h}function Ns(h,E,I,b,H){if(Array.isArray(E))for(var j=0;j<E.length;j++)Ns(h,E[j],I,b,H);else b=m(b)?!!b.capture:!!b,I=Dn(I),h&&h[Ve]?(h=h.i,E=String(E).toString(),E in h.g&&(j=h.g[E],I=bs(j,I,b,H),-1<I&&(Jn(j[I]),Array.prototype.splice.call(j,I,1),j.length==0&&(delete h.g[E],h.h--)))):h&&(h=Ke(h))&&(E=h.g[E.toString()],h=-1,E&&(h=bs(E,I,b,H)),(I=-1<h?E[h]:null)&&Yn(I))}function Yn(h){if(typeof h!="number"&&h&&!h.da){var E=h.src;if(E&&E[Ve])Si(E.i,h);else{var I=h.type,b=h.proxy;E.removeEventListener?E.removeEventListener(I,b,h.capture):E.detachEvent?E.detachEvent(ce(I),b):E.addListener&&E.removeListener&&E.removeListener(b),(I=Ke(E))?(Si(I,h),I.h==0&&(I.src=null,E[Mn]=null)):Jn(h)}}}function ce(h){return h in Ji?Ji[h]:Ji[h]="on"+h}function Ne(h,E){if(h.da)h=!0;else{E=new Ae(E,this);var I=h.listener,b=h.ha||h.src;h.fa&&Yn(h),h=I.call(b,E)}return h}function Ke(h){return h=h[Mn],h instanceof ui?h:null}var Qe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dn(h){return typeof h=="function"?h:(h[Qe]||(h[Qe]=function(E){return h.handleEvent(E)}),h[Qe])}function st(){Z.call(this),this.i=new ui(this),this.M=this,this.F=null}L(st,Z),st.prototype[Ve]=!0,st.prototype.removeEventListener=function(h,E,I,b){Ns(this,h,E,I,b)};function rt(h,E){var I,b=h.F;if(b)for(I=[];b;b=b.F)I.push(b);if(h=h.M,b=E.type||E,typeof E=="string")E=new oe(E,h);else if(E instanceof oe)E.target=E.target||h;else{var H=E;E=new oe(b,h),V(E,H)}if(H=!0,I)for(var j=I.length-1;0<=j;j--){var le=E.g=I[j];H=ht(le,b,!0,E)&&H}if(le=E.g=h,H=ht(le,b,!0,E)&&H,H=ht(le,b,!1,E)&&H,I)for(j=0;j<I.length;j++)le=E.g=I[j],H=ht(le,b,!1,E)&&H}st.prototype.N=function(){if(st.aa.N.call(this),this.i){var h=this.i,E;for(E in h.g){for(var I=h.g[E],b=0;b<I.length;b++)Jn(I[b]);delete h.g[E],h.h--}}this.F=null},st.prototype.K=function(h,E,I,b){return this.i.add(String(h),E,!1,I,b)},st.prototype.L=function(h,E,I,b){return this.i.add(String(h),E,!0,I,b)};function ht(h,E,I,b){if(E=h.i.g[String(E)],!E)return!0;E=E.concat();for(var H=!0,j=0;j<E.length;++j){var le=E[j];if(le&&!le.da&&le.capture==I){var nt=le.listener,Pt=le.ha||le.src;le.fa&&Si(h.i,le),H=nt.call(Pt,b)!==!1&&H}}return H&&!b.defaultPrevented}function ci(h,E,I){if(typeof h=="function")I&&(h=S(h,I));else if(h&&typeof h.handleEvent=="function")h=S(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:d.setTimeout(h,E||0)}function kn(h){h.g=ci(()=>{h.g=null,h.i&&(h.i=!1,kn(h))},h.l);const E=h.h;h.h=null,h.m.apply(null,E)}class Kn extends Z{constructor(E,I){super(),this.m=E,this.l=I,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:kn(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yr(h){Z.call(this),this.h=h,this.g={}}L(Yr,Z);var Ms=[];function on(h){ue(h.g,function(E,I){this.g.hasOwnProperty(I)&&Yn(E)},h),h.g={}}Yr.prototype.N=function(){Yr.aa.N.call(this),on(this)},Yr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $n=d.JSON.stringify,pn=d.JSON.parse,bf=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Wa(){}Wa.prototype.h=null;function Vu(h){return h.h||(h.h=h.i())}function Kr(){}var Ai={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ds(){oe.call(this,"d")}L(Ds,oe);function di(){oe.call(this,"c")}L(di,oe);var Qn={},ks=null;function Oo(){return ks=ks||new st}Qn.La="serverreachability";function ja(h){oe.call(this,Qn.La,h)}L(ja,oe);function Yi(h){const E=Oo();rt(E,new ja(E))}Qn.STAT_EVENT="statevent";function Ps(h,E){oe.call(this,Qn.STAT_EVENT,h),this.stat=E}L(Ps,oe);function Wt(h){const E=Oo();rt(E,new Ps(E,h))}Qn.Ma="timingevent";function Xa(h,E){oe.call(this,Qn.Ma,h),this.size=E}L(Xa,oe);function Vs(h,E){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},E)}function Us(){this.g=!0}Us.prototype.xa=function(){this.g=!1};function Za(h,E,I,b,H,j){h.info(function(){if(h.g)if(j)for(var le="",nt=j.split("&"),Pt=0;Pt<nt.length;Pt++){var Ue=nt[Pt].split("=");if(1<Ue.length){var Jt=Ue[0];Ue=Ue[1];var Yt=Jt.split("_");le=2<=Yt.length&&Yt[1]=="type"?le+(Jt+"="+Ue+"&"):le+(Jt+"=redacted&")}}else le=null;else le=j;return"XMLHTTP REQ ("+b+") [attempt "+H+"]: "+E+`
`+I+`
`+le})}function el(h,E,I,b,H,j,le){h.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+H+"]: "+E+`
`+I+`
`+j+" "+le})}function Ki(h,E,I,b){h.info(function(){return"XMLHTTP TEXT ("+E+"): "+Ci(h,I)+(b?" "+b:"")})}function Uu(h,E){h.info(function(){return"TIMEOUT: "+E})}Us.prototype.info=function(){};function Ci(h,E){if(!h.g)return E;if(!E)return null;try{var I=JSON.parse(E);if(I){for(h=0;h<I.length;h++)if(Array.isArray(I[h])){var b=I[h];if(!(2>b.length)){var H=b[1];if(Array.isArray(H)&&!(1>H.length)){var j=H[0];if(j!="noop"&&j!="stop"&&j!="close")for(var le=1;le<H.length;le++)H[le]=""}}}}return $n(I)}catch{return E}}var St={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},jt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ii;function Ls(){}L(Ls,Wa),Ls.prototype.g=function(){return new XMLHttpRequest},Ls.prototype.i=function(){return{}},Ii=new Ls;function wi(h,E,I,b){this.j=h,this.i=E,this.l=I,this.R=b||1,this.U=new Yr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lu}function Lu(){this.i=null,this.g="",this.h=!1}var tl={},$i={};function $r(h,E,I){h.L=1,h.v=jr(At(E)),h.m=I,h.P=!0,Qi(h,null)}function Qi(h,E){h.F=Date.now(),fi(h),h.A=At(h.v);var I=h.A,b=h.R;Array.isArray(b)||(b=[String(b)]),Xi(I.i,"t",b),h.C=0,I=h.j.J,h.h=new Lu,h.g=Zu(h.j,I?E:null,!h.m),0<h.O&&(h.M=new Kn(S(h.Y,h,h.g),h.O)),E=h.U,I=h.g,b=h.ca;var H="readystatechange";Array.isArray(H)||(H&&(Ms[0]=H.toString()),H=Ms);for(var j=0;j<H.length;j++){var le=xs(I,H[j],b||E.handleEvent,!1,E.h||E);if(!le)break;E.g[le.key]=le}E=h.H?N(h.H):{},h.m?(h.u||(h.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,E)):(h.u="GET",h.g.ea(h.A,h.u,null,E)),Yi(),Za(h.i,h.u,h.A,h.l,h.R,h.m)}wi.prototype.ca=function(h){h=h.target;const E=this.M;E&&yn(h)==3?E.j():this.Y(h)},wi.prototype.Y=function(h){try{if(h==this.g)e:{const Yt=yn(this.g);var E=this.g.Ba();const Ws=this.g.Z();if(!(3>Yt)&&(Yt!=3||this.g&&(this.h.h||this.g.oa()||eo(this.g)))){this.J||Yt!=4||E==7||(E==8||0>=Ws?Yi(3):Yi(2)),qo(this);var I=this.g.Z();this.X=I;t:if(Wi(this)){var b=eo(this.g);h="";var H=b.length,j=yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mn(this),Os(this);var le="";break t}this.h.i=new d.TextDecoder}for(E=0;E<H;E++)this.h.h=!0,h+=this.h.i.decode(b[E],{stream:!(j&&E==H-1)});b.length=0,this.h.g+=h,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=I==200,el(this.i,this.u,this.A,this.l,this.R,Yt,I),this.o){if(this.T&&!this.K){t:{if(this.g){var nt,Pt=this.g;if((nt=Pt.g?Pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(nt)){var Ue=nt;break t}}Ue=null}if(I=Ue)Ki(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ri(this,I);else{this.o=!1,this.s=3,Wt(12),mn(this),Os(this);break e}}if(this.P){I=!0;let Sn;for(;!this.J&&this.C<le.length;)if(Sn=Qr(this,le),Sn==$i){Yt==4&&(this.s=4,Wt(14),I=!1),Ki(this.i,this.l,null,"[Incomplete Response]");break}else if(Sn==tl){this.s=4,Wt(15),Ki(this.i,this.l,le,"[Invalid Chunk]"),I=!1;break}else Ki(this.i,this.l,Sn,null),Ri(this,Sn);if(Wi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Yt!=4||le.length!=0||this.h.h||(this.s=1,Wt(16),I=!1),this.o=this.o&&I,!I)Ki(this.i,this.l,le,"[Invalid Chunked Response]"),mn(this),Os(this);else if(0<le.length&&!this.W){this.W=!0;var Jt=this.j;Jt.g==this&&Jt.ba&&!Jt.M&&(Jt.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),fl(Jt),Jt.M=!0,Wt(11))}}else Ki(this.i,this.l,le,null),Ri(this,le);Yt==4&&mn(this),this.o&&!this.J&&(Yt==4?Wu(this.j,this):(this.o=!1,fi(this)))}else Gu(this.g),I==400&&0<le.indexOf("Unknown SID")?(this.s=3,Wt(12)):(this.s=0,Wt(13)),mn(this),Os(this)}}}catch{}finally{}};function Wi(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Qr(h,E){var I=h.C,b=E.indexOf(`
`,I);return b==-1?$i:(I=Number(E.substring(I,b)),isNaN(I)?tl:(b+=1,b+I>E.length?$i:(E=E.slice(b,b+I),h.C=b+I,E)))}wi.prototype.cancel=function(){this.J=!0,mn(this)};function fi(h){h.S=Date.now()+h.I,bt(h,h.I)}function bt(h,E){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Vs(S(h.ba,h),E)}function qo(h){h.B&&(d.clearTimeout(h.B),h.B=null)}wi.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Uu(this.i,this.A),this.L!=2&&(Yi(),Wt(17)),mn(this),this.s=2,Os(this)):bt(this,this.S-h)};function Os(h){h.j.G==0||h.J||Wu(h.j,h)}function mn(h){qo(h);var E=h.M;E&&typeof E.ma=="function"&&E.ma(),h.M=null,on(h.U),h.g&&(E=h.g,h.g=null,E.abort(),E.ma())}function Ri(h,E){try{var I=h.j;if(I.G!=0&&(I.g==h||qs(I.h,h))){if(!h.K&&qs(I.h,h)&&I.G==3){try{var b=I.Da.g.parse(E)}catch{b=null}if(Array.isArray(b)&&b.length==3){var H=b;if(H[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<h.F)$s(I),Ks(I);else break e;dl(I),Wt(18)}}else I.za=H[1],0<I.za-I.T&&37500>H[2]&&I.F&&I.v==0&&!I.C&&(I.C=Vs(S(I.Za,I),6e3));if(1>=Ou(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else es(I,11)}else if((h.K||I.g==h)&&$s(I),!Y(E))for(H=I.Da.g.parse(E),E=0;E<H.length;E++){let Ue=H[E];if(I.T=Ue[0],Ue=Ue[1],I.G==2)if(Ue[0]=="c"){I.K=Ue[1],I.ia=Ue[2];const Jt=Ue[3];Jt!=null&&(I.la=Jt,I.j.info("VER="+I.la));const Yt=Ue[4];Yt!=null&&(I.Aa=Yt,I.j.info("SVER="+I.Aa));const Ws=Ue[5];Ws!=null&&typeof Ws=="number"&&0<Ws&&(b=1.5*Ws,I.L=b,I.j.info("backChannelRequestTimeoutMs_="+b)),b=I;const Sn=h.g;if(Sn){const io=Sn.g?Sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(io){var j=b.h;j.g||io.indexOf("spdy")==-1&&io.indexOf("quic")==-1&&io.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Bs(j,j.h),j.h=null))}if(b.D){const ts=Sn.g?Sn.g.getResponseHeader("X-HTTP-Session-Id"):null;ts&&(b.ya=ts,je(b.I,b.D,ts))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-h.F,I.j.info("Handshake RTT: "+I.R+"ms")),b=I;var le=h;if(b.qa=Xu(b,b.J?b.ia:null,b.W),le.K){Wn(b.h,le);var nt=le,Pt=b.L;Pt&&(nt.I=Pt),nt.B&&(qo(nt),fi(nt)),b.g=le}else $u(b);0<I.i.length&&Ko(I)}else Ue[0]!="stop"&&Ue[0]!="close"||es(I,7);else I.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?es(I,7):ul(I):Ue[0]!="noop"&&I.l&&I.l.ta(Ue),I.v=0)}}Yi(4)}catch{}}var xf=class{constructor(h,E){this.g=h,this.map=E}};function nl(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function il(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ou(h){return h.h?1:h.g?h.g.size:0}function qs(h,E){return h.h?h.h==E:h.g?h.g.has(E):!1}function Bs(h,E){h.g?h.g.add(E):h.h=E}function Wn(h,E){h.h&&h.h==E?h.h=null:h.g&&h.g.has(E)&&h.g.delete(E)}nl.prototype.cancel=function(){if(this.i=gn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function gn(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let E=h.i;for(const I of h.g.values())E=E.concat(I.D);return E}return z(h.i)}function qu(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(p(h)){for(var E=[],I=h.length,b=0;b<I;b++)E.push(h[b]);return E}E=[],I=0;for(b in h)E[I++]=h[b];return E}function Nf(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(p(h)||typeof h=="string"){var E=[];h=h.length;for(var I=0;I<h;I++)E.push(I);return E}E=[],I=0;for(const b in h)E[I++]=b;return E}}}function Bo(h,E){if(h.forEach&&typeof h.forEach=="function")h.forEach(E,void 0);else if(p(h)||typeof h=="string")Array.prototype.forEach.call(h,E,void 0);else for(var I=Nf(h),b=qu(h),H=b.length,j=0;j<H;j++)E.call(void 0,b[j],I&&I[j],h)}var sl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fo(h,E){if(h){h=h.split("&");for(var I=0;I<h.length;I++){var b=h[I].indexOf("="),H=null;if(0<=b){var j=h[I].substring(0,b);H=h[I].substring(b+1)}else j=h[I];E(j,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function ji(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof ji){this.h=h.h,Fs(this,h.j),this.o=h.o,this.g=h.g,Wr(this,h.s),this.l=h.l;var E=h.i,I=new bi;I.i=E.i,E.g&&(I.g=new Map(E.g),I.h=E.h),zo(this,I),this.m=h.m}else h&&(E=String(h).match(sl))?(this.h=!1,Fs(this,E[1]||"",!0),this.o=zs(E[2]||""),this.g=zs(E[3]||"",!0),Wr(this,E[4]),this.l=zs(E[5]||"",!0),zo(this,E[6]||"",!0),this.m=zs(E[7]||"")):(this.h=!1,this.i=new bi(null,this.h))}ji.prototype.toString=function(){var h=[],E=this.j;E&&h.push(jn(E,rl,!0),":");var I=this.g;return(I||E=="file")&&(h.push("//"),(E=this.o)&&h.push(jn(E,rl,!0),"@"),h.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&h.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&h.push("/"),h.push(jn(I,I.charAt(0)=="/"?ol:Bu,!0))),(I=this.i.toString())&&h.push("?",I),(I=this.m)&&h.push("#",jn(I,kf)),h.join("")};function At(h){return new ji(h)}function Fs(h,E,I){h.j=I?zs(E,!0):E,h.j&&(h.j=h.j.replace(/:$/,""))}function Wr(h,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);h.s=E}else h.s=null}function zo(h,E,I){E instanceof bi?(h.i=E,Fu(h.i,h.h)):(I||(E=jn(E,Df)),h.i=new bi(E,h.h))}function je(h,E,I){h.i.set(E,I)}function jr(h){return je(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function zs(h,E){return h?E?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function jn(h,E,I){return typeof h=="string"?(h=encodeURI(h).replace(E,Mf),I&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Mf(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var rl=/[#\/\?@]/g,Bu=/[#\?:]/g,ol=/[#\?]/g,Df=/[#\?@]/g,kf=/#/g;function bi(h,E){this.h=this.g=null,this.i=h||null,this.j=!!E}function Gt(h){h.g||(h.g=new Map,h.h=0,h.i&&Fo(h.i,function(E,I){h.add(decodeURIComponent(E.replace(/\+/g," ")),I)}))}n=bi.prototype,n.add=function(h,E){Gt(this),this.i=null,h=Pn(this,h);var I=this.g.get(h);return I||this.g.set(h,I=[]),I.push(E),this.h+=1,this};function Ho(h,E){Gt(h),E=Pn(h,E),h.g.has(E)&&(h.i=null,h.h-=h.g.get(E).length,h.g.delete(E))}function Go(h,E){return Gt(h),E=Pn(h,E),h.g.has(E)}n.forEach=function(h,E){Gt(this),this.g.forEach(function(I,b){I.forEach(function(H){h.call(E,H,b,this)},this)},this)},n.na=function(){Gt(this);const h=Array.from(this.g.values()),E=Array.from(this.g.keys()),I=[];for(let b=0;b<E.length;b++){const H=h[b];for(let j=0;j<H.length;j++)I.push(E[b])}return I},n.V=function(h){Gt(this);let E=[];if(typeof h=="string")Go(this,h)&&(E=E.concat(this.g.get(Pn(this,h))));else{h=Array.from(this.g.values());for(let I=0;I<h.length;I++)E=E.concat(h[I])}return E},n.set=function(h,E){return Gt(this),this.i=null,h=Pn(this,h),Go(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[E]),this.h+=1,this},n.get=function(h,E){return h?(h=this.V(h),0<h.length?String(h[0]):E):E};function Xi(h,E,I){Ho(h,E),0<I.length&&(h.i=null,h.g.set(Pn(h,E),z(I)),h.h+=I.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],E=Array.from(this.g.keys());for(var I=0;I<E.length;I++){var b=E[I];const j=encodeURIComponent(String(b)),le=this.V(b);for(b=0;b<le.length;b++){var H=j;le[b]!==""&&(H+="="+encodeURIComponent(String(le[b]))),h.push(H)}}return this.i=h.join("&")};function Pn(h,E){return E=String(E),h.j&&(E=E.toLowerCase()),E}function Fu(h,E){E&&!h.j&&(Gt(h),h.i=null,h.g.forEach(function(I,b){var H=b.toLowerCase();b!=H&&(Ho(this,b),Xi(this,H,I))},h)),h.j=E}function al(h,E){const I=new Us;if(d.Image){const b=new Image;b.onload=R(En,I,"TestLoadImage: loaded",!0,E,b),b.onerror=R(En,I,"TestLoadImage: error",!1,E,b),b.onabort=R(En,I,"TestLoadImage: abort",!1,E,b),b.ontimeout=R(En,I,"TestLoadImage: timeout",!1,E,b),d.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=h}else E(!1)}function zu(h,E){const I=new Us,b=new AbortController,H=setTimeout(()=>{b.abort(),En(I,"TestPingServer: timeout",!1,E)},1e4);fetch(h,{signal:b.signal}).then(j=>{clearTimeout(H),j.ok?En(I,"TestPingServer: ok",!0,E):En(I,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(H),En(I,"TestPingServer: error",!1,E)})}function En(h,E,I,b,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),b(I)}catch{}}function hi(){this.g=new bf}function ll(h,E,I){const b=I||"";try{Bo(h,function(H,j){let le=H;m(H)&&(le=$n(H)),E.push(b+j+"="+encodeURIComponent(le))})}catch(H){throw E.push(b+"type="+encodeURIComponent("_badmap")),H}}function xi(h){this.l=h.Ub||null,this.j=h.eb||!1}L(xi,Wa),xi.prototype.g=function(){return new Vn(this.l,this.j)},xi.prototype.i=(function(h){return function(){return h}})({});function Vn(h,E){st.call(this),this.D=h,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}L(Vn,st),n=Vn.prototype,n.open=function(h,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=E,this.readyState=1,Hs(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(E.body=h),(this.D||d).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ni(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Hs(this)),this.g&&(this.readyState=3,Hs(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jo(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jo(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var E=h.value?h.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!h.done}))&&(this.response=this.responseText+=E)}h.done?Ni(this):Hs(this),this.readyState==3&&Jo(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Ni(this))},n.Qa=function(h){this.g&&(this.response=h,Ni(this))},n.ga=function(){this.g&&Ni(this)};function Ni(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Hs(h)}n.setRequestHeader=function(h,E){this.u.append(h,E)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],E=this.h.entries();for(var I=E.next();!I.done;)I=I.value,h.push(I[0]+": "+I[1]),I=E.next();return h.join(`\r
`)};function Hs(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Vn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Xr(h){let E="";return ue(h,function(I,b){E+=b,E+=":",E+=I,E+=`\r
`}),E}function Gs(h,E,I){e:{for(b in I){var b=!1;break e}b=!0}b||(I=Xr(I),typeof h=="string"?I!=null&&encodeURIComponent(String(I)):je(h,E,I))}function pt(h){st.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}L(pt,st);var an=/^https?$/i,Zi=["POST","PUT"];n=pt.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,E,I,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);E=E?E.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ii.g(),this.v=this.o?Vu(this.o):Vu(Ii),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(E,String(h),!0),this.B=!1}catch(j){Zr(this,j);return}if(h=I||"",I=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var H in b)I.set(H,b[H]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const j of b.keys())I.set(j,b.get(j));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(I.keys()).find(j=>j.toLowerCase()=="content-type"),H=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Zi,E,void 0))||b||H||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,le]of I)this.g.setRequestHeader(j,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Yo(this),this.u=!0,this.g.send(h),this.u=!1}catch(j){Zr(this,j)}};function Zr(h,E){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=E,h.m=5,Js(h),Ys(h)}function Js(h){h.A||(h.A=!0,rt(h,"complete"),rt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,rt(this,"complete"),rt(this,"abort"),Ys(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ys(this,!0)),pt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Hu(this):this.bb())},n.bb=function(){Hu(this)};function Hu(h){if(h.h&&typeof u<"u"&&(!h.v[1]||yn(h)!=4||h.Z()!=2)){if(h.u&&yn(h)==4)ci(h.Ea,0,h);else if(rt(h,"readystatechange"),yn(h)==4){h.h=!1;try{const le=h.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var I;if(!(I=E)){var b;if(b=le===0){var H=String(h.D).match(sl)[1]||null;!H&&d.self&&d.self.location&&(H=d.self.location.protocol.slice(0,-1)),b=!an.test(H?H.toLowerCase():"")}I=b}if(I)rt(h,"complete"),rt(h,"success");else{h.m=6;try{var j=2<yn(h)?h.g.statusText:""}catch{j=""}h.l=j+" ["+h.Z()+"]",Js(h)}}finally{Ys(h)}}}}function Ys(h,E){if(h.g){Yo(h);const I=h.g,b=h.v[0]?()=>{}:null;h.g=null,h.v=null,E||rt(h,"ready");try{I.onreadystatechange=b}catch{}}}function Yo(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function yn(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<yn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var E=this.g.responseText;return h&&E.indexOf(h)==0&&(E=E.substring(h.length)),pn(E)}};function eo(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Gu(h){const E={};h=(h.g&&2<=yn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<h.length;b++){if(Y(h[b]))continue;var I=P(h[b]);const H=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const j=E[H]||[];E[H]=j,j.push(I)}D(E,function(b){return b.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function to(h,E,I){return I&&I.internalChannelParams&&I.internalChannelParams[h]||E}function Ju(h){this.Aa=0,this.i=[],this.j=new Us,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=to("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=to("baseRetryDelayMs",5e3,h),this.cb=to("retryDelaySeedMs",1e4,h),this.Wa=to("forwardChannelMaxRetries",2,h),this.wa=to("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new nl(h&&h.concurrentRequestLimit),this.Da=new hi,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ju.prototype,n.la=8,n.G=1,n.connect=function(h,E,I,b){Wt(0),this.W=h,this.H=E||{},I&&b!==void 0&&(this.H.OSID=I,this.H.OAID=b),this.F=this.X,this.I=Xu(this,null,this.W),Ko(this)};function ul(h){if(Yu(h),h.G==3){var E=h.U++,I=At(h.I);if(je(I,"SID",h.K),je(I,"RID",E),je(I,"TYPE","terminate"),no(h,I),E=new wi(h,h.j,E),E.L=2,E.v=jr(At(I)),I=!1,d.navigator&&d.navigator.sendBeacon)try{I=d.navigator.sendBeacon(E.v.toString(),"")}catch{}!I&&d.Image&&(new Image().src=E.v,I=!0),I||(E.g=Zu(E.j,null),E.g.ea(E.v)),E.F=Date.now(),fi(E)}hl(h)}function Ks(h){h.g&&(fl(h),h.g.cancel(),h.g=null)}function Yu(h){Ks(h),h.u&&(d.clearTimeout(h.u),h.u=null),$s(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function Ko(h){if(!il(h.h)&&!h.s){h.s=!0;var E=h.Ga;ae||Ye(),ve||(ae(),ve=!0),Je.add(E,h),h.B=0}}function Pf(h,E){return Ou(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=E.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Vs(S(h.Ga,h,E),ju(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const H=new wi(this,this.j,h);let j=this.o;if(this.S&&(j?(j=N(j),V(j,this.S)):j=this.S),this.m!==null||this.O||(H.H=j,j=null),this.P)e:{for(var E=0,I=0;I<this.i.length;I++){t:{var b=this.i[I];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(E+=b,4096<E){E=I;break e}if(E===4096||I===this.i.length-1){E=I+1;break e}}E=1e3}else E=1e3;E=cl(this,H,E),I=At(this.I),je(I,"RID",h),je(I,"CVER",22),this.D&&je(I,"X-HTTP-Session-Id",this.D),no(this,I),j&&(this.O?E="headers="+encodeURIComponent(String(Xr(j)))+"&"+E:this.m&&Gs(I,this.m,j)),Bs(this.h,H),this.Ua&&je(I,"TYPE","init"),this.P?(je(I,"$req",E),je(I,"SID","null"),H.T=!0,$r(H,I,null)):$r(H,I,E),this.G=2}}else this.G==3&&(h?Ku(this,h):this.i.length==0||il(this.h)||Ku(this))};function Ku(h,E){var I;E?I=E.l:I=h.U++;const b=At(h.I);je(b,"SID",h.K),je(b,"RID",I),je(b,"AID",h.T),no(h,b),h.m&&h.o&&Gs(b,h.m,h.o),I=new wi(h,h.j,I,h.B+1),h.m===null&&(I.H=h.o),E&&(h.i=E.D.concat(h.i)),E=cl(h,I,1e3),I.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Bs(h.h,I),$r(I,b,E)}function no(h,E){h.H&&ue(h.H,function(I,b){je(E,b,I)}),h.l&&Bo({},function(I,b){je(E,b,I)})}function cl(h,E,I){I=Math.min(h.i.length,I);var b=h.l?S(h.l.Na,h.l,h):null;e:{var H=h.i;let j=-1;for(;;){const le=["count="+I];j==-1?0<I?(j=H[0].g,le.push("ofs="+j)):j=0:le.push("ofs="+j);let nt=!0;for(let Pt=0;Pt<I;Pt++){let Ue=H[Pt].g;const Jt=H[Pt].map;if(Ue-=j,0>Ue)j=Math.max(0,H[Pt].g-100),nt=!1;else try{ll(Jt,le,"req"+Ue+"_")}catch{b&&b(Jt)}}if(nt){b=le.join("&");break e}}}return h=h.i.splice(0,I),E.D=h,b}function $u(h){if(!h.g&&!h.u){h.Y=1;var E=h.Fa;ae||Ye(),ve||(ae(),ve=!0),Je.add(E,h),h.v=0}}function dl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Vs(S(h.Fa,h),ju(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Qu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Vs(S(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Wt(10),Ks(this),Qu(this))};function fl(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Qu(h){h.g=new wi(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var E=At(h.qa);je(E,"RID","rpc"),je(E,"SID",h.K),je(E,"AID",h.T),je(E,"CI",h.F?"0":"1"),!h.F&&h.ja&&je(E,"TO",h.ja),je(E,"TYPE","xmlhttp"),no(h,E),h.m&&h.o&&Gs(E,h.m,h.o),h.L&&(h.g.I=h.L);var I=h.g;h=h.ia,I.L=1,I.v=jr(At(E)),I.m=null,I.P=!0,Qi(I,h)}n.Za=function(){this.C!=null&&(this.C=null,Ks(this),dl(this),Wt(19))};function $s(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Wu(h,E){var I=null;if(h.g==E){$s(h),fl(h),h.g=null;var b=2}else if(qs(h.h,E))I=E.D,Wn(h.h,E),b=1;else return;if(h.G!=0){if(E.o)if(b==1){I=E.m?E.m.length:0,E=Date.now()-E.F;var H=h.B;b=Oo(),rt(b,new Xa(b,I)),Ko(h)}else $u(h);else if(H=E.s,H==3||H==0&&0<E.X||!(b==1&&Pf(h,E)||b==2&&dl(h)))switch(I&&0<I.length&&(E=h.h,E.i=E.i.concat(I)),H){case 1:es(h,5);break;case 4:es(h,10);break;case 3:es(h,6);break;default:es(h,2)}}}function ju(h,E){let I=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(I*=2),I*E}function es(h,E){if(h.j.info("Error code "+E),E==2){var I=S(h.fb,h),b=h.Xa;const H=!b;b=new ji(b||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Fs(b,"https"),jr(b),H?al(b.toString(),I):zu(b.toString(),I)}else Wt(2);h.G=0,h.l&&h.l.sa(E),hl(h),Yu(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Wt(2)):(this.j.info("Failed to ping google.com"),Wt(1))};function hl(h){if(h.G=0,h.ka=[],h.l){const E=gn(h.h);(E.length!=0||h.i.length!=0)&&(B(h.ka,E),B(h.ka,h.i),h.h.i.length=0,z(h.i),h.i.length=0),h.l.ra()}}function Xu(h,E,I){var b=I instanceof ji?At(I):new ji(I);if(b.g!="")E&&(b.g=E+"."+b.g),Wr(b,b.s);else{var H=d.location;b=H.protocol,E=E?E+"."+H.hostname:H.hostname,H=+H.port;var j=new ji(null);b&&Fs(j,b),E&&(j.g=E),H&&Wr(j,H),I&&(j.l=I),b=j}return I=h.D,E=h.ya,I&&E&&je(b,I,E),je(b,"VER",h.la),no(h,b),b}function Zu(h,E,I){if(E&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=h.Ca&&!h.pa?new pt(new xi({eb:I})):new pt(h.pa),E.Ha(h.J),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ec(){}n=ec.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function $o(){}$o.prototype.g=function(h,E){return new _n(h,E)};function _n(h,E){st.call(this),this.g=new Ju(E),this.l=h,this.h=E&&E.messageUrlParams||null,h=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(h?h["X-WebChannel-Content-Type"]=E.messageContentType:h={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(h?h["X-WebChannel-Client-Profile"]=E.va:h={"X-WebChannel-Client-Profile":E.va}),this.g.S=h,(h=E&&E.Sb)&&!Y(h)&&(this.g.m=h),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!Y(E)&&(this.g.D=E,h=this.h,h!==null&&E in h&&(h=this.h,E in h&&delete h[E])),this.j=new Qs(this)}L(_n,st),_n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){ul(this.g)},_n.prototype.o=function(h){var E=this.g;if(typeof h=="string"){var I={};I.__data__=h,h=I}else this.u&&(I={},I.__data__=$n(h),h=I);E.i.push(new xf(E.Ya++,h)),E.G==3&&Ko(E)},_n.prototype.N=function(){this.g.l=null,delete this.j,ul(this.g),delete this.g,_n.aa.N.call(this)};function tc(h){Ds.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var E=h.__sm__;if(E){e:{for(const I in E){h=I;break e}h=void 0}(this.i=h)&&(h=this.i,E=E!==null&&h in E?E[h]:void 0),this.data=E}else this.data=h}L(tc,Ds);function nc(){di.call(this),this.status=1}L(nc,di);function Qs(h){this.g=h}L(Qs,ec),Qs.prototype.ua=function(){rt(this.g,"a")},Qs.prototype.ta=function(h){rt(this.g,new tc(h))},Qs.prototype.sa=function(h){rt(this.g,new nc)},Qs.prototype.ra=function(){rt(this.g,"b")},$o.prototype.createWebChannel=$o.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,mA=function(){return new $o},pA=function(){return Oo()},hA=Qn,nm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},St.NO_ERROR=0,St.TIMEOUT=8,St.HTTP_ERROR=6,vd=St,jt.COMPLETE="complete",fA=jt,Kr.EventType=Ai,Ai.OPEN="a",Ai.CLOSE="b",Ai.ERROR="c",Ai.MESSAGE="d",st.prototype.listen=st.prototype.K,tu=Kr,pt.prototype.listenOnce=pt.prototype.L,pt.prototype.getLastError=pt.prototype.Ka,pt.prototype.getLastErrorCode=pt.prototype.Ba,pt.prototype.getStatus=pt.prototype.Z,pt.prototype.getResponseJson=pt.prototype.Oa,pt.prototype.getResponseText=pt.prototype.oa,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Ha,dA=pt}).apply(typeof ad<"u"?ad:typeof self<"u"?self:typeof window<"u"?window:{});const H0="@firebase/firestore",G0="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ha="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=new Dm("@firebase/firestore");function Aa(){return bo.logLevel}function pe(n,...e){if(bo.logLevel<=ze.DEBUG){const t=e.map(Ym);bo.debug(`Firestore (${Ha}): ${n}`,...t)}}function As(n,...e){if(bo.logLevel<=ze.ERROR){const t=e.map(Ym);bo.error(`Firestore (${Ha}): ${n}`,...t)}}function Mr(n,...e){if(bo.logLevel<=ze.WARN){const t=e.map(Ym);bo.warn(`Firestore (${Ha}): ${n}`,...t)}}function Ym(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,gA(n,i,t)}function gA(n,e,t){let i=`FIRESTORE (${Ha}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw As(i),new Error(i)}function it(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||gA(e,o,i)}function xe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends Gi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class IN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(cn.UNAUTHENTICATED)))}shutdown(){}}class wN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class RN{constructor(e){this.t=e,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){it(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let a=new br;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new br,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const p=a;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},d=p=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new br)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(it(typeof i.accessToken=="string",31837,{l:i}),new yA(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string",2055,{h:e}),new cn(e)}}class bN{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class xN{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new bN(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(cn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class J0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class NN{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){it(this.o===void 0,3512);const i=a=>{a.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,pe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const o=a=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new J0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(it(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new J0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=MN(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%62))}return i}}function Le(n,e){return n<e?-1:n>e?1:0}function im(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return Le(i,o);{const a=_A(),u=DN(a.encode(Y0(n,t)),a.encode(Y0(e,t)));return u!==0?u:Le(i,o)}}t+=i>65535?2:1}return Le(n.length,e.length)}function Y0(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function DN(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Le(n[t],e[t]);return Le(n.length,e.length)}function La(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="__name__";class Vi{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ie(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Vi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=Vi.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return Le(e.length,t.length)}static compareSegments(e,t){const i=Vi.isNumericId(e),o=Vi.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Vi.extractNumericId(e).compare(Vi.extractNumericId(t)):im(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Rr.fromString(e.substring(4,e.length-2))}}class _t extends Vi{construct(e,t,i){return new _t(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new _e(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new _t(t)}static emptyPath(){return new _t([])}}const kN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sn extends Vi{construct(e,t,i){return new sn(e,t,i)}static isValidIdentifier(e){return kN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===K0}static keyField(){return new sn([K0])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new _e(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new _e(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new _e(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(i+=d,o++):(a(),o++)}if(a(),u)throw new _e(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sn(t)}static emptyPath(){return new sn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(_t.fromString(e))}static fromName(e){return new Ee(_t.fromString(e).popFirst(5))}static empty(){return new Ee(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return _t.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new _t(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(n,e,t){if(!t)throw new _e(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function PN(n,e,t,i){if(e===!0&&i===!0)throw new _e(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function $0(n){if(!Ee.isDocumentKey(n))throw new _e(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Q0(n){if(Ee.isDocumentKey(n))throw new _e(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function TA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function $m(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie(12329,{type:typeof n})}function xo(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=$m(n);throw new _e(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(n,e){const t={typeString:n};return e&&(t.value=e),t}function xu(n,e){if(!TA(n))throw new _e(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(o&&typeof u!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new _e(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0=-62135596800,j0=1e6;class vt{static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*j0);return new vt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<W0)throw new _e(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/j0}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:vt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(xu(e,vt._jsonSchema))return new vt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-W0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}vt._jsonSchemaVersion="firestore/timestamp/1.0",vt._jsonSchema={type:Bt("string",vt._jsonSchemaVersion),seconds:Bt("number"),nanoseconds:Bt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new vt(0,0))}static max(){return new Re(new vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yu=-1;function VN(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(i===1e9?new vt(t+1,0):new vt(t,i));return new Dr(o,Ee.empty(),e)}function UN(n){return new Dr(n.readTime,n.key,yu)}class Dr{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Dr(Re.min(),Ee.empty(),yu)}static max(){return new Dr(Re.max(),Ee.empty(),yu)}}function LN(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:Le(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==ON)throw n;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,i)=>{t(e)}))}static reject(e){return new se(((t,i)=>{i(e)}))}static waitFor(e){return new se(((t,i)=>{let o=0,a=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++a,u&&a===o&&t()}),(p=>i(p)))})),u=!0,a===o&&t()}))}static or(e){let t=se.resolve(!1);for(const i of e)t=t.next((o=>o?se.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,a)=>{i.push(t.call(this,o,a))})),this.waitFor(i)}static mapArray(e,t){return new se(((i,o)=>{const a=e.length,u=new Array(a);let d=0;for(let p=0;p<a;p++){const m=p;t(e[m]).next((v=>{u[m]=v,++d,d===a&&i(u)}),(v=>o(v)))}}))}static doWhile(e,t){return new se(((i,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):i()};a()}))}}function BN(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ja(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}nf.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm=-1;function sf(n){return n==null}function Vd(n){return n===0&&1/n==-1/0}function FN(n){return typeof n=="number"&&Number.isInteger(n)&&!Vd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="";function zN(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=X0(e)),e=HN(n.get(t),e);return X0(e)}function HN(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case EA:t+="";break;default:t+=a}}return t}function X0(n){return n+EA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function SA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,t){this.comparator=e,this.root=t||nn.EMPTY}insert(e,t){return new Et(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nn.BLACK,null,null))}remove(e){return new Et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ld(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ld(this.root,e,this.comparator,!1)}getReverseIterator(){return new ld(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ld(this.root,e,this.comparator,!0)}}class ld{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nn{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??nn.RED,this.left=o??nn.EMPTY,this.right=a??nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new nn(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return nn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}nn.EMPTY=null,nn.RED=!0,nn.BLACK=!1;nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,i,o,a){return this}insert(e,t,i){return new nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new eT(this.data.getIterator())}getIteratorFrom(e){return new eT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Ht)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ht(this.comparator);return t.data=e,t}}class eT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.fields=e,e.sort(sn.comparator)}static empty(){return new Hn([])}unionWith(e){let t=new Ht(sn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Hn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return La(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new AA("Invalid base64 string: "+a):a}})(e);return new rn(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new rn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const GN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kr(n){if(it(!!n,39018),typeof n=="string"){let e=0;const t=GN.exec(n);if(it(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Mt(n.seconds),nanos:Mt(n.nanos)}}function Mt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Pr(n){return typeof n=="string"?rn.fromBase64String(n):rn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA="server_timestamp",IA="__type__",wA="__previous_value__",RA="__local_write_time__";function Wm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[IA])===null||t===void 0?void 0:t.stringValue)===CA}function rf(n){const e=n.mapValue.fields[wA];return Wm(e)?rf(e):e}function _u(n){const e=kr(n.mapValue.fields[RA].timestampValue);return new vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e,t,i,o,a,u,d,p,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=m,this.isUsingEmulator=v}}const Ud="(default)";class vu{constructor(e,t){this.projectId=e,this.database=t||Ud}static empty(){return new vu("","")}get isDefaultDatabase(){return this.database===Ud}isEqual(e){return e instanceof vu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="__type__",YN="__max__",ud={mapValue:{}},xA="__vector__",Ld="value";function Vr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Wm(n)?4:$N(n)?9007199254740991:KN(n)?10:11:Ie(28295,{value:n})}function zi(n,e){if(n===e)return!0;const t=Vr(n);if(t!==Vr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return _u(n).isEqual(_u(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=kr(o.timestampValue),d=kr(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return Pr(o.bytesValue).isEqual(Pr(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return Mt(o.geoPointValue.latitude)===Mt(a.geoPointValue.latitude)&&Mt(o.geoPointValue.longitude)===Mt(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return Mt(o.integerValue)===Mt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=Mt(o.doubleValue),d=Mt(a.doubleValue);return u===d?Vd(u)===Vd(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return La(n.arrayValue.values||[],e.arrayValue.values||[],zi);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(Z0(u)!==Z0(d))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(d[p]===void 0||!zi(u[p],d[p])))return!1;return!0})(n,e);default:return Ie(52216,{left:n})}}function Tu(n,e){return(n.values||[]).find((t=>zi(t,e)))!==void 0}function Oa(n,e){if(n===e)return 0;const t=Vr(n),i=Vr(e);if(t!==i)return Le(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=Mt(a.integerValue||a.doubleValue),p=Mt(u.integerValue||u.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return tT(n.timestampValue,e.timestampValue);case 4:return tT(_u(n),_u(e));case 5:return im(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=Pr(a),p=Pr(u);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),p=u.split("/");for(let m=0;m<d.length&&m<p.length;m++){const v=Le(d[m],p[m]);if(v!==0)return v}return Le(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=Le(Mt(a.latitude),Mt(u.latitude));return d!==0?d:Le(Mt(a.longitude),Mt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return nT(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var d,p,m,v;const T=a.fields||{},S=u.fields||{},R=(d=T[Ld])===null||d===void 0?void 0:d.arrayValue,L=(p=S[Ld])===null||p===void 0?void 0:p.arrayValue,z=Le(((m=R==null?void 0:R.values)===null||m===void 0?void 0:m.length)||0,((v=L==null?void 0:L.values)===null||v===void 0?void 0:v.length)||0);return z!==0?z:nT(R,L)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===ud.mapValue&&u===ud.mapValue)return 0;if(a===ud.mapValue)return 1;if(u===ud.mapValue)return-1;const d=a.fields||{},p=Object.keys(d),m=u.fields||{},v=Object.keys(m);p.sort(),v.sort();for(let T=0;T<p.length&&T<v.length;++T){const S=im(p[T],v[T]);if(S!==0)return S;const R=Oa(d[p[T]],m[v[T]]);if(R!==0)return R}return Le(p.length,v.length)})(n.mapValue,e.mapValue);default:throw Ie(23264,{le:t})}}function tT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Le(n,e);const t=kr(n),i=kr(e),o=Le(t.seconds,i.seconds);return o!==0?o:Le(t.nanos,i.nanos)}function nT(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=Oa(t[o],i[o]);if(a)return a}return Le(t.length,i.length)}function qa(n){return sm(n)}function sm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=kr(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Pr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ee.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=sm(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${sm(t.fields[u])}`;return o+"}"})(n.mapValue):Ie(61005,{value:n})}function Td(n){switch(Vr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=rf(n);return e?16+Td(e):16;case 5:return 2*n.stringValue.length;case 6:return Pr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,a)=>o+Td(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return zr(i.fields,((a,u)=>{o+=a.length+Td(u)})),o})(n.mapValue);default:throw Ie(13486,{value:n})}}function rm(n){return!!n&&"integerValue"in n}function jm(n){return!!n&&"arrayValue"in n}function iT(n){return!!n&&"nullValue"in n}function sT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ed(n){return!!n&&"mapValue"in n}function KN(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[bA])===null||t===void 0?void 0:t.stringValue)===xA}function lu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return zr(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=lu(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=lu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function $N(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===YN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.value=e}static empty(){return new Nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Ed(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lu(t)}setAll(e){let t=sn.emptyPath(),i={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=d.popLast()}u?i[d.lastSegment()]=lu(u):o.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());Ed(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Ed(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){zr(t,((o,a)=>e[o]=a));for(const o of i)delete e[o]}clone(){return new Nn(lu(this.value))}}function NA(n){const e=[];return zr(n.fields,((t,i)=>{const o=new sn([t]);if(Ed(i)){const a=NA(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new Hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,t,i,o,a,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new dn(e,0,Re.min(),Re.min(),Re.min(),Nn.empty(),0)}static newFoundDocument(e,t,i,o){return new dn(e,1,t,Re.min(),i,o,0)}static newNoDocument(e,t){return new dn(e,2,t,Re.min(),Re.min(),Nn.empty(),0)}static newUnknownDocument(e,t){return new dn(e,3,t,Re.min(),Re.min(),Nn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,t){this.position=e,this.inclusive=t}}function rT(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?i=Ee.comparator(Ee.fromName(u.referenceValue),t.key):i=Oa(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function oT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!zi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,t="asc"){this.field=e,this.dir=t}}function QN(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{}class zt extends MA{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new jN(e,t,i):t==="array-contains"?new e2(e,i):t==="in"?new t2(e,i):t==="not-in"?new n2(e,i):t==="array-contains-any"?new i2(e,i):new zt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new XN(e,i):new ZN(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Oa(t,this.value)):t!==null&&Vr(this.value)===Vr(t)&&this.matchesComparison(Oa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Hi extends MA{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Hi(e,t)}matches(e){return DA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function DA(n){return n.op==="and"}function kA(n){return WN(n)&&DA(n)}function WN(n){for(const e of n.filters)if(e instanceof Hi)return!1;return!0}function om(n){if(n instanceof zt)return n.field.canonicalString()+n.op.toString()+qa(n.value);if(kA(n))return n.filters.map((e=>om(e))).join(",");{const e=n.filters.map((t=>om(t))).join(",");return`${n.op}(${e})`}}function PA(n,e){return n instanceof zt?(function(i,o){return o instanceof zt&&i.op===o.op&&i.field.isEqual(o.field)&&zi(i.value,o.value)})(n,e):n instanceof Hi?(function(i,o){return o instanceof Hi&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,u,d)=>a&&PA(u,o.filters[d])),!0):!1})(n,e):void Ie(19439)}function VA(n){return n instanceof zt?(function(t){return`${t.field.canonicalString()} ${t.op} ${qa(t.value)}`})(n):n instanceof Hi?(function(t){return t.op.toString()+" {"+t.getFilters().map(VA).join(" ,")+"}"})(n):"Filter"}class jN extends zt{constructor(e,t,i){super(e,t,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class XN extends zt{constructor(e,t){super(e,"in",t),this.keys=UA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class ZN extends zt{constructor(e,t){super(e,"not-in",t),this.keys=UA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function UA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>Ee.fromName(i.referenceValue)))}class e2 extends zt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return jm(t)&&Tu(t.arrayValue,this.value)}}class t2 extends zt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Tu(this.value.arrayValue,t)}}class n2 extends zt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Tu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Tu(this.value.arrayValue,t)}}class i2 extends zt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!jm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Tu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,t=null,i=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.Pe=null}}function aT(n,e=null,t=[],i=[],o=null,a=null,u=null){return new s2(n,e,t,i,o,a,u)}function Xm(n){const e=xe(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>om(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),sf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>qa(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>qa(i))).join(",")),e.Pe=t}return e.Pe}function Zm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!QN(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!PA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!oT(n.startAt,e.startAt)&&oT(n.endAt,e.endAt)}function am(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,t=null,i=[],o=[],a=null,u="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=p,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function r2(n,e,t,i,o,a,u,d){return new of(n,e,t,i,o,a,u,d)}function LA(n){return new of(n)}function lT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function o2(n){return n.collectionGroup!==null}function uu(n){const e=xe(n);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Ht(sn.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new qd(a,i))})),t.has(sn.keyField().canonicalString())||e.Te.push(new qd(sn.keyField(),i))}return e.Te}function Oi(n){const e=xe(n);return e.Ie||(e.Ie=a2(e,uu(n))),e.Ie}function a2(n,e){if(n.limitType==="F")return aT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new qd(o.field,a)}));const t=n.endAt?new Od(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Od(n.startAt.position,n.startAt.inclusive):null;return aT(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function lm(n,e,t){return new of(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function af(n,e){return Zm(Oi(n),Oi(e))&&n.limitType===e.limitType}function OA(n){return`${Xm(Oi(n))}|lt:${n.limitType}`}function Ca(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>VA(o))).join(", ")}]`),sf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>qa(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>qa(o))).join(",")),`Target(${i})`})(Oi(n))}; limitType=${n.limitType})`}function lf(n,e){return e.isFoundDocument()&&(function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Ee.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,o){for(const a of uu(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(u,d,p){const m=rT(u,d,p);return u.inclusive?m<=0:m<0})(i.startAt,uu(i),o)||i.endAt&&!(function(u,d,p){const m=rT(u,d,p);return u.inclusive?m>=0:m>0})(i.endAt,uu(i),o))})(n,e)}function l2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function qA(n){return(e,t)=>{let i=!1;for(const o of uu(n)){const a=u2(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function u2(n,e,t){const i=n.field.isKeyField()?Ee.comparator(e.key,t.key):(function(a,u,d){const p=u.data.field(a),m=d.data.field(a);return p!==null&&m!==null?Oa(p,m):Ie(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ie(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){zr(this.inner,((t,i)=>{for(const[o,a]of i)e(o,a)}))}isEmpty(){return SA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=new Et(Ee.comparator);function Cs(){return c2}const BA=new Et(Ee.comparator);function nu(...n){let e=BA;for(const t of n)e=e.insert(t.key,t);return e}function FA(n){let e=BA;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function So(){return cu()}function zA(){return cu()}function cu(){return new ko((n=>n.toString()),((n,e)=>n.isEqual(e)))}const d2=new Et(Ee.comparator),f2=new Ht(Ee.comparator);function He(...n){let e=f2;for(const t of n)e=e.add(t);return e}const h2=new Ht(Le);function p2(){return h2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vd(e)?"-0":e}}function HA(n){return{integerValue:""+n}}function m2(n,e){return FN(e)?HA(e):eg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(){this._=void 0}}function g2(n,e,t){return n instanceof Bd?(function(o,a){const u={fields:{[IA]:{stringValue:CA},[RA]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&Wm(a)&&(a=rf(a)),a&&(u.fields[wA]=a),{mapValue:u}})(t,e):n instanceof Eu?JA(n,e):n instanceof Su?YA(n,e):(function(o,a){const u=GA(o,a),d=uT(u)+uT(o.Ee);return rm(u)&&rm(o.Ee)?HA(d):eg(o.serializer,d)})(n,e)}function y2(n,e,t){return n instanceof Eu?JA(n,e):n instanceof Su?YA(n,e):t}function GA(n,e){return n instanceof Fd?(function(i){return rm(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class Bd extends uf{}class Eu extends uf{constructor(e){super(),this.elements=e}}function JA(n,e){const t=KA(e);for(const i of n.elements)t.some((o=>zi(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Su extends uf{constructor(e){super(),this.elements=e}}function YA(n,e){let t=KA(e);for(const i of n.elements)t=t.filter((o=>!zi(o,i)));return{arrayValue:{values:t}}}class Fd extends uf{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function uT(n){return Mt(n.integerValue||n.doubleValue)}function KA(n){return jm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function _2(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof Eu&&o instanceof Eu||i instanceof Su&&o instanceof Su?La(i.elements,o.elements,zi):i instanceof Fd&&o instanceof Fd?zi(i.Ee,o.Ee):i instanceof Bd&&o instanceof Bd})(n.transform,e.transform)}class v2{constructor(e,t){this.version=e,this.transformResults=t}}class Ti{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ti}static exists(e){return new Ti(void 0,e)}static updateTime(e){return new Ti(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class cf{}function $A(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new tg(n.key,Ti.none()):new Nu(n.key,n.data,Ti.none());{const t=n.data,i=Nn.empty();let o=new Ht(sn.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new Hr(n.key,i,new Hn(o.toArray()),Ti.none())}}function T2(n,e,t){n instanceof Nu?(function(o,a,u){const d=o.value.clone(),p=dT(o.fieldTransforms,a,u.transformResults);d.setAll(p),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Hr?(function(o,a,u){if(!Sd(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=dT(o.fieldTransforms,a,u.transformResults),p=a.data;p.setAll(QA(o)),p.setAll(d),a.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(n,e,t):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function du(n,e,t,i){return n instanceof Nu?(function(a,u,d,p){if(!Sd(a.precondition,u))return d;const m=a.value.clone(),v=fT(a.fieldTransforms,p,u);return m.setAll(v),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(n,e,t,i):n instanceof Hr?(function(a,u,d,p){if(!Sd(a.precondition,u))return d;const m=fT(a.fieldTransforms,p,u),v=u.data;return v.setAll(QA(a)),v.setAll(m),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((T=>T.field)))})(n,e,t,i):(function(a,u,d){return Sd(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function E2(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=GA(i.transform,o||null);a!=null&&(t===null&&(t=Nn.empty()),t.set(i.field,a))}return t||null}function cT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&La(i,o,((a,u)=>_2(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Nu extends cf{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Hr extends cf{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function QA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function dT(n,e,t){const i=new Map;it(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,d=e.data.field(a.field);i.set(a.field,y2(u,d,t[o]))}return i}function fT(n,e,t){const i=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);i.set(o.field,g2(a,u,e))}return i}class tg extends cf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class S2 extends cf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&T2(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=du(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=du(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=zA();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(o.key)?null:d;const p=$A(u,d);p!==null&&i.set(o.key,p),u.isValidDocument()||u.convertToNoDocument(Re.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),He())}isEqual(e){return this.batchId===e.batchId&&La(this.mutations,e.mutations,((t,i)=>cT(t,i)))&&La(this.baseMutations,e.baseMutations,((t,i)=>cT(t,i)))}}class ng{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){it(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=(function(){return d2})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new ng(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,$e;function w2(n){switch(n){case re.OK:return Ie(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Ie(15467,{code:n})}}function WA(n){if(n===void 0)return As("GRPC error has no .code"),re.UNKNOWN;switch(n){case qt.OK:return re.OK;case qt.CANCELLED:return re.CANCELLED;case qt.UNKNOWN:return re.UNKNOWN;case qt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case qt.INTERNAL:return re.INTERNAL;case qt.UNAVAILABLE:return re.UNAVAILABLE;case qt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case qt.NOT_FOUND:return re.NOT_FOUND;case qt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case qt.ABORTED:return re.ABORTED;case qt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case qt.DATA_LOSS:return re.DATA_LOSS;default:return Ie(39323,{code:n})}}($e=qt||(qt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=new Rr([4294967295,4294967295],0);function hT(n){const e=_A().encode(n),t=new cA;return t.update(e),new Uint8Array(t.digest())}function pT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Rr([t,i],0),new Rr([o,a],0)]}class ig{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new iu(`Invalid padding: ${t}`);if(i<0)throw new iu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new iu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new iu(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Rr.fromNumber(this.fe)}pe(e,t,i){let o=e.add(t.multiply(Rr.fromNumber(i)));return o.compare(R2)===1&&(o=new Rr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=hT(e),[i,o]=pT(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(i,o,a);if(!this.ye(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new ig(a,o,t);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.fe===0)return;const t=hT(e),[i,o]=pT(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(i,o,a);this.we(u)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class iu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Mu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new df(Re.min(),o,new Et(Le),Cs(),He())}}class Mu{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Mu(i,t,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=o}}class jA{constructor(e,t){this.targetId=e,this.De=t}}class XA{constructor(e,t,i=rn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class mT{constructor(){this.ve=0,this.Ce=gT(),this.Fe=rn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=He(),t=He(),i=He();return this.Ce.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ie(38017,{changeType:a})}})),new Mu(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=gT()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,it(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class b2{constructor(e){this.We=e,this.Ge=new Map,this.ze=Cs(),this.je=cd(),this.Je=cd(),this.He=new Et(Le)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((i,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,i=e.De.count,o=this.st(t);if(o){const a=o.target;if(am(a))if(i===0){const u=new Ee(a.path);this.Xe(t,u,dn.newNoDocument(u,Re.min()))}else it(i===1,20013,{expectedCount:i});else{const u=this.ot(t);if(u!==i){const d=this._t(e),p=d?this.ut(d,e,u):1;if(p!==0){this.rt(t);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,m)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let u,d;try{u=Pr(i).toUint8Array()}catch(p){if(p instanceof AA)return Mr("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new ig(u,o,a)}catch(p){return Mr(p instanceof iu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.fe===0?null:d}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let o=0;return i.forEach((a=>{const u=this.We.lt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,a,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((a,u)=>{const d=this.st(u);if(d){if(a.current&&am(d.target)){const p=new Ee(d.target.path);this.Tt(p).has(u)||this.It(u,p)||this.Xe(u,p,dn.newNoDocument(p,e))}a.Ne&&(t.set(u,a.Le()),a.ke())}}));let i=He();this.Je.forEach(((a,u)=>{let d=!0;u.forEachWhile((p=>{const m=this.st(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.ze.forEach(((a,u)=>u.setReadTime(e)));const o=new df(e,t,this.He,this.ze,i);return this.ze=Cs(),this.je=cd(),this.Je=cd(),this.He=new Et(Le),o}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new mT,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ht(Le),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ht(Le),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new mT),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function cd(){return new Et(Ee.comparator)}function gT(){return new Et(Ee.comparator)}const x2={asc:"ASCENDING",desc:"DESCENDING"},N2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},M2={and:"AND",or:"OR"};class D2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function um(n,e){return n.useProto3Json||sf(e)?e:{value:e}}function zd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ZA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function k2(n,e){return zd(n,e.toTimestamp())}function qi(n){return it(!!n,49232),Re.fromTimestamp((function(t){const i=kr(t);return new vt(i.seconds,i.nanos)})(n))}function sg(n,e){return cm(n,e).canonicalString()}function cm(n,e){const t=(function(o){return new _t(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function eC(n){const e=_t.fromString(n);return it(rC(e),10190,{key:e.toString()}),e}function dm(n,e){return sg(n.databaseId,e.path)}function Fp(n,e){const t=eC(e);if(t.get(1)!==n.databaseId.projectId)throw new _e(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new _e(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(nC(t))}function tC(n,e){return sg(n.databaseId,e)}function P2(n){const e=eC(n);return e.length===4?_t.emptyPath():nC(e)}function fm(n){return new _t(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function nC(n){return it(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function yT(n,e,t){return{name:dm(n,e),fields:t.value.mapValue.fields}}function V2(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ie(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(m,v){return m.useProto3Json?(it(v===void 0||typeof v=="string",58123),rn.fromBase64String(v||"")):(it(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),rn.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(m){const v=m.code===void 0?re.UNKNOWN:WA(m.code);return new _e(v,m.message||"")})(u);t=new XA(i,o,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Fp(n,i.document.name),a=qi(i.document.updateTime),u=i.document.createTime?qi(i.document.createTime):Re.min(),d=new Nn({mapValue:{fields:i.document.fields}}),p=dn.newFoundDocument(o,a,u,d),m=i.targetIds||[],v=i.removedTargetIds||[];t=new Ad(m,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Fp(n,i.document),a=i.readTime?qi(i.readTime):Re.min(),u=dn.newNoDocument(o,a),d=i.removedTargetIds||[];t=new Ad([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Fp(n,i.document),a=i.removedTargetIds||[];t=new Ad([],a,o,null)}else{if(!("filter"in e))return Ie(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new I2(o,a),d=i.targetId;t=new jA(d,u)}}return t}function U2(n,e){let t;if(e instanceof Nu)t={update:yT(n,e.key,e.value)};else if(e instanceof tg)t={delete:dm(n,e.key)};else if(e instanceof Hr)t={update:yT(n,e.key,e.data),updateMask:J2(e.fieldMask)};else{if(!(e instanceof S2))return Ie(16599,{Rt:e.type});t={verify:dm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof Bd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Eu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Su)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Fd)return{fieldPath:u.field.canonicalString(),increment:d.Ee};throw Ie(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:k2(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ie(27497)})(n,e.precondition)),t}function L2(n,e){return n&&n.length>0?(it(e!==void 0,14353),n.map((t=>(function(o,a){let u=o.updateTime?qi(o.updateTime):qi(a);return u.isEqual(Re.min())&&(u=qi(a)),new v2(u,o.transformResults||[])})(t,e)))):[]}function O2(n,e){return{documents:[tC(n,e.path)]}}function q2(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=tC(n,o);const a=(function(m){if(m.length!==0)return sC(Hi.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(m){if(m.length!==0)return m.map((v=>(function(S){return{field:Ia(S.field),direction:z2(S.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=um(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{Vt:t,parent:o}}function B2(n){let e=P2(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){it(i===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=(function(T){const S=iC(T);return S instanceof Hi&&kA(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(T){return T.map((S=>(function(L){return new qd(wa(L.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let S;return S=typeof T=="object"?T.value:T,sf(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(T){const S=!!T.before,R=T.values||[];return new Od(R,S)})(t.startAt));let m=null;return t.endAt&&(m=(function(T){const S=!T.before,R=T.values||[];return new Od(R,S)})(t.endAt)),r2(e,o,u,a,d,"F",p,m)}function F2(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function iC(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=wa(t.unaryFilter.field);return zt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=wa(t.unaryFilter.field);return zt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=wa(t.unaryFilter.field);return zt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=wa(t.unaryFilter.field);return zt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(n):n.fieldFilter!==void 0?(function(t){return zt.create(wa(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Hi.create(t.compositeFilter.filters.map((i=>iC(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(t.compositeFilter.op))})(n):Ie(30097,{filter:n})}function z2(n){return x2[n]}function H2(n){return N2[n]}function G2(n){return M2[n]}function Ia(n){return{fieldPath:n.canonicalString()}}function wa(n){return sn.fromServerFormat(n.fieldPath)}function sC(n){return n instanceof zt?(function(t){if(t.op==="=="){if(sT(t.value))return{unaryFilter:{field:Ia(t.field),op:"IS_NAN"}};if(iT(t.value))return{unaryFilter:{field:Ia(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(sT(t.value))return{unaryFilter:{field:Ia(t.field),op:"IS_NOT_NAN"}};if(iT(t.value))return{unaryFilter:{field:Ia(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ia(t.field),op:H2(t.op),value:t.value}}})(n):n instanceof Hi?(function(t){const i=t.getFilters().map((o=>sC(o)));return i.length===1?i[0]:{compositeFilter:{op:G2(t.op),filters:i}}})(n):Ie(54877,{filter:n})}function J2(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function rC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,t,i,o,a=Re.min(),u=Re.min(),d=rn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Cr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e){this.gt=e}}function K2(n){const e=B2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?lm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(){this.Dn=new Q2}addToCollectionParentIndex(e,t){return this.Dn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Dr.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Dr.min())}updateCollectionGroup(e,t,i){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class Q2{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Ht(_t.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Ht(_t.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},oC=41943040;class bn{static withCacheSize(e){return new bn(e,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(oC,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ba(0)}static ur(){return new Ba(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT="LruGarbageCollector",W2=1048576;function TT([n,e],[t,i]){const o=Le(n,t);return o===0?Le(e,i):o}class j2{constructor(e){this.Tr=e,this.buffer=new Ht(TT),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();TT(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class X2{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){pe(vT,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ja(t)?pe(vT,"Ignoring IndexedDB error during garbage collection: ",t):await Ga(t)}await this.Rr(3e5)}))}}class Z2{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(nf.ue);const i=new j2(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(_T)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_T):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,o,a,u,d,p,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,u=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(i=T,d=Date.now(),this.removeTargets(e,i,t)))).next((T=>(a=T,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(m=Date.now(),Aa()<=ze.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${a} targets in `+(p-d)+`ms
	Removed ${T} documents in `+(m-p)+`ms
Total Duration: ${m-v}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:T}))))}}function eM(n,e){return new Z2(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(){this.changes=new ko((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?se.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&du(i.mutation,o,Hn.empty(),vt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,He()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=He()){const o=So();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((a=>{let u=nu();return a.forEach(((d,p)=>{u=u.insert(d,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=So();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,He())))}populateOverlays(e,t,i){const o=[];return i.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,i,o){let a=Cs();const u=cu(),d=(function(){return cu()})();return t.forEach(((p,m)=>{const v=i.get(m.key);o.has(m.key)&&(v===void 0||v.mutation instanceof Hr)?a=a.insert(m.key,m):v!==void 0?(u.set(m.key,v.mutation.getFieldMask()),du(v.mutation,m,v.mutation.getFieldMask(),vt.now())):u.set(m.key,Hn.empty())})),this.recalculateAndSaveOverlays(e,a).next((p=>(p.forEach(((m,v)=>u.set(m,v))),t.forEach(((m,v)=>{var T;return d.set(m,new nM(v,(T=u.get(m))!==null&&T!==void 0?T:null))})),d)))}recalculateAndSaveOverlays(e,t){const i=cu();let o=new Et(((u,d)=>u-d)),a=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((p=>{const m=t.get(p);if(m===null)return;let v=i.get(p)||Hn.empty();v=d.applyToLocalView(m,v),i.set(p,v);const T=(o.get(d.batchId)||He()).add(p);o=o.insert(d.batchId,T)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),m=p.key,v=p.value,T=zA();v.forEach((S=>{if(!a.has(S)){const R=$A(t.get(S),i.get(S));R!==null&&T.set(S,R),a=a.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,T))}return se.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(u){return Ee.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):o2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):se.resolve(So());let d=yu,p=a;return u.next((m=>se.forEach(m,((v,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),a.get(v)?se.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{p=p.insert(v,S)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,p,m,He()))).next((v=>({batchId:d,changes:FA(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((i=>{let o=nu();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let u=nu();return this.indexManager.getCollectionParents(e,a).next((d=>se.forEach(d,(p=>{const m=(function(T,S){return new of(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,i,o).next((v=>{v.forEach(((T,S)=>{u=u.insert(T,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o)))).next((u=>{a.forEach(((p,m)=>{const v=m.getKey();u.get(v)===null&&(u=u.insert(v,dn.newInvalidDocument(v)))}));let d=nu();return u.forEach(((p,m)=>{const v=a.get(p);v!==void 0&&du(v.mutation,m,Hn.empty(),vt.now()),lf(t,m)&&(d=d.insert(p,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return se.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:qi(o.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:K2(o.bundledQuery),readTime:qi(o.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(){this.overlays=new Et(Ee.comparator),this.kr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const i=So();return se.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,a)=>{this.wt(e,t,a)})),se.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.kr.delete(i)),se.resolve()}getOverlaysForCollection(e,t,i){const o=So(),a=t.length+1,u=new Ee(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const p=d.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&p.largestBatchId>i&&o.set(p.getKey(),p)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new Et(((m,v)=>m-v));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>i){let v=a.get(m.largestBatchId);v===null&&(v=So(),a=a.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=So(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((m,v)=>d.set(m,v))),!(d.size()>=o)););return se.resolve(d)}wt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new C2(t,i));let a=this.kr.get(t);a===void 0&&(a=He(),this.kr.set(t,a)),this.kr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(){this.qr=new Ht($t.Qr),this.$r=new Ht($t.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new $t(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new $t(e,t))}Gr(e,t){e.forEach((i=>this.removeReference(i,t)))}zr(e){const t=new Ee(new _t([])),i=new $t(t,e),o=new $t(t,e+1),a=[];return this.$r.forEachInRange([i,o],(u=>{this.Wr(u),a.push(u.key)})),a}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Ee(new _t([])),i=new $t(t,e),o=new $t(t,e+1);let a=He();return this.$r.forEachInRange([i,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new $t(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class $t{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Ee.comparator(e.key,t.key)||Le(e.Hr,t.Hr)}static Ur(e,t){return Le(e.Hr,t.Hr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ht($t.Qr)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new A2(a,t,i,o);this.mutationQueue.push(u);for(const d of o)this.Yr=this.Yr.add(new $t(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,t){return se.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),a=o<0?0:o;return se.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?Qm:this.er-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new $t(t,0),o=new $t(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([i,o],(u=>{const d=this.Zr(u.Hr);a.push(d)})),se.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ht(Le);return t.forEach((o=>{const a=new $t(o,0),u=new $t(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,u],(d=>{i=i.add(d.Hr)}))})),se.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;Ee.isDocumentKey(a)||(a=a.child(""));const u=new $t(new Ee(a),0);let d=new Ht(Le);return this.Yr.forEachWhile((p=>{const m=p.key.path;return!!i.isPrefixOf(m)&&(m.length===o&&(d=d.add(p.Hr)),!0)}),u),se.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){it(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return se.forEach(t.mutations,(o=>{const a=new $t(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,t){const i=new $t(t,0),o=this.Yr.firstAfterOrEqual(i);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e){this.ni=e,this.docs=(function(){return new Et(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,u=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return se.resolve(i?i.document.mutableCopy():dn.newInvalidDocument(t))}getEntries(e,t){let i=Cs();return t.forEach((o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():dn.newInvalidDocument(o))})),se.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=Cs();const u=t.path,d=new Ee(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:m,value:{document:v}}=p.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||LN(UN(v),i)<=0||(o.has(v.key)||lf(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return se.resolve(a)}getAllFromCollectionGroup(e,t,i,o){Ie(9500)}ri(e,t){return se.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new uM(this)}getSize(e){return se.resolve(this.size)}}class uM extends tM{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)})),se.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e){this.persistence=e,this.ii=new ko((t=>Xm(t)),Zm),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.si=0,this.oi=new rg,this.targetCount=0,this._i=Ba.ar()}forEachTarget(e,t){return this.ii.forEach(((i,o)=>t(o))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),se.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Ba(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.hr(t),se.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.ii.forEach(((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.ii.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),se.waitFor(a).next((()=>o))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return se.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),se.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),se.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return se.resolve(i)}containsKey(e,t){return se.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e,t){this.ai={},this.overlays={},this.ui=new nf(0),this.ci=!1,this.ci=!0,this.li=new oM,this.referenceDelegate=e(this),this.hi=new cM(this),this.indexManager=new $2,this.remoteDocumentCache=(function(o){return new lM(o)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new Y2(t),this.Ti=new sM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new rM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new aM(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){pe("MemoryPersistence","Starting transaction:",e);const o=new dM(this.ui.next());return this.referenceDelegate.Ii(),i(o).next((a=>this.referenceDelegate.di(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ei(e,t){return se.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,t))))}}class dM extends qN{constructor(e){super(),this.currentSequenceNumber=e}}class og{constructor(e){this.persistence=e,this.Ai=new rg,this.Ri=null}static Vi(e){return new og(e)}get mi(){if(this.Ri)return this.Ri;throw Ie(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),se.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.mi.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.mi,(i=>{const o=Ee.fromPath(i);return this.fi(e,o).next((a=>{a||t.removeEntry(o,Re.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return se.or([()=>se.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Hd{constructor(e,t){this.persistence=e,this.gi=new ko((i=>zN(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=eM(this,t)}static Vi(e,t){return new Hd(e,t)}Ii(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}yr(e){let t=0;return this.gr(e,(i=>{t++})).next((()=>t))}gr(e,t){return se.forEach(this.gi,((i,o)=>this.Sr(e,i,o).next((a=>a?se.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ri(e,(u=>this.Sr(e,u,t).next((d=>{d||(i++,a.removeEntry(u,Re.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),se.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),se.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Td(e.data.value)),t}Sr(e,t,i){return se.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return se.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=o}static Es(e,t){let i=He(),o=He();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new ag(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return HR()?8:BN(hn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.ps(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ys(e,t,o,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new fM;return this.ws(e,t,u).next((d=>{if(a.result=d,this.Rs)return this.Ss(e,t,u,d.size)}))})).next((()=>a.result))}Ss(e,t,i,o){return i.documentReadCount<this.Vs?(Aa()<=ze.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",Ca(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),se.resolve()):(Aa()<=ze.DEBUG&&pe("QueryEngine","Query:",Ca(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?(Aa()<=ze.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",Ca(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Oi(t))):se.resolve())}ps(e,t){if(lT(t))return se.resolve(null);let i=Oi(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=lm(t,null,"F"),i=Oi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=He(...a);return this.gs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((p=>{const m=this.bs(t,d);return this.Ds(t,m,u,p.readTime)?this.ps(e,lm(t,null,"F")):this.vs(e,m,t,p)}))))})))))}ys(e,t,i,o){return lT(t)||o.isEqual(Re.min())?se.resolve(null):this.gs.getDocuments(e,i).next((a=>{const u=this.bs(t,a);return this.Ds(t,u,i,o)?se.resolve(null):(Aa()<=ze.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ca(t)),this.vs(e,u,t,VN(o,yu)).next((d=>d)))}))}bs(e,t){let i=new Ht(qA(e));return t.forEach(((o,a)=>{lf(e,a)&&(i=i.add(a))})),i}Ds(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}ws(e,t,i){return Aa()<=ze.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",Ca(t)),this.gs.getDocumentsMatchingQuery(e,t,Dr.min(),i)}vs(e,t,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg="LocalStore",pM=3e8;class mM{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new Et(Le),this.Ms=new ko((a=>Xm(a)),Zm),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iM(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function gM(n,e,t,i){return new mM(n,e,t,i)}async function lC(n,e){const t=xe(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let p=He();for(const m of o){u.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}for(const m of a){d.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(i,p).next((m=>({Bs:m,removedBatchIds:u,addedBatchIds:d})))}))}))}function yM(n,e){const t=xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return(function(d,p,m,v){const T=m.batch,S=T.keys();let R=se.resolve();return S.forEach((L=>{R=R.next((()=>v.getEntry(p,L))).next((z=>{const B=m.docVersions.get(L);it(B!==null,48541),z.version.compareTo(B)<0&&(T.applyToRemoteDocument(z,m),z.isValidDocument()&&(z.setReadTime(m.commitVersion),v.addEntry(z)))}))})),R.next((()=>d.mutationQueue.removeMutationBatch(p,T)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let p=He();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(p=p.add(d.batch.mutations[m].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function uC(n){const e=xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function _M(n,e){const t=xe(n),i=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const d=[];e.targetChanges.forEach(((v,T)=>{const S=o.get(T);if(!S)return;d.push(t.hi.removeMatchingKeys(a,v.removedDocuments,T).next((()=>t.hi.addMatchingKeys(a,v.addedDocuments,T))));let R=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(T)!==null?R=R.withResumeToken(rn.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):v.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(v.resumeToken,i)),o=o.insert(T,R),(function(z,B,ee){return z.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=pM?!0:ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0})(S,R,v)&&d.push(t.hi.updateTargetData(a,R))}));let p=Cs(),m=He();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))})),d.push(vM(a,u,e.documentUpdates).next((v=>{p=v.Ls,m=v.ks}))),!i.isEqual(Re.min())){const v=t.hi.getLastRemoteSnapshotVersion(a).next((T=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(v)}return se.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,p,m))).next((()=>p))})).then((a=>(t.Fs=o,a)))}function vM(n,e,t){let i=He(),o=He();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=Cs();return t.forEach(((d,p)=>{const m=a.get(d);p.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(Re.min())?(e.removeEntry(d,p.readTime),u=u.insert(d,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),u=u.insert(d,p)):pe(lg,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",p.version)})),{Ls:u,ks:o}}))}function TM(n,e){const t=xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Qm),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function EM(n,e){const t=xe(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.hi.getTargetData(i,e).next((a=>a?(o=a,se.resolve(o)):t.hi.allocateTargetId(i).next((u=>(o=new Cr(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i}))}async function hm(n,e,t){const i=xe(n),o=i.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!Ja(u))throw u;pe(lg,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)}function ET(n,e,t){const i=xe(n);let o=Re.min(),a=He();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,m,v){const T=xe(p),S=T.Ms.get(v);return S!==void 0?se.resolve(T.Fs.get(S)):T.hi.getTargetData(m,v)})(i,u,Oi(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(u,d.targetId).next((p=>{a=p}))})).next((()=>i.Cs.getDocumentsMatchingQuery(u,e,t?o:Re.min(),t?a:He()))).next((d=>(SM(i,l2(e),d),{documents:d,qs:a})))))}function SM(n,e,t){let i=n.xs.get(e)||Re.min();t.forEach(((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.xs.set(e,i)}class ST{constructor(){this.activeTargetIds=p2()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class AM{constructor(){this.Fo=new ST,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new ST,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="ConnectivityMonitor";class CT{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){pe(AT,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){pe(AT,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dd=null;function pm(){return dd===null?dd=(function(){return 268435456+Math.round(2147483648*Math.random())})():dd++,"0x"+dd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp="RestConnection",IM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class wM{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===Ud?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,a){const u=pm(),d=this.Go(e,t.toUriEncodedString());pe(zp,`Sending RPC '${e}' ${u}:`,d,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(p,o,a);const{host:m}=new URL(d),v=Or(m);return this.jo(e,d,p,i,v).then((T=>(pe(zp,`Received RPC '${e}' ${u}: `,T),T)),(T=>{throw Mr(zp,`RPC '${e}' ${u} failed with error: `,T,"url: ",d,"request:",i),T}))}Jo(e,t,i,o,a,u){return this.Wo(e,t,i,o,a)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ha})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,a)=>e[a]=o)),i&&i.headers.forEach(((o,a)=>e[a]=o))}Go(e,t){const i=IM[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class bM extends wM{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,o,a){const u=pm();return new Promise(((d,p)=>{const m=new dA;m.setWithCredentials(!0),m.listenOnce(fA.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case vd.NO_ERROR:const T=m.getResponseJson();pe(un,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),d(T);break;case vd.TIMEOUT:pe(un,`RPC '${e}' ${u} timed out`),p(new _e(re.DEADLINE_EXCEEDED,"Request time out"));break;case vd.HTTP_ERROR:const S=m.getStatus();if(pe(un,`RPC '${e}' ${u} failed with status:`,S,"response text:",m.getResponseText()),S>0){let R=m.getResponseJson();Array.isArray(R)&&(R=R[0]);const L=R==null?void 0:R.error;if(L&&L.status&&L.message){const z=(function(ee){const Y=ee.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(Y)>=0?Y:re.UNKNOWN})(L.status);p(new _e(z,L.message))}else p(new _e(re.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new _e(re.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{c_:e,streamId:u,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{pe(un,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(o);pe(un,`RPC '${e}' ${u} sending request:`,o),m.send(t,"POST",v,i,15)}))}P_(e,t,i){const o=pm(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=mA(),d=pA(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.zo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const v=a.join("");pe(un,`Creating RPC '${e}' stream ${o}: ${v}`,p);const T=u.createWebChannel(v,p);this.T_(T);let S=!1,R=!1;const L=new RM({Ho:B=>{R?pe(un,`Not sending because RPC '${e}' stream ${o} is closed:`,B):(S||(pe(un,`Opening RPC '${e}' stream ${o} transport.`),T.open(),S=!0),pe(un,`RPC '${e}' stream ${o} sending:`,B),T.send(B))},Yo:()=>T.close()}),z=(B,ee,Y)=>{B.listen(ee,(W=>{try{Y(W)}catch(ie){setTimeout((()=>{throw ie}),0)}}))};return z(T,tu.EventType.OPEN,(()=>{R||(pe(un,`RPC '${e}' stream ${o} transport opened.`),L.s_())})),z(T,tu.EventType.CLOSE,(()=>{R||(R=!0,pe(un,`RPC '${e}' stream ${o} transport closed`),L.__(),this.I_(T))})),z(T,tu.EventType.ERROR,(B=>{R||(R=!0,Mr(un,`RPC '${e}' stream ${o} transport errored. Name:`,B.name,"Message:",B.message),L.__(new _e(re.UNAVAILABLE,"The operation could not be completed")))})),z(T,tu.EventType.MESSAGE,(B=>{var ee;if(!R){const Y=B.data[0];it(!!Y,16349);const W=Y,ie=(W==null?void 0:W.error)||((ee=W[0])===null||ee===void 0?void 0:ee.error);if(ie){pe(un,`RPC '${e}' stream ${o} received error:`,ie);const de=ie.status;let ue=(function(x){const V=qt[x];if(V!==void 0)return WA(V)})(de),D=ie.message;ue===void 0&&(ue=re.INTERNAL,D="Unknown error status: "+de+" with message "+ie.message),R=!0,L.__(new _e(ue,D)),T.close()}else pe(un,`RPC '${e}' stream ${o} received:`,Y),L.a_(Y)}})),z(d,hA.STAT_EVENT,(B=>{B.stat===nm.PROXY?pe(un,`RPC '${e}' stream ${o} detected buffering proxy`):B.stat===nm.NOPROXY&&pe(un,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{L.o_()}),0),L}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function Hp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(n){return new D2(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e,t,i=1e3,o=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="PersistentStream";class dC{constructor(e,t,i,o,a,u,d,p){this.Fi=e,this.w_=i,this.S_=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new cC(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(As(t.toString()),As("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.b_===t&&this.W_(i,o)}),(i=>{e((()=>{const o=new _e(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)}))}))}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{i((()=>this.G_(o)))})),this.stream.onMessage((o=>{i((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return pe(IT,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(pe(IT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class xM extends dC{constructor(e,t,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=V2(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Re.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Re.min():u.readTime?qi(u.readTime):Re.min()})(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=fm(this.serializer),t.addTarget=(function(a,u){let d;const p=u.target;if(d=am(p)?{documents:O2(a,p)}:{query:q2(a,p).Vt},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=ZA(a,u.resumeToken);const m=um(a,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(Re.min())>0){d.readTime=zd(a,u.snapshotVersion.toTimestamp());const m=um(a,u.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const i=F2(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=fm(this.serializer),t.removeTarget=e,this.k_(t)}}class NM extends dC{constructor(e,t,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return it(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){it(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=L2(e.writeResults,e.commitTime),i=qi(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=fm(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>U2(this.serializer,i)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{}class DM extends MM{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new _e(re.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Wo(e,cm(t,i),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new _e(re.UNKNOWN,a.toString())}))}Jo(e,t,i,o,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Jo(e,cm(t,i),o,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new _e(re.UNKNOWN,u.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class kM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(As(t),this._a=!1):pe("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No="RemoteStore";class PM{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo((u=>{i.enqueueAndForget((async()=>{Po(this)&&(pe(No,"Restarting streams for network reachability change."),await(async function(p){const m=xe(p);m.Ia.add(4),await Du(m),m.Aa.set("Unknown"),m.Ia.delete(4),await hf(m)})(this))}))})),this.Aa=new kM(i,o)}}async function hf(n){if(Po(n))for(const e of n.da)await e(!0)}async function Du(n){for(const e of n.da)await e(!1)}function fC(n,e){const t=xe(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),fg(t)?dg(t):Ya(t).x_()&&cg(t,e))}function ug(n,e){const t=xe(n),i=Ya(t);t.Ta.delete(e),i.x_()&&hC(t,e),t.Ta.size===0&&(i.x_()?i.B_():Po(t)&&t.Aa.set("Unknown"))}function cg(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ya(n).H_(e)}function hC(n,e){n.Ra.$e(e),Ya(n).Y_(e)}function dg(n){n.Ra=new b2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Ya(n).start(),n.Aa.aa()}function fg(n){return Po(n)&&!Ya(n).M_()&&n.Ta.size>0}function Po(n){return xe(n).Ia.size===0}function pC(n){n.Ra=void 0}async function VM(n){n.Aa.set("Online")}async function UM(n){n.Ta.forEach(((e,t)=>{cg(n,e)}))}async function LM(n,e){pC(n),fg(n)?(n.Aa.la(e),dg(n)):n.Aa.set("Unknown")}async function OM(n,e,t){if(n.Aa.set("Online"),e instanceof XA&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const d of a.targetIds)o.Ta.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.Ta.delete(d),o.Ra.removeTarget(d))})(n,e)}catch(i){pe(No,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Gd(n,i)}else if(e instanceof Ad?n.Ra.Ye(e):e instanceof jA?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Re.min()))try{const i=await uC(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const d=a.Ra.Pt(u);return d.targetChanges.forEach(((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const v=a.Ta.get(m);v&&a.Ta.set(m,v.withResumeToken(p.resumeToken,u))}})),d.targetMismatches.forEach(((p,m)=>{const v=a.Ta.get(p);if(!v)return;a.Ta.set(p,v.withResumeToken(rn.EMPTY_BYTE_STRING,v.snapshotVersion)),hC(a,p);const T=new Cr(v.target,p,m,v.sequenceNumber);cg(a,T)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){pe(No,"Failed to raise snapshot:",i),await Gd(n,i)}}async function Gd(n,e,t){if(!Ja(e))throw e;n.Ia.add(1),await Du(n),n.Aa.set("Offline"),t||(t=()=>uC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{pe(No,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await hf(n)}))}function mC(n,e){return e().catch((t=>Gd(n,t,e)))}async function pf(n){const e=xe(n),t=Ur(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Qm;for(;qM(e);)try{const o=await TM(e.localStore,i);if(o===null){e.Pa.length===0&&t.B_();break}i=o.batchId,BM(e,o)}catch(o){await Gd(e,o)}gC(e)&&yC(e)}function qM(n){return Po(n)&&n.Pa.length<10}function BM(n,e){n.Pa.push(e);const t=Ur(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function gC(n){return Po(n)&&!Ur(n).M_()&&n.Pa.length>0}function yC(n){Ur(n).start()}async function FM(n){Ur(n).na()}async function zM(n){const e=Ur(n);for(const t of n.Pa)e.X_(t.mutations)}async function HM(n,e,t){const i=n.Pa.shift(),o=ng.from(i,e,t);await mC(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await pf(n)}async function GM(n,e){e&&Ur(n).Z_&&await(async function(i,o){if((function(u){return w2(u)&&u!==re.ABORTED})(o.code)){const a=i.Pa.shift();Ur(i).N_(),await mC(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await pf(i)}})(n,e),gC(n)&&yC(n)}async function wT(n,e){const t=xe(n);t.asyncQueue.verifyOperationInProgress(),pe(No,"RemoteStore received new credentials");const i=Po(t);t.Ia.add(3),await Du(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await hf(t)}async function JM(n,e){const t=xe(n);e?(t.Ia.delete(2),await hf(t)):e||(t.Ia.add(2),await Du(t),t.Aa.set("Unknown"))}function Ya(n){return n.Va||(n.Va=(function(t,i,o){const a=xe(t);return a.ia(),new xM(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Zo:VM.bind(null,n),e_:UM.bind(null,n),n_:LM.bind(null,n),J_:OM.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),fg(n)?dg(n):n.Aa.set("Unknown")):(await n.Va.stop(),pC(n))}))),n.Va}function Ur(n){return n.ma||(n.ma=(function(t,i,o){const a=xe(t);return a.ia(),new NM(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:FM.bind(null,n),n_:GM.bind(null,n),ea:zM.bind(null,n),ta:HM.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await pf(n)):(await n.ma.stop(),n.Pa.length>0&&(pe(No,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const u=Date.now()+i,d=new hg(e,t,u,o,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pg(n,e){if(As("AsyncQueue",`${e}: ${n}`),Ja(n))return new _e(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{static emptySet(e){return new Ma(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ee.comparator(t.key,i.key):(t,i)=>Ee.comparator(t.key,i.key),this.keyedMap=nu(),this.sortedSet=new Et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ma)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Ma;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(){this.fa=new Et(Ee.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Ie(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Fa{constructor(e,t,i,o,a,u,d,p,m){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,i,o,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new Fa(e,t,Ma.emptySet(t),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&af(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class KM{constructor(){this.queries=bT(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const o=xe(t),a=o.queries;o.queries=bT(),a.forEach(((u,d)=>{for(const p of d.wa)p.onError(i)}))})(this,new _e(re.ABORTED,"Firestore shutting down"))}}function bT(){return new ko((n=>OA(n)),af)}async function $M(n,e){const t=xe(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.Sa()&&e.ba()&&(i=2):(a=new YM,i=e.ba()?0:1);try{switch(i){case 0:a.ya=await t.onListen(o,!0);break;case 1:a.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=pg(u,`Initialization of query '${Ca(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&mg(t)}async function QM(n,e){const t=xe(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const u=a.wa.indexOf(e);u>=0&&(a.wa.splice(u,1),a.wa.length===0?o=e.ba()?0:1:!a.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function WM(n,e){const t=xe(n);let i=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const d of u.wa)d.Ca(o)&&(i=!0);u.ya=o}}i&&mg(t)}function jM(n,e,t){const i=xe(n),o=i.queries.get(e);if(o)for(const a of o.wa)a.onError(t);i.queries.delete(e)}function mg(n){n.Da.forEach((e=>{e.next()}))}var mm,xT;(xT=mm||(mm={})).Fa="default",xT.Cache="cache";class XM{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Fa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Fa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==mm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e){this.key=e}}class vC{constructor(e){this.key=e}}class ZM{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=He(),this.mutatedKeys=He(),this.Xa=qA(e),this.eu=new Ma(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new RT,o=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,T)=>{const S=o.get(v),R=lf(this.query,T)?T:null,L=!!S&&this.mutatedKeys.has(S.key),z=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let B=!1;S&&R?S.data.isEqual(R.data)?L!==z&&(i.track({type:3,doc:R}),B=!0):this.iu(S,R)||(i.track({type:2,doc:R}),B=!0,(p&&this.Xa(R,p)>0||m&&this.Xa(R,m)<0)&&(d=!0)):!S&&R?(i.track({type:0,doc:R}),B=!0):S&&!R&&(i.track({type:1,doc:S}),B=!0,(p||m)&&(d=!0)),B&&(R?(u=u.add(R),a=z?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{eu:u,ru:i,Ds:d,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort(((v,T)=>(function(R,L){const z=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{At:B})}};return z(R)-z(L)})(v.type,T.type)||this.Xa(v.doc,T.doc))),this.su(i),o=o!=null&&o;const d=t&&!o?this.ou():[],p=this.Za.size===0&&this.current&&!o?1:0,m=p!==this.Ya;return this.Ya=p,u.length!==0||m?{snapshot:new Fa(this.query,e.eu,a,u,e.mutatedKeys,p===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new RT,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=He(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const t=[];return e.forEach((i=>{this.Za.has(i)||t.push(new vC(i))})),this.Za.forEach((i=>{e.has(i)||t.push(new _C(i))})),t}uu(e){this.Ha=e.qs,this.Za=He();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Fa.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const gg="SyncEngine";class eD{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class tD{constructor(e){this.key=e,this.lu=!1}}class nD{constructor(e,t,i,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new ko((d=>OA(d)),af),this.Tu=new Map,this.Iu=new Set,this.du=new Et(Ee.comparator),this.Eu=new Map,this.Au=new rg,this.Ru={},this.Vu=new Map,this.mu=Ba.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function iD(n,e,t=!0){const i=IC(n);let o;const a=i.Pu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.cu()):o=await TC(i,e,t,!0),o}async function sD(n,e){const t=IC(n);await TC(t,e,!0,!1)}async function TC(n,e,t,i){const o=await EM(n.localStore,Oi(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await rD(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&fC(n.remoteStore,o),d}async function rD(n,e,t,i,o){n.gu=(T,S,R)=>(async function(z,B,ee,Y){let W=B.view.nu(ee);W.Ds&&(W=await ET(z.localStore,B.query,!1).then((({documents:D})=>B.view.nu(D,W))));const ie=Y&&Y.targetChanges.get(B.targetId),de=Y&&Y.targetMismatches.get(B.targetId)!=null,ue=B.view.applyChanges(W,z.isPrimaryClient,ie,de);return MT(z,B.targetId,ue._u),ue.snapshot})(n,T,S,R);const a=await ET(n.localStore,e,!0),u=new ZM(e,a.qs),d=u.nu(a.documents),p=Mu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),m=u.applyChanges(d,n.isPrimaryClient,p);MT(n,t,m._u);const v=new eD(e,t,u);return n.Pu.set(e,v),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),m.snapshot}async function oD(n,e,t){const i=xe(n),o=i.Pu.get(e),a=i.Tu.get(o.targetId);if(a.length>1)return i.Tu.set(o.targetId,a.filter((u=>!af(u,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await hm(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&ug(i.remoteStore,o.targetId),gm(i,o.targetId)})).catch(Ga)):(gm(i,o.targetId),await hm(i.localStore,o.targetId,!0))}async function aD(n,e){const t=xe(n),i=t.Pu.get(e),o=t.Tu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),ug(t.remoteStore,i.targetId))}async function lD(n,e,t){const i=mD(n);try{const o=await(function(u,d){const p=xe(u),m=vt.now(),v=d.reduce(((R,L)=>R.add(L.key)),He());let T,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let L=Cs(),z=He();return p.Os.getEntries(R,v).next((B=>{L=B,L.forEach(((ee,Y)=>{Y.isValidDocument()||(z=z.add(ee))}))})).next((()=>p.localDocuments.getOverlayedDocuments(R,L))).next((B=>{T=B;const ee=[];for(const Y of d){const W=E2(Y,T.get(Y.key).overlayedDocument);W!=null&&ee.push(new Hr(Y.key,W,NA(W.value.mapValue),Ti.exists(!0)))}return p.mutationQueue.addMutationBatch(R,m,ee,d)})).next((B=>{S=B;const ee=B.applyToLocalDocumentSet(T,z);return p.documentOverlayCache.saveOverlays(R,B.batchId,ee)}))})).then((()=>({batchId:S.batchId,changes:FA(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,d,p){let m=u.Ru[u.currentUser.toKey()];m||(m=new Et(Le)),m=m.insert(d,p),u.Ru[u.currentUser.toKey()]=m})(i,o.batchId,t),await ku(i,o.changes),await pf(i.remoteStore)}catch(o){const a=pg(o,"Failed to persist write");t.reject(a)}}async function EC(n,e){const t=xe(n);try{const i=await _M(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=t.Eu.get(a);u&&(it(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.lu=!0:o.modifiedDocuments.size>0?it(u.lu,14607):o.removedDocuments.size>0&&(it(u.lu,42227),u.lu=!1))})),await ku(t,i,e)}catch(i){await Ga(i)}}function NT(n,e,t){const i=xe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Pu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const p=xe(u);p.onlineState=d;let m=!1;p.queries.forEach(((v,T)=>{for(const S of T.wa)S.va(d)&&(m=!0)})),m&&mg(p)})(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function uD(n,e,t){const i=xe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),a=o&&o.key;if(a){let u=new Et(Ee.comparator);u=u.insert(a,dn.newNoDocument(a,Re.min()));const d=He().add(a),p=new df(Re.min(),new Map,new Et(Le),u,d);await EC(i,p),i.du=i.du.remove(a),i.Eu.delete(e),yg(i)}else await hm(i.localStore,e,!1).then((()=>gm(i,e,t))).catch(Ga)}async function cD(n,e){const t=xe(n),i=e.batch.batchId;try{const o=await yM(t.localStore,e);AC(t,i,null),SC(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await ku(t,o)}catch(o){await Ga(o)}}async function dD(n,e,t){const i=xe(n);try{const o=await(function(u,d){const p=xe(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return p.mutationQueue.lookupMutationBatch(m,d).next((T=>(it(T!==null,37113),v=T.keys(),p.mutationQueue.removeMutationBatch(m,T)))).next((()=>p.mutationQueue.performConsistencyCheck(m))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(m,v,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>p.localDocuments.getDocuments(m,v)))}))})(i.localStore,e);AC(i,e,t),SC(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await ku(i,o)}catch(o){await Ga(o)}}function SC(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function AC(n,e,t){const i=xe(n);let o=i.Ru[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function gm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Tu.get(e))n.Pu.delete(i),t&&n.hu.pu(i,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((i=>{n.Au.containsKey(i)||CC(n,i)}))}function CC(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(ug(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),yg(n))}function MT(n,e,t){for(const i of t)i instanceof _C?(n.Au.addReference(i.key,e),fD(n,i)):i instanceof vC?(pe(gg,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,e),n.Au.containsKey(i.key)||CC(n,i.key)):Ie(19791,{yu:i})}function fD(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Iu.has(i)||(pe(gg,"New document in limbo: "+t),n.Iu.add(i),yg(n))}function yg(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Ee(_t.fromString(e)),i=n.mu.next();n.Eu.set(i,new tD(t)),n.du=n.du.insert(t,i),fC(n.remoteStore,new Cr(Oi(LA(t.path)),i,"TargetPurposeLimboResolution",nf.ue))}}async function ku(n,e,t){const i=xe(n),o=[],a=[],u=[];i.Pu.isEmpty()||(i.Pu.forEach(((d,p)=>{u.push(i.gu(p,e,t).then((m=>{var v;if((m||t)&&i.isPrimaryClient){const T=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(m){o.push(m);const T=ag.Es(p.targetId,m);a.push(T)}})))})),await Promise.all(u),i.hu.J_(o),await(async function(p,m){const v=xe(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>se.forEach(m,(S=>se.forEach(S.Is,(R=>v.persistence.referenceDelegate.addReference(T,S.targetId,R))).next((()=>se.forEach(S.ds,(R=>v.persistence.referenceDelegate.removeReference(T,S.targetId,R)))))))))}catch(T){if(!Ja(T))throw T;pe(lg,"Failed to update sequence numbers: "+T)}for(const T of m){const S=T.targetId;if(!T.fromCache){const R=v.Fs.get(S),L=R.snapshotVersion,z=R.withLastLimboFreeSnapshotVersion(L);v.Fs=v.Fs.insert(S,z)}}})(i.localStore,a))}async function hD(n,e){const t=xe(n);if(!t.currentUser.isEqual(e)){pe(gg,"User change. New user:",e.toKey());const i=await lC(t.localStore,e);t.currentUser=e,(function(a,u){a.Vu.forEach((d=>{d.forEach((p=>{p.reject(new _e(re.CANCELLED,u))}))})),a.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await ku(t,i.Bs)}}function pD(n,e){const t=xe(n),i=t.Eu.get(e);if(i&&i.lu)return He().add(i.key);{let o=He();const a=t.Tu.get(e);if(!a)return o;for(const u of a){const d=t.Pu.get(u);o=o.unionWith(d.view.tu)}return o}}function IC(n){const e=xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=EC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uD.bind(null,e),e.hu.J_=WM.bind(null,e.eventManager),e.hu.pu=jM.bind(null,e.eventManager),e}function mD(n){const e=xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dD.bind(null,e),e}class Jd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ff(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return gM(this.persistence,new hM,e.initialUser,this.serializer)}Du(e){return new aC(og.Vi,this.serializer)}bu(e){return new AM}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jd.provider={build:()=>new Jd};class gD extends Jd{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){it(this.persistence.referenceDelegate instanceof Hd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new X2(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new aC((i=>Hd.Vi(i,t)),this.serializer)}}class ym{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>NT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=hD.bind(null,this.syncEngine),await JM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new KM})()}createDatastore(e){const t=ff(e.databaseInfo.databaseId),i=(function(a){return new bM(a)})(e.databaseInfo);return(function(a,u,d,p){return new DM(a,u,d,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,a,u,d){return new PM(i,o,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>NT(this.syncEngine,t,0)),(function(){return CT.C()?new CT:new CM})())}createSyncEngine(e,t){return(function(o,a,u,d,p,m,v){const T=new nD(o,a,u,d,p,m);return v&&(T.fu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const a=xe(o);pe(No,"RemoteStore shutting down."),a.Ia.add(5),await Du(a),a.Ea.shutdown(),a.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}ym.provider={build:()=>new ym};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):As("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr="FirestoreClient";class _D{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=cn.UNAUTHENTICATED,this.clientId=Km.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{pe(Lr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(pe(Lr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=pg(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Gp(n,e){n.asyncQueue.verifyOperationInProgress(),pe(Lr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await lC(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>{Mr("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{pe("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{Mr("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),n._offlineComponents=e}async function DT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await vD(n);pe(Lr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>wT(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>wT(e.remoteStore,o))),n._onlineComponents=e}async function vD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pe(Lr,"Using user provided OfflineComponentProvider");try{await Gp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===re.FAILED_PRECONDITION||o.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Mr("Error using user provided cache. Falling back to memory cache: "+t),await Gp(n,new Jd)}}else pe(Lr,"Using default OfflineComponentProvider"),await Gp(n,new gD(void 0));return n._offlineComponents}async function wC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pe(Lr,"Using user provided OnlineComponentProvider"),await DT(n,n._uninitializedComponentsProvider._online)):(pe(Lr,"Using default OnlineComponentProvider"),await DT(n,new ym))),n._onlineComponents}function TD(n){return wC(n).then((e=>e.syncEngine))}async function ED(n){const e=await wC(n),t=e.eventManager;return t.onListen=iD.bind(null,e.syncEngine),t.onUnlisten=oD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=sD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=aD.bind(null,e.syncEngine),t}function SD(n,e,t={}){const i=new br;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,p,m){const v=new yD({next:S=>{v.Ou(),u.enqueueAndForget((()=>QM(a,T))),S.fromCache&&p.source==="server"?m.reject(new _e(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),T=new XM(d,v,{includeMetadataChanges:!0,ka:!0});return $M(a,T)})(await ED(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC="firestore.googleapis.com",PT=!0;class VT{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new _e(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bC,this.ssl=PT}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:PT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=oC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<W2)throw new _e(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}PN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RC((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new _e(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new _e(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new _e(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mf{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new VT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new VT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new IN;switch(i.type){case"firstParty":return new xN(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new _e(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=kT.get(t);i&&(pe("ComponentProvider","Removing Datastore"),kT.delete(t),i.terminate())})(this),Promise.resolve()}}function AD(n,e,t,i={}){var o;n=xo(n,mf);const a=Or(e),u=n._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),p=`${e}:${t}`;a&&(Nm(`https://${p}`),Mm("Firestore",!0)),u.host!==bC&&u.host!==p&&Mr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},u),{host:p,ssl:a,emulatorOptions:i});if(!Co(m,d)&&(n._setSettings(m),i.mockUserToken)){let v,T;if(typeof i.mockUserToken=="string")v=i.mockUserToken,T=cn.MOCK_USER;else{v=IS(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new _e(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new cn(S)}n._authCredentials=new wN(new yA(v,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new gf(this.firestore,e,this._query)}}class Qt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qt(this.firestore,e,this._key)}toJSON(){return{type:Qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(xu(t,Qt._jsonSchema))return new Qt(e,i||null,new Ee(_t.fromString(t.referencePath)))}}Qt._jsonSchemaVersion="firestore/documentReference/1.0",Qt._jsonSchema={type:Bt("string",Qt._jsonSchemaVersion),referencePath:Bt("string")};class xr extends gf{constructor(e,t,i){super(e,t,LA(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qt(this.firestore,null,new Ee(e))}withConverter(e){return new xr(this.firestore,e,this._path)}}function yf(n,e,...t){if(n=Dt(n),vA("collection","path",e),n instanceof mf){const i=_t.fromString(e,...t);return Q0(i),new xr(n,null,i)}{if(!(n instanceof Qt||n instanceof xr))throw new _e(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(_t.fromString(e,...t));return Q0(i),new xr(n.firestore,null,i)}}function _f(n,e,...t){if(n=Dt(n),arguments.length===1&&(e=Km.newId()),vA("doc","path",e),n instanceof mf){const i=_t.fromString(e,...t);return $0(i),new Qt(n,null,new Ee(i))}{if(!(n instanceof Qt||n instanceof xr))throw new _e(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(_t.fromString(e,...t));return $0(i),new Qt(n.firestore,n instanceof xr?n.converter:null,new Ee(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT="AsyncQueue";class LT{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new cC(this,"async_queue_retry"),this.oc=()=>{const i=Hp();i&&pe(UT,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=Hp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Hp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new br;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ja(e))throw e;pe(UT,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,As("INTERNAL UNHANDLED ERROR: ",OT(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=hg.createAndSchedule(this,e,t,i,(a=>this.lc(a)));return this.ec.push(o),o}ac(){this.tc&&Ie(47125,{hc:OT(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function OT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Pu extends mf{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new LT,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new LT(e),this._firestoreClient=void 0,await e}}}function CD(n,e){const t=typeof n=="object"?n:Pm(),i=typeof n=="string"?n:Ud,o=Xd(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=SS("firestore");a&&AD(o,...a)}return o}function xC(n){if(n._terminated)throw new _e(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||ID(n),n._firestoreClient}function ID(n){var e,t,i;const o=n._freezeSettings(),a=(function(d,p,m,v){return new JN(d,p,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,RC(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new _D(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&(function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new oi(rn.fromBase64String(e))}catch(t){throw new _e(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new oi(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:oi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(xu(e,oi._jsonSchema))return oi.fromBase64String(e.bytes)}}oi._jsonSchemaVersion="firestore/bytes/1.0",oi._jsonSchema={type:Bt("string",oi._jsonSchemaVersion),bytes:Bt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Bi._jsonSchemaVersion}}static fromJSON(e){if(xu(e,Bi._jsonSchema))return new Bi(e.latitude,e.longitude)}}Bi._jsonSchemaVersion="firestore/geoPoint/1.0",Bi._jsonSchema={type:Bt("string",Bi._jsonSchemaVersion),latitude:Bt("number"),longitude:Bt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Fi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(xu(e,Fi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Fi(e.vectorValues);throw new _e(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Fi._jsonSchemaVersion="firestore/vectorValue/1.0",Fi._jsonSchema={type:Bt("string",Fi._jsonSchemaVersion),vectorValues:Bt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=/^__.*__$/;class RD{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Hr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Nu(e,this.data,t,this.fieldTransforms)}}class NC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Hr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function MC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ec:n})}}class vg{constructor(e,t,i,o,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new vg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Yd(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(MC(this.Ec)&&wD.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class bD{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||ff(e)}Dc(e,t,i,o=!1){return new vg({Ec:e,methodName:t,bc:i,path:sn.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function DC(n){const e=n._freezeSettings(),t=ff(n._databaseId);return new bD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function xD(n,e,t,i,o,a={}){const u=n.Dc(a.merge||a.mergeFields?2:0,e,t,o);Tg("Data must be an object, but it was:",u,i);const d=kC(i,u);let p,m;if(a.merge)p=new Hn(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const T of a.mergeFields){const S=_m(e,T,t);if(!u.contains(S))throw new _e(re.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);VC(v,S)||v.push(S)}p=new Hn(v),m=u.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,m=u.fieldTransforms;return new RD(new Nn(d),p,m)}class Tf extends _g{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tf}}function ND(n,e,t,i){const o=n.Dc(1,e,t);Tg("Data must be an object, but it was:",o,i);const a=[],u=Nn.empty();zr(i,((p,m)=>{const v=Eg(e,p,t);m=Dt(m);const T=o.gc(v);if(m instanceof Tf)a.push(v);else{const S=Ef(m,T);S!=null&&(a.push(v),u.set(v,S))}}));const d=new Hn(a);return new NC(u,d,o.fieldTransforms)}function MD(n,e,t,i,o,a){const u=n.Dc(1,e,t),d=[_m(e,i,t)],p=[o];if(a.length%2!=0)throw new _e(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<a.length;S+=2)d.push(_m(e,a[S])),p.push(a[S+1]);const m=[],v=Nn.empty();for(let S=d.length-1;S>=0;--S)if(!VC(m,d[S])){const R=d[S];let L=p[S];L=Dt(L);const z=u.gc(R);if(L instanceof Tf)m.push(R);else{const B=Ef(L,z);B!=null&&(m.push(R),v.set(R,B))}}const T=new Hn(m);return new NC(v,T,u.fieldTransforms)}function Ef(n,e){if(PC(n=Dt(n)))return Tg("Unsupported field value:",e,n),kC(n,e);if(n instanceof _g)return(function(i,o){if(!MC(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,o){const a=[];let u=0;for(const d of i){let p=Ef(d,o.yc(u));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,o){if((i=Dt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return m2(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=vt.fromDate(i);return{timestampValue:zd(o.serializer,a)}}if(i instanceof vt){const a=new vt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:zd(o.serializer,a)}}if(i instanceof Bi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof oi)return{bytesValue:ZA(o.serializer,i._byteString)};if(i instanceof Qt){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:sg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Fi)return(function(u,d){return{mapValue:{fields:{[bA]:{stringValue:xA},[Ld]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw d.wc("VectorValues must only contain numeric values.");return eg(d.serializer,m)}))}}}}}})(i,o);throw o.wc(`Unsupported field value: ${$m(i)}`)})(n,e)}function kC(n,e){const t={};return SA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zr(n,((i,o)=>{const a=Ef(o,e.Vc(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function PC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof vt||n instanceof Bi||n instanceof oi||n instanceof Qt||n instanceof _g||n instanceof Fi)}function Tg(n,e,t){if(!PC(t)||!TA(t)){const i=$m(t);throw i==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+i)}}function _m(n,e,t){if((e=Dt(e))instanceof vf)return e._internalPath;if(typeof e=="string")return Eg(n,e);throw Yd("Field path arguments must be of type string or ",n,!1,void 0,t)}const DD=new RegExp("[~\\*/\\[\\]]");function Eg(n,e,t){if(e.search(DD)>=0)throw Yd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new vf(...e.split("."))._internalPath}catch{throw Yd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Yd(n,e,t,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||u)&&(p+=" (found",a&&(p+=` in field ${i}`),u&&(p+=` in document ${o}`),p+=")"),new _e(re.INVALID_ARGUMENT,d+n+p)}function VC(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new kD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(LC("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class kD extends UC{data(){return super.data()}}function LC(n,e){return typeof e=="string"?Eg(n,e):e instanceof vf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new _e(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class VD{convertValue(e,t="none"){switch(Vr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return zr(e,((o,a)=>{i[o]=this.convertValue(a,t)})),i}convertVectorValue(e){var t,i,o;const a=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[Ld].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((u=>Mt(u.doubleValue)));return new Fi(a)}convertGeoPoint(e){return new Bi(Mt(e.latitude),Mt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=rf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(_u(e));default:return null}}convertTimestamp(e){const t=kr(e);return new vt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=_t.fromString(e);it(rC(i),9688,{name:e});const o=new vu(i.get(1),i.get(3)),a=new Ee(i.popFirst(5));return o.isEqual(t)||As(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class fd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Da extends UC{constructor(e,t,i,o,a,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Cd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(LC("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Da._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Da._jsonSchemaVersion="firestore/documentSnapshot/1.0",Da._jsonSchema={type:Bt("string",Da._jsonSchemaVersion),bundleSource:Bt("string","DocumentSnapshot"),bundleName:Bt("string"),bundle:Bt("string")};class Cd extends Da{data(e={}){return super.data(e)}}class ka{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new fd(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Cd(this._firestore,this._userDataWriter,i.key,i,new fd(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const p=new Cd(o._firestore,o._userDataWriter,d.doc.key,d.doc,new fd(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const p=new Cd(o._firestore,o._userDataWriter,d.doc.key,d.doc,new fd(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,v=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:LD(d.type),doc:p,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ka._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Km.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function LD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:n})}}ka._jsonSchemaVersion="firestore/querySnapshot/1.0",ka._jsonSchema={type:Bt("string",ka._jsonSchemaVersion),bundleSource:Bt("string","QuerySnapshot"),bundleName:Bt("string"),bundle:Bt("string")};class OD extends VD{constructor(e){super(),this.firestore=e}convertBytes(e){return new oi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qt(this.firestore,null,t)}}function OC(n){n=xo(n,gf);const e=xo(n.firestore,Pu),t=xC(e),i=new OD(e);return PD(n._query),SD(t,n._query).then((o=>new ka(e,i,n,o)))}function qD(n,e,t,...i){n=xo(n,Qt);const o=xo(n.firestore,Pu),a=DC(o);let u;return u=typeof(e=Dt(e))=="string"||e instanceof vf?MD(a,"updateDoc",n._key,e,t,i):ND(a,"updateDoc",n._key,e),Sg(o,[u.toMutation(n._key,Ti.exists(!0))])}function qC(n){return Sg(xo(n.firestore,Pu),[new tg(n._key,Ti.none())])}function BC(n,e){const t=xo(n.firestore,Pu),i=_f(n),o=UD(n.converter,e);return Sg(t,[xD(DC(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,Ti.exists(!1))]).then((()=>i))}function Sg(n,e){return(function(i,o){const a=new br;return i.asyncQueue.enqueueAndForget((async()=>lD(await TD(i),o,a))),a.promise})(xC(n),e)}(function(e,t=!0){(function(o){Ha=o})(Do),Io(new Nr("firestore",((i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new Pu(new RN(i.getProvider("auth-internal")),new NN(u,i.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new _e(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vu(m.options.projectId,v)})(u,o),u);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),Ui(H0,G0,e),Ui(H0,G0,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC="firebasestorage.googleapis.com",zC="storageBucket",BD=120*1e3,FD=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt extends Gi{constructor(e,t,i=0){super(Jp(e),`Firebase Storage: ${t} (${Jp(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Rt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Jp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var wt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(wt||(wt={}));function Jp(n){return"storage/"+n}function Ag(){const n="An unknown error occurred, please check the error payload for server response.";return new Rt(wt.UNKNOWN,n)}function zD(n){return new Rt(wt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function HD(n){return new Rt(wt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function GD(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Rt(wt.UNAUTHENTICATED,n)}function JD(){return new Rt(wt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function YD(n){return new Rt(wt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function KD(){return new Rt(wt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function $D(){return new Rt(wt.CANCELED,"User canceled the upload/download.")}function QD(n){return new Rt(wt.INVALID_URL,"Invalid URL '"+n+"'.")}function WD(n){return new Rt(wt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function jD(){return new Rt(wt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+zC+"' property when initializing the app?")}function XD(){return new Rt(wt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ZD(){return new Rt(wt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function ek(n){return new Rt(wt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function vm(n){return new Rt(wt.INVALID_ARGUMENT,n)}function HC(){return new Rt(wt.APP_DELETED,"The Firebase app was deleted.")}function tk(n){return new Rt(wt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function fu(n,e){return new Rt(wt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function jl(n){throw new Rt(wt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Gn.makeFromUrl(e,t)}catch{return new Gn(e,"")}if(i.path==="")return i;throw WD(e)}static makeFromUrl(e,t){let i=null;const o="([A-Za-z0-9.\\-_]+)";function a(ie){ie.path.charAt(ie.path.length-1)==="/"&&(ie.path_=ie.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+o+u,"i"),p={bucket:1,path:3};function m(ie){ie.path_=decodeURIComponent(ie.path)}const v="v[A-Za-z0-9_]+",T=t.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",R=new RegExp(`^https?://${T}/${v}/b/${o}/o${S}`,"i"),L={bucket:1,path:3},z=t===FC?"(?:storage.googleapis.com|storage.cloud.google.com)":t,B="([^?#]*)",ee=new RegExp(`^https?://${z}/${o}/${B}`,"i"),W=[{regex:d,indices:p,postModify:a},{regex:R,indices:L,postModify:m},{regex:ee,indices:{bucket:1,path:2},postModify:m}];for(let ie=0;ie<W.length;ie++){const de=W[ie],ue=de.regex.exec(e);if(ue){const D=ue[de.indices.bucket];let N=ue[de.indices.path];N||(N=""),i=new Gn(D,N),de.postModify(i);break}}if(i==null)throw QD(e);return i}}class nk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(n,e,t){let i=1,o=null,a=null,u=!1,d=0;function p(){return d===2}let m=!1;function v(...B){m||(m=!0,e.apply(null,B))}function T(B){o=setTimeout(()=>{o=null,n(R,p())},B)}function S(){a&&clearTimeout(a)}function R(B,...ee){if(m){S();return}if(B){S(),v.call(null,B,...ee);return}if(p()||u){S(),v.call(null,B,...ee);return}i<64&&(i*=2);let W;d===1?(d=2,W=0):W=(i+Math.random())*1e3,T(W)}let L=!1;function z(B){L||(L=!0,S(),!m&&(o!==null?(B||(d=2),clearTimeout(o),T(0)):B||(d=1)))}return T(0),a=setTimeout(()=>{u=!0,z(!0)},t),z}function sk(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(n){return n!==void 0}function ok(n){return typeof n=="object"&&!Array.isArray(n)}function Cg(n){return typeof n=="string"||n instanceof String}function qT(n){return Ig()&&n instanceof Blob}function Ig(){return typeof Blob<"u"}function BT(n,e,t,i){if(i<e)throw vm(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw vm(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(n,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function GC(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const o=e(i)+"="+e(n[i]);t=t+o+"&"}return t=t.slice(0,-1),t}var Ao;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Ao||(Ao={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||o||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e,t,i,o,a,u,d,p,m,v,T,S=!0,R=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=o,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=p,this.timeout_=m,this.progressCallback_=v,this.connectionFactory_=T,this.retry=S,this.isUsingEmulator=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((L,z)=>{this.resolve_=L,this.reject_=z,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new hd(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=d=>{const p=d.loaded,m=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,m)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const d=a.getErrorCode()===Ao.NO_ERROR,p=a.getStatus();if(!d||ak(p,this.additionalRetryCodes_)&&this.retry){const v=a.getErrorCode()===Ao.ABORT;i(!1,new hd(!1,null,v));return}const m=this.successCodes_.indexOf(p)!==-1;i(!0,new hd(m,a))})},t=(i,o)=>{const a=this.resolve_,u=this.reject_,d=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());rk(p)?a(p):a()}catch(p){u(p)}else if(d!==null){const p=Ag();p.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,p)):u(p)}else if(o.canceled){const p=this.appDelete_?HC():$D();u(p)}else{const p=KD();u(p)}};this.canceled_?t(!1,new hd(!1,null,!0)):this.backoffId_=ik(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&sk(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class hd{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function uk(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function ck(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function dk(n,e){e&&(n["X-Firebase-GMPID"]=e)}function fk(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function hk(n,e,t,i,o,a,u=!0,d=!1){const p=GC(n.urlParams),m=n.url+p,v=Object.assign({},n.headers);return dk(v,e),uk(v,t),ck(v,a),fk(v,i),new lk(m,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,u,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function mk(...n){const e=pk();if(e!==void 0){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}else{if(Ig())return new Blob(n);throw new Rt(wt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function gk(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(n){if(typeof atob>"u")throw ek("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Yp{constructor(e,t){this.data=e,this.contentType=t||null}}function JC(n,e){switch(n){case _i.RAW:return new Yp(YC(e));case _i.BASE64:case _i.BASE64URL:return new Yp(KC(n,e));case _i.DATA_URL:return new Yp(vk(e),Tk(e))}throw Ag()}function YC(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=i,u=n.charCodeAt(++t);i=65536|(a&1023)<<10|u&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function _k(n){let e;try{e=decodeURIComponent(n)}catch{throw fu(_i.DATA_URL,"Malformed data URL.")}return YC(e)}function KC(n,e){switch(n){case _i.BASE64:{const o=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(o||a)throw fu(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case _i.BASE64URL:{const o=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(o||a)throw fu(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=yk(e)}catch(o){throw o.message.includes("polyfill")?o:fu(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}class $C{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw fu(_i.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=Ek(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function vk(n){const e=new $C(n);return e.base64?KC(_i.BASE64,e.rest):_k(e.rest)}function Tk(n){return new $C(n).contentType}function Ek(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,t){let i=0,o="";qT(e)?(this.data_=e,i=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(qT(this.data_)){const i=this.data_,o=gk(i,e,t);return o===null?null:new Ar(o)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new Ar(i,!0)}}static getBlob(...e){if(Ig()){const t=e.map(i=>i instanceof Ar?i.data_:i);return new Ar(mk.apply(null,t))}else{const t=e.map(u=>Cg(u)?JC(_i.RAW,u).data:u.data_);let i=0;t.forEach(u=>{i+=u.byteLength});const o=new Uint8Array(i);let a=0;return t.forEach(u=>{for(let d=0;d<u.length;d++)o[a++]=u[d]}),new Ar(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(n){let e;try{e=JSON.parse(n)}catch{return null}return ok(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Ak(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return n.length===0?t:n+"/"+t}function WC(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(n,e){return e}class Tn{constructor(e,t,i,o){this.server=e,this.local=t||e,this.writable=!!i,this.xform=o||Ck}}let pd=null;function Ik(n){return!Cg(n)||n.length<2?n:WC(n)}function jC(){if(pd)return pd;const n=[];n.push(new Tn("bucket")),n.push(new Tn("generation")),n.push(new Tn("metageneration")),n.push(new Tn("name","fullPath",!0));function e(a,u){return Ik(u)}const t=new Tn("name");t.xform=e,n.push(t);function i(a,u){return u!==void 0?Number(u):u}const o=new Tn("size");return o.xform=i,n.push(o),n.push(new Tn("timeCreated")),n.push(new Tn("updated")),n.push(new Tn("md5Hash",null,!0)),n.push(new Tn("cacheControl",null,!0)),n.push(new Tn("contentDisposition",null,!0)),n.push(new Tn("contentEncoding",null,!0)),n.push(new Tn("contentLanguage",null,!0)),n.push(new Tn("contentType",null,!0)),n.push(new Tn("metadata","customMetadata",!0)),pd=n,pd}function wk(n,e){function t(){const i=n.bucket,o=n.fullPath,a=new Gn(i,o);return e._makeStorageReference(a)}Object.defineProperty(n,"ref",{get:t})}function Rk(n,e,t){const i={};i.type="file";const o=t.length;for(let a=0;a<o;a++){const u=t[a];i[u.local]=u.xform(i,e[u.server])}return wk(i,n),i}function XC(n,e,t){const i=QC(e);return i===null?null:Rk(n,i,t)}function bk(n,e,t,i){const o=QC(e);if(o===null||!Cg(o.downloadTokens))return null;const a=o.downloadTokens;if(a.length===0)return null;const u=encodeURIComponent;return a.split(",").map(m=>{const v=n.bucket,T=n.fullPath,S="/b/"+u(v)+"/o/"+u(T),R=wg(S,t,i),L=GC({alt:"media",token:m});return R+L})[0]}function xk(n,e){const t={},i=e.length;for(let o=0;o<i;o++){const a=e[o];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}class ZC{constructor(e,t,i,o){this.url=e,this.method=t,this.handler=i,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(n){if(!n)throw Ag()}function Nk(n,e){function t(i,o){const a=XC(n,o,e);return eI(a!==null),a}return t}function Mk(n,e){function t(i,o){const a=XC(n,o,e);return eI(a!==null),bk(a,o,n.host,n._protocol)}return t}function tI(n){function e(t,i){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=JD():o=GD():t.getStatus()===402?o=HD(n.bucket):t.getStatus()===403?o=YD(n.path):o=i,o.status=t.getStatus(),o.serverResponse=i.serverResponse,o}return e}function Dk(n){const e=tI(n);function t(i,o){let a=e(i,o);return i.getStatus()===404&&(a=zD(n.path)),a.serverResponse=o.serverResponse,a}return t}function kk(n,e,t){const i=e.fullServerUrl(),o=wg(i,n.host,n._protocol),a="GET",u=n.maxOperationRetryTime,d=new ZC(o,a,Mk(n,t),u);return d.errorHandler=Dk(e),d}function Pk(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function Vk(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=Pk(null,e)),i}function Uk(n,e,t,i,o){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function d(){let W="";for(let ie=0;ie<2;ie++)W=W+Math.random().toString().slice(2);return W}const p=d();u["Content-Type"]="multipart/related; boundary="+p;const m=Vk(e,i,o),v=xk(m,t),T="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+p+`\r
Content-Type: `+m.contentType+`\r
\r
`,S=`\r
--`+p+"--",R=Ar.getBlob(T,i,S);if(R===null)throw XD();const L={name:m.fullPath},z=wg(a,n.host,n._protocol),B="POST",ee=n.maxUploadRetryTime,Y=new ZC(z,B,Nk(n,t),ee);return Y.urlParams=L,Y.headers=u,Y.body=R.uploadData(),Y.errorHandler=tI(e),Y}class Lk{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ao.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ao.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ao.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,o,a){if(this.sent_)throw jl("cannot .send() more than once");if(Or(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),a!==void 0)for(const u in a)a.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,a[u].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw jl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw jl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw jl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw jl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Ok extends Lk{initXhr(){this.xhr_.responseType="text"}}function nI(){return new Ok}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,t){this._service=e,t instanceof Gn?this._location=t:this._location=Gn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Mo(e,t)}get root(){const e=new Gn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return WC(this._location.path)}get storage(){return this._service}get parent(){const e=Sk(this._location.path);if(e===null)return null;const t=new Gn(this._location.bucket,e);return new Mo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw tk(e)}}function qk(n,e,t){n._throwIfRoot("uploadBytes");const i=Uk(n.storage,n._location,jC(),new Ar(e,!0),t);return n.storage.makeRequestWithTokens(i,nI).then(o=>({metadata:o,ref:n}))}function Bk(n,e,t=_i.RAW,i){n._throwIfRoot("uploadString");const o=JC(t,e),a=Object.assign({},i);return a.contentType==null&&o.contentType!=null&&(a.contentType=o.contentType),qk(n,o.data,a)}function Fk(n){n._throwIfRoot("getDownloadURL");const e=kk(n.storage,n._location,jC());return n.storage.makeRequestWithTokens(e,nI).then(t=>{if(t===null)throw ZD();return t})}function zk(n,e){const t=Ak(n._location.path,e),i=new Gn(n._location.bucket,t);return new Mo(n.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(n){return/^[A-Za-z]+:\/\//.test(n)}function Gk(n,e){return new Mo(n,e)}function iI(n,e){if(n instanceof Rg){const t=n;if(t._bucket==null)throw jD();const i=new Mo(t,t._bucket);return e!=null?iI(i,e):i}else return e!==void 0?zk(n,e):n}function Jk(n,e){if(e&&Hk(e)){if(n instanceof Rg)return Gk(n,e);throw vm("To use ref(service, url), the first argument must be a Storage instance.")}else return iI(n,e)}function FT(n,e){const t=e==null?void 0:e[zC];return t==null?null:Gn.makeFromBucketSpec(t,n)}function Yk(n,e,t,i={}){n.host=`${e}:${t}`;const o=Or(e);o&&(Nm(`https://${n.host}/b`),Mm("Storage",!0)),n._isUsingEmulator=!0,n._protocol=o?"https":"http";const{mockUserToken:a}=i;a&&(n._overrideAuthToken=typeof a=="string"?a:IS(a,n.app.options.projectId))}class Rg{constructor(e,t,i,o,a,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=o,this._firebaseVersion=a,this._isUsingEmulator=u,this._bucket=null,this._host=FC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=BD,this._maxUploadRetryTime=FD,this._requests=new Set,o!=null?this._bucket=Gn.makeFromBucketSpec(o,this._host):this._bucket=FT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Gn.makeFromBucketSpec(this._url,e):this._bucket=FT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){BT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){BT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Mo(this,e)}_makeRequest(e,t,i,o,a=!0){if(this._deleted)return new nk(HC());{const u=hk(e,this._appId,i,o,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,o).getPromise()}}const zT="@firebase/storage",HT="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="storage";function Kk(n,e,t,i){return n=Dt(n),Bk(n,e,t,i)}function $k(n){return n=Dt(n),Fk(n)}function Qk(n,e){return n=Dt(n),Jk(n,e)}function Wk(n=Pm(),e){n=Dt(n);const i=Xd(n,sI).getImmediate({identifier:e}),o=SS("storage");return o&&jk(i,...o),i}function jk(n,e,t,i={}){Yk(n,e,t,i)}function Xk(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new Rg(t,i,o,e,Do)}function Zk(){Io(new Nr(sI,Xk,"PUBLIC").setMultipleInstances(!0)),Ui(zT,HT,""),Ui(zT,HT,"esm2017")}Zk();const eP={apiKey:"AIzaSyAoMQ8oVPP5oFjw8YzgF0H1Dy4DAJmNaKM",authDomain:"dresscode-ai-32c50.firebaseapp.com",projectId:"dresscode-ai-32c50",storageBucket:"dresscode-ai-32c50.firebasestorage.app",messagingSenderId:"215593114437",appId:"1:215593114437:web:5d9c1f3161182802f37c2c"},bg=bS(eP),su=EN(bg),tP=new ys,Vo=CD(bg),nP=Wk(bg);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let iP,sP;function rP(){return{geminiUrl:iP,vertexUrl:sP}}function oP(n,e,t,i){var o,a;if(!(n!=null&&n.baseUrl)){const u=rP();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:t:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ws{}function fe(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const a=e[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function g(n,e,t){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const p=n[d];if(Array.isArray(t))for(let m=0;m<p.length;m++){const v=p[m];g(v,e.slice(a+1),t[m])}else for(const m of p)g(m,e.slice(a+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const p=n[d];g(p[0],e.slice(a+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],o=n[i];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(a in n){const u=n[a];return Array.isArray(u)?u.map(d=>f(d,e.slice(i+1),t)):t}else return t}else n=n[o]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function aP(n,e){for(const[t,i]of Object.entries(e)){const o=t.split("."),a=i.split("."),u=new Set;let d=-1;for(let p=0;p<o.length;p++)if(o[p]==="*"){d=p;break}if(d!==-1&&a.length>d)for(let p=d;p<a.length;p++){const m=a[p];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&u.add(m)}Tm(n,o,a,0,u)}}function Tm(n,e,t,i,o){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const p of d[u])Tm(p,e,t,i+1,o)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(m=>!m.startsWith("_")&&!o.has(m)),p={};for(const m of d)p[m]=u[m];for(const[m,v]of Object.entries(p)){const T=[];for(const S of t.slice(i))S==="*"?T.push(m):T.push(S);g(u,T,v)}for(const m of d)delete u[m]}}else{const u=n;a in u&&Tm(u[a],e,t,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xg(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lP(n){const e={},t=f(n,["operationName"]);t!=null&&g(e,["operationName"],t);const i=f(n,["resourceName"]);return i!=null&&g(e,["_url","resourceName"],i),e}function uP(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],dP(u)),e}function cP(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response"]);return u!=null&&g(e,["response"],fP(u)),e}function dP(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>hP(u))),g(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function fP(n){const e={},t=f(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>pP(u))),g(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function hP(n){const e={},t=f(n,["video"]);return t!=null&&g(e,["video"],TP(t)),e}function pP(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],EP(t)),e}function mP(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function gP(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function yP(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response"]);return u!=null&&g(e,["response"],_P(u)),e}function _P(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&g(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&g(e,["documentName"],o),e}function rI(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response"]);return u!=null&&g(e,["response"],vP(u)),e}function vP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&g(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&g(e,["documentName"],o),e}function TP(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const i=f(n,["encodedVideo"]);i!=null&&g(e,["videoBytes"],xg(i));const o=f(n,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function EP(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],xg(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var GT;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(GT||(GT={}));var JT;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(JT||(JT={}));var YT;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(YT||(YT={}));var Pe;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Pe||(Pe={}));var KT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(KT||(KT={}));var $T;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})($T||($T={}));var QT;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(QT||(QT={}));var WT;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(WT||(WT={}));var jT;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(jT||(jT={}));var XT;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(XT||(XT={}));var ZT;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(ZT||(ZT={}));var eE;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(eE||(eE={}));var tE;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(tE||(tE={}));var nE;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(nE||(nE={}));var iE;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(iE||(iE={}));var sE;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(sE||(sE={}));var rE;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(rE||(rE={}));var oE;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(oE||(oE={}));var Kd;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Kd||(Kd={}));var aE;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(aE||(aE={}));var lE;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(lE||(lE={}));var uE;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(uE||(uE={}));var Em;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Em||(Em={}));var cE;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(cE||(cE={}));var dE;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(dE||(dE={}));var fE;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(fE||(fE={}));var hE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(hE||(hE={}));var pE;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(pE||(pE={}));var mE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(mE||(mE={}));var gE;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(gE||(gE={}));var yE;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(yE||(yE={}));var _E;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(_E||(_E={}));var vE;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(vE||(vE={}));var TE;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(TE||(TE={}));var EE;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(EE||(EE={}));var SE;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(SE||(SE={}));var AE;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(AE||(AE={}));var CE;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(CE||(CE={}));var IE;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(IE||(IE={}));var wE;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(wE||(wE={}));var RE;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(RE||(RE={}));var bE;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(bE||(bE={}));var xE;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(xE||(xE={}));var NE;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(NE||(NE={}));var ME;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(ME||(ME={}));var DE;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(DE||(DE={}));var kE;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(kE||(kE={}));var PE;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(PE||(PE={}));var VE;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(VE||(VE={}));var UE;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(UE||(UE={}));var LE;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(LE||(LE={}));var OE;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(OE||(OE={}));var Ra;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Ra||(Ra={}));class Sm{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Xl{get text(){var e,t,i,o,a,u,d,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const T=[];for(const S of(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[R,L]of Object.entries(S))R!=="text"&&R!=="thought"&&(L!==null||L!==void 0)&&T.push(R);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,m+=S.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,t,i,o,a,u,d,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const T of(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[S,R]of Object.entries(T))S!=="inlineData"&&(R!==null||R!==void 0)&&v.push(S);T.inlineData&&typeof T.inlineData.data=="string"&&(m+=atob(T.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,i,o,a,u,d,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,i,o,a,u,d,p,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,i,o,a,u,d,p,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class qE{}class BE{}class SP{}class AP{}class CP{}class IP{}class FE{}class zE{}class HE{}class wP{}class $d{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new $d;let o;const a=e;return t?o=cP(a):o=uP(a),Object.assign(i,o),i}}class GE{}class JE{}class YE{}class RP{}class bP{}class xP{}class Ng{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Ng,a=yP(e);return Object.assign(i,a),i}}class NP{}class MP{}class DP{}class KE{}class kP{get text(){var e,t,i;let o="",a=!1;const u=[];for(const d of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[p,m]of Object.entries(d))p!=="text"&&p!=="thought"&&m!==null&&u.push(p);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,o+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var e,t,i;let o="";const a=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[d,p]of Object.entries(u))d!=="inlineData"&&p!==null&&a.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class PP{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Mg{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Mg,a=rI(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function et(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function oI(n,e){const t=et(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function aI(n){return Array.isArray(n)?n.map(e=>Qd(e)):[Qd(n)]}function Qd(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function lI(n){const e=Qd(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function uI(n){const e=Qd(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function $E(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function cI(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>$E(e)):[$E(n)]}function Am(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function QE(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function WE(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function fn(n){if(n==null)throw new Error("ContentUnion is required");return Am(n)?n:{role:"user",parts:cI(n)}}function Dg(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=fn(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=fn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>fn(t)):[fn(e)]}function ai(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(QE(n)||WE(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[fn(n)]}const e=[],t=[],i=Am(n[0]);for(const o of n){const a=Am(o);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(o);else{if(QE(o)||WE(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return i||e.push({role:"user",parts:cI(t)}),e}function VP(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(Pe).includes(t[0].toUpperCase())?t[0].toUpperCase():Pe.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(Pe).includes(i.toUpperCase())?i.toUpperCase():Pe.TYPE_UNSPECIFIED})}}function Pa(n){const e={},t=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&VP(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(Pe).includes(d.toUpperCase())?d.toUpperCase():Pe.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=Pa(d);else if(i.includes(u)){const p=[];for(const m of d){if(m.type=="null"){e.nullable=!0;continue}p.push(Pa(m))}e[u]=p}else if(o.includes(u)){const p={};for(const[m,v]of Object.entries(d))p[m]=Pa(v);e[u]=p}else{if(u==="additionalProperties")continue;e[u]=d}return e}function kg(n){return Pa(n)}function Pg(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Vg(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Ka(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Pa(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Pa(e.response));return n}function $a(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function UP(n,e,t,i=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function Rs(n,e){if(typeof e!="string")throw new Error("name must be a string");return UP(n,e,"cachedContents")}function dI(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Gr(n){return xg(n)}function LP(n){return n!=null&&typeof n=="object"&&"name"in n}function OP(n){return n!=null&&typeof n=="object"&&"video"in n}function qP(n){return n!=null&&typeof n=="object"&&"uri"in n}function fI(n){var e;let t;if(LP(n)&&(t=n.name),!(qP(n)&&(t=n.uri,t===void 0))&&!(OP(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function hI(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function pI(n){for(const e of["models","tunedModels","publisherModels"])if(BP(n,e))return n[e];return[]}function BP(n,e){return n!==null&&typeof n=="object"&&e in n}function FP(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function zP(n,e={}){const t=[],i=new Set;for(const o of n){const a=o.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=FP(o,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function mI(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function HP(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function gI(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let a=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const p=u.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Qa(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function yI(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GP(n){const e={},t=f(n,["responsesFile"]);t!=null&&g(e,["fileName"],t);const i=f(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>EV(u))),g(e,["inlinedResponses"],a)}const o=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["inlinedEmbedContentResponses"],a)}return e}function JP(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&g(e,["format"],t);const i=f(n,["gcsDestination","outputUriPrefix"]);i!=null&&g(e,["gcsUri"],i);const o=f(n,["bigqueryDestination","outputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function YP(n){const e={},t=f(n,["format"]);t!=null&&g(e,["predictionsFormat"],t);const i=f(n,["gcsUri"]);i!=null&&g(e,["gcsDestination","outputUriPrefix"],i);const o=f(n,["bigqueryUri"]);if(o!=null&&g(e,["bigqueryDestination","outputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Id(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata","displayName"]);i!=null&&g(e,["displayName"],i);const o=f(n,["metadata","state"]);o!=null&&g(e,["state"],yI(o));const a=f(n,["metadata","createTime"]);a!=null&&g(e,["createTime"],a);const u=f(n,["metadata","endTime"]);u!=null&&g(e,["endTime"],u);const d=f(n,["metadata","updateTime"]);d!=null&&g(e,["updateTime"],d);const p=f(n,["metadata","model"]);p!=null&&g(e,["model"],p);const m=f(n,["metadata","output"]);return m!=null&&g(e,["dest"],GP(gI(m))),e}function Cm(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["displayName"]);i!=null&&g(e,["displayName"],i);const o=f(n,["state"]);o!=null&&g(e,["state"],yI(o));const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["createTime"]);u!=null&&g(e,["createTime"],u);const d=f(n,["startTime"]);d!=null&&g(e,["startTime"],d);const p=f(n,["endTime"]);p!=null&&g(e,["endTime"],p);const m=f(n,["updateTime"]);m!=null&&g(e,["updateTime"],m);const v=f(n,["model"]);v!=null&&g(e,["model"],v);const T=f(n,["inputConfig"]);T!=null&&g(e,["src"],KP(T));const S=f(n,["outputConfig"]);S!=null&&g(e,["dest"],JP(gI(S)));const R=f(n,["completionStats"]);return R!=null&&g(e,["completionStats"],R),e}function KP(n){const e={},t=f(n,["instancesFormat"]);t!=null&&g(e,["format"],t);const i=f(n,["gcsSource","uris"]);i!=null&&g(e,["gcsUri"],i);const o=f(n,["bigquerySource","inputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function $P(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=f(e,["fileName"]);i!=null&&g(t,["fileName"],i);const o=f(e,["inlinedRequests"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>TV(n,u))),g(t,["requests","requests"],a)}return t}function QP(n){const e={},t=f(n,["format"]);t!=null&&g(e,["instancesFormat"],t);const i=f(n,["gcsUri"]);i!=null&&g(e,["gcsSource","uris"],i);const o=f(n,["bigqueryUri"]);if(o!=null&&g(e,["bigquerySource","inputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function WP(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function jP(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Qa(n,i)),t}function XP(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Qa(n,i)),t}function ZP(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const i=f(n,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],eV(i));const o=f(n,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const a=f(n,["finishReason"]);a!=null&&g(e,["finishReason"],a);const u=f(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&g(e,["groundingMetadata"],d);const p=f(n,["index"]);p!=null&&g(e,["index"],p);const m=f(n,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(R=>R)),g(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&g(e,["urlContextMetadata"],T),e}function eV(n){const e={},t=f(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),g(e,["citations"],i)}return e}function _I(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>bV(a))),g(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&g(e,["role"],i),e}function tV(n,e){const t={},i=f(n,["displayName"]);if(e!==void 0&&i!=null&&g(e,["batch","displayName"],i),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function nV(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const o=f(n,["dest"]);return e!==void 0&&o!=null&&g(e,["outputConfig"],YP(HP(o))),t}function jE(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["src"]);o!=null&&g(t,["batch","inputConfig"],$P(n,mI(n,o)));const a=f(e,["config"]);return a!=null&&tV(a,t),t}function iV(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["model"],et(n,i));const o=f(e,["src"]);o!=null&&g(t,["inputConfig"],QP(mI(n,o)));const a=f(e,["config"]);return a!=null&&nV(a,t),t}function sV(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&g(e,["batch","displayName"],i),t}function rV(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["src"]);o!=null&&g(t,["batch","inputConfig"],fV(n,o));const a=f(e,["config"]);return a!=null&&sV(a,t),t}function oV(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Qa(n,i)),t}function aV(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Qa(n,i)),t}function lV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&g(e,["name"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);return a!=null&&g(e,["error"],a),e}function uV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&g(e,["name"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);return a!=null&&g(e,["error"],a),e}function cV(n,e){const t={},i=f(e,["contents"]);if(i!=null){let a=Dg(n,i);Array.isArray(a)&&(a=a.map(u=>u)),g(t,["requests[]","request","content"],a)}const o=f(e,["config"]);return o!=null&&(g(t,["_self"],dV(o,t)),aP(t,{"requests[].*":"requests[].request.*"})),t}function dV(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const a=f(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function fV(n,e){const t={},i=f(e,["fileName"]);i!=null&&g(t,["file_name"],i);const o=f(e,["inlinedRequests"]);return o!=null&&g(t,["requests"],cV(n,o)),t}function hV(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function pV(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],_I(fn(o)));const a=f(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&g(i,["topP"],u);const d=f(e,["topK"]);d!=null&&g(i,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(i,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(i,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(i,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&g(i,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const R=f(e,["presencePenalty"]);R!=null&&g(i,["presencePenalty"],R);const L=f(e,["frequencyPenalty"]);L!=null&&g(i,["frequencyPenalty"],L);const z=f(e,["seed"]);z!=null&&g(i,["seed"],z);const B=f(e,["responseMimeType"]);B!=null&&g(i,["responseMimeType"],B);const ee=f(e,["responseSchema"]);ee!=null&&g(i,["responseSchema"],kg(ee));const Y=f(e,["responseJsonSchema"]);if(Y!=null&&g(i,["responseJsonSchema"],Y),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const W=f(e,["safetySettings"]);if(t!==void 0&&W!=null){let k=W;Array.isArray(k)&&(k=k.map(M=>xV(M))),g(t,["safetySettings"],k)}const ie=f(e,["tools"]);if(t!==void 0&&ie!=null){let k=$a(ie);Array.isArray(k)&&(k=k.map(M=>NV(Ka(M)))),g(t,["tools"],k)}const de=f(e,["toolConfig"]);if(t!==void 0&&de!=null&&g(t,["toolConfig"],de),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=f(e,["cachedContent"]);t!==void 0&&ue!=null&&g(t,["cachedContent"],Rs(n,ue));const D=f(e,["responseModalities"]);D!=null&&g(i,["responseModalities"],D);const N=f(e,["mediaResolution"]);N!=null&&g(i,["mediaResolution"],N);const x=f(e,["speechConfig"]);if(x!=null&&g(i,["speechConfig"],Pg(x)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=f(e,["thinkingConfig"]);V!=null&&g(i,["thinkingConfig"],V);const P=f(e,["imageConfig"]);return P!=null&&g(i,["imageConfig"],P),i}function mV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(m=>ZP(m))),g(e,["candidates"],p)}const o=f(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const a=f(n,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const u=f(n,["responseId"]);u!=null&&g(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function gV(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Qa(n,i)),t}function yV(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Qa(n,i)),t}function _V(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function vV(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function TV(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["request","model"],et(n,i));const o=f(e,["contents"]);if(o!=null){let d=ai(o);Array.isArray(d)&&(d=d.map(p=>_I(p))),g(t,["request","contents"],d)}const a=f(e,["metadata"]);a!=null&&g(t,["metadata"],a);const u=f(e,["config"]);return u!=null&&g(t,["request","generationConfig"],pV(n,u,f(t,["request"],{}))),t}function EV(n){const e={},t=f(n,["response"]);t!=null&&g(e,["response"],mV(t));const i=f(n,["error"]);return i!=null&&g(e,["error"],i),e}function SV(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);if(e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function AV(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const a=f(n,["filter"]);return e!==void 0&&a!=null&&g(e,["_query","filter"],a),t}function CV(n){const e={},t=f(n,["config"]);return t!=null&&SV(t,e),e}function IV(n){const e={},t=f(n,["config"]);return t!=null&&AV(t,e),e}function wV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["operations"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Id(u))),g(e,["batchJobs"],a)}return e}function RV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["batchPredictionJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Cm(u))),g(e,["batchJobs"],a)}return e}function bV(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=f(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&g(e,["fileData"],hV(a));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],WP(d));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const T=f(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function xV(n){const e={},t=f(n,["category"]);if(t!=null&&g(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function NV(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],_V(d));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],vV(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Is;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Is||(Is={}));class Uo{constructor(e,t,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,o)}init(e,t,i){var o,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MV extends ws{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new Uo(Is.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=jE(this.apiClient,e),i=t._url,o=fe("{model}:batchGenerateContent",i),d=t.batch.inputConfig.requests,p=d.requests,m=[];for(const v of p){const T=Object.assign({},v);if(T.systemInstruction){const S=T.systemInstruction;delete T.systemInstruction;const R=T.request;R.systemInstruction=S,T.request=R}m.push(T)}return d.requests=m,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${o}`;else if(u)i.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=iV(this.apiClient,e);return d=fe("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Cm(v))}else{const m=jE(this.apiClient,e);return d=fe("{model}:batchGenerateContent",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Id(v))}}async createEmbeddingsInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=rV(this.apiClient,e);return a=fe("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>Id(p))}}async get(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=yV(this.apiClient,e);return d=fe("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Cm(v))}else{const m=gV(this.apiClient,e);return d=fe("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Id(v))}}async cancel(e){var t,i,o,a;let u="",d={};if(this.apiClient.isVertexAI()){const p=XP(this.apiClient,e);u=fe("batchPredictionJobs/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const p=jP(this.apiClient,e);u=fe("batches/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=IV(e);return d=fe("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=RV(v),S=new KE;return Object.assign(S,T),S})}else{const m=CV(e);return d=fe("batches",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=wV(v),S=new KE;return Object.assign(S,T),S})}}async delete(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=aV(this.apiClient,e);return d=fe("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>uV(v))}else{const m=oV(this.apiClient,e);return d=fe("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>lV(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DV(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function XE(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>ZV(a))),g(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&g(e,["role"],i),e}function kV(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const a=f(n,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let v=ai(u);Array.isArray(v)&&(v=v.map(T=>XE(T))),g(e,["contents"],v)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],XE(fn(d)));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let v=p;Array.isArray(v)&&(v=v.map(T=>e4(T))),g(e,["tools"],v)}const m=f(n,["toolConfig"]);if(e!==void 0&&m!=null&&g(e,["toolConfig"],m),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function PV(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const a=f(n,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let T=ai(u);Array.isArray(T)&&(T=T.map(S=>S)),g(e,["contents"],T)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],fn(d));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let T=p;Array.isArray(T)&&(T=T.map(S=>t4(S))),g(e,["tools"],T)}const m=f(n,["toolConfig"]);e!==void 0&&m!=null&&g(e,["toolConfig"],m);const v=f(n,["kmsKeyName"]);return e!==void 0&&v!=null&&g(e,["encryption_spec","kmsKeyName"],v),t}function VV(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["model"],oI(n,i));const o=f(e,["config"]);return o!=null&&kV(o,t),t}function UV(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["model"],oI(n,i));const o=f(e,["config"]);return o!=null&&PV(o,t),t}function LV(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Rs(n,i)),t}function OV(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Rs(n,i)),t}function qV(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function BV(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function FV(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function zV(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const i=f(n,["name"]);i!=null&&g(e,["name"],i);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function HV(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Rs(n,i)),t}function GV(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Rs(n,i)),t}function JV(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function YV(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function KV(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function $V(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function QV(n){const e={},t=f(n,["config"]);return t!=null&&KV(t,e),e}function WV(n){const e={},t=f(n,["config"]);return t!=null&&$V(t,e),e}function jV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["cachedContents"],a)}return e}function XV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["cachedContents"],a)}return e}function ZV(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=f(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&g(e,["fileData"],FV(a));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],DV(d));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const T=f(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function e4(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],JV(d));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],YV(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function t4(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>zV(S))),g(e,["functionDeclarations"],T)}const i=f(n,["retrieval"]);i!=null&&g(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const a=f(n,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const p=f(n,["googleMaps"]);p!=null&&g(e,["googleMaps"],p);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function n4(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),t}function i4(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),t}function s4(n,e){const t={},i=f(e,["name"]);i!=null&&g(t,["_url","name"],Rs(n,i));const o=f(e,["config"]);return o!=null&&n4(o,t),t}function r4(n,e){const t={},i=f(e,["name"]);i!=null&&g(t,["_url","name"],Rs(n,i));const o=f(e,["config"]);return o!=null&&i4(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class o4 extends ws{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Uo(Is.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=UV(this.apiClient,e);return d=fe("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=VV(this.apiClient,e);return d=fe("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=GV(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=HV(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=OV(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=BV(v),S=new JE;return Object.assign(S,T),S})}else{const m=LV(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=qV(v),S=new JE;return Object.assign(S,T),S})}}async update(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=r4(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=s4(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=WV(e);return d=fe("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=XV(v),S=new YE;return Object.assign(S,T),S})}else{const m=QV(e);return d=fe("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=jV(v),S=new YE;return Object.assign(S,T),S})}}}function ZE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function yt(n){return this instanceof yt?(this.v=n,this):new yt(n)}function Va(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(R){return function(L){return Promise.resolve(L).then(R,T)}}function d(R,L){i[R]&&(o[R]=function(z){return new Promise(function(B,ee){a.push([R,z,B,ee])>1||p(R,z)})},L&&(o[R]=L(o[R])))}function p(R,L){try{m(i[R](L))}catch(z){S(a[0][3],z)}}function m(R){R.value instanceof yt?Promise.resolve(R.value.v).then(v,T):S(a[0][2],R)}function v(R){p("next",R)}function T(R){p("throw",R)}function S(R,L){R(L),a.shift(),a.length&&p(a[0][0],a[0][1])}}function hu(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof ZE=="function"?ZE(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(u){return new Promise(function(d,p){u=n[a](u),o(d,p,u.done,u.value)})}}function o(a,u,d,p){Promise.resolve(p).then(function(m){a({value:m,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function a4(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:vI(t)}function vI(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function l4(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function eS(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const o=[];let a=!0;for(;i<t&&n[i].role==="model";)o.push(n[i]),a&&!vI(n[i])&&(a=!1),i++;a?e.push(...o):e.pop()}return e}class u4{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new c4(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class c4{constructor(e,t,i,o={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),l4(a)}async sendMessage(e){var t;await this.sendPromise;const i=fn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,u,d;const p=await o,m=(u=(a=p.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,v=p.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let S=[];v!=null&&(S=(d=v.slice(T))!==null&&d!==void 0?d:[]);const R=m?[m]:[];this.recordHistory(i,R,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const i=fn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?eS(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var i,o;return Va(this,arguments,function*(){var u,d,p,m;const v=[];try{for(var T=!0,S=hu(e),R;R=yield yt(S.next()),u=R.done,!u;T=!0){m=R.value,T=!1;const L=m;if(a4(L)){const z=(o=(i=L.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;z!==void 0&&v.push(z)}yield yield yt(L)}}catch(L){d={error:L}}finally{try{!T&&!u&&(p=S.return)&&(yield yt(p.call(S)))}finally{if(d)throw d.error}}this.recordHistory(t,v)})}recordHistory(e,t,i){let o=[];t.length>0&&t.every(a=>a.role!==void 0)?o=t:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...eS(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Sf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function d4(n){const e={},t=f(n,["file"]);return t!=null&&g(e,["file"],t),e}function f4(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function h4(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],fI(t)),e}function p4(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function m4(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],fI(t)),e}function g4(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function y4(n){const e={},t=f(n,["config"]);return t!=null&&g4(t,e),e}function _4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class v4 extends ws{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Uo(Is.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=y4(e);return a=fe("files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=_4(p),v=new NP;return Object.assign(v,m),v})}}async createInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=d4(e);return a=fe("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=f4(p),v=new MP;return Object.assign(v,m),v})}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=m4(e);return a=fe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=h4(e);return a=fe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=p4(p),v=new DP;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wd(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function T4(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>V4(a))),g(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&g(e,["role"],i),e}function E4(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function S4(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const i=f(n,["name"]);i!=null&&g(e,["name"],i);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function A4(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const i=f(n,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const o=f(n,["audioTimestamp"]);o!=null&&g(e,["audioTimestamp"],o);const a=f(n,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const u=f(n,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&g(e,["frequencyPenalty"],d);const p=f(n,["logprobs"]);p!=null&&g(e,["logprobs"],p);const m=f(n,["maxOutputTokens"]);m!=null&&g(e,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const T=f(n,["presencePenalty"]);T!=null&&g(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&g(e,["responseLogprobs"],S);const R=f(n,["responseMimeType"]);R!=null&&g(e,["responseMimeType"],R);const L=f(n,["responseModalities"]);L!=null&&g(e,["responseModalities"],L);const z=f(n,["responseSchema"]);z!=null&&g(e,["responseSchema"],z);const B=f(n,["routingConfig"]);B!=null&&g(e,["routingConfig"],B);const ee=f(n,["seed"]);ee!=null&&g(e,["seed"],ee);const Y=f(n,["speechConfig"]);Y!=null&&g(e,["speechConfig"],TI(Y));const W=f(n,["stopSequences"]);W!=null&&g(e,["stopSequences"],W);const ie=f(n,["temperature"]);ie!=null&&g(e,["temperature"],ie);const de=f(n,["thinkingConfig"]);de!=null&&g(e,["thinkingConfig"],de);const ue=f(n,["topK"]);ue!=null&&g(e,["topK"],ue);const D=f(n,["topP"]);if(D!=null&&g(e,["topP"],D),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function C4(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function I4(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function w4(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","speechConfig"],Vg(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],R);const L=f(n,["systemInstruction"]);e!==void 0&&L!=null&&g(e,["setup","systemInstruction"],T4(fn(L)));const z=f(n,["tools"]);if(e!==void 0&&z!=null){let ue=$a(z);Array.isArray(ue)&&(ue=ue.map(D=>L4(Ka(D)))),g(e,["setup","tools"],ue)}const B=f(n,["sessionResumption"]);e!==void 0&&B!=null&&g(e,["setup","sessionResumption"],U4(B));const ee=f(n,["inputAudioTranscription"]);e!==void 0&&ee!=null&&g(e,["setup","inputAudioTranscription"],ee);const Y=f(n,["outputAudioTranscription"]);e!==void 0&&Y!=null&&g(e,["setup","outputAudioTranscription"],Y);const W=f(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&g(e,["setup","realtimeInputConfig"],W);const ie=f(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&g(e,["setup","contextWindowCompression"],ie);const de=f(n,["proactivity"]);return e!==void 0&&de!=null&&g(e,["setup","proactivity"],de),t}function R4(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],A4(i));const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","speechConfig"],TI(Vg(T)));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],R);const L=f(n,["systemInstruction"]);e!==void 0&&L!=null&&g(e,["setup","systemInstruction"],fn(L));const z=f(n,["tools"]);if(e!==void 0&&z!=null){let ue=$a(z);Array.isArray(ue)&&(ue=ue.map(D=>O4(Ka(D)))),g(e,["setup","tools"],ue)}const B=f(n,["sessionResumption"]);e!==void 0&&B!=null&&g(e,["setup","sessionResumption"],B);const ee=f(n,["inputAudioTranscription"]);e!==void 0&&ee!=null&&g(e,["setup","inputAudioTranscription"],ee);const Y=f(n,["outputAudioTranscription"]);e!==void 0&&Y!=null&&g(e,["setup","outputAudioTranscription"],Y);const W=f(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&g(e,["setup","realtimeInputConfig"],W);const ie=f(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&g(e,["setup","contextWindowCompression"],ie);const de=f(n,["proactivity"]);return e!==void 0&&de!=null&&g(e,["setup","proactivity"],de),t}function b4(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["setup","model"],et(n,i));const o=f(e,["config"]);return o!=null&&g(t,["config"],w4(o,t)),t}function x4(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["setup","model"],et(n,i));const o=f(e,["config"]);return o!=null&&g(t,["config"],R4(o,t)),t}function N4(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&g(e,["musicGenerationConfig"],t),e}function M4(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),g(e,["weightedPrompts"],i)}return e}function D4(n){const e={},t=f(n,["media"]);if(t!=null){let m=aI(t);Array.isArray(m)&&(m=m.map(v=>wd(v))),g(e,["mediaChunks"],m)}const i=f(n,["audio"]);i!=null&&g(e,["audio"],wd(uI(i)));const o=f(n,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const a=f(n,["video"]);a!=null&&g(e,["video"],wd(lI(a)));const u=f(n,["text"]);u!=null&&g(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&g(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function k4(n){const e={},t=f(n,["media"]);if(t!=null){let m=aI(t);Array.isArray(m)&&(m=m.map(v=>v)),g(e,["mediaChunks"],m)}const i=f(n,["audio"]);i!=null&&g(e,["audio"],uI(i));const o=f(n,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const a=f(n,["video"]);a!=null&&g(e,["video"],lI(a));const u=f(n,["text"]);u!=null&&g(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&g(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function P4(n){const e={},t=f(n,["setupComplete"]);t!=null&&g(e,["setupComplete"],t);const i=f(n,["serverContent"]);i!=null&&g(e,["serverContent"],i);const o=f(n,["toolCall"]);o!=null&&g(e,["toolCall"],o);const a=f(n,["toolCallCancellation"]);a!=null&&g(e,["toolCallCancellation"],a);const u=f(n,["usageMetadata"]);u!=null&&g(e,["usageMetadata"],q4(u));const d=f(n,["goAway"]);d!=null&&g(e,["goAway"],d);const p=f(n,["sessionResumptionUpdate"]);return p!=null&&g(e,["sessionResumptionUpdate"],p),e}function V4(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=f(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&g(e,["fileData"],E4(a));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],wd(d));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const T=f(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function U4(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function TI(n){const e={},t=f(n,["languageCode"]);t!=null&&g(e,["languageCode"],t);const i=f(n,["voiceConfig"]);if(i!=null&&g(e,["voiceConfig"],i),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function L4(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],C4(d));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],I4(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function O4(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>S4(S))),g(e,["functionDeclarations"],T)}const i=f(n,["retrieval"]);i!=null&&g(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const a=f(n,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const p=f(n,["googleMaps"]);p!=null&&g(e,["googleMaps"],p);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function q4(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&g(e,["promptTokenCount"],t);const i=f(n,["cachedContentTokenCount"]);i!=null&&g(e,["cachedContentTokenCount"],i);const o=f(n,["candidatesTokenCount"]);o!=null&&g(e,["responseTokenCount"],o);const a=f(n,["toolUsePromptTokenCount"]);a!=null&&g(e,["toolUsePromptTokenCount"],a);const u=f(n,["thoughtsTokenCount"]);u!=null&&g(e,["thoughtsTokenCount"],u);const d=f(n,["totalTokenCount"]);d!=null&&g(e,["totalTokenCount"],d);const p=f(n,["promptTokensDetails"]);if(p!=null){let R=p;Array.isArray(R)&&(R=R.map(L=>L)),g(e,["promptTokensDetails"],R)}const m=f(n,["cacheTokensDetails"]);if(m!=null){let R=m;Array.isArray(R)&&(R=R.map(L=>L)),g(e,["cacheTokensDetails"],R)}const v=f(n,["candidatesTokensDetails"]);if(v!=null){let R=v;Array.isArray(R)&&(R=R.map(L=>L)),g(e,["responseTokensDetails"],R)}const T=f(n,["toolUsePromptTokensDetails"]);if(T!=null){let R=T;Array.isArray(R)&&(R=R.map(L=>L)),g(e,["toolUsePromptTokensDetails"],R)}const S=f(n,["trafficType"]);return S!=null&&g(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function B4(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function F4(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const i=f(n,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],z4(i));const o=f(n,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const a=f(n,["finishReason"]);a!=null&&g(e,["finishReason"],a);const u=f(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&g(e,["groundingMetadata"],d);const p=f(n,["index"]);p!=null&&g(e,["index"],p);const m=f(n,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(R=>R)),g(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&g(e,["urlContextMetadata"],T),e}function z4(n){const e={},t=f(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),g(e,["citations"],i)}return e}function H4(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["contents"]);if(o!=null){let a=ai(o);Array.isArray(a)&&(a=a.map(u=>u)),g(t,["contents"],a)}return t}function G4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),g(e,["tokensInfo"],o)}return e}function J4(n){const e={},t=f(n,["values"]);t!=null&&g(e,["values"],t);const i=f(n,["statistics"]);return i!=null&&g(e,["statistics"],Y4(i)),e}function Y4(n){const e={},t=f(n,["truncated"]);t!=null&&g(e,["truncated"],t);const i=f(n,["token_count"]);return i!=null&&g(e,["tokenCount"],i),e}function Af(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>jU(a))),g(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&g(e,["role"],i),e}function K4(n){const e={},t=f(n,["controlType"]);t!=null&&g(e,["controlType"],t);const i=f(n,["enableControlImageComputation"]);return i!=null&&g(e,["computeControl"],i),e}function $4(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Q4(n,e){const t={},i=f(n,["systemInstruction"]);e!==void 0&&i!=null&&g(e,["systemInstruction"],fn(i));const o=f(n,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>II(d))),g(e,["tools"],u)}const a=f(n,["generationConfig"]);return e!==void 0&&a!=null&&g(e,["generationConfig"],OU(a)),t}function W4(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["contents"]);if(o!=null){let u=ai(o);Array.isArray(u)&&(u=u.map(d=>Af(d))),g(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&$4(a),t}function j4(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["contents"]);if(o!=null){let u=ai(o);Array.isArray(u)&&(u=u.map(d=>d)),g(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&Q4(a,t),t}function X4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["totalTokens"]);i!=null&&g(e,["totalTokens"],i);const o=f(n,["cachedContentTokenCount"]);return o!=null&&g(e,["cachedContentTokenCount"],o),e}function Z4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["totalTokens"]);return i!=null&&g(e,["totalTokens"],i),e}function eU(n,e){const t={},i=f(e,["model"]);return i!=null&&g(t,["_url","name"],et(n,i)),t}function tU(n,e){const t={},i=f(e,["model"]);return i!=null&&g(t,["_url","name"],et(n,i)),t}function nU(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function iU(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function sU(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const a=f(n,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const p=f(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const T=f(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&g(e,["parameters","includeSafetyAttributes"],T);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&g(e,["parameters","includeRaiReason"],S);const R=f(n,["language"]);e!==void 0&&R!=null&&g(e,["parameters","language"],R);const L=f(n,["outputMimeType"]);e!==void 0&&L!=null&&g(e,["parameters","outputOptions","mimeType"],L);const z=f(n,["outputCompressionQuality"]);e!==void 0&&z!=null&&g(e,["parameters","outputOptions","compressionQuality"],z);const B=f(n,["addWatermark"]);e!==void 0&&B!=null&&g(e,["parameters","addWatermark"],B);const ee=f(n,["labels"]);e!==void 0&&ee!=null&&g(e,["labels"],ee);const Y=f(n,["editMode"]);e!==void 0&&Y!=null&&g(e,["parameters","editMode"],Y);const W=f(n,["baseSteps"]);return e!==void 0&&W!=null&&g(e,["parameters","editConfig","baseSteps"],W),t}function rU(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const a=f(e,["referenceImages"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>iL(p))),g(t,["instances[0]","referenceImages"],d)}const u=f(e,["config"]);return u!=null&&sU(u,t),t}function oU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Cf(a))),g(e,["generatedImages"],o)}return e}function aU(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const a=f(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function lU(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&g(e,["instances[]","task_type"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["instances[]","title"],o);const a=f(n,["outputDimensionality"]);e!==void 0&&a!=null&&g(e,["parameters","outputDimensionality"],a);const u=f(n,["mimeType"]);e!==void 0&&u!=null&&g(e,["instances[]","mimeType"],u);const d=f(n,["autoTruncate"]);return e!==void 0&&d!=null&&g(e,["parameters","autoTruncate"],d),t}function uU(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["contents"]);if(o!=null){let d=Dg(n,o);Array.isArray(d)&&(d=d.map(p=>p)),g(t,["requests[]","content"],d)}const a=f(e,["config"]);a!=null&&aU(a,t);const u=f(e,["model"]);return u!==void 0&&g(t,["requests[]","model"],et(n,u)),t}function cU(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["contents"]);if(o!=null){let u=Dg(n,o);Array.isArray(u)&&(u=u.map(d=>d)),g(t,["instances[]","content"],u)}const a=f(e,["config"]);return a!=null&&lU(a,t),t}function dU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["embeddings"],a)}const o=f(n,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function fU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>J4(u))),g(e,["embeddings"],a)}const o=f(n,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function hU(n){const e={},t=f(n,["endpoint"]);t!=null&&g(e,["name"],t);const i=f(n,["deployedModelId"]);return i!=null&&g(e,["deployedModelId"],i),e}function pU(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function mU(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const i=f(n,["name"]);i!=null&&g(e,["name"],i);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function gU(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],Af(fn(o)));const a=f(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&g(i,["topP"],u);const d=f(e,["topK"]);d!=null&&g(i,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(i,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(i,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(i,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&g(i,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const R=f(e,["presencePenalty"]);R!=null&&g(i,["presencePenalty"],R);const L=f(e,["frequencyPenalty"]);L!=null&&g(i,["frequencyPenalty"],L);const z=f(e,["seed"]);z!=null&&g(i,["seed"],z);const B=f(e,["responseMimeType"]);B!=null&&g(i,["responseMimeType"],B);const ee=f(e,["responseSchema"]);ee!=null&&g(i,["responseSchema"],kg(ee));const Y=f(e,["responseJsonSchema"]);if(Y!=null&&g(i,["responseJsonSchema"],Y),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const W=f(e,["safetySettings"]);if(t!==void 0&&W!=null){let k=W;Array.isArray(k)&&(k=k.map(M=>sL(M))),g(t,["safetySettings"],k)}const ie=f(e,["tools"]);if(t!==void 0&&ie!=null){let k=$a(ie);Array.isArray(k)&&(k=k.map(M=>cL(Ka(M)))),g(t,["tools"],k)}const de=f(e,["toolConfig"]);if(t!==void 0&&de!=null&&g(t,["toolConfig"],de),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=f(e,["cachedContent"]);t!==void 0&&ue!=null&&g(t,["cachedContent"],Rs(n,ue));const D=f(e,["responseModalities"]);D!=null&&g(i,["responseModalities"],D);const N=f(e,["mediaResolution"]);N!=null&&g(i,["mediaResolution"],N);const x=f(e,["speechConfig"]);if(x!=null&&g(i,["speechConfig"],Pg(x)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=f(e,["thinkingConfig"]);V!=null&&g(i,["thinkingConfig"],V);const P=f(e,["imageConfig"]);return P!=null&&g(i,["imageConfig"],P),i}function yU(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],fn(o));const a=f(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&g(i,["topP"],u);const d=f(e,["topK"]);d!=null&&g(i,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(i,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(i,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(i,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&g(i,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const R=f(e,["presencePenalty"]);R!=null&&g(i,["presencePenalty"],R);const L=f(e,["frequencyPenalty"]);L!=null&&g(i,["frequencyPenalty"],L);const z=f(e,["seed"]);z!=null&&g(i,["seed"],z);const B=f(e,["responseMimeType"]);B!=null&&g(i,["responseMimeType"],B);const ee=f(e,["responseSchema"]);ee!=null&&g(i,["responseSchema"],kg(ee));const Y=f(e,["responseJsonSchema"]);Y!=null&&g(i,["responseJsonSchema"],Y);const W=f(e,["routingConfig"]);W!=null&&g(i,["routingConfig"],W);const ie=f(e,["modelSelectionConfig"]);ie!=null&&g(i,["modelConfig"],ie);const de=f(e,["safetySettings"]);if(t!==void 0&&de!=null){let $=de;Array.isArray($)&&($=$.map(ae=>ae)),g(t,["safetySettings"],$)}const ue=f(e,["tools"]);if(t!==void 0&&ue!=null){let $=$a(ue);Array.isArray($)&&($=$.map(ae=>II(Ka(ae)))),g(t,["tools"],$)}const D=f(e,["toolConfig"]);t!==void 0&&D!=null&&g(t,["toolConfig"],D);const N=f(e,["labels"]);t!==void 0&&N!=null&&g(t,["labels"],N);const x=f(e,["cachedContent"]);t!==void 0&&x!=null&&g(t,["cachedContent"],Rs(n,x));const V=f(e,["responseModalities"]);V!=null&&g(i,["responseModalities"],V);const P=f(e,["mediaResolution"]);P!=null&&g(i,["mediaResolution"],P);const k=f(e,["speechConfig"]);k!=null&&g(i,["speechConfig"],CI(Pg(k)));const M=f(e,["audioTimestamp"]);M!=null&&g(i,["audioTimestamp"],M);const We=f(e,["thinkingConfig"]);We!=null&&g(i,["thinkingConfig"],We);const we=f(e,["imageConfig"]);return we!=null&&g(i,["imageConfig"],we),i}function tS(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["contents"]);if(o!=null){let u=ai(o);Array.isArray(u)&&(u=u.map(d=>Af(d))),g(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&g(t,["generationConfig"],gU(n,a,t)),t}function nS(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["contents"]);if(o!=null){let u=ai(o);Array.isArray(u)&&(u=u.map(d=>d)),g(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&g(t,["generationConfig"],yU(n,a,t)),t}function iS(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(m=>F4(m))),g(e,["candidates"],p)}const o=f(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const a=f(n,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const u=f(n,["responseId"]);u!=null&&g(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function sS(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["candidates"],m)}const o=f(n,["createTime"]);o!=null&&g(e,["createTime"],o);const a=f(n,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const u=f(n,["promptFeedback"]);u!=null&&g(e,["promptFeedback"],u);const d=f(n,["responseId"]);d!=null&&g(e,["responseId"],d);const p=f(n,["usageMetadata"]);return p!=null&&g(e,["usageMetadata"],p),e}function _U(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=f(n,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const o=f(n,["aspectRatio"]);e!==void 0&&o!=null&&g(e,["parameters","aspectRatio"],o);const a=f(n,["guidanceScale"]);if(e!==void 0&&a!=null&&g(e,["parameters","guidanceScale"],a),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&g(e,["parameters","safetySetting"],u);const d=f(n,["personGeneration"]);e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d);const p=f(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&g(e,["parameters","includeSafetyAttributes"],p);const m=f(n,["includeRaiReason"]);e!==void 0&&m!=null&&g(e,["parameters","includeRaiReason"],m);const v=f(n,["language"]);e!==void 0&&v!=null&&g(e,["parameters","language"],v);const T=f(n,["outputMimeType"]);e!==void 0&&T!=null&&g(e,["parameters","outputOptions","mimeType"],T);const S=f(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&g(e,["parameters","outputOptions","compressionQuality"],S),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=f(n,["imageSize"]);if(e!==void 0&&R!=null&&g(e,["parameters","sampleImageSize"],R),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function vU(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const a=f(n,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const p=f(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const T=f(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&g(e,["parameters","includeSafetyAttributes"],T);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&g(e,["parameters","includeRaiReason"],S);const R=f(n,["language"]);e!==void 0&&R!=null&&g(e,["parameters","language"],R);const L=f(n,["outputMimeType"]);e!==void 0&&L!=null&&g(e,["parameters","outputOptions","mimeType"],L);const z=f(n,["outputCompressionQuality"]);e!==void 0&&z!=null&&g(e,["parameters","outputOptions","compressionQuality"],z);const B=f(n,["addWatermark"]);e!==void 0&&B!=null&&g(e,["parameters","addWatermark"],B);const ee=f(n,["labels"]);e!==void 0&&ee!=null&&g(e,["labels"],ee);const Y=f(n,["imageSize"]);e!==void 0&&Y!=null&&g(e,["parameters","sampleImageSize"],Y);const W=f(n,["enhancePrompt"]);return e!==void 0&&W!=null&&g(e,["parameters","enhancePrompt"],W),t}function TU(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const a=f(e,["config"]);return a!=null&&_U(a,t),t}function EU(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const a=f(e,["config"]);return a!=null&&vU(a,t),t}function SU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>PU(u))),g(e,["generatedImages"],a)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],SI(o)),e}function AU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>Cf(u))),g(e,["generatedImages"],a)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],AI(o)),e}function CU(n,e){const t={},i=f(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=f(n,["durationSeconds"]);if(e!==void 0&&o!=null&&g(e,["parameters","durationSeconds"],o),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=f(n,["aspectRatio"]);e!==void 0&&a!=null&&g(e,["parameters","aspectRatio"],a);const u=f(n,["resolution"]);e!==void 0&&u!=null&&g(e,["parameters","resolution"],u);const d=f(n,["personGeneration"]);if(e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=f(n,["negativePrompt"]);e!==void 0&&p!=null&&g(e,["parameters","negativePrompt"],p);const m=f(n,["enhancePrompt"]);if(e!==void 0&&m!=null&&g(e,["parameters","enhancePrompt"],m),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=f(n,["lastFrame"]);e!==void 0&&v!=null&&g(e,["instances[0]","lastFrame"],If(v));const T=f(n,["referenceImages"]);if(e!==void 0&&T!=null){let S=T;Array.isArray(S)&&(S=S.map(R=>AL(R))),g(e,["instances[0]","referenceImages"],S)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function IU(n,e){const t={},i=f(n,["numberOfVideos"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&g(e,["parameters","storageUri"],o);const a=f(n,["fps"]);e!==void 0&&a!=null&&g(e,["parameters","fps"],a);const u=f(n,["durationSeconds"]);e!==void 0&&u!=null&&g(e,["parameters","durationSeconds"],u);const d=f(n,["seed"]);e!==void 0&&d!=null&&g(e,["parameters","seed"],d);const p=f(n,["aspectRatio"]);e!==void 0&&p!=null&&g(e,["parameters","aspectRatio"],p);const m=f(n,["resolution"]);e!==void 0&&m!=null&&g(e,["parameters","resolution"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const T=f(n,["pubsubTopic"]);e!==void 0&&T!=null&&g(e,["parameters","pubsubTopic"],T);const S=f(n,["negativePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","negativePrompt"],S);const R=f(n,["enhancePrompt"]);e!==void 0&&R!=null&&g(e,["parameters","enhancePrompt"],R);const L=f(n,["generateAudio"]);e!==void 0&&L!=null&&g(e,["parameters","generateAudio"],L);const z=f(n,["lastFrame"]);e!==void 0&&z!=null&&g(e,["instances[0]","lastFrame"],Ei(z));const B=f(n,["referenceImages"]);if(e!==void 0&&B!=null){let W=B;Array.isArray(W)&&(W=W.map(ie=>CL(ie))),g(e,["instances[0]","referenceImages"],W)}const ee=f(n,["mask"]);e!==void 0&&ee!=null&&g(e,["instances[0]","mask"],SL(ee));const Y=f(n,["compressionQuality"]);return e!==void 0&&Y!=null&&g(e,["parameters","compressionQuality"],Y),t}function wU(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],NU(u)),e}function RU(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response"]);return u!=null&&g(e,["response"],MU(u)),e}function bU(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const a=f(e,["image"]);a!=null&&g(t,["instances[0]","image"],If(a));const u=f(e,["video"]);u!=null&&g(t,["instances[0]","video"],wI(u));const d=f(e,["source"]);d!=null&&DU(d,t);const p=f(e,["config"]);return p!=null&&CU(p,t),t}function xU(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const a=f(e,["image"]);a!=null&&g(t,["instances[0]","image"],Ei(a));const u=f(e,["video"]);u!=null&&g(t,["instances[0]","video"],RI(u));const d=f(e,["source"]);d!=null&&kU(d,t);const p=f(e,["config"]);return p!=null&&IU(p,t),t}function NU(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>UU(u))),g(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function MU(n){const e={},t=f(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>LU(u))),g(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function DU(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],If(o));const a=f(n,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],wI(a)),t}function kU(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],Ei(o));const a=f(n,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],RI(a)),t}function PU(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],HU(t));const i=f(n,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const o=f(n,["_self"]);return o!=null&&g(e,["safetyAttributes"],SI(o)),e}function Cf(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],EI(t));const i=f(n,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const o=f(n,["_self"]);o!=null&&g(e,["safetyAttributes"],AI(o));const a=f(n,["prompt"]);return a!=null&&g(e,["enhancedPrompt"],a),e}function VU(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["mask"],EI(t));const i=f(n,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),g(e,["labels"],o)}return e}function UU(n){const e={},t=f(n,["video"]);return t!=null&&g(e,["video"],TL(t)),e}function LU(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],EL(t)),e}function OU(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const i=f(n,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const o=f(n,["audioTimestamp"]);o!=null&&g(e,["audioTimestamp"],o);const a=f(n,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const u=f(n,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&g(e,["frequencyPenalty"],d);const p=f(n,["logprobs"]);p!=null&&g(e,["logprobs"],p);const m=f(n,["maxOutputTokens"]);m!=null&&g(e,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const T=f(n,["presencePenalty"]);T!=null&&g(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&g(e,["responseLogprobs"],S);const R=f(n,["responseMimeType"]);R!=null&&g(e,["responseMimeType"],R);const L=f(n,["responseModalities"]);L!=null&&g(e,["responseModalities"],L);const z=f(n,["responseSchema"]);z!=null&&g(e,["responseSchema"],z);const B=f(n,["routingConfig"]);B!=null&&g(e,["routingConfig"],B);const ee=f(n,["seed"]);ee!=null&&g(e,["seed"],ee);const Y=f(n,["speechConfig"]);Y!=null&&g(e,["speechConfig"],CI(Y));const W=f(n,["stopSequences"]);W!=null&&g(e,["stopSequences"],W);const ie=f(n,["temperature"]);ie!=null&&g(e,["temperature"],ie);const de=f(n,["thinkingConfig"]);de!=null&&g(e,["thinkingConfig"],de);const ue=f(n,["topK"]);ue!=null&&g(e,["topK"],ue);const D=f(n,["topP"]);if(D!=null&&g(e,["topP"],D),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function qU(n,e){const t={},i=f(e,["model"]);return i!=null&&g(t,["_url","name"],et(n,i)),t}function BU(n,e){const t={},i=f(e,["model"]);return i!=null&&g(t,["_url","name"],et(n,i)),t}function FU(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function zU(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function HU(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&g(e,["imageBytes"],Gr(t));const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function EI(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&g(e,["imageBytes"],Gr(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function If(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&g(e,["bytesBase64Encoded"],Gr(t));const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function Ei(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const i=f(n,["imageBytes"]);i!=null&&g(e,["bytesBase64Encoded"],Gr(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function GU(n,e,t){const i={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&g(t,["_query","pageSize"],o);const a=f(e,["pageToken"]);t!==void 0&&a!=null&&g(t,["_query","pageToken"],a);const u=f(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&g(t,["_url","models_url"],hI(n,d)),i}function JU(n,e,t){const i={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&g(t,["_query","pageSize"],o);const a=f(e,["pageToken"]);t!==void 0&&a!=null&&g(t,["_query","pageToken"],a);const u=f(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&g(t,["_url","models_url"],hI(n,d)),i}function YU(n,e){const t={},i=f(e,["config"]);return i!=null&&GU(n,i,t),t}function KU(n,e){const t={},i=f(e,["config"]);return i!=null&&JU(n,i,t),t}function $U(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["_self"]);if(o!=null){let a=pI(o);Array.isArray(a)&&(a=a.map(u=>Im(u))),g(e,["models"],a)}return e}function QU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["_self"]);if(o!=null){let a=pI(o);Array.isArray(a)&&(a=a.map(u=>wm(u))),g(e,["models"],a)}return e}function WU(n){const e={},t=f(n,["maskMode"]);t!=null&&g(e,["maskMode"],t);const i=f(n,["segmentationClasses"]);i!=null&&g(e,["maskClasses"],i);const o=f(n,["maskDilation"]);return o!=null&&g(e,["dilation"],o),e}function Im(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["displayName"]);i!=null&&g(e,["displayName"],i);const o=f(n,["description"]);o!=null&&g(e,["description"],o);const a=f(n,["version"]);a!=null&&g(e,["version"],a);const u=f(n,["_self"]);u!=null&&g(e,["tunedModelInfo"],dL(u));const d=f(n,["inputTokenLimit"]);d!=null&&g(e,["inputTokenLimit"],d);const p=f(n,["outputTokenLimit"]);p!=null&&g(e,["outputTokenLimit"],p);const m=f(n,["supportedGenerationMethods"]);return m!=null&&g(e,["supportedActions"],m),e}function wm(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["displayName"]);i!=null&&g(e,["displayName"],i);const o=f(n,["description"]);o!=null&&g(e,["description"],o);const a=f(n,["versionId"]);a!=null&&g(e,["version"],a);const u=f(n,["deployedModels"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(S=>hU(S))),g(e,["endpoints"],T)}const d=f(n,["labels"]);d!=null&&g(e,["labels"],d);const p=f(n,["_self"]);p!=null&&g(e,["tunedModelInfo"],fL(p));const m=f(n,["defaultCheckpointId"]);m!=null&&g(e,["defaultCheckpointId"],m);const v=f(n,["checkpoints"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(S=>S)),g(e,["checkpoints"],T)}return e}function jU(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=f(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&g(e,["fileData"],pU(a));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],B4(d));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const T=f(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function XU(n){const e={},t=f(n,["productImage"]);return t!=null&&g(e,["image"],Ei(t)),e}function ZU(n,e){const t={},i=f(n,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const o=f(n,["baseSteps"]);e!==void 0&&o!=null&&g(e,["parameters","editConfig","baseSteps"],o);const a=f(n,["outputGcsUri"]);e!==void 0&&a!=null&&g(e,["parameters","storageUri"],a);const u=f(n,["seed"]);e!==void 0&&u!=null&&g(e,["parameters","seed"],u);const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&g(e,["parameters","safetySetting"],d);const p=f(n,["personGeneration"]);e!==void 0&&p!=null&&g(e,["parameters","personGeneration"],p);const m=f(n,["addWatermark"]);e!==void 0&&m!=null&&g(e,["parameters","addWatermark"],m);const v=f(n,["outputMimeType"]);e!==void 0&&v!=null&&g(e,["parameters","outputOptions","mimeType"],v);const T=f(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&g(e,["parameters","outputOptions","compressionQuality"],T);const S=f(n,["enhancePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","enhancePrompt"],S);const R=f(n,["labels"]);return e!==void 0&&R!=null&&g(e,["labels"],R),t}function eL(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["source"]);o!=null&&nL(o,t);const a=f(e,["config"]);return a!=null&&ZU(a,t),t}function tL(n){const e={},t=f(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>Cf(o))),g(e,["generatedImages"],i)}return e}function nL(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=f(n,["personImage"]);e!==void 0&&o!=null&&g(e,["instances[0]","personImage","image"],Ei(o));const a=f(n,["productImages"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>XU(d))),g(e,["instances[0]","productImages"],u)}return t}function iL(n){const e={},t=f(n,["referenceImage"]);t!=null&&g(e,["referenceImage"],Ei(t));const i=f(n,["referenceId"]);i!=null&&g(e,["referenceId"],i);const o=f(n,["referenceType"]);o!=null&&g(e,["referenceType"],o);const a=f(n,["maskImageConfig"]);a!=null&&g(e,["maskImageConfig"],WU(a));const u=f(n,["controlImageConfig"]);u!=null&&g(e,["controlImageConfig"],K4(u));const d=f(n,["styleImageConfig"]);d!=null&&g(e,["styleImageConfig"],d);const p=f(n,["subjectImageConfig"]);return p!=null&&g(e,["subjectImageConfig"],p),e}function SI(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const i=f(n,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const o=f(n,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function AI(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const i=f(n,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const o=f(n,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function sL(n){const e={},t=f(n,["category"]);if(t!=null&&g(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function rL(n){const e={},t=f(n,["image"]);return t!=null&&g(e,["image"],Ei(t)),e}function oL(n,e){const t={},i=f(n,["mode"]);e!==void 0&&i!=null&&g(e,["parameters","mode"],i);const o=f(n,["maxPredictions"]);e!==void 0&&o!=null&&g(e,["parameters","maxPredictions"],o);const a=f(n,["confidenceThreshold"]);e!==void 0&&a!=null&&g(e,["parameters","confidenceThreshold"],a);const u=f(n,["maskDilation"]);e!==void 0&&u!=null&&g(e,["parameters","maskDilation"],u);const d=f(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&g(e,["parameters","binaryColorThreshold"],d);const p=f(n,["labels"]);return e!==void 0&&p!=null&&g(e,["labels"],p),t}function aL(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["source"]);o!=null&&uL(o,t);const a=f(e,["config"]);return a!=null&&oL(a,t),t}function lL(n){const e={},t=f(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>VU(o))),g(e,["generatedMasks"],i)}return e}function uL(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],Ei(o));const a=f(n,["scribbleImage"]);return e!==void 0&&a!=null&&g(e,["instances[0]","scribble"],rL(a)),t}function CI(n){const e={},t=f(n,["languageCode"]);t!=null&&g(e,["languageCode"],t);const i=f(n,["voiceConfig"]);if(i!=null&&g(e,["voiceConfig"],i),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function cL(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],FU(d));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],zU(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function II(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>mU(S))),g(e,["functionDeclarations"],T)}const i=f(n,["retrieval"]);i!=null&&g(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const a=f(n,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const p=f(n,["googleMaps"]);p!=null&&g(e,["googleMaps"],p);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function dL(n){const e={},t=f(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const i=f(n,["createTime"]);i!=null&&g(e,["createTime"],i);const o=f(n,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function fL(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&g(e,["baseModel"],t);const i=f(n,["createTime"]);i!=null&&g(e,["createTime"],i);const o=f(n,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function hL(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const o=f(n,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const a=f(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),t}function pL(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const o=f(n,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const a=f(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),t}function mL(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","name"],et(n,i));const o=f(e,["config"]);return o!=null&&hL(o,t),t}function gL(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["config"]);return o!=null&&pL(o,t),t}function yL(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const o=f(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&g(e,["parameters","safetySetting"],o);const a=f(n,["personGeneration"]);e!==void 0&&a!=null&&g(e,["parameters","personGeneration"],a);const u=f(n,["includeRaiReason"]);e!==void 0&&u!=null&&g(e,["parameters","includeRaiReason"],u);const d=f(n,["outputMimeType"]);e!==void 0&&d!=null&&g(e,["parameters","outputOptions","mimeType"],d);const p=f(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&g(e,["parameters","outputOptions","compressionQuality"],p);const m=f(n,["enhanceInputImage"]);e!==void 0&&m!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],m);const v=f(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const T=f(n,["labels"]);e!==void 0&&T!=null&&g(e,["labels"],T);const S=f(n,["numberOfImages"]);e!==void 0&&S!=null&&g(e,["parameters","sampleCount"],S);const R=f(n,["mode"]);return e!==void 0&&R!=null&&g(e,["parameters","mode"],R),t}function _L(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],et(n,i));const o=f(e,["image"]);o!=null&&g(t,["instances[0]","image"],Ei(o));const a=f(e,["upscaleFactor"]);a!=null&&g(t,["parameters","upscaleConfig","upscaleFactor"],a);const u=f(e,["config"]);return u!=null&&yL(u,t),t}function vL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Cf(a))),g(e,["generatedImages"],o)}return e}function TL(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const i=f(n,["encodedVideo"]);i!=null&&g(e,["videoBytes"],Gr(i));const o=f(n,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function EL(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],Gr(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function SL(n){const e={},t=f(n,["image"]);t!=null&&g(e,["_self"],Ei(t));const i=f(n,["maskMode"]);return i!=null&&g(e,["maskMode"],i),e}function AL(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],If(t));const i=f(n,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function CL(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],Ei(t));const i=f(n,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function wI(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const i=f(n,["videoBytes"]);i!=null&&g(e,["encodedVideo"],Gr(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["encoding"],o),e}function RI(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["gcsUri"],t);const i=f(n,["videoBytes"]);i!=null&&g(e,["bytesBase64Encoded"],Gr(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IL="Content-Type",wL="X-Server-Timeout",RL="User-Agent",Rm="x-goog-api-client",bL="1.29.0",xL=`google-genai-sdk/${bL}`,NL="v1beta1",ML="v1beta",rS=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class DL{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:NL,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:ML,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const o=[this.getRequestUrlInternal(t)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))o.searchParams.append(u,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.unaryApiCall(o,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[o,a]of Object.entries(t))typeof a=="object"?i[o]=Object.assign(Object.assign({},i[o]),a):a!==void 0&&(i[o]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.streamApiCall(o,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,o){if(t&&t.timeout||o){const a=new AbortController,u=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>a.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}o&&o.addEventListener("abort",()=>{a.abort()}),e.signal=u}return t&&t.extraBody!==null&&kL(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await oS(o),new Sm(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await oS(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return Va(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";for(;;){const{done:d,value:p}=yield yt(o.read());if(d){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=a.decode(p,{stream:!0});try{const T=JSON.parse(m);if("error"in T){const S=JSON.parse(JSON.stringify(T.error)),R=S.status,L=S.code,z=`got status: ${R}. ${JSON.stringify(T)}`;if(L>=400&&L<600)throw new Sf({message:z,status:L})}}catch(T){if(T.name==="ApiError")throw T}u+=m;let v=u.match(rS);for(;v;){const T=v[1];try{const S=new Response(T,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield yt(new Sm(S)),u=u.slice(v[0].length),v=u.match(rS)}catch(S){throw new Error(`exception parsing stream chunk ${T}. ${S}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=xL+" "+this.clientOptions.userAgentExtra;return e[RL]=t,e[Rm]=t,e[IL]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[o,a]of Object.entries(e.headers))i.append(o,a);e.timeout&&e.timeout>0&&i.append(wL,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);o.sizeBytes=String(u.size);const d=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=d;const p={file:o},m=this.getFileName(e),v=fe("upload/v1beta/files",p._url),T=await this.fetchUploadUrl(v,o.sizeBytes,o.mimeType,m,p,t==null?void 0:t.httpOptions);return a.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,i){var o;const a=this.clientOptions.uploader,u=await a.stat(t),d=String(u.size),p=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:u.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),T={};i!=null&&i.customMetadata&&(T.customMetadata=i.customMetadata),i!=null&&i.chunkingConfig&&(T.chunkingConfig=i.chunkingConfig);const S=await this.fetchUploadUrl(m,d,p,v,T,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,o,a,u){var d;let p={};u?p=u:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const m=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:p});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(d=m==null?void 0:m.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function oS(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(i);throw t>=400&&t<600?new Sf({message:o,status:t}):new Error(o)}}function kL(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const d=Object.assign({},a);for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const m=u[p],v=d[p];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?d[p]=i(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),d[p]=m)}return d}const o=i(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PL="mcp_used/unknown";let VL=!1;function bI(n){for(const e of n)if(UL(e)||typeof e=="object"&&"inputSchema"in e)return!0;return VL}function xI(n){var e;const t=(e=n[Rm])!==null&&e!==void 0?e:"";n[Rm]=(t+` ${PL}`).trimStart()}function UL(n){return n!==null&&typeof n=="object"&&n instanceof Ug}function LL(n,e=100){return Va(this,arguments,function*(){let i,o=0;for(;o<e;){const a=yield yt(n.listTools({cursor:i}));for(const u of a.tools)yield yield yt(u),o++;if(!a.nextCursor)break;i=a.nextCursor}})}class Ug{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Ug(e,t)}async initialize(){var e,t,i,o;if(this.mcpTools.length>0)return;const a={},u=[];for(const v of this.mcpClients)try{for(var d=!0,p=(t=void 0,hu(LL(v))),m;m=await p.next(),e=m.done,!e;d=!0){o=m.value,d=!1;const T=o;u.push(T);const S=T.name;if(a[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);a[S]=v}}catch(T){t={error:T}}finally{try{!d&&!e&&(i=p.return)&&await i.call(p)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),zP(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await o.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function OL(n,e,t){const i=new PP;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(i,o),e(i)}class qL{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=zL(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),p=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let m=()=>{};const v=new Promise(W=>{m=W}),T=e.callbacks,S=function(){m({})},R=this.apiClient,L={onopen:S,onmessage:W=>{OL(R,T.onmessage,W)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(W){},onclose:(i=T==null?void 0:T.onclose)!==null&&i!==void 0?i:function(W){}},z=this.webSocketFactory.create(p,FL(u),L);z.connect(),await v;const Y={setup:{model:et(this.apiClient,e.model)}};return z.send(JSON.stringify(Y)),new BL(z,this.apiClient)}}class BL{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=M4(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=N4(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Ra.PLAY)}pause(){this.sendPlaybackControl(Ra.PAUSE)}stop(){this.sendPlaybackControl(Ra.STOP)}resetContext(){this.sendPlaybackControl(Ra.RESET_CONTEXT)}close(){this.conn.close()}}function FL(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function zL(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const HL="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function GL(n,e,t){const i=new kP;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const a=JSON.parse(o);if(n.isVertexAI()){const u=P4(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class JL{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new qL(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,o,a,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&bI(e.config.tools)&&xI(T);const S=QL(T);if(this.apiClient.isVertexAI())v=`${p}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v);else{const x=this.apiClient.getApiKey();let V="BidiGenerateContent",P="key";x!=null&&x.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),V="BidiGenerateContentConstrained",P="access_token"),v=`${p}/ws/google.ai.generativelanguage.${m}.GenerativeService.${V}?${P}=${x}`}let R=()=>{};const L=new Promise(x=>{R=x}),z=e.callbacks,B=function(){var x;(x=z==null?void 0:z.onopen)===null||x===void 0||x.call(z),R({})},ee=this.apiClient,Y={onopen:B,onmessage:x=>{GL(ee,z.onmessage,x)},onerror:(t=z==null?void 0:z.onerror)!==null&&t!==void 0?t:function(x){},onclose:(i=z==null?void 0:z.onclose)!==null&&i!==void 0?i:function(x){}},W=this.webSocketFactory.create(v,$L(S),Y);W.connect(),await L;let ie=et(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ie.startsWith("publishers/")){const x=this.apiClient.getProject(),V=this.apiClient.getLocation();ie=`projects/${x}/locations/${V}/`+ie}let de={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Kd.AUDIO]}:e.config.responseModalities=[Kd.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ue=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],D=[];for(const x of ue)if(this.isCallableTool(x)){const V=x;D.push(await V.tool())}else D.push(x);D.length>0&&(e.config.tools=D);const N={model:ie,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?de=x4(this.apiClient,N):de=b4(this.apiClient,N),delete de.config,W.send(JSON.stringify(de)),new KL(W,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const YL={turnComplete:!0};class KL{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=ai(t.turns),e.isVertexAI()||(i=i.map(o=>Af(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(HL)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},YL),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:k4(e)}:t={realtimeInput:D4(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function $L(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function QL(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aS=10;function lS(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Ua(u)){o=!0;break}if(!o)return!0;const a=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Ua(n){return"callTool"in n&&typeof n.callTool=="function"}function WL(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>Ua(o)))!==null&&i!==void 0?i:!1}function uS(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,o)=>{if(Ua(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(o)}),t}function cS(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jL extends ws{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,o,a,u,d;const p=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!WL(t)||lS(t.config))return await this.generateContentInternal(p);const m=uS(t);if(m.length>0){const z=m.map(B=>`tools[${B}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${z}.`)}let v,T;const S=ai(p.contents),R=(a=(o=(i=p.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:aS;let L=0;for(;L<R&&(v=await this.generateContentInternal(p),!(!v.functionCalls||v.functionCalls.length===0));){const z=v.candidates[0].content,B=[];for(const ee of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(Ua(ee)){const W=await ee.callTool(v.functionCalls);B.push(...W)}L++,T={role:"user",parts:B},p.contents=ai(p.contents),p.contents.push(z),p.contents.push(T),cS(p.config)&&(S.push(z),S.push(T))}return cS(p.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),lS(t.config)){const o=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(o)}const i=uS(t);if(i.length>0){const o=i.map(a=>`tools[${a}]`).join(", ");throw new Error(`Incompatible tools found at ${o}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var o;let a;const u=[];if(i!=null&&i.generatedImages)for(const p of i.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((o=p==null?void 0:p.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=p==null?void 0:p.safetyAttributes:u.push(p);let d;return a?d={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Uo(Is.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var i,o,a,u,d,p;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(a=t.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((p=(d=t.source)===null||d===void 0?void 0:d.video)===null||p===void 0)&&p.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,o;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const u=await Promise.all(a.map(async p=>Ua(p)?await p.tool():p)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&bI(e.config.tools)){const p=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let m=Object.assign({},p);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),xI(m),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return d}async initAfcToolsMap(e){var t,i,o;const a=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Ua(u)){const d=u,p=await d.tool();for(const m of(o=p.functionDeclarations)!==null&&o!==void 0?o:[]){if(!m.name)throw new Error("Function declaration name is required.");if(a.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);a.set(m.name,d)}}return a}async processAfcStream(e){var t,i,o;const a=(o=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:aS;let u=!1,d=0;const p=await this.initAfcToolsMap(e);return(function(m,v,T){var S,R;return Va(this,arguments,function*(){for(var L,z,B,ee;d<a;){u&&(d++,u=!1);const de=yield yt(m.processParamsMaybeAddMcpUsage(T)),ue=yield yt(m.generateContentStreamInternal(de)),D=[],N=[];try{for(var Y=!0,W=(z=void 0,hu(ue)),ie;ie=yield yt(W.next()),L=ie.done,!L;Y=!0){ee=ie.value,Y=!1;const x=ee;if(yield yield yt(x),x.candidates&&(!((S=x.candidates[0])===null||S===void 0)&&S.content)){N.push(x.candidates[0].content);for(const V of(R=x.candidates[0].content.parts)!==null&&R!==void 0?R:[])if(d<a&&V.functionCall){if(!V.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(V.functionCall.name)){const P=yield yt(v.get(V.functionCall.name).callTool([V.functionCall]));D.push(...P)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${V.functionCall.name}`)}}}}catch(x){z={error:x}}finally{try{!Y&&!L&&(B=W.return)&&(yield yt(B.call(W)))}finally{if(z)throw z.error}}if(D.length>0){u=!0;const x=new Xl;x.candidates=[{content:{role:"user",parts:D}}],yield yield yt(x);const V=[];V.push(...N),V.push({role:"user",parts:D});const P=ai(T.contents).concat(V);T.contents=P}else break}})})(this,p,e)}async generateContentInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=nS(this.apiClient,e);return d=fe("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=sS(v),S=new Xl;return Object.assign(S,T),S})}else{const m=tS(this.apiClient,e);return d=fe("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=iS(v),S=new Xl;return Object.assign(S,T),S})}}async generateContentStreamInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=nS(this.apiClient,e);return d=fe("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(T){return Va(this,arguments,function*(){var S,R,L,z;try{for(var B=!0,ee=hu(T),Y;Y=yield yt(ee.next()),S=Y.done,!S;B=!0){z=Y.value,B=!1;const W=z,ie=sS(yield yt(W.json()));ie.sdkHttpResponse={headers:W.headers};const de=new Xl;Object.assign(de,ie),yield yield yt(de)}}catch(W){R={error:W}}finally{try{!B&&!S&&(L=ee.return)&&(yield yt(L.call(ee)))}finally{if(R)throw R.error}}})})}else{const m=tS(this.apiClient,e);return d=fe("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(T){return Va(this,arguments,function*(){var S,R,L,z;try{for(var B=!0,ee=hu(T),Y;Y=yield yt(ee.next()),S=Y.done,!S;B=!0){z=Y.value,B=!1;const W=z,ie=iS(yield yt(W.json()));ie.sdkHttpResponse={headers:W.headers};const de=new Xl;Object.assign(de,ie),yield yield yt(de)}}catch(W){R={error:W}}finally{try{!B&&!S&&(L=ee.return)&&(yield yt(L.call(ee)))}finally{if(R)throw R.error}}})})}}async embedContent(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=cU(this.apiClient,e);return d=fe("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=fU(v),S=new qE;return Object.assign(S,T),S})}else{const m=uU(this.apiClient,e);return d=fe("{model}:batchEmbedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=dU(v),S=new qE;return Object.assign(S,T),S})}}async generateImagesInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=EU(this.apiClient,e);return d=fe("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=AU(v),S=new BE;return Object.assign(S,T),S})}else{const m=TU(this.apiClient,e);return d=fe("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=SU(v),S=new BE;return Object.assign(S,T),S})}}async editImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=rU(this.apiClient,e);return a=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=oU(p),v=new SP;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=_L(this.apiClient,e);return a=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=vL(p),v=new AP;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=eL(this.apiClient,e);return a=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=tL(p),v=new CP;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=aL(this.apiClient,e);return a=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=lL(p),v=new IP;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=BU(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>wm(v))}else{const m=qU(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Im(v))}}async listInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=KU(this.apiClient,e);return d=fe("{models_url}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=QU(v),S=new FE;return Object.assign(S,T),S})}else{const m=YU(this.apiClient,e);return d=fe("{models_url}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=$U(v),S=new FE;return Object.assign(S,T),S})}}async update(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=gL(this.apiClient,e);return d=fe("{model}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>wm(v))}else{const m=mL(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Im(v))}}async delete(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=tU(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=iU(v),S=new zE;return Object.assign(S,T),S})}else{const m=eU(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=nU(v),S=new zE;return Object.assign(S,T),S})}}async countTokens(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=j4(this.apiClient,e);return d=fe("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=Z4(v),S=new HE;return Object.assign(S,T),S})}else{const m=W4(this.apiClient,e);return d=fe("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=X4(v),S=new HE;return Object.assign(S,T),S})}}async computeTokens(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=H4(this.apiClient,e);return a=fe("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=G4(p),v=new wP;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=xU(this.apiClient,e);return d=fe("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>{const T=RU(v),S=new $d;return Object.assign(S,T),S})}else{const m=bU(this.apiClient,e);return d=fe("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const T=wU(v),S=new $d;return Object.assign(S,T),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XL extends ws{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=gP(e);return d=fe("{operationName}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u}else{const m=mP(e);return d=fe("{operationName}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=lP(e);return a=fe("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZL(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function e3(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>l3(a))),g(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&g(e,["role"],i),e}function t3(n,e,t){const i={},o=f(e,["expireTime"]);t!==void 0&&o!=null&&g(t,["expireTime"],o);const a=f(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&g(t,["newSessionExpireTime"],a);const u=f(e,["uses"]);t!==void 0&&u!=null&&g(t,["uses"],u);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&g(t,["bidiGenerateContentSetup"],a3(n,d));const p=f(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&g(t,["fieldMask"],p),i}function n3(n,e){const t={},i=f(e,["config"]);return i!=null&&g(t,["config"],t3(n,i,t)),t}function i3(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function s3(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function r3(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function o3(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","speechConfig"],Vg(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],R);const L=f(n,["systemInstruction"]);e!==void 0&&L!=null&&g(e,["setup","systemInstruction"],e3(fn(L)));const z=f(n,["tools"]);if(e!==void 0&&z!=null){let ue=$a(z);Array.isArray(ue)&&(ue=ue.map(D=>c3(Ka(D)))),g(e,["setup","tools"],ue)}const B=f(n,["sessionResumption"]);e!==void 0&&B!=null&&g(e,["setup","sessionResumption"],u3(B));const ee=f(n,["inputAudioTranscription"]);e!==void 0&&ee!=null&&g(e,["setup","inputAudioTranscription"],ee);const Y=f(n,["outputAudioTranscription"]);e!==void 0&&Y!=null&&g(e,["setup","outputAudioTranscription"],Y);const W=f(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&g(e,["setup","realtimeInputConfig"],W);const ie=f(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&g(e,["setup","contextWindowCompression"],ie);const de=f(n,["proactivity"]);return e!==void 0&&de!=null&&g(e,["setup","proactivity"],de),t}function a3(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["setup","model"],et(n,i));const o=f(e,["config"]);return o!=null&&g(t,["config"],o3(o,t)),t}function l3(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=f(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&g(e,["fileData"],i3(a));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],ZL(d));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const T=f(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function u3(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function c3(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],s3(d));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],r3(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function d3(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(a=>`${t}.${a}`);e.push(...o)}else e.push(t)}return e.join(",")}function f3(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const a=d3(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(m=>u.includes(m)?`generationConfig.${m}`:m));const p=[];a&&p.push(a),d.length>0&&p.push(...d),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class h3 extends ws{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=n3(this.apiClient,e);a=fe("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const p=f3(d,e.config);return o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function p3(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&g(e,["displayName"],i),t}function m3(n){const e={},t=f(n,["config"]);return t!=null&&p3(t,e),e}function g3(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),t}function y3(n){const e={},t=f(n,["name"]);t!=null&&g(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&g3(i,e),e}function _3(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function v3(n,e){const t={},i=f(n,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["customMetadata"],a)}const o=f(n,["chunkingConfig"]);return e!==void 0&&o!=null&&g(e,["chunkingConfig"],o),t}function T3(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response"]);return u!=null&&g(e,["response"],S3(u)),e}function E3(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const i=f(n,["fileName"]);i!=null&&g(e,["fileName"],i);const o=f(n,["config"]);return o!=null&&v3(o,e),e}function S3(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&g(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&g(e,["documentName"],o),e}function A3(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function C3(n){const e={},t=f(n,["config"]);return t!=null&&A3(t,e),e}function I3(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["fileSearchStores"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["fileSearchStores"],a)}return e}function w3(n,e){const t={},i=f(n,["mimeType"]);e!==void 0&&i!=null&&g(e,["mimeType"],i);const o=f(n,["displayName"]);e!==void 0&&o!=null&&g(e,["displayName"],o);const a=f(n,["customMetadata"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>p)),g(e,["customMetadata"],d)}const u=f(n,["chunkingConfig"]);return e!==void 0&&u!=null&&g(e,["chunkingConfig"],u),t}function R3(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const i=f(n,["config"]);return i!=null&&w3(i,e),e}function b3(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x3(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),t}function N3(n){const e={},t=f(n,["name"]);t!=null&&g(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&x3(i,e),e}function M3(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function D3(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function k3(n){const e={},t=f(n,["parent"]);t!=null&&g(e,["_url","parent"],t);const i=f(n,["config"]);return i!=null&&D3(i,e),e}function P3(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["documents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class V3 extends ws{constructor(e){super(),this.apiClient=e,this.list=async t=>new Uo(Is.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=M3(e);return a=fe("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=N3(e);o=fe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=k3(e);return a=fe("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=P3(p),v=new RP;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class U3 extends ws{constructor(e,t=new V3(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new Uo(Is.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=m3(e);return a=fe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=_3(e);return a=fe("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=y3(e);o=fe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=C3(e);return a=fe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=I3(p),v=new bP;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=R3(e);return a=fe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=b3(p),v=new xP;return Object.assign(v,m),v})}}async importFile(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=E3(e);return a=fe("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=T3(p),v=new Ng;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function L3(n,e){const t={},i=f(n,["name"]);return i!=null&&g(t,["_url","name"],i),t}function O3(n,e){const t={},i=f(n,["name"]);return i!=null&&g(t,["_url","name"],i),t}function q3(n,e,t){const i={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=f(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&g(e,["displayName"],o),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=f(n,["epochCount"]);e!==void 0&&a!=null&&g(e,["tuningTask","hyperparameters","epochCount"],a);const u=f(n,["learningRateMultiplier"]);if(u!=null&&g(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&g(e,["tuningTask","hyperparameters","batchSize"],d);const p=f(n,["learningRate"]);if(e!==void 0&&p!=null&&g(e,["tuningTask","hyperparameters","learningRate"],p),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function B3(n,e,t){const i={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const R=f(n,["validationDataset"]);e!==void 0&&R!=null&&g(e,["supervisedTuningSpec"],dS(R))}else if(o==="PREFERENCE_TUNING"){const R=f(n,["validationDataset"]);e!==void 0&&R!=null&&g(e,["preferenceOptimizationSpec"],dS(R))}const a=f(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&g(e,["tunedModelDisplayName"],a);const u=f(n,["description"]);e!==void 0&&u!=null&&g(e,["description"],u);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const R=f(n,["epochCount"]);e!==void 0&&R!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],R)}else if(d==="PREFERENCE_TUNING"){const R=f(n,["epochCount"]);e!==void 0&&R!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],R)}let p=f(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const R=f(n,["learningRateMultiplier"]);e!==void 0&&R!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],R)}else if(p==="PREFERENCE_TUNING"){const R=f(n,["learningRateMultiplier"]);e!==void 0&&R!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],R)}let m=f(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const R=f(n,["exportLastCheckpointOnly"]);e!==void 0&&R!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],R)}else if(m==="PREFERENCE_TUNING"){const R=f(n,["exportLastCheckpointOnly"]);e!==void 0&&R!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],R)}let v=f(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const R=f(n,["adapterSize"]);e!==void 0&&R!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],R)}else if(v==="PREFERENCE_TUNING"){const R=f(n,["adapterSize"]);e!==void 0&&R!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],R)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=f(n,["labels"]);e!==void 0&&T!=null&&g(e,["labels"],T);const S=f(n,["beta"]);return e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),i}function F3(n,e){const t={},i=f(n,["baseModel"]);i!=null&&g(t,["baseModel"],i);const o=f(n,["preTunedModel"]);o!=null&&g(t,["preTunedModel"],o);const a=f(n,["trainingDataset"]);a!=null&&X3(a);const u=f(n,["config"]);return u!=null&&q3(u,t),t}function z3(n,e){const t={},i=f(n,["baseModel"]);i!=null&&g(t,["baseModel"],i);const o=f(n,["preTunedModel"]);o!=null&&g(t,["preTunedModel"],o);const a=f(n,["trainingDataset"]);a!=null&&Z3(a,t,e);const u=f(n,["config"]);return u!=null&&B3(u,t,e),t}function H3(n,e){const t={},i=f(n,["name"]);return i!=null&&g(t,["_url","name"],i),t}function G3(n,e){const t={},i=f(n,["name"]);return i!=null&&g(t,["_url","name"],i),t}function J3(n,e,t){const i={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),i}function Y3(n,e,t){const i={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),i}function K3(n,e){const t={},i=f(n,["config"]);return i!=null&&J3(i,t),t}function $3(n,e){const t={},i=f(n,["config"]);return i!=null&&Y3(i,t),t}function Q3(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&g(t,["nextPageToken"],o);const a=f(n,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>NI(d))),g(t,["tuningJobs"],u)}return t}function W3(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&g(t,["nextPageToken"],o);const a=f(n,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>bm(d))),g(t,["tuningJobs"],u)}return t}function j3(n,e){const t={},i=f(n,["name"]);i!=null&&g(t,["model"],i);const o=f(n,["name"]);return o!=null&&g(t,["endpoint"],o),t}function X3(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=f(n,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),g(t,["examples","examples"],o)}return t}function Z3(n,e,t){const i={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let a=f(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function NI(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&g(t,["name"],o);const a=f(n,["state"]);a!=null&&g(t,["state"],dI(a));const u=f(n,["createTime"]);u!=null&&g(t,["createTime"],u);const d=f(n,["tuningTask","startTime"]);d!=null&&g(t,["startTime"],d);const p=f(n,["tuningTask","completeTime"]);p!=null&&g(t,["endTime"],p);const m=f(n,["updateTime"]);m!=null&&g(t,["updateTime"],m);const v=f(n,["description"]);v!=null&&g(t,["description"],v);const T=f(n,["baseModel"]);T!=null&&g(t,["baseModel"],T);const S=f(n,["_self"]);return S!=null&&g(t,["tunedModel"],j3(S)),t}function bm(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&g(t,["name"],o);const a=f(n,["state"]);a!=null&&g(t,["state"],dI(a));const u=f(n,["createTime"]);u!=null&&g(t,["createTime"],u);const d=f(n,["startTime"]);d!=null&&g(t,["startTime"],d);const p=f(n,["endTime"]);p!=null&&g(t,["endTime"],p);const m=f(n,["updateTime"]);m!=null&&g(t,["updateTime"],m);const v=f(n,["error"]);v!=null&&g(t,["error"],v);const T=f(n,["description"]);T!=null&&g(t,["description"],T);const S=f(n,["baseModel"]);S!=null&&g(t,["baseModel"],S);const R=f(n,["tunedModel"]);R!=null&&g(t,["tunedModel"],R);const L=f(n,["preTunedModel"]);L!=null&&g(t,["preTunedModel"],L);const z=f(n,["supervisedTuningSpec"]);z!=null&&g(t,["supervisedTuningSpec"],z);const B=f(n,["preferenceOptimizationSpec"]);B!=null&&g(t,["preferenceOptimizationSpec"],B);const ee=f(n,["tuningDataStats"]);ee!=null&&g(t,["tuningDataStats"],ee);const Y=f(n,["encryptionSpec"]);Y!=null&&g(t,["encryptionSpec"],Y);const W=f(n,["partnerModelTuningSpec"]);W!=null&&g(t,["partnerModelTuningSpec"],W);const ie=f(n,["customBaseModel"]);ie!=null&&g(t,["customBaseModel"],ie);const de=f(n,["experiment"]);de!=null&&g(t,["experiment"],de);const ue=f(n,["labels"]);ue!=null&&g(t,["labels"],ue);const D=f(n,["outputUri"]);D!=null&&g(t,["outputUri"],D);const N=f(n,["pipelineJob"]);N!=null&&g(t,["pipelineJob"],N);const x=f(n,["serviceAccount"]);x!=null&&g(t,["serviceAccount"],x);const V=f(n,["tunedModelDisplayName"]);V!=null&&g(t,["tunedModelDisplayName"],V);const P=f(n,["veoTuningSpec"]);return P!=null&&g(t,["veoTuningSpec"],P),t}function e6(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&g(t,["name"],o);const a=f(n,["metadata"]);a!=null&&g(t,["metadata"],a);const u=f(n,["done"]);u!=null&&g(t,["done"],u);const d=f(n,["error"]);return d!=null&&g(t,["error"],d),t}function dS(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&g(t,["validationDatasetUri"],i);const o=f(n,["vertexDatasetResource"]);return o!=null&&g(t,["validationDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class t6 extends ws{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new Uo(Is.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:o});return a.baseModel=void 0,await this.tuneInternal(a)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),a=await this.tuneMldevInternal(o);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:Em.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=G3(e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>bm(v))}else{const m=H3(e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>NI(v))}}async listInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=$3(e);return d=fe("tuningJobs",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=W3(v),S=new GE;return Object.assign(S,T),S})}else{const m=K3(e);return d=fe("tunedModels",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=Q3(v),S=new GE;return Object.assign(S,T),S})}}async cancel(e){var t,i,o,a;let u="",d={};if(this.apiClient.isVertexAI()){const p=O3(e);u=fe("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const p=L3(e);u=fe("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=z3(e,e);return a=fe("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>bm(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=F3(e);return a=fe("tunedModels",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>e6(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class n6{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const i6=1024*1024*8,s6=3,r6=1e3,o6=2,Wd="x-goog-upload-status";async function a6(n,e,t){var i;const o=await MI(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[Wd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function l6(n,e,t){var i;const o=await MI(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[Wd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=rI(a),d=new Mg;return Object.assign(d,u),d}async function MI(n,e,t){var i,o;let a=0,u=0,d=new Sm(new Response),p="upload";for(a=n.size;u<a;){const m=Math.min(i6,a-u),v=n.slice(u,u+m);u+m>=a&&(p+=", finalize");let T=0,S=r6;for(;T<s6&&(d=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(u),"Content-Length":String(m)}}}),!(!((i=d==null?void 0:d.headers)===null||i===void 0)&&i[Wd]));)T++,await c6(S),S=S*o6;if(u+=m,((o=d==null?void 0:d.headers)===null||o===void 0?void 0:o[Wd])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function u6(n){return{size:n.size,type:n.type}}function c6(n){return new Promise(e=>setTimeout(e,n))}class d6{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await a6(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await l6(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await u6(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class f6{create(e,t,i){return new h6(e,t,i)}}class h6{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fS="x-goog-api-key";class p6{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(fS)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(fS,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const m6="gl-node/";class g6{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=oP(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const o=new p6(this.apiKey);this.apiClient=new DL({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:m6+"web",uploader:new d6,downloader:new n6}),this.models=new jL(this.apiClient),this.live=new JL(this.apiClient,o,new f6),this.batches=new MV(this.apiClient),this.chats=new u4(this.models,this.apiClient),this.caches=new o4(this.apiClient),this.files=new v4(this.apiClient),this.operations=new XL(this.apiClient),this.authTokens=new h3(this.apiClient),this.tunings=new t6(this.apiClient),this.fileSearchStores=new U3(this.apiClient)}}const DI={geminiApiKey:"AIzaSyBAzdNikRnpu5iyeg8VJ03fc0HXVG2B2iY",openWeatherApiKey:"074ebc9404ca1a72d5b0759070161539"},wf=new g6({apiKey:DI.geminiApiKey});async function y6(n){const e={text:`Analyse chacune des images de vtements fournies. Pour chaque image, dans l'ordre, extrais les informations suivantes en franais :
    1. Une description concise incluant son type (ex: T-shirt, jean), sa couleur principale, et son style.
    2. Sa catgorie : "Hauts", "Bas", "Chaussures", ou "Accessoires".
    3. Sa couleur principale (ex: "Bleu", "Noir"). Sois concis.
    4. Sa matire principale (ex: "Coton", "Cuir"). Sois concis.
    
    Retourne le rsultat sous la forme d'un objet JSON unique contenant une cl "items", qui est un tableau d'objets. Chaque objet du tableau doit correspondre  une image et contenir les champs : "analysis", "category", "color", et "material".`},t=n.map(o=>({inlineData:{data:o,mimeType:"image/jpeg"}})),i=await wf.models.generateContent({model:"gemini-flash-latest",contents:{parts:[e,...t]},config:{responseMimeType:"application/json",responseSchema:{type:Pe.OBJECT,properties:{items:{type:Pe.ARRAY,description:"Un tableau d'analyses pour chaque vtement.",items:{type:Pe.OBJECT,properties:{analysis:{type:Pe.STRING,description:"La description concise du vtement."},category:{type:Pe.STRING,description:'La catgorie du vtement parmi "Hauts", "Bas", "Chaussures", ou "Accessoires".',enum:["Hauts","Bas","Chaussures","Accessoires"]},color:{type:Pe.STRING,description:"La couleur principale du vtement."},material:{type:Pe.STRING,description:"La matire principale du vtement."}},required:["analysis","category","color","material"]}}},required:["items"]}}});try{const o=JSON.parse(i.text),a=["Hauts","Bas","Chaussures","Accessoires"];return o.items.forEach(u=>{a.includes(u.category)||(console.warn(`Catgorie invalide reue de l'IA: ${u.category}, fallback sur "Accessoires"`),u.category="Accessoires")}),o.items}catch(o){throw console.error("Erreur de parsing de la rponse de l'IA pour l'analyse par lot:",o),console.error("Rponse reue:",i.text),new Error("L'IA a renvoy une rponse d'analyse malforme.")}}function _6(n){return n&&n.name&&Array.isArray(n.itemIds)}async function v6(n,e,t,i){const o=new Set((e||[]).flatMap(S=>S.itemIds)),u=n.filter(S=>!o.has(S.id)).map(S=>`- ${S.analysis} (Catgorie: ${S.category}, Couleur: ${S.color}, Matire: ${S.material})`).join(`
`),d=e.map(S=>`- ${S.name} (Ensemble)`).join(`
`),p=[u,d].filter(Boolean).join(`
`),m=i?`
**RGLE CRITIQUE : Chaque tenue DOIT imprativement inclure l'article ou l'ensemble suivant : "${_6(i)?i.name:i.analysis}". C'est la pice matresse.**
`:"",v=`
    Tu es un styliste de mode expert. Ta mission est de crer des tenues pour un utilisateur en fonction de sa garde-robe et d'un contexte prcis.

    Contexte de l'utilisateur : "${t}"
    
    RGLE IMPORTANTE : Les articles marqus comme "(Ensemble)" sont des groupes de vtements insparables. Si tu utilises un ensemble, tu dois le lister par son nom (ex: "Costume bleu marine") et ne pas lister ses composants individuels.

    Vtements et Ensembles disponibles :
    ${p}
    ${m}
    En te basant **uniquement** sur les vtements et ensembles lists ci-dessus, cre 3 tenues distinctes et cohrentes qui correspondent au contexte de l'utilisateur.

    Pour chaque tenue, fournis :
    1. Un nom de titre court et accrocheur pour la tenue.
    2. Une brve description de l'ambiance ou du style de la tenue.
    3. La liste exacte des descriptions des vtements ou des noms d'ensembles de la liste fournie  utiliser.

    Rponds en franais.
  `,T=await wf.models.generateContent({model:"gemini-2.5-pro",contents:v,config:{responseMimeType:"application/json",responseSchema:{type:Pe.OBJECT,properties:{tenues:{type:Pe.ARRAY,description:"La liste des suggestions de tenues.",items:{type:Pe.OBJECT,properties:{titre:{type:Pe.STRING,description:"Le nom de la tenue."},description:{type:Pe.STRING,description:"Une brve description du style de la tenue."},vetements:{type:Pe.ARRAY,items:{type:Pe.STRING,description:"Description d'un vtement ou nom d'un ensemble de la liste fournie."},description:"La liste des descriptions des vtements ou ensembles composant la tenue."}},required:["titre","description","vetements"]}}},required:["tenues"]}}});try{return JSON.parse(T.text).tenues}catch(S){throw console.error("Erreur de parsing JSON de la rponse Gemini:",S),console.error("Rponse reue:",T.text),new Error("L'IA a renvoy une rponse malforme.")}}async function T6(n,e){const t=n.map(a=>`${a.category}: ${a.analysis}, couleur ${a.color}, matire ${a.material}`).join(`
`),i=`Tu es un expert en mode et stylisme. Analyse cette garde-robe et suggre des pices stratgiques  acheter pour la rendre plus versatile et polyvalente.

GARDE-ROBE ACTUELLE (${n.length} pices):
${t}

Analyse la garde-robe et identifie:
1. Les points forts de cette garde-robe
2. Les manques ou gaps  combler
3. Les pices  acheter pour maximiser la polyvalence

Suggre 3-5 pices maximum en priorisant les basiques polyvalents.`,o=await wf.models.generateContent({model:"gemini-2.5-pro",contents:i,config:{responseMimeType:"application/json",responseSchema:{type:Pe.OBJECT,properties:{summary:{type:Pe.STRING,description:"Rsum gnral de la garde-robe (2-3 phrases)"},strengths:{type:Pe.ARRAY,items:{type:Pe.STRING},description:"Liste des points forts"},gaps:{type:Pe.ARRAY,items:{type:Pe.STRING},description:"Liste des manques"},suggestions:{type:Pe.ARRAY,items:{type:Pe.OBJECT,properties:{category:{type:Pe.STRING},description:{type:Pe.STRING},reason:{type:Pe.STRING},priority:{type:Pe.STRING,enum:["high","medium","low"]},estimatedPrice:{type:Pe.STRING}},required:["category","description","reason","priority","estimatedPrice"]}}},required:["summary","strengths","gaps","suggestions"]}}});try{return JSON.parse(o.text)}catch(a){throw console.error("Erreur:",a),a}}async function E6(n,e,t,i){const o=new Set((e||[]).flatMap(T=>T.itemIds)),u=n.filter(T=>!o.has(T.id)).map(T=>`- ${T.analysis} (Catgorie: ${T.category}, Couleur: ${T.color}, Matire: ${T.material})`).join(`
`),d=e.map(T=>`- ${T.name} (Ensemble)`).join(`
`),p=[u,d].filter(Boolean).join(`
`),m=`
    Tu es un styliste de voyage et un expert en organisation. Ta mission est de crer une valise optimise pour un voyage.

    Dtails du voyage :
    - Dure : ${t} jour(s)
    - Contexte / Mto : "${i}"

    Vtements et Ensembles disponibles dans la garde-robe :
    ${p}
    
    RGLES :
    1. Cre une liste de vtements  emporter qui soit polyvalente et minimale.
    2. Ne slectionne QUE des articles de la liste fournie.
    3. Les articles marqus comme "(Ensemble)" sont insparables.
    4. Assure-toi que la quantit de vtements est approprie pour ${t} jour(s).
    `,v=await wf.models.generateContent({model:"gemini-2.5-pro",contents:m,config:{responseMimeType:"application/json",responseSchema:{type:Pe.OBJECT,properties:{titre:{type:Pe.STRING,description:"Le nom du plan de valise."},resume:{type:Pe.STRING,description:"Un bref rsum de la stratgie de la valise."},valise:{type:Pe.ARRAY,items:{type:Pe.STRING},description:"La liste des vtements  emporter."}},required:["titre","resume","valise"]}}});try{return JSON.parse(v.text)}catch(T){throw console.error("Erreur de parsing JSON:",T),new Error("L'IA a renvoy une rponse malforme.")}}const S6=async n=>{try{const e=yf(Vo,"users",n,"items");return(await OC(e)).docs.map(o=>({id:o.id,...o.data()}))}catch(e){return console.error("Erreur lors du chargement des vtements:",e),[]}},A6=async(n,e)=>{try{const t=yf(Vo,"users",n,"items");return(await BC(t,e)).id}catch(t){throw console.error("Erreur lors de l'ajout d'un vtement:",t),t}},hS=async(n,e,t)=>{try{const i=_f(Vo,"users",n,"items",e);await qD(i,t)}catch(i){throw console.error("Erreur lors de la mise  jour d'un vtement:",i),i}},C6=async(n,e)=>{try{const t=_f(Vo,"users",n,"items",e);await qC(t)}catch(t){throw console.error("Erreur lors de la suppression d'un vtement:",t),t}},I6=async n=>{try{const e=yf(Vo,"users",n,"sets");return(await OC(e)).docs.map(o=>({id:o.id,...o.data()}))}catch(e){return console.error("Erreur lors du chargement des ensembles:",e),[]}},w6=async(n,e)=>{try{const t=yf(Vo,"users",n,"sets");return(await BC(t,e)).id}catch(t){throw console.error("Erreur lors de l'ajout d'un ensemble:",t),t}},R6=async(n,e)=>{try{const t=_f(Vo,"users",n,"sets",e);await qC(t)}catch(t){throw console.error("Erreur lors de la suppression d'un ensemble:",t),t}},b6=async(n,e,t)=>{try{const i=Qk(nP,`users/${n}/clothing/${t}.jpg`);return await Kk(i,e,"data_url"),await $k(i)}catch(i){throw console.error("Erreur lors de l'upload de l'image:",i),i}},x6=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),N6=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),pS=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),M6=()=>A.jsxs("svg",{className:"animate-spin h-8 w-8 text-gold",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Lg=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:A.jsx("path",{d:"M10 3a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0V7H8a1 1 0 110-2h1V4a1 1 0 011-1zM4 9a1 1 0 011 1v1h1a1 1 0 110 2H5v1a1 1 0 11-2 0v-1H2a1 1 0 110-2h1v-1a1 1 0 011-1zM16 9a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})}),kI=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),mS=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.5 6.6C12.5 5.54903 11.651 4.7 10.6 4.7C9.54903 4.7 8.7 5.54903 8.7 6.6V8.7C8.7 9.36274 9.23726 9.9 9.9 9.9H14.1C14.7627 9.9 15.3 9.36274 15.3 8.7V7.8"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.10879 16.5C4.43285 14.805 5.86246 13.5 7.6 13.5H16.4C18.1375 13.5 19.5672 14.805 19.8912 16.5L20.5 19.5H3.5L4.10879 16.5Z"})]}),PI=()=>A.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4 0 1.132-.497 2.16-1.32 2.874-.823.714-1.823 1.126-2.904 1.126H12v.01M12 17h.01"})}),D6=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 4h6l2 5-2 1-3-4-3 4-2-1 2-5z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v10m-3-10v10h6V10"})]}),k6=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 4h12v10H6z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 14v6h-2L6 4"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 14v6h2l1-16"})]}),P6=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 18h16l-3-6H7L4 18z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 12V7a2 2 0 012-2h0a2 2 0 012 2v5"})]}),V6=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 000-18 9 9 0 000 18z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11.5l-3.5 3.5"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.5 8.5l-3.5 3.5"})]}),U6=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),VI=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Rf=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),UI=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:A.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),L6=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),O6=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[A.jsx("path",{d:"M8 3a1 1 0 000 2h4a1 1 0 100-2H8z"}),A.jsx("path",{fillRule:"evenodd",d:"M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 3a1 1 0 011-1h10a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1V7z",clipRule:"evenodd"})]}),q6=({theme:n,toggleTheme:e,children:t})=>A.jsx("header",{className:"bg-snow/80 dark:bg-onyx/80 backdrop-blur-lg border-b border-black/5 dark:border-white/10 sticky top-0 z-50",children:A.jsxs("div",{className:"container mx-auto px-4 lg:px-8 h-24 flex justify-between items-center",children:[A.jsxs("h1",{className:"text-4xl font-serif font-bold tracking-wider text-raisin-black dark:text-snow",children:["Dress ",A.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),A.jsxs("div",{className:"flex items-center gap-4",children:[t,A.jsx("button",{onClick:e,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-black/5 dark:hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx transition-colors","aria-label":"Changer le thme",children:n==="light"?A.jsx(N6,{}):A.jsx(x6,{})})]})]})}),gS=({user:n})=>{var R,L,z;const[e,t]=ge.useState(""),[i,o]=ge.useState(""),[a,u]=ge.useState(!1),[d,p]=ge.useState(!1),m=ge.useRef(null);ge.useEffect(()=>{const B=ee=>{m.current&&!m.current.contains(ee.target)&&p(!1)};return d&&document.addEventListener("mousedown",B),()=>{document.removeEventListener("mousedown",B)}},[d]);const v=async()=>{try{await Nx(su,tP)}catch(B){console.error("Erreur de connexion Google:",B)}},T=async B=>{B.preventDefault();try{a?await rx(su,e,i):await ox(su,e,i)}catch(ee){console.error("Erreur d'authentification:",ee)}},S=async()=>{try{await cx(su)}catch(B){console.error("Erreur de dconnexion:",B)}};return n?A.jsxs("div",{className:"relative",ref:m,children:[A.jsxs("button",{onClick:()=>p(!d),className:"flex items-center gap-3 px-4 py-2 rounded-full bg-gold/10 hover:bg-gold/20 transition-all border border-gold/30",children:[A.jsx("div",{className:"w-8 h-8 rounded-full bg-gold flex items-center justify-center text-onyx font-bold",children:(((R=n.displayName)==null?void 0:R[0])||((L=n.email)==null?void 0:L[0])||"U").toUpperCase()}),A.jsx("span",{className:"hidden md:block text-sm font-medium",children:n.displayName||((z=n.email)==null?void 0:z.split("@")[0])})]}),d&&A.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-raisin-black rounded-xl shadow-2xl border border-black/10 dark:border-white/10 overflow-hidden z-50",children:[A.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[A.jsx("p",{className:"text-sm font-medium",children:n.displayName||"Utilisateur"}),A.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n.email})]}),A.jsxs("button",{onClick:S,className:"w-full px-4 py-3 text-left text-sm hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors flex items-center gap-2",children:[A.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Dconnexion"]})]})]}):A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl p-8 max-w-md mx-auto border border-black/5 dark:border-white/10",children:[A.jsxs("div",{className:"text-center mb-8",children:[A.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:["Dress ",A.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:a?"Crez votre compte":"Bienvenue"})]}),A.jsxs("button",{onClick:v,className:"w-full mb-6 px-6 py-4 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl hover:border-gold hover:shadow-lg hover:shadow-gold/20 transition-all duration-300 flex items-center justify-center gap-3 group",children:[A.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[A.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),A.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),A.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),A.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),A.jsx("span",{className:"font-semibold group-hover:text-gold transition-colors",children:"Continuer avec Google"})]}),A.jsxs("div",{className:"relative my-6",children:[A.jsx("div",{className:"absolute inset-0 flex items-center",children:A.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),A.jsx("div",{className:"relative flex justify-center text-sm",children:A.jsx("span",{className:"px-4 bg-white dark:bg-raisin-black text-gray-500",children:"Ou avec email"})})]}),A.jsxs("form",{onSubmit:T,className:"space-y-4",children:[A.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:B=>t(B.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),A.jsx("input",{type:"password",placeholder:"Mot de passe",value:i,onChange:B=>o(B.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),A.jsx("button",{type:"submit",className:"w-full px-6 py-4 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all duration-300 font-bold",children:a?"Crer mon compte":"Se connecter"})]}),A.jsx("button",{onClick:()=>u(!a),className:"w-full mt-6 text-sm text-gray-500 hover:text-gold transition-colors",children:a?"Dj un compte ? Se connecter":"Pas encore de compte ? S'inscrire"})]})},B6=({onAnalyze:n,isAnalyzing:e})=>{const t=ge.useRef(null),[i,o]=ge.useState([]),[a,u]=ge.useState(!1),[d,p]=ge.useState(!1);ge.useEffect(()=>{const Y=()=>p(window.innerWidth<1024);return Y(),window.addEventListener("resize",Y),()=>window.removeEventListener("resize",Y)},[]),ge.useEffect(()=>()=>{i.forEach(Y=>URL.revokeObjectURL(Y.preview))},[i]);const m=Y=>{const W=Y.map(ie=>({id:`${ie.name}-${ie.lastModified}-${Math.random()}`,file:ie,preview:URL.createObjectURL(ie)}));o(ie=>[...ie,...W])},v=Y=>{Y.target.files&&(m(Array.from(Y.target.files)),Y.target.value="")},T=()=>{var Y;e||(Y=t.current)==null||Y.click()},S=Y=>{d||(Y.preventDefault(),Y.stopPropagation(),u(!0))},R=Y=>{d||(Y.preventDefault(),Y.stopPropagation(),u(!1))},L=Y=>{d||(Y.preventDefault(),Y.stopPropagation())},z=Y=>{d||(Y.preventDefault(),Y.stopPropagation(),u(!1),Y.dataTransfer.files&&Y.dataTransfer.files.length>0&&(m(Array.from(Y.dataTransfer.files)),Y.dataTransfer.clearData()))},B=Y=>{const W=i.find(ie=>ie.id===Y);W&&URL.revokeObjectURL(W.preview),o(ie=>ie.filter(de=>de.id!==Y))},ee=()=>{i.length>0&&!e&&(n(i.map(Y=>Y.file)),o([]))};return A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",onDragEnter:S,onDragLeave:R,onDragOver:L,onDrop:z,children:[A.jsx("h2",{className:"text-2xl font-serif font-bold mb-6 text-gold",children:"Ajouter  ma garde-robe"}),A.jsxs("div",{onClick:T,className:`relative bg-snow dark:bg-onyx rounded-lg p-12 text-center transition-all duration-300 ring-1 ring-dashed ring-black/20 dark:ring-white/20 ${e?"cursor-default":"cursor-pointer hover:ring-gold dark:hover:ring-gold"}`,children:[A.jsx("input",{type:"file",ref:t,onChange:v,className:"hidden",accept:"image/png, image/jpeg, image/webp",multiple:!0,disabled:e}),A.jsx("div",{className:"flex flex-col items-center justify-center min-h-[8rem]",children:e?A.jsxs(A.Fragment,{children:[A.jsx(M6,{}),A.jsx("p",{className:"mt-4 text-sm font-medium text-gray-500 dark:text-gray-400 tracking-wide",children:"Analyse en cours..."})]}):A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:A.jsx(pS,{})}),A.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:d?"Appuyez pour ajouter des photos":"Glissez-dposez vos photos"}),A.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["ou ",A.jsx("span",{className:"text-gold font-medium",children:"cliquez pour slectionner"})]})]})}),a&&!d&&A.jsxs("div",{className:"absolute inset-0 bg-gold/90 backdrop-blur-sm rounded-lg flex flex-col items-center justify-center transition-opacity",children:[A.jsx("div",{className:"text-black transform-gpu scale-110",children:A.jsx(pS,{})}),A.jsx("p",{className:"mt-2 font-bold text-lg text-black",children:"Dposez pour ajouter"})]})]}),i.length>0&&!e&&A.jsxs("div",{className:"mt-8",children:[A.jsx("h3",{className:"font-semibold mb-4 text-gray-600 dark:text-gray-300",children:"Prts pour l'analyse :"}),A.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 mb-6",children:i.map(Y=>A.jsxs("div",{className:"relative group aspect-square",children:[A.jsx("img",{src:Y.preview,alt:Y.file.name,className:"w-full h-full object-cover rounded-md shadow-md"}),A.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity rounded-md"}),A.jsx("button",{onClick:()=>B(Y.id),className:"absolute -top-2 -right-2 p-1 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white opacity-0 group-hover:opacity-100 transition-all hover:bg-red-500 hover:scale-110 focus:opacity-100","aria-label":"Supprimer",children:A.jsx(kI,{})})]},Y.id))}),A.jsxs("button",{onClick:ee,disabled:e||i.length===0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[A.jsx(Lg,{}),"Analyser les ",i.length," article(s)"]})]})]})},F6=({imageSrc:n,analysis:e,onClick:t,onRemove:i,isSelected:o,isSet:a})=>A.jsxs("div",{onClick:t,className:"group relative aspect-square bg-raisin-black rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 cursor-pointer",children:[A.jsx("img",{src:n,alt:e,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"}),A.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${o?"ring-4 ring-gold":"ring-2 ring-transparent"} rounded-lg`}),A.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),a&&!o&&A.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white",children:A.jsx(Rf,{})}),o&&A.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-gold rounded-full text-onyx",children:A.jsx(UI,{})}),A.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:A.jsx("p",{className:"text-white text-sm font-medium line-clamp-2",children:e})}),A.jsx("button",{onClick:i,className:"absolute top-2 right-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-500 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-red-500","aria-label":"Supprimer",children:A.jsx(kI,{})})]}),z6={Hauts:{color:"Toutes",material:"Toutes"},Bas:{color:"Toutes",material:"Toutes"},Chaussures:{color:"Toutes",material:"Toutes"},Accessoires:{color:"Toutes",material:"Toutes"}},H6=({clothingItems:n,clothingSets:e=[],onItemClick:t,onDeleteItem:i,onCreateSet:o})=>{const[a,u]=ge.useState("Hauts"),[d,p]=ge.useState(z6),[m,v]=ge.useState(!1),[T,S]=ge.useState(new Set),R=ge.useMemo(()=>e||[],[e]),L=ge.useMemo(()=>new Set(R.flatMap(P=>P.itemIds||[])),[R]),z=n.length,B=[{name:"Hauts",icon:D6},{name:"Bas",icon:k6},{name:"Chaussures",icon:P6},{name:"Accessoires",icon:V6}],ee=P=>{m?S(k=>{const M=new Set(k);return M.has(P.id)?M.delete(P.id):M.add(P.id),M}):t(P)},Y=(P,k)=>{P.stopPropagation(),T.has(k)&&S(M=>{const We=new Set(M);return We.delete(k),We}),i(k)},W=ge.useMemo(()=>n.filter(P=>{if(!(P.category===a))return!1;const M=a?d[a]:{color:"Toutes",material:"Toutes"},We=M.color==="Toutes"||P.color===M.color,we=M.material==="Toutes"||P.material===M.material;return We&&we}),[n,a,d]),ie=ge.useMemo(()=>{if(!a)return[];const P=n.filter(k=>k.category===a).map(k=>k.color);return["Toutes",...Array.from(new Set(P))]},[n,a]),de=ge.useMemo(()=>{if(!a)return[];const P=n.filter(k=>k.category===a).map(k=>k.material);return["Toutes",...Array.from(new Set(P))]},[n,a]),ue=P=>{a&&p(k=>({...k,[a]:{...k[a],color:P}}))},D=P=>{a&&p(k=>({...k,[a]:{...k[a],material:P}}))},N=P=>{u(a===P?null:P)},x=()=>{v(!m),S(new Set)},V=()=>{if(T.size<2){alert("Veuillez slectionner au moins 2 articles pour crer un ensemble.");return}const P=window.prompt("Donnez un nom  cet ensemble :");P&&(o(P,Array.from(T)),x())};return z===0?A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-8 text-center",children:[A.jsx(mS,{className:"w-20 h-20 mx-auto text-gray-400 dark:text-gray-600 mb-4"}),A.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-700 dark:text-gray-300",children:"Votre garde-robe est vide"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Ajoutez vos premiers vtements pour commencer  crer vos tenues !"})]}):A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",children:[A.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-8",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx(mS,{className:"w-8 h-8 text-gold"}),A.jsxs("div",{children:[A.jsxs("h2",{className:"text-3xl font-serif font-bold tracking-tight",children:[A.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),A.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[z," vtement",z>1?"s":""]})]})]}),m?A.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[A.jsx("button",{onClick:x,className:"flex-shrink-0 px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors text-sm font-medium",children:"Annuler"}),A.jsxs("button",{onClick:V,disabled:T.size<2,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 text-sm disabled:opacity-50",children:["Valider (",T.size,")"]})]}):A.jsxs("button",{onClick:x,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300 text-sm",children:[A.jsx(Rf,{}),"Crer un ensemble"]})]}),m&&A.jsxs("div",{className:"bg-gold/10 border border-gold/30 text-gold-dark dark:text-gold p-4 rounded-lg mb-6 text-center",children:[A.jsx("p",{className:"font-semibold",children:"Mode Cration d'Ensemble"}),A.jsx("p",{className:"text-sm",children:"Slectionnez les articles que vous souhaitez lier."})]}),A.jsx("div",{className:"space-y-6",children:B.map(({name:P,icon:k})=>{const M=n.filter(we=>we.category===P),We=a===P;return A.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-lg overflow-hidden",children:[A.jsxs("button",{onClick:()=>N(P),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900/50 hover:bg-gray-100 dark:hover:bg-gray-900 transition-colors",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx(k,{className:"w-5 h-5 text-gold"}),A.jsx("span",{className:"font-semibold text-lg",children:P}),A.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",M.length,")"]})]}),A.jsx(U6,{className:`w-5 h-5 transition-transform ${We?"rotate-180":""}`})]}),We&&A.jsxs("div",{className:"p-6 space-y-6",children:[A.jsxs("div",{className:"flex flex-wrap gap-4",children:[A.jsxs("div",{className:"flex-1 min-w-[200px]",children:[A.jsx("label",{className:"block text-sm font-medium mb-2",children:"Couleur"}),A.jsx("select",{value:d[P].color,onChange:we=>ue(we.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:ie.map(we=>A.jsx("option",{value:we,children:we},we))})]}),A.jsxs("div",{className:"flex-1 min-w-[200px]",children:[A.jsx("label",{className:"block text-sm font-medium mb-2",children:"Matire"}),A.jsx("select",{value:d[P].material,onChange:we=>D(we.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:de.map(we=>A.jsx("option",{value:we,children:we},we))})]})]}),W.length>0?A.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:W.map(we=>A.jsx(F6,{imageSrc:we.imageSrc,analysis:we.analysis,onClick:()=>ee(we),onRemove:$=>Y($,we.id),isSelected:T.has(we.id),isSet:L.has(we.id)&&!T.has(we.id)},we.id))}):A.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"Aucun vtement ne correspond aux filtres slectionns."})]})]},P)})})]})},LI=({clothingItems:n,clothingSets:e,onGenerate:t,isGenerating:i,weatherInfo:o,weatherError:a})=>{const[u,d]=ru.useState(""),p=v=>{v.preventDefault(),t(u||"Casual")},m=["Casual","Soire chic","Travail (formel)"];return A.jsxs("div",{children:[A.jsx("h2",{className:"text-2xl font-serif font-bold text-center mb-6 text-gold",children:"Crateur de Tenues"}),A.jsxs("div",{className:"text-center mb-6 p-3 rounded-lg bg-snow dark:bg-onyx border border-black/10 dark:border-white/10",children:[o&&A.jsxs("p",{className:"text-sm font-medium text-blue-500 dark:text-blue-400",children:["Mto : ",o," "]}),a&&A.jsx("p",{className:"text-sm font-medium text-red-500",children:a}),!o&&!a&&A.jsx("p",{className:"text-sm font-medium text-gray-400 animate-pulse",children:"Rcupration de la mto..."})]}),A.jsx("form",{onSubmit:p,children:A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"occasion",className:"block text-sm font-medium text-center text-gray-500 dark:text-gray-400 mb-3",children:"Pour quelle occasion ?"}),A.jsx("div",{className:"flex justify-center gap-2 mb-4",children:m.map(v=>A.jsx("button",{type:"button",onClick:()=>d(v),className:`px-4 py-1.5 rounded-full text-sm font-semibold transition-colors duration-200 ${u===v?"bg-gold text-onyx":"bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 hover:border-gold dark:hover:border-gold text-gray-700 dark:text-gray-300"}`,disabled:i,children:v},v))}),A.jsx("input",{id:"occasion",type:"text",value:u,onChange:v=>d(v.target.value),placeholder:"Ou dcrivez... (ex: Brunch dcontract)",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i})]}),A.jsxs("button",{type:"submit",disabled:i,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[A.jsx(Lg,{}),i?"Gnration...":"Gnrer des Tenues"]})]})})]})},OI=({outfits:n,allClothingItems:e})=>{const[t,i]=ge.useState(null);ge.useEffect(()=>{if(!t)return;const a=u=>{u.key==="Escape"&&i(null)};return window.addEventListener("keydown",a),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",a),document.body.style.overflow="auto"}},[t]);const o=a=>{const u=a.toLowerCase(),d=new Set(u.split(/\s+/));if(e.length===0)return null;const p=e.find(T=>T.analysis.toLowerCase()===u);if(p)return p.imageSrc;const m=e.map(T=>{const S=new Set(T.analysis.toLowerCase().split(/\s+/)),R=new Set([...S].filter(B=>d.has(B))),L=new Set([...S,...d]),z=R.size/L.size;return{item:T,score:z}});m.sort((T,S)=>S.score-T.score);const v=m[0];return v.score===0?null:v.item.imageSrc};return A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"mt-10 space-y-8",children:n.map((a,u)=>A.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5 transition-all duration-300 hover:shadow-lg hover:border-gold/50",children:[A.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:a.titre}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:a.description}),A.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:a.vetements.map((d,p)=>{const m=o(d);return A.jsx("button",{onClick:()=>m&&i(m),className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden transition-transform duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx disabled:cursor-default disabled:hover:scale-100",disabled:!m,"aria-label":`Agrandir l'image de : ${d}`,children:m?A.jsx("img",{src:m,alt:d,className:"w-full h-full object-cover"}):A.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:A.jsx(PI,{})})},p)})}),A.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:a.vetements.map((d,p)=>A.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:d},p))})]},u))}),t&&A.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:()=>i(null),role:"dialog","aria-modal":"true",children:A.jsxs("div",{className:"relative",onClick:a=>a.stopPropagation(),children:[A.jsx("img",{src:t,alt:"Vue agrandie",className:"max-w-[90vw] max-h-[85vh] object-contain rounded-lg shadow-2xl"}),A.jsx("button",{onClick:()=>i(null),className:"absolute -top-3 -right-3 p-1.5 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white hover:bg-red-500 hover:scale-110 transition-all focus:outline-none focus:ring-2 focus:ring-gold","aria-label":"Fermer",children:A.jsx(VI,{})})]})})]})},G6=({item:n,clothingSets:e,onClose:t,onUpdate:i,onGenerateFrom:o,onRemoveSet:a})=>{const[u,d]=ge.useState({analysis:n.analysis,category:n.category,color:n.color,material:n.material}),p=e.find(T=>T.itemIds.includes(n.id));ge.useEffect(()=>{d({analysis:n.analysis,category:n.category,color:n.color,material:n.material})},[n]),ge.useEffect(()=>{const T=S=>{S.key==="Escape"&&t()};return document.body.style.overflow="hidden",window.addEventListener("keydown",T),()=>{document.body.style.overflow="auto",window.removeEventListener("keydown",T)}},[t]);const m=T=>{const{name:S,value:R}=T.target;d(L=>({...L,[S]:R}))},v=T=>{T.preventDefault(),i({...n,...u})};return A.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:t,role:"dialog","aria-modal":"true","aria-labelledby":"clothing-item-title",children:A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col overflow-hidden",onClick:T=>T.stopPropagation(),children:[A.jsxs("div",{className:"relative",children:[A.jsx("img",{src:n.imageSrc,alt:n.analysis,className:"w-full h-auto max-h-[50vh] object-cover"}),A.jsx("button",{onClick:t,className:"absolute top-3 right-3 p-1.5 bg-black/40 backdrop-blur-sm rounded-full text-white hover:bg-black/60 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-raisin-black","aria-label":"Fermer la vue dtaille",children:A.jsx(VI,{})})]}),A.jsxs("form",{onSubmit:v,className:"p-6 overflow-y-auto flex-grow flex flex-col",children:[A.jsxs("div",{className:"space-y-4 flex-grow",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"analysis",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Description"}),A.jsx("textarea",{id:"analysis",name:"analysis",value:u.analysis,onChange:m,rows:3,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Catgorie"}),A.jsx("select",{id:"category",name:"category",value:u.category,onChange:m,className:"mt-1 w-full appearance-none px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow",children:["Hauts","Bas","Chaussures","Accessoires"].map(T=>A.jsx("option",{value:T,children:T},T))})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Couleur"}),A.jsx("input",{type:"text",id:"color",name:"color",value:u.color,onChange:m,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"material",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Matire"}),A.jsx("input",{type:"text",id:"material",name:"material",value:u.material,onChange:m,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]})]}),p&&A.jsxs("div",{className:"bg-gold/10 dark:bg-gold/20 p-3 rounded-lg flex items-center justify-between gap-4",children:[A.jsxs("div",{children:[A.jsx("p",{className:"text-xs font-semibold text-gold uppercase tracking-wider",children:"Fait partie de l'ensemble"}),A.jsx("p",{className:"font-medium text-onyx dark:text-snow truncate",title:p.name,children:p.name})]}),A.jsxs("button",{type:"button",onClick:()=>{a(p.id),t()},className:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white dark:bg-onyx text-rose-500 border border-rose-500/50 rounded-md hover:bg-rose-500 hover:text-white transition-colors",title:"Dissocier l'ensemble",children:[A.jsx(L6,{}),A.jsx("span",{children:"Dissocier"})]})]})]}),A.jsxs("div",{className:"mt-6 pt-4 border-t border-black/10 dark:border-white/10 flex flex-col sm:flex-row gap-3",children:[A.jsxs("button",{type:"button",onClick:()=>o(n),className:"w-full flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300",children:[A.jsx(Lg,{}),"Crer une tenue avec cet article"]}),A.jsx("button",{type:"submit",className:"w-full sm:w-auto px-6 py-2.5 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300",children:"Enregistrer"})]})]})]})})},qI=({clothingItems:n,clothingSets:e,onGeneratePlan:t,isGenerating:i})=>{const[o,a]=ge.useState(3),[u,d]=ge.useState(""),p=m=>{m.preventDefault();const v=u||"";v.trim()&&o>0&&t(o,v)};return A.jsxs("div",{children:[A.jsx("h2",{className:"text-2xl font-serif font-bold text-center mb-6 text-gold",children:"Planificateur de Valise"}),A.jsxs("form",{onSubmit:p,className:"space-y-6",children:[A.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 items-end",children:[A.jsxs("div",{className:"sm:col-span-1",children:[A.jsx("label",{htmlFor:"days",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Dure (jours)"}),A.jsx("input",{id:"days",type:"number",value:o,onChange:m=>a(parseInt(m.target.value,10)||1),min:"1",max:"30",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i,required:!0})]}),A.jsxs("div",{className:"sm:col-span-2",children:[A.jsx("label",{htmlFor:"vacation-context",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Destination / Mto"}),A.jsx("input",{id:"vacation-context",type:"text",value:u,onChange:m=>d(m.target.value),placeholder:"Ex: Weekend  Rome, temps doux",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center sm:text-left",disabled:i,required:!0})]})]}),A.jsxs("button",{type:"submit",disabled:i||!(u||"").trim()||o<=0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[A.jsx(O6,{}),i?"Prparation...":"Gnrer la valise"]})]})]})},BI=({plan:n,allClothingItems:e})=>{const t=i=>{const o=i.toLowerCase(),a=e.find(d=>d.analysis.toLowerCase()===o);if(a)return a.imageSrc;const u=e.map(d=>{const p=new Set(d.analysis.toLowerCase().split(/\s+/)),m=o.split(/\s+/),T=m.filter(S=>p.has(S)).length/m.length;return{item:d,score:T}}).filter(d=>d.score>.5).sort((d,p)=>p.score-d.score)[0];return u?u.item.imageSrc:null};return A.jsx("div",{className:"mt-10",children:A.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5",children:[A.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:n.titre}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:n.resume}),A.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:n.valise.map((i,o)=>{const a=t(i);return A.jsxs("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden relative group",title:i,children:[a?A.jsx("img",{src:a,alt:i,className:"w-full h-full object-cover"}):A.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:A.jsx(PI,{})}),A.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center p-2",children:A.jsx("p",{className:"text-white text-xs text-center line-clamp-3",children:i})})]},o)})}),A.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:n.valise.map((i,o)=>A.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:i},o))})]})})},J6=({onFilesSelected:n,isAnalyzing:e})=>{const[t,i]=ge.useState(!1),o=a=>{const u=Array.from(a.target.files||[]);u.length>0&&(n(u),i(!1))};return A.jsxs(A.Fragment,{children:[A.jsx("button",{onClick:()=>i(!0),disabled:e,className:"md:hidden fixed bottom-24 right-6 w-16 h-16 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-full shadow-2xl hover:shadow-gold/50 transition-all duration-300 flex items-center justify-center z-40 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95","aria-label":"Ajouter un vtement",children:e?A.jsxs("svg",{className:"animate-spin h-8 w-8",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):A.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})}),t&&A.jsx("div",{className:"md:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end",onClick:()=>i(!1),children:A.jsxs("div",{className:"bg-white dark:bg-raisin-black w-full rounded-t-3xl p-6 pb-8 animate-slide-up",onClick:a=>a.stopPropagation(),children:[A.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mb-6"}),A.jsx("h3",{className:"text-xl font-bold mb-6 text-center",children:"Ajouter un vtement"}),A.jsxs("div",{className:"space-y-3",children:[A.jsxs("label",{className:"block",children:[A.jsx("input",{type:"file",accept:"image/*",capture:"environment",multiple:!0,onChange:o,className:"hidden"}),A.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gradient-to-r from-gold/10 to-gold-dark/10 hover:from-gold/20 hover:to-gold-dark/20 border-2 border-gold/30 rounded-xl transition-all cursor-pointer active:scale-98",children:[A.jsx("div",{className:"w-12 h-12 bg-gold rounded-full flex items-center justify-center flex-shrink-0",children:A.jsxs("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("p",{className:"font-semibold",children:"Appareil Photo"}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Prendre une photo"})]})]})]}),A.jsxs("label",{className:"block",children:[A.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:o,className:"hidden"}),A.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 rounded-xl transition-all cursor-pointer active:scale-98",children:[A.jsx("div",{className:"w-12 h-12 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center flex-shrink-0",children:A.jsx("svg",{className:"w-6 h-6 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("p",{className:"font-semibold",children:"Galerie"}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Choisir depuis vos photos"})]})]})]})]}),A.jsx("button",{onClick:()=>i(!1),className:"w-full mt-4 py-3 text-gray-500 dark:text-gray-400 font-medium",children:"Annuler"})]})})]})},Y6=({onAnalyzeWardrobe:n,onScrollToOutfits:e,onScrollToVacation:t,onStartSetCreation:i,isAnalyzingWardrobe:o,clothingCount:a})=>A.jsxs("div",{className:"space-y-4 pb-24",children:[A.jsxs("div",{className:"text-center py-6",children:[A.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:[A.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),A.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[a," vtement",a>1?"s":""," dans votre collection"]})]}),A.jsxs("div",{className:"space-y-3 px-4",children:[a>=3&&A.jsx("button",{onClick:n,disabled:o,className:"w-full bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-2xl p-5 text-left transition-all active:scale-98 disabled:opacity-50",children:A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:"w-12 h-12 bg-gold rounded-xl flex items-center justify-center flex-shrink-0",children:o?A.jsxs("svg",{className:"animate-spin h-6 w-6 text-onyx",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):A.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("h3",{className:"text-lg font-bold mb-1",children:" Analyser ma garde-robe"}),A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour plus de polyvalence"})]})]})}),A.jsx("button",{onClick:e,className:"w-full bg-gradient-to-r from-purple-500/10 to-pink-500/10 border-2 border-purple-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center flex-shrink-0",children:A.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("h3",{className:"text-lg font-bold mb-1",children:" Crateur de Tenues"}),A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Gnrez des looks personnaliss avec l'IA"})]})]})}),A.jsx("button",{onClick:t,className:"w-full bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border-2 border-blue-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center flex-shrink-0",children:A.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("h3",{className:"text-lg font-bold mb-1",children:" Planificateur de Valise"}),A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Prparez votre valise optimale pour votre voyage"})]})]})})]}),A.jsx("div",{className:"px-4 pt-6",children:A.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-2xl p-4",children:[A.jsx("h4",{className:"font-semibold mb-3 text-sm text-gray-600 dark:text-gray-400",children:"Aperu rapide"}),A.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center",children:[A.jsx("p",{className:"text-2xl font-bold text-gold",children:a}),A.jsx("p",{className:"text-xs text-gray-500",children:"Vtements"})]}),A.jsxs("button",{onClick:i,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[A.jsx("div",{className:"text-green-500",children:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),A.jsx("p",{className:"text-xs text-gray-500 mt-1.5 font-medium",children:"Crer un ensemble"})]})]})]})})]}),K6=({activeTab:n,onTabChange:e,counts:t})=>{const i=[{id:"home",label:"Home",icon:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),count:null},{id:"hauts",label:"Hauts",icon:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),count:t.hauts},{id:"bas",label:"Bas",icon:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),count:t.bas},{id:"chaussures",label:"Chaussures",icon:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5"})}),count:t.chaussures},{id:"accessoires",label:"Accessoires",icon:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),count:t.accessoires}];return A.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-raisin-black border-t border-black/10 dark:border-white/10 z-30 pb-8",children:A.jsx("div",{className:"flex justify-around items-center h-16",children:i.map(o=>{const a=n===o.id;return A.jsxs("button",{onClick:()=>e(o.id),className:`flex flex-col items-center justify-center gap-1 px-3 py-2 transition-all flex-1 ${a?"text-gold":"text-gray-500 dark:text-gray-400"}`,children:[A.jsxs("div",{className:"relative",children:[o.icon,o.count!==null&&o.count>0&&A.jsx("span",{className:`absolute -top-1 -right-1 text-[10px] font-bold px-1.5 py-0.5 rounded-full ${a?"bg-gold text-onyx":"bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300"}`,children:o.count})]}),A.jsx("span",{className:`text-xs font-medium ${a?"font-bold":""}`,children:o.label})]},o.id)})})})},$6=({analysis:n,onClose:e})=>{if(!n)return null;const t={high:"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20",medium:"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 border-yellow-500/20",low:"bg-green-500/10 text-green-600 dark:text-green-400 border-green-500/20"},i={high:"Priorit haute",medium:"Priorit moyenne",low:"Bonne ide"};return A.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[A.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-gold to-gold-dark p-6 rounded-t-2xl",children:A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsx("h2",{className:"text-2xl font-serif font-bold text-onyx",children:" Suggestions d'Achats"}),A.jsx("button",{onClick:e,className:"p-2 hover:bg-black/10 rounded-full transition",children:A.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),A.jsxs("div",{className:"p-6 space-y-6",children:[A.jsxs("div",{className:"bg-gold/5 border border-gold/20 rounded-xl p-4",children:[A.jsx("h3",{className:"font-semibold text-lg mb-2",children:" Analyse de votre garde-robe"}),A.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:n.summary})]}),A.jsxs("div",{children:[A.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[A.jsx("span",{className:"text-green-500",children:""})," Points forts"]}),A.jsx("div",{className:"grid gap-2",children:n.strengths.map((o,a)=>A.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[A.jsx("span",{className:"text-green-500 mt-0.5",children:""}),A.jsx("span",{children:o})]},a))})]}),A.jsxs("div",{children:[A.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[A.jsx("span",{className:"text-orange-500",children:""})," Opportunits d'amlioration"]}),A.jsx("div",{className:"grid gap-2",children:n.gaps.map((o,a)=>A.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[A.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),A.jsx("span",{children:o})]},a))})]}),A.jsxs("div",{children:[A.jsxs("h3",{className:"font-semibold text-xl mb-4 flex items-center gap-2",children:[A.jsx("span",{children:""})," Pices recommandes"]}),A.jsx("div",{className:"grid gap-4",children:n.suggestions.map((o,a)=>A.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-xl p-5 hover:shadow-lg transition-shadow",children:[A.jsxs("div",{className:"flex justify-between items-start mb-3",children:[A.jsxs("div",{children:[A.jsx("h4",{className:"font-bold text-lg",children:o.description}),A.jsx("p",{className:"text-sm text-gray-500",children:o.category})]}),A.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${t[o.priority]}`,children:i[o.priority]})]}),A.jsxs("p",{className:"text-sm mb-3 text-gray-700 dark:text-gray-300",children:[A.jsx("span",{className:"font-semibold",children:"Pourquoi ?"})," ",o.reason]}),o.estimatedPrice&&A.jsxs("div",{className:"flex items-center gap-2 text-sm text-gold font-semibold",children:[A.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),o.estimatedPrice]})]},a))})]})]})]})})},Q6=({clothingItems:n,clothingSets:e,onGenerate:t,isGenerating:i,suggestedOutfits:o,onClose:a,weatherInfo:u,weatherError:d})=>A.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end md:hidden",onClick:a,children:A.jsxs("div",{className:"bg-white dark:bg-raisin-black w-full max-h-[85vh] rounded-t-3xl overflow-hidden animate-slide-up",onClick:p=>p.stopPropagation(),children:[A.jsxs("div",{className:"sticky top-0 bg-white dark:bg-raisin-black border-b border-black/10 dark:border-white/10 p-4 pb-3",children:[A.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mb-3"}),A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx("h2",{className:"text-xl font-bold",children:" Crateur de Tenues"}),A.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),A.jsxs("div",{className:"overflow-y-auto max-h-[calc(85vh-80px)] p-6 space-y-6",children:[A.jsx(LI,{clothingItems:n,clothingSets:e,onGenerate:t,isGenerating:i,weatherInfo:u,weatherError:d}),i&&A.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[A.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),A.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"L'IA compose vos tenues..."})]}),o.length>0&&A.jsx(OI,{outfits:o,allClothingItems:n})]})]})}),W6=({clothingItems:n,clothingSets:e,onGeneratePlan:t,isGenerating:i,vacationPlan:o,onCreateSet:a,onClose:u})=>A.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end md:hidden",onClick:u,children:A.jsxs("div",{className:"bg-white dark:bg-raisin-black w-full max-h-[85vh] rounded-t-3xl overflow-hidden animate-slide-up",onClick:d=>d.stopPropagation(),children:[A.jsxs("div",{className:"sticky top-0 bg-white dark:bg-raisin-black border-b border-black/10 dark:border-white/10 p-4 pb-3",children:[A.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mb-3"}),A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx("h2",{className:"text-xl font-bold",children:" Planificateur de Valise"}),A.jsx("button",{onClick:u,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),A.jsxs("div",{className:"overflow-y-auto max-h-[calc(85vh-80px)] p-6 space-y-6",children:[A.jsx(qI,{clothingItems:n,clothingSets:e,onGeneratePlan:t,isGenerating:i}),i&&A.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[A.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),A.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"Prparation de votre valise..."})]}),o&&A.jsx(BI,{plan:o,allClothingItems:n,onCreateSet:a})]})]})}),j6=({clothingItems:n,clothingSets:e,onClose:t,onCreateSet:i})=>{const[o,a]=ge.useState(new Set),u=new Set(e.flatMap(T=>T.itemIds)),p=n.filter(T=>!u.has(T.id)).reduce((T,S)=>(T[S.category]||(T[S.category]=[]),T[S.category].push(S),T),{}),m=T=>{a(S=>{const R=new Set(S);return R.has(T)?R.delete(T):R.add(T),R})},v=()=>{if(o.size<2){alert("Veuillez slectionner au moins 2 articles.");return}const T=window.prompt("Donnez un nom  cet ensemble :");T&&i(T,Array.from(o))};return A.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end md:hidden",onClick:t,children:A.jsxs("div",{className:"bg-white dark:bg-raisin-black w-full max-h-[85vh] rounded-t-3xl overflow-hidden animate-slide-up flex flex-col",onClick:T=>T.stopPropagation(),children:[A.jsxs("div",{className:"sticky top-0 bg-white dark:bg-raisin-black border-b border-black/10 dark:border-white/10 p-4 pb-3 z-10",children:[A.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mb-3"}),A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx("h2",{className:"text-xl font-bold",children:" Crer un ensemble"}),A.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),A.jsxs("div",{className:"overflow-y-auto flex-1 p-4",children:[A.jsx("p",{className:"text-sm text-center text-gray-500 dark:text-gray-400 mb-4",children:"Slectionnez les articles que vous souhaitez lier (ex: une veste et son pantalon)."}),A.jsx("div",{className:"space-y-4",children:Object.keys(p).map(T=>p[T].length>0&&A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-lg mb-2",children:T}),A.jsx("div",{className:"grid grid-cols-3 gap-3",children:p[T].map(S=>{const R=o.has(S.id);return A.jsxs("button",{onClick:()=>m(S.id),className:"relative rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform border-2",style:{borderColor:R?"#D4AF37":"transparent"},children:[R&&A.jsx("div",{className:"absolute top-1 right-1 p-0.5 bg-gold rounded-full text-onyx z-10",children:A.jsx(UI,{})}),A.jsx("div",{className:"aspect-square",children:A.jsx("img",{src:S.imageSrc,alt:S.analysis,className:"w-full h-full object-cover"})}),A.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),A.jsx("p",{className:"absolute bottom-1 left-1 right-1 text-white text-xs font-medium line-clamp-2 p-1",children:S.analysis})]},S.id)})})]},T))})]}),o.size>0&&A.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10",children:A.jsxs("button",{onClick:v,disabled:o.size<2,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600",children:[A.jsx(Rf,{}),"Lier ",o.size," article",o.size>1?"s":""]})})]})})},X6=()=>{const[n,e]=ge.useState(null),[t,i]=ge.useState("dark"),[o,a]=ge.useState([]),[u,d]=ge.useState([]),[p,m]=ge.useState(null),[v,T]=ge.useState(!1),[S,R]=ge.useState(null),[L,z]=ge.useState([]),[B,ee]=ge.useState(!1),[Y,W]=ge.useState(null),[ie,de]=ge.useState(!1),[ue,D]=ge.useState(null),[N,x]=ge.useState(!1),[V,P]=ge.useState("home"),k=ru.useMemo(()=>o||[],[o]),M=ru.useMemo(()=>u||[],[u]),We=ru.useMemo(()=>new Set(M.flatMap(ce=>ce.itemIds||[])),[M]),[we,$]=ge.useState(!1),[ae,ve]=ge.useState(!1),[Je,Ye]=ge.useState(!1),[O,Z]=ge.useState(null),[oe,he]=ge.useState(null);ge.useEffect(()=>{const ce=ux(su,Ne=>{e(Ne)});return()=>ce()},[]),ge.useEffect(()=>{(async()=>{if(n)try{const Ne=await S6(n.uid);a(Ne);const Ke=await I6(n.uid);d(Ke)}catch(Ne){console.error("Erreur lors du chargement des donnes:",Ne)}else a([]),d([])})()},[n]),ge.useEffect(()=>{t==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]),ge.useEffect(()=>{const ce=async Ne=>{const Ke=Ne.coords.latitude,Qe=Ne.coords.longitude,Dn=DI.openWeatherApiKey,st=`https://api.openweathermap.org/data/2.5/weather?lat=${Ke}&lon=${Qe}&appid=${Dn}&units=metric&lang=fr`;try{const rt=await fetch(st);if(!rt.ok)throw new Error("Impossible de rcuprer la mto.");const ht=await rt.json(),ci=`${Math.round(ht.main.temp)}C, ${ht.weather[0].description},  ${ht.name}`;Z(ci),he(null)}catch(rt){console.error(rt),he("Mto indisponible.")}};navigator.geolocation?navigator.geolocation.getCurrentPosition(ce,Ne=>{console.error("Erreur de golocalisation:",Ne.message),he("Activez la golocalisation pour la mto.")}):he("Golocalisation non supporte.")},[]);const Ae=()=>{i(ce=>ce==="light"?"dark":"light")},Me=ge.useCallback(async ce=>{if(!(ce.length===0||!n)){T(!0),R(null);try{const Ne=ce.map(ht=>new Promise((ci,kn)=>{const Kn=new FileReader;Kn.onload=()=>ci(Kn.result),Kn.onerror=kn,Kn.readAsDataURL(ht)})),Ke=await Promise.all(Ne),Qe=Ke.map(ht=>ht.split(",")[1]),Dn=await y6(Qe),st=Math.min(Dn.length,ce.length),rt=[];for(let ht=0;ht<st;ht++){const ci=Dn[ht];try{const kn=await A6(n.uid,ci),Kn=await b6(n.uid,Ke[ht],kn);console.log(" Image uploaded to Storage:",Kn),await hS(n.uid,kn,{imageSrc:Kn}),rt.push({...ci,id:kn,imageSrc:Kn})}catch(kn){console.error(` chec de cration/upload pour ${ce[ht].name}.`,kn),R(`Erreur d'upload pour ${ce[ht].name}. L'article n'a pas t ajout.`)}}Dn.length!==ce.length&&R(`L'IA a analys ${rt.length} sur ${ce.length} image(s).`),a(ht=>[...ht,...rt])}catch(Ne){console.error("Erreur lors de l'analyse par lot des images:",Ne),R("Une erreur est survenue lors de l'analyse des images. Veuillez ressayer.")}finally{T(!1)}}},[n]),Ve=ge.useCallback(async(ce,Ne)=>{if(k.length===0){R("Veuillez d'abord ajouter des vtements  votre garde-robe.");return}ee(!0),R(null);const Ke=O?`Mto actuelle : ${O}. Occasion : ${ce}`:`Occasion : ${ce}`;console.log("Contexte complet envoy  l'IA:",Ke);try{const Qe=await v6(k,M,Ke,Ne);z(Qe)}catch(Qe){console.error("Erreur lors de la gnration des tenues:",Qe),Qe instanceof Error?Qe.message.includes("malforme")?R("L'IA a renvoy une rponse inattendue. Veuillez ressayer."):Qe.message.toLowerCase().includes("failed to fetch")?R("Erreur de rseau. Vrifiez votre connexion et ressayez."):R("L'IA est peut-tre surcharge. Veuillez ressayer dans un moment."):R("Une erreur inconnue est survenue. Veuillez ressayer.")}finally{ee(!1)}},[k,M,O]),kt=ge.useCallback(async(ce,Ne)=>{if(k.length===0){R("Veuillez d'abord ajouter des vtements  votre garde-robe.");return}de(!0),R(null);try{const Ke=await E6(k,M,ce,Ne);W(Ke)}catch(Ke){console.error("Erreur lors de la gnration du plan de valise:",Ke),Ke instanceof Error?Ke.message.includes("malforme")?R("L'IA a renvoy une rponse inattendue. Veuillez ressayer."):Ke.message.toLowerCase().includes("failed to fetch")?R("Erreur de rseau. Vrifiez votre connexion et ressayez."):R("L'IA est peut-tre surcharge. Veuillez ressayer dans un moment."):R("Une erreur inconnue est survenue. Veuillez ressayer.")}finally{de(!1)}},[k,M]),ft=ge.useCallback(async()=>{if(k.length<3){R("Ajoutez au moins 3 vtements pour une analyse pertinente.");return}x(!0),R(null);try{const ce=await T6(k,M);D(ce)}catch(ce){console.error("Erreur lors de l'analyse de la garde-robe:",ce),ce instanceof Error?ce.message.includes("malforme")?R("L'IA a renvoy une rponse inattendue. Veuillez ressayer."):ce.message.toLowerCase().includes("failed to fetch")?R("Erreur de rseau. Vrifiez votre connexion et ressayez."):R("L'IA est peut-tre surcharge. Veuillez ressayer dans un moment."):R("Une erreur inconnue est survenue. Veuillez ressayer.")}finally{x(!1)}},[k,M]),Jn=ge.useCallback(()=>{$(!0)},[]),ui=ge.useCallback(()=>{ve(!0)},[]),Si=ce=>{m(ce)},bs=()=>{m(null)},Mn=async ce=>{if(n)try{await C6(n.uid,ce),a(Ne=>Ne.filter(Ke=>Ke.id!==ce)),d(Ne=>Ne.map(Ke=>({...Ke,itemIds:Ke.itemIds.filter(Qe=>Qe!==ce)}))),m(null)}catch(Ne){console.error("Erreur lors de la suppression:",Ne),R("Impossible de supprimer l'article. Veuillez ressayer.")}},Ji=async ce=>{if(n)try{await hS(n.uid,ce.id,ce),a(Ne=>Ne.map(Ke=>Ke.id===ce.id?ce:Ke)),m(ce)}catch(Ne){console.error("Erreur lors de la mise  jour:",Ne),R("Impossible de mettre  jour l'article. Veuillez ressayer.")}},xs=ce=>{const Ne=`Focus sur l'article : ${ce.analysis}`;Ve(Ne,ce),m(null),window.innerWidth<768&&$(!0)},Jr=ge.useCallback(async(ce,Ne)=>{var Dn;if(!n)return;const Ke=((Dn=o.find(st=>st.id===Ne[0]))==null?void 0:Dn.imageSrc)||"",Qe={name:ce,itemIds:Ne,imageSrc:Ke};try{const st=await w6(n.uid,Qe);d(rt=>[...rt,{...Qe,id:st}])}catch(st){console.error("Erreur lors de la cration de l'ensemble:",st),R("Impossible de crer l'ensemble. Veuillez ressayer.")}},[o,n]),Lo=ge.useCallback(async ce=>{if(n)try{await R6(n.uid,ce),d(Ne=>Ne.filter(Ke=>Ke.id!==ce))}catch(Ne){console.error("Erreur lors de la suppression de l'ensemble:",Ne),R("Impossible de supprimer l'ensemble. Veuillez ressayer.")}},[n]),Ns={hauts:k.filter(ce=>ce.category==="Hauts").length,bas:k.filter(ce=>ce.category==="Bas").length,chaussures:k.filter(ce=>ce.category==="Chaussures").length,accessoires:k.filter(ce=>ce.category==="Accessoires").length},Yn=V==="home"?[]:k.filter(ce=>V==="hauts"?ce.category==="Hauts":V==="bas"?ce.category==="Bas":V==="chaussures"?ce.category==="Chaussures":V==="accessoires"?ce.category==="Accessoires":!1);return A.jsx("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow transition-colors duration-300",children:n?A.jsxs(A.Fragment,{children:[A.jsx(q6,{theme:t,toggleTheme:Ae,children:A.jsx(gS,{user:n})}),A.jsxs("main",{className:"container mx-auto px-4 lg:px-8 py-10",children:[S&&A.jsxs("div",{className:"bg-red-500/20 border border-red-500 text-red-300 px-4 py-3 rounded-lg relative mb-8",role:"alert",children:[A.jsx("strong",{className:"font-bold",children:"Erreur: "}),A.jsx("span",{className:"block sm:inline",children:S})]}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[A.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[k.length>=3&&A.jsxs("div",{className:"hidden md:block bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-xl p-4 md:p-6 flex flex-col md:flex-row items-start md:items-center gap-4 md:justify-between",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"text-xl font-bold mb-2",children:" Besoin d'inspiration ?"}),A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour rendre votre garde-robe plus polyvalente"})]}),A.jsx("button",{onClick:ft,disabled:N,className:"px-4 md:px-6 py-3 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm md:text-base flex-shrink-0",children:N?A.jsxs(A.Fragment,{children:[A.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Analyse..."]}):A.jsxs(A.Fragment,{children:[A.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Analyser ma garde-robe"]})})]}),A.jsx("div",{className:"hidden md:block",children:A.jsx(B6,{onAnalyze:Me,isAnalyzing:v})}),A.jsx("div",{className:"hidden md:block",children:A.jsx(H6,{clothingItems:k,clothingSets:M,onItemClick:Si,onDeleteItem:Mn,onCreateSet:Jr})}),A.jsxs("div",{className:"md:hidden",children:[V==="home"&&A.jsx(Y6,{onAnalyzeWardrobe:ft,onScrollToOutfits:Jn,onScrollToVacation:ui,onStartSetCreation:()=>Ye(!0),isAnalyzingWardrobe:N,clothingCount:k.length}),V!=="home"&&A.jsxs("div",{className:"pb-24",children:[A.jsxs("div",{className:"text-center py-6 px-4",children:[A.jsx("h2",{className:"text-2xl font-bold mb-2 capitalize",children:V}),A.jsxs("p",{className:"text-sm text-gray-500",children:[Yn.length," vtement",Yn.length>1?"s":""]})]}),Yn.length>0?A.jsx("div",{className:"grid grid-cols-2 gap-3 px-4",children:Yn.map(ce=>A.jsxs("div",{onClick:()=>Si(ce),className:"relative bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform",children:[We.has(ce.id)&&A.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:A.jsx(Rf,{})}),A.jsx("div",{className:"aspect-square",children:A.jsx("img",{src:ce.imageSrc,alt:ce.analysis,className:"w-full h-full object-cover"})}),A.jsxs("div",{className:"p-3",children:[A.jsx("p",{className:"text-sm font-medium line-clamp-2",children:ce.analysis}),A.jsx("p",{className:"text-xs text-gray-500 mt-1",children:ce.color})]})]},ce.id))}):A.jsx("div",{className:"text-center py-12 px-4",children:A.jsx("p",{className:"text-gray-500",children:"Aucun vtement dans cette catgorie"})})]})]})]}),A.jsxs("div",{className:"space-y-10 hidden md:block",children:[A.jsx("div",{id:"outfit-generator",children:A.jsx(LI,{clothingItems:k,clothingSets:M,onGenerate:Ve,isGenerating:B,weatherInfo:O,weatherError:oe})}),L.length>0&&A.jsx(OI,{outfits:L,allClothingItems:k}),A.jsx("div",{id:"vacation-planner",children:A.jsx(qI,{clothingItems:k,clothingSets:M,onGeneratePlan:kt,isGenerating:ie})}),Y&&A.jsx(BI,{plan:Y,allClothingItems:k})]})]}),p&&A.jsx(G6,{item:p,clothingSets:M,onClose:bs,onUpdate:Ji,onGenerateFrom:xs,onRemoveSet:Lo}),ue&&A.jsx($6,{analysis:ue,onClose:()=>D(null)}),A.jsx(J6,{onFilesSelected:Me,isAnalyzing:v}),A.jsx(K6,{activeTab:V,onTabChange:P,counts:Ns}),we&&A.jsx(Q6,{clothingItems:k,clothingSets:M,onGenerate:Ve,isGenerating:B,suggestedOutfits:L,onClose:()=>$(!1),weatherInfo:O,weatherError:oe}),ae&&A.jsx(W6,{clothingItems:k,clothingSets:M,onGeneratePlan:kt,isGenerating:ie,vacationPlan:Y,onCreateSet:Jr,onClose:()=>ve(!1)}),Je&&A.jsx(j6,{clothingItems:k,clothingSets:M,onClose:()=>Ye(!1),onCreateSet:(ce,Ne)=>{Jr(ce,Ne),Ye(!1)}})]})]}):A.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:A.jsx(gS,{user:n})})})},FI=document.getElementById("root");if(!FI)throw new Error("L'lment root est introuvable dans le DOM");const Z6=IR.createRoot(FI);Z6.render(A.jsx(ru.StrictMode,{children:A.jsx(X6,{})}));
