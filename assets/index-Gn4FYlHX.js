(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function f0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var $h={exports:{}},wl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fv;function LI(){if(fv)return wl;fv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,l){var c=null;if(l!==void 0&&(c=""+l),o.key!==void 0&&(c=""+o.key),"key"in o){l={};for(var d in o)d!=="key"&&(l[d]=o[d])}else l=o;return o=l.ref,{$$typeof:n,type:s,key:c,ref:o!==void 0?o:null,props:l}}return wl.Fragment=e,wl.jsx=t,wl.jsxs=t,wl}var dv;function OI(){return dv||(dv=1,$h.exports=LI()),$h.exports}var M=OI(),Xh={exports:{}},we={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hv;function qI(){if(hv)return we;hv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),A=Symbol.iterator;function b(U){return U===null||typeof U!="object"?null:(U=A&&U[A]||U["@@iterator"],typeof U=="function"?U:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,Q={};function se(U,ee,ae){this.props=U,this.context=ee,this.refs=Q,this.updater=ae||q}se.prototype.isReactComponent={},se.prototype.setState=function(U,ee){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,ee,"setState")},se.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function K(){}K.prototype=se.prototype;function W(U,ee,ae){this.props=U,this.context=ee,this.refs=Q,this.updater=ae||q}var oe=W.prototype=new K;oe.constructor=W,G(oe,se.prototype),oe.isPureReactComponent=!0;var de=Array.isArray;function ce(){}var x={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function N(U,ee,ae){var fe=ae.ref;return{$$typeof:n,type:U,key:ee,ref:fe!==void 0?fe:null,props:ae}}function P(U,ee){return N(U.type,ee,U.props)}function V(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function O(U){var ee={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(ae){return ee[ae]})}var D=/\/+/g;function st(U,ee){return typeof U=="object"&&U!==null&&U.key!=null?O(""+U.key):ee.toString(36)}function ct(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(ce,ce):(U.status="pending",U.then(function(ee){U.status==="pending"&&(U.status="fulfilled",U.value=ee)},function(ee){U.status==="pending"&&(U.status="rejected",U.reason=ee)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function F(U,ee,ae,fe,Se){var Me=typeof U;(Me==="undefined"||Me==="boolean")&&(U=null);var De=!1;if(U===null)De=!0;else switch(Me){case"bigint":case"string":case"number":De=!0;break;case"object":switch(U.$$typeof){case n:case e:De=!0;break;case v:return De=U._init,F(De(U._payload),ee,ae,fe,Se)}}if(De)return Se=Se(U),De=fe===""?"."+st(U,0):fe,de(Se)?(ae="",De!=null&&(ae=De.replace(D,"$&/")+"/"),F(Se,ee,ae,"",function(ti){return ti})):Se!=null&&(V(Se)&&(Se=P(Se,ae+(Se.key==null||U&&U.key===Se.key?"":(""+Se.key).replace(D,"$&/")+"/")+De)),ee.push(Se)),1;De=0;var Ft=fe===""?".":fe+":";if(de(U))for(var dt=0;dt<U.length;dt++)fe=U[dt],Me=Ft+st(fe,dt),De+=F(fe,ee,ae,Me,Se);else if(dt=b(U),typeof dt=="function")for(U=dt.call(U),dt=0;!(fe=U.next()).done;)fe=fe.value,Me=Ft+st(fe,dt++),De+=F(fe,ee,ae,Me,Se);else if(Me==="object"){if(typeof U.then=="function")return F(ct(U),ee,ae,fe,Se);throw ee=String(U),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return De}function Z(U,ee,ae){if(U==null)return U;var fe=[],Se=0;return F(U,fe,"","",function(Me){return ee.call(ae,Me,Se++)}),fe}function ue(U){if(U._status===-1){var ee=U._result;ee=ee(),ee.then(function(ae){(U._status===0||U._status===-1)&&(U._status=1,U._result=ae)},function(ae){(U._status===0||U._status===-1)&&(U._status=2,U._result=ae)}),U._status===-1&&(U._status=0,U._result=ee)}if(U._status===1)return U._result.default;throw U._result}var ve=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},Ce={map:Z,forEach:function(U,ee,ae){Z(U,function(){ee.apply(this,arguments)},ae)},count:function(U){var ee=0;return Z(U,function(){ee++}),ee},toArray:function(U){return Z(U,function(ee){return ee})||[]},only:function(U){if(!V(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return we.Activity=E,we.Children=Ce,we.Component=se,we.Fragment=t,we.Profiler=o,we.PureComponent=W,we.StrictMode=s,we.Suspense=m,we.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,we.__COMPILER_RUNTIME={__proto__:null,c:function(U){return x.H.useMemoCache(U)}},we.cache=function(U){return function(){return U.apply(null,arguments)}},we.cacheSignal=function(){return null},we.cloneElement=function(U,ee,ae){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var fe=G({},U.props),Se=U.key;if(ee!=null)for(Me in ee.key!==void 0&&(Se=""+ee.key),ee)!w.call(ee,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&ee.ref===void 0||(fe[Me]=ee[Me]);var Me=arguments.length-2;if(Me===1)fe.children=ae;else if(1<Me){for(var De=Array(Me),Ft=0;Ft<Me;Ft++)De[Ft]=arguments[Ft+2];fe.children=De}return N(U.type,Se,fe)},we.createContext=function(U){return U={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:l,_context:U},U},we.createElement=function(U,ee,ae){var fe,Se={},Me=null;if(ee!=null)for(fe in ee.key!==void 0&&(Me=""+ee.key),ee)w.call(ee,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(Se[fe]=ee[fe]);var De=arguments.length-2;if(De===1)Se.children=ae;else if(1<De){for(var Ft=Array(De),dt=0;dt<De;dt++)Ft[dt]=arguments[dt+2];Se.children=Ft}if(U&&U.defaultProps)for(fe in De=U.defaultProps,De)Se[fe]===void 0&&(Se[fe]=De[fe]);return N(U,Me,Se)},we.createRef=function(){return{current:null}},we.forwardRef=function(U){return{$$typeof:d,render:U}},we.isValidElement=V,we.lazy=function(U){return{$$typeof:v,_payload:{_status:-1,_result:U},_init:ue}},we.memo=function(U,ee){return{$$typeof:p,type:U,compare:ee===void 0?null:ee}},we.startTransition=function(U){var ee=x.T,ae={};x.T=ae;try{var fe=U(),Se=x.S;Se!==null&&Se(ae,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(ce,ve)}catch(Me){ve(Me)}finally{ee!==null&&ae.types!==null&&(ee.types=ae.types),x.T=ee}},we.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},we.use=function(U){return x.H.use(U)},we.useActionState=function(U,ee,ae){return x.H.useActionState(U,ee,ae)},we.useCallback=function(U,ee){return x.H.useCallback(U,ee)},we.useContext=function(U){return x.H.useContext(U)},we.useDebugValue=function(){},we.useDeferredValue=function(U,ee){return x.H.useDeferredValue(U,ee)},we.useEffect=function(U,ee){return x.H.useEffect(U,ee)},we.useEffectEvent=function(U){return x.H.useEffectEvent(U)},we.useId=function(){return x.H.useId()},we.useImperativeHandle=function(U,ee,ae){return x.H.useImperativeHandle(U,ee,ae)},we.useInsertionEffect=function(U,ee){return x.H.useInsertionEffect(U,ee)},we.useLayoutEffect=function(U,ee){return x.H.useLayoutEffect(U,ee)},we.useMemo=function(U,ee){return x.H.useMemo(U,ee)},we.useOptimistic=function(U,ee){return x.H.useOptimistic(U,ee)},we.useReducer=function(U,ee,ae){return x.H.useReducer(U,ee,ae)},we.useRef=function(U){return x.H.useRef(U)},we.useState=function(U){return x.H.useState(U)},we.useSyncExternalStore=function(U,ee,ae){return x.H.useSyncExternalStore(U,ee,ae)},we.useTransition=function(){return x.H.useTransition()},we.version="19.2.0",we}var pv;function Kp(){return pv||(pv=1,Xh.exports=qI()),Xh.exports}var ke=Kp();const BI=f0(ke);var Wh={exports:{}},bl={},Zh={exports:{}},jh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mv;function FI(){return mv||(mv=1,(function(n){function e(F,Z){var ue=F.length;F.push(Z);e:for(;0<ue;){var ve=ue-1>>>1,Ce=F[ve];if(0<o(Ce,Z))F[ve]=Z,F[ue]=Ce,ue=ve;else break e}}function t(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var Z=F[0],ue=F.pop();if(ue!==Z){F[0]=ue;e:for(var ve=0,Ce=F.length,U=Ce>>>1;ve<U;){var ee=2*(ve+1)-1,ae=F[ee],fe=ee+1,Se=F[fe];if(0>o(ae,ue))fe<Ce&&0>o(Se,ae)?(F[ve]=Se,F[fe]=ue,ve=fe):(F[ve]=ae,F[ee]=ue,ve=ee);else if(fe<Ce&&0>o(Se,ue))F[ve]=Se,F[fe]=ue,ve=fe;else break e}}return Z}function o(F,Z){var ue=F.sortIndex-Z.sortIndex;return ue!==0?ue:F.id-Z.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var m=[],p=[],v=1,E=null,A=3,b=!1,q=!1,G=!1,Q=!1,se=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function oe(F){for(var Z=t(p);Z!==null;){if(Z.callback===null)s(p);else if(Z.startTime<=F)s(p),Z.sortIndex=Z.expirationTime,e(m,Z);else break;Z=t(p)}}function de(F){if(G=!1,oe(F),!q)if(t(m)!==null)q=!0,ce||(ce=!0,O());else{var Z=t(p);Z!==null&&ct(de,Z.startTime-F)}}var ce=!1,x=-1,w=5,N=-1;function P(){return Q?!0:!(n.unstable_now()-N<w)}function V(){if(Q=!1,ce){var F=n.unstable_now();N=F;var Z=!0;try{e:{q=!1,G&&(G=!1,K(x),x=-1),b=!0;var ue=A;try{t:{for(oe(F),E=t(m);E!==null&&!(E.expirationTime>F&&P());){var ve=E.callback;if(typeof ve=="function"){E.callback=null,A=E.priorityLevel;var Ce=ve(E.expirationTime<=F);if(F=n.unstable_now(),typeof Ce=="function"){E.callback=Ce,oe(F),Z=!0;break t}E===t(m)&&s(m),oe(F)}else s(m);E=t(m)}if(E!==null)Z=!0;else{var U=t(p);U!==null&&ct(de,U.startTime-F),Z=!1}}break e}finally{E=null,A=ue,b=!1}Z=void 0}}finally{Z?O():ce=!1}}}var O;if(typeof W=="function")O=function(){W(V)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,st=D.port2;D.port1.onmessage=V,O=function(){st.postMessage(null)}}else O=function(){se(V,0)};function ct(F,Z){x=se(function(){F(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return A},n.unstable_next=function(F){switch(A){case 1:case 2:case 3:var Z=3;break;default:Z=A}var ue=A;A=Z;try{return F()}finally{A=ue}},n.unstable_requestPaint=function(){Q=!0},n.unstable_runWithPriority=function(F,Z){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ue=A;A=F;try{return Z()}finally{A=ue}},n.unstable_scheduleCallback=function(F,Z,ue){var ve=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?ve+ue:ve):ue=ve,F){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=ue+Ce,F={id:v++,callback:Z,priorityLevel:F,startTime:ue,expirationTime:Ce,sortIndex:-1},ue>ve?(F.sortIndex=ue,e(p,F),t(m)===null&&F===t(p)&&(G?(K(x),x=-1):G=!0,ct(de,ue-ve))):(F.sortIndex=Ce,e(m,F),q||b||(q=!0,ce||(ce=!0,O()))),F},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(F){var Z=A;return function(){var ue=A;A=Z;try{return F.apply(this,arguments)}finally{A=ue}}}})(jh)),jh}var gv;function zI(){return gv||(gv=1,Zh.exports=FI()),Zh.exports}var ep={exports:{}},en={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yv;function GI(){if(yv)return en;yv=1;var n=Kp();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(m,p,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:m,containerInfo:p,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,en.createPortal=function(m,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(m,p,null,v)},en.flushSync=function(m){var p=c.T,v=s.p;try{if(c.T=null,s.p=2,m)return m()}finally{c.T=p,s.p=v,s.d.f()}},en.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(m,p))},en.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},en.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var v=p.as,E=d(v,p.crossOrigin),A=typeof p.integrity=="string"?p.integrity:void 0,b=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?s.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:A,fetchPriority:b}):v==="script"&&s.d.X(m,{crossOrigin:E,integrity:A,fetchPriority:b,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},en.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=d(p.as,p.crossOrigin);s.d.M(m,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(m)},en.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,E=d(v,p.crossOrigin);s.d.L(m,v,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},en.preloadModule=function(m,p){if(typeof m=="string")if(p){var v=d(p.as,p.crossOrigin);s.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(m)},en.requestFormReset=function(m){s.d.r(m)},en.unstable_batchedUpdates=function(m,p){return m(p)},en.useFormState=function(m,p,v){return c.H.useFormState(m,p,v)},en.useFormStatus=function(){return c.H.useHostTransitionStatus()},en.version="19.2.0",en}var _v;function HI(){if(_v)return ep.exports;_v=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ep.exports=GI(),ep.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vv;function JI(){if(vv)return bl;vv=1;var n=zI(),e=Kp(),t=HI();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,a=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(a=r.return),i=r.return;while(i)}return r.tag===3?a:null}function c(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function m(i){if(l(i)!==i)throw Error(s(188))}function p(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(s(188));return r!==i?null:i}for(var a=i,u=r;;){var y=a.return;if(y===null)break;var _=y.alternate;if(_===null){if(u=y.return,u!==null){a=u;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===a)return m(y),i;if(_===u)return m(y),r;_=_.sibling}throw Error(s(188))}if(a.return!==u.return)a=y,u=_;else{for(var S=!1,I=y.child;I;){if(I===a){S=!0,a=y,u=_;break}if(I===u){S=!0,u=y,a=_;break}I=I.sibling}if(!S){for(I=_.child;I;){if(I===a){S=!0,a=_,u=y;break}if(I===u){S=!0,u=_,a=y;break}I=I.sibling}if(!S)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:r}function v(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=v(i),r!==null)return r;i=i.sibling}return null}var E=Object.assign,A=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),se=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),W=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function O(i){return i===null||typeof i!="object"?null:(i=V&&i[V]||i["@@iterator"],typeof i=="function"?i:null)}var D=Symbol.for("react.client.reference");function st(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===D?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case G:return"Fragment";case se:return"Profiler";case Q:return"StrictMode";case de:return"Suspense";case ce:return"SuspenseList";case N:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case q:return"Portal";case W:return i.displayName||"Context";case K:return(i._context.displayName||"Context")+".Consumer";case oe:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case x:return r=i.displayName||null,r!==null?r:st(i.type)||"Memo";case w:r=i._payload,i=i._init;try{return st(i(r))}catch{}}return null}var ct=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},ve=[],Ce=-1;function U(i){return{current:i}}function ee(i){0>Ce||(i.current=ve[Ce],ve[Ce]=null,Ce--)}function ae(i,r){Ce++,ve[Ce]=i.current,i.current=r}var fe=U(null),Se=U(null),Me=U(null),De=U(null);function Ft(i,r){switch(ae(Me,r),ae(Se,i),ae(fe,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?k_(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=k_(r),i=V_(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ee(fe),ae(fe,i)}function dt(){ee(fe),ee(Se),ee(Me)}function ti(i){i.memoizedState!==null&&ae(De,i);var r=fe.current,a=V_(r,i.type);r!==a&&(ae(Se,i),ae(fe,a))}function Ii(i){Se.current===i&&(ee(fe),ee(Se)),De.current===i&&(ee(De),Al._currentValue=ue)}var mr,oo;function Jn(i){if(mr===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);mr=r&&r[1]||"",oo=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+mr+i+oo}var gr=!1;function ao(i,r){if(!i||gr)return"";gr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch($){var Y=$}Reflect.construct(i,[],ne)}else{try{ne.call()}catch($){Y=$}i.call(ne.prototype)}}else{try{throw Error()}catch($){Y=$}(ne=i())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch($){if($&&Y&&typeof $.stack=="string")return[$.stack,Y.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=u.DetermineComponentFrameRoot(),S=_[0],I=_[1];if(S&&I){var k=S.split(`
`),J=I.split(`
`);for(y=u=0;u<k.length&&!k[u].includes("DetermineComponentFrameRoot");)u++;for(;y<J.length&&!J[y].includes("DetermineComponentFrameRoot");)y++;if(u===k.length||y===J.length)for(u=k.length-1,y=J.length-1;1<=u&&0<=y&&k[u]!==J[y];)y--;for(;1<=u&&0<=y;u--,y--)if(k[u]!==J[y]){if(u!==1||y!==1)do if(u--,y--,0>y||k[u]!==J[y]){var j=`
`+k[u].replace(" at new "," at ");return i.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",i.displayName)),j}while(1<=u&&0<=y);break}}}finally{gr=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?Jn(a):""}function Yf(i,r){switch(i.tag){case 26:case 27:case 5:return Jn(i.type);case 16:return Jn("Lazy");case 13:return i.child!==r&&r!==null?Jn("Suspense Fallback"):Jn("Suspense");case 19:return Jn("SuspenseList");case 0:case 15:return ao(i.type,!1);case 11:return ao(i.type.render,!1);case 1:return ao(i.type,!0);case 31:return Jn("Activity");default:return""}}function uu(i){try{var r="",a=null;do r+=Yf(i,a),a=i,i=i.return;while(i);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var lo=Object.prototype.hasOwnProperty,yr=n.unstable_scheduleCallback,uo=n.unstable_cancelCallback,Kf=n.unstable_shouldYield,Ra=n.unstable_requestPaint,zt=n.unstable_now,cu=n.unstable_getCurrentPriorityLevel,Mt=n.unstable_ImmediatePriority,kt=n.unstable_UserBlockingPriority,Ri=n.unstable_NormalPriority,fu=n.unstable_LowPriority,wa=n.unstable_IdlePriority,Qf=n.log,_r=n.unstable_setDisableYieldValue,us=null,Zt=null;function Mn(i){if(typeof Qf=="function"&&_r(i),Zt&&typeof Zt.setStrictMode=="function")try{Zt.setStrictMode(us,i)}catch{}}var an=Math.clz32?Math.clz32:du,$f=Math.log,ba=Math.LN2;function du(i){return i>>>=0,i===0?32:31-($f(i)/ba|0)|0}var vr=256,ni=262144,cs=4194304;function Yn(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function xn(i,r,a){var u=i.pendingLanes;if(u===0)return 0;var y=0,_=i.suspendedLanes,S=i.pingedLanes;i=i.warmLanes;var I=u&134217727;return I!==0?(u=I&~_,u!==0?y=Yn(u):(S&=I,S!==0?y=Yn(S):a||(a=I&~i,a!==0&&(y=Yn(a))))):(I=u&~_,I!==0?y=Yn(I):S!==0?y=Yn(S):a||(a=u&~i,a!==0&&(y=Yn(a)))),y===0?0:r!==0&&r!==y&&(r&_)===0&&(_=y&-y,a=r&-r,_>=a||_===32&&(a&4194048)!==0)?r:y}function fs(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function co(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Na(){var i=cs;return cs<<=1,(cs&62914560)===0&&(cs=4194304),i}function wi(i){for(var r=[],a=0;31>a;a++)r.push(i);return r}function ds(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Gt(i,r,a,u,y,_){var S=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var I=i.entanglements,k=i.expirationTimes,J=i.hiddenUpdates;for(a=S&~a;0<a;){var j=31-an(a),ne=1<<j;I[j]=0,k[j]=-1;var Y=J[j];if(Y!==null)for(J[j]=null,j=0;j<Y.length;j++){var $=Y[j];$!==null&&($.lane&=-536870913)}a&=~ne}u!==0&&Ma(i,u,0),_!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=_&~(S&~r))}function Ma(i,r,a){i.pendingLanes|=r,i.suspendedLanes&=~r;var u=31-an(r);i.entangledLanes|=r,i.entanglements[u]=i.entanglements[u]|1073741824|a&261930}function hs(i,r){var a=i.entangledLanes|=r;for(i=i.entanglements;a;){var u=31-an(a),y=1<<u;y&r|i[u]&r&&(i[u]|=r),a&=~y}}function ps(i,r){var a=r&-r;return a=(a&42)!==0?1:xa(a),(a&(i.suspendedLanes|r))!==0?0:a}function xa(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Da(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function bi(){var i=Z.p;return i!==0?i:(i=window.event,i===void 0?32:sv(i.type))}function hu(i,r){var a=Z.p;try{return Z.p=i,r()}finally{Z.p=a}}var ii=Math.random().toString(36).slice(2),mt="__reactFiber$"+ii,Ht="__reactProps$"+ii,si="__reactContainer$"+ii,ms="__reactEvents$"+ii,ri="__reactListeners$"+ii,pu="__reactHandles$"+ii,Pa="__reactResources$"+ii,Ni="__reactMarker$"+ii;function Tr(i){delete i[mt],delete i[Ht],delete i[ms],delete i[ri],delete i[pu]}function Mi(i){var r=i[mt];if(r)return r;for(var a=i.parentNode;a;){if(r=a[si]||a[mt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(i=z_(i);i!==null;){if(a=i[mt])return a;i=z_(i)}return r}i=a,a=i.parentNode}return null}function xi(i){if(i=i[mt]||i[si]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function Er(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function Kn(i){var r=i[Pa];return r||(r=i[Pa]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function vt(i){i[Ni]=!0}var fo=new Set,gs={};function ln(i,r){oi(i,r),oi(i+"Capture",r)}function oi(i,r){for(gs[i]=r,i=0;i<r.length;i++)fo.add(r[i])}var Xf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ka={},Va={};function mu(i){return lo.call(Va,i)?!0:lo.call(ka,i)?!1:Xf.test(i)?Va[i]=!0:(ka[i]=!0,!1)}function ys(i,r,a){if(mu(r))if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+a)}}function _s(i,r,a){if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+a)}}function Dn(i,r,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(r,a,""+u)}}function un(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function gu(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Wf(i,r,a){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var y=u.get,_=u.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return y.call(this)},set:function(S){a=""+S,_.call(this,S)}}),Object.defineProperty(i,r,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(S){a=""+S},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function ho(i){if(!i._valueTracker){var r=gu(i)?"checked":"value";i._valueTracker=Wf(i,r,""+i[r])}}function Ua(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var a=r.getValue(),u="";return i&&(u=gu(i)?i.checked?"true":"false":i.value),i=u,i!==a?(r.setValue(i),!0):!1}function po(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Di=/[\n"\\]/g;function gt(i){return i.replace(Di,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function vs(i,r,a,u,y,_,S,I){i.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.type=S:i.removeAttribute("type"),r!=null?S==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+un(r)):i.value!==""+un(r)&&(i.value=""+un(r)):S!=="submit"&&S!=="reset"||i.removeAttribute("value"),r!=null?mo(i,S,un(r)):a!=null?mo(i,S,un(a)):u!=null&&i.removeAttribute("value"),y==null&&_!=null&&(i.defaultChecked=!!_),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?i.name=""+un(I):i.removeAttribute("name")}function Sr(i,r,a,u,y,_,S,I){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),r!=null||a!=null){if(!(_!=="submit"&&_!=="reset"||r!=null)){ho(i);return}a=a!=null?""+un(a):"",r=r!=null?""+un(r):a,I||r===i.value||(i.value=r),i.defaultValue=r}u=u??y,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=I?i.checked:!!u,i.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.name=S),ho(i)}function mo(i,r,a){r==="number"&&po(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function He(i,r,a,u){if(i=i.options,r){r={};for(var y=0;y<a.length;y++)r["$"+a[y]]=!0;for(a=0;a<i.length;a++)y=r.hasOwnProperty("$"+i[a].value),i[a].selected!==y&&(i[a].selected=y),y&&u&&(i[a].defaultSelected=!0)}else{for(a=""+un(a),r=null,y=0;y<i.length;y++){if(i[y].value===a){i[y].selected=!0,u&&(i[y].defaultSelected=!0);return}r!==null||i[y].disabled||(r=i[y])}r!==null&&(r.selected=!0)}}function Ar(i,r,a){if(r!=null&&(r=""+un(r),r!==i.value&&(i.value=r),a==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=a!=null?""+un(a):""}function Ts(i,r,a,u){if(r==null){if(u!=null){if(a!=null)throw Error(s(92));if(ct(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),r=a}a=un(r),i.defaultValue=a,u=i.textContent,u===a&&u!==""&&u!==null&&(i.value=u),ho(i)}function Pn(i,r){if(r){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=r;return}}i.textContent=r}var Zf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function La(i,r,a){var u=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":u?i.setProperty(r,a):typeof a!="number"||a===0||Zf.has(r)?r==="float"?i.cssFloat=a:i[r]=(""+a).trim():i[r]=a+"px"}function yu(i,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var y in r)u=r[y],r.hasOwnProperty(y)&&a[y]!==u&&La(i,y,u)}else for(var _ in r)r.hasOwnProperty(_)&&La(i,_,r[_])}function Oa(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ed=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ai(i){return ed.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Vt(){}var go=null;function yo(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Pi=null,En=null;function _u(i){var r=xi(i);if(r&&(i=r.stateNode)){var a=i[Ht]||null;e:switch(i=r.stateNode,r.type){case"input":if(vs(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+gt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var u=a[r];if(u!==i&&u.form===i.form){var y=u[Ht]||null;if(!y)throw Error(s(90));vs(u,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<a.length;r++)u=a[r],u.form===i.form&&Ua(u)}break e;case"textarea":Ar(i,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&He(i,!!a.multiple,r,!1)}}}var qa=!1;function vu(i,r,a){if(qa)return i(r,a);qa=!0;try{var u=i(r);return u}finally{if(qa=!1,(Pi!==null||En!==null)&&(mc(),Pi&&(r=Pi,i=En,En=Pi=null,_u(r),i)))for(r=0;r<i.length;r++)_u(i[r])}}function hn(i,r){var a=i.stateNode;if(a===null)return null;var u=a[Ht]||null;if(u===null)return null;a=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ba=!1;if(Qn)try{var li={};Object.defineProperty(li,"passive",{get:function(){Ba=!0}}),window.addEventListener("test",li,li),window.removeEventListener("test",li,li)}catch{Ba=!1}var Sn=null,_o=null,ui=null;function Es(){if(ui)return ui;var i,r=_o,a=r.length,u,y="value"in Sn?Sn.value:Sn.textContent,_=y.length;for(i=0;i<a&&r[i]===y[i];i++);var S=a-i;for(u=1;u<=S&&r[a-u]===y[_-u];u++);return ui=y.slice(i,1<u?1-u:void 0)}function Cr(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function Ss(){return!0}function rt(){return!1}function jt(i){function r(a,u,y,_,S){this._reactName=a,this._targetInst=y,this.type=u,this.nativeEvent=_,this.target=S,this.currentTarget=null;for(var I in i)i.hasOwnProperty(I)&&(a=i[I],this[I]=a?a(_):_[I]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Ss:rt,this.isPropagationStopped=rt,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ss)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ss)},persist:function(){},isPersistent:Ss}),r}var ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ir=jt(ki),As=E({},ki,{view:0,detail:0}),Tu=jt(As),Cs,vo,cn,Rr=E({},As,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rs,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==cn&&(cn&&i.type==="mousemove"?(Cs=i.screenX-cn.screenX,vo=i.screenY-cn.screenY):vo=Cs=0,cn=i),Cs)},movementY:function(i){return"movementY"in i?i.movementY:vo}}),Eu=jt(Rr),wr=E({},Rr,{dataTransfer:0}),Su=jt(wr),Fa=E({},As,{relatedTarget:0}),Is=jt(Fa),Au=E({},ki,{animationName:0,elapsedTime:0,pseudoElement:0}),To=jt(Au),td=E({},ki,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Cu=jt(td),br=E({},ki,{data:0}),za=jt(br),Iu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ga={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ha={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ru(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=Ha[i])?!!r[i]:!1}function Rs(){return Ru}var wu=E({},As,{key:function(i){if(i.key){var r=Iu[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Cr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ga[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rs,charCode:function(i){return i.type==="keypress"?Cr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Cr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),bu=jt(wu),Vi=E({},Rr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ja=jt(Vi),Nu=E({},As,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rs}),Mu=jt(Nu),xu=E({},ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),Eo=jt(xu),fn=E({},Rr,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Du=jt(fn),Pu=E({},ki,{newState:0,oldState:0}),ws=jt(Pu),h=[9,13,27,32],T=Qn&&"CompositionEvent"in window,C=null;Qn&&"documentMode"in document&&(C=document.documentMode);var R=Qn&&"TextEvent"in window&&!C,z=Qn&&(!T||C&&8<C&&11>=C),X=" ",le=!1;function $e(i,r){switch(i){case"keyup":return h.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function At(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Pe=!1;function Ut(i,r){switch(i){case"compositionend":return At(r);case"keypress":return r.which!==32?null:(le=!0,X);case"textInput":return i=r.data,i===X&&le?null:i;default:return null}}function Lt(i,r){if(Pe)return i==="compositionend"||!T&&$e(i,r)?(i=Es(),ui=_o=Sn=null,Pe=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return z&&r.locale!=="ko"?null:r.data;default:return null}}var bs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pn(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!bs[i.type]:r==="textarea"}function Nr(i,r,a,u){Pi?En?En.push(u):En=[u]:Pi=u,r=Sc(r,"onChange"),0<r.length&&(a=new Ir("onChange","change",null,a,u),i.push({event:a,listeners:r}))}var Ui=null,Ya=null;function cC(i){b_(i,0)}function ku(i){var r=Er(i);if(Ua(r))return i}function Km(i,r){if(i==="change")return r}var Qm=!1;if(Qn){var nd;if(Qn){var id="oninput"in document;if(!id){var $m=document.createElement("div");$m.setAttribute("oninput","return;"),id=typeof $m.oninput=="function"}nd=id}else nd=!1;Qm=nd&&(!document.documentMode||9<document.documentMode)}function Xm(){Ui&&(Ui.detachEvent("onpropertychange",Wm),Ya=Ui=null)}function Wm(i){if(i.propertyName==="value"&&ku(Ya)){var r=[];Nr(r,Ya,i,yo(i)),vu(cC,r)}}function fC(i,r,a){i==="focusin"?(Xm(),Ui=r,Ya=a,Ui.attachEvent("onpropertychange",Wm)):i==="focusout"&&Xm()}function dC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ku(Ya)}function hC(i,r){if(i==="click")return ku(r)}function pC(i,r){if(i==="input"||i==="change")return ku(r)}function mC(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var An=typeof Object.is=="function"?Object.is:mC;function Ka(i,r){if(An(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var a=Object.keys(i),u=Object.keys(r);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var y=a[u];if(!lo.call(r,y)||!An(i[y],r[y]))return!1}return!0}function Zm(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function jm(i,r){var a=Zm(i);i=0;for(var u;a;){if(a.nodeType===3){if(u=i+a.textContent.length,i<=r&&u>=r)return{node:a,offset:r-i};i=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Zm(a)}}function eg(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?eg(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function tg(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=po(i.document);r instanceof i.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)i=r.contentWindow;else break;r=po(i.document)}return r}function sd(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var gC=Qn&&"documentMode"in document&&11>=document.documentMode,So=null,rd=null,Qa=null,od=!1;function ng(i,r,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;od||So==null||So!==po(u)||(u=So,"selectionStart"in u&&sd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Qa&&Ka(Qa,u)||(Qa=u,u=Sc(rd,"onSelect"),0<u.length&&(r=new Ir("onSelect","select",null,r,a),i.push({event:r,listeners:u}),r.target=So)))}function Mr(i,r){var a={};return a[i.toLowerCase()]=r.toLowerCase(),a["Webkit"+i]="webkit"+r,a["Moz"+i]="moz"+r,a}var Ao={animationend:Mr("Animation","AnimationEnd"),animationiteration:Mr("Animation","AnimationIteration"),animationstart:Mr("Animation","AnimationStart"),transitionrun:Mr("Transition","TransitionRun"),transitionstart:Mr("Transition","TransitionStart"),transitioncancel:Mr("Transition","TransitionCancel"),transitionend:Mr("Transition","TransitionEnd")},ad={},ig={};Qn&&(ig=document.createElement("div").style,"AnimationEvent"in window||(delete Ao.animationend.animation,delete Ao.animationiteration.animation,delete Ao.animationstart.animation),"TransitionEvent"in window||delete Ao.transitionend.transition);function xr(i){if(ad[i])return ad[i];if(!Ao[i])return i;var r=Ao[i],a;for(a in r)if(r.hasOwnProperty(a)&&a in ig)return ad[i]=r[a];return i}var sg=xr("animationend"),rg=xr("animationiteration"),og=xr("animationstart"),yC=xr("transitionrun"),_C=xr("transitionstart"),vC=xr("transitioncancel"),ag=xr("transitionend"),lg=new Map,ld="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ld.push("scrollEnd");function $n(i,r){lg.set(i,r),ln(r,[i])}var Vu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},kn=[],Co=0,ud=0;function Uu(){for(var i=Co,r=ud=Co=0;r<i;){var a=kn[r];kn[r++]=null;var u=kn[r];kn[r++]=null;var y=kn[r];kn[r++]=null;var _=kn[r];if(kn[r++]=null,u!==null&&y!==null){var S=u.pending;S===null?y.next=y:(y.next=S.next,S.next=y),u.pending=y}_!==0&&ug(a,y,_)}}function Lu(i,r,a,u){kn[Co++]=i,kn[Co++]=r,kn[Co++]=a,kn[Co++]=u,ud|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function cd(i,r,a,u){return Lu(i,r,a,u),Ou(i)}function Dr(i,r){return Lu(i,null,null,r),Ou(i)}function ug(i,r,a){i.lanes|=a;var u=i.alternate;u!==null&&(u.lanes|=a);for(var y=!1,_=i.return;_!==null;)_.childLanes|=a,u=_.alternate,u!==null&&(u.childLanes|=a),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(y=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,y&&r!==null&&(y=31-an(a),i=_.hiddenUpdates,u=i[y],u===null?i[y]=[r]:u.push(r),r.lane=a|536870912),_):null}function Ou(i){if(50<gl)throw gl=0,vh=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Io={};function TC(i,r,a,u){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(i,r,a,u){return new TC(i,r,a,u)}function fd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Li(i,r){var a=i.alternate;return a===null?(a=Cn(i.tag,r,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=r,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,r=i.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function cg(i,r){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,r=a.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function qu(i,r,a,u,y,_){var S=0;if(u=i,typeof i=="function")fd(i)&&(S=1);else if(typeof i=="string")S=II(i,a,fe.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case N:return i=Cn(31,a,r,y),i.elementType=N,i.lanes=_,i;case G:return Pr(a.children,y,_,r);case Q:S=8,y|=24;break;case se:return i=Cn(12,a,r,y|2),i.elementType=se,i.lanes=_,i;case de:return i=Cn(13,a,r,y),i.elementType=de,i.lanes=_,i;case ce:return i=Cn(19,a,r,y),i.elementType=ce,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case W:S=10;break e;case K:S=9;break e;case oe:S=11;break e;case x:S=14;break e;case w:S=16,u=null;break e}S=29,a=Error(s(130,i===null?"null":typeof i,"")),u=null}return r=Cn(S,a,r,y),r.elementType=i,r.type=u,r.lanes=_,r}function Pr(i,r,a,u){return i=Cn(7,i,u,r),i.lanes=a,i}function dd(i,r,a){return i=Cn(6,i,null,r),i.lanes=a,i}function fg(i){var r=Cn(18,null,null,0);return r.stateNode=i,r}function hd(i,r,a){return r=Cn(4,i.children!==null?i.children:[],i.key,r),r.lanes=a,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var dg=new WeakMap;function Vn(i,r){if(typeof i=="object"&&i!==null){var a=dg.get(i);return a!==void 0?a:(r={value:i,source:r,stack:uu(r)},dg.set(i,r),r)}return{value:i,source:r,stack:uu(r)}}var Ro=[],wo=0,Bu=null,$a=0,Un=[],Ln=0,Ns=null,ci=1,fi="";function Oi(i,r){Ro[wo++]=$a,Ro[wo++]=Bu,Bu=i,$a=r}function hg(i,r,a){Un[Ln++]=ci,Un[Ln++]=fi,Un[Ln++]=Ns,Ns=i;var u=ci;i=fi;var y=32-an(u)-1;u&=~(1<<y),a+=1;var _=32-an(r)+y;if(30<_){var S=y-y%5;_=(u&(1<<S)-1).toString(32),u>>=S,y-=S,ci=1<<32-an(r)+y|a<<y|u,fi=_+i}else ci=1<<_|a<<y|u,fi=i}function pd(i){i.return!==null&&(Oi(i,1),hg(i,1,0))}function md(i){for(;i===Bu;)Bu=Ro[--wo],Ro[wo]=null,$a=Ro[--wo],Ro[wo]=null;for(;i===Ns;)Ns=Un[--Ln],Un[Ln]=null,fi=Un[--Ln],Un[Ln]=null,ci=Un[--Ln],Un[Ln]=null}function pg(i,r){Un[Ln++]=ci,Un[Ln++]=fi,Un[Ln++]=Ns,ci=r.id,fi=r.overflow,Ns=i}var Jt=null,ot=null,ze=!1,Ms=null,On=!1,gd=Error(s(519));function xs(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Xa(Vn(r,i)),gd}function mg(i){var r=i.stateNode,a=i.type,u=i.memoizedProps;switch(r[mt]=i,r[Ht]=u,a){case"dialog":Le("cancel",r),Le("close",r);break;case"iframe":case"object":case"embed":Le("load",r);break;case"video":case"audio":for(a=0;a<_l.length;a++)Le(_l[a],r);break;case"source":Le("error",r);break;case"img":case"image":case"link":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"input":Le("invalid",r),Sr(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Le("invalid",r);break;case"textarea":Le("invalid",r),Ts(r,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||u.suppressHydrationWarning===!0||D_(r.textContent,a)?(u.popover!=null&&(Le("beforetoggle",r),Le("toggle",r)),u.onScroll!=null&&Le("scroll",r),u.onScrollEnd!=null&&Le("scrollend",r),u.onClick!=null&&(r.onclick=Vt),r=!0):r=!1,r||xs(i,!0)}function gg(i){for(Jt=i.return;Jt;)switch(Jt.tag){case 5:case 31:case 13:On=!1;return;case 27:case 3:On=!0;return;default:Jt=Jt.return}}function bo(i){if(i!==Jt)return!1;if(!ze)return gg(i),ze=!0,!1;var r=i.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||kh(i.type,i.memoizedProps)),a=!a),a&&ot&&xs(i),gg(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));ot=F_(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));ot=F_(i)}else r===27?(r=ot,Js(i.type)?(i=qh,qh=null,ot=i):ot=r):ot=Jt?Bn(i.stateNode.nextSibling):null;return!0}function kr(){ot=Jt=null,ze=!1}function yd(){var i=Ms;return i!==null&&(_n===null?_n=i:_n.push.apply(_n,i),Ms=null),i}function Xa(i){Ms===null?Ms=[i]:Ms.push(i)}var _d=U(null),Vr=null,qi=null;function Ds(i,r,a){ae(_d,r._currentValue),r._currentValue=a}function Bi(i){i._currentValue=_d.current,ee(_d)}function vd(i,r,a){for(;i!==null;){var u=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),i===a)break;i=i.return}}function Td(i,r,a,u){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var _=y.dependencies;if(_!==null){var S=y.child;_=_.firstContext;e:for(;_!==null;){var I=_;_=y;for(var k=0;k<r.length;k++)if(I.context===r[k]){_.lanes|=a,I=_.alternate,I!==null&&(I.lanes|=a),vd(_.return,a,i),u||(S=null);break e}_=I.next}}else if(y.tag===18){if(S=y.return,S===null)throw Error(s(341));S.lanes|=a,_=S.alternate,_!==null&&(_.lanes|=a),vd(S,a,i),S=null}else S=y.child;if(S!==null)S.return=y;else for(S=y;S!==null;){if(S===i){S=null;break}if(y=S.sibling,y!==null){y.return=S.return,S=y;break}S=S.return}y=S}}function No(i,r,a,u){i=null;for(var y=r,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var S=y.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var I=y.type;An(y.pendingProps.value,S.value)||(i!==null?i.push(I):i=[I])}}else if(y===De.current){if(S=y.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(Al):i=[Al])}y=y.return}i!==null&&Td(r,i,a,u),r.flags|=262144}function Fu(i){for(i=i.firstContext;i!==null;){if(!An(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ur(i){Vr=i,qi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Yt(i){return yg(Vr,i)}function zu(i,r){return Vr===null&&Ur(i),yg(i,r)}function yg(i,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},qi===null){if(i===null)throw Error(s(308));qi=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else qi=qi.next=r;return a}var EC=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(a,u){i.push(u)}};this.abort=function(){r.aborted=!0,i.forEach(function(a){return a()})}},SC=n.unstable_scheduleCallback,AC=n.unstable_NormalPriority,Ct={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ed(){return{controller:new EC,data:new Map,refCount:0}}function Wa(i){i.refCount--,i.refCount===0&&SC(AC,function(){i.controller.abort()})}var Za=null,Sd=0,Mo=0,xo=null;function CC(i,r){if(Za===null){var a=Za=[];Sd=0,Mo=Ih(),xo={status:"pending",value:void 0,then:function(u){a.push(u)}}}return Sd++,r.then(_g,_g),r}function _g(){if(--Sd===0&&Za!==null){xo!==null&&(xo.status="fulfilled");var i=Za;Za=null,Mo=0,xo=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function IC(i,r){var a=[],u={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return i.then(function(){u.status="fulfilled",u.value=r;for(var y=0;y<a.length;y++)(0,a[y])(r)},function(y){for(u.status="rejected",u.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),u}var vg=F.S;F.S=function(i,r){n_=zt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&CC(i,r),vg!==null&&vg(i,r)};var Lr=U(null);function Ad(){var i=Lr.current;return i!==null?i:nt.pooledCache}function Gu(i,r){r===null?ae(Lr,Lr.current):ae(Lr,r.pool)}function Tg(){var i=Ad();return i===null?null:{parent:Ct._currentValue,pool:i}}var Do=Error(s(460)),Cd=Error(s(474)),Hu=Error(s(542)),Ju={then:function(){}};function Eg(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Sg(i,r,a){switch(a=i[a],a===void 0?i.push(r):a!==r&&(r.then(Vt,Vt),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Cg(i),i;default:if(typeof r.status=="string")r.then(Vt,Vt);else{if(i=nt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(u){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=u}},function(u){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Cg(i),i}throw qr=r,Do}}function Or(i){try{var r=i._init;return r(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(qr=a,Do):a}}var qr=null;function Ag(){if(qr===null)throw Error(s(459));var i=qr;return qr=null,i}function Cg(i){if(i===Do||i===Hu)throw Error(s(483))}var Po=null,ja=0;function Yu(i){var r=ja;return ja+=1,Po===null&&(Po=[]),Sg(Po,i,r)}function el(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function Ku(i,r){throw r.$$typeof===A?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function Ig(i){function r(B,L){if(i){var H=B.deletions;H===null?(B.deletions=[L],B.flags|=16):H.push(L)}}function a(B,L){if(!i)return null;for(;L!==null;)r(B,L),L=L.sibling;return null}function u(B){for(var L=new Map;B!==null;)B.key!==null?L.set(B.key,B):L.set(B.index,B),B=B.sibling;return L}function y(B,L){return B=Li(B,L),B.index=0,B.sibling=null,B}function _(B,L,H){return B.index=H,i?(H=B.alternate,H!==null?(H=H.index,H<L?(B.flags|=67108866,L):H):(B.flags|=67108866,L)):(B.flags|=1048576,L)}function S(B){return i&&B.alternate===null&&(B.flags|=67108866),B}function I(B,L,H,te){return L===null||L.tag!==6?(L=dd(H,B.mode,te),L.return=B,L):(L=y(L,H),L.return=B,L)}function k(B,L,H,te){var _e=H.type;return _e===G?j(B,L,H.props.children,te,H.key):L!==null&&(L.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===w&&Or(_e)===L.type)?(L=y(L,H.props),el(L,H),L.return=B,L):(L=qu(H.type,H.key,H.props,null,B.mode,te),el(L,H),L.return=B,L)}function J(B,L,H,te){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=hd(H,B.mode,te),L.return=B,L):(L=y(L,H.children||[]),L.return=B,L)}function j(B,L,H,te,_e){return L===null||L.tag!==7?(L=Pr(H,B.mode,te,_e),L.return=B,L):(L=y(L,H),L.return=B,L)}function ne(B,L,H){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=dd(""+L,B.mode,H),L.return=B,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case b:return H=qu(L.type,L.key,L.props,null,B.mode,H),el(H,L),H.return=B,H;case q:return L=hd(L,B.mode,H),L.return=B,L;case w:return L=Or(L),ne(B,L,H)}if(ct(L)||O(L))return L=Pr(L,B.mode,H,null),L.return=B,L;if(typeof L.then=="function")return ne(B,Yu(L),H);if(L.$$typeof===W)return ne(B,zu(B,L),H);Ku(B,L)}return null}function Y(B,L,H,te){var _e=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return _e!==null?null:I(B,L,""+H,te);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case b:return H.key===_e?k(B,L,H,te):null;case q:return H.key===_e?J(B,L,H,te):null;case w:return H=Or(H),Y(B,L,H,te)}if(ct(H)||O(H))return _e!==null?null:j(B,L,H,te,null);if(typeof H.then=="function")return Y(B,L,Yu(H),te);if(H.$$typeof===W)return Y(B,L,zu(B,H),te);Ku(B,H)}return null}function $(B,L,H,te,_e){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return B=B.get(H)||null,I(L,B,""+te,_e);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case b:return B=B.get(te.key===null?H:te.key)||null,k(L,B,te,_e);case q:return B=B.get(te.key===null?H:te.key)||null,J(L,B,te,_e);case w:return te=Or(te),$(B,L,H,te,_e)}if(ct(te)||O(te))return B=B.get(H)||null,j(L,B,te,_e,null);if(typeof te.then=="function")return $(B,L,H,Yu(te),_e);if(te.$$typeof===W)return $(B,L,H,zu(L,te),_e);Ku(L,te)}return null}function pe(B,L,H,te){for(var _e=null,Je=null,ge=L,xe=L=0,qe=null;ge!==null&&xe<H.length;xe++){ge.index>xe?(qe=ge,ge=null):qe=ge.sibling;var Ye=Y(B,ge,H[xe],te);if(Ye===null){ge===null&&(ge=qe);break}i&&ge&&Ye.alternate===null&&r(B,ge),L=_(Ye,L,xe),Je===null?_e=Ye:Je.sibling=Ye,Je=Ye,ge=qe}if(xe===H.length)return a(B,ge),ze&&Oi(B,xe),_e;if(ge===null){for(;xe<H.length;xe++)ge=ne(B,H[xe],te),ge!==null&&(L=_(ge,L,xe),Je===null?_e=ge:Je.sibling=ge,Je=ge);return ze&&Oi(B,xe),_e}for(ge=u(ge);xe<H.length;xe++)qe=$(ge,B,xe,H[xe],te),qe!==null&&(i&&qe.alternate!==null&&ge.delete(qe.key===null?xe:qe.key),L=_(qe,L,xe),Je===null?_e=qe:Je.sibling=qe,Je=qe);return i&&ge.forEach(function(Xs){return r(B,Xs)}),ze&&Oi(B,xe),_e}function Ee(B,L,H,te){if(H==null)throw Error(s(151));for(var _e=null,Je=null,ge=L,xe=L=0,qe=null,Ye=H.next();ge!==null&&!Ye.done;xe++,Ye=H.next()){ge.index>xe?(qe=ge,ge=null):qe=ge.sibling;var Xs=Y(B,ge,Ye.value,te);if(Xs===null){ge===null&&(ge=qe);break}i&&ge&&Xs.alternate===null&&r(B,ge),L=_(Xs,L,xe),Je===null?_e=Xs:Je.sibling=Xs,Je=Xs,ge=qe}if(Ye.done)return a(B,ge),ze&&Oi(B,xe),_e;if(ge===null){for(;!Ye.done;xe++,Ye=H.next())Ye=ne(B,Ye.value,te),Ye!==null&&(L=_(Ye,L,xe),Je===null?_e=Ye:Je.sibling=Ye,Je=Ye);return ze&&Oi(B,xe),_e}for(ge=u(ge);!Ye.done;xe++,Ye=H.next())Ye=$(ge,B,xe,Ye.value,te),Ye!==null&&(i&&Ye.alternate!==null&&ge.delete(Ye.key===null?xe:Ye.key),L=_(Ye,L,xe),Je===null?_e=Ye:Je.sibling=Ye,Je=Ye);return i&&ge.forEach(function(UI){return r(B,UI)}),ze&&Oi(B,xe),_e}function tt(B,L,H,te){if(typeof H=="object"&&H!==null&&H.type===G&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case b:e:{for(var _e=H.key;L!==null;){if(L.key===_e){if(_e=H.type,_e===G){if(L.tag===7){a(B,L.sibling),te=y(L,H.props.children),te.return=B,B=te;break e}}else if(L.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===w&&Or(_e)===L.type){a(B,L.sibling),te=y(L,H.props),el(te,H),te.return=B,B=te;break e}a(B,L);break}else r(B,L);L=L.sibling}H.type===G?(te=Pr(H.props.children,B.mode,te,H.key),te.return=B,B=te):(te=qu(H.type,H.key,H.props,null,B.mode,te),el(te,H),te.return=B,B=te)}return S(B);case q:e:{for(_e=H.key;L!==null;){if(L.key===_e)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){a(B,L.sibling),te=y(L,H.children||[]),te.return=B,B=te;break e}else{a(B,L);break}else r(B,L);L=L.sibling}te=hd(H,B.mode,te),te.return=B,B=te}return S(B);case w:return H=Or(H),tt(B,L,H,te)}if(ct(H))return pe(B,L,H,te);if(O(H)){if(_e=O(H),typeof _e!="function")throw Error(s(150));return H=_e.call(H),Ee(B,L,H,te)}if(typeof H.then=="function")return tt(B,L,Yu(H),te);if(H.$$typeof===W)return tt(B,L,zu(B,H),te);Ku(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,L!==null&&L.tag===6?(a(B,L.sibling),te=y(L,H),te.return=B,B=te):(a(B,L),te=dd(H,B.mode,te),te.return=B,B=te),S(B)):a(B,L)}return function(B,L,H,te){try{ja=0;var _e=tt(B,L,H,te);return Po=null,_e}catch(ge){if(ge===Do||ge===Hu)throw ge;var Je=Cn(29,ge,null,B.mode);return Je.lanes=te,Je.return=B,Je}finally{}}}var Br=Ig(!0),Rg=Ig(!1),Ps=!1;function Id(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Rd(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ks(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Vs(i,r,a){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Qe&2)!==0){var y=u.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),u.pending=r,r=Ou(i),ug(i,null,a),r}return Lu(i,u,r,a),Ou(i)}function tl(i,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var u=r.lanes;u&=i.pendingLanes,a|=u,r.lanes=a,hs(i,a)}}function wd(i,r){var a=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var y=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var S={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};_===null?y=_=S:_=_.next=S,a=a.next}while(a!==null);_===null?y=_=r:_=_.next=r}else y=_=r;a={baseState:u.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:u.shared,callbacks:u.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=r:i.next=r,a.lastBaseUpdate=r}var bd=!1;function nl(){if(bd){var i=xo;if(i!==null)throw i}}function il(i,r,a,u){bd=!1;var y=i.updateQueue;Ps=!1;var _=y.firstBaseUpdate,S=y.lastBaseUpdate,I=y.shared.pending;if(I!==null){y.shared.pending=null;var k=I,J=k.next;k.next=null,S===null?_=J:S.next=J,S=k;var j=i.alternate;j!==null&&(j=j.updateQueue,I=j.lastBaseUpdate,I!==S&&(I===null?j.firstBaseUpdate=J:I.next=J,j.lastBaseUpdate=k))}if(_!==null){var ne=y.baseState;S=0,j=J=k=null,I=_;do{var Y=I.lane&-536870913,$=Y!==I.lane;if($?(Oe&Y)===Y:(u&Y)===Y){Y!==0&&Y===Mo&&(bd=!0),j!==null&&(j=j.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var pe=i,Ee=I;Y=r;var tt=a;switch(Ee.tag){case 1:if(pe=Ee.payload,typeof pe=="function"){ne=pe.call(tt,ne,Y);break e}ne=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=Ee.payload,Y=typeof pe=="function"?pe.call(tt,ne,Y):pe,Y==null)break e;ne=E({},ne,Y);break e;case 2:Ps=!0}}Y=I.callback,Y!==null&&(i.flags|=64,$&&(i.flags|=8192),$=y.callbacks,$===null?y.callbacks=[Y]:$.push(Y))}else $={lane:Y,tag:I.tag,payload:I.payload,callback:I.callback,next:null},j===null?(J=j=$,k=ne):j=j.next=$,S|=Y;if(I=I.next,I===null){if(I=y.shared.pending,I===null)break;$=I,I=$.next,$.next=null,y.lastBaseUpdate=$,y.shared.pending=null}}while(!0);j===null&&(k=ne),y.baseState=k,y.firstBaseUpdate=J,y.lastBaseUpdate=j,_===null&&(y.shared.lanes=0),Bs|=S,i.lanes=S,i.memoizedState=ne}}function wg(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function bg(i,r){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)wg(a[i],r)}var ko=U(null),Qu=U(0);function Ng(i,r){i=$i,ae(Qu,i),ae(ko,r),$i=i|r.baseLanes}function Nd(){ae(Qu,$i),ae(ko,ko.current)}function Md(){$i=Qu.current,ee(ko),ee(Qu)}var In=U(null),qn=null;function Us(i){var r=i.alternate;ae(Tt,Tt.current&1),ae(In,i),qn===null&&(r===null||ko.current!==null||r.memoizedState!==null)&&(qn=i)}function xd(i){ae(Tt,Tt.current),ae(In,i),qn===null&&(qn=i)}function Mg(i){i.tag===22?(ae(Tt,Tt.current),ae(In,i),qn===null&&(qn=i)):Ls()}function Ls(){ae(Tt,Tt.current),ae(In,In.current)}function Rn(i){ee(In),qn===i&&(qn=null),ee(Tt)}var Tt=U(0);function $u(i){for(var r=i;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Lh(a)||Oh(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Fi=0,Ne=null,je=null,It=null,Xu=!1,Vo=!1,Fr=!1,Wu=0,sl=0,Uo=null,RC=0;function yt(){throw Error(s(321))}function Dd(i,r){if(r===null)return!1;for(var a=0;a<r.length&&a<i.length;a++)if(!An(i[a],r[a]))return!1;return!0}function Pd(i,r,a,u,y,_){return Fi=_,Ne=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,F.H=i===null||i.memoizedState===null?hy:Qd,Fr=!1,_=a(u,y),Fr=!1,Vo&&(_=Dg(r,a,u,y)),xg(i),_}function xg(i){F.H=al;var r=je!==null&&je.next!==null;if(Fi=0,It=je=Ne=null,Xu=!1,sl=0,Uo=null,r)throw Error(s(300));i===null||Rt||(i=i.dependencies,i!==null&&Fu(i)&&(Rt=!0))}function Dg(i,r,a,u){Ne=i;var y=0;do{if(Vo&&(Uo=null),sl=0,Vo=!1,25<=y)throw Error(s(301));if(y+=1,It=je=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}F.H=py,_=r(a,u)}while(Vo);return _}function wC(){var i=F.H,r=i.useState()[0];return r=typeof r.then=="function"?rl(r):r,i=i.useState()[0],(je!==null?je.memoizedState:null)!==i&&(Ne.flags|=1024),r}function kd(){var i=Wu!==0;return Wu=0,i}function Vd(i,r,a){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~a}function Ud(i){if(Xu){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Xu=!1}Fi=0,It=je=Ne=null,Vo=!1,sl=Wu=0,Uo=null}function dn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?Ne.memoizedState=It=i:It=It.next=i,It}function Et(){if(je===null){var i=Ne.alternate;i=i!==null?i.memoizedState:null}else i=je.next;var r=It===null?Ne.memoizedState:It.next;if(r!==null)It=r,je=i;else{if(i===null)throw Ne.alternate===null?Error(s(467)):Error(s(310));je=i,i={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},It===null?Ne.memoizedState=It=i:It=It.next=i}return It}function Zu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rl(i){var r=sl;return sl+=1,Uo===null&&(Uo=[]),i=Sg(Uo,i,r),r=Ne,(It===null?r.memoizedState:It.next)===null&&(r=r.alternate,F.H=r===null||r.memoizedState===null?hy:Qd),i}function ju(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return rl(i);if(i.$$typeof===W)return Yt(i)}throw Error(s(438,String(i)))}function Ld(i){var r=null,a=Ne.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var u=Ne.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Zu(),Ne.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(i),u=0;u<i;u++)a[u]=P;return r.index++,a}function zi(i,r){return typeof r=="function"?r(i):r}function ec(i){var r=Et();return Od(r,je,i)}function Od(i,r,a){var u=i.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var y=i.baseQueue,_=u.pending;if(_!==null){if(y!==null){var S=y.next;y.next=_.next,_.next=S}r.baseQueue=y=_,u.pending=null}if(_=i.baseState,y===null)i.memoizedState=_;else{r=y.next;var I=S=null,k=null,J=r,j=!1;do{var ne=J.lane&-536870913;if(ne!==J.lane?(Oe&ne)===ne:(Fi&ne)===ne){var Y=J.revertLane;if(Y===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),ne===Mo&&(j=!0);else if((Fi&Y)===Y){J=J.next,Y===Mo&&(j=!0);continue}else ne={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},k===null?(I=k=ne,S=_):k=k.next=ne,Ne.lanes|=Y,Bs|=Y;ne=J.action,Fr&&a(_,ne),_=J.hasEagerState?J.eagerState:a(_,ne)}else Y={lane:ne,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},k===null?(I=k=Y,S=_):k=k.next=Y,Ne.lanes|=ne,Bs|=ne;J=J.next}while(J!==null&&J!==r);if(k===null?S=_:k.next=I,!An(_,i.memoizedState)&&(Rt=!0,j&&(a=xo,a!==null)))throw a;i.memoizedState=_,i.baseState=S,i.baseQueue=k,u.lastRenderedState=_}return y===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function qd(i){var r=Et(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var u=a.dispatch,y=a.pending,_=r.memoizedState;if(y!==null){a.pending=null;var S=y=y.next;do _=i(_,S.action),S=S.next;while(S!==y);An(_,r.memoizedState)||(Rt=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),a.lastRenderedState=_}return[_,u]}function Pg(i,r,a){var u=Ne,y=Et(),_=ze;if(_){if(a===void 0)throw Error(s(407));a=a()}else a=r();var S=!An((je||y).memoizedState,a);if(S&&(y.memoizedState=a,Rt=!0),y=y.queue,zd(Ug.bind(null,u,y,i),[i]),y.getSnapshot!==r||S||It!==null&&It.memoizedState.tag&1){if(u.flags|=2048,Lo(9,{destroy:void 0},Vg.bind(null,u,y,a,r),null),nt===null)throw Error(s(349));_||(Fi&127)!==0||kg(u,r,a)}return a}function kg(i,r,a){i.flags|=16384,i={getSnapshot:r,value:a},r=Ne.updateQueue,r===null?(r=Zu(),Ne.updateQueue=r,r.stores=[i]):(a=r.stores,a===null?r.stores=[i]:a.push(i))}function Vg(i,r,a,u){r.value=a,r.getSnapshot=u,Lg(r)&&Og(i)}function Ug(i,r,a){return a(function(){Lg(r)&&Og(i)})}function Lg(i){var r=i.getSnapshot;i=i.value;try{var a=r();return!An(i,a)}catch{return!0}}function Og(i){var r=Dr(i,2);r!==null&&vn(r,i,2)}function Bd(i){var r=dn();if(typeof i=="function"){var a=i;if(i=a(),Fr){Mn(!0);try{a()}finally{Mn(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:i},r}function qg(i,r,a,u){return i.baseState=a,Od(i,je,typeof u=="function"?u:zi)}function bC(i,r,a,u,y){if(ic(i))throw Error(s(485));if(i=r.action,i!==null){var _={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){_.listeners.push(S)}};F.T!==null?a(!0):_.isTransition=!1,u(_),a=r.pending,a===null?(_.next=r.pending=_,Bg(r,_)):(_.next=a.next,r.pending=a.next=_)}}function Bg(i,r){var a=r.action,u=r.payload,y=i.state;if(r.isTransition){var _=F.T,S={};F.T=S;try{var I=a(y,u),k=F.S;k!==null&&k(S,I),Fg(i,r,I)}catch(J){Fd(i,r,J)}finally{_!==null&&S.types!==null&&(_.types=S.types),F.T=_}}else try{_=a(y,u),Fg(i,r,_)}catch(J){Fd(i,r,J)}}function Fg(i,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){zg(i,r,u)},function(u){return Fd(i,r,u)}):zg(i,r,a)}function zg(i,r,a){r.status="fulfilled",r.value=a,Gg(r),i.state=a,r=i.pending,r!==null&&(a=r.next,a===r?i.pending=null:(a=a.next,r.next=a,Bg(i,a)))}function Fd(i,r,a){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=a,Gg(r),r=r.next;while(r!==u)}i.action=null}function Gg(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function Hg(i,r){return r}function Jg(i,r){if(ze){var a=nt.formState;if(a!==null){e:{var u=Ne;if(ze){if(ot){t:{for(var y=ot,_=On;y.nodeType!==8;){if(!_){y=null;break t}if(y=Bn(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){ot=Bn(y.nextSibling),u=y.data==="F!";break e}}xs(u)}u=!1}u&&(r=a[0])}}return a=dn(),a.memoizedState=a.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hg,lastRenderedState:r},a.queue=u,a=cy.bind(null,Ne,u),u.dispatch=a,u=Bd(!1),_=Kd.bind(null,Ne,!1,u.queue),u=dn(),y={state:r,dispatch:null,action:i,pending:null},u.queue=y,a=bC.bind(null,Ne,y,_,a),y.dispatch=a,u.memoizedState=i,[r,a,!1]}function Yg(i){var r=Et();return Kg(r,je,i)}function Kg(i,r,a){if(r=Od(i,r,Hg)[0],i=ec(zi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=rl(r)}catch(S){throw S===Do?Hu:S}else u=r;r=Et();var y=r.queue,_=y.dispatch;return a!==r.memoizedState&&(Ne.flags|=2048,Lo(9,{destroy:void 0},NC.bind(null,y,a),null)),[u,_,i]}function NC(i,r){i.action=r}function Qg(i){var r=Et(),a=je;if(a!==null)return Kg(r,a,i);Et(),r=r.memoizedState,a=Et();var u=a.queue.dispatch;return a.memoizedState=i,[r,u,!1]}function Lo(i,r,a,u){return i={tag:i,create:a,deps:u,inst:r,next:null},r=Ne.updateQueue,r===null&&(r=Zu(),Ne.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=i.next=i:(u=a.next,a.next=i,i.next=u,r.lastEffect=i),i}function $g(){return Et().memoizedState}function tc(i,r,a,u){var y=dn();Ne.flags|=i,y.memoizedState=Lo(1|r,{destroy:void 0},a,u===void 0?null:u)}function nc(i,r,a,u){var y=Et();u=u===void 0?null:u;var _=y.memoizedState.inst;je!==null&&u!==null&&Dd(u,je.memoizedState.deps)?y.memoizedState=Lo(r,_,a,u):(Ne.flags|=i,y.memoizedState=Lo(1|r,_,a,u))}function Xg(i,r){tc(8390656,8,i,r)}function zd(i,r){nc(2048,8,i,r)}function MC(i){Ne.flags|=4;var r=Ne.updateQueue;if(r===null)r=Zu(),Ne.updateQueue=r,r.events=[i];else{var a=r.events;a===null?r.events=[i]:a.push(i)}}function Wg(i){var r=Et().memoizedState;return MC({ref:r,nextImpl:i}),function(){if((Qe&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function Zg(i,r){return nc(4,2,i,r)}function jg(i,r){return nc(4,4,i,r)}function ey(i,r){if(typeof r=="function"){i=i();var a=r(i);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function ty(i,r,a){a=a!=null?a.concat([i]):null,nc(4,4,ey.bind(null,r,i),a)}function Gd(){}function ny(i,r){var a=Et();r=r===void 0?null:r;var u=a.memoizedState;return r!==null&&Dd(r,u[1])?u[0]:(a.memoizedState=[i,r],i)}function iy(i,r){var a=Et();r=r===void 0?null:r;var u=a.memoizedState;if(r!==null&&Dd(r,u[1]))return u[0];if(u=i(),Fr){Mn(!0);try{i()}finally{Mn(!1)}}return a.memoizedState=[u,r],u}function Hd(i,r,a){return a===void 0||(Fi&1073741824)!==0&&(Oe&261930)===0?i.memoizedState=r:(i.memoizedState=a,i=s_(),Ne.lanes|=i,Bs|=i,a)}function sy(i,r,a,u){return An(a,r)?a:ko.current!==null?(i=Hd(i,a,u),An(i,r)||(Rt=!0),i):(Fi&42)===0||(Fi&1073741824)!==0&&(Oe&261930)===0?(Rt=!0,i.memoizedState=a):(i=s_(),Ne.lanes|=i,Bs|=i,r)}function ry(i,r,a,u,y){var _=Z.p;Z.p=_!==0&&8>_?_:8;var S=F.T,I={};F.T=I,Kd(i,!1,r,a);try{var k=y(),J=F.S;if(J!==null&&J(I,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var j=IC(k,u);ol(i,r,j,Nn(i))}else ol(i,r,u,Nn(i))}catch(ne){ol(i,r,{then:function(){},status:"rejected",reason:ne},Nn())}finally{Z.p=_,S!==null&&I.types!==null&&(S.types=I.types),F.T=S}}function xC(){}function Jd(i,r,a,u){if(i.tag!==5)throw Error(s(476));var y=oy(i).queue;ry(i,y,r,ue,a===null?xC:function(){return ay(i),a(u)})}function oy(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:ue},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:a},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function ay(i){var r=oy(i);r.next===null&&(r=i.alternate.memoizedState),ol(i,r.next.queue,{},Nn())}function Yd(){return Yt(Al)}function ly(){return Et().memoizedState}function uy(){return Et().memoizedState}function DC(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var a=Nn();i=ks(a);var u=Vs(r,i,a);u!==null&&(vn(u,r,a),tl(u,r,a)),r={cache:Ed()},i.payload=r;return}r=r.return}}function PC(i,r,a){var u=Nn();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ic(i)?fy(r,a):(a=cd(i,r,a,u),a!==null&&(vn(a,i,u),dy(a,r,u)))}function cy(i,r,a){var u=Nn();ol(i,r,a,u)}function ol(i,r,a,u){var y={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ic(i))fy(r,y);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var S=r.lastRenderedState,I=_(S,a);if(y.hasEagerState=!0,y.eagerState=I,An(I,S))return Lu(i,r,y,0),nt===null&&Uu(),!1}catch{}finally{}if(a=cd(i,r,y,u),a!==null)return vn(a,i,u),dy(a,r,u),!0}return!1}function Kd(i,r,a,u){if(u={lane:2,revertLane:Ih(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},ic(i)){if(r)throw Error(s(479))}else r=cd(i,a,u,2),r!==null&&vn(r,i,2)}function ic(i){var r=i.alternate;return i===Ne||r!==null&&r===Ne}function fy(i,r){Vo=Xu=!0;var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}function dy(i,r,a){if((a&4194048)!==0){var u=r.lanes;u&=i.pendingLanes,a|=u,r.lanes=a,hs(i,a)}}var al={readContext:Yt,use:ju,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt};al.useEffectEvent=yt;var hy={readContext:Yt,use:ju,useCallback:function(i,r){return dn().memoizedState=[i,r===void 0?null:r],i},useContext:Yt,useEffect:Xg,useImperativeHandle:function(i,r,a){a=a!=null?a.concat([i]):null,tc(4194308,4,ey.bind(null,r,i),a)},useLayoutEffect:function(i,r){return tc(4194308,4,i,r)},useInsertionEffect:function(i,r){tc(4,2,i,r)},useMemo:function(i,r){var a=dn();r=r===void 0?null:r;var u=i();if(Fr){Mn(!0);try{i()}finally{Mn(!1)}}return a.memoizedState=[u,r],u},useReducer:function(i,r,a){var u=dn();if(a!==void 0){var y=a(r);if(Fr){Mn(!0);try{a(r)}finally{Mn(!1)}}}else y=r;return u.memoizedState=u.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},u.queue=i,i=i.dispatch=PC.bind(null,Ne,i),[u.memoizedState,i]},useRef:function(i){var r=dn();return i={current:i},r.memoizedState=i},useState:function(i){i=Bd(i);var r=i.queue,a=cy.bind(null,Ne,r);return r.dispatch=a,[i.memoizedState,a]},useDebugValue:Gd,useDeferredValue:function(i,r){var a=dn();return Hd(a,i,r)},useTransition:function(){var i=Bd(!1);return i=ry.bind(null,Ne,i.queue,!0,!1),dn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,a){var u=Ne,y=dn();if(ze){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),nt===null)throw Error(s(349));(Oe&127)!==0||kg(u,r,a)}y.memoizedState=a;var _={value:a,getSnapshot:r};return y.queue=_,Xg(Ug.bind(null,u,_,i),[i]),u.flags|=2048,Lo(9,{destroy:void 0},Vg.bind(null,u,_,a,r),null),a},useId:function(){var i=dn(),r=nt.identifierPrefix;if(ze){var a=fi,u=ci;a=(u&~(1<<32-an(u)-1)).toString(32)+a,r="_"+r+"R_"+a,a=Wu++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=RC++,r="_"+r+"r_"+a.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:Yd,useFormState:Jg,useActionState:Jg,useOptimistic:function(i){var r=dn();r.memoizedState=r.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Kd.bind(null,Ne,!0,a),a.dispatch=r,[i,r]},useMemoCache:Ld,useCacheRefresh:function(){return dn().memoizedState=DC.bind(null,Ne)},useEffectEvent:function(i){var r=dn(),a={impl:i};return r.memoizedState=a,function(){if((Qe&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Qd={readContext:Yt,use:ju,useCallback:ny,useContext:Yt,useEffect:zd,useImperativeHandle:ty,useInsertionEffect:Zg,useLayoutEffect:jg,useMemo:iy,useReducer:ec,useRef:$g,useState:function(){return ec(zi)},useDebugValue:Gd,useDeferredValue:function(i,r){var a=Et();return sy(a,je.memoizedState,i,r)},useTransition:function(){var i=ec(zi)[0],r=Et().memoizedState;return[typeof i=="boolean"?i:rl(i),r]},useSyncExternalStore:Pg,useId:ly,useHostTransitionStatus:Yd,useFormState:Yg,useActionState:Yg,useOptimistic:function(i,r){var a=Et();return qg(a,je,i,r)},useMemoCache:Ld,useCacheRefresh:uy};Qd.useEffectEvent=Wg;var py={readContext:Yt,use:ju,useCallback:ny,useContext:Yt,useEffect:zd,useImperativeHandle:ty,useInsertionEffect:Zg,useLayoutEffect:jg,useMemo:iy,useReducer:qd,useRef:$g,useState:function(){return qd(zi)},useDebugValue:Gd,useDeferredValue:function(i,r){var a=Et();return je===null?Hd(a,i,r):sy(a,je.memoizedState,i,r)},useTransition:function(){var i=qd(zi)[0],r=Et().memoizedState;return[typeof i=="boolean"?i:rl(i),r]},useSyncExternalStore:Pg,useId:ly,useHostTransitionStatus:Yd,useFormState:Qg,useActionState:Qg,useOptimistic:function(i,r){var a=Et();return je!==null?qg(a,je,i,r):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:Ld,useCacheRefresh:uy};py.useEffectEvent=Wg;function $d(i,r,a,u){r=i.memoizedState,a=a(u,r),a=a==null?r:E({},r,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var Xd={enqueueSetState:function(i,r,a){i=i._reactInternals;var u=Nn(),y=ks(u);y.payload=r,a!=null&&(y.callback=a),r=Vs(i,y,u),r!==null&&(vn(r,i,u),tl(r,i,u))},enqueueReplaceState:function(i,r,a){i=i._reactInternals;var u=Nn(),y=ks(u);y.tag=1,y.payload=r,a!=null&&(y.callback=a),r=Vs(i,y,u),r!==null&&(vn(r,i,u),tl(r,i,u))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var a=Nn(),u=ks(a);u.tag=2,r!=null&&(u.callback=r),r=Vs(i,u,a),r!==null&&(vn(r,i,a),tl(r,i,a))}};function my(i,r,a,u,y,_,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,_,S):r.prototype&&r.prototype.isPureReactComponent?!Ka(a,u)||!Ka(y,_):!0}function gy(i,r,a,u){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,u),r.state!==i&&Xd.enqueueReplaceState(r,r.state,null)}function zr(i,r){var a=r;if("ref"in r){a={};for(var u in r)u!=="ref"&&(a[u]=r[u])}if(i=i.defaultProps){a===r&&(a=E({},a));for(var y in i)a[y]===void 0&&(a[y]=i[y])}return a}function yy(i){Vu(i)}function _y(i){console.error(i)}function vy(i){Vu(i)}function sc(i,r){try{var a=i.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function Ty(i,r,a){try{var u=i.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Wd(i,r,a){return a=ks(a),a.tag=3,a.payload={element:null},a.callback=function(){sc(i,r)},a}function Ey(i){return i=ks(i),i.tag=3,i}function Sy(i,r,a,u){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var _=u.value;i.payload=function(){return y(_)},i.callback=function(){Ty(r,a,u)}}var S=a.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(i.callback=function(){Ty(r,a,u),typeof y!="function"&&(Fs===null?Fs=new Set([this]):Fs.add(this));var I=u.stack;this.componentDidCatch(u.value,{componentStack:I!==null?I:""})})}function kC(i,r,a,u,y){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=a.alternate,r!==null&&No(r,a,y,!0),a=In.current,a!==null){switch(a.tag){case 31:case 13:return qn===null?gc():a.alternate===null&&_t===0&&(_t=3),a.flags&=-257,a.flags|=65536,a.lanes=y,u===Ju?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([u]):r.add(u),Sh(i,u,y)),!1;case 22:return a.flags|=65536,u===Ju?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([u]):a.add(u)),Sh(i,u,y)),!1}throw Error(s(435,a.tag))}return Sh(i,u,y),gc(),!1}if(ze)return r=In.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,u!==gd&&(i=Error(s(422),{cause:u}),Xa(Vn(i,a)))):(u!==gd&&(r=Error(s(423),{cause:u}),Xa(Vn(r,a))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,u=Vn(u,a),y=Wd(i.stateNode,u,y),wd(i,y),_t!==4&&(_t=2)),!1;var _=Error(s(520),{cause:u});if(_=Vn(_,a),ml===null?ml=[_]:ml.push(_),_t!==4&&(_t=2),r===null)return!0;u=Vn(u,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,i=y&-y,a.lanes|=i,i=Wd(a.stateNode,u,i),wd(a,i),!1;case 1:if(r=a.type,_=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Fs===null||!Fs.has(_))))return a.flags|=65536,y&=-y,a.lanes|=y,y=Ey(y),Sy(y,i,a,u),wd(a,y),!1}a=a.return}while(a!==null);return!1}var Zd=Error(s(461)),Rt=!1;function Kt(i,r,a,u){r.child=i===null?Rg(r,null,a,u):Br(r,i.child,a,u)}function Ay(i,r,a,u,y){a=a.render;var _=r.ref;if("ref"in u){var S={};for(var I in u)I!=="ref"&&(S[I]=u[I])}else S=u;return Ur(r),u=Pd(i,r,a,S,_,y),I=kd(),i!==null&&!Rt?(Vd(i,r,y),Gi(i,r,y)):(ze&&I&&pd(r),r.flags|=1,Kt(i,r,u,y),r.child)}function Cy(i,r,a,u,y){if(i===null){var _=a.type;return typeof _=="function"&&!fd(_)&&_.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=_,Iy(i,r,_,u,y)):(i=qu(a.type,null,u,r,r.mode,y),i.ref=r.ref,i.return=r,r.child=i)}if(_=i.child,!oh(i,y)){var S=_.memoizedProps;if(a=a.compare,a=a!==null?a:Ka,a(S,u)&&i.ref===r.ref)return Gi(i,r,y)}return r.flags|=1,i=Li(_,u),i.ref=r.ref,i.return=r,r.child=i}function Iy(i,r,a,u,y){if(i!==null){var _=i.memoizedProps;if(Ka(_,u)&&i.ref===r.ref)if(Rt=!1,r.pendingProps=u=_,oh(i,y))(i.flags&131072)!==0&&(Rt=!0);else return r.lanes=i.lanes,Gi(i,r,y)}return jd(i,r,a,u,y)}function Ry(i,r,a,u){var y=u.children,_=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((r.flags&128)!==0){if(_=_!==null?_.baseLanes|a:a,i!==null){for(u=r.child=i.child,y=0;u!==null;)y=y|u.lanes|u.childLanes,u=u.sibling;u=y&~_}else u=0,r.child=null;return wy(i,r,_,a,u)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&Gu(r,_!==null?_.cachePool:null),_!==null?Ng(r,_):Nd(),Mg(r);else return u=r.lanes=536870912,wy(i,r,_!==null?_.baseLanes|a:a,a,u)}else _!==null?(Gu(r,_.cachePool),Ng(r,_),Ls(),r.memoizedState=null):(i!==null&&Gu(r,null),Nd(),Ls());return Kt(i,r,y,a),r.child}function ll(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function wy(i,r,a,u,y){var _=Ad();return _=_===null?null:{parent:Ct._currentValue,pool:_},r.memoizedState={baseLanes:a,cachePool:_},i!==null&&Gu(r,null),Nd(),Mg(r),i!==null&&No(i,r,u,!0),r.childLanes=y,null}function rc(i,r){return r=ac({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function by(i,r,a){return Br(r,i.child,null,a),i=rc(r,r.pendingProps),i.flags|=2,Rn(r),r.memoizedState=null,i}function VC(i,r,a){var u=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(ze){if(u.mode==="hidden")return i=rc(r,u),r.lanes=536870912,ll(null,i);if(xd(r),(i=ot)?(i=B_(i,On),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Ns!==null?{id:ci,overflow:fi}:null,retryLane:536870912,hydrationErrors:null},a=fg(i),a.return=r,r.child=a,Jt=r,ot=null)):i=null,i===null)throw xs(r);return r.lanes=536870912,null}return rc(r,u)}var _=i.memoizedState;if(_!==null){var S=_.dehydrated;if(xd(r),y)if(r.flags&256)r.flags&=-257,r=by(i,r,a);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(Rt||No(i,r,a,!1),y=(a&i.childLanes)!==0,Rt||y){if(u=nt,u!==null&&(S=ps(u,a),S!==0&&S!==_.retryLane))throw _.retryLane=S,Dr(i,S),vn(u,i,S),Zd;gc(),r=by(i,r,a)}else i=_.treeContext,ot=Bn(S.nextSibling),Jt=r,ze=!0,Ms=null,On=!1,i!==null&&pg(r,i),r=rc(r,u),r.flags|=4096;return r}return i=Li(i.child,{mode:u.mode,children:u.children}),i.ref=r.ref,r.child=i,i.return=r,i}function oc(i,r){var a=r.ref;if(a===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(r.flags|=4194816)}}function jd(i,r,a,u,y){return Ur(r),a=Pd(i,r,a,u,void 0,y),u=kd(),i!==null&&!Rt?(Vd(i,r,y),Gi(i,r,y)):(ze&&u&&pd(r),r.flags|=1,Kt(i,r,a,y),r.child)}function Ny(i,r,a,u,y,_){return Ur(r),r.updateQueue=null,a=Dg(r,u,a,y),xg(i),u=kd(),i!==null&&!Rt?(Vd(i,r,_),Gi(i,r,_)):(ze&&u&&pd(r),r.flags|=1,Kt(i,r,a,_),r.child)}function My(i,r,a,u,y){if(Ur(r),r.stateNode===null){var _=Io,S=a.contextType;typeof S=="object"&&S!==null&&(_=Yt(S)),_=new a(u,_),r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Xd,r.stateNode=_,_._reactInternals=r,_=r.stateNode,_.props=u,_.state=r.memoizedState,_.refs={},Id(r),S=a.contextType,_.context=typeof S=="object"&&S!==null?Yt(S):Io,_.state=r.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&($d(r,a,S,u),_.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(S=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),S!==_.state&&Xd.enqueueReplaceState(_,_.state,null),il(r,u,_,y),nl(),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(i===null){_=r.stateNode;var I=r.memoizedProps,k=zr(a,I);_.props=k;var J=_.context,j=a.contextType;S=Io,typeof j=="object"&&j!==null&&(S=Yt(j));var ne=a.getDerivedStateFromProps;j=typeof ne=="function"||typeof _.getSnapshotBeforeUpdate=="function",I=r.pendingProps!==I,j||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(I||J!==S)&&gy(r,_,u,S),Ps=!1;var Y=r.memoizedState;_.state=Y,il(r,u,_,y),nl(),J=r.memoizedState,I||Y!==J||Ps?(typeof ne=="function"&&($d(r,a,ne,u),J=r.memoizedState),(k=Ps||my(r,a,k,u,Y,J,S))?(j||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=J),_.props=u,_.state=J,_.context=S,u=k):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{_=r.stateNode,Rd(i,r),S=r.memoizedProps,j=zr(a,S),_.props=j,ne=r.pendingProps,Y=_.context,J=a.contextType,k=Io,typeof J=="object"&&J!==null&&(k=Yt(J)),I=a.getDerivedStateFromProps,(J=typeof I=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(S!==ne||Y!==k)&&gy(r,_,u,k),Ps=!1,Y=r.memoizedState,_.state=Y,il(r,u,_,y),nl();var $=r.memoizedState;S!==ne||Y!==$||Ps||i!==null&&i.dependencies!==null&&Fu(i.dependencies)?(typeof I=="function"&&($d(r,a,I,u),$=r.memoizedState),(j=Ps||my(r,a,j,u,Y,$,k)||i!==null&&i.dependencies!==null&&Fu(i.dependencies))?(J||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,$,k),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,$,k)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=$),_.props=u,_.state=$,_.context=k,u=j):(typeof _.componentDidUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(r.flags|=1024),u=!1)}return _=u,oc(i,r),u=(r.flags&128)!==0,_||u?(_=r.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:_.render(),r.flags|=1,i!==null&&u?(r.child=Br(r,i.child,null,y),r.child=Br(r,null,a,y)):Kt(i,r,a,y),r.memoizedState=_.state,i=r.child):i=Gi(i,r,y),i}function xy(i,r,a,u){return kr(),r.flags|=256,Kt(i,r,a,u),r.child}var eh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function th(i){return{baseLanes:i,cachePool:Tg()}}function nh(i,r,a){return i=i!==null?i.childLanes&~a:0,r&&(i|=bn),i}function Dy(i,r,a){var u=r.pendingProps,y=!1,_=(r.flags&128)!==0,S;if((S=_)||(S=i!==null&&i.memoizedState===null?!1:(Tt.current&2)!==0),S&&(y=!0,r.flags&=-129),S=(r.flags&32)!==0,r.flags&=-33,i===null){if(ze){if(y?Us(r):Ls(),(i=ot)?(i=B_(i,On),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Ns!==null?{id:ci,overflow:fi}:null,retryLane:536870912,hydrationErrors:null},a=fg(i),a.return=r,r.child=a,Jt=r,ot=null)):i=null,i===null)throw xs(r);return Oh(i)?r.lanes=32:r.lanes=536870912,null}var I=u.children;return u=u.fallback,y?(Ls(),y=r.mode,I=ac({mode:"hidden",children:I},y),u=Pr(u,y,a,null),I.return=r,u.return=r,I.sibling=u,r.child=I,u=r.child,u.memoizedState=th(a),u.childLanes=nh(i,S,a),r.memoizedState=eh,ll(null,u)):(Us(r),ih(r,I))}var k=i.memoizedState;if(k!==null&&(I=k.dehydrated,I!==null)){if(_)r.flags&256?(Us(r),r.flags&=-257,r=sh(i,r,a)):r.memoizedState!==null?(Ls(),r.child=i.child,r.flags|=128,r=null):(Ls(),I=u.fallback,y=r.mode,u=ac({mode:"visible",children:u.children},y),I=Pr(I,y,a,null),I.flags|=2,u.return=r,I.return=r,u.sibling=I,r.child=u,Br(r,i.child,null,a),u=r.child,u.memoizedState=th(a),u.childLanes=nh(i,S,a),r.memoizedState=eh,r=ll(null,u));else if(Us(r),Oh(I)){if(S=I.nextSibling&&I.nextSibling.dataset,S)var J=S.dgst;S=J,u=Error(s(419)),u.stack="",u.digest=S,Xa({value:u,source:null,stack:null}),r=sh(i,r,a)}else if(Rt||No(i,r,a,!1),S=(a&i.childLanes)!==0,Rt||S){if(S=nt,S!==null&&(u=ps(S,a),u!==0&&u!==k.retryLane))throw k.retryLane=u,Dr(i,u),vn(S,i,u),Zd;Lh(I)||gc(),r=sh(i,r,a)}else Lh(I)?(r.flags|=192,r.child=i.child,r=null):(i=k.treeContext,ot=Bn(I.nextSibling),Jt=r,ze=!0,Ms=null,On=!1,i!==null&&pg(r,i),r=ih(r,u.children),r.flags|=4096);return r}return y?(Ls(),I=u.fallback,y=r.mode,k=i.child,J=k.sibling,u=Li(k,{mode:"hidden",children:u.children}),u.subtreeFlags=k.subtreeFlags&65011712,J!==null?I=Li(J,I):(I=Pr(I,y,a,null),I.flags|=2),I.return=r,u.return=r,u.sibling=I,r.child=u,ll(null,u),u=r.child,I=i.child.memoizedState,I===null?I=th(a):(y=I.cachePool,y!==null?(k=Ct._currentValue,y=y.parent!==k?{parent:k,pool:k}:y):y=Tg(),I={baseLanes:I.baseLanes|a,cachePool:y}),u.memoizedState=I,u.childLanes=nh(i,S,a),r.memoizedState=eh,ll(i.child,u)):(Us(r),a=i.child,i=a.sibling,a=Li(a,{mode:"visible",children:u.children}),a.return=r,a.sibling=null,i!==null&&(S=r.deletions,S===null?(r.deletions=[i],r.flags|=16):S.push(i)),r.child=a,r.memoizedState=null,a)}function ih(i,r){return r=ac({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function ac(i,r){return i=Cn(22,i,null,r),i.lanes=0,i}function sh(i,r,a){return Br(r,i.child,null,a),i=ih(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function Py(i,r,a){i.lanes|=r;var u=i.alternate;u!==null&&(u.lanes|=r),vd(i.return,r,a)}function rh(i,r,a,u,y,_){var S=i.memoizedState;S===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:y,treeForkCount:_}:(S.isBackwards=r,S.rendering=null,S.renderingStartTime=0,S.last=u,S.tail=a,S.tailMode=y,S.treeForkCount=_)}function ky(i,r,a){var u=r.pendingProps,y=u.revealOrder,_=u.tail;u=u.children;var S=Tt.current,I=(S&2)!==0;if(I?(S=S&1|2,r.flags|=128):S&=1,ae(Tt,S),Kt(i,r,u,a),u=ze?$a:0,!I&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Py(i,a,r);else if(i.tag===19)Py(i,a,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(a=r.child,y=null;a!==null;)i=a.alternate,i!==null&&$u(i)===null&&(y=a),a=a.sibling;a=y,a===null?(y=r.child,r.child=null):(y=a.sibling,a.sibling=null),rh(r,!1,y,a,_,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=r.child,r.child=null;y!==null;){if(i=y.alternate,i!==null&&$u(i)===null){r.child=y;break}i=y.sibling,y.sibling=a,a=y,y=i}rh(r,!0,a,null,_,u);break;case"together":rh(r,!1,null,null,void 0,u);break;default:r.memoizedState=null}return r.child}function Gi(i,r,a){if(i!==null&&(r.dependencies=i.dependencies),Bs|=r.lanes,(a&r.childLanes)===0)if(i!==null){if(No(i,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,a=Li(i,i.pendingProps),r.child=a,a.return=r;i.sibling!==null;)i=i.sibling,a=a.sibling=Li(i,i.pendingProps),a.return=r;a.sibling=null}return r.child}function oh(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Fu(i)))}function UC(i,r,a){switch(r.tag){case 3:Ft(r,r.stateNode.containerInfo),Ds(r,Ct,i.memoizedState.cache),kr();break;case 27:case 5:ti(r);break;case 4:Ft(r,r.stateNode.containerInfo);break;case 10:Ds(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,xd(r),null;break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(Us(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Dy(i,r,a):(Us(r),i=Gi(i,r,a),i!==null?i.sibling:null);Us(r);break;case 19:var y=(i.flags&128)!==0;if(u=(a&r.childLanes)!==0,u||(No(i,r,a,!1),u=(a&r.childLanes)!==0),y){if(u)return ky(i,r,a);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ae(Tt,Tt.current),u)break;return null;case 22:return r.lanes=0,Ry(i,r,a,r.pendingProps);case 24:Ds(r,Ct,i.memoizedState.cache)}return Gi(i,r,a)}function Vy(i,r,a){if(i!==null)if(i.memoizedProps!==r.pendingProps)Rt=!0;else{if(!oh(i,a)&&(r.flags&128)===0)return Rt=!1,UC(i,r,a);Rt=(i.flags&131072)!==0}else Rt=!1,ze&&(r.flags&1048576)!==0&&hg(r,$a,r.index);switch(r.lanes=0,r.tag){case 16:e:{var u=r.pendingProps;if(i=Or(r.elementType),r.type=i,typeof i=="function")fd(i)?(u=zr(i,u),r.tag=1,r=My(null,r,i,u,a)):(r.tag=0,r=jd(null,r,i,u,a));else{if(i!=null){var y=i.$$typeof;if(y===oe){r.tag=11,r=Ay(null,r,i,u,a);break e}else if(y===x){r.tag=14,r=Cy(null,r,i,u,a);break e}}throw r=st(i)||i,Error(s(306,r,""))}}return r;case 0:return jd(i,r,r.type,r.pendingProps,a);case 1:return u=r.type,y=zr(u,r.pendingProps),My(i,r,u,y,a);case 3:e:{if(Ft(r,r.stateNode.containerInfo),i===null)throw Error(s(387));u=r.pendingProps;var _=r.memoizedState;y=_.element,Rd(i,r),il(r,u,null,a);var S=r.memoizedState;if(u=S.cache,Ds(r,Ct,u),u!==_.cache&&Td(r,[Ct],a,!0),nl(),u=S.element,_.isDehydrated)if(_={element:u,isDehydrated:!1,cache:S.cache},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){r=xy(i,r,u,a);break e}else if(u!==y){y=Vn(Error(s(424)),r),Xa(y),r=xy(i,r,u,a);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(ot=Bn(i.firstChild),Jt=r,ze=!0,Ms=null,On=!0,a=Rg(r,null,u,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(kr(),u===y){r=Gi(i,r,a);break e}Kt(i,r,u,a)}r=r.child}return r;case 26:return oc(i,r),i===null?(a=Y_(r.type,null,r.pendingProps,null))?r.memoizedState=a:ze||(a=r.type,i=r.pendingProps,u=Ac(Me.current).createElement(a),u[mt]=r,u[Ht]=i,Qt(u,a,i),vt(u),r.stateNode=u):r.memoizedState=Y_(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return ti(r),i===null&&ze&&(u=r.stateNode=G_(r.type,r.pendingProps,Me.current),Jt=r,On=!0,y=ot,Js(r.type)?(qh=y,ot=Bn(u.firstChild)):ot=y),Kt(i,r,r.pendingProps.children,a),oc(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&ze&&((y=u=ot)&&(u=dI(u,r.type,r.pendingProps,On),u!==null?(r.stateNode=u,Jt=r,ot=Bn(u.firstChild),On=!1,y=!0):y=!1),y||xs(r)),ti(r),y=r.type,_=r.pendingProps,S=i!==null?i.memoizedProps:null,u=_.children,kh(y,_)?u=null:S!==null&&kh(y,S)&&(r.flags|=32),r.memoizedState!==null&&(y=Pd(i,r,wC,null,null,a),Al._currentValue=y),oc(i,r),Kt(i,r,u,a),r.child;case 6:return i===null&&ze&&((i=a=ot)&&(a=hI(a,r.pendingProps,On),a!==null?(r.stateNode=a,Jt=r,ot=null,i=!0):i=!1),i||xs(r)),null;case 13:return Dy(i,r,a);case 4:return Ft(r,r.stateNode.containerInfo),u=r.pendingProps,i===null?r.child=Br(r,null,u,a):Kt(i,r,u,a),r.child;case 11:return Ay(i,r,r.type,r.pendingProps,a);case 7:return Kt(i,r,r.pendingProps,a),r.child;case 8:return Kt(i,r,r.pendingProps.children,a),r.child;case 12:return Kt(i,r,r.pendingProps.children,a),r.child;case 10:return u=r.pendingProps,Ds(r,r.type,u.value),Kt(i,r,u.children,a),r.child;case 9:return y=r.type._context,u=r.pendingProps.children,Ur(r),y=Yt(y),u=u(y),r.flags|=1,Kt(i,r,u,a),r.child;case 14:return Cy(i,r,r.type,r.pendingProps,a);case 15:return Iy(i,r,r.type,r.pendingProps,a);case 19:return ky(i,r,a);case 31:return VC(i,r,a);case 22:return Ry(i,r,a,r.pendingProps);case 24:return Ur(r),u=Yt(Ct),i===null?(y=Ad(),y===null&&(y=nt,_=Ed(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=a),y=_),r.memoizedState={parent:u,cache:y},Id(r),Ds(r,Ct,y)):((i.lanes&a)!==0&&(Rd(i,r),il(r,null,null,a),nl()),y=i.memoizedState,_=r.memoizedState,y.parent!==u?(y={parent:u,cache:u},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),Ds(r,Ct,u)):(u=_.cache,Ds(r,Ct,u),u!==y.cache&&Td(r,[Ct],a,!0))),Kt(i,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Hi(i){i.flags|=4}function ah(i,r,a,u,y){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(l_())i.flags|=8192;else throw qr=Ju,Cd}else i.flags&=-16777217}function Uy(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!W_(r))if(l_())i.flags|=8192;else throw qr=Ju,Cd}function lc(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Na():536870912,i.lanes|=r,Fo|=r)}function ul(i,r){if(!ze)switch(i.tailMode){case"hidden":r=i.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function at(i){var r=i.alternate!==null&&i.alternate.child===i.child,a=0,u=0;if(r)for(var y=i.child;y!==null;)a|=y.lanes|y.childLanes,u|=y.subtreeFlags&65011712,u|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)a|=y.lanes|y.childLanes,u|=y.subtreeFlags,u|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=u,i.childLanes=a,r}function LC(i,r,a){var u=r.pendingProps;switch(md(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(r),null;case 1:return at(r),null;case 3:return a=r.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),Bi(Ct),dt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(bo(r)?Hi(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,yd())),at(r),null;case 26:var y=r.type,_=r.memoizedState;return i===null?(Hi(r),_!==null?(at(r),Uy(r,_)):(at(r),ah(r,y,null,u,a))):_?_!==i.memoizedState?(Hi(r),at(r),Uy(r,_)):(at(r),r.flags&=-16777217):(i=i.memoizedProps,i!==u&&Hi(r),at(r),ah(r,y,i,u,a)),null;case 27:if(Ii(r),a=Me.current,y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&Hi(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return at(r),null}i=fe.current,bo(r)?mg(r):(i=G_(y,u,a),r.stateNode=i,Hi(r))}return at(r),null;case 5:if(Ii(r),y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&Hi(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return at(r),null}if(_=fe.current,bo(r))mg(r);else{var S=Ac(Me.current);switch(_){case 1:_=S.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=S.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=S.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof u.is=="string"?S.createElement("select",{is:u.is}):S.createElement("select"),u.multiple?_.multiple=!0:u.size&&(_.size=u.size);break;default:_=typeof u.is=="string"?S.createElement(y,{is:u.is}):S.createElement(y)}}_[mt]=r,_[Ht]=u;e:for(S=r.child;S!==null;){if(S.tag===5||S.tag===6)_.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===r)break e;for(;S.sibling===null;){if(S.return===null||S.return===r)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}r.stateNode=_;e:switch(Qt(_,y,u),y){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Hi(r)}}return at(r),ah(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,a),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==u&&Hi(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(s(166));if(i=Me.current,bo(r)){if(i=r.stateNode,a=r.memoizedProps,u=null,y=Jt,y!==null)switch(y.tag){case 27:case 5:u=y.memoizedProps}i[mt]=r,i=!!(i.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||D_(i.nodeValue,a)),i||xs(r,!0)}else i=Ac(i).createTextNode(u),i[mt]=r,r.stateNode=i}return at(r),null;case 31:if(a=r.memoizedState,i===null||i.memoizedState!==null){if(u=bo(r),a!==null){if(i===null){if(!u)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[mt]=r}else kr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;at(r),i=!1}else a=yd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return r.flags&256?(Rn(r),r):(Rn(r),null);if((r.flags&128)!==0)throw Error(s(558))}return at(r),null;case 13:if(u=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=bo(r),u!==null&&u.dehydrated!==null){if(i===null){if(!y)throw Error(s(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[mt]=r}else kr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;at(r),y=!1}else y=yd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(Rn(r),r):(Rn(r),null)}return Rn(r),(r.flags&128)!==0?(r.lanes=a,r):(a=u!==null,i=i!==null&&i.memoizedState!==null,a&&(u=r.child,y=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(y=u.alternate.memoizedState.cachePool.pool),_=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),_!==y&&(u.flags|=2048)),a!==i&&a&&(r.child.flags|=8192),lc(r,r.updateQueue),at(r),null);case 4:return dt(),i===null&&Nh(r.stateNode.containerInfo),at(r),null;case 10:return Bi(r.type),at(r),null;case 19:if(ee(Tt),u=r.memoizedState,u===null)return at(r),null;if(y=(r.flags&128)!==0,_=u.rendering,_===null)if(y)ul(u,!1);else{if(_t!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(_=$u(i),_!==null){for(r.flags|=128,ul(u,!1),i=_.updateQueue,r.updateQueue=i,lc(r,i),r.subtreeFlags=0,i=a,a=r.child;a!==null;)cg(a,i),a=a.sibling;return ae(Tt,Tt.current&1|2),ze&&Oi(r,u.treeForkCount),r.child}i=i.sibling}u.tail!==null&&zt()>hc&&(r.flags|=128,y=!0,ul(u,!1),r.lanes=4194304)}else{if(!y)if(i=$u(_),i!==null){if(r.flags|=128,y=!0,i=i.updateQueue,r.updateQueue=i,lc(r,i),ul(u,!0),u.tail===null&&u.tailMode==="hidden"&&!_.alternate&&!ze)return at(r),null}else 2*zt()-u.renderingStartTime>hc&&a!==536870912&&(r.flags|=128,y=!0,ul(u,!1),r.lanes=4194304);u.isBackwards?(_.sibling=r.child,r.child=_):(i=u.last,i!==null?i.sibling=_:r.child=_,u.last=_)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=zt(),i.sibling=null,a=Tt.current,ae(Tt,y?a&1|2:a&1),ze&&Oi(r,u.treeForkCount),i):(at(r),null);case 22:case 23:return Rn(r),Md(),u=r.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(a&536870912)!==0&&(r.flags&128)===0&&(at(r),r.subtreeFlags&6&&(r.flags|=8192)):at(r),a=r.updateQueue,a!==null&&lc(r,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==a&&(r.flags|=2048),i!==null&&ee(Lr),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Bi(Ct),at(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function OC(i,r){switch(md(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return Bi(Ct),dt(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return Ii(r),null;case 31:if(r.memoizedState!==null){if(Rn(r),r.alternate===null)throw Error(s(340));kr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(Rn(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));kr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return ee(Tt),null;case 4:return dt(),null;case 10:return Bi(r.type),null;case 22:case 23:return Rn(r),Md(),i!==null&&ee(Lr),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return Bi(Ct),null;case 25:return null;default:return null}}function Ly(i,r){switch(md(r),r.tag){case 3:Bi(Ct),dt();break;case 26:case 27:case 5:Ii(r);break;case 4:dt();break;case 31:r.memoizedState!==null&&Rn(r);break;case 13:Rn(r);break;case 19:ee(Tt);break;case 10:Bi(r.type);break;case 22:case 23:Rn(r),Md(),i!==null&&ee(Lr);break;case 24:Bi(Ct)}}function cl(i,r){try{var a=r.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var y=u.next;a=y;do{if((a.tag&i)===i){u=void 0;var _=a.create,S=a.inst;u=_(),S.destroy=u}a=a.next}while(a!==y)}}catch(I){Ze(r,r.return,I)}}function Os(i,r,a){try{var u=r.updateQueue,y=u!==null?u.lastEffect:null;if(y!==null){var _=y.next;u=_;do{if((u.tag&i)===i){var S=u.inst,I=S.destroy;if(I!==void 0){S.destroy=void 0,y=r;var k=a,J=I;try{J()}catch(j){Ze(y,k,j)}}}u=u.next}while(u!==_)}}catch(j){Ze(r,r.return,j)}}function Oy(i){var r=i.updateQueue;if(r!==null){var a=i.stateNode;try{bg(r,a)}catch(u){Ze(i,i.return,u)}}}function qy(i,r,a){a.props=zr(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(u){Ze(i,r,u)}}function fl(i,r){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof a=="function"?i.refCleanup=a(u):a.current=u}}catch(y){Ze(i,r,y)}}function di(i,r){var a=i.ref,u=i.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(y){Ze(i,r,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){Ze(i,r,y)}else a.current=null}function By(i){var r=i.type,a=i.memoizedProps,u=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(y){Ze(i,i.return,y)}}function lh(i,r,a){try{var u=i.stateNode;oI(u,i.type,a,r),u[Ht]=r}catch(y){Ze(i,i.return,y)}}function Fy(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Js(i.type)||i.tag===4}function uh(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Fy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Js(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function ch(i,r,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(i),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Vt));else if(u!==4&&(u===27&&Js(i.type)&&(a=i.stateNode,r=null),i=i.child,i!==null))for(ch(i,r,a),i=i.sibling;i!==null;)ch(i,r,a),i=i.sibling}function uc(i,r,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?a.insertBefore(i,r):a.appendChild(i);else if(u!==4&&(u===27&&Js(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(uc(i,r,a),i=i.sibling;i!==null;)uc(i,r,a),i=i.sibling}function zy(i){var r=i.stateNode,a=i.memoizedProps;try{for(var u=i.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);Qt(r,u,a),r[mt]=i,r[Ht]=a}catch(_){Ze(i,i.return,_)}}var Ji=!1,wt=!1,fh=!1,Gy=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function qC(i,r){if(i=i.containerInfo,Dh=Mc,i=tg(i),sd(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var y=u.anchorOffset,_=u.focusNode;u=u.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break e}var S=0,I=-1,k=-1,J=0,j=0,ne=i,Y=null;t:for(;;){for(var $;ne!==a||y!==0&&ne.nodeType!==3||(I=S+y),ne!==_||u!==0&&ne.nodeType!==3||(k=S+u),ne.nodeType===3&&(S+=ne.nodeValue.length),($=ne.firstChild)!==null;)Y=ne,ne=$;for(;;){if(ne===i)break t;if(Y===a&&++J===y&&(I=S),Y===_&&++j===u&&(k=S),($=ne.nextSibling)!==null)break;ne=Y,Y=ne.parentNode}ne=$}a=I===-1||k===-1?null:{start:I,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ph={focusedElem:i,selectionRange:a},Mc=!1,Ot=r;Ot!==null;)if(r=Ot,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,Ot=i;else for(;Ot!==null;){switch(r=Ot,_=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)y=i[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,a=r,y=_.memoizedProps,_=_.memoizedState,u=a.stateNode;try{var pe=zr(a.type,y);i=u.getSnapshotBeforeUpdate(pe,_),u.__reactInternalSnapshotBeforeUpdate=i}catch(Ee){Ze(a,a.return,Ee)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,a=i.nodeType,a===9)Uh(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Uh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Ot=i;break}Ot=r.return}}function Hy(i,r,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:Ki(i,a),u&4&&cl(5,a);break;case 1:if(Ki(i,a),u&4)if(i=a.stateNode,r===null)try{i.componentDidMount()}catch(S){Ze(a,a.return,S)}else{var y=zr(a.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(y,r,i.__reactInternalSnapshotBeforeUpdate)}catch(S){Ze(a,a.return,S)}}u&64&&Oy(a),u&512&&fl(a,a.return);break;case 3:if(Ki(i,a),u&64&&(i=a.updateQueue,i!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{bg(i,r)}catch(S){Ze(a,a.return,S)}}break;case 27:r===null&&u&4&&zy(a);case 26:case 5:Ki(i,a),r===null&&u&4&&By(a),u&512&&fl(a,a.return);break;case 12:Ki(i,a);break;case 31:Ki(i,a),u&4&&Ky(i,a);break;case 13:Ki(i,a),u&4&&Qy(i,a),u&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=QC.bind(null,a),pI(i,a))));break;case 22:if(u=a.memoizedState!==null||Ji,!u){r=r!==null&&r.memoizedState!==null||wt,y=Ji;var _=wt;Ji=u,(wt=r)&&!_?Qi(i,a,(a.subtreeFlags&8772)!==0):Ki(i,a),Ji=y,wt=_}break;case 30:break;default:Ki(i,a)}}function Jy(i){var r=i.alternate;r!==null&&(i.alternate=null,Jy(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&Tr(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ft=null,mn=!1;function Yi(i,r,a){for(a=a.child;a!==null;)Yy(i,r,a),a=a.sibling}function Yy(i,r,a){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(us,a)}catch{}switch(a.tag){case 26:wt||di(a,r),Yi(i,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:wt||di(a,r);var u=ft,y=mn;Js(a.type)&&(ft=a.stateNode,mn=!1),Yi(i,r,a),Tl(a.stateNode),ft=u,mn=y;break;case 5:wt||di(a,r);case 6:if(u=ft,y=mn,ft=null,Yi(i,r,a),ft=u,mn=y,ft!==null)if(mn)try{(ft.nodeType===9?ft.body:ft.nodeName==="HTML"?ft.ownerDocument.body:ft).removeChild(a.stateNode)}catch(_){Ze(a,r,_)}else try{ft.removeChild(a.stateNode)}catch(_){Ze(a,r,_)}break;case 18:ft!==null&&(mn?(i=ft,O_(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),$o(i)):O_(ft,a.stateNode));break;case 4:u=ft,y=mn,ft=a.stateNode.containerInfo,mn=!0,Yi(i,r,a),ft=u,mn=y;break;case 0:case 11:case 14:case 15:Os(2,a,r),wt||Os(4,a,r),Yi(i,r,a);break;case 1:wt||(di(a,r),u=a.stateNode,typeof u.componentWillUnmount=="function"&&qy(a,r,u)),Yi(i,r,a);break;case 21:Yi(i,r,a);break;case 22:wt=(u=wt)||a.memoizedState!==null,Yi(i,r,a),wt=u;break;default:Yi(i,r,a)}}function Ky(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{$o(i)}catch(a){Ze(r,r.return,a)}}}function Qy(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{$o(i)}catch(a){Ze(r,r.return,a)}}function BC(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new Gy),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new Gy),r;default:throw Error(s(435,i.tag))}}function cc(i,r){var a=BC(i);r.forEach(function(u){if(!a.has(u)){a.add(u);var y=$C.bind(null,i,u);u.then(y,y)}})}function gn(i,r){var a=r.deletions;if(a!==null)for(var u=0;u<a.length;u++){var y=a[u],_=i,S=r,I=S;e:for(;I!==null;){switch(I.tag){case 27:if(Js(I.type)){ft=I.stateNode,mn=!1;break e}break;case 5:ft=I.stateNode,mn=!1;break e;case 3:case 4:ft=I.stateNode.containerInfo,mn=!0;break e}I=I.return}if(ft===null)throw Error(s(160));Yy(_,S,y),ft=null,mn=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)$y(r,i),r=r.sibling}var Xn=null;function $y(i,r){var a=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:gn(r,i),yn(i),u&4&&(Os(3,i,i.return),cl(3,i),Os(5,i,i.return));break;case 1:gn(r,i),yn(i),u&512&&(wt||a===null||di(a,a.return)),u&64&&Ji&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var y=Xn;if(gn(r,i),yn(i),u&512&&(wt||a===null||di(a,a.return)),u&4){var _=a!==null?a.memoizedState:null;if(u=i.memoizedState,a===null)if(u===null)if(i.stateNode===null){e:{u=i.type,a=i.memoizedProps,y=y.ownerDocument||y;t:switch(u){case"title":_=y.getElementsByTagName("title")[0],(!_||_[Ni]||_[mt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(u),y.head.insertBefore(_,y.querySelector("head > title"))),Qt(_,u,a),_[mt]=i,vt(_),u=_;break e;case"link":var S=$_("link","href",y).get(u+(a.href||""));if(S){for(var I=0;I<S.length;I++)if(_=S[I],_.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&_.getAttribute("rel")===(a.rel==null?null:a.rel)&&_.getAttribute("title")===(a.title==null?null:a.title)&&_.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){S.splice(I,1);break t}}_=y.createElement(u),Qt(_,u,a),y.head.appendChild(_);break;case"meta":if(S=$_("meta","content",y).get(u+(a.content||""))){for(I=0;I<S.length;I++)if(_=S[I],_.getAttribute("content")===(a.content==null?null:""+a.content)&&_.getAttribute("name")===(a.name==null?null:a.name)&&_.getAttribute("property")===(a.property==null?null:a.property)&&_.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&_.getAttribute("charset")===(a.charSet==null?null:a.charSet)){S.splice(I,1);break t}}_=y.createElement(u),Qt(_,u,a),y.head.appendChild(_);break;default:throw Error(s(468,u))}_[mt]=i,vt(_),u=_}i.stateNode=u}else X_(y,i.type,i.stateNode);else i.stateNode=Q_(y,u,i.memoizedProps);else _!==u?(_===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):_.count--,u===null?X_(y,i.type,i.stateNode):Q_(y,u,i.memoizedProps)):u===null&&i.stateNode!==null&&lh(i,i.memoizedProps,a.memoizedProps)}break;case 27:gn(r,i),yn(i),u&512&&(wt||a===null||di(a,a.return)),a!==null&&u&4&&lh(i,i.memoizedProps,a.memoizedProps);break;case 5:if(gn(r,i),yn(i),u&512&&(wt||a===null||di(a,a.return)),i.flags&32){y=i.stateNode;try{Pn(y,"")}catch(pe){Ze(i,i.return,pe)}}u&4&&i.stateNode!=null&&(y=i.memoizedProps,lh(i,y,a!==null?a.memoizedProps:y)),u&1024&&(fh=!0);break;case 6:if(gn(r,i),yn(i),u&4){if(i.stateNode===null)throw Error(s(162));u=i.memoizedProps,a=i.stateNode;try{a.nodeValue=u}catch(pe){Ze(i,i.return,pe)}}break;case 3:if(Rc=null,y=Xn,Xn=Cc(r.containerInfo),gn(r,i),Xn=y,yn(i),u&4&&a!==null&&a.memoizedState.isDehydrated)try{$o(r.containerInfo)}catch(pe){Ze(i,i.return,pe)}fh&&(fh=!1,Xy(i));break;case 4:u=Xn,Xn=Cc(i.stateNode.containerInfo),gn(r,i),yn(i),Xn=u;break;case 12:gn(r,i),yn(i);break;case 31:gn(r,i),yn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,cc(i,u)));break;case 13:gn(r,i),yn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(dc=zt()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,cc(i,u)));break;case 22:y=i.memoizedState!==null;var k=a!==null&&a.memoizedState!==null,J=Ji,j=wt;if(Ji=J||y,wt=j||k,gn(r,i),wt=j,Ji=J,yn(i),u&8192)e:for(r=i.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(a===null||k||Ji||wt||Gr(i)),a=null,r=i;;){if(r.tag===5||r.tag===26){if(a===null){k=a=r;try{if(_=k.stateNode,y)S=_.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{I=k.stateNode;var ne=k.memoizedProps.style,Y=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;I.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(pe){Ze(k,k.return,pe)}}}else if(r.tag===6){if(a===null){k=r;try{k.stateNode.nodeValue=y?"":k.memoizedProps}catch(pe){Ze(k,k.return,pe)}}}else if(r.tag===18){if(a===null){k=r;try{var $=k.stateNode;y?q_($,!0):q_(k.stateNode,!1)}catch(pe){Ze(k,k.return,pe)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=i.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,cc(i,a))));break;case 19:gn(r,i),yn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,cc(i,u)));break;case 30:break;case 21:break;default:gn(r,i),yn(i)}}function yn(i){var r=i.flags;if(r&2){try{for(var a,u=i.return;u!==null;){if(Fy(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var y=a.stateNode,_=uh(i);uc(i,_,y);break;case 5:var S=a.stateNode;a.flags&32&&(Pn(S,""),a.flags&=-33);var I=uh(i);uc(i,I,S);break;case 3:case 4:var k=a.stateNode.containerInfo,J=uh(i);ch(i,J,k);break;default:throw Error(s(161))}}catch(j){Ze(i,i.return,j)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function Xy(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;Xy(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function Ki(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Hy(i,r.alternate,r),r=r.sibling}function Gr(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:Os(4,r,r.return),Gr(r);break;case 1:di(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&qy(r,r.return,a),Gr(r);break;case 27:Tl(r.stateNode);case 26:case 5:di(r,r.return),Gr(r);break;case 22:r.memoizedState===null&&Gr(r);break;case 30:Gr(r);break;default:Gr(r)}i=i.sibling}}function Qi(i,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,y=i,_=r,S=_.flags;switch(_.tag){case 0:case 11:case 15:Qi(y,_,a),cl(4,_);break;case 1:if(Qi(y,_,a),u=_,y=u.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(J){Ze(u,u.return,J)}if(u=_,y=u.updateQueue,y!==null){var I=u.stateNode;try{var k=y.shared.hiddenCallbacks;if(k!==null)for(y.shared.hiddenCallbacks=null,y=0;y<k.length;y++)wg(k[y],I)}catch(J){Ze(u,u.return,J)}}a&&S&64&&Oy(_),fl(_,_.return);break;case 27:zy(_);case 26:case 5:Qi(y,_,a),a&&u===null&&S&4&&By(_),fl(_,_.return);break;case 12:Qi(y,_,a);break;case 31:Qi(y,_,a),a&&S&4&&Ky(y,_);break;case 13:Qi(y,_,a),a&&S&4&&Qy(y,_);break;case 22:_.memoizedState===null&&Qi(y,_,a),fl(_,_.return);break;case 30:break;default:Qi(y,_,a)}r=r.sibling}}function dh(i,r){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&Wa(a))}function hh(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Wa(i))}function Wn(i,r,a,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Wy(i,r,a,u),r=r.sibling}function Wy(i,r,a,u){var y=r.flags;switch(r.tag){case 0:case 11:case 15:Wn(i,r,a,u),y&2048&&cl(9,r);break;case 1:Wn(i,r,a,u);break;case 3:Wn(i,r,a,u),y&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Wa(i)));break;case 12:if(y&2048){Wn(i,r,a,u),i=r.stateNode;try{var _=r.memoizedProps,S=_.id,I=_.onPostCommit;typeof I=="function"&&I(S,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(k){Ze(r,r.return,k)}}else Wn(i,r,a,u);break;case 31:Wn(i,r,a,u);break;case 13:Wn(i,r,a,u);break;case 23:break;case 22:_=r.stateNode,S=r.alternate,r.memoizedState!==null?_._visibility&2?Wn(i,r,a,u):dl(i,r):_._visibility&2?Wn(i,r,a,u):(_._visibility|=2,Oo(i,r,a,u,(r.subtreeFlags&10256)!==0||!1)),y&2048&&dh(S,r);break;case 24:Wn(i,r,a,u),y&2048&&hh(r.alternate,r);break;default:Wn(i,r,a,u)}}function Oo(i,r,a,u,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var _=i,S=r,I=a,k=u,J=S.flags;switch(S.tag){case 0:case 11:case 15:Oo(_,S,I,k,y),cl(8,S);break;case 23:break;case 22:var j=S.stateNode;S.memoizedState!==null?j._visibility&2?Oo(_,S,I,k,y):dl(_,S):(j._visibility|=2,Oo(_,S,I,k,y)),y&&J&2048&&dh(S.alternate,S);break;case 24:Oo(_,S,I,k,y),y&&J&2048&&hh(S.alternate,S);break;default:Oo(_,S,I,k,y)}r=r.sibling}}function dl(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=i,u=r,y=u.flags;switch(u.tag){case 22:dl(a,u),y&2048&&dh(u.alternate,u);break;case 24:dl(a,u),y&2048&&hh(u.alternate,u);break;default:dl(a,u)}r=r.sibling}}var hl=8192;function qo(i,r,a){if(i.subtreeFlags&hl)for(i=i.child;i!==null;)Zy(i,r,a),i=i.sibling}function Zy(i,r,a){switch(i.tag){case 26:qo(i,r,a),i.flags&hl&&i.memoizedState!==null&&RI(a,Xn,i.memoizedState,i.memoizedProps);break;case 5:qo(i,r,a);break;case 3:case 4:var u=Xn;Xn=Cc(i.stateNode.containerInfo),qo(i,r,a),Xn=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=hl,hl=16777216,qo(i,r,a),hl=u):qo(i,r,a));break;default:qo(i,r,a)}}function jy(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function pl(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];Ot=u,t_(u,i)}jy(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)e_(i),i=i.sibling}function e_(i){switch(i.tag){case 0:case 11:case 15:pl(i),i.flags&2048&&Os(9,i,i.return);break;case 3:pl(i);break;case 12:pl(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,fc(i)):pl(i);break;default:pl(i)}}function fc(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];Ot=u,t_(u,i)}jy(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:Os(8,r,r.return),fc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,fc(r));break;default:fc(r)}i=i.sibling}}function t_(i,r){for(;Ot!==null;){var a=Ot;switch(a.tag){case 0:case 11:case 15:Os(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Wa(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Ot=u;else e:for(a=i;Ot!==null;){u=Ot;var y=u.sibling,_=u.return;if(Jy(u),u===a){Ot=null;break e}if(y!==null){y.return=_,Ot=y;break e}Ot=_}}}var FC={getCacheForType:function(i){var r=Yt(Ct),a=r.data.get(i);return a===void 0&&(a=i(),r.data.set(i,a)),a},cacheSignal:function(){return Yt(Ct).controller.signal}},zC=typeof WeakMap=="function"?WeakMap:Map,Qe=0,nt=null,Ue=null,Oe=0,We=0,wn=null,qs=!1,Bo=!1,ph=!1,$i=0,_t=0,Bs=0,Hr=0,mh=0,bn=0,Fo=0,ml=null,_n=null,gh=!1,dc=0,n_=0,hc=1/0,pc=null,Fs=null,xt=0,zs=null,zo=null,Xi=0,yh=0,_h=null,i_=null,gl=0,vh=null;function Nn(){return(Qe&2)!==0&&Oe!==0?Oe&-Oe:F.T!==null?Ih():bi()}function s_(){if(bn===0)if((Oe&536870912)===0||ze){var i=ni;ni<<=1,(ni&3932160)===0&&(ni=262144),bn=i}else bn=536870912;return i=In.current,i!==null&&(i.flags|=32),bn}function vn(i,r,a){(i===nt&&(We===2||We===9)||i.cancelPendingCommit!==null)&&(Go(i,0),Gs(i,Oe,bn,!1)),ds(i,a),((Qe&2)===0||i!==nt)&&(i===nt&&((Qe&2)===0&&(Hr|=a),_t===4&&Gs(i,Oe,bn,!1)),hi(i))}function r_(i,r,a){if((Qe&6)!==0)throw Error(s(327));var u=!a&&(r&127)===0&&(r&i.expiredLanes)===0||fs(i,r),y=u?JC(i,r):Eh(i,r,!0),_=u;do{if(y===0){Bo&&!u&&Gs(i,r,0,!1);break}else{if(a=i.current.alternate,_&&!GC(a)){y=Eh(i,r,!1),_=!1;continue}if(y===2){if(_=r,i.errorRecoveryDisabledLanes&_)var S=0;else S=i.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){r=S;e:{var I=i;y=ml;var k=I.current.memoizedState.isDehydrated;if(k&&(Go(I,S).flags|=256),S=Eh(I,S,!1),S!==2){if(ph&&!k){I.errorRecoveryDisabledLanes|=_,Hr|=_,y=4;break e}_=_n,_n=y,_!==null&&(_n===null?_n=_:_n.push.apply(_n,_))}y=S}if(_=!1,y!==2)continue}}if(y===1){Go(i,0),Gs(i,r,0,!0);break}e:{switch(u=i,_=y,_){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Gs(u,r,bn,!qs);break e;case 2:_n=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(y=dc+300-zt(),10<y)){if(Gs(u,r,bn,!qs),xn(u,0,!0)!==0)break e;Xi=r,u.timeoutHandle=U_(o_.bind(null,u,a,_n,pc,gh,r,bn,Hr,Fo,qs,_,"Throttled",-0,0),y);break e}o_(u,a,_n,pc,gh,r,bn,Hr,Fo,qs,_,null,-0,0)}}break}while(!0);hi(i)}function o_(i,r,a,u,y,_,S,I,k,J,j,ne,Y,$){if(i.timeoutHandle=-1,ne=r.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vt},Zy(r,_,ne);var pe=(_&62914560)===_?dc-zt():(_&4194048)===_?n_-zt():0;if(pe=wI(ne,pe),pe!==null){Xi=_,i.cancelPendingCommit=pe(p_.bind(null,i,r,_,a,u,y,S,I,k,j,ne,null,Y,$)),Gs(i,_,S,!J);return}}p_(i,r,_,a,u,y,S,I,k)}function GC(i){for(var r=i;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var y=a[u],_=y.getSnapshot;y=y.value;try{if(!An(_(),y))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Gs(i,r,a,u){r&=~mh,r&=~Hr,i.suspendedLanes|=r,i.pingedLanes&=~r,u&&(i.warmLanes|=r),u=i.expirationTimes;for(var y=r;0<y;){var _=31-an(y),S=1<<_;u[_]=-1,y&=~S}a!==0&&Ma(i,a,r)}function mc(){return(Qe&6)===0?(yl(0),!1):!0}function Th(){if(Ue!==null){if(We===0)var i=Ue.return;else i=Ue,qi=Vr=null,Ud(i),Po=null,ja=0,i=Ue;for(;i!==null;)Ly(i.alternate,i),i=i.return;Ue=null}}function Go(i,r){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,uI(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),Xi=0,Th(),nt=i,Ue=a=Li(i.current,null),Oe=r,We=0,wn=null,qs=!1,Bo=fs(i,r),ph=!1,Fo=bn=mh=Hr=Bs=_t=0,_n=ml=null,gh=!1,(r&8)!==0&&(r|=r&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=r;0<u;){var y=31-an(u),_=1<<y;r|=i[y],u&=~_}return $i=r,Uu(),a}function a_(i,r){Ne=null,F.H=al,r===Do||r===Hu?(r=Ag(),We=3):r===Cd?(r=Ag(),We=4):We=r===Zd?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,wn=r,Ue===null&&(_t=1,sc(i,Vn(r,i.current)))}function l_(){var i=In.current;return i===null?!0:(Oe&4194048)===Oe?qn===null:(Oe&62914560)===Oe||(Oe&536870912)!==0?i===qn:!1}function u_(){var i=F.H;return F.H=al,i===null?al:i}function c_(){var i=F.A;return F.A=FC,i}function gc(){_t=4,qs||(Oe&4194048)!==Oe&&In.current!==null||(Bo=!0),(Bs&134217727)===0&&(Hr&134217727)===0||nt===null||Gs(nt,Oe,bn,!1)}function Eh(i,r,a){var u=Qe;Qe|=2;var y=u_(),_=c_();(nt!==i||Oe!==r)&&(pc=null,Go(i,r)),r=!1;var S=_t;e:do try{if(We!==0&&Ue!==null){var I=Ue,k=wn;switch(We){case 8:Th(),S=6;break e;case 3:case 2:case 9:case 6:In.current===null&&(r=!0);var J=We;if(We=0,wn=null,Ho(i,I,k,J),a&&Bo){S=0;break e}break;default:J=We,We=0,wn=null,Ho(i,I,k,J)}}HC(),S=_t;break}catch(j){a_(i,j)}while(!0);return r&&i.shellSuspendCounter++,qi=Vr=null,Qe=u,F.H=y,F.A=_,Ue===null&&(nt=null,Oe=0,Uu()),S}function HC(){for(;Ue!==null;)f_(Ue)}function JC(i,r){var a=Qe;Qe|=2;var u=u_(),y=c_();nt!==i||Oe!==r?(pc=null,hc=zt()+500,Go(i,r)):Bo=fs(i,r);e:do try{if(We!==0&&Ue!==null){r=Ue;var _=wn;t:switch(We){case 1:We=0,wn=null,Ho(i,r,_,1);break;case 2:case 9:if(Eg(_)){We=0,wn=null,d_(r);break}r=function(){We!==2&&We!==9||nt!==i||(We=7),hi(i)},_.then(r,r);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:Eg(_)?(We=0,wn=null,d_(r)):(We=0,wn=null,Ho(i,r,_,7));break;case 5:var S=null;switch(Ue.tag){case 26:S=Ue.memoizedState;case 5:case 27:var I=Ue;if(S?W_(S):I.stateNode.complete){We=0,wn=null;var k=I.sibling;if(k!==null)Ue=k;else{var J=I.return;J!==null?(Ue=J,yc(J)):Ue=null}break t}}We=0,wn=null,Ho(i,r,_,5);break;case 6:We=0,wn=null,Ho(i,r,_,6);break;case 8:Th(),_t=6;break e;default:throw Error(s(462))}}YC();break}catch(j){a_(i,j)}while(!0);return qi=Vr=null,F.H=u,F.A=y,Qe=a,Ue!==null?0:(nt=null,Oe=0,Uu(),_t)}function YC(){for(;Ue!==null&&!Kf();)f_(Ue)}function f_(i){var r=Vy(i.alternate,i,$i);i.memoizedProps=i.pendingProps,r===null?yc(i):Ue=r}function d_(i){var r=i,a=r.alternate;switch(r.tag){case 15:case 0:r=Ny(a,r,r.pendingProps,r.type,void 0,Oe);break;case 11:r=Ny(a,r,r.pendingProps,r.type.render,r.ref,Oe);break;case 5:Ud(r);default:Ly(a,r),r=Ue=cg(r,$i),r=Vy(a,r,$i)}i.memoizedProps=i.pendingProps,r===null?yc(i):Ue=r}function Ho(i,r,a,u){qi=Vr=null,Ud(r),Po=null,ja=0;var y=r.return;try{if(kC(i,y,r,a,Oe)){_t=1,sc(i,Vn(a,i.current)),Ue=null;return}}catch(_){if(y!==null)throw Ue=y,_;_t=1,sc(i,Vn(a,i.current)),Ue=null;return}r.flags&32768?(ze||u===1?i=!0:Bo||(Oe&536870912)!==0?i=!1:(qs=i=!0,(u===2||u===9||u===3||u===6)&&(u=In.current,u!==null&&u.tag===13&&(u.flags|=16384))),h_(r,i)):yc(r)}function yc(i){var r=i;do{if((r.flags&32768)!==0){h_(r,qs);return}i=r.return;var a=LC(r.alternate,r,$i);if(a!==null){Ue=a;return}if(r=r.sibling,r!==null){Ue=r;return}Ue=r=i}while(r!==null);_t===0&&(_t=5)}function h_(i,r){do{var a=OC(i.alternate,i);if(a!==null){a.flags&=32767,Ue=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(i=i.sibling,i!==null)){Ue=i;return}Ue=i=a}while(i!==null);_t=6,Ue=null}function p_(i,r,a,u,y,_,S,I,k){i.cancelPendingCommit=null;do _c();while(xt!==0);if((Qe&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(_=r.lanes|r.childLanes,_|=ud,Gt(i,a,_,S,I,k),i===nt&&(Ue=nt=null,Oe=0),zo=r,zs=i,Xi=a,yh=_,_h=y,i_=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,XC(Ri,function(){return v_(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=F.T,F.T=null,y=Z.p,Z.p=2,S=Qe,Qe|=4;try{qC(i,r,a)}finally{Qe=S,Z.p=y,F.T=u}}xt=1,m_(),g_(),y_()}}function m_(){if(xt===1){xt=0;var i=zs,r=zo,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=F.T,F.T=null;var u=Z.p;Z.p=2;var y=Qe;Qe|=4;try{$y(r,i);var _=Ph,S=tg(i.containerInfo),I=_.focusedElem,k=_.selectionRange;if(S!==I&&I&&I.ownerDocument&&eg(I.ownerDocument.documentElement,I)){if(k!==null&&sd(I)){var J=k.start,j=k.end;if(j===void 0&&(j=J),"selectionStart"in I)I.selectionStart=J,I.selectionEnd=Math.min(j,I.value.length);else{var ne=I.ownerDocument||document,Y=ne&&ne.defaultView||window;if(Y.getSelection){var $=Y.getSelection(),pe=I.textContent.length,Ee=Math.min(k.start,pe),tt=k.end===void 0?Ee:Math.min(k.end,pe);!$.extend&&Ee>tt&&(S=tt,tt=Ee,Ee=S);var B=jm(I,Ee),L=jm(I,tt);if(B&&L&&($.rangeCount!==1||$.anchorNode!==B.node||$.anchorOffset!==B.offset||$.focusNode!==L.node||$.focusOffset!==L.offset)){var H=ne.createRange();H.setStart(B.node,B.offset),$.removeAllRanges(),Ee>tt?($.addRange(H),$.extend(L.node,L.offset)):(H.setEnd(L.node,L.offset),$.addRange(H))}}}}for(ne=[],$=I;$=$.parentNode;)$.nodeType===1&&ne.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ne.length;I++){var te=ne[I];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}Mc=!!Dh,Ph=Dh=null}finally{Qe=y,Z.p=u,F.T=a}}i.current=r,xt=2}}function g_(){if(xt===2){xt=0;var i=zs,r=zo,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=F.T,F.T=null;var u=Z.p;Z.p=2;var y=Qe;Qe|=4;try{Hy(i,r.alternate,r)}finally{Qe=y,Z.p=u,F.T=a}}xt=3}}function y_(){if(xt===4||xt===3){xt=0,Ra();var i=zs,r=zo,a=Xi,u=i_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?xt=5:(xt=0,zo=zs=null,__(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(Fs=null),Da(a),r=r.stateNode,Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(us,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=F.T,y=Z.p,Z.p=2,F.T=null;try{for(var _=i.onRecoverableError,S=0;S<u.length;S++){var I=u[S];_(I.value,{componentStack:I.stack})}}finally{F.T=r,Z.p=y}}(Xi&3)!==0&&_c(),hi(i),y=i.pendingLanes,(a&261930)!==0&&(y&42)!==0?i===vh?gl++:(gl=0,vh=i):gl=0,yl(0)}}function __(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,Wa(r)))}function _c(){return m_(),g_(),y_(),v_()}function v_(){if(xt!==5)return!1;var i=zs,r=yh;yh=0;var a=Da(Xi),u=F.T,y=Z.p;try{Z.p=32>a?32:a,F.T=null,a=_h,_h=null;var _=zs,S=Xi;if(xt=0,zo=zs=null,Xi=0,(Qe&6)!==0)throw Error(s(331));var I=Qe;if(Qe|=4,e_(_.current),Wy(_,_.current,S,a),Qe=I,yl(0,!1),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(us,_)}catch{}return!0}finally{Z.p=y,F.T=u,__(i,r)}}function T_(i,r,a){r=Vn(a,r),r=Wd(i.stateNode,r,2),i=Vs(i,r,2),i!==null&&(ds(i,2),hi(i))}function Ze(i,r,a){if(i.tag===3)T_(i,i,a);else for(;r!==null;){if(r.tag===3){T_(r,i,a);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Fs===null||!Fs.has(u))){i=Vn(a,i),a=Ey(2),u=Vs(r,a,2),u!==null&&(Sy(a,u,r,i),ds(u,2),hi(u));break}}r=r.return}}function Sh(i,r,a){var u=i.pingCache;if(u===null){u=i.pingCache=new zC;var y=new Set;u.set(r,y)}else y=u.get(r),y===void 0&&(y=new Set,u.set(r,y));y.has(a)||(ph=!0,y.add(a),i=KC.bind(null,i,r,a),r.then(i,i))}function KC(i,r,a){var u=i.pingCache;u!==null&&u.delete(r),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,nt===i&&(Oe&a)===a&&(_t===4||_t===3&&(Oe&62914560)===Oe&&300>zt()-dc?(Qe&2)===0&&Go(i,0):mh|=a,Fo===Oe&&(Fo=0)),hi(i)}function E_(i,r){r===0&&(r=Na()),i=Dr(i,r),i!==null&&(ds(i,r),hi(i))}function QC(i){var r=i.memoizedState,a=0;r!==null&&(a=r.retryLane),E_(i,a)}function $C(i,r){var a=0;switch(i.tag){case 31:case 13:var u=i.stateNode,y=i.memoizedState;y!==null&&(a=y.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(r),E_(i,a)}function XC(i,r){return yr(i,r)}var vc=null,Jo=null,Ah=!1,Tc=!1,Ch=!1,Hs=0;function hi(i){i!==Jo&&i.next===null&&(Jo===null?vc=Jo=i:Jo=Jo.next=i),Tc=!0,Ah||(Ah=!0,ZC())}function yl(i,r){if(!Ch&&Tc){Ch=!0;do for(var a=!1,u=vc;u!==null;){if(i!==0){var y=u.pendingLanes;if(y===0)var _=0;else{var S=u.suspendedLanes,I=u.pingedLanes;_=(1<<31-an(42|i)+1)-1,_&=y&~(S&~I),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(a=!0,I_(u,_))}else _=Oe,_=xn(u,u===nt?_:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(_&3)===0||fs(u,_)||(a=!0,I_(u,_));u=u.next}while(a);Ch=!1}}function WC(){S_()}function S_(){Tc=Ah=!1;var i=0;Hs!==0&&lI()&&(i=Hs);for(var r=zt(),a=null,u=vc;u!==null;){var y=u.next,_=A_(u,r);_===0?(u.next=null,a===null?vc=y:a.next=y,y===null&&(Jo=a)):(a=u,(i!==0||(_&3)!==0)&&(Tc=!0)),u=y}xt!==0&&xt!==5||yl(i),Hs!==0&&(Hs=0)}function A_(i,r){for(var a=i.suspendedLanes,u=i.pingedLanes,y=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var S=31-an(_),I=1<<S,k=y[S];k===-1?((I&a)===0||(I&u)!==0)&&(y[S]=co(I,r)):k<=r&&(i.expiredLanes|=I),_&=~I}if(r=nt,a=Oe,a=xn(i,i===r?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,a===0||i===r&&(We===2||We===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&uo(u),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||fs(i,a)){if(r=a&-a,r===i.callbackPriority)return r;switch(u!==null&&uo(u),Da(a)){case 2:case 8:a=kt;break;case 32:a=Ri;break;case 268435456:a=wa;break;default:a=Ri}return u=C_.bind(null,i),a=yr(a,u),i.callbackPriority=r,i.callbackNode=a,r}return u!==null&&u!==null&&uo(u),i.callbackPriority=2,i.callbackNode=null,2}function C_(i,r){if(xt!==0&&xt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(_c()&&i.callbackNode!==a)return null;var u=Oe;return u=xn(i,i===nt?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(r_(i,u,r),A_(i,zt()),i.callbackNode!=null&&i.callbackNode===a?C_.bind(null,i):null)}function I_(i,r){if(_c())return null;r_(i,r,!0)}function ZC(){cI(function(){(Qe&6)!==0?yr(Mt,WC):S_()})}function Ih(){if(Hs===0){var i=Mo;i===0&&(i=vr,vr<<=1,(vr&261888)===0&&(vr=256)),Hs=i}return Hs}function R_(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:ai(""+i)}function w_(i,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,i.id&&a.setAttribute("form",i.id),r.parentNode.insertBefore(a,r),i=new FormData(i),a.parentNode.removeChild(a),i}function jC(i,r,a,u,y){if(r==="submit"&&a&&a.stateNode===y){var _=R_((y[Ht]||null).action),S=u.submitter;S&&(r=(r=S[Ht]||null)?R_(r.formAction):S.getAttribute("formAction"),r!==null&&(_=r,S=null));var I=new Ir("action","action",null,u,y);i.push({event:I,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Hs!==0){var k=S?w_(y,S):new FormData(y);Jd(a,{pending:!0,data:k,method:y.method,action:_},null,k)}}else typeof _=="function"&&(I.preventDefault(),k=S?w_(y,S):new FormData(y),Jd(a,{pending:!0,data:k,method:y.method,action:_},_,k))},currentTarget:y}]})}}for(var Rh=0;Rh<ld.length;Rh++){var wh=ld[Rh],eI=wh.toLowerCase(),tI=wh[0].toUpperCase()+wh.slice(1);$n(eI,"on"+tI)}$n(sg,"onAnimationEnd"),$n(rg,"onAnimationIteration"),$n(og,"onAnimationStart"),$n("dblclick","onDoubleClick"),$n("focusin","onFocus"),$n("focusout","onBlur"),$n(yC,"onTransitionRun"),$n(_C,"onTransitionStart"),$n(vC,"onTransitionCancel"),$n(ag,"onTransitionEnd"),oi("onMouseEnter",["mouseout","mouseover"]),oi("onMouseLeave",["mouseout","mouseover"]),oi("onPointerEnter",["pointerout","pointerover"]),oi("onPointerLeave",["pointerout","pointerover"]),ln("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ln("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ln("onBeforeInput",["compositionend","keypress","textInput","paste"]),ln("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ln("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ln("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_l));function b_(i,r){r=(r&4)!==0;for(var a=0;a<i.length;a++){var u=i[a],y=u.event;u=u.listeners;e:{var _=void 0;if(r)for(var S=u.length-1;0<=S;S--){var I=u[S],k=I.instance,J=I.currentTarget;if(I=I.listener,k!==_&&y.isPropagationStopped())break e;_=I,y.currentTarget=J;try{_(y)}catch(j){Vu(j)}y.currentTarget=null,_=k}else for(S=0;S<u.length;S++){if(I=u[S],k=I.instance,J=I.currentTarget,I=I.listener,k!==_&&y.isPropagationStopped())break e;_=I,y.currentTarget=J;try{_(y)}catch(j){Vu(j)}y.currentTarget=null,_=k}}}}function Le(i,r){var a=r[ms];a===void 0&&(a=r[ms]=new Set);var u=i+"__bubble";a.has(u)||(N_(r,i,2,!1),a.add(u))}function bh(i,r,a){var u=0;r&&(u|=4),N_(a,i,u,r)}var Ec="_reactListening"+Math.random().toString(36).slice(2);function Nh(i){if(!i[Ec]){i[Ec]=!0,fo.forEach(function(a){a!=="selectionchange"&&(nI.has(a)||bh(a,!1,i),bh(a,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Ec]||(r[Ec]=!0,bh("selectionchange",!1,r))}}function N_(i,r,a,u){switch(sv(r)){case 2:var y=MI;break;case 8:y=xI;break;default:y=Hh}a=y.bind(null,r,a,i),y=void 0,!Ba||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),u?y!==void 0?i.addEventListener(r,a,{capture:!0,passive:y}):i.addEventListener(r,a,!0):y!==void 0?i.addEventListener(r,a,{passive:y}):i.addEventListener(r,a,!1)}function Mh(i,r,a,u,y){var _=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var I=u.stateNode.containerInfo;if(I===y)break;if(S===4)for(S=u.return;S!==null;){var k=S.tag;if((k===3||k===4)&&S.stateNode.containerInfo===y)return;S=S.return}for(;I!==null;){if(S=Mi(I),S===null)return;if(k=S.tag,k===5||k===6||k===26||k===27){u=_=S;continue e}I=I.parentNode}}u=u.return}vu(function(){var J=_,j=yo(a),ne=[];e:{var Y=lg.get(i);if(Y!==void 0){var $=Ir,pe=i;switch(i){case"keypress":if(Cr(a)===0)break e;case"keydown":case"keyup":$=bu;break;case"focusin":pe="focus",$=Is;break;case"focusout":pe="blur",$=Is;break;case"beforeblur":case"afterblur":$=Is;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=Eu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=Su;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=Mu;break;case sg:case rg:case og:$=To;break;case ag:$=Eo;break;case"scroll":case"scrollend":$=Tu;break;case"wheel":$=Du;break;case"copy":case"cut":case"paste":$=Cu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=Ja;break;case"toggle":case"beforetoggle":$=ws}var Ee=(r&4)!==0,tt=!Ee&&(i==="scroll"||i==="scrollend"),B=Ee?Y!==null?Y+"Capture":null:Y;Ee=[];for(var L=J,H;L!==null;){var te=L;if(H=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||H===null||B===null||(te=hn(L,B),te!=null&&Ee.push(vl(L,te,H))),tt)break;L=L.return}0<Ee.length&&(Y=new $(Y,pe,null,a,j),ne.push({event:Y,listeners:Ee}))}}if((r&7)===0){e:{if(Y=i==="mouseover"||i==="pointerover",$=i==="mouseout"||i==="pointerout",Y&&a!==go&&(pe=a.relatedTarget||a.fromElement)&&(Mi(pe)||pe[si]))break e;if(($||Y)&&(Y=j.window===j?j:(Y=j.ownerDocument)?Y.defaultView||Y.parentWindow:window,$?(pe=a.relatedTarget||a.toElement,$=J,pe=pe?Mi(pe):null,pe!==null&&(tt=l(pe),Ee=pe.tag,pe!==tt||Ee!==5&&Ee!==27&&Ee!==6)&&(pe=null)):($=null,pe=J),$!==pe)){if(Ee=Eu,te="onMouseLeave",B="onMouseEnter",L="mouse",(i==="pointerout"||i==="pointerover")&&(Ee=Ja,te="onPointerLeave",B="onPointerEnter",L="pointer"),tt=$==null?Y:Er($),H=pe==null?Y:Er(pe),Y=new Ee(te,L+"leave",$,a,j),Y.target=tt,Y.relatedTarget=H,te=null,Mi(j)===J&&(Ee=new Ee(B,L+"enter",pe,a,j),Ee.target=H,Ee.relatedTarget=tt,te=Ee),tt=te,$&&pe)t:{for(Ee=iI,B=$,L=pe,H=0,te=B;te;te=Ee(te))H++;te=0;for(var _e=L;_e;_e=Ee(_e))te++;for(;0<H-te;)B=Ee(B),H--;for(;0<te-H;)L=Ee(L),te--;for(;H--;){if(B===L||L!==null&&B===L.alternate){Ee=B;break t}B=Ee(B),L=Ee(L)}Ee=null}else Ee=null;$!==null&&M_(ne,Y,$,Ee,!1),pe!==null&&tt!==null&&M_(ne,tt,pe,Ee,!0)}}e:{if(Y=J?Er(J):window,$=Y.nodeName&&Y.nodeName.toLowerCase(),$==="select"||$==="input"&&Y.type==="file")var Je=Km;else if(pn(Y))if(Qm)Je=pC;else{Je=dC;var ge=fC}else $=Y.nodeName,!$||$.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?J&&Oa(J.elementType)&&(Je=Km):Je=hC;if(Je&&(Je=Je(i,J))){Nr(ne,Je,a,j);break e}ge&&ge(i,Y,J),i==="focusout"&&J&&Y.type==="number"&&J.memoizedProps.value!=null&&mo(Y,"number",Y.value)}switch(ge=J?Er(J):window,i){case"focusin":(pn(ge)||ge.contentEditable==="true")&&(So=ge,rd=J,Qa=null);break;case"focusout":Qa=rd=So=null;break;case"mousedown":od=!0;break;case"contextmenu":case"mouseup":case"dragend":od=!1,ng(ne,a,j);break;case"selectionchange":if(gC)break;case"keydown":case"keyup":ng(ne,a,j)}var xe;if(T)e:{switch(i){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else Pe?$e(i,a)&&(qe="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(qe="onCompositionStart");qe&&(z&&a.locale!=="ko"&&(Pe||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&Pe&&(xe=Es()):(Sn=j,_o="value"in Sn?Sn.value:Sn.textContent,Pe=!0)),ge=Sc(J,qe),0<ge.length&&(qe=new za(qe,i,null,a,j),ne.push({event:qe,listeners:ge}),xe?qe.data=xe:(xe=At(a),xe!==null&&(qe.data=xe)))),(xe=R?Ut(i,a):Lt(i,a))&&(qe=Sc(J,"onBeforeInput"),0<qe.length&&(ge=new za("onBeforeInput","beforeinput",null,a,j),ne.push({event:ge,listeners:qe}),ge.data=xe)),jC(ne,i,J,a,j)}b_(ne,r)})}function vl(i,r,a){return{instance:i,listener:r,currentTarget:a}}function Sc(i,r){for(var a=r+"Capture",u=[];i!==null;){var y=i,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=hn(i,a),y!=null&&u.unshift(vl(i,y,_)),y=hn(i,r),y!=null&&u.push(vl(i,y,_))),i.tag===3)return u;i=i.return}return[]}function iI(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function M_(i,r,a,u,y){for(var _=r._reactName,S=[];a!==null&&a!==u;){var I=a,k=I.alternate,J=I.stateNode;if(I=I.tag,k!==null&&k===u)break;I!==5&&I!==26&&I!==27||J===null||(k=J,y?(J=hn(a,_),J!=null&&S.unshift(vl(a,J,k))):y||(J=hn(a,_),J!=null&&S.push(vl(a,J,k)))),a=a.return}S.length!==0&&i.push({event:r,listeners:S})}var sI=/\r\n?/g,rI=/\u0000|\uFFFD/g;function x_(i){return(typeof i=="string"?i:""+i).replace(sI,`
`).replace(rI,"")}function D_(i,r){return r=x_(r),x_(i)===r}function et(i,r,a,u,y,_){switch(a){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||Pn(i,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&Pn(i,""+u);break;case"className":_s(i,"class",u);break;case"tabIndex":_s(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":_s(i,a,u);break;case"style":yu(i,u,_);break;case"data":if(r!=="object"){_s(i,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||a!=="href")){i.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=ai(""+u),i.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(a==="formAction"?(r!=="input"&&et(i,r,"name",y.name,y,null),et(i,r,"formEncType",y.formEncType,y,null),et(i,r,"formMethod",y.formMethod,y,null),et(i,r,"formTarget",y.formTarget,y,null)):(et(i,r,"encType",y.encType,y,null),et(i,r,"method",y.method,y,null),et(i,r,"target",y.target,y,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=ai(""+u),i.setAttribute(a,u);break;case"onClick":u!=null&&(i.onclick=Vt);break;case"onScroll":u!=null&&Le("scroll",i);break;case"onScrollEnd":u!=null&&Le("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}a=ai(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""+u):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":u===!0?i.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,u):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(a,u):i.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(a):i.setAttribute(a,u);break;case"popover":Le("beforetoggle",i),Le("toggle",i),ys(i,"popover",u);break;case"xlinkActuate":Dn(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Dn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Dn(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Dn(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Dn(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Dn(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Dn(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Dn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Dn(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ys(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=jf.get(a)||a,ys(i,a,u))}}function xh(i,r,a,u,y,_){switch(a){case"style":yu(i,u,_);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof u=="string"?Pn(i,u):(typeof u=="number"||typeof u=="bigint")&&Pn(i,""+u);break;case"onScroll":u!=null&&Le("scroll",i);break;case"onScrollEnd":u!=null&&Le("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Vt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!gs.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),r=a.slice(2,y?a.length-7:void 0),_=i[Ht]||null,_=_!=null?_[a]:null,typeof _=="function"&&i.removeEventListener(r,_,y),typeof u=="function")){typeof _!="function"&&_!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(r,u,y);break e}a in i?i[a]=u:u===!0?i.setAttribute(a,""):ys(i,a,u)}}}function Qt(i,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",i),Le("load",i);var u=!1,y=!1,_;for(_ in a)if(a.hasOwnProperty(_)){var S=a[_];if(S!=null)switch(_){case"src":u=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:et(i,r,_,S,a,null)}}y&&et(i,r,"srcSet",a.srcSet,a,null),u&&et(i,r,"src",a.src,a,null);return;case"input":Le("invalid",i);var I=_=S=y=null,k=null,J=null;for(u in a)if(a.hasOwnProperty(u)){var j=a[u];if(j!=null)switch(u){case"name":y=j;break;case"type":S=j;break;case"checked":k=j;break;case"defaultChecked":J=j;break;case"value":_=j;break;case"defaultValue":I=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(137,r));break;default:et(i,r,u,j,a,null)}}Sr(i,_,I,k,J,S,y,!1);return;case"select":Le("invalid",i),u=S=_=null;for(y in a)if(a.hasOwnProperty(y)&&(I=a[y],I!=null))switch(y){case"value":_=I;break;case"defaultValue":S=I;break;case"multiple":u=I;default:et(i,r,y,I,a,null)}r=_,a=S,i.multiple=!!u,r!=null?He(i,!!u,r,!1):a!=null&&He(i,!!u,a,!0);return;case"textarea":Le("invalid",i),_=y=u=null;for(S in a)if(a.hasOwnProperty(S)&&(I=a[S],I!=null))switch(S){case"value":u=I;break;case"defaultValue":y=I;break;case"children":_=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(s(91));break;default:et(i,r,S,I,a,null)}Ts(i,u,y,_);return;case"option":for(k in a)if(a.hasOwnProperty(k)&&(u=a[k],u!=null))switch(k){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:et(i,r,k,u,a,null)}return;case"dialog":Le("beforetoggle",i),Le("toggle",i),Le("cancel",i),Le("close",i);break;case"iframe":case"object":Le("load",i);break;case"video":case"audio":for(u=0;u<_l.length;u++)Le(_l[u],i);break;case"image":Le("error",i),Le("load",i);break;case"details":Le("toggle",i);break;case"embed":case"source":case"link":Le("error",i),Le("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in a)if(a.hasOwnProperty(J)&&(u=a[J],u!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:et(i,r,J,u,a,null)}return;default:if(Oa(r)){for(j in a)a.hasOwnProperty(j)&&(u=a[j],u!==void 0&&xh(i,r,j,u,a,void 0));return}}for(I in a)a.hasOwnProperty(I)&&(u=a[I],u!=null&&et(i,r,I,u,a,null))}function oI(i,r,a,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,S=null,I=null,k=null,J=null,j=null;for($ in a){var ne=a[$];if(a.hasOwnProperty($)&&ne!=null)switch($){case"checked":break;case"value":break;case"defaultValue":k=ne;default:u.hasOwnProperty($)||et(i,r,$,null,u,ne)}}for(var Y in u){var $=u[Y];if(ne=a[Y],u.hasOwnProperty(Y)&&($!=null||ne!=null))switch(Y){case"type":_=$;break;case"name":y=$;break;case"checked":J=$;break;case"defaultChecked":j=$;break;case"value":S=$;break;case"defaultValue":I=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,r));break;default:$!==ne&&et(i,r,Y,$,u,ne)}}vs(i,S,I,k,J,j,_,y);return;case"select":$=S=I=Y=null;for(_ in a)if(k=a[_],a.hasOwnProperty(_)&&k!=null)switch(_){case"value":break;case"multiple":$=k;default:u.hasOwnProperty(_)||et(i,r,_,null,u,k)}for(y in u)if(_=u[y],k=a[y],u.hasOwnProperty(y)&&(_!=null||k!=null))switch(y){case"value":Y=_;break;case"defaultValue":I=_;break;case"multiple":S=_;default:_!==k&&et(i,r,y,_,u,k)}r=I,a=S,u=$,Y!=null?He(i,!!a,Y,!1):!!u!=!!a&&(r!=null?He(i,!!a,r,!0):He(i,!!a,a?[]:"",!1));return;case"textarea":$=Y=null;for(I in a)if(y=a[I],a.hasOwnProperty(I)&&y!=null&&!u.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:et(i,r,I,null,u,y)}for(S in u)if(y=u[S],_=a[S],u.hasOwnProperty(S)&&(y!=null||_!=null))switch(S){case"value":Y=y;break;case"defaultValue":$=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:y!==_&&et(i,r,S,y,u,_)}Ar(i,Y,$);return;case"option":for(var pe in a)if(Y=a[pe],a.hasOwnProperty(pe)&&Y!=null&&!u.hasOwnProperty(pe))switch(pe){case"selected":i.selected=!1;break;default:et(i,r,pe,null,u,Y)}for(k in u)if(Y=u[k],$=a[k],u.hasOwnProperty(k)&&Y!==$&&(Y!=null||$!=null))switch(k){case"selected":i.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:et(i,r,k,Y,u,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in a)Y=a[Ee],a.hasOwnProperty(Ee)&&Y!=null&&!u.hasOwnProperty(Ee)&&et(i,r,Ee,null,u,Y);for(J in u)if(Y=u[J],$=a[J],u.hasOwnProperty(J)&&Y!==$&&(Y!=null||$!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,r));break;default:et(i,r,J,Y,u,$)}return;default:if(Oa(r)){for(var tt in a)Y=a[tt],a.hasOwnProperty(tt)&&Y!==void 0&&!u.hasOwnProperty(tt)&&xh(i,r,tt,void 0,u,Y);for(j in u)Y=u[j],$=a[j],!u.hasOwnProperty(j)||Y===$||Y===void 0&&$===void 0||xh(i,r,j,Y,u,$);return}}for(var B in a)Y=a[B],a.hasOwnProperty(B)&&Y!=null&&!u.hasOwnProperty(B)&&et(i,r,B,null,u,Y);for(ne in u)Y=u[ne],$=a[ne],!u.hasOwnProperty(ne)||Y===$||Y==null&&$==null||et(i,r,ne,Y,u,$)}function P_(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function aI(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var y=a[u],_=y.transferSize,S=y.initiatorType,I=y.duration;if(_&&I&&P_(S)){for(S=0,I=y.responseEnd,u+=1;u<a.length;u++){var k=a[u],J=k.startTime;if(J>I)break;var j=k.transferSize,ne=k.initiatorType;j&&P_(ne)&&(k=k.responseEnd,S+=j*(k<I?1:(I-J)/(k-J)))}if(--u,r+=8*(_+S)/(y.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Dh=null,Ph=null;function Ac(i){return i.nodeType===9?i:i.ownerDocument}function k_(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function V_(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function kh(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Vh=null;function lI(){var i=window.event;return i&&i.type==="popstate"?i===Vh?!1:(Vh=i,!0):(Vh=null,!1)}var U_=typeof setTimeout=="function"?setTimeout:void 0,uI=typeof clearTimeout=="function"?clearTimeout:void 0,L_=typeof Promise=="function"?Promise:void 0,cI=typeof queueMicrotask=="function"?queueMicrotask:typeof L_<"u"?function(i){return L_.resolve(null).then(i).catch(fI)}:U_;function fI(i){setTimeout(function(){throw i})}function Js(i){return i==="head"}function O_(i,r){var a=r,u=0;do{var y=a.nextSibling;if(i.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(u===0){i.removeChild(y),$o(r);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")Tl(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,Tl(a);for(var _=a.firstChild;_;){var S=_.nextSibling,I=_.nodeName;_[Ni]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=S}}else a==="body"&&Tl(i.ownerDocument.body);a=y}while(a);$o(r)}function q_(i,r){var a=i;i=0;do{var u=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=u}while(a)}function Uh(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Uh(a),Tr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function dI(i,r,a,u){for(;i.nodeType===1;){var y=a;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Ni])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=Bn(i.nextSibling),i===null)break}return null}function hI(i,r,a){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Bn(i.nextSibling),i===null))return null;return i}function B_(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=Bn(i.nextSibling),i===null))return null;return i}function Lh(i){return i.data==="$?"||i.data==="$~"}function Oh(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function pI(i,r){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||a.readyState!=="loading")r();else{var u=function(){r(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Bn(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var qh=null;function F_(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(r===0)return Bn(i.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}i=i.nextSibling}return null}function z_(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return i;r--}else a!=="/$"&&a!=="/&"||r++}i=i.previousSibling}return null}function G_(i,r,a){switch(r=Ac(a),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Tl(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);Tr(i)}var Fn=new Map,H_=new Set;function Cc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Wi=Z.d;Z.d={f:mI,r:gI,D:yI,C:_I,L:vI,m:TI,X:SI,S:EI,M:AI};function mI(){var i=Wi.f(),r=mc();return i||r}function gI(i){var r=xi(i);r!==null&&r.tag===5&&r.type==="form"?ay(r):Wi.r(i)}var Yo=typeof document>"u"?null:document;function J_(i,r,a){var u=Yo;if(u&&typeof r=="string"&&r){var y=gt(r);y='link[rel="'+i+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),H_.has(y)||(H_.add(y),i={rel:i,crossOrigin:a,href:r},u.querySelector(y)===null&&(r=u.createElement("link"),Qt(r,"link",i),vt(r),u.head.appendChild(r)))}}function yI(i){Wi.D(i),J_("dns-prefetch",i,null)}function _I(i,r){Wi.C(i,r),J_("preconnect",i,r)}function vI(i,r,a){Wi.L(i,r,a);var u=Yo;if(u&&i&&r){var y='link[rel="preload"][as="'+gt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+gt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+gt(a.imageSizes)+'"]')):y+='[href="'+gt(i)+'"]';var _=y;switch(r){case"style":_=Ko(i);break;case"script":_=Qo(i)}Fn.has(_)||(i=E({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:i,as:r},a),Fn.set(_,i),u.querySelector(y)!==null||r==="style"&&u.querySelector(El(_))||r==="script"&&u.querySelector(Sl(_))||(r=u.createElement("link"),Qt(r,"link",i),vt(r),u.head.appendChild(r)))}}function TI(i,r){Wi.m(i,r);var a=Yo;if(a&&i){var u=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+gt(u)+'"][href="'+gt(i)+'"]',_=y;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Qo(i)}if(!Fn.has(_)&&(i=E({rel:"modulepreload",href:i},r),Fn.set(_,i),a.querySelector(y)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Sl(_)))return}u=a.createElement("link"),Qt(u,"link",i),vt(u),a.head.appendChild(u)}}}function EI(i,r,a){Wi.S(i,r,a);var u=Yo;if(u&&i){var y=Kn(u).hoistableStyles,_=Ko(i);r=r||"default";var S=y.get(_);if(!S){var I={loading:0,preload:null};if(S=u.querySelector(El(_)))I.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":r},a),(a=Fn.get(_))&&Bh(i,a);var k=S=u.createElement("link");vt(k),Qt(k,"link",i),k._p=new Promise(function(J,j){k.onload=J,k.onerror=j}),k.addEventListener("load",function(){I.loading|=1}),k.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Ic(S,r,u)}S={type:"stylesheet",instance:S,count:1,state:I},y.set(_,S)}}}function SI(i,r){Wi.X(i,r);var a=Yo;if(a&&i){var u=Kn(a).hoistableScripts,y=Qo(i),_=u.get(y);_||(_=a.querySelector(Sl(y)),_||(i=E({src:i,async:!0},r),(r=Fn.get(y))&&Fh(i,r),_=a.createElement("script"),vt(_),Qt(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(y,_))}}function AI(i,r){Wi.M(i,r);var a=Yo;if(a&&i){var u=Kn(a).hoistableScripts,y=Qo(i),_=u.get(y);_||(_=a.querySelector(Sl(y)),_||(i=E({src:i,async:!0,type:"module"},r),(r=Fn.get(y))&&Fh(i,r),_=a.createElement("script"),vt(_),Qt(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(y,_))}}function Y_(i,r,a,u){var y=(y=Me.current)?Cc(y):null;if(!y)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Ko(a.href),a=Kn(y).hoistableStyles,u=a.get(r),u||(u={type:"style",instance:null,count:0,state:null},a.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=Ko(a.href);var _=Kn(y).hoistableStyles,S=_.get(i);if(S||(y=y.ownerDocument||y,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,S),(_=y.querySelector(El(i)))&&!_._p&&(S.instance=_,S.state.loading=5),Fn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Fn.set(i,a),_||CI(y,i,a,S.state))),r&&u===null)throw Error(s(528,""));return S}if(r&&u!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Qo(a),a=Kn(y).hoistableScripts,u=a.get(r),u||(u={type:"script",instance:null,count:0,state:null},a.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Ko(i){return'href="'+gt(i)+'"'}function El(i){return'link[rel="stylesheet"]['+i+"]"}function K_(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function CI(i,r,a,u){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=i.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),Qt(r,"link",a),vt(r),i.head.appendChild(r))}function Qo(i){return'[src="'+gt(i)+'"]'}function Sl(i){return"script[async]"+i}function Q_(i,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var u=i.querySelector('style[data-href~="'+gt(a.href)+'"]');if(u)return r.instance=u,vt(u),u;var y=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),vt(u),Qt(u,"style",y),Ic(u,a.precedence,i),r.instance=u;case"stylesheet":y=Ko(a.href);var _=i.querySelector(El(y));if(_)return r.state.loading|=4,r.instance=_,vt(_),_;u=K_(a),(y=Fn.get(y))&&Bh(u,y),_=(i.ownerDocument||i).createElement("link"),vt(_);var S=_;return S._p=new Promise(function(I,k){S.onload=I,S.onerror=k}),Qt(_,"link",u),r.state.loading|=4,Ic(_,a.precedence,i),r.instance=_;case"script":return _=Qo(a.src),(y=i.querySelector(Sl(_)))?(r.instance=y,vt(y),y):(u=a,(y=Fn.get(_))&&(u=E({},a),Fh(u,y)),i=i.ownerDocument||i,y=i.createElement("script"),vt(y),Qt(y,"link",u),i.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,Ic(u,a.precedence,i));return r.instance}function Ic(i,r,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=u.length?u[u.length-1]:null,_=y,S=0;S<u.length;S++){var I=u[S];if(I.dataset.precedence===r)_=I;else if(_!==y)break}_?_.parentNode.insertBefore(i,_.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(i,r.firstChild))}function Bh(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function Fh(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Rc=null;function $_(i,r,a){if(Rc===null){var u=new Map,y=Rc=new Map;y.set(a,u)}else y=Rc,u=y.get(a),u||(u=new Map,y.set(a,u));if(u.has(i))return u;for(u.set(i,null),a=a.getElementsByTagName(i),y=0;y<a.length;y++){var _=a[y];if(!(_[Ni]||_[mt]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var S=_.getAttribute(r)||"";S=i+S;var I=u.get(S);I?I.push(_):u.set(S,[_])}}return u}function X_(i,r,a){i=i.ownerDocument||i,i.head.insertBefore(a,r==="title"?i.querySelector("head > title"):null)}function II(i,r,a){if(a===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function W_(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function RI(i,r,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=Ko(u.href),_=r.querySelector(El(y));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=wc.bind(i),r.then(i,i)),a.state.loading|=4,a.instance=_,vt(_);return}_=r.ownerDocument||r,u=K_(u),(y=Fn.get(y))&&Bh(u,y),_=_.createElement("link"),vt(_);var S=_;S._p=new Promise(function(I,k){S.onload=I,S.onerror=k}),Qt(_,"link",u),a.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=wc.bind(i),r.addEventListener("load",a),r.addEventListener("error",a))}}var zh=0;function wI(i,r){return i.stylesheets&&i.count===0&&Nc(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var u=setTimeout(function(){if(i.stylesheets&&Nc(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+r);0<i.imgBytes&&zh===0&&(zh=62500*aI());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Nc(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>zh?50:800)+r);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(y)}}:null}function wc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Nc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var bc=null;function Nc(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,bc=new Map,r.forEach(bI,i),bc=null,wc.call(i))}function bI(i,r){if(!(r.state.loading&4)){var a=bc.get(i);if(a)var u=a.get(null);else{a=new Map,bc.set(i,a);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var S=y[_];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(a.set(S.dataset.precedence,S),u=S)}u&&a.set(null,u)}y=r.instance,S=y.getAttribute("data-precedence"),_=a.get(S)||u,_===u&&a.set(null,y),a.set(S,y),this.count++,u=wc.bind(this),y.addEventListener("load",u),y.addEventListener("error",u),_?_.parentNode.insertBefore(y,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),r.state.loading|=4}}var Al={$$typeof:W,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function NI(i,r,a,u,y,_,S,I,k){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wi(0),this.hiddenUpdates=wi(null),this.identifierPrefix=u,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function Z_(i,r,a,u,y,_,S,I,k,J,j,ne){return i=new NI(i,r,a,S,k,J,j,ne,I),r=1,_===!0&&(r|=24),_=Cn(3,null,null,r),i.current=_,_.stateNode=i,r=Ed(),r.refCount++,i.pooledCache=r,r.refCount++,_.memoizedState={element:u,isDehydrated:a,cache:r},Id(_),i}function j_(i){return i?(i=Io,i):Io}function ev(i,r,a,u,y,_){y=j_(y),u.context===null?u.context=y:u.pendingContext=y,u=ks(r),u.payload={element:a},_=_===void 0?null:_,_!==null&&(u.callback=_),a=Vs(i,u,r),a!==null&&(vn(a,i,r),tl(a,i,r))}function tv(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<r?a:r}}function Gh(i,r){tv(i,r),(i=i.alternate)&&tv(i,r)}function nv(i){if(i.tag===13||i.tag===31){var r=Dr(i,67108864);r!==null&&vn(r,i,67108864),Gh(i,67108864)}}function iv(i){if(i.tag===13||i.tag===31){var r=Nn();r=xa(r);var a=Dr(i,r);a!==null&&vn(a,i,r),Gh(i,r)}}var Mc=!0;function MI(i,r,a,u){var y=F.T;F.T=null;var _=Z.p;try{Z.p=2,Hh(i,r,a,u)}finally{Z.p=_,F.T=y}}function xI(i,r,a,u){var y=F.T;F.T=null;var _=Z.p;try{Z.p=8,Hh(i,r,a,u)}finally{Z.p=_,F.T=y}}function Hh(i,r,a,u){if(Mc){var y=Jh(u);if(y===null)Mh(i,r,u,xc,a),rv(i,u);else if(PI(y,i,r,a,u))u.stopPropagation();else if(rv(i,u),r&4&&-1<DI.indexOf(i)){for(;y!==null;){var _=xi(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var S=Yn(_.pendingLanes);if(S!==0){var I=_;for(I.pendingLanes|=2,I.entangledLanes|=2;S;){var k=1<<31-an(S);I.entanglements[1]|=k,S&=~k}hi(_),(Qe&6)===0&&(hc=zt()+500,yl(0))}}break;case 31:case 13:I=Dr(_,2),I!==null&&vn(I,_,2),mc(),Gh(_,2)}if(_=Jh(u),_===null&&Mh(i,r,u,xc,a),_===y)break;y=_}y!==null&&u.stopPropagation()}else Mh(i,r,u,null,a)}}function Jh(i){return i=yo(i),Yh(i)}var xc=null;function Yh(i){if(xc=null,i=Mi(i),i!==null){var r=l(i);if(r===null)i=null;else{var a=r.tag;if(a===13){if(i=c(r),i!==null)return i;i=null}else if(a===31){if(i=d(r),i!==null)return i;i=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return xc=i,null}function sv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(cu()){case Mt:return 2;case kt:return 8;case Ri:case fu:return 32;case wa:return 268435456;default:return 32}default:return 32}}var Kh=!1,Ys=null,Ks=null,Qs=null,Cl=new Map,Il=new Map,$s=[],DI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function rv(i,r){switch(i){case"focusin":case"focusout":Ys=null;break;case"dragenter":case"dragleave":Ks=null;break;case"mouseover":case"mouseout":Qs=null;break;case"pointerover":case"pointerout":Cl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Il.delete(r.pointerId)}}function Rl(i,r,a,u,y,_){return i===null||i.nativeEvent!==_?(i={blockedOn:r,domEventName:a,eventSystemFlags:u,nativeEvent:_,targetContainers:[y]},r!==null&&(r=xi(r),r!==null&&nv(r)),i):(i.eventSystemFlags|=u,r=i.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),i)}function PI(i,r,a,u,y){switch(r){case"focusin":return Ys=Rl(Ys,i,r,a,u,y),!0;case"dragenter":return Ks=Rl(Ks,i,r,a,u,y),!0;case"mouseover":return Qs=Rl(Qs,i,r,a,u,y),!0;case"pointerover":var _=y.pointerId;return Cl.set(_,Rl(Cl.get(_)||null,i,r,a,u,y)),!0;case"gotpointercapture":return _=y.pointerId,Il.set(_,Rl(Il.get(_)||null,i,r,a,u,y)),!0}return!1}function ov(i){var r=Mi(i.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=c(a),r!==null){i.blockedOn=r,hu(i.priority,function(){iv(a)});return}}else if(r===31){if(r=d(a),r!==null){i.blockedOn=r,hu(i.priority,function(){iv(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Dc(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var a=Jh(i.nativeEvent);if(a===null){a=i.nativeEvent;var u=new a.constructor(a.type,a);go=u,a.target.dispatchEvent(u),go=null}else return r=xi(a),r!==null&&nv(r),i.blockedOn=a,!1;r.shift()}return!0}function av(i,r,a){Dc(i)&&a.delete(r)}function kI(){Kh=!1,Ys!==null&&Dc(Ys)&&(Ys=null),Ks!==null&&Dc(Ks)&&(Ks=null),Qs!==null&&Dc(Qs)&&(Qs=null),Cl.forEach(av),Il.forEach(av)}function Pc(i,r){i.blockedOn===r&&(i.blockedOn=null,Kh||(Kh=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,kI)))}var kc=null;function lv(i){kc!==i&&(kc=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){kc===i&&(kc=null);for(var r=0;r<i.length;r+=3){var a=i[r],u=i[r+1],y=i[r+2];if(typeof u!="function"){if(Yh(u||a)===null)continue;break}var _=xi(a);_!==null&&(i.splice(r,3),r-=3,Jd(_,{pending:!0,data:y,method:a.method,action:u},u,y))}}))}function $o(i){function r(k){return Pc(k,i)}Ys!==null&&Pc(Ys,i),Ks!==null&&Pc(Ks,i),Qs!==null&&Pc(Qs,i),Cl.forEach(r),Il.forEach(r);for(var a=0;a<$s.length;a++){var u=$s[a];u.blockedOn===i&&(u.blockedOn=null)}for(;0<$s.length&&(a=$s[0],a.blockedOn===null);)ov(a),a.blockedOn===null&&$s.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var y=a[u],_=a[u+1],S=y[Ht]||null;if(typeof _=="function")S||lv(a);else if(S){var I=null;if(_&&_.hasAttribute("formAction")){if(y=_,S=_[Ht]||null)I=S.formAction;else if(Yh(y)!==null)continue}else I=S.action;typeof I=="function"?a[u+1]=I:(a.splice(u,3),u-=3),lv(a)}}}function uv(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(S){return y=S})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function Qh(i){this._internalRoot=i}Vc.prototype.render=Qh.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,u=Nn();ev(a,u,i,r,null,null)},Vc.prototype.unmount=Qh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;ev(i.current,2,null,i,null,null),mc(),r[si]=null}};function Vc(i){this._internalRoot=i}Vc.prototype.unstable_scheduleHydration=function(i){if(i){var r=bi();i={blockedOn:null,target:i,priority:r};for(var a=0;a<$s.length&&r!==0&&r<$s[a].priority;a++);$s.splice(a,0,i),a===0&&ov(i)}};var cv=e.version;if(cv!=="19.2.0")throw Error(s(527,cv,"19.2.0"));Z.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=p(r),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var VI={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uc.isDisabled&&Uc.supportsFiber)try{us=Uc.inject(VI),Zt=Uc}catch{}}return bl.createRoot=function(i,r){if(!o(i))throw Error(s(299));var a=!1,u="",y=yy,_=_y,S=vy;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError)),r=Z_(i,1,!1,null,null,a,u,null,y,_,S,uv),i[si]=r.current,Nh(i),new Qh(r)},bl.hydrateRoot=function(i,r,a){if(!o(i))throw Error(s(299));var u=!1,y="",_=yy,S=_y,I=vy,k=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(I=a.onRecoverableError),a.formState!==void 0&&(k=a.formState)),r=Z_(i,1,!0,r,a??null,u,y,k,_,S,I,uv),r.context=j_(null),a=r.current,u=Nn(),u=xa(u),y=ks(u),y.callback=null,Vs(a,y,u),a=u,r.current.lanes=a,ds(r,a),hi(r),i[si]=r.current,Nh(i),new Vc(r)},bl.version="19.2.0",bl}var Tv;function YI(){if(Tv)return Wh.exports;Tv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Wh.exports=JI(),Wh.exports}var KI=YI();const QI=f0(KI),$I=()=>{};var Ev={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},XI=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],d=n[t++],m=((o&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},h0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,d=c?n[o+1]:0,m=o+2<n.length,p=m?n[o+2]:0,v=l>>2,E=(l&3)<<4|d>>4;let A=(d&15)<<2|p>>6,b=p&63;m||(b=64,c||(A=64)),s.push(t[v],t[E],t[A],t[b])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(d0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):XI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const p=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||d==null||p==null||E==null)throw new WI;const A=l<<2|d>>4;if(s.push(A),p!==64){const b=d<<4&240|p>>2;if(s.push(b),E!==64){const q=p<<6&192|E;s.push(q)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class WI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZI=function(n){const e=d0(n);return h0.encodeByteArray(e,!0)},tf=function(n){return ZI(n).replace(/\./g,"")},p0=function(n){try{return h0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=()=>jI().__FIREBASE_DEFAULTS__,tR=()=>{if(typeof process>"u"||typeof Ev>"u")return;const n=Ev.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},nR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&p0(n[1]);return e&&JSON.parse(e)},If=()=>{try{return $I()||eR()||tR()||nR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},m0=n=>{var e,t;return(t=(e=If())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},iR=n=>{const e=m0(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},g0=()=>{var n;return(n=If())===null||n===void 0?void 0:n.config},y0=n=>{var e;return(e=If())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ga(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _0(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[tf(JSON.stringify(t)),tf(JSON.stringify(c)),""].join(".")}const kl={};function oR(){const n={prod:[],emulator:[]};for(const e of Object.keys(kl))kl[e]?n.emulator.push(e):n.prod.push(e);return n}function aR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Sv=!1;function v0(n,e){if(typeof window>"u"||typeof document>"u"||!ga(window.location.host)||kl[n]===e||kl[n]||Sv)return;kl[n]=e;function t(A){return`__firebase__banner__${A}`}const s="__firebase__banner",l=oR().prod.length>0;function c(){const A=document.getElementById(s);A&&A.remove()}function d(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function m(A,b){A.setAttribute("width","24"),A.setAttribute("id",b),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function p(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Sv=!0,c()},A}function v(A,b){A.setAttribute("id",b),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function E(){const A=aR(s),b=t("text"),q=document.getElementById(b)||document.createElement("span"),G=t("learnmore"),Q=document.getElementById(G)||document.createElement("a"),se=t("preprendIcon"),K=document.getElementById(se)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const W=A.element;d(W),v(Q,G);const oe=p();m(K,se),W.append(K,q,Q,oe),document.body.appendChild(W)}l?(q.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function uR(){var n;const e=(n=If())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function dR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hR(){const n=on();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function pR(){return!uR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mR(){try{return typeof indexedDB=="object"}catch{return!1}}function gR(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR="FirebaseError";class as extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=yR,Object.setPrototypeOf(this,as.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zl.prototype.create)}}class Zl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?_R(l,s):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new as(o,d,s)}}function _R(n,e){return n.replace(vR,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const vR=/\{\$([^}]+)}/g;function TR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function $r(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=n[o],c=e[o];if(Av(l)&&Av(c)){if(!$r(l,c))return!1}else if(l!==c)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Av(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jl(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function ER(n,e){const t=new SR(n,e);return t.subscribe.bind(t)}class SR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");AR(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=tp),o.error===void 0&&(o.error=tp),o.complete===void 0&&(o.complete=tp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function AR(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function tp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(n){return n&&n._delegate?n._delegate:n}class Xr{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new sR;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(RR(e))try{this.getOrInitializeService({instanceIdentifier:Jr})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=Jr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Jr){return this.instances.has(e)}getOptions(e=Jr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);s===d&&c.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),l=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(o,l);const c=this.instances.get(o);return c&&e(c,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:IR(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Jr){return this.component?this.component.multipleInstances?e:Jr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IR(n){return n===Jr?void 0:n}function RR(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new CR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Be||(Be={}));const bR={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},NR=Be.INFO,MR={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},xR=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=MR[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qp{constructor(e){this.name=e,this._logLevel=NR,this._logHandler=xR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const DR=(n,e)=>e.some(t=>n instanceof t);let Cv,Iv;function PR(){return Cv||(Cv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kR(){return Iv||(Iv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const T0=new WeakMap,hp=new WeakMap,E0=new WeakMap,np=new WeakMap,$p=new WeakMap;function VR(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(nr(n.result)),o()},c=()=>{s(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&T0.set(t,n)}).catch(()=>{}),$p.set(e,n),e}function UR(n){if(hp.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});hp.set(n,e)}let pp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return hp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||E0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return nr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function LR(n){pp=n(pp)}function OR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(ip(this),e,...t);return E0.set(s,e.sort?e.sort():[e]),nr(s)}:kR().includes(n)?function(...e){return n.apply(ip(this),e),nr(T0.get(this))}:function(...e){return nr(n.apply(ip(this),e))}}function qR(n){return typeof n=="function"?OR(n):(n instanceof IDBTransaction&&UR(n),DR(n,PR())?new Proxy(n,pp):n)}function nr(n){if(n instanceof IDBRequest)return VR(n);if(np.has(n))return np.get(n);const e=qR(n);return e!==n&&(np.set(n,e),$p.set(e,n)),e}const ip=n=>$p.get(n);function BR(n,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),d=nr(c);return s&&c.addEventListener("upgradeneeded",m=>{s(nr(c.result),m.oldVersion,m.newVersion,nr(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),o&&m.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const FR=["get","getKey","getAll","getAllKeys","count"],zR=["put","add","delete","clear"],sp=new Map;function Rv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(sp.get(e))return sp.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=zR.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||FR.includes(t)))return;const l=async function(c,...d){const m=this.transaction(c,o?"readwrite":"readonly");let p=m.store;return s&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),o&&m.done]))[0]};return sp.set(e,l),l}LR(n=>({...n,get:(e,t,s)=>Rv(e,t)||n.get(e,t,s),has:(e,t)=>!!Rv(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(HR(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function HR(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const mp="@firebase/app",wv="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new Qp("@firebase/app"),JR="@firebase/app-compat",YR="@firebase/analytics-compat",KR="@firebase/analytics",QR="@firebase/app-check-compat",$R="@firebase/app-check",XR="@firebase/auth",WR="@firebase/auth-compat",ZR="@firebase/database",jR="@firebase/data-connect",ew="@firebase/database-compat",tw="@firebase/functions",nw="@firebase/functions-compat",iw="@firebase/installations",sw="@firebase/installations-compat",rw="@firebase/messaging",ow="@firebase/messaging-compat",aw="@firebase/performance",lw="@firebase/performance-compat",uw="@firebase/remote-config",cw="@firebase/remote-config-compat",fw="@firebase/storage",dw="@firebase/storage-compat",hw="@firebase/firestore",pw="@firebase/ai",mw="@firebase/firestore-compat",gw="firebase",yw="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp="[DEFAULT]",_w={[mp]:"fire-core",[JR]:"fire-core-compat",[KR]:"fire-analytics",[YR]:"fire-analytics-compat",[$R]:"fire-app-check",[QR]:"fire-app-check-compat",[XR]:"fire-auth",[WR]:"fire-auth-compat",[ZR]:"fire-rtdb",[jR]:"fire-data-connect",[ew]:"fire-rtdb-compat",[tw]:"fire-fn",[nw]:"fire-fn-compat",[iw]:"fire-iid",[sw]:"fire-iid-compat",[rw]:"fire-fcm",[ow]:"fire-fcm-compat",[aw]:"fire-perf",[lw]:"fire-perf-compat",[uw]:"fire-rc",[cw]:"fire-rc-compat",[fw]:"fire-gcs",[dw]:"fire-gcs-compat",[hw]:"fire-fst",[mw]:"fire-fst-compat",[pw]:"fire-vertex","fire-js":"fire-js",[gw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf=new Map,vw=new Map,yp=new Map;function bv(n,e){try{n.container.addComponent(e)}catch(t){ns.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ua(n){const e=n.name;if(yp.has(e))return ns.debug(`There were multiple attempts to register component ${e}.`),!1;yp.set(e,n);for(const t of nf.values())bv(t,n);for(const t of vw.values())bv(t,n);return!0}function Xp(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function mi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ir=new Zl("app","Firebase",Tw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Xr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ir.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=yw;function S0(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s=Object.assign({name:gp,automaticDataCollectionEnabled:!0},e),o=s.name;if(typeof o!="string"||!o)throw ir.create("bad-app-name",{appName:String(o)});if(t||(t=g0()),!t)throw ir.create("no-options");const l=nf.get(o);if(l){if($r(t,l.options)&&$r(s,l.config))return l;throw ir.create("duplicate-app",{appName:o})}const c=new wR(o);for(const m of yp.values())c.addComponent(m);const d=new Ew(t,s,c);return nf.set(o,d),d}function A0(n=gp){const e=nf.get(n);if(!e&&n===gp&&g0())return S0();if(!e)throw ir.create("no-app",{appName:n});return e}function sr(n,e,t){var s;let o=(s=_w[n])!==null&&s!==void 0?s:n;t&&(o+=`-${t}`);const l=o.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${o}" with version "${e}":`];l&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ns.warn(d.join(" "));return}ua(new Xr(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw="firebase-heartbeat-database",Aw=1,zl="firebase-heartbeat-store";let rp=null;function C0(){return rp||(rp=BR(Sw,Aw,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(zl)}catch(t){console.warn(t)}}}}).catch(n=>{throw ir.create("idb-open",{originalErrorMessage:n.message})})),rp}async function Cw(n){try{const t=(await C0()).transaction(zl),s=await t.objectStore(zl).get(I0(n));return await t.done,s}catch(e){if(e instanceof as)ns.warn(e.message);else{const t=ir.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ns.warn(t.message)}}}async function Nv(n,e){try{const s=(await C0()).transaction(zl,"readwrite");await s.objectStore(zl).put(e,I0(n)),await s.done}catch(t){if(t instanceof as)ns.warn(t.message);else{const s=ir.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ns.warn(s.message)}}}function I0(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw=1024,Rw=30;class ww{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Nw(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Mv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>Rw){const c=Mw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ns.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Mv(),{heartbeatsToSend:s,unsentEntries:o}=bw(this._heartbeatsCache.heartbeats),l=tf(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ns.warn(t),""}}}function Mv(){return new Date().toISOString().substring(0,10)}function bw(n,e=Iw){const t=[];let s=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),xv(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),xv(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class Nw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mR()?gR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Cw(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Nv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Nv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function xv(n){return tf(JSON.stringify({version:2,heartbeats:n})).length}function Mw(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(n){ua(new Xr("platform-logger",e=>new GR(e),"PRIVATE")),ua(new Xr("heartbeat",e=>new ww(e),"PRIVATE")),sr(mp,wv,n),sr(mp,wv,"esm2017"),sr("fire-js","")}xw("");var Dv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rr,R0;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,w){function N(){}N.prototype=w.prototype,x.D=w.prototype,x.prototype=new N,x.prototype.constructor=x,x.C=function(P,V,O){for(var D=Array(arguments.length-2),st=2;st<arguments.length;st++)D[st-2]=arguments[st];return w.prototype[V].apply(P,D)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,w,N){N||(N=0);var P=Array(16);if(typeof w=="string")for(var V=0;16>V;++V)P[V]=w.charCodeAt(N++)|w.charCodeAt(N++)<<8|w.charCodeAt(N++)<<16|w.charCodeAt(N++)<<24;else for(V=0;16>V;++V)P[V]=w[N++]|w[N++]<<8|w[N++]<<16|w[N++]<<24;w=x.g[0],N=x.g[1],V=x.g[2];var O=x.g[3],D=w+(O^N&(V^O))+P[0]+3614090360&4294967295;w=N+(D<<7&4294967295|D>>>25),D=O+(V^w&(N^V))+P[1]+3905402710&4294967295,O=w+(D<<12&4294967295|D>>>20),D=V+(N^O&(w^N))+P[2]+606105819&4294967295,V=O+(D<<17&4294967295|D>>>15),D=N+(w^V&(O^w))+P[3]+3250441966&4294967295,N=V+(D<<22&4294967295|D>>>10),D=w+(O^N&(V^O))+P[4]+4118548399&4294967295,w=N+(D<<7&4294967295|D>>>25),D=O+(V^w&(N^V))+P[5]+1200080426&4294967295,O=w+(D<<12&4294967295|D>>>20),D=V+(N^O&(w^N))+P[6]+2821735955&4294967295,V=O+(D<<17&4294967295|D>>>15),D=N+(w^V&(O^w))+P[7]+4249261313&4294967295,N=V+(D<<22&4294967295|D>>>10),D=w+(O^N&(V^O))+P[8]+1770035416&4294967295,w=N+(D<<7&4294967295|D>>>25),D=O+(V^w&(N^V))+P[9]+2336552879&4294967295,O=w+(D<<12&4294967295|D>>>20),D=V+(N^O&(w^N))+P[10]+4294925233&4294967295,V=O+(D<<17&4294967295|D>>>15),D=N+(w^V&(O^w))+P[11]+2304563134&4294967295,N=V+(D<<22&4294967295|D>>>10),D=w+(O^N&(V^O))+P[12]+1804603682&4294967295,w=N+(D<<7&4294967295|D>>>25),D=O+(V^w&(N^V))+P[13]+4254626195&4294967295,O=w+(D<<12&4294967295|D>>>20),D=V+(N^O&(w^N))+P[14]+2792965006&4294967295,V=O+(D<<17&4294967295|D>>>15),D=N+(w^V&(O^w))+P[15]+1236535329&4294967295,N=V+(D<<22&4294967295|D>>>10),D=w+(V^O&(N^V))+P[1]+4129170786&4294967295,w=N+(D<<5&4294967295|D>>>27),D=O+(N^V&(w^N))+P[6]+3225465664&4294967295,O=w+(D<<9&4294967295|D>>>23),D=V+(w^N&(O^w))+P[11]+643717713&4294967295,V=O+(D<<14&4294967295|D>>>18),D=N+(O^w&(V^O))+P[0]+3921069994&4294967295,N=V+(D<<20&4294967295|D>>>12),D=w+(V^O&(N^V))+P[5]+3593408605&4294967295,w=N+(D<<5&4294967295|D>>>27),D=O+(N^V&(w^N))+P[10]+38016083&4294967295,O=w+(D<<9&4294967295|D>>>23),D=V+(w^N&(O^w))+P[15]+3634488961&4294967295,V=O+(D<<14&4294967295|D>>>18),D=N+(O^w&(V^O))+P[4]+3889429448&4294967295,N=V+(D<<20&4294967295|D>>>12),D=w+(V^O&(N^V))+P[9]+568446438&4294967295,w=N+(D<<5&4294967295|D>>>27),D=O+(N^V&(w^N))+P[14]+3275163606&4294967295,O=w+(D<<9&4294967295|D>>>23),D=V+(w^N&(O^w))+P[3]+4107603335&4294967295,V=O+(D<<14&4294967295|D>>>18),D=N+(O^w&(V^O))+P[8]+1163531501&4294967295,N=V+(D<<20&4294967295|D>>>12),D=w+(V^O&(N^V))+P[13]+2850285829&4294967295,w=N+(D<<5&4294967295|D>>>27),D=O+(N^V&(w^N))+P[2]+4243563512&4294967295,O=w+(D<<9&4294967295|D>>>23),D=V+(w^N&(O^w))+P[7]+1735328473&4294967295,V=O+(D<<14&4294967295|D>>>18),D=N+(O^w&(V^O))+P[12]+2368359562&4294967295,N=V+(D<<20&4294967295|D>>>12),D=w+(N^V^O)+P[5]+4294588738&4294967295,w=N+(D<<4&4294967295|D>>>28),D=O+(w^N^V)+P[8]+2272392833&4294967295,O=w+(D<<11&4294967295|D>>>21),D=V+(O^w^N)+P[11]+1839030562&4294967295,V=O+(D<<16&4294967295|D>>>16),D=N+(V^O^w)+P[14]+4259657740&4294967295,N=V+(D<<23&4294967295|D>>>9),D=w+(N^V^O)+P[1]+2763975236&4294967295,w=N+(D<<4&4294967295|D>>>28),D=O+(w^N^V)+P[4]+1272893353&4294967295,O=w+(D<<11&4294967295|D>>>21),D=V+(O^w^N)+P[7]+4139469664&4294967295,V=O+(D<<16&4294967295|D>>>16),D=N+(V^O^w)+P[10]+3200236656&4294967295,N=V+(D<<23&4294967295|D>>>9),D=w+(N^V^O)+P[13]+681279174&4294967295,w=N+(D<<4&4294967295|D>>>28),D=O+(w^N^V)+P[0]+3936430074&4294967295,O=w+(D<<11&4294967295|D>>>21),D=V+(O^w^N)+P[3]+3572445317&4294967295,V=O+(D<<16&4294967295|D>>>16),D=N+(V^O^w)+P[6]+76029189&4294967295,N=V+(D<<23&4294967295|D>>>9),D=w+(N^V^O)+P[9]+3654602809&4294967295,w=N+(D<<4&4294967295|D>>>28),D=O+(w^N^V)+P[12]+3873151461&4294967295,O=w+(D<<11&4294967295|D>>>21),D=V+(O^w^N)+P[15]+530742520&4294967295,V=O+(D<<16&4294967295|D>>>16),D=N+(V^O^w)+P[2]+3299628645&4294967295,N=V+(D<<23&4294967295|D>>>9),D=w+(V^(N|~O))+P[0]+4096336452&4294967295,w=N+(D<<6&4294967295|D>>>26),D=O+(N^(w|~V))+P[7]+1126891415&4294967295,O=w+(D<<10&4294967295|D>>>22),D=V+(w^(O|~N))+P[14]+2878612391&4294967295,V=O+(D<<15&4294967295|D>>>17),D=N+(O^(V|~w))+P[5]+4237533241&4294967295,N=V+(D<<21&4294967295|D>>>11),D=w+(V^(N|~O))+P[12]+1700485571&4294967295,w=N+(D<<6&4294967295|D>>>26),D=O+(N^(w|~V))+P[3]+2399980690&4294967295,O=w+(D<<10&4294967295|D>>>22),D=V+(w^(O|~N))+P[10]+4293915773&4294967295,V=O+(D<<15&4294967295|D>>>17),D=N+(O^(V|~w))+P[1]+2240044497&4294967295,N=V+(D<<21&4294967295|D>>>11),D=w+(V^(N|~O))+P[8]+1873313359&4294967295,w=N+(D<<6&4294967295|D>>>26),D=O+(N^(w|~V))+P[15]+4264355552&4294967295,O=w+(D<<10&4294967295|D>>>22),D=V+(w^(O|~N))+P[6]+2734768916&4294967295,V=O+(D<<15&4294967295|D>>>17),D=N+(O^(V|~w))+P[13]+1309151649&4294967295,N=V+(D<<21&4294967295|D>>>11),D=w+(V^(N|~O))+P[4]+4149444226&4294967295,w=N+(D<<6&4294967295|D>>>26),D=O+(N^(w|~V))+P[11]+3174756917&4294967295,O=w+(D<<10&4294967295|D>>>22),D=V+(w^(O|~N))+P[2]+718787259&4294967295,V=O+(D<<15&4294967295|D>>>17),D=N+(O^(V|~w))+P[9]+3951481745&4294967295,x.g[0]=x.g[0]+w&4294967295,x.g[1]=x.g[1]+(V+(D<<21&4294967295|D>>>11))&4294967295,x.g[2]=x.g[2]+V&4294967295,x.g[3]=x.g[3]+O&4294967295}s.prototype.u=function(x,w){w===void 0&&(w=x.length);for(var N=w-this.blockSize,P=this.B,V=this.h,O=0;O<w;){if(V==0)for(;O<=N;)o(this,x,O),O+=this.blockSize;if(typeof x=="string"){for(;O<w;)if(P[V++]=x.charCodeAt(O++),V==this.blockSize){o(this,P),V=0;break}}else for(;O<w;)if(P[V++]=x[O++],V==this.blockSize){o(this,P),V=0;break}}this.h=V,this.o+=w},s.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var w=1;w<x.length-8;++w)x[w]=0;var N=8*this.o;for(w=x.length-8;w<x.length;++w)x[w]=N&255,N/=256;for(this.u(x),x=Array(16),w=N=0;4>w;++w)for(var P=0;32>P;P+=8)x[N++]=this.g[w]>>>P&255;return x};function l(x,w){var N=d;return Object.prototype.hasOwnProperty.call(N,x)?N[x]:N[x]=w(x)}function c(x,w){this.h=w;for(var N=[],P=!0,V=x.length-1;0<=V;V--){var O=x[V]|0;P&&O==w||(N[V]=O,P=!1)}this.g=N}var d={};function m(x){return-128<=x&&128>x?l(x,function(w){return new c([w|0],0>w?-1:0)}):new c([x|0],0>x?-1:0)}function p(x){if(isNaN(x)||!isFinite(x))return E;if(0>x)return Q(p(-x));for(var w=[],N=1,P=0;x>=N;P++)w[P]=x/N|0,N*=4294967296;return new c(w,0)}function v(x,w){if(x.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(x.charAt(0)=="-")return Q(v(x.substring(1),w));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=p(Math.pow(w,8)),P=E,V=0;V<x.length;V+=8){var O=Math.min(8,x.length-V),D=parseInt(x.substring(V,V+O),w);8>O?(O=p(Math.pow(w,O)),P=P.j(O).add(p(D))):(P=P.j(N),P=P.add(p(D)))}return P}var E=m(0),A=m(1),b=m(16777216);n=c.prototype,n.m=function(){if(G(this))return-Q(this).m();for(var x=0,w=1,N=0;N<this.g.length;N++){var P=this.i(N);x+=(0<=P?P:4294967296+P)*w,w*=4294967296}return x},n.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(q(this))return"0";if(G(this))return"-"+Q(this).toString(x);for(var w=p(Math.pow(x,6)),N=this,P="";;){var V=oe(N,w).g;N=se(N,V.j(w));var O=((0<N.g.length?N.g[0]:N.h)>>>0).toString(x);if(N=V,q(N))return O+P;for(;6>O.length;)O="0"+O;P=O+P}},n.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function q(x){if(x.h!=0)return!1;for(var w=0;w<x.g.length;w++)if(x.g[w]!=0)return!1;return!0}function G(x){return x.h==-1}n.l=function(x){return x=se(this,x),G(x)?-1:q(x)?0:1};function Q(x){for(var w=x.g.length,N=[],P=0;P<w;P++)N[P]=~x.g[P];return new c(N,~x.h).add(A)}n.abs=function(){return G(this)?Q(this):this},n.add=function(x){for(var w=Math.max(this.g.length,x.g.length),N=[],P=0,V=0;V<=w;V++){var O=P+(this.i(V)&65535)+(x.i(V)&65535),D=(O>>>16)+(this.i(V)>>>16)+(x.i(V)>>>16);P=D>>>16,O&=65535,D&=65535,N[V]=D<<16|O}return new c(N,N[N.length-1]&-2147483648?-1:0)};function se(x,w){return x.add(Q(w))}n.j=function(x){if(q(this)||q(x))return E;if(G(this))return G(x)?Q(this).j(Q(x)):Q(Q(this).j(x));if(G(x))return Q(this.j(Q(x)));if(0>this.l(b)&&0>x.l(b))return p(this.m()*x.m());for(var w=this.g.length+x.g.length,N=[],P=0;P<2*w;P++)N[P]=0;for(P=0;P<this.g.length;P++)for(var V=0;V<x.g.length;V++){var O=this.i(P)>>>16,D=this.i(P)&65535,st=x.i(V)>>>16,ct=x.i(V)&65535;N[2*P+2*V]+=D*ct,K(N,2*P+2*V),N[2*P+2*V+1]+=O*ct,K(N,2*P+2*V+1),N[2*P+2*V+1]+=D*st,K(N,2*P+2*V+1),N[2*P+2*V+2]+=O*st,K(N,2*P+2*V+2)}for(P=0;P<w;P++)N[P]=N[2*P+1]<<16|N[2*P];for(P=w;P<2*w;P++)N[P]=0;return new c(N,0)};function K(x,w){for(;(x[w]&65535)!=x[w];)x[w+1]+=x[w]>>>16,x[w]&=65535,w++}function W(x,w){this.g=x,this.h=w}function oe(x,w){if(q(w))throw Error("division by zero");if(q(x))return new W(E,E);if(G(x))return w=oe(Q(x),w),new W(Q(w.g),Q(w.h));if(G(w))return w=oe(x,Q(w)),new W(Q(w.g),w.h);if(30<x.g.length){if(G(x)||G(w))throw Error("slowDivide_ only works with positive integers.");for(var N=A,P=w;0>=P.l(x);)N=de(N),P=de(P);var V=ce(N,1),O=ce(P,1);for(P=ce(P,2),N=ce(N,2);!q(P);){var D=O.add(P);0>=D.l(x)&&(V=V.add(N),O=D),P=ce(P,1),N=ce(N,1)}return w=se(x,V.j(w)),new W(V,w)}for(V=E;0<=x.l(w);){for(N=Math.max(1,Math.floor(x.m()/w.m())),P=Math.ceil(Math.log(N)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),O=p(N),D=O.j(w);G(D)||0<D.l(x);)N-=P,O=p(N),D=O.j(w);q(O)&&(O=A),V=V.add(O),x=se(x,D)}return new W(V,x)}n.A=function(x){return oe(this,x).h},n.and=function(x){for(var w=Math.max(this.g.length,x.g.length),N=[],P=0;P<w;P++)N[P]=this.i(P)&x.i(P);return new c(N,this.h&x.h)},n.or=function(x){for(var w=Math.max(this.g.length,x.g.length),N=[],P=0;P<w;P++)N[P]=this.i(P)|x.i(P);return new c(N,this.h|x.h)},n.xor=function(x){for(var w=Math.max(this.g.length,x.g.length),N=[],P=0;P<w;P++)N[P]=this.i(P)^x.i(P);return new c(N,this.h^x.h)};function de(x){for(var w=x.g.length+1,N=[],P=0;P<w;P++)N[P]=x.i(P)<<1|x.i(P-1)>>>31;return new c(N,x.h)}function ce(x,w){var N=w>>5;w%=32;for(var P=x.g.length-N,V=[],O=0;O<P;O++)V[O]=0<w?x.i(O+N)>>>w|x.i(O+N+1)<<32-w:x.i(O+N);return new c(V,x.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,R0=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=v,rr=c}).apply(typeof Dv<"u"?Dv:typeof self<"u"?self:typeof window<"u"?window:{});var Lc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var w0,Ml,b0,Gc,_p,N0,M0,x0;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,T,C){return h==Array.prototype||h==Object.prototype||(h[T]=C.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lc=="object"&&Lc];for(var T=0;T<h.length;++T){var C=h[T];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var s=t(this);function o(h,T){if(T)e:{var C=s;h=h.split(".");for(var R=0;R<h.length-1;R++){var z=h[R];if(!(z in C))break e;C=C[z]}h=h[h.length-1],R=C[h],T=T(R),T!=R&&T!=null&&e(C,h,{configurable:!0,writable:!0,value:T})}}function l(h,T){h instanceof String&&(h+="");var C=0,R=!1,z={next:function(){if(!R&&C<h.length){var X=C++;return{value:T(X,h[X]),done:!1}}return R=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}o("Array.prototype.values",function(h){return h||function(){return l(this,function(T,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function m(h){var T=typeof h;return T=T!="object"?T:h?Array.isArray(h)?"array":T:"null",T=="array"||T=="object"&&typeof h.length=="number"}function p(h){var T=typeof h;return T=="object"&&h!=null||T=="function"}function v(h,T,C){return h.call.apply(h.bind,arguments)}function E(h,T,C){if(!h)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,R),h.apply(T,z)}}return function(){return h.apply(T,arguments)}}function A(h,T,C){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,A.apply(null,arguments)}function b(h,T){var C=Array.prototype.slice.call(arguments,1);return function(){var R=C.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function q(h,T){function C(){}C.prototype=T.prototype,h.aa=T.prototype,h.prototype=new C,h.prototype.constructor=h,h.Qb=function(R,z,X){for(var le=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)le[$e-2]=arguments[$e];return T.prototype[z].apply(R,le)}}function G(h){const T=h.length;if(0<T){const C=Array(T);for(let R=0;R<T;R++)C[R]=h[R];return C}return[]}function Q(h,T){for(let C=1;C<arguments.length;C++){const R=arguments[C];if(m(R)){const z=h.length||0,X=R.length||0;h.length=z+X;for(let le=0;le<X;le++)h[z+le]=R[le]}else h.push(R)}}class se{constructor(T,C){this.i=T,this.j=C,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function K(h){return/^[\s\xa0]*$/.test(h)}function W(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function oe(h){return oe[" "](h),h}oe[" "]=function(){};var de=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function ce(h,T,C){for(const R in h)T.call(C,h[R],R,h)}function x(h,T){for(const C in h)T.call(void 0,h[C],C,h)}function w(h){const T={};for(const C in h)T[C]=h[C];return T}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(h,T){let C,R;for(let z=1;z<arguments.length;z++){R=arguments[z];for(C in R)h[C]=R[C];for(let X=0;X<N.length;X++)C=N[X],Object.prototype.hasOwnProperty.call(R,C)&&(h[C]=R[C])}}function V(h){var T=1;h=h.split(":");const C=[];for(;0<T&&h.length;)C.push(h.shift()),T--;return h.length&&C.push(h.join(":")),C}function O(h){d.setTimeout(()=>{throw h},0)}function D(){var h=ve;let T=null;return h.g&&(T=h.g,h.g=h.g.next,h.g||(h.h=null),T.next=null),T}class st{constructor(){this.h=this.g=null}add(T,C){const R=ct.get();R.set(T,C),this.h?this.h.next=R:this.g=R,this.h=R}}var ct=new se(()=>new F,h=>h.reset());class F{constructor(){this.next=this.g=this.h=null}set(T,C){this.h=T,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,ue=!1,ve=new st,Ce=()=>{const h=d.Promise.resolve(void 0);Z=()=>{h.then(U)}};var U=()=>{for(var h;h=D();){try{h.h.call(h.g)}catch(C){O(C)}var T=ct;T.j(h),100>T.h&&(T.h++,h.next=T.g,T.g=h)}ue=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(h,T){this.type=h,this.g=this.target=T,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var fe=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,T=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const C=()=>{};d.addEventListener("test",C,T),d.removeEventListener("test",C,T)}catch{}return h})();function Se(h,T){if(ae.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var C=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=T,T=h.relatedTarget){if(de){e:{try{oe(T.nodeName);var z=!0;break e}catch{}z=!1}z||(T=null)}}else C=="mouseover"?T=h.fromElement:C=="mouseout"&&(T=h.toElement);this.relatedTarget=T,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Me[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Se.aa.h.call(this)}}q(Se,ae);var Me={2:"touch",3:"pen",4:"mouse"};Se.prototype.h=function(){Se.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var De="closure_listenable_"+(1e6*Math.random()|0),Ft=0;function dt(h,T,C,R,z){this.listener=h,this.proxy=null,this.src=T,this.type=C,this.capture=!!R,this.ha=z,this.key=++Ft,this.da=this.fa=!1}function ti(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ii(h){this.src=h,this.g={},this.h=0}Ii.prototype.add=function(h,T,C,R,z){var X=h.toString();h=this.g[X],h||(h=this.g[X]=[],this.h++);var le=oo(h,T,R,z);return-1<le?(T=h[le],C||(T.fa=!1)):(T=new dt(T,this.src,X,!!R,z),T.fa=C,h.push(T)),T};function mr(h,T){var C=T.type;if(C in h.g){var R=h.g[C],z=Array.prototype.indexOf.call(R,T,void 0),X;(X=0<=z)&&Array.prototype.splice.call(R,z,1),X&&(ti(T),h.g[C].length==0&&(delete h.g[C],h.h--))}}function oo(h,T,C,R){for(var z=0;z<h.length;++z){var X=h[z];if(!X.da&&X.listener==T&&X.capture==!!C&&X.ha==R)return z}return-1}var Jn="closure_lm_"+(1e6*Math.random()|0),gr={};function ao(h,T,C,R,z){if(Array.isArray(T)){for(var X=0;X<T.length;X++)ao(h,T[X],C,R,z);return null}return C=cu(C),h&&h[De]?h.K(T,C,p(R)?!!R.capture:!1,z):Yf(h,T,C,!1,R,z)}function Yf(h,T,C,R,z,X){if(!T)throw Error("Invalid event type");var le=p(z)?!!z.capture:!!z,$e=Ra(h);if($e||(h[Jn]=$e=new Ii(h)),C=$e.add(T,C,R,le,X),C.proxy)return C;if(R=uu(),C.proxy=R,R.src=h,R.listener=C,h.addEventListener)fe||(z=le),z===void 0&&(z=!1),h.addEventListener(T.toString(),R,z);else if(h.attachEvent)h.attachEvent(uo(T.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return C}function uu(){function h(C){return T.call(h.src,h.listener,C)}const T=Kf;return h}function lo(h,T,C,R,z){if(Array.isArray(T))for(var X=0;X<T.length;X++)lo(h,T[X],C,R,z);else R=p(R)?!!R.capture:!!R,C=cu(C),h&&h[De]?(h=h.i,T=String(T).toString(),T in h.g&&(X=h.g[T],C=oo(X,C,R,z),-1<C&&(ti(X[C]),Array.prototype.splice.call(X,C,1),X.length==0&&(delete h.g[T],h.h--)))):h&&(h=Ra(h))&&(T=h.g[T.toString()],h=-1,T&&(h=oo(T,C,R,z)),(C=-1<h?T[h]:null)&&yr(C))}function yr(h){if(typeof h!="number"&&h&&!h.da){var T=h.src;if(T&&T[De])mr(T.i,h);else{var C=h.type,R=h.proxy;T.removeEventListener?T.removeEventListener(C,R,h.capture):T.detachEvent?T.detachEvent(uo(C),R):T.addListener&&T.removeListener&&T.removeListener(R),(C=Ra(T))?(mr(C,h),C.h==0&&(C.src=null,T[Jn]=null)):ti(h)}}}function uo(h){return h in gr?gr[h]:gr[h]="on"+h}function Kf(h,T){if(h.da)h=!0;else{T=new Se(T,this);var C=h.listener,R=h.ha||h.src;h.fa&&yr(h),h=C.call(R,T)}return h}function Ra(h){return h=h[Jn],h instanceof Ii?h:null}var zt="__closure_events_fn_"+(1e9*Math.random()>>>0);function cu(h){return typeof h=="function"?h:(h[zt]||(h[zt]=function(T){return h.handleEvent(T)}),h[zt])}function Mt(){ee.call(this),this.i=new Ii(this),this.M=this,this.F=null}q(Mt,ee),Mt.prototype[De]=!0,Mt.prototype.removeEventListener=function(h,T,C,R){lo(this,h,T,C,R)};function kt(h,T){var C,R=h.F;if(R)for(C=[];R;R=R.F)C.push(R);if(h=h.M,R=T.type||T,typeof T=="string")T=new ae(T,h);else if(T instanceof ae)T.target=T.target||h;else{var z=T;T=new ae(R,h),P(T,z)}if(z=!0,C)for(var X=C.length-1;0<=X;X--){var le=T.g=C[X];z=Ri(le,R,!0,T)&&z}if(le=T.g=h,z=Ri(le,R,!0,T)&&z,z=Ri(le,R,!1,T)&&z,C)for(X=0;X<C.length;X++)le=T.g=C[X],z=Ri(le,R,!1,T)&&z}Mt.prototype.N=function(){if(Mt.aa.N.call(this),this.i){var h=this.i,T;for(T in h.g){for(var C=h.g[T],R=0;R<C.length;R++)ti(C[R]);delete h.g[T],h.h--}}this.F=null},Mt.prototype.K=function(h,T,C,R){return this.i.add(String(h),T,!1,C,R)},Mt.prototype.L=function(h,T,C,R){return this.i.add(String(h),T,!0,C,R)};function Ri(h,T,C,R){if(T=h.i.g[String(T)],!T)return!0;T=T.concat();for(var z=!0,X=0;X<T.length;++X){var le=T[X];if(le&&!le.da&&le.capture==C){var $e=le.listener,At=le.ha||le.src;le.fa&&mr(h.i,le),z=$e.call(At,R)!==!1&&z}}return z&&!R.defaultPrevented}function fu(h,T,C){if(typeof h=="function")C&&(h=A(h,C));else if(h&&typeof h.handleEvent=="function")h=A(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:d.setTimeout(h,T||0)}function wa(h){h.g=fu(()=>{h.g=null,h.i&&(h.i=!1,wa(h))},h.l);const T=h.h;h.h=null,h.m.apply(null,T)}class Qf extends ee{constructor(T,C){super(),this.m=T,this.l=C,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:wa(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _r(h){ee.call(this),this.h=h,this.g={}}q(_r,ee);var us=[];function Zt(h){ce(h.g,function(T,C){this.g.hasOwnProperty(C)&&yr(T)},h),h.g={}}_r.prototype.N=function(){_r.aa.N.call(this),Zt(this)},_r.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mn=d.JSON.stringify,an=d.JSON.parse,$f=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function ba(){}ba.prototype.h=null;function du(h){return h.h||(h.h=h.i())}function vr(){}var ni={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cs(){ae.call(this,"d")}q(cs,ae);function Yn(){ae.call(this,"c")}q(Yn,ae);var xn={},fs=null;function co(){return fs=fs||new Mt}xn.La="serverreachability";function Na(h){ae.call(this,xn.La,h)}q(Na,ae);function wi(h){const T=co();kt(T,new Na(T))}xn.STAT_EVENT="statevent";function ds(h,T){ae.call(this,xn.STAT_EVENT,h),this.stat=T}q(ds,ae);function Gt(h){const T=co();kt(T,new ds(T,h))}xn.Ma="timingevent";function Ma(h,T){ae.call(this,xn.Ma,h),this.size=T}q(Ma,ae);function hs(h,T){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},T)}function ps(){this.g=!0}ps.prototype.xa=function(){this.g=!1};function xa(h,T,C,R,z,X){h.info(function(){if(h.g)if(X)for(var le="",$e=X.split("&"),At=0;At<$e.length;At++){var Pe=$e[At].split("=");if(1<Pe.length){var Ut=Pe[0];Pe=Pe[1];var Lt=Ut.split("_");le=2<=Lt.length&&Lt[1]=="type"?le+(Ut+"="+Pe+"&"):le+(Ut+"=redacted&")}}else le=null;else le=X;return"XMLHTTP REQ ("+R+") [attempt "+z+"]: "+T+`
`+C+`
`+le})}function Da(h,T,C,R,z,X,le){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+z+"]: "+T+`
`+C+`
`+X+" "+le})}function bi(h,T,C,R){h.info(function(){return"XMLHTTP TEXT ("+T+"): "+ii(h,C)+(R?" "+R:"")})}function hu(h,T){h.info(function(){return"TIMEOUT: "+T})}ps.prototype.info=function(){};function ii(h,T){if(!h.g)return T;if(!T)return null;try{var C=JSON.parse(T);if(C){for(h=0;h<C.length;h++)if(Array.isArray(C[h])){var R=C[h];if(!(2>R.length)){var z=R[1];if(Array.isArray(z)&&!(1>z.length)){var X=z[0];if(X!="noop"&&X!="stop"&&X!="close")for(var le=1;le<z.length;le++)z[le]=""}}}}return Mn(C)}catch{return T}}var mt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ht={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},si;function ms(){}q(ms,ba),ms.prototype.g=function(){return new XMLHttpRequest},ms.prototype.i=function(){return{}},si=new ms;function ri(h,T,C,R){this.j=h,this.i=T,this.l=C,this.R=R||1,this.U=new _r(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pu}function pu(){this.i=null,this.g="",this.h=!1}var Pa={},Ni={};function Tr(h,T,C){h.L=1,h.v=Ar(gt(T)),h.m=C,h.P=!0,Mi(h,null)}function Mi(h,T){h.F=Date.now(),Kn(h),h.A=gt(h.v);var C=h.A,R=h.R;Array.isArray(R)||(R=[String(R)]),Pi(C.i,"t",R),h.C=0,C=h.j.J,h.h=new pu,h.g=Mu(h.j,C?T:null,!h.m),0<h.O&&(h.M=new Qf(A(h.Y,h,h.g),h.O)),T=h.U,C=h.g,R=h.ca;var z="readystatechange";Array.isArray(z)||(z&&(us[0]=z.toString()),z=us);for(var X=0;X<z.length;X++){var le=ao(C,z[X],R||T.handleEvent,!1,T.h||T);if(!le)break;T.g[le.key]=le}T=h.H?w(h.H):{},h.m?(h.u||(h.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,T)):(h.u="GET",h.g.ea(h.A,h.u,null,T)),wi(),xa(h.i,h.u,h.A,h.l,h.R,h.m)}ri.prototype.ca=function(h){h=h.target;const T=this.M;T&&cn(h)==3?T.j():this.Y(h)},ri.prototype.Y=function(h){try{if(h==this.g)e:{const Lt=cn(this.g);var T=this.g.Ba();const bs=this.g.Z();if(!(3>Lt)&&(Lt!=3||this.g&&(this.h.h||this.g.oa()||Rr(this.g)))){this.J||Lt!=4||T==7||(T==8||0>=bs?wi(3):wi(2)),fo(this);var C=this.g.Z();this.X=C;t:if(xi(this)){var R=Rr(this.g);h="";var z=R.length,X=cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ln(this),gs(this);var le="";break t}this.h.i=new d.TextDecoder}for(T=0;T<z;T++)this.h.h=!0,h+=this.h.i.decode(R[T],{stream:!(X&&T==z-1)});R.length=0,this.h.g+=h,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=C==200,Da(this.i,this.u,this.A,this.l,this.R,Lt,C),this.o){if(this.T&&!this.K){t:{if(this.g){var $e,At=this.g;if(($e=At.g?At.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K($e)){var Pe=$e;break t}}Pe=null}if(C=Pe)bi(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,oi(this,C);else{this.o=!1,this.s=3,Gt(12),ln(this),gs(this);break e}}if(this.P){C=!0;let pn;for(;!this.J&&this.C<le.length;)if(pn=Er(this,le),pn==Ni){Lt==4&&(this.s=4,Gt(14),C=!1),bi(this.i,this.l,null,"[Incomplete Response]");break}else if(pn==Pa){this.s=4,Gt(15),bi(this.i,this.l,le,"[Invalid Chunk]"),C=!1;break}else bi(this.i,this.l,pn,null),oi(this,pn);if(xi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Lt!=4||le.length!=0||this.h.h||(this.s=1,Gt(16),C=!1),this.o=this.o&&C,!C)bi(this.i,this.l,le,"[Invalid Chunked Response]"),ln(this),gs(this);else if(0<le.length&&!this.W){this.W=!0;var Ut=this.j;Ut.g==this&&Ut.ba&&!Ut.M&&(Ut.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),Ha(Ut),Ut.M=!0,Gt(11))}}else bi(this.i,this.l,le,null),oi(this,le);Lt==4&&ln(this),this.o&&!this.J&&(Lt==4?wu(this.j,this):(this.o=!1,Kn(this)))}else Eu(this.g),C==400&&0<le.indexOf("Unknown SID")?(this.s=3,Gt(12)):(this.s=0,Gt(13)),ln(this),gs(this)}}}catch{}finally{}};function xi(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Er(h,T){var C=h.C,R=T.indexOf(`
`,C);return R==-1?Ni:(C=Number(T.substring(C,R)),isNaN(C)?Pa:(R+=1,R+C>T.length?Ni:(T=T.slice(R,R+C),h.C=R+C,T)))}ri.prototype.cancel=function(){this.J=!0,ln(this)};function Kn(h){h.S=Date.now()+h.I,vt(h,h.I)}function vt(h,T){if(h.B!=null)throw Error("WatchDog timer not null");h.B=hs(A(h.ba,h),T)}function fo(h){h.B&&(d.clearTimeout(h.B),h.B=null)}ri.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(hu(this.i,this.A),this.L!=2&&(wi(),Gt(17)),ln(this),this.s=2,gs(this)):vt(this,this.S-h)};function gs(h){h.j.G==0||h.J||wu(h.j,h)}function ln(h){fo(h);var T=h.M;T&&typeof T.ma=="function"&&T.ma(),h.M=null,Zt(h.U),h.g&&(T=h.g,h.g=null,T.abort(),T.ma())}function oi(h,T){try{var C=h.j;if(C.G!=0&&(C.g==h||ys(C.h,h))){if(!h.K&&ys(C.h,h)&&C.G==3){try{var R=C.Da.g.parse(T)}catch{R=null}if(Array.isArray(R)&&R.length==3){var z=R;if(z[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<h.F)Rs(C),Is(C);else break e;Ga(C),Gt(18)}}else C.za=z[1],0<C.za-C.T&&37500>z[2]&&C.F&&C.v==0&&!C.C&&(C.C=hs(A(C.Za,C),6e3));if(1>=mu(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else Vi(C,11)}else if((h.K||C.g==h)&&Rs(C),!K(T))for(z=C.Da.g.parse(T),T=0;T<z.length;T++){let Pe=z[T];if(C.T=Pe[0],Pe=Pe[1],C.G==2)if(Pe[0]=="c"){C.K=Pe[1],C.ia=Pe[2];const Ut=Pe[3];Ut!=null&&(C.la=Ut,C.j.info("VER="+C.la));const Lt=Pe[4];Lt!=null&&(C.Aa=Lt,C.j.info("SVER="+C.Aa));const bs=Pe[5];bs!=null&&typeof bs=="number"&&0<bs&&(R=1.5*bs,C.L=R,C.j.info("backChannelRequestTimeoutMs_="+R)),R=C;const pn=h.g;if(pn){const Nr=pn.g?pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nr){var X=R.h;X.g||Nr.indexOf("spdy")==-1&&Nr.indexOf("quic")==-1&&Nr.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(_s(X,X.h),X.h=null))}if(R.D){const Ui=pn.g?pn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ui&&(R.ya=Ui,He(R.I,R.D,Ui))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-h.F,C.j.info("Handshake RTT: "+C.R+"ms")),R=C;var le=h;if(R.qa=Nu(R,R.J?R.ia:null,R.W),le.K){Dn(R.h,le);var $e=le,At=R.L;At&&($e.I=At),$e.B&&(fo($e),Kn($e)),R.g=le}else Iu(R);0<C.i.length&&To(C)}else Pe[0]!="stop"&&Pe[0]!="close"||Vi(C,7);else C.G==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?Vi(C,7):Fa(C):Pe[0]!="noop"&&C.l&&C.l.ta(Pe),C.v=0)}}wi(4)}catch{}}var Xf=class{constructor(h,T){this.g=h,this.map=T}};function ka(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Va(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function mu(h){return h.h?1:h.g?h.g.size:0}function ys(h,T){return h.h?h.h==T:h.g?h.g.has(T):!1}function _s(h,T){h.g?h.g.add(T):h.h=T}function Dn(h,T){h.h&&h.h==T?h.h=null:h.g&&h.g.has(T)&&h.g.delete(T)}ka.prototype.cancel=function(){if(this.i=un(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function un(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let T=h.i;for(const C of h.g.values())T=T.concat(C.D);return T}return G(h.i)}function gu(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(m(h)){for(var T=[],C=h.length,R=0;R<C;R++)T.push(h[R]);return T}T=[],C=0;for(R in h)T[C++]=h[R];return T}function Wf(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(m(h)||typeof h=="string"){var T=[];h=h.length;for(var C=0;C<h;C++)T.push(C);return T}T=[],C=0;for(const R in h)T[C++]=R;return T}}}function ho(h,T){if(h.forEach&&typeof h.forEach=="function")h.forEach(T,void 0);else if(m(h)||typeof h=="string")Array.prototype.forEach.call(h,T,void 0);else for(var C=Wf(h),R=gu(h),z=R.length,X=0;X<z;X++)T.call(void 0,R[X],C&&C[X],h)}var Ua=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function po(h,T){if(h){h=h.split("&");for(var C=0;C<h.length;C++){var R=h[C].indexOf("="),z=null;if(0<=R){var X=h[C].substring(0,R);z=h[C].substring(R+1)}else X=h[C];T(X,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Di(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Di){this.h=h.h,vs(this,h.j),this.o=h.o,this.g=h.g,Sr(this,h.s),this.l=h.l;var T=h.i,C=new ai;C.i=T.i,T.g&&(C.g=new Map(T.g),C.h=T.h),mo(this,C),this.m=h.m}else h&&(T=String(h).match(Ua))?(this.h=!1,vs(this,T[1]||"",!0),this.o=Ts(T[2]||""),this.g=Ts(T[3]||"",!0),Sr(this,T[4]),this.l=Ts(T[5]||"",!0),mo(this,T[6]||"",!0),this.m=Ts(T[7]||"")):(this.h=!1,this.i=new ai(null,this.h))}Di.prototype.toString=function(){var h=[],T=this.j;T&&h.push(Pn(T,La,!0),":");var C=this.g;return(C||T=="file")&&(h.push("//"),(T=this.o)&&h.push(Pn(T,La,!0),"@"),h.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&h.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&h.push("/"),h.push(Pn(C,C.charAt(0)=="/"?Oa:yu,!0))),(C=this.i.toString())&&h.push("?",C),(C=this.m)&&h.push("#",Pn(C,ed)),h.join("")};function gt(h){return new Di(h)}function vs(h,T,C){h.j=C?Ts(T,!0):T,h.j&&(h.j=h.j.replace(/:$/,""))}function Sr(h,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);h.s=T}else h.s=null}function mo(h,T,C){T instanceof ai?(h.i=T,_u(h.i,h.h)):(C||(T=Pn(T,jf)),h.i=new ai(T,h.h))}function He(h,T,C){h.i.set(T,C)}function Ar(h){return He(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Ts(h,T){return h?T?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Pn(h,T,C){return typeof h=="string"?(h=encodeURI(h).replace(T,Zf),C&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Zf(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var La=/[#\/\?@]/g,yu=/[#\?:]/g,Oa=/[#\?]/g,jf=/[#\?@]/g,ed=/#/g;function ai(h,T){this.h=this.g=null,this.i=h||null,this.j=!!T}function Vt(h){h.g||(h.g=new Map,h.h=0,h.i&&po(h.i,function(T,C){h.add(decodeURIComponent(T.replace(/\+/g," ")),C)}))}n=ai.prototype,n.add=function(h,T){Vt(this),this.i=null,h=En(this,h);var C=this.g.get(h);return C||this.g.set(h,C=[]),C.push(T),this.h+=1,this};function go(h,T){Vt(h),T=En(h,T),h.g.has(T)&&(h.i=null,h.h-=h.g.get(T).length,h.g.delete(T))}function yo(h,T){return Vt(h),T=En(h,T),h.g.has(T)}n.forEach=function(h,T){Vt(this),this.g.forEach(function(C,R){C.forEach(function(z){h.call(T,z,R,this)},this)},this)},n.na=function(){Vt(this);const h=Array.from(this.g.values()),T=Array.from(this.g.keys()),C=[];for(let R=0;R<T.length;R++){const z=h[R];for(let X=0;X<z.length;X++)C.push(T[R])}return C},n.V=function(h){Vt(this);let T=[];if(typeof h=="string")yo(this,h)&&(T=T.concat(this.g.get(En(this,h))));else{h=Array.from(this.g.values());for(let C=0;C<h.length;C++)T=T.concat(h[C])}return T},n.set=function(h,T){return Vt(this),this.i=null,h=En(this,h),yo(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[T]),this.h+=1,this},n.get=function(h,T){return h?(h=this.V(h),0<h.length?String(h[0]):T):T};function Pi(h,T,C){go(h,T),0<C.length&&(h.i=null,h.g.set(En(h,T),G(C)),h.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],T=Array.from(this.g.keys());for(var C=0;C<T.length;C++){var R=T[C];const X=encodeURIComponent(String(R)),le=this.V(R);for(R=0;R<le.length;R++){var z=X;le[R]!==""&&(z+="="+encodeURIComponent(String(le[R]))),h.push(z)}}return this.i=h.join("&")};function En(h,T){return T=String(T),h.j&&(T=T.toLowerCase()),T}function _u(h,T){T&&!h.j&&(Vt(h),h.i=null,h.g.forEach(function(C,R){var z=R.toLowerCase();R!=z&&(go(this,R),Pi(this,z,C))},h)),h.j=T}function qa(h,T){const C=new ps;if(d.Image){const R=new Image;R.onload=b(hn,C,"TestLoadImage: loaded",!0,T,R),R.onerror=b(hn,C,"TestLoadImage: error",!1,T,R),R.onabort=b(hn,C,"TestLoadImage: abort",!1,T,R),R.ontimeout=b(hn,C,"TestLoadImage: timeout",!1,T,R),d.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else T(!1)}function vu(h,T){const C=new ps,R=new AbortController,z=setTimeout(()=>{R.abort(),hn(C,"TestPingServer: timeout",!1,T)},1e4);fetch(h,{signal:R.signal}).then(X=>{clearTimeout(z),X.ok?hn(C,"TestPingServer: ok",!0,T):hn(C,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(z),hn(C,"TestPingServer: error",!1,T)})}function hn(h,T,C,R,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),R(C)}catch{}}function Qn(){this.g=new $f}function Ba(h,T,C){const R=C||"";try{ho(h,function(z,X){let le=z;p(z)&&(le=Mn(z)),T.push(R+X+"="+encodeURIComponent(le))})}catch(z){throw T.push(R+"type="+encodeURIComponent("_badmap")),z}}function li(h){this.l=h.Ub||null,this.j=h.eb||!1}q(li,ba),li.prototype.g=function(){return new Sn(this.l,this.j)},li.prototype.i=(function(h){return function(){return h}})({});function Sn(h,T){Mt.call(this),this.D=h,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}q(Sn,Mt),n=Sn.prototype,n.open=function(h,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=T,this.readyState=1,Es(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(T.body=h),(this.D||d).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ui(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Es(this)),this.g&&(this.readyState=3,Es(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_o(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function _o(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var T=h.value?h.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!h.done}))&&(this.response=this.responseText+=T)}h.done?ui(this):Es(this),this.readyState==3&&_o(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,ui(this))},n.Qa=function(h){this.g&&(this.response=h,ui(this))},n.ga=function(){this.g&&ui(this)};function ui(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Es(h)}n.setRequestHeader=function(h,T){this.u.append(h,T)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],T=this.h.entries();for(var C=T.next();!C.done;)C=C.value,h.push(C[0]+": "+C[1]),C=T.next();return h.join(`\r
`)};function Es(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Sn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Cr(h){let T="";return ce(h,function(C,R){T+=R,T+=":",T+=C,T+=`\r
`}),T}function Ss(h,T,C){e:{for(R in C){var R=!1;break e}R=!0}R||(C=Cr(C),typeof h=="string"?C!=null&&encodeURIComponent(String(C)):He(h,T,C))}function rt(h){Mt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}q(rt,Mt);var jt=/^https?$/i,ki=["POST","PUT"];n=rt.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,T,C,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);T=T?T.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():si.g(),this.v=this.o?du(this.o):du(si),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(T,String(h),!0),this.B=!1}catch(X){Ir(this,X);return}if(h=C||"",C=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var z in R)C.set(z,R[z]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const X of R.keys())C.set(X,R.get(X));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(C.keys()).find(X=>X.toLowerCase()=="content-type"),z=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(ki,T,void 0))||R||z||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,le]of C)this.g.setRequestHeader(X,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vo(this),this.u=!0,this.g.send(h),this.u=!1}catch(X){Ir(this,X)}};function Ir(h,T){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=T,h.m=5,As(h),Cs(h)}function As(h){h.A||(h.A=!0,kt(h,"complete"),kt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,kt(this,"complete"),kt(this,"abort"),Cs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cs(this,!0)),rt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Tu(this):this.bb())},n.bb=function(){Tu(this)};function Tu(h){if(h.h&&typeof c<"u"&&(!h.v[1]||cn(h)!=4||h.Z()!=2)){if(h.u&&cn(h)==4)fu(h.Ea,0,h);else if(kt(h,"readystatechange"),cn(h)==4){h.h=!1;try{const le=h.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var C;if(!(C=T)){var R;if(R=le===0){var z=String(h.D).match(Ua)[1]||null;!z&&d.self&&d.self.location&&(z=d.self.location.protocol.slice(0,-1)),R=!jt.test(z?z.toLowerCase():"")}C=R}if(C)kt(h,"complete"),kt(h,"success");else{h.m=6;try{var X=2<cn(h)?h.g.statusText:""}catch{X=""}h.l=X+" ["+h.Z()+"]",As(h)}}finally{Cs(h)}}}}function Cs(h,T){if(h.g){vo(h);const C=h.g,R=h.v[0]?()=>{}:null;h.g=null,h.v=null,T||kt(h,"ready");try{C.onreadystatechange=R}catch{}}}function vo(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function cn(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<cn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var T=this.g.responseText;return h&&T.indexOf(h)==0&&(T=T.substring(h.length)),an(T)}};function Rr(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Eu(h){const T={};h=(h.g&&2<=cn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(K(h[R]))continue;var C=V(h[R]);const z=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const X=T[z]||[];T[z]=X,X.push(C)}x(T,function(R){return R.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wr(h,T,C){return C&&C.internalChannelParams&&C.internalChannelParams[h]||T}function Su(h){this.Aa=0,this.i=[],this.j=new ps,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wr("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wr("baseRetryDelayMs",5e3,h),this.cb=wr("retryDelaySeedMs",1e4,h),this.Wa=wr("forwardChannelMaxRetries",2,h),this.wa=wr("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new ka(h&&h.concurrentRequestLimit),this.Da=new Qn,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Su.prototype,n.la=8,n.G=1,n.connect=function(h,T,C,R){Gt(0),this.W=h,this.H=T||{},C&&R!==void 0&&(this.H.OSID=C,this.H.OAID=R),this.F=this.X,this.I=Nu(this,null,this.W),To(this)};function Fa(h){if(Au(h),h.G==3){var T=h.U++,C=gt(h.I);if(He(C,"SID",h.K),He(C,"RID",T),He(C,"TYPE","terminate"),br(h,C),T=new ri(h,h.j,T),T.L=2,T.v=Ar(gt(C)),C=!1,d.navigator&&d.navigator.sendBeacon)try{C=d.navigator.sendBeacon(T.v.toString(),"")}catch{}!C&&d.Image&&(new Image().src=T.v,C=!0),C||(T.g=Mu(T.j,null),T.g.ea(T.v)),T.F=Date.now(),Kn(T)}Ja(h)}function Is(h){h.g&&(Ha(h),h.g.cancel(),h.g=null)}function Au(h){Is(h),h.u&&(d.clearTimeout(h.u),h.u=null),Rs(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function To(h){if(!Va(h.h)&&!h.s){h.s=!0;var T=h.Ga;Z||Ce(),ue||(Z(),ue=!0),ve.add(T,h),h.B=0}}function td(h,T){return mu(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=T.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=hs(A(h.Ga,h,T),bu(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const z=new ri(this,this.j,h);let X=this.o;if(this.S&&(X?(X=w(X),P(X,this.S)):X=this.S),this.m!==null||this.O||(z.H=X,X=null),this.P)e:{for(var T=0,C=0;C<this.i.length;C++){t:{var R=this.i[C];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(T+=R,4096<T){T=C;break e}if(T===4096||C===this.i.length-1){T=C+1;break e}}T=1e3}else T=1e3;T=za(this,z,T),C=gt(this.I),He(C,"RID",h),He(C,"CVER",22),this.D&&He(C,"X-HTTP-Session-Id",this.D),br(this,C),X&&(this.O?T="headers="+encodeURIComponent(String(Cr(X)))+"&"+T:this.m&&Ss(C,this.m,X)),_s(this.h,z),this.Ua&&He(C,"TYPE","init"),this.P?(He(C,"$req",T),He(C,"SID","null"),z.T=!0,Tr(z,C,null)):Tr(z,C,T),this.G=2}}else this.G==3&&(h?Cu(this,h):this.i.length==0||Va(this.h)||Cu(this))};function Cu(h,T){var C;T?C=T.l:C=h.U++;const R=gt(h.I);He(R,"SID",h.K),He(R,"RID",C),He(R,"AID",h.T),br(h,R),h.m&&h.o&&Ss(R,h.m,h.o),C=new ri(h,h.j,C,h.B+1),h.m===null&&(C.H=h.o),T&&(h.i=T.D.concat(h.i)),T=za(h,C,1e3),C.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),_s(h.h,C),Tr(C,R,T)}function br(h,T){h.H&&ce(h.H,function(C,R){He(T,R,C)}),h.l&&ho({},function(C,R){He(T,R,C)})}function za(h,T,C){C=Math.min(h.i.length,C);var R=h.l?A(h.l.Na,h.l,h):null;e:{var z=h.i;let X=-1;for(;;){const le=["count="+C];X==-1?0<C?(X=z[0].g,le.push("ofs="+X)):X=0:le.push("ofs="+X);let $e=!0;for(let At=0;At<C;At++){let Pe=z[At].g;const Ut=z[At].map;if(Pe-=X,0>Pe)X=Math.max(0,z[At].g-100),$e=!1;else try{Ba(Ut,le,"req"+Pe+"_")}catch{R&&R(Ut)}}if($e){R=le.join("&");break e}}}return h=h.i.splice(0,C),T.D=h,R}function Iu(h){if(!h.g&&!h.u){h.Y=1;var T=h.Fa;Z||Ce(),ue||(Z(),ue=!0),ve.add(T,h),h.v=0}}function Ga(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=hs(A(h.Fa,h),bu(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Ru(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=hs(A(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Gt(10),Is(this),Ru(this))};function Ha(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Ru(h){h.g=new ri(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var T=gt(h.qa);He(T,"RID","rpc"),He(T,"SID",h.K),He(T,"AID",h.T),He(T,"CI",h.F?"0":"1"),!h.F&&h.ja&&He(T,"TO",h.ja),He(T,"TYPE","xmlhttp"),br(h,T),h.m&&h.o&&Ss(T,h.m,h.o),h.L&&(h.g.I=h.L);var C=h.g;h=h.ia,C.L=1,C.v=Ar(gt(T)),C.m=null,C.P=!0,Mi(C,h)}n.Za=function(){this.C!=null&&(this.C=null,Is(this),Ga(this),Gt(19))};function Rs(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function wu(h,T){var C=null;if(h.g==T){Rs(h),Ha(h),h.g=null;var R=2}else if(ys(h.h,T))C=T.D,Dn(h.h,T),R=1;else return;if(h.G!=0){if(T.o)if(R==1){C=T.m?T.m.length:0,T=Date.now()-T.F;var z=h.B;R=co(),kt(R,new Ma(R,C)),To(h)}else Iu(h);else if(z=T.s,z==3||z==0&&0<T.X||!(R==1&&td(h,T)||R==2&&Ga(h)))switch(C&&0<C.length&&(T=h.h,T.i=T.i.concat(C)),z){case 1:Vi(h,5);break;case 4:Vi(h,10);break;case 3:Vi(h,6);break;default:Vi(h,2)}}}function bu(h,T){let C=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(C*=2),C*T}function Vi(h,T){if(h.j.info("Error code "+T),T==2){var C=A(h.fb,h),R=h.Xa;const z=!R;R=new Di(R||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||vs(R,"https"),Ar(R),z?qa(R.toString(),C):vu(R.toString(),C)}else Gt(2);h.G=0,h.l&&h.l.sa(T),Ja(h),Au(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Gt(2)):(this.j.info("Failed to ping google.com"),Gt(1))};function Ja(h){if(h.G=0,h.ka=[],h.l){const T=un(h.h);(T.length!=0||h.i.length!=0)&&(Q(h.ka,T),Q(h.ka,h.i),h.h.i.length=0,G(h.i),h.i.length=0),h.l.ra()}}function Nu(h,T,C){var R=C instanceof Di?gt(C):new Di(C);if(R.g!="")T&&(R.g=T+"."+R.g),Sr(R,R.s);else{var z=d.location;R=z.protocol,T=T?T+"."+z.hostname:z.hostname,z=+z.port;var X=new Di(null);R&&vs(X,R),T&&(X.g=T),z&&Sr(X,z),C&&(X.l=C),R=X}return C=h.D,T=h.ya,C&&T&&He(R,C,T),He(R,"VER",h.la),br(h,R),R}function Mu(h,T,C){if(T&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=h.Ca&&!h.pa?new rt(new li({eb:C})):new rt(h.pa),T.Ha(h.J),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function xu(){}n=xu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Eo(){}Eo.prototype.g=function(h,T){return new fn(h,T)};function fn(h,T){Mt.call(this),this.g=new Su(T),this.l=h,this.h=T&&T.messageUrlParams||null,h=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(h?h["X-WebChannel-Content-Type"]=T.messageContentType:h={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(h?h["X-WebChannel-Client-Profile"]=T.va:h={"X-WebChannel-Client-Profile":T.va}),this.g.S=h,(h=T&&T.Sb)&&!K(h)&&(this.g.m=h),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!K(T)&&(this.g.D=T,h=this.h,h!==null&&T in h&&(h=this.h,T in h&&delete h[T])),this.j=new ws(this)}q(fn,Mt),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Fa(this.g)},fn.prototype.o=function(h){var T=this.g;if(typeof h=="string"){var C={};C.__data__=h,h=C}else this.u&&(C={},C.__data__=Mn(h),h=C);T.i.push(new Xf(T.Ya++,h)),T.G==3&&To(T)},fn.prototype.N=function(){this.g.l=null,delete this.j,Fa(this.g),delete this.g,fn.aa.N.call(this)};function Du(h){cs.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var T=h.__sm__;if(T){e:{for(const C in T){h=C;break e}h=void 0}(this.i=h)&&(h=this.i,T=T!==null&&h in T?T[h]:void 0),this.data=T}else this.data=h}q(Du,cs);function Pu(){Yn.call(this),this.status=1}q(Pu,Yn);function ws(h){this.g=h}q(ws,xu),ws.prototype.ua=function(){kt(this.g,"a")},ws.prototype.ta=function(h){kt(this.g,new Du(h))},ws.prototype.sa=function(h){kt(this.g,new Pu)},ws.prototype.ra=function(){kt(this.g,"b")},Eo.prototype.createWebChannel=Eo.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,x0=function(){return new Eo},M0=function(){return co()},N0=xn,_p={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},mt.NO_ERROR=0,mt.TIMEOUT=8,mt.HTTP_ERROR=6,Gc=mt,Ht.COMPLETE="complete",b0=Ht,vr.EventType=ni,ni.OPEN="a",ni.CLOSE="b",ni.ERROR="c",ni.MESSAGE="d",Mt.prototype.listen=Mt.prototype.K,Ml=vr,rt.prototype.listenOnce=rt.prototype.L,rt.prototype.getLastError=rt.prototype.Ka,rt.prototype.getLastErrorCode=rt.prototype.Ba,rt.prototype.getStatus=rt.prototype.Z,rt.prototype.getResponseJson=rt.prototype.Oa,rt.prototype.getResponseText=rt.prototype.oa,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Ha,w0=rt}).apply(typeof Lc<"u"?Lc:typeof self<"u"?self:typeof window<"u"?window:{});const Pv="@firebase/firestore",kv="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _a="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr=new Qp("@firebase/firestore");function Xo(){return Wr.logLevel}function he(n,...e){if(Wr.logLevel<=Be.DEBUG){const t=e.map(Wp);Wr.debug(`Firestore (${_a}): ${n}`,...t)}}function is(n,...e){if(Wr.logLevel<=Be.ERROR){const t=e.map(Wp);Wr.error(`Firestore (${_a}): ${n}`,...t)}}function ar(n,...e){if(Wr.logLevel<=Be.WARN){const t=e.map(Wp);Wr.warn(`Firestore (${_a}): ${n}`,...t)}}function Wp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,D0(n,s,t)}function D0(n,e,t){let s=`FIRESTORE (${_a}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw is(s),new Error(s)}function Xe(n,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,n||D0(e,o,s)}function be(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends as{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Dw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(nn.UNAUTHENTICATED)))}shutdown(){}}class Pw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class kw{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Xe(this.o===void 0,42304);let s=this.i;const o=m=>this.i!==s?(s=this.i,t(m)):Promise.resolve();let l=new or;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new or,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},d=m=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new or)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Xe(typeof s.accessToken=="string",31837,{l:s}),new P0(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class Vw{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Uw{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new Vw(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Vv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Lw{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,mi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Xe(this.o===void 0,3512);const s=l=>{l.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,he("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Vv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Xe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Vv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=Ow(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Ve(n,e){return n<e?-1:n>e?1:0}function vp(n,e){let t=0;for(;t<n.length&&t<e.length;){const s=n.codePointAt(t),o=e.codePointAt(t);if(s!==o){if(s<128&&o<128)return Ve(s,o);{const l=k0(),c=qw(l.encode(Uv(n,t)),l.encode(Uv(e,t)));return c!==0?c:Ve(s,o)}}t+=s>65535?2:1}return Ve(n.length,e.length)}function Uv(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function qw(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ve(n[t],e[t]);return Ve(n.length,e.length)}function ca(n,e,t){return n.length===e.length&&n.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="__name__";class pi{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ae(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ae(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return pi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof pi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=pi.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ve(e.length,t.length)}static compareSegments(e,t){const s=pi.isNumericId(e),o=pi.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?pi.extractNumericId(e).compare(pi.extractNumericId(t)):vp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return rr.fromString(e.substring(4,e.length-2))}}class ht extends pi{construct(e,t,s){return new ht(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ye(re.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new ht(t)}static emptyPath(){return new ht([])}}const Bw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends pi{construct(e,t,s){return new Xt(e,t,s)}static isValidIdentifier(e){return Bw.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Lv}static keyField(){return new Xt([Lv])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new ye(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new ye(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ye(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=m,o+=2}else d==="`"?(c=!c,o++):d!=="."||c?(s+=d,o++):(l(),o++)}if(l(),c)throw new ye(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xt(t)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(ht.fromString(e))}static fromName(e){return new Te(ht.fromString(e).popFirst(5))}static empty(){return new Te(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new ht(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(n,e,t){if(!t)throw new ye(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function zw(n,e,t,s){if(e===!0&&s===!0)throw new ye(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Ov(n){if(!Te.isDocumentKey(n))throw new ye(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function V0(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function jp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ae(12329,{type:typeof n})}function Gl(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jp(n);throw new ye(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(n,e){const t={typeString:n};return e&&(t.value=e),t}function eu(n,e){if(!V0(n))throw new ye(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(o&&typeof c!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new ye(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=-62135596800,Bv=1e6;class ut{static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Bv);return new ut(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<qv)throw new ye(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Bv}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(eu(e,ut._jsonSchema))return new ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-qv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ut._jsonSchemaVersion="firestore/timestamp/1.0",ut._jsonSchema={type:Nt("string",ut._jsonSchemaVersion),seconds:Nt("number"),nanoseconds:Nt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new ut(0,0))}static max(){return new Re(new ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=-1;function Gw(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(s===1e9?new ut(t+1,0):new ut(t,s));return new lr(o,Te.empty(),e)}function Hw(n){return new lr(n.readTime,n.key,Hl)}class lr{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new lr(Re.min(),Te.empty(),Hl)}static max(){return new lr(Re.max(),Te.empty(),Hl)}}function Jw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(n.documentKey,e.documentKey),t!==0?t:Ve(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Kw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function va(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==Yw)throw n;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.reject(t)}static resolve(e){return new ie(((t,s)=>{t(e)}))}static reject(e){return new ie(((t,s)=>{s(e)}))}static waitFor(e){return new ie(((t,s)=>{let o=0,l=0,c=!1;e.forEach((d=>{++o,d.next((()=>{++l,c&&l===o&&t()}),(m=>s(m)))})),c=!0,l===o&&t()}))}static or(e){let t=ie.resolve(!1);for(const s of e)t=t.next((o=>o?ie.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new ie(((s,o)=>{const l=e.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const p=m;t(e[p]).next((v=>{c[p]=v,++d,d===l&&s(c)}),(v=>o(v)))}}))}static doWhile(e,t){return new ie(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function Qw(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ta(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this._e(s),this.ae=s=>t.writeSequenceNumber(s))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Rf.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em=-1;function wf(n){return n==null}function sf(n){return n===0&&1/n==-1/0}function $w(n){return typeof n=="number"&&Number.isInteger(n)&&!sf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0="";function Xw(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Fv(e)),e=Ww(n.get(t),e);return Fv(e)}function Ww(n,e){let t=e;const s=n.length;for(let o=0;o<s;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case U0:t+="";break;default:t+=l}}return t}function Fv(n){return n+U0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function to(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function L0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,t){this.comparator=e,this.root=t||$t.EMPTY}insert(e,t){return new pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Oc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Oc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Oc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Oc(this.root,e,this.comparator,!0)}}class Oc{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $t{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??$t.RED,this.left=o??$t.EMPTY,this.right=l??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new $t(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return $t.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new $t(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Gv(this.data.getIterator())}getIteratorFrom(e){return new Gv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Pt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Pt(this.comparator);return t.data=e,t}}class Gv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new Zn([])}unionWith(e){let t=new Pt(Xt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Zn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ca(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new O0("Invalid base64 string: "+l):l}})(e);return new Wt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new Wt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const Zw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ur(n){if(Xe(!!n,39018),typeof n=="string"){let e=0;const t=Zw.exec(n);if(Xe(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:St(n.seconds),nanos:St(n.nanos)}}function St(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function cr(n){return typeof n=="string"?Wt.fromBase64String(n):Wt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0="server_timestamp",B0="__type__",F0="__previous_value__",z0="__local_write_time__";function tm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[B0])===null||t===void 0?void 0:t.stringValue)===q0}function bf(n){const e=n.mapValue.fields[F0];return tm(e)?bf(e):e}function Jl(n){const e=ur(n.mapValue.fields[z0].timestampValue);return new ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e,t,s,o,l,c,d,m,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=v}}const rf="(default)";class Yl{constructor(e,t){this.projectId=e,this.database=t||rf}static empty(){return new Yl("","")}get isDefaultDatabase(){return this.database===rf}isEqual(e){return e instanceof Yl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0="__type__",e1="__max__",qc={mapValue:{}},H0="__vector__",of="value";function fr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tm(n)?4:n1(n)?9007199254740991:t1(n)?10:11:Ae(28295,{value:n})}function Ai(n,e){if(n===e)return!0;const t=fr(n);if(t!==fr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Jl(n).isEqual(Jl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=ur(o.timestampValue),d=ur(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return cr(o.bytesValue).isEqual(cr(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return St(o.geoPointValue.latitude)===St(l.geoPointValue.latitude)&&St(o.geoPointValue.longitude)===St(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return St(o.integerValue)===St(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=St(o.doubleValue),d=St(l.doubleValue);return c===d?sf(c)===sf(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return ca(n.arrayValue.values||[],e.arrayValue.values||[],Ai);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},d=l.mapValue.fields||{};if(zv(c)!==zv(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!Ai(c[m],d[m])))return!1;return!0})(n,e);default:return Ae(52216,{left:n})}}function Kl(n,e){return(n.values||[]).find((t=>Ai(t,e)))!==void 0}function fa(n,e){if(n===e)return 0;const t=fr(n),s=fr(e);if(t!==s)return Ve(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ve(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=St(l.integerValue||l.doubleValue),m=St(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(n,e);case 3:return Hv(n.timestampValue,e.timestampValue);case 4:return Hv(Jl(n),Jl(e));case 5:return vp(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=cr(l),m=cr(c);return d.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),m=c.split("/");for(let p=0;p<d.length&&p<m.length;p++){const v=Ve(d[p],m[p]);if(v!==0)return v}return Ve(d.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Ve(St(l.latitude),St(c.latitude));return d!==0?d:Ve(St(l.longitude),St(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Jv(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var d,m,p,v;const E=l.fields||{},A=c.fields||{},b=(d=E[of])===null||d===void 0?void 0:d.arrayValue,q=(m=A[of])===null||m===void 0?void 0:m.arrayValue,G=Ve(((p=b==null?void 0:b.values)===null||p===void 0?void 0:p.length)||0,((v=q==null?void 0:q.values)===null||v===void 0?void 0:v.length)||0);return G!==0?G:Jv(b,q)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===qc.mapValue&&c===qc.mapValue)return 0;if(l===qc.mapValue)return 1;if(c===qc.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),p=c.fields||{},v=Object.keys(p);m.sort(),v.sort();for(let E=0;E<m.length&&E<v.length;++E){const A=vp(m[E],v[E]);if(A!==0)return A;const b=fa(d[m[E]],p[v[E]]);if(b!==0)return b}return Ve(m.length,v.length)})(n.mapValue,e.mapValue);default:throw Ae(23264,{le:t})}}function Hv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ve(n,e);const t=ur(n),s=ur(e),o=Ve(t.seconds,s.seconds);return o!==0?o:Ve(t.nanos,s.nanos)}function Jv(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=fa(t[o],s[o]);if(l)return l}return Ve(t.length,s.length)}function da(n){return Tp(n)}function Tp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=ur(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return cr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Te.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=Tp(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of s)l?l=!1:o+=",",o+=`${c}:${Tp(t.fields[c])}`;return o+"}"})(n.mapValue):Ae(61005,{value:n})}function Hc(n){switch(fr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bf(n);return e?16+Hc(e):16;case 5:return 2*n.stringValue.length;case 6:return cr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+Hc(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let o=0;return to(s.fields,((l,c)=>{o+=l.length+Hc(c)})),o})(n.mapValue);default:throw Ae(13486,{value:n})}}function Ep(n){return!!n&&"integerValue"in n}function nm(n){return!!n&&"arrayValue"in n}function Yv(n){return!!n&&"nullValue"in n}function Kv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Jc(n){return!!n&&"mapValue"in n}function t1(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[G0])===null||t===void 0?void 0:t.stringValue)===H0}function Vl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return to(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Vl(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function n1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===e1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.value=e}static empty(){return new zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Jc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vl(t)}setAll(e){let t=Xt.emptyPath(),s={},o=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,s,o),s={},o=[],t=d.popLast()}c?s[d.lastSegment()]=Vl(c):o.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());Jc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ai(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Jc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){to(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new zn(Vl(this.value))}}function J0(n){const e=[];return to(n.fields,((t,s)=>{const o=new Xt([t]);if(Jc(s)){const l=J0(s.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new Zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,t,s,o,l,c,d){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new sn(e,0,Re.min(),Re.min(),Re.min(),zn.empty(),0)}static newFoundDocument(e,t,s,o){return new sn(e,1,t,Re.min(),s,o,0)}static newNoDocument(e,t){return new sn(e,2,t,Re.min(),Re.min(),zn.empty(),0)}static newUnknownDocument(e,t){return new sn(e,3,t,Re.min(),Re.min(),zn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,t){this.position=e,this.inclusive=t}}function Qv(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?s=Te.comparator(Te.fromName(c.referenceValue),t.key):s=fa(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function $v(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ai(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,t="asc"){this.field=e,this.dir=t}}function i1(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{}class Dt extends Y0{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new r1(e,t,s):t==="array-contains"?new l1(e,s):t==="in"?new u1(e,s):t==="not-in"?new c1(e,s):t==="array-contains-any"?new f1(e,s):new Dt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new o1(e,s):new a1(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(fa(t,this.value)):t!==null&&fr(this.value)===fr(t)&&this.matchesComparison(fa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ci extends Y0{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Ci(e,t)}matches(e){return K0(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function K0(n){return n.op==="and"}function Q0(n){return s1(n)&&K0(n)}function s1(n){for(const e of n.filters)if(e instanceof Ci)return!1;return!0}function Sp(n){if(n instanceof Dt)return n.field.canonicalString()+n.op.toString()+da(n.value);if(Q0(n))return n.filters.map((e=>Sp(e))).join(",");{const e=n.filters.map((t=>Sp(t))).join(",");return`${n.op}(${e})`}}function $0(n,e){return n instanceof Dt?(function(s,o){return o instanceof Dt&&s.op===o.op&&s.field.isEqual(o.field)&&Ai(s.value,o.value)})(n,e):n instanceof Ci?(function(s,o){return o instanceof Ci&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,c,d)=>l&&$0(c,o.filters[d])),!0):!1})(n,e):void Ae(19439)}function X0(n){return n instanceof Dt?(function(t){return`${t.field.canonicalString()} ${t.op} ${da(t.value)}`})(n):n instanceof Ci?(function(t){return t.op.toString()+" {"+t.getFilters().map(X0).join(" ,")+"}"})(n):"Filter"}class r1 extends Dt{constructor(e,t,s){super(e,t,s),this.key=Te.fromName(s.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class o1 extends Dt{constructor(e,t){super(e,"in",t),this.keys=W0("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class a1 extends Dt{constructor(e,t){super(e,"not-in",t),this.keys=W0("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function W0(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((s=>Te.fromName(s.referenceValue)))}class l1 extends Dt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return nm(t)&&Kl(t.arrayValue,this.value)}}class u1 extends Dt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Kl(this.value.arrayValue,t)}}class c1 extends Dt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Kl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Kl(this.value.arrayValue,t)}}class f1 extends Dt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!nm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Kl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,t=null,s=[],o=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=c,this.endAt=d,this.Pe=null}}function Xv(n,e=null,t=[],s=[],o=null,l=null,c=null){return new d1(n,e,t,s,o,l,c)}function im(n){const e=be(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Sp(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),wf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>da(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>da(s))).join(",")),e.Pe=t}return e.Pe}function sm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!i1(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!$0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!$v(n.startAt,e.startAt)&&$v(n.endAt,e.endAt)}function Ap(n){return Te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,t=null,s=[],o=[],l=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function h1(n,e,t,s,o,l,c,d){return new Nf(n,e,t,s,o,l,c,d)}function rm(n){return new Nf(n)}function Wv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function p1(n){return n.collectionGroup!==null}function Ul(n){const e=be(n);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Pt(Xt.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((p=>{p.isInequality()&&(d=d.add(p.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new lf(l,s))})),t.has(Xt.keyField().canonicalString())||e.Te.push(new lf(Xt.keyField(),s))}return e.Te}function gi(n){const e=be(n);return e.Ie||(e.Ie=m1(e,Ul(n))),e.Ie}function m1(n,e){if(n.limitType==="F")return Xv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new lf(o.field,l)}));const t=n.endAt?new af(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new af(n.startAt.position,n.startAt.inclusive):null;return Xv(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Cp(n,e,t){return new Nf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Mf(n,e){return sm(gi(n),gi(e))&&n.limitType===e.limitType}function Z0(n){return`${im(gi(n))}|lt:${n.limitType}`}function Wo(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>X0(o))).join(", ")}]`),wf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>da(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>da(o))).join(",")),`Target(${s})`})(gi(n))}; limitType=${n.limitType})`}function xf(n,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Te.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,o){for(const l of Ul(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(s,o){return!(s.startAt&&!(function(c,d,m){const p=Qv(c,d,m);return c.inclusive?p<=0:p<0})(s.startAt,Ul(s),o)||s.endAt&&!(function(c,d,m){const p=Qv(c,d,m);return c.inclusive?p>=0:p>0})(s.endAt,Ul(s),o))})(n,e)}function g1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function j0(n){return(e,t)=>{let s=!1;for(const o of Ul(n)){const l=y1(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function y1(n,e,t){const s=n.field.isKeyField()?Te.comparator(e.key,t.key):(function(l,c,d){const m=c.data.field(l),p=d.data.field(l);return m!==null&&p!==null?fa(m,p):Ae(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Ae(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){to(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return L0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=new pt(Te.comparator);function ss(){return _1}const eS=new pt(Te.comparator);function xl(...n){let e=eS;for(const t of n)e=e.insert(t.key,t);return e}function tS(n){let e=eS;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Yr(){return Ll()}function nS(){return Ll()}function Ll(){return new no((n=>n.toString()),((n,e)=>n.isEqual(e)))}const v1=new pt(Te.comparator),T1=new Pt(Te.comparator);function Fe(...n){let e=T1;for(const t of n)e=e.add(t);return e}const E1=new Pt(Ve);function S1(){return E1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sf(e)?"-0":e}}function iS(n){return{integerValue:""+n}}function A1(n,e){return $w(e)?iS(e):om(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(){this._=void 0}}function C1(n,e,t){return n instanceof uf?(function(o,l){const c={fields:{[B0]:{stringValue:q0},[z0]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&tm(l)&&(l=bf(l)),l&&(c.fields[F0]=l),{mapValue:c}})(t,e):n instanceof Ql?rS(n,e):n instanceof $l?oS(n,e):(function(o,l){const c=sS(o,l),d=Zv(c)+Zv(o.Ee);return Ep(c)&&Ep(o.Ee)?iS(d):om(o.serializer,d)})(n,e)}function I1(n,e,t){return n instanceof Ql?rS(n,e):n instanceof $l?oS(n,e):t}function sS(n,e){return n instanceof cf?(function(s){return Ep(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class uf extends Df{}class Ql extends Df{constructor(e){super(),this.elements=e}}function rS(n,e){const t=aS(e);for(const s of n.elements)t.some((o=>Ai(o,s)))||t.push(s);return{arrayValue:{values:t}}}class $l extends Df{constructor(e){super(),this.elements=e}}function oS(n,e){let t=aS(e);for(const s of n.elements)t=t.filter((o=>!Ai(o,s)));return{arrayValue:{values:t}}}class cf extends Df{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Zv(n){return St(n.integerValue||n.doubleValue)}function aS(n){return nm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function R1(n,e){return n.field.isEqual(e.field)&&(function(s,o){return s instanceof Ql&&o instanceof Ql||s instanceof $l&&o instanceof $l?ca(s.elements,o.elements,Ai):s instanceof cf&&o instanceof cf?Ai(s.Ee,o.Ee):s instanceof uf&&o instanceof uf})(n.transform,e.transform)}class w1{constructor(e,t){this.version=e,this.transformResults=t}}class ts{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ts}static exists(e){return new ts(void 0,e)}static updateTime(e){return new ts(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Pf{}function lS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new cS(n.key,ts.none()):new tu(n.key,n.data,ts.none());{const t=n.data,s=zn.empty();let o=new Pt(Xt.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),o=o.add(l)}return new io(n.key,s,new Zn(o.toArray()),ts.none())}}function b1(n,e,t){n instanceof tu?(function(o,l,c){const d=o.value.clone(),m=eT(o.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof io?(function(o,l,c){if(!Yc(o.precondition,l))return void l.convertToUnknownDocument(c.version);const d=eT(o.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(uS(o)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Ol(n,e,t,s){return n instanceof tu?(function(l,c,d,m){if(!Yc(l.precondition,c))return d;const p=l.value.clone(),v=tT(l.fieldTransforms,m,c);return p.setAll(v),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(n,e,t,s):n instanceof io?(function(l,c,d,m){if(!Yc(l.precondition,c))return d;const p=tT(l.fieldTransforms,m,c),v=c.data;return v.setAll(uS(l)),v.setAll(p),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,s):(function(l,c,d){return Yc(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function N1(n,e){let t=null;for(const s of n.fieldTransforms){const o=e.data.field(s.field),l=sS(s.transform,o||null);l!=null&&(t===null&&(t=zn.empty()),t.set(s.field,l))}return t||null}function jv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&ca(s,o,((l,c)=>R1(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class tu extends Pf{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class io extends Pf{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function uS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function eT(n,e,t){const s=new Map;Xe(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,d=e.data.field(l.field);s.set(l.field,I1(c,d,t[o]))}return s}function tT(n,e,t){const s=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);s.set(o.field,C1(l,c,e))}return s}class cS extends Pf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class M1 extends Pf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&b1(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Ol(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Ol(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=nS();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(o.key)?null:d;const m=lS(c,d);m!==null&&s.set(o.key,m),c.isValidDocument()||c.convertToNoDocument(Re.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Fe())}isEqual(e){return this.batchId===e.batchId&&ca(this.mutations,e.mutations,((t,s)=>jv(t,s)))&&ca(this.baseMutations,e.baseMutations,((t,s)=>jv(t,s)))}}class am{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Xe(e.mutations.length===s.length,58842,{Ve:e.mutations.length,me:s.length});let o=(function(){return v1})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,s[c].version);return new am(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bt,Ge;function k1(n){switch(n){case re.OK:return Ae(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Ae(15467,{code:n})}}function fS(n){if(n===void 0)return is("GRPC error has no .code"),re.UNKNOWN;switch(n){case bt.OK:return re.OK;case bt.CANCELLED:return re.CANCELLED;case bt.UNKNOWN:return re.UNKNOWN;case bt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case bt.INTERNAL:return re.INTERNAL;case bt.UNAVAILABLE:return re.UNAVAILABLE;case bt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case bt.NOT_FOUND:return re.NOT_FOUND;case bt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case bt.ABORTED:return re.ABORTED;case bt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case bt.DATA_LOSS:return re.DATA_LOSS;default:return Ae(39323,{code:n})}}(Ge=bt||(bt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=new rr([4294967295,4294967295],0);function nT(n){const e=k0().encode(n),t=new R0;return t.update(e),new Uint8Array(t.digest())}function iT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new rr([t,s],0),new rr([o,l],0)]}class lm{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Dl(`Invalid padding: ${t}`);if(s<0)throw new Dl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Dl(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Dl(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=rr.fromNumber(this.fe)}pe(e,t,s){let o=e.add(t.multiply(rr.fromNumber(s)));return o.compare(V1)===1&&(o=new rr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=nT(e),[s,o]=iT(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(s,o,l);if(!this.ye(c))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new lm(l,o,t);return s.forEach((d=>c.insert(d))),c}insert(e){if(this.fe===0)return;const t=nT(e),[s,o]=iT(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(s,o,l);this.we(c)}}we(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Dl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,nu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new kf(Re.min(),o,new pt(Ve),ss(),Fe())}}class nu{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new nu(s,t,Fe(),Fe(),Fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,t,s,o){this.Se=e,this.removedTargetIds=t,this.key=s,this.be=o}}class dS{constructor(e,t){this.targetId=e,this.De=t}}class hS{constructor(e,t,s=Wt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class sT{constructor(){this.ve=0,this.Ce=rT(),this.Fe=Wt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Fe(),t=Fe(),s=Fe();return this.Ce.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Ae(38017,{changeType:l})}})),new nu(this.Fe,this.Me,e,t,s)}ke(){this.xe=!1,this.Ce=rT()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Xe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class U1{constructor(e){this.We=e,this.Ge=new Map,this.ze=ss(),this.je=Bc(),this.Je=Bc(),this.He=new pt(Ve)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const s=this.tt(t);switch(e.state){case 0:this.nt(t)&&s.Be(e.resumeToken);break;case 1:s.Ue(),s.Oe||s.ke(),s.Be(e.resumeToken);break;case 2:s.Ue(),s.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(s.Ke(),s.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),s.Be(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((s,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,s=e.De.count,o=this.st(t);if(o){const l=o.target;if(Ap(l))if(s===0){const c=new Te(l.path);this.Xe(t,c,sn.newNoDocument(c,Re.min()))}else Xe(s===1,20013,{expectedCount:s});else{const c=this.ot(t);if(c!==s){const d=this._t(e),m=d?this.ut(d,e,c):1;if(m!==0){this.rt(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,p)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let c,d;try{c=cr(s).toUint8Array()}catch(m){if(m instanceof O0)return ar("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new lm(c,o,l)}catch(m){return ar(m instanceof Dl?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.fe===0?null:d}ut(e,t,s){return t.De.count===s-this.ht(e,t.targetId)?0:2}ht(e,t){const s=this.We.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const c=this.We.lt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,l,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((l,c)=>{const d=this.st(c);if(d){if(l.current&&Ap(d.target)){const m=new Te(d.target.path);this.Tt(m).has(c)||this.It(c,m)||this.Xe(c,m,sn.newNoDocument(m,e))}l.Ne&&(t.set(c,l.Le()),l.ke())}}));let s=Fe();this.Je.forEach(((l,c)=>{let d=!0;c.forEachWhile((m=>{const p=this.st(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(s=s.add(l))})),this.ze.forEach(((l,c)=>c.setReadTime(e)));const o=new kf(e,t,this.He,this.ze,s);return this.ze=ss(),this.je=Bc(),this.Je=Bc(),this.He=new pt(Ve),o}Ze(e,t){if(!this.nt(e))return;const s=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,s),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,s){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),s&&(this.ze=this.ze.insert(t,s))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new sT,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Pt(Ve),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Pt(Ve),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new sT),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Bc(){return new pt(Te.comparator)}function rT(){return new pt(Te.comparator)}const L1={asc:"ASCENDING",desc:"DESCENDING"},O1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},q1={and:"AND",or:"OR"};class B1{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ip(n,e){return n.useProto3Json||wf(e)?e:{value:e}}function ff(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function F1(n,e){return ff(n,e.toTimestamp())}function yi(n){return Xe(!!n,49232),Re.fromTimestamp((function(t){const s=ur(t);return new ut(s.seconds,s.nanos)})(n))}function um(n,e){return Rp(n,e).canonicalString()}function Rp(n,e){const t=(function(o){return new ht(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function mS(n){const e=ht.fromString(n);return Xe(TS(e),10190,{key:e.toString()}),e}function wp(n,e){return um(n.databaseId,e.path)}function op(n,e){const t=mS(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Te(yS(t))}function gS(n,e){return um(n.databaseId,e)}function z1(n){const e=mS(n);return e.length===4?ht.emptyPath():yS(e)}function bp(n){return new ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function yS(n){return Xe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function oT(n,e,t){return{name:wp(n,e),fields:t.value.mapValue.fields}}function G1(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ae(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(p,v){return p.useProto3Json?(Xe(v===void 0||typeof v=="string",58123),Wt.fromBase64String(v||"")):(Xe(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Wt.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(p){const v=p.code===void 0?re.UNKNOWN:fS(p.code);return new ye(v,p.message||"")})(c);t=new hS(s,o,l,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=op(n,s.document.name),l=yi(s.document.updateTime),c=s.document.createTime?yi(s.document.createTime):Re.min(),d=new zn({mapValue:{fields:s.document.fields}}),m=sn.newFoundDocument(o,l,c,d),p=s.targetIds||[],v=s.removedTargetIds||[];t=new Kc(p,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=op(n,s.document),l=s.readTime?yi(s.readTime):Re.min(),c=sn.newNoDocument(o,l),d=s.removedTargetIds||[];t=new Kc([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=op(n,s.document),l=s.removedTargetIds||[];t=new Kc([],l,o,null)}else{if(!("filter"in e))return Ae(11601,{At:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,c=new P1(o,l),d=s.targetId;t=new dS(d,c)}}return t}function H1(n,e){let t;if(e instanceof tu)t={update:oT(n,e.key,e.value)};else if(e instanceof cS)t={delete:wp(n,e.key)};else if(e instanceof io)t={update:oT(n,e.key,e.data),updateMask:j1(e.fieldMask)};else{if(!(e instanceof M1))return Ae(16599,{Rt:e.type});t={verify:wp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const d=c.transform;if(d instanceof uf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ql)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof $l)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof cf)return{fieldPath:c.field.canonicalString(),increment:d.Ee};throw Ae(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:F1(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ae(27497)})(n,e.precondition)),t}function J1(n,e){return n&&n.length>0?(Xe(e!==void 0,14353),n.map((t=>(function(o,l){let c=o.updateTime?yi(o.updateTime):yi(l);return c.isEqual(Re.min())&&(c=yi(l)),new w1(c,o.transformResults||[])})(t,e)))):[]}function Y1(n,e){return{documents:[gS(n,e.path)]}}function K1(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=gS(n,o);const l=(function(p){if(p.length!==0)return vS(Ci.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(p){if(p.length!==0)return p.map((v=>(function(A){return{field:Zo(A.field),direction:X1(A.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Ip(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{Vt:t,parent:o}}function Q1(n){let e=z1(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Xe(s===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const A=_S(E);return A instanceof Ci&&Q0(A)?A.getFilters():[A]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((A=>(function(q){return new lf(jo(q.field),(function(Q){switch(Q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(A)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let A;return A=typeof E=="object"?E.value:E,wf(A)?null:A})(t.limit));let m=null;t.startAt&&(m=(function(E){const A=!!E.before,b=E.values||[];return new af(b,A)})(t.startAt));let p=null;return t.endAt&&(p=(function(E){const A=!E.before,b=E.values||[];return new af(b,A)})(t.endAt)),h1(e,o,c,l,d,"F",m,p)}function $1(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _S(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=jo(t.unaryFilter.field);return Dt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=jo(t.unaryFilter.field);return Dt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=jo(t.unaryFilter.field);return Dt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=jo(t.unaryFilter.field);return Dt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Dt.create(jo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ci.create(t.compositeFilter.filters.map((s=>_S(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(t.compositeFilter.op))})(n):Ae(30097,{filter:n})}function X1(n){return L1[n]}function W1(n){return O1[n]}function Z1(n){return q1[n]}function Zo(n){return{fieldPath:n.canonicalString()}}function jo(n){return Xt.fromServerFormat(n.fieldPath)}function vS(n){return n instanceof Dt?(function(t){if(t.op==="=="){if(Kv(t.value))return{unaryFilter:{field:Zo(t.field),op:"IS_NAN"}};if(Yv(t.value))return{unaryFilter:{field:Zo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Kv(t.value))return{unaryFilter:{field:Zo(t.field),op:"IS_NOT_NAN"}};if(Yv(t.value))return{unaryFilter:{field:Zo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zo(t.field),op:W1(t.op),value:t.value}}})(n):n instanceof Ci?(function(t){const s=t.getFilters().map((o=>vS(o)));return s.length===1?s[0]:{compositeFilter:{op:Z1(t.op),filters:s}}})(n):Ae(54877,{filter:n})}function j1(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function TS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e,t,s,o,l=Re.min(),c=Re.min(),d=Wt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new tr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e){this.gt=e}}function tb(n){const e=Q1({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Cp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(){this.Dn=new ib}addToCollectionParentIndex(e,t){return this.Dn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(lr.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(lr.min())}updateCollectionGroup(e,t,s){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class ib{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Pt(ht.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Pt(ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ES=41943040;class Tn{static withCacheSize(e){return new Tn(e,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tn.DEFAULT_COLLECTION_PERCENTILE=10,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tn.DEFAULT=new Tn(ES,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tn.DISABLED=new Tn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new ha(0)}static ur(){return new ha(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="LruGarbageCollector",sb=1048576;function uT([n,e],[t,s]){const o=Ve(n,t);return o===0?Ve(e,s):o}class rb{constructor(e){this.Tr=e,this.buffer=new Pt(uT),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();uT(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ob{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){he(lT,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ta(t)?he(lT,"Ignoring IndexedDB error during garbage collection: ",t):await va(t)}await this.Rr(3e5)}))}}class ab{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(Rf.ue);const s=new rb(t);return this.Vr.forEachTarget(e,(o=>s.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>s.Er(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(aT)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),aT):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let s,o,l,c,d,m,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,d=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,m=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(p=Date.now(),Xo()<=Be.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${o} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${E} documents in `+(p-m)+`ms
Total Duration: ${p-v}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function lb(n,e){return new ab(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(){this.changes=new no((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ie.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&Ol(s.mutation,o,Zn.empty(),ut.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Fe()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Fe()){const o=Yr();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let c=xl();return l.forEach(((d,m)=>{c=c.insert(d,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=Yr();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Fe())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,s,o){let l=ss();const c=Ll(),d=(function(){return Ll()})();return t.forEach(((m,p)=>{const v=s.get(p.key);o.has(p.key)&&(v===void 0||v.mutation instanceof io)?l=l.insert(p.key,p):v!==void 0?(c.set(p.key,v.mutation.getFieldMask()),Ol(v.mutation,p,v.mutation.getFieldMask(),ut.now())):c.set(p.key,Zn.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((p,v)=>c.set(p,v))),t.forEach(((p,v)=>{var E;return d.set(p,new cb(v,(E=c.get(p))!==null&&E!==void 0?E:null))})),d)))}recalculateAndSaveOverlays(e,t){const s=Ll();let o=new pt(((c,d)=>c-d)),l=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((m=>{const p=t.get(m);if(p===null)return;let v=s.get(m)||Zn.empty();v=d.applyToLocalView(p,v),s.set(m,v);const E=(o.get(d.batchId)||Fe()).add(m);o=o.insert(d.batchId,E)}))})).next((()=>{const c=[],d=o.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),p=m.key,v=m.value,E=nS();v.forEach((A=>{if(!l.has(A)){const b=lS(t.get(A),s.get(A));b!==null&&E.set(A,b),l=l.add(A)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,E))}return ie.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(c){return Te.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):p1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):ie.resolve(Yr());let d=Hl,m=l;return c.next((p=>ie.forEach(p,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(v)?ie.resolve():this.remoteDocumentCache.getEntry(e,v).next((A=>{m=m.insert(v,A)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,m,p,Fe()))).next((v=>({batchId:d,changes:tS(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next((s=>{let o=xl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let c=xl();return this.indexManager.getCollectionParents(e,l).next((d=>ie.forEach(d,(m=>{const p=(function(E,A){return new Nf(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,s,o).next((v=>{v.forEach(((E,A)=>{c=c.insert(E,A)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((c=>{l.forEach(((m,p)=>{const v=p.getKey();c.get(v)===null&&(c=c.insert(v,sn.newInvalidDocument(v)))}));let d=xl();return c.forEach(((m,p)=>{const v=l.get(m);v!==void 0&&Ol(v.mutation,p,Zn.empty(),ut.now()),xf(t,p)&&(d=d.insert(m,p))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return ie.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:yi(o.createTime)}})(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:tb(o.bundledQuery),readTime:yi(o.readTime)}})(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(){this.overlays=new pt(Te.comparator),this.kr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Yr();return ie.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.wt(e,t,l)})),ie.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.kr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(s)),ie.resolve()}getOverlaysForCollection(e,t,s){const o=Yr(),l=t.length+1,c=new Te(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>s&&o.set(m.getKey(),m)}return ie.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new pt(((p,v)=>p-v));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>s){let v=l.get(p.largestBatchId);v===null&&(v=Yr(),l=l.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const d=Yr(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((p,v)=>d.set(p,v))),!(d.size()>=o)););return ie.resolve(d)}wt(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.kr.get(o.largestBatchId).delete(s.key);this.kr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new D1(t,s));let l=this.kr.get(t);l===void 0&&(l=Fe(),this.kr.set(t,l)),this.kr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(){this.qr=new Pt(qt.Qr),this.$r=new Pt(qt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const s=new qt(e,t);this.qr=this.qr.add(s),this.$r=this.$r.add(s)}Kr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new qt(e,t))}Gr(e,t){e.forEach((s=>this.removeReference(s,t)))}zr(e){const t=new Te(new ht([])),s=new qt(t,e),o=new qt(t,e+1),l=[];return this.$r.forEachInRange([s,o],(c=>{this.Wr(c),l.push(c.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Te(new ht([])),s=new qt(t,e),o=new qt(t,e+1);let l=Fe();return this.$r.forEachInRange([s,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new qt(e,0),s=this.qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class qt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Te.comparator(e.key,t.key)||Ve(e.Hr,t.Hr)}static Ur(e,t){return Ve(e.Hr,t.Hr)||Te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Pt(qt.Qr)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new x1(l,t,s,o);this.mutationQueue.push(c);for(const d of o)this.Yr=this.Yr.add(new qt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ie.resolve(c)}lookupMutationBatch(e,t){return ie.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Xr(s),l=o<0?0:o;return ie.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?em:this.er-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new qt(t,0),o=new qt(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([s,o],(c=>{const d=this.Zr(c.Hr);l.push(d)})),ie.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Pt(Ve);return t.forEach((o=>{const l=new qt(o,0),c=new qt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,c],(d=>{s=s.add(d.Hr)}))})),ie.resolve(this.ei(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;Te.isDocumentKey(l)||(l=l.child(""));const c=new qt(new Te(l),0);let d=new Pt(Ve);return this.Yr.forEachWhile((m=>{const p=m.key.path;return!!s.isPrefixOf(p)&&(p.length===o&&(d=d.add(m.Hr)),!0)}),c),ie.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((s=>{const o=this.Zr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Xe(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Yr;return ie.forEach(t.mutations,(o=>{const l=new qt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=s}))}rr(e){}containsKey(e,t){const s=new qt(t,0),o=this.Yr.firstAfterOrEqual(s);return ie.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e){this.ni=e,this.docs=(function(){return new pt(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,c=this.ni(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ie.resolve(s?s.document.mutableCopy():sn.newInvalidDocument(t))}getEntries(e,t){let s=ss();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():sn.newInvalidDocument(o))})),ie.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=ss();const c=t.path,d=new Te(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:p,value:{document:v}}=m.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||Jw(Hw(v),s)<=0||(o.has(v.key)||xf(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return ie.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Ae(9500)}ri(e,t){return ie.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new yb(this)}getSize(e){return ie.resolve(this.size)}}class yb extends ub{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(s)})),ie.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e){this.persistence=e,this.ii=new no((t=>im(t)),sm),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.si=0,this.oi=new cm,this.targetCount=0,this._i=ha.ar()}forEachTarget(e,t){return this.ii.forEach(((s,o)=>t(o))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.si&&(this.si=t),ie.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new ha(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.hr(t),ie.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.ii.forEach(((c,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.ii.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),ie.waitFor(l).next((()=>o))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const s=this.ii.get(t)||null;return ie.resolve(s)}addMatchingKeys(e,t,s){return this.oi.Kr(t,s),ie.resolve()}removeMatchingKeys(e,t,s){this.oi.Gr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),ie.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const s=this.oi.Jr(t);return ie.resolve(s)}containsKey(e,t){return ie.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,t){this.ai={},this.overlays={},this.ui=new Rf(0),this.ci=!1,this.ci=!0,this.li=new pb,this.referenceDelegate=e(this),this.hi=new _b(this),this.indexManager=new nb,this.remoteDocumentCache=(function(o){return new gb(o)})((s=>this.referenceDelegate.Pi(s))),this.serializer=new eb(t),this.Ti=new db(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ai[e.toKey()];return s||(s=new mb(t,this.referenceDelegate),this.ai[e.toKey()]=s),s}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,s){he("MemoryPersistence","Starting transaction:",e);const o=new vb(this.ui.next());return this.referenceDelegate.Ii(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return ie.or(Object.values(this.ai).map((s=>()=>s.containsKey(e,t))))}}class vb extends Kw{constructor(e){super(),this.currentSequenceNumber=e}}class fm{constructor(e){this.persistence=e,this.Ai=new cm,this.Ri=null}static Vi(e){return new fm(e)}get mi(){if(this.Ri)return this.Ri;throw Ae(60996)}addReference(e,t,s){return this.Ai.addReference(s,t),this.mi.delete(s.toString()),ie.resolve()}removeReference(e,t,s){return this.Ai.removeReference(s,t),this.mi.add(s.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.mi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.mi,(s=>{const o=Te.fromPath(s);return this.fi(e,o).next((l=>{l||t.removeEntry(o,Re.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((s=>{s?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return ie.or([()=>ie.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class df{constructor(e,t){this.persistence=e,this.gi=new no((s=>Xw(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=lb(this,t)}static Vi(e,t){return new df(e,t)}Ii(){}di(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}yr(e){let t=0;return this.gr(e,(s=>{t++})).next((()=>t))}gr(e,t){return ie.forEach(this.gi,((s,o)=>this.Sr(e,s,o).next((l=>l?ie.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,(c=>this.Sr(e,c,t).next((d=>{d||(s++,l.removeEntry(c,Re.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),ie.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Hc(e.data.value)),t}Sr(e,t,s){return ie.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return ie.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Is=s,this.ds=o}static Es(e,t){let s=Fe(),o=Fe();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new dm(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return pR()?8:Qw(on())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ps(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ys(e,t,o,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new Tb;return this.ws(e,t,c).next((d=>{if(l.result=d,this.Rs)return this.Ss(e,t,c,d.size)}))})).next((()=>l.result))}Ss(e,t,s,o){return s.documentReadCount<this.Vs?(Xo()<=Be.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Wo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ie.resolve()):(Xo()<=Be.DEBUG&&he("QueryEngine","Query:",Wo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.fs*o?(Xo()<=Be.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Wo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gi(t))):ie.resolve())}ps(e,t){if(Wv(t))return ie.resolve(null);let s=gi(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Cp(t,null,"F"),s=gi(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=Fe(...l);return this.gs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,s).next((m=>{const p=this.bs(t,d);return this.Ds(t,p,c,m.readTime)?this.ps(e,Cp(t,null,"F")):this.vs(e,p,t,m)}))))})))))}ys(e,t,s,o){return Wv(t)||o.isEqual(Re.min())?ie.resolve(null):this.gs.getDocuments(e,s).next((l=>{const c=this.bs(t,l);return this.Ds(t,c,s,o)?ie.resolve(null):(Xo()<=Be.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Wo(t)),this.vs(e,c,t,Gw(o,Hl)).next((d=>d)))}))}bs(e,t){let s=new Pt(j0(e));return t.forEach(((o,l)=>{xf(e,l)&&(s=s.add(l))})),s}Ds(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,s){return Xo()<=Be.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Wo(t)),this.gs.getDocumentsMatchingQuery(e,t,lr.min(),s)}vs(e,t,s,o){return this.gs.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm="LocalStore",Sb=3e8;class Ab{constructor(e,t,s,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new pt(Ve),this.Ms=new no((l=>im(l)),sm),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(s)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fb(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function Cb(n,e,t,s){return new Ab(n,e,t,s)}async function AS(n,e){const t=be(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],d=[];let m=Fe();for(const p of o){c.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}for(const p of l){d.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}return t.localDocuments.getDocuments(s,m).next((p=>({Bs:p,removedBatchIds:c,addedBatchIds:d})))}))}))}function Ib(n,e){const t=be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(d,m,p,v){const E=p.batch,A=E.keys();let b=ie.resolve();return A.forEach((q=>{b=b.next((()=>v.getEntry(m,q))).next((G=>{const Q=p.docVersions.get(q);Xe(Q!==null,48541),G.version.compareTo(Q)<0&&(E.applyToRemoteDocument(G,p),G.isValidDocument()&&(G.setReadTime(p.commitVersion),v.addEntry(G)))}))})),b.next((()=>d.mutationQueue.removeMutationBatch(m,E)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(d){let m=Fe();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(m=m.add(d.batch.mutations[p].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function CS(n){const e=be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function Rb(n,e){const t=be(n),s=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const d=[];e.targetChanges.forEach(((v,E)=>{const A=o.get(E);if(!A)return;d.push(t.hi.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.hi.addMatchingKeys(l,v.addedDocuments,E))));let b=A.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?b=b.withResumeToken(Wt.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):v.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(v.resumeToken,s)),o=o.insert(E,b),(function(G,Q,se){return G.resumeToken.approximateByteSize()===0||Q.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=Sb?!0:se.addedDocuments.size+se.modifiedDocuments.size+se.removedDocuments.size>0})(A,b,v)&&d.push(t.hi.updateTargetData(l,b))}));let m=ss(),p=Fe();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(wb(l,c,e.documentUpdates).next((v=>{m=v.Ls,p=v.ks}))),!s.isEqual(Re.min())){const v=t.hi.getLastRemoteSnapshotVersion(l).next((E=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,s)));d.push(v)}return ie.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,p))).next((()=>m))})).then((l=>(t.Fs=o,l)))}function wb(n,e,t){let s=Fe(),o=Fe();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=ss();return t.forEach(((d,m)=>{const p=l.get(d);m.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(d)),m.isNoDocument()&&m.version.isEqual(Re.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):he(hm,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",m.version)})),{Ls:c,ks:o}}))}function bb(n,e){const t=be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=em),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function Nb(n,e){const t=be(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.hi.getTargetData(s,e).next((l=>l?(o=l,ie.resolve(o)):t.hi.allocateTargetId(s).next((c=>(o=new tr(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.hi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Fs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(s.targetId,s),t.Ms.set(e,s.targetId)),s}))}async function Np(n,e,t){const s=be(n),o=s.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Ta(c))throw c;he(hm,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Fs=s.Fs.remove(e),s.Ms.delete(o.target)}function cT(n,e,t){const s=be(n);let o=Re.min(),l=Fe();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,p,v){const E=be(m),A=E.Ms.get(v);return A!==void 0?ie.resolve(E.Fs.get(A)):E.hi.getTargetData(p,v)})(s,c,gi(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,s.hi.getMatchingKeysForTargetId(c,d.targetId).next((m=>{l=m}))})).next((()=>s.Cs.getDocumentsMatchingQuery(c,e,t?o:Re.min(),t?l:Fe()))).next((d=>(Mb(s,g1(e),d),{documents:d,qs:l})))))}function Mb(n,e,t){let s=n.xs.get(e)||Re.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.xs.set(e,s)}class fT{constructor(){this.activeTargetIds=S1()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xb{constructor(){this.Fo=new fT,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,s){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new fT,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT="ConnectivityMonitor";class hT{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){he(dT,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){he(dT,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fc=null;function Mp(){return Fc===null?Fc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Fc++,"0x"+Fc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap="RestConnection",Pb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class kb{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.Ko=this.databaseId.database===rf?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,t,s,o,l){const c=Mp(),d=this.Go(e,t.toUriEncodedString());he(ap,`Sending RPC '${e}' ${c}:`,d,s);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(m,o,l);const{host:p}=new URL(d),v=ga(p);return this.jo(e,d,m,s,v).then((E=>(he(ap,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw ar(ap,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",s),E}))}Jo(e,t,s,o,l,c){return this.Wo(e,t,s,o,l)}zo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+_a})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}Go(e,t){const s=Pb[e];return`${this.$o}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection";class Ub extends kb{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,s,o,l){const c=Mp();return new Promise(((d,m)=>{const p=new w0;p.setWithCredentials(!0),p.listenOnce(b0.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Gc.NO_ERROR:const E=p.getResponseJson();he(tn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case Gc.TIMEOUT:he(tn,`RPC '${e}' ${c} timed out`),m(new ye(re.DEADLINE_EXCEEDED,"Request time out"));break;case Gc.HTTP_ERROR:const A=p.getStatus();if(he(tn,`RPC '${e}' ${c} failed with status:`,A,"response text:",p.getResponseText()),A>0){let b=p.getResponseJson();Array.isArray(b)&&(b=b[0]);const q=b==null?void 0:b.error;if(q&&q.status&&q.message){const G=(function(se){const K=se.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(K)>=0?K:re.UNKNOWN})(q.status);m(new ye(G,q.message))}else m(new ye(re.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new ye(re.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{c_:e,streamId:c,l_:p.getLastErrorCode(),h_:p.getLastError()})}}finally{he(tn,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(o);he(tn,`RPC '${e}' ${c} sending request:`,o),p.send(t,"POST",v,s,15)}))}P_(e,t,s){const o=Mp(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=x0(),d=M0(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.zo(m.initMessageHeaders,t,s),m.encodeInitMessageHeaders=!0;const v=l.join("");he(tn,`Creating RPC '${e}' stream ${o}: ${v}`,m);const E=c.createWebChannel(v,m);this.T_(E);let A=!1,b=!1;const q=new Vb({Ho:Q=>{b?he(tn,`Not sending because RPC '${e}' stream ${o} is closed:`,Q):(A||(he(tn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),A=!0),he(tn,`RPC '${e}' stream ${o} sending:`,Q),E.send(Q))},Yo:()=>E.close()}),G=(Q,se,K)=>{Q.listen(se,(W=>{try{K(W)}catch(oe){setTimeout((()=>{throw oe}),0)}}))};return G(E,Ml.EventType.OPEN,(()=>{b||(he(tn,`RPC '${e}' stream ${o} transport opened.`),q.s_())})),G(E,Ml.EventType.CLOSE,(()=>{b||(b=!0,he(tn,`RPC '${e}' stream ${o} transport closed`),q.__(),this.I_(E))})),G(E,Ml.EventType.ERROR,(Q=>{b||(b=!0,ar(tn,`RPC '${e}' stream ${o} transport errored. Name:`,Q.name,"Message:",Q.message),q.__(new ye(re.UNAVAILABLE,"The operation could not be completed")))})),G(E,Ml.EventType.MESSAGE,(Q=>{var se;if(!b){const K=Q.data[0];Xe(!!K,16349);const W=K,oe=(W==null?void 0:W.error)||((se=W[0])===null||se===void 0?void 0:se.error);if(oe){he(tn,`RPC '${e}' stream ${o} received error:`,oe);const de=oe.status;let ce=(function(N){const P=bt[N];if(P!==void 0)return fS(P)})(de),x=oe.message;ce===void 0&&(ce=re.INTERNAL,x="Unknown error status: "+de+" with message "+oe.message),b=!0,q.__(new ye(ce,x)),E.close()}else he(tn,`RPC '${e}' stream ${o} received:`,K),q.a_(K)}})),G(d,N0.STAT_EVENT,(Q=>{Q.stat===_p.PROXY?he(tn,`RPC '${e}' stream ${o} detected buffering proxy`):Q.stat===_p.NOPROXY&&he(tn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{q.o_()}),0),q}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function lp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(n){return new B1(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=s,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-s);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT="PersistentStream";class RS{constructor(e,t,s,o,l,c,d,m){this.Fi=e,this.w_=s,this.S_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new IS(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(is(t.toString()),is("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.b_===t&&this.W_(s,o)}),(s=>{e((()=>{const o=new ye(re.UNKNOWN,"Fetching auth token failed: "+s.message);return this.G_(o)}))}))}W_(e,t){const s=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.e_((()=>{s((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{s((()=>this.G_(o)))})),this.stream.onMessage((o=>{s((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return he(pT,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(he(pT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Lb extends RS{constructor(e,t,s,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=G1(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Re.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Re.min():c.readTime?yi(c.readTime):Re.min()})(e);return this.listener.J_(t,s)}H_(e){const t={};t.database=bp(this.serializer),t.addTarget=(function(l,c){let d;const m=c.target;if(d=Ap(m)?{documents:Y1(l,m)}:{query:K1(l,m).Vt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=pS(l,c.resumeToken);const p=Ip(l,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo(Re.min())>0){d.readTime=ff(l,c.snapshotVersion.toTimestamp());const p=Ip(l,c.expectedCount);p!==null&&(d.expectedCount=p)}return d})(this.serializer,e);const s=$1(this.serializer,e);s&&(t.labels=s),this.k_(t)}Y_(e){const t={};t.database=bp(this.serializer),t.removeTarget=e,this.k_(t)}}class Ob extends RS{constructor(e,t,s,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=J1(e.writeResults,e.commitTime),s=yi(e.commitTime);return this.listener.ta(s,t)}na(){const e={};e.database=bp(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>H1(this.serializer,s)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{}class Bb extends qb{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new ye(re.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,Rp(t,s),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ye(re.UNKNOWN,l.toString())}))}Jo(e,t,s,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Jo(e,Rp(t,s),o,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ye(re.UNKNOWN,c.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class Fb{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(is(t),this._a=!1):he("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr="RemoteStore";class zb{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((c=>{s.enqueueAndForget((async()=>{so(this)&&(he(Zr,"Restarting streams for network reachability change."),await(async function(m){const p=be(m);p.Ia.add(4),await iu(p),p.Aa.set("Unknown"),p.Ia.delete(4),await Uf(p)})(this))}))})),this.Aa=new Fb(s,o)}}async function Uf(n){if(so(n))for(const e of n.da)await e(!0)}async function iu(n){for(const e of n.da)await e(!1)}function wS(n,e){const t=be(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),ym(t)?gm(t):Ea(t).x_()&&mm(t,e))}function pm(n,e){const t=be(n),s=Ea(t);t.Ta.delete(e),s.x_()&&bS(t,e),t.Ta.size===0&&(s.x_()?s.B_():so(t)&&t.Aa.set("Unknown"))}function mm(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ea(n).H_(e)}function bS(n,e){n.Ra.$e(e),Ea(n).Y_(e)}function gm(n){n.Ra=new U1({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Ea(n).start(),n.Aa.aa()}function ym(n){return so(n)&&!Ea(n).M_()&&n.Ta.size>0}function so(n){return be(n).Ia.size===0}function NS(n){n.Ra=void 0}async function Gb(n){n.Aa.set("Online")}async function Hb(n){n.Ta.forEach(((e,t)=>{mm(n,e)}))}async function Jb(n,e){NS(n),ym(n)?(n.Aa.la(e),gm(n)):n.Aa.set("Unknown")}async function Yb(n,e,t){if(n.Aa.set("Online"),e instanceof hS&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const d of l.targetIds)o.Ta.has(d)&&(await o.remoteSyncer.rejectListen(d,c),o.Ta.delete(d),o.Ra.removeTarget(d))})(n,e)}catch(s){he(Zr,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await hf(n,s)}else if(e instanceof Kc?n.Ra.Ye(e):e instanceof dS?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Re.min()))try{const s=await CS(n.localStore);t.compareTo(s)>=0&&await(function(l,c){const d=l.Ra.Pt(c);return d.targetChanges.forEach(((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const v=l.Ta.get(p);v&&l.Ta.set(p,v.withResumeToken(m.resumeToken,c))}})),d.targetMismatches.forEach(((m,p)=>{const v=l.Ta.get(m);if(!v)return;l.Ta.set(m,v.withResumeToken(Wt.EMPTY_BYTE_STRING,v.snapshotVersion)),bS(l,m);const E=new tr(v.target,m,p,v.sequenceNumber);mm(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(s){he(Zr,"Failed to raise snapshot:",s),await hf(n,s)}}async function hf(n,e,t){if(!Ta(e))throw e;n.Ia.add(1),await iu(n),n.Aa.set("Offline"),t||(t=()=>CS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{he(Zr,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Uf(n)}))}function MS(n,e){return e().catch((t=>hf(n,t,e)))}async function Lf(n){const e=be(n),t=dr(e);let s=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:em;for(;Kb(e);)try{const o=await bb(e.localStore,s);if(o===null){e.Pa.length===0&&t.B_();break}s=o.batchId,Qb(e,o)}catch(o){await hf(e,o)}xS(e)&&DS(e)}function Kb(n){return so(n)&&n.Pa.length<10}function Qb(n,e){n.Pa.push(e);const t=dr(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function xS(n){return so(n)&&!dr(n).M_()&&n.Pa.length>0}function DS(n){dr(n).start()}async function $b(n){dr(n).na()}async function Xb(n){const e=dr(n);for(const t of n.Pa)e.X_(t.mutations)}async function Wb(n,e,t){const s=n.Pa.shift(),o=am.from(s,e,t);await MS(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Lf(n)}async function Zb(n,e){e&&dr(n).Z_&&await(async function(s,o){if((function(c){return k1(c)&&c!==re.ABORTED})(o.code)){const l=s.Pa.shift();dr(s).N_(),await MS(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Lf(s)}})(n,e),xS(n)&&DS(n)}async function mT(n,e){const t=be(n);t.asyncQueue.verifyOperationInProgress(),he(Zr,"RemoteStore received new credentials");const s=so(t);t.Ia.add(3),await iu(t),s&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Uf(t)}async function jb(n,e){const t=be(n);e?(t.Ia.delete(2),await Uf(t)):e||(t.Ia.add(2),await iu(t),t.Aa.set("Unknown"))}function Ea(n){return n.Va||(n.Va=(function(t,s,o){const l=be(t);return l.ia(),new Lb(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:Gb.bind(null,n),e_:Hb.bind(null,n),n_:Jb.bind(null,n),J_:Yb.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),ym(n)?gm(n):n.Aa.set("Unknown")):(await n.Va.stop(),NS(n))}))),n.Va}function dr(n){return n.ma||(n.ma=(function(t,s,o){const l=be(t);return l.ia(),new Ob(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:$b.bind(null,n),n_:Zb.bind(null,n),ea:Xb.bind(null,n),ta:Wb.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await Lf(n)):(await n.ma.stop(),n.Pa.length>0&&(he(Zr,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const c=Date.now()+s,d=new _m(e,t,c,o,l);return d.start(s),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vm(n,e){if(is("AsyncQueue",`${e}: ${n}`),Ta(n))return new ye(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{static emptySet(e){return new na(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Te.comparator(t.key,s.key):(t,s)=>Te.comparator(t.key,s.key),this.keyedMap=xl(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof na)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new na;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(){this.fa=new pt(Te.comparator)}track(e){const t=e.doc.key,s=this.fa.get(t);s?e.type!==0&&s.type===3?this.fa=this.fa.insert(t,e):e.type===3&&s.type!==1?this.fa=this.fa.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.fa=this.fa.remove(t):e.type===1&&s.type===2?this.fa=this.fa.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Ae(63341,{At:e,ga:s}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,s)=>{e.push(s)})),e}}class pa{constructor(e,t,s,o,l,c,d,m,p){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,s,o,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new pa(e,t,na.emptySet(t),c,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class tN{constructor(){this.queries=yT(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,s){const o=be(t),l=o.queries;o.queries=yT(),l.forEach(((c,d)=>{for(const m of d.wa)m.onError(s)}))})(this,new ye(re.ABORTED,"Firestore shutting down"))}}function yT(){return new no((n=>Z0(n)),Mf)}async function nN(n,e){const t=be(n);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(s=2):(l=new eN,s=e.ba()?0:1);try{switch(s){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const d=vm(c,`Initialization of query '${Wo(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&Tm(t)}async function iN(n,e){const t=be(n),s=e.query;let o=3;const l=t.queries.get(s);if(l){const c=l.wa.indexOf(e);c>=0&&(l.wa.splice(c,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function sN(n,e){const t=be(n);let s=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const d of c.wa)d.Ca(o)&&(s=!0);c.ya=o}}s&&Tm(t)}function rN(n,e,t){const s=be(n),o=s.queries.get(e);if(o)for(const l of o.wa)l.onError(t);s.queries.delete(e)}function Tm(n){n.Da.forEach((e=>{e.next()}))}var xp,_T;(_T=xp||(xp={})).Fa="default",_T.Cache="cache";class oN{constructor(e,t,s){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=s||{}}Ca(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new pa(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const s=t!=="Offline";return(!this.options.ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=pa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==xp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e){this.key=e}}class kS{constructor(e){this.key=e}}class aN{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Fe(),this.mutatedKeys=Fe(),this.Xa=j0(e),this.eu=new na(this.Xa)}get tu(){return this.Ha}nu(e,t){const s=t?t.ru:new gT,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,d=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const A=o.get(v),b=xf(this.query,E)?E:null,q=!!A&&this.mutatedKeys.has(A.key),G=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let Q=!1;A&&b?A.data.isEqual(b.data)?q!==G&&(s.track({type:3,doc:b}),Q=!0):this.iu(A,b)||(s.track({type:2,doc:b}),Q=!0,(m&&this.Xa(b,m)>0||p&&this.Xa(b,p)<0)&&(d=!0)):!A&&b?(s.track({type:0,doc:b}),Q=!0):A&&!b&&(s.track({type:1,doc:A}),Q=!0,(m||p)&&(d=!0)),Q&&(b?(c=c.add(b),l=G?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{eu:c,ru:s,Ds:d,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort(((v,E)=>(function(b,q){const G=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{At:Q})}};return G(b)-G(q)})(v.type,E.type)||this.Xa(v.doc,E.doc))),this.su(s),o=o!=null&&o;const d=t&&!o?this.ou():[],m=this.Za.size===0&&this.current&&!o?1:0,p=m!==this.Ya;return this.Ya=m,c.length!==0||p?{snapshot:new pa(this.query,e.eu,l,c,e.mutatedKeys,m===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new gT,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Fe(),this.eu.forEach((s=>{this.au(s.key)&&(this.Za=this.Za.add(s.key))}));const t=[];return e.forEach((s=>{this.Za.has(s)||t.push(new kS(s))})),this.Za.forEach((s=>{e.has(s)||t.push(new PS(s))})),t}uu(e){this.Ha=e.qs,this.Za=Fe();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return pa.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Em="SyncEngine";class lN{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class uN{constructor(e){this.key=e,this.lu=!1}}class cN{constructor(e,t,s,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new no((d=>Z0(d)),Mf),this.Tu=new Map,this.Iu=new Set,this.du=new pt(Te.comparator),this.Eu=new Map,this.Au=new cm,this.Ru={},this.Vu=new Map,this.mu=ha.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function fN(n,e,t=!0){const s=BS(n);let o;const l=s.Pu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await VS(s,e,t,!0),o}async function dN(n,e){const t=BS(n);await VS(t,e,!0,!1)}async function VS(n,e,t,s){const o=await Nb(n.localStore,gi(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return s&&(d=await hN(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&wS(n.remoteStore,o),d}async function hN(n,e,t,s,o){n.gu=(E,A,b)=>(async function(G,Q,se,K){let W=Q.view.nu(se);W.Ds&&(W=await cT(G.localStore,Q.query,!1).then((({documents:x})=>Q.view.nu(x,W))));const oe=K&&K.targetChanges.get(Q.targetId),de=K&&K.targetMismatches.get(Q.targetId)!=null,ce=Q.view.applyChanges(W,G.isPrimaryClient,oe,de);return TT(G,Q.targetId,ce._u),ce.snapshot})(n,E,A,b);const l=await cT(n.localStore,e,!0),c=new aN(e,l.qs),d=c.nu(l.documents),m=nu.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),p=c.applyChanges(d,n.isPrimaryClient,m);TT(n,t,p._u);const v=new lN(e,t,c);return n.Pu.set(e,v),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),p.snapshot}async function pN(n,e,t){const s=be(n),o=s.Pu.get(e),l=s.Tu.get(o.targetId);if(l.length>1)return s.Tu.set(o.targetId,l.filter((c=>!Mf(c,e)))),void s.Pu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Np(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&pm(s.remoteStore,o.targetId),Dp(s,o.targetId)})).catch(va)):(Dp(s,o.targetId),await Np(s.localStore,o.targetId,!0))}async function mN(n,e){const t=be(n),s=t.Pu.get(e),o=t.Tu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),pm(t.remoteStore,s.targetId))}async function gN(n,e,t){const s=AN(n);try{const o=await(function(c,d){const m=be(c),p=ut.now(),v=d.reduce(((b,q)=>b.add(q.key)),Fe());let E,A;return m.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let q=ss(),G=Fe();return m.Os.getEntries(b,v).next((Q=>{q=Q,q.forEach(((se,K)=>{K.isValidDocument()||(G=G.add(se))}))})).next((()=>m.localDocuments.getOverlayedDocuments(b,q))).next((Q=>{E=Q;const se=[];for(const K of d){const W=N1(K,E.get(K.key).overlayedDocument);W!=null&&se.push(new io(K.key,W,J0(W.value.mapValue),ts.exists(!0)))}return m.mutationQueue.addMutationBatch(b,p,se,d)})).next((Q=>{A=Q;const se=Q.applyToLocalDocumentSet(E,G);return m.documentOverlayCache.saveOverlays(b,Q.batchId,se)}))})).then((()=>({batchId:A.batchId,changes:tS(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(c,d,m){let p=c.Ru[c.currentUser.toKey()];p||(p=new pt(Ve)),p=p.insert(d,m),c.Ru[c.currentUser.toKey()]=p})(s,o.batchId,t),await su(s,o.changes),await Lf(s.remoteStore)}catch(o){const l=vm(o,"Failed to persist write");t.reject(l)}}async function US(n,e){const t=be(n);try{const s=await Rb(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Eu.get(l);c&&(Xe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.lu=!0:o.modifiedDocuments.size>0?Xe(c.lu,14607):o.removedDocuments.size>0&&(Xe(c.lu,42227),c.lu=!1))})),await su(t,s,e)}catch(s){await va(s)}}function vT(n,e,t){const s=be(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Pu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(c,d){const m=be(c);m.onlineState=d;let p=!1;m.queries.forEach(((v,E)=>{for(const A of E.wa)A.va(d)&&(p=!0)})),p&&Tm(m)})(s.eventManager,e),o.length&&s.hu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function yN(n,e,t){const s=be(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Eu.get(e),l=o&&o.key;if(l){let c=new pt(Te.comparator);c=c.insert(l,sn.newNoDocument(l,Re.min()));const d=Fe().add(l),m=new kf(Re.min(),new Map,new pt(Ve),c,d);await US(s,m),s.du=s.du.remove(l),s.Eu.delete(e),Sm(s)}else await Np(s.localStore,e,!1).then((()=>Dp(s,e,t))).catch(va)}async function _N(n,e){const t=be(n),s=e.batch.batchId;try{const o=await Ib(t.localStore,e);OS(t,s,null),LS(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await su(t,o)}catch(o){await va(o)}}async function vN(n,e,t){const s=be(n);try{const o=await(function(c,d){const m=be(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let v;return m.mutationQueue.lookupMutationBatch(p,d).next((E=>(Xe(E!==null,37113),v=E.keys(),m.mutationQueue.removeMutationBatch(p,E)))).next((()=>m.mutationQueue.performConsistencyCheck(p))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(p,v,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v))).next((()=>m.localDocuments.getDocuments(p,v)))}))})(s.localStore,e);OS(s,e,t),LS(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await su(s,o)}catch(o){await va(o)}}function LS(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function OS(n,e,t){const s=be(n);let o=s.Ru[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Ru[s.currentUser.toKey()]=o}}function Dp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Tu.get(e))n.Pu.delete(s),t&&n.hu.pu(s,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((s=>{n.Au.containsKey(s)||qS(n,s)}))}function qS(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(pm(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Sm(n))}function TT(n,e,t){for(const s of t)s instanceof PS?(n.Au.addReference(s.key,e),TN(n,s)):s instanceof kS?(he(Em,"Document no longer in limbo: "+s.key),n.Au.removeReference(s.key,e),n.Au.containsKey(s.key)||qS(n,s.key)):Ae(19791,{yu:s})}function TN(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Iu.has(s)||(he(Em,"New document in limbo: "+t),n.Iu.add(s),Sm(n))}function Sm(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Te(ht.fromString(e)),s=n.mu.next();n.Eu.set(s,new uN(t)),n.du=n.du.insert(t,s),wS(n.remoteStore,new tr(gi(rm(t.path)),s,"TargetPurposeLimboResolution",Rf.ue))}}async function su(n,e,t){const s=be(n),o=[],l=[],c=[];s.Pu.isEmpty()||(s.Pu.forEach(((d,m)=>{c.push(s.gu(m,e,t).then((p=>{var v;if((p||t)&&s.isPrimaryClient){const E=p?!p.fromCache:(v=t==null?void 0:t.targetChanges.get(m.targetId))===null||v===void 0?void 0:v.current;s.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(p){o.push(p);const E=dm.Es(m.targetId,p);l.push(E)}})))})),await Promise.all(c),s.hu.J_(o),await(async function(m,p){const v=be(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ie.forEach(p,(A=>ie.forEach(A.Is,(b=>v.persistence.referenceDelegate.addReference(E,A.targetId,b))).next((()=>ie.forEach(A.ds,(b=>v.persistence.referenceDelegate.removeReference(E,A.targetId,b)))))))))}catch(E){if(!Ta(E))throw E;he(hm,"Failed to update sequence numbers: "+E)}for(const E of p){const A=E.targetId;if(!E.fromCache){const b=v.Fs.get(A),q=b.snapshotVersion,G=b.withLastLimboFreeSnapshotVersion(q);v.Fs=v.Fs.insert(A,G)}}})(s.localStore,l))}async function EN(n,e){const t=be(n);if(!t.currentUser.isEqual(e)){he(Em,"User change. New user:",e.toKey());const s=await AS(t.localStore,e);t.currentUser=e,(function(l,c){l.Vu.forEach((d=>{d.forEach((m=>{m.reject(new ye(re.CANCELLED,c))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await su(t,s.Bs)}}function SN(n,e){const t=be(n),s=t.Eu.get(e);if(s&&s.lu)return Fe().add(s.key);{let o=Fe();const l=t.Tu.get(e);if(!l)return o;for(const c of l){const d=t.Pu.get(c);o=o.unionWith(d.view.tu)}return o}}function BS(n){const e=be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=US.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=SN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yN.bind(null,e),e.hu.J_=sN.bind(null,e.eventManager),e.hu.pu=rN.bind(null,e.eventManager),e}function AN(n){const e=be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_N.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vN.bind(null,e),e}class pf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vf(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return Cb(this.persistence,new Eb,e.initialUser,this.serializer)}Du(e){return new SS(fm.Vi,this.serializer)}bu(e){return new xb}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pf.provider={build:()=>new pf};class CN extends pf{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Xe(this.persistence.referenceDelegate instanceof df,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new ob(s,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Tn.withCacheSize(this.cacheSizeBytes):Tn.DEFAULT;return new SS((s=>df.Vi(s,t)),this.serializer)}}class Pp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>vT(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=EN.bind(null,this.syncEngine),await jb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new tN})()}createDatastore(e){const t=Vf(e.databaseInfo.databaseId),s=(function(l){return new Ub(l)})(e.databaseInfo);return(function(l,c,d,m){return new Bb(l,c,d,m)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,c,d){return new zb(s,o,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>vT(this.syncEngine,t,0)),(function(){return hT.C()?new hT:new Db})())}createSyncEngine(e,t){return(function(o,l,c,d,m,p,v){const E=new cN(o,l,c,d,m,p);return v&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=be(o);he(Zr,"RemoteStore shutting down."),l.Ia.add(5),await iu(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Pp.provider={build:()=>new Pp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):is("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr="FirestoreClient";class RN{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=nn.UNAUTHENTICATED,this.clientId=Zp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{he(hr,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(he(hr,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=vm(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function up(n,e){n.asyncQueue.verifyOperationInProgress(),he(hr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async o=>{s.isEqual(o)||(await AS(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>{ar("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{he("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{ar("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),n._offlineComponents=e}async function ET(n,e){n.asyncQueue.verifyOperationInProgress();const t=await wN(n);he(hr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>mT(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,o)=>mT(e.remoteStore,o))),n._onlineComponents=e}async function wN(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he(hr,"Using user provided OfflineComponentProvider");try{await up(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===re.FAILED_PRECONDITION||o.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;ar("Error using user provided cache. Falling back to memory cache: "+t),await up(n,new pf)}}else he(hr,"Using default OfflineComponentProvider"),await up(n,new CN(void 0));return n._offlineComponents}async function FS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he(hr,"Using user provided OnlineComponentProvider"),await ET(n,n._uninitializedComponentsProvider._online)):(he(hr,"Using default OnlineComponentProvider"),await ET(n,new Pp))),n._onlineComponents}function bN(n){return FS(n).then((e=>e.syncEngine))}async function NN(n){const e=await FS(n),t=e.eventManager;return t.onListen=fN.bind(null,e.syncEngine),t.onUnlisten=pN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=dN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=mN.bind(null,e.syncEngine),t}function MN(n,e,t={}){const s=new or;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,m,p){const v=new IN({next:A=>{v.Ou(),c.enqueueAndForget((()=>iN(l,E)));const b=A.docs.has(d);!b&&A.fromCache?p.reject(new ye(re.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&A.fromCache&&m&&m.source==="server"?p.reject(new ye(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(A)},error:A=>p.reject(A)}),E=new oN(rm(d.path),v,{includeMetadataChanges:!0,ka:!0});return nN(l,E)})(await NN(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="firestore.googleapis.com",AT=!0;class CT{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ye(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=GS,this.ssl=AT}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:AT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ES;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<sb)throw new ye(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zS((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Am{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new Dw;switch(s.type){case"firstParty":return new Uw(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ye(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=ST.get(t);s&&(he("ComponentProvider","Removing Datastore"),ST.delete(t),s.terminate())})(this),Promise.resolve()}}function xN(n,e,t,s={}){var o;n=Gl(n,Am);const l=ga(e),c=n._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),m=`${e}:${t}`;l&&(_0(`https://${m}`),v0("Firestore",!0)),c.host!==GS&&c.host!==m&&ar("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},c),{host:m,ssl:l,emulatorOptions:s});if(!$r(p,d)&&(n._setSettings(p),s.mockUserToken)){let v,E;if(typeof s.mockUserToken=="string")v=s.mockUserToken,E=nn.MOCK_USER;else{v=rR(s.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const A=s.mockUserToken.sub||s.mockUserToken.user_id;if(!A)throw new ye(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new nn(A)}n._authCredentials=new Pw(new P0(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Cm(this.firestore,e,this._query)}}class Bt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bt(this.firestore,e,this._key)}toJSON(){return{type:Bt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(eu(t,Bt._jsonSchema))return new Bt(e,s||null,new Te(ht.fromString(t.referencePath)))}}Bt._jsonSchemaVersion="firestore/documentReference/1.0",Bt._jsonSchema={type:Nt("string",Bt._jsonSchemaVersion),referencePath:Nt("string")};class Xl extends Cm{constructor(e,t,s){super(e,t,rm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bt(this.firestore,null,new Te(e))}withConverter(e){return new Xl(this.firestore,e,this._path)}}function Of(n,e,...t){if(n=Si(n),arguments.length===1&&(e=Zp.newId()),Fw("doc","path",e),n instanceof Am){const s=ht.fromString(e,...t);return Ov(s),new Bt(n,null,new Te(s))}{if(!(n instanceof Bt||n instanceof Xl))throw new ye(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(ht.fromString(e,...t));return Ov(s),new Bt(n.firestore,n instanceof Xl?n.converter:null,new Te(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="AsyncQueue";class RT{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new IS(this,"async_queue_retry"),this.oc=()=>{const s=lp();s&&he(IT,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=e;const t=lp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=lp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new or;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ta(e))throw e;he(IT,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((s=>{throw this.tc=s,this.nc=!1,is("INTERNAL UNHANDLED ERROR: ",wT(s)),s})).then((s=>(this.nc=!1,s))))));return this._c=t,t}enqueueAfterDelay(e,t,s){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=_m.createAndSchedule(this,e,t,s,(l=>this.lc(l)));return this.ec.push(o),o}ac(){this.tc&&Ae(47125,{hc:wT(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function wT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Im extends Am{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new RT,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new RT(e),this._firestoreClient=void 0,await e}}}function DN(n,e){const t=typeof n=="object"?n:A0(),s=typeof n=="string"?n:rf,o=Xp(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=iR("firestore");l&&xN(o,...l)}return o}function HS(n){if(n._terminated)throw new ye(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||PN(n),n._firestoreClient}function PN(n){var e,t,s;const o=n._freezeSettings(),l=(function(d,m,p,v){return new jw(d,m,p,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,zS(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new RN(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gn(Wt.fromBase64String(e))}catch(t){throw new ye(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Gn(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Gn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(eu(e,Gn._jsonSchema))return Gn.fromBase64String(e.bytes)}}Gn._jsonSchemaVersion="firestore/bytes/1.0",Gn._jsonSchema={type:Nt("string",Gn._jsonSchemaVersion),bytes:Nt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:_i._jsonSchemaVersion}}static fromJSON(e){if(eu(e,_i._jsonSchema))return new _i(e.latitude,e.longitude)}}_i._jsonSchemaVersion="firestore/geoPoint/1.0",_i._jsonSchema={type:Nt("string",_i._jsonSchemaVersion),latitude:Nt("number"),longitude:Nt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:vi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(eu(e,vi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new vi(e.vectorValues);throw new ye(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vi._jsonSchemaVersion="firestore/vectorValue/1.0",vi._jsonSchema={type:Nt("string",vi._jsonSchemaVersion),vectorValues:Nt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=/^__.*__$/;class VN{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new io(e,this.data,this.fieldMask,t,this.fieldTransforms):new tu(e,this.data,t,this.fieldTransforms)}}function YS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ec:n})}}class wm{constructor(e,t,s,o,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new wm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:s,mc:!1});return o.fc(e),o}gc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:s,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return mf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(YS(this.Ec)&&kN.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class UN{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Vf(e)}Dc(e,t,s,o=!1){return new wm({Ec:e,methodName:t,bc:s,path:Xt.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function LN(n){const e=n._freezeSettings(),t=Vf(n._databaseId);return new UN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ON(n,e,t,s,o,l={}){const c=n.Dc(l.merge||l.mergeFields?2:0,e,t,o);XS("Data must be an object, but it was:",c,s);const d=QS(s,c);let m,p;if(l.merge)m=new Zn(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const A=qN(e,E,t);if(!c.contains(A))throw new ye(re.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);FN(v,A)||v.push(A)}m=new Zn(v),p=c.fieldTransforms.filter((E=>m.covers(E.field)))}else m=null,p=c.fieldTransforms;return new VN(new zn(d),m,p)}function KS(n,e){if($S(n=Si(n)))return XS("Unsupported field value:",e,n),QS(n,e);if(n instanceof JS)return(function(s,o){if(!YS(o.Ec))throw o.wc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(s,o){const l=[];let c=0;for(const d of s){let m=KS(d,o.yc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(n,e)}return(function(s,o){if((s=Si(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return A1(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=ut.fromDate(s);return{timestampValue:ff(o.serializer,l)}}if(s instanceof ut){const l=new ut(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ff(o.serializer,l)}}if(s instanceof _i)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Gn)return{bytesValue:pS(o.serializer,s._byteString)};if(s instanceof Bt){const l=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw o.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:um(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof vi)return(function(c,d){return{mapValue:{fields:{[G0]:{stringValue:H0},[of]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw d.wc("VectorValues must only contain numeric values.");return om(d.serializer,p)}))}}}}}})(s,o);throw o.wc(`Unsupported field value: ${jp(s)}`)})(n,e)}function QS(n,e){const t={};return L0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):to(n,((s,o)=>{const l=KS(o,e.Vc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function $S(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ut||n instanceof _i||n instanceof Gn||n instanceof Bt||n instanceof JS||n instanceof vi)}function XS(n,e,t){if(!$S(t)||!V0(t)){const s=jp(t);throw s==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+s)}}function qN(n,e,t){if((e=Si(e))instanceof Rm)return e._internalPath;if(typeof e=="string")return WS(n,e);throw mf("Field path arguments must be of type string or ",n,!1,void 0,t)}const BN=new RegExp("[~\\*/\\[\\]]");function WS(n,e,t){if(e.search(BN)>=0)throw mf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Rm(...e.split("."))._internalPath}catch{throw mf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function mf(n,e,t,s,o){const l=s&&!s.isEmpty(),c=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${s}`),c&&(m+=` in document ${o}`),m+=")"),new ye(re.INVALID_ARGUMENT,d+n+m)}function FN(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(jS("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class zN extends ZS{data(){return super.data()}}function jS(n,e){return typeof e=="string"?WS(n,e):e instanceof Rm?e._internalPath:e._delegate._internalPath}class GN{convertValue(e,t="none"){switch(fr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(cr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return to(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){var t,s,o;const l=(o=(s=(t=e.fields)===null||t===void 0?void 0:t[of].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map((c=>St(c.doubleValue)));return new vi(l)}convertGeoPoint(e){return new _i(St(e.latitude),St(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=bf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Jl(e));default:return null}}convertTimestamp(e){const t=ur(e);return new ut(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=ht.fromString(e);Xe(TS(s),9688,{name:e});const o=new Yl(s.get(1),s.get(3)),l=new Te(s.popFirst(5));return o.isEqual(t)||is(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class Pl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Kr extends ZS{constructor(e,t,s,o,l,c){super(e,t,s,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Qc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(jS("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Kr._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Kr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Kr._jsonSchema={type:Nt("string",Kr._jsonSchemaVersion),bundleSource:Nt("string","DocumentSnapshot"),bundleName:Nt("string"),bundle:Nt("string")};class Qc extends Kr{data(e={}){return super.data(e)}}class ql{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Pl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Qc(this._firestore,this._userDataWriter,s.key,s,new Pl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((d=>{const m=new Qc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Pl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const m=new Qc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Pl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,v=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:JN(d.type),doc:m,oldIndex:p,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ql._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Zp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function JN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(n){n=Gl(n,Bt);const e=Gl(n.firestore,Im);return MN(HS(e),n._key).then((t=>QN(e,n,t)))}ql._jsonSchemaVersion="firestore/querySnapshot/1.0",ql._jsonSchema={type:Nt("string",ql._jsonSchemaVersion),bundleSource:Nt("string","QuerySnapshot"),bundleName:Nt("string"),bundle:Nt("string")};class YN extends GN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,t)}}function tA(n,e,t){n=Gl(n,Bt);const s=Gl(n.firestore,Im),o=HN(n.converter,e);return KN(s,[ON(LN(s),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,ts.none())])}function KN(n,e){return(function(s,o){const l=new or;return s.asyncQueue.enqueueAndForget((async()=>gN(await bN(s),o,l))),l.promise})(HS(n),e)}function QN(n,e,t){const s=t.docs.get(e._key),o=new YN(n);return new Kr(n,o,e._key,s,new Pl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){_a=o})(ya),ua(new Xr("firestore",((s,{instanceIdentifier:o,options:l})=>{const c=s.getProvider("app").getImmediate(),d=new Im(new kw(s.getProvider("auth-internal")),new Lw(c,s.getProvider("app-check-internal")),(function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ye(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yl(p.options.projectId,v)})(c,o),c);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),sr(Pv,kv,e),sr(Pv,kv,"esm2017")})();var $N="firebase",XN="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sr($N,XN,"app");function bm(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(n);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(n,s[o])&&(t[s[o]]=n[s[o]]);return t}function nA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const WN=nA,iA=new Zl("auth","Firebase",nA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf=new Qp("@firebase/auth");function ZN(n,...e){gf.logLevel<=Be.WARN&&gf.warn(`Auth (${ya}): ${n}`,...e)}function $c(n,...e){gf.logLevel<=Be.ERROR&&gf.error(`Auth (${ya}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(n,...e){throw Nm(n,...e)}function Ti(n,...e){return Nm(n,...e)}function sA(n,e,t){const s=Object.assign(Object.assign({},WN()),{[e]:t});return new Zl("auth","Firebase",s).create(e,{appName:n.name})}function Qr(n){return sA(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Nm(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return iA.create(n,...e)}function Ie(n,e,...t){if(!n)throw Nm(e,...t)}function ji(n){const e="INTERNAL ASSERTION FAILED: "+n;throw $c(e),new Error(e)}function os(n,e){n||ji(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function jN(){return bT()==="http:"||bT()==="https:"}function bT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jN()||fR()||"connection"in navigator)?navigator.onLine:!0}function tM(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,t){this.shortDelay=e,this.longDelay=t,os(t>e,"Short delay should be less than long delay!"),this.isMobile=lR()||dR()}get(){return eM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(n,e){os(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ji("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ji("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ji("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],sM=new ru(3e4,6e4);function xm(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Sa(n,e,t,s,o={}){return oA(n,o,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const d=jl(Object.assign({key:n.config.apiKey},c)).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:m},l);return cR()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&ga(n.emulatorConfig.host)&&(p.credentials="include"),rA.fetch()(await aA(n,n.config.apiHost,t,d),p)})}async function oA(n,e,t){n._canInitEmulator=!1;const s=Object.assign(Object.assign({},nM),e);try{const o=new oM(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw zc(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[m,p]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw zc(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw zc(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw zc(n,"user-disabled",c);const v=s[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw sA(n,v,p);rs(n,v)}}catch(o){if(o instanceof as)throw o;rs(n,"network-request-failed",{message:String(o)})}}async function rM(n,e,t,s,o={}){const l=await Sa(n,e,t,s,o);return"mfaPendingCredential"in l&&rs(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function aA(n,e,t,s){const o=`${e}${t}?${s}`,l=n,c=l.config.emulator?Mm(n.config,o):`${n.config.apiScheme}://${o}`;return iM.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class oM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Ti(this.auth,"network-request-failed")),sM.get())})}}function zc(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Ti(n,e,s);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aM(n,e){return Sa(n,"POST","/v1/accounts:delete",e)}async function yf(n,e){return Sa(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lM(n,e=!1){const t=Si(n),s=await t.getIdToken(e),o=Dm(s);Ie(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:Bl(cp(o.auth_time)),issuedAtTime:Bl(cp(o.iat)),expirationTime:Bl(cp(o.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function cp(n){return Number(n)*1e3}function Dm(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return $c("JWT malformed, contained fewer than 3 sections"),null;try{const o=p0(t);return o?JSON.parse(o):($c("Failed to decode base64 JWT payload"),null)}catch(o){return $c("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function NT(n){const e=Dm(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wl(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof as&&uM(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function uM({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bl(this.lastLoginAt),this.creationTime=Bl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _f(n){var e;const t=n.auth,s=await n.getIdToken(),o=await Wl(n,yf(t,{idToken:s}));Ie(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];n._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?lA(l.providerUserInfo):[],d=dM(n.providerData,c),m=n.isAnonymous,p=!(n.email&&l.passwordHash)&&!(d!=null&&d.length),v=m?p:!1,E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Vp(l.createdAt,l.lastLoginAt),isAnonymous:v};Object.assign(n,E)}async function fM(n){const e=Si(n);await _f(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dM(n,e){return[...n.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function lA(n){return n.map(e=>{var{providerId:t}=e,s=bm(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hM(n,e){const t=await oA(n,{},async()=>{const s=jl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,c=await aA(n,o,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:s};return n.emulatorConfig&&ga(n.emulatorConfig.host)&&(m.credentials="include"),rA.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function pM(n,e){return Sa(n,"POST","/v2/accounts:revokeToken",xm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):NT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=NT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await hM(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,c=new ia;return s&&(Ie(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),o&&(Ie(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(Ie(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ia,this.toJSON())}_performRefresh(){return ji("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class jn{constructor(e){var{uid:t,auth:s,stsTokenManager:o}=e,l=bm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Vp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Wl(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return lM(this,e)}reload(){return fM(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new jn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await _f(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mi(this.auth.app))return Promise.reject(Qr(this.auth));const e=await this.getIdToken();return await Wl(this,aM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,o,l,c,d,m,p,v;const E=(s=t.displayName)!==null&&s!==void 0?s:void 0,A=(o=t.email)!==null&&o!==void 0?o:void 0,b=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,q=(c=t.photoURL)!==null&&c!==void 0?c:void 0,G=(d=t.tenantId)!==null&&d!==void 0?d:void 0,Q=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,se=(p=t.createdAt)!==null&&p!==void 0?p:void 0,K=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:W,emailVerified:oe,isAnonymous:de,providerData:ce,stsTokenManager:x}=t;Ie(W&&x,e,"internal-error");const w=ia.fromJSON(this.name,x);Ie(typeof W=="string",e,"internal-error"),Ws(E,e.name),Ws(A,e.name),Ie(typeof oe=="boolean",e,"internal-error"),Ie(typeof de=="boolean",e,"internal-error"),Ws(b,e.name),Ws(q,e.name),Ws(G,e.name),Ws(Q,e.name),Ws(se,e.name),Ws(K,e.name);const N=new jn({uid:W,auth:e,email:A,emailVerified:oe,displayName:E,isAnonymous:de,photoURL:q,phoneNumber:b,tenantId:G,stsTokenManager:w,createdAt:se,lastLoginAt:K});return ce&&Array.isArray(ce)&&(N.providerData=ce.map(P=>Object.assign({},P))),Q&&(N._redirectEventId=Q),N}static async _fromIdTokenResponse(e,t,s=!1){const o=new ia;o.updateFromServerResponse(t);const l=new jn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await _f(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Ie(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?lA(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),d=new ia;d.updateFromIdToken(s);const m=new jn({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:c}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Vp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,p),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT=new Map;function es(n){os(n instanceof Function,"Expected a class definition");let e=MT.get(n);return e?(os(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,MT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}uA.type="NONE";const xT=uA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(n,e,t){return`firebase:${n}:${e}:${t}`}class sa{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=Xc(this.userKey,o.apiKey,l),this.fullPersistenceKey=Xc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await yf(this.auth,{idToken:e}).catch(()=>{});return t?jn._fromGetAccountInfoResponse(this.auth,t,e):null}return jn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new sa(es(xT),e,s);const o=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=o[0]||es(xT);const c=Xc(s,e.config.apiKey,e.name);let d=null;for(const p of t)try{const v=await p._get(c);if(v){let E;if(typeof v=="string"){const A=await yf(e,{idToken:v}).catch(()=>{});if(!A)break;E=await jn._fromGetAccountInfoResponse(e,A,v)}else E=jn._fromJSON(e,v);p!==l&&(d=E),l=p;break}}catch{}const m=o.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new sa(l,e,s):(l=m[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new sa(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mA(e))return"Blackberry";if(gA(e))return"Webos";if(fA(e))return"Safari";if((e.includes("chrome/")||dA(e))&&!e.includes("edge/"))return"Chrome";if(pA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function cA(n=on()){return/firefox\//i.test(n)}function fA(n=on()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dA(n=on()){return/crios\//i.test(n)}function hA(n=on()){return/iemobile/i.test(n)}function pA(n=on()){return/android/i.test(n)}function mA(n=on()){return/blackberry/i.test(n)}function gA(n=on()){return/webos/i.test(n)}function Pm(n=on()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function mM(n=on()){var e;return Pm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gM(){return hR()&&document.documentMode===10}function yA(n=on()){return Pm(n)||pA(n)||gA(n)||mA(n)||/windows phone/i.test(n)||hA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(n,e=[]){let t;switch(n){case"Browser":t=DT(on());break;case"Worker":t=`${DT(on())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ya}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((c,d)=>{try{const m=e(l);c(m)}catch(m){d(m)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _M(n,e={}){return Sa(n,"GET","/v2/passwordPolicy",xm(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM=6;class TM{constructor(e){var t,s,o,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:vM,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,o,l,c,d;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(s=m.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),m.isValid&&(m.isValid=(o=m.containsLowercaseLetter)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(c=m.containsNumericCharacter)!==null&&c!==void 0?c:!0),m.isValid&&(m.isValid=(d=m.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),m}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new PT(this),this.idTokenSubscription=new PT(this),this.beforeStateQueue=new yM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=es(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await sa.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await yf(this,{idToken:e}),s=await jn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(mi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o==null?void 0:o._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===d)&&(m!=null&&m.user)&&(o=m.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await _f(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mi(this.app))return Promise.reject(Qr(this));const t=e?Si(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mi(this.app)?Promise.reject(Qr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mi(this.app)?Promise.reject(Qr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(es(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _M(this),t=new TM(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Zl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await pM(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&es(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await sa.create(this,[es(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,s,o);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_A(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(mi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&ZN(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function km(n){return Si(n)}class PT{constructor(e){this.auth=e,this.observer=null,this.addObserver=ER(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SM(n){Vm=n}function AM(n){return Vm.loadJS(n)}function CM(){return Vm.gapiScript}function IM(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(n,e){const t=Xp(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if($r(l,e??{}))return o;rs(o,"already-initialized")}return t.initialize({options:e})}function wM(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(es);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function bM(n,e,t){const s=km(n);Ie(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=vA(e),{host:c,port:d}=NM(e),m=d===null?"":`:${d}`,p={url:`${l}//${c}${m}/`},v=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ie(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ie($r(p,s.config.emulator)&&$r(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,ga(c)?(_0(`${l}//${c}${m}`),v0("Auth",!0)):MM()}function vA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function NM(n){const e=vA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:kT(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:kT(c)}}}function kT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function MM(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ji("not implemented")}_getIdTokenResponse(e){return ji("not implemented")}_linkToIdToken(e,t){return ji("not implemented")}_getReauthenticationResolver(e){return ji("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ra(n,e){return rM(n,"POST","/v1/accounts:signInWithIdp",xm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM="http://localhost";class jr extends TA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new jr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):rs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=t,l=bm(t,["providerId","signInMethod"]);if(!s||!o)return null;const c=new jr(s,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ra(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,ra(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ra(e,t)}buildRequest(){const e={requestUri:xM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=jl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou extends EA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs extends ou{constructor(){super("facebook.com")}static credential(e){return jr._fromParams({providerId:Zs.PROVIDER_ID,signInMethod:Zs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zs.credentialFromTaggedObject(e)}static credentialFromError(e){return Zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zs.credential(e.oauthAccessToken)}catch{return null}}}Zs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends ou{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return jr._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Zi.credential(t,s)}catch{return null}}}Zi.GOOGLE_SIGN_IN_METHOD="google.com";Zi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends ou{constructor(){super("github.com")}static credential(e){return jr._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return js.credential(e.oauthAccessToken)}catch{return null}}}js.GITHUB_SIGN_IN_METHOD="github.com";js.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends ou{constructor(){super("twitter.com")}static credential(e,t){return jr._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return er.credential(t,s)}catch{return null}}}er.TWITTER_SIGN_IN_METHOD="twitter.com";er.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await jn._fromIdTokenResponse(e,s,o),c=VT(s);return new ma({user:l,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=VT(s);return new ma({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function VT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf extends as{constructor(e,t,s,o){var l;super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,vf.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new vf(e,t,s,o)}}function SA(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?vf._fromErrorAndOperation(n,l,e,s):l})}async function DM(n,e,t=!1){const s=await Wl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ma._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PM(n,e,t=!1){const{auth:s}=n;if(mi(s.app))return Promise.reject(Qr(s));const o="reauthenticate";try{const l=await Wl(n,SA(s,o,e,n),t);Ie(l.idToken,s,"internal-error");const c=Dm(l.idToken);Ie(c,s,"internal-error");const{sub:d}=c;return Ie(n.uid===d,s,"user-mismatch"),ma._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&rs(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kM(n,e,t=!1){if(mi(n.app))return Promise.reject(Qr(n));const s="signIn",o=await SA(n,s,e),l=await ma._fromIdTokenResponse(n,s,o);return t||await n._updateCurrentUser(l.user),l}function VM(n,e,t,s){return Si(n).onIdTokenChanged(e,t,s)}function UM(n,e,t){return Si(n).beforeAuthStateChanged(e,t)}const Tf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Tf,"1"),this.storage.removeItem(Tf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM=1e3,OM=10;class CA extends AA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,m)=>{this.notifyListeners(c,m)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);gM()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,OM):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},LM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}CA.type="LOCAL";const qM=CA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA extends AA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}IA.type="SESSION";const RA=IA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BM(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new qf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const d=Array.from(c).map(async p=>p(t.origin,l)),m=await BM(d);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((d,m)=>{const p=Um("",20);o.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},s);c={messageChannel:o,onMessage(E){const A=E;if(A.data.eventId===p)switch(A.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(A.data.response);break;default:clearTimeout(v),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(){return window}function zM(n){Ei().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(){return typeof Ei().WorkerGlobalScope<"u"&&typeof Ei().importScripts=="function"}async function GM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HM(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function JM(){return wA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="firebaseLocalStorageDb",YM=1,Ef="firebaseLocalStorage",NA="fbase_key";class au{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Bf(n,e){return n.transaction([Ef],e?"readwrite":"readonly").objectStore(Ef)}function KM(){const n=indexedDB.deleteDatabase(bA);return new au(n).toPromise()}function Up(){const n=indexedDB.open(bA,YM);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Ef,{keyPath:NA})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Ef)?e(s):(s.close(),await KM(),e(await Up()))})})}async function UT(n,e,t){const s=Bf(n,!0).put({[NA]:e,value:t});return new au(s).toPromise()}async function QM(n,e){const t=Bf(n,!1).get(e),s=await new au(t).toPromise();return s===void 0?null:s.value}function LT(n,e){const t=Bf(n,!0).delete(e);return new au(t).toPromise()}const $M=800,XM=3;class MA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Up(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>XM)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qf._getInstance(JM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await GM(),!this.activeServiceWorker)return;this.sender=new FM(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Up();return await UT(e,Tf,"1"),await LT(e,Tf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>UT(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>QM(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>LT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Bf(o,!1).getAll();return new au(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$M)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}MA.type="LOCAL";const WM=MA;new ru(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZM(n,e){return e?es(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm extends TA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ra(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ra(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ra(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function jM(n){return kM(n.auth,new Lm(n),n.bypassAuthState)}function ex(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),PM(t,new Lm(n),n.bypassAuthState)}async function tx(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),DM(t,new Lm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jM;case"linkViaPopup":case"linkViaRedirect":return tx;case"reauthViaPopup":case"reauthViaRedirect":return ex;default:rs(this.auth,"internal-error")}}resolve(e){os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx=new ru(2e3,1e4);class ea extends xA{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,ea.currentPopupAction&&ea.currentPopupAction.cancel(),ea.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){os(this.filter.length===1,"Popup operations only handle one event");const e=Um();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ea.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,nx.get())};e()}}ea.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="pendingRedirect",Wc=new Map;class sx extends xA{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Wc.get(this.auth._key());if(!e){try{const s=await rx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Wc.set(this.auth._key(),e)}return this.bypassAuthState||Wc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rx(n,e){const t=lx(e),s=ax(n);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function ox(n,e){Wc.set(n._key(),e)}function ax(n){return es(n._redirectPersistence)}function lx(n){return Xc(ix,n.config.apiKey,n.name)}async function ux(n,e,t=!1){if(mi(n.app))return Promise.reject(Qr(n));const s=km(n),o=ZM(s,e),c=await new sx(s,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=600*1e3;class fx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dx(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!DA(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(Ti(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cx&&this.cachedEventUids.clear(),this.cachedEventUids.has(OT(e))}saveEventToCache(e){this.cachedEventUids.add(OT(e)),this.lastProcessedEventTime=Date.now()}}function OT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function DA({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function dx(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hx(n,e={}){return Sa(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mx=/^https?/;async function gx(n){if(n.config.emulator)return;const{authorizedDomains:e}=await hx(n);for(const t of e)try{if(yx(t))return}catch{}rs(n,"unauthorized-domain")}function yx(n){const e=kp(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!mx.test(t))return!1;if(px.test(n))return s===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x=new ru(3e4,6e4);function qT(){const n=Ei().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function vx(n){return new Promise((e,t)=>{var s,o,l;function c(){qT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qT(),t(Ti(n,"network-request-failed"))},timeout:_x.get()})}if(!((o=(s=Ei().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=Ei().gapi)===null||l===void 0)&&l.load)c();else{const d=IM("iframefcb");return Ei()[d]=()=>{gapi.load?c():t(Ti(n,"network-request-failed"))},AM(`${CM()}?onload=${d}`).catch(m=>t(m))}}).catch(e=>{throw Zc=null,e})}let Zc=null;function Tx(n){return Zc=Zc||vx(n),Zc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex=new ru(5e3,15e3),Sx="__/auth/iframe",Ax="emulator/auth/iframe",Cx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ix=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rx(n){const e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Mm(e,Ax):`https://${n.config.authDomain}/${Sx}`,s={apiKey:e.apiKey,appName:n.name,v:ya},o=Ix.get(n.config.apiHost);o&&(s.eid=o);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${jl(s).slice(1)}`}async function wx(n){const e=await Tx(n),t=Ei().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:Rx(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Cx,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const c=Ti(n,"network-request-failed"),d=Ei().setTimeout(()=>{l(c)},Ex.get());function m(){Ei().clearTimeout(d),o(s)}s.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Nx=500,Mx=600,xx="_blank",Dx="http://localhost";class BT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Px(n,e,t,s=Nx,o=Mx){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let d="";const m=Object.assign(Object.assign({},bx),{width:s.toString(),height:o.toString(),top:l,left:c}),p=on().toLowerCase();t&&(d=dA(p)?xx:t),cA(p)&&(e=e||Dx,m.scrollbars="yes");const v=Object.entries(m).reduce((A,[b,q])=>`${A}${b}=${q},`,"");if(mM(p)&&d!=="_self")return kx(e||"",d),new BT(null);const E=window.open(e||"",d,v);Ie(E,n,"popup-blocked");try{E.focus()}catch{}return new BT(E)}function kx(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="__/auth/handler",Ux="emulator/auth/handler",Lx=encodeURIComponent("fac");async function FT(n,e,t,s,o,l){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:ya,eventId:o};if(e instanceof EA){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",TR(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(e instanceof ou){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const m=await n._getAppCheckToken(),p=m?`#${Lx}=${encodeURIComponent(m)}`:"";return`${Ox(n)}?${jl(d).slice(1)}${p}`}function Ox({config:n}){return n.emulator?Mm(n,Ux):`https://${n.authDomain}/${Vx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp="webStorageSupport";class qx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RA,this._completeRedirectFn=ux,this._overrideRedirectResult=ox}async _openPopup(e,t,s,o){var l;os((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await FT(e,t,s,kp(),o);return Px(e,c,Um())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await FT(e,t,s,kp(),o);return zM(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(os(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await wx(e),s=new fx(e);return t.register("authEvent",o=>(Ie(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(fp,{type:fp},o=>{var l;const c=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[fp];c!==void 0&&t(!!c),rs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=gx(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return yA()||fA()||Pm()}}const Bx=qx;var zT="@firebase/auth",GT="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Gx(n){ua(new Xr("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=s.options;Ie(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const m={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_A(n)},p=new EM(s,o,l,m);return wM(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),ua(new Xr("auth-internal",e=>{const t=km(e.getProvider("auth").getImmediate());return(s=>new Fx(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),sr(zT,GT,zx(n)),sr(zT,GT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx=300,Jx=y0("authIdTokenMaxAge")||Hx;let HT=null;const Yx=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>Jx)return;const o=t==null?void 0:t.token;HT!==o&&(HT=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Kx(n=A0()){const e=Xp(n,"auth");if(e.isInitialized())return e.getImmediate();const t=RM(n,{popupRedirectResolver:Bx,persistence:[WM,qM,RA]}),s=y0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=Yx(l.toString());UM(t,c,()=>c(t.currentUser)),VM(t,d=>c(d))}}const o=m0("auth");return o&&bM(t,`http://${o}`),t}function Qx(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}SM({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=o=>{const l=Ti("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",Qx().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Gx("Browser");const $x={apiKey:"AIzaSyAoMQ8oVPP5oFjw8YzgF0H1Dy4DAJmNaKM",authDomain:"dresscode-ai-32c50.firebaseapp.com",projectId:"dresscode-ai-32c50",storageBucket:"dresscode-ai-32c50.firebasestorage.app",messagingSenderId:"215593114437",appId:"1:215593114437:web:5d9c1f3161182802f37c2c"},PA=S0($x);Kx(PA);new Zi;const Ff=DN(PA),Xx=async(n,e)=>{try{const t=Of(Ff,"users",n,"wardrobe","items");await tA(t,{items:e})}catch(t){throw console.error("Erreur lors de la sauvegarde des vtements:",t),t}},Wx=async n=>{try{const e=Of(Ff,"users",n,"wardrobe","items"),t=await eA(e);return t.exists()?t.data().items||[]:[]}catch(e){return console.error("Erreur lors du chargement des vtements:",e),[]}},Zx=async(n,e)=>{try{const t=Of(Ff,"users",n,"wardrobe","sets");await tA(t,{sets:e})}catch(t){throw console.error("Erreur lors de la sauvegarde des ensembles:",t),t}},jx=async n=>{try{const e=Of(Ff,"users",n,"wardrobe","sets"),t=await eA(e);return t.exists()?t.data().sets||[]:[]}catch(e){return console.error("Erreur lors du chargement des ensembles:",e),[]}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let eD,tD;function nD(){return{geminiUrl:eD,vertexUrl:tD}}function iD(n,e,t,s){var o,l;if(!(n!=null&&n.baseUrl)){const c=nD();return e?(o=c.vertexUrl)!==null&&o!==void 0?o:t:(l=c.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ro{}function me(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function g(n,e,t){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const d=c.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[d])){const m=n[d];if(Array.isArray(t))for(let p=0;p<m.length;p++){const v=m[p];g(v,e.slice(l+1),t[p])}else for(const p of m)g(p,e.slice(l+1),t)}return}else if(c.endsWith("[0]")){const d=c.slice(0,-3);d in n||(n[d]=[{}]);const m=n[d];g(m[0],e.slice(l+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const s=e[e.length-1],o=n[s];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const o=e[s];if(o.endsWith("[]")){const l=o.slice(0,-2);if(l in n){const c=n[l];return Array.isArray(c)?c.map(d=>f(d,e.slice(s+1),t)):t}else return t}else n=n[o]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function sD(n,e){for(const[t,s]of Object.entries(e)){const o=t.split("."),l=s.split("."),c=new Set;let d=-1;for(let m=0;m<o.length;m++)if(o[m]==="*"){d=m;break}if(d!==-1&&l.length>d)for(let m=d;m<l.length;m++){const p=l[m];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&c.add(p)}Lp(n,o,l,0,c)}}function Lp(n,e,t,s,o){if(s>=e.length||typeof n!="object"||n===null)return;const l=e[s];if(l.endsWith("[]")){const c=l.slice(0,-2),d=n;if(c in d&&Array.isArray(d[c]))for(const m of d[c])Lp(m,e,t,s+1,o)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const c=n,d=Object.keys(c).filter(p=>!p.startsWith("_")&&!o.has(p)),m={};for(const p of d)m[p]=c[p];for(const[p,v]of Object.entries(m)){const E=[];for(const A of t.slice(s))A==="*"?E.push(p):E.push(A);g(c,E,v)}for(const p of d)delete c[p]}}else{const c=n;l in c&&Lp(c[l],e,t,s+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Om(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rD(n){const e={},t=f(n,["operationName"]);t!=null&&g(e,["operationName"],t);const s=f(n,["resourceName"]);return s!=null&&g(e,["_url","resourceName"],s),e}function oD(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&g(e,["response"],lD(c)),e}function aD(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const c=f(n,["response"]);return c!=null&&g(e,["response"],uD(c)),e}function lD(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>cD(c))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function uD(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>fD(c))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function cD(n){const e={},t=f(n,["video"]);return t!=null&&g(e,["video"],pD(t)),e}function fD(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],mD(t)),e}function dD(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function hD(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function pD(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&g(e,["videoBytes"],Om(s));const o=f(n,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function mD(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],Om(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var JT;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(JT||(JT={}));var YT;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(YT||(YT={}));var KT;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(KT||(KT={}));var it;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(it||(it={}));var QT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(QT||(QT={}));var $T;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})($T||($T={}));var XT;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(XT||(XT={}));var WT;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(WT||(WT={}));var ZT;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(ZT||(ZT={}));var jT;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(jT||(jT={}));var eE;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(eE||(eE={}));var tE;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(tE||(tE={}));var nE;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(nE||(nE={}));var iE;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(iE||(iE={}));var sE;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(sE||(sE={}));var rE;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(rE||(rE={}));var Sf;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Sf||(Sf={}));var oE;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(oE||(oE={}));var aE;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(aE||(aE={}));var lE;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(lE||(lE={}));var Op;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Op||(Op={}));var uE;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V"})(uE||(uE={}));var cE;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(cE||(cE={}));var fE;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(fE||(fE={}));var dE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(dE||(dE={}));var hE;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(hE||(hE={}));var pE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(pE||(pE={}));var mE;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(mE||(mE={}));var gE;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(gE||(gE={}));var yE;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(yE||(yE={}));var _E;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(_E||(_E={}));var vE;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(vE||(vE={}));var TE;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(TE||(TE={}));var EE;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(EE||(EE={}));var SE;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(SE||(SE={}));var AE;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(AE||(AE={}));var CE;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(CE||(CE={}));var IE;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(IE||(IE={}));var RE;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(RE||(RE={}));var wE;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(wE||(wE={}));var bE;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(bE||(bE={}));var NE;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(NE||(NE={}));var ME;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(ME||(ME={}));var xE;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(xE||(xE={}));var DE;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(DE||(DE={}));var PE;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(PE||(PE={}));var kE;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(kE||(kE={}));var VE;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(VE||(VE={}));var UE;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(UE||(UE={}));var ta;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(ta||(ta={}));class qp{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Nl{get text(){var e,t,s,o,l,c,d,m;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const E=[];for(const A of(m=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&m!==void 0?m:[]){for(const[b,q]of Object.entries(A))b!=="text"&&b!=="thought"&&(q!==null||q!==void 0)&&E.push(b);if(typeof A.text=="string"){if(typeof A.thought=="boolean"&&A.thought)continue;v=!0,p+=A.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var e,t,s,o,l,c,d,m;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const E of(m=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&m!==void 0?m:[]){for(const[A,b]of Object.entries(E))A!=="inlineData"&&(b!==null||b!==void 0)&&v.push(A);E.inlineData&&typeof E.inlineData.data=="string"&&(p+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,t,s,o,l,c,d,m;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(m=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,t,s,o,l,c,d,m,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(m=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,t,s,o,l,c,d,m,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(m=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.output}}class LE{}class OE{}class gD{}class yD{}class _D{}class vD{}class qE{}class BE{}class FE{}class TD{}class Af{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const s=new Af;let o;const l=e;return t?o=aD(l):o=oD(l),Object.assign(s,o),s}}class zE{}class GE{}class HE{}class ED{}class SD{}class AD{}class JE{}class CD{get text(){var e,t,s;let o="",l=!1;const c=[];for(const d of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[m,p]of Object.entries(d))m!=="text"&&m!=="thought"&&p!==null&&c.push(m);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,o+=d.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var e,t,s;let o="";const l=[];for(const c of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[d,m]of Object.entries(c))d!=="inlineData"&&m!==null&&l.push(d);c.inlineData&&typeof c.inlineData.data=="string"&&(o+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class ID{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ke(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function kA(n,e){const t=Ke(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function VA(n){return Array.isArray(n)?n.map(e=>Cf(e)):[Cf(n)]}function Cf(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function UA(n){const e=Cf(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function LA(n){const e=Cf(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function YE(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function OA(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>YE(e)):[YE(n)]}function Bp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function KE(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function QE(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function rn(n){if(n==null)throw new Error("ContentUnion is required");return Bp(n)?n:{role:"user",parts:OA(n)}}function qm(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=rn(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=rn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>rn(t)):[rn(e)]}function Hn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(KE(n)||QE(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[rn(n)]}const e=[],t=[],s=Bp(n[0]);for(const o of n){const l=Bp(o);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(o);else{if(KE(o)||QE(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return s||e.push({role:"user",parts:OA(t)}),e}function RD(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(it).includes(t[0].toUpperCase())?t[0].toUpperCase():it.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(it).includes(s.toUpperCase())?s.toUpperCase():it.TYPE_UNSPECIFIED})}}function oa(n){const e={},t=["items"],s=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&RD(n.type,e);for(const[c,d]of Object.entries(n))if(d!=null)if(c=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(it).includes(d.toUpperCase())?d.toUpperCase():it.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=oa(d);else if(s.includes(c)){const m=[];for(const p of d){if(p.type=="null"){e.nullable=!0;continue}m.push(oa(p))}e[c]=m}else if(o.includes(c)){const m={};for(const[p,v]of Object.entries(d))m[p]=oa(v);e[c]=m}else{if(c==="additionalProperties")continue;e[c]=d}return e}function Bm(n){return oa(n)}function Fm(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function zm(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Aa(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=oa(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=oa(e.response));return n}function Ca(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function wD(n,e,t,s=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function ls(n,e){if(typeof e!="string")throw new Error("name must be a string");return wD(n,e,"cachedContents")}function qA(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function pr(n){return Om(n)}function bD(n){return n!=null&&typeof n=="object"&&"name"in n}function ND(n){return n!=null&&typeof n=="object"&&"video"in n}function MD(n){return n!=null&&typeof n=="object"&&"uri"in n}function BA(n){var e;let t;if(bD(n)&&(t=n.name),!(MD(n)&&(t=n.uri,t===void 0))&&!(ND(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function FA(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function zA(n){for(const e of["models","tunedModels","publisherModels"])if(xD(n,e))return n[e];return[]}function xD(n,e){return n!==null&&typeof n=="object"&&e in n}function DD(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function PD(n,e={}){const t=[],s=new Set;for(const o of n){const l=o.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const c=DD(o,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function GA(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function kD(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function HA(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let l=!1;for(const c of o){if(typeof c!="object"||c===null)continue;const m=c.response;if(typeof m!="object"||m===null)continue;if(m.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Ia(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function JA(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VD(n){const e={},t=f(n,["responsesFile"]);t!=null&&g(e,["fileName"],t);const s=f(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>d2(c))),g(e,["inlinedResponses"],l)}const o=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["inlinedEmbedContentResponses"],l)}return e}function UD(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&g(e,["format"],t);const s=f(n,["gcsDestination","outputUriPrefix"]);s!=null&&g(e,["gcsUri"],s);const o=f(n,["bigqueryDestination","outputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function LD(n){const e={},t=f(n,["format"]);t!=null&&g(e,["predictionsFormat"],t);const s=f(n,["gcsUri"]);s!=null&&g(e,["gcsDestination","outputUriPrefix"],s);const o=f(n,["bigqueryUri"]);if(o!=null&&g(e,["bigqueryDestination","outputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function jc(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata","displayName"]);s!=null&&g(e,["displayName"],s);const o=f(n,["metadata","state"]);o!=null&&g(e,["state"],JA(o));const l=f(n,["metadata","createTime"]);l!=null&&g(e,["createTime"],l);const c=f(n,["metadata","endTime"]);c!=null&&g(e,["endTime"],c);const d=f(n,["metadata","updateTime"]);d!=null&&g(e,["updateTime"],d);const m=f(n,["metadata","model"]);m!=null&&g(e,["model"],m);const p=f(n,["metadata","output"]);return p!=null&&g(e,["dest"],VD(HA(p))),e}function Fp(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const o=f(n,["state"]);o!=null&&g(e,["state"],JA(o));const l=f(n,["error"]);l!=null&&g(e,["error"],l);const c=f(n,["createTime"]);c!=null&&g(e,["createTime"],c);const d=f(n,["startTime"]);d!=null&&g(e,["startTime"],d);const m=f(n,["endTime"]);m!=null&&g(e,["endTime"],m);const p=f(n,["updateTime"]);p!=null&&g(e,["updateTime"],p);const v=f(n,["model"]);v!=null&&g(e,["model"],v);const E=f(n,["inputConfig"]);E!=null&&g(e,["src"],OD(E));const A=f(n,["outputConfig"]);return A!=null&&g(e,["dest"],UD(HA(A))),e}function OD(n){const e={},t=f(n,["instancesFormat"]);t!=null&&g(e,["format"],t);const s=f(n,["gcsSource","uris"]);s!=null&&g(e,["gcsUri"],s);const o=f(n,["bigquerySource","inputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function qD(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=f(e,["fileName"]);s!=null&&g(t,["fileName"],s);const o=f(e,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>f2(n,c))),g(t,["requests","requests"],l)}return t}function BD(n){const e={},t=f(n,["format"]);t!=null&&g(e,["instancesFormat"],t);const s=f(n,["gcsUri"]);s!=null&&g(e,["gcsSource","uris"],s);const o=f(n,["bigqueryUri"]);if(o!=null&&g(e,["bigquerySource","inputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function FD(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function zD(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ia(n,s)),t}function GD(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ia(n,s)),t}function HD(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],JD(s));const o=f(n,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const l=f(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const c=f(n,["avgLogprobs"]);c!=null&&g(e,["avgLogprobs"],c);const d=f(n,["groundingMetadata"]);d!=null&&g(e,["groundingMetadata"],d);const m=f(n,["index"]);m!=null&&g(e,["index"],m);const p=f(n,["logprobsResult"]);p!=null&&g(e,["logprobsResult"],p);const v=f(n,["safetyRatings"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(b=>b)),g(e,["safetyRatings"],A)}const E=f(n,["urlContextMetadata"]);return E!=null&&g(e,["urlContextMetadata"],E),e}function JD(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["citations"],s)}return e}function YA(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>v2(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function YD(n,e){const t={},s=f(n,["displayName"]);if(e!==void 0&&s!=null&&g(e,["batch","displayName"],s),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function KD(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const o=f(n,["dest"]);return e!==void 0&&o!=null&&g(e,["outputConfig"],LD(kD(o))),t}function $E(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["src"]);o!=null&&g(t,["batch","inputConfig"],qD(n,GA(n,o)));const l=f(e,["config"]);return l!=null&&YD(l,t),t}function QD(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],Ke(n,s));const o=f(e,["src"]);o!=null&&g(t,["inputConfig"],BD(GA(n,o)));const l=f(e,["config"]);return l!=null&&KD(l,t),t}function $D(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["batch","displayName"],s),t}function XD(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["src"]);o!=null&&g(t,["batch","inputConfig"],i2(n,o));const l=f(e,["config"]);return l!=null&&$D(l,t),t}function WD(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ia(n,s)),t}function ZD(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ia(n,s)),t}function jD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);return l!=null&&g(e,["error"],l),e}function e2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);return l!=null&&g(e,["error"],l),e}function t2(n,e){const t={},s=f(e,["contents"]);if(s!=null){let l=qm(n,s);Array.isArray(l)&&(l=l.map(c=>c)),g(t,["requests[]","request","content"],l)}const o=f(e,["config"]);return o!=null&&(g(t,["_self"],n2(o,t)),sD(t,{"requests[].*":"requests[].request.*"})),t}function n2(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function i2(n,e){const t={},s=f(e,["fileName"]);s!=null&&g(t,["file_name"],s);const o=f(e,["inlinedRequests"]);return o!=null&&g(t,["requests"],t2(n,o)),t}function s2(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function r2(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],YA(rn(o)));const l=f(e,["temperature"]);l!=null&&g(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&g(s,["topP"],c);const d=f(e,["topK"]);d!=null&&g(s,["topK"],d);const m=f(e,["candidateCount"]);m!=null&&g(s,["candidateCount"],m);const p=f(e,["maxOutputTokens"]);p!=null&&g(s,["maxOutputTokens"],p);const v=f(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&g(s,["responseLogprobs"],E);const A=f(e,["logprobs"]);A!=null&&g(s,["logprobs"],A);const b=f(e,["presencePenalty"]);b!=null&&g(s,["presencePenalty"],b);const q=f(e,["frequencyPenalty"]);q!=null&&g(s,["frequencyPenalty"],q);const G=f(e,["seed"]);G!=null&&g(s,["seed"],G);const Q=f(e,["responseMimeType"]);Q!=null&&g(s,["responseMimeType"],Q);const se=f(e,["responseSchema"]);se!=null&&g(s,["responseSchema"],Bm(se));const K=f(e,["responseJsonSchema"]);if(K!=null&&g(s,["responseJsonSchema"],K),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const W=f(e,["safetySettings"]);if(t!==void 0&&W!=null){let O=W;Array.isArray(O)&&(O=O.map(D=>T2(D))),g(t,["safetySettings"],O)}const oe=f(e,["tools"]);if(t!==void 0&&oe!=null){let O=Ca(oe);Array.isArray(O)&&(O=O.map(D=>E2(Aa(D)))),g(t,["tools"],O)}const de=f(e,["toolConfig"]);if(t!==void 0&&de!=null&&g(t,["toolConfig"],de),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ce=f(e,["cachedContent"]);t!==void 0&&ce!=null&&g(t,["cachedContent"],ls(n,ce));const x=f(e,["responseModalities"]);x!=null&&g(s,["responseModalities"],x);const w=f(e,["mediaResolution"]);w!=null&&g(s,["mediaResolution"],w);const N=f(e,["speechConfig"]);if(N!=null&&g(s,["speechConfig"],Fm(N)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=f(e,["thinkingConfig"]);P!=null&&g(s,["thinkingConfig"],P);const V=f(e,["imageConfig"]);return V!=null&&g(s,["imageConfig"],V),s}function o2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(p=>HD(p))),g(e,["candidates"],m)}const o=f(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const l=f(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&g(e,["responseId"],c);const d=f(n,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function a2(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ia(n,s)),t}function l2(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ia(n,s)),t}function u2(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function c2(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function f2(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["request","model"],Ke(n,s));const o=f(e,["contents"]);if(o!=null){let d=Hn(o);Array.isArray(d)&&(d=d.map(m=>YA(m))),g(t,["request","contents"],d)}const l=f(e,["metadata"]);l!=null&&g(t,["metadata"],l);const c=f(e,["config"]);return c!=null&&g(t,["request","generationConfig"],r2(n,c,f(t,["request"],{}))),t}function d2(n){const e={},t=f(n,["response"]);t!=null&&g(e,["response"],o2(t));const s=f(n,["error"]);return s!=null&&g(e,["error"],s),e}function h2(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);if(e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function p2(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const l=f(n,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),t}function m2(n){const e={},t=f(n,["config"]);return t!=null&&h2(t,e),e}function g2(n){const e={},t=f(n,["config"]);return t!=null&&p2(t,e),e}function y2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["operations"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>jc(c))),g(e,["batchJobs"],l)}return e}function _2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["batchPredictionJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Fp(c))),g(e,["batchJobs"],l)}return e}function v2(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const s=f(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],s2(l));const c=f(n,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],FD(d));const m=f(n,["text"]);m!=null&&g(e,["text"],m);const p=f(n,["thought"]);p!=null&&g(e,["thought"],p);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const E=f(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function T2(n){const e={},t=f(n,["category"]);if(t!=null&&g(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function E2(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(v=>v)),g(e,["functionDeclarations"],p)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const o=f(n,["googleMaps"]);o!=null&&g(e,["googleMaps"],u2(o));const l=f(n,["computerUse"]);l!=null&&g(e,["computerUse"],l);const c=f(n,["codeExecution"]);if(c!=null&&g(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleSearch"]);d!=null&&g(e,["googleSearch"],c2(d));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var eo;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_RAG_STORES="ragStores",n.PAGED_ITEM_DOCUMENTS="documents"})(eo||(eo={}));class lu{constructor(e,t,s,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,o)}init(e,t,s){var o,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(o=c.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class S2 extends ro{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new lu(eo.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=$E(this.apiClient,e),s=t._url,o=me("{model}:batchGenerateContent",s),d=t.batch.inputConfig.requests,m=d.requests,p=[];for(const v of m){const E=Object.assign({},v);if(E.systemInstruction){const A=E.systemInstruction;delete E.systemInstruction;const b=E.request;b.systemInstruction=A,E.request=b}p.push(E)}return d.requests=p,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},o=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${o}`),s.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${o}`;else if(c)s.dest=`${c}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const p=QD(this.apiClient,e);return d=me("batchPredictionJobs",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Fp(v))}else{const p=$E(this.apiClient,e);return d=me("{model}:batchGenerateContent",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>jc(v))}}async createEmbeddingsInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=XD(this.apiClient,e);return l=me("{model}:asyncBatchEmbedContent",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>jc(m))}}async get(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const p=l2(this.apiClient,e);return d=me("batchPredictionJobs/{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Fp(v))}else{const p=a2(this.apiClient,e);return d=me("batches/{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>jc(v))}}async cancel(e){var t,s,o,l;let c="",d={};if(this.apiClient.isVertexAI()){const m=GD(this.apiClient,e);c=me("batchPredictionJobs/{name}:cancel",m._url),d=m._query,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const m=zD(this.apiClient,e);c=me("batches/{name}:cancel",m._url),d=m._query,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const p=g2(e);return d=me("batchPredictionJobs",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=_2(v),A=new JE;return Object.assign(A,E),A})}else{const p=m2(e);return d=me("batches",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=y2(v),A=new JE;return Object.assign(A,E),A})}}async delete(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const p=ZD(this.apiClient,e);return d=me("batchPredictionJobs/{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>e2(v))}else{const p=WD(this.apiClient,e);return d=me("batches/{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>jD(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function A2(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function XE(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>H2(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function C2(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const l=f(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let v=Hn(c);Array.isArray(v)&&(v=v.map(E=>XE(E))),g(e,["contents"],v)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],XE(rn(d)));const m=f(n,["tools"]);if(e!==void 0&&m!=null){let v=m;Array.isArray(v)&&(v=v.map(E=>J2(E))),g(e,["tools"],v)}const p=f(n,["toolConfig"]);if(e!==void 0&&p!=null&&g(e,["toolConfig"],p),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function I2(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const l=f(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let E=Hn(c);Array.isArray(E)&&(E=E.map(A=>A)),g(e,["contents"],E)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],rn(d));const m=f(n,["tools"]);if(e!==void 0&&m!=null){let E=m;Array.isArray(E)&&(E=E.map(A=>Y2(A))),g(e,["tools"],E)}const p=f(n,["toolConfig"]);e!==void 0&&p!=null&&g(e,["toolConfig"],p);const v=f(n,["kmsKeyName"]);return e!==void 0&&v!=null&&g(e,["encryption_spec","kmsKeyName"],v),t}function R2(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],kA(n,s));const o=f(e,["config"]);return o!=null&&C2(o,t),t}function w2(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],kA(n,s));const o=f(e,["config"]);return o!=null&&I2(o,t),t}function b2(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],ls(n,s)),t}function N2(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],ls(n,s)),t}function M2(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function x2(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function D2(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function P2(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&g(e,["response"],c);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function k2(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],ls(n,s)),t}function V2(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],ls(n,s)),t}function U2(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function L2(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function O2(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function q2(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function B2(n){const e={},t=f(n,["config"]);return t!=null&&O2(t,e),e}function F2(n){const e={},t=f(n,["config"]);return t!=null&&q2(t,e),e}function z2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["cachedContents"],l)}return e}function G2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["cachedContents"],l)}return e}function H2(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const s=f(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],D2(l));const c=f(n,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],A2(d));const m=f(n,["text"]);m!=null&&g(e,["text"],m);const p=f(n,["thought"]);p!=null&&g(e,["thought"],p);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const E=f(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function J2(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(v=>v)),g(e,["functionDeclarations"],p)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const o=f(n,["googleMaps"]);o!=null&&g(e,["googleMaps"],U2(o));const l=f(n,["computerUse"]);l!=null&&g(e,["computerUse"],l);const c=f(n,["codeExecution"]);if(c!=null&&g(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleSearch"]);d!=null&&g(e,["googleSearch"],L2(d));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function Y2(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>P2(A))),g(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const o=f(n,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const l=f(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],l);const c=f(n,["computerUse"]);c!=null&&g(e,["computerUse"],c);const d=f(n,["codeExecution"]);d!=null&&g(e,["codeExecution"],d);const m=f(n,["enterpriseWebSearch"]);m!=null&&g(e,["enterpriseWebSearch"],m);const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],p);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function K2(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),t}function Q2(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),t}function $2(n,e){const t={},s=f(e,["name"]);s!=null&&g(t,["_url","name"],ls(n,s));const o=f(e,["config"]);return o!=null&&K2(o,t),t}function X2(n,e){const t={},s=f(e,["name"]);s!=null&&g(t,["_url","name"],ls(n,s));const o=f(e,["config"]);return o!=null&&Q2(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class W2 extends ro{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new lu(eo.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const p=w2(this.apiClient,e);return d=me("cachedContents",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=R2(this.apiClient,e);return d=me("cachedContents",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const p=V2(this.apiClient,e);return d=me("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=k2(this.apiClient,e);return d=me("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const p=N2(this.apiClient,e);return d=me("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=x2(v),A=new GE;return Object.assign(A,E),A})}else{const p=b2(this.apiClient,e);return d=me("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=M2(v),A=new GE;return Object.assign(A,E),A})}}async update(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const p=X2(this.apiClient,e);return d=me("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=$2(this.apiClient,e);return d=me("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const p=F2(e);return d=me("cachedContents",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=G2(v),A=new HE;return Object.assign(A,E),A})}else{const p=B2(e);return d=me("cachedContents",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=z2(v),A=new HE;return Object.assign(A,E),A})}}}function WE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function lt(n){return this instanceof lt?(this.v=n,this):new lt(n)}function aa(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),o[Symbol.asyncIterator]=function(){return this},o;function c(b){return function(q){return Promise.resolve(q).then(b,E)}}function d(b,q){s[b]&&(o[b]=function(G){return new Promise(function(Q,se){l.push([b,G,Q,se])>1||m(b,G)})},q&&(o[b]=q(o[b])))}function m(b,q){try{p(s[b](q))}catch(G){A(l[0][3],G)}}function p(b){b.value instanceof lt?Promise.resolve(b.value.v).then(v,E):A(l[0][2],b)}function v(b){m("next",b)}function E(b){m("throw",b)}function A(b,q){b(q),l.shift(),l.length&&m(l[0][0],l[0][1])}}function Fl(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof WE=="function"?WE(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(c){return new Promise(function(d,m){c=n[l](c),o(d,m,c.done,c.value)})}}function o(l,c,d,m){Promise.resolve(m).then(function(p){l({value:p,done:d})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Z2(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:KA(t)}function KA(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function j2(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function ZE(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const o=[];let l=!0;for(;s<t&&n[s].role==="model";)o.push(n[s]),l&&!KA(n[s])&&(l=!1),s++;l?e.push(...o):e.pop()}return e}class eP{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new tP(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class tP{constructor(e,t,s,o={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),j2(l)}async sendMessage(e){var t;await this.sendPromise;const s=rn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,c,d;const m=await o,p=(c=(l=m.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,v=m.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let A=[];v!=null&&(A=(d=v.slice(E))!==null&&d!==void 0?d:[]);const b=p?[p]:[];this.recordHistory(s,b,A)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const s=rn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?ZE(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var s,o;return aa(this,arguments,function*(){var c,d,m,p;const v=[];try{for(var E=!0,A=Fl(e),b;b=yield lt(A.next()),c=b.done,!c;E=!0){p=b.value,E=!1;const q=p;if(Z2(q)){const G=(o=(s=q.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content;G!==void 0&&v.push(G)}yield yield lt(q)}}catch(q){d={error:q}}finally{try{!E&&!c&&(m=A.return)&&(yield lt(m.call(A)))}finally{if(d)throw d.error}}this.recordHistory(t,v)})}recordHistory(e,t,s){let o=[];t.length>0&&t.every(l=>l.role!==void 0)?o=t:o.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...ZE(s)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,zf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nP(n){const e={},t=f(n,["file"]);return t!=null&&g(e,["file"],t),e}function iP(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function sP(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],BA(t)),e}function rP(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function oP(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],BA(t)),e}function aP(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function lP(n){const e={},t=f(n,["config"]);return t!=null&&aP(t,e),e}function uP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cP extends ro{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new lu(eo.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=lP(e);return l=me("files",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const p=uP(m),v=new ED;return Object.assign(v,p),v})}}async createInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=nP(e);return l=me("upload/v1beta/files",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>{const p=iP(m),v=new SD;return Object.assign(v,p),v})}}async get(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=oP(e);return l=me("files/{file}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=sP(e);return l=me("files/{file}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const p=rP(m),v=new AD;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ef(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function fP(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>RP(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function dP(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function hP(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&g(e,["response"],c);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function pP(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=f(n,["audioTimestamp"]);s!=null&&g(e,["audioTimestamp"],s);const o=f(n,["candidateCount"]);o!=null&&g(e,["candidateCount"],o);const l=f(n,["enableAffectiveDialog"]);l!=null&&g(e,["enableAffectiveDialog"],l);const c=f(n,["frequencyPenalty"]);c!=null&&g(e,["frequencyPenalty"],c);const d=f(n,["logprobs"]);d!=null&&g(e,["logprobs"],d);const m=f(n,["maxOutputTokens"]);m!=null&&g(e,["maxOutputTokens"],m);const p=f(n,["mediaResolution"]);p!=null&&g(e,["mediaResolution"],p);const v=f(n,["presencePenalty"]);v!=null&&g(e,["presencePenalty"],v);const E=f(n,["responseJsonSchema"]);E!=null&&g(e,["responseJsonSchema"],E);const A=f(n,["responseLogprobs"]);A!=null&&g(e,["responseLogprobs"],A);const b=f(n,["responseMimeType"]);b!=null&&g(e,["responseMimeType"],b);const q=f(n,["responseModalities"]);q!=null&&g(e,["responseModalities"],q);const G=f(n,["responseSchema"]);G!=null&&g(e,["responseSchema"],G);const Q=f(n,["routingConfig"]);Q!=null&&g(e,["routingConfig"],Q);const se=f(n,["seed"]);se!=null&&g(e,["seed"],se);const K=f(n,["speechConfig"]);K!=null&&g(e,["speechConfig"],QA(K));const W=f(n,["stopSequences"]);W!=null&&g(e,["stopSequences"],W);const oe=f(n,["temperature"]);oe!=null&&g(e,["temperature"],oe);const de=f(n,["thinkingConfig"]);de!=null&&g(e,["thinkingConfig"],de);const ce=f(n,["topK"]);ce!=null&&g(e,["topK"],ce);const x=f(n,["topP"]);if(x!=null&&g(e,["topP"],x),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function mP(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function gP(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function yP(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const m=f(n,["maxOutputTokens"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","maxOutputTokens"],m);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","mediaResolution"],p);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],zm(E));const A=f(n,["thinkingConfig"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","thinkingConfig"],A);const b=f(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],b);const q=f(n,["systemInstruction"]);e!==void 0&&q!=null&&g(e,["setup","systemInstruction"],fP(rn(q)));const G=f(n,["tools"]);if(e!==void 0&&G!=null){let ce=Ca(G);Array.isArray(ce)&&(ce=ce.map(x=>bP(Aa(x)))),g(e,["setup","tools"],ce)}const Q=f(n,["sessionResumption"]);e!==void 0&&Q!=null&&g(e,["setup","sessionResumption"],wP(Q));const se=f(n,["inputAudioTranscription"]);e!==void 0&&se!=null&&g(e,["setup","inputAudioTranscription"],se);const K=f(n,["outputAudioTranscription"]);e!==void 0&&K!=null&&g(e,["setup","outputAudioTranscription"],K);const W=f(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&g(e,["setup","realtimeInputConfig"],W);const oe=f(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&g(e,["setup","contextWindowCompression"],oe);const de=f(n,["proactivity"]);return e!==void 0&&de!=null&&g(e,["setup","proactivity"],de),t}function _P(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],pP(s));const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const m=f(n,["maxOutputTokens"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","maxOutputTokens"],m);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","mediaResolution"],p);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],QA(zm(E)));const A=f(n,["thinkingConfig"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","thinkingConfig"],A);const b=f(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],b);const q=f(n,["systemInstruction"]);e!==void 0&&q!=null&&g(e,["setup","systemInstruction"],rn(q));const G=f(n,["tools"]);if(e!==void 0&&G!=null){let ce=Ca(G);Array.isArray(ce)&&(ce=ce.map(x=>NP(Aa(x)))),g(e,["setup","tools"],ce)}const Q=f(n,["sessionResumption"]);e!==void 0&&Q!=null&&g(e,["setup","sessionResumption"],Q);const se=f(n,["inputAudioTranscription"]);e!==void 0&&se!=null&&g(e,["setup","inputAudioTranscription"],se);const K=f(n,["outputAudioTranscription"]);e!==void 0&&K!=null&&g(e,["setup","outputAudioTranscription"],K);const W=f(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&g(e,["setup","realtimeInputConfig"],W);const oe=f(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&g(e,["setup","contextWindowCompression"],oe);const de=f(n,["proactivity"]);return e!==void 0&&de!=null&&g(e,["setup","proactivity"],de),t}function vP(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],Ke(n,s));const o=f(e,["config"]);return o!=null&&g(t,["config"],yP(o,t)),t}function TP(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],Ke(n,s));const o=f(e,["config"]);return o!=null&&g(t,["config"],_P(o,t)),t}function EP(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&g(e,["musicGenerationConfig"],t),e}function SP(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["weightedPrompts"],s)}return e}function AP(n){const e={},t=f(n,["media"]);if(t!=null){let p=VA(t);Array.isArray(p)&&(p=p.map(v=>ef(v))),g(e,["mediaChunks"],p)}const s=f(n,["audio"]);s!=null&&g(e,["audio"],ef(LA(s)));const o=f(n,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const l=f(n,["video"]);l!=null&&g(e,["video"],ef(UA(l)));const c=f(n,["text"]);c!=null&&g(e,["text"],c);const d=f(n,["activityStart"]);d!=null&&g(e,["activityStart"],d);const m=f(n,["activityEnd"]);return m!=null&&g(e,["activityEnd"],m),e}function CP(n){const e={},t=f(n,["media"]);if(t!=null){let p=VA(t);Array.isArray(p)&&(p=p.map(v=>v)),g(e,["mediaChunks"],p)}const s=f(n,["audio"]);s!=null&&g(e,["audio"],LA(s));const o=f(n,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const l=f(n,["video"]);l!=null&&g(e,["video"],UA(l));const c=f(n,["text"]);c!=null&&g(e,["text"],c);const d=f(n,["activityStart"]);d!=null&&g(e,["activityStart"],d);const m=f(n,["activityEnd"]);return m!=null&&g(e,["activityEnd"],m),e}function IP(n){const e={},t=f(n,["setupComplete"]);t!=null&&g(e,["setupComplete"],t);const s=f(n,["serverContent"]);s!=null&&g(e,["serverContent"],s);const o=f(n,["toolCall"]);o!=null&&g(e,["toolCall"],o);const l=f(n,["toolCallCancellation"]);l!=null&&g(e,["toolCallCancellation"],l);const c=f(n,["usageMetadata"]);c!=null&&g(e,["usageMetadata"],MP(c));const d=f(n,["goAway"]);d!=null&&g(e,["goAway"],d);const m=f(n,["sessionResumptionUpdate"]);return m!=null&&g(e,["sessionResumptionUpdate"],m),e}function RP(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const s=f(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],dP(l));const c=f(n,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],ef(d));const m=f(n,["text"]);m!=null&&g(e,["text"],m);const p=f(n,["thought"]);p!=null&&g(e,["thought"],p);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const E=f(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function wP(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function QA(n){const e={},t=f(n,["languageCode"]);t!=null&&g(e,["languageCode"],t);const s=f(n,["voiceConfig"]);if(s!=null&&g(e,["voiceConfig"],s),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function bP(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(v=>v)),g(e,["functionDeclarations"],p)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const o=f(n,["googleMaps"]);o!=null&&g(e,["googleMaps"],mP(o));const l=f(n,["computerUse"]);l!=null&&g(e,["computerUse"],l);const c=f(n,["codeExecution"]);if(c!=null&&g(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleSearch"]);d!=null&&g(e,["googleSearch"],gP(d));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function NP(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>hP(A))),g(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const o=f(n,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const l=f(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],l);const c=f(n,["computerUse"]);c!=null&&g(e,["computerUse"],c);const d=f(n,["codeExecution"]);d!=null&&g(e,["codeExecution"],d);const m=f(n,["enterpriseWebSearch"]);m!=null&&g(e,["enterpriseWebSearch"],m);const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],p);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function MP(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&g(e,["promptTokenCount"],t);const s=f(n,["cachedContentTokenCount"]);s!=null&&g(e,["cachedContentTokenCount"],s);const o=f(n,["candidatesTokenCount"]);o!=null&&g(e,["responseTokenCount"],o);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&g(e,["toolUsePromptTokenCount"],l);const c=f(n,["thoughtsTokenCount"]);c!=null&&g(e,["thoughtsTokenCount"],c);const d=f(n,["totalTokenCount"]);d!=null&&g(e,["totalTokenCount"],d);const m=f(n,["promptTokensDetails"]);if(m!=null){let b=m;Array.isArray(b)&&(b=b.map(q=>q)),g(e,["promptTokensDetails"],b)}const p=f(n,["cacheTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(q=>q)),g(e,["cacheTokensDetails"],b)}const v=f(n,["candidatesTokensDetails"]);if(v!=null){let b=v;Array.isArray(b)&&(b=b.map(q=>q)),g(e,["responseTokensDetails"],b)}const E=f(n,["toolUsePromptTokensDetails"]);if(E!=null){let b=E;Array.isArray(b)&&(b=b.map(q=>q)),g(e,["toolUsePromptTokensDetails"],b)}const A=f(n,["trafficType"]);return A!=null&&g(e,["trafficType"],A),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xP(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function DP(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],PP(s));const o=f(n,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const l=f(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const c=f(n,["avgLogprobs"]);c!=null&&g(e,["avgLogprobs"],c);const d=f(n,["groundingMetadata"]);d!=null&&g(e,["groundingMetadata"],d);const m=f(n,["index"]);m!=null&&g(e,["index"],m);const p=f(n,["logprobsResult"]);p!=null&&g(e,["logprobsResult"],p);const v=f(n,["safetyRatings"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(b=>b)),g(e,["safetyRatings"],A)}const E=f(n,["urlContextMetadata"]);return E!=null&&g(e,["urlContextMetadata"],E),e}function PP(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["citations"],s)}return e}function kP(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["contents"]);if(o!=null){let l=Hn(o);Array.isArray(l)&&(l=l.map(c=>c)),g(t,["contents"],l)}return t}function VP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["tokensInfo"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),g(e,["tokensInfo"],o)}return e}function UP(n){const e={},t=f(n,["values"]);t!=null&&g(e,["values"],t);const s=f(n,["statistics"]);return s!=null&&g(e,["statistics"],LP(s)),e}function LP(n){const e={},t=f(n,["truncated"]);t!=null&&g(e,["truncated"],t);const s=f(n,["token_count"]);return s!=null&&g(e,["tokenCount"],s),e}function Gf(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>zk(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function OP(n){const e={},t=f(n,["controlType"]);t!=null&&g(e,["controlType"],t);const s=f(n,["enableControlImageComputation"]);return s!=null&&g(e,["computeControl"],s),e}function qP(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function BP(n,e){const t={},s=f(n,["systemInstruction"]);e!==void 0&&s!=null&&g(e,["systemInstruction"],rn(s));const o=f(n,["tools"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>jA(d))),g(e,["tools"],c)}const l=f(n,["generationConfig"]);return e!==void 0&&l!=null&&g(e,["generationConfig"],Nk(l)),t}function FP(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["contents"]);if(o!=null){let c=Hn(o);Array.isArray(c)&&(c=c.map(d=>Gf(d))),g(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&qP(l),t}function zP(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["contents"]);if(o!=null){let c=Hn(o);Array.isArray(c)&&(c=c.map(d=>d)),g(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&BP(l,t),t}function GP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);s!=null&&g(e,["totalTokens"],s);const o=f(n,["cachedContentTokenCount"]);return o!=null&&g(e,["cachedContentTokenCount"],o),e}function HP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);return s!=null&&g(e,["totalTokens"],s),e}function JP(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],Ke(n,s)),t}function YP(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],Ke(n,s)),t}function KP(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function QP(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function $P(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&g(e,["parameters","aspectRatio"],c);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const m=f(n,["seed"]);e!==void 0&&m!=null&&g(e,["parameters","seed"],m);const p=f(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&g(e,["parameters","safetySetting"],p);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const A=f(n,["includeRaiReason"]);e!==void 0&&A!=null&&g(e,["parameters","includeRaiReason"],A);const b=f(n,["language"]);e!==void 0&&b!=null&&g(e,["parameters","language"],b);const q=f(n,["outputMimeType"]);e!==void 0&&q!=null&&g(e,["parameters","outputOptions","mimeType"],q);const G=f(n,["outputCompressionQuality"]);e!==void 0&&G!=null&&g(e,["parameters","outputOptions","compressionQuality"],G);const Q=f(n,["addWatermark"]);e!==void 0&&Q!=null&&g(e,["parameters","addWatermark"],Q);const se=f(n,["labels"]);e!==void 0&&se!=null&&g(e,["labels"],se);const K=f(n,["editMode"]);e!==void 0&&K!=null&&g(e,["parameters","editMode"],K);const W=f(n,["baseSteps"]);return e!==void 0&&W!=null&&g(e,["parameters","editConfig","baseSteps"],W),t}function XP(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["referenceImages"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(m=>Qk(m))),g(t,["instances[0]","referenceImages"],d)}const c=f(e,["config"]);return c!=null&&$P(c,t),t}function WP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>Hf(l))),g(e,["generatedImages"],o)}return e}function ZP(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function jP(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["instances[]","task_type"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["instances[]","title"],o);const l=f(n,["outputDimensionality"]);e!==void 0&&l!=null&&g(e,["parameters","outputDimensionality"],l);const c=f(n,["mimeType"]);e!==void 0&&c!=null&&g(e,["instances[]","mimeType"],c);const d=f(n,["autoTruncate"]);return e!==void 0&&d!=null&&g(e,["parameters","autoTruncate"],d),t}function ek(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["contents"]);if(o!=null){let d=qm(n,o);Array.isArray(d)&&(d=d.map(m=>m)),g(t,["requests[]","content"],d)}const l=f(e,["config"]);l!=null&&ZP(l,t);const c=f(e,["model"]);return c!==void 0&&g(t,["requests[]","model"],Ke(n,c)),t}function tk(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["contents"]);if(o!=null){let c=qm(n,o);Array.isArray(c)&&(c=c.map(d=>d)),g(t,["instances[]","content"],c)}const l=f(e,["config"]);return l!=null&&jP(l,t),t}function nk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["embeddings"],l)}const o=f(n,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function ik(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>UP(c))),g(e,["embeddings"],l)}const o=f(n,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function sk(n){const e={},t=f(n,["endpoint"]);t!=null&&g(e,["name"],t);const s=f(n,["deployedModelId"]);return s!=null&&g(e,["deployedModelId"],s),e}function rk(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function ok(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&g(e,["response"],c);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function ak(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],Gf(rn(o)));const l=f(e,["temperature"]);l!=null&&g(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&g(s,["topP"],c);const d=f(e,["topK"]);d!=null&&g(s,["topK"],d);const m=f(e,["candidateCount"]);m!=null&&g(s,["candidateCount"],m);const p=f(e,["maxOutputTokens"]);p!=null&&g(s,["maxOutputTokens"],p);const v=f(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&g(s,["responseLogprobs"],E);const A=f(e,["logprobs"]);A!=null&&g(s,["logprobs"],A);const b=f(e,["presencePenalty"]);b!=null&&g(s,["presencePenalty"],b);const q=f(e,["frequencyPenalty"]);q!=null&&g(s,["frequencyPenalty"],q);const G=f(e,["seed"]);G!=null&&g(s,["seed"],G);const Q=f(e,["responseMimeType"]);Q!=null&&g(s,["responseMimeType"],Q);const se=f(e,["responseSchema"]);se!=null&&g(s,["responseSchema"],Bm(se));const K=f(e,["responseJsonSchema"]);if(K!=null&&g(s,["responseJsonSchema"],K),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const W=f(e,["safetySettings"]);if(t!==void 0&&W!=null){let O=W;Array.isArray(O)&&(O=O.map(D=>$k(D))),g(t,["safetySettings"],O)}const oe=f(e,["tools"]);if(t!==void 0&&oe!=null){let O=Ca(oe);Array.isArray(O)&&(O=O.map(D=>tV(Aa(D)))),g(t,["tools"],O)}const de=f(e,["toolConfig"]);if(t!==void 0&&de!=null&&g(t,["toolConfig"],de),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ce=f(e,["cachedContent"]);t!==void 0&&ce!=null&&g(t,["cachedContent"],ls(n,ce));const x=f(e,["responseModalities"]);x!=null&&g(s,["responseModalities"],x);const w=f(e,["mediaResolution"]);w!=null&&g(s,["mediaResolution"],w);const N=f(e,["speechConfig"]);if(N!=null&&g(s,["speechConfig"],Fm(N)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=f(e,["thinkingConfig"]);P!=null&&g(s,["thinkingConfig"],P);const V=f(e,["imageConfig"]);return V!=null&&g(s,["imageConfig"],V),s}function lk(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],rn(o));const l=f(e,["temperature"]);l!=null&&g(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&g(s,["topP"],c);const d=f(e,["topK"]);d!=null&&g(s,["topK"],d);const m=f(e,["candidateCount"]);m!=null&&g(s,["candidateCount"],m);const p=f(e,["maxOutputTokens"]);p!=null&&g(s,["maxOutputTokens"],p);const v=f(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&g(s,["responseLogprobs"],E);const A=f(e,["logprobs"]);A!=null&&g(s,["logprobs"],A);const b=f(e,["presencePenalty"]);b!=null&&g(s,["presencePenalty"],b);const q=f(e,["frequencyPenalty"]);q!=null&&g(s,["frequencyPenalty"],q);const G=f(e,["seed"]);G!=null&&g(s,["seed"],G);const Q=f(e,["responseMimeType"]);Q!=null&&g(s,["responseMimeType"],Q);const se=f(e,["responseSchema"]);se!=null&&g(s,["responseSchema"],Bm(se));const K=f(e,["responseJsonSchema"]);K!=null&&g(s,["responseJsonSchema"],K);const W=f(e,["routingConfig"]);W!=null&&g(s,["routingConfig"],W);const oe=f(e,["modelSelectionConfig"]);oe!=null&&g(s,["modelConfig"],oe);const de=f(e,["safetySettings"]);if(t!==void 0&&de!=null){let F=de;Array.isArray(F)&&(F=F.map(Z=>Z)),g(t,["safetySettings"],F)}const ce=f(e,["tools"]);if(t!==void 0&&ce!=null){let F=Ca(ce);Array.isArray(F)&&(F=F.map(Z=>jA(Aa(Z)))),g(t,["tools"],F)}const x=f(e,["toolConfig"]);t!==void 0&&x!=null&&g(t,["toolConfig"],x);const w=f(e,["labels"]);t!==void 0&&w!=null&&g(t,["labels"],w);const N=f(e,["cachedContent"]);t!==void 0&&N!=null&&g(t,["cachedContent"],ls(n,N));const P=f(e,["responseModalities"]);P!=null&&g(s,["responseModalities"],P);const V=f(e,["mediaResolution"]);V!=null&&g(s,["mediaResolution"],V);const O=f(e,["speechConfig"]);O!=null&&g(s,["speechConfig"],ZA(Fm(O)));const D=f(e,["audioTimestamp"]);D!=null&&g(s,["audioTimestamp"],D);const st=f(e,["thinkingConfig"]);st!=null&&g(s,["thinkingConfig"],st);const ct=f(e,["imageConfig"]);return ct!=null&&g(s,["imageConfig"],ct),s}function jE(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["contents"]);if(o!=null){let c=Hn(o);Array.isArray(c)&&(c=c.map(d=>Gf(d))),g(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&g(t,["generationConfig"],ak(n,l,t)),t}function e0(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["contents"]);if(o!=null){let c=Hn(o);Array.isArray(c)&&(c=c.map(d=>d)),g(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&g(t,["generationConfig"],lk(n,l,t)),t}function t0(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(p=>DP(p))),g(e,["candidates"],m)}const o=f(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const l=f(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&g(e,["responseId"],c);const d=f(n,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function n0(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(v=>v)),g(e,["candidates"],p)}const o=f(n,["createTime"]);o!=null&&g(e,["createTime"],o);const l=f(n,["modelVersion"]);l!=null&&g(e,["modelVersion"],l);const c=f(n,["promptFeedback"]);c!=null&&g(e,["promptFeedback"],c);const d=f(n,["responseId"]);d!=null&&g(e,["responseId"],d);const m=f(n,["usageMetadata"]);return m!=null&&g(e,["usageMetadata"],m),e}function uk(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const o=f(n,["aspectRatio"]);e!==void 0&&o!=null&&g(e,["parameters","aspectRatio"],o);const l=f(n,["guidanceScale"]);if(e!==void 0&&l!=null&&g(e,["parameters","guidanceScale"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&g(e,["parameters","safetySetting"],c);const d=f(n,["personGeneration"]);e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d);const m=f(n,["includeSafetyAttributes"]);e!==void 0&&m!=null&&g(e,["parameters","includeSafetyAttributes"],m);const p=f(n,["includeRaiReason"]);e!==void 0&&p!=null&&g(e,["parameters","includeRaiReason"],p);const v=f(n,["language"]);e!==void 0&&v!=null&&g(e,["parameters","language"],v);const E=f(n,["outputMimeType"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","mimeType"],E);const A=f(n,["outputCompressionQuality"]);if(e!==void 0&&A!=null&&g(e,["parameters","outputOptions","compressionQuality"],A),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=f(n,["imageSize"]);if(e!==void 0&&b!=null&&g(e,["parameters","sampleImageSize"],b),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function ck(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&g(e,["parameters","aspectRatio"],c);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const m=f(n,["seed"]);e!==void 0&&m!=null&&g(e,["parameters","seed"],m);const p=f(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&g(e,["parameters","safetySetting"],p);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const A=f(n,["includeRaiReason"]);e!==void 0&&A!=null&&g(e,["parameters","includeRaiReason"],A);const b=f(n,["language"]);e!==void 0&&b!=null&&g(e,["parameters","language"],b);const q=f(n,["outputMimeType"]);e!==void 0&&q!=null&&g(e,["parameters","outputOptions","mimeType"],q);const G=f(n,["outputCompressionQuality"]);e!==void 0&&G!=null&&g(e,["parameters","outputOptions","compressionQuality"],G);const Q=f(n,["addWatermark"]);e!==void 0&&Q!=null&&g(e,["parameters","addWatermark"],Q);const se=f(n,["labels"]);e!==void 0&&se!=null&&g(e,["labels"],se);const K=f(n,["imageSize"]);e!==void 0&&K!=null&&g(e,["parameters","sampleImageSize"],K);const W=f(n,["enhancePrompt"]);return e!==void 0&&W!=null&&g(e,["parameters","enhancePrompt"],W),t}function fk(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["config"]);return l!=null&&uk(l,t),t}function dk(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["config"]);return l!=null&&ck(l,t),t}function hk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>Ik(c))),g(e,["generatedImages"],l)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],XA(o)),e}function pk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>Hf(c))),g(e,["generatedImages"],l)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],WA(o)),e}function mk(n,e){const t={},s=f(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=f(n,["durationSeconds"]);if(e!==void 0&&o!=null&&g(e,["parameters","durationSeconds"],o),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&g(e,["parameters","aspectRatio"],l);const c=f(n,["resolution"]);e!==void 0&&c!=null&&g(e,["parameters","resolution"],c);const d=f(n,["personGeneration"]);if(e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=f(n,["negativePrompt"]);e!==void 0&&m!=null&&g(e,["parameters","negativePrompt"],m);const p=f(n,["enhancePrompt"]);if(e!==void 0&&p!=null&&g(e,["parameters","enhancePrompt"],p),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=f(n,["lastFrame"]);e!==void 0&&v!=null&&g(e,["instances[0]","lastFrame"],Jf(v));const E=f(n,["referenceImages"]);if(e!==void 0&&E!=null){let A=E;Array.isArray(A)&&(A=A.map(b=>pV(b))),g(e,["instances[0]","referenceImages"],A)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function gk(n,e){const t={},s=f(n,["numberOfVideos"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&g(e,["parameters","storageUri"],o);const l=f(n,["fps"]);e!==void 0&&l!=null&&g(e,["parameters","fps"],l);const c=f(n,["durationSeconds"]);e!==void 0&&c!=null&&g(e,["parameters","durationSeconds"],c);const d=f(n,["seed"]);e!==void 0&&d!=null&&g(e,["parameters","seed"],d);const m=f(n,["aspectRatio"]);e!==void 0&&m!=null&&g(e,["parameters","aspectRatio"],m);const p=f(n,["resolution"]);e!==void 0&&p!=null&&g(e,["parameters","resolution"],p);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const E=f(n,["pubsubTopic"]);e!==void 0&&E!=null&&g(e,["parameters","pubsubTopic"],E);const A=f(n,["negativePrompt"]);e!==void 0&&A!=null&&g(e,["parameters","negativePrompt"],A);const b=f(n,["enhancePrompt"]);e!==void 0&&b!=null&&g(e,["parameters","enhancePrompt"],b);const q=f(n,["generateAudio"]);e!==void 0&&q!=null&&g(e,["parameters","generateAudio"],q);const G=f(n,["lastFrame"]);e!==void 0&&G!=null&&g(e,["instances[0]","lastFrame"],ei(G));const Q=f(n,["referenceImages"]);if(e!==void 0&&Q!=null){let W=Q;Array.isArray(W)&&(W=W.map(oe=>mV(oe))),g(e,["instances[0]","referenceImages"],W)}const se=f(n,["mask"]);e!==void 0&&se!=null&&g(e,["instances[0]","mask"],hV(se));const K=f(n,["compressionQuality"]);return e!==void 0&&K!=null&&g(e,["parameters","compressionQuality"],K),t}function yk(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&g(e,["response"],Ek(c)),e}function _k(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const c=f(n,["response"]);return c!=null&&g(e,["response"],Sk(c)),e}function vk(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["image"]);l!=null&&g(t,["instances[0]","image"],Jf(l));const c=f(e,["video"]);c!=null&&g(t,["instances[0]","video"],eC(c));const d=f(e,["source"]);d!=null&&Ak(d,t);const m=f(e,["config"]);return m!=null&&mk(m,t),t}function Tk(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["image"]);l!=null&&g(t,["instances[0]","image"],ei(l));const c=f(e,["video"]);c!=null&&g(t,["instances[0]","video"],tC(c));const d=f(e,["source"]);d!=null&&Ck(d,t);const m=f(e,["config"]);return m!=null&&gk(m,t),t}function Ek(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>wk(c))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function Sk(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>bk(c))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function Ak(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],Jf(o));const l=f(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],eC(l)),t}function Ck(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],ei(o));const l=f(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],tC(l)),t}function Ik(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],kk(t));const s=f(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const o=f(n,["_self"]);return o!=null&&g(e,["safetyAttributes"],XA(o)),e}function Hf(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],$A(t));const s=f(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const o=f(n,["_self"]);o!=null&&g(e,["safetyAttributes"],WA(o));const l=f(n,["prompt"]);return l!=null&&g(e,["enhancedPrompt"],l),e}function Rk(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["mask"],$A(t));const s=f(n,["labels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),g(e,["labels"],o)}return e}function wk(n){const e={},t=f(n,["video"]);return t!=null&&g(e,["video"],fV(t)),e}function bk(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],dV(t)),e}function Nk(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=f(n,["audioTimestamp"]);s!=null&&g(e,["audioTimestamp"],s);const o=f(n,["candidateCount"]);o!=null&&g(e,["candidateCount"],o);const l=f(n,["enableAffectiveDialog"]);l!=null&&g(e,["enableAffectiveDialog"],l);const c=f(n,["frequencyPenalty"]);c!=null&&g(e,["frequencyPenalty"],c);const d=f(n,["logprobs"]);d!=null&&g(e,["logprobs"],d);const m=f(n,["maxOutputTokens"]);m!=null&&g(e,["maxOutputTokens"],m);const p=f(n,["mediaResolution"]);p!=null&&g(e,["mediaResolution"],p);const v=f(n,["presencePenalty"]);v!=null&&g(e,["presencePenalty"],v);const E=f(n,["responseJsonSchema"]);E!=null&&g(e,["responseJsonSchema"],E);const A=f(n,["responseLogprobs"]);A!=null&&g(e,["responseLogprobs"],A);const b=f(n,["responseMimeType"]);b!=null&&g(e,["responseMimeType"],b);const q=f(n,["responseModalities"]);q!=null&&g(e,["responseModalities"],q);const G=f(n,["responseSchema"]);G!=null&&g(e,["responseSchema"],G);const Q=f(n,["routingConfig"]);Q!=null&&g(e,["routingConfig"],Q);const se=f(n,["seed"]);se!=null&&g(e,["seed"],se);const K=f(n,["speechConfig"]);K!=null&&g(e,["speechConfig"],ZA(K));const W=f(n,["stopSequences"]);W!=null&&g(e,["stopSequences"],W);const oe=f(n,["temperature"]);oe!=null&&g(e,["temperature"],oe);const de=f(n,["thinkingConfig"]);de!=null&&g(e,["thinkingConfig"],de);const ce=f(n,["topK"]);ce!=null&&g(e,["topK"],ce);const x=f(n,["topP"]);if(x!=null&&g(e,["topP"],x),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Mk(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],Ke(n,s)),t}function xk(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],Ke(n,s)),t}function Dk(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function Pk(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function kk(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&g(e,["imageBytes"],pr(t));const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function $A(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["imageBytes"],pr(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function Jf(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&g(e,["bytesBase64Encoded"],pr(t));const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function ei(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["imageBytes"]);s!=null&&g(e,["bytesBase64Encoded"],pr(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function Vk(n,e,t){const s={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&g(t,["_query","pageSize"],o);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&g(t,["_query","filter"],c);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&g(t,["_url","models_url"],FA(n,d)),s}function Uk(n,e,t){const s={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&g(t,["_query","pageSize"],o);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&g(t,["_query","filter"],c);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&g(t,["_url","models_url"],FA(n,d)),s}function Lk(n,e){const t={},s=f(e,["config"]);return s!=null&&Vk(n,s,t),t}function Ok(n,e){const t={},s=f(e,["config"]);return s!=null&&Uk(n,s,t),t}function qk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["_self"]);if(o!=null){let l=zA(o);Array.isArray(l)&&(l=l.map(c=>zp(c))),g(e,["models"],l)}return e}function Bk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["_self"]);if(o!=null){let l=zA(o);Array.isArray(l)&&(l=l.map(c=>Gp(c))),g(e,["models"],l)}return e}function Fk(n){const e={},t=f(n,["maskMode"]);t!=null&&g(e,["maskMode"],t);const s=f(n,["segmentationClasses"]);s!=null&&g(e,["maskClasses"],s);const o=f(n,["maskDilation"]);return o!=null&&g(e,["dilation"],o),e}function zp(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const o=f(n,["description"]);o!=null&&g(e,["description"],o);const l=f(n,["version"]);l!=null&&g(e,["version"],l);const c=f(n,["_self"]);c!=null&&g(e,["tunedModelInfo"],nV(c));const d=f(n,["inputTokenLimit"]);d!=null&&g(e,["inputTokenLimit"],d);const m=f(n,["outputTokenLimit"]);m!=null&&g(e,["outputTokenLimit"],m);const p=f(n,["supportedGenerationMethods"]);return p!=null&&g(e,["supportedActions"],p),e}function Gp(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const o=f(n,["description"]);o!=null&&g(e,["description"],o);const l=f(n,["versionId"]);l!=null&&g(e,["version"],l);const c=f(n,["deployedModels"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(A=>sk(A))),g(e,["endpoints"],E)}const d=f(n,["labels"]);d!=null&&g(e,["labels"],d);const m=f(n,["_self"]);m!=null&&g(e,["tunedModelInfo"],iV(m));const p=f(n,["defaultCheckpointId"]);p!=null&&g(e,["defaultCheckpointId"],p);const v=f(n,["checkpoints"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(A=>A)),g(e,["checkpoints"],E)}return e}function zk(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const s=f(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],rk(l));const c=f(n,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],xP(d));const m=f(n,["text"]);m!=null&&g(e,["text"],m);const p=f(n,["thought"]);p!=null&&g(e,["thought"],p);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const E=f(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function Gk(n){const e={},t=f(n,["productImage"]);return t!=null&&g(e,["image"],ei(t)),e}function Hk(n,e){const t={},s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const o=f(n,["baseSteps"]);e!==void 0&&o!=null&&g(e,["parameters","editConfig","baseSteps"],o);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&g(e,["parameters","storageUri"],l);const c=f(n,["seed"]);e!==void 0&&c!=null&&g(e,["parameters","seed"],c);const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&g(e,["parameters","safetySetting"],d);const m=f(n,["personGeneration"]);e!==void 0&&m!=null&&g(e,["parameters","personGeneration"],m);const p=f(n,["addWatermark"]);e!==void 0&&p!=null&&g(e,["parameters","addWatermark"],p);const v=f(n,["outputMimeType"]);e!==void 0&&v!=null&&g(e,["parameters","outputOptions","mimeType"],v);const E=f(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","compressionQuality"],E);const A=f(n,["enhancePrompt"]);e!==void 0&&A!=null&&g(e,["parameters","enhancePrompt"],A);const b=f(n,["labels"]);return e!==void 0&&b!=null&&g(e,["labels"],b),t}function Jk(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["source"]);o!=null&&Kk(o,t);const l=f(e,["config"]);return l!=null&&Hk(l,t),t}function Yk(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>Hf(o))),g(e,["generatedImages"],s)}return e}function Kk(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=f(n,["personImage"]);e!==void 0&&o!=null&&g(e,["instances[0]","personImage","image"],ei(o));const l=f(n,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>Gk(d))),g(e,["instances[0]","productImages"],c)}return t}function Qk(n){const e={},t=f(n,["referenceImage"]);t!=null&&g(e,["referenceImage"],ei(t));const s=f(n,["referenceId"]);s!=null&&g(e,["referenceId"],s);const o=f(n,["referenceType"]);o!=null&&g(e,["referenceType"],o);const l=f(n,["maskImageConfig"]);l!=null&&g(e,["maskImageConfig"],Fk(l));const c=f(n,["controlImageConfig"]);c!=null&&g(e,["controlImageConfig"],OP(c));const d=f(n,["styleImageConfig"]);d!=null&&g(e,["styleImageConfig"],d);const m=f(n,["subjectImageConfig"]);return m!=null&&g(e,["subjectImageConfig"],m),e}function XA(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const o=f(n,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function WA(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const o=f(n,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function $k(n){const e={},t=f(n,["category"]);if(t!=null&&g(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function Xk(n){const e={},t=f(n,["image"]);return t!=null&&g(e,["image"],ei(t)),e}function Wk(n,e){const t={},s=f(n,["mode"]);e!==void 0&&s!=null&&g(e,["parameters","mode"],s);const o=f(n,["maxPredictions"]);e!==void 0&&o!=null&&g(e,["parameters","maxPredictions"],o);const l=f(n,["confidenceThreshold"]);e!==void 0&&l!=null&&g(e,["parameters","confidenceThreshold"],l);const c=f(n,["maskDilation"]);e!==void 0&&c!=null&&g(e,["parameters","maskDilation"],c);const d=f(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&g(e,["parameters","binaryColorThreshold"],d);const m=f(n,["labels"]);return e!==void 0&&m!=null&&g(e,["labels"],m),t}function Zk(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["source"]);o!=null&&eV(o,t);const l=f(e,["config"]);return l!=null&&Wk(l,t),t}function jk(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>Rk(o))),g(e,["generatedMasks"],s)}return e}function eV(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],ei(o));const l=f(n,["scribbleImage"]);return e!==void 0&&l!=null&&g(e,["instances[0]","scribble"],Xk(l)),t}function ZA(n){const e={},t=f(n,["languageCode"]);t!=null&&g(e,["languageCode"],t);const s=f(n,["voiceConfig"]);if(s!=null&&g(e,["voiceConfig"],s),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function tV(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(v=>v)),g(e,["functionDeclarations"],p)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const o=f(n,["googleMaps"]);o!=null&&g(e,["googleMaps"],Dk(o));const l=f(n,["computerUse"]);l!=null&&g(e,["computerUse"],l);const c=f(n,["codeExecution"]);if(c!=null&&g(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleSearch"]);d!=null&&g(e,["googleSearch"],Pk(d));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function jA(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>ok(A))),g(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const o=f(n,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const l=f(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],l);const c=f(n,["computerUse"]);c!=null&&g(e,["computerUse"],c);const d=f(n,["codeExecution"]);d!=null&&g(e,["codeExecution"],d);const m=f(n,["enterpriseWebSearch"]);m!=null&&g(e,["enterpriseWebSearch"],m);const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],p);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function nV(n){const e={},t=f(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&g(e,["createTime"],s);const o=f(n,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function iV(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&g(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&g(e,["createTime"],s);const o=f(n,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function sV(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const o=f(n,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function rV(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const o=f(n,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function oV(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","name"],Ke(n,s));const o=f(e,["config"]);return o!=null&&sV(o,t),t}function aV(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["config"]);return o!=null&&rV(o,t),t}function lV(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const o=f(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&g(e,["parameters","safetySetting"],o);const l=f(n,["personGeneration"]);e!==void 0&&l!=null&&g(e,["parameters","personGeneration"],l);const c=f(n,["includeRaiReason"]);e!==void 0&&c!=null&&g(e,["parameters","includeRaiReason"],c);const d=f(n,["outputMimeType"]);e!==void 0&&d!=null&&g(e,["parameters","outputOptions","mimeType"],d);const m=f(n,["outputCompressionQuality"]);e!==void 0&&m!=null&&g(e,["parameters","outputOptions","compressionQuality"],m);const p=f(n,["enhanceInputImage"]);e!==void 0&&p!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],p);const v=f(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const E=f(n,["labels"]);e!==void 0&&E!=null&&g(e,["labels"],E);const A=f(n,["numberOfImages"]);e!==void 0&&A!=null&&g(e,["parameters","sampleCount"],A);const b=f(n,["mode"]);return e!==void 0&&b!=null&&g(e,["parameters","mode"],b),t}function uV(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=f(e,["image"]);o!=null&&g(t,["instances[0]","image"],ei(o));const l=f(e,["upscaleFactor"]);l!=null&&g(t,["parameters","upscaleConfig","upscaleFactor"],l);const c=f(e,["config"]);return c!=null&&lV(c,t),t}function cV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>Hf(l))),g(e,["generatedImages"],o)}return e}function fV(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&g(e,["videoBytes"],pr(s));const o=f(n,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function dV(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],pr(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function hV(n){const e={},t=f(n,["image"]);t!=null&&g(e,["_self"],ei(t));const s=f(n,["maskMode"]);return s!=null&&g(e,["maskMode"],s),e}function pV(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],Jf(t));const s=f(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function mV(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],ei(t));const s=f(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function eC(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const s=f(n,["videoBytes"]);s!=null&&g(e,["encodedVideo"],pr(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["encoding"],o),e}function tC(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["videoBytes"]);s!=null&&g(e,["bytesBase64Encoded"],pr(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gV="Content-Type",yV="X-Server-Timeout",_V="User-Agent",Hp="x-goog-api-client",vV="1.28.0",TV=`google-genai-sdk/${vV}`,EV="v1beta1",SV="v1beta",i0=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class AV{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:EV,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:SV,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const o=[this.getRequestUrlInternal(t)];return s&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[c,d]of Object.entries(e.queryParams))o.searchParams.append(c,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,o.toString(),e.abortSignal),this.unaryApiCall(o,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(t))typeof l=="object"?s[o]=Object.assign(Object.assign({},s[o]),l):l!==void 0&&(s[o]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,o.toString(),e.abortSignal),this.streamApiCall(o,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,o){if(t&&t.timeout||o){const l=new AbortController,c=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>l.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}o&&o.addEventListener("abort",()=>{l.abort()}),e.signal=c}return t&&t.extraBody!==null&&CV(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await s0(o),new qp(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await s0(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return aa(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let c="";for(;;){const{done:d,value:m}=yield lt(o.read());if(d){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=l.decode(m,{stream:!0});try{const E=JSON.parse(p);if("error"in E){const A=JSON.parse(JSON.stringify(E.error)),b=A.status,q=A.code,G=`got status: ${b}. ${JSON.stringify(E)}`;if(q>=400&&q<600)throw new zf({message:G,status:q})}}catch(E){if(E.name==="ApiError")throw E}c+=p;let v=c.match(i0);for(;v;){const E=v[1];try{const A=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield lt(new qp(A)),c=c.slice(v[0].length),v=c.match(i0)}catch(A){throw new Error(`exception parsing stream chunk ${E}. ${A}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=TV+" "+this.clientOptions.userAgentExtra;return e[_V]=t,e[Hp]=t,e[gV]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[o,l]of Object.entries(e.headers))s.append(o,l);e.timeout&&e.timeout>0&&s.append(yV,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}async uploadFile(e,t){var s,o;const l={};t!=null&&(l.mimeType=t.mimeType,l.name=t.name,l.displayName=t.displayName),l.name&&!l.name.startsWith("files/")&&(l.name=`files/${l.name}`);const c=this.clientOptions.uploader,d=await c.stat(e);l.sizeBytes=String(d.size);const m=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:d.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");l.mimeType=m;let p="";typeof e=="string"&&(p=e.replace(/[/\\]+$/,""),p=(o=p.split(/[/\\]/).pop())!==null&&o!==void 0?o:"");const v=await this.fetchUploadUrl(l,p,t);return c.upload(e,v,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s){var o;let l={};s!=null&&s.httpOptions?l=s.httpOptions:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`},t?{"X-Goog-Upload-File-Name":t}:{})};const c={file:e},d=await this.request({path:me("upload/v1beta/files",c._url),body:JSON.stringify(c),httpMethod:"POST",httpOptions:l});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const m=(o=d==null?void 0:d.headers)===null||o===void 0?void 0:o["x-goog-upload-url"];if(m===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return m}}async function s0(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(s);throw t>=400&&t<600?new zf({message:o,status:t}):new Error(o)}}function CV(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,c){const d=Object.assign({},l);for(const m in c)if(Object.prototype.hasOwnProperty.call(c,m)){const p=c[m],v=d[m];p&&typeof p=="object"&&!Array.isArray(p)&&v&&typeof v=="object"&&!Array.isArray(v)?d[m]=s(v,p):(v&&p&&typeof v!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof v}, New type: ${typeof p}. Overwriting.`),d[m]=p)}return d}const o=s(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IV="mcp_used/unknown";let RV=!1;function nC(n){for(const e of n)if(wV(e)||typeof e=="object"&&"inputSchema"in e)return!0;return RV}function iC(n){var e;const t=(e=n[Hp])!==null&&e!==void 0?e:"";n[Hp]=(t+` ${IV}`).trimStart()}function wV(n){return n!==null&&typeof n=="object"&&n instanceof Gm}function bV(n,e=100){return aa(this,arguments,function*(){let s,o=0;for(;o<e;){const l=yield lt(n.listTools({cursor:s}));for(const c of l.tools)yield yield lt(c),o++;if(!l.nextCursor)break;s=l.nextCursor}})}class Gm{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Gm(e,t)}async initialize(){var e,t,s,o;if(this.mcpTools.length>0)return;const l={},c=[];for(const v of this.mcpClients)try{for(var d=!0,m=(t=void 0,Fl(bV(v))),p;p=await m.next(),e=p.done,!e;d=!0){o=p.value,d=!1;const E=o;c.push(E);const A=E.name;if(l[A])throw new Error(`Duplicate function name ${A} found in MCP tools. Please ensure function names are unique.`);l[A]=v}}catch(E){t={error:E}}finally{try{!d&&!e&&(s=m.return)&&await s.call(m)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),PD(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await o.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function NV(n,e,t){const s=new ID;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(s,o),e(s)}class MV{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=PV(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),m=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let p=()=>{};const v=new Promise(W=>{p=W}),E=e.callbacks,A=function(){p({})},b=this.apiClient,q={onopen:A,onmessage:W=>{NV(b,E.onmessage,W)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(W){},onclose:(s=E==null?void 0:E.onclose)!==null&&s!==void 0?s:function(W){}},G=this.webSocketFactory.create(m,DV(c),q);G.connect(),await v;const K={setup:{model:Ke(this.apiClient,e.model)}};return G.send(JSON.stringify(K)),new xV(G,this.apiClient)}}class xV{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=SP(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=EP(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(ta.PLAY)}pause(){this.sendPlaybackControl(ta.PAUSE)}stop(){this.sendPlaybackControl(ta.STOP)}resetContext(){this.sendPlaybackControl(ta.RESET_CONTEXT)}close(){this.conn.close()}}function DV(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function PV(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kV="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function VV(n,e,t){const s=new CD;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const l=JSON.parse(o);if(n.isVertexAI()){const c=IP(l);Object.assign(s,c)}else Object.assign(s,l);e(s)}class UV{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new MV(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,o,l,c,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&nC(e.config.tools)&&iC(E);const A=BV(E);if(this.apiClient.isVertexAI())v=`${m}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(A,v);else{const N=this.apiClient.getApiKey();let P="BidiGenerateContent",V="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",V="access_token"),v=`${m}/ws/google.ai.generativelanguage.${p}.GenerativeService.${P}?${V}=${N}`}let b=()=>{};const q=new Promise(N=>{b=N}),G=e.callbacks,Q=function(){var N;(N=G==null?void 0:G.onopen)===null||N===void 0||N.call(G),b({})},se=this.apiClient,K={onopen:Q,onmessage:N=>{VV(se,G.onmessage,N)},onerror:(t=G==null?void 0:G.onerror)!==null&&t!==void 0?t:function(N){},onclose:(s=G==null?void 0:G.onclose)!==null&&s!==void 0?s:function(N){}},W=this.webSocketFactory.create(v,qV(A),K);W.connect(),await q;let oe=Ke(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&oe.startsWith("publishers/")){const N=this.apiClient.getProject(),P=this.apiClient.getLocation();oe=`projects/${N}/locations/${P}/`+oe}let de={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Sf.AUDIO]}:e.config.responseModalities=[Sf.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ce=(d=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[],x=[];for(const N of ce)if(this.isCallableTool(N)){const P=N;x.push(await P.tool())}else x.push(N);x.length>0&&(e.config.tools=x);const w={model:oe,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?de=TP(this.apiClient,w):de=vP(this.apiClient,w),delete de.config,W.send(JSON.stringify(de)),new OV(W,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const LV={turnComplete:!0};class OV{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=Hn(t.turns),e.isVertexAI()||(s=s.map(o=>Gf(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(kV)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},LV),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:CP(e)}:t={realtimeInput:AP(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function qV(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function BV(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const r0=10;function o0(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const c of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(la(c)){o=!0;break}if(!o)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function la(n){return"callTool"in n&&typeof n.callTool=="function"}function FV(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>la(o)))!==null&&s!==void 0?s:!1}function zV(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>!la(o)))!==null&&s!==void 0?s:!1}function a0(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GV extends ro{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,o,l,c,d;const m=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!FV(t)||o0(t.config))return await this.generateContentInternal(m);if(zV(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let p,v;const E=Hn(m.contents),A=(l=(o=(s=m.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:r0;let b=0;for(;b<A&&(p=await this.generateContentInternal(m),!(!p.functionCalls||p.functionCalls.length===0));){const q=p.candidates[0].content,G=[];for(const Q of(d=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[])if(la(Q)){const K=await Q.callTool(p.functionCalls);G.push(...K)}b++,v={role:"user",parts:G},m.contents=Hn(m.contents),m.contents.push(q),m.contents.push(v),a0(m.config)&&(E.push(q),E.push(v))}return a0(m.config)&&(p.automaticFunctionCallingHistory=E),p},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),o0(t.config)){const s=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(s)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var o;let l;const c=[];if(s!=null&&s.generatedImages)for(const m of s.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((o=m==null?void 0:m.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=m==null?void 0:m.safetyAttributes:c.push(m);let d;return l?d={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:d={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},d}),this.list=async t=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new lu(eo.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(c),c)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var s,o,l,c,d,m;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((c=(l=t.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((m=(d=t.source)===null||d===void 0?void 0:d.video)===null||m===void 0)&&m.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,o;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const c=await Promise.all(l.map(async m=>la(m)?await m.tool():m)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(d.config.tools=c,e.config&&e.config.tools&&nC(e.config.tools)){const m=(o=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&o!==void 0?o:{};let p=Object.assign({},m);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),iC(p),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return d}async initAfcToolsMap(e){var t,s,o;const l=new Map;for(const c of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(la(c)){const d=c,m=await d.tool();for(const p of(o=m.functionDeclarations)!==null&&o!==void 0?o:[]){if(!p.name)throw new Error("Function declaration name is required.");if(l.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);l.set(p.name,d)}}return l}async processAfcStream(e){var t,s,o;const l=(o=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&o!==void 0?o:r0;let c=!1,d=0;const m=await this.initAfcToolsMap(e);return(function(p,v,E){var A,b;return aa(this,arguments,function*(){for(var q,G,Q,se;d<l;){c&&(d++,c=!1);const de=yield lt(p.processParamsMaybeAddMcpUsage(E)),ce=yield lt(p.generateContentStreamInternal(de)),x=[],w=[];try{for(var K=!0,W=(G=void 0,Fl(ce)),oe;oe=yield lt(W.next()),q=oe.done,!q;K=!0){se=oe.value,K=!1;const N=se;if(yield yield lt(N),N.candidates&&(!((A=N.candidates[0])===null||A===void 0)&&A.content)){w.push(N.candidates[0].content);for(const P of(b=N.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(d<l&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(P.functionCall.name)){const V=yield lt(v.get(P.functionCall.name).callTool([P.functionCall]));x.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(N){G={error:N}}finally{try{!K&&!q&&(Q=W.return)&&(yield lt(Q.call(W)))}finally{if(G)throw G.error}}if(x.length>0){c=!0;const N=new Nl;N.candidates=[{content:{role:"user",parts:x}}],yield yield lt(N);const P=[];P.push(...w),P.push({role:"user",parts:x});const V=Hn(E.contents).concat(P);E.contents=V}else break}})})(this,m,e)}async generateContentInternal(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const p=e0(this.apiClient,e);return d=me("{model}:generateContent",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=n0(v),A=new Nl;return Object.assign(A,E),A})}else{const p=jE(this.apiClient,e);return d=me("{model}:generateContent",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=t0(v),A=new Nl;return Object.assign(A,E),A})}}async generateContentStreamInternal(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const p=e0(this.apiClient,e);return d=me("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(E){return aa(this,arguments,function*(){var A,b,q,G;try{for(var Q=!0,se=Fl(E),K;K=yield lt(se.next()),A=K.done,!A;Q=!0){G=K.value,Q=!1;const W=G,oe=n0(yield lt(W.json()));oe.sdkHttpResponse={headers:W.headers};const de=new Nl;Object.assign(de,oe),yield yield lt(de)}}catch(W){b={error:W}}finally{try{!Q&&!A&&(q=se.return)&&(yield lt(q.call(se)))}finally{if(b)throw b.error}}})})}else{const p=jE(this.apiClient,e);return d=me("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(E){return aa(this,arguments,function*(){var A,b,q,G;try{for(var Q=!0,se=Fl(E),K;K=yield lt(se.next()),A=K.done,!A;Q=!0){G=K.value,Q=!1;const W=G,oe=t0(yield lt(W.json()));oe.sdkHttpResponse={headers:W.headers};const de=new Nl;Object.assign(de,oe),yield yield lt(de)}}catch(W){b={error:W}}finally{try{!Q&&!A&&(q=se.return)&&(yield lt(q.call(se)))}finally{if(b)throw b.error}}})})}}async embedContent(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const p=tk(this.apiClient,e);return d=me("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=ik(v),A=new LE;return Object.assign(A,E),A})}else{const p=ek(this.apiClient,e);return d=me("{model}:batchEmbedContents",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=nk(v),A=new LE;return Object.assign(A,E),A})}}async generateImagesInternal(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const p=dk(this.apiClient,e);return d=me("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=pk(v),A=new OE;return Object.assign(A,E),A})}else{const p=fk(this.apiClient,e);return d=me("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=hk(v),A=new OE;return Object.assign(A,E),A})}}async editImageInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=XP(this.apiClient,e);return l=me("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const p=WP(m),v=new gD;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=uV(this.apiClient,e);return l=me("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const p=cV(m),v=new yD;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Jk(this.apiClient,e);return l=me("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>{const p=Yk(m),v=new _D;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Zk(this.apiClient,e);return l=me("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>{const p=jk(m),v=new vD;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const p=xk(this.apiClient,e);return d=me("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Gp(v))}else{const p=Mk(this.apiClient,e);return d=me("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>zp(v))}}async listInternal(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const p=Ok(this.apiClient,e);return d=me("{models_url}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=Bk(v),A=new qE;return Object.assign(A,E),A})}else{const p=Lk(this.apiClient,e);return d=me("{models_url}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=qk(v),A=new qE;return Object.assign(A,E),A})}}async update(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const p=aV(this.apiClient,e);return d=me("{model}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Gp(v))}else{const p=oV(this.apiClient,e);return d=me("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>zp(v))}}async delete(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const p=YP(this.apiClient,e);return d=me("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=QP(v),A=new BE;return Object.assign(A,E),A})}else{const p=JP(this.apiClient,e);return d=me("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=KP(v),A=new BE;return Object.assign(A,E),A})}}async countTokens(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const p=zP(this.apiClient,e);return d=me("{model}:countTokens",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=HP(v),A=new FE;return Object.assign(A,E),A})}else{const p=FP(this.apiClient,e);return d=me("{model}:countTokens",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=GP(v),A=new FE;return Object.assign(A,E),A})}}async computeTokens(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=kP(this.apiClient,e);return l=me("{model}:computeTokens",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const p=VP(m),v=new TD;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const p=Tk(this.apiClient,e);return d=me("{model}:predictLongRunning",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>{const E=_k(v),A=new Af;return Object.assign(A,E),A})}else{const p=vk(this.apiClient,e);return d=me("{model}:predictLongRunning",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>{const E=yk(v),A=new Af;return Object.assign(A,E),A})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HV extends ro{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const p=hD(e);return d=me("{operationName}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c}else{const p=dD(e);return d=me("{operationName}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=rD(e);return l=me("{resourceName}:fetchPredictOperation",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JV(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function YV(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>eU(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function KV(n,e,t){const s={},o=f(e,["expireTime"]);t!==void 0&&o!=null&&g(t,["expireTime"],o);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&g(t,["newSessionExpireTime"],l);const c=f(e,["uses"]);t!==void 0&&c!=null&&g(t,["uses"],c);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&g(t,["bidiGenerateContentSetup"],jV(n,d));const m=f(e,["lockAdditionalFields"]);return t!==void 0&&m!=null&&g(t,["fieldMask"],m),s}function QV(n,e){const t={},s=f(e,["config"]);return s!=null&&g(t,["config"],KV(n,s,t)),t}function $V(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function XV(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function WV(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function ZV(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const m=f(n,["maxOutputTokens"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","maxOutputTokens"],m);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","mediaResolution"],p);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],zm(E));const A=f(n,["thinkingConfig"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","thinkingConfig"],A);const b=f(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],b);const q=f(n,["systemInstruction"]);e!==void 0&&q!=null&&g(e,["setup","systemInstruction"],YV(rn(q)));const G=f(n,["tools"]);if(e!==void 0&&G!=null){let ce=Ca(G);Array.isArray(ce)&&(ce=ce.map(x=>nU(Aa(x)))),g(e,["setup","tools"],ce)}const Q=f(n,["sessionResumption"]);e!==void 0&&Q!=null&&g(e,["setup","sessionResumption"],tU(Q));const se=f(n,["inputAudioTranscription"]);e!==void 0&&se!=null&&g(e,["setup","inputAudioTranscription"],se);const K=f(n,["outputAudioTranscription"]);e!==void 0&&K!=null&&g(e,["setup","outputAudioTranscription"],K);const W=f(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&g(e,["setup","realtimeInputConfig"],W);const oe=f(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&g(e,["setup","contextWindowCompression"],oe);const de=f(n,["proactivity"]);return e!==void 0&&de!=null&&g(e,["setup","proactivity"],de),t}function jV(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],Ke(n,s));const o=f(e,["config"]);return o!=null&&g(t,["config"],ZV(o,t)),t}function eU(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const s=f(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],$V(l));const c=f(n,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],JV(d));const m=f(n,["text"]);m!=null&&g(e,["text"],m);const p=f(n,["thought"]);p!=null&&g(e,["thought"],p);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const E=f(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function tU(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function nU(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(v=>v)),g(e,["functionDeclarations"],p)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const o=f(n,["googleMaps"]);o!=null&&g(e,["googleMaps"],XV(o));const l=f(n,["computerUse"]);l!=null&&g(e,["computerUse"],l);const c=f(n,["codeExecution"]);if(c!=null&&g(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleSearch"]);d!=null&&g(e,["googleSearch"],WV(d));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iU(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const o=Object.keys(s).map(l=>`${t}.${l}`);e.push(...o)}else e.push(t)}return e.join(",")}function sU(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const l=iU(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(p=>c.includes(p)?`generationConfig.${p}`:p));const m=[];l&&m.push(l),d.length>0&&m.push(...d),m.length>0?n.fieldMask=m.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class rU extends ro{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=QV(this.apiClient,e);l=me("auth_tokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const m=sU(d,e.config);return o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oU(n,e){const t={},s=f(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function aU(n,e){const t={},s=f(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function lU(n,e,t){const s={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=f(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&g(e,["displayName"],o),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(n,["epochCount"]);e!==void 0&&l!=null&&g(e,["tuningTask","hyperparameters","epochCount"],l);const c=f(n,["learningRateMultiplier"]);if(c!=null&&g(s,["tuningTask","hyperparameters","learningRateMultiplier"],c),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&g(e,["tuningTask","hyperparameters","batchSize"],d);const m=f(n,["learningRate"]);if(e!==void 0&&m!=null&&g(e,["tuningTask","hyperparameters","learningRate"],m),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function uU(n,e,t){const s={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const b=f(n,["validationDataset"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec"],l0(b))}else if(o==="PREFERENCE_TUNING"){const b=f(n,["validationDataset"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec"],l0(b))}const l=f(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&g(e,["tunedModelDisplayName"],l);const c=f(n,["description"]);e!==void 0&&c!=null&&g(e,["description"],c);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const b=f(n,["epochCount"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],b)}else if(d==="PREFERENCE_TUNING"){const b=f(n,["epochCount"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],b)}let m=f(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const b=f(n,["learningRateMultiplier"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],b)}else if(m==="PREFERENCE_TUNING"){const b=f(n,["learningRateMultiplier"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],b)}let p=f(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const b=f(n,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],b)}else if(p==="PREFERENCE_TUNING"){const b=f(n,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],b)}let v=f(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const b=f(n,["adapterSize"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],b)}else if(v==="PREFERENCE_TUNING"){const b=f(n,["adapterSize"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],b)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=f(n,["labels"]);e!==void 0&&E!=null&&g(e,["labels"],E);const A=f(n,["beta"]);return e!==void 0&&A!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],A),s}function cU(n,e){const t={},s=f(n,["baseModel"]);s!=null&&g(t,["baseModel"],s);const o=f(n,["preTunedModel"]);o!=null&&g(t,["preTunedModel"],o);const l=f(n,["trainingDataset"]);l!=null&&EU(l);const c=f(n,["config"]);return c!=null&&lU(c,t),t}function fU(n,e){const t={},s=f(n,["baseModel"]);s!=null&&g(t,["baseModel"],s);const o=f(n,["preTunedModel"]);o!=null&&g(t,["preTunedModel"],o);const l=f(n,["trainingDataset"]);l!=null&&SU(l,t,e);const c=f(n,["config"]);return c!=null&&uU(c,t,e),t}function dU(n,e){const t={},s=f(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function hU(n,e){const t={},s=f(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function pU(n,e,t){const s={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&g(e,["_query","pageToken"],l);const c=f(n,["filter"]);return e!==void 0&&c!=null&&g(e,["_query","filter"],c),s}function mU(n,e,t){const s={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&g(e,["_query","pageToken"],l);const c=f(n,["filter"]);return e!==void 0&&c!=null&&g(e,["_query","filter"],c),s}function gU(n,e){const t={},s=f(n,["config"]);return s!=null&&pU(s,t),t}function yU(n,e){const t={},s=f(n,["config"]);return s!=null&&mU(s,t),t}function _U(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const o=f(n,["nextPageToken"]);o!=null&&g(t,["nextPageToken"],o);const l=f(n,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>sC(d))),g(t,["tuningJobs"],c)}return t}function vU(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const o=f(n,["nextPageToken"]);o!=null&&g(t,["nextPageToken"],o);const l=f(n,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>Jp(d))),g(t,["tuningJobs"],c)}return t}function TU(n,e){const t={},s=f(n,["name"]);s!=null&&g(t,["model"],s);const o=f(n,["name"]);return o!=null&&g(t,["endpoint"],o),t}function EU(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=f(n,["examples"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),g(t,["examples","examples"],o)}return t}function SU(n,e,t){const s={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const c=f(n,["gcsUri"]);e!==void 0&&c!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(o==="PREFERENCE_TUNING"){const c=f(n,["gcsUri"]);e!==void 0&&c!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=f(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=f(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=f(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function sC(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const o=f(n,["name"]);o!=null&&g(t,["name"],o);const l=f(n,["state"]);l!=null&&g(t,["state"],qA(l));const c=f(n,["createTime"]);c!=null&&g(t,["createTime"],c);const d=f(n,["tuningTask","startTime"]);d!=null&&g(t,["startTime"],d);const m=f(n,["tuningTask","completeTime"]);m!=null&&g(t,["endTime"],m);const p=f(n,["updateTime"]);p!=null&&g(t,["updateTime"],p);const v=f(n,["description"]);v!=null&&g(t,["description"],v);const E=f(n,["baseModel"]);E!=null&&g(t,["baseModel"],E);const A=f(n,["_self"]);return A!=null&&g(t,["tunedModel"],TU(A)),t}function Jp(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const o=f(n,["name"]);o!=null&&g(t,["name"],o);const l=f(n,["state"]);l!=null&&g(t,["state"],qA(l));const c=f(n,["createTime"]);c!=null&&g(t,["createTime"],c);const d=f(n,["startTime"]);d!=null&&g(t,["startTime"],d);const m=f(n,["endTime"]);m!=null&&g(t,["endTime"],m);const p=f(n,["updateTime"]);p!=null&&g(t,["updateTime"],p);const v=f(n,["error"]);v!=null&&g(t,["error"],v);const E=f(n,["description"]);E!=null&&g(t,["description"],E);const A=f(n,["baseModel"]);A!=null&&g(t,["baseModel"],A);const b=f(n,["tunedModel"]);b!=null&&g(t,["tunedModel"],b);const q=f(n,["preTunedModel"]);q!=null&&g(t,["preTunedModel"],q);const G=f(n,["supervisedTuningSpec"]);G!=null&&g(t,["supervisedTuningSpec"],G);const Q=f(n,["preferenceOptimizationSpec"]);Q!=null&&g(t,["preferenceOptimizationSpec"],Q);const se=f(n,["tuningDataStats"]);se!=null&&g(t,["tuningDataStats"],se);const K=f(n,["encryptionSpec"]);K!=null&&g(t,["encryptionSpec"],K);const W=f(n,["partnerModelTuningSpec"]);W!=null&&g(t,["partnerModelTuningSpec"],W);const oe=f(n,["customBaseModel"]);oe!=null&&g(t,["customBaseModel"],oe);const de=f(n,["experiment"]);de!=null&&g(t,["experiment"],de);const ce=f(n,["labels"]);ce!=null&&g(t,["labels"],ce);const x=f(n,["outputUri"]);x!=null&&g(t,["outputUri"],x);const w=f(n,["pipelineJob"]);w!=null&&g(t,["pipelineJob"],w);const N=f(n,["serviceAccount"]);N!=null&&g(t,["serviceAccount"],N);const P=f(n,["tunedModelDisplayName"]);P!=null&&g(t,["tunedModelDisplayName"],P);const V=f(n,["veoTuningSpec"]);return V!=null&&g(t,["veoTuningSpec"],V),t}function AU(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const o=f(n,["name"]);o!=null&&g(t,["name"],o);const l=f(n,["metadata"]);l!=null&&g(t,["metadata"],l);const c=f(n,["done"]);c!=null&&g(t,["done"],c);const d=f(n,["error"]);return d!=null&&g(t,["error"],d),t}function l0(n,e){const t={},s=f(n,["gcsUri"]);s!=null&&g(t,["validationDatasetUri"],s);const o=f(n,["vertexDatasetResource"]);return o!=null&&g(t,["validationDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CU extends ro{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new lu(eo.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:o});return l.baseModel=void 0,await this.tuneInternal(l)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),l=await this.tuneMldevInternal(o);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:Op.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const p=hU(e);return d=me("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>Jp(v))}else{const p=dU(e);return d=me("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>sC(v))}}async listInternal(e){var t,s,o,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const p=yU(e);return d=me("tuningJobs",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=vU(v),A=new zE;return Object.assign(A,E),A})}else{const p=gU(e);return d=me("tunedModels",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=_U(v),A=new zE;return Object.assign(A,E),A})}}async cancel(e){var t,s,o,l;let c="",d={};if(this.apiClient.isVertexAI()){const m=aU(e);c=me("{name}:cancel",m._url),d=m._query,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const m=oU(e);c=me("{name}:cancel",m._url),d=m._query,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=fU(e,e);return l=me("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>Jp(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=cU(e);return l=me("tunedModels",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>AU(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IU{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const RU=1024*1024*8,wU=3,bU=1e3,NU=2,dp="x-goog-upload-status";async function MU(n,e,t){var s,o,l;let c=0,d=0,m=new qp(new Response),p="upload";for(c=n.size;d<c;){const E=Math.min(RU,c-d),A=n.slice(d,d+E);d+E>=c&&(p+=", finalize");let b=0,q=bU;for(;b<wU&&(m=await t.request({path:"",body:A,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(d),"Content-Length":String(E)}}}),!(!((s=m==null?void 0:m.headers)===null||s===void 0)&&s[dp]));)b++,await DU(q),q=q*NU;if(d+=E,((o=m==null?void 0:m.headers)===null||o===void 0?void 0:o[dp])!=="active")break;if(c<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await(m==null?void 0:m.json());if(((l=m==null?void 0:m.headers)===null||l===void 0?void 0:l[dp])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function xU(n){return{size:n.size,type:n.type}}function DU(n){return new Promise(e=>setTimeout(e,n))}class PU{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await MU(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await xU(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kU{create(e,t,s){return new VU(e,t,s)}}class VU{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const u0="x-goog-api-key";class UU{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(u0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(u0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LU="gl-node/";class OU{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=iD(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const o=new UU(this.apiKey);this.apiClient=new AV({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:LU+"web",uploader:new PU,downloader:new IU}),this.models=new GV(this.apiClient),this.live=new UV(this.apiClient,o,new kU),this.batches=new S2(this.apiClient),this.chats=new eP(this.models,this.apiClient),this.caches=new W2(this.apiClient),this.files=new cP(this.apiClient),this.operations=new HV(this.apiClient),this.authTokens=new rU(this.apiClient),this.tunings=new CU(this.apiClient)}}const qU={geminiApiKey:"AIzaSyCA1s1XxXQ1zFqwzdnsns6KtgeRVUOTlW8"},Hm=new OU({apiKey:qU.geminiApiKey});async function BU(n){const e={text:`Analyse chacune des images de vtements fournies. Pour chaque image, dans l'ordre, extrais les informations suivantes en franais :
    1. Une description concise incluant son type (ex: T-shirt, jean), sa couleur principale, et son style.
    2. Sa catgorie : "Hauts", "Bas", "Chaussures", ou "Accessoires".
    3. Sa couleur principale (ex: "Bleu", "Noir"). Sois concis.
    4. Sa matire principale (ex: "Coton", "Cuir"). Sois concis.
    
    Retourne le rsultat sous la forme d'un objet JSON unique contenant une cl "items", qui est un tableau d'objets. Chaque objet du tableau doit correspondre  une image et contenir les champs : "analysis", "category", "color", et "material".`},t=n.map(o=>({inlineData:{data:o,mimeType:"image/jpeg"}})),s=await Hm.models.generateContent({model:"gemini-flash-latest",contents:{parts:[e,...t]},config:{responseMimeType:"application/json",responseSchema:{type:it.OBJECT,properties:{items:{type:it.ARRAY,description:"Un tableau d'analyses pour chaque vtement.",items:{type:it.OBJECT,properties:{analysis:{type:it.STRING,description:"La description concise du vtement."},category:{type:it.STRING,description:'La catgorie du vtement parmi "Hauts", "Bas", "Chaussures", ou "Accessoires".',enum:["Hauts","Bas","Chaussures","Accessoires"]},color:{type:it.STRING,description:"La couleur principale du vtement."},material:{type:it.STRING,description:"La matire principale du vtement."}},required:["analysis","category","color","material"]}}},required:["items"]}}});try{const o=JSON.parse(s.text),l=["Hauts","Bas","Chaussures","Accessoires"];return o.items.forEach(c=>{l.includes(c.category)||(console.warn(`Catgorie invalide reue de l'IA: ${c.category}, fallback sur "Accessoires"`),c.category="Accessoires")}),o.items}catch(o){throw console.error("Erreur de parsing de la rponse de l'IA pour l'analyse par lot:",o),console.error("Rponse reue:",s.text),new Error("L'IA a renvoy une rponse d'analyse malforme.")}}function FU(n){return n&&n.name&&Array.isArray(n.itemIds)}async function zU(n,e,t,s){const o=new Set(e.flatMap(A=>A.itemIds)),c=n.filter(A=>!o.has(A.id)).map(A=>`- ${A.analysis} (Catgorie: ${A.category}, Couleur: ${A.color}, Matire: ${A.material})`).join(`
`),d=e.map(A=>`- ${A.name} (Ensemble)`).join(`
`),m=[c,d].filter(Boolean).join(`
`),p=s?`
**RGLE CRITIQUE : Chaque tenue DOIT imprativement inclure l'article ou l'ensemble suivant : "${FU(s)?s.name:s.analysis}". C'est la pice matresse.**
`:"",v=`
    Tu es un styliste de mode expert. Ta mission est de crer des tenues pour un utilisateur en fonction de sa garde-robe et d'un contexte prcis.

    Contexte de l'utilisateur : "${t}"
    
    RGLE IMPORTANTE : Les articles marqus comme "(Ensemble)" sont des groupes de vtements insparables. Si tu utilises un ensemble, tu dois le lister par son nom (ex: "Costume bleu marine") et ne pas lister ses composants individuels.

    Vtements et Ensembles disponibles :
    ${m}
    ${p}
    En te basant **uniquement** sur les vtements et ensembles lists ci-dessus, cre 3 tenues distinctes et cohrentes qui correspondent au contexte de l'utilisateur.

    Pour chaque tenue, fournis :
    1. Un nom de titre court et accrocheur pour la tenue.
    2. Une brve description de l'ambiance ou du style de la tenue.
    3. La liste exacte des descriptions des vtements ou des noms d'ensembles de la liste fournie  utiliser.

    Rponds en franais.
  `,E=await Hm.models.generateContent({model:"gemini-2.5-pro",contents:v,config:{responseMimeType:"application/json",responseSchema:{type:it.OBJECT,properties:{tenues:{type:it.ARRAY,description:"La liste des suggestions de tenues.",items:{type:it.OBJECT,properties:{titre:{type:it.STRING,description:"Le nom de la tenue."},description:{type:it.STRING,description:"Une brve description du style de la tenue."},vetements:{type:it.ARRAY,items:{type:it.STRING,description:"Description d'un vtement ou nom d'un ensemble de la liste fournie."},description:"La liste des descriptions des vtements ou ensembles composant la tenue."}},required:["titre","description","vetements"]}}},required:["tenues"]}}});try{return JSON.parse(E.text).tenues}catch(A){throw console.error("Erreur de parsing JSON de la rponse Gemini:",A),console.error("Rponse reue:",E.text),new Error("L'IA a renvoy une rponse malforme.")}}async function GU(n,e,t,s){const o=new Set(e.flatMap(E=>E.itemIds)),c=n.filter(E=>!o.has(E.id)).map(E=>`- ${E.analysis} (Catgorie: ${E.category}, Couleur: ${E.color}, Matire: ${E.material})`).join(`
`),d=e.map(E=>`- ${E.name} (Ensemble)`).join(`
`),m=[c,d].filter(Boolean).join(`
`),p=`
    Tu es un styliste de voyage et un expert en organisation. Ta mission est de crer une valise optimise pour un voyage.

    Dtails du voyage :
    - Dure : ${t} jour(s)
    - Contexte / Mto : "${s}"

    Vtements et Ensembles disponibles dans la garde-robe :
    ${m}
    
    RGLES :
    1. Cre une liste de vtements  emporter qui soit polyvalente et minimale. Les articles doivent pouvoir tre combins pour crer plusieurs tenues diffrentes.
    2. Ne slectionne QUE des articles de la liste fournie.
    3. Les articles marqus comme "(Ensemble)" sont insparables. Si tu utilises un ensemble, liste-le par son nom (ex: "Costume bleu marine").
    4. Assure-toi que la quantit de vtements est approprie pour la dure du voyage de ${t} jour(s). Pense  la rutilisation des pices (comme les pantalons ou les vestes).

    Fournis le rsultat en franais sous la forme suivante :
    1. Un "titre" accrocheur pour le plan de valise.
    2. Un "resume" court qui explique la stratgie de la valise (ex: "Une slection capsule pour un weekend ensoleill...").
    3. Une "valise" qui est une liste des descriptions exactes des vtements ou des noms d'ensembles de la liste fournie  emporter.
    `,v=await Hm.models.generateContent({model:"gemini-2.5-pro",contents:p,config:{responseMimeType:"application/json",responseSchema:{type:it.OBJECT,properties:{titre:{type:it.STRING,description:"Le nom du plan de valise."},resume:{type:it.STRING,description:"Un bref rsum de la stratgie de la valise."},valise:{type:it.ARRAY,items:{type:it.STRING,description:"Description d'un vtement ou nom d'un ensemble de la liste fournie."},description:"La liste des descriptions des vtements ou ensembles  emporter."}},required:["titre","resume","valise"]}}});try{return JSON.parse(v.text)}catch(E){throw console.error("Erreur de parsing JSON de la rponse Gemini pour la valise:",E),console.error("Rponse reue:",v.text),new Error("L'IA a renvoy une rponse malforme pour le plan de valise.")}}const HU=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),JU=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),c0=()=>M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),Yp=()=>M.jsxs("svg",{className:"animate-spin h-8 w-8 text-gold",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[M.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),M.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Jm=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:M.jsx("path",{d:"M10 3a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0V7H8a1 1 0 110-2h1V4a1 1 0 011-1zM4 9a1 1 0 011 1v1h1a1 1 0 110 2H5v1a1 1 0 11-2 0v-1H2a1 1 0 110-2h1v-1a1 1 0 011-1zM16 9a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})}),Ym=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),YU=()=>M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.5 6.6C12.5 5.54903 11.651 4.7 10.6 4.7C9.54903 4.7 8.7 5.54903 8.7 6.6V8.7C8.7 9.36274 9.23726 9.9 9.9 9.9H14.1C14.7627 9.9 15.3 9.36274 15.3 8.7V7.8"}),M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.10879 16.5C4.43285 14.805 5.86246 13.5 7.6 13.5H16.4C18.1375 13.5 19.5672 14.805 19.8912 16.5L20.5 19.5H3.5L4.10879 16.5Z"})]}),rC=()=>M.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4 0 1.132-.497 2.16-1.32 2.874-.823.714-1.823 1.126-2.904 1.126H12v.01M12 17h.01"})}),KU=()=>M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 4h6l2 5-2 1-3-4-3 4-2-1 2-5z"}),M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v10m-3-10v10h6V10"})]}),QU=()=>M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 4h12v10H6z"}),M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 14v6h-2L6 4"}),M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 14v6h2l1-16"})]}),$U=()=>M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 18h16l-3-6H7L4 18z"}),M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 12V7a2 2 0 012-2h0a2 2 0 012 2v5"})]}),XU=()=>M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 000-18 9 9 0 000 18z"}),M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11.5l-3.5 3.5"}),M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.5 8.5l-3.5 3.5"})]}),WU=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),oC=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),aC=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),ZU=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:M.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),lC=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),jU=()=>M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[M.jsx("path",{d:"M8 3a1 1 0 000 2h4a1 1 0 100-2H8z"}),M.jsx("path",{fillRule:"evenodd",d:"M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 3a1 1 0 011-1h10a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1V7z",clipRule:"evenodd"})]}),eL=({theme:n,toggleTheme:e,children:t})=>M.jsx("header",{className:"bg-snow/80 dark:bg-onyx/80 backdrop-blur-lg border-b border-black/5 dark:border-white/10 sticky top-0 z-50",children:M.jsxs("div",{className:"container mx-auto px-4 lg:px-8 h-24 flex justify-between items-center",children:[M.jsxs("h1",{className:"text-4xl font-serif font-bold tracking-wider text-raisin-black dark:text-snow",children:[M.jsx("span",{className:"text-gold",children:"DRESS"}),"CODE"]}),M.jsx("button",{onClick:e,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-black/5 dark:hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx transition-colors","aria-label":"Changer le thme",children:n==="light"?M.jsx(JU,{}):M.jsx(HU,{})})]})}),tL=({onAnalyze:n,isAnalyzing:e})=>{const t=ke.useRef(null),[s,o]=ke.useState([]),[l,c]=ke.useState(!1),[d,m]=ke.useState(!1);ke.useEffect(()=>{const K=()=>m(window.innerWidth<1024);return K(),window.addEventListener("resize",K),()=>window.removeEventListener("resize",K)},[]),ke.useEffect(()=>()=>{s.forEach(K=>URL.revokeObjectURL(K.preview))},[s]);const p=K=>{const W=K.map(oe=>({id:`${oe.name}-${oe.lastModified}-${Math.random()}`,file:oe,preview:URL.createObjectURL(oe)}));o(oe=>[...oe,...W])},v=K=>{K.target.files&&(p(Array.from(K.target.files)),K.target.value="")},E=()=>{var K;e||(K=t.current)==null||K.click()},A=K=>{d||(K.preventDefault(),K.stopPropagation(),c(!0))},b=K=>{d||(K.preventDefault(),K.stopPropagation(),c(!1))},q=K=>{d||(K.preventDefault(),K.stopPropagation())},G=K=>{d||(K.preventDefault(),K.stopPropagation(),c(!1),K.dataTransfer.files&&K.dataTransfer.files.length>0&&(p(Array.from(K.dataTransfer.files)),K.dataTransfer.clearData()))},Q=K=>{const W=s.find(oe=>oe.id===K);W&&URL.revokeObjectURL(W.preview),o(oe=>oe.filter(de=>de.id!==K))},se=()=>{s.length>0&&!e&&(n(s.map(K=>K.file)),o([]))};return M.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",onDragEnter:A,onDragLeave:b,onDragOver:q,onDrop:G,children:[M.jsx("h2",{className:"text-2xl font-serif font-bold mb-6 text-gold",children:"Ajouter  ma garde-robe"}),M.jsxs("div",{onClick:E,className:`relative bg-snow dark:bg-onyx rounded-lg p-12 text-center transition-all duration-300 ring-1 ring-dashed ring-black/20 dark:ring-white/20 ${e?"cursor-default":"cursor-pointer hover:ring-gold dark:hover:ring-gold"}`,children:[M.jsx("input",{type:"file",ref:t,onChange:v,className:"hidden",accept:"image/png, image/jpeg, image/webp",multiple:!0,disabled:e}),M.jsx("div",{className:"flex flex-col items-center justify-center min-h-[8rem]",children:e?M.jsxs(M.Fragment,{children:[M.jsx(Yp,{}),M.jsx("p",{className:"mt-4 text-sm font-medium text-gray-500 dark:text-gray-400 tracking-wide",children:"Analyse en cours..."})]}):M.jsxs(M.Fragment,{children:[M.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:M.jsx(c0,{})}),M.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:d?"Appuyez pour ajouter des photos":"Glissez-dposez vos photos"}),M.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["ou ",M.jsx("span",{className:"text-gold font-medium",children:"cliquez pour slectionner"})]})]})}),l&&!d&&M.jsxs("div",{className:"absolute inset-0 bg-gold/90 backdrop-blur-sm rounded-lg flex flex-col items-center justify-center transition-opacity",children:[M.jsx("div",{className:"text-black transform-gpu scale-110",children:M.jsx(c0,{})}),M.jsx("p",{className:"mt-2 font-bold text-lg text-black",children:"Dposez pour ajouter"})]})]}),s.length>0&&!e&&M.jsxs("div",{className:"mt-8",children:[M.jsx("h3",{className:"font-semibold mb-4 text-gray-600 dark:text-gray-300",children:"Prts pour l'analyse :"}),M.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 mb-6",children:s.map(K=>M.jsxs("div",{className:"relative group aspect-square",children:[M.jsx("img",{src:K.preview,alt:K.file.name,className:"w-full h-full object-cover rounded-md shadow-md"}),M.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity rounded-md"}),M.jsx("button",{onClick:()=>Q(K.id),className:"absolute -top-2 -right-2 p-1 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white opacity-0 group-hover:opacity-100 transition-all hover:bg-red-500 hover:scale-110 focus:opacity-100","aria-label":"Supprimer",children:M.jsx(Ym,{})})]},K.id))}),M.jsxs("button",{onClick:se,disabled:e||s.length===0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[M.jsx(Jm,{}),"Analyser les ",s.length," article(s)"]})]})]})},nL=({imageSrc:n,analysis:e,onClick:t,onRemove:s,isSelected:o,isSet:l})=>M.jsxs("div",{onClick:t,className:"group relative aspect-square bg-raisin-black rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 cursor-pointer",children:[M.jsx("img",{src:n,alt:e,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"}),M.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${o?"ring-4 ring-gold":"ring-2 ring-transparent"} rounded-lg`}),M.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),l&&!o&&M.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white",children:M.jsx(aC,{})}),o&&M.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-gold rounded-full text-onyx",children:M.jsx(ZU,{})}),M.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:M.jsx("p",{className:"text-white text-sm font-medium line-clamp-2",children:e})}),M.jsx("button",{onClick:s,className:"absolute top-2 right-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-500 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-red-500","aria-label":"Supprimer",children:M.jsx(Ym,{})})]}),iL={Hauts:{color:"Toutes",material:"Toutes"},Bas:{color:"Toutes",material:"Toutes"},Chaussures:{color:"Toutes",material:"Toutes"},Accessoires:{color:"Toutes",material:"Toutes"}},sL=({clothingItems:n,clothingSets:e,onRemoveItem:t,onRemoveSet:s,onSelectItem:o,onCreateSet:l})=>{const[c,d]=ke.useState("Hauts"),[m,p]=ke.useState(iL),[v,E]=ke.useState(!1),[A,b]=ke.useState([]),[q,G]=ke.useState(!1),Q=ke.useMemo(()=>new Set(e.flatMap(w=>w.itemIds)),[e]),se=n.length,K=[{name:"Hauts",icon:KU},{name:"Bas",icon:QU},{name:"Chaussures",icon:$U},{name:"Accessoires",icon:XU}],W=()=>{E(!v),b([]),G(!1)},oe=w=>{v?b(N=>N.includes(w.id)?N.filter(P=>P!==w.id):[...N,w.id]):o(w)},de=ke.useMemo(()=>A.length<2?null:e.find(w=>w.itemIds.length===A.length&&w.itemIds.every(N=>A.includes(N))),[A,e]);if(se===0)return M.jsxs("div",{className:"text-center py-20 px-6 bg-white dark:bg-raisin-black rounded-xl border border-dashed border-gray-300/50 dark:border-gray-700/50 flex flex-col items-center",children:[M.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:M.jsx(YU,{})}),M.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Votre garde-robe est vide."}),M.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Ajoutez des vtements pour commencer  crer."})]});const ce=w=>d(N=>N===w?null:w),x=(w,N,P)=>{p(V=>({...V,[w]:{...V[w],[N]:P}}))};return M.jsxs("div",{children:[M.jsxs("div",{className:"flex justify-between items-center mb-8",children:[M.jsxs("h2",{className:"text-3xl font-serif font-bold",children:["Ma Garde-Robe ",M.jsxs("span",{className:"text-gray-500",children:["(",se,")"]})]}),M.jsx("button",{onClick:W,className:`px-4 py-2 rounded-lg font-semibold text-sm transition-colors ${v?"bg-gold/20 text-gold":"bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700"}`,children:v?"Annuler la slection":"Crer un ensemble"})]}),M.jsx("div",{className:"space-y-4",children:K.map(({name:w,icon:N})=>{const P=n.filter(F=>F.category===w);if(P.length===0)return null;const V=c===w,O=["Hauts","Bas","Chaussures"].includes(w),D=[...new Set(P.map(F=>F.color))].sort(),st=[...new Set(P.map(F=>F.material))].sort(),ct=P.filter(F=>{const{color:Z,material:ue}=m[w];return(Z==="Toutes"||F.color===Z)&&(ue==="Toutes"||F.material===ue)});return M.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-lg shadow-black/5 dark:shadow-black/10 ring-1 ring-black/5 dark:ring-white/10 overflow-hidden transition-all duration-300",children:[M.jsxs("button",{onClick:()=>ce(w),className:"w-full flex justify-between items-center p-4 lg:p-5 text-left","aria-expanded":V,children:[M.jsxs("div",{className:"flex items-center gap-4",children:[M.jsx("span",{className:"text-gold",children:M.jsx(N,{})}),M.jsx("span",{className:"font-serif font-bold text-xl text-raisin-black dark:text-snow",children:w}),M.jsx("span",{className:"text-sm font-medium bg-snow dark:bg-onyx px-2 py-0.5 rounded-full text-gray-500 dark:text-gray-400",children:P.length})]}),M.jsx(WU,{className:`w-6 h-6 text-gray-400 transition-transform duration-300 ${V?"rotate-180":""}`})]}),M.jsx("div",{className:`grid transition-all duration-500 ease-in-out ${V?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"}`,children:M.jsx("div",{className:"overflow-hidden",children:M.jsxs("div",{className:"p-4 lg:p-5 border-t border-black/5 dark:border-white/10",children:[O&&M.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[M.jsxs("div",{children:[M.jsx("label",{htmlFor:`${w}-color-filter`,className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Couleur"}),M.jsxs("select",{id:`${w}-color-filter`,value:m[w].color,onChange:F=>x(w,"color",F.target.value),onClick:F=>F.stopPropagation(),className:"w-full appearance-none text-sm px-3 py-1.5 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors",children:[M.jsx("option",{value:"Toutes",children:"Toutes"}),D.map(F=>M.jsx("option",{value:F,children:F},F))]})]}),M.jsxs("div",{children:[M.jsx("label",{htmlFor:`${w}-material-filter`,className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Matire"}),M.jsxs("select",{id:`${w}-material-filter`,value:m[w].material,onChange:F=>x(w,"material",F.target.value),onClick:F=>F.stopPropagation(),className:"w-full appearance-none text-sm px-3 py-1.5 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors",children:[M.jsx("option",{value:"Toutes",children:"Toutes"}),st.map(F=>M.jsx("option",{value:F,children:F},F))]})]})]}),M.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:ct.map(F=>M.jsx(nL,{imageSrc:F.imageSrc,analysis:F.analysis,onClick:()=>oe(F),onRemove:Z=>{Z.stopPropagation(),t(F.id)},isSelected:v&&A.includes(F.id),isSet:Q.has(F.id)},F.id))})]})})})]},w)})}),v&&M.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[60] w-full max-w-md px-4",children:q?M.jsxs("form",{onSubmit:w=>{w.preventDefault();const P=new FormData(w.currentTarget).get("setName");P&&P.trim()&&(l(A,P.trim()),W())},className:"flex items-center gap-2 bg-white dark:bg-raisin-black p-2 rounded-full shadow-2xl ring-1 ring-gold/50",children:[M.jsx("input",{type:"text",name:"setName",placeholder:"Nom de l'ensemble...",className:"flex-grow bg-transparent px-4 py-1 text-onyx dark:text-snow focus:outline-none",autoFocus:!0}),M.jsx("button",{type:"submit",className:"bg-gold text-onyx font-bold px-4 py-1.5 rounded-full hover:bg-gold-dark transition-colors",children:"Crer"}),M.jsx("button",{type:"button",onClick:()=>G(!1),className:"text-gray-500 dark:text-gray-400 p-1.5 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:M.jsx(Ym,{})})]}):de?M.jsxs("button",{onClick:()=>{s(de.id),W()},className:"w-full flex items-center justify-center gap-3 px-6 py-3 bg-rose-500 text-white font-bold rounded-full shadow-2xl hover:bg-rose-600 transition-all duration-300 transform hover:scale-105",children:[M.jsx(lC,{}),"Dissocier l'ensemble"]}):A.length>1&&M.jsxs("button",{onClick:()=>G(!0),className:"w-full flex items-center justify-center gap-3 px-6 py-3 bg-gold text-onyx font-bold rounded-full shadow-2xl hover:bg-gold-dark transition-all duration-300 transform hover:scale-105",children:[M.jsx(aC,{}),"Crer un ensemble avec ",A.length," articles"]})})]})},rL=({onGenerate:n,isGenerating:e,context:t,setContext:s})=>{const o=c=>{c.preventDefault(),t.trim()&&n(t)},l=["Casual","Chic","Formel"];return M.jsxs("div",{children:[M.jsx("h2",{className:"text-2xl font-serif font-bold text-center mb-6 text-gold",children:"Crateur de Tenues"}),M.jsx("form",{onSubmit:o,children:M.jsxs("div",{className:"space-y-6",children:[M.jsxs("div",{children:[M.jsx("label",{htmlFor:"context",className:"block text-sm font-medium text-center text-gray-500 dark:text-gray-400 mb-3",children:"Pour quelle occasion ou mto ?"}),M.jsx("div",{className:"flex justify-center gap-2 mb-4",children:l.map(c=>M.jsx("button",{type:"button",onClick:()=>s(c),className:`px-4 py-1.5 rounded-full text-sm font-semibold transition-colors duration-200 ${t===c?"bg-gold text-onyx":"bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 hover:border-gold dark:hover:border-gold text-gray-700 dark:text-gray-300"}`,disabled:e,children:c},c))}),M.jsx("input",{id:"context",type:"text",value:t,onChange:c=>s(c.target.value),placeholder:"Ou dcrivez... Ex: un brunch ensoleill",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:e})]}),M.jsxs("button",{type:"submit",disabled:e||!t.trim(),className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[M.jsx(Jm,{}),e?"Gnration...":"Gnrer des Tenues"]})]})})]})},oL=({outfits:n,allClothingItems:e})=>{const[t,s]=ke.useState(null);ke.useEffect(()=>{if(!t)return;const l=c=>{c.key==="Escape"&&s(null)};return window.addEventListener("keydown",l),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",l),document.body.style.overflow="auto"}},[t]);const o=l=>{const c=l.toLowerCase(),d=e.find(m=>{if(m.analysis.toLowerCase()===c)return!0;const p=new Set(m.analysis.toLowerCase().split(/\s+/)),v=c.split(/\s+/);return v.filter(A=>p.has(A)).length/v.length>.5});return d?d.imageSrc:null};return M.jsxs(M.Fragment,{children:[M.jsx("div",{className:"mt-10 space-y-8",children:n.map((l,c)=>M.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5 transition-all duration-300 hover:shadow-lg hover:border-gold/50",children:[M.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:l.titre}),M.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:l.description}),M.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:l.vetements.map((d,m)=>{const p=o(d);return M.jsx("button",{onClick:()=>p&&s(p),className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden transition-transform duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx disabled:cursor-default disabled:hover:scale-100",disabled:!p,"aria-label":`Agrandir l'image de : ${d}`,children:p?M.jsx("img",{src:p,alt:d,className:"w-full h-full object-cover"}):M.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:M.jsx(rC,{})})},m)})}),M.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:l.vetements.map((d,m)=>M.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:d},m))})]},c))}),t&&M.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:()=>s(null),role:"dialog","aria-modal":"true",children:M.jsxs("div",{className:"relative",onClick:l=>l.stopPropagation(),children:[M.jsx("img",{src:t,alt:"Vue agrandie",className:"max-w-[90vw] max-h-[85vh] object-contain rounded-lg shadow-2xl"}),M.jsx("button",{onClick:()=>s(null),className:"absolute -top-3 -right-3 p-1.5 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white hover:bg-red-500 hover:scale-110 transition-all focus:outline-none focus:ring-2 focus:ring-gold","aria-label":"Fermer",children:M.jsx(oC,{})})]})})]})},aL=({item:n,clothingSets:e,onClose:t,onUpdate:s,onGenerateFrom:o,onRemoveSet:l})=>{const[c,d]=ke.useState({analysis:n.analysis,category:n.category,color:n.color,material:n.material}),m=e.find(E=>E.itemIds.includes(n.id));ke.useEffect(()=>{d({analysis:n.analysis,category:n.category,color:n.color,material:n.material})},[n]),ke.useEffect(()=>{const E=A=>{A.key==="Escape"&&t()};return document.body.style.overflow="hidden",window.addEventListener("keydown",E),()=>{document.body.style.overflow="auto",window.removeEventListener("keydown",E)}},[t]);const p=E=>{const{name:A,value:b}=E.target;d(q=>({...q,[A]:b}))},v=E=>{E.preventDefault(),s({...n,...c})};return M.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:t,role:"dialog","aria-modal":"true","aria-labelledby":"clothing-item-title",children:M.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col overflow-hidden",onClick:E=>E.stopPropagation(),children:[M.jsxs("div",{className:"relative",children:[M.jsx("img",{src:n.imageSrc,alt:n.analysis,className:"w-full h-auto max-h-[50vh] object-cover"}),M.jsx("button",{onClick:t,className:"absolute top-3 right-3 p-1.5 bg-black/40 backdrop-blur-sm rounded-full text-white hover:bg-black/60 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-raisin-black","aria-label":"Fermer la vue dtaille",children:M.jsx(oC,{})})]}),M.jsxs("form",{onSubmit:v,className:"p-6 overflow-y-auto flex-grow flex flex-col",children:[M.jsxs("div",{className:"space-y-4 flex-grow",children:[M.jsxs("div",{children:[M.jsx("label",{htmlFor:"analysis",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Description"}),M.jsx("textarea",{id:"analysis",name:"analysis",value:c.analysis,onChange:p,rows:3,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),M.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[M.jsxs("div",{children:[M.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Catgorie"}),M.jsx("select",{id:"category",name:"category",value:c.category,onChange:p,className:"mt-1 w-full appearance-none px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow",children:["Hauts","Bas","Chaussures","Accessoires"].map(E=>M.jsx("option",{value:E,children:E},E))})]}),M.jsxs("div",{children:[M.jsx("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Couleur"}),M.jsx("input",{type:"text",id:"color",name:"color",value:c.color,onChange:p,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),M.jsxs("div",{children:[M.jsx("label",{htmlFor:"material",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Matire"}),M.jsx("input",{type:"text",id:"material",name:"material",value:c.material,onChange:p,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]})]}),m&&M.jsxs("div",{className:"bg-gold/10 dark:bg-gold/20 p-3 rounded-lg flex items-center justify-between gap-4",children:[M.jsxs("div",{children:[M.jsx("p",{className:"text-xs font-semibold text-gold uppercase tracking-wider",children:"Fait partie de l'ensemble"}),M.jsx("p",{className:"font-medium text-onyx dark:text-snow truncate",title:m.name,children:m.name})]}),M.jsxs("button",{type:"button",onClick:()=>{l(m.id),t()},className:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white dark:bg-onyx text-rose-500 border border-rose-500/50 rounded-md hover:bg-rose-500 hover:text-white transition-colors",title:"Dissocier l'ensemble",children:[M.jsx(lC,{}),M.jsx("span",{children:"Dissocier"})]})]})]}),M.jsxs("div",{className:"mt-6 pt-4 border-t border-black/10 dark:border-white/10 flex flex-col sm:flex-row gap-3",children:[M.jsxs("button",{type:"button",onClick:()=>o(n),className:"w-full flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300",children:[M.jsx(Jm,{}),"Crer une tenue avec cet article"]}),M.jsx("button",{type:"submit",className:"w-full sm:w-auto px-6 py-2.5 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300",children:"Enregistrer"})]})]})]})})},lL=({onGenerate:n,isGenerating:e})=>{const[t,s]=ke.useState(3),[o,l]=ke.useState(""),c=d=>{d.preventDefault(),o.trim()&&t>0&&n(t,o)};return M.jsxs("div",{children:[M.jsx("h2",{className:"text-2xl font-serif font-bold text-center mb-6 text-gold",children:"Planificateur de Valise"}),M.jsxs("form",{onSubmit:c,className:"space-y-6",children:[M.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 items-end",children:[M.jsxs("div",{className:"sm:col-span-1",children:[M.jsx("label",{htmlFor:"days",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Dure (jours)"}),M.jsx("input",{id:"days",type:"number",value:t,onChange:d=>s(parseInt(d.target.value,10)||1),min:"1",max:"30",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:e,required:!0})]}),M.jsxs("div",{className:"sm:col-span-2",children:[M.jsx("label",{htmlFor:"vacation-context",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Destination / Mto"}),M.jsx("input",{id:"vacation-context",type:"text",value:o,onChange:d=>l(d.target.value),placeholder:"Ex: Weekend  Rome, temps doux",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center sm:text-left",disabled:e,required:!0})]})]}),M.jsxs("button",{type:"submit",disabled:e||!o.trim()||t<=0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[M.jsx(jU,{}),e?"Prparation...":"Gnrer la valise"]})]})]})},uL=({plan:n,allClothingItems:e})=>{const t=s=>{const o=s.toLowerCase(),l=e.find(d=>d.analysis.toLowerCase()===o);if(l)return l.imageSrc;const c=e.map(d=>{const m=new Set(d.analysis.toLowerCase().split(/\s+/)),p=o.split(/\s+/),E=p.filter(A=>m.has(A)).length/p.length;return{item:d,score:E}}).filter(d=>d.score>.5).sort((d,m)=>m.score-d.score)[0];return c?c.item.imageSrc:null};return M.jsx("div",{className:"mt-10",children:M.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5",children:[M.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:n.titre}),M.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:n.resume}),M.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:n.valise.map((s,o)=>{const l=t(s);return M.jsxs("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden relative group",title:s,children:[l?M.jsx("img",{src:l,alt:s,className:"w-full h-full object-cover"}):M.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:M.jsx(rC,{})}),M.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center p-2",children:M.jsx("p",{className:"text-white text-xs text-center line-clamp-3",children:s})})]},o)})}),M.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:n.valise.map((s,o)=>M.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:s},o))})]})})},cL=()=>{const[n,e]=ke.useState("dark"),[t,s]=ke.useState([]),[o,l]=ke.useState([]),[c,d]=ke.useState([]),[m,p]=ke.useState(!1),[v,E]=ke.useState(!1),[A,b]=ke.useState(null),[q,G]=ke.useState(null),[Q,se]=ke.useState(""),[K,W]=ke.useState(null),[oe,de]=ke.useState(!1);ke.useEffect(()=>{const Z=window.document.documentElement;Z.classList.remove(n==="light"?"dark":"light"),Z.classList.add(n)},[n]),ke.useEffect(()=>{user&&(async()=>{try{const ue=await Wx(user.uid),ve=await jx(user.uid);s(ue),l(ve)}catch(ue){console.error("Erreur lors du chargement des donnes:",ue)}})()},[user]),ke.useEffect(()=>{user&&t.length>0&&Xx(user.uid,t).catch(console.error)},[t,user]),ke.useEffect(()=>{user&&o.length>0&&Zx(user.uid,o).catch(console.error)},[o,user]);const ce=()=>{e(Z=>Z==="light"?"dark":"light")},x=ke.useCallback(async Z=>{if(Z.length!==0){p(!0),b(null);try{const ue=Z.map(fe=>new Promise((Se,Me)=>{const De=new FileReader;De.onload=()=>Se(De.result),De.onerror=Me,De.readAsDataURL(fe)})),ve=await Promise.all(ue),Ce=ve.map(fe=>fe.split(",")[1]),U=await BU(Ce),ee=Math.min(U.length,Z.length),ae=[];for(let fe=0;fe<ee;fe++)ae.push({id:`${Date.now()}-${Z[fe].name}-${Math.random()}`,imageSrc:ve[fe],...U[fe]});U.length!==Z.length&&(console.warn(`Le nombre de rsultats d'analyse (${U.length}) ne correspond pas au nombre de fichiers (${Z.length}).`),b(`L'IA a analys ${ae.length} sur ${Z.length} image(s). Certaines ont peut-tre t ignores.`)),s(fe=>[...fe,...ae])}catch(ue){console.error("Erreur lors de l'analyse par lot des images:",ue),b("Une erreur est survenue lors de l'analyse des images. L'IA a peut-tre rencontr un problme. Veuillez ressayer.")}finally{p(!1)}}},[]),w=ke.useCallback(async(Z,ue)=>{if(t.length-o.flatMap(Ce=>Ce.itemIds).length+o.length<2){b("Veuillez avoir au moins deux articles ou ensembles pour gnrer des tenues.");return}E(!0),b(null),d([]);try{const Ce=await zU(t,o,Z,ue);d(Ce)}catch(Ce){console.error("Erreur lors de la gnration des tenues:",Ce),b("Impossible de gnrer des tenues. L'IA est peut-tre surcharge. Veuillez ressayer.")}finally{E(!1)}},[t,o]),N=ke.useCallback(async(Z,ue)=>{if(t.length<Z){b(`Veuillez avoir au moins ${Z} articles dans votre garde-robe pour un voyage de ${Z} jours.`);return}de(!0),b(null),W(null);try{const ve=await GU(t,o,Z,ue);W(ve)}catch(ve){console.error("Erreur lors de la gnration du plan de valise:",ve),b("Impossible de gnrer le plan de valise. L'IA est peut-tre surcharge. Veuillez ressayer.")}finally{de(!1)}},[t,o]),P=Z=>{s(ue=>ue.filter(ve=>ve.id!==Z)),l(ue=>ue.map(Ce=>Ce.itemIds.includes(Z)?{...Ce,itemIds:Ce.itemIds.filter(U=>U!==Z)}:Ce).filter(Ce=>Ce.itemIds.length>1))},V=Z=>{l(ue=>ue.filter(ve=>ve.id!==Z))},O=Z=>{G(Z)},D=()=>{G(null)},st=Z=>{s(ue=>ue.map(ve=>ve.id===Z.id?Z:ve)),D()},ct=Z=>{if(!Q.trim()){b("Veuillez d'abord dcrire une occasion ou une mto dans le crateur de tenues.");return}D(),w(Q,Z)},F=(Z,ue)=>{if(Z.length<2||!ue.trim())return;const ve=t.find(U=>U.id===Z[0]);if(!ve)return;const Ce={id:`${Date.now()}-set-${Math.random()}`,name:ue,itemIds:Z,imageSrc:ve.imageSrc};l(U=>[...U,Ce])};return M.jsxs("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow transition-colors duration-500",children:[M.jsx(eL,{theme:n,toggleTheme:ce}),M.jsxs("main",{className:"container mx-auto px-4 lg:px-8 py-10",children:[A&&M.jsxs("div",{className:"bg-red-500/20 border border-red-500 text-red-300 px-4 py-3 rounded-lg relative mb-8",role:"alert",children:[M.jsx("strong",{className:"font-bold",children:"Erreur: "}),M.jsx("span",{className:"block sm:inline",children:A})]}),M.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[M.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[M.jsx(tL,{onAnalyze:x,isAnalyzing:m}),M.jsx(sL,{clothingItems:t,clothingSets:o,onRemoveItem:P,onRemoveSet:V,onSelectItem:O,onCreateSet:F})]}),M.jsx("div",{className:"space-y-10",children:M.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8 sticky top-28",children:[M.jsx(lL,{onGenerate:N,isGenerating:oe}),oe&&M.jsxs("div",{className:"flex flex-col items-center justify-center mt-8",children:[M.jsx(Yp,{}),M.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium tracking-wide",children:"L'IA prpare votre valise..."})]}),K&&M.jsx(uL,{plan:K,allClothingItems:t}),(K||oe||c.length>0)&&M.jsx("hr",{className:"my-8 border-dashed border-gray-200 dark:border-gray-700"}),M.jsx(rL,{onGenerate:w,isGenerating:v,context:Q,setContext:se}),v&&M.jsxs("div",{className:"flex flex-col items-center justify-center mt-8",children:[M.jsx(Yp,{}),M.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium tracking-wide",children:"L'IA compose vos tenues..."})]}),c.length>0&&M.jsx(oL,{outfits:c,allClothingItems:t})]})})]}),q&&M.jsx(aL,{item:q,clothingSets:o,onClose:D,onUpdate:st,onGenerateFrom:ct,onRemoveSet:V})]})]})},uC=document.getElementById("root");if(!uC)throw new Error("L'lment root est introuvable dans le DOM");const fL=QI.createRoot(uC);fL.render(M.jsx(BI.StrictMode,{children:M.jsx(cL,{})}));
