(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function S1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ev={exports:{}},qc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ww;function eL(){if(Ww)return qc;Ww=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,o){var l=null;if(o!==void 0&&(l=""+o),r.key!==void 0&&(l=""+r.key),"key"in r){o={};for(var c in r)c!=="key"&&(o[c]=r[c])}else o=r;return r=o.ref,{$$typeof:t,type:i,key:l,ref:r!==void 0?r:null,props:o}}return qc.Fragment=e,qc.jsx=n,qc.jsxs=n,qc}var Qw;function tL(){return Qw||(Qw=1,Ev.exports=eL()),Ev.exports}var S=tL(),Sv={exports:{}},$e={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xw;function nL(){if(Xw)return $e;Xw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),T=Symbol.iterator;function b(j){return j===null||typeof j!="object"?null:(j=T&&j[T]||j["@@iterator"],typeof j=="function"?j:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,D={};function O(j,ee,ne){this.props=j,this.context=ee,this.refs=D,this.updater=ne||C}O.prototype.isReactComponent={},O.prototype.setState=function(j,ee){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,ee,"setState")},O.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function k(){}k.prototype=O.prototype;function F(j,ee,ne){this.props=j,this.context=ee,this.refs=D,this.updater=ne||C}var G=F.prototype=new k;G.constructor=F,N(G,O.prototype),G.isPureReactComponent=!0;var K=Array.isArray;function H(){}var R={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function P(j,ee,ne){var oe=ne.ref;return{$$typeof:t,type:j,key:ee,ref:oe!==void 0?oe:null,props:ne}}function U(j,ee){return P(j.type,ee,j.props)}function q(j){return typeof j=="object"&&j!==null&&j.$$typeof===t}function V(j){var ee={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ne){return ee[ne]})}var z=/\/+/g;function Ee(j,ee){return typeof j=="object"&&j!==null&&j.key!=null?V(""+j.key):ee.toString(36)}function Ne(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(H,H):(j.status="pending",j.then(function(ee){j.status==="pending"&&(j.status="fulfilled",j.value=ee)},function(ee){j.status==="pending"&&(j.status="rejected",j.reason=ee)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function W(j,ee,ne,oe,ye){var Oe=typeof j;(Oe==="undefined"||Oe==="boolean")&&(j=null);var Ie=!1;if(j===null)Ie=!0;else switch(Oe){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(j.$$typeof){case t:case e:Ie=!0;break;case p:return Ie=j._init,W(Ie(j._payload),ee,ne,oe,ye)}}if(Ie)return ye=ye(j),Ie=oe===""?"."+Ee(j,0):oe,K(ye)?(ne="",Ie!=null&&(ne=Ie.replace(z,"$&/")+"/"),W(ye,ee,ne,"",function(qn){return qn})):ye!=null&&(q(ye)&&(ye=U(ye,ne+(ye.key==null||j&&j.key===ye.key?"":(""+ye.key).replace(z,"$&/")+"/")+Ie)),ee.push(ye)),1;Ie=0;var Vt=oe===""?".":oe+":";if(K(j))for(var At=0;At<j.length;At++)oe=j[At],Oe=Vt+Ee(oe,At),Ie+=W(oe,ee,ne,Oe,ye);else if(At=b(j),typeof At=="function")for(j=At.call(j),At=0;!(oe=j.next()).done;)oe=oe.value,Oe=Vt+Ee(oe,At++),Ie+=W(oe,ee,ne,Oe,ye);else if(Oe==="object"){if(typeof j.then=="function")return W(Ne(j),ee,ne,oe,ye);throw ee=String(j),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function se(j,ee,ne){if(j==null)return j;var oe=[],ye=0;return W(j,oe,"","",function(Oe){return ee.call(ne,Oe,ye++)}),oe}function he(j){if(j._status===-1){var ee=j._result;ee=ee(),ee.then(function(ne){(j._status===0||j._status===-1)&&(j._status=1,j._result=ne)},function(ne){(j._status===0||j._status===-1)&&(j._status=2,j._result=ne)}),j._status===-1&&(j._status=0,j._result=ee)}if(j._status===1)return j._result.default;throw j._result}var xe=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},Ae={map:se,forEach:function(j,ee,ne){se(j,function(){ee.apply(this,arguments)},ne)},count:function(j){var ee=0;return se(j,function(){ee++}),ee},toArray:function(j){return se(j,function(ee){return ee})||[]},only:function(j){if(!q(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return $e.Activity=v,$e.Children=Ae,$e.Component=O,$e.Fragment=n,$e.Profiler=r,$e.PureComponent=F,$e.StrictMode=i,$e.Suspense=d,$e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,$e.__COMPILER_RUNTIME={__proto__:null,c:function(j){return R.H.useMemoCache(j)}},$e.cache=function(j){return function(){return j.apply(null,arguments)}},$e.cacheSignal=function(){return null},$e.cloneElement=function(j,ee,ne){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var oe=N({},j.props),ye=j.key;if(ee!=null)for(Oe in ee.key!==void 0&&(ye=""+ee.key),ee)!I.call(ee,Oe)||Oe==="key"||Oe==="__self"||Oe==="__source"||Oe==="ref"&&ee.ref===void 0||(oe[Oe]=ee[Oe]);var Oe=arguments.length-2;if(Oe===1)oe.children=ne;else if(1<Oe){for(var Ie=Array(Oe),Vt=0;Vt<Oe;Vt++)Ie[Vt]=arguments[Vt+2];oe.children=Ie}return P(j.type,ye,oe)},$e.createContext=function(j){return j={$$typeof:l,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:o,_context:j},j},$e.createElement=function(j,ee,ne){var oe,ye={},Oe=null;if(ee!=null)for(oe in ee.key!==void 0&&(Oe=""+ee.key),ee)I.call(ee,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(ye[oe]=ee[oe]);var Ie=arguments.length-2;if(Ie===1)ye.children=ne;else if(1<Ie){for(var Vt=Array(Ie),At=0;At<Ie;At++)Vt[At]=arguments[At+2];ye.children=Vt}if(j&&j.defaultProps)for(oe in Ie=j.defaultProps,Ie)ye[oe]===void 0&&(ye[oe]=Ie[oe]);return P(j,Oe,ye)},$e.createRef=function(){return{current:null}},$e.forwardRef=function(j){return{$$typeof:c,render:j}},$e.isValidElement=q,$e.lazy=function(j){return{$$typeof:p,_payload:{_status:-1,_result:j},_init:he}},$e.memo=function(j,ee){return{$$typeof:f,type:j,compare:ee===void 0?null:ee}},$e.startTransition=function(j){var ee=R.T,ne={};R.T=ne;try{var oe=j(),ye=R.S;ye!==null&&ye(ne,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(H,xe)}catch(Oe){xe(Oe)}finally{ee!==null&&ne.types!==null&&(ee.types=ne.types),R.T=ee}},$e.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},$e.use=function(j){return R.H.use(j)},$e.useActionState=function(j,ee,ne){return R.H.useActionState(j,ee,ne)},$e.useCallback=function(j,ee){return R.H.useCallback(j,ee)},$e.useContext=function(j){return R.H.useContext(j)},$e.useDebugValue=function(){},$e.useDeferredValue=function(j,ee){return R.H.useDeferredValue(j,ee)},$e.useEffect=function(j,ee){return R.H.useEffect(j,ee)},$e.useEffectEvent=function(j){return R.H.useEffectEvent(j)},$e.useId=function(){return R.H.useId()},$e.useImperativeHandle=function(j,ee,ne){return R.H.useImperativeHandle(j,ee,ne)},$e.useInsertionEffect=function(j,ee){return R.H.useInsertionEffect(j,ee)},$e.useLayoutEffect=function(j,ee){return R.H.useLayoutEffect(j,ee)},$e.useMemo=function(j,ee){return R.H.useMemo(j,ee)},$e.useOptimistic=function(j,ee){return R.H.useOptimistic(j,ee)},$e.useReducer=function(j,ee,ne){return R.H.useReducer(j,ee,ne)},$e.useRef=function(j){return R.H.useRef(j)},$e.useState=function(j){return R.H.useState(j)},$e.useSyncExternalStore=function(j,ee,ne){return R.H.useSyncExternalStore(j,ee,ne)},$e.useTransition=function(){return R.H.useTransition()},$e.version="19.2.1",$e}var Zw;function R_(){return Zw||(Zw=1,Sv.exports=nL()),Sv.exports}var B=R_();const Pn=S1(B);var bv={exports:{}},zc={},wv={exports:{}},xv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ex;function iL(){return ex||(ex=1,(function(t){function e(W,se){var he=W.length;W.push(se);e:for(;0<he;){var xe=he-1>>>1,Ae=W[xe];if(0<r(Ae,se))W[xe]=se,W[he]=Ae,he=xe;else break e}}function n(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var se=W[0],he=W.pop();if(he!==se){W[0]=he;e:for(var xe=0,Ae=W.length,j=Ae>>>1;xe<j;){var ee=2*(xe+1)-1,ne=W[ee],oe=ee+1,ye=W[oe];if(0>r(ne,he))oe<Ae&&0>r(ye,ne)?(W[xe]=ye,W[oe]=he,xe=oe):(W[xe]=ne,W[ee]=he,xe=ee);else if(oe<Ae&&0>r(ye,he))W[xe]=ye,W[oe]=he,xe=oe;else break e}}return se}function r(W,se){var he=W.sortIndex-se.sortIndex;return he!==0?he:W.id-se.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var d=[],f=[],p=1,v=null,T=3,b=!1,C=!1,N=!1,D=!1,O=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function G(W){for(var se=n(f);se!==null;){if(se.callback===null)i(f);else if(se.startTime<=W)i(f),se.sortIndex=se.expirationTime,e(d,se);else break;se=n(f)}}function K(W){if(N=!1,G(W),!C)if(n(d)!==null)C=!0,H||(H=!0,V());else{var se=n(f);se!==null&&Ne(K,se.startTime-W)}}var H=!1,R=-1,I=5,P=-1;function U(){return D?!0:!(t.unstable_now()-P<I)}function q(){if(D=!1,H){var W=t.unstable_now();P=W;var se=!0;try{e:{C=!1,N&&(N=!1,k(R),R=-1),b=!0;var he=T;try{t:{for(G(W),v=n(d);v!==null&&!(v.expirationTime>W&&U());){var xe=v.callback;if(typeof xe=="function"){v.callback=null,T=v.priorityLevel;var Ae=xe(v.expirationTime<=W);if(W=t.unstable_now(),typeof Ae=="function"){v.callback=Ae,G(W),se=!0;break t}v===n(d)&&i(d),G(W)}else i(d);v=n(d)}if(v!==null)se=!0;else{var j=n(f);j!==null&&Ne(K,j.startTime-W),se=!1}}break e}finally{v=null,T=he,b=!1}se=void 0}}finally{se?V():H=!1}}}var V;if(typeof F=="function")V=function(){F(q)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Ee=z.port2;z.port1.onmessage=q,V=function(){Ee.postMessage(null)}}else V=function(){O(q,0)};function Ne(W,se){R=O(function(){W(t.unstable_now())},se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(W){switch(T){case 1:case 2:case 3:var se=3;break;default:se=T}var he=T;T=se;try{return W()}finally{T=he}},t.unstable_requestPaint=function(){D=!0},t.unstable_runWithPriority=function(W,se){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var he=T;T=W;try{return se()}finally{T=he}},t.unstable_scheduleCallback=function(W,se,he){var xe=t.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?xe+he:xe):he=xe,W){case 1:var Ae=-1;break;case 2:Ae=250;break;case 5:Ae=1073741823;break;case 4:Ae=1e4;break;default:Ae=5e3}return Ae=he+Ae,W={id:p++,callback:se,priorityLevel:W,startTime:he,expirationTime:Ae,sortIndex:-1},he>xe?(W.sortIndex=he,e(f,W),n(d)===null&&W===n(f)&&(N?(k(R),R=-1):N=!0,Ne(K,he-xe))):(W.sortIndex=Ae,e(d,W),C||b||(C=!0,H||(H=!0,V()))),W},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(W){var se=T;return function(){var he=T;T=se;try{return W.apply(this,arguments)}finally{T=he}}}})(xv)),xv}var tx;function rL(){return tx||(tx=1,wv.exports=iL()),wv.exports}var Av={exports:{}},ei={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nx;function sL(){if(nx)return ei;nx=1;var t=R_();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(d,f,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:d,containerInfo:f,implementation:p}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return ei.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ei.createPortal=function(d,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,p)},ei.flushSync=function(d){var f=l.T,p=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=f,i.p=p,i.d.f()}},ei.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},ei.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},ei.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var p=f.as,v=c(p,f.crossOrigin),T=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:T,fetchPriority:b}):p==="script"&&i.d.X(d,{crossOrigin:v,integrity:T,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},ei.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=c(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},ei.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,v=c(p,f.crossOrigin);i.d.L(d,p,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},ei.preloadModule=function(d,f){if(typeof d=="string")if(f){var p=c(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},ei.requestFormReset=function(d){i.d.r(d)},ei.unstable_batchedUpdates=function(d,f){return d(f)},ei.useFormState=function(d,f,p){return l.H.useFormState(d,f,p)},ei.useFormStatus=function(){return l.H.useHostTransitionStatus()},ei.version="19.2.1",ei}var ix;function b1(){if(ix)return Av.exports;ix=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Av.exports=sL(),Av.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rx;function oL(){if(rx)return zc;rx=1;var t=rL(),e=R_(),n=b1();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function l(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function c(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function d(s){if(o(s)!==s)throw Error(i(188))}function f(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(i(188));return a!==s?null:s}for(var u=s,h=a;;){var _=u.return;if(_===null)break;var E=_.alternate;if(E===null){if(h=_.return,h!==null){u=h;continue}break}if(_.child===E.child){for(E=_.child;E;){if(E===u)return d(_),s;if(E===h)return d(_),a;E=E.sibling}throw Error(i(188))}if(u.return!==h.return)u=_,h=E;else{for(var x=!1,M=_.child;M;){if(M===u){x=!0,u=_,h=E;break}if(M===h){x=!0,h=_,u=E;break}M=M.sibling}if(!x){for(M=E.child;M;){if(M===u){x=!0,u=E,h=_;break}if(M===h){x=!0,h=E,u=_;break}M=M.sibling}if(!x)throw Error(i(189))}}if(u.alternate!==h)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?s:a}function p(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=p(s),a!==null)return a;s=s.sibling}return null}var v=Object.assign,T=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),F=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function V(s){return s===null||typeof s!="object"?null:(s=q&&s[q]||s["@@iterator"],typeof s=="function"?s:null)}var z=Symbol.for("react.client.reference");function Ee(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===z?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case N:return"Fragment";case O:return"Profiler";case D:return"StrictMode";case K:return"Suspense";case H:return"SuspenseList";case P:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case C:return"Portal";case F:return s.displayName||"Context";case k:return(s._context.displayName||"Context")+".Consumer";case G:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case R:return a=s.displayName||null,a!==null?a:Ee(s.type)||"Memo";case I:a=s._payload,s=s._init;try{return Ee(s(a))}catch{}}return null}var Ne=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},xe=[],Ae=-1;function j(s){return{current:s}}function ee(s){0>Ae||(s.current=xe[Ae],xe[Ae]=null,Ae--)}function ne(s,a){Ae++,xe[Ae]=s.current,s.current=a}var oe=j(null),ye=j(null),Oe=j(null),Ie=j(null);function Vt(s,a){switch(ne(Oe,a),ne(ye,s),ne(oe,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?_w(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=_w(a),s=Tw(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ee(oe),ne(oe,s)}function At(){ee(oe),ee(ye),ee(Oe)}function qn(s){s.memoizedState!==null&&ne(Ie,s);var a=oe.current,u=Tw(a,s.type);a!==u&&(ne(ye,s),ne(oe,u))}function wi(s){ye.current===s&&(ee(oe),ee(ye)),Ie.current===s&&(ee(Ie),Oc._currentValue=he)}var Ft,zn;function Cn(s){if(Ft===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);Ft=a&&a[1]||"",zn=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ft+s+zn}var Mn=!1;function ci(s,a){if(!s||Mn)return"";Mn=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(ie){var te=ie}Reflect.construct(s,[],ce)}else{try{ce.call()}catch(ie){te=ie}s.call(ce.prototype)}}else{try{throw Error()}catch(ie){te=ie}(ce=s())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(ie){if(ie&&te&&typeof ie.stack=="string")return[ie.stack,te.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=h.DetermineComponentFrameRoot(),x=E[0],M=E[1];if(x&&M){var $=x.split(`
`),Z=M.split(`
`);for(_=h=0;h<$.length&&!$[h].includes("DetermineComponentFrameRoot");)h++;for(;_<Z.length&&!Z[_].includes("DetermineComponentFrameRoot");)_++;if(h===$.length||_===Z.length)for(h=$.length-1,_=Z.length-1;1<=h&&0<=_&&$[h]!==Z[_];)_--;for(;1<=h&&0<=_;h--,_--)if($[h]!==Z[_]){if(h!==1||_!==1)do if(h--,_--,0>_||$[h]!==Z[_]){var ae=`
`+$[h].replace(" at new "," at ");return s.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",s.displayName)),ae}while(1<=h&&0<=_);break}}}finally{Mn=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?Cn(u):""}function rr(s,a){switch(s.tag){case 26:case 27:case 5:return Cn(s.type);case 16:return Cn("Lazy");case 13:return s.child!==a&&a!==null?Cn("Suspense Fallback"):Cn("Suspense");case 19:return Cn("SuspenseList");case 0:case 15:return ci(s.type,!1);case 11:return ci(s.type.render,!1);case 1:return ci(s.type,!0);case 31:return Cn("Activity");default:return""}}function xi(s){try{var a="",u=null;do a+=rr(s,u),u=s,s=s.return;while(s);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var Ai=Object.prototype.hasOwnProperty,kn=t.unstable_scheduleCallback,di=t.unstable_cancelCallback,wr=t.unstable_shouldYield,zi=t.unstable_requestPaint,bt=t.unstable_now,yn=t.unstable_getCurrentPriorityLevel,ke=t.unstable_ImmediatePriority,Lt=t.unstable_UserBlockingPriority,Qt=t.unstable_NormalPriority,tn=t.unstable_LowPriority,xr=t.unstable_IdlePriority,ua=t.log,In=t.unstable_setDisableYieldValue,fi=null,Bt=null;function le(s){if(typeof ua=="function"&&In(s),Bt&&typeof Bt.setStrictMode=="function")try{Bt.setStrictMode(fi,s)}catch{}}var pe=Math.clz32?Math.clz32:Ve,Te=Math.log,ze=Math.LN2;function Ve(s){return s>>>=0,s===0?32:31-(Te(s)/ze|0)|0}var Qe=256,Ye=262144,et=4194304;function tt(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Me(s,a,u){var h=s.pendingLanes;if(h===0)return 0;var _=0,E=s.suspendedLanes,x=s.pingedLanes;s=s.warmLanes;var M=h&134217727;return M!==0?(h=M&~E,h!==0?_=tt(h):(x&=M,x!==0?_=tt(x):u||(u=M&~s,u!==0&&(_=tt(u))))):(M=h&~E,M!==0?_=tt(M):x!==0?_=tt(x):u||(u=h&~s,u!==0&&(_=tt(u)))),_===0?0:a!==0&&a!==_&&(a&E)===0&&(E=_&-_,u=a&-a,E>=u||E===32&&(u&4194048)!==0)?a:_}function He(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function cn(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ci(){var s=et;return et<<=1,(et&62914560)===0&&(et=4194304),s}function Yt(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function Ct(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ft(s,a,u,h,_,E){var x=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var M=s.entanglements,$=s.expirationTimes,Z=s.hiddenUpdates;for(u=x&~u;0<u;){var ae=31-pe(u),ce=1<<ae;M[ae]=0,$[ae]=-1;var te=Z[ae];if(te!==null)for(Z[ae]=null,ae=0;ae<te.length;ae++){var ie=te[ae];ie!==null&&(ie.lane&=-536870913)}u&=~ce}h!==0&&Hn(s,h,0),E!==0&&_===0&&s.tag!==0&&(s.suspendedLanes|=E&~(x&~a))}function Hn(s,a,u){s.pendingLanes|=a,s.suspendedLanes&=~a;var h=31-pe(a);s.entangledLanes|=a,s.entanglements[h]=s.entanglements[h]|1073741824|u&261930}function Ot(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var h=31-pe(u),_=1<<h;_&a|s[h]&a&&(s[h]|=a),u&=~_}}function dn(s,a){var u=a&-a;return u=(u&42)!==0?1:Ii(u),(u&(s.suspendedLanes|a))!==0?0:u}function Ii(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Rn(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function vn(){var s=se.p;return s!==0?s:(s=window.event,s===void 0?32:Hw(s.type))}function Hi(s,a){var u=se.p;try{return se.p=s,a()}finally{se.p=u}}var me=Math.random().toString(36).slice(2),be="__reactFiber$"+me,qe="__reactProps$"+me,Dt="__reactContainer$"+me,Ri="__reactEvents$"+me,hi="__reactListeners$"+me,Ar="__reactHandles$"+me,pi="__reactResources$"+me,Ni="__reactMarker$"+me;function sr(s){delete s[be],delete s[qe],delete s[Ri],delete s[hi],delete s[Ar]}function Pi(s){var a=s[be];if(a)return a;for(var u=s.parentNode;u;){if(a=u[Dt]||u[be]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=Cw(s);s!==null;){if(u=s[be])return u;s=Cw(s)}return a}s=u,u=s.parentNode}return null}function or(s){if(s=s[be]||s[Dt]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function Gr(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function mi(s){var a=s[pi];return a||(a=s[pi]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Jt(s){s[Ni]=!0}var Cr=new Set,Ir={};function gi(s,a){jr(s,a),jr(s+"Capture",a)}function jr(s,a){for(Ir[s]=a,s=0;s<a.length;s++)Cr.add(a[s])}var Sg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yu={},Ju={};function _f(s){return Ai.call(Ju,s)?!0:Ai.call(Yu,s)?!1:Sg.test(s)?Ju[s]=!0:(Yu[s]=!0,!1)}function Ys(s,a,u){if(_f(a))if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+u)}}function Js(s,a,u){if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+u)}}function ar(s,a,u,h){if(h===null)s.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(a,u,""+h)}}function yi(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Tf(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function bg(s,a,u){var h=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var _=h.get,E=h.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return _.call(this)},set:function(x){u=""+x,E.call(this,x)}}),Object.defineProperty(s,a,{enumerable:h.enumerable}),{getValue:function(){return u},setValue:function(x){u=""+x},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function ul(s){if(!s._valueTracker){var a=Tf(s)?"checked":"value";s._valueTracker=bg(s,a,""+s[a])}}function Wu(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),h="";return s&&(h=Tf(s)?s.checked?"true":"false":s.value),s=h,s!==u?(a.setValue(s),!0):!1}function cl(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var ds=/[\n"\\]/g;function nn(s){return s.replace(ds,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Ws(s,a,u,h,_,E,x,M){s.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?s.type=x:s.removeAttribute("type"),a!=null?x==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+yi(a)):s.value!==""+yi(a)&&(s.value=""+yi(a)):x!=="submit"&&x!=="reset"||s.removeAttribute("value"),a!=null?dl(s,x,yi(a)):u!=null?dl(s,x,yi(u)):h!=null&&s.removeAttribute("value"),_==null&&E!=null&&(s.defaultChecked=!!E),_!=null&&(s.checked=_&&typeof _!="function"&&typeof _!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?s.name=""+yi(M):s.removeAttribute("name")}function ca(s,a,u,h,_,E,x,M){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.type=E),a!=null||u!=null){if(!(E!=="submit"&&E!=="reset"||a!=null)){ul(s);return}u=u!=null?""+yi(u):"",a=a!=null?""+yi(a):u,M||a===s.value||(s.value=a),s.defaultValue=a}h=h??_,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=M?s.checked:!!h,s.defaultChecked=!!h,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(s.name=x),ul(s)}function dl(s,a,u){a==="number"&&cl(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function ht(s,a,u,h){if(s=s.options,a){a={};for(var _=0;_<u.length;_++)a["$"+u[_]]=!0;for(u=0;u<s.length;u++)_=a.hasOwnProperty("$"+s[u].value),s[u].selected!==_&&(s[u].selected=_),_&&h&&(s[u].defaultSelected=!0)}else{for(u=""+yi(u),a=null,_=0;_<s.length;_++){if(s[_].value===u){s[_].selected=!0,h&&(s[_].defaultSelected=!0);return}a!==null||s[_].disabled||(a=s[_])}a!==null&&(a.selected=!0)}}function da(s,a,u){if(a!=null&&(a=""+yi(a),a!==s.value&&(s.value=a),u==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=u!=null?""+yi(u):""}function Qs(s,a,u,h){if(a==null){if(h!=null){if(u!=null)throw Error(i(92));if(Ne(h)){if(1<h.length)throw Error(i(93));h=h[0]}u=h}u==null&&(u=""),a=u}u=yi(a),s.defaultValue=u,h=s.textContent,h===u&&h!==""&&h!==null&&(s.value=h),ul(s)}function lr(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var wg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qu(s,a,u){var h=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?h?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":h?s.setProperty(a,u):typeof u!="number"||u===0||wg.has(a)?a==="float"?s.cssFloat=u:s[a]=(""+u).trim():s[a]=u+"px"}function Ef(s,a,u){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,u!=null){for(var h in u)!u.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var _ in a)h=a[_],a.hasOwnProperty(_)&&u[_]!==h&&Qu(s,_,h)}else for(var E in a)a.hasOwnProperty(E)&&Qu(s,E,a[E])}function Xu(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ag=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $r(s){return Ag.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Vn(){}var fl=null;function hl(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var fs=null,Gi=null;function Sf(s){var a=or(s);if(a&&(s=a.stateNode)){var u=s[qe]||null;e:switch(s=a.stateNode,a.type){case"input":if(Ws(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+nn(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var h=u[a];if(h!==s&&h.form===s.form){var _=h[qe]||null;if(!_)throw Error(i(90));Ws(h,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(a=0;a<u.length;a++)h=u[a],h.form===s.form&&Wu(h)}break e;case"textarea":da(s,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&ht(s,!!u.multiple,a,!1)}}}var Zu=!1;function bf(s,a,u){if(Zu)return s(a,u);Zu=!0;try{var h=s(a);return h}finally{if(Zu=!1,(fs!==null||Gi!==null)&&(_h(),fs&&(a=fs,s=Gi,Gi=fs=null,Sf(a),s)))for(a=0;a<s.length;a++)Sf(s[a])}}function Di(s,a){var u=s.stateNode;if(u===null)return null;var h=u[qe]||null;if(h===null)return null;u=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(i(231,a,typeof u));return u}var Rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ec=!1;if(Rr)try{var Kr={};Object.defineProperty(Kr,"passive",{get:function(){ec=!0}}),window.addEventListener("test",Kr,Kr),window.removeEventListener("test",Kr,Kr)}catch{ec=!1}var ji=null,pl=null,Yr=null;function Xs(){if(Yr)return Yr;var s,a=pl,u=a.length,h,_="value"in ji?ji.value:ji.textContent,E=_.length;for(s=0;s<u&&a[s]===_[s];s++);var x=u-s;for(h=1;h<=x&&a[u-h]===_[E-h];h++);return Yr=_.slice(s,1<h?1-h:void 0)}function fa(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Zs(){return!0}function qt(){return!1}function Zn(s){function a(u,h,_,E,x){this._reactName=u,this._targetInst=_,this.type=h,this.nativeEvent=E,this.target=x,this.currentTarget=null;for(var M in s)s.hasOwnProperty(M)&&(u=s[M],this[M]=u?u(E):E[M]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Zs:qt,this.isPropagationStopped=qt,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Zs)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Zs)},persist:function(){},isPersistent:Zs}),a}var hs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ha=Zn(hs),eo=v({},hs,{view:0,detail:0}),wf=Zn(eo),to,ml,vi,pa=v({},eo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:io,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==vi&&(vi&&s.type==="mousemove"?(to=s.screenX-vi.screenX,ml=s.screenY-vi.screenY):ml=to=0,vi=s),to)},movementY:function(s){return"movementY"in s?s.movementY:ml}}),xf=Zn(pa),ma=v({},pa,{dataTransfer:0}),Af=Zn(ma),tc=v({},eo,{relatedTarget:0}),no=Zn(tc),Cf=v({},hs,{animationName:0,elapsedTime:0,pseudoElement:0}),gl=Zn(Cf),Cg=v({},hs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),If=Zn(Cg),ga=v({},hs,{data:0}),nc=Zn(ga),Rf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ic={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nf(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=rc[s])?!!a[s]:!1}function io(){return Nf}var Pf=v({},eo,{key:function(s){if(s.key){var a=Rf[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=fa(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ic[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:io,charCode:function(s){return s.type==="keypress"?fa(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?fa(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Df=Zn(Pf),ps=v({},pa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sc=Zn(ps),Mf=v({},eo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:io}),kf=Zn(Mf),Vf=v({},hs,{propertyName:0,elapsedTime:0,pseudoElement:0}),yl=Zn(Vf),_i=v({},pa,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Lf=Zn(_i),Of=v({},hs,{newState:0,oldState:0}),ro=Zn(Of),g=[9,13,27,32],w=Rr&&"CompositionEvent"in window,A=null;Rr&&"documentMode"in document&&(A=document.documentMode);var L=Rr&&"TextEvent"in window&&!A,Q=Rr&&(!w||A&&8<A&&11>=A),re=" ",ge=!1;function Tt(s,a){switch(s){case"keyup":return g.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _n(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Xe=!1;function Ln(s,a){switch(s){case"compositionend":return _n(a);case"keypress":return a.which!==32?null:(ge=!0,re);case"textInput":return s=a.data,s===re&&ge?null:s;default:return null}}function On(s,a){if(Xe)return s==="compositionend"||!w&&Tt(s,a)?(s=Xs(),Yr=pl=ji=null,Xe=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Q&&a.locale!=="ko"?null:a.data;default:return null}}var so={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mi(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!so[s.type]:a==="textarea"}function ya(s,a,u,h){fs?Gi?Gi.push(h):Gi=[h]:fs=h,a=Ah(a,"onChange"),0<a.length&&(u=new ha("onChange","change",null,u,h),s.push({event:u,listeners:a}))}var ms=null,oc=null;function C2(s){hw(s,0)}function Uf(s){var a=Gr(s);if(Wu(a))return s}function DE(s,a){if(s==="change")return a}var ME=!1;if(Rr){var Ig;if(Rr){var Rg="oninput"in document;if(!Rg){var kE=document.createElement("div");kE.setAttribute("oninput","return;"),Rg=typeof kE.oninput=="function"}Ig=Rg}else Ig=!1;ME=Ig&&(!document.documentMode||9<document.documentMode)}function VE(){ms&&(ms.detachEvent("onpropertychange",LE),oc=ms=null)}function LE(s){if(s.propertyName==="value"&&Uf(oc)){var a=[];ya(a,oc,s,hl(s)),bf(C2,a)}}function I2(s,a,u){s==="focusin"?(VE(),ms=a,oc=u,ms.attachEvent("onpropertychange",LE)):s==="focusout"&&VE()}function R2(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Uf(oc)}function N2(s,a){if(s==="click")return Uf(a)}function P2(s,a){if(s==="input"||s==="change")return Uf(a)}function D2(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var $i=typeof Object.is=="function"?Object.is:D2;function ac(s,a){if($i(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),h=Object.keys(a);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var _=u[h];if(!Ai.call(a,_)||!$i(s[_],a[_]))return!1}return!0}function OE(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function UE(s,a){var u=OE(s);s=0;for(var h;u;){if(u.nodeType===3){if(h=s+u.textContent.length,s<=a&&h>=a)return{node:u,offset:a-s};s=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=OE(u)}}function FE(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?FE(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function BE(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=cl(s.document);a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=cl(s.document)}return a}function Ng(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var M2=Rr&&"documentMode"in document&&11>=document.documentMode,vl=null,Pg=null,lc=null,Dg=!1;function qE(s,a,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Dg||vl==null||vl!==cl(h)||(h=vl,"selectionStart"in h&&Ng(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),lc&&ac(lc,h)||(lc=h,h=Ah(Pg,"onSelect"),0<h.length&&(a=new ha("onSelect","select",null,a,u),s.push({event:a,listeners:h}),a.target=vl)))}function va(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var _l={animationend:va("Animation","AnimationEnd"),animationiteration:va("Animation","AnimationIteration"),animationstart:va("Animation","AnimationStart"),transitionrun:va("Transition","TransitionRun"),transitionstart:va("Transition","TransitionStart"),transitioncancel:va("Transition","TransitionCancel"),transitionend:va("Transition","TransitionEnd")},Mg={},zE={};Rr&&(zE=document.createElement("div").style,"AnimationEvent"in window||(delete _l.animationend.animation,delete _l.animationiteration.animation,delete _l.animationstart.animation),"TransitionEvent"in window||delete _l.transitionend.transition);function _a(s){if(Mg[s])return Mg[s];if(!_l[s])return s;var a=_l[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in zE)return Mg[s]=a[u];return s}var HE=_a("animationend"),GE=_a("animationiteration"),jE=_a("animationstart"),k2=_a("transitionrun"),V2=_a("transitionstart"),L2=_a("transitioncancel"),$E=_a("transitionend"),KE=new Map,kg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kg.push("scrollEnd");function Nr(s,a){KE.set(s,a),gi(a,[s])}var Ff=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},ur=[],Tl=0,Vg=0;function Bf(){for(var s=Tl,a=Vg=Tl=0;a<s;){var u=ur[a];ur[a++]=null;var h=ur[a];ur[a++]=null;var _=ur[a];ur[a++]=null;var E=ur[a];if(ur[a++]=null,h!==null&&_!==null){var x=h.pending;x===null?_.next=_:(_.next=x.next,x.next=_),h.pending=_}E!==0&&YE(u,_,E)}}function qf(s,a,u,h){ur[Tl++]=s,ur[Tl++]=a,ur[Tl++]=u,ur[Tl++]=h,Vg|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function Lg(s,a,u,h){return qf(s,a,u,h),zf(s)}function Ta(s,a){return qf(s,null,null,a),zf(s)}function YE(s,a,u){s.lanes|=u;var h=s.alternate;h!==null&&(h.lanes|=u);for(var _=!1,E=s.return;E!==null;)E.childLanes|=u,h=E.alternate,h!==null&&(h.childLanes|=u),E.tag===22&&(s=E.stateNode,s===null||s._visibility&1||(_=!0)),s=E,E=E.return;return s.tag===3?(E=s.stateNode,_&&a!==null&&(_=31-pe(u),s=E.hiddenUpdates,h=s[_],h===null?s[_]=[a]:h.push(a),a.lane=u|536870912),E):null}function zf(s){if(50<Nc)throw Nc=0,jy=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var El={};function O2(s,a,u,h){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ki(s,a,u,h){return new O2(s,a,u,h)}function Og(s){return s=s.prototype,!(!s||!s.isReactComponent)}function gs(s,a){var u=s.alternate;return u===null?(u=Ki(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function JE(s,a){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,a=u.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function Hf(s,a,u,h,_,E){var x=0;if(h=s,typeof s=="function")Og(s)&&(x=1);else if(typeof s=="string")x=zV(s,u,oe.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case P:return s=Ki(31,u,a,_),s.elementType=P,s.lanes=E,s;case N:return Ea(u.children,_,E,a);case D:x=8,_|=24;break;case O:return s=Ki(12,u,a,_|2),s.elementType=O,s.lanes=E,s;case K:return s=Ki(13,u,a,_),s.elementType=K,s.lanes=E,s;case H:return s=Ki(19,u,a,_),s.elementType=H,s.lanes=E,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case F:x=10;break e;case k:x=9;break e;case G:x=11;break e;case R:x=14;break e;case I:x=16,h=null;break e}x=29,u=Error(i(130,s===null?"null":typeof s,"")),h=null}return a=Ki(x,u,a,_),a.elementType=s,a.type=h,a.lanes=E,a}function Ea(s,a,u,h){return s=Ki(7,s,h,a),s.lanes=u,s}function Ug(s,a,u){return s=Ki(6,s,null,a),s.lanes=u,s}function WE(s){var a=Ki(18,null,null,0);return a.stateNode=s,a}function Fg(s,a,u){return a=Ki(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var QE=new WeakMap;function cr(s,a){if(typeof s=="object"&&s!==null){var u=QE.get(s);return u!==void 0?u:(a={value:s,source:a,stack:xi(a)},QE.set(s,a),a)}return{value:s,source:a,stack:xi(a)}}var Sl=[],bl=0,Gf=null,uc=0,dr=[],fr=0,oo=null,Jr=1,Wr="";function ys(s,a){Sl[bl++]=uc,Sl[bl++]=Gf,Gf=s,uc=a}function XE(s,a,u){dr[fr++]=Jr,dr[fr++]=Wr,dr[fr++]=oo,oo=s;var h=Jr;s=Wr;var _=32-pe(h)-1;h&=~(1<<_),u+=1;var E=32-pe(a)+_;if(30<E){var x=_-_%5;E=(h&(1<<x)-1).toString(32),h>>=x,_-=x,Jr=1<<32-pe(a)+_|u<<_|h,Wr=E+s}else Jr=1<<E|u<<_|h,Wr=s}function Bg(s){s.return!==null&&(ys(s,1),XE(s,1,0))}function qg(s){for(;s===Gf;)Gf=Sl[--bl],Sl[bl]=null,uc=Sl[--bl],Sl[bl]=null;for(;s===oo;)oo=dr[--fr],dr[fr]=null,Wr=dr[--fr],dr[fr]=null,Jr=dr[--fr],dr[fr]=null}function ZE(s,a){dr[fr++]=Jr,dr[fr++]=Wr,dr[fr++]=oo,Jr=a.id,Wr=a.overflow,oo=s}var Gn=null,zt=null,ut=!1,ao=null,hr=!1,zg=Error(i(519));function lo(s){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw cc(cr(a,s)),zg}function eS(s){var a=s.stateNode,u=s.type,h=s.memoizedProps;switch(a[be]=s,a[qe]=h,u){case"dialog":it("cancel",a),it("close",a);break;case"iframe":case"object":case"embed":it("load",a);break;case"video":case"audio":for(u=0;u<Dc.length;u++)it(Dc[u],a);break;case"source":it("error",a);break;case"img":case"image":case"link":it("error",a),it("load",a);break;case"details":it("toggle",a);break;case"input":it("invalid",a),ca(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":it("invalid",a);break;case"textarea":it("invalid",a),Qs(a,h.value,h.defaultValue,h.children)}u=h.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||h.suppressHydrationWarning===!0||yw(a.textContent,u)?(h.popover!=null&&(it("beforetoggle",a),it("toggle",a)),h.onScroll!=null&&it("scroll",a),h.onScrollEnd!=null&&it("scrollend",a),h.onClick!=null&&(a.onclick=Vn),a=!0):a=!1,a||lo(s,!0)}function tS(s){for(Gn=s.return;Gn;)switch(Gn.tag){case 5:case 31:case 13:hr=!1;return;case 27:case 3:hr=!0;return;default:Gn=Gn.return}}function wl(s){if(s!==Gn)return!1;if(!ut)return tS(s),ut=!0,!1;var a=s.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||ov(s.type,s.memoizedProps)),u=!u),u&&zt&&lo(s),tS(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));zt=Aw(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));zt=Aw(s)}else a===27?(a=zt,bo(s.type)?(s=dv,dv=null,zt=s):zt=a):zt=Gn?mr(s.stateNode.nextSibling):null;return!0}function Sa(){zt=Gn=null,ut=!1}function Hg(){var s=ao;return s!==null&&(Oi===null?Oi=s:Oi.push.apply(Oi,s),ao=null),s}function cc(s){ao===null?ao=[s]:ao.push(s)}var Gg=j(null),ba=null,vs=null;function uo(s,a,u){ne(Gg,a._currentValue),a._currentValue=u}function _s(s){s._currentValue=Gg.current,ee(Gg)}function jg(s,a,u){for(;s!==null;){var h=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),s===u)break;s=s.return}}function $g(s,a,u,h){var _=s.child;for(_!==null&&(_.return=s);_!==null;){var E=_.dependencies;if(E!==null){var x=_.child;E=E.firstContext;e:for(;E!==null;){var M=E;E=_;for(var $=0;$<a.length;$++)if(M.context===a[$]){E.lanes|=u,M=E.alternate,M!==null&&(M.lanes|=u),jg(E.return,u,s),h||(x=null);break e}E=M.next}}else if(_.tag===18){if(x=_.return,x===null)throw Error(i(341));x.lanes|=u,E=x.alternate,E!==null&&(E.lanes|=u),jg(x,u,s),x=null}else x=_.child;if(x!==null)x.return=_;else for(x=_;x!==null;){if(x===s){x=null;break}if(_=x.sibling,_!==null){_.return=x.return,x=_;break}x=x.return}_=x}}function xl(s,a,u,h){s=null;for(var _=a,E=!1;_!==null;){if(!E){if((_.flags&524288)!==0)E=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var x=_.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var M=_.type;$i(_.pendingProps.value,x.value)||(s!==null?s.push(M):s=[M])}}else if(_===Ie.current){if(x=_.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(s!==null?s.push(Oc):s=[Oc])}_=_.return}s!==null&&$g(a,s,u,h),a.flags|=262144}function jf(s){for(s=s.firstContext;s!==null;){if(!$i(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function wa(s){ba=s,vs=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function jn(s){return nS(ba,s)}function $f(s,a){return ba===null&&wa(s),nS(s,a)}function nS(s,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},vs===null){if(s===null)throw Error(i(308));vs=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else vs=vs.next=a;return u}var U2=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(u,h){s.push(h)}};this.abort=function(){a.aborted=!0,s.forEach(function(u){return u()})}},F2=t.unstable_scheduleCallback,B2=t.unstable_NormalPriority,Tn={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Kg(){return{controller:new U2,data:new Map,refCount:0}}function dc(s){s.refCount--,s.refCount===0&&F2(B2,function(){s.controller.abort()})}var fc=null,Yg=0,Al=0,Cl=null;function q2(s,a){if(fc===null){var u=fc=[];Yg=0,Al=Qy(),Cl={status:"pending",value:void 0,then:function(h){u.push(h)}}}return Yg++,a.then(iS,iS),a}function iS(){if(--Yg===0&&fc!==null){Cl!==null&&(Cl.status="fulfilled");var s=fc;fc=null,Al=0,Cl=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function z2(s,a){var u=[],h={status:"pending",value:null,reason:null,then:function(_){u.push(_)}};return s.then(function(){h.status="fulfilled",h.value=a;for(var _=0;_<u.length;_++)(0,u[_])(a)},function(_){for(h.status="rejected",h.reason=_,_=0;_<u.length;_++)(0,u[_])(void 0)}),h}var rS=W.S;W.S=function(s,a){qb=bt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&q2(s,a),rS!==null&&rS(s,a)};var xa=j(null);function Jg(){var s=xa.current;return s!==null?s:Mt.pooledCache}function Kf(s,a){a===null?ne(xa,xa.current):ne(xa,a.pool)}function sS(){var s=Jg();return s===null?null:{parent:Tn._currentValue,pool:s}}var Il=Error(i(460)),Wg=Error(i(474)),Yf=Error(i(542)),Jf={then:function(){}};function oS(s){return s=s.status,s==="fulfilled"||s==="rejected"}function aS(s,a,u){switch(u=s[u],u===void 0?s.push(a):u!==a&&(a.then(Vn,Vn),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,uS(s),s;default:if(typeof a.status=="string")a.then(Vn,Vn);else{if(s=Mt,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(h){if(a.status==="pending"){var _=a;_.status="fulfilled",_.value=h}},function(h){if(a.status==="pending"){var _=a;_.status="rejected",_.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,uS(s),s}throw Ca=a,Il}}function Aa(s){try{var a=s._init;return a(s._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Ca=u,Il):u}}var Ca=null;function lS(){if(Ca===null)throw Error(i(459));var s=Ca;return Ca=null,s}function uS(s){if(s===Il||s===Yf)throw Error(i(483))}var Rl=null,hc=0;function Wf(s){var a=hc;return hc+=1,Rl===null&&(Rl=[]),aS(Rl,s,a)}function pc(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function Qf(s,a){throw a.$$typeof===T?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function cS(s){function a(J,Y){if(s){var X=J.deletions;X===null?(J.deletions=[Y],J.flags|=16):X.push(Y)}}function u(J,Y){if(!s)return null;for(;Y!==null;)a(J,Y),Y=Y.sibling;return null}function h(J){for(var Y=new Map;J!==null;)J.key!==null?Y.set(J.key,J):Y.set(J.index,J),J=J.sibling;return Y}function _(J,Y){return J=gs(J,Y),J.index=0,J.sibling=null,J}function E(J,Y,X){return J.index=X,s?(X=J.alternate,X!==null?(X=X.index,X<Y?(J.flags|=67108866,Y):X):(J.flags|=67108866,Y)):(J.flags|=1048576,Y)}function x(J){return s&&J.alternate===null&&(J.flags|=67108866),J}function M(J,Y,X,ue){return Y===null||Y.tag!==6?(Y=Ug(X,J.mode,ue),Y.return=J,Y):(Y=_(Y,X),Y.return=J,Y)}function $(J,Y,X,ue){var Pe=X.type;return Pe===N?ae(J,Y,X.props.children,ue,X.key):Y!==null&&(Y.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===I&&Aa(Pe)===Y.type)?(Y=_(Y,X.props),pc(Y,X),Y.return=J,Y):(Y=Hf(X.type,X.key,X.props,null,J.mode,ue),pc(Y,X),Y.return=J,Y)}function Z(J,Y,X,ue){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==X.containerInfo||Y.stateNode.implementation!==X.implementation?(Y=Fg(X,J.mode,ue),Y.return=J,Y):(Y=_(Y,X.children||[]),Y.return=J,Y)}function ae(J,Y,X,ue,Pe){return Y===null||Y.tag!==7?(Y=Ea(X,J.mode,ue,Pe),Y.return=J,Y):(Y=_(Y,X),Y.return=J,Y)}function ce(J,Y,X){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=Ug(""+Y,J.mode,X),Y.return=J,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case b:return X=Hf(Y.type,Y.key,Y.props,null,J.mode,X),pc(X,Y),X.return=J,X;case C:return Y=Fg(Y,J.mode,X),Y.return=J,Y;case I:return Y=Aa(Y),ce(J,Y,X)}if(Ne(Y)||V(Y))return Y=Ea(Y,J.mode,X,null),Y.return=J,Y;if(typeof Y.then=="function")return ce(J,Wf(Y),X);if(Y.$$typeof===F)return ce(J,$f(J,Y),X);Qf(J,Y)}return null}function te(J,Y,X,ue){var Pe=Y!==null?Y.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return Pe!==null?null:M(J,Y,""+X,ue);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case b:return X.key===Pe?$(J,Y,X,ue):null;case C:return X.key===Pe?Z(J,Y,X,ue):null;case I:return X=Aa(X),te(J,Y,X,ue)}if(Ne(X)||V(X))return Pe!==null?null:ae(J,Y,X,ue,null);if(typeof X.then=="function")return te(J,Y,Wf(X),ue);if(X.$$typeof===F)return te(J,Y,$f(J,X),ue);Qf(J,X)}return null}function ie(J,Y,X,ue,Pe){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return J=J.get(X)||null,M(Y,J,""+ue,Pe);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case b:return J=J.get(ue.key===null?X:ue.key)||null,$(Y,J,ue,Pe);case C:return J=J.get(ue.key===null?X:ue.key)||null,Z(Y,J,ue,Pe);case I:return ue=Aa(ue),ie(J,Y,X,ue,Pe)}if(Ne(ue)||V(ue))return J=J.get(X)||null,ae(Y,J,ue,Pe,null);if(typeof ue.then=="function")return ie(J,Y,X,Wf(ue),Pe);if(ue.$$typeof===F)return ie(J,Y,X,$f(Y,ue),Pe);Qf(Y,ue)}return null}function Ce(J,Y,X,ue){for(var Pe=null,pt=null,Re=Y,We=Y=0,ot=null;Re!==null&&We<X.length;We++){Re.index>We?(ot=Re,Re=null):ot=Re.sibling;var mt=te(J,Re,X[We],ue);if(mt===null){Re===null&&(Re=ot);break}s&&Re&&mt.alternate===null&&a(J,Re),Y=E(mt,Y,We),pt===null?Pe=mt:pt.sibling=mt,pt=mt,Re=ot}if(We===X.length)return u(J,Re),ut&&ys(J,We),Pe;if(Re===null){for(;We<X.length;We++)Re=ce(J,X[We],ue),Re!==null&&(Y=E(Re,Y,We),pt===null?Pe=Re:pt.sibling=Re,pt=Re);return ut&&ys(J,We),Pe}for(Re=h(Re);We<X.length;We++)ot=ie(Re,J,We,X[We],ue),ot!==null&&(s&&ot.alternate!==null&&Re.delete(ot.key===null?We:ot.key),Y=E(ot,Y,We),pt===null?Pe=ot:pt.sibling=ot,pt=ot);return s&&Re.forEach(function(Io){return a(J,Io)}),ut&&ys(J,We),Pe}function Le(J,Y,X,ue){if(X==null)throw Error(i(151));for(var Pe=null,pt=null,Re=Y,We=Y=0,ot=null,mt=X.next();Re!==null&&!mt.done;We++,mt=X.next()){Re.index>We?(ot=Re,Re=null):ot=Re.sibling;var Io=te(J,Re,mt.value,ue);if(Io===null){Re===null&&(Re=ot);break}s&&Re&&Io.alternate===null&&a(J,Re),Y=E(Io,Y,We),pt===null?Pe=Io:pt.sibling=Io,pt=Io,Re=ot}if(mt.done)return u(J,Re),ut&&ys(J,We),Pe;if(Re===null){for(;!mt.done;We++,mt=X.next())mt=ce(J,mt.value,ue),mt!==null&&(Y=E(mt,Y,We),pt===null?Pe=mt:pt.sibling=mt,pt=mt);return ut&&ys(J,We),Pe}for(Re=h(Re);!mt.done;We++,mt=X.next())mt=ie(Re,J,We,mt.value,ue),mt!==null&&(s&&mt.alternate!==null&&Re.delete(mt.key===null?We:mt.key),Y=E(mt,Y,We),pt===null?Pe=mt:pt.sibling=mt,pt=mt);return s&&Re.forEach(function(ZV){return a(J,ZV)}),ut&&ys(J,We),Pe}function Nt(J,Y,X,ue){if(typeof X=="object"&&X!==null&&X.type===N&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case b:e:{for(var Pe=X.key;Y!==null;){if(Y.key===Pe){if(Pe=X.type,Pe===N){if(Y.tag===7){u(J,Y.sibling),ue=_(Y,X.props.children),ue.return=J,J=ue;break e}}else if(Y.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===I&&Aa(Pe)===Y.type){u(J,Y.sibling),ue=_(Y,X.props),pc(ue,X),ue.return=J,J=ue;break e}u(J,Y);break}else a(J,Y);Y=Y.sibling}X.type===N?(ue=Ea(X.props.children,J.mode,ue,X.key),ue.return=J,J=ue):(ue=Hf(X.type,X.key,X.props,null,J.mode,ue),pc(ue,X),ue.return=J,J=ue)}return x(J);case C:e:{for(Pe=X.key;Y!==null;){if(Y.key===Pe)if(Y.tag===4&&Y.stateNode.containerInfo===X.containerInfo&&Y.stateNode.implementation===X.implementation){u(J,Y.sibling),ue=_(Y,X.children||[]),ue.return=J,J=ue;break e}else{u(J,Y);break}else a(J,Y);Y=Y.sibling}ue=Fg(X,J.mode,ue),ue.return=J,J=ue}return x(J);case I:return X=Aa(X),Nt(J,Y,X,ue)}if(Ne(X))return Ce(J,Y,X,ue);if(V(X)){if(Pe=V(X),typeof Pe!="function")throw Error(i(150));return X=Pe.call(X),Le(J,Y,X,ue)}if(typeof X.then=="function")return Nt(J,Y,Wf(X),ue);if(X.$$typeof===F)return Nt(J,Y,$f(J,X),ue);Qf(J,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,Y!==null&&Y.tag===6?(u(J,Y.sibling),ue=_(Y,X),ue.return=J,J=ue):(u(J,Y),ue=Ug(X,J.mode,ue),ue.return=J,J=ue),x(J)):u(J,Y)}return function(J,Y,X,ue){try{hc=0;var Pe=Nt(J,Y,X,ue);return Rl=null,Pe}catch(Re){if(Re===Il||Re===Yf)throw Re;var pt=Ki(29,Re,null,J.mode);return pt.lanes=ue,pt.return=J,pt}finally{}}}var Ia=cS(!0),dS=cS(!1),co=!1;function Qg(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xg(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function fo(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function ho(s,a,u){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(vt&2)!==0){var _=h.pending;return _===null?a.next=a:(a.next=_.next,_.next=a),h.pending=a,a=zf(s),YE(s,null,u),a}return qf(s,h,a,u),zf(s)}function mc(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var h=a.lanes;h&=s.pendingLanes,u|=h,a.lanes=u,Ot(s,u)}}function Zg(s,a){var u=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var _=null,E=null;if(u=u.firstBaseUpdate,u!==null){do{var x={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};E===null?_=E=x:E=E.next=x,u=u.next}while(u!==null);E===null?_=E=a:E=E.next=a}else _=E=a;u={baseState:h.baseState,firstBaseUpdate:_,lastBaseUpdate:E,shared:h.shared,callbacks:h.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}var ey=!1;function gc(){if(ey){var s=Cl;if(s!==null)throw s}}function yc(s,a,u,h){ey=!1;var _=s.updateQueue;co=!1;var E=_.firstBaseUpdate,x=_.lastBaseUpdate,M=_.shared.pending;if(M!==null){_.shared.pending=null;var $=M,Z=$.next;$.next=null,x===null?E=Z:x.next=Z,x=$;var ae=s.alternate;ae!==null&&(ae=ae.updateQueue,M=ae.lastBaseUpdate,M!==x&&(M===null?ae.firstBaseUpdate=Z:M.next=Z,ae.lastBaseUpdate=$))}if(E!==null){var ce=_.baseState;x=0,ae=Z=$=null,M=E;do{var te=M.lane&-536870913,ie=te!==M.lane;if(ie?(st&te)===te:(h&te)===te){te!==0&&te===Al&&(ey=!0),ae!==null&&(ae=ae.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var Ce=s,Le=M;te=a;var Nt=u;switch(Le.tag){case 1:if(Ce=Le.payload,typeof Ce=="function"){ce=Ce.call(Nt,ce,te);break e}ce=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Le.payload,te=typeof Ce=="function"?Ce.call(Nt,ce,te):Ce,te==null)break e;ce=v({},ce,te);break e;case 2:co=!0}}te=M.callback,te!==null&&(s.flags|=64,ie&&(s.flags|=8192),ie=_.callbacks,ie===null?_.callbacks=[te]:ie.push(te))}else ie={lane:te,tag:M.tag,payload:M.payload,callback:M.callback,next:null},ae===null?(Z=ae=ie,$=ce):ae=ae.next=ie,x|=te;if(M=M.next,M===null){if(M=_.shared.pending,M===null)break;ie=M,M=ie.next,ie.next=null,_.lastBaseUpdate=ie,_.shared.pending=null}}while(!0);ae===null&&($=ce),_.baseState=$,_.firstBaseUpdate=Z,_.lastBaseUpdate=ae,E===null&&(_.shared.lanes=0),vo|=x,s.lanes=x,s.memoizedState=ce}}function fS(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function hS(s,a){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)fS(u[s],a)}var Nl=j(null),Xf=j(0);function pS(s,a){s=Is,ne(Xf,s),ne(Nl,a),Is=s|a.baseLanes}function ty(){ne(Xf,Is),ne(Nl,Nl.current)}function ny(){Is=Xf.current,ee(Nl),ee(Xf)}var Yi=j(null),pr=null;function po(s){var a=s.alternate;ne(fn,fn.current&1),ne(Yi,s),pr===null&&(a===null||Nl.current!==null||a.memoizedState!==null)&&(pr=s)}function iy(s){ne(fn,fn.current),ne(Yi,s),pr===null&&(pr=s)}function mS(s){s.tag===22?(ne(fn,fn.current),ne(Yi,s),pr===null&&(pr=s)):mo()}function mo(){ne(fn,fn.current),ne(Yi,Yi.current)}function Ji(s){ee(Yi),pr===s&&(pr=null),ee(fn)}var fn=j(0);function Zf(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||uv(u)||cv(u)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ts=0,Je=null,It=null,En=null,eh=!1,Pl=!1,Ra=!1,th=0,vc=0,Dl=null,H2=0;function rn(){throw Error(i(321))}function ry(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!$i(s[u],a[u]))return!1;return!0}function sy(s,a,u,h,_,E){return Ts=E,Je=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,W.H=s===null||s.memoizedState===null?XS:Ty,Ra=!1,E=u(h,_),Ra=!1,Pl&&(E=yS(a,u,h,_)),gS(s),E}function gS(s){W.H=Ec;var a=It!==null&&It.next!==null;if(Ts=0,En=It=Je=null,eh=!1,vc=0,Dl=null,a)throw Error(i(300));s===null||Sn||(s=s.dependencies,s!==null&&jf(s)&&(Sn=!0))}function yS(s,a,u,h){Je=s;var _=0;do{if(Pl&&(Dl=null),vc=0,Pl=!1,25<=_)throw Error(i(301));if(_+=1,En=It=null,s.updateQueue!=null){var E=s.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}W.H=ZS,E=a(u,h)}while(Pl);return E}function G2(){var s=W.H,a=s.useState()[0];return a=typeof a.then=="function"?_c(a):a,s=s.useState()[0],(It!==null?It.memoizedState:null)!==s&&(Je.flags|=1024),a}function oy(){var s=th!==0;return th=0,s}function ay(s,a,u){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~u}function ly(s){if(eh){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}eh=!1}Ts=0,En=It=Je=null,Pl=!1,vc=th=0,Dl=null}function Ti(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return En===null?Je.memoizedState=En=s:En=En.next=s,En}function hn(){if(It===null){var s=Je.alternate;s=s!==null?s.memoizedState:null}else s=It.next;var a=En===null?Je.memoizedState:En.next;if(a!==null)En=a,It=s;else{if(s===null)throw Je.alternate===null?Error(i(467)):Error(i(310));It=s,s={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},En===null?Je.memoizedState=En=s:En=En.next=s}return En}function nh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _c(s){var a=vc;return vc+=1,Dl===null&&(Dl=[]),s=aS(Dl,s,a),a=Je,(En===null?a.memoizedState:En.next)===null&&(a=a.alternate,W.H=a===null||a.memoizedState===null?XS:Ty),s}function ih(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return _c(s);if(s.$$typeof===F)return jn(s)}throw Error(i(438,String(s)))}function uy(s){var a=null,u=Je.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var h=Je.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(_){return _.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=nh(),Je.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(s),h=0;h<s;h++)u[h]=U;return a.index++,u}function Es(s,a){return typeof a=="function"?a(s):a}function rh(s){var a=hn();return cy(a,It,s)}function cy(s,a,u){var h=s.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=u;var _=s.baseQueue,E=h.pending;if(E!==null){if(_!==null){var x=_.next;_.next=E.next,E.next=x}a.baseQueue=_=E,h.pending=null}if(E=s.baseState,_===null)s.memoizedState=E;else{a=_.next;var M=x=null,$=null,Z=a,ae=!1;do{var ce=Z.lane&-536870913;if(ce!==Z.lane?(st&ce)===ce:(Ts&ce)===ce){var te=Z.revertLane;if(te===0)$!==null&&($=$.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),ce===Al&&(ae=!0);else if((Ts&te)===te){Z=Z.next,te===Al&&(ae=!0);continue}else ce={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},$===null?(M=$=ce,x=E):$=$.next=ce,Je.lanes|=te,vo|=te;ce=Z.action,Ra&&u(E,ce),E=Z.hasEagerState?Z.eagerState:u(E,ce)}else te={lane:ce,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},$===null?(M=$=te,x=E):$=$.next=te,Je.lanes|=ce,vo|=ce;Z=Z.next}while(Z!==null&&Z!==a);if($===null?x=E:$.next=M,!$i(E,s.memoizedState)&&(Sn=!0,ae&&(u=Cl,u!==null)))throw u;s.memoizedState=E,s.baseState=x,s.baseQueue=$,h.lastRenderedState=E}return _===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function dy(s){var a=hn(),u=a.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=s;var h=u.dispatch,_=u.pending,E=a.memoizedState;if(_!==null){u.pending=null;var x=_=_.next;do E=s(E,x.action),x=x.next;while(x!==_);$i(E,a.memoizedState)||(Sn=!0),a.memoizedState=E,a.baseQueue===null&&(a.baseState=E),u.lastRenderedState=E}return[E,h]}function vS(s,a,u){var h=Je,_=hn(),E=ut;if(E){if(u===void 0)throw Error(i(407));u=u()}else u=a();var x=!$i((It||_).memoizedState,u);if(x&&(_.memoizedState=u,Sn=!0),_=_.queue,py(ES.bind(null,h,_,s),[s]),_.getSnapshot!==a||x||En!==null&&En.memoizedState.tag&1){if(h.flags|=2048,Ml(9,{destroy:void 0},TS.bind(null,h,_,u,a),null),Mt===null)throw Error(i(349));E||(Ts&127)!==0||_S(h,a,u)}return u}function _S(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=Je.updateQueue,a===null?(a=nh(),Je.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function TS(s,a,u,h){a.value=u,a.getSnapshot=h,SS(a)&&bS(s)}function ES(s,a,u){return u(function(){SS(a)&&bS(s)})}function SS(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!$i(s,u)}catch{return!0}}function bS(s){var a=Ta(s,2);a!==null&&Ui(a,s,2)}function fy(s){var a=Ti();if(typeof s=="function"){var u=s;if(s=u(),Ra){le(!0);try{u()}finally{le(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:s},a}function wS(s,a,u,h){return s.baseState=u,cy(s,It,typeof h=="function"?h:Es)}function j2(s,a,u,h,_){if(ah(s))throw Error(i(485));if(s=a.action,s!==null){var E={payload:_,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){E.listeners.push(x)}};W.T!==null?u(!0):E.isTransition=!1,h(E),u=a.pending,u===null?(E.next=a.pending=E,xS(a,E)):(E.next=u.next,a.pending=u.next=E)}}function xS(s,a){var u=a.action,h=a.payload,_=s.state;if(a.isTransition){var E=W.T,x={};W.T=x;try{var M=u(_,h),$=W.S;$!==null&&$(x,M),AS(s,a,M)}catch(Z){hy(s,a,Z)}finally{E!==null&&x.types!==null&&(E.types=x.types),W.T=E}}else try{E=u(_,h),AS(s,a,E)}catch(Z){hy(s,a,Z)}}function AS(s,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(h){CS(s,a,h)},function(h){return hy(s,a,h)}):CS(s,a,u)}function CS(s,a,u){a.status="fulfilled",a.value=u,IS(a),s.state=u,a=s.pending,a!==null&&(u=a.next,u===a?s.pending=null:(u=u.next,a.next=u,xS(s,u)))}function hy(s,a,u){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=u,IS(a),a=a.next;while(a!==h)}s.action=null}function IS(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function RS(s,a){return a}function NS(s,a){if(ut){var u=Mt.formState;if(u!==null){e:{var h=Je;if(ut){if(zt){t:{for(var _=zt,E=hr;_.nodeType!==8;){if(!E){_=null;break t}if(_=mr(_.nextSibling),_===null){_=null;break t}}E=_.data,_=E==="F!"||E==="F"?_:null}if(_){zt=mr(_.nextSibling),h=_.data==="F!";break e}}lo(h)}h=!1}h&&(a=u[0])}}return u=Ti(),u.memoizedState=u.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:RS,lastRenderedState:a},u.queue=h,u=JS.bind(null,Je,h),h.dispatch=u,h=fy(!1),E=_y.bind(null,Je,!1,h.queue),h=Ti(),_={state:a,dispatch:null,action:s,pending:null},h.queue=_,u=j2.bind(null,Je,_,E,u),_.dispatch=u,h.memoizedState=s,[a,u,!1]}function PS(s){var a=hn();return DS(a,It,s)}function DS(s,a,u){if(a=cy(s,a,RS)[0],s=rh(Es)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=_c(a)}catch(x){throw x===Il?Yf:x}else h=a;a=hn();var _=a.queue,E=_.dispatch;return u!==a.memoizedState&&(Je.flags|=2048,Ml(9,{destroy:void 0},$2.bind(null,_,u),null)),[h,E,s]}function $2(s,a){s.action=a}function MS(s){var a=hn(),u=It;if(u!==null)return DS(a,u,s);hn(),a=a.memoizedState,u=hn();var h=u.queue.dispatch;return u.memoizedState=s,[a,h,!1]}function Ml(s,a,u,h){return s={tag:s,create:u,deps:h,inst:a,next:null},a=Je.updateQueue,a===null&&(a=nh(),Je.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=s.next=s:(h=u.next,u.next=s,s.next=h,a.lastEffect=s),s}function kS(){return hn().memoizedState}function sh(s,a,u,h){var _=Ti();Je.flags|=s,_.memoizedState=Ml(1|a,{destroy:void 0},u,h===void 0?null:h)}function oh(s,a,u,h){var _=hn();h=h===void 0?null:h;var E=_.memoizedState.inst;It!==null&&h!==null&&ry(h,It.memoizedState.deps)?_.memoizedState=Ml(a,E,u,h):(Je.flags|=s,_.memoizedState=Ml(1|a,E,u,h))}function VS(s,a){sh(8390656,8,s,a)}function py(s,a){oh(2048,8,s,a)}function K2(s){Je.flags|=4;var a=Je.updateQueue;if(a===null)a=nh(),Je.updateQueue=a,a.events=[s];else{var u=a.events;u===null?a.events=[s]:u.push(s)}}function LS(s){var a=hn().memoizedState;return K2({ref:a,nextImpl:s}),function(){if((vt&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function OS(s,a){return oh(4,2,s,a)}function US(s,a){return oh(4,4,s,a)}function FS(s,a){if(typeof a=="function"){s=s();var u=a(s);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function BS(s,a,u){u=u!=null?u.concat([s]):null,oh(4,4,FS.bind(null,a,s),u)}function my(){}function qS(s,a){var u=hn();a=a===void 0?null:a;var h=u.memoizedState;return a!==null&&ry(a,h[1])?h[0]:(u.memoizedState=[s,a],s)}function zS(s,a){var u=hn();a=a===void 0?null:a;var h=u.memoizedState;if(a!==null&&ry(a,h[1]))return h[0];if(h=s(),Ra){le(!0);try{s()}finally{le(!1)}}return u.memoizedState=[h,a],h}function gy(s,a,u){return u===void 0||(Ts&1073741824)!==0&&(st&261930)===0?s.memoizedState=a:(s.memoizedState=u,s=Hb(),Je.lanes|=s,vo|=s,u)}function HS(s,a,u,h){return $i(u,a)?u:Nl.current!==null?(s=gy(s,u,h),$i(s,a)||(Sn=!0),s):(Ts&42)===0||(Ts&1073741824)!==0&&(st&261930)===0?(Sn=!0,s.memoizedState=u):(s=Hb(),Je.lanes|=s,vo|=s,a)}function GS(s,a,u,h,_){var E=se.p;se.p=E!==0&&8>E?E:8;var x=W.T,M={};W.T=M,_y(s,!1,a,u);try{var $=_(),Z=W.S;if(Z!==null&&Z(M,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var ae=z2($,h);Tc(s,a,ae,Xi(s))}else Tc(s,a,h,Xi(s))}catch(ce){Tc(s,a,{then:function(){},status:"rejected",reason:ce},Xi())}finally{se.p=E,x!==null&&M.types!==null&&(x.types=M.types),W.T=x}}function Y2(){}function yy(s,a,u,h){if(s.tag!==5)throw Error(i(476));var _=jS(s).queue;GS(s,_,a,he,u===null?Y2:function(){return $S(s),u(h)})}function jS(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:he},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:u},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function $S(s){var a=jS(s);a.next===null&&(a=s.alternate.memoizedState),Tc(s,a.next.queue,{},Xi())}function vy(){return jn(Oc)}function KS(){return hn().memoizedState}function YS(){return hn().memoizedState}function J2(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var u=Xi();s=fo(u);var h=ho(a,s,u);h!==null&&(Ui(h,a,u),mc(h,a,u)),a={cache:Kg()},s.payload=a;return}a=a.return}}function W2(s,a,u){var h=Xi();u={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},ah(s)?WS(a,u):(u=Lg(s,a,u,h),u!==null&&(Ui(u,s,h),QS(u,a,h)))}function JS(s,a,u){var h=Xi();Tc(s,a,u,h)}function Tc(s,a,u,h){var _={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(ah(s))WS(a,_);else{var E=s.alternate;if(s.lanes===0&&(E===null||E.lanes===0)&&(E=a.lastRenderedReducer,E!==null))try{var x=a.lastRenderedState,M=E(x,u);if(_.hasEagerState=!0,_.eagerState=M,$i(M,x))return qf(s,a,_,0),Mt===null&&Bf(),!1}catch{}finally{}if(u=Lg(s,a,_,h),u!==null)return Ui(u,s,h),QS(u,a,h),!0}return!1}function _y(s,a,u,h){if(h={lane:2,revertLane:Qy(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},ah(s)){if(a)throw Error(i(479))}else a=Lg(s,u,h,2),a!==null&&Ui(a,s,2)}function ah(s){var a=s.alternate;return s===Je||a!==null&&a===Je}function WS(s,a){Pl=eh=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function QS(s,a,u){if((u&4194048)!==0){var h=a.lanes;h&=s.pendingLanes,u|=h,a.lanes=u,Ot(s,u)}}var Ec={readContext:jn,use:ih,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useLayoutEffect:rn,useInsertionEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useSyncExternalStore:rn,useId:rn,useHostTransitionStatus:rn,useFormState:rn,useActionState:rn,useOptimistic:rn,useMemoCache:rn,useCacheRefresh:rn};Ec.useEffectEvent=rn;var XS={readContext:jn,use:ih,useCallback:function(s,a){return Ti().memoizedState=[s,a===void 0?null:a],s},useContext:jn,useEffect:VS,useImperativeHandle:function(s,a,u){u=u!=null?u.concat([s]):null,sh(4194308,4,FS.bind(null,a,s),u)},useLayoutEffect:function(s,a){return sh(4194308,4,s,a)},useInsertionEffect:function(s,a){sh(4,2,s,a)},useMemo:function(s,a){var u=Ti();a=a===void 0?null:a;var h=s();if(Ra){le(!0);try{s()}finally{le(!1)}}return u.memoizedState=[h,a],h},useReducer:function(s,a,u){var h=Ti();if(u!==void 0){var _=u(a);if(Ra){le(!0);try{u(a)}finally{le(!1)}}}else _=a;return h.memoizedState=h.baseState=_,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:_},h.queue=s,s=s.dispatch=W2.bind(null,Je,s),[h.memoizedState,s]},useRef:function(s){var a=Ti();return s={current:s},a.memoizedState=s},useState:function(s){s=fy(s);var a=s.queue,u=JS.bind(null,Je,a);return a.dispatch=u,[s.memoizedState,u]},useDebugValue:my,useDeferredValue:function(s,a){var u=Ti();return gy(u,s,a)},useTransition:function(){var s=fy(!1);return s=GS.bind(null,Je,s.queue,!0,!1),Ti().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,u){var h=Je,_=Ti();if(ut){if(u===void 0)throw Error(i(407));u=u()}else{if(u=a(),Mt===null)throw Error(i(349));(st&127)!==0||_S(h,a,u)}_.memoizedState=u;var E={value:u,getSnapshot:a};return _.queue=E,VS(ES.bind(null,h,E,s),[s]),h.flags|=2048,Ml(9,{destroy:void 0},TS.bind(null,h,E,u,a),null),u},useId:function(){var s=Ti(),a=Mt.identifierPrefix;if(ut){var u=Wr,h=Jr;u=(h&~(1<<32-pe(h)-1)).toString(32)+u,a="_"+a+"R_"+u,u=th++,0<u&&(a+="H"+u.toString(32)),a+="_"}else u=H2++,a="_"+a+"r_"+u.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:vy,useFormState:NS,useActionState:NS,useOptimistic:function(s){var a=Ti();a.memoizedState=a.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=_y.bind(null,Je,!0,u),u.dispatch=a,[s,a]},useMemoCache:uy,useCacheRefresh:function(){return Ti().memoizedState=J2.bind(null,Je)},useEffectEvent:function(s){var a=Ti(),u={impl:s};return a.memoizedState=u,function(){if((vt&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},Ty={readContext:jn,use:ih,useCallback:qS,useContext:jn,useEffect:py,useImperativeHandle:BS,useInsertionEffect:OS,useLayoutEffect:US,useMemo:zS,useReducer:rh,useRef:kS,useState:function(){return rh(Es)},useDebugValue:my,useDeferredValue:function(s,a){var u=hn();return HS(u,It.memoizedState,s,a)},useTransition:function(){var s=rh(Es)[0],a=hn().memoizedState;return[typeof s=="boolean"?s:_c(s),a]},useSyncExternalStore:vS,useId:KS,useHostTransitionStatus:vy,useFormState:PS,useActionState:PS,useOptimistic:function(s,a){var u=hn();return wS(u,It,s,a)},useMemoCache:uy,useCacheRefresh:YS};Ty.useEffectEvent=LS;var ZS={readContext:jn,use:ih,useCallback:qS,useContext:jn,useEffect:py,useImperativeHandle:BS,useInsertionEffect:OS,useLayoutEffect:US,useMemo:zS,useReducer:dy,useRef:kS,useState:function(){return dy(Es)},useDebugValue:my,useDeferredValue:function(s,a){var u=hn();return It===null?gy(u,s,a):HS(u,It.memoizedState,s,a)},useTransition:function(){var s=dy(Es)[0],a=hn().memoizedState;return[typeof s=="boolean"?s:_c(s),a]},useSyncExternalStore:vS,useId:KS,useHostTransitionStatus:vy,useFormState:MS,useActionState:MS,useOptimistic:function(s,a){var u=hn();return It!==null?wS(u,It,s,a):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:uy,useCacheRefresh:YS};ZS.useEffectEvent=LS;function Ey(s,a,u,h){a=s.memoizedState,u=u(h,a),u=u==null?a:v({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var Sy={enqueueSetState:function(s,a,u){s=s._reactInternals;var h=Xi(),_=fo(h);_.payload=a,u!=null&&(_.callback=u),a=ho(s,_,h),a!==null&&(Ui(a,s,h),mc(a,s,h))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var h=Xi(),_=fo(h);_.tag=1,_.payload=a,u!=null&&(_.callback=u),a=ho(s,_,h),a!==null&&(Ui(a,s,h),mc(a,s,h))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=Xi(),h=fo(u);h.tag=2,a!=null&&(h.callback=a),a=ho(s,h,u),a!==null&&(Ui(a,s,u),mc(a,s,u))}};function eb(s,a,u,h,_,E,x){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,E,x):a.prototype&&a.prototype.isPureReactComponent?!ac(u,h)||!ac(_,E):!0}function tb(s,a,u,h){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,h),a.state!==s&&Sy.enqueueReplaceState(a,a.state,null)}function Na(s,a){var u=a;if("ref"in a){u={};for(var h in a)h!=="ref"&&(u[h]=a[h])}if(s=s.defaultProps){u===a&&(u=v({},u));for(var _ in s)u[_]===void 0&&(u[_]=s[_])}return u}function nb(s){Ff(s)}function ib(s){console.error(s)}function rb(s){Ff(s)}function lh(s,a){try{var u=s.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function sb(s,a,u){try{var h=s.onCaughtError;h(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function by(s,a,u){return u=fo(u),u.tag=3,u.payload={element:null},u.callback=function(){lh(s,a)},u}function ob(s){return s=fo(s),s.tag=3,s}function ab(s,a,u,h){var _=u.type.getDerivedStateFromError;if(typeof _=="function"){var E=h.value;s.payload=function(){return _(E)},s.callback=function(){sb(a,u,h)}}var x=u.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(s.callback=function(){sb(a,u,h),typeof _!="function"&&(_o===null?_o=new Set([this]):_o.add(this));var M=h.stack;this.componentDidCatch(h.value,{componentStack:M!==null?M:""})})}function Q2(s,a,u,h,_){if(u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=u.alternate,a!==null&&xl(a,u,_,!0),u=Yi.current,u!==null){switch(u.tag){case 31:case 13:return pr===null?Th():u.alternate===null&&sn===0&&(sn=3),u.flags&=-257,u.flags|=65536,u.lanes=_,h===Jf?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([h]):a.add(h),Yy(s,h,_)),!1;case 22:return u.flags|=65536,h===Jf?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([h]):u.add(h)),Yy(s,h,_)),!1}throw Error(i(435,u.tag))}return Yy(s,h,_),Th(),!1}if(ut)return a=Yi.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=_,h!==zg&&(s=Error(i(422),{cause:h}),cc(cr(s,u)))):(h!==zg&&(a=Error(i(423),{cause:h}),cc(cr(a,u))),s=s.current.alternate,s.flags|=65536,_&=-_,s.lanes|=_,h=cr(h,u),_=by(s.stateNode,h,_),Zg(s,_),sn!==4&&(sn=2)),!1;var E=Error(i(520),{cause:h});if(E=cr(E,u),Rc===null?Rc=[E]:Rc.push(E),sn!==4&&(sn=2),a===null)return!0;h=cr(h,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,s=_&-_,u.lanes|=s,s=by(u.stateNode,h,s),Zg(u,s),!1;case 1:if(a=u.type,E=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(_o===null||!_o.has(E))))return u.flags|=65536,_&=-_,u.lanes|=_,_=ob(_),ab(_,s,u,h),Zg(u,_),!1}u=u.return}while(u!==null);return!1}var wy=Error(i(461)),Sn=!1;function $n(s,a,u,h){a.child=s===null?dS(a,null,u,h):Ia(a,s.child,u,h)}function lb(s,a,u,h,_){u=u.render;var E=a.ref;if("ref"in h){var x={};for(var M in h)M!=="ref"&&(x[M]=h[M])}else x=h;return wa(a),h=sy(s,a,u,x,E,_),M=oy(),s!==null&&!Sn?(ay(s,a,_),Ss(s,a,_)):(ut&&M&&Bg(a),a.flags|=1,$n(s,a,h,_),a.child)}function ub(s,a,u,h,_){if(s===null){var E=u.type;return typeof E=="function"&&!Og(E)&&E.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=E,cb(s,a,E,h,_)):(s=Hf(u.type,null,h,a,a.mode,_),s.ref=a.ref,s.return=a,a.child=s)}if(E=s.child,!Dy(s,_)){var x=E.memoizedProps;if(u=u.compare,u=u!==null?u:ac,u(x,h)&&s.ref===a.ref)return Ss(s,a,_)}return a.flags|=1,s=gs(E,h),s.ref=a.ref,s.return=a,a.child=s}function cb(s,a,u,h,_){if(s!==null){var E=s.memoizedProps;if(ac(E,h)&&s.ref===a.ref)if(Sn=!1,a.pendingProps=h=E,Dy(s,_))(s.flags&131072)!==0&&(Sn=!0);else return a.lanes=s.lanes,Ss(s,a,_)}return xy(s,a,u,h,_)}function db(s,a,u,h){var _=h.children,E=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((a.flags&128)!==0){if(E=E!==null?E.baseLanes|u:u,s!==null){for(h=a.child=s.child,_=0;h!==null;)_=_|h.lanes|h.childLanes,h=h.sibling;h=_&~E}else h=0,a.child=null;return fb(s,a,E,u,h)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&Kf(a,E!==null?E.cachePool:null),E!==null?pS(a,E):ty(),mS(a);else return h=a.lanes=536870912,fb(s,a,E!==null?E.baseLanes|u:u,u,h)}else E!==null?(Kf(a,E.cachePool),pS(a,E),mo(),a.memoizedState=null):(s!==null&&Kf(a,null),ty(),mo());return $n(s,a,_,u),a.child}function Sc(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function fb(s,a,u,h,_){var E=Jg();return E=E===null?null:{parent:Tn._currentValue,pool:E},a.memoizedState={baseLanes:u,cachePool:E},s!==null&&Kf(a,null),ty(),mS(a),s!==null&&xl(s,a,h,!0),a.childLanes=_,null}function uh(s,a){return a=dh({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function hb(s,a,u){return Ia(a,s.child,null,u),s=uh(a,a.pendingProps),s.flags|=2,Ji(a),a.memoizedState=null,s}function X2(s,a,u){var h=a.pendingProps,_=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(ut){if(h.mode==="hidden")return s=uh(a,h),a.lanes=536870912,Sc(null,s);if(iy(a),(s=zt)?(s=xw(s,hr),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:oo!==null?{id:Jr,overflow:Wr}:null,retryLane:536870912,hydrationErrors:null},u=WE(s),u.return=a,a.child=u,Gn=a,zt=null)):s=null,s===null)throw lo(a);return a.lanes=536870912,null}return uh(a,h)}var E=s.memoizedState;if(E!==null){var x=E.dehydrated;if(iy(a),_)if(a.flags&256)a.flags&=-257,a=hb(s,a,u);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(i(558));else if(Sn||xl(s,a,u,!1),_=(u&s.childLanes)!==0,Sn||_){if(h=Mt,h!==null&&(x=dn(h,u),x!==0&&x!==E.retryLane))throw E.retryLane=x,Ta(s,x),Ui(h,s,x),wy;Th(),a=hb(s,a,u)}else s=E.treeContext,zt=mr(x.nextSibling),Gn=a,ut=!0,ao=null,hr=!1,s!==null&&ZE(a,s),a=uh(a,h),a.flags|=4096;return a}return s=gs(s.child,{mode:h.mode,children:h.children}),s.ref=a.ref,a.child=s,s.return=a,s}function ch(s,a){var u=a.ref;if(u===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(s===null||s.ref!==u)&&(a.flags|=4194816)}}function xy(s,a,u,h,_){return wa(a),u=sy(s,a,u,h,void 0,_),h=oy(),s!==null&&!Sn?(ay(s,a,_),Ss(s,a,_)):(ut&&h&&Bg(a),a.flags|=1,$n(s,a,u,_),a.child)}function pb(s,a,u,h,_,E){return wa(a),a.updateQueue=null,u=yS(a,h,u,_),gS(s),h=oy(),s!==null&&!Sn?(ay(s,a,E),Ss(s,a,E)):(ut&&h&&Bg(a),a.flags|=1,$n(s,a,u,E),a.child)}function mb(s,a,u,h,_){if(wa(a),a.stateNode===null){var E=El,x=u.contextType;typeof x=="object"&&x!==null&&(E=jn(x)),E=new u(h,E),a.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=Sy,a.stateNode=E,E._reactInternals=a,E=a.stateNode,E.props=h,E.state=a.memoizedState,E.refs={},Qg(a),x=u.contextType,E.context=typeof x=="object"&&x!==null?jn(x):El,E.state=a.memoizedState,x=u.getDerivedStateFromProps,typeof x=="function"&&(Ey(a,u,x,h),E.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(x=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),x!==E.state&&Sy.enqueueReplaceState(E,E.state,null),yc(a,h,E,_),gc(),E.state=a.memoizedState),typeof E.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(s===null){E=a.stateNode;var M=a.memoizedProps,$=Na(u,M);E.props=$;var Z=E.context,ae=u.contextType;x=El,typeof ae=="object"&&ae!==null&&(x=jn(ae));var ce=u.getDerivedStateFromProps;ae=typeof ce=="function"||typeof E.getSnapshotBeforeUpdate=="function",M=a.pendingProps!==M,ae||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(M||Z!==x)&&tb(a,E,h,x),co=!1;var te=a.memoizedState;E.state=te,yc(a,h,E,_),gc(),Z=a.memoizedState,M||te!==Z||co?(typeof ce=="function"&&(Ey(a,u,ce,h),Z=a.memoizedState),($=co||eb(a,u,$,h,te,Z,x))?(ae||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(a.flags|=4194308)):(typeof E.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=Z),E.props=h,E.state=Z,E.context=x,h=$):(typeof E.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{E=a.stateNode,Xg(s,a),x=a.memoizedProps,ae=Na(u,x),E.props=ae,ce=a.pendingProps,te=E.context,Z=u.contextType,$=El,typeof Z=="object"&&Z!==null&&($=jn(Z)),M=u.getDerivedStateFromProps,(Z=typeof M=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(x!==ce||te!==$)&&tb(a,E,h,$),co=!1,te=a.memoizedState,E.state=te,yc(a,h,E,_),gc();var ie=a.memoizedState;x!==ce||te!==ie||co||s!==null&&s.dependencies!==null&&jf(s.dependencies)?(typeof M=="function"&&(Ey(a,u,M,h),ie=a.memoizedState),(ae=co||eb(a,u,ae,h,te,ie,$)||s!==null&&s.dependencies!==null&&jf(s.dependencies))?(Z||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,ie,$),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,ie,$)),typeof E.componentDidUpdate=="function"&&(a.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof E.componentDidUpdate!="function"||x===s.memoizedProps&&te===s.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||x===s.memoizedProps&&te===s.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=ie),E.props=h,E.state=ie,E.context=$,h=ae):(typeof E.componentDidUpdate!="function"||x===s.memoizedProps&&te===s.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||x===s.memoizedProps&&te===s.memoizedState||(a.flags|=1024),h=!1)}return E=h,ch(s,a),h=(a.flags&128)!==0,E||h?(E=a.stateNode,u=h&&typeof u.getDerivedStateFromError!="function"?null:E.render(),a.flags|=1,s!==null&&h?(a.child=Ia(a,s.child,null,_),a.child=Ia(a,null,u,_)):$n(s,a,u,_),a.memoizedState=E.state,s=a.child):s=Ss(s,a,_),s}function gb(s,a,u,h){return Sa(),a.flags|=256,$n(s,a,u,h),a.child}var Ay={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cy(s){return{baseLanes:s,cachePool:sS()}}function Iy(s,a,u){return s=s!==null?s.childLanes&~u:0,a&&(s|=Qi),s}function yb(s,a,u){var h=a.pendingProps,_=!1,E=(a.flags&128)!==0,x;if((x=E)||(x=s!==null&&s.memoizedState===null?!1:(fn.current&2)!==0),x&&(_=!0,a.flags&=-129),x=(a.flags&32)!==0,a.flags&=-33,s===null){if(ut){if(_?po(a):mo(),(s=zt)?(s=xw(s,hr),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:oo!==null?{id:Jr,overflow:Wr}:null,retryLane:536870912,hydrationErrors:null},u=WE(s),u.return=a,a.child=u,Gn=a,zt=null)):s=null,s===null)throw lo(a);return cv(s)?a.lanes=32:a.lanes=536870912,null}var M=h.children;return h=h.fallback,_?(mo(),_=a.mode,M=dh({mode:"hidden",children:M},_),h=Ea(h,_,u,null),M.return=a,h.return=a,M.sibling=h,a.child=M,h=a.child,h.memoizedState=Cy(u),h.childLanes=Iy(s,x,u),a.memoizedState=Ay,Sc(null,h)):(po(a),Ry(a,M))}var $=s.memoizedState;if($!==null&&(M=$.dehydrated,M!==null)){if(E)a.flags&256?(po(a),a.flags&=-257,a=Ny(s,a,u)):a.memoizedState!==null?(mo(),a.child=s.child,a.flags|=128,a=null):(mo(),M=h.fallback,_=a.mode,h=dh({mode:"visible",children:h.children},_),M=Ea(M,_,u,null),M.flags|=2,h.return=a,M.return=a,h.sibling=M,a.child=h,Ia(a,s.child,null,u),h=a.child,h.memoizedState=Cy(u),h.childLanes=Iy(s,x,u),a.memoizedState=Ay,a=Sc(null,h));else if(po(a),cv(M)){if(x=M.nextSibling&&M.nextSibling.dataset,x)var Z=x.dgst;x=Z,h=Error(i(419)),h.stack="",h.digest=x,cc({value:h,source:null,stack:null}),a=Ny(s,a,u)}else if(Sn||xl(s,a,u,!1),x=(u&s.childLanes)!==0,Sn||x){if(x=Mt,x!==null&&(h=dn(x,u),h!==0&&h!==$.retryLane))throw $.retryLane=h,Ta(s,h),Ui(x,s,h),wy;uv(M)||Th(),a=Ny(s,a,u)}else uv(M)?(a.flags|=192,a.child=s.child,a=null):(s=$.treeContext,zt=mr(M.nextSibling),Gn=a,ut=!0,ao=null,hr=!1,s!==null&&ZE(a,s),a=Ry(a,h.children),a.flags|=4096);return a}return _?(mo(),M=h.fallback,_=a.mode,$=s.child,Z=$.sibling,h=gs($,{mode:"hidden",children:h.children}),h.subtreeFlags=$.subtreeFlags&65011712,Z!==null?M=gs(Z,M):(M=Ea(M,_,u,null),M.flags|=2),M.return=a,h.return=a,h.sibling=M,a.child=h,Sc(null,h),h=a.child,M=s.child.memoizedState,M===null?M=Cy(u):(_=M.cachePool,_!==null?($=Tn._currentValue,_=_.parent!==$?{parent:$,pool:$}:_):_=sS(),M={baseLanes:M.baseLanes|u,cachePool:_}),h.memoizedState=M,h.childLanes=Iy(s,x,u),a.memoizedState=Ay,Sc(s.child,h)):(po(a),u=s.child,s=u.sibling,u=gs(u,{mode:"visible",children:h.children}),u.return=a,u.sibling=null,s!==null&&(x=a.deletions,x===null?(a.deletions=[s],a.flags|=16):x.push(s)),a.child=u,a.memoizedState=null,u)}function Ry(s,a){return a=dh({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function dh(s,a){return s=Ki(22,s,null,a),s.lanes=0,s}function Ny(s,a,u){return Ia(a,s.child,null,u),s=Ry(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function vb(s,a,u){s.lanes|=a;var h=s.alternate;h!==null&&(h.lanes|=a),jg(s.return,a,u)}function Py(s,a,u,h,_,E){var x=s.memoizedState;x===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:_,treeForkCount:E}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=h,x.tail=u,x.tailMode=_,x.treeForkCount=E)}function _b(s,a,u){var h=a.pendingProps,_=h.revealOrder,E=h.tail;h=h.children;var x=fn.current,M=(x&2)!==0;if(M?(x=x&1|2,a.flags|=128):x&=1,ne(fn,x),$n(s,a,h,u),h=ut?uc:0,!M&&s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&vb(s,u,a);else if(s.tag===19)vb(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(_){case"forwards":for(u=a.child,_=null;u!==null;)s=u.alternate,s!==null&&Zf(s)===null&&(_=u),u=u.sibling;u=_,u===null?(_=a.child,a.child=null):(_=u.sibling,u.sibling=null),Py(a,!1,_,u,E,h);break;case"backwards":case"unstable_legacy-backwards":for(u=null,_=a.child,a.child=null;_!==null;){if(s=_.alternate,s!==null&&Zf(s)===null){a.child=_;break}s=_.sibling,_.sibling=u,u=_,_=s}Py(a,!0,u,null,E,h);break;case"together":Py(a,!1,null,null,void 0,h);break;default:a.memoizedState=null}return a.child}function Ss(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),vo|=a.lanes,(u&a.childLanes)===0)if(s!==null){if(xl(s,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,u=gs(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=gs(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function Dy(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&jf(s)))}function Z2(s,a,u){switch(a.tag){case 3:Vt(a,a.stateNode.containerInfo),uo(a,Tn,s.memoizedState.cache),Sa();break;case 27:case 5:qn(a);break;case 4:Vt(a,a.stateNode.containerInfo);break;case 10:uo(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,iy(a),null;break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(po(a),a.flags|=128,null):(u&a.child.childLanes)!==0?yb(s,a,u):(po(a),s=Ss(s,a,u),s!==null?s.sibling:null);po(a);break;case 19:var _=(s.flags&128)!==0;if(h=(u&a.childLanes)!==0,h||(xl(s,a,u,!1),h=(u&a.childLanes)!==0),_){if(h)return _b(s,a,u);a.flags|=128}if(_=a.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),ne(fn,fn.current),h)break;return null;case 22:return a.lanes=0,db(s,a,u,a.pendingProps);case 24:uo(a,Tn,s.memoizedState.cache)}return Ss(s,a,u)}function Tb(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps)Sn=!0;else{if(!Dy(s,u)&&(a.flags&128)===0)return Sn=!1,Z2(s,a,u);Sn=(s.flags&131072)!==0}else Sn=!1,ut&&(a.flags&1048576)!==0&&XE(a,uc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var h=a.pendingProps;if(s=Aa(a.elementType),a.type=s,typeof s=="function")Og(s)?(h=Na(s,h),a.tag=1,a=mb(null,a,s,h,u)):(a.tag=0,a=xy(null,a,s,h,u));else{if(s!=null){var _=s.$$typeof;if(_===G){a.tag=11,a=lb(null,a,s,h,u);break e}else if(_===R){a.tag=14,a=ub(null,a,s,h,u);break e}}throw a=Ee(s)||s,Error(i(306,a,""))}}return a;case 0:return xy(s,a,a.type,a.pendingProps,u);case 1:return h=a.type,_=Na(h,a.pendingProps),mb(s,a,h,_,u);case 3:e:{if(Vt(a,a.stateNode.containerInfo),s===null)throw Error(i(387));h=a.pendingProps;var E=a.memoizedState;_=E.element,Xg(s,a),yc(a,h,null,u);var x=a.memoizedState;if(h=x.cache,uo(a,Tn,h),h!==E.cache&&$g(a,[Tn],u,!0),gc(),h=x.element,E.isDehydrated)if(E={element:h,isDehydrated:!1,cache:x.cache},a.updateQueue.baseState=E,a.memoizedState=E,a.flags&256){a=gb(s,a,h,u);break e}else if(h!==_){_=cr(Error(i(424)),a),cc(_),a=gb(s,a,h,u);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(zt=mr(s.firstChild),Gn=a,ut=!0,ao=null,hr=!0,u=dS(a,null,h,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Sa(),h===_){a=Ss(s,a,u);break e}$n(s,a,h,u)}a=a.child}return a;case 26:return ch(s,a),s===null?(u=Pw(a.type,null,a.pendingProps,null))?a.memoizedState=u:ut||(u=a.type,s=a.pendingProps,h=Ch(Oe.current).createElement(u),h[be]=a,h[qe]=s,Kn(h,u,s),Jt(h),a.stateNode=h):a.memoizedState=Pw(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return qn(a),s===null&&ut&&(h=a.stateNode=Iw(a.type,a.pendingProps,Oe.current),Gn=a,hr=!0,_=zt,bo(a.type)?(dv=_,zt=mr(h.firstChild)):zt=_),$n(s,a,a.pendingProps.children,u),ch(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&ut&&((_=h=zt)&&(h=RV(h,a.type,a.pendingProps,hr),h!==null?(a.stateNode=h,Gn=a,zt=mr(h.firstChild),hr=!1,_=!0):_=!1),_||lo(a)),qn(a),_=a.type,E=a.pendingProps,x=s!==null?s.memoizedProps:null,h=E.children,ov(_,E)?h=null:x!==null&&ov(_,x)&&(a.flags|=32),a.memoizedState!==null&&(_=sy(s,a,G2,null,null,u),Oc._currentValue=_),ch(s,a),$n(s,a,h,u),a.child;case 6:return s===null&&ut&&((s=u=zt)&&(u=NV(u,a.pendingProps,hr),u!==null?(a.stateNode=u,Gn=a,zt=null,s=!0):s=!1),s||lo(a)),null;case 13:return yb(s,a,u);case 4:return Vt(a,a.stateNode.containerInfo),h=a.pendingProps,s===null?a.child=Ia(a,null,h,u):$n(s,a,h,u),a.child;case 11:return lb(s,a,a.type,a.pendingProps,u);case 7:return $n(s,a,a.pendingProps,u),a.child;case 8:return $n(s,a,a.pendingProps.children,u),a.child;case 12:return $n(s,a,a.pendingProps.children,u),a.child;case 10:return h=a.pendingProps,uo(a,a.type,h.value),$n(s,a,h.children,u),a.child;case 9:return _=a.type._context,h=a.pendingProps.children,wa(a),_=jn(_),h=h(_),a.flags|=1,$n(s,a,h,u),a.child;case 14:return ub(s,a,a.type,a.pendingProps,u);case 15:return cb(s,a,a.type,a.pendingProps,u);case 19:return _b(s,a,u);case 31:return X2(s,a,u);case 22:return db(s,a,u,a.pendingProps);case 24:return wa(a),h=jn(Tn),s===null?(_=Jg(),_===null&&(_=Mt,E=Kg(),_.pooledCache=E,E.refCount++,E!==null&&(_.pooledCacheLanes|=u),_=E),a.memoizedState={parent:h,cache:_},Qg(a),uo(a,Tn,_)):((s.lanes&u)!==0&&(Xg(s,a),yc(a,null,null,u),gc()),_=s.memoizedState,E=a.memoizedState,_.parent!==h?(_={parent:h,cache:h},a.memoizedState=_,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=_),uo(a,Tn,h)):(h=E.cache,uo(a,Tn,h),h!==_.cache&&$g(a,[Tn],u,!0))),$n(s,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function bs(s){s.flags|=4}function My(s,a,u,h,_){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(_&335544128)===_)if(s.stateNode.complete)s.flags|=8192;else if(Kb())s.flags|=8192;else throw Ca=Jf,Wg}else s.flags&=-16777217}function Eb(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Lw(a))if(Kb())s.flags|=8192;else throw Ca=Jf,Wg}function fh(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?Ci():536870912,s.lanes|=a,Ol|=a)}function bc(s,a){if(!ut)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function Ht(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,h=0;if(a)for(var _=s.child;_!==null;)u|=_.lanes|_.childLanes,h|=_.subtreeFlags&65011712,h|=_.flags&65011712,_.return=s,_=_.sibling;else for(_=s.child;_!==null;)u|=_.lanes|_.childLanes,h|=_.subtreeFlags,h|=_.flags,_.return=s,_=_.sibling;return s.subtreeFlags|=h,s.childLanes=u,a}function eV(s,a,u){var h=a.pendingProps;switch(qg(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(a),null;case 1:return Ht(a),null;case 3:return u=a.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),_s(Tn),At(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(wl(a)?bs(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Hg())),Ht(a),null;case 26:var _=a.type,E=a.memoizedState;return s===null?(bs(a),E!==null?(Ht(a),Eb(a,E)):(Ht(a),My(a,_,null,h,u))):E?E!==s.memoizedState?(bs(a),Ht(a),Eb(a,E)):(Ht(a),a.flags&=-16777217):(s=s.memoizedProps,s!==h&&bs(a),Ht(a),My(a,_,s,h,u)),null;case 27:if(wi(a),u=Oe.current,_=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&bs(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return Ht(a),null}s=oe.current,wl(a)?eS(a):(s=Iw(_,h,u),a.stateNode=s,bs(a))}return Ht(a),null;case 5:if(wi(a),_=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&bs(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return Ht(a),null}if(E=oe.current,wl(a))eS(a);else{var x=Ch(Oe.current);switch(E){case 1:E=x.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:E=x.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":E=x.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":E=x.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":E=x.createElement("div"),E.innerHTML="<script><\/script>",E=E.removeChild(E.firstChild);break;case"select":E=typeof h.is=="string"?x.createElement("select",{is:h.is}):x.createElement("select"),h.multiple?E.multiple=!0:h.size&&(E.size=h.size);break;default:E=typeof h.is=="string"?x.createElement(_,{is:h.is}):x.createElement(_)}}E[be]=a,E[qe]=h;e:for(x=a.child;x!==null;){if(x.tag===5||x.tag===6)E.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===a)break e;for(;x.sibling===null;){if(x.return===null||x.return===a)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}a.stateNode=E;e:switch(Kn(E,_,h),_){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&bs(a)}}return Ht(a),My(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,u),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==h&&bs(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(i(166));if(s=Oe.current,wl(a)){if(s=a.stateNode,u=a.memoizedProps,h=null,_=Gn,_!==null)switch(_.tag){case 27:case 5:h=_.memoizedProps}s[be]=a,s=!!(s.nodeValue===u||h!==null&&h.suppressHydrationWarning===!0||yw(s.nodeValue,u)),s||lo(a,!0)}else s=Ch(s).createTextNode(h),s[be]=a,a.stateNode=s}return Ht(a),null;case 31:if(u=a.memoizedState,s===null||s.memoizedState!==null){if(h=wl(a),u!==null){if(s===null){if(!h)throw Error(i(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[be]=a}else Sa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ht(a),s=!1}else u=Hg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=u),s=!0;if(!s)return a.flags&256?(Ji(a),a):(Ji(a),null);if((a.flags&128)!==0)throw Error(i(558))}return Ht(a),null;case 13:if(h=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(_=wl(a),h!==null&&h.dehydrated!==null){if(s===null){if(!_)throw Error(i(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(i(317));_[be]=a}else Sa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ht(a),_=!1}else _=Hg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=_),_=!0;if(!_)return a.flags&256?(Ji(a),a):(Ji(a),null)}return Ji(a),(a.flags&128)!==0?(a.lanes=u,a):(u=h!==null,s=s!==null&&s.memoizedState!==null,u&&(h=a.child,_=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(_=h.alternate.memoizedState.cachePool.pool),E=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(E=h.memoizedState.cachePool.pool),E!==_&&(h.flags|=2048)),u!==s&&u&&(a.child.flags|=8192),fh(a,a.updateQueue),Ht(a),null);case 4:return At(),s===null&&tv(a.stateNode.containerInfo),Ht(a),null;case 10:return _s(a.type),Ht(a),null;case 19:if(ee(fn),h=a.memoizedState,h===null)return Ht(a),null;if(_=(a.flags&128)!==0,E=h.rendering,E===null)if(_)bc(h,!1);else{if(sn!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(E=Zf(s),E!==null){for(a.flags|=128,bc(h,!1),s=E.updateQueue,a.updateQueue=s,fh(a,s),a.subtreeFlags=0,s=u,u=a.child;u!==null;)JE(u,s),u=u.sibling;return ne(fn,fn.current&1|2),ut&&ys(a,h.treeForkCount),a.child}s=s.sibling}h.tail!==null&&bt()>yh&&(a.flags|=128,_=!0,bc(h,!1),a.lanes=4194304)}else{if(!_)if(s=Zf(E),s!==null){if(a.flags|=128,_=!0,s=s.updateQueue,a.updateQueue=s,fh(a,s),bc(h,!0),h.tail===null&&h.tailMode==="hidden"&&!E.alternate&&!ut)return Ht(a),null}else 2*bt()-h.renderingStartTime>yh&&u!==536870912&&(a.flags|=128,_=!0,bc(h,!1),a.lanes=4194304);h.isBackwards?(E.sibling=a.child,a.child=E):(s=h.last,s!==null?s.sibling=E:a.child=E,h.last=E)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=bt(),s.sibling=null,u=fn.current,ne(fn,_?u&1|2:u&1),ut&&ys(a,h.treeForkCount),s):(Ht(a),null);case 22:case 23:return Ji(a),ny(),h=a.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(u&536870912)!==0&&(a.flags&128)===0&&(Ht(a),a.subtreeFlags&6&&(a.flags|=8192)):Ht(a),u=a.updateQueue,u!==null&&fh(a,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==u&&(a.flags|=2048),s!==null&&ee(xa),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),_s(Tn),Ht(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function tV(s,a){switch(qg(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return _s(Tn),At(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return wi(a),null;case 31:if(a.memoizedState!==null){if(Ji(a),a.alternate===null)throw Error(i(340));Sa()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(Ji(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Sa()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return ee(fn),null;case 4:return At(),null;case 10:return _s(a.type),null;case 22:case 23:return Ji(a),ny(),s!==null&&ee(xa),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return _s(Tn),null;case 25:return null;default:return null}}function Sb(s,a){switch(qg(a),a.tag){case 3:_s(Tn),At();break;case 26:case 27:case 5:wi(a);break;case 4:At();break;case 31:a.memoizedState!==null&&Ji(a);break;case 13:Ji(a);break;case 19:ee(fn);break;case 10:_s(a.type);break;case 22:case 23:Ji(a),ny(),s!==null&&ee(xa);break;case 24:_s(Tn)}}function wc(s,a){try{var u=a.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var _=h.next;u=_;do{if((u.tag&s)===s){h=void 0;var E=u.create,x=u.inst;h=E(),x.destroy=h}u=u.next}while(u!==_)}}catch(M){xt(a,a.return,M)}}function go(s,a,u){try{var h=a.updateQueue,_=h!==null?h.lastEffect:null;if(_!==null){var E=_.next;h=E;do{if((h.tag&s)===s){var x=h.inst,M=x.destroy;if(M!==void 0){x.destroy=void 0,_=a;var $=u,Z=M;try{Z()}catch(ae){xt(_,$,ae)}}}h=h.next}while(h!==E)}}catch(ae){xt(a,a.return,ae)}}function bb(s){var a=s.updateQueue;if(a!==null){var u=s.stateNode;try{hS(a,u)}catch(h){xt(s,s.return,h)}}}function wb(s,a,u){u.props=Na(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(h){xt(s,a,h)}}function xc(s,a){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof u=="function"?s.refCleanup=u(h):u.current=h}}catch(_){xt(s,a,_)}}function Qr(s,a){var u=s.ref,h=s.refCleanup;if(u!==null)if(typeof h=="function")try{h()}catch(_){xt(s,a,_)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(_){xt(s,a,_)}else u.current=null}function xb(s){var a=s.type,u=s.memoizedProps,h=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&h.focus();break e;case"img":u.src?h.src=u.src:u.srcSet&&(h.srcset=u.srcSet)}}catch(_){xt(s,s.return,_)}}function ky(s,a,u){try{var h=s.stateNode;bV(h,s.type,u,a),h[qe]=a}catch(_){xt(s,s.return,_)}}function Ab(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&bo(s.type)||s.tag===4}function Vy(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Ab(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&bo(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Ly(s,a,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(s),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Vn));else if(h!==4&&(h===27&&bo(s.type)&&(u=s.stateNode,a=null),s=s.child,s!==null))for(Ly(s,a,u),s=s.sibling;s!==null;)Ly(s,a,u),s=s.sibling}function hh(s,a,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(h!==4&&(h===27&&bo(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(hh(s,a,u),s=s.sibling;s!==null;)hh(s,a,u),s=s.sibling}function Cb(s){var a=s.stateNode,u=s.memoizedProps;try{for(var h=s.type,_=a.attributes;_.length;)a.removeAttributeNode(_[0]);Kn(a,h,u),a[be]=s,a[qe]=u}catch(E){xt(s,s.return,E)}}var ws=!1,bn=!1,Oy=!1,Ib=typeof WeakSet=="function"?WeakSet:Set,Un=null;function nV(s,a){if(s=s.containerInfo,rv=kh,s=BE(s),Ng(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var _=h.anchorOffset,E=h.focusNode;h=h.focusOffset;try{u.nodeType,E.nodeType}catch{u=null;break e}var x=0,M=-1,$=-1,Z=0,ae=0,ce=s,te=null;t:for(;;){for(var ie;ce!==u||_!==0&&ce.nodeType!==3||(M=x+_),ce!==E||h!==0&&ce.nodeType!==3||($=x+h),ce.nodeType===3&&(x+=ce.nodeValue.length),(ie=ce.firstChild)!==null;)te=ce,ce=ie;for(;;){if(ce===s)break t;if(te===u&&++Z===_&&(M=x),te===E&&++ae===h&&($=x),(ie=ce.nextSibling)!==null)break;ce=te,te=ce.parentNode}ce=ie}u=M===-1||$===-1?null:{start:M,end:$}}else u=null}u=u||{start:0,end:0}}else u=null;for(sv={focusedElem:s,selectionRange:u},kh=!1,Un=a;Un!==null;)if(a=Un,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Un=s;else for(;Un!==null;){switch(a=Un,E=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(u=0;u<s.length;u++)_=s[u],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&E!==null){s=void 0,u=a,_=E.memoizedProps,E=E.memoizedState,h=u.stateNode;try{var Ce=Na(u.type,_);s=h.getSnapshotBeforeUpdate(Ce,E),h.__reactInternalSnapshotBeforeUpdate=s}catch(Le){xt(u,u.return,Le)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,u=s.nodeType,u===9)lv(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":lv(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,Un=s;break}Un=a.return}}function Rb(s,a,u){var h=u.flags;switch(u.tag){case 0:case 11:case 15:As(s,u),h&4&&wc(5,u);break;case 1:if(As(s,u),h&4)if(s=u.stateNode,a===null)try{s.componentDidMount()}catch(x){xt(u,u.return,x)}else{var _=Na(u.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(_,a,s.__reactInternalSnapshotBeforeUpdate)}catch(x){xt(u,u.return,x)}}h&64&&bb(u),h&512&&xc(u,u.return);break;case 3:if(As(s,u),h&64&&(s=u.updateQueue,s!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{hS(s,a)}catch(x){xt(u,u.return,x)}}break;case 27:a===null&&h&4&&Cb(u);case 26:case 5:As(s,u),a===null&&h&4&&xb(u),h&512&&xc(u,u.return);break;case 12:As(s,u);break;case 31:As(s,u),h&4&&Db(s,u);break;case 13:As(s,u),h&4&&Mb(s,u),h&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=dV.bind(null,u),PV(s,u))));break;case 22:if(h=u.memoizedState!==null||ws,!h){a=a!==null&&a.memoizedState!==null||bn,_=ws;var E=bn;ws=h,(bn=a)&&!E?Cs(s,u,(u.subtreeFlags&8772)!==0):As(s,u),ws=_,bn=E}break;case 30:break;default:As(s,u)}}function Nb(s){var a=s.alternate;a!==null&&(s.alternate=null,Nb(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&sr(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Wt=null,ki=!1;function xs(s,a,u){for(u=u.child;u!==null;)Pb(s,a,u),u=u.sibling}function Pb(s,a,u){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(fi,u)}catch{}switch(u.tag){case 26:bn||Qr(u,a),xs(s,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:bn||Qr(u,a);var h=Wt,_=ki;bo(u.type)&&(Wt=u.stateNode,ki=!1),xs(s,a,u),kc(u.stateNode),Wt=h,ki=_;break;case 5:bn||Qr(u,a);case 6:if(h=Wt,_=ki,Wt=null,xs(s,a,u),Wt=h,ki=_,Wt!==null)if(ki)try{(Wt.nodeType===9?Wt.body:Wt.nodeName==="HTML"?Wt.ownerDocument.body:Wt).removeChild(u.stateNode)}catch(E){xt(u,a,E)}else try{Wt.removeChild(u.stateNode)}catch(E){xt(u,a,E)}break;case 18:Wt!==null&&(ki?(s=Wt,bw(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),jl(s)):bw(Wt,u.stateNode));break;case 4:h=Wt,_=ki,Wt=u.stateNode.containerInfo,ki=!0,xs(s,a,u),Wt=h,ki=_;break;case 0:case 11:case 14:case 15:go(2,u,a),bn||go(4,u,a),xs(s,a,u);break;case 1:bn||(Qr(u,a),h=u.stateNode,typeof h.componentWillUnmount=="function"&&wb(u,a,h)),xs(s,a,u);break;case 21:xs(s,a,u);break;case 22:bn=(h=bn)||u.memoizedState!==null,xs(s,a,u),bn=h;break;default:xs(s,a,u)}}function Db(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{jl(s)}catch(u){xt(a,a.return,u)}}}function Mb(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{jl(s)}catch(u){xt(a,a.return,u)}}function iV(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new Ib),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new Ib),a;default:throw Error(i(435,s.tag))}}function ph(s,a){var u=iV(s);a.forEach(function(h){if(!u.has(h)){u.add(h);var _=fV.bind(null,s,h);h.then(_,_)}})}function Vi(s,a){var u=a.deletions;if(u!==null)for(var h=0;h<u.length;h++){var _=u[h],E=s,x=a,M=x;e:for(;M!==null;){switch(M.tag){case 27:if(bo(M.type)){Wt=M.stateNode,ki=!1;break e}break;case 5:Wt=M.stateNode,ki=!1;break e;case 3:case 4:Wt=M.stateNode.containerInfo,ki=!0;break e}M=M.return}if(Wt===null)throw Error(i(160));Pb(E,x,_),Wt=null,ki=!1,E=_.alternate,E!==null&&(E.return=null),_.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)kb(a,s),a=a.sibling}var Pr=null;function kb(s,a){var u=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Vi(a,s),Li(s),h&4&&(go(3,s,s.return),wc(3,s),go(5,s,s.return));break;case 1:Vi(a,s),Li(s),h&512&&(bn||u===null||Qr(u,u.return)),h&64&&ws&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?h:u.concat(h))));break;case 26:var _=Pr;if(Vi(a,s),Li(s),h&512&&(bn||u===null||Qr(u,u.return)),h&4){var E=u!==null?u.memoizedState:null;if(h=s.memoizedState,u===null)if(h===null)if(s.stateNode===null){e:{h=s.type,u=s.memoizedProps,_=_.ownerDocument||_;t:switch(h){case"title":E=_.getElementsByTagName("title")[0],(!E||E[Ni]||E[be]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=_.createElement(h),_.head.insertBefore(E,_.querySelector("head > title"))),Kn(E,h,u),E[be]=s,Jt(E),h=E;break e;case"link":var x=kw("link","href",_).get(h+(u.href||""));if(x){for(var M=0;M<x.length;M++)if(E=x[M],E.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&E.getAttribute("rel")===(u.rel==null?null:u.rel)&&E.getAttribute("title")===(u.title==null?null:u.title)&&E.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){x.splice(M,1);break t}}E=_.createElement(h),Kn(E,h,u),_.head.appendChild(E);break;case"meta":if(x=kw("meta","content",_).get(h+(u.content||""))){for(M=0;M<x.length;M++)if(E=x[M],E.getAttribute("content")===(u.content==null?null:""+u.content)&&E.getAttribute("name")===(u.name==null?null:u.name)&&E.getAttribute("property")===(u.property==null?null:u.property)&&E.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&E.getAttribute("charset")===(u.charSet==null?null:u.charSet)){x.splice(M,1);break t}}E=_.createElement(h),Kn(E,h,u),_.head.appendChild(E);break;default:throw Error(i(468,h))}E[be]=s,Jt(E),h=E}s.stateNode=h}else Vw(_,s.type,s.stateNode);else s.stateNode=Mw(_,h,s.memoizedProps);else E!==h?(E===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):E.count--,h===null?Vw(_,s.type,s.stateNode):Mw(_,h,s.memoizedProps)):h===null&&s.stateNode!==null&&ky(s,s.memoizedProps,u.memoizedProps)}break;case 27:Vi(a,s),Li(s),h&512&&(bn||u===null||Qr(u,u.return)),u!==null&&h&4&&ky(s,s.memoizedProps,u.memoizedProps);break;case 5:if(Vi(a,s),Li(s),h&512&&(bn||u===null||Qr(u,u.return)),s.flags&32){_=s.stateNode;try{lr(_,"")}catch(Ce){xt(s,s.return,Ce)}}h&4&&s.stateNode!=null&&(_=s.memoizedProps,ky(s,_,u!==null?u.memoizedProps:_)),h&1024&&(Oy=!0);break;case 6:if(Vi(a,s),Li(s),h&4){if(s.stateNode===null)throw Error(i(162));h=s.memoizedProps,u=s.stateNode;try{u.nodeValue=h}catch(Ce){xt(s,s.return,Ce)}}break;case 3:if(Nh=null,_=Pr,Pr=Ih(a.containerInfo),Vi(a,s),Pr=_,Li(s),h&4&&u!==null&&u.memoizedState.isDehydrated)try{jl(a.containerInfo)}catch(Ce){xt(s,s.return,Ce)}Oy&&(Oy=!1,Vb(s));break;case 4:h=Pr,Pr=Ih(s.stateNode.containerInfo),Vi(a,s),Li(s),Pr=h;break;case 12:Vi(a,s),Li(s);break;case 31:Vi(a,s),Li(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,ph(s,h)));break;case 13:Vi(a,s),Li(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(gh=bt()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,ph(s,h)));break;case 22:_=s.memoizedState!==null;var $=u!==null&&u.memoizedState!==null,Z=ws,ae=bn;if(ws=Z||_,bn=ae||$,Vi(a,s),bn=ae,ws=Z,Li(s),h&8192)e:for(a=s.stateNode,a._visibility=_?a._visibility&-2:a._visibility|1,_&&(u===null||$||ws||bn||Pa(s)),u=null,a=s;;){if(a.tag===5||a.tag===26){if(u===null){$=u=a;try{if(E=$.stateNode,_)x=E.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{M=$.stateNode;var ce=$.memoizedProps.style,te=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;M.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Ce){xt($,$.return,Ce)}}}else if(a.tag===6){if(u===null){$=a;try{$.stateNode.nodeValue=_?"":$.memoizedProps}catch(Ce){xt($,$.return,Ce)}}}else if(a.tag===18){if(u===null){$=a;try{var ie=$.stateNode;_?ww(ie,!0):ww($.stateNode,!1)}catch(Ce){xt($,$.return,Ce)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=s.updateQueue,h!==null&&(u=h.retryQueue,u!==null&&(h.retryQueue=null,ph(s,u))));break;case 19:Vi(a,s),Li(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,ph(s,h)));break;case 30:break;case 21:break;default:Vi(a,s),Li(s)}}function Li(s){var a=s.flags;if(a&2){try{for(var u,h=s.return;h!==null;){if(Ab(h)){u=h;break}h=h.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var _=u.stateNode,E=Vy(s);hh(s,E,_);break;case 5:var x=u.stateNode;u.flags&32&&(lr(x,""),u.flags&=-33);var M=Vy(s);hh(s,M,x);break;case 3:case 4:var $=u.stateNode.containerInfo,Z=Vy(s);Ly(s,Z,$);break;default:throw Error(i(161))}}catch(ae){xt(s,s.return,ae)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function Vb(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;Vb(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function As(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Rb(s,a.alternate,a),a=a.sibling}function Pa(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:go(4,a,a.return),Pa(a);break;case 1:Qr(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&wb(a,a.return,u),Pa(a);break;case 27:kc(a.stateNode);case 26:case 5:Qr(a,a.return),Pa(a);break;case 22:a.memoizedState===null&&Pa(a);break;case 30:Pa(a);break;default:Pa(a)}s=s.sibling}}function Cs(s,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,_=s,E=a,x=E.flags;switch(E.tag){case 0:case 11:case 15:Cs(_,E,u),wc(4,E);break;case 1:if(Cs(_,E,u),h=E,_=h.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(Z){xt(h,h.return,Z)}if(h=E,_=h.updateQueue,_!==null){var M=h.stateNode;try{var $=_.shared.hiddenCallbacks;if($!==null)for(_.shared.hiddenCallbacks=null,_=0;_<$.length;_++)fS($[_],M)}catch(Z){xt(h,h.return,Z)}}u&&x&64&&bb(E),xc(E,E.return);break;case 27:Cb(E);case 26:case 5:Cs(_,E,u),u&&h===null&&x&4&&xb(E),xc(E,E.return);break;case 12:Cs(_,E,u);break;case 31:Cs(_,E,u),u&&x&4&&Db(_,E);break;case 13:Cs(_,E,u),u&&x&4&&Mb(_,E);break;case 22:E.memoizedState===null&&Cs(_,E,u),xc(E,E.return);break;case 30:break;default:Cs(_,E,u)}a=a.sibling}}function Uy(s,a){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&dc(u))}function Fy(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&dc(s))}function Dr(s,a,u,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Lb(s,a,u,h),a=a.sibling}function Lb(s,a,u,h){var _=a.flags;switch(a.tag){case 0:case 11:case 15:Dr(s,a,u,h),_&2048&&wc(9,a);break;case 1:Dr(s,a,u,h);break;case 3:Dr(s,a,u,h),_&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&dc(s)));break;case 12:if(_&2048){Dr(s,a,u,h),s=a.stateNode;try{var E=a.memoizedProps,x=E.id,M=E.onPostCommit;typeof M=="function"&&M(x,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch($){xt(a,a.return,$)}}else Dr(s,a,u,h);break;case 31:Dr(s,a,u,h);break;case 13:Dr(s,a,u,h);break;case 23:break;case 22:E=a.stateNode,x=a.alternate,a.memoizedState!==null?E._visibility&2?Dr(s,a,u,h):Ac(s,a):E._visibility&2?Dr(s,a,u,h):(E._visibility|=2,kl(s,a,u,h,(a.subtreeFlags&10256)!==0||!1)),_&2048&&Uy(x,a);break;case 24:Dr(s,a,u,h),_&2048&&Fy(a.alternate,a);break;default:Dr(s,a,u,h)}}function kl(s,a,u,h,_){for(_=_&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var E=s,x=a,M=u,$=h,Z=x.flags;switch(x.tag){case 0:case 11:case 15:kl(E,x,M,$,_),wc(8,x);break;case 23:break;case 22:var ae=x.stateNode;x.memoizedState!==null?ae._visibility&2?kl(E,x,M,$,_):Ac(E,x):(ae._visibility|=2,kl(E,x,M,$,_)),_&&Z&2048&&Uy(x.alternate,x);break;case 24:kl(E,x,M,$,_),_&&Z&2048&&Fy(x.alternate,x);break;default:kl(E,x,M,$,_)}a=a.sibling}}function Ac(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=s,h=a,_=h.flags;switch(h.tag){case 22:Ac(u,h),_&2048&&Uy(h.alternate,h);break;case 24:Ac(u,h),_&2048&&Fy(h.alternate,h);break;default:Ac(u,h)}a=a.sibling}}var Cc=8192;function Vl(s,a,u){if(s.subtreeFlags&Cc)for(s=s.child;s!==null;)Ob(s,a,u),s=s.sibling}function Ob(s,a,u){switch(s.tag){case 26:Vl(s,a,u),s.flags&Cc&&s.memoizedState!==null&&HV(u,Pr,s.memoizedState,s.memoizedProps);break;case 5:Vl(s,a,u);break;case 3:case 4:var h=Pr;Pr=Ih(s.stateNode.containerInfo),Vl(s,a,u),Pr=h;break;case 22:s.memoizedState===null&&(h=s.alternate,h!==null&&h.memoizedState!==null?(h=Cc,Cc=16777216,Vl(s,a,u),Cc=h):Vl(s,a,u));break;default:Vl(s,a,u)}}function Ub(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function Ic(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var h=a[u];Un=h,Bb(h,s)}Ub(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Fb(s),s=s.sibling}function Fb(s){switch(s.tag){case 0:case 11:case 15:Ic(s),s.flags&2048&&go(9,s,s.return);break;case 3:Ic(s);break;case 12:Ic(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,mh(s)):Ic(s);break;default:Ic(s)}}function mh(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var h=a[u];Un=h,Bb(h,s)}Ub(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:go(8,a,a.return),mh(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,mh(a));break;default:mh(a)}s=s.sibling}}function Bb(s,a){for(;Un!==null;){var u=Un;switch(u.tag){case 0:case 11:case 15:go(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var h=u.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:dc(u.memoizedState.cache)}if(h=u.child,h!==null)h.return=u,Un=h;else e:for(u=s;Un!==null;){h=Un;var _=h.sibling,E=h.return;if(Nb(h),h===u){Un=null;break e}if(_!==null){_.return=E,Un=_;break e}Un=E}}}var rV={getCacheForType:function(s){var a=jn(Tn),u=a.data.get(s);return u===void 0&&(u=s(),a.data.set(s,u)),u},cacheSignal:function(){return jn(Tn).controller.signal}},sV=typeof WeakMap=="function"?WeakMap:Map,vt=0,Mt=null,nt=null,st=0,wt=0,Wi=null,yo=!1,Ll=!1,By=!1,Is=0,sn=0,vo=0,Da=0,qy=0,Qi=0,Ol=0,Rc=null,Oi=null,zy=!1,gh=0,qb=0,yh=1/0,vh=null,_o=null,Nn=0,To=null,Ul=null,Rs=0,Hy=0,Gy=null,zb=null,Nc=0,jy=null;function Xi(){return(vt&2)!==0&&st!==0?st&-st:W.T!==null?Qy():vn()}function Hb(){if(Qi===0)if((st&536870912)===0||ut){var s=Ye;Ye<<=1,(Ye&3932160)===0&&(Ye=262144),Qi=s}else Qi=536870912;return s=Yi.current,s!==null&&(s.flags|=32),Qi}function Ui(s,a,u){(s===Mt&&(wt===2||wt===9)||s.cancelPendingCommit!==null)&&(Fl(s,0),Eo(s,st,Qi,!1)),Ct(s,u),((vt&2)===0||s!==Mt)&&(s===Mt&&((vt&2)===0&&(Da|=u),sn===4&&Eo(s,st,Qi,!1)),Xr(s))}function Gb(s,a,u){if((vt&6)!==0)throw Error(i(327));var h=!u&&(a&127)===0&&(a&s.expiredLanes)===0||He(s,a),_=h?lV(s,a):Ky(s,a,!0),E=h;do{if(_===0){Ll&&!h&&Eo(s,a,0,!1);break}else{if(u=s.current.alternate,E&&!oV(u)){_=Ky(s,a,!1),E=!1;continue}if(_===2){if(E=a,s.errorRecoveryDisabledLanes&E)var x=0;else x=s.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){a=x;e:{var M=s;_=Rc;var $=M.current.memoizedState.isDehydrated;if($&&(Fl(M,x).flags|=256),x=Ky(M,x,!1),x!==2){if(By&&!$){M.errorRecoveryDisabledLanes|=E,Da|=E,_=4;break e}E=Oi,Oi=_,E!==null&&(Oi===null?Oi=E:Oi.push.apply(Oi,E))}_=x}if(E=!1,_!==2)continue}}if(_===1){Fl(s,0),Eo(s,a,0,!0);break}e:{switch(h=s,E=_,E){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Eo(h,a,Qi,!yo);break e;case 2:Oi=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(_=gh+300-bt(),10<_)){if(Eo(h,a,Qi,!yo),Me(h,0,!0)!==0)break e;Rs=a,h.timeoutHandle=Ew(jb.bind(null,h,u,Oi,vh,zy,a,Qi,Da,Ol,yo,E,"Throttled",-0,0),_);break e}jb(h,u,Oi,vh,zy,a,Qi,Da,Ol,yo,E,null,-0,0)}}break}while(!0);Xr(s)}function jb(s,a,u,h,_,E,x,M,$,Z,ae,ce,te,ie){if(s.timeoutHandle=-1,ce=a.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vn},Ob(a,E,ce);var Ce=(E&62914560)===E?gh-bt():(E&4194048)===E?qb-bt():0;if(Ce=GV(ce,Ce),Ce!==null){Rs=E,s.cancelPendingCommit=Ce(Zb.bind(null,s,a,E,u,h,_,x,M,$,ae,ce,null,te,ie)),Eo(s,E,x,!Z);return}}Zb(s,a,E,u,h,_,x,M,$)}function oV(s){for(var a=s;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var h=0;h<u.length;h++){var _=u[h],E=_.getSnapshot;_=_.value;try{if(!$i(E(),_))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Eo(s,a,u,h){a&=~qy,a&=~Da,s.suspendedLanes|=a,s.pingedLanes&=~a,h&&(s.warmLanes|=a),h=s.expirationTimes;for(var _=a;0<_;){var E=31-pe(_),x=1<<E;h[E]=-1,_&=~x}u!==0&&Hn(s,u,a)}function _h(){return(vt&6)===0?(Pc(0),!1):!0}function $y(){if(nt!==null){if(wt===0)var s=nt.return;else s=nt,vs=ba=null,ly(s),Rl=null,hc=0,s=nt;for(;s!==null;)Sb(s.alternate,s),s=s.return;nt=null}}function Fl(s,a){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,AV(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),Rs=0,$y(),Mt=s,nt=u=gs(s.current,null),st=a,wt=0,Wi=null,yo=!1,Ll=He(s,a),By=!1,Ol=Qi=qy=Da=vo=sn=0,Oi=Rc=null,zy=!1,(a&8)!==0&&(a|=a&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=a;0<h;){var _=31-pe(h),E=1<<_;a|=s[_],h&=~E}return Is=a,Bf(),u}function $b(s,a){Je=null,W.H=Ec,a===Il||a===Yf?(a=lS(),wt=3):a===Wg?(a=lS(),wt=4):wt=a===wy?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Wi=a,nt===null&&(sn=1,lh(s,cr(a,s.current)))}function Kb(){var s=Yi.current;return s===null?!0:(st&4194048)===st?pr===null:(st&62914560)===st||(st&536870912)!==0?s===pr:!1}function Yb(){var s=W.H;return W.H=Ec,s===null?Ec:s}function Jb(){var s=W.A;return W.A=rV,s}function Th(){sn=4,yo||(st&4194048)!==st&&Yi.current!==null||(Ll=!0),(vo&134217727)===0&&(Da&134217727)===0||Mt===null||Eo(Mt,st,Qi,!1)}function Ky(s,a,u){var h=vt;vt|=2;var _=Yb(),E=Jb();(Mt!==s||st!==a)&&(vh=null,Fl(s,a)),a=!1;var x=sn;e:do try{if(wt!==0&&nt!==null){var M=nt,$=Wi;switch(wt){case 8:$y(),x=6;break e;case 3:case 2:case 9:case 6:Yi.current===null&&(a=!0);var Z=wt;if(wt=0,Wi=null,Bl(s,M,$,Z),u&&Ll){x=0;break e}break;default:Z=wt,wt=0,Wi=null,Bl(s,M,$,Z)}}aV(),x=sn;break}catch(ae){$b(s,ae)}while(!0);return a&&s.shellSuspendCounter++,vs=ba=null,vt=h,W.H=_,W.A=E,nt===null&&(Mt=null,st=0,Bf()),x}function aV(){for(;nt!==null;)Wb(nt)}function lV(s,a){var u=vt;vt|=2;var h=Yb(),_=Jb();Mt!==s||st!==a?(vh=null,yh=bt()+500,Fl(s,a)):Ll=He(s,a);e:do try{if(wt!==0&&nt!==null){a=nt;var E=Wi;t:switch(wt){case 1:wt=0,Wi=null,Bl(s,a,E,1);break;case 2:case 9:if(oS(E)){wt=0,Wi=null,Qb(a);break}a=function(){wt!==2&&wt!==9||Mt!==s||(wt=7),Xr(s)},E.then(a,a);break e;case 3:wt=7;break e;case 4:wt=5;break e;case 7:oS(E)?(wt=0,Wi=null,Qb(a)):(wt=0,Wi=null,Bl(s,a,E,7));break;case 5:var x=null;switch(nt.tag){case 26:x=nt.memoizedState;case 5:case 27:var M=nt;if(x?Lw(x):M.stateNode.complete){wt=0,Wi=null;var $=M.sibling;if($!==null)nt=$;else{var Z=M.return;Z!==null?(nt=Z,Eh(Z)):nt=null}break t}}wt=0,Wi=null,Bl(s,a,E,5);break;case 6:wt=0,Wi=null,Bl(s,a,E,6);break;case 8:$y(),sn=6;break e;default:throw Error(i(462))}}uV();break}catch(ae){$b(s,ae)}while(!0);return vs=ba=null,W.H=h,W.A=_,vt=u,nt!==null?0:(Mt=null,st=0,Bf(),sn)}function uV(){for(;nt!==null&&!wr();)Wb(nt)}function Wb(s){var a=Tb(s.alternate,s,Is);s.memoizedProps=s.pendingProps,a===null?Eh(s):nt=a}function Qb(s){var a=s,u=a.alternate;switch(a.tag){case 15:case 0:a=pb(u,a,a.pendingProps,a.type,void 0,st);break;case 11:a=pb(u,a,a.pendingProps,a.type.render,a.ref,st);break;case 5:ly(a);default:Sb(u,a),a=nt=JE(a,Is),a=Tb(u,a,Is)}s.memoizedProps=s.pendingProps,a===null?Eh(s):nt=a}function Bl(s,a,u,h){vs=ba=null,ly(a),Rl=null,hc=0;var _=a.return;try{if(Q2(s,_,a,u,st)){sn=1,lh(s,cr(u,s.current)),nt=null;return}}catch(E){if(_!==null)throw nt=_,E;sn=1,lh(s,cr(u,s.current)),nt=null;return}a.flags&32768?(ut||h===1?s=!0:Ll||(st&536870912)!==0?s=!1:(yo=s=!0,(h===2||h===9||h===3||h===6)&&(h=Yi.current,h!==null&&h.tag===13&&(h.flags|=16384))),Xb(a,s)):Eh(a)}function Eh(s){var a=s;do{if((a.flags&32768)!==0){Xb(a,yo);return}s=a.return;var u=eV(a.alternate,a,Is);if(u!==null){nt=u;return}if(a=a.sibling,a!==null){nt=a;return}nt=a=s}while(a!==null);sn===0&&(sn=5)}function Xb(s,a){do{var u=tV(s.alternate,s);if(u!==null){u.flags&=32767,nt=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(s=s.sibling,s!==null)){nt=s;return}nt=s=u}while(s!==null);sn=6,nt=null}function Zb(s,a,u,h,_,E,x,M,$){s.cancelPendingCommit=null;do Sh();while(Nn!==0);if((vt&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(E=a.lanes|a.childLanes,E|=Vg,ft(s,u,E,x,M,$),s===Mt&&(nt=Mt=null,st=0),Ul=a,To=s,Rs=u,Hy=E,Gy=_,zb=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,hV(Qt,function(){return rw(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=W.T,W.T=null,_=se.p,se.p=2,x=vt,vt|=4;try{nV(s,a,u)}finally{vt=x,se.p=_,W.T=h}}Nn=1,ew(),tw(),nw()}}function ew(){if(Nn===1){Nn=0;var s=To,a=Ul,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=W.T,W.T=null;var h=se.p;se.p=2;var _=vt;vt|=4;try{kb(a,s);var E=sv,x=BE(s.containerInfo),M=E.focusedElem,$=E.selectionRange;if(x!==M&&M&&M.ownerDocument&&FE(M.ownerDocument.documentElement,M)){if($!==null&&Ng(M)){var Z=$.start,ae=$.end;if(ae===void 0&&(ae=Z),"selectionStart"in M)M.selectionStart=Z,M.selectionEnd=Math.min(ae,M.value.length);else{var ce=M.ownerDocument||document,te=ce&&ce.defaultView||window;if(te.getSelection){var ie=te.getSelection(),Ce=M.textContent.length,Le=Math.min($.start,Ce),Nt=$.end===void 0?Le:Math.min($.end,Ce);!ie.extend&&Le>Nt&&(x=Nt,Nt=Le,Le=x);var J=UE(M,Le),Y=UE(M,Nt);if(J&&Y&&(ie.rangeCount!==1||ie.anchorNode!==J.node||ie.anchorOffset!==J.offset||ie.focusNode!==Y.node||ie.focusOffset!==Y.offset)){var X=ce.createRange();X.setStart(J.node,J.offset),ie.removeAllRanges(),Le>Nt?(ie.addRange(X),ie.extend(Y.node,Y.offset)):(X.setEnd(Y.node,Y.offset),ie.addRange(X))}}}}for(ce=[],ie=M;ie=ie.parentNode;)ie.nodeType===1&&ce.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<ce.length;M++){var ue=ce[M];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}kh=!!rv,sv=rv=null}finally{vt=_,se.p=h,W.T=u}}s.current=a,Nn=2}}function tw(){if(Nn===2){Nn=0;var s=To,a=Ul,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=W.T,W.T=null;var h=se.p;se.p=2;var _=vt;vt|=4;try{Rb(s,a.alternate,a)}finally{vt=_,se.p=h,W.T=u}}Nn=3}}function nw(){if(Nn===4||Nn===3){Nn=0,zi();var s=To,a=Ul,u=Rs,h=zb;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Nn=5:(Nn=0,Ul=To=null,iw(s,s.pendingLanes));var _=s.pendingLanes;if(_===0&&(_o=null),Rn(u),a=a.stateNode,Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(fi,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=W.T,_=se.p,se.p=2,W.T=null;try{for(var E=s.onRecoverableError,x=0;x<h.length;x++){var M=h[x];E(M.value,{componentStack:M.stack})}}finally{W.T=a,se.p=_}}(Rs&3)!==0&&Sh(),Xr(s),_=s.pendingLanes,(u&261930)!==0&&(_&42)!==0?s===jy?Nc++:(Nc=0,jy=s):Nc=0,Pc(0)}}function iw(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,dc(a)))}function Sh(){return ew(),tw(),nw(),rw()}function rw(){if(Nn!==5)return!1;var s=To,a=Hy;Hy=0;var u=Rn(Rs),h=W.T,_=se.p;try{se.p=32>u?32:u,W.T=null,u=Gy,Gy=null;var E=To,x=Rs;if(Nn=0,Ul=To=null,Rs=0,(vt&6)!==0)throw Error(i(331));var M=vt;if(vt|=4,Fb(E.current),Lb(E,E.current,x,u),vt=M,Pc(0,!1),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(fi,E)}catch{}return!0}finally{se.p=_,W.T=h,iw(s,a)}}function sw(s,a,u){a=cr(u,a),a=by(s.stateNode,a,2),s=ho(s,a,2),s!==null&&(Ct(s,2),Xr(s))}function xt(s,a,u){if(s.tag===3)sw(s,s,u);else for(;a!==null;){if(a.tag===3){sw(a,s,u);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(_o===null||!_o.has(h))){s=cr(u,s),u=ob(2),h=ho(a,u,2),h!==null&&(ab(u,h,a,s),Ct(h,2),Xr(h));break}}a=a.return}}function Yy(s,a,u){var h=s.pingCache;if(h===null){h=s.pingCache=new sV;var _=new Set;h.set(a,_)}else _=h.get(a),_===void 0&&(_=new Set,h.set(a,_));_.has(u)||(By=!0,_.add(u),s=cV.bind(null,s,a,u),a.then(s,s))}function cV(s,a,u){var h=s.pingCache;h!==null&&h.delete(a),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,Mt===s&&(st&u)===u&&(sn===4||sn===3&&(st&62914560)===st&&300>bt()-gh?(vt&2)===0&&Fl(s,0):qy|=u,Ol===st&&(Ol=0)),Xr(s)}function ow(s,a){a===0&&(a=Ci()),s=Ta(s,a),s!==null&&(Ct(s,a),Xr(s))}function dV(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),ow(s,u)}function fV(s,a){var u=0;switch(s.tag){case 31:case 13:var h=s.stateNode,_=s.memoizedState;_!==null&&(u=_.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(a),ow(s,u)}function hV(s,a){return kn(s,a)}var bh=null,ql=null,Jy=!1,wh=!1,Wy=!1,So=0;function Xr(s){s!==ql&&s.next===null&&(ql===null?bh=ql=s:ql=ql.next=s),wh=!0,Jy||(Jy=!0,mV())}function Pc(s,a){if(!Wy&&wh){Wy=!0;do for(var u=!1,h=bh;h!==null;){if(s!==0){var _=h.pendingLanes;if(_===0)var E=0;else{var x=h.suspendedLanes,M=h.pingedLanes;E=(1<<31-pe(42|s)+1)-1,E&=_&~(x&~M),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(u=!0,cw(h,E))}else E=st,E=Me(h,h===Mt?E:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(E&3)===0||He(h,E)||(u=!0,cw(h,E));h=h.next}while(u);Wy=!1}}function pV(){aw()}function aw(){wh=Jy=!1;var s=0;So!==0&&xV()&&(s=So);for(var a=bt(),u=null,h=bh;h!==null;){var _=h.next,E=lw(h,a);E===0?(h.next=null,u===null?bh=_:u.next=_,_===null&&(ql=u)):(u=h,(s!==0||(E&3)!==0)&&(wh=!0)),h=_}Nn!==0&&Nn!==5||Pc(s),So!==0&&(So=0)}function lw(s,a){for(var u=s.suspendedLanes,h=s.pingedLanes,_=s.expirationTimes,E=s.pendingLanes&-62914561;0<E;){var x=31-pe(E),M=1<<x,$=_[x];$===-1?((M&u)===0||(M&h)!==0)&&(_[x]=cn(M,a)):$<=a&&(s.expiredLanes|=M),E&=~M}if(a=Mt,u=st,u=Me(s,s===a?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,u===0||s===a&&(wt===2||wt===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&di(h),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||He(s,u)){if(a=u&-u,a===s.callbackPriority)return a;switch(h!==null&&di(h),Rn(u)){case 2:case 8:u=Lt;break;case 32:u=Qt;break;case 268435456:u=xr;break;default:u=Qt}return h=uw.bind(null,s),u=kn(u,h),s.callbackPriority=a,s.callbackNode=u,a}return h!==null&&h!==null&&di(h),s.callbackPriority=2,s.callbackNode=null,2}function uw(s,a){if(Nn!==0&&Nn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(Sh()&&s.callbackNode!==u)return null;var h=st;return h=Me(s,s===Mt?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(Gb(s,h,a),lw(s,bt()),s.callbackNode!=null&&s.callbackNode===u?uw.bind(null,s):null)}function cw(s,a){if(Sh())return null;Gb(s,a,!0)}function mV(){CV(function(){(vt&6)!==0?kn(ke,pV):aw()})}function Qy(){if(So===0){var s=Al;s===0&&(s=Qe,Qe<<=1,(Qe&261888)===0&&(Qe=256)),So=s}return So}function dw(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:$r(""+s)}function fw(s,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,s.id&&u.setAttribute("form",s.id),a.parentNode.insertBefore(u,a),s=new FormData(s),u.parentNode.removeChild(u),s}function gV(s,a,u,h,_){if(a==="submit"&&u&&u.stateNode===_){var E=dw((_[qe]||null).action),x=h.submitter;x&&(a=(a=x[qe]||null)?dw(a.formAction):x.getAttribute("formAction"),a!==null&&(E=a,x=null));var M=new ha("action","action",null,h,_);s.push({event:M,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(So!==0){var $=x?fw(_,x):new FormData(_);yy(u,{pending:!0,data:$,method:_.method,action:E},null,$)}}else typeof E=="function"&&(M.preventDefault(),$=x?fw(_,x):new FormData(_),yy(u,{pending:!0,data:$,method:_.method,action:E},E,$))},currentTarget:_}]})}}for(var Xy=0;Xy<kg.length;Xy++){var Zy=kg[Xy],yV=Zy.toLowerCase(),vV=Zy[0].toUpperCase()+Zy.slice(1);Nr(yV,"on"+vV)}Nr(HE,"onAnimationEnd"),Nr(GE,"onAnimationIteration"),Nr(jE,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(k2,"onTransitionRun"),Nr(V2,"onTransitionStart"),Nr(L2,"onTransitionCancel"),Nr($E,"onTransitionEnd"),jr("onMouseEnter",["mouseout","mouseover"]),jr("onMouseLeave",["mouseout","mouseover"]),jr("onPointerEnter",["pointerout","pointerover"]),jr("onPointerLeave",["pointerout","pointerover"]),gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gi("onBeforeInput",["compositionend","keypress","textInput","paste"]),gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_V=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dc));function hw(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var h=s[u],_=h.event;h=h.listeners;e:{var E=void 0;if(a)for(var x=h.length-1;0<=x;x--){var M=h[x],$=M.instance,Z=M.currentTarget;if(M=M.listener,$!==E&&_.isPropagationStopped())break e;E=M,_.currentTarget=Z;try{E(_)}catch(ae){Ff(ae)}_.currentTarget=null,E=$}else for(x=0;x<h.length;x++){if(M=h[x],$=M.instance,Z=M.currentTarget,M=M.listener,$!==E&&_.isPropagationStopped())break e;E=M,_.currentTarget=Z;try{E(_)}catch(ae){Ff(ae)}_.currentTarget=null,E=$}}}}function it(s,a){var u=a[Ri];u===void 0&&(u=a[Ri]=new Set);var h=s+"__bubble";u.has(h)||(pw(a,s,2,!1),u.add(h))}function ev(s,a,u){var h=0;a&&(h|=4),pw(u,s,h,a)}var xh="_reactListening"+Math.random().toString(36).slice(2);function tv(s){if(!s[xh]){s[xh]=!0,Cr.forEach(function(u){u!=="selectionchange"&&(_V.has(u)||ev(u,!1,s),ev(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[xh]||(a[xh]=!0,ev("selectionchange",!1,a))}}function pw(s,a,u,h){switch(Hw(a)){case 2:var _=KV;break;case 8:_=YV;break;default:_=gv}u=_.bind(null,a,u,s),_=void 0,!ec||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(_=!0),h?_!==void 0?s.addEventListener(a,u,{capture:!0,passive:_}):s.addEventListener(a,u,!0):_!==void 0?s.addEventListener(a,u,{passive:_}):s.addEventListener(a,u,!1)}function nv(s,a,u,h,_){var E=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var x=h.tag;if(x===3||x===4){var M=h.stateNode.containerInfo;if(M===_)break;if(x===4)for(x=h.return;x!==null;){var $=x.tag;if(($===3||$===4)&&x.stateNode.containerInfo===_)return;x=x.return}for(;M!==null;){if(x=Pi(M),x===null)return;if($=x.tag,$===5||$===6||$===26||$===27){h=E=x;continue e}M=M.parentNode}}h=h.return}bf(function(){var Z=E,ae=hl(u),ce=[];e:{var te=KE.get(s);if(te!==void 0){var ie=ha,Ce=s;switch(s){case"keypress":if(fa(u)===0)break e;case"keydown":case"keyup":ie=Df;break;case"focusin":Ce="focus",ie=no;break;case"focusout":Ce="blur",ie=no;break;case"beforeblur":case"afterblur":ie=no;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=xf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=Af;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=kf;break;case HE:case GE:case jE:ie=gl;break;case $E:ie=yl;break;case"scroll":case"scrollend":ie=wf;break;case"wheel":ie=Lf;break;case"copy":case"cut":case"paste":ie=If;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=sc;break;case"toggle":case"beforetoggle":ie=ro}var Le=(a&4)!==0,Nt=!Le&&(s==="scroll"||s==="scrollend"),J=Le?te!==null?te+"Capture":null:te;Le=[];for(var Y=Z,X;Y!==null;){var ue=Y;if(X=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||X===null||J===null||(ue=Di(Y,J),ue!=null&&Le.push(Mc(Y,ue,X))),Nt)break;Y=Y.return}0<Le.length&&(te=new ie(te,Ce,null,u,ae),ce.push({event:te,listeners:Le}))}}if((a&7)===0){e:{if(te=s==="mouseover"||s==="pointerover",ie=s==="mouseout"||s==="pointerout",te&&u!==fl&&(Ce=u.relatedTarget||u.fromElement)&&(Pi(Ce)||Ce[Dt]))break e;if((ie||te)&&(te=ae.window===ae?ae:(te=ae.ownerDocument)?te.defaultView||te.parentWindow:window,ie?(Ce=u.relatedTarget||u.toElement,ie=Z,Ce=Ce?Pi(Ce):null,Ce!==null&&(Nt=o(Ce),Le=Ce.tag,Ce!==Nt||Le!==5&&Le!==27&&Le!==6)&&(Ce=null)):(ie=null,Ce=Z),ie!==Ce)){if(Le=xf,ue="onMouseLeave",J="onMouseEnter",Y="mouse",(s==="pointerout"||s==="pointerover")&&(Le=sc,ue="onPointerLeave",J="onPointerEnter",Y="pointer"),Nt=ie==null?te:Gr(ie),X=Ce==null?te:Gr(Ce),te=new Le(ue,Y+"leave",ie,u,ae),te.target=Nt,te.relatedTarget=X,ue=null,Pi(ae)===Z&&(Le=new Le(J,Y+"enter",Ce,u,ae),Le.target=X,Le.relatedTarget=Nt,ue=Le),Nt=ue,ie&&Ce)t:{for(Le=TV,J=ie,Y=Ce,X=0,ue=J;ue;ue=Le(ue))X++;ue=0;for(var Pe=Y;Pe;Pe=Le(Pe))ue++;for(;0<X-ue;)J=Le(J),X--;for(;0<ue-X;)Y=Le(Y),ue--;for(;X--;){if(J===Y||Y!==null&&J===Y.alternate){Le=J;break t}J=Le(J),Y=Le(Y)}Le=null}else Le=null;ie!==null&&mw(ce,te,ie,Le,!1),Ce!==null&&Nt!==null&&mw(ce,Nt,Ce,Le,!0)}}e:{if(te=Z?Gr(Z):window,ie=te.nodeName&&te.nodeName.toLowerCase(),ie==="select"||ie==="input"&&te.type==="file")var pt=DE;else if(Mi(te))if(ME)pt=P2;else{pt=R2;var Re=I2}else ie=te.nodeName,!ie||ie.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?Z&&Xu(Z.elementType)&&(pt=DE):pt=N2;if(pt&&(pt=pt(s,Z))){ya(ce,pt,u,ae);break e}Re&&Re(s,te,Z),s==="focusout"&&Z&&te.type==="number"&&Z.memoizedProps.value!=null&&dl(te,"number",te.value)}switch(Re=Z?Gr(Z):window,s){case"focusin":(Mi(Re)||Re.contentEditable==="true")&&(vl=Re,Pg=Z,lc=null);break;case"focusout":lc=Pg=vl=null;break;case"mousedown":Dg=!0;break;case"contextmenu":case"mouseup":case"dragend":Dg=!1,qE(ce,u,ae);break;case"selectionchange":if(M2)break;case"keydown":case"keyup":qE(ce,u,ae)}var We;if(w)e:{switch(s){case"compositionstart":var ot="onCompositionStart";break e;case"compositionend":ot="onCompositionEnd";break e;case"compositionupdate":ot="onCompositionUpdate";break e}ot=void 0}else Xe?Tt(s,u)&&(ot="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(ot="onCompositionStart");ot&&(Q&&u.locale!=="ko"&&(Xe||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&Xe&&(We=Xs()):(ji=ae,pl="value"in ji?ji.value:ji.textContent,Xe=!0)),Re=Ah(Z,ot),0<Re.length&&(ot=new nc(ot,s,null,u,ae),ce.push({event:ot,listeners:Re}),We?ot.data=We:(We=_n(u),We!==null&&(ot.data=We)))),(We=L?Ln(s,u):On(s,u))&&(ot=Ah(Z,"onBeforeInput"),0<ot.length&&(Re=new nc("onBeforeInput","beforeinput",null,u,ae),ce.push({event:Re,listeners:ot}),Re.data=We)),gV(ce,s,Z,u,ae)}hw(ce,a)})}function Mc(s,a,u){return{instance:s,listener:a,currentTarget:u}}function Ah(s,a){for(var u=a+"Capture",h=[];s!==null;){var _=s,E=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||E===null||(_=Di(s,u),_!=null&&h.unshift(Mc(s,_,E)),_=Di(s,a),_!=null&&h.push(Mc(s,_,E))),s.tag===3)return h;s=s.return}return[]}function TV(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function mw(s,a,u,h,_){for(var E=a._reactName,x=[];u!==null&&u!==h;){var M=u,$=M.alternate,Z=M.stateNode;if(M=M.tag,$!==null&&$===h)break;M!==5&&M!==26&&M!==27||Z===null||($=Z,_?(Z=Di(u,E),Z!=null&&x.unshift(Mc(u,Z,$))):_||(Z=Di(u,E),Z!=null&&x.push(Mc(u,Z,$)))),u=u.return}x.length!==0&&s.push({event:a,listeners:x})}var EV=/\r\n?/g,SV=/\u0000|\uFFFD/g;function gw(s){return(typeof s=="string"?s:""+s).replace(EV,`
`).replace(SV,"")}function yw(s,a){return a=gw(a),gw(s)===a}function Rt(s,a,u,h,_,E){switch(u){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||lr(s,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&lr(s,""+h);break;case"className":Js(s,"class",h);break;case"tabIndex":Js(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Js(s,u,h);break;case"style":Ef(s,h,E);break;case"data":if(a!=="object"){Js(s,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||u!=="href")){s.removeAttribute(u);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=$r(""+h),s.setAttribute(u,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(u==="formAction"?(a!=="input"&&Rt(s,a,"name",_.name,_,null),Rt(s,a,"formEncType",_.formEncType,_,null),Rt(s,a,"formMethod",_.formMethod,_,null),Rt(s,a,"formTarget",_.formTarget,_,null)):(Rt(s,a,"encType",_.encType,_,null),Rt(s,a,"method",_.method,_,null),Rt(s,a,"target",_.target,_,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=$r(""+h),s.setAttribute(u,h);break;case"onClick":h!=null&&(s.onclick=Vn);break;case"onScroll":h!=null&&it("scroll",s);break;case"onScrollEnd":h!=null&&it("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(_.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}u=$r(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""+h):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":h===!0?s.setAttribute(u,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,h):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(u,h):s.removeAttribute(u);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(u):s.setAttribute(u,h);break;case"popover":it("beforetoggle",s),it("toggle",s),Ys(s,"popover",h);break;case"xlinkActuate":ar(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":ar(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":ar(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":ar(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":ar(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":ar(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":ar(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":ar(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":ar(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Ys(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=xg.get(u)||u,Ys(s,u,h))}}function iv(s,a,u,h,_,E){switch(u){case"style":Ef(s,h,E);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(_.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"children":typeof h=="string"?lr(s,h):(typeof h=="number"||typeof h=="bigint")&&lr(s,""+h);break;case"onScroll":h!=null&&it("scroll",s);break;case"onScrollEnd":h!=null&&it("scrollend",s);break;case"onClick":h!=null&&(s.onclick=Vn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ir.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(_=u.endsWith("Capture"),a=u.slice(2,_?u.length-7:void 0),E=s[qe]||null,E=E!=null?E[u]:null,typeof E=="function"&&s.removeEventListener(a,E,_),typeof h=="function")){typeof E!="function"&&E!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(a,h,_);break e}u in s?s[u]=h:h===!0?s.setAttribute(u,""):Ys(s,u,h)}}}function Kn(s,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":it("error",s),it("load",s);var h=!1,_=!1,E;for(E in u)if(u.hasOwnProperty(E)){var x=u[E];if(x!=null)switch(E){case"src":h=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Rt(s,a,E,x,u,null)}}_&&Rt(s,a,"srcSet",u.srcSet,u,null),h&&Rt(s,a,"src",u.src,u,null);return;case"input":it("invalid",s);var M=E=x=_=null,$=null,Z=null;for(h in u)if(u.hasOwnProperty(h)){var ae=u[h];if(ae!=null)switch(h){case"name":_=ae;break;case"type":x=ae;break;case"checked":$=ae;break;case"defaultChecked":Z=ae;break;case"value":E=ae;break;case"defaultValue":M=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(i(137,a));break;default:Rt(s,a,h,ae,u,null)}}ca(s,E,M,$,Z,x,_,!1);return;case"select":it("invalid",s),h=x=E=null;for(_ in u)if(u.hasOwnProperty(_)&&(M=u[_],M!=null))switch(_){case"value":E=M;break;case"defaultValue":x=M;break;case"multiple":h=M;default:Rt(s,a,_,M,u,null)}a=E,u=x,s.multiple=!!h,a!=null?ht(s,!!h,a,!1):u!=null&&ht(s,!!h,u,!0);return;case"textarea":it("invalid",s),E=_=h=null;for(x in u)if(u.hasOwnProperty(x)&&(M=u[x],M!=null))switch(x){case"value":h=M;break;case"defaultValue":_=M;break;case"children":E=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(i(91));break;default:Rt(s,a,x,M,u,null)}Qs(s,h,_,E);return;case"option":for($ in u)if(u.hasOwnProperty($)&&(h=u[$],h!=null))switch($){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Rt(s,a,$,h,u,null)}return;case"dialog":it("beforetoggle",s),it("toggle",s),it("cancel",s),it("close",s);break;case"iframe":case"object":it("load",s);break;case"video":case"audio":for(h=0;h<Dc.length;h++)it(Dc[h],s);break;case"image":it("error",s),it("load",s);break;case"details":it("toggle",s);break;case"embed":case"source":case"link":it("error",s),it("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in u)if(u.hasOwnProperty(Z)&&(h=u[Z],h!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Rt(s,a,Z,h,u,null)}return;default:if(Xu(a)){for(ae in u)u.hasOwnProperty(ae)&&(h=u[ae],h!==void 0&&iv(s,a,ae,h,u,void 0));return}}for(M in u)u.hasOwnProperty(M)&&(h=u[M],h!=null&&Rt(s,a,M,h,u,null))}function bV(s,a,u,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,E=null,x=null,M=null,$=null,Z=null,ae=null;for(ie in u){var ce=u[ie];if(u.hasOwnProperty(ie)&&ce!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":$=ce;default:h.hasOwnProperty(ie)||Rt(s,a,ie,null,h,ce)}}for(var te in h){var ie=h[te];if(ce=u[te],h.hasOwnProperty(te)&&(ie!=null||ce!=null))switch(te){case"type":E=ie;break;case"name":_=ie;break;case"checked":Z=ie;break;case"defaultChecked":ae=ie;break;case"value":x=ie;break;case"defaultValue":M=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,a));break;default:ie!==ce&&Rt(s,a,te,ie,h,ce)}}Ws(s,x,M,$,Z,ae,E,_);return;case"select":ie=x=M=te=null;for(E in u)if($=u[E],u.hasOwnProperty(E)&&$!=null)switch(E){case"value":break;case"multiple":ie=$;default:h.hasOwnProperty(E)||Rt(s,a,E,null,h,$)}for(_ in h)if(E=h[_],$=u[_],h.hasOwnProperty(_)&&(E!=null||$!=null))switch(_){case"value":te=E;break;case"defaultValue":M=E;break;case"multiple":x=E;default:E!==$&&Rt(s,a,_,E,h,$)}a=M,u=x,h=ie,te!=null?ht(s,!!u,te,!1):!!h!=!!u&&(a!=null?ht(s,!!u,a,!0):ht(s,!!u,u?[]:"",!1));return;case"textarea":ie=te=null;for(M in u)if(_=u[M],u.hasOwnProperty(M)&&_!=null&&!h.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:Rt(s,a,M,null,h,_)}for(x in h)if(_=h[x],E=u[x],h.hasOwnProperty(x)&&(_!=null||E!=null))switch(x){case"value":te=_;break;case"defaultValue":ie=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(i(91));break;default:_!==E&&Rt(s,a,x,_,h,E)}da(s,te,ie);return;case"option":for(var Ce in u)if(te=u[Ce],u.hasOwnProperty(Ce)&&te!=null&&!h.hasOwnProperty(Ce))switch(Ce){case"selected":s.selected=!1;break;default:Rt(s,a,Ce,null,h,te)}for($ in h)if(te=h[$],ie=u[$],h.hasOwnProperty($)&&te!==ie&&(te!=null||ie!=null))switch($){case"selected":s.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:Rt(s,a,$,te,h,ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in u)te=u[Le],u.hasOwnProperty(Le)&&te!=null&&!h.hasOwnProperty(Le)&&Rt(s,a,Le,null,h,te);for(Z in h)if(te=h[Z],ie=u[Z],h.hasOwnProperty(Z)&&te!==ie&&(te!=null||ie!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,a));break;default:Rt(s,a,Z,te,h,ie)}return;default:if(Xu(a)){for(var Nt in u)te=u[Nt],u.hasOwnProperty(Nt)&&te!==void 0&&!h.hasOwnProperty(Nt)&&iv(s,a,Nt,void 0,h,te);for(ae in h)te=h[ae],ie=u[ae],!h.hasOwnProperty(ae)||te===ie||te===void 0&&ie===void 0||iv(s,a,ae,te,h,ie);return}}for(var J in u)te=u[J],u.hasOwnProperty(J)&&te!=null&&!h.hasOwnProperty(J)&&Rt(s,a,J,null,h,te);for(ce in h)te=h[ce],ie=u[ce],!h.hasOwnProperty(ce)||te===ie||te==null&&ie==null||Rt(s,a,ce,te,h,ie)}function vw(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function wV(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,u=performance.getEntriesByType("resource"),h=0;h<u.length;h++){var _=u[h],E=_.transferSize,x=_.initiatorType,M=_.duration;if(E&&M&&vw(x)){for(x=0,M=_.responseEnd,h+=1;h<u.length;h++){var $=u[h],Z=$.startTime;if(Z>M)break;var ae=$.transferSize,ce=$.initiatorType;ae&&vw(ce)&&($=$.responseEnd,x+=ae*($<M?1:(M-Z)/($-Z)))}if(--h,a+=8*(E+x)/(_.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var rv=null,sv=null;function Ch(s){return s.nodeType===9?s:s.ownerDocument}function _w(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Tw(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function ov(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var av=null;function xV(){var s=window.event;return s&&s.type==="popstate"?s===av?!1:(av=s,!0):(av=null,!1)}var Ew=typeof setTimeout=="function"?setTimeout:void 0,AV=typeof clearTimeout=="function"?clearTimeout:void 0,Sw=typeof Promise=="function"?Promise:void 0,CV=typeof queueMicrotask=="function"?queueMicrotask:typeof Sw<"u"?function(s){return Sw.resolve(null).then(s).catch(IV)}:Ew;function IV(s){setTimeout(function(){throw s})}function bo(s){return s==="head"}function bw(s,a){var u=a,h=0;do{var _=u.nextSibling;if(s.removeChild(u),_&&_.nodeType===8)if(u=_.data,u==="/$"||u==="/&"){if(h===0){s.removeChild(_),jl(a);return}h--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")h++;else if(u==="html")kc(s.ownerDocument.documentElement);else if(u==="head"){u=s.ownerDocument.head,kc(u);for(var E=u.firstChild;E;){var x=E.nextSibling,M=E.nodeName;E[Ni]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&E.rel.toLowerCase()==="stylesheet"||u.removeChild(E),E=x}}else u==="body"&&kc(s.ownerDocument.body);u=_}while(u);jl(a)}function ww(s,a){var u=s;s=0;do{var h=u.nextSibling;if(u.nodeType===1?a?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(a?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),h&&h.nodeType===8)if(u=h.data,u==="/$"){if(s===0)break;s--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||s++;u=h}while(u)}function lv(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":lv(u),sr(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function RV(s,a,u,h){for(;s.nodeType===1;){var _=u;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[Ni])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(E=s.getAttribute("rel"),E==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(E!==_.rel||s.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||s.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||s.getAttribute("title")!==(_.title==null?null:_.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(E=s.getAttribute("src"),(E!==(_.src==null?null:_.src)||s.getAttribute("type")!==(_.type==null?null:_.type)||s.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&E&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var E=_.name==null?null:""+_.name;if(_.type==="hidden"&&s.getAttribute("name")===E)return s}else return s;if(s=mr(s.nextSibling),s===null)break}return null}function NV(s,a,u){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=mr(s.nextSibling),s===null))return null;return s}function xw(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=mr(s.nextSibling),s===null))return null;return s}function uv(s){return s.data==="$?"||s.data==="$~"}function cv(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function PV(s,a){var u=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||u.readyState!=="loading")a();else{var h=function(){a(),u.removeEventListener("DOMContentLoaded",h)};u.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function mr(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var dv=null;function Aw(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"||u==="/&"){if(a===0)return mr(s.nextSibling);a--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||a++}s=s.nextSibling}return null}function Cw(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(a===0)return s;a--}else u!=="/$"&&u!=="/&"||a++}s=s.previousSibling}return null}function Iw(s,a,u){switch(a=Ch(u),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function kc(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);sr(s)}var gr=new Map,Rw=new Set;function Ih(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ns=se.d;se.d={f:DV,r:MV,D:kV,C:VV,L:LV,m:OV,X:FV,S:UV,M:BV};function DV(){var s=Ns.f(),a=_h();return s||a}function MV(s){var a=or(s);a!==null&&a.tag===5&&a.type==="form"?$S(a):Ns.r(s)}var zl=typeof document>"u"?null:document;function Nw(s,a,u){var h=zl;if(h&&typeof a=="string"&&a){var _=nn(a);_='link[rel="'+s+'"][href="'+_+'"]',typeof u=="string"&&(_+='[crossorigin="'+u+'"]'),Rw.has(_)||(Rw.add(_),s={rel:s,crossOrigin:u,href:a},h.querySelector(_)===null&&(a=h.createElement("link"),Kn(a,"link",s),Jt(a),h.head.appendChild(a)))}}function kV(s){Ns.D(s),Nw("dns-prefetch",s,null)}function VV(s,a){Ns.C(s,a),Nw("preconnect",s,a)}function LV(s,a,u){Ns.L(s,a,u);var h=zl;if(h&&s&&a){var _='link[rel="preload"][as="'+nn(a)+'"]';a==="image"&&u&&u.imageSrcSet?(_+='[imagesrcset="'+nn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(_+='[imagesizes="'+nn(u.imageSizes)+'"]')):_+='[href="'+nn(s)+'"]';var E=_;switch(a){case"style":E=Hl(s);break;case"script":E=Gl(s)}gr.has(E)||(s=v({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:s,as:a},u),gr.set(E,s),h.querySelector(_)!==null||a==="style"&&h.querySelector(Vc(E))||a==="script"&&h.querySelector(Lc(E))||(a=h.createElement("link"),Kn(a,"link",s),Jt(a),h.head.appendChild(a)))}}function OV(s,a){Ns.m(s,a);var u=zl;if(u&&s){var h=a&&typeof a.as=="string"?a.as:"script",_='link[rel="modulepreload"][as="'+nn(h)+'"][href="'+nn(s)+'"]',E=_;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Gl(s)}if(!gr.has(E)&&(s=v({rel:"modulepreload",href:s},a),gr.set(E,s),u.querySelector(_)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Lc(E)))return}h=u.createElement("link"),Kn(h,"link",s),Jt(h),u.head.appendChild(h)}}}function UV(s,a,u){Ns.S(s,a,u);var h=zl;if(h&&s){var _=mi(h).hoistableStyles,E=Hl(s);a=a||"default";var x=_.get(E);if(!x){var M={loading:0,preload:null};if(x=h.querySelector(Vc(E)))M.loading=5;else{s=v({rel:"stylesheet",href:s,"data-precedence":a},u),(u=gr.get(E))&&fv(s,u);var $=x=h.createElement("link");Jt($),Kn($,"link",s),$._p=new Promise(function(Z,ae){$.onload=Z,$.onerror=ae}),$.addEventListener("load",function(){M.loading|=1}),$.addEventListener("error",function(){M.loading|=2}),M.loading|=4,Rh(x,a,h)}x={type:"stylesheet",instance:x,count:1,state:M},_.set(E,x)}}}function FV(s,a){Ns.X(s,a);var u=zl;if(u&&s){var h=mi(u).hoistableScripts,_=Gl(s),E=h.get(_);E||(E=u.querySelector(Lc(_)),E||(s=v({src:s,async:!0},a),(a=gr.get(_))&&hv(s,a),E=u.createElement("script"),Jt(E),Kn(E,"link",s),u.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},h.set(_,E))}}function BV(s,a){Ns.M(s,a);var u=zl;if(u&&s){var h=mi(u).hoistableScripts,_=Gl(s),E=h.get(_);E||(E=u.querySelector(Lc(_)),E||(s=v({src:s,async:!0,type:"module"},a),(a=gr.get(_))&&hv(s,a),E=u.createElement("script"),Jt(E),Kn(E,"link",s),u.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},h.set(_,E))}}function Pw(s,a,u,h){var _=(_=Oe.current)?Ih(_):null;if(!_)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=Hl(u.href),u=mi(_).hoistableStyles,h=u.get(a),h||(h={type:"style",instance:null,count:0,state:null},u.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=Hl(u.href);var E=mi(_).hoistableStyles,x=E.get(s);if(x||(_=_.ownerDocument||_,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(s,x),(E=_.querySelector(Vc(s)))&&!E._p&&(x.instance=E,x.state.loading=5),gr.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},gr.set(s,u),E||qV(_,s,u,x.state))),a&&h===null)throw Error(i(528,""));return x}if(a&&h!==null)throw Error(i(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Gl(u),u=mi(_).hoistableScripts,h=u.get(a),h||(h={type:"script",instance:null,count:0,state:null},u.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Hl(s){return'href="'+nn(s)+'"'}function Vc(s){return'link[rel="stylesheet"]['+s+"]"}function Dw(s){return v({},s,{"data-precedence":s.precedence,precedence:null})}function qV(s,a,u,h){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=s.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),Kn(a,"link",u),Jt(a),s.head.appendChild(a))}function Gl(s){return'[src="'+nn(s)+'"]'}function Lc(s){return"script[async]"+s}function Mw(s,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var h=s.querySelector('style[data-href~="'+nn(u.href)+'"]');if(h)return a.instance=h,Jt(h),h;var _=v({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),Jt(h),Kn(h,"style",_),Rh(h,u.precedence,s),a.instance=h;case"stylesheet":_=Hl(u.href);var E=s.querySelector(Vc(_));if(E)return a.state.loading|=4,a.instance=E,Jt(E),E;h=Dw(u),(_=gr.get(_))&&fv(h,_),E=(s.ownerDocument||s).createElement("link"),Jt(E);var x=E;return x._p=new Promise(function(M,$){x.onload=M,x.onerror=$}),Kn(E,"link",h),a.state.loading|=4,Rh(E,u.precedence,s),a.instance=E;case"script":return E=Gl(u.src),(_=s.querySelector(Lc(E)))?(a.instance=_,Jt(_),_):(h=u,(_=gr.get(E))&&(h=v({},u),hv(h,_)),s=s.ownerDocument||s,_=s.createElement("script"),Jt(_),Kn(_,"link",h),s.head.appendChild(_),a.instance=_);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,Rh(h,u.precedence,s));return a.instance}function Rh(s,a,u){for(var h=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=h.length?h[h.length-1]:null,E=_,x=0;x<h.length;x++){var M=h[x];if(M.dataset.precedence===a)E=M;else if(E!==_)break}E?E.parentNode.insertBefore(s,E.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(s,a.firstChild))}function fv(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function hv(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var Nh=null;function kw(s,a,u){if(Nh===null){var h=new Map,_=Nh=new Map;_.set(u,h)}else _=Nh,h=_.get(u),h||(h=new Map,_.set(u,h));if(h.has(s))return h;for(h.set(s,null),u=u.getElementsByTagName(s),_=0;_<u.length;_++){var E=u[_];if(!(E[Ni]||E[be]||s==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var x=E.getAttribute(a)||"";x=s+x;var M=h.get(x);M?M.push(E):h.set(x,[E])}}return h}function Vw(s,a,u){s=s.ownerDocument||s,s.head.insertBefore(u,a==="title"?s.querySelector("head > title"):null)}function zV(s,a,u){if(u===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Lw(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function HV(s,a,u,h){if(u.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var _=Hl(h.href),E=a.querySelector(Vc(_));if(E){a=E._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=Ph.bind(s),a.then(s,s)),u.state.loading|=4,u.instance=E,Jt(E);return}E=a.ownerDocument||a,h=Dw(h),(_=gr.get(_))&&fv(h,_),E=E.createElement("link"),Jt(E);var x=E;x._p=new Promise(function(M,$){x.onload=M,x.onerror=$}),Kn(E,"link",h),u.instance=E}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(u,a),(a=u.state.preload)&&(u.state.loading&3)===0&&(s.count++,u=Ph.bind(s),a.addEventListener("load",u),a.addEventListener("error",u))}}var pv=0;function GV(s,a){return s.stylesheets&&s.count===0&&Mh(s,s.stylesheets),0<s.count||0<s.imgCount?function(u){var h=setTimeout(function(){if(s.stylesheets&&Mh(s,s.stylesheets),s.unsuspend){var E=s.unsuspend;s.unsuspend=null,E()}},6e4+a);0<s.imgBytes&&pv===0&&(pv=62500*wV());var _=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Mh(s,s.stylesheets),s.unsuspend)){var E=s.unsuspend;s.unsuspend=null,E()}},(s.imgBytes>pv?50:800)+a);return s.unsuspend=u,function(){s.unsuspend=null,clearTimeout(h),clearTimeout(_)}}:null}function Ph(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Mh(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Dh=null;function Mh(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Dh=new Map,a.forEach(jV,s),Dh=null,Ph.call(s))}function jV(s,a){if(!(a.state.loading&4)){var u=Dh.get(s);if(u)var h=u.get(null);else{u=new Map,Dh.set(s,u);for(var _=s.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<_.length;E++){var x=_[E];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(u.set(x.dataset.precedence,x),h=x)}h&&u.set(null,h)}_=a.instance,x=_.getAttribute("data-precedence"),E=u.get(x)||h,E===h&&u.set(null,_),u.set(x,_),this.count++,h=Ph.bind(this),_.addEventListener("load",h),_.addEventListener("error",h),E?E.parentNode.insertBefore(_,E.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(_,s.firstChild)),a.state.loading|=4}}var Oc={$$typeof:F,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function $V(s,a,u,h,_,E,x,M,$){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yt(0),this.hiddenUpdates=Yt(null),this.identifierPrefix=h,this.onUncaughtError=_,this.onCaughtError=E,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$,this.incompleteTransitions=new Map}function Ow(s,a,u,h,_,E,x,M,$,Z,ae,ce){return s=new $V(s,a,u,x,$,Z,ae,ce,M),a=1,E===!0&&(a|=24),E=Ki(3,null,null,a),s.current=E,E.stateNode=s,a=Kg(),a.refCount++,s.pooledCache=a,a.refCount++,E.memoizedState={element:h,isDehydrated:u,cache:a},Qg(E),s}function Uw(s){return s?(s=El,s):El}function Fw(s,a,u,h,_,E){_=Uw(_),h.context===null?h.context=_:h.pendingContext=_,h=fo(a),h.payload={element:u},E=E===void 0?null:E,E!==null&&(h.callback=E),u=ho(s,h,a),u!==null&&(Ui(u,s,a),mc(u,s,a))}function Bw(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function mv(s,a){Bw(s,a),(s=s.alternate)&&Bw(s,a)}function qw(s){if(s.tag===13||s.tag===31){var a=Ta(s,67108864);a!==null&&Ui(a,s,67108864),mv(s,67108864)}}function zw(s){if(s.tag===13||s.tag===31){var a=Xi();a=Ii(a);var u=Ta(s,a);u!==null&&Ui(u,s,a),mv(s,a)}}var kh=!0;function KV(s,a,u,h){var _=W.T;W.T=null;var E=se.p;try{se.p=2,gv(s,a,u,h)}finally{se.p=E,W.T=_}}function YV(s,a,u,h){var _=W.T;W.T=null;var E=se.p;try{se.p=8,gv(s,a,u,h)}finally{se.p=E,W.T=_}}function gv(s,a,u,h){if(kh){var _=yv(h);if(_===null)nv(s,a,h,Vh,u),Gw(s,h);else if(WV(_,s,a,u,h))h.stopPropagation();else if(Gw(s,h),a&4&&-1<JV.indexOf(s)){for(;_!==null;){var E=or(_);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var x=tt(E.pendingLanes);if(x!==0){var M=E;for(M.pendingLanes|=2,M.entangledLanes|=2;x;){var $=1<<31-pe(x);M.entanglements[1]|=$,x&=~$}Xr(E),(vt&6)===0&&(yh=bt()+500,Pc(0))}}break;case 31:case 13:M=Ta(E,2),M!==null&&Ui(M,E,2),_h(),mv(E,2)}if(E=yv(h),E===null&&nv(s,a,h,Vh,u),E===_)break;_=E}_!==null&&h.stopPropagation()}else nv(s,a,h,null,u)}}function yv(s){return s=hl(s),vv(s)}var Vh=null;function vv(s){if(Vh=null,s=Pi(s),s!==null){var a=o(s);if(a===null)s=null;else{var u=a.tag;if(u===13){if(s=l(a),s!==null)return s;s=null}else if(u===31){if(s=c(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return Vh=s,null}function Hw(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(yn()){case ke:return 2;case Lt:return 8;case Qt:case tn:return 32;case xr:return 268435456;default:return 32}default:return 32}}var _v=!1,wo=null,xo=null,Ao=null,Uc=new Map,Fc=new Map,Co=[],JV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Gw(s,a){switch(s){case"focusin":case"focusout":wo=null;break;case"dragenter":case"dragleave":xo=null;break;case"mouseover":case"mouseout":Ao=null;break;case"pointerover":case"pointerout":Uc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fc.delete(a.pointerId)}}function Bc(s,a,u,h,_,E){return s===null||s.nativeEvent!==E?(s={blockedOn:a,domEventName:u,eventSystemFlags:h,nativeEvent:E,targetContainers:[_]},a!==null&&(a=or(a),a!==null&&qw(a)),s):(s.eventSystemFlags|=h,a=s.targetContainers,_!==null&&a.indexOf(_)===-1&&a.push(_),s)}function WV(s,a,u,h,_){switch(a){case"focusin":return wo=Bc(wo,s,a,u,h,_),!0;case"dragenter":return xo=Bc(xo,s,a,u,h,_),!0;case"mouseover":return Ao=Bc(Ao,s,a,u,h,_),!0;case"pointerover":var E=_.pointerId;return Uc.set(E,Bc(Uc.get(E)||null,s,a,u,h,_)),!0;case"gotpointercapture":return E=_.pointerId,Fc.set(E,Bc(Fc.get(E)||null,s,a,u,h,_)),!0}return!1}function jw(s){var a=Pi(s.target);if(a!==null){var u=o(a);if(u!==null){if(a=u.tag,a===13){if(a=l(u),a!==null){s.blockedOn=a,Hi(s.priority,function(){zw(u)});return}}else if(a===31){if(a=c(u),a!==null){s.blockedOn=a,Hi(s.priority,function(){zw(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Lh(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=yv(s.nativeEvent);if(u===null){u=s.nativeEvent;var h=new u.constructor(u.type,u);fl=h,u.target.dispatchEvent(h),fl=null}else return a=or(u),a!==null&&qw(a),s.blockedOn=u,!1;a.shift()}return!0}function $w(s,a,u){Lh(s)&&u.delete(a)}function QV(){_v=!1,wo!==null&&Lh(wo)&&(wo=null),xo!==null&&Lh(xo)&&(xo=null),Ao!==null&&Lh(Ao)&&(Ao=null),Uc.forEach($w),Fc.forEach($w)}function Oh(s,a){s.blockedOn===a&&(s.blockedOn=null,_v||(_v=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,QV)))}var Uh=null;function Kw(s){Uh!==s&&(Uh=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Uh===s&&(Uh=null);for(var a=0;a<s.length;a+=3){var u=s[a],h=s[a+1],_=s[a+2];if(typeof h!="function"){if(vv(h||u)===null)continue;break}var E=or(u);E!==null&&(s.splice(a,3),a-=3,yy(E,{pending:!0,data:_,method:u.method,action:h},h,_))}}))}function jl(s){function a($){return Oh($,s)}wo!==null&&Oh(wo,s),xo!==null&&Oh(xo,s),Ao!==null&&Oh(Ao,s),Uc.forEach(a),Fc.forEach(a);for(var u=0;u<Co.length;u++){var h=Co[u];h.blockedOn===s&&(h.blockedOn=null)}for(;0<Co.length&&(u=Co[0],u.blockedOn===null);)jw(u),u.blockedOn===null&&Co.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(h=0;h<u.length;h+=3){var _=u[h],E=u[h+1],x=_[qe]||null;if(typeof E=="function")x||Kw(u);else if(x){var M=null;if(E&&E.hasAttribute("formAction")){if(_=E,x=E[qe]||null)M=x.formAction;else if(vv(_)!==null)continue}else M=x.action;typeof M=="function"?u[h+1]=M:(u.splice(h,3),h-=3),Kw(u)}}}function Yw(){function s(E){E.canIntercept&&E.info==="react-transition"&&E.intercept({handler:function(){return new Promise(function(x){return _=x})},focusReset:"manual",scroll:"manual"})}function a(){_!==null&&(_(),_=null),h||setTimeout(u,20)}function u(){if(!h&&!navigation.transition){var E=navigation.currentEntry;E&&E.url!=null&&navigation.navigate(E.url,{state:E.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,_=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(u,100),function(){h=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),_!==null&&(_(),_=null)}}}function Tv(s){this._internalRoot=s}Fh.prototype.render=Tv.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var u=a.current,h=Xi();Fw(u,h,s,a,null,null)},Fh.prototype.unmount=Tv.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;Fw(s.current,2,null,s,null,null),_h(),a[Dt]=null}};function Fh(s){this._internalRoot=s}Fh.prototype.unstable_scheduleHydration=function(s){if(s){var a=vn();s={blockedOn:null,target:s,priority:a};for(var u=0;u<Co.length&&a!==0&&a<Co[u].priority;u++);Co.splice(u,0,s),u===0&&jw(s)}};var Jw=e.version;if(Jw!=="19.2.1")throw Error(i(527,Jw,"19.2.1"));se.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=f(a),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var XV={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bh.isDisabled&&Bh.supportsFiber)try{fi=Bh.inject(XV),Bt=Bh}catch{}}return zc.createRoot=function(s,a){if(!r(s))throw Error(i(299));var u=!1,h="",_=nb,E=ib,x=rb;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=Ow(s,1,!1,null,null,u,h,null,_,E,x,Yw),s[Dt]=a.current,tv(s),new Tv(a)},zc.hydrateRoot=function(s,a,u){if(!r(s))throw Error(i(299));var h=!1,_="",E=nb,x=ib,M=rb,$=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onUncaughtError!==void 0&&(E=u.onUncaughtError),u.onCaughtError!==void 0&&(x=u.onCaughtError),u.onRecoverableError!==void 0&&(M=u.onRecoverableError),u.formState!==void 0&&($=u.formState)),a=Ow(s,1,!0,a,u??null,h,_,$,E,x,M,Yw),a.context=Uw(null),u=a.current,h=Xi(),h=Ii(h),_=fo(h),_.callback=null,ho(u,_,h),u=h,a.current.lanes=u,Ct(a,u),Xr(a),s[Dt]=a.current,tv(s),new Fh(a)},zc.version="19.2.1",zc}var sx;function aL(){if(sx)return bv.exports;sx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),bv.exports=oL(),bv.exports}var lL=aL();const uL=S1(lL),Hc=[{emoji:"",title:"Bienvenue dans Dress Me Up!",description:"Votre assistant mode personnel propuls par l'IA. Dcouvrons ensemble comment a marche."},{emoji:"",title:"Ajoutez vos vtements",description:"Prenez en photo vos vtements. L'IA analysera automatiquement la couleur, la matire et le type."},{emoji:"",title:"Gnrez des tenues",description:"Dcrivez une occasion et l'IA crera des combinaisons parfaites  partir de votre garde-robe."},{emoji:"",title:"Planifiez vos valises",description:"Partez en voyage ? L'IA optimise votre valise selon la dure et la destination."}],cL=({onComplete:t})=>{const[e,n]=B.useState(0),i=()=>{e<Hc.length-1?n(e+1):(localStorage.setItem("dressmup_onboarding_complete","true"),t())},r=()=>{localStorage.setItem("dressmup_onboarding_complete","true"),t()},o=Hc[e];return S.jsx("div",{className:"fixed inset-0 bg-onyx/90 backdrop-blur-md flex items-center justify-center z-[200] p-4",children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-md w-full overflow-hidden",children:[S.jsx("div",{className:"h-1 bg-gray-200 dark:bg-gray-700",children:S.jsx("div",{className:"h-full bg-gold transition-all duration-300",style:{width:`${(e+1)/Hc.length*100}%`}})}),S.jsxs("div",{className:"p-8 text-center",children:[S.jsx("div",{className:"text-6xl mb-6",children:o.emoji}),S.jsx("h2",{className:"text-2xl font-serif font-bold mb-4",children:o.title}),S.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:o.description}),S.jsx("div",{className:"flex justify-center gap-2 mb-8",children:Hc.map((l,c)=>S.jsx("div",{className:`w-2 h-2 rounded-full transition-all ${c===e?"bg-gold w-6":"bg-gray-300 dark:bg-gray-600"}`},c))}),S.jsxs("div",{className:"flex gap-3",children:[S.jsx("button",{onClick:r,className:"flex-1 px-4 py-3 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 font-medium transition-colors",children:"Passer"}),S.jsx("button",{onClick:i,className:"flex-1 px-4 py-3 bg-gold text-onyx font-bold rounded-xl hover:bg-gold-dark transition-all",children:e<Hc.length-1?"Suivant":"Commencer"})]})]})]})})},dL=()=>{};var ox={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},fL=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],l=t[n++],c=t[n++],d=((r&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|l&63)}}return e.join("")},x1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],l=r+1<t.length,c=l?t[r+1]:0,d=r+2<t.length,f=d?t[r+2]:0,p=o>>2,v=(o&3)<<4|c>>4;let T=(c&15)<<2|f>>6,b=f&63;d||(b=64,l||(T=64)),i.push(n[p],n[v],n[T],n[b])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(w1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):fL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],c=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const v=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||c==null||f==null||v==null)throw new hL;const T=o<<2|c>>4;if(i.push(T),f!==64){const b=c<<4&240|f>>2;if(i.push(b),v!==64){const C=f<<6&192|v;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class hL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pL=function(t){const e=w1(t);return x1.encodeByteArray(e,!0)},Fp=function(t){return pL(t).replace(/\./g,"")},A1=function(t){try{return x1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL=()=>mL().__FIREBASE_DEFAULTS__,yL=()=>{if(typeof process>"u"||typeof ox>"u")return;const t=ox.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&A1(t[1]);return e&&JSON.parse(e)},Pm=()=>{try{return dL()||gL()||yL()||vL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},C1=t=>{var e,n;return(n=(e=Pm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},N_=t=>{const e=C1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},I1=()=>{var t;return(t=Pm())===null||t===void 0?void 0:t.config},R1=t=>{var e;return(e=Pm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Dm(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Fp(JSON.stringify(n)),Fp(JSON.stringify(l)),""].join(".")}const dd={};function TL(){const t={prod:[],emulator:[]};for(const e of Object.keys(dd))dd[e]?t.emulator.push(e):t.prod.push(e);return t}function EL(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let ax=!1;function Mm(t,e){if(typeof window>"u"||typeof document>"u"||!js(window.location.host)||dd[t]===e||dd[t]||ax)return;dd[t]=e;function n(T){return`__firebase__banner__${T}`}const i="__firebase__banner",o=TL().prod.length>0;function l(){const T=document.getElementById(i);T&&T.remove()}function c(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function d(T,b){T.setAttribute("width","24"),T.setAttribute("id",b),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function f(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{ax=!0,l()},T}function p(T,b){T.setAttribute("id",b),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function v(){const T=EL(i),b=n("text"),C=document.getElementById(b)||document.createElement("span"),N=n("learnmore"),D=document.getElementById(N)||document.createElement("a"),O=n("preprendIcon"),k=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const F=T.element;c(F),p(D,N);const G=f();d(k,O),F.append(k,C,D,G),document.body.appendChild(F)}o?(C.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ui())}function bL(){var t;const e=(t=Pm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function AL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CL(){const t=ui();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function IL(){return!bL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function RL(){try{return typeof indexedDB=="object"}catch{return!1}}function NL(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL="FirebaseError";class zr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=PL,Object.setPrototypeOf(this,zr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xd.prototype.create)}}class Xd{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],l=o?DL(o,i):"Error",c=`${this.serviceName}: ${l} (${r}).`;return new zr(r,c,i)}}function DL(t,e){return t.replace(ML,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const ML=/\{\$([^}]+)}/g;function kL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Wa(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],l=e[r];if(lx(o)&&lx(l)){if(!Wa(o,l))return!1}else if(o!==l)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function lx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Xc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function Zc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function VL(t,e){const n=new LL(t,e);return n.subscribe.bind(n)}class LL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");OL(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Cv),r.error===void 0&&(r.error=Cv),r.complete===void 0&&(r.complete=Cv);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function OL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Cv(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(t){return t&&t._delegate?t._delegate:t}class Us{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new _L;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(BL(e))try{this.getOrInitializeService({instanceIdentifier:La})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=La){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=La){return this.instances.has(e)}getOptions(e=La){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);i===c&&l.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const l=this.instances.get(r);return l&&e(l,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:FL(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=La){return this.component?this.component.multipleInstances?e:La:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FL(t){return t===La?void 0:t}function BL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new UL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(at||(at={}));const zL={debug:at.DEBUG,verbose:at.VERBOSE,info:at.INFO,warn:at.WARN,error:at.ERROR,silent:at.SILENT},HL=at.INFO,GL={[at.DEBUG]:"log",[at.VERBOSE]:"log",[at.INFO]:"info",[at.WARN]:"warn",[at.ERROR]:"error"},jL=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=GL[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class P_{constructor(e){this.name=e,this._logLevel=HL,this._logHandler=jL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in at))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,at.DEBUG,...e),this._logHandler(this,at.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,at.VERBOSE,...e),this._logHandler(this,at.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,at.INFO,...e),this._logHandler(this,at.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,at.WARN,...e),this._logHandler(this,at.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,at.ERROR,...e),this._logHandler(this,at.ERROR,...e)}}const $L=(t,e)=>e.some(n=>t instanceof n);let ux,cx;function KL(){return ux||(ux=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YL(){return cx||(cx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const P1=new WeakMap,c0=new WeakMap,D1=new WeakMap,Iv=new WeakMap,D_=new WeakMap;function JL(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(Bo(t.result)),r()},l=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&P1.set(n,t)}).catch(()=>{}),D_.set(e,t),e}function WL(t){if(c0.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),r()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});c0.set(t,e)}let d0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return c0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||D1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Bo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function QL(t){d0=t(d0)}function XL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Rv(this),e,...n);return D1.set(i,e.sort?e.sort():[e]),Bo(i)}:YL().includes(t)?function(...e){return t.apply(Rv(this),e),Bo(P1.get(this))}:function(...e){return Bo(t.apply(Rv(this),e))}}function ZL(t){return typeof t=="function"?XL(t):(t instanceof IDBTransaction&&WL(t),$L(t,KL())?new Proxy(t,d0):t)}function Bo(t){if(t instanceof IDBRequest)return JL(t);if(Iv.has(t))return Iv.get(t);const e=ZL(t);return e!==t&&(Iv.set(t,e),D_.set(e,t)),e}const Rv=t=>D_.get(t);function eO(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const l=indexedDB.open(t,e),c=Bo(l);return i&&l.addEventListener("upgradeneeded",d=>{i(Bo(l.result),d.oldVersion,d.newVersion,Bo(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),c.then(d=>{o&&d.addEventListener("close",()=>o()),r&&d.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const tO=["get","getKey","getAll","getAllKeys","count"],nO=["put","add","delete","clear"],Nv=new Map;function dx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Nv.get(e))return Nv.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=nO.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||tO.includes(n)))return;const o=async function(l,...c){const d=this.transaction(l,r?"readwrite":"readonly");let f=d.store;return i&&(f=f.index(c.shift())),(await Promise.all([f[n](...c),r&&d.done]))[0]};return Nv.set(e,o),o}QL(t=>({...t,get:(e,n,i)=>dx(e,n)||t.get(e,n,i),has:(e,n)=>!!dx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rO(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function rO(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const f0="@firebase/app",fx="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs=new P_("@firebase/app"),sO="@firebase/app-compat",oO="@firebase/analytics-compat",aO="@firebase/analytics",lO="@firebase/app-check-compat",uO="@firebase/app-check",cO="@firebase/auth",dO="@firebase/auth-compat",fO="@firebase/database",hO="@firebase/data-connect",pO="@firebase/database-compat",mO="@firebase/functions",gO="@firebase/functions-compat",yO="@firebase/installations",vO="@firebase/installations-compat",_O="@firebase/messaging",TO="@firebase/messaging-compat",EO="@firebase/performance",SO="@firebase/performance-compat",bO="@firebase/remote-config",wO="@firebase/remote-config-compat",xO="@firebase/storage",AO="@firebase/storage-compat",CO="@firebase/firestore",IO="@firebase/ai",RO="@firebase/firestore-compat",NO="firebase",PO="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="[DEFAULT]",DO={[f0]:"fire-core",[sO]:"fire-core-compat",[aO]:"fire-analytics",[oO]:"fire-analytics-compat",[uO]:"fire-app-check",[lO]:"fire-app-check-compat",[cO]:"fire-auth",[dO]:"fire-auth-compat",[fO]:"fire-rtdb",[hO]:"fire-data-connect",[pO]:"fire-rtdb-compat",[mO]:"fire-fn",[gO]:"fire-fn-compat",[yO]:"fire-iid",[vO]:"fire-iid-compat",[_O]:"fire-fcm",[TO]:"fire-fcm-compat",[EO]:"fire-perf",[SO]:"fire-perf-compat",[bO]:"fire-rc",[wO]:"fire-rc-compat",[xO]:"fire-gcs",[AO]:"fire-gcs-compat",[CO]:"fire-fst",[RO]:"fire-fst-compat",[IO]:"fire-vertex","fire-js":"fire-js",[NO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp=new Map,MO=new Map,p0=new Map;function hx(t,e){try{t.container.addComponent(e)}catch(n){Fs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function jo(t){const e=t.name;if(p0.has(e))return Fs.debug(`There were multiple attempts to register component ${e}.`),!1;p0.set(e,t);for(const n of Bp.values())hx(n,t);for(const n of MO.values())hx(n,t);return!0}function ef(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Si(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qo=new Xd("app","Firebase",kO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Us("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl=PO;function M1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:h0,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw qo.create("bad-app-name",{appName:String(r)});if(n||(n=I1()),!n)throw qo.create("no-options");const o=Bp.get(r);if(o){if(Wa(n,o.options)&&Wa(i,o.config))return o;throw qo.create("duplicate-app",{appName:r})}const l=new qL(r);for(const d of p0.values())l.addComponent(d);const c=new VO(n,i,l);return Bp.set(r,c),c}function km(t=h0){const e=Bp.get(t);if(!e&&t===h0&&I1())return M1();if(!e)throw qo.create("no-app",{appName:t});return e}function Er(t,e,n){var i;let r=(i=DO[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${r}" with version "${e}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fs.warn(c.join(" "));return}jo(new Us(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO="firebase-heartbeat-database",OO=1,kd="firebase-heartbeat-store";let Pv=null;function k1(){return Pv||(Pv=eO(LO,OO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(kd)}catch(n){console.warn(n)}}}}).catch(t=>{throw qo.create("idb-open",{originalErrorMessage:t.message})})),Pv}async function UO(t){try{const n=(await k1()).transaction(kd),i=await n.objectStore(kd).get(V1(t));return await n.done,i}catch(e){if(e instanceof zr)Fs.warn(e.message);else{const n=qo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fs.warn(n.message)}}}async function px(t,e){try{const i=(await k1()).transaction(kd,"readwrite");await i.objectStore(kd).put(e,V1(t)),await i.done}catch(n){if(n instanceof zr)Fs.warn(n.message);else{const i=qo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Fs.warn(i.message)}}}function V1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO=1024,BO=30;class qO{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HO(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=mx();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>BO){const l=GO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Fs.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=mx(),{heartbeatsToSend:i,unsentEntries:r}=zO(this._heartbeatsCache.heartbeats),o=Fp(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Fs.warn(n),""}}}function mx(){return new Date().toISOString().substring(0,10)}function zO(t,e=FO){const n=[];let i=t.slice();for(const r of t){const o=n.find(l=>l.agent===r.agent);if(o){if(o.dates.push(r.date),gx(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),gx(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class HO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return RL()?NL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await UO(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return px(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return px(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function gx(t){return Fp(JSON.stringify({version:2,heartbeats:t})).length}function GO(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jO(t){jo(new Us("platform-logger",e=>new iO(e),"PRIVATE")),jo(new Us("heartbeat",e=>new qO(e),"PRIVATE")),Er(f0,fx,t),Er(f0,fx,"esm2017"),Er("fire-js","")}jO("");function M_(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function L1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $O=L1,O1=new Xd("auth","Firebase",L1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp=new P_("@firebase/auth");function KO(t,...e){qp.logLevel<=at.WARN&&qp.warn(`Auth (${rl}): ${t}`,...e)}function yp(t,...e){qp.logLevel<=at.ERROR&&qp.error(`Auth (${rl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(t,...e){throw V_(t,...e)}function Fr(t,...e){return V_(t,...e)}function k_(t,e,n){const i=Object.assign(Object.assign({},$O()),{[e]:n});return new Xd("auth","Firebase",i).create(e,{appName:t.name})}function Vs(t){return k_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function YO(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&br(t,"argument-error"),k_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function V_(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return O1.create(t,...e)}function Fe(t,e,...n){if(!t)throw V_(e,...n)}function Ms(t){const e="INTERNAL ASSERTION FAILED: "+t;throw yp(e),new Error(e)}function Bs(t,e){t||Ms(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function JO(){return yx()==="http:"||yx()==="https:"}function yx(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JO()||xL()||"connection"in navigator)?navigator.onLine:!0}function QO(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,n){this.shortDelay=e,this.longDelay=n,Bs(n>e,"Short delay should be less than long delay!"),this.isMobile=SL()||AL()}get(){return WO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(t,e){Bs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ms("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ms("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ms("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],e4=new tf(3e4,6e4);function ta(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function na(t,e,n,i,r={}){return F1(t,r,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const c=Zd(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:d},o);return wL()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&js(t.emulatorConfig.host)&&(f.credentials="include"),U1.fetch()(await B1(t,t.config.apiHost,n,c),f)})}async function F1(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},XO),e);try{const r=new n4(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw qh(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[d,f]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw qh(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw qh(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw qh(t,"user-disabled",l);const p=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw k_(t,p,f);br(t,p)}}catch(r){if(r instanceof zr)throw r;br(t,"network-request-failed",{message:String(r)})}}async function nf(t,e,n,i,r={}){const o=await na(t,e,n,i,r);return"mfaPendingCredential"in o&&br(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function B1(t,e,n,i){const r=`${e}${n}?${i}`,o=t,l=o.config.emulator?L_(t.config,r):`${t.config.apiScheme}://${r}`;return ZO.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function t4(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class n4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Fr(this.auth,"network-request-failed")),e4.get())})}}function qh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Fr(t,e,i);return r.customData._tokenResponse=n,r}function vx(t){return t!==void 0&&t.enterprise!==void 0}class i4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return t4(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function r4(t,e){return na(t,"GET","/v2/recaptchaConfig",ta(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s4(t,e){return na(t,"POST","/v1/accounts:delete",e)}async function zp(t,e){return na(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function o4(t,e=!1){const n=kt(t),i=await n.getIdToken(e),r=O_(i);Fe(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:fd(Dv(r.auth_time)),issuedAtTime:fd(Dv(r.iat)),expirationTime:fd(Dv(r.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Dv(t){return Number(t)*1e3}function O_(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return yp("JWT malformed, contained fewer than 3 sections"),null;try{const r=A1(n);return r?JSON.parse(r):(yp("Failed to decode base64 JWT payload"),null)}catch(r){return yp("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function _x(t){const e=O_(t);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vd(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof zr&&a4(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function a4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=fd(this.lastLoginAt),this.creationTime=fd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hp(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Vd(t,zp(n,{idToken:i}));Fe(r==null?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?q1(o.providerUserInfo):[],c=c4(t.providerData,l),d=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!(c!=null&&c.length),p=d?f:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new g0(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(t,v)}async function u4(t){const e=kt(t);await Hp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function c4(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function q1(t){return t.map(e=>{var{providerId:n}=e,i=M_(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d4(t,e){const n=await F1(t,{},async()=>{const i=Zd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,l=await B1(t,r,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:c,body:i};return t.emulatorConfig&&js(t.emulatorConfig.host)&&(d.credentials="include"),U1.fetch()(l,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function f4(t,e){return na(t,"POST","/v2/accounts:revokeToken",ta(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_x(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const n=_x(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await d4(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,l=new uu;return i&&(Fe(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),r&&(Fe(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),o&&(Fe(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new uu,this.toJSON())}_performRefresh(){return Ms("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(t,e){Fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Lr{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=M_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new l4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new g0(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Vd(this,this.stsTokenManager.getToken(this.auth,e));return Fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return o4(this,e)}reload(){return u4(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Lr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Hp(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Si(this.auth.app))return Promise.reject(Vs(this.auth));const e=await this.getIdToken();return await Vd(this,s4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,l,c,d,f,p;const v=(i=n.displayName)!==null&&i!==void 0?i:void 0,T=(r=n.email)!==null&&r!==void 0?r:void 0,b=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,C=(l=n.photoURL)!==null&&l!==void 0?l:void 0,N=(c=n.tenantId)!==null&&c!==void 0?c:void 0,D=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,O=(f=n.createdAt)!==null&&f!==void 0?f:void 0,k=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:F,emailVerified:G,isAnonymous:K,providerData:H,stsTokenManager:R}=n;Fe(F&&R,e,"internal-error");const I=uu.fromJSON(this.name,R);Fe(typeof F=="string",e,"internal-error"),Ro(v,e.name),Ro(T,e.name),Fe(typeof G=="boolean",e,"internal-error"),Fe(typeof K=="boolean",e,"internal-error"),Ro(b,e.name),Ro(C,e.name),Ro(N,e.name),Ro(D,e.name),Ro(O,e.name),Ro(k,e.name);const P=new Lr({uid:F,auth:e,email:T,emailVerified:G,displayName:v,isAnonymous:K,photoURL:C,phoneNumber:b,tenantId:N,stsTokenManager:I,createdAt:O,lastLoginAt:k});return H&&Array.isArray(H)&&(P.providerData=H.map(U=>Object.assign({},U))),D&&(P._redirectEventId=D),P}static async _fromIdTokenResponse(e,n,i=!1){const r=new uu;r.updateFromServerResponse(n);const o=new Lr({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Hp(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];Fe(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?q1(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),c=new uu;c.updateFromIdToken(i);const d=new Lr({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:l}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new g0(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=new Map;function ks(t){Bs(t instanceof Function,"Expected a class definition");let e=Tx.get(t);return e?(Bs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Tx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}z1.type="NONE";const Ex=z1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(t,e,n){return`firebase:${t}:${e}:${n}`}class cu{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=vp(this.userKey,r.apiKey,o),this.fullPersistenceKey=vp("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await zp(this.auth,{idToken:e}).catch(()=>{});return n?Lr._fromGetAccountInfoResponse(this.auth,n,e):null}return Lr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new cu(ks(Ex),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||ks(Ex);const l=vp(i,e.config.apiKey,e.name);let c=null;for(const f of n)try{const p=await f._get(l);if(p){let v;if(typeof p=="string"){const T=await zp(e,{idToken:p}).catch(()=>{});if(!T)break;v=await Lr._fromGetAccountInfoResponse(e,T,p)}else v=Lr._fromJSON(e,p);f!==o&&(c=v),o=f;break}}catch{}const d=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new cu(o,e,i):(o=d[0],c&&await o._set(l,c.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new cu(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(H1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Y1(e))return"Blackberry";if(J1(e))return"Webos";if(G1(e))return"Safari";if((e.includes("chrome/")||j1(e))&&!e.includes("edge/"))return"Chrome";if(K1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function H1(t=ui()){return/firefox\//i.test(t)}function G1(t=ui()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function j1(t=ui()){return/crios\//i.test(t)}function $1(t=ui()){return/iemobile/i.test(t)}function K1(t=ui()){return/android/i.test(t)}function Y1(t=ui()){return/blackberry/i.test(t)}function J1(t=ui()){return/webos/i.test(t)}function U_(t=ui()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function h4(t=ui()){var e;return U_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function p4(){return CL()&&document.documentMode===10}function W1(t=ui()){return U_(t)||K1(t)||J1(t)||Y1(t)||/windows phone/i.test(t)||$1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(t,e=[]){let n;switch(t){case"Browser":n=Sx(ui());break;case"Worker":n=`${Sx(ui())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${rl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,c)=>{try{const d=e(o);l(d)}catch(d){c(d)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g4(t,e={}){return na(t,"GET","/v2/passwordPolicy",ta(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4=6;class v4{constructor(e){var n,i,r,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:y4,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,o,l,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(r=d.containsLowercaseLetter)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bx(this),this.idTokenSubscription=new bx(this),this.beforeStateQueue=new m4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=O1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ks(n)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await cu.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await zp(this,{idToken:e}),i=await Lr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Si(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=r==null?void 0:r._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&(d!=null&&d.user)&&(r=d.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=QO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Si(this.app))return Promise.reject(Vs(this));const n=e?kt(e):null;return n&&Fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Si(this.app)?Promise.reject(Vs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Si(this.app)?Promise.reject(Vs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ks(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await g4(this),n=new v4(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xd("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await f4(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ks(e)||this._popupRedirectResolver;Fe(n,this,"argument-error"),this.redirectPersistenceManager=await cu.create(this,[ks(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,r);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Q1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;if(Si(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&KO(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ia(t){return kt(t)}class bx{constructor(e){this.auth=e,this.observer=null,this.addObserver=VL(n=>this.observer=n)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function T4(t){Vm=t}function X1(t){return Vm.loadJS(t)}function E4(){return Vm.recaptchaEnterpriseScript}function S4(){return Vm.gapiScript}function b4(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class w4{constructor(){this.enterprise=new x4}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class x4{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const A4="recaptcha-enterprise",Z1="NO_RECAPTCHA";class C4{constructor(e){this.type=A4,this.auth=ia(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{r4(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const f=new i4(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,l(f.siteKey)}}).catch(d=>{c(d)})})}function r(o,l,c){const d=window.grecaptcha;vx(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(f=>{l(f)}).catch(()=>{l(Z1)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new w4().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{i(this.auth).then(c=>{if(!n&&vx(window.grecaptcha))r(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=E4();d.length!==0&&(d+=c),X1(d).then(()=>{r(c,o,l)}).catch(f=>{l(f)})}}).catch(c=>{l(c)})})}}async function wx(t,e,n,i=!1,r=!1){const o=new C4(t);let l;if(r)l=Z1;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,f=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return i?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function y0(t,e,n,i,r){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await wx(t,e,n,n==="getOobCode");return i(t,l)}else return i(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await wx(t,e,n,n==="getOobCode");return i(t,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(t,e){const n=ef(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(Wa(o,e??{}))return r;br(r,"already-initialized")}return n.initialize({options:e})}function R4(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ks);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function N4(t,e,n){const i=ia(t);Fe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=eN(e),{host:l,port:c}=P4(e),d=c===null?"":`:${c}`,f={url:`${o}//${l}${d}/`},p=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Fe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Fe(Wa(f,i.config.emulator)&&Wa(p,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=p,i.settings.appVerificationDisabledForTesting=!0,js(l)?(Dm(`${o}//${l}${d}`),Mm("Auth",!0)):D4()}function eN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function P4(t){const e=eN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:xx(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:xx(l)}}}function xx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function D4(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ms("not implemented")}_getIdTokenResponse(e){return Ms("not implemented")}_linkToIdToken(e,n){return Ms("not implemented")}_getReauthenticationResolver(e){return Ms("not implemented")}}async function M4(t,e){return na(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k4(t,e){return nf(t,"POST","/v1/accounts:signInWithPassword",ta(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V4(t,e){return nf(t,"POST","/v1/accounts:signInWithEmailLink",ta(t,e))}async function L4(t,e){return nf(t,"POST","/v1/accounts:signInWithEmailLink",ta(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld extends F_{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Ld(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Ld(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return y0(e,n,"signInWithPassword",k4);case"emailLink":return V4(e,{email:this._email,oobCode:this._password});default:br(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return y0(e,i,"signUpPassword",M4);case"emailLink":return L4(e,{idToken:n,email:this._email,oobCode:this._password});default:br(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function du(t,e){return nf(t,"POST","/v1/accounts:signInWithIdp",ta(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4="http://localhost";class Qa extends F_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Qa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):br("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,o=M_(n,["providerId","signInMethod"]);if(!i||!r)return null;const l=new Qa(i,r);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return du(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,du(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,du(e,n)}buildRequest(){const e={requestUri:O4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Zd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U4(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function F4(t){const e=Xc(Zc(t)).link,n=e?Xc(Zc(e)).deep_link_id:null,i=Xc(Zc(t)).deep_link_id;return(i?Xc(Zc(i)).link:null)||i||n||e||t}class B_{constructor(e){var n,i,r,o,l,c;const d=Xc(Zc(e)),f=(n=d.apiKey)!==null&&n!==void 0?n:null,p=(i=d.oobCode)!==null&&i!==void 0?i:null,v=U4((r=d.mode)!==null&&r!==void 0?r:null);Fe(f&&p&&v,"argument-error"),this.apiKey=f,this.operation=v,this.code=p,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=d.lang)!==null&&l!==void 0?l:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=F4(e);try{return new B_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(){this.providerId=ku.PROVIDER_ID}static credential(e,n){return Ld._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=B_.parseLink(n);return Fe(i,"argument-error"),Ld._fromEmailAndCode(e,i.code,i.tenantId)}}ku.PROVIDER_ID="password";ku.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ku.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf extends q_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po extends rf{constructor(){super("facebook.com")}static credential(e){return Qa._fromParams({providerId:Po.PROVIDER_ID,signInMethod:Po.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Po.credentialFromTaggedObject(e)}static credentialFromError(e){return Po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Po.credential(e.oauthAccessToken)}catch{return null}}}Po.FACEBOOK_SIGN_IN_METHOD="facebook.com";Po.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds extends rf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Qa._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ds.credentialFromTaggedObject(e)}static credentialFromError(e){return Ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Ds.credential(n,i)}catch{return null}}}Ds.GOOGLE_SIGN_IN_METHOD="google.com";Ds.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do extends rf{constructor(){super("github.com")}static credential(e){return Qa._fromParams({providerId:Do.PROVIDER_ID,signInMethod:Do.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Do.credentialFromTaggedObject(e)}static credentialFromError(e){return Do.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Do.credential(e.oauthAccessToken)}catch{return null}}}Do.GITHUB_SIGN_IN_METHOD="github.com";Do.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo extends rf{constructor(){super("twitter.com")}static credential(e,n){return Qa._fromParams({providerId:Mo.PROVIDER_ID,signInMethod:Mo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Mo.credentialFromTaggedObject(e)}static credentialFromError(e){return Mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Mo.credential(n,i)}catch{return null}}}Mo.TWITTER_SIGN_IN_METHOD="twitter.com";Mo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B4(t,e){return nf(t,"POST","/v1/accounts:signUp",ta(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await Lr._fromIdTokenResponse(e,i,r),l=Ax(i);return new Xa({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=Ax(i);return new Xa({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function Ax(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp extends zr{constructor(e,n,i,r){var o;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Gp.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Gp(e,n,i,r)}}function tN(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Gp._fromErrorAndOperation(t,o,e,i):o})}async function q4(t,e,n=!1){const i=await Vd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Xa._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z4(t,e,n=!1){const{auth:i}=t;if(Si(i.app))return Promise.reject(Vs(i));const r="reauthenticate";try{const o=await Vd(t,tN(i,r,e,t),n);Fe(o.idToken,i,"internal-error");const l=O_(o.idToken);Fe(l,i,"internal-error");const{sub:c}=l;return Fe(t.uid===c,i,"user-mismatch"),Xa._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&br(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nN(t,e,n=!1){if(Si(t.app))return Promise.reject(Vs(t));const i="signIn",r=await tN(t,i,e),o=await Xa._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}async function H4(t,e){return nN(ia(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iN(t){const e=ia(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function G4(t,e,n){if(Si(t.app))return Promise.reject(Vs(t));const i=ia(t),l=await y0(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",B4).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&iN(t),d}),c=await Xa._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(c.user),c}function j4(t,e,n){return Si(t.app)?Promise.reject(Vs(t)):H4(kt(t),ku.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&iN(t),i})}function $4(t,e,n,i){return kt(t).onIdTokenChanged(e,n,i)}function K4(t,e,n){return kt(t).beforeAuthStateChanged(e,n)}function Y4(t,e,n,i){return kt(t).onAuthStateChanged(e,n,i)}function Mv(t){return kt(t).signOut()}const jp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(jp,"1"),this.storage.removeItem(jp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4=1e3,W4=10;class sN extends rN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=W1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,c,d)=>{this.notifyListeners(l,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);p4()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,W4):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},J4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}sN.type="LOCAL";const Q4=sN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN extends rN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}oN.type="SESSION";const aN=oN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Lm(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,l=this.handlersMap[r];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const c=Array.from(l).map(async f=>f(n.origin,o)),d=await X4(c);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,l;return new Promise((c,d)=>{const f=z_("",20);r.port1.start();const p=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(v){const T=v;if(T.data.eventId===f)switch(T.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(T.data.response);break;default:clearTimeout(p),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(){return window}function eU(t){ns().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(){return typeof ns().WorkerGlobalScope<"u"&&typeof ns().importScripts=="function"}async function tU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nU(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function iU(){return lN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN="firebaseLocalStorageDb",rU=1,$p="firebaseLocalStorage",cN="fbase_key";class sf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Om(t,e){return t.transaction([$p],e?"readwrite":"readonly").objectStore($p)}function sU(){const t=indexedDB.deleteDatabase(uN);return new sf(t).toPromise()}function v0(){const t=indexedDB.open(uN,rU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore($p,{keyPath:cN})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains($p)?e(i):(i.close(),await sU(),e(await v0()))})})}async function Cx(t,e,n){const i=Om(t,!0).put({[cN]:e,value:n});return new sf(i).toPromise()}async function oU(t,e){const n=Om(t,!1).get(e),i=await new sf(n).toPromise();return i===void 0?null:i.value}function Ix(t,e){const n=Om(t,!0).delete(e);return new sf(n).toPromise()}const aU=800,lU=3;class dN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await v0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>lU)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lm._getInstance(iU()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await tU(),!this.activeServiceWorker)return;this.sender=new Z4(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||nU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await v0();return await Cx(e,jp,"1"),await Ix(e,jp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Cx(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>oU(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ix(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Om(r,!1).getAll();return new sf(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),aU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dN.type="LOCAL";const uU=dN;new tf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(t,e){return e?ks(e):(Fe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_ extends F_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return du(e,this._buildIdpRequest())}_linkToIdToken(e,n){return du(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return du(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function cU(t){return nN(t.auth,new H_(t),t.bypassAuthState)}function dU(t){const{auth:e,user:n}=t;return Fe(n,e,"internal-error"),z4(n,new H_(t),t.bypassAuthState)}async function fU(t){const{auth:e,user:n}=t;return Fe(n,e,"internal-error"),q4(n,new H_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cU;case"linkViaPopup":case"linkViaRedirect":return fU;case"reauthViaPopup":case"reauthViaRedirect":return dU;default:br(this.auth,"internal-error")}}resolve(e){Bs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Bs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hU=new tf(2e3,1e4);async function pU(t,e,n){if(Si(t.app))return Promise.reject(Fr(t,"operation-not-supported-in-this-environment"));const i=ia(t);YO(t,e,q_);const r=fN(i,n);return new qa(i,"signInViaPopup",e,r).executeNotNull()}class qa extends hN{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,qa.currentPopupAction&&qa.currentPopupAction.cancel(),qa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){Bs(this.filter.length===1,"Popup operations only handle one event");const e=z_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hU.get())};e()}}qa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mU="pendingRedirect",_p=new Map;class gU extends hN{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=_p.get(this.auth._key());if(!e){try{const i=await yU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}_p.set(this.auth._key(),e)}return this.bypassAuthState||_p.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yU(t,e){const n=TU(e),i=_U(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function vU(t,e){_p.set(t._key(),e)}function _U(t){return ks(t._redirectPersistence)}function TU(t){return vp(mU,t.config.apiKey,t.name)}async function EU(t,e,n=!1){if(Si(t.app))return Promise.reject(Vs(t));const i=ia(t),r=fN(i,e),l=await new gU(i,r,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SU=600*1e3;class bU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!pN(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Fr(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=SU&&this.cachedEventUids.clear(),this.cachedEventUids.has(Rx(e))}saveEventToCache(e){this.cachedEventUids.add(Rx(e)),this.lastProcessedEventTime=Date.now()}}function Rx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function pN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xU(t,e={}){return na(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CU=/^https?/;async function IU(t){if(t.config.emulator)return;const{authorizedDomains:e}=await xU(t);for(const n of e)try{if(RU(n))return}catch{}br(t,"unauthorized-domain")}function RU(t){const e=m0(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!CU.test(n))return!1;if(AU.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NU=new tf(3e4,6e4);function Nx(){const t=ns().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function PU(t){return new Promise((e,n)=>{var i,r,o;function l(){Nx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Nx(),n(Fr(t,"network-request-failed"))},timeout:NU.get()})}if(!((r=(i=ns().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=ns().gapi)===null||o===void 0)&&o.load)l();else{const c=b4("iframefcb");return ns()[c]=()=>{gapi.load?l():n(Fr(t,"network-request-failed"))},X1(`${S4()}?onload=${c}`).catch(d=>n(d))}}).catch(e=>{throw Tp=null,e})}let Tp=null;function DU(t){return Tp=Tp||PU(t),Tp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MU=new tf(5e3,15e3),kU="__/auth/iframe",VU="emulator/auth/iframe",LU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},OU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UU(t){const e=t.config;Fe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?L_(e,VU):`https://${t.config.authDomain}/${kU}`,i={apiKey:e.apiKey,appName:t.name,v:rl},r=OU.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${Zd(i).slice(1)}`}async function FU(t){const e=await DU(t),n=ns().gapi;return Fe(n,t,"internal-error"),e.open({where:document.body,url:UU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LU,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const l=Fr(t,"network-request-failed"),c=ns().setTimeout(()=>{o(l)},MU.get());function d(){ns().clearTimeout(c),r(i)}i.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qU=500,zU=600,HU="_blank",GU="http://localhost";class Px{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jU(t,e,n,i=qU,r=zU){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const d=Object.assign(Object.assign({},BU),{width:i.toString(),height:r.toString(),top:o,left:l}),f=ui().toLowerCase();n&&(c=j1(f)?HU:n),H1(f)&&(e=e||GU,d.scrollbars="yes");const p=Object.entries(d).reduce((T,[b,C])=>`${T}${b}=${C},`,"");if(h4(f)&&c!=="_self")return $U(e||"",c),new Px(null);const v=window.open(e||"",c,p);Fe(v,t,"popup-blocked");try{v.focus()}catch{}return new Px(v)}function $U(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KU="__/auth/handler",YU="emulator/auth/handler",JU=encodeURIComponent("fac");async function Dx(t,e,n,i,r,o){Fe(t.config.authDomain,t,"auth-domain-config-required"),Fe(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:rl,eventId:r};if(e instanceof q_){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",kL(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,v]of Object.entries({}))l[p]=v}if(e instanceof rf){const p=e.getScopes().filter(v=>v!=="");p.length>0&&(l.scopes=p.join(","))}t.tenantId&&(l.tid=t.tenantId);const c=l;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const d=await t._getAppCheckToken(),f=d?`#${JU}=${encodeURIComponent(d)}`:"";return`${WU(t)}?${Zd(c).slice(1)}${f}`}function WU({config:t}){return t.emulator?L_(t,YU):`https://${t.authDomain}/${KU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv="webStorageSupport";class QU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aN,this._completeRedirectFn=EU,this._overrideRedirectResult=vU}async _openPopup(e,n,i,r){var o;Bs((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await Dx(e,n,i,m0(),r);return jU(e,l,z_())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await Dx(e,n,i,m0(),r);return eU(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(Bs(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await FU(e),i=new bU(e);return n.register("authEvent",r=>(Fe(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(kv,{type:kv},r=>{var o;const l=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[kv];l!==void 0&&n(!!l),br(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=IU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return W1()||G1()||U_()}}const XU=QU;var Mx="@firebase/auth",kx="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function t3(t){jo(new Us("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=i.options;Fe(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Q1(t)},f=new _4(i,r,o,d);return R4(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),jo(new Us("auth-internal",e=>{const n=ia(e.getProvider("auth").getImmediate());return(i=>new ZU(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Er(Mx,kx,e3(t)),Er(Mx,kx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3=300,i3=R1("authIdTokenMaxAge")||n3;let Vx=null;const r3=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>i3)return;const r=n==null?void 0:n.token;Vx!==r&&(Vx=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function s3(t=km()){const e=ef(t,"auth");if(e.isInitialized())return e.getImmediate();const n=I4(t,{popupRedirectResolver:XU,persistence:[uU,Q4,aN]}),i=R1("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=r3(o.toString());K4(n,l,()=>l(n.currentUser)),$4(n,c=>l(c))}}const r=C1("auth");return r&&N4(n,`http://${r}`),n}function o3(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}T4({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=Fr("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",o3().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});t3("Browser");var a3="firebase",l3="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Er(a3,l3,"app");var Lx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zo,mN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,I){function P(){}P.prototype=I.prototype,R.D=I.prototype,R.prototype=new P,R.prototype.constructor=R,R.C=function(U,q,V){for(var z=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)z[Ee-2]=arguments[Ee];return I.prototype[q].apply(U,z)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(R,I,P){P||(P=0);var U=Array(16);if(typeof I=="string")for(var q=0;16>q;++q)U[q]=I.charCodeAt(P++)|I.charCodeAt(P++)<<8|I.charCodeAt(P++)<<16|I.charCodeAt(P++)<<24;else for(q=0;16>q;++q)U[q]=I[P++]|I[P++]<<8|I[P++]<<16|I[P++]<<24;I=R.g[0],P=R.g[1],q=R.g[2];var V=R.g[3],z=I+(V^P&(q^V))+U[0]+3614090360&4294967295;I=P+(z<<7&4294967295|z>>>25),z=V+(q^I&(P^q))+U[1]+3905402710&4294967295,V=I+(z<<12&4294967295|z>>>20),z=q+(P^V&(I^P))+U[2]+606105819&4294967295,q=V+(z<<17&4294967295|z>>>15),z=P+(I^q&(V^I))+U[3]+3250441966&4294967295,P=q+(z<<22&4294967295|z>>>10),z=I+(V^P&(q^V))+U[4]+4118548399&4294967295,I=P+(z<<7&4294967295|z>>>25),z=V+(q^I&(P^q))+U[5]+1200080426&4294967295,V=I+(z<<12&4294967295|z>>>20),z=q+(P^V&(I^P))+U[6]+2821735955&4294967295,q=V+(z<<17&4294967295|z>>>15),z=P+(I^q&(V^I))+U[7]+4249261313&4294967295,P=q+(z<<22&4294967295|z>>>10),z=I+(V^P&(q^V))+U[8]+1770035416&4294967295,I=P+(z<<7&4294967295|z>>>25),z=V+(q^I&(P^q))+U[9]+2336552879&4294967295,V=I+(z<<12&4294967295|z>>>20),z=q+(P^V&(I^P))+U[10]+4294925233&4294967295,q=V+(z<<17&4294967295|z>>>15),z=P+(I^q&(V^I))+U[11]+2304563134&4294967295,P=q+(z<<22&4294967295|z>>>10),z=I+(V^P&(q^V))+U[12]+1804603682&4294967295,I=P+(z<<7&4294967295|z>>>25),z=V+(q^I&(P^q))+U[13]+4254626195&4294967295,V=I+(z<<12&4294967295|z>>>20),z=q+(P^V&(I^P))+U[14]+2792965006&4294967295,q=V+(z<<17&4294967295|z>>>15),z=P+(I^q&(V^I))+U[15]+1236535329&4294967295,P=q+(z<<22&4294967295|z>>>10),z=I+(q^V&(P^q))+U[1]+4129170786&4294967295,I=P+(z<<5&4294967295|z>>>27),z=V+(P^q&(I^P))+U[6]+3225465664&4294967295,V=I+(z<<9&4294967295|z>>>23),z=q+(I^P&(V^I))+U[11]+643717713&4294967295,q=V+(z<<14&4294967295|z>>>18),z=P+(V^I&(q^V))+U[0]+3921069994&4294967295,P=q+(z<<20&4294967295|z>>>12),z=I+(q^V&(P^q))+U[5]+3593408605&4294967295,I=P+(z<<5&4294967295|z>>>27),z=V+(P^q&(I^P))+U[10]+38016083&4294967295,V=I+(z<<9&4294967295|z>>>23),z=q+(I^P&(V^I))+U[15]+3634488961&4294967295,q=V+(z<<14&4294967295|z>>>18),z=P+(V^I&(q^V))+U[4]+3889429448&4294967295,P=q+(z<<20&4294967295|z>>>12),z=I+(q^V&(P^q))+U[9]+568446438&4294967295,I=P+(z<<5&4294967295|z>>>27),z=V+(P^q&(I^P))+U[14]+3275163606&4294967295,V=I+(z<<9&4294967295|z>>>23),z=q+(I^P&(V^I))+U[3]+4107603335&4294967295,q=V+(z<<14&4294967295|z>>>18),z=P+(V^I&(q^V))+U[8]+1163531501&4294967295,P=q+(z<<20&4294967295|z>>>12),z=I+(q^V&(P^q))+U[13]+2850285829&4294967295,I=P+(z<<5&4294967295|z>>>27),z=V+(P^q&(I^P))+U[2]+4243563512&4294967295,V=I+(z<<9&4294967295|z>>>23),z=q+(I^P&(V^I))+U[7]+1735328473&4294967295,q=V+(z<<14&4294967295|z>>>18),z=P+(V^I&(q^V))+U[12]+2368359562&4294967295,P=q+(z<<20&4294967295|z>>>12),z=I+(P^q^V)+U[5]+4294588738&4294967295,I=P+(z<<4&4294967295|z>>>28),z=V+(I^P^q)+U[8]+2272392833&4294967295,V=I+(z<<11&4294967295|z>>>21),z=q+(V^I^P)+U[11]+1839030562&4294967295,q=V+(z<<16&4294967295|z>>>16),z=P+(q^V^I)+U[14]+4259657740&4294967295,P=q+(z<<23&4294967295|z>>>9),z=I+(P^q^V)+U[1]+2763975236&4294967295,I=P+(z<<4&4294967295|z>>>28),z=V+(I^P^q)+U[4]+1272893353&4294967295,V=I+(z<<11&4294967295|z>>>21),z=q+(V^I^P)+U[7]+4139469664&4294967295,q=V+(z<<16&4294967295|z>>>16),z=P+(q^V^I)+U[10]+3200236656&4294967295,P=q+(z<<23&4294967295|z>>>9),z=I+(P^q^V)+U[13]+681279174&4294967295,I=P+(z<<4&4294967295|z>>>28),z=V+(I^P^q)+U[0]+3936430074&4294967295,V=I+(z<<11&4294967295|z>>>21),z=q+(V^I^P)+U[3]+3572445317&4294967295,q=V+(z<<16&4294967295|z>>>16),z=P+(q^V^I)+U[6]+76029189&4294967295,P=q+(z<<23&4294967295|z>>>9),z=I+(P^q^V)+U[9]+3654602809&4294967295,I=P+(z<<4&4294967295|z>>>28),z=V+(I^P^q)+U[12]+3873151461&4294967295,V=I+(z<<11&4294967295|z>>>21),z=q+(V^I^P)+U[15]+530742520&4294967295,q=V+(z<<16&4294967295|z>>>16),z=P+(q^V^I)+U[2]+3299628645&4294967295,P=q+(z<<23&4294967295|z>>>9),z=I+(q^(P|~V))+U[0]+4096336452&4294967295,I=P+(z<<6&4294967295|z>>>26),z=V+(P^(I|~q))+U[7]+1126891415&4294967295,V=I+(z<<10&4294967295|z>>>22),z=q+(I^(V|~P))+U[14]+2878612391&4294967295,q=V+(z<<15&4294967295|z>>>17),z=P+(V^(q|~I))+U[5]+4237533241&4294967295,P=q+(z<<21&4294967295|z>>>11),z=I+(q^(P|~V))+U[12]+1700485571&4294967295,I=P+(z<<6&4294967295|z>>>26),z=V+(P^(I|~q))+U[3]+2399980690&4294967295,V=I+(z<<10&4294967295|z>>>22),z=q+(I^(V|~P))+U[10]+4293915773&4294967295,q=V+(z<<15&4294967295|z>>>17),z=P+(V^(q|~I))+U[1]+2240044497&4294967295,P=q+(z<<21&4294967295|z>>>11),z=I+(q^(P|~V))+U[8]+1873313359&4294967295,I=P+(z<<6&4294967295|z>>>26),z=V+(P^(I|~q))+U[15]+4264355552&4294967295,V=I+(z<<10&4294967295|z>>>22),z=q+(I^(V|~P))+U[6]+2734768916&4294967295,q=V+(z<<15&4294967295|z>>>17),z=P+(V^(q|~I))+U[13]+1309151649&4294967295,P=q+(z<<21&4294967295|z>>>11),z=I+(q^(P|~V))+U[4]+4149444226&4294967295,I=P+(z<<6&4294967295|z>>>26),z=V+(P^(I|~q))+U[11]+3174756917&4294967295,V=I+(z<<10&4294967295|z>>>22),z=q+(I^(V|~P))+U[2]+718787259&4294967295,q=V+(z<<15&4294967295|z>>>17),z=P+(V^(q|~I))+U[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(q+(z<<21&4294967295|z>>>11))&4294967295,R.g[2]=R.g[2]+q&4294967295,R.g[3]=R.g[3]+V&4294967295}i.prototype.u=function(R,I){I===void 0&&(I=R.length);for(var P=I-this.blockSize,U=this.B,q=this.h,V=0;V<I;){if(q==0)for(;V<=P;)r(this,R,V),V+=this.blockSize;if(typeof R=="string"){for(;V<I;)if(U[q++]=R.charCodeAt(V++),q==this.blockSize){r(this,U),q=0;break}}else for(;V<I;)if(U[q++]=R[V++],q==this.blockSize){r(this,U),q=0;break}}this.h=q,this.o+=I},i.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;var P=8*this.o;for(I=R.length-8;I<R.length;++I)R[I]=P&255,P/=256;for(this.u(R),R=Array(16),I=P=0;4>I;++I)for(var U=0;32>U;U+=8)R[P++]=this.g[I]>>>U&255;return R};function o(R,I){var P=c;return Object.prototype.hasOwnProperty.call(P,R)?P[R]:P[R]=I(R)}function l(R,I){this.h=I;for(var P=[],U=!0,q=R.length-1;0<=q;q--){var V=R[q]|0;U&&V==I||(P[q]=V,U=!1)}this.g=P}var c={};function d(R){return-128<=R&&128>R?o(R,function(I){return new l([I|0],0>I?-1:0)}):new l([R|0],0>R?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return v;if(0>R)return D(f(-R));for(var I=[],P=1,U=0;R>=P;U++)I[U]=R/P|0,P*=4294967296;return new l(I,0)}function p(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return D(p(R.substring(1),I));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=f(Math.pow(I,8)),U=v,q=0;q<R.length;q+=8){var V=Math.min(8,R.length-q),z=parseInt(R.substring(q,q+V),I);8>V?(V=f(Math.pow(I,V)),U=U.j(V).add(f(z))):(U=U.j(P),U=U.add(f(z)))}return U}var v=d(0),T=d(1),b=d(16777216);t=l.prototype,t.m=function(){if(N(this))return-D(this).m();for(var R=0,I=1,P=0;P<this.g.length;P++){var U=this.i(P);R+=(0<=U?U:4294967296+U)*I,I*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(C(this))return"0";if(N(this))return"-"+D(this).toString(R);for(var I=f(Math.pow(R,6)),P=this,U="";;){var q=G(P,I).g;P=O(P,q.j(I));var V=((0<P.g.length?P.g[0]:P.h)>>>0).toString(R);if(P=q,C(P))return V+U;for(;6>V.length;)V="0"+V;U=V+U}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function C(R){if(R.h!=0)return!1;for(var I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function N(R){return R.h==-1}t.l=function(R){return R=O(this,R),N(R)?-1:C(R)?0:1};function D(R){for(var I=R.g.length,P=[],U=0;U<I;U++)P[U]=~R.g[U];return new l(P,~R.h).add(T)}t.abs=function(){return N(this)?D(this):this},t.add=function(R){for(var I=Math.max(this.g.length,R.g.length),P=[],U=0,q=0;q<=I;q++){var V=U+(this.i(q)&65535)+(R.i(q)&65535),z=(V>>>16)+(this.i(q)>>>16)+(R.i(q)>>>16);U=z>>>16,V&=65535,z&=65535,P[q]=z<<16|V}return new l(P,P[P.length-1]&-2147483648?-1:0)};function O(R,I){return R.add(D(I))}t.j=function(R){if(C(this)||C(R))return v;if(N(this))return N(R)?D(this).j(D(R)):D(D(this).j(R));if(N(R))return D(this.j(D(R)));if(0>this.l(b)&&0>R.l(b))return f(this.m()*R.m());for(var I=this.g.length+R.g.length,P=[],U=0;U<2*I;U++)P[U]=0;for(U=0;U<this.g.length;U++)for(var q=0;q<R.g.length;q++){var V=this.i(U)>>>16,z=this.i(U)&65535,Ee=R.i(q)>>>16,Ne=R.i(q)&65535;P[2*U+2*q]+=z*Ne,k(P,2*U+2*q),P[2*U+2*q+1]+=V*Ne,k(P,2*U+2*q+1),P[2*U+2*q+1]+=z*Ee,k(P,2*U+2*q+1),P[2*U+2*q+2]+=V*Ee,k(P,2*U+2*q+2)}for(U=0;U<I;U++)P[U]=P[2*U+1]<<16|P[2*U];for(U=I;U<2*I;U++)P[U]=0;return new l(P,0)};function k(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function F(R,I){this.g=R,this.h=I}function G(R,I){if(C(I))throw Error("division by zero");if(C(R))return new F(v,v);if(N(R))return I=G(D(R),I),new F(D(I.g),D(I.h));if(N(I))return I=G(R,D(I)),new F(D(I.g),I.h);if(30<R.g.length){if(N(R)||N(I))throw Error("slowDivide_ only works with positive integers.");for(var P=T,U=I;0>=U.l(R);)P=K(P),U=K(U);var q=H(P,1),V=H(U,1);for(U=H(U,2),P=H(P,2);!C(U);){var z=V.add(U);0>=z.l(R)&&(q=q.add(P),V=z),U=H(U,1),P=H(P,1)}return I=O(R,q.j(I)),new F(q,I)}for(q=v;0<=R.l(I);){for(P=Math.max(1,Math.floor(R.m()/I.m())),U=Math.ceil(Math.log(P)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),V=f(P),z=V.j(I);N(z)||0<z.l(R);)P-=U,V=f(P),z=V.j(I);C(V)&&(V=T),q=q.add(V),R=O(R,z)}return new F(q,R)}t.A=function(R){return G(this,R).h},t.and=function(R){for(var I=Math.max(this.g.length,R.g.length),P=[],U=0;U<I;U++)P[U]=this.i(U)&R.i(U);return new l(P,this.h&R.h)},t.or=function(R){for(var I=Math.max(this.g.length,R.g.length),P=[],U=0;U<I;U++)P[U]=this.i(U)|R.i(U);return new l(P,this.h|R.h)},t.xor=function(R){for(var I=Math.max(this.g.length,R.g.length),P=[],U=0;U<I;U++)P[U]=this.i(U)^R.i(U);return new l(P,this.h^R.h)};function K(R){for(var I=R.g.length+1,P=[],U=0;U<I;U++)P[U]=R.i(U)<<1|R.i(U-1)>>>31;return new l(P,R.h)}function H(R,I){var P=I>>5;I%=32;for(var U=R.g.length-P,q=[],V=0;V<U;V++)q[V]=0<I?R.i(V+P)>>>I|R.i(V+P+1)<<32-I:R.i(V+P);return new l(q,R.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,mN=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=p,zo=l}).apply(typeof Lx<"u"?Lx:typeof self<"u"?self:typeof window<"u"?window:{});var zh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gN,ed,yN,Ep,_0,vN,_N,TN;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,w,A){return g==Array.prototype||g==Object.prototype||(g[w]=A.value),g};function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof zh=="object"&&zh];for(var w=0;w<g.length;++w){var A=g[w];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var i=n(this);function r(g,w){if(w)e:{var A=i;g=g.split(".");for(var L=0;L<g.length-1;L++){var Q=g[L];if(!(Q in A))break e;A=A[Q]}g=g[g.length-1],L=A[g],w=w(L),w!=L&&w!=null&&e(A,g,{configurable:!0,writable:!0,value:w})}}function o(g,w){g instanceof String&&(g+="");var A=0,L=!1,Q={next:function(){if(!L&&A<g.length){var re=A++;return{value:w(re,g[re]),done:!1}}return L=!0,{done:!0,value:void 0}}};return Q[Symbol.iterator]=function(){return Q},Q}r("Array.prototype.values",function(g){return g||function(){return o(this,function(w,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(g){var w=typeof g;return w=w!="object"?w:g?Array.isArray(g)?"array":w:"null",w=="array"||w=="object"&&typeof g.length=="number"}function f(g){var w=typeof g;return w=="object"&&g!=null||w=="function"}function p(g,w,A){return g.call.apply(g.bind,arguments)}function v(g,w,A){if(!g)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var Q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Q,L),g.apply(w,Q)}}return function(){return g.apply(w,arguments)}}function T(g,w,A){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:v,T.apply(null,arguments)}function b(g,w){var A=Array.prototype.slice.call(arguments,1);return function(){var L=A.slice();return L.push.apply(L,arguments),g.apply(this,L)}}function C(g,w){function A(){}A.prototype=w.prototype,g.aa=w.prototype,g.prototype=new A,g.prototype.constructor=g,g.Qb=function(L,Q,re){for(var ge=Array(arguments.length-2),Tt=2;Tt<arguments.length;Tt++)ge[Tt-2]=arguments[Tt];return w.prototype[Q].apply(L,ge)}}function N(g){const w=g.length;if(0<w){const A=Array(w);for(let L=0;L<w;L++)A[L]=g[L];return A}return[]}function D(g,w){for(let A=1;A<arguments.length;A++){const L=arguments[A];if(d(L)){const Q=g.length||0,re=L.length||0;g.length=Q+re;for(let ge=0;ge<re;ge++)g[Q+ge]=L[ge]}else g.push(L)}}class O{constructor(w,A){this.i=w,this.j=A,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function k(g){return/^[\s\xa0]*$/.test(g)}function F(){var g=c.navigator;return g&&(g=g.userAgent)?g:""}function G(g){return G[" "](g),g}G[" "]=function(){};var K=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function H(g,w,A){for(const L in g)w.call(A,g[L],L,g)}function R(g,w){for(const A in g)w.call(void 0,g[A],A,g)}function I(g){const w={};for(const A in g)w[A]=g[A];return w}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(g,w){let A,L;for(let Q=1;Q<arguments.length;Q++){L=arguments[Q];for(A in L)g[A]=L[A];for(let re=0;re<P.length;re++)A=P[re],Object.prototype.hasOwnProperty.call(L,A)&&(g[A]=L[A])}}function q(g){var w=1;g=g.split(":");const A=[];for(;0<w&&g.length;)A.push(g.shift()),w--;return g.length&&A.push(g.join(":")),A}function V(g){c.setTimeout(()=>{throw g},0)}function z(){var g=xe;let w=null;return g.g&&(w=g.g,g.g=g.g.next,g.g||(g.h=null),w.next=null),w}class Ee{constructor(){this.h=this.g=null}add(w,A){const L=Ne.get();L.set(w,A),this.h?this.h.next=L:this.g=L,this.h=L}}var Ne=new O(()=>new W,g=>g.reset());class W{constructor(){this.next=this.g=this.h=null}set(w,A){this.h=w,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let se,he=!1,xe=new Ee,Ae=()=>{const g=c.Promise.resolve(void 0);se=()=>{g.then(j)}};var j=()=>{for(var g;g=z();){try{g.h.call(g.g)}catch(A){V(A)}var w=Ne;w.j(g),100>w.h&&(w.h++,g.next=w.g,w.g=g)}he=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ne(g,w){this.type=g,this.g=this.target=w,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var oe=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var g=!1,w=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const A=()=>{};c.addEventListener("test",A,w),c.removeEventListener("test",A,w)}catch{}return g})();function ye(g,w){if(ne.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var A=this.type=g.type,L=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=w,w=g.relatedTarget){if(K){e:{try{G(w.nodeName);var Q=!0;break e}catch{}Q=!1}Q||(w=null)}}else A=="mouseover"?w=g.fromElement:A=="mouseout"&&(w=g.toElement);this.relatedTarget=w,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:Oe[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&ye.aa.h.call(this)}}C(ye,ne);var Oe={2:"touch",3:"pen",4:"mouse"};ye.prototype.h=function(){ye.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Ie="closure_listenable_"+(1e6*Math.random()|0),Vt=0;function At(g,w,A,L,Q){this.listener=g,this.proxy=null,this.src=w,this.type=A,this.capture=!!L,this.ha=Q,this.key=++Vt,this.da=this.fa=!1}function qn(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function wi(g){this.src=g,this.g={},this.h=0}wi.prototype.add=function(g,w,A,L,Q){var re=g.toString();g=this.g[re],g||(g=this.g[re]=[],this.h++);var ge=zn(g,w,L,Q);return-1<ge?(w=g[ge],A||(w.fa=!1)):(w=new At(w,this.src,re,!!L,Q),w.fa=A,g.push(w)),w};function Ft(g,w){var A=w.type;if(A in g.g){var L=g.g[A],Q=Array.prototype.indexOf.call(L,w,void 0),re;(re=0<=Q)&&Array.prototype.splice.call(L,Q,1),re&&(qn(w),g.g[A].length==0&&(delete g.g[A],g.h--))}}function zn(g,w,A,L){for(var Q=0;Q<g.length;++Q){var re=g[Q];if(!re.da&&re.listener==w&&re.capture==!!A&&re.ha==L)return Q}return-1}var Cn="closure_lm_"+(1e6*Math.random()|0),Mn={};function ci(g,w,A,L,Q){if(Array.isArray(w)){for(var re=0;re<w.length;re++)ci(g,w[re],A,L,Q);return null}return A=yn(A),g&&g[Ie]?g.K(w,A,f(L)?!!L.capture:!1,Q):rr(g,w,A,!1,L,Q)}function rr(g,w,A,L,Q,re){if(!w)throw Error("Invalid event type");var ge=f(Q)?!!Q.capture:!!Q,Tt=zi(g);if(Tt||(g[Cn]=Tt=new wi(g)),A=Tt.add(w,A,L,ge,re),A.proxy)return A;if(L=xi(),A.proxy=L,L.src=g,L.listener=A,g.addEventListener)oe||(Q=ge),Q===void 0&&(Q=!1),g.addEventListener(w.toString(),L,Q);else if(g.attachEvent)g.attachEvent(di(w.toString()),L);else if(g.addListener&&g.removeListener)g.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return A}function xi(){function g(A){return w.call(g.src,g.listener,A)}const w=wr;return g}function Ai(g,w,A,L,Q){if(Array.isArray(w))for(var re=0;re<w.length;re++)Ai(g,w[re],A,L,Q);else L=f(L)?!!L.capture:!!L,A=yn(A),g&&g[Ie]?(g=g.i,w=String(w).toString(),w in g.g&&(re=g.g[w],A=zn(re,A,L,Q),-1<A&&(qn(re[A]),Array.prototype.splice.call(re,A,1),re.length==0&&(delete g.g[w],g.h--)))):g&&(g=zi(g))&&(w=g.g[w.toString()],g=-1,w&&(g=zn(w,A,L,Q)),(A=-1<g?w[g]:null)&&kn(A))}function kn(g){if(typeof g!="number"&&g&&!g.da){var w=g.src;if(w&&w[Ie])Ft(w.i,g);else{var A=g.type,L=g.proxy;w.removeEventListener?w.removeEventListener(A,L,g.capture):w.detachEvent?w.detachEvent(di(A),L):w.addListener&&w.removeListener&&w.removeListener(L),(A=zi(w))?(Ft(A,g),A.h==0&&(A.src=null,w[Cn]=null)):qn(g)}}}function di(g){return g in Mn?Mn[g]:Mn[g]="on"+g}function wr(g,w){if(g.da)g=!0;else{w=new ye(w,this);var A=g.listener,L=g.ha||g.src;g.fa&&kn(g),g=A.call(L,w)}return g}function zi(g){return g=g[Cn],g instanceof wi?g:null}var bt="__closure_events_fn_"+(1e9*Math.random()>>>0);function yn(g){return typeof g=="function"?g:(g[bt]||(g[bt]=function(w){return g.handleEvent(w)}),g[bt])}function ke(){ee.call(this),this.i=new wi(this),this.M=this,this.F=null}C(ke,ee),ke.prototype[Ie]=!0,ke.prototype.removeEventListener=function(g,w,A,L){Ai(this,g,w,A,L)};function Lt(g,w){var A,L=g.F;if(L)for(A=[];L;L=L.F)A.push(L);if(g=g.M,L=w.type||w,typeof w=="string")w=new ne(w,g);else if(w instanceof ne)w.target=w.target||g;else{var Q=w;w=new ne(L,g),U(w,Q)}if(Q=!0,A)for(var re=A.length-1;0<=re;re--){var ge=w.g=A[re];Q=Qt(ge,L,!0,w)&&Q}if(ge=w.g=g,Q=Qt(ge,L,!0,w)&&Q,Q=Qt(ge,L,!1,w)&&Q,A)for(re=0;re<A.length;re++)ge=w.g=A[re],Q=Qt(ge,L,!1,w)&&Q}ke.prototype.N=function(){if(ke.aa.N.call(this),this.i){var g=this.i,w;for(w in g.g){for(var A=g.g[w],L=0;L<A.length;L++)qn(A[L]);delete g.g[w],g.h--}}this.F=null},ke.prototype.K=function(g,w,A,L){return this.i.add(String(g),w,!1,A,L)},ke.prototype.L=function(g,w,A,L){return this.i.add(String(g),w,!0,A,L)};function Qt(g,w,A,L){if(w=g.i.g[String(w)],!w)return!0;w=w.concat();for(var Q=!0,re=0;re<w.length;++re){var ge=w[re];if(ge&&!ge.da&&ge.capture==A){var Tt=ge.listener,_n=ge.ha||ge.src;ge.fa&&Ft(g.i,ge),Q=Tt.call(_n,L)!==!1&&Q}}return Q&&!L.defaultPrevented}function tn(g,w,A){if(typeof g=="function")A&&(g=T(g,A));else if(g&&typeof g.handleEvent=="function")g=T(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:c.setTimeout(g,w||0)}function xr(g){g.g=tn(()=>{g.g=null,g.i&&(g.i=!1,xr(g))},g.l);const w=g.h;g.h=null,g.m.apply(null,w)}class ua extends ee{constructor(w,A){super(),this.m=w,this.l=A,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:xr(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function In(g){ee.call(this),this.h=g,this.g={}}C(In,ee);var fi=[];function Bt(g){H(g.g,function(w,A){this.g.hasOwnProperty(A)&&kn(w)},g),g.g={}}In.prototype.N=function(){In.aa.N.call(this),Bt(this)},In.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var le=c.JSON.stringify,pe=c.JSON.parse,Te=class{stringify(g){return c.JSON.stringify(g,void 0)}parse(g){return c.JSON.parse(g,void 0)}};function ze(){}ze.prototype.h=null;function Ve(g){return g.h||(g.h=g.i())}function Qe(){}var Ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function et(){ne.call(this,"d")}C(et,ne);function tt(){ne.call(this,"c")}C(tt,ne);var Me={},He=null;function cn(){return He=He||new ke}Me.La="serverreachability";function Ci(g){ne.call(this,Me.La,g)}C(Ci,ne);function Yt(g){const w=cn();Lt(w,new Ci(w))}Me.STAT_EVENT="statevent";function Ct(g,w){ne.call(this,Me.STAT_EVENT,g),this.stat=w}C(Ct,ne);function ft(g){const w=cn();Lt(w,new Ct(w,g))}Me.Ma="timingevent";function Hn(g,w){ne.call(this,Me.Ma,g),this.size=w}C(Hn,ne);function Ot(g,w){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){g()},w)}function dn(){this.g=!0}dn.prototype.xa=function(){this.g=!1};function Ii(g,w,A,L,Q,re){g.info(function(){if(g.g)if(re)for(var ge="",Tt=re.split("&"),_n=0;_n<Tt.length;_n++){var Xe=Tt[_n].split("=");if(1<Xe.length){var Ln=Xe[0];Xe=Xe[1];var On=Ln.split("_");ge=2<=On.length&&On[1]=="type"?ge+(Ln+"="+Xe+"&"):ge+(Ln+"=redacted&")}}else ge=null;else ge=re;return"XMLHTTP REQ ("+L+") [attempt "+Q+"]: "+w+`
`+A+`
`+ge})}function Rn(g,w,A,L,Q,re,ge){g.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+Q+"]: "+w+`
`+A+`
`+re+" "+ge})}function vn(g,w,A,L){g.info(function(){return"XMLHTTP TEXT ("+w+"): "+me(g,A)+(L?" "+L:"")})}function Hi(g,w){g.info(function(){return"TIMEOUT: "+w})}dn.prototype.info=function(){};function me(g,w){if(!g.g)return w;if(!w)return null;try{var A=JSON.parse(w);if(A){for(g=0;g<A.length;g++)if(Array.isArray(A[g])){var L=A[g];if(!(2>L.length)){var Q=L[1];if(Array.isArray(Q)&&!(1>Q.length)){var re=Q[0];if(re!="noop"&&re!="stop"&&re!="close")for(var ge=1;ge<Q.length;ge++)Q[ge]=""}}}}return le(A)}catch{return w}}var be={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Dt;function Ri(){}C(Ri,ze),Ri.prototype.g=function(){return new XMLHttpRequest},Ri.prototype.i=function(){return{}},Dt=new Ri;function hi(g,w,A,L){this.j=g,this.i=w,this.l=A,this.R=L||1,this.U=new In(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ar}function Ar(){this.i=null,this.g="",this.h=!1}var pi={},Ni={};function sr(g,w,A){g.L=1,g.v=da(nn(w)),g.m=A,g.P=!0,Pi(g,null)}function Pi(g,w){g.F=Date.now(),mi(g),g.A=nn(g.v);var A=g.A,L=g.R;Array.isArray(L)||(L=[String(L)]),fs(A.i,"t",L),g.C=0,A=g.j.J,g.h=new Ar,g.g=kf(g.j,A?w:null,!g.m),0<g.O&&(g.M=new ua(T(g.Y,g,g.g),g.O)),w=g.U,A=g.g,L=g.ca;var Q="readystatechange";Array.isArray(Q)||(Q&&(fi[0]=Q.toString()),Q=fi);for(var re=0;re<Q.length;re++){var ge=ci(A,Q[re],L||w.handleEvent,!1,w.h||w);if(!ge)break;w.g[ge.key]=ge}w=g.H?I(g.H):{},g.m?(g.u||(g.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,w)):(g.u="GET",g.g.ea(g.A,g.u,null,w)),Yt(),Ii(g.i,g.u,g.A,g.l,g.R,g.m)}hi.prototype.ca=function(g){g=g.target;const w=this.M;w&&vi(g)==3?w.j():this.Y(g)},hi.prototype.Y=function(g){try{if(g==this.g)e:{const On=vi(this.g);var w=this.g.Ba();const so=this.g.Z();if(!(3>On)&&(On!=3||this.g&&(this.h.h||this.g.oa()||pa(this.g)))){this.J||On!=4||w==7||(w==8||0>=so?Yt(3):Yt(2)),Cr(this);var A=this.g.Z();this.X=A;t:if(or(this)){var L=pa(this.g);g="";var Q=L.length,re=vi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gi(this),Ir(this);var ge="";break t}this.h.i=new c.TextDecoder}for(w=0;w<Q;w++)this.h.h=!0,g+=this.h.i.decode(L[w],{stream:!(re&&w==Q-1)});L.length=0,this.h.g+=g,this.C=0,ge=this.h.g}else ge=this.g.oa();if(this.o=A==200,Rn(this.i,this.u,this.A,this.l,this.R,On,A),this.o){if(this.T&&!this.K){t:{if(this.g){var Tt,_n=this.g;if((Tt=_n.g?_n.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(Tt)){var Xe=Tt;break t}}Xe=null}if(A=Xe)vn(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jr(this,A);else{this.o=!1,this.s=3,ft(12),gi(this),Ir(this);break e}}if(this.P){A=!0;let Mi;for(;!this.J&&this.C<ge.length;)if(Mi=Gr(this,ge),Mi==Ni){On==4&&(this.s=4,ft(14),A=!1),vn(this.i,this.l,null,"[Incomplete Response]");break}else if(Mi==pi){this.s=4,ft(15),vn(this.i,this.l,ge,"[Invalid Chunk]"),A=!1;break}else vn(this.i,this.l,Mi,null),jr(this,Mi);if(or(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),On!=4||ge.length!=0||this.h.h||(this.s=1,ft(16),A=!1),this.o=this.o&&A,!A)vn(this.i,this.l,ge,"[Invalid Chunked Response]"),gi(this),Ir(this);else if(0<ge.length&&!this.W){this.W=!0;var Ln=this.j;Ln.g==this&&Ln.ba&&!Ln.M&&(Ln.j.info("Great, no buffering proxy detected. Bytes received: "+ge.length),rc(Ln),Ln.M=!0,ft(11))}}else vn(this.i,this.l,ge,null),jr(this,ge);On==4&&gi(this),this.o&&!this.J&&(On==4?Pf(this.j,this):(this.o=!1,mi(this)))}else xf(this.g),A==400&&0<ge.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),gi(this),Ir(this)}}}catch{}finally{}};function or(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function Gr(g,w){var A=g.C,L=w.indexOf(`
`,A);return L==-1?Ni:(A=Number(w.substring(A,L)),isNaN(A)?pi:(L+=1,L+A>w.length?Ni:(w=w.slice(L,L+A),g.C=L+A,w)))}hi.prototype.cancel=function(){this.J=!0,gi(this)};function mi(g){g.S=Date.now()+g.I,Jt(g,g.I)}function Jt(g,w){if(g.B!=null)throw Error("WatchDog timer not null");g.B=Ot(T(g.ba,g),w)}function Cr(g){g.B&&(c.clearTimeout(g.B),g.B=null)}hi.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(Hi(this.i,this.A),this.L!=2&&(Yt(),ft(17)),gi(this),this.s=2,Ir(this)):Jt(this,this.S-g)};function Ir(g){g.j.G==0||g.J||Pf(g.j,g)}function gi(g){Cr(g);var w=g.M;w&&typeof w.ma=="function"&&w.ma(),g.M=null,Bt(g.U),g.g&&(w=g.g,g.g=null,w.abort(),w.ma())}function jr(g,w){try{var A=g.j;if(A.G!=0&&(A.g==g||Ys(A.h,g))){if(!g.K&&Ys(A.h,g)&&A.G==3){try{var L=A.Da.g.parse(w)}catch{L=null}if(Array.isArray(L)&&L.length==3){var Q=L;if(Q[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<g.F)io(A),no(A);else break e;ic(A),ft(18)}}else A.za=Q[1],0<A.za-A.T&&37500>Q[2]&&A.F&&A.v==0&&!A.C&&(A.C=Ot(T(A.Za,A),6e3));if(1>=_f(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else ps(A,11)}else if((g.K||A.g==g)&&io(A),!k(w))for(Q=A.Da.g.parse(w),w=0;w<Q.length;w++){let Xe=Q[w];if(A.T=Xe[0],Xe=Xe[1],A.G==2)if(Xe[0]=="c"){A.K=Xe[1],A.ia=Xe[2];const Ln=Xe[3];Ln!=null&&(A.la=Ln,A.j.info("VER="+A.la));const On=Xe[4];On!=null&&(A.Aa=On,A.j.info("SVER="+A.Aa));const so=Xe[5];so!=null&&typeof so=="number"&&0<so&&(L=1.5*so,A.L=L,A.j.info("backChannelRequestTimeoutMs_="+L)),L=A;const Mi=g.g;if(Mi){const ya=Mi.g?Mi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ya){var re=L.h;re.g||ya.indexOf("spdy")==-1&&ya.indexOf("quic")==-1&&ya.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(Js(re,re.h),re.h=null))}if(L.D){const ms=Mi.g?Mi.g.getResponseHeader("X-HTTP-Session-Id"):null;ms&&(L.ya=ms,ht(L.I,L.D,ms))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-g.F,A.j.info("Handshake RTT: "+A.R+"ms")),L=A;var ge=g;if(L.qa=Mf(L,L.J?L.ia:null,L.W),ge.K){ar(L.h,ge);var Tt=ge,_n=L.L;_n&&(Tt.I=_n),Tt.B&&(Cr(Tt),mi(Tt)),L.g=ge}else Rf(L);0<A.i.length&&gl(A)}else Xe[0]!="stop"&&Xe[0]!="close"||ps(A,7);else A.G==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?ps(A,7):tc(A):Xe[0]!="noop"&&A.l&&A.l.ta(Xe),A.v=0)}}Yt(4)}catch{}}var Sg=class{constructor(g,w){this.g=g,this.map=w}};function Yu(g){this.l=g||10,c.PerformanceNavigationTiming?(g=c.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ju(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function _f(g){return g.h?1:g.g?g.g.size:0}function Ys(g,w){return g.h?g.h==w:g.g?g.g.has(w):!1}function Js(g,w){g.g?g.g.add(w):g.h=w}function ar(g,w){g.h&&g.h==w?g.h=null:g.g&&g.g.has(w)&&g.g.delete(w)}Yu.prototype.cancel=function(){if(this.i=yi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function yi(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let w=g.i;for(const A of g.g.values())w=w.concat(A.D);return w}return N(g.i)}function Tf(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(d(g)){for(var w=[],A=g.length,L=0;L<A;L++)w.push(g[L]);return w}w=[],A=0;for(L in g)w[A++]=g[L];return w}function bg(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(d(g)||typeof g=="string"){var w=[];g=g.length;for(var A=0;A<g;A++)w.push(A);return w}w=[],A=0;for(const L in g)w[A++]=L;return w}}}function ul(g,w){if(g.forEach&&typeof g.forEach=="function")g.forEach(w,void 0);else if(d(g)||typeof g=="string")Array.prototype.forEach.call(g,w,void 0);else for(var A=bg(g),L=Tf(g),Q=L.length,re=0;re<Q;re++)w.call(void 0,L[re],A&&A[re],g)}var Wu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cl(g,w){if(g){g=g.split("&");for(var A=0;A<g.length;A++){var L=g[A].indexOf("="),Q=null;if(0<=L){var re=g[A].substring(0,L);Q=g[A].substring(L+1)}else re=g[A];w(re,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function ds(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof ds){this.h=g.h,Ws(this,g.j),this.o=g.o,this.g=g.g,ca(this,g.s),this.l=g.l;var w=g.i,A=new $r;A.i=w.i,w.g&&(A.g=new Map(w.g),A.h=w.h),dl(this,A),this.m=g.m}else g&&(w=String(g).match(Wu))?(this.h=!1,Ws(this,w[1]||"",!0),this.o=Qs(w[2]||""),this.g=Qs(w[3]||"",!0),ca(this,w[4]),this.l=Qs(w[5]||"",!0),dl(this,w[6]||"",!0),this.m=Qs(w[7]||"")):(this.h=!1,this.i=new $r(null,this.h))}ds.prototype.toString=function(){var g=[],w=this.j;w&&g.push(lr(w,Qu,!0),":");var A=this.g;return(A||w=="file")&&(g.push("//"),(w=this.o)&&g.push(lr(w,Qu,!0),"@"),g.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&g.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&g.push("/"),g.push(lr(A,A.charAt(0)=="/"?Xu:Ef,!0))),(A=this.i.toString())&&g.push("?",A),(A=this.m)&&g.push("#",lr(A,Ag)),g.join("")};function nn(g){return new ds(g)}function Ws(g,w,A){g.j=A?Qs(w,!0):w,g.j&&(g.j=g.j.replace(/:$/,""))}function ca(g,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);g.s=w}else g.s=null}function dl(g,w,A){w instanceof $r?(g.i=w,Sf(g.i,g.h)):(A||(w=lr(w,xg)),g.i=new $r(w,g.h))}function ht(g,w,A){g.i.set(w,A)}function da(g){return ht(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function Qs(g,w){return g?w?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function lr(g,w,A){return typeof g=="string"?(g=encodeURI(g).replace(w,wg),A&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function wg(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Qu=/[#\/\?@]/g,Ef=/[#\?:]/g,Xu=/[#\?]/g,xg=/[#\?@]/g,Ag=/#/g;function $r(g,w){this.h=this.g=null,this.i=g||null,this.j=!!w}function Vn(g){g.g||(g.g=new Map,g.h=0,g.i&&cl(g.i,function(w,A){g.add(decodeURIComponent(w.replace(/\+/g," ")),A)}))}t=$r.prototype,t.add=function(g,w){Vn(this),this.i=null,g=Gi(this,g);var A=this.g.get(g);return A||this.g.set(g,A=[]),A.push(w),this.h+=1,this};function fl(g,w){Vn(g),w=Gi(g,w),g.g.has(w)&&(g.i=null,g.h-=g.g.get(w).length,g.g.delete(w))}function hl(g,w){return Vn(g),w=Gi(g,w),g.g.has(w)}t.forEach=function(g,w){Vn(this),this.g.forEach(function(A,L){A.forEach(function(Q){g.call(w,Q,L,this)},this)},this)},t.na=function(){Vn(this);const g=Array.from(this.g.values()),w=Array.from(this.g.keys()),A=[];for(let L=0;L<w.length;L++){const Q=g[L];for(let re=0;re<Q.length;re++)A.push(w[L])}return A},t.V=function(g){Vn(this);let w=[];if(typeof g=="string")hl(this,g)&&(w=w.concat(this.g.get(Gi(this,g))));else{g=Array.from(this.g.values());for(let A=0;A<g.length;A++)w=w.concat(g[A])}return w},t.set=function(g,w){return Vn(this),this.i=null,g=Gi(this,g),hl(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[w]),this.h+=1,this},t.get=function(g,w){return g?(g=this.V(g),0<g.length?String(g[0]):w):w};function fs(g,w,A){fl(g,w),0<A.length&&(g.i=null,g.g.set(Gi(g,w),N(A)),g.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],w=Array.from(this.g.keys());for(var A=0;A<w.length;A++){var L=w[A];const re=encodeURIComponent(String(L)),ge=this.V(L);for(L=0;L<ge.length;L++){var Q=re;ge[L]!==""&&(Q+="="+encodeURIComponent(String(ge[L]))),g.push(Q)}}return this.i=g.join("&")};function Gi(g,w){return w=String(w),g.j&&(w=w.toLowerCase()),w}function Sf(g,w){w&&!g.j&&(Vn(g),g.i=null,g.g.forEach(function(A,L){var Q=L.toLowerCase();L!=Q&&(fl(this,L),fs(this,Q,A))},g)),g.j=w}function Zu(g,w){const A=new dn;if(c.Image){const L=new Image;L.onload=b(Di,A,"TestLoadImage: loaded",!0,w,L),L.onerror=b(Di,A,"TestLoadImage: error",!1,w,L),L.onabort=b(Di,A,"TestLoadImage: abort",!1,w,L),L.ontimeout=b(Di,A,"TestLoadImage: timeout",!1,w,L),c.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=g}else w(!1)}function bf(g,w){const A=new dn,L=new AbortController,Q=setTimeout(()=>{L.abort(),Di(A,"TestPingServer: timeout",!1,w)},1e4);fetch(g,{signal:L.signal}).then(re=>{clearTimeout(Q),re.ok?Di(A,"TestPingServer: ok",!0,w):Di(A,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(Q),Di(A,"TestPingServer: error",!1,w)})}function Di(g,w,A,L,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),L(A)}catch{}}function Rr(){this.g=new Te}function ec(g,w,A){const L=A||"";try{ul(g,function(Q,re){let ge=Q;f(Q)&&(ge=le(Q)),w.push(L+re+"="+encodeURIComponent(ge))})}catch(Q){throw w.push(L+"type="+encodeURIComponent("_badmap")),Q}}function Kr(g){this.l=g.Ub||null,this.j=g.eb||!1}C(Kr,ze),Kr.prototype.g=function(){return new ji(this.l,this.j)},Kr.prototype.i=(function(g){return function(){return g}})({});function ji(g,w){ke.call(this),this.D=g,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(ji,ke),t=ji.prototype,t.open=function(g,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=w,this.readyState=1,Xs(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(w.body=g),(this.D||c).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yr(this)),this.readyState=0},t.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Xs(this)),this.g&&(this.readyState=3,Xs(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;pl(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function pl(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}t.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var w=g.value?g.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!g.done}))&&(this.response=this.responseText+=w)}g.done?Yr(this):Xs(this),this.readyState==3&&pl(this)}},t.Ra=function(g){this.g&&(this.response=this.responseText=g,Yr(this))},t.Qa=function(g){this.g&&(this.response=g,Yr(this))},t.ga=function(){this.g&&Yr(this)};function Yr(g){g.readyState=4,g.l=null,g.j=null,g.v=null,Xs(g)}t.setRequestHeader=function(g,w){this.u.append(g,w)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],w=this.h.entries();for(var A=w.next();!A.done;)A=A.value,g.push(A[0]+": "+A[1]),A=w.next();return g.join(`\r
`)};function Xs(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(ji.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function fa(g){let w="";return H(g,function(A,L){w+=L,w+=":",w+=A,w+=`\r
`}),w}function Zs(g,w,A){e:{for(L in A){var L=!1;break e}L=!0}L||(A=fa(A),typeof g=="string"?A!=null&&encodeURIComponent(String(A)):ht(g,w,A))}function qt(g){ke.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(qt,ke);var Zn=/^https?$/i,hs=["POST","PUT"];t=qt.prototype,t.Ha=function(g){this.J=g},t.ea=function(g,w,A,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);w=w?w.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Dt.g(),this.v=this.o?Ve(this.o):Ve(Dt),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(w,String(g),!0),this.B=!1}catch(re){ha(this,re);return}if(g=A||"",A=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var Q in L)A.set(Q,L[Q]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const re of L.keys())A.set(re,L.get(re));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(A.keys()).find(re=>re.toLowerCase()=="content-type"),Q=c.FormData&&g instanceof c.FormData,!(0<=Array.prototype.indexOf.call(hs,w,void 0))||L||Q||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,ge]of A)this.g.setRequestHeader(re,ge);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ml(this),this.u=!0,this.g.send(g),this.u=!1}catch(re){ha(this,re)}};function ha(g,w){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=w,g.m=5,eo(g),to(g)}function eo(g){g.A||(g.A=!0,Lt(g,"complete"),Lt(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,Lt(this,"complete"),Lt(this,"abort"),to(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),to(this,!0)),qt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?wf(this):this.bb())},t.bb=function(){wf(this)};function wf(g){if(g.h&&typeof l<"u"&&(!g.v[1]||vi(g)!=4||g.Z()!=2)){if(g.u&&vi(g)==4)tn(g.Ea,0,g);else if(Lt(g,"readystatechange"),vi(g)==4){g.h=!1;try{const ge=g.Z();e:switch(ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var A;if(!(A=w)){var L;if(L=ge===0){var Q=String(g.D).match(Wu)[1]||null;!Q&&c.self&&c.self.location&&(Q=c.self.location.protocol.slice(0,-1)),L=!Zn.test(Q?Q.toLowerCase():"")}A=L}if(A)Lt(g,"complete"),Lt(g,"success");else{g.m=6;try{var re=2<vi(g)?g.g.statusText:""}catch{re=""}g.l=re+" ["+g.Z()+"]",eo(g)}}finally{to(g)}}}}function to(g,w){if(g.g){ml(g);const A=g.g,L=g.v[0]?()=>{}:null;g.g=null,g.v=null,w||Lt(g,"ready");try{A.onreadystatechange=L}catch{}}}function ml(g){g.I&&(c.clearTimeout(g.I),g.I=null)}t.isActive=function(){return!!this.g};function vi(g){return g.g?g.g.readyState:0}t.Z=function(){try{return 2<vi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(g){if(this.g){var w=this.g.responseText;return g&&w.indexOf(g)==0&&(w=w.substring(g.length)),pe(w)}};function pa(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function xf(g){const w={};g=(g.g&&2<=vi(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<g.length;L++){if(k(g[L]))continue;var A=q(g[L]);const Q=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const re=w[Q]||[];w[Q]=re,re.push(A)}R(w,function(L){return L.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ma(g,w,A){return A&&A.internalChannelParams&&A.internalChannelParams[g]||w}function Af(g){this.Aa=0,this.i=[],this.j=new dn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ma("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ma("baseRetryDelayMs",5e3,g),this.cb=ma("retryDelaySeedMs",1e4,g),this.Wa=ma("forwardChannelMaxRetries",2,g),this.wa=ma("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new Yu(g&&g.concurrentRequestLimit),this.Da=new Rr,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Af.prototype,t.la=8,t.G=1,t.connect=function(g,w,A,L){ft(0),this.W=g,this.H=w||{},A&&L!==void 0&&(this.H.OSID=A,this.H.OAID=L),this.F=this.X,this.I=Mf(this,null,this.W),gl(this)};function tc(g){if(Cf(g),g.G==3){var w=g.U++,A=nn(g.I);if(ht(A,"SID",g.K),ht(A,"RID",w),ht(A,"TYPE","terminate"),ga(g,A),w=new hi(g,g.j,w),w.L=2,w.v=da(nn(A)),A=!1,c.navigator&&c.navigator.sendBeacon)try{A=c.navigator.sendBeacon(w.v.toString(),"")}catch{}!A&&c.Image&&(new Image().src=w.v,A=!0),A||(w.g=kf(w.j,null),w.g.ea(w.v)),w.F=Date.now(),mi(w)}sc(g)}function no(g){g.g&&(rc(g),g.g.cancel(),g.g=null)}function Cf(g){no(g),g.u&&(c.clearTimeout(g.u),g.u=null),io(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&c.clearTimeout(g.s),g.s=null)}function gl(g){if(!Ju(g.h)&&!g.s){g.s=!0;var w=g.Ga;se||Ae(),he||(se(),he=!0),xe.add(w,g),g.B=0}}function Cg(g,w){return _f(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=w.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=Ot(T(g.Ga,g,w),Df(g,g.B)),g.B++,!0)}t.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const Q=new hi(this,this.j,g);let re=this.o;if(this.S&&(re?(re=I(re),U(re,this.S)):re=this.S),this.m!==null||this.O||(Q.H=re,re=null),this.P)e:{for(var w=0,A=0;A<this.i.length;A++){t:{var L=this.i[A];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(w+=L,4096<w){w=A;break e}if(w===4096||A===this.i.length-1){w=A+1;break e}}w=1e3}else w=1e3;w=nc(this,Q,w),A=nn(this.I),ht(A,"RID",g),ht(A,"CVER",22),this.D&&ht(A,"X-HTTP-Session-Id",this.D),ga(this,A),re&&(this.O?w="headers="+encodeURIComponent(String(fa(re)))+"&"+w:this.m&&Zs(A,this.m,re)),Js(this.h,Q),this.Ua&&ht(A,"TYPE","init"),this.P?(ht(A,"$req",w),ht(A,"SID","null"),Q.T=!0,sr(Q,A,null)):sr(Q,A,w),this.G=2}}else this.G==3&&(g?If(this,g):this.i.length==0||Ju(this.h)||If(this))};function If(g,w){var A;w?A=w.l:A=g.U++;const L=nn(g.I);ht(L,"SID",g.K),ht(L,"RID",A),ht(L,"AID",g.T),ga(g,L),g.m&&g.o&&Zs(L,g.m,g.o),A=new hi(g,g.j,A,g.B+1),g.m===null&&(A.H=g.o),w&&(g.i=w.D.concat(g.i)),w=nc(g,A,1e3),A.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),Js(g.h,A),sr(A,L,w)}function ga(g,w){g.H&&H(g.H,function(A,L){ht(w,L,A)}),g.l&&ul({},function(A,L){ht(w,L,A)})}function nc(g,w,A){A=Math.min(g.i.length,A);var L=g.l?T(g.l.Na,g.l,g):null;e:{var Q=g.i;let re=-1;for(;;){const ge=["count="+A];re==-1?0<A?(re=Q[0].g,ge.push("ofs="+re)):re=0:ge.push("ofs="+re);let Tt=!0;for(let _n=0;_n<A;_n++){let Xe=Q[_n].g;const Ln=Q[_n].map;if(Xe-=re,0>Xe)re=Math.max(0,Q[_n].g-100),Tt=!1;else try{ec(Ln,ge,"req"+Xe+"_")}catch{L&&L(Ln)}}if(Tt){L=ge.join("&");break e}}}return g=g.i.splice(0,A),w.D=g,L}function Rf(g){if(!g.g&&!g.u){g.Y=1;var w=g.Fa;se||Ae(),he||(se(),he=!0),xe.add(w,g),g.v=0}}function ic(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=Ot(T(g.Fa,g),Df(g,g.v)),g.v++,!0)}t.Fa=function(){if(this.u=null,Nf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=Ot(T(this.ab,this),g)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),no(this),Nf(this))};function rc(g){g.A!=null&&(c.clearTimeout(g.A),g.A=null)}function Nf(g){g.g=new hi(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var w=nn(g.qa);ht(w,"RID","rpc"),ht(w,"SID",g.K),ht(w,"AID",g.T),ht(w,"CI",g.F?"0":"1"),!g.F&&g.ja&&ht(w,"TO",g.ja),ht(w,"TYPE","xmlhttp"),ga(g,w),g.m&&g.o&&Zs(w,g.m,g.o),g.L&&(g.g.I=g.L);var A=g.g;g=g.ia,A.L=1,A.v=da(nn(w)),A.m=null,A.P=!0,Pi(A,g)}t.Za=function(){this.C!=null&&(this.C=null,no(this),ic(this),ft(19))};function io(g){g.C!=null&&(c.clearTimeout(g.C),g.C=null)}function Pf(g,w){var A=null;if(g.g==w){io(g),rc(g),g.g=null;var L=2}else if(Ys(g.h,w))A=w.D,ar(g.h,w),L=1;else return;if(g.G!=0){if(w.o)if(L==1){A=w.m?w.m.length:0,w=Date.now()-w.F;var Q=g.B;L=cn(),Lt(L,new Hn(L,A)),gl(g)}else Rf(g);else if(Q=w.s,Q==3||Q==0&&0<w.X||!(L==1&&Cg(g,w)||L==2&&ic(g)))switch(A&&0<A.length&&(w=g.h,w.i=w.i.concat(A)),Q){case 1:ps(g,5);break;case 4:ps(g,10);break;case 3:ps(g,6);break;default:ps(g,2)}}}function Df(g,w){let A=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(A*=2),A*w}function ps(g,w){if(g.j.info("Error code "+w),w==2){var A=T(g.fb,g),L=g.Xa;const Q=!L;L=new ds(L||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ws(L,"https"),da(L),Q?Zu(L.toString(),A):bf(L.toString(),A)}else ft(2);g.G=0,g.l&&g.l.sa(w),sc(g),Cf(g)}t.fb=function(g){g?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function sc(g){if(g.G=0,g.ka=[],g.l){const w=yi(g.h);(w.length!=0||g.i.length!=0)&&(D(g.ka,w),D(g.ka,g.i),g.h.i.length=0,N(g.i),g.i.length=0),g.l.ra()}}function Mf(g,w,A){var L=A instanceof ds?nn(A):new ds(A);if(L.g!="")w&&(L.g=w+"."+L.g),ca(L,L.s);else{var Q=c.location;L=Q.protocol,w=w?w+"."+Q.hostname:Q.hostname,Q=+Q.port;var re=new ds(null);L&&Ws(re,L),w&&(re.g=w),Q&&ca(re,Q),A&&(re.l=A),L=re}return A=g.D,w=g.ya,A&&w&&ht(L,A,w),ht(L,"VER",g.la),ga(g,L),L}function kf(g,w,A){if(w&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=g.Ca&&!g.pa?new qt(new Kr({eb:A})):new qt(g.pa),w.Ha(g.J),w}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vf(){}t=Vf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function yl(){}yl.prototype.g=function(g,w){return new _i(g,w)};function _i(g,w){ke.call(this),this.g=new Af(w),this.l=g,this.h=w&&w.messageUrlParams||null,g=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(g?g["X-WebChannel-Content-Type"]=w.messageContentType:g={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(g?g["X-WebChannel-Client-Profile"]=w.va:g={"X-WebChannel-Client-Profile":w.va}),this.g.S=g,(g=w&&w.Sb)&&!k(g)&&(this.g.m=g),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!k(w)&&(this.g.D=w,g=this.h,g!==null&&w in g&&(g=this.h,w in g&&delete g[w])),this.j=new ro(this)}C(_i,ke),_i.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_i.prototype.close=function(){tc(this.g)},_i.prototype.o=function(g){var w=this.g;if(typeof g=="string"){var A={};A.__data__=g,g=A}else this.u&&(A={},A.__data__=le(g),g=A);w.i.push(new Sg(w.Ya++,g)),w.G==3&&gl(w)},_i.prototype.N=function(){this.g.l=null,delete this.j,tc(this.g),delete this.g,_i.aa.N.call(this)};function Lf(g){et.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var w=g.__sm__;if(w){e:{for(const A in w){g=A;break e}g=void 0}(this.i=g)&&(g=this.i,w=w!==null&&g in w?w[g]:void 0),this.data=w}else this.data=g}C(Lf,et);function Of(){tt.call(this),this.status=1}C(Of,tt);function ro(g){this.g=g}C(ro,Vf),ro.prototype.ua=function(){Lt(this.g,"a")},ro.prototype.ta=function(g){Lt(this.g,new Lf(g))},ro.prototype.sa=function(g){Lt(this.g,new Of)},ro.prototype.ra=function(){Lt(this.g,"b")},yl.prototype.createWebChannel=yl.prototype.g,_i.prototype.send=_i.prototype.o,_i.prototype.open=_i.prototype.m,_i.prototype.close=_i.prototype.close,TN=function(){return new yl},_N=function(){return cn()},vN=Me,_0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},be.NO_ERROR=0,be.TIMEOUT=8,be.HTTP_ERROR=6,Ep=be,qe.COMPLETE="complete",yN=qe,Qe.EventType=Ye,Ye.OPEN="a",Ye.CLOSE="b",Ye.ERROR="c",Ye.MESSAGE="d",ke.prototype.listen=ke.prototype.K,ed=Qe,qt.prototype.listenOnce=qt.prototype.L,qt.prototype.getLastError=qt.prototype.Ka,qt.prototype.getLastErrorCode=qt.prototype.Ba,qt.prototype.getStatus=qt.prototype.Z,qt.prototype.getResponseJson=qt.prototype.Oa,qt.prototype.getResponseText=qt.prototype.oa,qt.prototype.send=qt.prototype.ea,qt.prototype.setWithCredentials=qt.prototype.Ha,gN=qt}).apply(typeof zh<"u"?zh:typeof self<"u"?self:typeof window<"u"?window:{});const Ox="@firebase/firestore",Ux="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}si.UNAUTHENTICATED=new si(null),si.GOOGLE_CREDENTIALS=new si("google-credentials-uid"),si.FIRST_PARTY=new si("first-party-uid"),si.MOCK_USER=new si("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vu="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za=new P_("@firebase/firestore");function Ql(){return Za.logLevel}function we(t,...e){if(Za.logLevel<=at.DEBUG){const n=e.map(G_);Za.debug(`Firestore (${Vu}): ${t}`,...n)}}function qs(t,...e){if(Za.logLevel<=at.ERROR){const n=e.map(G_);Za.error(`Firestore (${Vu}): ${t}`,...n)}}function $o(t,...e){if(Za.logLevel<=at.WARN){const n=e.map(G_);Za.warn(`Firestore (${Vu}): ${t}`,...n)}}function G_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,EN(t,i,n)}function EN(t,e,n){let i=`FIRESTORE (${Vu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw qs(i),new Error(i)}function St(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||EN(e,r,i)}function Ke(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends zr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class u3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(si.UNAUTHENTICATED)))}shutdown(){}}class c3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class d3{constructor(e){this.t=e,this.currentUser=si.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){St(this.o===void 0,42304);let i=this.i;const r=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new Ho;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ho,e.enqueueRetryable((()=>r(this.currentUser)))};const l=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await r(this.currentUser)}))},c=d=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>c(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ho)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(St(typeof i.accessToken=="string",31837,{l:i}),new SN(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return St(e===null||typeof e=="string",2055,{h:e}),new si(e)}}class f3{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=si.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class h3{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new f3(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(si.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Fx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class p3{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Si(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){St(this.o===void 0,3512);const i=o=>{o.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,we("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>i(o)))};const r=o=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>r(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Fx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(St(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Fx(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=m3(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%62))}return i}}function Ze(t,e){return t<e?-1:t>e?1:0}function T0(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),r=e.codePointAt(n);if(i!==r){if(i<128&&r<128)return Ze(i,r);{const o=bN(),l=g3(o.encode(Bx(t,n)),o.encode(Bx(e,n)));return l!==0?l:Ze(i,r)}}n+=i>65535?2:1}return Ze(t.length,e.length)}function Bx(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function g3(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Ze(t[n],e[n]);return Ze(t.length,e.length)}function Eu(t,e,n){return t.length===e.length&&t.every(((i,r)=>n(i,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="__name__";class ts{constructor(e,n,i){n===void 0?n=0:n>e.length&&Be(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Be(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ts.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ts?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=ts.compareSegments(e.get(r),n.get(r));if(o!==0)return o}return Ze(e.length,n.length)}static compareSegments(e,n){const i=ts.isNumericId(e),r=ts.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?ts.extractNumericId(e).compare(ts.extractNumericId(n)):T0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zo.fromString(e.substring(4,e.length-2))}}class Ut extends ts{construct(e,n,i){return new Ut(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Se(de.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((r=>r.length>0)))}return new Ut(n)}static emptyPath(){return new Ut([])}}const y3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qn extends ts{construct(e,n,i){return new Qn(e,n,i)}static isValidIdentifier(e){return y3.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qx}static keyField(){return new Qn([qx])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new Se(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;r<e.length;){const c=e[r];if(c==="\\"){if(r+1===e.length)throw new Se(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[r+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Se(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,r+=2}else c==="`"?(l=!l,r++):c!=="."||l?(i+=c,r++):(o(),r++)}if(o(),l)throw new Se(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qn(n)}static emptyPath(){return new Qn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.path=e}static fromPath(e){return new De(Ut.fromString(e))}static fromName(e){return new De(Ut.fromString(e).popFirst(5))}static empty(){return new De(Ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ut.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new De(new Ut(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(t,e,n){if(!n)throw new Se(de.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function v3(t,e,n,i){if(e===!0&&i===!0)throw new Se(de.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function zx(t){if(!De.isDocumentKey(t))throw new Se(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Hx(t){if(De.isDocumentKey(t))throw new Se(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function xN(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Um(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Be(12329,{type:typeof t})}function is(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Se(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Um(t);throw new Se(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(t,e){const n={typeString:t};return e&&(n.value=e),n}function of(t,e){if(!xN(t))throw new Se(de.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const l=t[i];if(r&&typeof l!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&l!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new Se(de.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=-62135596800,jx=1e6;class $t{static now(){return $t.fromMillis(Date.now())}static fromDate(e){return $t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*jx);return new $t(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Se(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Se(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Gx)throw new Se(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jx}_compareTo(e){return this.seconds===e.seconds?Ze(this.nanoseconds,e.nanoseconds):Ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:$t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(of(e,$t._jsonSchema))return new $t(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Gx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}$t._jsonSchemaVersion="firestore/timestamp/1.0",$t._jsonSchema={type:An("string",$t._jsonSchemaVersion),seconds:An("number"),nanoseconds:An("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{static fromTimestamp(e){return new je(e)}static min(){return new je(new $t(0,0))}static max(){return new je(new $t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od=-1;function _3(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=je.fromTimestamp(i===1e9?new $t(n+1,0):new $t(n,i));return new Ko(r,De.empty(),e)}function T3(t){return new Ko(t.readTime,t.key,Od)}class Ko{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ko(je.min(),De.empty(),Od)}static max(){return new Ko(je.max(),De.empty(),Od)}}function E3(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=De.comparator(t.documentKey,e.documentKey),n!==0?n:Ze(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class b3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lu(t){if(t.code!==de.FAILED_PRECONDITION||t.message!==S3)throw t;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new fe(((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof fe?n:fe.resolve(n)}catch(n){return fe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):fe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):fe.reject(n)}static resolve(e){return new fe(((n,i)=>{n(e)}))}static reject(e){return new fe(((n,i)=>{i(e)}))}static waitFor(e){return new fe(((n,i)=>{let r=0,o=0,l=!1;e.forEach((c=>{++r,c.next((()=>{++o,l&&o===r&&n()}),(d=>i(d)))})),l=!0,o===r&&n()}))}static or(e){let n=fe.resolve(!1);for(const i of e)n=n.next((r=>r?fe.resolve(r):i()));return n}static forEach(e,n){const i=[];return e.forEach(((r,o)=>{i.push(n.call(this,r,o))})),this.waitFor(i)}static mapArray(e,n){return new fe(((i,r)=>{const o=e.length,l=new Array(o);let c=0;for(let d=0;d<o;d++){const f=d;n(e[f]).next((p=>{l[f]=p,++c,c===o&&i(l)}),(p=>r(p)))}}))}static doWhile(e,n){return new fe(((i,r)=>{const o=()=>{e()===!0?n().next((()=>{o()}),r):i()};o()}))}}function w3(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ou(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this._e(i),this.ae=i=>n.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Fm.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_=-1;function Bm(t){return t==null}function Kp(t){return t===0&&1/t==-1/0}function x3(t){return typeof t=="number"&&Number.isInteger(t)&&!Kp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN="";function A3(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=$x(e)),e=C3(t.get(n),e);return $x(e)}function C3(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case AN:n+="";break;default:n+=o}}return n}function $x(t){return t+AN+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ra(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function CN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,n){this.comparator=e,this.root=n||Wn.EMPTY}insert(e,n){return new en(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Wn.BLACK,null,null))}remove(e){return new en(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hh(this.root,e,this.comparator,!0)}}class Hh{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wn{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Wn.RED,this.left=r??Wn.EMPTY,this.right=o??Wn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new Wn(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Wn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Wn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Be(27949);return e+(this.isRed()?0:1)}}Wn.EMPTY=null,Wn.RED=!0,Wn.BLACK=!1;Wn.EMPTY=new class{constructor(){this.size=0}get key(){throw Be(57766)}get value(){throw Be(16141)}get color(){throw Be(16727)}get left(){throw Be(29726)}get right(){throw Be(36894)}copy(e,n,i,r,o){return this}insert(e,n,i){return new Wn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.comparator=e,this.data=new en(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Yx(this.data.getIterator())}getIteratorFrom(e){return new Yx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof Dn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Dn(this.comparator);return n.data=e,n}}class Yx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e){this.fields=e,e.sort(Qn.comparator)}static empty(){return new Zi([])}unionWith(e){let n=new Dn(Qn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Zi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Eu(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new IN("Invalid base64 string: "+o):o}})(e);return new Xn(n)}static fromUint8Array(e){const n=(function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o})(e);return new Xn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xn.EMPTY_BYTE_STRING=new Xn("");const I3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yo(t){if(St(!!t,39018),typeof t=="string"){let e=0;const n=I3.exec(t);if(St(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:mn(t.seconds),nanos:mn(t.nanos)}}function mn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Jo(t){return typeof t=="string"?Xn.fromBase64String(t):Xn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN="server_timestamp",NN="__type__",PN="__previous_value__",DN="__local_write_time__";function K_(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[NN])===null||n===void 0?void 0:n.stringValue)===RN}function qm(t){const e=t.mapValue.fields[PN];return K_(e)?qm(e):e}function Ud(t){const e=Yo(t.mapValue.fields[DN].timestampValue);return new $t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e,n,i,r,o,l,c,d,f,p){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=p}}const Yp="(default)";class Fd{constructor(e,n){this.projectId=e,this.database=n||Yp}static empty(){return new Fd("","")}get isDefaultDatabase(){return this.database===Yp}isEqual(e){return e instanceof Fd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN="__type__",N3="__max__",Gh={mapValue:{}},kN="__vector__",Jp="value";function Wo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?K_(t)?4:D3(t)?9007199254740991:P3(t)?10:11:Be(28295,{value:t})}function cs(t,e){if(t===e)return!0;const n=Wo(t);if(n!==Wo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ud(t).isEqual(Ud(e));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=Yo(r.timestampValue),c=Yo(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(r,o){return Jo(r.bytesValue).isEqual(Jo(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(r,o){return mn(r.geoPointValue.latitude)===mn(o.geoPointValue.latitude)&&mn(r.geoPointValue.longitude)===mn(o.geoPointValue.longitude)})(t,e);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return mn(r.integerValue)===mn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=mn(r.doubleValue),c=mn(o.doubleValue);return l===c?Kp(l)===Kp(c):isNaN(l)&&isNaN(c)}return!1})(t,e);case 9:return Eu(t.arrayValue.values||[],e.arrayValue.values||[],cs);case 10:case 11:return(function(r,o){const l=r.mapValue.fields||{},c=o.mapValue.fields||{};if(Kx(l)!==Kx(c))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(c[d]===void 0||!cs(l[d],c[d])))return!1;return!0})(t,e);default:return Be(52216,{left:t})}}function Bd(t,e){return(t.values||[]).find((n=>cs(n,e)))!==void 0}function Su(t,e){if(t===e)return 0;const n=Wo(t),i=Wo(e);if(n!==i)return Ze(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ze(t.booleanValue,e.booleanValue);case 2:return(function(o,l){const c=mn(o.integerValue||o.doubleValue),d=mn(l.integerValue||l.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1})(t,e);case 3:return Jx(t.timestampValue,e.timestampValue);case 4:return Jx(Ud(t),Ud(e));case 5:return T0(t.stringValue,e.stringValue);case 6:return(function(o,l){const c=Jo(o),d=Jo(l);return c.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(o,l){const c=o.split("/"),d=l.split("/");for(let f=0;f<c.length&&f<d.length;f++){const p=Ze(c[f],d[f]);if(p!==0)return p}return Ze(c.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,l){const c=Ze(mn(o.latitude),mn(l.latitude));return c!==0?c:Ze(mn(o.longitude),mn(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Wx(t.arrayValue,e.arrayValue);case 10:return(function(o,l){var c,d,f,p;const v=o.fields||{},T=l.fields||{},b=(c=v[Jp])===null||c===void 0?void 0:c.arrayValue,C=(d=T[Jp])===null||d===void 0?void 0:d.arrayValue,N=Ze(((f=b==null?void 0:b.values)===null||f===void 0?void 0:f.length)||0,((p=C==null?void 0:C.values)===null||p===void 0?void 0:p.length)||0);return N!==0?N:Wx(b,C)})(t.mapValue,e.mapValue);case 11:return(function(o,l){if(o===Gh.mapValue&&l===Gh.mapValue)return 0;if(o===Gh.mapValue)return 1;if(l===Gh.mapValue)return-1;const c=o.fields||{},d=Object.keys(c),f=l.fields||{},p=Object.keys(f);d.sort(),p.sort();for(let v=0;v<d.length&&v<p.length;++v){const T=T0(d[v],p[v]);if(T!==0)return T;const b=Su(c[d[v]],f[p[v]]);if(b!==0)return b}return Ze(d.length,p.length)})(t.mapValue,e.mapValue);default:throw Be(23264,{le:n})}}function Jx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ze(t,e);const n=Yo(t),i=Yo(e),r=Ze(n.seconds,i.seconds);return r!==0?r:Ze(n.nanos,i.nanos)}function Wx(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=Su(n[r],i[r]);if(o)return o}return Ze(n.length,i.length)}function bu(t){return E0(t)}function E0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const i=Yo(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Jo(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return De.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=E0(o);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const l of i)o?o=!1:r+=",",r+=`${l}:${E0(n.fields[l])}`;return r+"}"})(t.mapValue):Be(61005,{value:t})}function Sp(t){switch(Wo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=qm(t);return e?16+Sp(e):16;case 5:return 2*t.stringValue.length;case 6:return Jo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,o)=>r+Sp(o)),0)})(t.arrayValue);case 10:case 11:return(function(i){let r=0;return ra(i.fields,((o,l)=>{r+=o.length+Sp(l)})),r})(t.mapValue);default:throw Be(13486,{value:t})}}function Qx(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function S0(t){return!!t&&"integerValue"in t}function Y_(t){return!!t&&"arrayValue"in t}function Xx(t){return!!t&&"nullValue"in t}function Zx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bp(t){return!!t&&"mapValue"in t}function P3(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[MN])===null||n===void 0?void 0:n.stringValue)===kN}function hd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ra(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=hd(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=hd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function D3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===N3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e){this.value=e}static empty(){return new Bi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!bp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=hd(n)}setAll(e){let n=Qn.emptyPath(),i={},r=[];e.forEach(((l,c)=>{if(!n.isImmediateParentOf(c)){const d=this.getFieldsMap(n);this.applyChanges(d,i,r),i={},r=[],n=c.popLast()}l?i[c.lastSegment()]=hd(l):r.push(c.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());bp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return cs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];bp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){ra(n,((r,o)=>e[r]=o));for(const r of i)delete e[r]}clone(){return new Bi(hd(this.value))}}function VN(t){const e=[];return ra(t.fields,((n,i)=>{const r=new Qn([n]);if(bp(i)){const o=VN(i.mapValue).fields;if(o.length===0)e.push(r);else for(const l of o)e.push(r.child(l))}else e.push(r)})),new Zi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,n,i,r,o,l,c){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new oi(e,0,je.min(),je.min(),je.min(),Bi.empty(),0)}static newFoundDocument(e,n,i,r){return new oi(e,1,n,je.min(),i,r,0)}static newNoDocument(e,n){return new oi(e,2,n,je.min(),je.min(),Bi.empty(),0)}static newUnknownDocument(e,n){return new oi(e,3,n,je.min(),je.min(),Bi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof oi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new oi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,n){this.position=e,this.inclusive=n}}function eA(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],l=t.position[r];if(o.field.isKeyField()?i=De.comparator(De.fromName(l.referenceValue),n.key):i=Su(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function tA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!cs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,n="asc"){this.field=e,this.dir=n}}function M3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{}class xn extends LN{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new V3(e,n,i):n==="array-contains"?new U3(e,i):n==="in"?new F3(e,i):n==="not-in"?new B3(e,i):n==="array-contains-any"?new q3(e,i):new xn(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new L3(e,i):new O3(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Su(n,this.value)):n!==null&&Wo(this.value)===Wo(n)&&this.matchesComparison(Su(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qr extends LN{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new qr(e,n)}matches(e){return ON(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function ON(t){return t.op==="and"}function UN(t){return k3(t)&&ON(t)}function k3(t){for(const e of t.filters)if(e instanceof qr)return!1;return!0}function b0(t){if(t instanceof xn)return t.field.canonicalString()+t.op.toString()+bu(t.value);if(UN(t))return t.filters.map((e=>b0(e))).join(",");{const e=t.filters.map((n=>b0(n))).join(",");return`${t.op}(${e})`}}function FN(t,e){return t instanceof xn?(function(i,r){return r instanceof xn&&i.op===r.op&&i.field.isEqual(r.field)&&cs(i.value,r.value)})(t,e):t instanceof qr?(function(i,r){return r instanceof qr&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((o,l,c)=>o&&FN(l,r.filters[c])),!0):!1})(t,e):void Be(19439)}function BN(t){return t instanceof xn?(function(n){return`${n.field.canonicalString()} ${n.op} ${bu(n.value)}`})(t):t instanceof qr?(function(n){return n.op.toString()+" {"+n.getFilters().map(BN).join(" ,")+"}"})(t):"Filter"}class V3 extends xn{constructor(e,n,i){super(e,n,i),this.key=De.fromName(i.referenceValue)}matches(e){const n=De.comparator(e.key,this.key);return this.matchesComparison(n)}}class L3 extends xn{constructor(e,n){super(e,"in",n),this.keys=qN("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class O3 extends xn{constructor(e,n){super(e,"not-in",n),this.keys=qN("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function qN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((i=>De.fromName(i.referenceValue)))}class U3 extends xn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Y_(n)&&Bd(n.arrayValue,this.value)}}class F3 extends xn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Bd(this.value.arrayValue,n)}}class B3 extends xn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Bd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Bd(this.value.arrayValue,n)}}class q3 extends xn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Y_(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Bd(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e,n=null,i=[],r=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=l,this.endAt=c,this.Pe=null}}function nA(t,e=null,n=[],i=[],r=null,o=null,l=null){return new z3(t,e,n,i,r,o,l)}function J_(t){const e=Ke(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>b0(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),Bm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>bu(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>bu(i))).join(",")),e.Pe=n}return e.Pe}function W_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!M3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!FN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!tA(t.startAt,e.startAt)&&tA(t.endAt,e.endAt)}function w0(t){return De.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,n=null,i=[],r=[],o=null,l="F",c=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=d,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function H3(t,e,n,i,r,o,l,c){return new af(t,e,n,i,r,o,l,c)}function zm(t){return new af(t)}function iA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zN(t){return t.collectionGroup!==null}function pd(t){const e=Ke(t);if(e.Te===null){e.Te=[];const n=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Dn(Qn.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((f=>{f.isInequality()&&(c=c.add(f.field))}))})),c})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Qp(o,i))})),n.has(Qn.keyField().canonicalString())||e.Te.push(new Qp(Qn.keyField(),i))}return e.Te}function rs(t){const e=Ke(t);return e.Ie||(e.Ie=G3(e,pd(t))),e.Ie}function G3(t,e){if(t.limitType==="F")return nA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((r=>{const o=r.dir==="desc"?"asc":"desc";return new Qp(r.field,o)}));const n=t.endAt?new Wp(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Wp(t.startAt.position,t.startAt.inclusive):null;return nA(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function x0(t,e){const n=t.filters.concat([e]);return new af(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function A0(t,e,n){return new af(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hm(t,e){return W_(rs(t),rs(e))&&t.limitType===e.limitType}function HN(t){return`${J_(rs(t))}|lt:${t.limitType}`}function Xl(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((r=>BN(r))).join(", ")}]`),Bm(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((r=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(r))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((r=>bu(r))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((r=>bu(r))).join(",")),`Target(${i})`})(rs(t))}; limitType=${t.limitType})`}function Gm(t,e){return e.isFoundDocument()&&(function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):De.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(t,e)&&(function(i,r){for(const o of pd(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0})(t,e)&&(function(i,r){return!(i.startAt&&!(function(l,c,d){const f=eA(l,c,d);return l.inclusive?f<=0:f<0})(i.startAt,pd(i),r)||i.endAt&&!(function(l,c,d){const f=eA(l,c,d);return l.inclusive?f>=0:f>0})(i.endAt,pd(i),r))})(t,e)}function j3(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function GN(t){return(e,n)=>{let i=!1;for(const r of pd(t)){const o=$3(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function $3(t,e,n){const i=t.field.isKeyField()?De.comparator(e.key,n.key):(function(o,l,c){const d=l.data.field(o),f=c.data.field(o);return d!==null&&f!==null?Su(d,f):Be(42886)})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Be(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ra(this.inner,((n,i)=>{for(const[r,o]of i)e(r,o)}))}isEmpty(){return CN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K3=new en(De.comparator);function zs(){return K3}const jN=new en(De.comparator);function td(...t){let e=jN;for(const n of t)e=e.insert(n.key,n);return e}function $N(t){let e=jN;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function za(){return md()}function KN(){return md()}function md(){return new sl((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Y3=new en(De.comparator),J3=new Dn(De.comparator);function lt(...t){let e=J3;for(const n of t)e=e.add(n);return e}const W3=new Dn(Ze);function Q3(){return W3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kp(e)?"-0":e}}function YN(t){return{integerValue:""+t}}function X3(t,e){return x3(e)?YN(e):Q_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(){this._=void 0}}function Z3(t,e,n){return t instanceof Xp?(function(r,o){const l={fields:{[NN]:{stringValue:RN},[DN]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&K_(o)&&(o=qm(o)),o&&(l.fields[PN]=o),{mapValue:l}})(n,e):t instanceof qd?WN(t,e):t instanceof zd?QN(t,e):(function(r,o){const l=JN(r,o),c=rA(l)+rA(r.Ee);return S0(l)&&S0(r.Ee)?YN(c):Q_(r.serializer,c)})(t,e)}function e6(t,e,n){return t instanceof qd?WN(t,e):t instanceof zd?QN(t,e):n}function JN(t,e){return t instanceof Zp?(function(i){return S0(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}class Xp extends jm{}class qd extends jm{constructor(e){super(),this.elements=e}}function WN(t,e){const n=XN(e);for(const i of t.elements)n.some((r=>cs(r,i)))||n.push(i);return{arrayValue:{values:n}}}class zd extends jm{constructor(e){super(),this.elements=e}}function QN(t,e){let n=XN(e);for(const i of t.elements)n=n.filter((r=>!cs(r,i)));return{arrayValue:{values:n}}}class Zp extends jm{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function rA(t){return mn(t.integerValue||t.doubleValue)}function XN(t){return Y_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function t6(t,e){return t.field.isEqual(e.field)&&(function(i,r){return i instanceof qd&&r instanceof qd||i instanceof zd&&r instanceof zd?Eu(i.elements,r.elements,cs):i instanceof Zp&&r instanceof Zp?cs(i.Ee,r.Ee):i instanceof Xp&&r instanceof Xp})(t.transform,e.transform)}class n6{constructor(e,n){this.version=e,this.transformResults=n}}class Br{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Br}static exists(e){return new Br(void 0,e)}static updateTime(e){return new Br(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class $m{}function ZN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new X_(t.key,Br.none()):new lf(t.key,t.data,Br.none());{const n=t.data,i=Bi.empty();let r=new Dn(Qn.comparator);for(let o of e.fields)if(!r.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),r=r.add(o)}return new sa(t.key,i,new Zi(r.toArray()),Br.none())}}function i6(t,e,n){t instanceof lf?(function(r,o,l){const c=r.value.clone(),d=oA(r.fieldTransforms,o,l.transformResults);c.setAll(d),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(t,e,n):t instanceof sa?(function(r,o,l){if(!wp(r.precondition,o))return void o.convertToUnknownDocument(l.version);const c=oA(r.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(eP(r)),d.setAll(c),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(t,e,n):(function(r,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function gd(t,e,n,i){return t instanceof lf?(function(o,l,c,d){if(!wp(o.precondition,l))return c;const f=o.value.clone(),p=aA(o.fieldTransforms,d,l);return f.setAll(p),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null})(t,e,n,i):t instanceof sa?(function(o,l,c,d){if(!wp(o.precondition,l))return c;const f=aA(o.fieldTransforms,d,l),p=l.data;return p.setAll(eP(o)),p.setAll(f),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((v=>v.field)))})(t,e,n,i):(function(o,l,c){return wp(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(t,e,n)}function r6(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=JN(i.transform,r||null);o!=null&&(n===null&&(n=Bi.empty()),n.set(i.field,o))}return n||null}function sA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Eu(i,r,((o,l)=>t6(o,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class lf extends $m{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class sa extends $m{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function eP(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function oA(t,e,n){const i=new Map;St(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let r=0;r<n.length;r++){const o=t[r],l=o.transform,c=e.data.field(o.field);i.set(o.field,e6(l,c,n[r]))}return i}function aA(t,e,n){const i=new Map;for(const r of t){const o=r.transform,l=n.data.field(r.field);i.set(r.field,Z3(o,l,e))}return i}class X_ extends $m{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class s6 extends $m{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&i6(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=gd(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=gd(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=KN();return this.mutations.forEach((r=>{const o=e.get(r.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=n.has(r.key)?null:c;const d=ZN(l,c);d!==null&&i.set(r.key,d),l.isValidDocument()||l.convertToNoDocument(je.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),lt())}isEqual(e){return this.batchId===e.batchId&&Eu(this.mutations,e.mutations,((n,i)=>sA(n,i)))&&Eu(this.baseMutations,e.baseMutations,((n,i)=>sA(n,i)))}}class Z_{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){St(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let r=(function(){return Y3})();const o=e.mutations;for(let l=0;l<o.length;l++)r=r.insert(o[l].key,i[l].version);return new Z_(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wn,dt;function u6(t){switch(t){case de.OK:return Be(64938);case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0;default:return Be(15467,{code:t})}}function tP(t){if(t===void 0)return qs("GRPC error has no .code"),de.UNKNOWN;switch(t){case wn.OK:return de.OK;case wn.CANCELLED:return de.CANCELLED;case wn.UNKNOWN:return de.UNKNOWN;case wn.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case wn.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case wn.INTERNAL:return de.INTERNAL;case wn.UNAVAILABLE:return de.UNAVAILABLE;case wn.UNAUTHENTICATED:return de.UNAUTHENTICATED;case wn.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case wn.NOT_FOUND:return de.NOT_FOUND;case wn.ALREADY_EXISTS:return de.ALREADY_EXISTS;case wn.PERMISSION_DENIED:return de.PERMISSION_DENIED;case wn.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case wn.ABORTED:return de.ABORTED;case wn.OUT_OF_RANGE:return de.OUT_OF_RANGE;case wn.UNIMPLEMENTED:return de.UNIMPLEMENTED;case wn.DATA_LOSS:return de.DATA_LOSS;default:return Be(39323,{code:t})}}(dt=wn||(wn={}))[dt.OK=0]="OK",dt[dt.CANCELLED=1]="CANCELLED",dt[dt.UNKNOWN=2]="UNKNOWN",dt[dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dt[dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dt[dt.NOT_FOUND=5]="NOT_FOUND",dt[dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",dt[dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",dt[dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",dt[dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dt[dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dt[dt.ABORTED=10]="ABORTED",dt[dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",dt[dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",dt[dt.INTERNAL=13]="INTERNAL",dt[dt.UNAVAILABLE=14]="UNAVAILABLE",dt[dt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6=new zo([4294967295,4294967295],0);function lA(t){const e=bN().encode(t),n=new mN;return n.update(e),new Uint8Array(n.digest())}function uA(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new zo([n,i],0),new zo([r,o],0)]}class eT{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new nd(`Invalid padding: ${n}`);if(i<0)throw new nd(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new nd(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new nd(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=zo.fromNumber(this.fe)}pe(e,n,i){let r=e.add(n.multiply(zo.fromNumber(i)));return r.compare(c6)===1&&(r=new zo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=lA(e),[i,r]=uA(n);for(let o=0;o<this.hashCount;o++){const l=this.pe(i,r,o);if(!this.ye(l))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new eT(o,r,n);return i.forEach((c=>l.insert(c))),l}insert(e){if(this.fe===0)return;const n=lA(e),[i,r]=uA(n);for(let o=0;o<this.hashCount;o++){const l=this.pe(i,r,o);this.we(l)}}we(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class nd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,uf.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Km(je.min(),r,new en(Ze),zs(),lt())}}class uf{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new uf(i,n,lt(),lt(),lt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,n,i,r){this.Se=e,this.removedTargetIds=n,this.key=i,this.be=r}}class nP{constructor(e,n){this.targetId=e,this.De=n}}class iP{constructor(e,n,i=Xn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class cA{constructor(){this.ve=0,this.Ce=dA(),this.Fe=Xn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=lt(),n=lt(),i=lt();return this.Ce.forEach(((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Be(38017,{changeType:o})}})),new uf(this.Fe,this.Me,e,n,i)}ke(){this.xe=!1,this.Ce=dA()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,St(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class d6{constructor(e){this.We=e,this.Ge=new Map,this.ze=zs(),this.je=jh(),this.Je=jh(),this.He=new en(Ze)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,(n=>{const i=this.tt(n);switch(e.state){case 0:this.nt(n)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),i.Be(e.resumeToken));break;default:Be(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach(((i,r)=>{this.nt(r)&&n(r)}))}it(e){const n=e.targetId,i=e.De.count,r=this.st(n);if(r){const o=r.target;if(w0(o))if(i===0){const l=new De(o.path);this.Xe(n,l,oi.newNoDocument(l,je.min()))}else St(i===1,20013,{expectedCount:i});else{const l=this.ot(n);if(l!==i){const c=this._t(e),d=c?this.ut(c,e,l):1;if(d!==0){this.rt(n);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,f)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let l,c;try{l=Jo(i).toUint8Array()}catch(d){if(d instanceof IN)return $o("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new eT(l,r,o)}catch(d){return $o(d instanceof nd?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.fe===0?null:c}ut(e,n,i){return n.De.count===i-this.ht(e,n.targetId)?0:2}ht(e,n){const i=this.We.getRemoteKeysForTarget(n);let r=0;return i.forEach((o=>{const l=this.We.lt(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Xe(n,o,null),r++)})),r}Pt(e){const n=new Map;this.Ge.forEach(((o,l)=>{const c=this.st(l);if(c){if(o.current&&w0(c.target)){const d=new De(c.target.path);this.Tt(d).has(l)||this.It(l,d)||this.Xe(l,d,oi.newNoDocument(d,e))}o.Ne&&(n.set(l,o.Le()),o.ke())}}));let i=lt();this.Je.forEach(((o,l)=>{let c=!0;l.forEachWhile((d=>{const f=this.st(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(i=i.add(o))})),this.ze.forEach(((o,l)=>l.setReadTime(e)));const r=new Km(e,n,this.He,this.ze,i);return this.ze=zs(),this.je=jh(),this.Je=jh(),this.He=new en(Ze),r}Ze(e,n){if(!this.nt(e))return;const i=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,i),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,i){if(!this.nt(e))return;const r=this.tt(e);this.It(e,n)?r.qe(n,1):r.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),i&&(this.ze=this.ze.insert(n,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new cA,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Dn(Ze),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Dn(Ze),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||we("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new cA),this.We.getRemoteKeysForTarget(e).forEach((n=>{this.Xe(e,n,null)}))}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function jh(){return new en(De.comparator)}function dA(){return new en(De.comparator)}const f6={asc:"ASCENDING",desc:"DESCENDING"},h6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},p6={and:"AND",or:"OR"};class m6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function C0(t,e){return t.useProto3Json||Bm(e)?e:{value:e}}function em(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function g6(t,e){return em(t,e.toTimestamp())}function ss(t){return St(!!t,49232),je.fromTimestamp((function(n){const i=Yo(n);return new $t(i.seconds,i.nanos)})(t))}function tT(t,e){return I0(t,e).canonicalString()}function I0(t,e){const n=(function(r){return new Ut(["projects",r.projectId,"databases",r.database])})(t).child("documents");return e===void 0?n:n.child(e)}function sP(t){const e=Ut.fromString(t);return St(cP(e),10190,{key:e.toString()}),e}function R0(t,e){return tT(t.databaseId,e.path)}function Vv(t,e){const n=sP(e);if(n.get(1)!==t.databaseId.projectId)throw new Se(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Se(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new De(aP(n))}function oP(t,e){return tT(t.databaseId,e)}function y6(t){const e=sP(t);return e.length===4?Ut.emptyPath():aP(e)}function N0(t){return new Ut(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function aP(t){return St(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function fA(t,e,n){return{name:R0(t,e),fields:n.value.mapValue.fields}}function v6(t,e){let n;if("targetChange"in e){e.targetChange;const i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Be(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=(function(f,p){return f.useProto3Json?(St(p===void 0||typeof p=="string",58123),Xn.fromBase64String(p||"")):(St(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Xn.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(f){const p=f.code===void 0?de.UNKNOWN:tP(f.code);return new Se(p,f.message||"")})(l);n=new iP(i,r,o,c||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Vv(t,i.document.name),o=ss(i.document.updateTime),l=i.document.createTime?ss(i.document.createTime):je.min(),c=new Bi({mapValue:{fields:i.document.fields}}),d=oi.newFoundDocument(r,o,l,c),f=i.targetIds||[],p=i.removedTargetIds||[];n=new xp(f,p,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Vv(t,i.document),o=i.readTime?ss(i.readTime):je.min(),l=oi.newNoDocument(r,o),c=i.removedTargetIds||[];n=new xp([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Vv(t,i.document),o=i.removedTargetIds||[];n=new xp([],o,r,null)}else{if(!("filter"in e))return Be(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,l=new l6(r,o),c=i.targetId;n=new nP(c,l)}}return n}function _6(t,e){let n;if(e instanceof lf)n={update:fA(t,e.key,e.value)};else if(e instanceof X_)n={delete:R0(t,e.key)};else if(e instanceof sa)n={update:fA(t,e.key,e.data),updateMask:I6(e.fieldMask)};else{if(!(e instanceof s6))return Be(16599,{Rt:e.type});n={verify:R0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(o,l){const c=l.transform;if(c instanceof Xp)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof qd)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof zd)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Zp)return{fieldPath:l.field.canonicalString(),increment:c.Ee};throw Be(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(r,o){return o.updateTime!==void 0?{updateTime:g6(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Be(27497)})(t,e.precondition)),n}function T6(t,e){return t&&t.length>0?(St(e!==void 0,14353),t.map((n=>(function(r,o){let l=r.updateTime?ss(r.updateTime):ss(o);return l.isEqual(je.min())&&(l=ss(o)),new n6(l,r.transformResults||[])})(n,e)))):[]}function E6(t,e){return{documents:[oP(t,e.path)]}}function S6(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=oP(t,r);const o=(function(f){if(f.length!==0)return uP(qr.create(f,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const l=(function(f){if(f.length!==0)return f.map((p=>(function(T){return{field:Zl(T.field),direction:x6(T.dir)}})(p)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const c=C0(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{Vt:n,parent:r}}function b6(t){let e=y6(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){St(i===1,65062);const p=n.from[0];p.allDescendants?r=p.collectionId:e=e.child(p.collectionId)}let o=[];n.where&&(o=(function(v){const T=lP(v);return T instanceof qr&&UN(T)?T.getFilters():[T]})(n.where));let l=[];n.orderBy&&(l=(function(v){return v.map((T=>(function(C){return new Qp(eu(C.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(T)))})(n.orderBy));let c=null;n.limit&&(c=(function(v){let T;return T=typeof v=="object"?v.value:v,Bm(T)?null:T})(n.limit));let d=null;n.startAt&&(d=(function(v){const T=!!v.before,b=v.values||[];return new Wp(b,T)})(n.startAt));let f=null;return n.endAt&&(f=(function(v){const T=!v.before,b=v.values||[];return new Wp(b,T)})(n.endAt)),H3(e,r,l,o,c,"F",d,f)}function w6(t,e){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Be(28987,{purpose:r})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function lP(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=eu(n.unaryFilter.field);return xn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=eu(n.unaryFilter.field);return xn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=eu(n.unaryFilter.field);return xn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=eu(n.unaryFilter.field);return xn.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Be(61313);default:return Be(60726)}})(t):t.fieldFilter!==void 0?(function(n){return xn.create(eu(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Be(58110);default:return Be(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return qr.create(n.compositeFilter.filters.map((i=>lP(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Be(1026)}})(n.compositeFilter.op))})(t):Be(30097,{filter:t})}function x6(t){return f6[t]}function A6(t){return h6[t]}function C6(t){return p6[t]}function Zl(t){return{fieldPath:t.canonicalString()}}function eu(t){return Qn.fromServerFormat(t.fieldPath)}function uP(t){return t instanceof xn?(function(n){if(n.op==="=="){if(Zx(n.value))return{unaryFilter:{field:Zl(n.field),op:"IS_NAN"}};if(Xx(n.value))return{unaryFilter:{field:Zl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Zx(n.value))return{unaryFilter:{field:Zl(n.field),op:"IS_NOT_NAN"}};if(Xx(n.value))return{unaryFilter:{field:Zl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zl(n.field),op:A6(n.op),value:n.value}}})(t):t instanceof qr?(function(n){const i=n.getFilters().map((r=>uP(r)));return i.length===1?i[0]:{compositeFilter:{op:C6(n.op),filters:i}}})(t):Be(54877,{filter:t})}function I6(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function cP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e,n,i,r,o=je.min(),l=je.min(),c=Xn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new Uo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Uo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Uo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Uo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e){this.gt=e}}function N6(t){const e=b6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?A0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(){this.Dn=new D6}addToCollectionParentIndex(e,n){return this.Dn.add(n),fe.resolve()}getCollectionParents(e,n){return fe.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return fe.resolve()}deleteFieldIndex(e,n){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,n){return fe.resolve()}getDocumentsMatchingTarget(e,n){return fe.resolve(null)}getIndexType(e,n){return fe.resolve(0)}getFieldIndexes(e,n){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,n){return fe.resolve(Ko.min())}getMinOffsetFromCollectionGroup(e,n){return fe.resolve(Ko.min())}updateCollectionGroup(e,n,i){return fe.resolve()}updateIndexEntries(e,n){return fe.resolve()}}class D6{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Dn(Ut.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Dn(Ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dP=41943040;class Fi{static withCacheSize(e){return new Fi(e,Fi.DEFAULT_COLLECTION_PERCENTILE,Fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fi.DEFAULT_COLLECTION_PERCENTILE=10,Fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fi.DEFAULT=new Fi(dP,Fi.DEFAULT_COLLECTION_PERCENTILE,Fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fi.DISABLED=new Fi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new wu(0)}static ur(){return new wu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="LruGarbageCollector",M6=1048576;function mA([t,e],[n,i]){const r=Ze(t,n);return r===0?Ze(e,i):r}class k6{constructor(e){this.Tr=e,this.buffer=new Dn(mA),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();mA(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class V6{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){we(pA,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ou(n)?we(pA,"Ignoring IndexedDB error during garbage collection: ",n):await Lu(n)}await this.Rr(3e5)}))}}class L6{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return fe.resolve(Fm.ue);const i=new k6(n);return this.Vr.forEachTarget(e,(r=>i.Er(r.sequenceNumber))).next((()=>this.Vr.gr(e,(r=>i.Er(r))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(hA)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hA):this.pr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let i,r,o,l,c,d,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),r=this.params.maximumSequenceNumbersToCollect):r=v,l=Date.now(),this.nthSequenceNumber(e,r)))).next((v=>(i=v,c=Date.now(),this.removeTargets(e,i,n)))).next((v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(e,i)))).next((v=>(f=Date.now(),Ql()<=at.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-p}ms
	Determined least recently used ${r} in `+(c-l)+`ms
	Removed ${o} targets in `+(d-c)+`ms
	Removed ${v} documents in `+(f-d)+`ms
Total Duration: ${f-p}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:v}))))}}function O6(t,e){return new L6(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(){this.changes=new sl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,oi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?fe.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,n)))).next((r=>(i!==null&&gd(i.mutation,r,Zi.empty(),$t.now()),r)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,lt()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=lt()){const r=za();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,i).next((o=>{let l=td();return o.forEach(((c,d)=>{l=l.insert(c,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const i=za();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,lt())))}populateOverlays(e,n,i){const r=[];return i.forEach((o=>{n.has(o)||r.push(o)})),this.documentOverlayCache.getOverlays(e,r).next((o=>{o.forEach(((l,c)=>{n.set(l,c)}))}))}computeViews(e,n,i,r){let o=zs();const l=md(),c=(function(){return md()})();return n.forEach(((d,f)=>{const p=i.get(f.key);r.has(f.key)&&(p===void 0||p.mutation instanceof sa)?o=o.insert(f.key,f):p!==void 0?(l.set(f.key,p.mutation.getFieldMask()),gd(p.mutation,f,p.mutation.getFieldMask(),$t.now())):l.set(f.key,Zi.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((f,p)=>l.set(f,p))),n.forEach(((f,p)=>{var v;return c.set(f,new F6(p,(v=l.get(f))!==null&&v!==void 0?v:null))})),c)))}recalculateAndSaveOverlays(e,n){const i=md();let r=new en(((l,c)=>l-c)),o=lt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const c of l)c.keys().forEach((d=>{const f=n.get(d);if(f===null)return;let p=i.get(d)||Zi.empty();p=c.applyToLocalView(f,p),i.set(d,p);const v=(r.get(c.batchId)||lt()).add(d);r=r.insert(c.batchId,v)}))})).next((()=>{const l=[],c=r.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),f=d.key,p=d.value,v=KN();p.forEach((T=>{if(!o.has(T)){const b=ZN(n.get(T),i.get(T));b!==null&&v.set(T,b),o=o.add(T)}})),l.push(this.documentOverlayCache.saveOverlays(e,f,v))}return fe.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,r){return(function(l){return De.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):zN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next((o=>{const l=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):fe.resolve(za());let c=Od,d=o;return l.next((f=>fe.forEach(f,((p,v)=>(c<v.largestBatchId&&(c=v.largestBatchId),o.get(p)?fe.resolve():this.remoteDocumentCache.getEntry(e,p).next((T=>{d=d.insert(p,T)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,d,f,lt()))).next((p=>({batchId:c,changes:$N(p)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new De(n)).next((i=>{let r=td();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let l=td();return this.indexManager.getCollectionParents(e,o).next((c=>fe.forEach(c,(d=>{const f=(function(v,T){return new af(T,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next((p=>{p.forEach(((v,T)=>{l=l.insert(v,T)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r)))).next((l=>{o.forEach(((d,f)=>{const p=f.getKey();l.get(p)===null&&(l=l.insert(p,oi.newInvalidDocument(p)))}));let c=td();return l.forEach(((d,f)=>{const p=o.get(d);p!==void 0&&gd(p.mutation,f,Zi.empty(),$t.now()),Gm(n,f)&&(c=c.insert(d,f))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return fe.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:ss(r.createTime)}})(n)),fe.resolve()}getNamedQuery(e,n){return fe.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(r){return{name:r.name,query:N6(r.bundledQuery),readTime:ss(r.readTime)}})(n)),fe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(){this.overlays=new en(De.comparator),this.kr=new Map}getOverlay(e,n){return fe.resolve(this.overlays.get(n))}getOverlays(e,n){const i=za();return fe.forEach(n,(r=>this.getOverlay(e,r).next((o=>{o!==null&&i.set(r,o)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((r,o)=>{this.wt(e,n,o)})),fe.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.kr.get(i);return r!==void 0&&(r.forEach((o=>this.overlays=this.overlays.remove(o))),this.kr.delete(i)),fe.resolve()}getOverlaysForCollection(e,n,i){const r=za(),o=n.length+1,l=new De(n.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const d=c.getNext().value,f=d.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>i&&r.set(d.getKey(),d)}return fe.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new en(((f,p)=>f-p));const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let p=o.get(f.largestBatchId);p===null&&(p=za(),o=o.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const c=za(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((f,p)=>c.set(f,p))),!(c.size()>=r)););return fe.resolve(c)}wt(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.kr.get(r.largestBatchId).delete(i.key);this.kr.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new a6(n,i));let o=this.kr.get(n);o===void 0&&(o=lt(),this.kr.set(n,o)),this.kr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(){this.sessionToken=Xn.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,fe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(){this.qr=new Dn(Bn.Qr),this.$r=new Dn(Bn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const i=new Bn(e,n);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new Bn(e,n))}Gr(e,n){e.forEach((i=>this.removeReference(i,n)))}zr(e){const n=new De(new Ut([])),i=new Bn(n,e),r=new Bn(n,e+1),o=[];return this.$r.forEachInRange([i,r],(l=>{this.Wr(l),o.push(l.key)})),o}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new De(new Ut([])),i=new Bn(n,e),r=new Bn(n,e+1);let o=lt();return this.$r.forEachInRange([i,r],(l=>{o=o.add(l.key)})),o}containsKey(e){const n=new Bn(e,0),i=this.qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Bn{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return De.comparator(e.key,n.key)||Ze(e.Hr,n.Hr)}static Ur(e,n){return Ze(e.Hr,n.Hr)||De.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Dn(Bn.Qr)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new o6(o,n,i,r);this.mutationQueue.push(l);for(const c of r)this.Yr=this.Yr.add(new Bn(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return fe.resolve(l)}lookupMutationBatch(e,n){return fe.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.Xr(i),o=r<0?0:r;return fe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?$_:this.er-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Bn(n,0),r=new Bn(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([i,r],(l=>{const c=this.Zr(l.Hr);o.push(c)})),fe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Dn(Ze);return n.forEach((r=>{const o=new Bn(r,0),l=new Bn(r,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,l],(c=>{i=i.add(c.Hr)}))})),fe.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;De.isDocumentKey(o)||(o=o.child(""));const l=new Bn(new De(o),0);let c=new Dn(Ze);return this.Yr.forEachWhile((d=>{const f=d.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(c=c.add(d.Hr)),!0)}),l),fe.resolve(this.ei(c))}ei(e){const n=[];return e.forEach((i=>{const r=this.Zr(i);r!==null&&n.push(r)})),n}removeMutationBatch(e,n){St(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return fe.forEach(n.mutations,(r=>{const o=new Bn(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,n){const i=new Bn(n,0),r=this.Yr.firstAfterOrEqual(i);return fe.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e){this.ni=e,this.docs=(function(){return new en(De.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,l=this.ni(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return fe.resolve(i?i.document.mutableCopy():oi.newInvalidDocument(n))}getEntries(e,n){let i=zs();return n.forEach((r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():oi.newInvalidDocument(r))})),fe.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=zs();const l=n.path,c=new De(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:f,value:{document:p}}=d.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||E3(T3(p),i)<=0||(r.has(p.key)||Gm(n,p))&&(o=o.insert(p.key,p.mutableCopy()))}return fe.resolve(o)}getAllFromCollectionGroup(e,n,i,r){Be(9500)}ri(e,n){return fe.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new $6(this)}getSize(e){return fe.resolve(this.size)}}class $6 extends U6{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?n.push(this.Or.addEntry(e,r)):this.Or.removeEntry(i)})),fe.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(e){this.persistence=e,this.ii=new sl((n=>J_(n)),W_),this.lastRemoteSnapshotVersion=je.min(),this.highestTargetId=0,this.si=0,this.oi=new nT,this.targetCount=0,this._i=wu.ar()}forEachTarget(e,n){return this.ii.forEach(((i,r)=>n(r))),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.si&&(this.si=n),fe.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new wu(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,fe.resolve()}updateTargetData(e,n){return this.hr(n),fe.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.ii.forEach(((l,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.ii.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)})),fe.waitFor(o).next((()=>r))}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,n){const i=this.ii.get(n)||null;return fe.resolve(i)}addMatchingKeys(e,n,i){return this.oi.Kr(n,i),fe.resolve()}removeMatchingKeys(e,n,i){this.oi.Gr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach((l=>{o.push(r.markPotentiallyOrphaned(e,l))})),fe.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),fe.resolve()}getMatchingKeysForTargetId(e,n){const i=this.oi.Jr(n);return fe.resolve(i)}containsKey(e,n){return fe.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e,n){this.ai={},this.overlays={},this.ui=new Fm(0),this.ci=!1,this.ci=!0,this.li=new H6,this.referenceDelegate=e(this),this.hi=new K6(this),this.indexManager=new P6,this.remoteDocumentCache=(function(r){return new j6(r)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new R6(n),this.Ti=new q6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new z6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ai[e.toKey()];return i||(i=new G6(n,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,i){we("MemoryPersistence","Starting transaction:",e);const r=new Y6(this.ui.next());return this.referenceDelegate.Ii(),i(r).next((o=>this.referenceDelegate.di(r).next((()=>o)))).toPromise().then((o=>(r.raiseOnCommittedEvent(),o)))}Ei(e,n){return fe.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,n))))}}class Y6 extends b3{constructor(e){super(),this.currentSequenceNumber=e}}class iT{constructor(e){this.persistence=e,this.Ai=new nT,this.Ri=null}static Vi(e){return new iT(e)}get mi(){if(this.Ri)return this.Ri;throw Be(60996)}addReference(e,n,i){return this.Ai.addReference(i,n),this.mi.delete(i.toString()),fe.resolve()}removeReference(e,n,i){return this.Ai.removeReference(i,n),this.mi.add(i.toString()),fe.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),fe.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach((r=>this.mi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((r=>{r.forEach((o=>this.mi.add(o.toString())))})).next((()=>i.removeTargetData(e,n)))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.mi,(i=>{const r=De.fromPath(i);return this.fi(e,r).next((o=>{o||n.removeEntry(r,je.min())}))})).next((()=>(this.Ri=null,n.apply(e))))}updateLimboDocument(e,n){return this.fi(e,n).next((i=>{i?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(e){return 0}fi(e,n){return fe.or([()=>fe.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class tm{constructor(e,n){this.persistence=e,this.gi=new sl((i=>A3(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=O6(this,n)}static Vi(e,n){return new tm(e,n)}Ii(){}di(e){return fe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((r=>i+r))))}yr(e){let n=0;return this.gr(e,(i=>{n++})).next((()=>n))}gr(e,n){return fe.forEach(this.gi,((i,r)=>this.Sr(e,i,r).next((o=>o?fe.resolve():n(r)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ri(e,(l=>this.Sr(e,l,n).next((c=>{c||(i++,o.removeEntry(l,je.min()))})))).next((()=>o.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),fe.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),fe.resolve()}removeReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),fe.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Sp(e.data.value)),n}Sr(e,n,i){return fe.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.gi.get(n);return fe.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Is=i,this.ds=r}static Es(e,n){let i=lt(),r=lt();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new rT(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return IL()?8:w3(ui())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.ps(e,n).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ys(e,n,r,i).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new J6;return this.ws(e,n,l).next((c=>{if(o.result=c,this.Rs)return this.Ss(e,n,l,c.size)}))})).next((()=>o.result))}Ss(e,n,i,r){return i.documentReadCount<this.Vs?(Ql()<=at.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",Xl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),fe.resolve()):(Ql()<=at.DEBUG&&we("QueryEngine","Query:",Xl(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.fs*r?(Ql()<=at.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",Xl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rs(n))):fe.resolve())}ps(e,n){if(iA(n))return fe.resolve(null);let i=rs(n);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=A0(n,null,"F"),i=rs(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((o=>{const l=lt(...o);return this.gs.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,i).next((d=>{const f=this.bs(n,c);return this.Ds(n,f,l,d.readTime)?this.ps(e,A0(n,null,"F")):this.vs(e,f,n,d)}))))})))))}ys(e,n,i,r){return iA(n)||r.isEqual(je.min())?fe.resolve(null):this.gs.getDocuments(e,i).next((o=>{const l=this.bs(n,o);return this.Ds(n,l,i,r)?fe.resolve(null):(Ql()<=at.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Xl(n)),this.vs(e,l,n,_3(r,Od)).next((c=>c)))}))}bs(e,n){let i=new Dn(GN(e));return n.forEach(((r,o)=>{Gm(e,o)&&(i=i.add(o))})),i}Ds(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}ws(e,n,i){return Ql()<=at.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",Xl(n)),this.gs.getDocumentsMatchingQuery(e,n,Ko.min(),i)}vs(e,n,i,r){return this.gs.getDocumentsMatchingQuery(e,i,r).next((o=>(n.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT="LocalStore",Q6=3e8;class X6{constructor(e,n,i,r){this.persistence=e,this.Cs=n,this.serializer=r,this.Fs=new en(Ze),this.Ms=new sl((o=>J_(o)),W_),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new B6(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Fs)))}}function Z6(t,e,n,i){return new X6(t,e,n,i)}async function hP(t,e){const n=Ke(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next((o=>(r=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(i)))).next((o=>{const l=[],c=[];let d=lt();for(const f of r){l.push(f.batchId);for(const p of f.mutations)d=d.add(p.key)}for(const f of o){c.push(f.batchId);for(const p of f.mutations)d=d.add(p.key)}return n.localDocuments.getDocuments(i,d).next((f=>({Bs:f,removedBatchIds:l,addedBatchIds:c})))}))}))}function e5(t,e){const n=Ke(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(c,d,f,p){const v=f.batch,T=v.keys();let b=fe.resolve();return T.forEach((C=>{b=b.next((()=>p.getEntry(d,C))).next((N=>{const D=f.docVersions.get(C);St(D!==null,48541),N.version.compareTo(D)<0&&(v.applyToRemoteDocument(N,f),N.isValidDocument()&&(N.setReadTime(f.commitVersion),p.addEntry(N)))}))})),b.next((()=>c.mutationQueue.removeMutationBatch(d,v)))})(n,i,e,o).next((()=>o.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(c){let d=lt();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(d=d.add(c.batch.mutations[f].key));return d})(e)))).next((()=>n.localDocuments.getDocuments(i,r)))}))}function pP(t){const e=Ke(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.hi.getLastRemoteSnapshotVersion(n)))}function t5(t,e){const n=Ke(t),i=e.snapshotVersion;let r=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=n.Os.newChangeBuffer({trackRemovals:!0});r=n.Fs;const c=[];e.targetChanges.forEach(((p,v)=>{const T=r.get(v);if(!T)return;c.push(n.hi.removeMatchingKeys(o,p.removedDocuments,v).next((()=>n.hi.addMatchingKeys(o,p.addedDocuments,v))));let b=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?b=b.withResumeToken(Xn.EMPTY_BYTE_STRING,je.min()).withLastLimboFreeSnapshotVersion(je.min()):p.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(p.resumeToken,i)),r=r.insert(v,b),(function(N,D,O){return N.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=Q6?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0})(T,b,p)&&c.push(n.hi.updateTargetData(o,b))}));let d=zs(),f=lt();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,p))})),c.push(n5(o,l,e.documentUpdates).next((p=>{d=p.Ls,f=p.ks}))),!i.isEqual(je.min())){const p=n.hi.getLastRemoteSnapshotVersion(o).next((v=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,i)));c.push(p)}return fe.waitFor(c).next((()=>l.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,d,f))).next((()=>d))})).then((o=>(n.Fs=r,o)))}function n5(t,e,n){let i=lt(),r=lt();return n.forEach((o=>i=i.add(o))),e.getEntries(t,i).next((o=>{let l=zs();return n.forEach(((c,d)=>{const f=o.get(c);d.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(c)),d.isNoDocument()&&d.version.isEqual(je.min())?(e.removeEntry(c,d.readTime),l=l.insert(c,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),l=l.insert(c,d)):we(sT,"Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",d.version)})),{Ls:l,ks:r}}))}function i5(t,e){const n=Ke(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=$_),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function r5(t,e){const n=Ke(t);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return n.hi.getTargetData(i,e).next((o=>o?(r=o,fe.resolve(r)):n.hi.allocateTargetId(i).next((l=>(r=new Uo(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.hi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=n.Fs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(i.targetId,i),n.Ms.set(e,i.targetId)),i}))}async function P0(t,e,n){const i=Ke(t),r=i.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,(l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!Ou(l))throw l;we(sT,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(r.target)}function gA(t,e,n){const i=Ke(t);let r=je.min(),o=lt();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,f,p){const v=Ke(d),T=v.Ms.get(p);return T!==void 0?fe.resolve(v.Fs.get(T)):v.hi.getTargetData(f,p)})(i,l,rs(e)).next((c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(l,c.targetId).next((d=>{o=d}))})).next((()=>i.Cs.getDocumentsMatchingQuery(l,e,n?r:je.min(),n?o:lt()))).next((c=>(s5(i,j3(e),c),{documents:c,qs:o})))))}function s5(t,e,n){let i=t.xs.get(e)||je.min();n.forEach(((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),t.xs.set(e,i)}class yA{constructor(){this.activeTargetIds=Q3()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class o5{constructor(){this.Fo=new yA,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,i){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new yA,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="ConnectivityMonitor";class _A{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){we(vA,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){we(vA,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $h=null;function D0(){return $h===null?$h=(function(){return 268435456+Math.round(2147483648*Math.random())})():$h++,"0x"+$h.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="RestConnection",l5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class u5{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.Ko=this.databaseId.database===Yp?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,n,i,r,o){const l=D0(),c=this.Go(e,n.toUriEncodedString());we(Lv,`Sending RPC '${e}' ${l}:`,c,i);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(d,r,o);const{host:f}=new URL(c),p=js(f);return this.jo(e,c,d,i,p).then((v=>(we(Lv,`Received RPC '${e}' ${l}: `,v),v)),(v=>{throw $o(Lv,`RPC '${e}' ${l} failed with error: `,v,"url: ",c,"request:",i),v}))}Jo(e,n,i,r,o,l){return this.Wo(e,n,i,r,o)}zo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Vu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((r,o)=>e[o]=r)),i&&i.headers.forEach(((r,o)=>e[o]=r))}Go(e,n){const i=l5[e];return`${this.$o}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti="WebChannelConnection";class d5 extends u5{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,i,r,o){const l=D0();return new Promise(((c,d)=>{const f=new gN;f.setWithCredentials(!0),f.listenOnce(yN.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Ep.NO_ERROR:const v=f.getResponseJson();we(ti,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),c(v);break;case Ep.TIMEOUT:we(ti,`RPC '${e}' ${l} timed out`),d(new Se(de.DEADLINE_EXCEEDED,"Request time out"));break;case Ep.HTTP_ERROR:const T=f.getStatus();if(we(ti,`RPC '${e}' ${l} failed with status:`,T,"response text:",f.getResponseText()),T>0){let b=f.getResponseJson();Array.isArray(b)&&(b=b[0]);const C=b==null?void 0:b.error;if(C&&C.status&&C.message){const N=(function(O){const k=O.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(k)>=0?k:de.UNKNOWN})(C.status);d(new Se(N,C.message))}else d(new Se(de.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Se(de.UNAVAILABLE,"Connection failed."));break;default:Be(9055,{c_:e,streamId:l,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{we(ti,`RPC '${e}' ${l} completed.`)}}));const p=JSON.stringify(r);we(ti,`RPC '${e}' ${l} sending request:`,r),f.send(n,"POST",p,i,15)}))}P_(e,n,i){const r=D0(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=TN(),c=_N(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.zo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const p=o.join("");we(ti,`Creating RPC '${e}' stream ${r}: ${p}`,d);const v=l.createWebChannel(p,d);this.T_(v);let T=!1,b=!1;const C=new c5({Ho:D=>{b?we(ti,`Not sending because RPC '${e}' stream ${r} is closed:`,D):(T||(we(ti,`Opening RPC '${e}' stream ${r} transport.`),v.open(),T=!0),we(ti,`RPC '${e}' stream ${r} sending:`,D),v.send(D))},Yo:()=>v.close()}),N=(D,O,k)=>{D.listen(O,(F=>{try{k(F)}catch(G){setTimeout((()=>{throw G}),0)}}))};return N(v,ed.EventType.OPEN,(()=>{b||(we(ti,`RPC '${e}' stream ${r} transport opened.`),C.s_())})),N(v,ed.EventType.CLOSE,(()=>{b||(b=!0,we(ti,`RPC '${e}' stream ${r} transport closed`),C.__(),this.I_(v))})),N(v,ed.EventType.ERROR,(D=>{b||(b=!0,$o(ti,`RPC '${e}' stream ${r} transport errored. Name:`,D.name,"Message:",D.message),C.__(new Se(de.UNAVAILABLE,"The operation could not be completed")))})),N(v,ed.EventType.MESSAGE,(D=>{var O;if(!b){const k=D.data[0];St(!!k,16349);const F=k,G=(F==null?void 0:F.error)||((O=F[0])===null||O===void 0?void 0:O.error);if(G){we(ti,`RPC '${e}' stream ${r} received error:`,G);const K=G.status;let H=(function(P){const U=wn[P];if(U!==void 0)return tP(U)})(K),R=G.message;H===void 0&&(H=de.INTERNAL,R="Unknown error status: "+K+" with message "+G.message),b=!0,C.__(new Se(H,R)),v.close()}else we(ti,`RPC '${e}' stream ${r} received:`,k),C.a_(k)}})),N(c,vN.STAT_EVENT,(D=>{D.stat===_0.PROXY?we(ti,`RPC '${e}' stream ${r} detected buffering proxy`):D.stat===_0.NOPROXY&&we(ti,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{C.o_()}),0),C}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((n=>n===e))}}function Ov(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(t){return new m6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=i,this.E_=r,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),r=Math.max(0,n-i);r>0&&we("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA="PersistentStream";class gP{constructor(e,n,i,r,o,l,c,d){this.Fi=e,this.w_=i,this.S_=r,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new mP(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===de.RESOURCE_EXHAUSTED?(qs(n.toString()),qs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===de.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.b_===n&&this.W_(i,r)}),(i=>{e((()=>{const r=new Se(de.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(r)}))}))}W_(e,n){const i=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((r=>{i((()=>this.G_(r)))})),this.stream.onMessage((r=>{i((()=>++this.C_==1?this.j_(r):this.onNext(r)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return we(TA,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget((()=>this.b_===e?n():(we(TA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class f5 extends gP{constructor(e,n,i,r,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,l),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=v6(this.serializer,e),i=(function(o){if(!("targetChange"in o))return je.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?je.min():l.readTime?ss(l.readTime):je.min()})(e);return this.listener.J_(n,i)}H_(e){const n={};n.database=N0(this.serializer),n.addTarget=(function(o,l){let c;const d=l.target;if(c=w0(d)?{documents:E6(o,d)}:{query:S6(o,d).Vt},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=rP(o,l.resumeToken);const f=C0(o,l.expectedCount);f!==null&&(c.expectedCount=f)}else if(l.snapshotVersion.compareTo(je.min())>0){c.readTime=em(o,l.snapshotVersion.toTimestamp());const f=C0(o,l.expectedCount);f!==null&&(c.expectedCount=f)}return c})(this.serializer,e);const i=w6(this.serializer,e);i&&(n.labels=i),this.k_(n)}Y_(e){const n={};n.database=N0(this.serializer),n.removeTarget=e,this.k_(n)}}class h5 extends gP{constructor(e,n,i,r,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,l),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return St(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,St(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){St(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=T6(e.writeResults,e.commitTime),i=ss(e.commitTime);return this.listener.ta(i,n)}na(){const e={};e.database=N0(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>_6(this.serializer,i)))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{}class m5 extends p5{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new Se(de.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Wo(e,I0(n,i),r,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Se(de.UNKNOWN,o.toString())}))}Jo(e,n,i,r,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Jo(e,I0(n,i),r,l,c,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Se(de.UNKNOWN,l.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class g5{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(qs(n),this._a=!1):we("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el="RemoteStore";class y5{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo((l=>{i.enqueueAndForget((async()=>{ol(this)&&(we(el,"Restarting streams for network reachability change."),await(async function(d){const f=Ke(d);f.Ia.add(4),await cf(f),f.Aa.set("Unknown"),f.Ia.delete(4),await Jm(f)})(this))}))})),this.Aa=new g5(i,r)}}async function Jm(t){if(ol(t))for(const e of t.da)await e(!0)}async function cf(t){for(const e of t.da)await e(!1)}function yP(t,e){const n=Ke(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),uT(n)?lT(n):Uu(n).x_()&&aT(n,e))}function oT(t,e){const n=Ke(t),i=Uu(n);n.Ta.delete(e),i.x_()&&vP(n,e),n.Ta.size===0&&(i.x_()?i.B_():ol(n)&&n.Aa.set("Unknown"))}function aT(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(je.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Uu(t).H_(e)}function vP(t,e){t.Ra.$e(e),Uu(t).Y_(e)}function lT(t){t.Ra=new d6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Uu(t).start(),t.Aa.aa()}function uT(t){return ol(t)&&!Uu(t).M_()&&t.Ta.size>0}function ol(t){return Ke(t).Ia.size===0}function _P(t){t.Ra=void 0}async function v5(t){t.Aa.set("Online")}async function _5(t){t.Ta.forEach(((e,n)=>{aT(t,e)}))}async function T5(t,e){_P(t),uT(t)?(t.Aa.la(e),lT(t)):t.Aa.set("Unknown")}async function E5(t,e,n){if(t.Aa.set("Online"),e instanceof iP&&e.state===2&&e.cause)try{await(async function(r,o){const l=o.cause;for(const c of o.targetIds)r.Ta.has(c)&&(await r.remoteSyncer.rejectListen(c,l),r.Ta.delete(c),r.Ra.removeTarget(c))})(t,e)}catch(i){we(el,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await nm(t,i)}else if(e instanceof xp?t.Ra.Ye(e):e instanceof nP?t.Ra.it(e):t.Ra.et(e),!n.isEqual(je.min()))try{const i=await pP(t.localStore);n.compareTo(i)>=0&&await(function(o,l){const c=o.Ra.Pt(l);return c.targetChanges.forEach(((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const p=o.Ta.get(f);p&&o.Ta.set(f,p.withResumeToken(d.resumeToken,l))}})),c.targetMismatches.forEach(((d,f)=>{const p=o.Ta.get(d);if(!p)return;o.Ta.set(d,p.withResumeToken(Xn.EMPTY_BYTE_STRING,p.snapshotVersion)),vP(o,d);const v=new Uo(p.target,d,f,p.sequenceNumber);aT(o,v)})),o.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(i){we(el,"Failed to raise snapshot:",i),await nm(t,i)}}async function nm(t,e,n){if(!Ou(e))throw e;t.Ia.add(1),await cf(t),t.Aa.set("Offline"),n||(n=()=>pP(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{we(el,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Jm(t)}))}function TP(t,e){return e().catch((n=>nm(t,n,e)))}async function Wm(t){const e=Ke(t),n=Qo(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:$_;for(;S5(e);)try{const r=await i5(e.localStore,i);if(r===null){e.Pa.length===0&&n.B_();break}i=r.batchId,b5(e,r)}catch(r){await nm(e,r)}EP(e)&&SP(e)}function S5(t){return ol(t)&&t.Pa.length<10}function b5(t,e){t.Pa.push(e);const n=Qo(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function EP(t){return ol(t)&&!Qo(t).M_()&&t.Pa.length>0}function SP(t){Qo(t).start()}async function w5(t){Qo(t).na()}async function x5(t){const e=Qo(t);for(const n of t.Pa)e.X_(n.mutations)}async function A5(t,e,n){const i=t.Pa.shift(),r=Z_.from(i,e,n);await TP(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await Wm(t)}async function C5(t,e){e&&Qo(t).Z_&&await(async function(i,r){if((function(l){return u6(l)&&l!==de.ABORTED})(r.code)){const o=i.Pa.shift();Qo(i).N_(),await TP(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r))),await Wm(i)}})(t,e),EP(t)&&SP(t)}async function EA(t,e){const n=Ke(t);n.asyncQueue.verifyOperationInProgress(),we(el,"RemoteStore received new credentials");const i=ol(n);n.Ia.add(3),await cf(n),i&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Jm(n)}async function I5(t,e){const n=Ke(t);e?(n.Ia.delete(2),await Jm(n)):e||(n.Ia.add(2),await cf(n),n.Aa.set("Unknown"))}function Uu(t){return t.Va||(t.Va=(function(n,i,r){const o=Ke(n);return o.ia(),new f5(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(t.datastore,t.asyncQueue,{Zo:v5.bind(null,t),e_:_5.bind(null,t),n_:T5.bind(null,t),J_:E5.bind(null,t)}),t.da.push((async e=>{e?(t.Va.N_(),uT(t)?lT(t):t.Aa.set("Unknown")):(await t.Va.stop(),_P(t))}))),t.Va}function Qo(t){return t.ma||(t.ma=(function(n,i,r){const o=Ke(n);return o.ia(),new h5(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:w5.bind(null,t),n_:C5.bind(null,t),ea:x5.bind(null,t),ta:A5.bind(null,t)}),t.da.push((async e=>{e?(t.ma.N_(),await Wm(t)):(await t.ma.stop(),t.Pa.length>0&&(we(el,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Ho,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const l=Date.now()+i,c=new cT(e,n,l,r,o);return c.start(i),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dT(t,e){if(qs("AsyncQueue",`${e}: ${t}`),Ou(t))return new Se(de.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{static emptySet(e){return new fu(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||De.comparator(n.key,i.key):(n,i)=>De.comparator(n.key,i.key),this.keyedMap=td(),this.sortedSet=new en(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof fu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new fu;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(){this.fa=new en(De.comparator)}track(e){const n=e.doc.key,i=this.fa.get(n);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(n,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(n):e.type===1&&i.type===2?this.fa=this.fa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Be(63341,{At:e,ga:i}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal(((n,i)=>{e.push(i)})),e}}class xu{constructor(e,n,i,r,o,l,c,d,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const l=[];return n.forEach((c=>{l.push({type:0,doc:c})})),new xu(e,n,fu.emptySet(n),l,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class N5{constructor(){this.queries=bA(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,i){const r=Ke(n),o=r.queries;r.queries=bA(),o.forEach(((l,c)=>{for(const d of c.wa)d.onError(i)}))})(this,new Se(de.ABORTED,"Firestore shutting down"))}}function bA(){return new sl((t=>HN(t)),Hm)}async function bP(t,e){const n=Ke(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.Sa()&&e.ba()&&(i=2):(o=new R5,i=e.ba()?0:1);try{switch(i){case 0:o.ya=await n.onListen(r,!0);break;case 1:o.ya=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(l){const c=dT(l,`Initialization of query '${Xl(e.query)}' failed`);return void e.onError(c)}n.queries.set(r,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&fT(n)}async function wP(t,e){const n=Ke(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const l=o.wa.indexOf(e);l>=0&&(o.wa.splice(l,1),o.wa.length===0?r=e.ba()?0:1:!o.Sa()&&e.ba()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function P5(t,e){const n=Ke(t);let i=!1;for(const r of e){const o=r.query,l=n.queries.get(o);if(l){for(const c of l.wa)c.Ca(r)&&(i=!0);l.ya=r}}i&&fT(n)}function D5(t,e,n){const i=Ke(t),r=i.queries.get(e);if(r)for(const o of r.wa)o.onError(n);i.queries.delete(e)}function fT(t){t.Da.forEach((e=>{e.next()}))}var M0,wA;(wA=M0||(M0={})).Fa="default",wA.Cache="cache";class xP{constructor(e,n,i){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new xu(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const i=n!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=xu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==M0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e){this.key=e}}class CP{constructor(e){this.key=e}}class M5{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=lt(),this.mutatedKeys=lt(),this.Xa=GN(e),this.eu=new fu(this.Xa)}get tu(){return this.Ha}nu(e,n){const i=n?n.ru:new SA,r=n?n.eu:this.eu;let o=n?n.mutatedKeys:this.mutatedKeys,l=r,c=!1;const d=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((p,v)=>{const T=r.get(p),b=Gm(this.query,v)?v:null,C=!!T&&this.mutatedKeys.has(T.key),N=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let D=!1;T&&b?T.data.isEqual(b.data)?C!==N&&(i.track({type:3,doc:b}),D=!0):this.iu(T,b)||(i.track({type:2,doc:b}),D=!0,(d&&this.Xa(b,d)>0||f&&this.Xa(b,f)<0)&&(c=!0)):!T&&b?(i.track({type:0,doc:b}),D=!0):T&&!b&&(i.track({type:1,doc:T}),D=!0,(d||f)&&(c=!0)),D&&(b?(l=l.add(b),o=N?o.add(p):o.delete(p)):(l=l.delete(p),o=o.delete(p)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const p=this.query.limitType==="F"?l.last():l.first();l=l.delete(p.key),o=o.delete(p.key),i.track({type:1,doc:p})}return{eu:l,ru:i,Ds:c,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const l=e.ru.pa();l.sort(((p,v)=>(function(b,C){const N=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Be(20277,{At:D})}};return N(b)-N(C)})(p.type,v.type)||this.Xa(p.doc,v.doc))),this.su(i),r=r!=null&&r;const c=n&&!r?this.ou():[],d=this.Za.size===0&&this.current&&!r?1:0,f=d!==this.Ya;return this.Ya=d,l.length!==0||f?{snapshot:new xu(this.query,e.eu,o,l,e.mutatedKeys,d===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new SA,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=lt(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const n=[];return e.forEach((i=>{this.Za.has(i)||n.push(new CP(i))})),this.Za.forEach((i=>{e.has(i)||n.push(new AP(i))})),n}uu(e){this.Ha=e.qs,this.Za=lt();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return xu.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const hT="SyncEngine";class k5{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class V5{constructor(e){this.key=e,this.lu=!1}}class L5{constructor(e,n,i,r,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.hu={},this.Pu=new sl((c=>HN(c)),Hm),this.Tu=new Map,this.Iu=new Set,this.du=new en(De.comparator),this.Eu=new Map,this.Au=new nT,this.Ru={},this.Vu=new Map,this.mu=wu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function O5(t,e,n=!0){const i=MP(t);let r;const o=i.Pu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.cu()):r=await IP(i,e,n,!0),r}async function U5(t,e){const n=MP(t);await IP(n,e,!0,!1)}async function IP(t,e,n,i){const r=await r5(t.localStore,rs(e)),o=r.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let c;return i&&(c=await F5(t,e,o,l==="current",r.resumeToken)),t.isPrimaryClient&&n&&yP(t.remoteStore,r),c}async function F5(t,e,n,i,r){t.gu=(v,T,b)=>(async function(N,D,O,k){let F=D.view.nu(O);F.Ds&&(F=await gA(N.localStore,D.query,!1).then((({documents:R})=>D.view.nu(R,F))));const G=k&&k.targetChanges.get(D.targetId),K=k&&k.targetMismatches.get(D.targetId)!=null,H=D.view.applyChanges(F,N.isPrimaryClient,G,K);return AA(N,D.targetId,H._u),H.snapshot})(t,v,T,b);const o=await gA(t.localStore,e,!0),l=new M5(e,o.qs),c=l.nu(o.documents),d=uf.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=l.applyChanges(c,t.isPrimaryClient,d);AA(t,n,f._u);const p=new k5(e,n,l);return t.Pu.set(e,p),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),f.snapshot}async function B5(t,e,n){const i=Ke(t),r=i.Pu.get(e),o=i.Tu.get(r.targetId);if(o.length>1)return i.Tu.set(r.targetId,o.filter((l=>!Hm(l,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await P0(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),n&&oT(i.remoteStore,r.targetId),k0(i,r.targetId)})).catch(Lu)):(k0(i,r.targetId),await P0(i.localStore,r.targetId,!0))}async function q5(t,e){const n=Ke(t),i=n.Pu.get(e),r=n.Tu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),oT(n.remoteStore,i.targetId))}async function z5(t,e,n){const i=J5(t);try{const r=await(function(l,c){const d=Ke(l),f=$t.now(),p=c.reduce(((b,C)=>b.add(C.key)),lt());let v,T;return d.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let C=zs(),N=lt();return d.Os.getEntries(b,p).next((D=>{C=D,C.forEach(((O,k)=>{k.isValidDocument()||(N=N.add(O))}))})).next((()=>d.localDocuments.getOverlayedDocuments(b,C))).next((D=>{v=D;const O=[];for(const k of c){const F=r6(k,v.get(k.key).overlayedDocument);F!=null&&O.push(new sa(k.key,F,VN(F.value.mapValue),Br.exists(!0)))}return d.mutationQueue.addMutationBatch(b,f,O,c)})).next((D=>{T=D;const O=D.applyToLocalDocumentSet(v,N);return d.documentOverlayCache.saveOverlays(b,D.batchId,O)}))})).then((()=>({batchId:T.batchId,changes:$N(v)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(l,c,d){let f=l.Ru[l.currentUser.toKey()];f||(f=new en(Ze)),f=f.insert(c,d),l.Ru[l.currentUser.toKey()]=f})(i,r.batchId,n),await df(i,r.changes),await Wm(i.remoteStore)}catch(r){const o=dT(r,"Failed to persist write");n.reject(o)}}async function RP(t,e){const n=Ke(t);try{const i=await t5(n.localStore,e);e.targetChanges.forEach(((r,o)=>{const l=n.Eu.get(o);l&&(St(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?l.lu=!0:r.modifiedDocuments.size>0?St(l.lu,14607):r.removedDocuments.size>0&&(St(l.lu,42227),l.lu=!1))})),await df(n,i,e)}catch(i){await Lu(i)}}function xA(t,e,n){const i=Ke(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Pu.forEach(((o,l)=>{const c=l.view.va(e);c.snapshot&&r.push(c.snapshot)})),(function(l,c){const d=Ke(l);d.onlineState=c;let f=!1;d.queries.forEach(((p,v)=>{for(const T of v.wa)T.va(c)&&(f=!0)})),f&&fT(d)})(i.eventManager,e),r.length&&i.hu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function H5(t,e,n){const i=Ke(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Eu.get(e),o=r&&r.key;if(o){let l=new en(De.comparator);l=l.insert(o,oi.newNoDocument(o,je.min()));const c=lt().add(o),d=new Km(je.min(),new Map,new en(Ze),l,c);await RP(i,d),i.du=i.du.remove(o),i.Eu.delete(e),pT(i)}else await P0(i.localStore,e,!1).then((()=>k0(i,e,n))).catch(Lu)}async function G5(t,e){const n=Ke(t),i=e.batch.batchId;try{const r=await e5(n.localStore,e);PP(n,i,null),NP(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await df(n,r)}catch(r){await Lu(r)}}async function j5(t,e,n){const i=Ke(t);try{const r=await(function(l,c){const d=Ke(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let p;return d.mutationQueue.lookupMutationBatch(f,c).next((v=>(St(v!==null,37113),p=v.keys(),d.mutationQueue.removeMutationBatch(f,v)))).next((()=>d.mutationQueue.performConsistencyCheck(f))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(f,p,c))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p))).next((()=>d.localDocuments.getDocuments(f,p)))}))})(i.localStore,e);PP(i,e,n),NP(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await df(i,r)}catch(r){await Lu(r)}}function NP(t,e){(t.Vu.get(e)||[]).forEach((n=>{n.resolve()})),t.Vu.delete(e)}function PP(t,e,n){const i=Ke(t);let r=i.Ru[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Ru[i.currentUser.toKey()]=r}}function k0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Tu.get(e))t.Pu.delete(i),n&&t.hu.pu(i,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach((i=>{t.Au.containsKey(i)||DP(t,i)}))}function DP(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(oT(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),pT(t))}function AA(t,e,n){for(const i of n)i instanceof AP?(t.Au.addReference(i.key,e),$5(t,i)):i instanceof CP?(we(hT,"Document no longer in limbo: "+i.key),t.Au.removeReference(i.key,e),t.Au.containsKey(i.key)||DP(t,i.key)):Be(19791,{yu:i})}function $5(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Iu.has(i)||(we(hT,"New document in limbo: "+n),t.Iu.add(i),pT(t))}function pT(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new De(Ut.fromString(e)),i=t.mu.next();t.Eu.set(i,new V5(n)),t.du=t.du.insert(n,i),yP(t.remoteStore,new Uo(rs(zm(n.path)),i,"TargetPurposeLimboResolution",Fm.ue))}}async function df(t,e,n){const i=Ke(t),r=[],o=[],l=[];i.Pu.isEmpty()||(i.Pu.forEach(((c,d)=>{l.push(i.gu(d,e,n).then((f=>{var p;if((f||n)&&i.isPrimaryClient){const v=f?!f.fromCache:(p=n==null?void 0:n.targetChanges.get(d.targetId))===null||p===void 0?void 0:p.current;i.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(f){r.push(f);const v=rT.Es(d.targetId,f);o.push(v)}})))})),await Promise.all(l),i.hu.J_(r),await(async function(d,f){const p=Ke(d);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>fe.forEach(f,(T=>fe.forEach(T.Is,(b=>p.persistence.referenceDelegate.addReference(v,T.targetId,b))).next((()=>fe.forEach(T.ds,(b=>p.persistence.referenceDelegate.removeReference(v,T.targetId,b)))))))))}catch(v){if(!Ou(v))throw v;we(sT,"Failed to update sequence numbers: "+v)}for(const v of f){const T=v.targetId;if(!v.fromCache){const b=p.Fs.get(T),C=b.snapshotVersion,N=b.withLastLimboFreeSnapshotVersion(C);p.Fs=p.Fs.insert(T,N)}}})(i.localStore,o))}async function K5(t,e){const n=Ke(t);if(!n.currentUser.isEqual(e)){we(hT,"User change. New user:",e.toKey());const i=await hP(n.localStore,e);n.currentUser=e,(function(o,l){o.Vu.forEach((c=>{c.forEach((d=>{d.reject(new Se(de.CANCELLED,l))}))})),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await df(n,i.Bs)}}function Y5(t,e){const n=Ke(t),i=n.Eu.get(e);if(i&&i.lu)return lt().add(i.key);{let r=lt();const o=n.Tu.get(e);if(!o)return r;for(const l of o){const c=n.Pu.get(l);r=r.unionWith(c.view.tu)}return r}}function MP(t){const e=Ke(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=RP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Y5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=H5.bind(null,e),e.hu.J_=P5.bind(null,e.eventManager),e.hu.pu=D5.bind(null,e.eventManager),e}function J5(t){const e=Ke(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=G5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=j5.bind(null,e),e}class im{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ym(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return Z6(this.persistence,new W6,e.initialUser,this.serializer)}Du(e){return new fP(iT.Vi,this.serializer)}bu(e){return new o5}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}im.provider={build:()=>new im};class W5 extends im{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){St(this.persistence.referenceDelegate instanceof tm,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new V6(i,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Fi.withCacheSize(this.cacheSizeBytes):Fi.DEFAULT;return new fP((i=>tm.Vi(i,n)),this.serializer)}}class V0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>xA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=K5.bind(null,this.syncEngine),await I5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new N5})()}createDatastore(e){const n=Ym(e.databaseInfo.databaseId),i=(function(o){return new d5(o)})(e.databaseInfo);return(function(o,l,c,d){return new m5(o,l,c,d)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,r,o,l,c){return new y5(i,r,o,l,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>xA(this.syncEngine,n,0)),(function(){return _A.C()?new _A:new a5})())}createSyncEngine(e,n){return(function(r,o,l,c,d,f,p){const v=new L5(r,o,l,c,d,f);return p&&(v.fu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(r){const o=Ke(r);we(el,"RemoteStore shutting down."),o.Ia.add(5),await cf(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}V0.provider={build:()=>new V0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):qs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo="FirestoreClient";class Q5{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=si.UNAUTHENTICATED,this.clientId=j_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async l=>{we(Xo,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(we(Xo,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ho;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=dT(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Uv(t,e){t.asyncQueue.verifyOperationInProgress(),we(Xo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async r=>{i.isEqual(r)||(await hP(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>{$o("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then((()=>{we("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((r=>{$o("Terminating Firestore due to IndexedDb database deletion failed",r)}))})),t._offlineComponents=e}async function CA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await X5(t);we(Xo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>EA(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,r)=>EA(e.remoteStore,r))),t._onlineComponents=e}async function X5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){we(Xo,"Using user provided OfflineComponentProvider");try{await Uv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(r){return r.name==="FirebaseError"?r.code===de.FAILED_PRECONDITION||r.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;$o("Error using user provided cache. Falling back to memory cache: "+n),await Uv(t,new im)}}else we(Xo,"Using default OfflineComponentProvider"),await Uv(t,new W5(void 0));return t._offlineComponents}async function VP(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(we(Xo,"Using user provided OnlineComponentProvider"),await CA(t,t._uninitializedComponentsProvider._online)):(we(Xo,"Using default OnlineComponentProvider"),await CA(t,new V0))),t._onlineComponents}function Z5(t){return VP(t).then((e=>e.syncEngine))}async function L0(t){const e=await VP(t),n=e.eventManager;return n.onListen=O5.bind(null,e.syncEngine),n.onUnlisten=B5.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=U5.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=q5.bind(null,e.syncEngine),n}function eF(t,e,n={}){const i=new Ho;return t.asyncQueue.enqueueAndForget((async()=>(function(o,l,c,d,f){const p=new kP({next:T=>{p.Ou(),l.enqueueAndForget((()=>wP(o,v)));const b=T.docs.has(c);!b&&T.fromCache?f.reject(new Se(de.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&T.fromCache&&d&&d.source==="server"?f.reject(new Se(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(T)},error:T=>f.reject(T)}),v=new xP(zm(c.path),p,{includeMetadataChanges:!0,ka:!0});return bP(o,v)})(await L0(t),t.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP="firestore.googleapis.com",RA=!0;class NA{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Se(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=OP,this.ssl=RA}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:RA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<M6)throw new Se(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}v3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LP((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Se(de.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Se(de.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Se(de.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qm{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new NA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Se(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new NA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new u3;switch(i.type){case"firstParty":return new h3(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Se(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=IA.get(n);i&&(we("ComponentProvider","Removing Datastore"),IA.delete(n),i.terminate())})(this),Promise.resolve()}}function tF(t,e,n,i={}){var r;t=is(t,Qm);const o=js(e),l=t._getSettings(),c=Object.assign(Object.assign({},l),{emulatorOptions:t._getEmulatorOptions()}),d=`${e}:${n}`;o&&(Dm(`https://${d}`),Mm("Firestore",!0)),l.host!==OP&&l.host!==d&&$o("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},l),{host:d,ssl:o,emulatorOptions:i});if(!Wa(f,c)&&(t._setSettings(f),i.mockUserToken)){let p,v;if(typeof i.mockUserToken=="string")p=i.mockUserToken,v=si.MOCK_USER;else{p=N1(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new Se(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new si(T)}t._authCredentials=new c3(new SN(p,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Fu(this.firestore,e,this._query)}}class gn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Go(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gn(this.firestore,e,this._key)}toJSON(){return{type:gn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(of(n,gn._jsonSchema))return new gn(e,i||null,new De(Ut.fromString(n.referencePath)))}}gn._jsonSchemaVersion="firestore/documentReference/1.0",gn._jsonSchema={type:An("string",gn._jsonSchemaVersion),referencePath:An("string")};class Go extends Fu{constructor(e,n,i){super(e,n,zm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gn(this.firestore,null,new De(e))}withConverter(e){return new Go(this.firestore,e,this._path)}}function oa(t,e,...n){if(t=kt(t),wN("collection","path",e),t instanceof Qm){const i=Ut.fromString(e,...n);return Hx(i),new Go(t,null,i)}{if(!(t instanceof gn||t instanceof Go))throw new Se(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ut.fromString(e,...n));return Hx(i),new Go(t.firestore,null,i)}}function Bu(t,e,...n){if(t=kt(t),arguments.length===1&&(e=j_.newId()),wN("doc","path",e),t instanceof Qm){const i=Ut.fromString(e,...n);return zx(i),new gn(t,null,new De(i))}{if(!(t instanceof gn||t instanceof Go))throw new Se(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ut.fromString(e,...n));return zx(i),new gn(t.firestore,t instanceof Go?t.converter:null,new De(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA="AsyncQueue";class DA{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new mP(this,"async_queue_retry"),this.oc=()=>{const i=Ov();i&&we(PA,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const n=Ov();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Ov();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new Ho;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ou(e))throw e;we(PA,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const n=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,qs("INTERNAL UNHANDLED ERROR: ",MA(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=n,n}enqueueAfterDelay(e,n,i){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const r=cT.createAndSchedule(this,e,n,i,(o=>this.lc(o)));return this.ec.push(r),r}ac(){this.tc&&Be(47125,{hc:MA(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function MA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(t){return(function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1})(t,["next","error","complete"])}class tl extends Qm{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new DA,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new DA(e),this._firestoreClient=void 0,await e}}}function nF(t,e){const n=typeof t=="object"?t:km(),i=typeof t=="string"?t:Yp,r=ef(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=N_("firestore");o&&tF(r,...o)}return r}function mT(t){if(t._terminated)throw new Se(de.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||iF(t),t._firestoreClient}function iF(t){var e,n,i;const r=t._freezeSettings(),o=(function(c,d,f,p){return new R3(c,d,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,LP(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new Q5(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tr(Xn.fromBase64String(e))}catch(n){throw new Se(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Tr(Xn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Tr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(of(e,Tr._jsonSchema))return Tr.fromBase64String(e.bytes)}}Tr._jsonSchemaVersion="firestore/bytes/1.0",Tr._jsonSchema={type:An("string",Tr._jsonSchemaVersion),bytes:An("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Se(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Se(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Se(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ze(this._lat,e._lat)||Ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:os._jsonSchemaVersion}}static fromJSON(e){if(of(e,os._jsonSchema))return new os(e.latitude,e.longitude)}}os._jsonSchemaVersion="firestore/geoPoint/1.0",os._jsonSchema={type:An("string",os._jsonSchemaVersion),latitude:An("number"),longitude:An("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:as._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(of(e,as._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new as(e.vectorValues);throw new Se(de.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}as._jsonSchemaVersion="firestore/vectorValue/1.0",as._jsonSchema={type:An("string",as._jsonSchemaVersion),vectorValues:An("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF=/^__.*__$/;class sF{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new sa(e,this.data,this.fieldMask,n,this.fieldTransforms):new lf(e,this.data,n,this.fieldTransforms)}}class UP{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new sa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function FP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Be(40011,{Ec:t})}}class yT{constructor(e,n,i,r,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new yT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Rc({path:i,mc:!1});return r.fc(e),r}gc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Rc({path:i,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return rm(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(FP(this.Ec)&&rF.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class oF{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Ym(e)}Dc(e,n,i,r=!1){return new yT({Ec:e,methodName:n,bc:i,path:Qn.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vT(t){const e=t._freezeSettings(),n=Ym(t._databaseId);return new oF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function aF(t,e,n,i,r,o={}){const l=t.Dc(o.merge||o.mergeFields?2:0,e,n,r);_T("Data must be an object, but it was:",l,i);const c=BP(i,l);let d,f;if(o.merge)d=new Zi(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const p=[];for(const v of o.mergeFields){const T=O0(e,v,n);if(!l.contains(T))throw new Se(de.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);zP(p,T)||p.push(T)}d=new Zi(p),f=l.fieldTransforms.filter((v=>d.covers(v.field)))}else d=null,f=l.fieldTransforms;return new sF(new Bi(c),d,f)}class Zm extends gT{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zm}}function lF(t,e,n,i){const r=t.Dc(1,e,n);_T("Data must be an object, but it was:",r,i);const o=[],l=Bi.empty();ra(i,((d,f)=>{const p=TT(e,d,n);f=kt(f);const v=r.gc(p);if(f instanceof Zm)o.push(p);else{const T=ff(f,v);T!=null&&(o.push(p),l.set(p,T))}}));const c=new Zi(o);return new UP(l,c,r.fieldTransforms)}function uF(t,e,n,i,r,o){const l=t.Dc(1,e,n),c=[O0(e,i,n)],d=[r];if(o.length%2!=0)throw new Se(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)c.push(O0(e,o[T])),d.push(o[T+1]);const f=[],p=Bi.empty();for(let T=c.length-1;T>=0;--T)if(!zP(f,c[T])){const b=c[T];let C=d[T];C=kt(C);const N=l.gc(b);if(C instanceof Zm)f.push(b);else{const D=ff(C,N);D!=null&&(f.push(b),p.set(b,D))}}const v=new Zi(f);return new UP(p,v,l.fieldTransforms)}function cF(t,e,n,i=!1){return ff(n,t.Dc(i?4:3,e))}function ff(t,e){if(qP(t=kt(t)))return _T("Unsupported field value:",e,t),BP(t,e);if(t instanceof gT)return(function(i,r){if(!FP(r.Ec))throw r.wc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.wc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,r){const o=[];let l=0;for(const c of i){let d=ff(c,r.yc(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}})(t,e)}return(function(i,r){if((i=kt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return X3(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=$t.fromDate(i);return{timestampValue:em(r.serializer,o)}}if(i instanceof $t){const o=new $t(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:em(r.serializer,o)}}if(i instanceof os)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Tr)return{bytesValue:rP(r.serializer,i._byteString)};if(i instanceof gn){const o=r.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw r.wc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:tT(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof as)return(function(l,c){return{mapValue:{fields:{[MN]:{stringValue:kN},[Jp]:{arrayValue:{values:l.toArray().map((f=>{if(typeof f!="number")throw c.wc("VectorValues must only contain numeric values.");return Q_(c.serializer,f)}))}}}}}})(i,r);throw r.wc(`Unsupported field value: ${Um(i)}`)})(t,e)}function BP(t,e){const n={};return CN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ra(t,((i,r)=>{const o=ff(r,e.Vc(i));o!=null&&(n[i]=o)})),{mapValue:{fields:n}}}function qP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof $t||t instanceof os||t instanceof Tr||t instanceof gn||t instanceof gT||t instanceof as)}function _T(t,e,n){if(!qP(n)||!xN(n)){const i=Um(n);throw i==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+i)}}function O0(t,e,n){if((e=kt(e))instanceof Xm)return e._internalPath;if(typeof e=="string")return TT(t,e);throw rm("Field path arguments must be of type string or ",t,!1,void 0,n)}const dF=new RegExp("[~\\*/\\[\\]]");function TT(t,e,n){if(e.search(dF)>=0)throw rm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xm(...e.split("."))._internalPath}catch{throw rm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function rm(t,e,n,i,r){const o=i&&!i.isEmpty(),l=r!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${r}`),d+=")"),new Se(de.INVALID_ARGUMENT,c+t+d)}function zP(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ET("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class fF extends HP{data(){return super.data()}}function ET(t,e){return typeof e=="string"?TT(t,e):e instanceof Xm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Se(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ST{}class pF extends ST{}function eg(t,e,...n){let i=[];e instanceof ST&&i.push(e),i=i.concat(n),(function(o){const l=o.filter((d=>d instanceof bT)).length,c=o.filter((d=>d instanceof tg)).length;if(l>1||l>0&&c>0)throw new Se(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const r of i)t=r._apply(t);return t}class tg extends pF{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new tg(e,n,i)}_apply(e){const n=this._parse(e);return GP(e._query,n),new Fu(e.firestore,e.converter,x0(e._query,n))}_parse(e){const n=vT(e.firestore);return(function(o,l,c,d,f,p,v){let T;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Se(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){LA(v,p);const C=[];for(const N of v)C.push(VA(d,o,N));T={arrayValue:{values:C}}}else T=VA(d,o,v)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||LA(v,p),T=cF(c,l,v,p==="in"||p==="not-in");return xn.create(f,p,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function mF(t,e,n){const i=e,r=ET("where",t);return tg._create(r,i,n)}class bT extends ST{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new bT(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:qr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(r,o){let l=r;const c=o.getFlattenedFilters();for(const d of c)GP(l,d),l=x0(l,d)})(e._query,n),new Fu(e.firestore,e.converter,x0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function VA(t,e,n){if(typeof(n=kt(n))=="string"){if(n==="")throw new Se(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zN(e)&&n.indexOf("/")!==-1)throw new Se(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Ut.fromString(n));if(!De.isDocumentKey(i))throw new Se(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Qx(t,new De(i))}if(n instanceof gn)return Qx(t,n._key);throw new Se(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Um(n)}.`)}function LA(t,e){if(!Array.isArray(t)||t.length===0)throw new Se(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function GP(t,e){const n=(function(r,o){for(const l of r)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Se(de.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Se(de.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class gF{convertValue(e,n="none"){switch(Wo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Jo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Be(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return ra(e,((r,o)=>{i[r]=this.convertValue(o,n)})),i}convertVectorValue(e){var n,i,r;const o=(r=(i=(n=e.fields)===null||n===void 0?void 0:n[Jp].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map((l=>mn(l.doubleValue)));return new as(o)}convertGeoPoint(e){return new os(mn(e.latitude),mn(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=qm(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Ud(e));default:return null}}convertTimestamp(e){const n=Yo(e);return new $t(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ut.fromString(e);St(cP(i),9688,{name:e});const r=new Fd(i.get(1),i.get(3)),o=new De(i.popFirst(5));return r.isEqual(n)||qs(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yF(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class id{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ga extends HP{constructor(e,n,i,r,o,l){super(e,n,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ap(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(ET("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(de.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ga._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ga._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ga._jsonSchema={type:An("string",Ga._jsonSchemaVersion),bundleSource:An("string","DocumentSnapshot"),bundleName:An("string"),bundle:An("string")};class Ap extends Ga{data(e={}){return super.data(e)}}class hu{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new id(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new Ap(this._firestore,this._userDataWriter,i.key,i,new id(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Se(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map((c=>{const d=new Ap(r._firestore,r._userDataWriter,c.doc.key,c.doc,new id(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((c=>o||c.type!==3)).map((c=>{const d=new Ap(r._firestore,r._userDataWriter,c.doc.key,c.doc,new id(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,p=-1;return c.type!==0&&(f=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),p=l.indexOf(c.doc.key)),{type:vF(c.type),doc:d,oldIndex:f,newIndex:p}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(de.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=hu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=j_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function vF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Be(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _F(t){t=is(t,gn);const e=is(t.firestore,tl);return eF(mT(e),t._key).then((n=>$P(e,t,n)))}hu._jsonSchemaVersion="firestore/querySnapshot/1.0",hu._jsonSchema={type:An("string",hu._jsonSchemaVersion),bundleSource:An("string","QuerySnapshot"),bundleName:An("string"),bundle:An("string")};class jP extends gF{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new gn(this.firestore,null,n)}}function TF(t,e,n,...i){t=is(t,gn);const r=is(t.firestore,tl),o=vT(r);let l;return l=typeof(e=kt(e))=="string"||e instanceof Xm?uF(o,"updateDoc",t._key,e,n,i):lF(o,"updateDoc",t._key,e),xT(r,[l.toMutation(t._key,Br.exists(!0))])}function wT(t){return xT(is(t.firestore,tl),[new X_(t._key,Br.none())])}function ng(t,e){const n=is(t.firestore,tl),i=Bu(t),r=yF(t.converter,e);return xT(n,[aF(vT(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Br.exists(!1))]).then((()=>i))}function ig(t,...e){var n,i,r;t=kt(t);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||kA(e[l])||(o=e[l++]);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(kA(e[l])){const v=e[l];e[l]=(n=v.next)===null||n===void 0?void 0:n.bind(v),e[l+1]=(i=v.error)===null||i===void 0?void 0:i.bind(v),e[l+2]=(r=v.complete)===null||r===void 0?void 0:r.bind(v)}let d,f,p;if(t instanceof gn)f=is(t.firestore,tl),p=zm(t._key.path),d={next:v=>{e[l]&&e[l]($P(f,t,v))},error:e[l+1],complete:e[l+2]};else{const v=is(t,Fu);f=is(v.firestore,tl),p=v._query;const T=new jP(f);d={next:b=>{e[l]&&e[l](new hu(f,T,v,b))},error:e[l+1],complete:e[l+2]},hF(t._query)}return(function(T,b,C,N){const D=new kP(N),O=new xP(b,D,C);return T.asyncQueue.enqueueAndForget((async()=>bP(await L0(T),O))),()=>{D.Ou(),T.asyncQueue.enqueueAndForget((async()=>wP(await L0(T),O)))}})(mT(f),p,c,d)}function xT(t,e){return(function(i,r){const o=new Ho;return i.asyncQueue.enqueueAndForget((async()=>z5(await Z5(i),r,o))),o.promise})(mT(t),e)}function $P(t,e,n){const i=n.docs.get(e._key),r=new jP(t);return new Ga(t,r,e._key,i,new id(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){Vu=r})(rl),jo(new Us("firestore",((i,{instanceIdentifier:r,options:o})=>{const l=i.getProvider("app").getImmediate(),c=new tl(new d3(i.getProvider("auth-internal")),new p3(l,i.getProvider("app-check-internal")),(function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Se(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fd(f.options.projectId,p)})(l,r),l);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c}),"PUBLIC").setMultipleInstances(!0)),Er(Ox,Ux,e),Er(Ox,Ux,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP="firebasestorage.googleapis.com",YP="storageBucket",EF=120*1e3,SF=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un extends zr{constructor(e,n,i=0){super(Fv(e),`Firebase Storage: ${n} (${Fv(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,un.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Fv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ln;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ln||(ln={}));function Fv(t){return"storage/"+t}function AT(){const t="An unknown error occurred, please check the error payload for server response.";return new un(ln.UNKNOWN,t)}function bF(t){return new un(ln.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function wF(t){return new un(ln.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function xF(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new un(ln.UNAUTHENTICATED,t)}function AF(){return new un(ln.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function CF(t){return new un(ln.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function IF(){return new un(ln.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function RF(){return new un(ln.CANCELED,"User canceled the upload/download.")}function NF(t){return new un(ln.INVALID_URL,"Invalid URL '"+t+"'.")}function PF(t){return new un(ln.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function DF(){return new un(ln.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+YP+"' property when initializing the app?")}function MF(){return new un(ln.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function kF(){return new un(ln.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function VF(t){return new un(ln.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function U0(t){return new un(ln.INVALID_ARGUMENT,t)}function JP(){return new un(ln.APP_DELETED,"The Firebase app was deleted.")}function LF(t){return new un(ln.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function yd(t,e){return new un(ln.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Gc(t){throw new un(ln.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=er.makeFromUrl(e,n)}catch{return new er(e,"")}if(i.path==="")return i;throw PF(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function o(G){G.path.charAt(G.path.length-1)==="/"&&(G.path_=G.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+r+l,"i"),d={bucket:1,path:3};function f(G){G.path_=decodeURIComponent(G.path)}const p="v[A-Za-z0-9_]+",v=n.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",b=new RegExp(`^https?://${v}/${p}/b/${r}/o${T}`,"i"),C={bucket:1,path:3},N=n===KP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,D="([^?#]*)",O=new RegExp(`^https?://${N}/${r}/${D}`,"i"),F=[{regex:c,indices:d,postModify:o},{regex:b,indices:C,postModify:f},{regex:O,indices:{bucket:1,path:2},postModify:f}];for(let G=0;G<F.length;G++){const K=F[G],H=K.regex.exec(e);if(H){const R=H[K.indices.bucket];let I=H[K.indices.path];I||(I=""),i=new er(R,I),K.postModify(i);break}}if(i==null)throw NF(e);return i}}class OF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UF(t,e,n){let i=1,r=null,o=null,l=!1,c=0;function d(){return c===2}let f=!1;function p(...D){f||(f=!0,e.apply(null,D))}function v(D){r=setTimeout(()=>{r=null,t(b,d())},D)}function T(){o&&clearTimeout(o)}function b(D,...O){if(f){T();return}if(D){T(),p.call(null,D,...O);return}if(d()||l){T(),p.call(null,D,...O);return}i<64&&(i*=2);let F;c===1?(c=2,F=0):F=(i+Math.random())*1e3,v(F)}let C=!1;function N(D){C||(C=!0,T(),!f&&(r!==null?(D||(c=2),clearTimeout(r),v(0)):D||(c=1)))}return v(0),o=setTimeout(()=>{l=!0,N(!0)},n),N}function FF(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BF(t){return t!==void 0}function qF(t){return typeof t=="object"&&!Array.isArray(t)}function CT(t){return typeof t=="string"||t instanceof String}function OA(t){return IT()&&t instanceof Blob}function IT(){return typeof Blob<"u"}function UA(t,e,n,i){if(i<e)throw U0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw U0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function WP(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var ja;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ja||(ja={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zF(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||r||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{constructor(e,n,i,r,o,l,c,d,f,p,v,T=!0,b=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=d,this.timeout_=f,this.progressCallback_=p,this.connectionFactory_=v,this.retry=T,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,N)=>{this.resolve_=C,this.reject_=N,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new Kh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=c=>{const d=c.loaded,f=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,f)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const c=o.getErrorCode()===ja.NO_ERROR,d=o.getStatus();if(!c||zF(d,this.additionalRetryCodes_)&&this.retry){const p=o.getErrorCode()===ja.ABORT;i(!1,new Kh(!1,null,p));return}const f=this.successCodes_.indexOf(d)!==-1;i(!0,new Kh(f,o))})},n=(i,r)=>{const o=this.resolve_,l=this.reject_,c=r.connection;if(r.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());BF(d)?o(d):o()}catch(d){l(d)}else if(c!==null){const d=AT();d.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,d)):l(d)}else if(r.canceled){const d=this.appDelete_?JP():RF();l(d)}else{const d=IF();l(d)}};this.canceled_?n(!1,new Kh(!1,null,!0)):this.backoffId_=UF(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&FF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Kh{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function GF(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function jF(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function $F(t,e){e&&(t["X-Firebase-GMPID"]=e)}function KF(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function YF(t,e,n,i,r,o,l=!0,c=!1){const d=WP(t.urlParams),f=t.url+d,p=Object.assign({},t.headers);return $F(p,e),GF(p,n),jF(p,o),KF(p,i),new HF(f,t.method,p,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,l,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JF(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function WF(...t){const e=JF();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(IT())return new Blob(t);throw new un(ln.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function QF(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XF(t){if(typeof atob>"u")throw VF("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Bv{constructor(e,n){this.data=e,this.contentType=n||null}}function QP(t,e){switch(t){case Or.RAW:return new Bv(XP(e));case Or.BASE64:case Or.BASE64URL:return new Bv(ZP(t,e));case Or.DATA_URL:return new Bv(eB(e),tB(e))}throw AT()}function XP(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=i,l=t.charCodeAt(++n);i=65536|(o&1023)<<10|l&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function ZF(t){let e;try{e=decodeURIComponent(t)}catch{throw yd(Or.DATA_URL,"Malformed data URL.")}return XP(e)}function ZP(t,e){switch(t){case Or.BASE64:{const r=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(r||o)throw yd(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Or.BASE64URL:{const r=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(r||o)throw yd(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=XF(e)}catch(r){throw r.message.includes("polyfill")?r:yd(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class eD{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw yd(Or.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=nB(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function eB(t){const e=new eD(t);return e.base64?ZP(Or.BASE64,e.rest):ZF(e.rest)}function tB(t){return new eD(t).contentType}function nB(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n){let i=0,r="";OA(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(OA(this.data_)){const i=this.data_,r=QF(i,e,n);return r===null?null:new ko(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new ko(i,!0)}}static getBlob(...e){if(IT()){const n=e.map(i=>i instanceof ko?i.data_:i);return new ko(WF.apply(null,n))}else{const n=e.map(l=>CT(l)?QP(Or.RAW,l).data:l.data_);let i=0;n.forEach(l=>{i+=l.byteLength});const r=new Uint8Array(i);let o=0;return n.forEach(l=>{for(let c=0;c<l.length;c++)r[o++]=l[c]}),new ko(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(t){let e;try{e=JSON.parse(t)}catch{return null}return qF(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iB(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function rB(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function nD(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sB(t,e){return e}class Ei{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||sB}}let Yh=null;function oB(t){return!CT(t)||t.length<2?t:nD(t)}function iD(){if(Yh)return Yh;const t=[];t.push(new Ei("bucket")),t.push(new Ei("generation")),t.push(new Ei("metageneration")),t.push(new Ei("name","fullPath",!0));function e(o,l){return oB(l)}const n=new Ei("name");n.xform=e,t.push(n);function i(o,l){return l!==void 0?Number(l):l}const r=new Ei("size");return r.xform=i,t.push(r),t.push(new Ei("timeCreated")),t.push(new Ei("updated")),t.push(new Ei("md5Hash",null,!0)),t.push(new Ei("cacheControl",null,!0)),t.push(new Ei("contentDisposition",null,!0)),t.push(new Ei("contentEncoding",null,!0)),t.push(new Ei("contentLanguage",null,!0)),t.push(new Ei("contentType",null,!0)),t.push(new Ei("metadata","customMetadata",!0)),Yh=t,Yh}function aB(t,e){function n(){const i=t.bucket,r=t.fullPath,o=new er(i,r);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function lB(t,e,n){const i={};i.type="file";const r=n.length;for(let o=0;o<r;o++){const l=n[o];i[l.local]=l.xform(i,e[l.server])}return aB(i,t),i}function rD(t,e,n){const i=tD(e);return i===null?null:lB(t,i,n)}function uB(t,e,n,i){const r=tD(e);if(r===null||!CT(r.downloadTokens))return null;const o=r.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(f=>{const p=t.bucket,v=t.fullPath,T="/b/"+l(p)+"/o/"+l(v),b=RT(T,n,i),C=WP({alt:"media",token:f});return b+C})[0]}function cB(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const o=e[r];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class sD{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(t){if(!t)throw AT()}function dB(t,e){function n(i,r){const o=rD(t,r,e);return oD(o!==null),o}return n}function fB(t,e){function n(i,r){const o=rD(t,r,e);return oD(o!==null),uB(o,r,t.host,t._protocol)}return n}function aD(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=AF():r=xF():n.getStatus()===402?r=wF(t.bucket):n.getStatus()===403?r=CF(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function hB(t){const e=aD(t);function n(i,r){let o=e(i,r);return i.getStatus()===404&&(o=bF(t.path)),o.serverResponse=r.serverResponse,o}return n}function pB(t,e,n){const i=e.fullServerUrl(),r=RT(i,t.host,t._protocol),o="GET",l=t.maxOperationRetryTime,c=new sD(r,o,fB(t,n),l);return c.errorHandler=hB(e),c}function mB(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function gB(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=mB(null,e)),i}function yB(t,e,n,i,r){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let F="";for(let G=0;G<2;G++)F=F+Math.random().toString().slice(2);return F}const d=c();l["Content-Type"]="multipart/related; boundary="+d;const f=gB(e,i,r),p=cB(f,n),v="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+d+`\r
Content-Type: `+f.contentType+`\r
\r
`,T=`\r
--`+d+"--",b=ko.getBlob(v,i,T);if(b===null)throw MF();const C={name:f.fullPath},N=RT(o,t.host,t._protocol),D="POST",O=t.maxUploadRetryTime,k=new sD(N,D,dB(t,n),O);return k.urlParams=C,k.headers=l,k.body=b.uploadData(),k.errorHandler=aD(e),k}class vB{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ja.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ja.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ja.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r,o){if(this.sent_)throw Gc("cannot .send() more than once");if(js(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const l in o)o.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,o[l].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Gc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Gc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Gc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Gc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class _B extends vB{initXhr(){this.xhr_.responseType="text"}}function lD(){return new _B}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n){this._service=e,n instanceof er?this._location=n:this._location=er.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new nl(e,n)}get root(){const e=new er(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return nD(this._location.path)}get storage(){return this._service}get parent(){const e=iB(this._location.path);if(e===null)return null;const n=new er(this._location.bucket,e);return new nl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw LF(e)}}function uD(t,e,n){t._throwIfRoot("uploadBytes");const i=yB(t.storage,t._location,iD(),new ko(e,!0),n);return t.storage.makeRequestWithTokens(i,lD).then(r=>({metadata:r,ref:t}))}function TB(t,e,n=Or.RAW,i){t._throwIfRoot("uploadString");const r=QP(n,e),o=Object.assign({},i);return o.contentType==null&&r.contentType!=null&&(o.contentType=r.contentType),uD(t,r.data,o)}function EB(t){t._throwIfRoot("getDownloadURL");const e=pB(t.storage,t._location,iD());return t.storage.makeRequestWithTokens(e,lD).then(n=>{if(n===null)throw kF();return n})}function SB(t,e){const n=rB(t._location.path,e),i=new er(t._location.bucket,n);return new nl(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bB(t){return/^[A-Za-z]+:\/\//.test(t)}function wB(t,e){return new nl(t,e)}function cD(t,e){if(t instanceof NT){const n=t;if(n._bucket==null)throw DF();const i=new nl(n,n._bucket);return e!=null?cD(i,e):i}else return e!==void 0?SB(t,e):t}function xB(t,e){if(e&&bB(e)){if(t instanceof NT)return wB(t,e);throw U0("To use ref(service, url), the first argument must be a Storage instance.")}else return cD(t,e)}function FA(t,e){const n=e==null?void 0:e[YP];return n==null?null:er.makeFromBucketSpec(n,t)}function AB(t,e,n,i={}){t.host=`${e}:${n}`;const r=js(e);r&&(Dm(`https://${t.host}/b`),Mm("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:o}=i;o&&(t._overrideAuthToken=typeof o=="string"?o:N1(o,t.app.options.projectId))}class NT{constructor(e,n,i,r,o,l=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._isUsingEmulator=l,this._bucket=null,this._host=KP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=EF,this._maxUploadRetryTime=SF,this._requests=new Set,r!=null?this._bucket=er.makeFromBucketSpec(r,this._host):this._bucket=FA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=er.makeFromBucketSpec(this._url,e):this._bucket=FA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){UA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){UA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Si(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new nl(this,e)}_makeRequest(e,n,i,r,o=!0){if(this._deleted)return new OF(JP());{const l=YF(e,this._appId,i,r,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const BA="@firebase/storage",qA="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD="storage";function CB(t,e,n){return t=kt(t),uD(t,e,n)}function IB(t,e,n,i){return t=kt(t),TB(t,e,n,i)}function fD(t){return t=kt(t),EB(t)}function hD(t,e){return t=kt(t),xB(t,e)}function RB(t=km(),e){t=kt(t);const i=ef(t,dD).getImmediate({identifier:e}),r=N_("storage");return r&&NB(i,...r),i}function NB(t,e,n,i={}){AB(t,e,n,i)}function PB(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new NT(n,i,r,e,rl)}function DB(){jo(new Us(dD,PB,"PUBLIC").setMultipleInstances(!0)),Er(BA,qA,""),Er(BA,qA,"esm2017")}DB();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MB="type.googleapis.com/google.protobuf.Int64Value",kB="type.googleapis.com/google.protobuf.UInt64Value";function pD(t,e){const n={};for(const i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}function sm(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>sm(e));if(typeof t=="function"||typeof t=="object")return pD(t,e=>sm(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Au(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case MB:case kB:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Au(e)):typeof t=="function"||typeof t=="object"?pD(t,e=>Au(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qi extends zr{constructor(e,n,i){super(`${PT}/${e}`,n||""),this.details=i,Object.setPrototypeOf(this,qi.prototype)}}function VB(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function om(t,e){let n=VB(t),i=n,r;try{const o=e&&e.error;if(o){const l=o.status;if(typeof l=="string"){if(!zA[l])return new qi("internal","internal");n=zA[l],i=l}const c=o.message;typeof c=="string"&&(i=c),r=o.details,r!==void 0&&(r=Au(r))}}catch{}return n==="ok"?null:new qi(n,i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{constructor(e,n,i,r){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Si(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||n.get().then(o=>this.auth=o,()=>{}),this.messaging||i.get().then(o=>this.messaging=o,()=>{}),this.appCheck||r==null||r.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),i=await this.getMessagingToken(),r=await this.getAppCheckToken(e);return{authToken:n,messagingToken:i,appCheckToken:r}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="us-central1",OB=/^data: (.*?)(?:\n|$)/;function UB(t){let e=null;return{promise:new Promise((n,i)=>{e=setTimeout(()=>{i(new qi("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class FB{constructor(e,n,i,r,o=F0,l=(...c)=>fetch(...c)){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new LB(e,n,i,r),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(o);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=F0}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function BB(t,e,n){const i=js(e);t.emulatorOrigin=`http${i?"s":""}://${e}:${n}`,i&&(Dm(t.emulatorOrigin),Mm("Functions",!0))}function qB(t,e,n){const i=r=>HB(t,e,r,{});return i.stream=(r,o)=>jB(t,e,r,o),i}async function zB(t,e,n,i){n["Content-Type"]="application/json";let r;try{r=await i(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let o=null;try{o=await r.json()}catch{}return{status:r.status,json:o}}async function mD(t,e){const n={},i=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(n.Authorization="Bearer "+i.authToken),i.messagingToken&&(n["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=i.appCheckToken),n}function HB(t,e,n,i){const r=t._url(e);return GB(t,r,n,i)}async function GB(t,e,n,i){n=sm(n);const r={data:n},o=await mD(t,i),l=i.timeout||7e4,c=UB(l),d=await Promise.race([zB(e,r,o,t.fetchImpl),c.promise,t.cancelAllRequests]);if(c.cancel(),!d)throw new qi("cancelled","Firebase Functions instance was deleted.");const f=om(d.status,d.json);if(f)throw f;if(!d.json)throw new qi("internal","Response is not valid JSON object.");let p=d.json.data;if(typeof p>"u"&&(p=d.json.result),typeof p>"u")throw new qi("internal","Response is missing data field.");return{data:Au(p)}}function jB(t,e,n,i){const r=t._url(e);return $B(t,r,n,i||{})}async function $B(t,e,n,i){var r;n=sm(n);const o={data:n},l=await mD(t,i);l["Content-Type"]="application/json",l.Accept="text/event-stream";let c;try{c=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:l,signal:i==null?void 0:i.signal})}catch(b){if(b instanceof Error&&b.name==="AbortError"){const N=new qi("cancelled","Request was cancelled.");return{data:Promise.reject(N),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(N)}}}}}}const C=om(0,null);return{data:Promise.reject(C),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(C)}}}}}}let d,f;const p=new Promise((b,C)=>{d=b,f=C});(r=i==null?void 0:i.signal)===null||r===void 0||r.addEventListener("abort",()=>{const b=new qi("cancelled","Request was cancelled.");f(b)});const v=c.body.getReader(),T=KB(v,d,f,i==null?void 0:i.signal);return{stream:{[Symbol.asyncIterator](){const b=T.getReader();return{async next(){const{value:C,done:N}=await b.read();return{value:C,done:N}},async return(){return await b.cancel(),{done:!0,value:void 0}}}}},data:p}}function KB(t,e,n,i){const r=(l,c)=>{const d=l.match(OB);if(!d)return;const f=d[1];try{const p=JSON.parse(f);if("result"in p){e(Au(p.result));return}if("message"in p){c.enqueue(Au(p.message));return}if("error"in p){const v=om(0,p);c.error(v),n(v);return}}catch(p){if(p instanceof qi){c.error(p),n(p);return}}},o=new TextDecoder;return new ReadableStream({start(l){let c="";return d();async function d(){if(i!=null&&i.aborted){const f=new qi("cancelled","Request was cancelled");return l.error(f),n(f),Promise.resolve()}try{const{value:f,done:p}=await t.read();if(p){c.trim()&&r(c.trim(),l),l.close();return}if(i!=null&&i.aborted){const T=new qi("cancelled","Request was cancelled");l.error(T),n(T),await t.cancel();return}c+=o.decode(f,{stream:!0});const v=c.split(`
`);c=v.pop()||"";for(const T of v)T.trim()&&r(T.trim(),l);return d()}catch(f){const p=f instanceof qi?f:om(0,null);l.error(p),n(p)}}},cancel(){return t.cancel()}})}const HA="@firebase/functions",GA="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YB="auth-internal",JB="app-check-internal",WB="messaging-internal";function QB(t){const e=(n,{instanceIdentifier:i})=>{const r=n.getProvider("app").getImmediate(),o=n.getProvider(YB),l=n.getProvider(WB),c=n.getProvider(JB);return new FB(r,o,l,c,i)};jo(new Us(PT,e,"PUBLIC").setMultipleInstances(!0)),Er(HA,GA,t),Er(HA,GA,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XB(t=km(),e=F0){const i=ef(kt(t),PT).getImmediate({identifier:e}),r=N_("functions");return r&&ZB(i,...r),i}function ZB(t,e,n){BB(kt(t),e,n)}function e9(t,e,n){return qB(kt(t),e)}QB();const t9={apiKey:"AIzaSyAoMQ8oVPP5oFjw8YzgF0H1Dy4DAJmNaKM",authDomain:"dresscode-ai-32c50.firebaseapp.com",projectId:"dresscode-ai-32c50",storageBucket:"dresscode-ai-32c50.firebasestorage.app",messagingSenderId:"215593114437",appId:"1:215593114437:web:5d9c1f3161182802f37c2c"},rg=M1(t9),Oa=s3(rg),n9=new Ds,ir=nF(rg),gD=RB(rg),i9=XB(rg,"us-central1");/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let r9,s9;function o9(){return{geminiUrl:r9,vertexUrl:s9}}function a9(t,e,n,i){var r,o;if(!(t!=null&&t.baseUrl)){const l=o9();return e?(r=l.vertexUrl)!==null&&r!==void 0?r:n:(o=l.geminiUrl)!==null&&o!==void 0?o:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $s{}function _e(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const o=e[r];return o!=null?String(o):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function y(t,e,n){for(let o=0;o<e.length-1;o++){const l=e[o];if(l.endsWith("[]")){const c=l.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(t[c])){const d=t[c];if(Array.isArray(n))for(let f=0;f<d.length;f++){const p=d[f];y(p,e.slice(o+1),n[f])}else for(const f of d)y(f,e.slice(o+1),n)}return}else if(l.endsWith("[0]")){const c=l.slice(0,-3);c in t||(t[c]=[{}]);const d=t[c];y(d[0],e.slice(o+1),n);return}(!t[l]||typeof t[l]!="object")&&(t[l]={}),t=t[l]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function m(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const r=e[i];if(r.endsWith("[]")){const o=r.slice(0,-2);if(o in t){const l=t[o];return Array.isArray(l)?l.map(c=>m(c,e.slice(i+1),n)):n}else return n}else t=t[r]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function l9(t,e){for(const[n,i]of Object.entries(e)){const r=n.split("."),o=i.split("."),l=new Set;let c=-1;for(let d=0;d<r.length;d++)if(r[d]==="*"){c=d;break}if(c!==-1&&o.length>c)for(let d=c;d<o.length;d++){const f=o[d];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&l.add(f)}B0(t,r,o,0,l)}}function B0(t,e,n,i,r){if(i>=e.length||typeof t!="object"||t===null)return;const o=e[i];if(o.endsWith("[]")){const l=o.slice(0,-2),c=t;if(l in c&&Array.isArray(c[l]))for(const d of c[l])B0(d,e,n,i+1,r)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const l=t,c=Object.keys(l).filter(f=>!f.startsWith("_")&&!r.has(f)),d={};for(const f of c)d[f]=l[f];for(const[f,p]of Object.entries(d)){const v=[];for(const T of n.slice(i))T==="*"?v.push(f):v.push(T);y(l,v,p)}for(const f of c)delete l[f]}}else{const l=t;o in l&&B0(l[o],e,n,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DT(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function u9(t){const e={},n=m(t,["operationName"]);n!=null&&y(e,["operationName"],n);const i=m(t,["resourceName"]);return i!=null&&y(e,["_url","resourceName"],i),e}function c9(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response","generateVideoResponse"]);return l!=null&&y(e,["response"],f9(l)),e}function d9(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response"]);return l!=null&&y(e,["response"],h9(l)),e}function f9(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>p9(l))),y(e,["generatedVideos"],o)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const r=m(t,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function h9(t){const e={},n=m(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>m9(l))),y(e,["generatedVideos"],o)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const r=m(t,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function p9(t){const e={},n=m(t,["video"]);return n!=null&&y(e,["video"],E9(n)),e}function m9(t){const e={},n=m(t,["_self"]);return n!=null&&y(e,["video"],S9(n)),e}function g9(t){const e={},n=m(t,["operationName"]);return n!=null&&y(e,["_url","operationName"],n),e}function y9(t){const e={},n=m(t,["operationName"]);return n!=null&&y(e,["_url","operationName"],n),e}function v9(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response"]);return l!=null&&y(e,["response"],_9(l)),e}function _9(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["parent"]);i!=null&&y(e,["parent"],i);const r=m(t,["documentName"]);return r!=null&&y(e,["documentName"],r),e}function yD(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response"]);return l!=null&&y(e,["response"],T9(l)),e}function T9(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["parent"]);i!=null&&y(e,["parent"],i);const r=m(t,["documentName"]);return r!=null&&y(e,["documentName"],r),e}function E9(t){const e={},n=m(t,["uri"]);n!=null&&y(e,["uri"],n);const i=m(t,["encodedVideo"]);i!=null&&y(e,["videoBytes"],DT(i));const r=m(t,["encoding"]);return r!=null&&y(e,["mimeType"],r),e}function S9(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&y(e,["videoBytes"],DT(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var jA;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(jA||(jA={}));var $A;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})($A||($A={}));var KA;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(KA||(KA={}));var Ge;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Ge||(Ge={}));var YA;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(YA||(YA={}));var JA;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(JA||(JA={}));var WA;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(WA||(WA={}));var QA;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(QA||(QA={}));var XA;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(XA||(XA={}));var ZA;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(ZA||(ZA={}));var eC;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(eC||(eC={}));var tC;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(tC||(tC={}));var nC;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(nC||(nC={}));var iC;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(iC||(iC={}));var rC;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(rC||(rC={}));var sC;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(sC||(sC={}));var oC;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(oC||(oC={}));var aC;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(aC||(aC={}));var lC;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(lC||(lC={}));var am;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(am||(am={}));var uC;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(uC||(uC={}));var cC;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(cC||(cC={}));var dC;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(dC||(dC={}));var q0;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(q0||(q0={}));var fC;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(fC||(fC={}));var hC;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(hC||(hC={}));var pC;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(pC||(pC={}));var mC;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(mC||(mC={}));var gC;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(gC||(gC={}));var yC;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(yC||(yC={}));var vC;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(vC||(vC={}));var _C;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(_C||(_C={}));var TC;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(TC||(TC={}));var EC;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(EC||(EC={}));var SC;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(SC||(SC={}));var bC;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(bC||(bC={}));var wC;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(wC||(wC={}));var xC;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(xC||(xC={}));var AC;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(AC||(AC={}));var CC;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(CC||(CC={}));var IC;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(IC||(IC={}));var RC;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(RC||(RC={}));var NC;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(NC||(NC={}));var PC;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(PC||(PC={}));var DC;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(DC||(DC={}));var MC;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(MC||(MC={}));var kC;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(kC||(kC={}));var VC;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(VC||(VC={}));var LC;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(LC||(LC={}));var OC;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(OC||(OC={}));var UC;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(UC||(UC={}));var FC;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(FC||(FC={}));var BC;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(BC||(BC={}));var qC;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(qC||(qC={}));var nu;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(nu||(nu={}));class z0{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class jc{get text(){var e,n,i,r,o,l,c,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",p=!1;const v=[];for(const T of(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[b,C]of Object.entries(T))b!=="text"&&b!=="thought"&&b!=="thoughtSignature"&&(C!==null||C!==void 0)&&v.push(b);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;p=!0,f+=T.text}}return v.length>0&&console.warn(`there are non-text parts ${v} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?f:void 0}get data(){var e,n,i,r,o,l,c,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const p=[];for(const v of(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[T,b]of Object.entries(v))T!=="inlineData"&&(b!==null||b!==void 0)&&p.push(T);v.inlineData&&typeof v.inlineData.data=="string"&&(f+=atob(v.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,n,i,r,o,l,c,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,n,i,r,o,l,c,d,f;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(v=>v.executableCode).map(v=>v.executableCode).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return(f=p==null?void 0:p[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,n,i,r,o,l,c,d,f;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(v=>v.codeExecutionResult).map(v=>v.codeExecutionResult).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return(f=p==null?void 0:p[0])===null||f===void 0?void 0:f.output}}class zC{}class HC{}class b9{}class w9{}class x9{}class A9{}class GC{}class jC{}class $C{}class C9{}class lm{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new lm;let r;const o=e;return n?r=d9(o):r=c9(o),Object.assign(i,r),i}}class KC{}class YC{}class JC{}class WC{}class I9{}class R9{}class N9{}class MT{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new MT,o=v9(e);return Object.assign(i,o),i}}class P9{}class D9{}class M9{}class QC{}class k9{get text(){var e,n,i;let r="",o=!1;const l=[];for(const c of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[d,f]of Object.entries(c))d!=="text"&&d!=="thought"&&f!==null&&l.push(d);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;o=!0,r+=c.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?r:void 0}get data(){var e,n,i;let r="";const o=[];for(const l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,d]of Object.entries(l))c!=="inlineData"&&d!==null&&o.push(c);l.inlineData&&typeof l.inlineData.data=="string"&&(r+=atob(l.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class V9{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class kT{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new kT,o=yD(e);return Object.assign(i,o),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function vD(t,e){const n=yt(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function _D(t){return Array.isArray(t)?t.map(e=>um(e)):[um(t)]}function um(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function TD(t){const e=um(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ED(t){const e=um(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function XC(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function SD(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>XC(e)):[XC(t)]}function H0(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function ZC(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function eI(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function ai(t){if(t==null)throw new Error("ContentUnion is required");return H0(t)?t:{role:"user",parts:SD(t)}}function VT(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=ai(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=ai(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>ai(n)):[ai(e)]}function Sr(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(ZC(t)||eI(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ai(t)]}const e=[],n=[],i=H0(t[0]);for(const r of t){const o=H0(r);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(r);else{if(ZC(r)||eI(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:SD(n)}),e}function L9(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(Ge).includes(n[0].toUpperCase())?n[0].toUpperCase():Ge.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(Ge).includes(i.toUpperCase())?i.toUpperCase():Ge.TYPE_UNSPECIFIED})}}function pu(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&L9(t.type,e);for(const[l,c]of Object.entries(t))if(c!=null)if(l=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(Ge).includes(c.toUpperCase())?c.toUpperCase():Ge.TYPE_UNSPECIFIED}else if(n.includes(l))e[l]=pu(c);else if(i.includes(l)){const d=[];for(const f of c){if(f.type=="null"){e.nullable=!0;continue}d.push(pu(f))}e[l]=d}else if(r.includes(l)){const d={};for(const[f,p]of Object.entries(c))d[f]=pu(p);e[l]=d}else{if(l==="additionalProperties")continue;e[l]=c}return e}function LT(t){return pu(t)}function OT(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function UT(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function qu(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=pu(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=pu(e.response));return t}function zu(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function O9(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Ks(t,e){if(typeof e!="string")throw new Error("name must be a string");return O9(t,e,"cachedContents")}function bD(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function aa(t){return DT(t)}function U9(t){return t!=null&&typeof t=="object"&&"name"in t}function F9(t){return t!=null&&typeof t=="object"&&"video"in t}function B9(t){return t!=null&&typeof t=="object"&&"uri"in t}function wD(t){var e;let n;if(U9(t)&&(n=t.name),!(B9(t)&&(n=t.uri,n===void 0))&&!(F9(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function xD(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function AD(t){for(const e of["models","tunedModels","publisherModels"])if(q9(t,e))return t[e];return[]}function q9(t,e){return t!==null&&typeof t=="object"&&e in t}function z9(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function H9(t,e={}){const n=[],i=new Set;for(const r of t){const o=r.name;if(i.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);i.add(o);const l=z9(r,e);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function CD(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function G9(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function ID(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let o=!1;for(const l of r){if(typeof l!="object"||l===null)continue;const d=l.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Hu(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function RD(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function j9(t){const e={},n=m(t,["responsesFile"]);n!=null&&y(e,["fileName"],n);const i=m(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>xq(l))),y(e,["inlinedResponses"],o)}const r=m(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["inlinedEmbedContentResponses"],o)}return e}function $9(t){const e={},n=m(t,["predictionsFormat"]);n!=null&&y(e,["format"],n);const i=m(t,["gcsDestination","outputUriPrefix"]);i!=null&&y(e,["gcsUri"],i);const r=m(t,["bigqueryDestination","outputUri"]);return r!=null&&y(e,["bigqueryUri"],r),e}function K9(t){const e={},n=m(t,["format"]);n!=null&&y(e,["predictionsFormat"],n);const i=m(t,["gcsUri"]);i!=null&&y(e,["gcsDestination","outputUriPrefix"],i);const r=m(t,["bigqueryUri"]);if(r!=null&&y(e,["bigqueryDestination","outputUri"],r),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(m(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Cp(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata","displayName"]);i!=null&&y(e,["displayName"],i);const r=m(t,["metadata","state"]);r!=null&&y(e,["state"],RD(r));const o=m(t,["metadata","createTime"]);o!=null&&y(e,["createTime"],o);const l=m(t,["metadata","endTime"]);l!=null&&y(e,["endTime"],l);const c=m(t,["metadata","updateTime"]);c!=null&&y(e,["updateTime"],c);const d=m(t,["metadata","model"]);d!=null&&y(e,["model"],d);const f=m(t,["metadata","output"]);return f!=null&&y(e,["dest"],j9(ID(f))),e}function G0(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["displayName"]);i!=null&&y(e,["displayName"],i);const r=m(t,["state"]);r!=null&&y(e,["state"],RD(r));const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["createTime"]);l!=null&&y(e,["createTime"],l);const c=m(t,["startTime"]);c!=null&&y(e,["startTime"],c);const d=m(t,["endTime"]);d!=null&&y(e,["endTime"],d);const f=m(t,["updateTime"]);f!=null&&y(e,["updateTime"],f);const p=m(t,["model"]);p!=null&&y(e,["model"],p);const v=m(t,["inputConfig"]);v!=null&&y(e,["src"],Y9(v));const T=m(t,["outputConfig"]);T!=null&&y(e,["dest"],$9(ID(T)));const b=m(t,["completionStats"]);return b!=null&&y(e,["completionStats"],b),e}function Y9(t){const e={},n=m(t,["instancesFormat"]);n!=null&&y(e,["format"],n);const i=m(t,["gcsSource","uris"]);i!=null&&y(e,["gcsUri"],i);const r=m(t,["bigquerySource","inputUri"]);return r!=null&&y(e,["bigqueryUri"],r),e}function J9(t,e){const n={};if(m(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(m(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=m(e,["fileName"]);i!=null&&y(n,["fileName"],i);const r=m(e,["inlinedRequests"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>wq(t,l))),y(n,["requests","requests"],o)}return n}function W9(t){const e={},n=m(t,["format"]);n!=null&&y(e,["instancesFormat"],n);const i=m(t,["gcsUri"]);i!=null&&y(e,["gcsSource","uris"],i);const r=m(t,["bigqueryUri"]);if(r!=null&&y(e,["bigquerySource","inputUri"],r),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Q9(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function X9(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Hu(t,i)),n}function Z9(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Hu(t,i)),n}function eq(t){const e={},n=m(t,["content"]);n!=null&&y(e,["content"],n);const i=m(t,["citationMetadata"]);i!=null&&y(e,["citationMetadata"],tq(i));const r=m(t,["tokenCount"]);r!=null&&y(e,["tokenCount"],r);const o=m(t,["finishReason"]);o!=null&&y(e,["finishReason"],o);const l=m(t,["avgLogprobs"]);l!=null&&y(e,["avgLogprobs"],l);const c=m(t,["groundingMetadata"]);c!=null&&y(e,["groundingMetadata"],c);const d=m(t,["index"]);d!=null&&y(e,["index"],d);const f=m(t,["logprobsResult"]);f!=null&&y(e,["logprobsResult"],f);const p=m(t,["safetyRatings"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(b=>b)),y(e,["safetyRatings"],T)}const v=m(t,["urlContextMetadata"]);return v!=null&&y(e,["urlContextMetadata"],v),e}function tq(t){const e={},n=m(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),y(e,["citations"],i)}return e}function ND(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>Dq(o))),y(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function nq(t,e){const n={},i=m(t,["displayName"]);if(e!==void 0&&i!=null&&y(e,["batch","displayName"],i),m(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function iq(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const r=m(t,["dest"]);return e!==void 0&&r!=null&&y(e,["outputConfig"],K9(G9(r))),n}function tI(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["src"]);r!=null&&y(n,["batch","inputConfig"],J9(t,CD(t,r)));const o=m(e,["config"]);return o!=null&&nq(o,n),n}function rq(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["model"],yt(t,i));const r=m(e,["src"]);r!=null&&y(n,["inputConfig"],W9(CD(t,r)));const o=m(e,["config"]);return o!=null&&iq(o,n),n}function sq(t,e){const n={},i=m(t,["displayName"]);return e!==void 0&&i!=null&&y(e,["batch","displayName"],i),n}function oq(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["src"]);r!=null&&y(n,["batch","inputConfig"],hq(t,r));const o=m(e,["config"]);return o!=null&&sq(o,n),n}function aq(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Hu(t,i)),n}function lq(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Hu(t,i)),n}function uq(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);return o!=null&&y(e,["error"],o),e}function cq(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);return o!=null&&y(e,["error"],o),e}function dq(t,e){const n={},i=m(e,["contents"]);if(i!=null){let o=VT(t,i);Array.isArray(o)&&(o=o.map(l=>l)),y(n,["requests[]","request","content"],o)}const r=m(e,["config"]);return r!=null&&(y(n,["_self"],fq(r,n)),l9(n,{"requests[].*":"requests[].request.*"})),n}function fq(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&y(e,["requests[]","taskType"],i);const r=m(t,["title"]);e!==void 0&&r!=null&&y(e,["requests[]","title"],r);const o=m(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&y(e,["requests[]","outputDimensionality"],o),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function hq(t,e){const n={},i=m(e,["fileName"]);i!=null&&y(n,["file_name"],i);const r=m(e,["inlinedRequests"]);return r!=null&&y(n,["requests"],dq(t,r)),n}function pq(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function mq(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const i=m(t,["args"]);i!=null&&y(e,["args"],i);const r=m(t,["name"]);if(r!=null&&y(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function gq(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const i=m(t,["allowedFunctionNames"]);if(i!=null&&y(e,["allowedFunctionNames"],i),m(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function yq(t,e,n){const i={},r=m(e,["systemInstruction"]);n!==void 0&&r!=null&&y(n,["systemInstruction"],ND(ai(r)));const o=m(e,["temperature"]);o!=null&&y(i,["temperature"],o);const l=m(e,["topP"]);l!=null&&y(i,["topP"],l);const c=m(e,["topK"]);c!=null&&y(i,["topK"],c);const d=m(e,["candidateCount"]);d!=null&&y(i,["candidateCount"],d);const f=m(e,["maxOutputTokens"]);f!=null&&y(i,["maxOutputTokens"],f);const p=m(e,["stopSequences"]);p!=null&&y(i,["stopSequences"],p);const v=m(e,["responseLogprobs"]);v!=null&&y(i,["responseLogprobs"],v);const T=m(e,["logprobs"]);T!=null&&y(i,["logprobs"],T);const b=m(e,["presencePenalty"]);b!=null&&y(i,["presencePenalty"],b);const C=m(e,["frequencyPenalty"]);C!=null&&y(i,["frequencyPenalty"],C);const N=m(e,["seed"]);N!=null&&y(i,["seed"],N);const D=m(e,["responseMimeType"]);D!=null&&y(i,["responseMimeType"],D);const O=m(e,["responseSchema"]);O!=null&&y(i,["responseSchema"],LT(O));const k=m(e,["responseJsonSchema"]);if(k!=null&&y(i,["responseJsonSchema"],k),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const F=m(e,["safetySettings"]);if(n!==void 0&&F!=null){let V=F;Array.isArray(V)&&(V=V.map(z=>Mq(z))),y(n,["safetySettings"],V)}const G=m(e,["tools"]);if(n!==void 0&&G!=null){let V=zu(G);Array.isArray(V)&&(V=V.map(z=>Vq(qu(z)))),y(n,["tools"],V)}const K=m(e,["toolConfig"]);if(n!==void 0&&K!=null&&y(n,["toolConfig"],kq(K)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const H=m(e,["cachedContent"]);n!==void 0&&H!=null&&y(n,["cachedContent"],Ks(t,H));const R=m(e,["responseModalities"]);R!=null&&y(i,["responseModalities"],R);const I=m(e,["mediaResolution"]);I!=null&&y(i,["mediaResolution"],I);const P=m(e,["speechConfig"]);if(P!=null&&y(i,["speechConfig"],OT(P)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=m(e,["thinkingConfig"]);U!=null&&y(i,["thinkingConfig"],U);const q=m(e,["imageConfig"]);return q!=null&&y(i,["imageConfig"],bq(q)),i}function vq(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(f=>eq(f))),y(e,["candidates"],d)}const r=m(t,["modelVersion"]);r!=null&&y(e,["modelVersion"],r);const o=m(t,["promptFeedback"]);o!=null&&y(e,["promptFeedback"],o);const l=m(t,["responseId"]);l!=null&&y(e,["responseId"],l);const c=m(t,["usageMetadata"]);return c!=null&&y(e,["usageMetadata"],c),e}function _q(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Hu(t,i)),n}function Tq(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Hu(t,i)),n}function Eq(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function Sq(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function bq(t){const e={},n=m(t,["aspectRatio"]);n!=null&&y(e,["aspectRatio"],n);const i=m(t,["imageSize"]);if(i!=null&&y(e,["imageSize"],i),m(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(m(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function wq(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["request","model"],yt(t,i));const r=m(e,["contents"]);if(r!=null){let c=Sr(r);Array.isArray(c)&&(c=c.map(d=>ND(d))),y(n,["request","contents"],c)}const o=m(e,["metadata"]);o!=null&&y(n,["metadata"],o);const l=m(e,["config"]);return l!=null&&y(n,["request","generationConfig"],yq(t,l,m(n,["request"],{}))),n}function xq(t){const e={},n=m(t,["response"]);n!=null&&y(e,["response"],vq(n));const i=m(t,["error"]);return i!=null&&y(e,["error"],i),e}function Aq(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);if(e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),m(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Cq(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);e!==void 0&&r!=null&&y(e,["_query","pageToken"],r);const o=m(t,["filter"]);return e!==void 0&&o!=null&&y(e,["_query","filter"],o),n}function Iq(t){const e={},n=m(t,["config"]);return n!=null&&Aq(n,e),e}function Rq(t){const e={},n=m(t,["config"]);return n!=null&&Cq(n,e),e}function Nq(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["operations"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>Cp(l))),y(e,["batchJobs"],o)}return e}function Pq(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["batchPredictionJobs"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>G0(l))),y(e,["batchJobs"],o)}return e}function Dq(t){const e={},n=m(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],pq(o));const l=m(t,["functionCall"]);l!=null&&y(e,["functionCall"],mq(l));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=m(t,["inlineData"]);d!=null&&y(e,["inlineData"],Q9(d));const f=m(t,["text"]);f!=null&&y(e,["text"],f);const p=m(t,["thought"]);p!=null&&y(e,["thought"],p);const v=m(t,["thoughtSignature"]);v!=null&&y(e,["thoughtSignature"],v);const T=m(t,["videoMetadata"]);return T!=null&&y(e,["videoMetadata"],T),e}function Mq(t){const e={},n=m(t,["category"]);if(n!=null&&y(e,["category"],n),m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=m(t,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function kq(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&y(e,["functionCallingConfig"],gq(n));const i=m(t,["retrievalConfig"]);return i!=null&&y(e,["retrievalConfig"],i),e}function Vq(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(v=>v)),y(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&y(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],Eq(c));const d=m(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],Sq(d));const f=m(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Hs;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Hs||(Hs={}));class al{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!i||Object.keys(i).length===0?l={config:{}}:typeof i=="object"?l=Object.assign({},i):l=i,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(o=(r=l.config)===null||r===void 0?void 0:r.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lq extends $s{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new al(Hs.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=tI(this.apiClient,e),i=n._url,r=_e("{model}:batchGenerateContent",i),c=n.batch.inputConfig.requests,d=c.requests,f=[];for(const p of d){const v=Object.assign({},p);if(v.systemInstruction){const T=v.systemInstruction;delete v.systemInstruction;const b=v.request;b.systemInstruction=T,v.request=b}f.push(v)}return c.requests=f,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const o=this.getGcsUri(e),l=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?i.dest=`${o.slice(0,-6)}/dest`:i.dest=`${o}_dest_${r}`;else if(l)i.dest=`${l}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=rq(this.apiClient,e);return c=_e("batchPredictionJobs",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>G0(p))}else{const f=tI(this.apiClient,e);return c=_e("{model}:batchGenerateContent",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>Cp(p))}}async createEmbeddingsInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=oq(this.apiClient,e);return o=_e("{model}:asyncBatchEmbedContent",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>Cp(d))}}async get(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=Tq(this.apiClient,e);return c=_e("batchPredictionJobs/{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>G0(p))}else{const f=_q(this.apiClient,e);return c=_e("batches/{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>Cp(p))}}async cancel(e){var n,i,r,o;let l="",c={};if(this.apiClient.isVertexAI()){const d=Z9(this.apiClient,e);l=_e("batchPredictionJobs/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=X9(this.apiClient,e);l=_e("batches/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=Rq(e);return c=_e("batchPredictionJobs",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=Pq(p),T=new QC;return Object.assign(T,v),T})}else{const f=Iq(e);return c=_e("batches",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=Nq(p),T=new QC;return Object.assign(T,v),T})}}async delete(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=lq(this.apiClient,e);return c=_e("batchPredictionJobs/{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>cq(p))}else{const f=aq(this.apiClient,e);return c=_e("batches/{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>uq(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Oq(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function nI(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>oz(o))),y(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function Uq(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const r=m(t,["expireTime"]);e!==void 0&&r!=null&&y(e,["expireTime"],r);const o=m(t,["displayName"]);e!==void 0&&o!=null&&y(e,["displayName"],o);const l=m(t,["contents"]);if(e!==void 0&&l!=null){let p=Sr(l);Array.isArray(p)&&(p=p.map(v=>nI(v))),y(e,["contents"],p)}const c=m(t,["systemInstruction"]);e!==void 0&&c!=null&&y(e,["systemInstruction"],nI(ai(c)));const d=m(t,["tools"]);if(e!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(v=>lz(v))),y(e,["tools"],p)}const f=m(t,["toolConfig"]);if(e!==void 0&&f!=null&&y(e,["toolConfig"],az(f)),m(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Fq(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const r=m(t,["expireTime"]);e!==void 0&&r!=null&&y(e,["expireTime"],r);const o=m(t,["displayName"]);e!==void 0&&o!=null&&y(e,["displayName"],o);const l=m(t,["contents"]);if(e!==void 0&&l!=null){let v=Sr(l);Array.isArray(v)&&(v=v.map(T=>T)),y(e,["contents"],v)}const c=m(t,["systemInstruction"]);e!==void 0&&c!=null&&y(e,["systemInstruction"],ai(c));const d=m(t,["tools"]);if(e!==void 0&&d!=null){let v=d;Array.isArray(v)&&(v=v.map(T=>uz(T))),y(e,["tools"],v)}const f=m(t,["toolConfig"]);e!==void 0&&f!=null&&y(e,["toolConfig"],f);const p=m(t,["kmsKeyName"]);return e!==void 0&&p!=null&&y(e,["encryption_spec","kmsKeyName"],p),n}function Bq(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["model"],vD(t,i));const r=m(e,["config"]);return r!=null&&Uq(r,n),n}function qq(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["model"],vD(t,i));const r=m(e,["config"]);return r!=null&&Fq(r,n),n}function zq(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Ks(t,i)),n}function Hq(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Ks(t,i)),n}function Gq(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function jq(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function $q(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Kq(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const i=m(t,["args"]);i!=null&&y(e,["args"],i);const r=m(t,["name"]);if(r!=null&&y(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Yq(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const i=m(t,["allowedFunctionNames"]);if(i!=null&&y(e,["allowedFunctionNames"],i),m(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Jq(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&y(e,["description"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const r=m(t,["parameters"]);r!=null&&y(e,["parameters"],r);const o=m(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const l=m(t,["response"]);l!=null&&y(e,["response"],l);const c=m(t,["responseJsonSchema"]);return c!=null&&y(e,["responseJsonSchema"],c),e}function Wq(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Ks(t,i)),n}function Qq(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Ks(t,i)),n}function Xq(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function Zq(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function ez(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),n}function tz(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),n}function nz(t){const e={},n=m(t,["config"]);return n!=null&&ez(n,e),e}function iz(t){const e={},n=m(t,["config"]);return n!=null&&tz(n,e),e}function rz(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["cachedContents"],o)}return e}function sz(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["cachedContents"],o)}return e}function oz(t){const e={},n=m(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],$q(o));const l=m(t,["functionCall"]);l!=null&&y(e,["functionCall"],Kq(l));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=m(t,["inlineData"]);d!=null&&y(e,["inlineData"],Oq(d));const f=m(t,["text"]);f!=null&&y(e,["text"],f);const p=m(t,["thought"]);p!=null&&y(e,["thought"],p);const v=m(t,["thoughtSignature"]);v!=null&&y(e,["thoughtSignature"],v);const T=m(t,["videoMetadata"]);return T!=null&&y(e,["videoMetadata"],T),e}function az(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&y(e,["functionCallingConfig"],Yq(n));const i=m(t,["retrievalConfig"]);return i!=null&&y(e,["retrievalConfig"],i),e}function lz(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(v=>v)),y(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&y(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],Xq(c));const d=m(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],Zq(d));const f=m(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}function uz(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(T=>Jq(T))),y(e,["functionDeclarations"],v)}const i=m(t,["retrieval"]);i!=null&&y(e,["retrieval"],i);const r=m(t,["googleSearchRetrieval"]);r!=null&&y(e,["googleSearchRetrieval"],r);const o=m(t,["computerUse"]);if(o!=null&&y(e,["computerUse"],o),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=m(t,["codeExecution"]);l!=null&&y(e,["codeExecution"],l);const c=m(t,["enterpriseWebSearch"]);c!=null&&y(e,["enterpriseWebSearch"],c);const d=m(t,["googleMaps"]);d!=null&&y(e,["googleMaps"],d);const f=m(t,["googleSearch"]);f!=null&&y(e,["googleSearch"],f);const p=m(t,["urlContext"]);return p!=null&&y(e,["urlContext"],p),e}function cz(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const r=m(t,["expireTime"]);return e!==void 0&&r!=null&&y(e,["expireTime"],r),n}function dz(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const r=m(t,["expireTime"]);return e!==void 0&&r!=null&&y(e,["expireTime"],r),n}function fz(t,e){const n={},i=m(e,["name"]);i!=null&&y(n,["_url","name"],Ks(t,i));const r=m(e,["config"]);return r!=null&&cz(r,n),n}function hz(t,e){const n={},i=m(e,["name"]);i!=null&&y(n,["_url","name"],Ks(t,i));const r=m(e,["config"]);return r!=null&&dz(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pz extends $s{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new al(Hs.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=qq(this.apiClient,e);return c=_e("cachedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=Bq(this.apiClient,e);return c=_e("cachedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async get(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=Qq(this.apiClient,e);return c=_e("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=Wq(this.apiClient,e);return c=_e("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async delete(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=Hq(this.apiClient,e);return c=_e("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=jq(p),T=new JC;return Object.assign(T,v),T})}else{const f=zq(this.apiClient,e);return c=_e("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=Gq(p),T=new JC;return Object.assign(T,v),T})}}async update(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=hz(this.apiClient,e);return c=_e("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=fz(this.apiClient,e);return c=_e("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async listInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=iz(e);return c=_e("cachedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=sz(p),T=new WC;return Object.assign(T,v),T})}else{const f=nz(e);return c=_e("cachedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=rz(p),T=new WC;return Object.assign(T,v),T})}}}function iI(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function jt(t){return this instanceof jt?(this.v=t,this):new jt(t)}function mu(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),r[Symbol.asyncIterator]=function(){return this},r;function l(b){return function(C){return Promise.resolve(C).then(b,v)}}function c(b,C){i[b]&&(r[b]=function(N){return new Promise(function(D,O){o.push([b,N,D,O])>1||d(b,N)})},C&&(r[b]=C(r[b])))}function d(b,C){try{f(i[b](C))}catch(N){T(o[0][3],N)}}function f(b){b.value instanceof jt?Promise.resolve(b.value.v).then(p,v):T(o[0][2],b)}function p(b){d("next",b)}function v(b){d("throw",b)}function T(b,C){b(C),o.shift(),o.length&&d(o[0][0],o[0][1])}}function vd(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof iI=="function"?iI(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(l){return new Promise(function(c,d){l=t[o](l),r(c,d,l.done,l.value)})}}function r(o,l,c,d){Promise.resolve(d).then(function(f){o({value:f,done:c})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mz(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:PD(n)}function PD(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function gz(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function rI(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let o=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),o&&!PD(t[i])&&(o=!1),i++;o?e.push(...r):e.pop()}return e}class yz{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new vz(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class vz{constructor(e,n,i,r={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=o,this.sendPromise=Promise.resolve(),gz(o)}async sendMessage(e){var n;await this.sendPromise;const i=ai(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,l,c;const d=await r,f=(l=(o=d.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content,p=d.automaticFunctionCallingHistory,v=this.getHistory(!0).length;let T=[];p!=null&&(T=(c=p.slice(v))!==null&&c!==void 0?c:[]);const b=f?[f]:[];this.recordHistory(i,b,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=ai(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const o=await r;return this.processStreamResponse(o,i)}getHistory(e=!1){const n=e?rI(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,r;return mu(this,arguments,function*(){var l,c,d,f;const p=[];try{for(var v=!0,T=vd(e),b;b=yield jt(T.next()),l=b.done,!l;v=!0){f=b.value,v=!1;const C=f;if(mz(C)){const N=(r=(i=C.candidates)===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.content;N!==void 0&&p.push(N)}yield yield jt(C)}}catch(C){c={error:C}}finally{try{!v&&!l&&(d=T.return)&&(yield jt(d.call(T)))}finally{if(c)throw c.error}}this.recordHistory(n,p)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(o=>o.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...rI(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sg extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,sg.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _z(t){const e={},n=m(t,["file"]);return n!=null&&y(e,["file"],n),e}function Tz(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function Ez(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","file"],wD(n)),e}function Sz(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function bz(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","file"],wD(n)),e}function wz(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),n}function xz(t){const e={},n=m(t,["config"]);return n!=null&&wz(n,e),e}function Az(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["files"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cz extends $s{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new al(Hs.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=xz(e);return o=_e("files",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const f=Az(d),p=new P9;return Object.assign(p,f),p})}}async createInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=_z(e);return o=_e("upload/v1beta/files",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=Tz(d),p=new D9;return Object.assign(p,f),p})}}async get(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=bz(e);return o=_e("files/{file}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Ez(e);return o=_e("files/{file}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const f=Sz(d),p=new M9;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ip(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Iz(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>Gz(o))),y(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function Rz(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Nz(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const i=m(t,["args"]);i!=null&&y(e,["args"],i);const r=m(t,["name"]);if(r!=null&&y(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Pz(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&y(e,["description"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const r=m(t,["parameters"]);r!=null&&y(e,["parameters"],r);const o=m(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const l=m(t,["response"]);l!=null&&y(e,["response"],l);const c=m(t,["responseJsonSchema"]);return c!=null&&y(e,["responseJsonSchema"],c),e}function Dz(t){const e={},n=m(t,["modelSelectionConfig"]);n!=null&&y(e,["modelConfig"],n);const i=m(t,["responseJsonSchema"]);i!=null&&y(e,["responseJsonSchema"],i);const r=m(t,["audioTimestamp"]);r!=null&&y(e,["audioTimestamp"],r);const o=m(t,["candidateCount"]);o!=null&&y(e,["candidateCount"],o);const l=m(t,["enableAffectiveDialog"]);l!=null&&y(e,["enableAffectiveDialog"],l);const c=m(t,["frequencyPenalty"]);c!=null&&y(e,["frequencyPenalty"],c);const d=m(t,["logprobs"]);d!=null&&y(e,["logprobs"],d);const f=m(t,["maxOutputTokens"]);f!=null&&y(e,["maxOutputTokens"],f);const p=m(t,["mediaResolution"]);p!=null&&y(e,["mediaResolution"],p);const v=m(t,["presencePenalty"]);v!=null&&y(e,["presencePenalty"],v);const T=m(t,["responseLogprobs"]);T!=null&&y(e,["responseLogprobs"],T);const b=m(t,["responseMimeType"]);b!=null&&y(e,["responseMimeType"],b);const C=m(t,["responseModalities"]);C!=null&&y(e,["responseModalities"],C);const N=m(t,["responseSchema"]);N!=null&&y(e,["responseSchema"],N);const D=m(t,["routingConfig"]);D!=null&&y(e,["routingConfig"],D);const O=m(t,["seed"]);O!=null&&y(e,["seed"],O);const k=m(t,["speechConfig"]);k!=null&&y(e,["speechConfig"],DD(k));const F=m(t,["stopSequences"]);F!=null&&y(e,["stopSequences"],F);const G=m(t,["temperature"]);G!=null&&y(e,["temperature"],G);const K=m(t,["thinkingConfig"]);K!=null&&y(e,["thinkingConfig"],K);const H=m(t,["topK"]);H!=null&&y(e,["topK"],H);const R=m(t,["topP"]);if(R!=null&&y(e,["topP"],R),m(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Mz(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function kz(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function Vz(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],i);const r=m(t,["responseModalities"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","responseModalities"],r);const o=m(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const l=m(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=m(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const d=m(t,["maxOutputTokens"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","maxOutputTokens"],d);const f=m(t,["mediaResolution"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","mediaResolution"],f);const p=m(t,["seed"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","seed"],p);const v=m(t,["speechConfig"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","speechConfig"],UT(v));const T=m(t,["thinkingConfig"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","thinkingConfig"],T);const b=m(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],b);const C=m(t,["systemInstruction"]);e!==void 0&&C!=null&&y(e,["setup","systemInstruction"],Iz(ai(C)));const N=m(t,["tools"]);if(e!==void 0&&N!=null){let H=zu(N);Array.isArray(H)&&(H=H.map(R=>$z(qu(R)))),y(e,["setup","tools"],H)}const D=m(t,["sessionResumption"]);e!==void 0&&D!=null&&y(e,["setup","sessionResumption"],jz(D));const O=m(t,["inputAudioTranscription"]);e!==void 0&&O!=null&&y(e,["setup","inputAudioTranscription"],O);const k=m(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&y(e,["setup","outputAudioTranscription"],k);const F=m(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&y(e,["setup","realtimeInputConfig"],F);const G=m(t,["contextWindowCompression"]);e!==void 0&&G!=null&&y(e,["setup","contextWindowCompression"],G);const K=m(t,["proactivity"]);return e!==void 0&&K!=null&&y(e,["setup","proactivity"],K),n}function Lz(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],Dz(i));const r=m(t,["responseModalities"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","responseModalities"],r);const o=m(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const l=m(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=m(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const d=m(t,["maxOutputTokens"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","maxOutputTokens"],d);const f=m(t,["mediaResolution"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","mediaResolution"],f);const p=m(t,["seed"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","seed"],p);const v=m(t,["speechConfig"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","speechConfig"],DD(UT(v)));const T=m(t,["thinkingConfig"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","thinkingConfig"],T);const b=m(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],b);const C=m(t,["systemInstruction"]);e!==void 0&&C!=null&&y(e,["setup","systemInstruction"],ai(C));const N=m(t,["tools"]);if(e!==void 0&&N!=null){let H=zu(N);Array.isArray(H)&&(H=H.map(R=>Kz(qu(R)))),y(e,["setup","tools"],H)}const D=m(t,["sessionResumption"]);e!==void 0&&D!=null&&y(e,["setup","sessionResumption"],D);const O=m(t,["inputAudioTranscription"]);e!==void 0&&O!=null&&y(e,["setup","inputAudioTranscription"],O);const k=m(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&y(e,["setup","outputAudioTranscription"],k);const F=m(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&y(e,["setup","realtimeInputConfig"],F);const G=m(t,["contextWindowCompression"]);e!==void 0&&G!=null&&y(e,["setup","contextWindowCompression"],G);const K=m(t,["proactivity"]);return e!==void 0&&K!=null&&y(e,["setup","proactivity"],K),n}function Oz(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["setup","model"],yt(t,i));const r=m(e,["config"]);return r!=null&&y(n,["config"],Vz(r,n)),n}function Uz(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["setup","model"],yt(t,i));const r=m(e,["config"]);return r!=null&&y(n,["config"],Lz(r,n)),n}function Fz(t){const e={},n=m(t,["musicGenerationConfig"]);return n!=null&&y(e,["musicGenerationConfig"],n),e}function Bz(t){const e={},n=m(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),y(e,["weightedPrompts"],i)}return e}function qz(t){const e={},n=m(t,["media"]);if(n!=null){let f=_D(n);Array.isArray(f)&&(f=f.map(p=>Ip(p))),y(e,["mediaChunks"],f)}const i=m(t,["audio"]);i!=null&&y(e,["audio"],Ip(ED(i)));const r=m(t,["audioStreamEnd"]);r!=null&&y(e,["audioStreamEnd"],r);const o=m(t,["video"]);o!=null&&y(e,["video"],Ip(TD(o)));const l=m(t,["text"]);l!=null&&y(e,["text"],l);const c=m(t,["activityStart"]);c!=null&&y(e,["activityStart"],c);const d=m(t,["activityEnd"]);return d!=null&&y(e,["activityEnd"],d),e}function zz(t){const e={},n=m(t,["media"]);if(n!=null){let f=_D(n);Array.isArray(f)&&(f=f.map(p=>p)),y(e,["mediaChunks"],f)}const i=m(t,["audio"]);i!=null&&y(e,["audio"],ED(i));const r=m(t,["audioStreamEnd"]);r!=null&&y(e,["audioStreamEnd"],r);const o=m(t,["video"]);o!=null&&y(e,["video"],TD(o));const l=m(t,["text"]);l!=null&&y(e,["text"],l);const c=m(t,["activityStart"]);c!=null&&y(e,["activityStart"],c);const d=m(t,["activityEnd"]);return d!=null&&y(e,["activityEnd"],d),e}function Hz(t){const e={},n=m(t,["setupComplete"]);n!=null&&y(e,["setupComplete"],n);const i=m(t,["serverContent"]);i!=null&&y(e,["serverContent"],i);const r=m(t,["toolCall"]);r!=null&&y(e,["toolCall"],r);const o=m(t,["toolCallCancellation"]);o!=null&&y(e,["toolCallCancellation"],o);const l=m(t,["usageMetadata"]);l!=null&&y(e,["usageMetadata"],Yz(l));const c=m(t,["goAway"]);c!=null&&y(e,["goAway"],c);const d=m(t,["sessionResumptionUpdate"]);return d!=null&&y(e,["sessionResumptionUpdate"],d),e}function Gz(t){const e={},n=m(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],Rz(o));const l=m(t,["functionCall"]);l!=null&&y(e,["functionCall"],Nz(l));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=m(t,["inlineData"]);d!=null&&y(e,["inlineData"],Ip(d));const f=m(t,["text"]);f!=null&&y(e,["text"],f);const p=m(t,["thought"]);p!=null&&y(e,["thought"],p);const v=m(t,["thoughtSignature"]);v!=null&&y(e,["thoughtSignature"],v);const T=m(t,["videoMetadata"]);return T!=null&&y(e,["videoMetadata"],T),e}function jz(t){const e={},n=m(t,["handle"]);if(n!=null&&y(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function DD(t){const e={},n=m(t,["languageCode"]);n!=null&&y(e,["languageCode"],n);const i=m(t,["voiceConfig"]);if(i!=null&&y(e,["voiceConfig"],i),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function $z(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(v=>v)),y(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&y(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],Mz(c));const d=m(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],kz(d));const f=m(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}function Kz(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(T=>Pz(T))),y(e,["functionDeclarations"],v)}const i=m(t,["retrieval"]);i!=null&&y(e,["retrieval"],i);const r=m(t,["googleSearchRetrieval"]);r!=null&&y(e,["googleSearchRetrieval"],r);const o=m(t,["computerUse"]);if(o!=null&&y(e,["computerUse"],o),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=m(t,["codeExecution"]);l!=null&&y(e,["codeExecution"],l);const c=m(t,["enterpriseWebSearch"]);c!=null&&y(e,["enterpriseWebSearch"],c);const d=m(t,["googleMaps"]);d!=null&&y(e,["googleMaps"],d);const f=m(t,["googleSearch"]);f!=null&&y(e,["googleSearch"],f);const p=m(t,["urlContext"]);return p!=null&&y(e,["urlContext"],p),e}function Yz(t){const e={},n=m(t,["promptTokenCount"]);n!=null&&y(e,["promptTokenCount"],n);const i=m(t,["cachedContentTokenCount"]);i!=null&&y(e,["cachedContentTokenCount"],i);const r=m(t,["candidatesTokenCount"]);r!=null&&y(e,["responseTokenCount"],r);const o=m(t,["toolUsePromptTokenCount"]);o!=null&&y(e,["toolUsePromptTokenCount"],o);const l=m(t,["thoughtsTokenCount"]);l!=null&&y(e,["thoughtsTokenCount"],l);const c=m(t,["totalTokenCount"]);c!=null&&y(e,["totalTokenCount"],c);const d=m(t,["promptTokensDetails"]);if(d!=null){let b=d;Array.isArray(b)&&(b=b.map(C=>C)),y(e,["promptTokensDetails"],b)}const f=m(t,["cacheTokensDetails"]);if(f!=null){let b=f;Array.isArray(b)&&(b=b.map(C=>C)),y(e,["cacheTokensDetails"],b)}const p=m(t,["candidatesTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(C=>C)),y(e,["responseTokensDetails"],b)}const v=m(t,["toolUsePromptTokensDetails"]);if(v!=null){let b=v;Array.isArray(b)&&(b=b.map(C=>C)),y(e,["toolUsePromptTokensDetails"],b)}const T=m(t,["trafficType"]);return T!=null&&y(e,["trafficType"],T),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jz(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Wz(t){const e={},n=m(t,["content"]);n!=null&&y(e,["content"],n);const i=m(t,["citationMetadata"]);i!=null&&y(e,["citationMetadata"],Qz(i));const r=m(t,["tokenCount"]);r!=null&&y(e,["tokenCount"],r);const o=m(t,["finishReason"]);o!=null&&y(e,["finishReason"],o);const l=m(t,["avgLogprobs"]);l!=null&&y(e,["avgLogprobs"],l);const c=m(t,["groundingMetadata"]);c!=null&&y(e,["groundingMetadata"],c);const d=m(t,["index"]);d!=null&&y(e,["index"],d);const f=m(t,["logprobsResult"]);f!=null&&y(e,["logprobsResult"],f);const p=m(t,["safetyRatings"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(b=>b)),y(e,["safetyRatings"],T)}const v=m(t,["urlContextMetadata"]);return v!=null&&y(e,["urlContextMetadata"],v),e}function Qz(t){const e={},n=m(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),y(e,["citations"],i)}return e}function Xz(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["contents"]);if(r!=null){let o=Sr(r);Array.isArray(o)&&(o=o.map(l=>l)),y(n,["contents"],o)}return n}function Zz(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),y(e,["tokensInfo"],r)}return e}function eH(t){const e={},n=m(t,["values"]);n!=null&&y(e,["values"],n);const i=m(t,["statistics"]);return i!=null&&y(e,["statistics"],tH(i)),e}function tH(t){const e={},n=m(t,["truncated"]);n!=null&&y(e,["truncated"],n);const i=m(t,["token_count"]);return i!=null&&y(e,["tokenCount"],i),e}function og(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>c8(o))),y(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function nH(t){const e={},n=m(t,["controlType"]);n!=null&&y(e,["controlType"],n);const i=m(t,["enableControlImageComputation"]);return i!=null&&y(e,["computeControl"],i),e}function iH(t){const e={};if(m(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(m(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(m(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function rH(t,e){const n={},i=m(t,["systemInstruction"]);e!==void 0&&i!=null&&y(e,["systemInstruction"],ai(i));const r=m(t,["tools"]);if(e!==void 0&&r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>OD(c))),y(e,["tools"],l)}const o=m(t,["generationConfig"]);return e!==void 0&&o!=null&&y(e,["generationConfig"],JH(o)),n}function sH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["contents"]);if(r!=null){let l=Sr(r);Array.isArray(l)&&(l=l.map(c=>og(c))),y(n,["contents"],l)}const o=m(e,["config"]);return o!=null&&iH(o),n}function oH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["contents"]);if(r!=null){let l=Sr(r);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["contents"],l)}const o=m(e,["config"]);return o!=null&&rH(o,n),n}function aH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["totalTokens"]);i!=null&&y(e,["totalTokens"],i);const r=m(t,["cachedContentTokenCount"]);return r!=null&&y(e,["cachedContentTokenCount"],r),e}function lH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["totalTokens"]);return i!=null&&y(e,["totalTokens"],i),e}function uH(t,e){const n={},i=m(e,["model"]);return i!=null&&y(n,["_url","name"],yt(t,i)),n}function cH(t,e){const n={},i=m(e,["model"]);return i!=null&&y(n,["_url","name"],yt(t,i)),n}function dH(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function fH(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function hH(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const r=m(t,["negativePrompt"]);e!==void 0&&r!=null&&y(e,["parameters","negativePrompt"],r);const o=m(t,["numberOfImages"]);e!==void 0&&o!=null&&y(e,["parameters","sampleCount"],o);const l=m(t,["aspectRatio"]);e!==void 0&&l!=null&&y(e,["parameters","aspectRatio"],l);const c=m(t,["guidanceScale"]);e!==void 0&&c!=null&&y(e,["parameters","guidanceScale"],c);const d=m(t,["seed"]);e!==void 0&&d!=null&&y(e,["parameters","seed"],d);const f=m(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&y(e,["parameters","safetySetting"],f);const p=m(t,["personGeneration"]);e!==void 0&&p!=null&&y(e,["parameters","personGeneration"],p);const v=m(t,["includeSafetyAttributes"]);e!==void 0&&v!=null&&y(e,["parameters","includeSafetyAttributes"],v);const T=m(t,["includeRaiReason"]);e!==void 0&&T!=null&&y(e,["parameters","includeRaiReason"],T);const b=m(t,["language"]);e!==void 0&&b!=null&&y(e,["parameters","language"],b);const C=m(t,["outputMimeType"]);e!==void 0&&C!=null&&y(e,["parameters","outputOptions","mimeType"],C);const N=m(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&y(e,["parameters","outputOptions","compressionQuality"],N);const D=m(t,["addWatermark"]);e!==void 0&&D!=null&&y(e,["parameters","addWatermark"],D);const O=m(t,["labels"]);e!==void 0&&O!=null&&y(e,["labels"],O);const k=m(t,["editMode"]);e!==void 0&&k!=null&&y(e,["parameters","editMode"],k);const F=m(t,["baseSteps"]);return e!==void 0&&F!=null&&y(e,["parameters","editConfig","baseSteps"],F),n}function pH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["prompt"]);r!=null&&y(n,["instances[0]","prompt"],r);const o=m(e,["referenceImages"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>g8(d))),y(n,["instances[0]","referenceImages"],c)}const l=m(e,["config"]);return l!=null&&hH(l,n),n}function mH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>ag(o))),y(e,["generatedImages"],r)}return e}function gH(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&y(e,["requests[]","taskType"],i);const r=m(t,["title"]);e!==void 0&&r!=null&&y(e,["requests[]","title"],r);const o=m(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&y(e,["requests[]","outputDimensionality"],o),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function yH(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&y(e,["instances[]","task_type"],i);const r=m(t,["title"]);e!==void 0&&r!=null&&y(e,["instances[]","title"],r);const o=m(t,["outputDimensionality"]);e!==void 0&&o!=null&&y(e,["parameters","outputDimensionality"],o);const l=m(t,["mimeType"]);e!==void 0&&l!=null&&y(e,["instances[]","mimeType"],l);const c=m(t,["autoTruncate"]);return e!==void 0&&c!=null&&y(e,["parameters","autoTruncate"],c),n}function vH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["contents"]);if(r!=null){let c=VT(t,r);Array.isArray(c)&&(c=c.map(d=>d)),y(n,["requests[]","content"],c)}const o=m(e,["config"]);o!=null&&gH(o,n);const l=m(e,["model"]);return l!==void 0&&y(n,["requests[]","model"],yt(t,l)),n}function _H(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["contents"]);if(r!=null){let l=VT(t,r);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["instances[]","content"],l)}const o=m(e,["config"]);return o!=null&&yH(o,n),n}function TH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["embeddings"],o)}const r=m(t,["metadata"]);return r!=null&&y(e,["metadata"],r),e}function EH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>eH(l))),y(e,["embeddings"],o)}const r=m(t,["metadata"]);return r!=null&&y(e,["metadata"],r),e}function SH(t){const e={},n=m(t,["endpoint"]);n!=null&&y(e,["name"],n);const i=m(t,["deployedModelId"]);return i!=null&&y(e,["deployedModelId"],i),e}function bH(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function wH(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const i=m(t,["args"]);i!=null&&y(e,["args"],i);const r=m(t,["name"]);if(r!=null&&y(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function xH(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const i=m(t,["allowedFunctionNames"]);if(i!=null&&y(e,["allowedFunctionNames"],i),m(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function AH(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&y(e,["description"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const r=m(t,["parameters"]);r!=null&&y(e,["parameters"],r);const o=m(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const l=m(t,["response"]);l!=null&&y(e,["response"],l);const c=m(t,["responseJsonSchema"]);return c!=null&&y(e,["responseJsonSchema"],c),e}function CH(t,e,n){const i={},r=m(e,["systemInstruction"]);n!==void 0&&r!=null&&y(n,["systemInstruction"],og(ai(r)));const o=m(e,["temperature"]);o!=null&&y(i,["temperature"],o);const l=m(e,["topP"]);l!=null&&y(i,["topP"],l);const c=m(e,["topK"]);c!=null&&y(i,["topK"],c);const d=m(e,["candidateCount"]);d!=null&&y(i,["candidateCount"],d);const f=m(e,["maxOutputTokens"]);f!=null&&y(i,["maxOutputTokens"],f);const p=m(e,["stopSequences"]);p!=null&&y(i,["stopSequences"],p);const v=m(e,["responseLogprobs"]);v!=null&&y(i,["responseLogprobs"],v);const T=m(e,["logprobs"]);T!=null&&y(i,["logprobs"],T);const b=m(e,["presencePenalty"]);b!=null&&y(i,["presencePenalty"],b);const C=m(e,["frequencyPenalty"]);C!=null&&y(i,["frequencyPenalty"],C);const N=m(e,["seed"]);N!=null&&y(i,["seed"],N);const D=m(e,["responseMimeType"]);D!=null&&y(i,["responseMimeType"],D);const O=m(e,["responseSchema"]);O!=null&&y(i,["responseSchema"],LT(O));const k=m(e,["responseJsonSchema"]);if(k!=null&&y(i,["responseJsonSchema"],k),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const F=m(e,["safetySettings"]);if(n!==void 0&&F!=null){let V=F;Array.isArray(V)&&(V=V.map(z=>y8(z))),y(n,["safetySettings"],V)}const G=m(e,["tools"]);if(n!==void 0&&G!=null){let V=zu(G);Array.isArray(V)&&(V=V.map(z=>w8(qu(z)))),y(n,["tools"],V)}const K=m(e,["toolConfig"]);if(n!==void 0&&K!=null&&y(n,["toolConfig"],b8(K)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const H=m(e,["cachedContent"]);n!==void 0&&H!=null&&y(n,["cachedContent"],Ks(t,H));const R=m(e,["responseModalities"]);R!=null&&y(i,["responseModalities"],R);const I=m(e,["mediaResolution"]);I!=null&&y(i,["mediaResolution"],I);const P=m(e,["speechConfig"]);if(P!=null&&y(i,["speechConfig"],OT(P)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=m(e,["thinkingConfig"]);U!=null&&y(i,["thinkingConfig"],U);const q=m(e,["imageConfig"]);return q!=null&&y(i,["imageConfig"],e8(q)),i}function IH(t,e,n){const i={},r=m(e,["systemInstruction"]);n!==void 0&&r!=null&&y(n,["systemInstruction"],ai(r));const o=m(e,["temperature"]);o!=null&&y(i,["temperature"],o);const l=m(e,["topP"]);l!=null&&y(i,["topP"],l);const c=m(e,["topK"]);c!=null&&y(i,["topK"],c);const d=m(e,["candidateCount"]);d!=null&&y(i,["candidateCount"],d);const f=m(e,["maxOutputTokens"]);f!=null&&y(i,["maxOutputTokens"],f);const p=m(e,["stopSequences"]);p!=null&&y(i,["stopSequences"],p);const v=m(e,["responseLogprobs"]);v!=null&&y(i,["responseLogprobs"],v);const T=m(e,["logprobs"]);T!=null&&y(i,["logprobs"],T);const b=m(e,["presencePenalty"]);b!=null&&y(i,["presencePenalty"],b);const C=m(e,["frequencyPenalty"]);C!=null&&y(i,["frequencyPenalty"],C);const N=m(e,["seed"]);N!=null&&y(i,["seed"],N);const D=m(e,["responseMimeType"]);D!=null&&y(i,["responseMimeType"],D);const O=m(e,["responseSchema"]);O!=null&&y(i,["responseSchema"],LT(O));const k=m(e,["responseJsonSchema"]);k!=null&&y(i,["responseJsonSchema"],k);const F=m(e,["routingConfig"]);F!=null&&y(i,["routingConfig"],F);const G=m(e,["modelSelectionConfig"]);G!=null&&y(i,["modelConfig"],G);const K=m(e,["safetySettings"]);if(n!==void 0&&K!=null){let W=K;Array.isArray(W)&&(W=W.map(se=>se)),y(n,["safetySettings"],W)}const H=m(e,["tools"]);if(n!==void 0&&H!=null){let W=zu(H);Array.isArray(W)&&(W=W.map(se=>OD(qu(se)))),y(n,["tools"],W)}const R=m(e,["toolConfig"]);n!==void 0&&R!=null&&y(n,["toolConfig"],R);const I=m(e,["labels"]);n!==void 0&&I!=null&&y(n,["labels"],I);const P=m(e,["cachedContent"]);n!==void 0&&P!=null&&y(n,["cachedContent"],Ks(t,P));const U=m(e,["responseModalities"]);U!=null&&y(i,["responseModalities"],U);const q=m(e,["mediaResolution"]);q!=null&&y(i,["mediaResolution"],q);const V=m(e,["speechConfig"]);V!=null&&y(i,["speechConfig"],LD(OT(V)));const z=m(e,["audioTimestamp"]);z!=null&&y(i,["audioTimestamp"],z);const Ee=m(e,["thinkingConfig"]);Ee!=null&&y(i,["thinkingConfig"],Ee);const Ne=m(e,["imageConfig"]);return Ne!=null&&y(i,["imageConfig"],t8(Ne)),i}function sI(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["contents"]);if(r!=null){let l=Sr(r);Array.isArray(l)&&(l=l.map(c=>og(c))),y(n,["contents"],l)}const o=m(e,["config"]);return o!=null&&y(n,["generationConfig"],CH(t,o,n)),n}function oI(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["contents"]);if(r!=null){let l=Sr(r);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["contents"],l)}const o=m(e,["config"]);return o!=null&&y(n,["generationConfig"],IH(t,o,n)),n}function aI(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(f=>Wz(f))),y(e,["candidates"],d)}const r=m(t,["modelVersion"]);r!=null&&y(e,["modelVersion"],r);const o=m(t,["promptFeedback"]);o!=null&&y(e,["promptFeedback"],o);const l=m(t,["responseId"]);l!=null&&y(e,["responseId"],l);const c=m(t,["usageMetadata"]);return c!=null&&y(e,["usageMetadata"],c),e}function lI(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(p=>p)),y(e,["candidates"],f)}const r=m(t,["createTime"]);r!=null&&y(e,["createTime"],r);const o=m(t,["modelVersion"]);o!=null&&y(e,["modelVersion"],o);const l=m(t,["promptFeedback"]);l!=null&&y(e,["promptFeedback"],l);const c=m(t,["responseId"]);c!=null&&y(e,["responseId"],c);const d=m(t,["usageMetadata"]);return d!=null&&y(e,["usageMetadata"],d),e}function RH(t,e){const n={};if(m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=m(t,["numberOfImages"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const r=m(t,["aspectRatio"]);e!==void 0&&r!=null&&y(e,["parameters","aspectRatio"],r);const o=m(t,["guidanceScale"]);if(e!==void 0&&o!=null&&y(e,["parameters","guidanceScale"],o),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=m(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&y(e,["parameters","safetySetting"],l);const c=m(t,["personGeneration"]);e!==void 0&&c!=null&&y(e,["parameters","personGeneration"],c);const d=m(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&y(e,["parameters","includeSafetyAttributes"],d);const f=m(t,["includeRaiReason"]);e!==void 0&&f!=null&&y(e,["parameters","includeRaiReason"],f);const p=m(t,["language"]);e!==void 0&&p!=null&&y(e,["parameters","language"],p);const v=m(t,["outputMimeType"]);e!==void 0&&v!=null&&y(e,["parameters","outputOptions","mimeType"],v);const T=m(t,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&y(e,["parameters","outputOptions","compressionQuality"],T),m(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(m(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=m(t,["imageSize"]);if(e!==void 0&&b!=null&&y(e,["parameters","sampleImageSize"],b),m(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function NH(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const r=m(t,["negativePrompt"]);e!==void 0&&r!=null&&y(e,["parameters","negativePrompt"],r);const o=m(t,["numberOfImages"]);e!==void 0&&o!=null&&y(e,["parameters","sampleCount"],o);const l=m(t,["aspectRatio"]);e!==void 0&&l!=null&&y(e,["parameters","aspectRatio"],l);const c=m(t,["guidanceScale"]);e!==void 0&&c!=null&&y(e,["parameters","guidanceScale"],c);const d=m(t,["seed"]);e!==void 0&&d!=null&&y(e,["parameters","seed"],d);const f=m(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&y(e,["parameters","safetySetting"],f);const p=m(t,["personGeneration"]);e!==void 0&&p!=null&&y(e,["parameters","personGeneration"],p);const v=m(t,["includeSafetyAttributes"]);e!==void 0&&v!=null&&y(e,["parameters","includeSafetyAttributes"],v);const T=m(t,["includeRaiReason"]);e!==void 0&&T!=null&&y(e,["parameters","includeRaiReason"],T);const b=m(t,["language"]);e!==void 0&&b!=null&&y(e,["parameters","language"],b);const C=m(t,["outputMimeType"]);e!==void 0&&C!=null&&y(e,["parameters","outputOptions","mimeType"],C);const N=m(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&y(e,["parameters","outputOptions","compressionQuality"],N);const D=m(t,["addWatermark"]);e!==void 0&&D!=null&&y(e,["parameters","addWatermark"],D);const O=m(t,["labels"]);e!==void 0&&O!=null&&y(e,["labels"],O);const k=m(t,["imageSize"]);e!==void 0&&k!=null&&y(e,["parameters","sampleImageSize"],k);const F=m(t,["enhancePrompt"]);return e!==void 0&&F!=null&&y(e,["parameters","enhancePrompt"],F),n}function PH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["prompt"]);r!=null&&y(n,["instances[0]","prompt"],r);const o=m(e,["config"]);return o!=null&&RH(o,n),n}function DH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["prompt"]);r!=null&&y(n,["instances[0]","prompt"],r);const o=m(e,["config"]);return o!=null&&NH(o,n),n}function MH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>jH(l))),y(e,["generatedImages"],o)}const r=m(t,["positivePromptSafetyAttributes"]);return r!=null&&y(e,["positivePromptSafetyAttributes"],kD(r)),e}function kH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>ag(l))),y(e,["generatedImages"],o)}const r=m(t,["positivePromptSafetyAttributes"]);return r!=null&&y(e,["positivePromptSafetyAttributes"],VD(r)),e}function VH(t,e){const n={},i=m(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i),m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=m(t,["durationSeconds"]);if(e!==void 0&&r!=null&&y(e,["parameters","durationSeconds"],r),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=m(t,["aspectRatio"]);e!==void 0&&o!=null&&y(e,["parameters","aspectRatio"],o);const l=m(t,["resolution"]);e!==void 0&&l!=null&&y(e,["parameters","resolution"],l);const c=m(t,["personGeneration"]);if(e!==void 0&&c!=null&&y(e,["parameters","personGeneration"],c),m(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=m(t,["negativePrompt"]);e!==void 0&&d!=null&&y(e,["parameters","negativePrompt"],d);const f=m(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&y(e,["parameters","enhancePrompt"],f),m(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=m(t,["lastFrame"]);e!==void 0&&p!=null&&y(e,["instances[0]","lastFrame"],lg(p));const v=m(t,["referenceImages"]);if(e!==void 0&&v!=null){let T=v;Array.isArray(T)&&(T=T.map(b=>O8(b))),y(e,["instances[0]","referenceImages"],T)}if(m(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(m(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function LH(t,e){const n={},i=m(t,["numberOfVideos"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const r=m(t,["outputGcsUri"]);e!==void 0&&r!=null&&y(e,["parameters","storageUri"],r);const o=m(t,["fps"]);e!==void 0&&o!=null&&y(e,["parameters","fps"],o);const l=m(t,["durationSeconds"]);e!==void 0&&l!=null&&y(e,["parameters","durationSeconds"],l);const c=m(t,["seed"]);e!==void 0&&c!=null&&y(e,["parameters","seed"],c);const d=m(t,["aspectRatio"]);e!==void 0&&d!=null&&y(e,["parameters","aspectRatio"],d);const f=m(t,["resolution"]);e!==void 0&&f!=null&&y(e,["parameters","resolution"],f);const p=m(t,["personGeneration"]);e!==void 0&&p!=null&&y(e,["parameters","personGeneration"],p);const v=m(t,["pubsubTopic"]);e!==void 0&&v!=null&&y(e,["parameters","pubsubTopic"],v);const T=m(t,["negativePrompt"]);e!==void 0&&T!=null&&y(e,["parameters","negativePrompt"],T);const b=m(t,["enhancePrompt"]);e!==void 0&&b!=null&&y(e,["parameters","enhancePrompt"],b);const C=m(t,["generateAudio"]);e!==void 0&&C!=null&&y(e,["parameters","generateAudio"],C);const N=m(t,["lastFrame"]);e!==void 0&&N!=null&&y(e,["instances[0]","lastFrame"],Hr(N));const D=m(t,["referenceImages"]);if(e!==void 0&&D!=null){let F=D;Array.isArray(F)&&(F=F.map(G=>U8(G))),y(e,["instances[0]","referenceImages"],F)}const O=m(t,["mask"]);e!==void 0&&O!=null&&y(e,["instances[0]","mask"],L8(O));const k=m(t,["compressionQuality"]);return e!==void 0&&k!=null&&y(e,["parameters","compressionQuality"],k),n}function OH(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response","generateVideoResponse"]);return l!=null&&y(e,["response"],qH(l)),e}function UH(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response"]);return l!=null&&y(e,["response"],zH(l)),e}function FH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["prompt"]);r!=null&&y(n,["instances[0]","prompt"],r);const o=m(e,["image"]);o!=null&&y(n,["instances[0]","image"],lg(o));const l=m(e,["video"]);l!=null&&y(n,["instances[0]","video"],UD(l));const c=m(e,["source"]);c!=null&&HH(c,n);const d=m(e,["config"]);return d!=null&&VH(d,n),n}function BH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["prompt"]);r!=null&&y(n,["instances[0]","prompt"],r);const o=m(e,["image"]);o!=null&&y(n,["instances[0]","image"],Hr(o));const l=m(e,["video"]);l!=null&&y(n,["instances[0]","video"],FD(l));const c=m(e,["source"]);c!=null&&GH(c,n);const d=m(e,["config"]);return d!=null&&LH(d,n),n}function qH(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>KH(l))),y(e,["generatedVideos"],o)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const r=m(t,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function zH(t){const e={},n=m(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>YH(l))),y(e,["generatedVideos"],o)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const r=m(t,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function HH(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const r=m(t,["image"]);e!==void 0&&r!=null&&y(e,["instances[0]","image"],lg(r));const o=m(t,["video"]);return e!==void 0&&o!=null&&y(e,["instances[0]","video"],UD(o)),n}function GH(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const r=m(t,["image"]);e!==void 0&&r!=null&&y(e,["instances[0]","image"],Hr(r));const o=m(t,["video"]);return e!==void 0&&o!=null&&y(e,["instances[0]","video"],FD(o)),n}function jH(t){const e={},n=m(t,["_self"]);n!=null&&y(e,["image"],n8(n));const i=m(t,["raiFilteredReason"]);i!=null&&y(e,["raiFilteredReason"],i);const r=m(t,["_self"]);return r!=null&&y(e,["safetyAttributes"],kD(r)),e}function ag(t){const e={},n=m(t,["_self"]);n!=null&&y(e,["image"],MD(n));const i=m(t,["raiFilteredReason"]);i!=null&&y(e,["raiFilteredReason"],i);const r=m(t,["_self"]);r!=null&&y(e,["safetyAttributes"],VD(r));const o=m(t,["prompt"]);return o!=null&&y(e,["enhancedPrompt"],o),e}function $H(t){const e={},n=m(t,["_self"]);n!=null&&y(e,["mask"],MD(n));const i=m(t,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),y(e,["labels"],r)}return e}function KH(t){const e={},n=m(t,["video"]);return n!=null&&y(e,["video"],k8(n)),e}function YH(t){const e={},n=m(t,["_self"]);return n!=null&&y(e,["video"],V8(n)),e}function JH(t){const e={},n=m(t,["modelSelectionConfig"]);n!=null&&y(e,["modelConfig"],n);const i=m(t,["responseJsonSchema"]);i!=null&&y(e,["responseJsonSchema"],i);const r=m(t,["audioTimestamp"]);r!=null&&y(e,["audioTimestamp"],r);const o=m(t,["candidateCount"]);o!=null&&y(e,["candidateCount"],o);const l=m(t,["enableAffectiveDialog"]);l!=null&&y(e,["enableAffectiveDialog"],l);const c=m(t,["frequencyPenalty"]);c!=null&&y(e,["frequencyPenalty"],c);const d=m(t,["logprobs"]);d!=null&&y(e,["logprobs"],d);const f=m(t,["maxOutputTokens"]);f!=null&&y(e,["maxOutputTokens"],f);const p=m(t,["mediaResolution"]);p!=null&&y(e,["mediaResolution"],p);const v=m(t,["presencePenalty"]);v!=null&&y(e,["presencePenalty"],v);const T=m(t,["responseLogprobs"]);T!=null&&y(e,["responseLogprobs"],T);const b=m(t,["responseMimeType"]);b!=null&&y(e,["responseMimeType"],b);const C=m(t,["responseModalities"]);C!=null&&y(e,["responseModalities"],C);const N=m(t,["responseSchema"]);N!=null&&y(e,["responseSchema"],N);const D=m(t,["routingConfig"]);D!=null&&y(e,["routingConfig"],D);const O=m(t,["seed"]);O!=null&&y(e,["seed"],O);const k=m(t,["speechConfig"]);k!=null&&y(e,["speechConfig"],LD(k));const F=m(t,["stopSequences"]);F!=null&&y(e,["stopSequences"],F);const G=m(t,["temperature"]);G!=null&&y(e,["temperature"],G);const K=m(t,["thinkingConfig"]);K!=null&&y(e,["thinkingConfig"],K);const H=m(t,["topK"]);H!=null&&y(e,["topK"],H);const R=m(t,["topP"]);if(R!=null&&y(e,["topP"],R),m(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function WH(t,e){const n={},i=m(e,["model"]);return i!=null&&y(n,["_url","name"],yt(t,i)),n}function QH(t,e){const n={},i=m(e,["model"]);return i!=null&&y(n,["_url","name"],yt(t,i)),n}function XH(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function ZH(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function e8(t){const e={},n=m(t,["aspectRatio"]);n!=null&&y(e,["aspectRatio"],n);const i=m(t,["imageSize"]);if(i!=null&&y(e,["imageSize"],i),m(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(m(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function t8(t){const e={},n=m(t,["aspectRatio"]);n!=null&&y(e,["aspectRatio"],n);const i=m(t,["imageSize"]);i!=null&&y(e,["imageSize"],i);const r=m(t,["outputMimeType"]);r!=null&&y(e,["imageOutputOptions","mimeType"],r);const o=m(t,["outputCompressionQuality"]);return o!=null&&y(e,["imageOutputOptions","compressionQuality"],o),e}function n8(t){const e={},n=m(t,["bytesBase64Encoded"]);n!=null&&y(e,["imageBytes"],aa(n));const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function MD(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&y(e,["imageBytes"],aa(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function lg(t){const e={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=m(t,["imageBytes"]);n!=null&&y(e,["bytesBase64Encoded"],aa(n));const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Hr(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const i=m(t,["imageBytes"]);i!=null&&y(e,["bytesBase64Encoded"],aa(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function i8(t,e,n){const i={},r=m(e,["pageSize"]);n!==void 0&&r!=null&&y(n,["_query","pageSize"],r);const o=m(e,["pageToken"]);n!==void 0&&o!=null&&y(n,["_query","pageToken"],o);const l=m(e,["filter"]);n!==void 0&&l!=null&&y(n,["_query","filter"],l);const c=m(e,["queryBase"]);return n!==void 0&&c!=null&&y(n,["_url","models_url"],xD(t,c)),i}function r8(t,e,n){const i={},r=m(e,["pageSize"]);n!==void 0&&r!=null&&y(n,["_query","pageSize"],r);const o=m(e,["pageToken"]);n!==void 0&&o!=null&&y(n,["_query","pageToken"],o);const l=m(e,["filter"]);n!==void 0&&l!=null&&y(n,["_query","filter"],l);const c=m(e,["queryBase"]);return n!==void 0&&c!=null&&y(n,["_url","models_url"],xD(t,c)),i}function s8(t,e){const n={},i=m(e,["config"]);return i!=null&&i8(t,i,n),n}function o8(t,e){const n={},i=m(e,["config"]);return i!=null&&r8(t,i,n),n}function a8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["_self"]);if(r!=null){let o=AD(r);Array.isArray(o)&&(o=o.map(l=>j0(l))),y(e,["models"],o)}return e}function l8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["_self"]);if(r!=null){let o=AD(r);Array.isArray(o)&&(o=o.map(l=>$0(l))),y(e,["models"],o)}return e}function u8(t){const e={},n=m(t,["maskMode"]);n!=null&&y(e,["maskMode"],n);const i=m(t,["segmentationClasses"]);i!=null&&y(e,["maskClasses"],i);const r=m(t,["maskDilation"]);return r!=null&&y(e,["dilation"],r),e}function j0(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["displayName"]);i!=null&&y(e,["displayName"],i);const r=m(t,["description"]);r!=null&&y(e,["description"],r);const o=m(t,["version"]);o!=null&&y(e,["version"],o);const l=m(t,["_self"]);l!=null&&y(e,["tunedModelInfo"],x8(l));const c=m(t,["inputTokenLimit"]);c!=null&&y(e,["inputTokenLimit"],c);const d=m(t,["outputTokenLimit"]);d!=null&&y(e,["outputTokenLimit"],d);const f=m(t,["supportedGenerationMethods"]);f!=null&&y(e,["supportedActions"],f);const p=m(t,["temperature"]);p!=null&&y(e,["temperature"],p);const v=m(t,["maxTemperature"]);v!=null&&y(e,["maxTemperature"],v);const T=m(t,["topP"]);T!=null&&y(e,["topP"],T);const b=m(t,["topK"]);b!=null&&y(e,["topK"],b);const C=m(t,["thinking"]);return C!=null&&y(e,["thinking"],C),e}function $0(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["displayName"]);i!=null&&y(e,["displayName"],i);const r=m(t,["description"]);r!=null&&y(e,["description"],r);const o=m(t,["versionId"]);o!=null&&y(e,["version"],o);const l=m(t,["deployedModels"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(T=>SH(T))),y(e,["endpoints"],v)}const c=m(t,["labels"]);c!=null&&y(e,["labels"],c);const d=m(t,["_self"]);d!=null&&y(e,["tunedModelInfo"],A8(d));const f=m(t,["defaultCheckpointId"]);f!=null&&y(e,["defaultCheckpointId"],f);const p=m(t,["checkpoints"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(T=>T)),y(e,["checkpoints"],v)}return e}function c8(t){const e={},n=m(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],bH(o));const l=m(t,["functionCall"]);l!=null&&y(e,["functionCall"],wH(l));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=m(t,["inlineData"]);d!=null&&y(e,["inlineData"],Jz(d));const f=m(t,["text"]);f!=null&&y(e,["text"],f);const p=m(t,["thought"]);p!=null&&y(e,["thought"],p);const v=m(t,["thoughtSignature"]);v!=null&&y(e,["thoughtSignature"],v);const T=m(t,["videoMetadata"]);return T!=null&&y(e,["videoMetadata"],T),e}function d8(t){const e={},n=m(t,["productImage"]);return n!=null&&y(e,["image"],Hr(n)),e}function f8(t,e){const n={},i=m(t,["numberOfImages"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const r=m(t,["baseSteps"]);e!==void 0&&r!=null&&y(e,["parameters","baseSteps"],r);const o=m(t,["outputGcsUri"]);e!==void 0&&o!=null&&y(e,["parameters","storageUri"],o);const l=m(t,["seed"]);e!==void 0&&l!=null&&y(e,["parameters","seed"],l);const c=m(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&y(e,["parameters","safetySetting"],c);const d=m(t,["personGeneration"]);e!==void 0&&d!=null&&y(e,["parameters","personGeneration"],d);const f=m(t,["addWatermark"]);e!==void 0&&f!=null&&y(e,["parameters","addWatermark"],f);const p=m(t,["outputMimeType"]);e!==void 0&&p!=null&&y(e,["parameters","outputOptions","mimeType"],p);const v=m(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&y(e,["parameters","outputOptions","compressionQuality"],v);const T=m(t,["enhancePrompt"]);e!==void 0&&T!=null&&y(e,["parameters","enhancePrompt"],T);const b=m(t,["labels"]);return e!==void 0&&b!=null&&y(e,["labels"],b),n}function h8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["source"]);r!=null&&m8(r,n);const o=m(e,["config"]);return o!=null&&f8(o,n),n}function p8(t){const e={},n=m(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>ag(r))),y(e,["generatedImages"],i)}return e}function m8(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const r=m(t,["personImage"]);e!==void 0&&r!=null&&y(e,["instances[0]","personImage","image"],Hr(r));const o=m(t,["productImages"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>d8(c))),y(e,["instances[0]","productImages"],l)}return n}function g8(t){const e={},n=m(t,["referenceImage"]);n!=null&&y(e,["referenceImage"],Hr(n));const i=m(t,["referenceId"]);i!=null&&y(e,["referenceId"],i);const r=m(t,["referenceType"]);r!=null&&y(e,["referenceType"],r);const o=m(t,["maskImageConfig"]);o!=null&&y(e,["maskImageConfig"],u8(o));const l=m(t,["controlImageConfig"]);l!=null&&y(e,["controlImageConfig"],nH(l));const c=m(t,["styleImageConfig"]);c!=null&&y(e,["styleImageConfig"],c);const d=m(t,["subjectImageConfig"]);return d!=null&&y(e,["subjectImageConfig"],d),e}function kD(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const i=m(t,["safetyAttributes","scores"]);i!=null&&y(e,["scores"],i);const r=m(t,["contentType"]);return r!=null&&y(e,["contentType"],r),e}function VD(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const i=m(t,["safetyAttributes","scores"]);i!=null&&y(e,["scores"],i);const r=m(t,["contentType"]);return r!=null&&y(e,["contentType"],r),e}function y8(t){const e={},n=m(t,["category"]);if(n!=null&&y(e,["category"],n),m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=m(t,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function v8(t){const e={},n=m(t,["image"]);return n!=null&&y(e,["image"],Hr(n)),e}function _8(t,e){const n={},i=m(t,["mode"]);e!==void 0&&i!=null&&y(e,["parameters","mode"],i);const r=m(t,["maxPredictions"]);e!==void 0&&r!=null&&y(e,["parameters","maxPredictions"],r);const o=m(t,["confidenceThreshold"]);e!==void 0&&o!=null&&y(e,["parameters","confidenceThreshold"],o);const l=m(t,["maskDilation"]);e!==void 0&&l!=null&&y(e,["parameters","maskDilation"],l);const c=m(t,["binaryColorThreshold"]);e!==void 0&&c!=null&&y(e,["parameters","binaryColorThreshold"],c);const d=m(t,["labels"]);return e!==void 0&&d!=null&&y(e,["labels"],d),n}function T8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["source"]);r!=null&&S8(r,n);const o=m(e,["config"]);return o!=null&&_8(o,n),n}function E8(t){const e={},n=m(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>$H(r))),y(e,["generatedMasks"],i)}return e}function S8(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const r=m(t,["image"]);e!==void 0&&r!=null&&y(e,["instances[0]","image"],Hr(r));const o=m(t,["scribbleImage"]);return e!==void 0&&o!=null&&y(e,["instances[0]","scribble"],v8(o)),n}function LD(t){const e={},n=m(t,["languageCode"]);n!=null&&y(e,["languageCode"],n);const i=m(t,["voiceConfig"]);if(i!=null&&y(e,["voiceConfig"],i),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function b8(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&y(e,["functionCallingConfig"],xH(n));const i=m(t,["retrievalConfig"]);return i!=null&&y(e,["retrievalConfig"],i),e}function w8(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(v=>v)),y(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&y(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],XH(c));const d=m(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],ZH(d));const f=m(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}function OD(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(T=>AH(T))),y(e,["functionDeclarations"],v)}const i=m(t,["retrieval"]);i!=null&&y(e,["retrieval"],i);const r=m(t,["googleSearchRetrieval"]);r!=null&&y(e,["googleSearchRetrieval"],r);const o=m(t,["computerUse"]);if(o!=null&&y(e,["computerUse"],o),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=m(t,["codeExecution"]);l!=null&&y(e,["codeExecution"],l);const c=m(t,["enterpriseWebSearch"]);c!=null&&y(e,["enterpriseWebSearch"],c);const d=m(t,["googleMaps"]);d!=null&&y(e,["googleMaps"],d);const f=m(t,["googleSearch"]);f!=null&&y(e,["googleSearch"],f);const p=m(t,["urlContext"]);return p!=null&&y(e,["urlContext"],p),e}function x8(t){const e={},n=m(t,["baseModel"]);n!=null&&y(e,["baseModel"],n);const i=m(t,["createTime"]);i!=null&&y(e,["createTime"],i);const r=m(t,["updateTime"]);return r!=null&&y(e,["updateTime"],r),e}function A8(t){const e={},n=m(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&y(e,["baseModel"],n);const i=m(t,["createTime"]);i!=null&&y(e,["createTime"],i);const r=m(t,["updateTime"]);return r!=null&&y(e,["updateTime"],r),e}function C8(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const r=m(t,["description"]);e!==void 0&&r!=null&&y(e,["description"],r);const o=m(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&y(e,["defaultCheckpointId"],o),n}function I8(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const r=m(t,["description"]);e!==void 0&&r!=null&&y(e,["description"],r);const o=m(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&y(e,["defaultCheckpointId"],o),n}function R8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","name"],yt(t,i));const r=m(e,["config"]);return r!=null&&C8(r,n),n}function N8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["config"]);return r!=null&&I8(r,n),n}function P8(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const r=m(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&y(e,["parameters","safetySetting"],r);const o=m(t,["personGeneration"]);e!==void 0&&o!=null&&y(e,["parameters","personGeneration"],o);const l=m(t,["includeRaiReason"]);e!==void 0&&l!=null&&y(e,["parameters","includeRaiReason"],l);const c=m(t,["outputMimeType"]);e!==void 0&&c!=null&&y(e,["parameters","outputOptions","mimeType"],c);const d=m(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&y(e,["parameters","outputOptions","compressionQuality"],d);const f=m(t,["enhanceInputImage"]);e!==void 0&&f!=null&&y(e,["parameters","upscaleConfig","enhanceInputImage"],f);const p=m(t,["imagePreservationFactor"]);e!==void 0&&p!=null&&y(e,["parameters","upscaleConfig","imagePreservationFactor"],p);const v=m(t,["labels"]);e!==void 0&&v!=null&&y(e,["labels"],v);const T=m(t,["numberOfImages"]);e!==void 0&&T!=null&&y(e,["parameters","sampleCount"],T);const b=m(t,["mode"]);return e!==void 0&&b!=null&&y(e,["parameters","mode"],b),n}function D8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["image"]);r!=null&&y(n,["instances[0]","image"],Hr(r));const o=m(e,["upscaleFactor"]);o!=null&&y(n,["parameters","upscaleConfig","upscaleFactor"],o);const l=m(e,["config"]);return l!=null&&P8(l,n),n}function M8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>ag(o))),y(e,["generatedImages"],r)}return e}function k8(t){const e={},n=m(t,["uri"]);n!=null&&y(e,["uri"],n);const i=m(t,["encodedVideo"]);i!=null&&y(e,["videoBytes"],aa(i));const r=m(t,["encoding"]);return r!=null&&y(e,["mimeType"],r),e}function V8(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&y(e,["videoBytes"],aa(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function L8(t){const e={},n=m(t,["image"]);n!=null&&y(e,["_self"],Hr(n));const i=m(t,["maskMode"]);return i!=null&&y(e,["maskMode"],i),e}function O8(t){const e={},n=m(t,["image"]);n!=null&&y(e,["image"],lg(n));const i=m(t,["referenceType"]);return i!=null&&y(e,["referenceType"],i),e}function U8(t){const e={},n=m(t,["image"]);n!=null&&y(e,["image"],Hr(n));const i=m(t,["referenceType"]);return i!=null&&y(e,["referenceType"],i),e}function UD(t){const e={},n=m(t,["uri"]);n!=null&&y(e,["uri"],n);const i=m(t,["videoBytes"]);i!=null&&y(e,["encodedVideo"],aa(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["encoding"],r),e}function FD(t){const e={},n=m(t,["uri"]);n!=null&&y(e,["gcsUri"],n);const i=m(t,["videoBytes"]);i!=null&&y(e,["bytesBase64Encoded"],aa(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function F8(t,e){const n={},i=m(t,["displayName"]);return e!==void 0&&i!=null&&y(e,["displayName"],i),n}function B8(t){const e={},n=m(t,["config"]);return n!=null&&F8(n,e),e}function q8(t,e){const n={},i=m(t,["force"]);return e!==void 0&&i!=null&&y(e,["_query","force"],i),n}function z8(t){const e={},n=m(t,["name"]);n!=null&&y(e,["_url","name"],n);const i=m(t,["config"]);return i!=null&&q8(i,e),e}function H8(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","name"],n),e}function G8(t,e){const n={},i=m(t,["customMetadata"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["customMetadata"],o)}const r=m(t,["chunkingConfig"]);return e!==void 0&&r!=null&&y(e,["chunkingConfig"],r),n}function j8(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response"]);return l!=null&&y(e,["response"],K8(l)),e}function $8(t){const e={},n=m(t,["fileSearchStoreName"]);n!=null&&y(e,["_url","file_search_store_name"],n);const i=m(t,["fileName"]);i!=null&&y(e,["fileName"],i);const r=m(t,["config"]);return r!=null&&G8(r,e),e}function K8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["parent"]);i!=null&&y(e,["parent"],i);const r=m(t,["documentName"]);return r!=null&&y(e,["documentName"],r),e}function Y8(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),n}function J8(t){const e={},n=m(t,["config"]);return n!=null&&Y8(n,e),e}function W8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["fileSearchStores"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["fileSearchStores"],o)}return e}function BD(t,e){const n={},i=m(t,["mimeType"]);e!==void 0&&i!=null&&y(e,["mimeType"],i);const r=m(t,["displayName"]);e!==void 0&&r!=null&&y(e,["displayName"],r);const o=m(t,["customMetadata"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>d)),y(e,["customMetadata"],c)}const l=m(t,["chunkingConfig"]);return e!==void 0&&l!=null&&y(e,["chunkingConfig"],l),n}function Q8(t){const e={},n=m(t,["fileSearchStoreName"]);n!=null&&y(e,["_url","file_search_store_name"],n);const i=m(t,["config"]);return i!=null&&BD(i,e),e}function X8(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Z8="Content-Type",eG="X-Server-Timeout",tG="User-Agent",K0="x-goog-api-client",nG="1.31.0",iG=`google-genai-sdk/${nG}`,rG="v1beta1",sG="v1beta",uI=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class oG{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:rG,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:sG,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[l,c]of Object.entries(e.queryParams))r.searchParams.append(l,String(c));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.unaryApiCall(r,o,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,o]of Object.entries(n))typeof o=="object"?i[r]=Object.assign(Object.assign({},i[r]),o):o!==void 0&&(i[r]=o);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.streamApiCall(r,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,r){if(n&&n.timeout||r){const o=new AbortController,l=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const c=setTimeout(()=>o.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}r&&r.addEventListener("abort",()=>{o.abort()}),e.signal=l}return n&&n.extraBody!==null&&aG(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await cI(r),new z0(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await cI(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var n;return mu(this,arguments,function*(){const r=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let l="";for(;;){const{done:c,value:d}=yield jt(r.read());if(c){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=o.decode(d,{stream:!0});try{const v=JSON.parse(f);if("error"in v){const T=JSON.parse(JSON.stringify(v.error)),b=T.status,C=T.code,N=`got status: ${b}. ${JSON.stringify(v)}`;if(C>=400&&C<600)throw new sg({message:N,status:C})}}catch(v){if(v.name==="ApiError")throw v}l+=f;let p=l.match(uI);for(;p;){const v=p[1];try{const T=new Response(v,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield jt(new z0(T)),l=l.slice(p[0].length),p=l.match(uI)}catch(T){throw new Error(`exception parsing stream chunk ${v}. ${T}`)}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=iG+" "+this.clientOptions.userAgentExtra;return e[tG]=n,e[K0]=n,e[Z8]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[r,o]of Object.entries(e.headers))i.append(r,o);e.timeout&&e.timeout>0&&i.append(eG,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const o=this.clientOptions.uploader,l=await o.stat(e);r.sizeBytes=String(l.size);const c=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=c;const d={file:r},f=this.getFileName(e),p=_e("upload/v1beta/files",d._url),v=await this.fetchUploadUrl(p,r.sizeBytes,r.mimeType,f,d,n==null?void 0:n.httpOptions);return o.upload(e,v,this)}async uploadFileToFileSearchStore(e,n,i){var r;const o=this.clientOptions.uploader,l=await o.stat(n),c=String(l.size),d=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:l.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const f=`upload/v1beta/${e}:uploadToFileSearchStore`,p=this.getFileName(n),v={};i!=null&&BD(i,v);const T=await this.fetchUploadUrl(f,c,d,p,v,i==null?void 0:i.httpOptions);return o.uploadToFileSearchStore(n,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,r,o,l){var c;let d={};l?d=l:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const f=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:d});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(c=f==null?void 0:f.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function cI(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new sg({message:r,status:n}):new Error(r)}}function aG(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(o,l){const c=Object.assign({},o);for(const d in l)if(Object.prototype.hasOwnProperty.call(l,d)){const f=l[d],p=c[d];f&&typeof f=="object"&&!Array.isArray(f)&&p&&typeof p=="object"&&!Array.isArray(p)?c[d]=i(p,f):(p&&f&&typeof p!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof p}, New type: ${typeof f}. Overwriting.`),c[d]=f)}return c}const r=i(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lG="mcp_used/unknown";let uG=!1;function qD(t){for(const e of t)if(cG(e)||typeof e=="object"&&"inputSchema"in e)return!0;return uG}function zD(t){var e;const n=(e=t[K0])!==null&&e!==void 0?e:"";t[K0]=(n+` ${lG}`).trimStart()}function cG(t){return t!==null&&typeof t=="object"&&t instanceof FT}function dG(t,e=100){return mu(this,arguments,function*(){let i,r=0;for(;r<e;){const o=yield jt(t.listTools({cursor:i}));for(const l of o.tools)yield yield jt(l),r++;if(!o.nextCursor)break;i=o.nextCursor}})}class FT{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new FT(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const o={},l=[];for(const p of this.mcpClients)try{for(var c=!0,d=(n=void 0,vd(dG(p))),f;f=await d.next(),e=f.done,!e;c=!0){r=f.value,c=!1;const v=r;l.push(v);const T=v.name;if(o[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);o[T]=p}}catch(v){n={error:v}}finally{try{!c&&!e&&(i=d.return)&&await i.call(d)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),H9(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const l=await r.callTool({name:i.name,arguments:i.args},void 0,o);n.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function fG(t,e,n){const i=new V9;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(i,r),e(i)}class hG{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),l=gG(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),d=`${r}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${c}`;let f=()=>{};const p=new Promise(F=>{f=F}),v=e.callbacks,T=function(){f({})},b=this.apiClient,C={onopen:T,onmessage:F=>{fG(b,v.onmessage,F)},onerror:(n=v==null?void 0:v.onerror)!==null&&n!==void 0?n:function(F){},onclose:(i=v==null?void 0:v.onclose)!==null&&i!==void 0?i:function(F){}},N=this.webSocketFactory.create(d,mG(l),C);N.connect(),await p;const k={setup:{model:yt(this.apiClient,e.model)}};return N.send(JSON.stringify(k)),new pG(N,this.apiClient)}}class pG{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Bz(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Fz(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(nu.PLAY)}pause(){this.sendPlaybackControl(nu.PAUSE)}stop(){this.sendPlaybackControl(nu.STOP)}resetContext(){this.sendPlaybackControl(nu.RESET_CONTEXT)}close(){this.conn.close()}}function mG(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function gG(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yG="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function vG(t,e,n){const i=new k9;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const o=JSON.parse(r);if(t.isVertexAI()){const l=Hz(o);Object.assign(i,l)}else Object.assign(i,o);e(i)}class _G{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new hG(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,o,l,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let p;const v=this.apiClient.getHeaders();e.config&&e.config.tools&&qD(e.config.tools)&&zD(v);const T=bG(v);if(this.apiClient.isVertexAI())p=`${d}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,p);else{const P=this.apiClient.getApiKey();let U="BidiGenerateContent",q="key";P!=null&&P.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",q="access_token"),p=`${d}/ws/google.ai.generativelanguage.${f}.GenerativeService.${U}?${q}=${P}`}let b=()=>{};const C=new Promise(P=>{b=P}),N=e.callbacks,D=function(){var P;(P=N==null?void 0:N.onopen)===null||P===void 0||P.call(N),b({})},O=this.apiClient,k={onopen:D,onmessage:P=>{vG(O,N.onmessage,P)},onerror:(n=N==null?void 0:N.onerror)!==null&&n!==void 0?n:function(P){},onclose:(i=N==null?void 0:N.onclose)!==null&&i!==void 0?i:function(P){}},F=this.webSocketFactory.create(p,SG(T),k);F.connect(),await C;let G=yt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&G.startsWith("publishers/")){const P=this.apiClient.getProject(),U=this.apiClient.getLocation();G=`projects/${P}/locations/${U}/`+G}let K={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[am.AUDIO]}:e.config.responseModalities=[am.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const H=(c=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[],R=[];for(const P of H)if(this.isCallableTool(P)){const U=P;R.push(await U.tool())}else R.push(P);R.length>0&&(e.config.tools=R);const I={model:G,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?K=Uz(this.apiClient,I):K=Oz(this.apiClient,I),delete K.config,F.send(JSON.stringify(K)),new EG(F,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const TG={turnComplete:!0};class EG{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Sr(n.turns),e.isVertexAI()||(i=i.map(r=>og(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(yG)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},TG),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:zz(e)}:n={realtimeInput:qz(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function SG(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function bG(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dI=10;function fI(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const l of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(gu(l)){r=!0;break}if(!r)return!0;const o=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function gu(t){return"callTool"in t&&typeof t.callTool=="function"}function wG(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>gu(r)))!==null&&i!==void 0?i:!1}function hI(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,r)=>{if(gu(i))return;const o=i;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(r)}),n}function pI(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xG extends $s{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,o,l,c;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!wG(n)||fI(n.config))return await this.generateContentInternal(d);const f=hI(n);if(f.length>0){const N=f.map(D=>`tools[${D}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${N}.`)}let p,v;const T=Sr(d.contents),b=(o=(r=(i=d.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:dI;let C=0;for(;C<b&&(p=await this.generateContentInternal(d),!(!p.functionCalls||p.functionCalls.length===0));){const N=p.candidates[0].content,D=[];for(const O of(c=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[])if(gu(O)){const F=await O.callTool(p.functionCalls);D.push(...F)}C++,v={role:"user",parts:D},d.contents=Sr(d.contents),d.contents.push(N),d.contents.push(v),pI(d.config)&&(T.push(N),T.push(v))}return pI(d.config)&&(p.automaticFunctionCallingHistory=T),p},this.generateContentStream=async n=>{var i,r,o,l,c;if(this.maybeMoveToResponseJsonSchem(n),fI(n.config)){const v=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(v)}const d=hI(n);if(d.length>0){const v=d.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${v}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const f=(o=(r=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,p=(c=(l=n==null?void 0:n.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||c===void 0?void 0:c.disable;if(f&&!p)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let o;const l=[];if(i!=null&&i.generatedImages)for(const d of i.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((r=d==null?void 0:d.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?o=d==null?void 0:d.safetyAttributes:l.push(d);let c;return o?c={generatedImages:l,positivePromptSafetyAttributes:o,sdkHttpResponse:i.sdkHttpResponse}:c={generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},c}),this.list=async n=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new al(Hs.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(l),l)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var i,r,o,l,c,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((l=(o=n.source)===null||o===void 0?void 0:o.video)===null||l===void 0)&&l.uri&&(!((d=(c=n.source)===null||c===void 0?void 0:c.video)===null||d===void 0)&&d.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const l=await Promise.all(o.map(async d=>gu(d)?await d.tool():d)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(c.config.tools=l,e.config&&e.config.tools&&qD(e.config.tools)){const d=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let f=Object.assign({},d);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),zD(f),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return c}async initAfcToolsMap(e){var n,i,r;const o=new Map;for(const l of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(gu(l)){const c=l,d=await c.tool();for(const f of(r=d.functionDeclarations)!==null&&r!==void 0?r:[]){if(!f.name)throw new Error("Function declaration name is required.");if(o.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);o.set(f.name,c)}}return o}async processAfcStream(e){var n,i,r;const o=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:dI;let l=!1,c=0;const d=await this.initAfcToolsMap(e);return(function(f,p,v){var T,b;return mu(this,arguments,function*(){for(var C,N,D,O;c<o;){l&&(c++,l=!1);const K=yield jt(f.processParamsMaybeAddMcpUsage(v)),H=yield jt(f.generateContentStreamInternal(K)),R=[],I=[];try{for(var k=!0,F=(N=void 0,vd(H)),G;G=yield jt(F.next()),C=G.done,!C;k=!0){O=G.value,k=!1;const P=O;if(yield yield jt(P),P.candidates&&(!((T=P.candidates[0])===null||T===void 0)&&T.content)){I.push(P.candidates[0].content);for(const U of(b=P.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(c<o&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(U.functionCall.name)){const q=yield jt(p.get(U.functionCall.name).callTool([U.functionCall]));R.push(...q)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(P){N={error:P}}finally{try{!k&&!C&&(D=F.return)&&(yield jt(D.call(F)))}finally{if(N)throw N.error}}if(R.length>0){l=!0;const P=new jc;P.candidates=[{content:{role:"user",parts:R}}],yield yield jt(P);const U=[];U.push(...I),U.push({role:"user",parts:R});const q=Sr(v.contents).concat(U);v.contents=q}else break}})})(this,d,e)}async generateContentInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=oI(this.apiClient,e);return c=_e("{model}:generateContent",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=lI(p),T=new jc;return Object.assign(T,v),T})}else{const f=sI(this.apiClient,e);return c=_e("{model}:generateContent",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=aI(p),T=new jc;return Object.assign(T,v),T})}}async generateContentStreamInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=oI(this.apiClient,e);return c=_e("{model}:streamGenerateContent?alt=sse",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(v){return mu(this,arguments,function*(){var T,b,C,N;try{for(var D=!0,O=vd(v),k;k=yield jt(O.next()),T=k.done,!T;D=!0){N=k.value,D=!1;const F=N,G=lI(yield jt(F.json()));G.sdkHttpResponse={headers:F.headers};const K=new jc;Object.assign(K,G),yield yield jt(K)}}catch(F){b={error:F}}finally{try{!D&&!T&&(C=O.return)&&(yield jt(C.call(O)))}finally{if(b)throw b.error}}})})}else{const f=sI(this.apiClient,e);return c=_e("{model}:streamGenerateContent?alt=sse",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),l.then(function(v){return mu(this,arguments,function*(){var T,b,C,N;try{for(var D=!0,O=vd(v),k;k=yield jt(O.next()),T=k.done,!T;D=!0){N=k.value,D=!1;const F=N,G=aI(yield jt(F.json()));G.sdkHttpResponse={headers:F.headers};const K=new jc;Object.assign(K,G),yield yield jt(K)}}catch(F){b={error:F}}finally{try{!D&&!T&&(C=O.return)&&(yield jt(C.call(O)))}finally{if(b)throw b.error}}})})}}async embedContent(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=_H(this.apiClient,e);return c=_e("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=EH(p),T=new zC;return Object.assign(T,v),T})}else{const f=vH(this.apiClient,e);return c=_e("{model}:batchEmbedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=TH(p),T=new zC;return Object.assign(T,v),T})}}async generateImagesInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=DH(this.apiClient,e);return c=_e("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=kH(p),T=new HC;return Object.assign(T,v),T})}else{const f=PH(this.apiClient,e);return c=_e("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=MH(p),T=new HC;return Object.assign(T,v),T})}}async editImageInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=pH(this.apiClient,e);return o=_e("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const f=mH(d),p=new b9;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=D8(this.apiClient,e);return o=_e("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const f=M8(d),p=new w9;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=h8(this.apiClient,e);return o=_e("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=p8(d),p=new x9;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=T8(this.apiClient,e);return o=_e("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=E8(d),p=new A9;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=QH(this.apiClient,e);return c=_e("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>$0(p))}else{const f=WH(this.apiClient,e);return c=_e("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>j0(p))}}async listInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=o8(this.apiClient,e);return c=_e("{models_url}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=l8(p),T=new GC;return Object.assign(T,v),T})}else{const f=s8(this.apiClient,e);return c=_e("{models_url}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=a8(p),T=new GC;return Object.assign(T,v),T})}}async update(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=N8(this.apiClient,e);return c=_e("{model}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>$0(p))}else{const f=R8(this.apiClient,e);return c=_e("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>j0(p))}}async delete(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=cH(this.apiClient,e);return c=_e("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=fH(p),T=new jC;return Object.assign(T,v),T})}else{const f=uH(this.apiClient,e);return c=_e("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=dH(p),T=new jC;return Object.assign(T,v),T})}}async countTokens(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=oH(this.apiClient,e);return c=_e("{model}:countTokens",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=lH(p),T=new $C;return Object.assign(T,v),T})}else{const f=sH(this.apiClient,e);return c=_e("{model}:countTokens",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=aH(p),T=new $C;return Object.assign(T,v),T})}}async computeTokens(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=Xz(this.apiClient,e);return o=_e("{model}:computeTokens",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const f=Zz(d),p=new C9;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=BH(this.apiClient,e);return c=_e("{model}:predictLongRunning",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>{const v=UH(p),T=new lm;return Object.assign(T,v),T})}else{const f=FH(this.apiClient,e);return c=_e("{model}:predictLongRunning",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>{const v=OH(p),T=new lm;return Object.assign(T,v),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AG extends $s{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=y9(e);return c=_e("{operationName}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l}else{const f=g9(e);return c=_e("{operationName}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l}}async fetchPredictVideosOperationInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=u9(e);return o=_e("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CG(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function IG(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>OG(o))),y(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function RG(t,e,n){const i={},r=m(e,["expireTime"]);n!==void 0&&r!=null&&y(n,["expireTime"],r);const o=m(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&y(n,["newSessionExpireTime"],o);const l=m(e,["uses"]);n!==void 0&&l!=null&&y(n,["uses"],l);const c=m(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&y(n,["bidiGenerateContentSetup"],LG(t,c));const d=m(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&y(n,["fieldMask"],d),i}function NG(t,e){const n={},i=m(e,["config"]);return i!=null&&y(n,["config"],RG(t,i,n)),n}function PG(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function DG(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const i=m(t,["args"]);i!=null&&y(e,["args"],i);const r=m(t,["name"]);if(r!=null&&y(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function MG(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function kG(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function VG(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],i);const r=m(t,["responseModalities"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","responseModalities"],r);const o=m(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const l=m(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=m(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const d=m(t,["maxOutputTokens"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","maxOutputTokens"],d);const f=m(t,["mediaResolution"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","mediaResolution"],f);const p=m(t,["seed"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","seed"],p);const v=m(t,["speechConfig"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","speechConfig"],UT(v));const T=m(t,["thinkingConfig"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","thinkingConfig"],T);const b=m(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],b);const C=m(t,["systemInstruction"]);e!==void 0&&C!=null&&y(e,["setup","systemInstruction"],IG(ai(C)));const N=m(t,["tools"]);if(e!==void 0&&N!=null){let H=zu(N);Array.isArray(H)&&(H=H.map(R=>FG(qu(R)))),y(e,["setup","tools"],H)}const D=m(t,["sessionResumption"]);e!==void 0&&D!=null&&y(e,["setup","sessionResumption"],UG(D));const O=m(t,["inputAudioTranscription"]);e!==void 0&&O!=null&&y(e,["setup","inputAudioTranscription"],O);const k=m(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&y(e,["setup","outputAudioTranscription"],k);const F=m(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&y(e,["setup","realtimeInputConfig"],F);const G=m(t,["contextWindowCompression"]);e!==void 0&&G!=null&&y(e,["setup","contextWindowCompression"],G);const K=m(t,["proactivity"]);return e!==void 0&&K!=null&&y(e,["setup","proactivity"],K),n}function LG(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["setup","model"],yt(t,i));const r=m(e,["config"]);return r!=null&&y(n,["config"],VG(r,n)),n}function OG(t){const e={},n=m(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],PG(o));const l=m(t,["functionCall"]);l!=null&&y(e,["functionCall"],DG(l));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=m(t,["inlineData"]);d!=null&&y(e,["inlineData"],CG(d));const f=m(t,["text"]);f!=null&&y(e,["text"],f);const p=m(t,["thought"]);p!=null&&y(e,["thought"],p);const v=m(t,["thoughtSignature"]);v!=null&&y(e,["thoughtSignature"],v);const T=m(t,["videoMetadata"]);return T!=null&&y(e,["videoMetadata"],T),e}function UG(t){const e={},n=m(t,["handle"]);if(n!=null&&y(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function FG(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(v=>v)),y(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&y(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],MG(c));const d=m(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],kG(d));const f=m(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BG(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(o=>`${n}.${o}`);e.push(...r)}else e.push(n)}return e.join(",")}function qG(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const o=i.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const o=BG(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];r.length>0&&(c=r.map(f=>l.includes(f)?`generationConfig.${f}`:f));const d=[];o&&d.push(o),c.length>0&&d.push(...c),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class zG extends $s{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=NG(this.apiClient,e);o=_e("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const d=qG(c,e.config);return r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HG(t,e){const n={},i=m(t,["force"]);return e!==void 0&&i!=null&&y(e,["_query","force"],i),n}function GG(t){const e={},n=m(t,["name"]);n!=null&&y(e,["_url","name"],n);const i=m(t,["config"]);return i!=null&&HG(i,e),e}function jG(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","name"],n),e}function $G(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),n}function KG(t){const e={},n=m(t,["parent"]);n!=null&&y(e,["_url","parent"],n);const i=m(t,["config"]);return i!=null&&$G(i,e),e}function YG(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["documents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JG extends $s{constructor(e){super(),this.apiClient=e,this.list=async n=>new al(Hs.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=jG(e);return o=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=GG(e);r=_e("{name}",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=KG(e);return o=_e("{parent}/documents",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=YG(d),p=new I9;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WG extends $s{constructor(e,n=new JG(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new al(Hs.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=B8(e);return o=_e("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async get(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=H8(e);return o=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=z8(e);r=_e("{name}",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=J8(e);return o=_e("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=W8(d),p=new R9;return Object.assign(p,f),p})}}async uploadToFileSearchStoreInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Q8(e);return o=_e("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=X8(d),p=new N9;return Object.assign(p,f),p})}}async importFile(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=$8(e);return o=_e("{file_search_store_name}:importFile",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=j8(d),p=new MT;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QG(t,e){const n={},i=m(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function XG(t,e){const n={},i=m(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function ZG(t,e){const n={},i=m(t,["sdkHttpResponse"]);return i!=null&&y(n,["sdkHttpResponse"],i),n}function e7(t,e){const n={},i=m(t,["sdkHttpResponse"]);return i!=null&&y(n,["sdkHttpResponse"],i),n}function t7(t,e,n){const i={};if(m(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=m(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&y(e,["displayName"],r),m(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=m(t,["epochCount"]);e!==void 0&&o!=null&&y(e,["tuningTask","hyperparameters","epochCount"],o);const l=m(t,["learningRateMultiplier"]);if(l!=null&&y(i,["tuningTask","hyperparameters","learningRateMultiplier"],l),m(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(m(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(m(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=m(t,["batchSize"]);e!==void 0&&c!=null&&y(e,["tuningTask","hyperparameters","batchSize"],c);const d=m(t,["learningRate"]);if(e!==void 0&&d!=null&&y(e,["tuningTask","hyperparameters","learningRate"],d),m(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(m(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function n7(t,e,n){const i={};let r=m(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const b=m(t,["validationDataset"]);e!==void 0&&b!=null&&y(e,["supervisedTuningSpec"],mI(b))}else if(r==="PREFERENCE_TUNING"){const b=m(t,["validationDataset"]);e!==void 0&&b!=null&&y(e,["preferenceOptimizationSpec"],mI(b))}const o=m(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&y(e,["tunedModelDisplayName"],o);const l=m(t,["description"]);e!==void 0&&l!=null&&y(e,["description"],l);let c=m(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const b=m(t,["epochCount"]);e!==void 0&&b!=null&&y(e,["supervisedTuningSpec","hyperParameters","epochCount"],b)}else if(c==="PREFERENCE_TUNING"){const b=m(t,["epochCount"]);e!==void 0&&b!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],b)}let d=m(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const b=m(t,["learningRateMultiplier"]);e!==void 0&&b!=null&&y(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],b)}else if(d==="PREFERENCE_TUNING"){const b=m(t,["learningRateMultiplier"]);e!==void 0&&b!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],b)}let f=m(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const b=m(t,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&y(e,["supervisedTuningSpec","exportLastCheckpointOnly"],b)}else if(f==="PREFERENCE_TUNING"){const b=m(t,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&y(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],b)}let p=m(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const b=m(t,["adapterSize"]);e!==void 0&&b!=null&&y(e,["supervisedTuningSpec","hyperParameters","adapterSize"],b)}else if(p==="PREFERENCE_TUNING"){const b=m(t,["adapterSize"]);e!==void 0&&b!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],b)}if(m(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(m(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const v=m(t,["labels"]);e!==void 0&&v!=null&&y(e,["labels"],v);const T=m(t,["beta"]);return e!==void 0&&T!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),i}function i7(t,e){const n={},i=m(t,["baseModel"]);i!=null&&y(n,["baseModel"],i);const r=m(t,["preTunedModel"]);r!=null&&y(n,["preTunedModel"],r);const o=m(t,["trainingDataset"]);o!=null&&p7(o);const l=m(t,["config"]);return l!=null&&t7(l,n),n}function r7(t,e){const n={},i=m(t,["baseModel"]);i!=null&&y(n,["baseModel"],i);const r=m(t,["preTunedModel"]);r!=null&&y(n,["preTunedModel"],r);const o=m(t,["trainingDataset"]);o!=null&&m7(o,n,e);const l=m(t,["config"]);return l!=null&&n7(l,n,e),n}function s7(t,e){const n={},i=m(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function o7(t,e){const n={},i=m(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function a7(t,e,n){const i={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const o=m(t,["pageToken"]);e!==void 0&&o!=null&&y(e,["_query","pageToken"],o);const l=m(t,["filter"]);return e!==void 0&&l!=null&&y(e,["_query","filter"],l),i}function l7(t,e,n){const i={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const o=m(t,["pageToken"]);e!==void 0&&o!=null&&y(e,["_query","pageToken"],o);const l=m(t,["filter"]);return e!==void 0&&l!=null&&y(e,["_query","filter"],l),i}function u7(t,e){const n={},i=m(t,["config"]);return i!=null&&a7(i,n),n}function c7(t,e){const n={},i=m(t,["config"]);return i!=null&&l7(i,n),n}function d7(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const r=m(t,["nextPageToken"]);r!=null&&y(n,["nextPageToken"],r);const o=m(t,["tunedModels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>HD(c))),y(n,["tuningJobs"],l)}return n}function f7(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const r=m(t,["nextPageToken"]);r!=null&&y(n,["nextPageToken"],r);const o=m(t,["tuningJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Y0(c))),y(n,["tuningJobs"],l)}return n}function h7(t,e){const n={},i=m(t,["name"]);i!=null&&y(n,["model"],i);const r=m(t,["name"]);return r!=null&&y(n,["endpoint"],r),n}function p7(t,e){const n={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=m(t,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),y(n,["examples","examples"],r)}return n}function m7(t,e,n){const i={};let r=m(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const l=m(t,["gcsUri"]);e!==void 0&&l!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(r==="PREFERENCE_TUNING"){const l=m(t,["gcsUri"]);e!==void 0&&l!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let o=m(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const l=m(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(o==="PREFERENCE_TUNING"){const l=m(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(m(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function HD(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const r=m(t,["name"]);r!=null&&y(n,["name"],r);const o=m(t,["state"]);o!=null&&y(n,["state"],bD(o));const l=m(t,["createTime"]);l!=null&&y(n,["createTime"],l);const c=m(t,["tuningTask","startTime"]);c!=null&&y(n,["startTime"],c);const d=m(t,["tuningTask","completeTime"]);d!=null&&y(n,["endTime"],d);const f=m(t,["updateTime"]);f!=null&&y(n,["updateTime"],f);const p=m(t,["description"]);p!=null&&y(n,["description"],p);const v=m(t,["baseModel"]);v!=null&&y(n,["baseModel"],v);const T=m(t,["_self"]);return T!=null&&y(n,["tunedModel"],h7(T)),n}function Y0(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const r=m(t,["name"]);r!=null&&y(n,["name"],r);const o=m(t,["state"]);o!=null&&y(n,["state"],bD(o));const l=m(t,["createTime"]);l!=null&&y(n,["createTime"],l);const c=m(t,["startTime"]);c!=null&&y(n,["startTime"],c);const d=m(t,["endTime"]);d!=null&&y(n,["endTime"],d);const f=m(t,["updateTime"]);f!=null&&y(n,["updateTime"],f);const p=m(t,["error"]);p!=null&&y(n,["error"],p);const v=m(t,["description"]);v!=null&&y(n,["description"],v);const T=m(t,["baseModel"]);T!=null&&y(n,["baseModel"],T);const b=m(t,["tunedModel"]);b!=null&&y(n,["tunedModel"],b);const C=m(t,["preTunedModel"]);C!=null&&y(n,["preTunedModel"],C);const N=m(t,["supervisedTuningSpec"]);N!=null&&y(n,["supervisedTuningSpec"],N);const D=m(t,["preferenceOptimizationSpec"]);D!=null&&y(n,["preferenceOptimizationSpec"],D);const O=m(t,["tuningDataStats"]);O!=null&&y(n,["tuningDataStats"],O);const k=m(t,["encryptionSpec"]);k!=null&&y(n,["encryptionSpec"],k);const F=m(t,["partnerModelTuningSpec"]);F!=null&&y(n,["partnerModelTuningSpec"],F);const G=m(t,["customBaseModel"]);G!=null&&y(n,["customBaseModel"],G);const K=m(t,["experiment"]);K!=null&&y(n,["experiment"],K);const H=m(t,["labels"]);H!=null&&y(n,["labels"],H);const R=m(t,["outputUri"]);R!=null&&y(n,["outputUri"],R);const I=m(t,["pipelineJob"]);I!=null&&y(n,["pipelineJob"],I);const P=m(t,["serviceAccount"]);P!=null&&y(n,["serviceAccount"],P);const U=m(t,["tunedModelDisplayName"]);U!=null&&y(n,["tunedModelDisplayName"],U);const q=m(t,["veoTuningSpec"]);return q!=null&&y(n,["veoTuningSpec"],q),n}function g7(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const r=m(t,["name"]);r!=null&&y(n,["name"],r);const o=m(t,["metadata"]);o!=null&&y(n,["metadata"],o);const l=m(t,["done"]);l!=null&&y(n,["done"],l);const c=m(t,["error"]);return c!=null&&y(n,["error"],c),n}function mI(t,e){const n={},i=m(t,["gcsUri"]);i!=null&&y(n,["validationDatasetUri"],i);const r=m(t,["vertexDatasetResource"]);return r!=null&&y(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class y7 extends $s{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new al(Hs.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:r});return o.baseModel=void 0,await this.tuneInternal(o)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),o=await this.tuneMldevInternal(r);let l="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?l=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(l=o.name.split("/operations/")[0]),{name:l,state:q0.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=o7(e);return c=_e("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>Y0(p))}else{const f=s7(e);return c=_e("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>HD(p))}}async listInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=c7(e);return c=_e("tuningJobs",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=f7(p),T=new KC;return Object.assign(T,v),T})}else{const f=u7(e);return c=_e("tunedModels",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=d7(p),T=new KC;return Object.assign(T,v),T})}}async cancel(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=XG(e);return c=_e("{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=e7(p),T=new YC;return Object.assign(T,v),T})}else{const f=QG(e);return c=_e("{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=ZG(p),T=new YC;return Object.assign(T,v),T})}}async tuneInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=r7(e,e);return o=_e("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>Y0(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=i7(e);return o=_e("tunedModels",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>g7(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class v7{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const _7=1024*1024*8,T7=3,E7=1e3,S7=2,cm="x-goog-upload-status";async function b7(t,e,n){var i;const r=await GD(t,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[cm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function w7(t,e,n){var i;const r=await GD(t,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[cm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=yD(o),c=new kT;return Object.assign(c,l),c}async function GD(t,e,n){var i,r;let o=0,l=0,c=new z0(new Response),d="upload";for(o=t.size;l<o;){const f=Math.min(_7,o-l),p=t.slice(l,l+f);l+f>=o&&(d+=", finalize");let v=0,T=E7;for(;v<T7&&(c=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(l),"Content-Length":String(f)}}}),!(!((i=c==null?void 0:c.headers)===null||i===void 0)&&i[cm]));)v++,await A7(T),T=T*S7;if(l+=f,((r=c==null?void 0:c.headers)===null||r===void 0?void 0:r[cm])!=="active")break;if(o<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function x7(t){return{size:t.size,type:t.type}}function A7(t){return new Promise(e=>setTimeout(e,t))}class C7{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await b7(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await w7(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await x7(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class I7{create(e,n,i){return new R7(e,n,i)}}class R7{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gI="x-goog-api-key";class N7{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(gI)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(gI,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const P7="gl-node/";class D7{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=a9(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new N7(this.apiKey);this.apiClient=new oG({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:P7+"web",uploader:new C7,downloader:new v7}),this.models=new xG(this.apiClient),this.live=new _G(this.apiClient,r,new I7),this.batches=new Lq(this.apiClient),this.chats=new yz(this.models,this.apiClient),this.caches=new pz(this.apiClient),this.files=new Cz(this.apiClient),this.operations=new AG(this.apiClient),this.authTokens=new zG(this.apiClient),this.tunings=new y7(this.apiClient),this.fileSearchStores=new WG(this.apiClient)}}const jD={geminiApiKey:"AIzaSyBAzdNikRnpu5iyeg8VJ03fc0HXVG2B2iY",openWeatherApiKey:"074ebc9404ca1a72d5b0759070161539"},ug=new D7({apiKey:jD.geminiApiKey});function cg(t){try{if(typeof t.text=="function")return t.text();if(t.candidates&&t.candidates.length>0){const e=t.candidates[0];if(e.content&&e.content.parts&&e.content.parts.length>0)return e.content.parts[0].text||"{}"}return"{}"}catch(e){return console.error("Erreur lors de l'extraction du texte Gemini:",e),"{}"}}async function M7(t){const e={text:`Analyse chacune des images de vtements fournies. Pour chaque image, dans l'ordre, extrais les informations suivantes en franais :
    1. Une description concise incluant son type (ex: T-shirt, jean), sa couleur principale, et son style.
    2. Sa catgorie : "Hauts", "Bas", "Chaussures", ou "Accessoires".
    3. Sa couleur principale (ex: "Bleu", "Noir"). Sois concis.
    4. Sa matire principale (ex: "Coton", "Cuir"). Sois concis.
    
    Retourne le rsultat sous la forme d'un objet JSON unique contenant une cl "items", qui est un tableau d'objets.`},n=t.map(r=>({inlineData:{data:r,mimeType:"image/jpeg"}})),i=await ug.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[e,...n]},config:{responseMimeType:"application/json",responseSchema:{type:Ge.OBJECT,properties:{items:{type:Ge.ARRAY,items:{type:Ge.OBJECT,properties:{analysis:{type:Ge.STRING},category:{type:Ge.STRING,enum:["Hauts","Bas","Chaussures","Accessoires"]},color:{type:Ge.STRING},material:{type:Ge.STRING}},required:["analysis","category","color","material"]}}},required:["items"]}}});try{const r=cg(i),o=JSON.parse(r),l=["Hauts","Bas","Chaussures","Accessoires"];return o.items?(o.items.forEach(c=>{l.includes(c.category)||(c.category="Accessoires")}),o.items):[]}catch(r){throw console.error("Erreur parsing Gemini:",r),new Error("L'IA a renvoy une rponse malforme.")}}async function k7(t,e,n,i){const r=new Set((e||[]).flatMap(T=>T.itemIds)),l=t.filter(T=>!r.has(T.id)).map(T=>`- ${T.analysis} (ID: ${T.id}, Cat: ${T.category}, Matire: ${T.material})`).join(`
`),c=e.map(T=>`- ${T.name} (Ensemble, ID: ${T.id})`).join(`
`),d=[l,c].filter(Boolean).join(`
`),f=i?`
**RGLE D'ANCRAGE : La tenue DOIT inclure : "${"name"in i?i.name:i.analysis} (ID: ${i.id})".**
`:"",p=`Tu es un styliste expert. Cre 3 tenues compltes et harmonieuses pour : "${n}".

Vtements disponibles :
${d}
${f}


 PRIORIT 1 - TEMPRATURE (RGLE ABSOLUE)


Analyse la mto dans le contexte et applique :

| Temprature | Rgle stricte |
|-------------|---------------|
| **< 15C** | Layering OBLIGATOIRE : Base (t-shirt/chemise) + Pull/Sweat + Manteau |
| **15-20C** | Pull, sweat, ou veste lgre suffisent |
| **20-25C** | 1 seule couche (t-shirt OU chemise lgre) |
| **> 25C** | Vtements TRS lgers uniquement. INTERDITS : jeans pais, pulls, vestes |

 **INTERDICTIONS THERMIQUES** :
- Doudoune/manteau si > 15C
- Short si < 22C
- Pull laine si > 15C
- Sandales si < 25C


 PRIORIT 2 - LAYERING (SUPERPOSITION)


**RGLES DE SUPERPOSITION VALIDES** :

 **Pull col V**  TOUJOURS avec chemise dessous (sinon nglig)
 **Pull col zipp/camionneur**  TOUJOURS avec t-shirt ou chemise dessous
 **Veste/Blazer**  Sur t-shirt, chemise, pull fin, ou col roul
 **Manteau**  Sur pull, sweat, ou veste (si trs froid)
 **Col roul**  JAMAIS avec chemise !

 **INTERDICTIONS ABSOLUES DE LAYERING** :
- JAMAIS chemise avec col roul (aberration stylistique)
- JAMAIS col V sans rien dessous en contexte formel
- JAMAIS pull pais sous veste ajuste (volume excessif)
- JAMAIS 2 cols montants ensemble (col roul + col montant)


 PRIORIT 3 - COHRENCE & HARMONIE


**STRUCTURE** : Chaque tenue = Haut + Bas + Chaussures (minimum)

**COULEURS** :
- Maximum 3 couleurs par tenue
- 1 seul motif maximum (si haut  motifs  bas uni)
- vite contrastes trop proches (bleu marine + noir)

**VARIT** :
- 3 looks visuellement diffrents
- vite de rpter le mme pantalon 3 fois si possible


 ACCESSOIRES (recommands mais optionnels)


- Montre/bracelet si disponible
- Ceinture pour pantalon classique
- charpe si < 10C

**IMPORTANT** : Utilise les IDs EXACTS des articles. Sois cratif dans les limites.`,v=await ug.models.generateContent({model:"gemini-2.5-flash",contents:p,config:{responseMimeType:"application/json",responseSchema:{type:Ge.OBJECT,properties:{tenues:{type:Ge.ARRAY,items:{type:Ge.OBJECT,properties:{titre:{type:Ge.STRING},description:{type:Ge.STRING},vetements:{type:Ge.ARRAY,items:{type:Ge.OBJECT,properties:{id:{type:Ge.STRING},description:{type:Ge.STRING}},required:["id","description"]}}},required:["titre","description","vetements"]}}},required:["tenues"]}}});try{const T=cg(v);return JSON.parse(T).tenues}catch(T){throw console.error("Erreur parsing Gemini:",T),new Error("Rponse malforme.")}}async function V7(t,e){const n={Hauts:t.filter(f=>f.category==="Hauts"),Bas:t.filter(f=>f.category==="Bas"),Chaussures:t.filter(f=>f.category==="Chaussures"),Accessoires:t.filter(f=>f.category==="Accessoires")},i=Object.entries(n).map(([f,p])=>`**${f}** (${p.length}) :
${p.map(v=>`  - ${v.analysis} (${v.color}, ${v.material})`).join(`
`)}`).join(`

`),r=t.length,o=e.length>0,l=`Tu es un expert styliste et conseiller en garde-robe avec 20 ans d'exprience. Ta mission : analyser cette garde-robe et suggrer des achats stratgiques pour maximiser la polyvalence.

 **INVENTAIRE ACTUEL** (${r} pices${o?`, ${e.length} ensembles`:""}) :

${i}

---

 **OBJECTIF DE L'ANALYSE** :
Identifier les **pices manquantes cls** qui permettront de crer le maximum de tenues diffrentes avec l'existant.

 **MTHODOLOGIE** :

1. **ANALYSE STRATGIQUE** :
   - quilibre entre catgories (ratio Hauts/Bas/Chaussures)
   - Diversit des couleurs (neutres vs. vives)
   - Polyvalence des pices existantes
   - Occasions couvertes (casual, formel, sport, etc.)
   - Saisons couvertes

2. **IDENTIFICATION DES GAPS CRITIQUES** :
   - Pices basiques manquantes (ex: chemise blanche, jean brut)
   - Couleurs absentes pour complter les palettes
   - Styles/occasions non couverts
   - Opportunits de layering (superposition)

3. **PRIORISATION** :
   - **HIGH** : Pice essentielle manquante qui dbloque 5+ nouvelles tenues
   - **MEDIUM** : Pice utile qui ajoute de la varit (3-5 tenues)
   - **LOW** : Pice "nice-to-have" pour occasions spcifiques

4. **SUGGESTIONS D'ACHATS** (4-6 pices maximum) :
   - Focus sur la **POLYVALENCE** : chaque suggestion doit se marier avec plusieurs pices existantes
   - Inclure des **pices basiques intemporelles** avant les tendances
   - quilibrer les priorits (au moins 1-2 high priority)
   - Pour chaque suggestion, fournis :
     * Une description prcise (ex: "Chemise oxford bleu clair en coton")
     * La raison stratgique (ex: "Se marie avec vos 3 pantalons et cre une base smart-casual")
     * Un prix estim raliste en 
     * Une requte de recherche optimise (mots-cls pour Zalando/autres boutiques)

---

 **RGLES CRITIQUES** :

- NE suggre PAS de pices similaires  l'existant
- Favorise les neutres (blanc, noir, beige, navy) pour maximiser les combinaisons
- vite les pices trs spcifiques/occasionnelles (sauf si totalement absentes)
- Sois concis mais prcis dans les descriptions
- Le champ \`searchQuery\` doit contenir des mots-cls optimiss pour recherche en ligne (ex: "chemise oxford homme coton bleu clair" ou "pull col V mrinos noir homme")

Retourne ton analyse au format JSON.`,c=await ug.models.generateContent({model:"gemini-2.5-flash",contents:l,config:{responseMimeType:"application/json",responseSchema:{type:Ge.OBJECT,properties:{summary:{type:Ge.STRING,description:"Rsum global de l'analyse en 2-3 phrases"},strengths:{type:Ge.ARRAY,items:{type:Ge.STRING},description:"2-3 points forts de la garde-robe actuelle"},gaps:{type:Ge.ARRAY,items:{type:Ge.STRING},description:"2-4 gaps/opportunits d'amlioration identifis"},suggestions:{type:Ge.ARRAY,items:{type:Ge.OBJECT,properties:{category:{type:Ge.STRING,description:"Catgorie du vtement suggr"},description:{type:Ge.STRING,description:"Description prcise du vtement suggr (style, couleur, matire)"},reason:{type:Ge.STRING,description:"Pourquoi cette pice est stratgique (combien de tenues elle permet)"},priority:{type:Ge.STRING,enum:["high","medium","low"],description:"Niveau de priorit bas sur l'impact"},estimatedPrice:{type:Ge.STRING,description:"Fourchette de prix estime (ex: '50-80')"},searchQuery:{type:Ge.STRING,description:"Mots-cls optimiss pour recherche en boutique en ligne"}},required:["category","description","reason","priority","estimatedPrice","searchQuery"]},description:"4-6 suggestions d'achats priorises"}},required:["summary","strengths","gaps","suggestions"]}}}),d=cg(c);return JSON.parse(d)}async function L7(t,e,n,i,r){const o=new Set((e||[]).flatMap(C=>C.itemIds)),c=t.filter(C=>!o.has(C.id)).map(C=>`- ${C.analysis} (ID: ${C.id}, Cat: ${C.category}, Couleur: ${C.color}, Matire: ${C.material})`).join(`
`),d=e.map(C=>`- ${C.name} (Ensemble, ID: ${C.id})`).join(`
`),f=[c,d].filter(Boolean).join(`
`),p=r?`
**CONTRAINTE POIDS** : Le poids total NE DOIT PAS dpasser ${r} kg. Estime le poids moyen (t-shirt ~150g, jean ~600g, pull ~400g, chaussures ~800g).`:"",v=`Tu es un expert en prparation de valise. Cre une **CAPSULE WARDROBE** optimise pour ${n} jours.

**DESTINATION & CONTEXTE** : ${i}

**PRINCIPE CAPSULE WARDROBE** : Slectionner peu de pices qui se combinent TOUTES entre elles pour crer un maximum de tenues diffrentes.

**RGLES CRITIQUES** :

1. **LOGIQUE THERMIQUE (PRIORIT ABSOLUE)** :
   
   | Temprature | Vtements adapts |
   |-------------|-------------------|
   | **> 30C (TRS CHAUD)** | T-shirts lgers, shorts, robes, sandales. INTERDITS : jeans, pulls, vestes |
   | **25-30C (CHAUD)** | T-shirts, pantalons lgers, une chemise, baskets lgres |
   | **15-25C (DOUX)** | Mix lger + 1 pull fin ou veste lgre |
   | **10-15C (FRAIS)** | Pulls, pantalons, veste, chaussures fermes |
   | **< 10C (FROID)** | Layering complet : sous-couche + pull + manteau chaud |

2. **INTERDICTIONS ABSOLUES** :
   -  Doudoune/veste ski/polaire paisse si > 20C
   -  Shorts si < 15C
   -  Sandales si < 18C
   -  Pulls en laine si > 25C
   -  Jeans pais si > 32C

3. **MATIRES ADAPTES** :
   - **Climat chaud** : Coton lger, lin, matires respirantes uniquement
   - **Climat froid** : Laine, polaire, matires isolantes
   - **Voyage** : Privilgier matires qui ne se froissent pas

4. **HARMONIE CAPSULE (pour que tout se combine)** :
   - **Palette de couleurs** : Maximum 4-5 couleurs qui vont ensemble (ex: bleu marine, blanc, beige, une couleur d'accent)
   - **Motifs** : Maximum 2 pices  motifs dans toute la valise, le reste UNI
   - **Neutralit** : Au moins 50% de pices en couleurs neutres (noir, blanc, gris, beige, marine)

5. **QUANTITS RECOMMANDES pour ${n} jours** :
   - Hauts : ${Math.min(n+1,7)} pices max (on peut reporter un t-shirt)
   - Bas : ${Math.min(Math.ceil(n/2)+1,4)} pices max
   - Chaussures : 2-3 paires max
   - Accessoires : selon besoin

6. **LAYERING INTELLIGENT (si climat variable)** :
   - Prvoir des couches qui s'empilent : t-shirt  chemise/pull lger  veste
   - Chaque couche doit tre portable seule ET en combinaison

${p}

**VTEMENTS DISPONIBLES** :
${f}

**SORTIE** : 
- Un titre accrocheur pour cette valise
- Un rsum expliquant tes choix (mto, style, combinaisons possibles)
- La liste des articles avec leur ID exact`,T=await ug.models.generateContent({model:"gemini-2.5-flash",contents:v,config:{responseMimeType:"application/json",responseSchema:{type:Ge.OBJECT,properties:{titre:{type:Ge.STRING},resume:{type:Ge.STRING},valise:{type:Ge.ARRAY,items:{type:Ge.OBJECT,properties:{id:{type:Ge.STRING},description:{type:Ge.STRING}},required:["id","description"]}}},required:["titre","resume","valise"]}}}),b=cg(T);return JSON.parse(b)}e9(i9,"generateVisualOutfit");const O7=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),U7=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),J0=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),F7=({className:t="h-8 w-8 text-gold"})=>S.jsxs("svg",{className:`animate-spin ${t}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Hd=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{d:"M10 3a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0V7H8a1 1 0 110-2h1V4a1 1 0 011-1zM4 9a1 1 0 011 1v1h1a1 1 0 110 2H5v1a1 1 0 11-2 0v-1H2a1 1 0 110-2h1v-1a1 1 0 011-1zM16 9a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})}),BT=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),yI=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.5 6.6C12.5 5.54903 11.651 4.7 10.6 4.7C9.54903 4.7 8.7 5.54903 8.7 6.6V8.7C8.7 9.36274 9.23726 9.9 9.9 9.9H14.1C14.7627 9.9 15.3 9.36274 15.3 8.7V7.8"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.10879 16.5C4.43285 14.805 5.86246 13.5 7.6 13.5H16.4C18.1375 13.5 19.5672 14.805 19.8912 16.5L20.5 19.5H3.5L4.10879 16.5Z"})]}),$D=()=>S.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4 0 1.132-.497 2.16-1.32 2.874-.823.714-1.823 1.126-2.904 1.126H12v.01M12 17h.01"})}),B7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 4h6l2 5-2 1-3-4-3 4-2-1 2-5z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v10m-3-10v10h6V10"})]}),q7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 4h12v10H6z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 14v6h-2L6 4"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 14v6h2l1-16"})]}),z7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 18h16l-3-6H7L4 18z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 12V7a2 2 0 012-2h0a2 2 0 012 2v5"})]}),H7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 000-18 9 9 0 000 18z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11.5l-3.5 3.5"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.5 8.5l-3.5 3.5"})]}),_d=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),G7=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),dg=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),qT=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),j7=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),KD=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[S.jsx("path",{d:"M8 3a1 1 0 000 2h4a1 1 0 100-2H8z"}),S.jsx("path",{fillRule:"evenodd",d:"M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 3a1 1 0 011-1h10a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1V7z",clipRule:"evenodd"})]}),dm=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 016.364 0L12 7.5l1.318-1.182a4.5 4.5 0 116.364 6.364L12 18.75l-7.682-7.682a4.5 4.5 0 010-6.364z"})}),Cu=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),YD=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),JD=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"})}),$7=({theme:t,toggleTheme:e,children:n,isModalOpen:i=!1})=>S.jsx("header",{className:`bg-snow/80 dark:bg-onyx/80 backdrop-blur-lg border-b border-black/5 dark:border-white/10 sticky top-0 transition-all ${i?"z-10":"z-50"}`,children:S.jsxs("div",{className:"container mx-auto px-4 lg:px-8 h-24 flex justify-between items-center",children:[S.jsxs("h1",{className:"text-4xl font-serif font-bold tracking-wider text-raisin-black dark:text-snow",children:["Dress ",S.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),S.jsxs("div",{className:"flex items-center gap-4",children:[n,S.jsx("button",{onClick:e,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-black/5 dark:hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx transition-colors","aria-label":"Changer le thme",children:t==="light"?S.jsx(U7,{}):S.jsx(O7,{})})]})]})}),K7="DRESSMEUP2025",vI=({user:t})=>{var G,K,H;const[e,n]=B.useState(""),[i,r]=B.useState(""),[o,l]=B.useState(""),[c,d]=B.useState(!1),[f,p]=B.useState(!1),[v,T]=B.useState(null),[b,C]=B.useState(!1),N=B.useRef(null);B.useEffect(()=>{const R=I=>{N.current&&!N.current.contains(I.target)&&p(!1)};return f&&document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},[f]);const D=async R=>{try{return(await _F(Bu(ir,"allowedEmails",R.toLowerCase()))).exists()}catch(I){return console.error("Erreur vrification email:",I),!1}},O=async()=>{C(!0),T(null);try{const I=(await pU(Oa,n9)).user.email;if(!I){await Mv(Oa),T("Impossible de rcuprer l'email du compte Google.");return}if(!await D(I)){await Mv(Oa),T("Dsol, cette application est en beta ferme. Votre email n'est pas autoris.");return}}catch(R){console.error("Erreur de connexion Google:",R),T(R.message||"Erreur de connexion")}finally{C(!1)}},k=async R=>{R.preventDefault(),C(!0),T(null);try{if(c){if(o!==K7){T("Code d'invitation invalide."),C(!1);return}if(!await D(e)){T("Votre email n'est pas dans la liste des beta testeurs."),C(!1);return}await G4(Oa,e,i)}else{if(!await D(e)){T("Votre email n'est pas autoris  accder  la beta."),C(!1);return}await j4(Oa,e,i)}}catch(I){console.error("Erreur d'authentification:",I),I.code==="auth/user-not-found"?T("Aucun compte trouv avec cet email."):I.code==="auth/wrong-password"?T("Mot de passe incorrect."):I.code==="auth/email-already-in-use"?T("Cet email est dj utilis."):I.code==="auth/weak-password"?T("Le mot de passe doit contenir au moins 6 caractres."):T(I.message||"Erreur d'authentification")}finally{C(!1)}},F=async()=>{try{await Mv(Oa)}catch(R){console.error("Erreur de dconnexion:",R)}};return t?S.jsxs("div",{className:"relative",ref:N,children:[S.jsxs("button",{onClick:()=>p(!f),className:"flex items-center gap-3 px-4 py-2 rounded-full bg-gold/10 hover:bg-gold/20 transition-all border border-gold/30",children:[S.jsx("div",{className:"w-8 h-8 rounded-full bg-gold flex items-center justify-center text-onyx font-bold",children:(((G=t.displayName)==null?void 0:G[0])||((K=t.email)==null?void 0:K[0])||"U").toUpperCase()}),S.jsx("span",{className:"hidden md:block text-sm font-medium",children:t.displayName||((H=t.email)==null?void 0:H.split("@")[0])})]}),f&&S.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-raisin-black rounded-xl shadow-2xl border border-black/10 dark:border-white/10 overflow-hidden z-50",children:[S.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[S.jsx("p",{className:"text-sm font-medium",children:t.displayName||"Utilisateur"}),S.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.email}),S.jsx("span",{className:"inline-block mt-2 px-2 py-0.5 bg-gold/20 text-gold text-xs font-semibold rounded-full",children:"Beta Testeur"})]}),S.jsxs("button",{onClick:F,className:"w-full px-4 py-3 text-left text-sm hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors flex items-center gap-2",children:[S.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Dconnexion"]})]})]}):S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl p-8 max-w-md mx-auto border border-black/5 dark:border-white/10",children:[S.jsxs("div",{className:"text-center mb-8",children:[S.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:["Dress ",S.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),S.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:c?"Rejoindre la beta":"Bienvenue"}),S.jsx("div",{className:"mt-3 inline-block px-3 py-1 bg-gold/10 border border-gold/30 rounded-full",children:S.jsx("span",{className:"text-xs font-semibold text-gold",children:" Beta prive"})})]}),v&&S.jsx("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/30 rounded-xl text-red-500 text-sm",children:v}),S.jsx("button",{onClick:O,disabled:b,className:"w-full mb-6 px-6 py-4 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl hover:border-gold hover:shadow-lg hover:shadow-gold/20 transition-all duration-300 flex items-center justify-center gap-3 group disabled:opacity-50 disabled:cursor-not-allowed",children:b?S.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):S.jsxs(S.Fragment,{children:[S.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[S.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),S.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),S.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),S.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),S.jsx("span",{className:"font-semibold group-hover:text-gold transition-colors",children:"Continuer avec Google"})]})}),S.jsxs("div",{className:"relative my-6",children:[S.jsx("div",{className:"absolute inset-0 flex items-center",children:S.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),S.jsx("div",{className:"relative flex justify-center text-sm",children:S.jsx("span",{className:"px-4 bg-white dark:bg-raisin-black text-gray-500",children:"Ou avec email"})})]}),S.jsxs("form",{onSubmit:k,className:"space-y-4",children:[S.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:R=>n(R.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),S.jsx("input",{type:"password",placeholder:"Mot de passe",value:i,onChange:R=>r(R.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),c&&S.jsx("input",{type:"text",placeholder:"Code d'invitation",value:o,onChange:R=>l(R.target.value.toUpperCase()),className:"w-full px-4 py-3 border border-gold/50 dark:border-gold/30 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-gold/5 dark:bg-gold/10 transition-all placeholder:text-gold/50",required:!0}),S.jsx("button",{type:"submit",disabled:b,className:"w-full px-6 py-4 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all duration-300 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:b?S.jsxs("svg",{className:"animate-spin h-5 w-5 mx-auto",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):c?"Rejoindre la beta":"Se connecter"})]}),S.jsx("button",{onClick:()=>{d(!c),T(null)},className:"w-full mt-6 text-sm text-gray-500 hover:text-gold transition-colors",children:c?"Dj un compte ? Se connecter":"Pas encore de compte ? Rejoindre la beta"})]})},zT=B.createContext({});function HT(t){const e=B.useRef(null);return e.current===null&&(e.current=t()),e.current}const fg=B.createContext(null),GT=B.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class Y7 extends B.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function J7({children:t,isPresent:e}){const n=B.useId(),i=B.useRef(null),r=B.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=B.useContext(GT);return B.useInsertionEffect(()=>{const{width:l,height:c,top:d,left:f}=r.current;if(e||!i.current||!l||!c)return;i.current.dataset.motionPopId=n;const p=document.createElement("style");return o&&(p.nonce=o),document.head.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${c}px !important;
            top: ${d}px !important;
            left: ${f}px !important;
          }
        `),()=>{document.head.removeChild(p)}},[e]),S.jsx(Y7,{isPresent:e,childRef:i,sizeRef:r,children:B.cloneElement(t,{ref:i})})}const W7=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:l})=>{const c=HT(Q7),d=B.useId(),f=B.useCallback(v=>{c.set(v,!0);for(const T of c.values())if(!T)return;i&&i()},[c,i]),p=B.useMemo(()=>({id:d,initial:e,isPresent:n,custom:r,onExitComplete:f,register:v=>(c.set(v,!1),()=>c.delete(v))}),o?[Math.random(),f]:[n,f]);return B.useMemo(()=>{c.forEach((v,T)=>c.set(T,!1))},[n]),B.useEffect(()=>{!n&&!c.size&&i&&i()},[n]),l==="popLayout"&&(t=S.jsx(J7,{isPresent:n,children:t})),S.jsx(fg.Provider,{value:p,children:t})};function Q7(){return new Map}function WD(t=!0){const e=B.useContext(fg);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,o=B.useId();B.useEffect(()=>{t&&r(o)},[t]);const l=B.useCallback(()=>t&&i&&i(o),[o,i,t]);return!n&&i?[!1,l]:[!0]}const Jh=t=>t.key||"";function _I(t){const e=[];return B.Children.forEach(t,n=>{B.isValidElement(n)&&e.push(n)}),e}const jT=typeof window<"u",QD=jT?B.useLayoutEffect:B.useEffect,X7=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:o="sync",propagate:l=!1})=>{const[c,d]=WD(l),f=B.useMemo(()=>_I(t),[t]),p=l&&!c?[]:f.map(Jh),v=B.useRef(!0),T=B.useRef(f),b=HT(()=>new Map),[C,N]=B.useState(f),[D,O]=B.useState(f);QD(()=>{v.current=!1,T.current=f;for(let G=0;G<D.length;G++){const K=Jh(D[G]);p.includes(K)?b.delete(K):b.get(K)!==!0&&b.set(K,!1)}},[D,p.length,p.join("-")]);const k=[];if(f!==C){let G=[...f];for(let K=0;K<D.length;K++){const H=D[K],R=Jh(H);p.includes(R)||(G.splice(K,0,H),k.push(H))}o==="wait"&&k.length&&(G=k),O(_I(G)),N(f);return}const{forceRender:F}=B.useContext(zT);return S.jsx(S.Fragment,{children:D.map(G=>{const K=Jh(G),H=l&&!c?!1:f===D||p.includes(K),R=()=>{if(b.has(K))b.set(K,!0);else return;let I=!0;b.forEach(P=>{P||(I=!1)}),I&&(F==null||F(),O(T.current),l&&(d==null||d()),i&&i())};return S.jsx(W7,{isPresent:H,initial:!v.current||n?void 0:!1,custom:H?void 0:e,presenceAffectsLayout:r,mode:o,onExitComplete:H?void 0:R,children:G},K)})})},tr=t=>t;let XD=tr;function $T(t){let e;return()=>(e===void 0&&(e=t()),e)}const Iu=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},Ls=t=>t*1e3,Os=t=>t/1e3,Z7={useManualTiming:!1};function ej(t){let e=new Set,n=new Set,i=!1,r=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(f){o.has(f)&&(d.schedule(f),t()),f(l)}const d={schedule:(f,p=!1,v=!1)=>{const b=v&&i?e:n;return p&&o.add(f),b.has(f)||b.add(f),f},cancel:f=>{n.delete(f),o.delete(f)},process:f=>{if(l=f,i){r=!0;return}i=!0,[e,n]=[n,e],e.forEach(c),e.clear(),i=!1,r&&(r=!1,d.process(f))}};return d}const Wh=["read","resolveKeyframes","update","preRender","render","postRender"],tj=40;function ZD(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,l=Wh.reduce((O,k)=>(O[k]=ej(o),O),{}),{read:c,resolveKeyframes:d,update:f,preRender:p,render:v,postRender:T}=l,b=()=>{const O=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(O-r.timestamp,tj),1),r.timestamp=O,r.isProcessing=!0,c.process(r),d.process(r),f.process(r),p.process(r),v.process(r),T.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(b))},C=()=>{n=!0,i=!0,r.isProcessing||t(b)};return{schedule:Wh.reduce((O,k)=>{const F=l[k];return O[k]=(G,K=!1,H=!1)=>(n||C(),F.schedule(G,K,H)),O},{}),cancel:O=>{for(let k=0;k<Wh.length;k++)l[Wh[k]].cancel(O)},state:r,steps:l}}const{schedule:Kt,cancel:Zo,state:Jn,steps:qv}=ZD(typeof requestAnimationFrame<"u"?requestAnimationFrame:tr,!0),eM=B.createContext({strict:!1}),TI={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ru={};for(const t in TI)Ru[t]={isEnabled:e=>TI[t].some(n=>!!e[n])};function nj(t){for(const e in t)Ru[e]={...Ru[e],...t[e]}}const ij=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function fm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||ij.has(t)}let tM=t=>!fm(t);function rj(t){t&&(tM=e=>e.startsWith("on")?!fm(e):t(e))}try{rj(require("@emotion/is-prop-valid").default)}catch{}function sj(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(tM(r)||n===!0&&fm(r)||!e&&!fm(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function oj(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...i)=>t(...i);return new Proxy(n,{get:(i,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}const hg=B.createContext({});function Gd(t){return typeof t=="string"||Array.isArray(t)}function pg(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const KT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],YT=["initial",...KT];function mg(t){return pg(t.animate)||YT.some(e=>Gd(t[e]))}function nM(t){return!!(mg(t)||t.variants)}function aj(t,e){if(mg(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Gd(n)?n:void 0,animate:Gd(i)?i:void 0}}return t.inherit!==!1?e:{}}function lj(t){const{initial:e,animate:n}=aj(t,B.useContext(hg));return B.useMemo(()=>({initial:e,animate:n}),[EI(e),EI(n)])}function EI(t){return Array.isArray(t)?t.join(" "):t}const uj=Symbol.for("motionComponentSymbol");function iu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function cj(t,e,n){return B.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):iu(n)&&(n.current=i))},[e])}const JT=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),dj="framerAppearId",iM="data-"+JT(dj),{schedule:WT}=ZD(queueMicrotask,!1),rM=B.createContext({});function fj(t,e,n,i,r){var o,l;const{visualElement:c}=B.useContext(hg),d=B.useContext(eM),f=B.useContext(fg),p=B.useContext(GT).reducedMotion,v=B.useRef(null);i=i||d.renderer,!v.current&&i&&(v.current=i(t,{visualState:e,parent:c,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:p}));const T=v.current,b=B.useContext(rM);T&&!T.projection&&r&&(T.type==="html"||T.type==="svg")&&hj(v.current,n,r,b);const C=B.useRef(!1);B.useInsertionEffect(()=>{T&&C.current&&T.update(n,f)});const N=n[iM],D=B.useRef(!!N&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,N))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,N)));return QD(()=>{T&&(C.current=!0,window.MotionIsMounted=!0,T.updateFeatures(),WT.render(T.render),D.current&&T.animationState&&T.animationState.animateChanges())}),B.useEffect(()=>{T&&(!D.current&&T.animationState&&T.animationState.animateChanges(),D.current&&(queueMicrotask(()=>{var O;(O=window.MotionHandoffMarkAsComplete)===null||O===void 0||O.call(window,N)}),D.current=!1))}),T}function hj(t,e,n,i){const{layoutId:r,layout:o,drag:l,dragConstraints:c,layoutScroll:d,layoutRoot:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:sM(t.parent)),t.projection.setOptions({layoutId:r,layout:o,alwaysMeasureLayout:!!l||c&&iu(c),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,layoutScroll:d,layoutRoot:f})}function sM(t){if(t)return t.options.allowProjection!==!1?t.projection:sM(t.parent)}function pj({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){var o,l;t&&nj(t);function c(f,p){let v;const T={...B.useContext(GT),...f,layoutId:mj(f)},{isStatic:b}=T,C=lj(f),N=i(f,b);if(!b&&jT){gj();const D=yj(T);v=D.MeasureLayout,C.visualElement=fj(r,N,T,e,D.ProjectionNode)}return S.jsxs(hg.Provider,{value:C,children:[v&&C.visualElement?S.jsx(v,{visualElement:C.visualElement,...T}):null,n(r,f,cj(N,C.visualElement,p),N,b,C.visualElement)]})}c.displayName=`motion.${typeof r=="string"?r:`create(${(l=(o=r.displayName)!==null&&o!==void 0?o:r.name)!==null&&l!==void 0?l:""})`}`;const d=B.forwardRef(c);return d[uj]=r,d}function mj({layoutId:t}){const e=B.useContext(zT).id;return e&&t!==void 0?e+"-"+t:t}function gj(t,e){B.useContext(eM).strict}function yj(t){const{drag:e,layout:n}=Ru;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const vj=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function QT(t){return typeof t!="string"||t.includes("-")?!1:!!(vj.indexOf(t)>-1||/[A-Z]/u.test(t))}function SI(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function XT(t,e,n,i){if(typeof e=="function"){const[r,o]=SI(i);e=e(n!==void 0?n:t.custom,r,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,o]=SI(i);e=e(n!==void 0?n:t.custom,r,o)}return e}const W0=t=>Array.isArray(t),_j=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Tj=t=>W0(t)?t[t.length-1]||0:t,li=t=>!!(t&&t.getVelocity);function Rp(t){const e=li(t)?t.get():t;return _j(e)?e.toValue():e}function Ej({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},i,r,o){const l={latestValues:Sj(i,r,o,t),renderState:e()};return n&&(l.onMount=c=>n({props:i,current:c,...l}),l.onUpdate=c=>n(c)),l}const oM=t=>(e,n)=>{const i=B.useContext(hg),r=B.useContext(fg),o=()=>Ej(t,e,i,r);return n?o():HT(o)};function Sj(t,e,n,i){const r={},o=i(t,{});for(const T in o)r[T]=Rp(o[T]);let{initial:l,animate:c}=t;const d=mg(t),f=nM(t);e&&f&&!d&&t.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let p=n?n.initial===!1:!1;p=p||l===!1;const v=p?c:l;if(v&&typeof v!="boolean"&&!pg(v)){const T=Array.isArray(v)?v:[v];for(let b=0;b<T.length;b++){const C=XT(t,T[b]);if(C){const{transitionEnd:N,transition:D,...O}=C;for(const k in O){let F=O[k];if(Array.isArray(F)){const G=p?F.length-1:0;F=F[G]}F!==null&&(r[k]=F)}for(const k in N)r[k]=N[k]}}}return r}const Gu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ll=new Set(Gu),aM=t=>e=>typeof e=="string"&&e.startsWith(t),lM=aM("--"),bj=aM("var(--"),ZT=t=>bj(t)?wj.test(t.split("/*")[0].trim()):!1,wj=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,uM=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Gs=(t,e,n)=>n>e?e:n<t?t:n,ju={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},jd={...ju,transform:t=>Gs(0,1,t)},Qh={...ju,default:1},hf=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),No=hf("deg"),ls=hf("%"),Ue=hf("px"),xj=hf("vh"),Aj=hf("vw"),bI={...ls,parse:t=>ls.parse(t)/100,transform:t=>ls.transform(t*100)},Cj={borderWidth:Ue,borderTopWidth:Ue,borderRightWidth:Ue,borderBottomWidth:Ue,borderLeftWidth:Ue,borderRadius:Ue,radius:Ue,borderTopLeftRadius:Ue,borderTopRightRadius:Ue,borderBottomRightRadius:Ue,borderBottomLeftRadius:Ue,width:Ue,maxWidth:Ue,height:Ue,maxHeight:Ue,top:Ue,right:Ue,bottom:Ue,left:Ue,padding:Ue,paddingTop:Ue,paddingRight:Ue,paddingBottom:Ue,paddingLeft:Ue,margin:Ue,marginTop:Ue,marginRight:Ue,marginBottom:Ue,marginLeft:Ue,backgroundPositionX:Ue,backgroundPositionY:Ue},Ij={rotate:No,rotateX:No,rotateY:No,rotateZ:No,scale:Qh,scaleX:Qh,scaleY:Qh,scaleZ:Qh,skew:No,skewX:No,skewY:No,distance:Ue,translateX:Ue,translateY:Ue,translateZ:Ue,x:Ue,y:Ue,z:Ue,perspective:Ue,transformPerspective:Ue,opacity:jd,originX:bI,originY:bI,originZ:Ue},wI={...ju,transform:Math.round},eE={...Cj,...Ij,zIndex:wI,size:Ue,fillOpacity:jd,strokeOpacity:jd,numOctaves:wI},Rj={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Nj=Gu.length;function Pj(t,e,n){let i="",r=!0;for(let o=0;o<Nj;o++){const l=Gu[o],c=t[l];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(l.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||n){const f=uM(c,eE[l]);if(!d){r=!1;const p=Rj[l]||l;i+=`${p}(${f}) `}n&&(e[l]=f)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function tE(t,e,n){const{style:i,vars:r,transformOrigin:o}=t;let l=!1,c=!1;for(const d in e){const f=e[d];if(ll.has(d)){l=!0;continue}else if(lM(d)){r[d]=f;continue}else{const p=uM(f,eE[d]);d.startsWith("origin")?(c=!0,o[d]=p):i[d]=p}}if(e.transform||(l||n?i.transform=Pj(e,t.transform,n):i.transform&&(i.transform="none")),c){const{originX:d="50%",originY:f="50%",originZ:p=0}=o;i.transformOrigin=`${d} ${f} ${p}`}}const Dj={offset:"stroke-dashoffset",array:"stroke-dasharray"},Mj={offset:"strokeDashoffset",array:"strokeDasharray"};function kj(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?Dj:Mj;t[o.offset]=Ue.transform(-i);const l=Ue.transform(e),c=Ue.transform(n);t[o.array]=`${l} ${c}`}function xI(t,e,n){return typeof t=="string"?t:Ue.transform(e+n*t)}function Vj(t,e,n){const i=xI(e,t.x,t.width),r=xI(n,t.y,t.height);return`${i} ${r}`}function nE(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:o,pathLength:l,pathSpacing:c=1,pathOffset:d=0,...f},p,v){if(tE(t,f,v),p){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:T,style:b,dimensions:C}=t;T.transform&&(C&&(b.transform=T.transform),delete T.transform),C&&(r!==void 0||o!==void 0||b.transform)&&(b.transformOrigin=Vj(C,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(T.x=e),n!==void 0&&(T.y=n),i!==void 0&&(T.scale=i),l!==void 0&&kj(T,l,c,d,!1)}const iE=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),cM=()=>({...iE(),attrs:{}}),rE=t=>typeof t=="string"&&t.toLowerCase()==="svg";function dM(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const o in n)t.style.setProperty(o,n[o])}const fM=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function hM(t,e,n,i){dM(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(fM.has(r)?r:JT(r),e.attrs[r])}const hm={};function Lj(t){Object.assign(hm,t)}function pM(t,{layout:e,layoutId:n}){return ll.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!hm[t]||t==="opacity")}function sE(t,e,n){var i;const{style:r}=t,o={};for(const l in r)(li(r[l])||e.style&&li(e.style[l])||pM(l,t)||((i=n==null?void 0:n.getValue(l))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(o[l]=r[l]);return o}function mM(t,e,n){const i=sE(t,e,n);for(const r in t)if(li(t[r])||li(e[r])){const o=Gu.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[o]=t[r]}return i}function Oj(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const AI=["x","y","width","height","cx","cy","r"],Uj={useVisualState:oM({scrapeMotionValuesFromProps:mM,createRenderState:cM,onUpdate:({props:t,prevProps:e,current:n,renderState:i,latestValues:r})=>{if(!n)return;let o=!!t.drag;if(!o){for(const c in r)if(ll.has(c)){o=!0;break}}if(!o)return;let l=!e;if(e)for(let c=0;c<AI.length;c++){const d=AI[c];t[d]!==e[d]&&(l=!0)}l&&Kt.read(()=>{Oj(n,i),Kt.render(()=>{nE(i,r,rE(n.tagName),t.transformTemplate),hM(n,i)})})}})},Fj={useVisualState:oM({scrapeMotionValuesFromProps:sE,createRenderState:iE})};function gM(t,e,n){for(const i in e)!li(e[i])&&!pM(i,n)&&(t[i]=e[i])}function Bj({transformTemplate:t},e){return B.useMemo(()=>{const n=iE();return tE(n,e,t),Object.assign({},n.vars,n.style)},[e])}function qj(t,e){const n=t.style||{},i={};return gM(i,n,t),Object.assign(i,Bj(t,e)),i}function zj(t,e){const n={},i=qj(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}function Hj(t,e,n,i){const r=B.useMemo(()=>{const o=cM();return nE(o,e,rE(i),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};gM(o,t.style,t),r.style={...o,...r.style}}return r}function Gj(t=!1){return(n,i,r,{latestValues:o},l)=>{const d=(QT(n)?Hj:zj)(i,o,l,n),f=sj(i,typeof n=="string",t),p=n!==B.Fragment?{...f,...d,ref:r}:{},{children:v}=i,T=B.useMemo(()=>li(v)?v.get():v,[v]);return B.createElement(n,{...p,children:T})}}function jj(t,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const l={...QT(i)?Uj:Fj,preloadedFeatures:t,useRender:Gj(r),createVisualElement:e,Component:i};return pj(l)}}function yM(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function gg(t,e,n){const i=t.getProps();return XT(i,e,n!==void 0?n:i.custom,t)}const $j=$T(()=>window.ScrollTimeline!==void 0);class Kj{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e,n){const i=this.animations.map(r=>{if($j()&&r.attachTimeline)return r.attachTimeline(e);if(typeof n=="function")return n(r)});return()=>{i.forEach((r,o)=>{r&&r(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Yj extends Kj{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function oE(t,e){return t?t[e]||t.default||t:void 0}const Q0=2e4;function vM(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<Q0;)e+=n,i=t.next(e);return e>=Q0?1/0:e}function aE(t){return typeof t=="function"}function CI(t,e){t.timeline=e,t.onfinish=null}const lE=t=>Array.isArray(t)&&typeof t[0]=="number",Jj={linearEasing:void 0};function Wj(t,e){const n=$T(t);return()=>{var i;return(i=Jj[e])!==null&&i!==void 0?i:n()}}const pm=Wj(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),_M=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let o=0;o<r;o++)i+=t(Iu(0,r-1,o))+", ";return`linear(${i.substring(0,i.length-2)})`};function TM(t){return!!(typeof t=="function"&&pm()||!t||typeof t=="string"&&(t in X0||pm())||lE(t)||Array.isArray(t)&&t.every(TM))}const rd=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,X0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:rd([0,.65,.55,1]),circOut:rd([.55,0,1,.45]),backIn:rd([.31,.01,.66,-.59]),backOut:rd([.33,1.53,.69,.99])};function EM(t,e){if(t)return typeof t=="function"&&pm()?_M(t,e):lE(t)?rd(t):Array.isArray(t)?t.map(n=>EM(n,e)||X0.easeOut):X0[t]}const Mr={x:!1,y:!1};function SM(){return Mr.x||Mr.y}function Qj(t,e,n){var i;if(t instanceof Element)return[t];if(typeof t=="string"){let r=document;const o=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function bM(t,e){const n=Qj(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function II(t){return e=>{e.pointerType==="touch"||SM()||t(e)}}function Xj(t,e,n={}){const[i,r,o]=bM(t,n),l=II(c=>{const{target:d}=c,f=e(c);if(typeof f!="function"||!d)return;const p=II(v=>{f(v),d.removeEventListener("pointerleave",p)});d.addEventListener("pointerleave",p,r)});return i.forEach(c=>{c.addEventListener("pointerenter",l,r)}),o}const wM=(t,e)=>e?t===e?!0:wM(t,e.parentElement):!1,uE=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Zj=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function e$(t){return Zj.has(t.tagName)||t.tabIndex!==-1}const sd=new WeakSet;function RI(t){return e=>{e.key==="Enter"&&t(e)}}function zv(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const t$=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=RI(()=>{if(sd.has(n))return;zv(n,"down");const r=RI(()=>{zv(n,"up")}),o=()=>zv(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function NI(t){return uE(t)&&!SM()}function n$(t,e,n={}){const[i,r,o]=bM(t,n),l=c=>{const d=c.currentTarget;if(!NI(c)||sd.has(d))return;sd.add(d);const f=e(c),p=(b,C)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",T),!(!NI(b)||!sd.has(d))&&(sd.delete(d),typeof f=="function"&&f(b,{success:C}))},v=b=>{p(b,n.useGlobalTarget||wM(d,b.target))},T=b=>{p(b,!1)};window.addEventListener("pointerup",v,r),window.addEventListener("pointercancel",T,r)};return i.forEach(c=>{!e$(c)&&c.getAttribute("tabindex")===null&&(c.tabIndex=0),(n.useGlobalTarget?window:c).addEventListener("pointerdown",l,r),c.addEventListener("focus",f=>t$(f,r),r)}),o}function i$(t){return t==="x"||t==="y"?Mr[t]?null:(Mr[t]=!0,()=>{Mr[t]=!1}):Mr.x||Mr.y?null:(Mr.x=Mr.y=!0,()=>{Mr.x=Mr.y=!1})}const xM=new Set(["width","height","top","left","right","bottom",...Gu]);let Np;function r$(){Np=void 0}const us={now:()=>(Np===void 0&&us.set(Jn.isProcessing||Z7.useManualTiming?Jn.timestamp:performance.now()),Np),set:t=>{Np=t,queueMicrotask(r$)}};function cE(t,e){t.indexOf(e)===-1&&t.push(e)}function dE(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class fE{constructor(){this.subscriptions=[]}add(e){return cE(this.subscriptions,e),()=>dE(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const l=this.subscriptions[o];l&&l(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function AM(t,e){return e?t*(1e3/e):0}const PI=30,s$=t=>!isNaN(parseFloat(t));class o${constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const o=us.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=us.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=s$(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new fE);const i=this.events[e].add(n);return e==="change"?()=>{i(),Kt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=us.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>PI)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,PI);return AM(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function $d(t,e){return new o$(t,e)}function a$(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,$d(n))}function l$(t,e){const n=gg(t,e);let{transitionEnd:i={},transition:r={},...o}=n||{};o={...o,...i};for(const l in o){const c=Tj(o[l]);a$(t,l,c)}}function u$(t){return!!(li(t)&&t.add)}function Z0(t,e){const n=t.getValue("willChange");if(u$(n))return n.add(e)}function CM(t){return t.props[iM]}const IM=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,c$=1e-7,d$=12;function f$(t,e,n,i,r){let o,l,c=0;do l=e+(n-e)/2,o=IM(l,i,r)-t,o>0?n=l:e=l;while(Math.abs(o)>c$&&++c<d$);return l}function pf(t,e,n,i){if(t===e&&n===i)return tr;const r=o=>f$(o,0,1,t,n);return o=>o===0||o===1?o:IM(r(o),e,i)}const RM=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,NM=t=>e=>1-t(1-e),PM=pf(.33,1.53,.69,.99),hE=NM(PM),DM=RM(hE),MM=t=>(t*=2)<1?.5*hE(t):.5*(2-Math.pow(2,-10*(t-1))),pE=t=>1-Math.sin(Math.acos(t)),kM=NM(pE),VM=RM(pE),LM=t=>/^0[^.\s]+$/u.test(t);function h$(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||LM(t):!0}const Td=t=>Math.round(t*1e5)/1e5,mE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function p$(t){return t==null}const m$=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,gE=(t,e)=>n=>!!(typeof n=="string"&&m$.test(n)&&n.startsWith(t)||e&&!p$(n)&&Object.prototype.hasOwnProperty.call(n,e)),OM=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,o,l,c]=i.match(mE);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},g$=t=>Gs(0,255,t),Hv={...ju,transform:t=>Math.round(g$(t))},Ha={test:gE("rgb","red"),parse:OM("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Hv.transform(t)+", "+Hv.transform(e)+", "+Hv.transform(n)+", "+Td(jd.transform(i))+")"};function y$(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const e_={test:gE("#"),parse:y$,transform:Ha.transform},ru={test:gE("hsl","hue"),parse:OM("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+ls.transform(Td(e))+", "+ls.transform(Td(n))+", "+Td(jd.transform(i))+")"},ii={test:t=>Ha.test(t)||e_.test(t)||ru.test(t),parse:t=>Ha.test(t)?Ha.parse(t):ru.test(t)?ru.parse(t):e_.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ha.transform(t):ru.transform(t)},v$=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function _$(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(mE))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(v$))===null||n===void 0?void 0:n.length)||0)>0}const UM="number",FM="color",T$="var",E$="var(",DI="${}",S$=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Kd(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let o=0;const c=e.replace(S$,d=>(ii.test(d)?(i.color.push(o),r.push(FM),n.push(ii.parse(d))):d.startsWith(E$)?(i.var.push(o),r.push(T$),n.push(d)):(i.number.push(o),r.push(UM),n.push(parseFloat(d))),++o,DI)).split(DI);return{values:n,split:c,indexes:i,types:r}}function BM(t){return Kd(t).values}function qM(t){const{split:e,types:n}=Kd(t),i=e.length;return r=>{let o="";for(let l=0;l<i;l++)if(o+=e[l],r[l]!==void 0){const c=n[l];c===UM?o+=Td(r[l]):c===FM?o+=ii.transform(r[l]):o+=r[l]}return o}}const b$=t=>typeof t=="number"?0:t;function w$(t){const e=BM(t);return qM(t)(e.map(b$))}const ea={test:_$,parse:BM,createTransformer:qM,getAnimatableNone:w$},x$=new Set(["brightness","contrast","saturate","opacity"]);function A$(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(mE)||[];if(!i)return t;const r=n.replace(i,"");let o=x$.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const C$=/\b([a-z-]*)\(.*?\)/gu,t_={...ea,getAnimatableNone:t=>{const e=t.match(C$);return e?e.map(A$).join(" "):t}},I$={...eE,color:ii,backgroundColor:ii,outlineColor:ii,fill:ii,stroke:ii,borderColor:ii,borderTopColor:ii,borderRightColor:ii,borderBottomColor:ii,borderLeftColor:ii,filter:t_,WebkitFilter:t_},yE=t=>I$[t];function zM(t,e){let n=yE(t);return n!==t_&&(n=ea),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const R$=new Set(["auto","none","0"]);function N$(t,e,n){let i=0,r;for(;i<t.length&&!r;){const o=t[i];typeof o=="string"&&!R$.has(o)&&Kd(o).values.length&&(r=t[i]),i++}if(r&&n)for(const o of e)t[o]=zM(n,r)}const MI=t=>t===ju||t===Ue,kI=(t,e)=>parseFloat(t.split(", ")[e]),VI=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return kI(r[1],e);{const o=i.match(/^matrix\((.+)\)$/u);return o?kI(o[1],t):0}},P$=new Set(["x","y","z"]),D$=Gu.filter(t=>!P$.has(t));function M$(t){const e=[];return D$.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const Nu={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:VI(4,13),y:VI(5,14)};Nu.translateX=Nu.x;Nu.translateY=Nu.y;const $a=new Set;let n_=!1,i_=!1;function HM(){if(i_){const t=Array.from($a).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=M$(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([o,l])=>{var c;(c=i.getValue(o))===null||c===void 0||c.set(l)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}i_=!1,n_=!1,$a.forEach(t=>t.complete()),$a.clear()}function GM(){$a.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(i_=!0)})}function k$(){GM(),HM()}class vE{constructor(e,n,i,r,o,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=o,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?($a.add(this),n_||(n_=!0,Kt.read(GM),Kt.resolveKeyframes(HM))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const l=r==null?void 0:r.get(),c=e[e.length-1];if(l!==void 0)e[0]=l;else if(i&&n){const d=i.readValue(n,c);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=c),r&&l===void 0&&r.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),$a.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,$a.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const jM=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),V$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function L$(t){const e=V$.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function $M(t,e,n=1){const[i,r]=L$(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const l=o.trim();return jM(l)?parseFloat(l):l}return ZT(r)?$M(r,e,n+1):r}const KM=t=>e=>e.test(t),O$={test:t=>t==="auto",parse:t=>t},YM=[ju,Ue,ls,No,Aj,xj,O$],LI=t=>YM.find(KM(t));class JM extends vE{constructor(e,n,i,r,o){super(e,n,i,r,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),ZT(f))){const p=$M(f,n.current);p!==void 0&&(e[d]=p),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!xM.has(i)||e.length!==2)return;const[r,o]=e,l=LI(r),c=LI(o);if(l!==c)if(MI(l)&&MI(c))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)h$(e[r])&&i.push(r);i.length&&N$(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Nu[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:n,name:i,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const o=n.getValue(i);o&&o.jump(this.measuredOrigin,!1);const l=r.length-1,c=r[l];r[l]=Nu[i](n.measureViewportBox(),window.getComputedStyle(n.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([d,f])=>{n.getValue(d).set(f)}),this.resolveNoneKeyframes()}}const OI=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ea.test(t)||t==="0")&&!t.startsWith("url("));function U$(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function F$(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],l=OI(r,e),c=OI(o,e);return!l||!c?!1:U$(t)||(n==="spring"||aE(n))&&i}const B$=t=>t!==null;function yg(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(B$),o=e&&n!=="loop"&&e%2===1?0:r.length-1;return!o||i===void 0?r[o]:i}const q$=40;class WM{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:l="loop",...c}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=us.now(),this.options={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:o,repeatType:l,...c},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>q$?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&k$(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=us.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:o,delay:l,onComplete:c,onUpdate:d,isGenerator:f}=this.options;if(!f&&!F$(e,i,r,o))if(l)this.options.duration=0;else{d&&d(yg(e,this.options,n)),c&&c(),this.resolveFinishedPromise();return}const p=this.initPlayback(e,n);p!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...p},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Zt=(t,e,n)=>t+(e-t)*n;function Gv(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function z$({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,l=0;if(!e)r=o=l=n;else{const c=n<.5?n*(1+e):n+e-n*e,d=2*n-c;r=Gv(d,c,t+1/3),o=Gv(d,c,t),l=Gv(d,c,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:i}}function mm(t,e){return n=>n>0?e:t}const jv=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},H$=[e_,Ha,ru],G$=t=>H$.find(e=>e.test(t));function UI(t){const e=G$(t);if(!e)return!1;let n=e.parse(t);return e===ru&&(n=z$(n)),n}const FI=(t,e)=>{const n=UI(t),i=UI(e);if(!n||!i)return mm(t,e);const r={...n};return o=>(r.red=jv(n.red,i.red,o),r.green=jv(n.green,i.green,o),r.blue=jv(n.blue,i.blue,o),r.alpha=Zt(n.alpha,i.alpha,o),Ha.transform(r))},j$=(t,e)=>n=>e(t(n)),mf=(...t)=>t.reduce(j$),r_=new Set(["none","hidden"]);function $$(t,e){return r_.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function K$(t,e){return n=>Zt(t,e,n)}function _E(t){return typeof t=="number"?K$:typeof t=="string"?ZT(t)?mm:ii.test(t)?FI:W$:Array.isArray(t)?QM:typeof t=="object"?ii.test(t)?FI:Y$:mm}function QM(t,e){const n=[...t],i=n.length,r=t.map((o,l)=>_E(o)(o,e[l]));return o=>{for(let l=0;l<i;l++)n[l]=r[l](o);return n}}function Y$(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=_E(t[r])(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}}function J$(t,e){var n;const i=[],r={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const l=e.types[o],c=t.indexes[l][r[l]],d=(n=t.values[c])!==null&&n!==void 0?n:0;i[o]=d,r[l]++}return i}const W$=(t,e)=>{const n=ea.createTransformer(e),i=Kd(t),r=Kd(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?r_.has(t)&&!r.values.length||r_.has(e)&&!i.values.length?$$(t,e):mf(QM(J$(i,r),r.values),n):mm(t,e)};function XM(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Zt(t,e,n):_E(t)(t,e)}const Q$=5;function ZM(t,e,n){const i=Math.max(e-Q$,0);return AM(n-t(i),e-i)}const an={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},$v=.001;function X$({duration:t=an.duration,bounce:e=an.bounce,velocity:n=an.velocity,mass:i=an.mass}){let r,o,l=1-e;l=Gs(an.minDamping,an.maxDamping,l),t=Gs(an.minDuration,an.maxDuration,Os(t)),l<1?(r=f=>{const p=f*l,v=p*t,T=p-n,b=s_(f,l),C=Math.exp(-v);return $v-T/b*C},o=f=>{const v=f*l*t,T=v*n+n,b=Math.pow(l,2)*Math.pow(f,2)*t,C=Math.exp(-v),N=s_(Math.pow(f,2),l);return(-r(f)+$v>0?-1:1)*((T-b)*C)/N}):(r=f=>{const p=Math.exp(-f*t),v=(f-n)*t+1;return-$v+p*v},o=f=>{const p=Math.exp(-f*t),v=(n-f)*(t*t);return p*v});const c=5/t,d=eK(r,o,c);if(t=Ls(t),isNaN(d))return{stiffness:an.stiffness,damping:an.damping,duration:t};{const f=Math.pow(d,2)*i;return{stiffness:f,damping:l*2*Math.sqrt(i*f),duration:t}}}const Z$=12;function eK(t,e,n){let i=n;for(let r=1;r<Z$;r++)i=i-t(i)/e(i);return i}function s_(t,e){return t*Math.sqrt(1-e*e)}const tK=["duration","bounce"],nK=["stiffness","damping","mass"];function BI(t,e){return e.some(n=>t[n]!==void 0)}function iK(t){let e={velocity:an.velocity,stiffness:an.stiffness,damping:an.damping,mass:an.mass,isResolvedFromDuration:!1,...t};if(!BI(t,nK)&&BI(t,tK))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,o=2*Gs(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:an.mass,stiffness:r,damping:o}}else{const n=X$(t);e={...e,...n,mass:an.mass},e.isResolvedFromDuration=!0}return e}function ek(t=an.visualDuration,e=an.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const o=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],c={done:!1,value:o},{stiffness:d,damping:f,mass:p,duration:v,velocity:T,isResolvedFromDuration:b}=iK({...n,velocity:-Os(n.velocity||0)}),C=T||0,N=f/(2*Math.sqrt(d*p)),D=l-o,O=Os(Math.sqrt(d/p)),k=Math.abs(D)<5;i||(i=k?an.restSpeed.granular:an.restSpeed.default),r||(r=k?an.restDelta.granular:an.restDelta.default);let F;if(N<1){const K=s_(O,N);F=H=>{const R=Math.exp(-N*O*H);return l-R*((C+N*O*D)/K*Math.sin(K*H)+D*Math.cos(K*H))}}else if(N===1)F=K=>l-Math.exp(-O*K)*(D+(C+O*D)*K);else{const K=O*Math.sqrt(N*N-1);F=H=>{const R=Math.exp(-N*O*H),I=Math.min(K*H,300);return l-R*((C+N*O*D)*Math.sinh(I)+K*D*Math.cosh(I))/K}}const G={calculatedDuration:b&&v||null,next:K=>{const H=F(K);if(b)c.done=K>=v;else{let R=0;N<1&&(R=K===0?Ls(C):ZM(F,K,H));const I=Math.abs(R)<=i,P=Math.abs(l-H)<=r;c.done=I&&P}return c.value=c.done?l:H,c},toString:()=>{const K=Math.min(vM(G),Q0),H=_M(R=>G.next(K*R).value,K,30);return K+"ms "+H}};return G}function qI({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:l,min:c,max:d,restDelta:f=.5,restSpeed:p}){const v=t[0],T={done:!1,value:v},b=I=>c!==void 0&&I<c||d!==void 0&&I>d,C=I=>c===void 0?d:d===void 0||Math.abs(c-I)<Math.abs(d-I)?c:d;let N=n*e;const D=v+N,O=l===void 0?D:l(D);O!==D&&(N=O-v);const k=I=>-N*Math.exp(-I/i),F=I=>O+k(I),G=I=>{const P=k(I),U=F(I);T.done=Math.abs(P)<=f,T.value=T.done?O:U};let K,H;const R=I=>{b(T.value)&&(K=I,H=ek({keyframes:[T.value,C(T.value)],velocity:ZM(F,I,T.value),damping:r,stiffness:o,restDelta:f,restSpeed:p}))};return R(0),{calculatedDuration:null,next:I=>{let P=!1;return!H&&K===void 0&&(P=!0,G(I),R(I)),K!==void 0&&I>=K?H.next(I-K):(!P&&G(I),T)}}}const rK=pf(.42,0,1,1),sK=pf(0,0,.58,1),tk=pf(.42,0,.58,1),oK=t=>Array.isArray(t)&&typeof t[0]!="number",aK={linear:tr,easeIn:rK,easeInOut:tk,easeOut:sK,circIn:pE,circInOut:VM,circOut:kM,backIn:hE,backInOut:DM,backOut:PM,anticipate:MM},zI=t=>{if(lE(t)){XD(t.length===4);const[e,n,i,r]=t;return pf(e,n,i,r)}else if(typeof t=="string")return aK[t];return t};function lK(t,e,n){const i=[],r=n||XM,o=t.length-1;for(let l=0;l<o;l++){let c=r(t[l],t[l+1]);if(e){const d=Array.isArray(e)?e[l]||tr:e;c=mf(d,c)}i.push(c)}return i}function uK(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(XD(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=lK(e,i,r),d=c.length,f=p=>{if(l&&p<t[0])return e[0];let v=0;if(d>1)for(;v<t.length-2&&!(p<t[v+1]);v++);const T=Iu(t[v],t[v+1],p);return c[v](T)};return n?p=>f(Gs(t[0],t[o-1],p)):f}function cK(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=Iu(0,e,i);t.push(Zt(n,1,r))}}function dK(t){const e=[0];return cK(e,t.length-1),e}function fK(t,e){return t.map(n=>n*e)}function hK(t,e){return t.map(()=>e||tk).splice(0,t.length-1)}function gm({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=oK(i)?i.map(zI):zI(i),o={done:!1,value:e[0]},l=fK(n&&n.length===e.length?n:dK(e),t),c=uK(l,e,{ease:Array.isArray(r)?r:hK(e,r)});return{calculatedDuration:t,next:d=>(o.value=c(d),o.done=d>=t,o)}}const pK=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Kt.update(e,!0),stop:()=>Zo(e),now:()=>Jn.isProcessing?Jn.timestamp:us.now()}},mK={decay:qI,inertia:qI,tween:gm,keyframes:gm,spring:ek},gK=t=>t/100;class TE extends WM{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:d}=this.options;d&&d()};const{name:n,motionValue:i,element:r,keyframes:o}=this.options,l=(r==null?void 0:r.KeyframeResolver)||vE,c=(d,f)=>this.onKeyframesResolved(d,f);this.resolver=new l(o,c,n,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:o,velocity:l=0}=this.options,c=aE(n)?n:mK[n]||gm;let d,f;c!==gm&&typeof e[0]!="number"&&(d=mf(gK,XM(e[0],e[1])),e=[0,100]);const p=c({...this.options,keyframes:e});o==="mirror"&&(f=c({...this.options,keyframes:[...e].reverse(),velocity:-l})),p.calculatedDuration===null&&(p.calculatedDuration=vM(p));const{calculatedDuration:v}=p,T=v+r,b=T*(i+1)-r;return{generator:p,mirroredGenerator:f,mapPercentToKeyframes:d,calculatedDuration:v,resolvedDuration:T,totalDuration:b}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:i}=this;if(!i){const{keyframes:I}=this.options;return{done:!0,value:I[I.length-1]}}const{finalKeyframe:r,generator:o,mirroredGenerator:l,mapPercentToKeyframes:c,keyframes:d,calculatedDuration:f,totalDuration:p,resolvedDuration:v}=i;if(this.startTime===null)return o.next(0);const{delay:T,repeat:b,repeatType:C,repeatDelay:N,onUpdate:D}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-p/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const O=this.currentTime-T*(this.speed>=0?1:-1),k=this.speed>=0?O<0:O>p;this.currentTime=Math.max(O,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let F=this.currentTime,G=o;if(b){const I=Math.min(this.currentTime,p)/v;let P=Math.floor(I),U=I%1;!U&&I>=1&&(U=1),U===1&&P--,P=Math.min(P,b+1),!!(P%2)&&(C==="reverse"?(U=1-U,N&&(U-=N/v)):C==="mirror"&&(G=l)),F=Gs(0,1,U)*v}const K=k?{done:!1,value:d[0]}:G.next(F);c&&(K.value=c(K.value));let{done:H}=K;!k&&f!==null&&(H=this.speed>=0?this.currentTime>=p:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&H);return R&&r!==void 0&&(K.value=yg(d,this.options,r)),D&&D(K.value),R&&this.finish(),K}get duration(){const{resolved:e}=this;return e?Os(e.calculatedDuration):0}get time(){return Os(this.currentTime)}set time(e){e=Ls(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Os(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=pK,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const yK=new Set(["opacity","clipPath","filter","transform"]);function vK(t,e,n,{delay:i=0,duration:r=300,repeat:o=0,repeatType:l="loop",ease:c="easeInOut",times:d}={}){const f={[e]:n};d&&(f.offset=d);const p=EM(c,r);return Array.isArray(p)&&(f.easing=p),t.animate(f,{delay:i,duration:r,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"})}const _K=$T(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),ym=10,TK=2e4;function EK(t){return aE(t.type)||t.type==="spring"||!TM(t.ease)}function SK(t,e){const n=new TE({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const r=[];let o=0;for(;!i.done&&o<TK;)i=n.sample(o),r.push(i.value),o+=ym;return{times:void 0,keyframes:r,duration:o-ym,ease:"linear"}}const nk={anticipate:MM,backInOut:DM,circInOut:VM};function bK(t){return t in nk}class HI extends WM{constructor(e){super(e);const{name:n,motionValue:i,element:r,keyframes:o}=this.options;this.resolver=new JM(o,(l,c)=>this.onKeyframesResolved(l,c),n,i,r),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:i=300,times:r,ease:o,type:l,motionValue:c,name:d,startTime:f}=this.options;if(!c.owner||!c.owner.current)return!1;if(typeof o=="string"&&pm()&&bK(o)&&(o=nk[o]),EK(this.options)){const{onComplete:v,onUpdate:T,motionValue:b,element:C,...N}=this.options,D=SK(e,N);e=D.keyframes,e.length===1&&(e[1]=e[0]),i=D.duration,r=D.times,o=D.ease,l="keyframes"}const p=vK(c.owner.current,d,e,{...this.options,duration:i,times:r,ease:o});return p.startTime=f??this.calcStartTime(),this.pendingTimeline?(CI(p,this.pendingTimeline),this.pendingTimeline=void 0):p.onfinish=()=>{const{onComplete:v}=this.options;c.set(yg(e,this.options,n)),v&&v(),this.cancel(),this.resolveFinishedPromise()},{animation:p,duration:i,times:r,type:l,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Os(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Os(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=Ls(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return tr;const{animation:i}=n;CI(i,e)}return tr}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:i,duration:r,type:o,ease:l,times:c}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:f,onUpdate:p,onComplete:v,element:T,...b}=this.options,C=new TE({...b,keyframes:i,duration:r,type:o,ease:l,times:c,isGenerator:!0}),N=Ls(this.time);f.setWithVelocity(C.sample(N-ym).value,C.sample(N).value,ym)}const{onStop:d}=this.options;d&&d(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:i,repeatDelay:r,repeatType:o,damping:l,type:c}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=n.owner.getProps();return _K()&&i&&yK.has(i)&&!d&&!f&&!r&&o!=="mirror"&&l!==0&&c!=="inertia"}}const wK={type:"spring",stiffness:500,damping:25,restSpeed:10},xK=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),AK={type:"keyframes",duration:.8},CK={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},IK=(t,{keyframes:e})=>e.length>2?AK:ll.has(t)?t.startsWith("scale")?xK(e[1]):wK:CK;function RK({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:l,repeatDelay:c,from:d,elapsed:f,...p}){return!!Object.keys(p).length}const EE=(t,e,n,i={},r,o)=>l=>{const c=oE(i,t)||{},d=c.delay||i.delay||0;let{elapsed:f=0}=i;f=f-Ls(d);let p={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-f,onUpdate:T=>{e.set(T),c.onUpdate&&c.onUpdate(T)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:o?void 0:r};RK(c)||(p={...p,...IK(t,p)}),p.duration&&(p.duration=Ls(p.duration)),p.repeatDelay&&(p.repeatDelay=Ls(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let v=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(v=!0)),v&&!o&&e.get()!==void 0){const T=yg(p.keyframes,c);if(T!==void 0)return Kt.update(()=>{p.onUpdate(T),p.onComplete()}),new Yj([])}return!o&&HI.supports(p)?new HI(p):new TE(p)};function NK({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function ik(t,e,{delay:n=0,transitionOverride:i,type:r}={}){var o;let{transition:l=t.getDefaultTransition(),transitionEnd:c,...d}=e;i&&(l=i);const f=[],p=r&&t.animationState&&t.animationState.getState()[r];for(const v in d){const T=t.getValue(v,(o=t.latestValues[v])!==null&&o!==void 0?o:null),b=d[v];if(b===void 0||p&&NK(p,v))continue;const C={delay:n,...oE(l||{},v)};let N=!1;if(window.MotionHandoffAnimation){const O=CM(t);if(O){const k=window.MotionHandoffAnimation(O,v,Kt);k!==null&&(C.startTime=k,N=!0)}}Z0(t,v),T.start(EE(v,T,b,t.shouldReduceMotion&&xM.has(v)?{type:!1}:C,t,N));const D=T.animation;D&&f.push(D)}return c&&Promise.all(f).then(()=>{Kt.update(()=>{c&&l$(t,c)})}),f}function o_(t,e,n={}){var i;const r=gg(t,e,n.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const l=r?()=>Promise.all(ik(t,r,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:p=0,staggerChildren:v,staggerDirection:T}=o;return PK(t,e,p+f,v,T,n)}:()=>Promise.resolve(),{when:d}=o;if(d){const[f,p]=d==="beforeChildren"?[l,c]:[c,l];return f().then(()=>p())}else return Promise.all([l(),c(n.delay)])}function PK(t,e,n=0,i=0,r=1,o){const l=[],c=(t.variantChildren.size-1)*i,d=r===1?(f=0)=>f*i:(f=0)=>c-f*i;return Array.from(t.variantChildren).sort(DK).forEach((f,p)=>{f.notify("AnimationStart",e),l.push(o_(f,e,{...o,delay:n+d(p)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(l)}function DK(t,e){return t.sortNodePosition(e)}function MK(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>o_(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=o_(t,e,n);else{const r=typeof e=="function"?gg(t,e,n.custom):e;i=Promise.all(ik(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}const kK=YT.length;function rk(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?rk(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<kK;n++){const i=YT[n],r=t.props[i];(Gd(r)||r===!1)&&(e[i]=r)}return e}const VK=[...KT].reverse(),LK=KT.length;function OK(t){return e=>Promise.all(e.map(({animation:n,options:i})=>MK(t,n,i)))}function UK(t){let e=OK(t),n=GI(),i=!0;const r=d=>(f,p)=>{var v;const T=gg(t,p,d==="exit"?(v=t.presenceContext)===null||v===void 0?void 0:v.custom:void 0);if(T){const{transition:b,transitionEnd:C,...N}=T;f={...f,...N,...C}}return f};function o(d){e=d(t)}function l(d){const{props:f}=t,p=rk(t.parent)||{},v=[],T=new Set;let b={},C=1/0;for(let D=0;D<LK;D++){const O=VK[D],k=n[O],F=f[O]!==void 0?f[O]:p[O],G=Gd(F),K=O===d?k.isActive:null;K===!1&&(C=D);let H=F===p[O]&&F!==f[O]&&G;if(H&&i&&t.manuallyAnimateOnMount&&(H=!1),k.protectedKeys={...b},!k.isActive&&K===null||!F&&!k.prevProp||pg(F)||typeof F=="boolean")continue;const R=FK(k.prevProp,F);let I=R||O===d&&k.isActive&&!H&&G||D>C&&G,P=!1;const U=Array.isArray(F)?F:[F];let q=U.reduce(r(O),{});K===!1&&(q={});const{prevResolvedValues:V={}}=k,z={...V,...q},Ee=se=>{I=!0,T.has(se)&&(P=!0,T.delete(se)),k.needsAnimating[se]=!0;const he=t.getValue(se);he&&(he.liveStyle=!1)};for(const se in z){const he=q[se],xe=V[se];if(b.hasOwnProperty(se))continue;let Ae=!1;W0(he)&&W0(xe)?Ae=!yM(he,xe):Ae=he!==xe,Ae?he!=null?Ee(se):T.add(se):he!==void 0&&T.has(se)?Ee(se):k.protectedKeys[se]=!0}k.prevProp=F,k.prevResolvedValues=q,k.isActive&&(b={...b,...q}),i&&t.blockInitialAnimation&&(I=!1),I&&(!(H&&R)||P)&&v.push(...U.map(se=>({animation:se,options:{type:O}})))}if(T.size){const D={};T.forEach(O=>{const k=t.getBaseTarget(O),F=t.getValue(O);F&&(F.liveStyle=!0),D[O]=k??null}),v.push({animation:D})}let N=!!v.length;return i&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(N=!1),i=!1,N?e(v):Promise.resolve()}function c(d,f){var p;if(n[d].isActive===f)return Promise.resolve();(p=t.variantChildren)===null||p===void 0||p.forEach(T=>{var b;return(b=T.animationState)===null||b===void 0?void 0:b.setActive(d,f)}),n[d].isActive=f;const v=l(d);for(const T in n)n[T].protectedKeys={};return v}return{animateChanges:l,setActive:c,setAnimateFunction:o,getState:()=>n,reset:()=>{n=GI(),i=!0}}}function FK(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!yM(e,t):!1}function Ma(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function GI(){return{animate:Ma(!0),whileInView:Ma(),whileHover:Ma(),whileTap:Ma(),whileDrag:Ma(),whileFocus:Ma(),exit:Ma()}}class la{constructor(e){this.isMounted=!1,this.node=e}update(){}}class BK extends la{constructor(e){super(e),e.animationState||(e.animationState=UK(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();pg(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let qK=0;class zK extends la{constructor(){super(...arguments),this.id=qK++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const HK={animation:{Feature:BK},exit:{Feature:zK}};function Yd(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function gf(t){return{point:{x:t.pageX,y:t.pageY}}}const GK=t=>e=>uE(e)&&t(e,gf(e));function Ed(t,e,n,i){return Yd(t,e,GK(n),i)}const jI=(t,e)=>Math.abs(t-e);function jK(t,e){const n=jI(t.x,e.x),i=jI(t.y,e.y);return Math.sqrt(n**2+i**2)}class sk{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Yv(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,b=jK(v.offset,{x:0,y:0})>=3;if(!T&&!b)return;const{point:C}=v,{timestamp:N}=Jn;this.history.push({...C,timestamp:N});const{onStart:D,onMove:O}=this.handlers;T||(D&&D(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),O&&O(this.lastMoveEvent,v)},this.handlePointerMove=(v,T)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=Kv(T,this.transformPagePoint),Kt.update(this.updatePoint,!0)},this.handlePointerUp=(v,T)=>{this.end();const{onEnd:b,onSessionEnd:C,resumeAnimation:N}=this.handlers;if(this.dragSnapToOrigin&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const D=Yv(v.type==="pointercancel"?this.lastMoveEventInfo:Kv(T,this.transformPagePoint),this.history);this.startEvent&&b&&b(v,D),C&&C(v,D)},!uE(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const l=gf(e),c=Kv(l,this.transformPagePoint),{point:d}=c,{timestamp:f}=Jn;this.history=[{...d,timestamp:f}];const{onSessionStart:p}=n;p&&p(e,Yv(c,this.history)),this.removeListeners=mf(Ed(this.contextWindow,"pointermove",this.handlePointerMove),Ed(this.contextWindow,"pointerup",this.handlePointerUp),Ed(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Zo(this.updatePoint)}}function Kv(t,e){return e?{point:e(t.point)}:t}function $I(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Yv({point:t},e){return{point:t,delta:$I(t,ok(e)),offset:$I(t,$K(e)),velocity:KK(e,.1)}}function $K(t){return t[0]}function ok(t){return t[t.length-1]}function KK(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=ok(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>Ls(e)));)n--;if(!i)return{x:0,y:0};const o=Os(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const l={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}const ak=1e-4,YK=1-ak,JK=1+ak,lk=.01,WK=0-lk,QK=0+lk;function nr(t){return t.max-t.min}function XK(t,e,n){return Math.abs(t-e)<=n}function KI(t,e,n,i=.5){t.origin=i,t.originPoint=Zt(e.min,e.max,t.origin),t.scale=nr(n)/nr(e),t.translate=Zt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=YK&&t.scale<=JK||isNaN(t.scale))&&(t.scale=1),(t.translate>=WK&&t.translate<=QK||isNaN(t.translate))&&(t.translate=0)}function Sd(t,e,n,i){KI(t.x,e.x,n.x,i?i.originX:void 0),KI(t.y,e.y,n.y,i?i.originY:void 0)}function YI(t,e,n){t.min=n.min+e.min,t.max=t.min+nr(e)}function ZK(t,e,n){YI(t.x,e.x,n.x),YI(t.y,e.y,n.y)}function JI(t,e,n){t.min=e.min-n.min,t.max=t.min+nr(e)}function bd(t,e,n){JI(t.x,e.x,n.x),JI(t.y,e.y,n.y)}function eY(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?Zt(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?Zt(n,t,i.max):Math.min(t,n)),t}function WI(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function tY(t,{top:e,left:n,bottom:i,right:r}){return{x:WI(t.x,n,r),y:WI(t.y,e,i)}}function QI(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function nY(t,e){return{x:QI(t.x,e.x),y:QI(t.y,e.y)}}function iY(t,e){let n=.5;const i=nr(t),r=nr(e);return r>i?n=Iu(e.min,e.max-i,t.min):i>r&&(n=Iu(t.min,t.max-r,e.min)),Gs(0,1,n)}function rY(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const a_=.35;function sY(t=a_){return t===!1?t=0:t===!0&&(t=a_),{x:XI(t,"left","right"),y:XI(t,"top","bottom")}}function XI(t,e,n){return{min:ZI(t,e),max:ZI(t,n)}}function ZI(t,e){return typeof t=="number"?t:t[e]||0}const eR=()=>({translate:0,scale:1,origin:0,originPoint:0}),su=()=>({x:eR(),y:eR()}),tR=()=>({min:0,max:0}),pn=()=>({x:tR(),y:tR()});function vr(t){return[t("x"),t("y")]}function uk({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function oY({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function aY(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Jv(t){return t===void 0||t===1}function l_({scale:t,scaleX:e,scaleY:n}){return!Jv(t)||!Jv(e)||!Jv(n)}function Ua(t){return l_(t)||ck(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function ck(t){return nR(t.x)||nR(t.y)}function nR(t){return t&&t!=="0%"}function vm(t,e,n){const i=t-n,r=e*i;return n+r}function iR(t,e,n,i,r){return r!==void 0&&(t=vm(t,r,i)),vm(t,n,i)+e}function u_(t,e=0,n=1,i,r){t.min=iR(t.min,e,n,i,r),t.max=iR(t.max,e,n,i,r)}function dk(t,{x:e,y:n}){u_(t.x,e.translate,e.scale,e.originPoint),u_(t.y,n.translate,n.scale,n.originPoint)}const rR=.999999999999,sR=1.0000000000001;function lY(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,l;for(let c=0;c<r;c++){o=n[c],l=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&au(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,dk(t,l)),i&&Ua(o.latestValues)&&au(t,o.latestValues))}e.x<sR&&e.x>rR&&(e.x=1),e.y<sR&&e.y>rR&&(e.y=1)}function ou(t,e){t.min=t.min+e,t.max=t.max+e}function oR(t,e,n,i,r=.5){const o=Zt(t.min,t.max,r);u_(t,e,n,o,i)}function au(t,e){oR(t.x,e.x,e.scaleX,e.scale,e.originX),oR(t.y,e.y,e.scaleY,e.scale,e.originY)}function fk(t,e){return uk(aY(t.getBoundingClientRect(),e))}function uY(t,e,n){const i=fk(t,n),{scroll:r}=e;return r&&(ou(i.x,r.offset.x),ou(i.y,r.offset.y)),i}const hk=({current:t})=>t?t.ownerDocument.defaultView:null,cY=new WeakMap;class dY{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=pn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=p=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(gf(p).point)},o=(p,v)=>{const{drag:T,dragPropagation:b,onDragStart:C}=this.getProps();if(T&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=i$(T),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),vr(D=>{let O=this.getAxisMotionValue(D).get()||0;if(ls.test(O)){const{projection:k}=this.visualElement;if(k&&k.layout){const F=k.layout.layoutBox[D];F&&(O=nr(F)*(parseFloat(O)/100))}}this.originPoint[D]=O}),C&&Kt.postRender(()=>C(p,v)),Z0(this.visualElement,"transform");const{animationState:N}=this.visualElement;N&&N.setActive("whileDrag",!0)},l=(p,v)=>{const{dragPropagation:T,dragDirectionLock:b,onDirectionLock:C,onDrag:N}=this.getProps();if(!T&&!this.openDragLock)return;const{offset:D}=v;if(b&&this.currentDirection===null){this.currentDirection=fY(D),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",v.point,D),this.updateAxis("y",v.point,D),this.visualElement.render(),N&&N(p,v)},c=(p,v)=>this.stop(p,v),d=()=>vr(p=>{var v;return this.getAnimationState(p)==="paused"&&((v=this.getAxisMotionValue(p).animation)===null||v===void 0?void 0:v.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new sk(e,{onSessionStart:r,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:hk(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&Kt.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!Xh(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(l=eY(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&iu(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=tY(r.layoutBox,n):this.constraints=!1,this.elastic=sY(i),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&vr(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=rY(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!iu(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=uY(i,r.root,this.visualElement.getTransformPagePoint());let l=nY(r.layout.layoutBox,o);if(n){const c=n(oY(l));this.hasMutatedConstraints=!!c,c&&(l=uk(c))}return l}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},f=vr(p=>{if(!Xh(p,n,this.currentDirection))return;let v=d&&d[p]||{};l&&(v={min:0,max:0});const T=r?200:1e6,b=r?40:1e7,C={type:"inertia",velocity:i?e[p]:0,bounceStiffness:T,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...o,...v};return this.startAxisValueAnimation(p,C)});return Promise.all(f).then(c)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return Z0(this.visualElement,e),i.start(EE(e,i,0,n,this.visualElement,!1))}stopAnimation(){vr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){vr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){vr(n=>{const{drag:i}=this.getProps();if(!Xh(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:l,max:c}=r.layout.layoutBox[n];o.set(e[n]-Zt(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!iu(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};vr(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const d=c.get();r[l]=iY({min:d,max:d},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),vr(l=>{if(!Xh(l,e,null))return;const c=this.getAxisMotionValue(l),{min:d,max:f}=this.constraints[l];c.set(Zt(d,f,r[l]))})}addListeners(){if(!this.visualElement.current)return;cY.set(this.visualElement,this);const e=this.visualElement.current,n=Ed(e,"pointerdown",d=>{const{drag:f,dragListener:p=!0}=this.getProps();f&&p&&this.start(d)}),i=()=>{const{dragConstraints:d}=this.getProps();iu(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Kt.read(i);const l=Yd(window,"resize",()=>this.scalePositionWithinConstraints()),c=r.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(vr(p=>{const v=this.getAxisMotionValue(p);v&&(this.originPoint[p]+=d[p].translate,v.set(v.get()+d[p].translate))}),this.visualElement.render())}));return()=>{l(),n(),o(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:l=a_,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:l,dragMomentum:c}}}function Xh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function fY(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class hY extends la{constructor(e){super(e),this.removeGroupControls=tr,this.removeListeners=tr,this.controls=new dY(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||tr}unmount(){this.removeGroupControls(),this.removeListeners()}}const aR=t=>(e,n)=>{t&&Kt.postRender(()=>t(e,n))};class pY extends la{constructor(){super(...arguments),this.removePointerDownListener=tr}onPointerDown(e){this.session=new sk(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:hk(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:aR(e),onStart:aR(n),onMove:i,onEnd:(o,l)=>{delete this.session,r&&Kt.postRender(()=>r(o,l))}}}mount(){this.removePointerDownListener=Ed(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Pp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function lR(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const $c={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ue.test(t))t=parseFloat(t);else return t;const n=lR(t,e.target.x),i=lR(t,e.target.y);return`${n}% ${i}%`}},mY={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=ea.parse(t);if(r.length>5)return i;const o=ea.createTransformer(t),l=typeof r[0]!="number"?1:0,c=n.x.scale*e.x,d=n.y.scale*e.y;r[0+l]/=c,r[1+l]/=d;const f=Zt(c,d,.5);return typeof r[2+l]=="number"&&(r[2+l]/=f),typeof r[3+l]=="number"&&(r[3+l]/=f),o(r)}};class gY extends B.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;Lj(yY),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Pp.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,l=i.projection;return l&&(l.isPresent=o,r||e.layoutDependency!==n||n===void 0?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||Kt.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),WT.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function pk(t){const[e,n]=WD(),i=B.useContext(zT);return S.jsx(gY,{...t,layoutGroup:i,switchLayoutGroup:B.useContext(rM),isPresent:e,safeToRemove:n})}const yY={borderRadius:{...$c,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:$c,borderTopRightRadius:$c,borderBottomLeftRadius:$c,borderBottomRightRadius:$c,boxShadow:mY};function vY(t,e,n){const i=li(t)?t:$d(t);return i.start(EE("",i,e,n)),i.animation}function _Y(t){return t instanceof SVGElement&&t.tagName!=="svg"}const TY=(t,e)=>t.depth-e.depth;class EY{constructor(){this.children=[],this.isDirty=!1}add(e){cE(this.children,e),this.isDirty=!0}remove(e){dE(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(TY),this.isDirty=!1,this.children.forEach(e)}}function SY(t,e){const n=us.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(Zo(i),t(o-e))};return Kt.read(i,!0),()=>Zo(i)}const mk=["TopLeft","TopRight","BottomLeft","BottomRight"],bY=mk.length,uR=t=>typeof t=="string"?parseFloat(t):t,cR=t=>typeof t=="number"||Ue.test(t);function wY(t,e,n,i,r,o){r?(t.opacity=Zt(0,n.opacity!==void 0?n.opacity:1,xY(i)),t.opacityExit=Zt(e.opacity!==void 0?e.opacity:1,0,AY(i))):o&&(t.opacity=Zt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let l=0;l<bY;l++){const c=`border${mk[l]}Radius`;let d=dR(e,c),f=dR(n,c);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||cR(d)===cR(f)?(t[c]=Math.max(Zt(uR(d),uR(f),i),0),(ls.test(f)||ls.test(d))&&(t[c]+="%")):t[c]=f}(e.rotate||n.rotate)&&(t.rotate=Zt(e.rotate||0,n.rotate||0,i))}function dR(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const xY=gk(0,.5,kM),AY=gk(.5,.95,tr);function gk(t,e,n){return i=>i<t?0:i>e?1:n(Iu(t,e,i))}function fR(t,e){t.min=e.min,t.max=e.max}function yr(t,e){fR(t.x,e.x),fR(t.y,e.y)}function hR(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function pR(t,e,n,i,r){return t-=e,t=vm(t,1/n,i),r!==void 0&&(t=vm(t,1/r,i)),t}function CY(t,e=0,n=1,i=.5,r,o=t,l=t){if(ls.test(e)&&(e=parseFloat(e),e=Zt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=Zt(o.min,o.max,i);t===o&&(c-=e),t.min=pR(t.min,e,n,c,r),t.max=pR(t.max,e,n,c,r)}function mR(t,e,[n,i,r],o,l){CY(t,e[n],e[i],e[r],e.scale,o,l)}const IY=["x","scaleX","originX"],RY=["y","scaleY","originY"];function gR(t,e,n,i){mR(t.x,e,IY,n?n.x:void 0,i?i.x:void 0),mR(t.y,e,RY,n?n.y:void 0,i?i.y:void 0)}function yR(t){return t.translate===0&&t.scale===1}function yk(t){return yR(t.x)&&yR(t.y)}function vR(t,e){return t.min===e.min&&t.max===e.max}function NY(t,e){return vR(t.x,e.x)&&vR(t.y,e.y)}function _R(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function vk(t,e){return _R(t.x,e.x)&&_R(t.y,e.y)}function TR(t){return nr(t.x)/nr(t.y)}function ER(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class PY{constructor(){this.members=[]}add(e){cE(this.members,e),e.scheduleRender()}remove(e){if(dE(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function DY(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y,l=(n==null?void 0:n.z)||0;if((r||o||l)&&(i=`translate3d(${r}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:p,rotateX:v,rotateY:T,skewX:b,skewY:C}=n;f&&(i=`perspective(${f}px) ${i}`),p&&(i+=`rotate(${p}deg) `),v&&(i+=`rotateX(${v}deg) `),T&&(i+=`rotateY(${T}deg) `),b&&(i+=`skewX(${b}deg) `),C&&(i+=`skewY(${C}deg) `)}const c=t.x.scale*e.x,d=t.y.scale*e.y;return(c!==1||d!==1)&&(i+=`scale(${c}, ${d})`),i||"none"}const Fa={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},od=typeof window<"u"&&window.MotionDebug!==void 0,Wv=["","X","Y","Z"],MY={visibility:"hidden"},SR=1e3;let kY=0;function Qv(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function _k(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=CM(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Kt,!(r||o))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&_k(i)}function Tk({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(l={},c=e==null?void 0:e()){this.id=kY++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,od&&(Fa.totalNodes=Fa.resolvedTargetDeltas=Fa.recalculatedProjection=0),this.nodes.forEach(OY),this.nodes.forEach(zY),this.nodes.forEach(HY),this.nodes.forEach(UY),od&&window.MotionDebug.record(Fa)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new EY)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new fE),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const d=this.eventHandlers.get(l);d&&d.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,c=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=_Y(l),this.instance=l;const{layoutId:d,layout:f,visualElement:p}=this.options;if(p&&!p.current&&p.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),c&&(f||d)&&(this.isLayoutDirty=!0),t){let v;const T=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,v&&v(),v=SY(T,250),Pp.hasAnimatedSinceResize&&(Pp.hasAnimatedSinceResize=!1,this.nodes.forEach(wR))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&p&&(d||f)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:T,hasRelativeTargetChanged:b,layout:C})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||p.getDefaultTransition()||YY,{onLayoutAnimationStart:D,onLayoutAnimationComplete:O}=p.getProps(),k=!this.targetLayout||!vk(this.targetLayout,C)||b,F=!T&&b;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||F||T&&(k||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(v,F);const G={...oE(N,"layout"),onPlay:D,onComplete:O};(p.shouldReduceMotion||this.options.layoutRoot)&&(G.delay=0,G.type=!1),this.startAnimation(G)}else T||wR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=C})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Zo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(GY),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&_k(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const v=this.path[p];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(bR);return}this.isUpdating||this.nodes.forEach(BY),this.isUpdating=!1,this.nodes.forEach(qY),this.nodes.forEach(VY),this.nodes.forEach(LY),this.clearAllSnapshots();const c=us.now();Jn.delta=Gs(0,1e3/60,c-Jn.timestamp),Jn.timestamp=c,Jn.isProcessing=!0,qv.update.process(Jn),qv.preRender.process(Jn),qv.render.process(Jn),Jn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,WT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(FY),this.sharedNodes.forEach(jY)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Kt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Kt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=pn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c){const d=i(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!r)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!yk(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;l&&(c||Ua(this.latestValues)||p)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return l&&(d=this.removeTransform(d)),JY(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:c}=this.options;if(!c)return pn();const d=c.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(WY))){const{scroll:p}=this.root;p&&(ou(d.x,p.offset.x),ou(d.y,p.offset.y))}return d}removeElementScroll(l){var c;const d=pn();if(yr(d,l),!((c=this.scroll)===null||c===void 0)&&c.wasRoot)return d;for(let f=0;f<this.path.length;f++){const p=this.path[f],{scroll:v,options:T}=p;p!==this.root&&v&&T.layoutScroll&&(v.wasRoot&&yr(d,l),ou(d.x,v.offset.x),ou(d.y,v.offset.y))}return d}applyTransform(l,c=!1){const d=pn();yr(d,l);for(let f=0;f<this.path.length;f++){const p=this.path[f];!c&&p.options.layoutScroll&&p.scroll&&p!==p.root&&au(d,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Ua(p.latestValues)&&au(d,p.latestValues)}return Ua(this.latestValues)&&au(d,this.latestValues),d}removeTransform(l){const c=pn();yr(c,l);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!Ua(f.latestValues))continue;l_(f.latestValues)&&f.updateSnapshot();const p=pn(),v=f.measurePageBox();yr(p,v),gR(c,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return Ua(this.latestValues)&&gR(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Jn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var c;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==d;if(!(l||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:v,layoutId:T}=this.options;if(!(!this.layout||!(v||T))){if(this.resolvedRelativeTargetAt=Jn.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pn(),this.relativeTargetOrigin=pn(),bd(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),yr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=pn(),this.targetWithTransforms=pn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),ZK(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):yr(this.target,this.layout.layoutBox),dk(this.target,this.targetDelta)):yr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pn(),this.relativeTargetOrigin=pn(),bd(this.relativeTargetOrigin,this.target,b.target),yr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}od&&Fa.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||l_(this.parent.latestValues)||ck(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const c=this.getLead(),d=!!this.resumingFrom||this!==c;let f=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(f=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Jn.timestamp&&(f=!1),f)return;const{layout:p,layoutId:v}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||v))return;yr(this.layoutCorrected,this.layout.layoutBox);const T=this.treeScale.x,b=this.treeScale.y;lY(this.layoutCorrected,this.treeScale,this.path,d),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=pn());const{target:C}=c;if(!C){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(hR(this.prevProjectionDelta.x,this.projectionDelta.x),hR(this.prevProjectionDelta.y,this.projectionDelta.y)),Sd(this.projectionDelta,this.layoutCorrected,C,this.latestValues),(this.treeScale.x!==T||this.treeScale.y!==b||!ER(this.projectionDelta.x,this.prevProjectionDelta.x)||!ER(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",C)),od&&Fa.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var c;if((c=this.options.visualElement)===null||c===void 0||c.scheduleRender(),l){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=su(),this.projectionDelta=su(),this.projectionDeltaWithTransform=su()}setAnimationOrigin(l,c=!1){const d=this.snapshot,f=d?d.latestValues:{},p={...this.latestValues},v=su();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const T=pn(),b=d?d.source:void 0,C=this.layout?this.layout.source:void 0,N=b!==C,D=this.getStack(),O=!D||D.members.length<=1,k=!!(N&&!O&&this.options.crossfade===!0&&!this.path.some(KY));this.animationProgress=0;let F;this.mixTargetDelta=G=>{const K=G/1e3;xR(v.x,l.x,K),xR(v.y,l.y,K),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(bd(T,this.layout.layoutBox,this.relativeParent.layout.layoutBox),$Y(this.relativeTarget,this.relativeTargetOrigin,T,K),F&&NY(this.relativeTarget,F)&&(this.isProjectionDirty=!1),F||(F=pn()),yr(F,this.relativeTarget)),N&&(this.animationValues=p,wY(p,f,this.latestValues,K,k,O)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=K},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Zo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Kt.update(()=>{Pp.hasAnimatedSinceResize=!0,this.currentAnimation=vY(0,SR,{...l,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(SR),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:d,layout:f,latestValues:p}=l;if(!(!c||!d||!f)){if(this!==l&&this.layout&&f&&Ek(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||pn();const v=nr(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+v;const T=nr(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+T}yr(c,d),au(c,p),Sd(this.projectionDeltaWithTransform,this.layoutCorrected,c,p)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new PY),this.sharedNodes.get(l).add(c);const f=c.options.initialPromotionConfig;c.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:c}=this.options;return c?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:c}=this.options;return c?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const f={};d.z&&Qv("z",l,f,this.animationValues);for(let p=0;p<Wv.length;p++)Qv(`rotate${Wv[p]}`,l,f,this.animationValues),Qv(`skew${Wv[p]}`,l,f,this.animationValues);l.render();for(const p in f)l.setStaticValue(p,f[p]),this.animationValues&&(this.animationValues[p]=f[p]);l.scheduleRender()}getProjectionStyles(l){var c,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return MY;const f={visibility:""},p=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=Rp(l==null?void 0:l.pointerEvents)||"",f.transform=p?p(this.latestValues,""):"none",f;const v=this.getLead();if(!this.projectionDelta||!this.layout||!v.target){const N={};return this.options.layoutId&&(N.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,N.pointerEvents=Rp(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Ua(this.latestValues)&&(N.transform=p?p({},""):"none",this.hasProjected=!1),N}const T=v.animationValues||v.latestValues;this.applyTransformsToTarget(),f.transform=DY(this.projectionDeltaWithTransform,this.treeScale,T),p&&(f.transform=p(T,f.transform));const{x:b,y:C}=this.projectionDelta;f.transformOrigin=`${b.origin*100}% ${C.origin*100}% 0`,v.animationValues?f.opacity=v===this?(d=(c=T.opacity)!==null&&c!==void 0?c:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:T.opacityExit:f.opacity=v===this?T.opacity!==void 0?T.opacity:"":T.opacityExit!==void 0?T.opacityExit:0;for(const N in hm){if(T[N]===void 0)continue;const{correct:D,applyTo:O}=hm[N],k=f.transform==="none"?T[N]:D(T[N],v);if(O){const F=O.length;for(let G=0;G<F;G++)f[O[G]]=k}else f[N]=k}return this.options.layoutId&&(f.pointerEvents=v===this?Rp(l==null?void 0:l.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var c;return(c=l.currentAnimation)===null||c===void 0?void 0:c.stop()}),this.root.nodes.forEach(bR),this.root.sharedNodes.clear()}}}function VY(t){t.updateLayout()}function LY(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:o}=t.options,l=n.source!==t.layout.source;o==="size"?vr(v=>{const T=l?n.measuredBox[v]:n.layoutBox[v],b=nr(T);T.min=i[v].min,T.max=T.min+b}):Ek(o,n.layoutBox,i)&&vr(v=>{const T=l?n.measuredBox[v]:n.layoutBox[v],b=nr(i[v]);T.max=T.min+b,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[v].max=t.relativeTarget[v].min+b)});const c=su();Sd(c,i,n.layoutBox);const d=su();l?Sd(d,t.applyTransform(r,!0),n.measuredBox):Sd(d,i,n.layoutBox);const f=!yk(c);let p=!1;if(!t.resumeFrom){const v=t.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:T,layout:b}=v;if(T&&b){const C=pn();bd(C,n.layoutBox,T.layoutBox);const N=pn();bd(N,i,b.layoutBox),vk(C,N)||(p=!0),v.options.layoutRoot&&(t.relativeTarget=N,t.relativeTargetOrigin=C,t.relativeParent=v)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:d,layoutDelta:c,hasLayoutChanged:f,hasRelativeTargetChanged:p})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function OY(t){od&&Fa.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function UY(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function FY(t){t.clearSnapshot()}function bR(t){t.clearMeasurements()}function BY(t){t.isLayoutDirty=!1}function qY(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function wR(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function zY(t){t.resolveTargetDelta()}function HY(t){t.calcProjection()}function GY(t){t.resetSkewAndRotation()}function jY(t){t.removeLeadSnapshot()}function xR(t,e,n){t.translate=Zt(e.translate,0,n),t.scale=Zt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function AR(t,e,n,i){t.min=Zt(e.min,n.min,i),t.max=Zt(e.max,n.max,i)}function $Y(t,e,n,i){AR(t.x,e.x,n.x,i),AR(t.y,e.y,n.y,i)}function KY(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const YY={duration:.45,ease:[.4,0,.1,1]},CR=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),IR=CR("applewebkit/")&&!CR("chrome/")?Math.round:tr;function RR(t){t.min=IR(t.min),t.max=IR(t.max)}function JY(t){RR(t.x),RR(t.y)}function Ek(t,e,n){return t==="position"||t==="preserve-aspect"&&!XK(TR(e),TR(n),.2)}function WY(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const QY=Tk({attachResizeListener:(t,e)=>Yd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Xv={current:void 0},Sk=Tk({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Xv.current){const t=new QY({});t.mount(window),t.setOptions({layoutScroll:!0}),Xv.current=t}return Xv.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),XY={pan:{Feature:pY},drag:{Feature:hY,ProjectionNode:Sk,MeasureLayout:pk}};function NR(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,o=i[r];o&&Kt.postRender(()=>o(e,gf(e)))}class ZY extends la{mount(){const{current:e}=this.node;e&&(this.unmount=Xj(e,n=>(NR(this.node,n,"Start"),i=>NR(this.node,i,"End"))))}unmount(){}}class eJ extends la{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=mf(Yd(this.node.current,"focus",()=>this.onFocus()),Yd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function PR(t,e,n){const{props:i}=t;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),o=i[r];o&&Kt.postRender(()=>o(e,gf(e)))}class tJ extends la{mount(){const{current:e}=this.node;e&&(this.unmount=n$(e,n=>(PR(this.node,n,"Start"),(i,{success:r})=>PR(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const c_=new WeakMap,Zv=new WeakMap,nJ=t=>{const e=c_.get(t.target);e&&e(t)},iJ=t=>{t.forEach(nJ)};function rJ({root:t,...e}){const n=t||document;Zv.has(n)||Zv.set(n,{});const i=Zv.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(iJ,{root:t,...e})),i[r]}function sJ(t,e,n){const i=rJ(e);return c_.set(t,n),i.observe(t),()=>{c_.delete(t),i.unobserve(t)}}const oJ={some:0,all:1};class aJ extends la{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,l={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:oJ[r]},c=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:v}=this.node.getProps(),T=f?p:v;T&&T(d)};return sJ(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(lJ(e,n))&&this.startObserver()}unmount(){}}function lJ({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const uJ={inView:{Feature:aJ},tap:{Feature:tJ},focus:{Feature:eJ},hover:{Feature:ZY}},cJ={layout:{ProjectionNode:Sk,MeasureLayout:pk}},d_={current:null},bk={current:!1};function dJ(){if(bk.current=!0,!!jT)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>d_.current=t.matches;t.addListener(e),e()}else d_.current=!1}const fJ=[...YM,ii,ea],hJ=t=>fJ.find(KM(t)),DR=new WeakMap;function pJ(t,e,n){for(const i in e){const r=e[i],o=n[i];if(li(r))t.addValue(i,r);else if(li(o))t.addValue(i,$d(r,{owner:t}));else if(o!==r)if(t.hasValue(i)){const l=t.getValue(i);l.liveStyle===!0?l.jump(r):l.hasAnimated||l.set(r)}else{const l=t.getStaticValue(i);t.addValue(i,$d(l!==void 0?l:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const MR=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class mJ{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:o,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=vE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const b=us.now();this.renderScheduledAt<b&&(this.renderScheduledAt=b,Kt.render(this.render,!1,!0))};const{latestValues:d,renderState:f,onUpdate:p}=l;this.onUpdate=p,this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=mg(n),this.isVariantNode=nM(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:v,...T}=this.scrapeMotionValuesFromProps(n,{},this);for(const b in T){const C=T[b];d[b]!==void 0&&li(C)&&C.set(d[b],!1)}}mount(e){this.current=e,DR.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),bk.current||dJ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:d_.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){DR.delete(this.current),this.projection&&this.projection.unmount(),Zo(this.notifyUpdate),Zo(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=ll.has(e),r=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&Kt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),o(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ru){const n=Ru[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):pn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<MR.length;i++){const r=MR[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o="on"+r,l=e[o];l&&(this.propEventSubscriptions[r]=this.on(r,l))}this.prevMotionValues=pJ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=$d(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(jM(r)||LM(r))?r=parseFloat(r):!hJ(r)&&ea.test(n)&&(r=zM(e,n)),this.setBaseTarget(e,li(r)?r.get():r)),li(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const l=XT(this.props,i,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);l&&(r=l[e])}if(i&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!li(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new fE),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class wk extends mJ{constructor(){super(...arguments),this.KeyframeResolver=JM}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;li(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function gJ(t){return window.getComputedStyle(t)}class yJ extends wk{constructor(){super(...arguments),this.type="html",this.renderInstance=dM}readValueFromInstance(e,n){if(ll.has(n)){const i=yE(n);return i&&i.default||0}else{const i=gJ(e),r=(lM(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return fk(e,n)}build(e,n,i){tE(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return sE(e,n,i)}}class vJ extends wk{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=pn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ll.has(n)){const i=yE(n);return i&&i.default||0}return n=fM.has(n)?n:JT(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return mM(e,n,i)}build(e,n,i){nE(e,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,i,r){hM(e,n,i,r)}mount(e){this.isSVGTag=rE(e.tagName),super.mount(e)}}const _J=(t,e)=>QT(t)?new vJ(e):new yJ(e,{allowProjection:t!==B.Fragment}),TJ=jj({...HK,...uJ,...XY,...cJ},_J),es=oj(TJ),EJ=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})}),SJ=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),bJ=({onGetStarted:t})=>{const e={initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6}},n={animate:{transition:{staggerChildren:.1}}};return S.jsxs("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow overflow-x-hidden",children:[S.jsxs("nav",{className:"absolute top-0 w-full p-6 flex justify-between items-center z-50",children:[S.jsxs("div",{className:"text-2xl font-serif font-bold",children:["Dress ",S.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),S.jsx("button",{onClick:t,className:"text-sm font-semibold hover:text-gold transition-colors bg-white/10 backdrop-blur-md px-4 py-2 rounded-full border border-white/20",children:"Se connecter"})]}),S.jsxs("section",{className:"relative min-h-screen flex flex-col justify-center items-center text-center px-4 pt-20",children:[S.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[500px] h-[500px] bg-gold/10 rounded-full blur-[100px] pointer-events-none"}),S.jsx("div",{className:"absolute bottom-[-10%] right-[-5%] w-[400px] h-[400px] bg-purple-500/5 rounded-full blur-[100px] pointer-events-none"}),S.jsxs(es.div,{initial:"initial",animate:"animate",variants:n,className:"max-w-4xl mx-auto z-10",children:[S.jsxs(es.div,{variants:e,className:"mb-6 inline-flex items-center gap-2 px-3 py-1 rounded-full bg-gold/10 border border-gold/20 text-gold text-xs font-bold uppercase tracking-wider",children:[S.jsx(Hd,{}),S.jsx("span",{children:"Assistant Mode IA  Beta Prive"})]}),S.jsxs(es.h1,{variants:e,className:"text-5xl md:text-7xl lg:text-8xl font-serif font-bold mb-8 leading-tight",children:["Votre style, ",S.jsx("br",{}),S.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-gold to-yellow-600",children:"rinvent par l'IA."})]}),S.jsxs(es.p,{variants:e,className:"text-lg md:text-xl text-gray-500 dark:text-gray-400 mb-10 max-w-2xl mx-auto leading-relaxed",children:[`Fini le "Je n'ai rien  me mettre". `,S.jsx("strong",{children:"Dress Me Up!"})," analyse votre garde-robe, cre des tenues sur-mesure et prpare vos valises en un clic."]}),S.jsx(es.div,{variants:e,className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:S.jsxs("button",{onClick:t,className:"group relative px-8 py-4 bg-gold text-onyx text-lg font-bold rounded-full overflow-hidden shadow-lg shadow-gold/20 hover:shadow-gold/40 transition-all hover:scale-105 active:scale-95",children:[S.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Commencer l'exprience ",S.jsx(EJ,{})]}),S.jsx("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"})]})})]}),S.jsx(es.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:.8,duration:1},className:"absolute left-4 md:left-20 bottom-20 hidden lg:block",children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black p-4 rounded-xl shadow-2xl border border-white/10 rotate-[-6deg] max-w-xs backdrop-blur-lg bg-opacity-90 dark:bg-opacity-90",children:[S.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[S.jsx("div",{className:"w-8 h-8 bg-gold rounded-full flex items-center justify-center text-onyx",children:""}),S.jsx("div",{className:"text-xs font-medium",children:"Suggestion IA"})]}),S.jsx("p",{className:"text-sm font-serif italic",children:'"Pour ce soir  Rome, opte pour la chemise en lin blanc et le pantalon beige."'})]})}),S.jsx(es.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{delay:1,duration:1},className:"absolute right-4 md:right-20 top-40 hidden lg:block",children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black p-3 rounded-xl shadow-2xl border border-white/10 rotate-[6deg] backdrop-blur-lg bg-opacity-90 dark:bg-opacity-90",children:[S.jsx("div",{className:"w-32 h-32 bg-gray-200 dark:bg-gray-700 rounded-lg mb-2 flex items-center justify-center text-4xl",children:""}),S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsx("span",{className:"text-xs font-bold text-gray-500",children:"Manteau Laine"}),S.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"})]})]})}),S.jsxs(es.div,{initial:{opacity:0},animate:{opacity:1,y:[0,10,0]},transition:{opacity:{delay:1.5,duration:.6},y:{repeat:1/0,duration:1.5,ease:"easeInOut"}},className:"absolute bottom-8 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2 cursor-pointer",onClick:()=>{window.scrollTo({top:window.innerHeight,behavior:"smooth"})},children:[S.jsx("span",{className:"text-xs text-gray-400 font-medium uppercase tracking-wider",children:"Dcouvrir"}),S.jsx("div",{className:"text-gold",children:S.jsx(SJ,{})})]})]}),S.jsx("section",{className:"py-24 px-4 bg-white/50 dark:bg-black/20 backdrop-blur-sm",children:S.jsxs("div",{className:"max-w-6xl mx-auto",children:[S.jsxs("div",{className:"text-center mb-16",children:[S.jsx("h2",{className:"text-3xl md:text-4xl font-serif font-bold mb-4",children:"Votre dressing intelligent"}),S.jsx("p",{className:"text-gray-500 max-w-xl mx-auto",children:"Une suite d'outils puissants pour digitaliser et optimiser votre style au quotidien."})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[S.jsx(e0,{icon:S.jsx(J0,{}),title:"Digitalisez en un clair",description:"Prenez une photo, l'IA dtecte automatiquement la catgorie, la couleur et la matire. Votre garde-robe dans votre poche."}),S.jsx(e0,{icon:S.jsx(Hd,{}),title:"Styliste Personnel",description:"Une runion ? Un date ? Demandez  l'IA de crer la tenue parfaite en fonction de la mto et de l'occasion."}),S.jsx(e0,{icon:S.jsx(KD,{}),title:"Valise Optimise",description:"Partez l'esprit lger. Gnrez une liste de vtements optimise pour la dure et la destination de votre voyage."})]})]})}),S.jsx("section",{className:"py-20 px-4 text-center",children:S.jsxs("div",{className:"max-w-3xl mx-auto",children:[S.jsx("h2",{className:"text-3xl md:text-5xl font-serif font-bold mb-8",children:"Prt  upgrader votre style ?"}),S.jsx("button",{onClick:t,className:"px-10 py-4 bg-raisin-black dark:bg-snow text-snow dark:text-onyx font-bold rounded-full text-lg hover:opacity-90 transition-opacity transform hover:scale-105 duration-200",children:"Rejoindre maintenant"}),S.jsx("p",{className:"mt-8 text-sm text-gray-500",children:" 2025 Dress Me Up! - Fait avec  & IA."})]})})]})},e0=({icon:t,title:e,description:n})=>S.jsxs(es.div,{whileHover:{y:-5},className:"p-8 rounded-2xl bg-white dark:bg-raisin-black border border-black/5 dark:border-white/5 shadow-xl shadow-black/5 dark:shadow-black/20",children:[S.jsx("div",{className:"w-12 h-12 bg-gold/10 text-gold rounded-xl flex items-center justify-center mb-6",children:S.jsx("div",{className:"w-6 h-6",children:t})}),S.jsx("h3",{className:"text-xl font-bold mb-3",children:e}),S.jsx("p",{className:"text-gray-500 dark:text-gray-400 leading-relaxed",children:n})]}),wJ=({onAnalyze:t,isAnalyzing:e})=>{const n=B.useRef(null),[i,r]=B.useState([]),[o,l]=B.useState(!1),[c,d]=B.useState(!1);B.useEffect(()=>{const k=()=>d(window.innerWidth<1024);return k(),window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]),B.useEffect(()=>()=>{i.forEach(k=>URL.revokeObjectURL(k.preview))},[i]);const f=k=>{const F=k.map(G=>({id:`${G.name}-${G.lastModified}-${Math.random()}`,file:G,preview:URL.createObjectURL(G)}));r(G=>[...G,...F])},p=k=>{k.target.files&&(f(Array.from(k.target.files)),k.target.value="")},v=()=>{var k;e||(k=n.current)==null||k.click()},T=k=>{c||(k.preventDefault(),k.stopPropagation(),l(!0))},b=k=>{c||(k.preventDefault(),k.stopPropagation(),l(!1))},C=k=>{c||(k.preventDefault(),k.stopPropagation())},N=k=>{c||(k.preventDefault(),k.stopPropagation(),l(!1),k.dataTransfer.files&&k.dataTransfer.files.length>0&&(f(Array.from(k.dataTransfer.files)),k.dataTransfer.clearData()))},D=k=>{const F=i.find(G=>G.id===k);F&&URL.revokeObjectURL(F.preview),r(G=>G.filter(K=>K.id!==k))},O=()=>{i.length>0&&!e&&(t(i.map(k=>k.file)),r([]))};return S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",onDragEnter:T,onDragLeave:b,onDragOver:C,onDrop:N,children:[S.jsx("h2",{className:"text-2xl font-serif font-bold mb-6 text-gold",children:"Ajouter  ma garde-robe"}),S.jsxs("div",{onClick:v,className:`relative bg-snow dark:bg-onyx rounded-lg p-12 text-center transition-all duration-300 ring-1 ring-dashed ring-black/20 dark:ring-white/20 ${e?"cursor-default":"cursor-pointer hover:ring-gold dark:hover:ring-gold"}`,children:[S.jsx("input",{type:"file",ref:n,onChange:p,className:"hidden",accept:"image/png, image/jpeg, image/webp",multiple:!0,disabled:e}),S.jsx("div",{className:"flex flex-col items-center justify-center min-h-[8rem]",children:e?S.jsxs(S.Fragment,{children:[S.jsx(F7,{}),S.jsx("p",{className:"mt-4 text-sm font-medium text-gray-500 dark:text-gray-400 tracking-wide",children:"Analyse en cours..."})]}):S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:S.jsx(J0,{})}),S.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:c?"Appuyez pour ajouter des photos":"Glissez-dposez vos photos"}),S.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["ou ",S.jsx("span",{className:"text-gold font-medium",children:"cliquez pour slectionner"})]})]})}),o&&!c&&S.jsxs("div",{className:"absolute inset-0 bg-gold/90 backdrop-blur-sm rounded-lg flex flex-col items-center justify-center transition-opacity",children:[S.jsx("div",{className:"text-black transform-gpu scale-110",children:S.jsx(J0,{})}),S.jsx("p",{className:"mt-2 font-bold text-lg text-black",children:"Dposez pour ajouter"})]})]}),i.length>0&&!e&&S.jsxs("div",{className:"mt-8",children:[S.jsx("h3",{className:"font-semibold mb-4 text-gray-600 dark:text-gray-300",children:"Prts pour l'analyse :"}),S.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 mb-6",children:i.map(k=>S.jsxs("div",{className:"relative group aspect-square",children:[S.jsx("img",{src:k.preview,alt:k.file.name,className:"w-full h-full object-cover rounded-md shadow-md"}),S.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity rounded-md"}),S.jsx("button",{onClick:()=>D(k.id),className:"absolute -top-2 -right-2 p-1 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white opacity-0 group-hover:opacity-100 transition-all hover:bg-red-500 hover:scale-110 focus:opacity-100","aria-label":"Supprimer",children:S.jsx(BT,{})})]},k.id))}),S.jsxs("button",{onClick:O,disabled:e||i.length===0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[S.jsx(Hd,{}),"Analyser les ",i.length," article(s)"]})]})]})},xJ=()=>S.jsx("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-800 rounded-lg aspect-square relative overflow-hidden",children:S.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent skew-x-12 translate-x-[-100%] animate-shimmer"})}),AJ=({imageSrc:t,analysis:e,onClick:n,isSelected:i,isSet:r,isFavorite:o})=>S.jsxs("div",{onClick:n,className:"group relative aspect-square bg-raisin-black rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 cursor-pointer",children:[S.jsx("img",{src:t,alt:e,loading:"lazy",className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"}),S.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${i?"ring-4 ring-gold":"ring-2 ring-transparent"} rounded-lg`}),S.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),i?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-gold rounded-full text-onyx z-10",children:S.jsx(qT,{})}):o?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-red-500 z-10",children:S.jsx(Cu,{className:"w-4 h-4"})}):r?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:S.jsx(dg,{})}):null,S.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:S.jsx("p",{className:"text-white text-sm font-medium line-clamp-2",children:e})})]}),CJ={Hauts:{color:"Toutes",material:"Toutes"},Bas:{color:"Toutes",material:"Toutes"},Chaussures:{color:"Toutes",material:"Toutes"},Accessoires:{color:"Toutes",material:"Toutes"}},IJ=({clothingItems:t,isLoading:e,clothingSets:n=[],onItemClick:i,onDeleteItem:r,onCreateSet:o})=>{var j,ee;const[l,c]=B.useState("Hauts"),[d,f]=B.useState(CJ),[p,v]=B.useState(""),[T,b]=B.useState("favorites"),[C,N]=B.useState(!1),[D,O]=B.useState(new Set),k=B.useMemo(()=>n||[],[n]),F=B.useMemo(()=>new Set(k.flatMap(ne=>ne.itemIds||[])),[k]),G=t.length,K=[{name:"Hauts",icon:S.jsx(B7,{})},{name:"Bas",icon:S.jsx(q7,{})},{name:"Chaussures",icon:S.jsx(z7,{})},{name:"Accessoires",icon:S.jsx(H7,{})}],H=[{value:"favorites",label:"Favoris d'abord"},{value:"newest",label:"Plus rcents"},{value:"oldest",label:"Plus anciens"},{value:"color",label:"Couleur (A-Z)"},{value:"category",label:"Catgorie"}],R=ne=>{C?O(oe=>{const ye=new Set(oe);return ye.has(ne.id)?ye.delete(ne.id):ye.add(ne.id),ye}):i(ne)},I=ne=>[...ne].sort((oe,ye)=>{switch(T){case"favorites":return(ye.isFavorite?1:0)-(oe.isFavorite?1:0);case"newest":return(ye.createdAt||0)-(oe.createdAt||0);case"oldest":return(oe.createdAt||0)-(ye.createdAt||0);case"color":return oe.color.localeCompare(ye.color);case"category":return oe.category.localeCompare(ye.category);default:return 0}}),P=B.useMemo(()=>{if(!p.trim())return t;const ne=p.toLowerCase();return t.filter(oe=>oe.analysis.toLowerCase().includes(ne)||oe.color.toLowerCase().includes(ne)||oe.material.toLowerCase().includes(ne)||oe.category.toLowerCase().includes(ne))},[t,p]),U=B.useMemo(()=>{if(!l)return[];const ne=P.filter(ye=>ye.category===l),oe=d[l];return oe?ne.filter(ye=>{const Oe=oe.color==="Toutes"||ye.color===oe.color,Ie=oe.material==="Toutes"||ye.material===oe.material;return Oe&&Ie}):ne},[P,l,(j=d[l])==null?void 0:j.color,(ee=d[l])==null?void 0:ee.material]),q=B.useMemo(()=>I(U),[U,T]),V=B.useMemo(()=>K.reduce((ne,{name:oe})=>(ne[oe]=P.filter(ye=>ye.category===oe).length,ne),{}),[P]),z=B.useMemo(()=>{if(!l)return[];const ne=P.filter(oe=>oe.category===l).map(oe=>oe.color);return["Toutes",...Array.from(new Set(ne))]},[P,l]),Ee=B.useMemo(()=>{if(!l)return[];const ne=P.filter(oe=>oe.category===l).map(oe=>oe.material);return["Toutes",...Array.from(new Set(ne))]},[P,l]),Ne=ne=>{l&&f(oe=>({...oe,[l]:{...oe[l],color:ne}}))},W=ne=>{l&&f(oe=>({...oe,[l]:{...oe[l],material:ne}}))},se=ne=>{c(l===ne?null:ne)},he=()=>{N(!C),O(new Set)},xe=()=>{if(D.size<2){alert("Veuillez slectionner au moins 2 articles pour crer un ensemble.");return}const ne=window.prompt("Donnez un nom  cet ensemble :");ne&&(o(ne,Array.from(D)),he())},Ae=()=>{v("")};return e?S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl p-6 lg:p-8",children:[S.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[S.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded-full animate-pulse"}),S.jsx("div",{className:"h-8 w-48 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]}),S.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:[...Array(10)].map((ne,oe)=>S.jsx(xJ,{},oe))})]}):G===0?S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-8 text-center",children:[S.jsx(yI,{className:"w-20 h-20 mx-auto text-gray-400 dark:text-gray-600 mb-4"}),S.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-700 dark:text-gray-300",children:"Votre garde-robe est vide"}),S.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Ajoutez vos premiers vtements pour commencer  crer vos tenues !"})]}):S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",children:[S.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-6",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx(yI,{className:"w-8 h-8 text-gold"}),S.jsxs("div",{children:[S.jsxs("h2",{className:"text-3xl font-serif font-bold tracking-tight",children:[S.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),S.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[G," vtement",G>1?"s":""]})]})]}),C?S.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[S.jsx("button",{onClick:he,className:"flex-shrink-0 px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors text-sm font-medium",children:"Annuler"}),S.jsxs("button",{onClick:xe,disabled:D.size<2,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 text-sm disabled:opacity-50",children:["Valider (",D.size,")"]})]}):S.jsxs("button",{onClick:he,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300 text-sm",children:[S.jsx(dg,{}),"Crer un ensemble"]})]}),S.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-6",children:[S.jsxs("div",{className:"relative flex-1",children:[S.jsx(YD,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),S.jsx("input",{type:"text",value:p,onChange:ne=>v(ne.target.value),placeholder:"Rechercher par description, couleur, matire...",className:"w-full pl-10 pr-10 py-2.5 bg-snow dark:bg-onyx border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-all"}),p&&S.jsx("button",{onClick:Ae,className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors","aria-label":"Effacer la recherche",children:S.jsx(BT,{})})]}),S.jsxs("div",{className:"relative sm:w-48",children:[S.jsx(JD,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"}),S.jsx("select",{value:T,onChange:ne=>b(ne.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-snow dark:bg-onyx border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent appearance-none cursor-pointer transition-all",children:H.map(ne=>S.jsx("option",{value:ne.value,children:ne.label},ne.value))}),S.jsx(_d,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),p&&S.jsxs("div",{className:"mb-4 text-sm text-gray-500 dark:text-gray-400",children:[P.length," rsultat",P.length>1?"s":"",' pour "',p,'"']}),C&&S.jsxs("div",{className:"bg-gold/10 border border-gold/30 text-gold-dark dark:text-gold p-4 rounded-lg mb-6 text-center",children:[S.jsx("p",{className:"font-semibold",children:"Mode Cration d'Ensemble"}),S.jsx("p",{className:"text-sm",children:"Slectionnez les articles que vous souhaitez lier."})]}),S.jsx("div",{className:"space-y-6",children:K.map(({name:ne,icon:oe})=>{const ye=V[ne]||0,Oe=l===ne;return S.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-lg overflow-hidden",children:[S.jsxs("button",{onClick:()=>se(ne),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900/50 hover:bg-gray-100 dark:hover:bg-gray-900 transition-colors",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("span",{className:"w-5 h-5 text-gold",children:oe}),S.jsx("span",{className:"font-semibold text-lg",children:ne}),S.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",ye,")"]})]}),S.jsx(_d,{className:`w-5 h-5 transition-transform ${Oe?"rotate-180":""}`})]}),Oe&&S.jsxs("div",{className:"p-6 space-y-6",children:[S.jsxs("div",{className:"flex flex-wrap gap-4",children:[S.jsxs("div",{className:"flex-1 min-w-[150px]",children:[S.jsx("label",{className:"block text-sm font-medium mb-2",children:"Couleur"}),S.jsx("select",{value:d[ne].color,onChange:Ie=>Ne(Ie.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:z.map(Ie=>S.jsx("option",{value:Ie,children:Ie},Ie))})]}),S.jsxs("div",{className:"flex-1 min-w-[150px]",children:[S.jsx("label",{className:"block text-sm font-medium mb-2",children:"Matire"}),S.jsx("select",{value:d[ne].material,onChange:Ie=>W(Ie.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:Ee.map(Ie=>S.jsx("option",{value:Ie,children:Ie},Ie))})]})]}),q.length>0?S.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:S.jsx(X7,{mode:"popLayout",children:q.map((Ie,Vt)=>S.jsx(es.div,{layout:!0,initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.5,transition:{duration:.2}},transition:{duration:.4,delay:Vt*.05,type:"spring",bounce:.3},children:S.jsx(AJ,{imageSrc:Ie.imageSrc,analysis:Ie.analysis,onClick:()=>R(Ie),isSelected:D.has(Ie.id),isSet:F.has(Ie.id),isFavorite:Ie.isFavorite})},Ie.id))})}):S.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"Aucun vtement ne correspond aux filtres slectionns."})]})]},ne)})})]})},xk=({clothingItems:t,clothingSets:e,onGenerate:n,isGenerating:i,weatherInfo:r,weatherError:o})=>{const[l,c]=Pn.useState(""),d=p=>{p.preventDefault(),n(l||"Casual")},f=["Casual","Soire chic","Travail (formel)"];return S.jsxs("div",{children:[S.jsxs("div",{className:"text-center mb-6 p-3 rounded-lg bg-snow dark:bg-onyx border border-black/10 dark:border-white/10",children:[r&&S.jsxs("p",{className:"text-sm font-medium text-blue-500 dark:text-blue-400",children:["Mto : ",r," "]}),o&&S.jsx("p",{className:"text-sm font-medium text-red-500",children:o}),!r&&!o&&S.jsx("p",{className:"text-sm font-medium text-gray-400 animate-pulse",children:"Rcupration de la mto..."})]}),S.jsx("form",{onSubmit:d,children:S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"occasion",className:"block text-sm font-medium text-center text-gray-500 dark:text-gray-400 mb-3",children:"Pour quelle occasion ?"}),S.jsx("div",{className:"flex justify-center gap-2 mb-4",children:f.map(p=>S.jsx("button",{type:"button",onClick:()=>c(p),className:`px-4 py-1.5 rounded-full text-sm font-semibold transition-colors duration-200 ${l===p?"bg-gold text-onyx":"bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 hover:border-gold dark:hover:border-gold text-gray-700 dark:text-gray-300"}`,disabled:i,children:p},p))}),S.jsx("input",{id:"occasion",type:"text",value:l,onChange:p=>c(p.target.value),placeholder:"Ou dcrivez... (ex: Brunch dcontract)",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i})]}),S.jsxs("button",{type:"submit",disabled:i,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[S.jsx(Hd,{}),i?"Gnration...":"Gnrer des Tenues"]})]})})]})},RJ=!1,NJ=({outfits:t,allClothingItems:e,allClothingSets:n,favoriteOutfits:i,onToggleFavorite:r,onGenerateVisual:o,generatingVisualFor:l,selectedOutfit:c,onSelectOutfit:d})=>{const[f,p]=B.useState(null);B.useEffect(()=>{if(!f)return;const T=b=>{b.key==="Escape"&&p(null)};return window.addEventListener("keydown",T),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",T),document.body.style.overflow="auto"}},[f]);const v=T=>{const{id:b,description:C}=T,N=b?b.trim():"",D=C?C.trim().toLowerCase():"";let O=e.find(F=>F.id===N);if(O)return O;let k=n.find(F=>F.id===N);if(k)return k;if(N&&(O=e.find(F=>F.analysis.toLowerCase().includes(N.toLowerCase())),O)||D&&(O=e.find(F=>{const G=F.analysis.toLowerCase();return G.includes(D)||D.includes(G)}),O))return O};return S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"mt-10 space-y-8",children:t.map((T,b)=>{const C=i.some(D=>D.titre===T.titre&&D.description===T.description);T.titre;const N=(c==null?void 0:c.titre)===T.titre&&(c==null?void 0:c.description)===T.description;return S.jsxs("div",{className:`bg-snow dark:bg-onyx border-2 rounded-lg p-5 transition-all duration-300 hover:shadow-lg relative ${N?"border-gold shadow-gold/30 shadow-lg":"border-black/10 dark:border-white/10 hover:border-gold/50"}`,children:[N&&S.jsxs("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-gradient-to-r from-gold to-gold-dark text-onyx px-4 py-1 rounded-full text-xs font-bold shadow-lg flex items-center gap-1.5",children:[S.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 20 20",children:S.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Tenue choisie"]}),S.jsxs("div",{className:"flex justify-between items-start",children:[S.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:T.titre}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("button",{onClick:()=>d(T),className:`p-1.5 transition-colors ${N?"text-gold":"text-gray-400 hover:text-gold dark:hover:text-gold"}`,"aria-label":N?"Dslectionner cette tenue":"Choisir cette tenue",title:N?"Dslectionner cette tenue":"Choisir cette tenue",children:S.jsx("svg",{className:"w-6 h-6",fill:N?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),RJ,S.jsx("button",{onClick:()=>r(T),className:"p-1.5 text-gray-400 hover:text-gold dark:hover:text-gold transition-colors","aria-label":C?"Retirer des favoris":"Ajouter aux favoris",children:C?S.jsx(Cu,{className:"w-6 h-6 text-gold"}):S.jsx(dm,{className:"w-6 h-6"})})]})]}),S.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:T.description}),S.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:T.vetements.map((D,O)=>{const k=v(D),F=k?k.imageSrc:null;return S.jsx("button",{onClick:()=>F&&p(F),className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden transition-transform duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx disabled:cursor-default disabled:hover:scale-100 relative group",disabled:!F,"aria-label":`Agrandir l'image de : ${D.description}`,title:D.description,children:F?S.jsx("img",{src:F,alt:D.description,className:"w-full h-full object-cover"}):S.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:S.jsx($D,{})})},O)})}),S.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:T.vetements.map((D,O)=>S.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:D.description},O))})]},b)})}),f&&S.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:()=>p(null),role:"dialog","aria-modal":"true",children:S.jsxs("div",{className:"relative",onClick:T=>T.stopPropagation(),children:[S.jsx("img",{src:f,alt:"Vue agrandie",className:"max-w-[90vw] max-h-[85vh] object-contain rounded-lg shadow-2xl"}),S.jsx("button",{onClick:()=>p(null),className:"absolute -top-3 -right-3 p-1.5 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white hover:bg-red-500 hover:scale-110 transition-all focus:outline-none focus:ring-2 focus:ring-gold","aria-label":"Fermer",children:S.jsx(G7,{})})]})})]})},yu=B.memo(NJ);var Ak=b1(),PJ=DJ()?B.useLayoutEffect:B.useEffect;function DJ(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function MJ(){var t=B.useState(Object.create(null)),e=t[1];return B.useCallback(function(){e(Object.create(null))},[])}var kJ=function(e){var n=e.children,i=e.type,r=i===void 0?"reach-portal":i,o=B.useRef(null),l=B.useRef(null),c=MJ();return PJ(function(){if(o.current){var d=o.current.ownerDocument;return l.current=d==null?void 0:d.createElement(r),d.body.appendChild(l.current),c(),function(){l.current&&l.current.ownerDocument&&l.current.ownerDocument.body.removeChild(l.current)}}},[r,c]),l.current?Ak.createPortal(n,l.current):B.createElement("span",{ref:o})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ve=function(){return ve=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ve.apply(this,arguments)};function SE(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function ct(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function gt(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,o=[],l;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(c){l={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return o}function Gt(t,e,n){if(arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))}var Pt;(function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"})(Pt||(Pt={}));var Pu;(function(t){t.Parent="#_parent",t.Internal="#_internal"})(Pu||(Pu={}));var f_=Pt.Start,bE=Pt.Stop,yf=Pt.Raise,vg=Pt.Send,Ck=Pt.Cancel,VJ=Pt.NullEvent,wE=Pt.Assign;Pt.After;Pt.DoneState;var Ik=Pt.Log,LJ=Pt.Init,h_=Pt.Invoke;Pt.ErrorExecution;var kR=Pt.ErrorPlatform,OJ=Pt.ErrorCustom,Rk=Pt.Update,UJ=Pt.Choose,FJ=Pt.Pure,Nk=".",VR={},p_="xstate.guard",BJ="",Zh;function xE(t,e,n){n===void 0&&(n=Nk);var i=wd(t,n),r=wd(e,n);return Et(r)?Et(i)?r===i:!1:Et(i)?i in r:Object.keys(i).every(function(o){return o in r?xE(i[o],r[o]):!1})}function Pk(t){try{return Et(t)||typeof t=="number"?"".concat(t):t.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function m_(t,e){try{return $u(t)?t:t.toString().split(e)}catch{throw new Error("'".concat(t,"' is not a valid state path."))}}function qJ(t){return typeof t=="object"&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function wd(t,e){if(qJ(t))return t.value;if($u(t))return _m(t);if(typeof t!="string")return t;var n=m_(t,e);return _m(n)}function _m(t){if(t.length===1)return t[0];for(var e={},n=e,i=0;i<t.length-1;i++)i===t.length-2?n[t[i]]=t[i+1]:(n[t[i]]={},n=n[t[i]]);return e}function ad(t,e){for(var n={},i=Object.keys(t),r=0;r<i.length;r++){var o=i[r];n[o]=e(t[o],o,t,r)}return n}function LR(t,e,n){var i,r,o={};try{for(var l=ct(Object.keys(t)),c=l.next();!c.done;c=l.next()){var d=c.value,f=t[d];n(f)&&(o[d]=e(f,d,t))}}catch(p){i={error:p}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}return o}var zJ=function(t){return function(e){var n,i,r=e;try{for(var o=ct(t),l=o.next();!l.done;l=o.next()){var c=l.value;r=r[c]}}catch(d){n={error:d}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return r}};function HJ(t,e){return function(n){var i,r,o=n;try{for(var l=ct(t),c=l.next();!c.done;c=l.next()){var d=c.value;o=o[e][d]}}catch(f){i={error:f}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}return o}}function Dp(t){if(!t)return[[]];if(Et(t))return[[t]];var e=Xt(Object.keys(t).map(function(n){var i=t[n];return typeof i!="string"&&(!i||!Object.keys(i).length)?[[n]]:Dp(t[n]).map(function(r){return[n].concat(r)})}));return e}function Xt(t){var e;return(e=[]).concat.apply(e,Gt([],gt(t),!1))}function Dk(t){return $u(t)?t:[t]}function kr(t){return t===void 0?[]:Dk(t)}function Tm(t,e,n){var i,r;if(_t(t))return t(e,n.data);var o={};try{for(var l=ct(Object.keys(t)),c=l.next();!c.done;c=l.next()){var d=c.value,f=t[d];_t(f)?o[d]=f(e,n.data):o[d]=f}}catch(p){i={error:p}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}return o}function GJ(t){return/^(done|error)\./.test(t)}function OR(t){return!!(t instanceof Promise||t!==null&&(_t(t)||typeof t=="object")&&_t(t.then))}function jJ(t){return t!==null&&typeof t=="object"&&"transition"in t&&typeof t.transition=="function"}function $J(t,e){var n,i,r=gt([[],[]],2),o=r[0],l=r[1];try{for(var c=ct(t),d=c.next();!d.done;d=c.next()){var f=d.value;e(f)?o.push(f):l.push(f)}}catch(p){n={error:p}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return[o,l]}function Mk(t,e){return ad(t.states,function(n,i){if(n){var r=(Et(e)?void 0:e[i])||(n?n.current:void 0);if(r)return{current:r,states:Mk(n,r)}}})}function KJ(t,e){return{current:e,states:Mk(t,e)}}function UR(t,e,n,i){var r=t&&n.reduce(function(o,l){var c,d,f=l.assignment,p={state:i,action:l,_event:e},v={};if(_t(f))v=f(o,e.data,p);else try{for(var T=ct(Object.keys(f)),b=T.next();!b.done;b=T.next()){var C=b.value,N=f[C];v[C]=_t(N)?N(o,e.data,p):N}}catch(D){c={error:D}}finally{try{b&&!b.done&&(d=T.return)&&d.call(T)}finally{if(c)throw c.error}}return Object.assign({},o,v)},t);return r}var YJ=function(){};function $u(t){return Array.isArray(t)}function _t(t){return typeof t=="function"}function Et(t){return typeof t=="string"}function kk(t,e){if(t)return Et(t)?{type:p_,name:t,predicate:e?e[t]:void 0}:_t(t)?{type:p_,name:t.name,predicate:t}:t}function JJ(t){try{return"subscribe"in t&&_t(t.subscribe)}catch{return!1}}var Vo=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();Zh={},Zh[Vo]=function(){return this},Zh[Symbol.observable]=function(){return this};function Du(t){return!!t&&"__xstatenode"in t}function WJ(t){return!!t&&typeof t.send=="function"}function _g(t,e){return Et(t)||typeof t=="number"?ve({type:t},e):t}function Yn(t,e){if(!Et(t)&&"$$type"in t&&t.$$type==="scxml")return t;var n=_g(t);return ve({name:n.type,data:n,$$type:"scxml",type:"external"},e)}function $l(t,e){var n=Dk(e).map(function(i){return typeof i>"u"||typeof i=="string"||Du(i)?{target:i,event:t}:ve(ve({},i),{event:t})});return n}function QJ(t){if(!(t===void 0||t===BJ))return kr(t)}function Vk(t,e,n,i,r){var o=t.options.guards,l={state:r,cond:e,_event:i};if(e.type===p_)return((o==null?void 0:o[e.name])||e.predicate)(n,i.data,l);var c=o==null?void 0:o[e.type];if(!c)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return c(n,i.data,l)}function Lk(t){return typeof t=="string"?{type:t}:t}function Mp(t,e,n){var i=function(){},r=typeof t=="object",o=r?t:null;return{next:((r?t.next:t)||i).bind(o),error:((r?t.error:e)||i).bind(o),complete:((r?t.complete:n)||i).bind(o)}}function ep(t,e){return"".concat(t,":invocation[").concat(e,"]")}function g_(t){return(t.type===yf||t.type===vg&&t.to===Pu.Internal)&&typeof t.delay!="number"}var vu=Yn({type:LJ});function y_(t,e){return e&&e[t]||void 0}function Jd(t,e){var n;if(Et(t)||typeof t=="number"){var i=y_(t,e);_t(i)?n={type:t,exec:i}:i?n=i:n={type:t,exec:void 0}}else if(_t(t))n={type:t.name||t.toString(),exec:t};else{var i=y_(t.type,e);if(_t(i))n=ve(ve({},t),{exec:i});else if(i){var r=i.type||t.type;n=ve(ve(ve({},i),t),{type:r})}else n=t}return n}var Lo=function(t,e){if(!t)return[];var n=$u(t)?t:[t];return n.map(function(i){return Jd(i,e)})};function AE(t){var e=Jd(t);return ve(ve({id:Et(t)?t:e.id},e),{type:e.type})}function XJ(t,e){return{type:yf,event:typeof t=="function"?t:_g(t),delay:e?e.delay:void 0,id:e==null?void 0:e.id}}function ZJ(t,e,n,i){var r={_event:n},o=Yn(_t(t.event)?t.event(e,n.data,r):t.event),l;if(Et(t.delay)){var c=i&&i[t.delay];l=_t(c)?c(e,n.data,r):c}else l=_t(t.delay)?t.delay(e,n.data,r):t.delay;return ve(ve({},t),{type:yf,_event:o,delay:l})}function eW(t,e){return{to:e?e.to:void 0,type:vg,event:_t(t)?t:_g(t),delay:e?e.delay:void 0,id:e&&e.id!==void 0?e.id:_t(t)?t.name:Pk(t)}}function tW(t,e,n,i){var r={_event:n},o=Yn(_t(t.event)?t.event(e,n.data,r):t.event),l;if(Et(t.delay)){var c=i&&i[t.delay];l=_t(c)?c(e,n.data,r):c}else l=_t(t.delay)?t.delay(e,n.data,r):t.delay;var d=_t(t.to)?t.to(e,n.data,r):t.to;return ve(ve({},t),{to:d,_event:o,event:o.data,delay:l})}var nW=function(t,e,n){return ve(ve({},t),{value:Et(t.expr)?t.expr:t.expr(e,n.data,{_event:n})})},iW=function(t){return{type:Ck,sendId:t}};function rW(t){var e=AE(t);return{type:Pt.Start,activity:e,exec:void 0}}function sW(t){var e=_t(t)?t:AE(t);return{type:Pt.Stop,activity:e,exec:void 0}}function oW(t,e,n){var i=_t(t.activity)?t.activity(e,n.data):t.activity,r=typeof i=="string"?{id:i}:i,o={type:Pt.Stop,activity:r};return o}var aW=function(t){return{type:wE,assignment:t}};function lW(t,e){var n=e?"#".concat(e):"";return"".concat(Pt.After,"(").concat(t,")").concat(n)}function tp(t,e){var n="".concat(Pt.DoneState,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}function kp(t,e){var n="".concat(Pt.DoneInvoke,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}function ld(t,e){var n="".concat(Pt.ErrorPlatform,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}var uW=function(t){var e,n,i=[];try{for(var r=ct(t),o=r.next();!o.done;o=r.next())for(var l=o.value,c=0;c<l.actions.length;){if(l.actions[c].type===wE){i.push(l.actions[c]),l.actions.splice(c,1);continue}c++}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i};function Em(t,e,n,i,r,o,l){l===void 0&&(l=!1);var c=l?[]:uW(r),d=c.length?UR(n,i,c,e):n,f=l?[n]:void 0,p=[];function v(C,N){var D;switch(N.type){case yf:{var O=ZJ(N,d,i,t.options.delays);return o&&typeof O.delay=="number"&&o(O,d,i),O}case vg:var k=tW(N,d,i,t.options.delays);return o&&k.to!==Pu.Internal&&(C==="entry"?p.push(k):o(k,d,i)),k;case Ik:{var F=nW(N,d,i);return o==null||o(F,d,i),F}case UJ:{var G=N,K=(D=G.conds.find(function(W){var se=kk(W.cond,t.options.guards);return!se||Vk(t,se,d,i,o?void 0:e)}))===null||D===void 0?void 0:D.actions;if(!K)return[];var H=gt(Em(t,e,d,i,[{type:C,actions:Lo(kr(K),t.options.actions)}],o,l),2),R=H[0],I=H[1];return d=I,f==null||f.push(d),R}case FJ:{var K=N.get(d,i.data);if(!K)return[];var P=gt(Em(t,e,d,i,[{type:C,actions:Lo(kr(K),t.options.actions)}],o,l),2),U=P[0],q=P[1];return d=q,f==null||f.push(d),U}case bE:{var F=oW(N,d,i);return o==null||o(F,n,i),F}case wE:{d=UR(d,i,[N],o?void 0:e),f==null||f.push(d);break}default:var V=Jd(N,t.options.actions),z=V.exec;if(o)o(V,d,i);else if(z&&f){var Ee=f.length-1,Ne=ve(ve({},V),{exec:function(W){for(var se=[],he=1;he<arguments.length;he++)se[he-1]=arguments[he];z.apply(void 0,Gt([f[Ee]],gt(se),!1))}});V=Ne}return V}}function T(C){var N,D,O=[];try{for(var k=ct(C.actions),F=k.next();!F.done;F=k.next()){var G=F.value,K=v(C.type,G);K&&(O=O.concat(K))}}catch(H){N={error:H}}finally{try{F&&!F.done&&(D=k.return)&&D.call(k)}finally{if(N)throw N.error}}return p.forEach(function(H){o(H,d,i)}),p.length=0,O}var b=Xt(r.map(T));return[b,d]}var tu=function(t,e){var n=e(t);return n};function Ok(t){var e;return e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}},e[Vo]=function(){return this},e}function cW(t,e,n,i){var r,o=Lk(t.src),l=(r=e==null?void 0:e.options.services)===null||r===void 0?void 0:r[o.type],c=t.data?Tm(t.data,n,i):void 0,d=l?Uk(l,t.id,c):Ok(t.id);return d.meta=t,d}function Uk(t,e,n){var i=Ok(e);if(i.deferred=!0,Du(t)){var r=i.state=tu(void 0,function(){return(n?t.withContext(n):t).initialState});i.getSnapshot=function(){return r}}return i}function dW(t){try{return typeof t.send=="function"}catch{return!1}}function fW(t){return dW(t)&&"id"in t}function hW(t){var e;return ve((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e[Vo]=function(){return this},e),t)}var Sm=function(t){return t.type==="atomic"||t.type==="final"};function Fk(t){return Object.keys(t.states).map(function(e){return t.states[e]})}function Wd(t){return Fk(t).filter(function(e){return e.type!=="history"})}function Bk(t){var e=[t];return Sm(t)?e:e.concat(Xt(Wd(t).map(Bk)))}function ud(t,e){var n,i,r,o,l,c,d,f,p=new Set(t),v=v_(p),T=new Set(e);try{for(var b=ct(T),C=b.next();!C.done;C=b.next())for(var N=C.value,D=N.parent;D&&!T.has(D);)T.add(D),D=D.parent}catch(P){n={error:P}}finally{try{C&&!C.done&&(i=b.return)&&i.call(b)}finally{if(n)throw n.error}}var O=v_(T);try{for(var k=ct(T),F=k.next();!F.done;F=k.next()){var N=F.value;if(N.type==="compound"&&(!O.get(N)||!O.get(N).length))v.get(N)?v.get(N).forEach(function(U){return T.add(U)}):N.initialStateNodes.forEach(function(U){return T.add(U)});else if(N.type==="parallel")try{for(var G=(l=void 0,ct(Wd(N))),K=G.next();!K.done;K=G.next()){var H=K.value;T.has(H)||(T.add(H),v.get(H)?v.get(H).forEach(function(U){return T.add(U)}):H.initialStateNodes.forEach(function(U){return T.add(U)}))}}catch(U){l={error:U}}finally{try{K&&!K.done&&(c=G.return)&&c.call(G)}finally{if(l)throw l.error}}}}catch(P){r={error:P}}finally{try{F&&!F.done&&(o=k.return)&&o.call(k)}finally{if(r)throw r.error}}try{for(var R=ct(T),I=R.next();!I.done;I=R.next())for(var N=I.value,D=N.parent;D&&!T.has(D);)T.add(D),D=D.parent}catch(P){d={error:P}}finally{try{I&&!I.done&&(f=R.return)&&f.call(R)}finally{if(d)throw d.error}}return T}function qk(t,e){var n=e.get(t);if(!n)return{};if(t.type==="compound"){var i=n[0];if(i){if(Sm(i))return i.key}else return{}}var r={};return n.forEach(function(o){r[o.key]=qk(o,e)}),r}function v_(t){var e,n,i=new Map;try{for(var r=ct(t),o=r.next();!o.done;o=r.next()){var l=o.value;i.has(l)||i.set(l,[]),l.parent&&(i.has(l.parent)||i.set(l.parent,[]),i.get(l.parent).push(l))}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i}function pW(t,e){var n=ud([t],e);return qk(t,v_(n))}function cd(t,e){return Array.isArray(t)?t.some(function(n){return n===e}):t instanceof Set?t.has(e):!1}function mW(t){return Gt([],gt(new Set(Xt(Gt([],gt(t.map(function(e){return e.ownEvents})),!1)))),!1)}function Vp(t,e){return e.type==="compound"?Wd(e).some(function(n){return n.type==="final"&&cd(t,n)}):e.type==="parallel"?Wd(e).every(function(n){return Vp(t,n)}):!1}function gW(t){return t===void 0&&(t=[]),t.reduce(function(e,n){return n.meta!==void 0&&(e[n.id]=n.meta),e},{})}function FR(t){return new Set(Xt(t.map(function(e){return e.tags})))}function zk(t,e){if(t===e)return!0;if(t===void 0||e===void 0)return!1;if(Et(t)||Et(e))return t===e;var n=Object.keys(t),i=Object.keys(e);return n.length===i.length&&n.every(function(r){return zk(t[r],e[r])})}function yW(t){return typeof t!="object"||t===null?!1:"value"in t&&"_event"in t}function vW(t,e){var n=t.exec,i=ve(ve({},t),{exec:n!==void 0?function(){return n(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0});return i}var _r=(function(){function t(e){var n=this,i;this.actions=[],this.activities=VR,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||VR,this.meta=gW(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=(i=Array.isArray(e.tags)?new Set(e.tags):e.tags)!==null&&i!==void 0?i:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return mW(n.configuration)}})}return t.from=function(e,n){if(e instanceof t)return e.context!==n?new t({value:e.value,context:n,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,events:[],configuration:[],transitions:[],children:{}}):e;var i=vu;return new t({value:e,context:n,_event:i,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,n){if(e instanceof t){if(!e.actions.length)return e;var i=vu;return new t({value:e.value,context:n,_event:i,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,n)},t.prototype.toStrings=function(e,n){var i=this;if(e===void 0&&(e=this.value),n===void 0&&(n="."),Et(e))return[e];var r=Object.keys(e);return r.concat.apply(r,Gt([],gt(r.map(function(o){return i.toStrings(e[o],n).map(function(l){return o+n+l})})),!1))},t.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var n=e.tags;e.machine;var i=SE(e,["configuration","transitions","tags","machine"]);return ve(ve({},i),{tags:Array.from(n)})},t.prototype.matches=function(e){return xE(e,this.value)},t.prototype.hasTag=function(e){return this.tags.has(e)},t.prototype.can=function(e){var n;YJ(!!this.machine);var i=(n=this.machine)===null||n===void 0?void 0:n.getTransitionData(this,e);return!!(i!=null&&i.transitions.length)&&i.transitions.some(function(r){return r.target!==void 0||r.actions.length})},t})(),_W={deferEvents:!1},BR=(function(){function t(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=ve(ve({},_W),e)}return t.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents){this.schedule(e);return}this.process(e)}this.flushEvents()},t.prototype.schedule=function(e){if(!this.initialized||this.processingEvent){this.queue.push(e);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},t.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(n){throw this.clear(),n}finally{this.processingEvent=!1}},t})(),t0=new Map,TW=0,Kc={bookId:function(){return"x:".concat(TW++)},register:function(t,e){return t0.set(t,e),t},get:function(t){return t0.get(t)},free:function(t){t0.delete(t)}};function CE(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function EW(){var t=CE();if(t&&"__xstate__"in t)return t.__xstate__}function SW(t){if(CE()){var e=EW();e&&e.register(t)}}function bW(t,e){e===void 0&&(e={});var n=t.initialState,i=new Set,r=[],o=!1,l=function(){if(!o){for(o=!0;r.length>0;){var f=r.shift();n=t.transition(n,f,d),i.forEach(function(p){return p.next(n)})}o=!1}},c=hW({id:e.id,send:function(f){r.push(f),l()},getSnapshot:function(){return n},subscribe:function(f,p,v){var T=Mp(f,p,v);return i.add(T),T.next(n),{unsubscribe:function(){i.delete(T)}}}}),d={parent:e.parent,self:c,id:e.id||"anonymous",observers:i};return n=t.start?t.start(d):n,c}var wW={sync:!1,autoForward:!1},Fn;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(Fn||(Fn={}));var xW=(function(){function t(e,n){n===void 0&&(n=t.defaultOptions);var i=this;this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=Fn.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(p,v){if($u(p))return i.batch(p),i.state;var T=Yn(_g(p,v));if(i.status===Fn.Stopped)return i.state;if(i.status!==Fn.Running&&!i.options.deferEvents)throw new Error('Event "'.concat(T.name,'" was sent to uninitialized service "').concat(i.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(T.data)));return i.scheduler.schedule(function(){i.forward(T);var b=i._nextState(T);i.update(b,T)}),i._state},this.sendTo=function(p,v,T){var b=i.parent&&(v===Pu.Parent||i.parent.id===v),C=b?i.parent:Et(v)?v===Pu.Internal?i:i.children.get(v)||Kc.get(v):WJ(v)?v:void 0;if(!C){if(!b)throw new Error("Unable to send event to child '".concat(v,"' from service '").concat(i.id,"'."));return}if("machine"in C){if(i.status!==Fn.Stopped||i.parent!==C||i.state.done){var N=ve(ve({},p),{name:p.name===OJ?"".concat(ld(i.id)):p.name,origin:i.sessionId});!T&&i.machine.config.predictableActionArguments?i._outgoingQueue.push([C,N]):C.send(N)}}else!T&&i.machine.config.predictableActionArguments?i._outgoingQueue.push([C,p.data]):C.send(p.data)},this._exec=function(p,v,T,b){b===void 0&&(b=i.machine.options.actions);var C=p.exec||y_(p.type,b),N=_t(C)?C:C?C.exec:p.exec;if(N)try{return N(v,T.data,i.machine.config.predictableActionArguments?{action:p,_event:T}:{action:p,state:i.state,_event:T})}catch(Ee){throw i.parent&&i.parent.send({type:"xstate.error",data:Ee}),Ee}switch(p.type){case yf:{var D=p;i.defer(D);break}case vg:var O=p;if(typeof O.delay=="number"){i.defer(O);return}else O.to?i.sendTo(O._event,O.to,T===vu):i.send(O._event);break;case Ck:i.cancel(p.sendId);break;case f_:{if(i.status!==Fn.Running)return;var k=p.activity;if(!i.machine.config.predictableActionArguments&&!i.state.activities[k.id||k.type])break;if(k.type===Pt.Invoke){var F=Lk(k.src),G=i.machine.options.services?i.machine.options.services[F.type]:void 0,K=k.id,H=k.data,R="autoForward"in k?k.autoForward:!!k.forward;if(!G)return;var I=H?Tm(H,v,T):void 0;if(typeof G=="string")return;var P=_t(G)?G(v,T.data,{data:I,src:F,meta:k.meta}):G;if(!P)return;var U=void 0;Du(P)&&(P=I?P.withContext(I):P,U={autoForward:R}),i.spawn(P,K,U)}else i.spawnActivity(k);break}case bE:{i.stopChild(p.activity.id);break}case Ik:var q=p,V=q.label,z=q.value;V?i.logger(V,z):i.logger(z);break}};var r=ve(ve({},t.defaultOptions),n),o=r.clock,l=r.logger,c=r.parent,d=r.id,f=d!==void 0?d:e.id;this.id=f,this.logger=l,this.clock=o,this.parent=c,this.options=r,this.scheduler=new BR({deferEvents:this.options.deferEvents}),this.sessionId=Kc.bookId()}return Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:tu(this,function(){return e._initialState=e.machine.initialState,e._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(e,n){var i,r;try{for(var o=ct(e.actions),l=o.next();!l.done;l=o.next()){var c=l.value;this.exec(c,e,n)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}},t.prototype.update=function(e,n){var i,r,o,l,c,d,f,p,v=this;if(e._sessionid=this.sessionId,this._state=e,(!this.machine.config.predictableActionArguments||n===vu)&&this.options.execute)this.execute(this.state);else for(var T=void 0;T=this._outgoingQueue.shift();)T[0].send(T[1]);if(this.children.forEach(function(P){v.state.children[P.id]=P}),this.devTools&&this.devTools.send(n.data,e),e.event)try{for(var b=ct(this.eventListeners),C=b.next();!C.done;C=b.next()){var N=C.value;N(e.event)}}catch(P){i={error:P}}finally{try{C&&!C.done&&(r=b.return)&&r.call(b)}finally{if(i)throw i.error}}try{for(var D=ct(this.listeners),O=D.next();!O.done;O=D.next()){var N=O.value;N(e,e.event)}}catch(P){o={error:P}}finally{try{O&&!O.done&&(l=D.return)&&l.call(D)}finally{if(o)throw o.error}}try{for(var k=ct(this.contextListeners),F=k.next();!F.done;F=k.next()){var G=F.value;G(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(P){c={error:P}}finally{try{F&&!F.done&&(d=k.return)&&d.call(k)}finally{if(c)throw c.error}}if(this.state.done){var K=e.configuration.find(function(P){return P.type==="final"&&P.parent===v.machine}),H=K&&K.doneData?Tm(K.doneData,e.context,n):void 0;this._doneEvent=kp(this.id,H);try{for(var R=ct(this.doneListeners),I=R.next();!I.done;I=R.next()){var N=I.value;N(this._doneEvent)}}catch(P){f={error:P}}finally{try{I&&!I.done&&(p=R.return)&&p.call(R)}finally{if(f)throw f.error}}this._stop(),this._stopChildren(),Kc.free(this.sessionId)}},t.prototype.onTransition=function(e){return this.listeners.add(e),this.status===Fn.Running&&e(this.state,this.state.event),this},t.prototype.subscribe=function(e,n,i){var r=this,o=Mp(e,n,i);this.listeners.add(o.next),this.status!==Fn.NotStarted&&o.next(this.state);var l=function(){r.doneListeners.delete(l),r.stopListeners.delete(l),o.complete()};return this.status===Fn.Stopped?o.complete():(this.onDone(l),this.onStop(l)),{unsubscribe:function(){r.listeners.delete(o.next),r.doneListeners.delete(l),r.stopListeners.delete(l)}}},t.prototype.onEvent=function(e){return this.eventListeners.add(e),this},t.prototype.onSend=function(e){return this.sendListeners.add(e),this},t.prototype.onChange=function(e){return this.contextListeners.add(e),this},t.prototype.onStop=function(e){return this.stopListeners.add(e),this},t.prototype.onDone=function(e){return this.status===Fn.Stopped&&this._doneEvent?e(this._doneEvent):this.doneListeners.add(e),this},t.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},t.prototype.start=function(e){var n=this;if(this.status===Fn.Running)return this;this.machine._init(),Kc.register(this.sessionId,this),this.initialized=!0,this.status=Fn.Running;var i=e===void 0?this.initialState:tu(this,function(){return yW(e)?n.machine.resolveState(e):n.machine.resolveState(_r.from(e,n.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){n.update(i,vu)}),this},t.prototype._stopChildren=function(){this.children.forEach(function(e){_t(e.stop)&&e.stop()}),this.children.clear()},t.prototype._stop=function(){var e,n,i,r,o,l,c,d,f,p;try{for(var v=ct(this.listeners),T=v.next();!T.done;T=v.next()){var b=T.value;this.listeners.delete(b)}}catch(R){e={error:R}}finally{try{T&&!T.done&&(n=v.return)&&n.call(v)}finally{if(e)throw e.error}}try{for(var C=ct(this.stopListeners),N=C.next();!N.done;N=C.next()){var b=N.value;b(),this.stopListeners.delete(b)}}catch(R){i={error:R}}finally{try{N&&!N.done&&(r=C.return)&&r.call(C)}finally{if(i)throw i.error}}try{for(var D=ct(this.contextListeners),O=D.next();!O.done;O=D.next()){var b=O.value;this.contextListeners.delete(b)}}catch(R){o={error:R}}finally{try{O&&!O.done&&(l=D.return)&&l.call(D)}finally{if(o)throw o.error}}try{for(var k=ct(this.doneListeners),F=k.next();!F.done;F=k.next()){var b=F.value;this.doneListeners.delete(b)}}catch(R){c={error:R}}finally{try{F&&!F.done&&(d=k.return)&&d.call(k)}finally{if(c)throw c.error}}if(!this.initialized)return this;this.initialized=!1,this.status=Fn.Stopped,this._initialState=void 0;try{for(var G=ct(Object.keys(this.delayedEventsMap)),K=G.next();!K.done;K=G.next()){var H=K.value;this.clock.clearTimeout(this.delayedEventsMap[H])}}catch(R){f={error:R}}finally{try{K&&!K.done&&(p=G.return)&&p.call(G)}finally{if(f)throw f.error}}this.scheduler.clear(),this.scheduler=new BR({deferEvents:this.options.deferEvents})},t.prototype.stop=function(){var e=this,n=this.scheduler;return this._stop(),n.schedule(function(){var i;if(!(!((i=e._state)===null||i===void 0)&&i.done)){var r=Yn({type:"xstate.stop"}),o=tu(e,function(){var l=Xt(Gt([],gt(e.state.configuration),!1).sort(function(v,T){return T.order-v.order}).map(function(v){return Lo(v.onExit,e.machine.options.actions)})),c=gt(Em(e.machine,e.state,e.state.context,r,[{type:"exit",actions:l}],e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),d=c[0],f=c[1],p=new _r({value:e.state.value,context:f,_event:r,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:d.filter(function(v){return!g_(v)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return p.changed=!0,p});e.update(o,r),e._stopChildren(),Kc.free(e.sessionId)}}),this},t.prototype.batch=function(e){var n=this;if(!(this.status===Fn.NotStarted&&this.options.deferEvents)){if(this.status!==Fn.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'))}if(e.length){var i=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var r,o,l=n.state,c=!1,d=[],f=function(b){var C=Yn(b);n.forward(C),l=tu(n,function(){return n.machine.transition(l,C,void 0,i||void 0)}),d.push.apply(d,Gt([],gt(n.machine.config.predictableActionArguments?l.actions:l.actions.map(function(N){return vW(N,l)})),!1)),c=c||!!l.changed};try{for(var p=ct(e),v=p.next();!v.done;v=p.next()){var T=v.value;f(T)}}catch(b){r={error:b}}finally{try{v&&!v.done&&(o=p.return)&&o.call(p)}finally{if(r)throw r.error}}l.changed=c,l.actions=d,n.update(l,Yn(e[e.length-1]))})}},t.prototype.sender=function(e){return this.send.bind(this,e)},t.prototype._nextState=function(e,n){var i=this;n===void 0&&(n=!!this.machine.config.predictableActionArguments&&this._exec);var r=Yn(e);if(r.name.indexOf(kR)===0&&!this.state.nextEvents.some(function(l){return l.indexOf(kR)===0}))throw r.data.data;var o=tu(this,function(){return i.machine.transition(i.state,r,void 0,n||void 0)});return o},t.prototype.nextState=function(e){return this._nextState(e,!1)},t.prototype.forward=function(e){var n,i;try{for(var r=ct(this.forwardTo),o=r.next();!o.done;o=r.next()){var l=o.value,c=this.children.get(l);if(!c)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(l,"'."));c.send(e)}}catch(d){n={error:d}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}},t.prototype.defer=function(e){var n=this,i=this.clock.setTimeout(function(){"to"in e&&e.to?n.sendTo(e._event,e.to,!0):n.send(e._event)},e.delay);e.id&&(this.delayedEventsMap[e.id]=i)},t.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},t.prototype.exec=function(e,n,i){i===void 0&&(i=this.machine.options.actions),this._exec(e,n.context,n._event,i)},t.prototype.removeChild=function(e){var n;this.children.delete(e),this.forwardTo.delete(e),(n=this.state)===null||n===void 0||delete n.children[e]},t.prototype.stopChild=function(e){var n=this.children.get(e);n&&(this.removeChild(e),_t(n.stop)&&n.stop())},t.prototype.spawn=function(e,n,i){if(this.status!==Fn.Running)return Uk(e,n);if(OR(e))return this.spawnPromise(Promise.resolve(e),n);if(_t(e))return this.spawnCallback(e,n);if(fW(e))return this.spawnActor(e,n);if(JJ(e))return this.spawnObservable(e,n);if(Du(e))return this.spawnMachine(e,ve(ve({},i),{id:n}));if(jJ(e))return this.spawnBehavior(e,n);throw new Error('Unable to spawn entity "'.concat(n,'" of type "').concat(typeof e,'".'))},t.prototype.spawnMachine=function(e,n){var i=this;n===void 0&&(n={});var r=new t(e,ve(ve({},this.options),{parent:this,id:n.id||e.id})),o=ve(ve({},wW),n);o.sync&&r.onTransition(function(c){i.send(Rk,{state:c,id:r.id})});var l=r;return this.children.set(r.id,l),o.autoForward&&this.forwardTo.add(r.id),r.onDone(function(c){i.removeChild(r.id),i.send(Yn(c,{origin:r.id}))}).start(),l},t.prototype.spawnBehavior=function(e,n){var i=bW(e,{id:n,parent:this});return this.children.set(n,i),i},t.prototype.spawnPromise=function(e,n){var i,r=this,o=!1,l;e.then(function(d){o||(l=d,r.removeChild(n),r.send(Yn(kp(n,d),{origin:n})))},function(d){if(!o){r.removeChild(n);var f=ld(n,d);try{r.send(Yn(f,{origin:n}))}catch{r.devTools&&r.devTools.send(f,r.state),r.machine.strict&&r.stop()}}});var c=(i={id:n,send:function(){},subscribe:function(d,f,p){var v=Mp(d,f,p),T=!1;return e.then(function(b){T||(v.next(b),!T&&v.complete())},function(b){T||v.error(b)}),{unsubscribe:function(){return T=!0}}},stop:function(){o=!0},toJSON:function(){return{id:n}},getSnapshot:function(){return l}},i[Vo]=function(){return this},i);return this.children.set(n,c),c},t.prototype.spawnCallback=function(e,n){var i,r=this,o=!1,l=new Set,c=new Set,d,f=function(T){d=T,c.forEach(function(b){return b(T)}),!o&&r.send(Yn(T,{origin:n}))},p;try{p=e(f,function(T){l.add(T)})}catch(T){this.send(ld(n,T))}if(OR(p))return this.spawnPromise(p,n);var v=(i={id:n,send:function(T){return l.forEach(function(b){return b(T)})},subscribe:function(T){var b=Mp(T);return c.add(b.next),{unsubscribe:function(){c.delete(b.next)}}},stop:function(){o=!0,_t(p)&&p()},toJSON:function(){return{id:n}},getSnapshot:function(){return d}},i[Vo]=function(){return this},i);return this.children.set(n,v),v},t.prototype.spawnObservable=function(e,n){var i,r=this,o,l=e.subscribe(function(d){o=d,r.send(Yn(d,{origin:n}))},function(d){r.removeChild(n),r.send(Yn(ld(n,d),{origin:n}))},function(){r.removeChild(n),r.send(Yn(kp(n),{origin:n}))}),c=(i={id:n,send:function(){},subscribe:function(d,f,p){return e.subscribe(d,f,p)},stop:function(){return l.unsubscribe()},getSnapshot:function(){return o},toJSON:function(){return{id:n}}},i[Vo]=function(){return this},i);return this.children.set(n,c),c},t.prototype.spawnActor=function(e,n){return this.children.set(n,e),e},t.prototype.spawnActivity=function(e){var n=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(n){var i=n(this.state.context,e);this.spawnEffect(e.id,i)}},t.prototype.spawnEffect=function(e,n){var i;this.children.set(e,(i={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:n||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}},i[Vo]=function(){return this},i))},t.prototype.attachDev=function(){var e=CE();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var n=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(ve(ve({name:this.id,autoPause:!0,stateSanitizer:function(i){return{value:i.value,context:i.context,actions:i.actions}}},n),{features:ve({jump:!1,skip:!1},n?n.features:void 0)}),this.machine),this.devTools.init(this.state)}SW(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[Vo]=function(){return this},t.prototype.getSnapshot=function(){return this.status===Fn.NotStarted?this.initialState:this._state},t.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,n){return setTimeout(e,n)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},t.interpret=Hk,t})();function Hk(t,e){var n=new xW(t,e);return n}function AW(t){if(typeof t=="string"){var e={type:t};return e.toString=function(){return t},e}return t}function np(t){return ve(ve({type:h_},t),{toJSON:function(){t.onDone,t.onError;var e=SE(t,["onDone","onError"]);return ve(ve({},e),{type:h_,src:AW(t.src)})}})}var ip="",__="#",n0="*",Kl={},Yl=function(t){return t[0]===__},CW=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},IW=(function(){function t(e,n,i,r){i===void 0&&(i="context"in e?e.context:void 0);var o=this,l;this.config=e,this._context=i,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(CW(),n),this.parent=r==null?void 0:r.parent,this.key=this.config.key||(r==null?void 0:r.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:Nk),this.id=this.config.id||Gt([this.machine.key],gt(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(l=this.config.schema)!==null&&l!==void 0?l:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?ad(this.config.states,function(f,p){var v,T=new t(f,{},void 0,{parent:o,key:p});return Object.assign(o.idMap,ve((v={},v[T.id]=T,v),T.idMap)),T}):Kl;var c=0;function d(f){var p,v;f.order=c++;try{for(var T=ct(Fk(f)),b=T.next();!b.done;b=T.next()){var C=b.value;d(C)}}catch(N){p={error:N}}finally{try{b&&!b.done&&(v=T.return)&&v.call(T)}finally{if(p)throw p.error}}}d(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(f){var p=f.event;return p===ip}):ip in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=kr(this.config.entry||this.config.onEntry).map(function(f){return Jd(f)}),this.onExit=kr(this.config.exit||this.config.onExit).map(function(f){return Jd(f)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=kr(this.config.invoke).map(function(f,p){var v,T;if(Du(f)){var b=ep(o.id,p);return o.machine.options.services=ve((v={},v[b]=f,v),o.machine.options.services),np({src:b,id:b})}else if(Et(f.src)){var b=f.id||ep(o.id,p);return np(ve(ve({},f),{id:b,src:f.src}))}else if(Du(f.src)||_t(f.src)){var b=f.id||ep(o.id,p);return o.machine.options.services=ve((T={},T[b]=f.src,T),o.machine.options.services),np(ve(ve({id:b},f),{src:b}))}else{var C=f.src;return np(ve(ve({id:ep(o.id,p)},f),{src:C}))}}),this.activities=kr(this.config.activities).concat(this.invoke).map(function(f){return AE(f)}),this.transition=this.transition.bind(this),this.tags=kr(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||Bk(this).forEach(function(e){return e.on})},t.prototype.withConfig=function(e,n){var i=this.options,r=i.actions,o=i.activities,l=i.guards,c=i.services,d=i.delays;return new t(this.config,{actions:ve(ve({},r),e.actions),activities:ve(ve({},o),e.activities),guards:ve(ve({},l),e.guards),services:ve(ve({},c),e.services),delays:ve(ve({},d),e.delays)},n??this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return _t(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:ad(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce(function(n,i){return n[i.eventType]=n[i.eventType]||[],n[i.eventType].push(i),n},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var n=e===ip,i=this.transitions.filter(function(r){var o=r.eventType===e;return n?o:o||r.eventType===n0});return this.__cache.candidates[e]=i,i},t.prototype.getDelayedTransitions=function(){var e=this,n=this.config.after;if(!n)return[];var i=function(o,l){var c=_t(o)?"".concat(e.id,":delay[").concat(l,"]"):o,d=lW(c,e.id);return e.onEntry.push(eW(d,{delay:o})),e.onExit.push(iW(d)),d},r=$u(n)?n.map(function(o,l){var c=i(o.delay,l);return ve(ve({},o),{event:c})}):Xt(Object.keys(n).map(function(o,l){var c=n[o],d=Et(c)?{target:c}:c,f=isNaN(+o)?o:+o,p=i(f,l);return kr(d).map(function(v){return ve(ve({},v),{event:p,delay:f})})}));return r.map(function(o){var l=o.delay;return ve(ve({},e.formatTransition(o)),{delay:l})})},t.prototype.getStateNodes=function(e){var n,i=this;if(!e)return[];var r=e instanceof _r?e.value:wd(e,this.delimiter);if(Et(r)){var o=this.getStateNode(r).initial;return o!==void 0?this.getStateNodes((n={},n[r]=o,n)):[this,this.states[r]]}var l=Object.keys(r),c=[this];return c.push.apply(c,Gt([],gt(Xt(l.map(function(d){return i.getStateNode(d).getStateNodes(r[d])}))),!1)),c},t.prototype.handles=function(e){var n=Pk(e);return this.events.includes(n)},t.prototype.resolveState=function(e){var n=e instanceof _r?e:_r.create(e),i=Array.from(ud([],this.getStateNodes(n.value)));return new _r(ve(ve({},n),{value:this.resolve(n.value),configuration:i,done:Vp(i,this),tags:FR(i),machine:this.machine}))},t.prototype.transitionLeafNode=function(e,n,i){var r=this.getStateNode(e),o=r.next(n,i);return!o||!o.transitions.length?this.next(n,i):o},t.prototype.transitionCompoundNode=function(e,n,i){var r=Object.keys(e),o=this.getStateNode(r[0]),l=o._transition(e[r[0]],n,i);return!l||!l.transitions.length?this.next(n,i):l},t.prototype.transitionParallelNode=function(e,n,i){var r,o,l={};try{for(var c=ct(Object.keys(e)),d=c.next();!d.done;d=c.next()){var f=d.value,p=e[f];if(p){var v=this.getStateNode(f),T=v._transition(p,n,i);T&&(l[f]=T)}}}catch(O){r={error:O}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}var b=Object.keys(l).map(function(O){return l[O]}),C=Xt(b.map(function(O){return O.transitions})),N=b.some(function(O){return O.transitions.length>0});if(!N)return this.next(n,i);var D=Xt(Object.keys(l).map(function(O){return l[O].configuration}));return{transitions:C,exitSet:Xt(b.map(function(O){return O.exitSet})),configuration:D,source:n,actions:Xt(Object.keys(l).map(function(O){return l[O].actions}))}},t.prototype._transition=function(e,n,i){return Et(e)?this.transitionLeafNode(e,n,i):Object.keys(e).length===1?this.transitionCompoundNode(e,n,i):this.transitionParallelNode(e,n,i)},t.prototype.getTransitionData=function(e,n){return this._transition(e.value,e,Yn(n))},t.prototype.next=function(e,n){var i,r,o=this,l=n.name,c=[],d=[],f;try{for(var p=ct(this.getCandidates(l)),v=p.next();!v.done;v=p.next()){var T=v.value,b=T.cond,C=T.in,N=e.context,D=C?Et(C)&&Yl(C)?e.matches(wd(this.getStateNodeById(C).path,this.delimiter)):xE(wd(C,this.delimiter),zJ(this.path.slice(0,-2))(e.value)):!0,O=!1;try{O=!b||Vk(this.machine,b,N,n,e)}catch(G){throw new Error("Unable to evaluate guard '".concat(b.name||b.type,"' in transition for event '").concat(l,"' in state node '").concat(this.id,`':
`).concat(G.message))}if(O&&D){T.target!==void 0&&(d=T.target),c.push.apply(c,Gt([],gt(T.actions),!1)),f=T;break}}}catch(G){i={error:G}}finally{try{v&&!v.done&&(r=p.return)&&r.call(p)}finally{if(i)throw i.error}}if(f){if(!d.length)return{transitions:[f],exitSet:[],configuration:e.value?[this]:[],source:e,actions:c};var k=Xt(d.map(function(G){return o.getRelativeStateNodes(G,e.historyValue)})),F=!!f.internal;return{transitions:[f],exitSet:F?[]:Xt(d.map(function(G){return o.getPotentiallyReenteringNodes(G)})),configuration:k,source:e,actions:c}}},t.prototype.getPotentiallyReenteringNodes=function(e){if(this.order<e.order)return[this];for(var n=[],i=this,r=e;i&&i!==r;)n.push(i),i=i.parent;return i!==r?[]:(n.push(r),n)},t.prototype.getActions=function(e,n,i,r,o,l,c){var d,f,p,v,T=this,b=l?ud([],this.getStateNodes(l.value)):[],C=new Set;try{for(var N=ct(Array.from(e).sort(function(q,V){return q.order-V.order})),D=N.next();!D.done;D=N.next()){var O=D.value;(!cd(b,O)||cd(i.exitSet,O)||O.parent&&C.has(O.parent))&&C.add(O)}}catch(q){d={error:q}}finally{try{D&&!D.done&&(f=N.return)&&f.call(N)}finally{if(d)throw d.error}}try{for(var k=ct(b),F=k.next();!F.done;F=k.next()){var O=F.value;(!cd(e,O)||cd(i.exitSet,O.parent))&&i.exitSet.push(O)}}catch(q){p={error:q}}finally{try{F&&!F.done&&(v=k.return)&&v.call(k)}finally{if(p)throw p.error}}i.exitSet.sort(function(q,V){return V.order-q.order});var G=Array.from(C).sort(function(q,V){return q.order-V.order}),K=new Set(i.exitSet),H=Xt(G.map(function(q){var V=[];if(q.type!=="final")return V;var z=q.parent;if(!z.parent)return V;V.push(tp(q.id,q.doneData),tp(z.id,q.doneData?Tm(q.doneData,r,o):void 0));var Ee=z.parent;return Ee.type==="parallel"&&Wd(Ee).every(function(Ne){return Vp(i.configuration,Ne)})&&V.push(tp(Ee.id)),V})),R=G.map(function(q){var V=q.onEntry,z=q.activities.map(function(Ee){return rW(Ee)});return{type:"entry",actions:Lo(c?Gt(Gt([],gt(V),!1),gt(z),!1):Gt(Gt([],gt(z),!1),gt(V),!1),T.machine.options.actions)}}).concat({type:"state_done",actions:H.map(function(q){return XJ(q)})}),I=Array.from(K).map(function(q){return{type:"exit",actions:Lo(Gt(Gt([],gt(q.onExit),!1),gt(q.activities.map(function(V){return sW(V)})),!1),T.machine.options.actions)}}),P=I.concat({type:"transition",actions:Lo(i.actions,this.machine.options.actions)}).concat(R);if(n){var U=Lo(Xt(Gt([],gt(e),!1).sort(function(q,V){return V.order-q.order}).map(function(q){return q.onExit})),this.machine.options.actions).filter(function(q){return!g_(q)});return P.concat({type:"stop",actions:U})}return P},t.prototype.transition=function(e,n,i,r){e===void 0&&(e=this.initialState);var o=Yn(n),l;if(e instanceof _r)l=i===void 0?e:this.resolveState(_r.from(e,i));else{var c=Et(e)?this.resolve(_m(this.getResolvedPath(e))):this.resolve(e),d=i??this.machine.context;l=this.resolveState(_r.from(c,d))}if(this.strict&&!this.events.includes(o.name)&&!GJ(o.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(o.name,"'"));var f=this._transition(l.value,l,o)||{transitions:[],configuration:[],exitSet:[],source:l,actions:[]},p=ud([],this.getStateNodes(l.value)),v=f.configuration.length?ud(p,f.configuration):p;return f.configuration=Gt([],gt(v),!1),this.resolveTransition(f,l,l.context,r,o)},t.prototype.resolveRaisedTransition=function(e,n,i,r){var o,l=e.actions;return e=this.transition(e,n,void 0,r),e._event=i,e.event=i.data,(o=e.actions).unshift.apply(o,Gt([],gt(l),!1)),e},t.prototype.resolveTransition=function(e,n,i,r,o){var l,c,d,f,p=this;o===void 0&&(o=vu);var v=e.configuration,T=!n||e.transitions.length>0,b=T?e.configuration:n?n.configuration:[],C=Vp(b,this),N=T?pW(this.machine,v):void 0,D=n?n.historyValue?n.historyValue:e.source?this.machine.historyValue(n.value):void 0:void 0,O=this.getActions(new Set(b),C,e,i,o,n,r),k=n?ve({},n.activities):{};try{for(var F=ct(O),G=F.next();!G.done;G=F.next()){var K=G.value;try{for(var H=(d=void 0,ct(K.actions)),R=H.next();!R.done;R=H.next()){var I=R.value;I.type===f_?k[I.activity.id||I.activity.type]=I:I.type===bE&&(k[I.activity.id||I.activity.type]=!1)}}catch(oe){d={error:oe}}finally{try{R&&!R.done&&(f=H.return)&&f.call(H)}finally{if(d)throw d.error}}}}catch(oe){l={error:oe}}finally{try{G&&!G.done&&(c=F.return)&&c.call(F)}finally{if(l)throw l.error}}var P=gt(Em(this,n,i,o,O,r,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),U=P[0],q=P[1],V=gt($J(U,g_),2),z=V[0],Ee=V[1],Ne=U.filter(function(oe){var ye;return oe.type===f_&&((ye=oe.activity)===null||ye===void 0?void 0:ye.type)===h_}),W=Ne.reduce(function(oe,ye){return oe[ye.activity.id]=cW(ye.activity,p.machine,q,o),oe},n?ve({},n.children):{}),se=new _r({value:N||n.value,context:q,_event:o,_sessionid:n?n._sessionid:null,historyValue:N?D?KJ(D,N):void 0:n?n.historyValue:void 0,history:!N||e.source?n:void 0,actions:N?Ee:[],activities:N?k:n?n.activities:{},events:[],configuration:b,transitions:e.transitions,children:W,done:C,tags:FR(b),machine:this}),he=i!==q;se.changed=o.name===Rk||he;var xe=se.history;xe&&delete xe.history;var Ae=!C&&(this._transient||v.some(function(oe){return oe._transient}));if(!T&&(!Ae||o.name===ip))return se;var j=se;if(!C)for(Ae&&(j=this.resolveRaisedTransition(j,{type:VJ},o,r));z.length;){var ee=z.shift();j=this.resolveRaisedTransition(j,ee._event,o,r)}var ne=j.changed||(xe?!!j.actions.length||he||typeof xe.value!=typeof j.value||!zk(j.value,xe.value):void 0);return j.changed=ne,j.history=xe,j},t.prototype.getStateNode=function(e){if(Yl(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var n=this.states[e];if(!n)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return n},t.prototype.getStateNodeById=function(e){var n=Yl(e)?e.slice(__.length):e;if(n===this.id)return this;var i=this.machine.idMap[n];if(!i)throw new Error("Child state node '#".concat(n,"' does not exist on machine '").concat(this.id,"'"));return i},t.prototype.getStateNodeByPath=function(e){if(typeof e=="string"&&Yl(e))try{return this.getStateNodeById(e.slice(1))}catch{}for(var n=m_(e,this.delimiter).slice(),i=this;n.length;){var r=n.shift();if(!r.length)break;i=i.getStateNode(r)}return i},t.prototype.resolve=function(e){var n,i=this;if(!e)return this.initialStateValue||Kl;switch(this.type){case"parallel":return ad(this.initialStateValue,function(o,l){return o?i.getStateNode(l).resolve(e[l]||o):Kl});case"compound":if(Et(e)){var r=this.getStateNode(e);return r.type==="parallel"||r.type==="compound"?(n={},n[e]=r.initialStateValue,n):e}return Object.keys(e).length?ad(e,function(o,l){return o?i.getStateNode(l).resolve(o):Kl}):this.initialStateValue||{};default:return e||Kl}},t.prototype.getResolvedPath=function(e){if(Yl(e)){var n=this.machine.idMap[e.slice(__.length)];if(!n)throw new Error("Unable to find state node '".concat(e,"'"));return n.path}return m_(e,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var n;if(this.type==="parallel")n=LR(this.states,function(i){return i.initialStateValue||Kl},function(i){return i.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));n=Sm(this.states[this.initial])?this.initial:(e={},e[this.initial]=this.states[this.initial].initialStateValue,e)}else n={};return this.__cache.initialStateValue=n,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(e,n){this._init();var i=this.getStateNodes(e);return this.resolveTransition({configuration:i,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,n??this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var e;if(this.type==="history"){var n=this.config;Et(n.target)?e=Yl(n.target)?_m(this.machine.getStateNodeById(n.target).path.slice(this.path.length-1)):n.target:e=n.target}return e},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(e,n,i){return i===void 0&&(i=!0),i?e.type==="history"?e.resolveHistory(n):e.initialStateNodes:[e]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var e=this;if(Sm(this))return[this];if(this.type==="compound"&&!this.initial)return[this];var n=Dp(this.initialStateValue);return Xt(n.map(function(i){return e.getFromRelativePath(i)}))},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var n=gt(e),i=n[0],r=n.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(i,"' from node with no states"));var o=this.getStateNode(i);if(o.type==="history")return o.resolveHistory();if(!this.states[i])throw new Error("Child state '".concat(i,"' does not exist on '").concat(this.id,"'"));return this.states[i].getFromRelativePath(r)},t.prototype.historyValue=function(e){if(Object.keys(this.states).length)return{current:e||this.initialStateValue,states:LR(this.states,function(n,i){if(!e)return n.historyValue();var r=Et(e)?void 0:e[i];return n.historyValue(r||n.initialStateValue)},function(n){return!n.history})}},t.prototype.resolveHistory=function(e){var n=this;if(this.type!=="history")return[this];var i=this.parent;if(!e){var r=this.target;return r?Xt(Dp(r).map(function(l){return i.getFromRelativePath(l)})):i.initialStateNodes}var o=HJ(i.path,"states")(e).current;return Et(o)?[i.getStateNode(o)]:Xt(Dp(o).map(function(l){return n.history==="deep"?i.getFromRelativePath(l):[i.states[l[0]]]}))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var e=this,n=Xt(Object.keys(this.states).map(function(i){return e.states[i].stateIds}));return[this.id].concat(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var e,n,i,r;if(this.__cache.events)return this.__cache.events;var o=this.states,l=new Set(this.ownEvents);if(o)try{for(var c=ct(Object.keys(o)),d=c.next();!d.done;d=c.next()){var f=d.value,p=o[f];if(p.states)try{for(var v=(i=void 0,ct(p.events)),T=v.next();!T.done;T=v.next()){var b=T.value;l.add("".concat(b))}}catch(C){i={error:C}}finally{try{T&&!T.done&&(r=v.return)&&r.call(v)}finally{if(i)throw i.error}}}}catch(C){e={error:C}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(l)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter(function(n){return!(!n.target&&!n.actions.length&&n.internal)}).map(function(n){return n.eventType}));return Array.from(e)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(e){var n=this;if(e!==void 0)return e.map(function(i){if(!Et(i))return i;var r=i[0]===n.delimiter;if(r&&!n.parent)return n.getStateNodeByPath(i.slice(1));var o=r?n.key+i:i;if(n.parent)try{var l=n.parent.getStateNodeByPath(o);return l}catch(c){throw new Error("Invalid transition definition for state node '".concat(n.id,`':
`).concat(c.message))}else return n.getStateNodeByPath(o)})},t.prototype.formatTransition=function(e){var n=this,i=QJ(e.target),r="internal"in e?e.internal:i?i.some(function(d){return Et(d)&&d[0]===n.delimiter}):!0,o=this.machine.options.guards,l=this.resolveTarget(i),c=ve(ve({},e),{actions:Lo(kr(e.actions)),cond:kk(e.cond,o),target:l,source:this,internal:r,eventType:e.event,toJSON:function(){return ve(ve({},c),{target:c.target?c.target.map(function(d){return"#".concat(d.id)}):void 0,source:"#".concat(n.id)})}});return c},t.prototype.formatTransitions=function(){var e,n,i=this,r;if(!this.config.on)r=[];else if(Array.isArray(this.config.on))r=this.config.on;else{var o=this.config.on,l=n0,c=o[l],d=c===void 0?[]:c,f=SE(o,[typeof l=="symbol"?l:l+""]);r=Xt(Object.keys(f).map(function(k){var F=$l(k,f[k]);return F}).concat($l(n0,d)))}var p=this.config.always?$l("",this.config.always):[],v=this.config.onDone?$l(String(tp(this.id)),this.config.onDone):[],T=Xt(this.invoke.map(function(k){var F=[];return k.onDone&&F.push.apply(F,Gt([],gt($l(String(kp(k.id)),k.onDone)),!1)),k.onError&&F.push.apply(F,Gt([],gt($l(String(ld(k.id)),k.onError)),!1)),F})),b=this.after,C=Xt(Gt(Gt(Gt(Gt([],gt(v),!1),gt(T),!1),gt(r),!1),gt(p),!1).map(function(k){return kr(k).map(function(F){return i.formatTransition(F)})}));try{for(var N=ct(b),D=N.next();!D.done;D=N.next()){var O=D.value;C.push(O)}}catch(k){e={error:k}}finally{try{D&&!D.done&&(n=N.return)&&n.call(N)}finally{if(e)throw e.error}}return C},t})();function RW(t,e,n){return n===void 0&&(n=t.context),new IW(t,e,n)}var NW=aW,T_;(function(t){t[t.Effect=1]="Effect",t[t.LayoutEffect=2]="LayoutEffect"})(T_||(T_={}));var xd=B.useLayoutEffect;function qR(t){var e=B.useRef();return e.current||(e.current={v:t()}),e.current.v}var PW=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,o=[],l;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(c){l={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return o},DW=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function MW(t,e){var n,i,r=PW([[],[]],2),o=r[0],l=r[1];try{for(var c=DW(t),d=c.next();!d.done;d=c.next()){var f=d.value;e(f)?o.push(f):l.push(f)}}catch(p){n={error:p}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return[o,l]}var Yc=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,o=[],l;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(c){l={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return o},zR=function(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))};function HR(t,e){var n=t.exec,i=n(e.context,e._event.data,{action:t,state:e,_event:e._event});i()}function kW(t){var e=B.useRef([]),n=B.useRef([]);xd(function(){var i=t.subscribe(function(r){var o,l;if(r.actions.length){var c=r.actions.filter(function(v){return typeof v.exec=="function"&&"__effect"in v.exec}),d=Yc(MW(c,function(v){return v.exec.__effect===T_.Effect}),2),f=d[0],p=d[1];(o=e.current).push.apply(o,zR([],Yc(f.map(function(v){return[v,r]})),!1)),(l=n.current).push.apply(l,zR([],Yc(p.map(function(v){return[v,r]})),!1))}});return function(){i.unsubscribe()}},[]),xd(function(){for(;n.current.length;){var i=Yc(n.current.shift(),2),r=i[0],o=i[1];HR(r,o)}}),B.useEffect(function(){for(;e.current.length;){var i=Yc(e.current.shift(),2),r=i[0],o=i[1];HR(r,o)}})}var Ad=function(){return Ad=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Ad.apply(this,arguments)},VW=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n};function LW(t,e,n){if(typeof t=="object")return t;var i=function(){};return{next:t,error:e||i,complete:n||i}}function OW(t,e,n){e===void 0&&(e={});var i=qR(function(){return typeof t=="function"?t():t}),r=e.context,o=e.guards,l=e.actions,c=e.activities,d=e.services,f=e.delays,p=e.state,v=VW(e,["context","guards","actions","activities","services","delays","state"]),T=qR(function(){var b={context:r,guards:o,actions:l,activities:c,services:d,delays:f},C=i.withConfig(b,function(){return Ad(Ad({},i.context),r)});return Hk(C,Ad({deferEvents:!0},v))});return xd(function(){var b;return n&&(b=T.subscribe(LW(n))),function(){b==null||b.unsubscribe()}},[n]),xd(function(){return T.start(p?_r.create(p):void 0),function(){T.stop()}},[]),xd(function(){Object.assign(T.machine.options.actions,l),Object.assign(T.machine.options.guards,o),Object.assign(T.machine.options.activities,c),Object.assign(T.machine.options.services,d),Object.assign(T.machine.options.delays,f)},[l,o,c,d,f]),kW(T),T}var UW=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,o=[],l;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(c){l={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return o};function FW(t,e){e===void 0&&(e={});var n=B.useCallback(function(c){var d=c.changed===void 0&&Object.keys(c.children).length;(c.changed||d)&&l(c)},[]),i=OW(t,e,n),r=UW(B.useState(function(){var c=i.machine.initialState;return e.state?_r.create(e.state):c}),2),o=r[0],l=r[1];return[o,i.send,i]}function on(){return on=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},on.apply(null,arguments)}function _u(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}const rt={arr:Array.isArray,obj:t=>Object.prototype.toString.call(t)==="[object Object]",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0,nul:t=>t===null,set:t=>t instanceof Set,map:t=>t instanceof Map,equ(t,e){if(typeof t!=typeof e)return!1;if(rt.str(t)||rt.num(t))return t===e;if(rt.obj(t)&&rt.obj(e)&&Object.keys(t).length+Object.keys(e).length===0)return!0;let n;for(n in t)if(!(n in e))return!1;for(n in e)if(t[n]!==e[n])return!1;return rt.und(n)?t===e:!0}};function BW(t,e){return n=>(rt.arr(n)?n:Object.keys(n)).reduce((i,r)=>{const o=r;return i[o]=t(o),i},t)}function qW(){const t=B.useState(!1),e=t[1];return B.useCallback(()=>e(i=>!i),[])}function ka(t,e){return rt.und(t)||rt.nul(t)?e:t}function rp(t){return rt.und(t)?[]:rt.arr(t)?t:[t]}function lu(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return rt.fun(t)?t(...n):t}function zW(t){return t.to,t.from,t.config,t.onStart,t.onRest,t.onFrame,t.children,t.reset,t.reverse,t.force,t.immediate,t.delay,t.attach,t.destroyed,t.interpolateTo,t.ref,t.lazy,_u(t,["to","from","config","onStart","onRest","onFrame","children","reset","reverse","force","immediate","delay","attach","destroyed","interpolateTo","ref","lazy"])}function i0(t){const e=zW(t);if(rt.und(e))return on({to:e},t);const n=Object.keys(t).reduce((i,r)=>rt.und(e[r])?on({},i,{[r]:t[r]}):i,{});return on({to:e},n)}function HW(t,e){return e&&(rt.fun(e)?e(t):rt.obj(e)&&(e.current=t)),t}class Vr{constructor(){this.payload=void 0,this.children=[]}getAnimatedValue(){return this.getValue()}getPayload(){return this.payload||this}attach(){}detach(){}getChildren(){return this.children}addChild(e){this.children.length===0&&this.attach(),this.children.push(e)}removeChild(e){const n=this.children.indexOf(e);this.children.splice(n,1),this.children.length===0&&this.detach()}}class E_ extends Vr{constructor(){super(...arguments),this.payload=[],this.attach=()=>this.payload.forEach(e=>e instanceof Vr&&e.addChild(this)),this.detach=()=>this.payload.forEach(e=>e instanceof Vr&&e.removeChild(this))}}class Gk extends Vr{constructor(){super(...arguments),this.payload={},this.attach=()=>Object.values(this.payload).forEach(e=>e instanceof Vr&&e.addChild(this)),this.detach=()=>Object.values(this.payload).forEach(e=>e instanceof Vr&&e.removeChild(this))}getValue(e){e===void 0&&(e=!1);const n={};for(const i in this.payload){const r=this.payload[i];e&&!(r instanceof Vr)||(n[i]=r instanceof Vr?r[e?"getAnimatedValue":"getValue"]():r)}return n}getAnimatedValue(){return this.getValue(!0)}}let IE;function GW(t,e){IE={fn:t,transform:e}}let jk;function jW(t){jk=t}let $k=t=>typeof window<"u"?window.requestAnimationFrame(t):-1,bm;function $W(t){bm=t}let Kk=()=>Date.now(),KW=t=>t.current,Yk;function YW(t){Yk=t}class JW extends Gk{constructor(e,n){super(),this.update=void 0,this.payload=e.style?on({},e,{style:Yk(e.style)}):e,this.update=n,this.attach()}}const WW=t=>rt.fun(t)&&!(t.prototype instanceof Pn.Component),QW=t=>B.forwardRef((n,i)=>{const r=qW(),o=B.useRef(!0),l=B.useRef(null),c=B.useRef(null),d=B.useCallback(T=>{const b=l.current,C=()=>{let N=!1;c.current&&(N=IE.fn(c.current,l.current.getAnimatedValue())),(!c.current||N===!1)&&r()};l.current=new JW(T,C),b&&b.detach()},[]);B.useEffect(()=>()=>{o.current=!1,l.current&&l.current.detach()},[]),B.useImperativeHandle(i,()=>KW(c)),d(n);const f=l.current.getValue();f.scrollTop,f.scrollLeft;const p=_u(f,["scrollTop","scrollLeft"]),v=WW(t)?void 0:T=>c.current=HW(T,i);return Pn.createElement(t,on({},p,{ref:v}))});let Cd=!1;const Ka=new Set,Jk=()=>{if(!Cd)return!1;let t=Kk();for(let e of Ka){let n=!1;for(let i=0;i<e.configs.length;i++){let r=e.configs[i],o,l;for(let c=0;c<r.animatedValues.length;c++){let d=r.animatedValues[c];if(d.done)continue;let f=r.fromValues[c],p=r.toValues[c],v=d.lastPosition,T=p instanceof Vr,b=Array.isArray(r.initialVelocity)?r.initialVelocity[c]:r.initialVelocity;if(T&&(p=p.getValue()),r.immediate){d.setValue(p),d.done=!0;continue}if(typeof f=="string"||typeof p=="string"){d.setValue(p),d.done=!0;continue}if(r.duration!==void 0)v=f+r.easing((t-d.startTime)/r.duration)*(p-f),o=t>=d.startTime+r.duration;else if(r.decay)v=f+b/(1-.998)*(1-Math.exp(-.0020000000000000018*(t-d.startTime))),o=Math.abs(d.lastPosition-v)<.1,o&&(p=v);else{l=d.lastTime!==void 0?d.lastTime:t,b=d.lastVelocity!==void 0?d.lastVelocity:r.initialVelocity,t>l+64&&(l=t);let C=Math.floor(t-l);for(let k=0;k<C;++k){let F=-r.tension*(v-p),G=-r.friction*b,K=(F+G)/r.mass;b=b+K*1/1e3,v=v+b*1/1e3}let N=r.clamp&&r.tension!==0?f<p?v>p:v<p:!1,D=Math.abs(b)<=r.precision,O=r.tension!==0?Math.abs(p-v)<=r.precision:!0;o=N||D&&O,d.lastVelocity=b,d.lastTime=t}T&&!r.toValues[c].done&&(o=!1),o?(d.value!==p&&(v=p),d.done=!0):n=!0,d.setValue(v),d.lastPosition=v}e.props.onFrame&&(e.values[r.name]=r.interpolation.getValue())}e.props.onFrame&&e.props.onFrame(e.values),n||(Ka.delete(e),e.stop(!0))}return Ka.size?$k(Jk):Cd=!1,Cd},XW=t=>{Ka.has(t)||Ka.add(t),Cd||(Cd=!0,$k(Jk))},ZW=t=>{Ka.has(t)&&Ka.delete(t)};function wm(t,e,n){if(typeof t=="function")return t;if(Array.isArray(t))return wm({range:t,output:e,extrapolate:n});if(bm&&typeof t.output[0]=="string")return bm(t);const i=t,r=i.output,o=i.range||[0,1],l=i.extrapolateLeft||i.extrapolate||"extend",c=i.extrapolateRight||i.extrapolate||"extend",d=i.easing||(f=>f);return f=>{const p=tQ(f,o);return eQ(f,o[p],o[p+1],r[p],r[p+1],d,l,c,i.map)}}function eQ(t,e,n,i,r,o,l,c,d){let f=d?d(t):t;if(f<e){if(l==="identity")return f;l==="clamp"&&(f=e)}if(f>n){if(c==="identity")return f;c==="clamp"&&(f=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?f=-f:n===1/0?f=f-e:f=(f-e)/(n-e),f=o(f),i===-1/0?f=-f:r===1/0?f=f+i:f=f*(r-i)+i,f)}function tQ(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}class Mu extends E_{constructor(e,n,i,r){super(),this.calc=void 0,this.payload=e instanceof E_&&!(e instanceof Mu)?e.getPayload():Array.isArray(e)?e:[e],this.calc=wm(n,i,r)}getValue(){return this.calc(...this.payload.map(e=>e.getValue()))}updateConfig(e,n,i){this.calc=wm(e,n,i)}interpolate(e,n,i){return new Mu(this,e,n,i)}}const Jl=(t,e,n)=>t&&new Mu(t,e,n),nQ={default:{tension:170,friction:26}};function Wk(t,e){"update"in t?e.add(t):t.getChildren().forEach(n=>Wk(n,e))}class S_ extends Vr{constructor(e){var n;super(),n=this,this.animatedStyles=new Set,this.value=void 0,this.startPosition=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.startTime=void 0,this.lastTime=void 0,this.done=!1,this.setValue=function(i,r){r===void 0&&(r=!0),n.value=i,r&&n.flush()},this.value=e,this.startPosition=e,this.lastPosition=e}flush(){this.animatedStyles.size===0&&Wk(this,this.animatedStyles),this.animatedStyles.forEach(e=>e.update())}clearStyles(){this.animatedStyles.clear()}getValue(){return this.value}interpolate(e,n,i){return new Mu(this,e,n,i)}}class iQ extends E_{constructor(e){super(),this.payload=e.map(n=>new S_(n))}setValue(e,n){n===void 0&&(n=!0),Array.isArray(e)?e.length===this.payload.length&&e.forEach((i,r)=>this.payload[r].setValue(i,n)):this.payload.forEach(i=>i.setValue(e,n))}getValue(){return this.payload.map(e=>e.getValue())}interpolate(e,n){return new Mu(this,e,n)}}let rQ=0,sQ=class{constructor(){this.id=void 0,this.idle=!0,this.hasChanged=!1,this.guid=0,this.local=0,this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.listeners=[],this.queue=[],this.localQueue=void 0,this.getValues=()=>this.interpolations,this.id=rQ++}update(e){if(!e)return this;const n=i0(e),i=n.delay,r=i===void 0?0:i,o=n.to,l=_u(n,["delay","to"]);if(rt.arr(o)||rt.fun(o))this.queue.push(on({},l,{delay:r,to:o}));else if(o){let c={};Object.entries(o).forEach(d=>{let f=d[0],p=d[1];const v=on({to:{[f]:p},delay:lu(r,f)},l),T=c[v.delay]&&c[v.delay].to;c[v.delay]=on({},c[v.delay],v,{to:on({},T,v.to)})}),this.queue=Object.values(c)}return this.queue=this.queue.sort((c,d)=>c.delay-d.delay),this.diff(l),this}start(e){if(this.queue.length){this.idle=!1,this.localQueue&&this.localQueue.forEach(r=>{let o=r.from,l=o===void 0?{}:o,c=r.to,d=c===void 0?{}:c;rt.obj(l)&&(this.merged=on({},l,this.merged)),rt.obj(d)&&(this.merged=on({},this.merged,d))});const n=this.local=++this.guid,i=this.localQueue=this.queue;this.queue=[],i.forEach((r,o)=>{let l=r.delay,c=_u(r,["delay"]);const d=p=>{o===i.length-1&&n===this.guid&&p&&(this.idle=!0,this.props.onRest&&this.props.onRest(this.merged)),e&&e()};let f=rt.arr(c.to)||rt.fun(c.to);l?setTimeout(()=>{n===this.guid&&(f?this.runAsync(c,d):this.diff(c).start(d))},l):f?this.runAsync(c,d):this.diff(c).start(d)})}else rt.fun(e)&&this.listeners.push(e),this.props.onStart&&this.props.onStart(),XW(this);return this}stop(e){return this.listeners.forEach(n=>n(e)),this.listeners=[],this}pause(e){return this.stop(!0),e&&ZW(this),this}runAsync(e,n){var i=this;e.delay;let r=_u(e,["delay"]);const o=this.local;let l=Promise.resolve(void 0);if(rt.arr(r.to))for(let c=0;c<r.to.length;c++){const d=c,f=on({},r,i0(r.to[d]));rt.arr(f.config)&&(f.config=f.config[d]),l=l.then(()=>{if(o===this.guid)return new Promise(p=>this.diff(f).start(p))})}else if(rt.fun(r.to)){let c=0,d;l=l.then(()=>r.to(f=>{const p=on({},r,i0(f));if(rt.arr(p.config)&&(p.config=p.config[c]),c++,o===this.guid)return d=new Promise(v=>this.diff(p).start(v))},function(f){return f===void 0&&(f=!0),i.stop(f)}).then(()=>d))}l.then(n)}diff(e){this.props=on({},this.props,e);let n=this.props,i=n.from,r=i===void 0?{}:i,o=n.to,l=o===void 0?{}:o,c=n.config,d=c===void 0?{}:c,f=n.reverse,p=n.attach,v=n.reset,T=n.immediate;if(f){var b=[l,r];r=b[0],l=b[1]}this.merged=on({},r,this.merged,l),this.hasChanged=!1;let C=p&&p(this);if(this.animations=Object.entries(this.merged).reduce((N,D)=>{let O=D[0],k=D[1],F=N[O]||{};const G=rt.num(k),K=rt.str(k)&&!k.startsWith("#")&&!/\d/.test(k)&&!jk[k],H=rt.arr(k),R=!G&&!H&&!K;let I=rt.und(r[O])?k:r[O],P=G||H||K?k:1,U=lu(d,O);C&&(P=C.animations[O].parent);let q=F.parent,V=F.interpolation,z=rp(C?P.getPayload():P),Ee,Ne=k;R&&(Ne=bm({range:[0,1],output:[k,k]})(1));let W=V&&V.getValue();const he=!rt.und(q)&&F.animatedValues.some(ee=>!ee.done),xe=!rt.equ(Ne,W),Ae=!rt.equ(Ne,F.previous),j=!rt.equ(U,F.config);if(v||Ae&&xe||j){if(G||K)q=V=F.parent||new S_(I);else if(H)q=V=F.parent||new iQ(I);else if(R){let ee=F.interpolation&&F.interpolation.calc(F.parent.value);ee=ee!==void 0&&!v?ee:I,F.parent?(q=F.parent,q.setValue(0,!1)):q=new S_(0);const ne={output:[ee,k]};F.interpolation?(V=F.interpolation,F.interpolation.updateConfig(ne)):V=q.interpolate(ne)}return z=rp(C?P.getPayload():P),Ee=rp(q.getPayload()),v&&!R&&q.setValue(I,!1),this.hasChanged=!0,Ee.forEach(ee=>{ee.startPosition=ee.value,ee.lastPosition=ee.value,ee.lastVelocity=he?ee.lastVelocity:void 0,ee.lastTime=he?ee.lastTime:void 0,ee.startTime=Kk(),ee.done=!1,ee.animatedStyles.clear()}),lu(T,O)&&q.setValue(R?P:k,!1),on({},N,{[O]:on({},F,{name:O,parent:q,interpolation:V,animatedValues:Ee,toValues:z,previous:Ne,config:U,fromValues:rp(q.getValue()),immediate:lu(T,O),initialVelocity:ka(U.velocity,0),clamp:ka(U.clamp,!1),precision:ka(U.precision,.01),tension:ka(U.tension,170),friction:ka(U.friction,26),mass:ka(U.mass,1),duration:U.duration,easing:ka(U.easing,ee=>ee),decay:U.decay})})}else return xe?N:(R&&(q.setValue(1,!1),V.updateConfig({output:[Ne,Ne]})),q.done=!0,this.hasChanged=!0,on({},N,{[O]:on({},N[O],{previous:Ne})}))},this.animations),this.hasChanged){this.configs=Object.values(this.animations),this.values={},this.interpolations={};for(let N in this.animations)this.interpolations[N]=this.animations[N].interpolation,this.values[N]=this.animations[N].interpolation.getValue()}return this}destroy(){this.stop(),this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.local=0}};const oQ=(t,e)=>{const n=B.useRef(!1),i=B.useRef(),r=rt.fun(e),o=B.useMemo(()=>{i.current&&(i.current.map(v=>v.destroy()),i.current=void 0);let p;return[new Array(t).fill().map((v,T)=>{const b=new sQ,C=r?lu(e,T,b):e[T];return T===0&&(p=C.ref),b.update(C),p||b.start(),b}),p]},[t]),l=o[0],c=o[1];i.current=l,B.useImperativeHandle(c,()=>({start:()=>Promise.all(i.current.map(p=>new Promise(v=>p.start(v)))),stop:p=>i.current.forEach(v=>v.stop(p)),get controllers(){return i.current}}));const d=B.useMemo(()=>p=>i.current.map((v,T)=>{v.update(r?lu(p,T,v):p[T]),c||v.start()}),[t]);B.useEffect(()=>{n.current?r||d(e):c||i.current.forEach(p=>p.start())}),B.useEffect(()=>(n.current=!0,()=>i.current.forEach(p=>p.destroy())),[]);const f=i.current.map(p=>p.getValues());return r?[f,d,p=>i.current.forEach(v=>v.pause(p))]:f},aQ=t=>{const e=rt.fun(t),n=oQ(1,e?t:[t]),i=n[0],r=n[1],o=n[2];return e?[i[0],r,o]:i};class lQ extends Gk{constructor(e){e===void 0&&(e={}),super(),e.transform&&!(e.transform instanceof Vr)&&(e=IE.transform(e)),this.payload=e}}const xm={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Ur="[-+]?\\d*\\.?\\d+",Am=Ur+"%";function Tg(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}const uQ=new RegExp("rgb"+Tg(Ur,Ur,Ur)),cQ=new RegExp("rgba"+Tg(Ur,Ur,Ur,Ur)),dQ=new RegExp("hsl"+Tg(Ur,Am,Am)),fQ=new RegExp("hsla"+Tg(Ur,Am,Am,Ur)),hQ=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,pQ=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,mQ=/^#([0-9a-fA-F]{6})$/,gQ=/^#([0-9a-fA-F]{8})$/;function yQ(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=mQ.exec(t))?parseInt(e[1]+"ff",16)>>>0:xm.hasOwnProperty(t)?xm[t]:(e=uQ.exec(t))?(Wl(e[1])<<24|Wl(e[2])<<16|Wl(e[3])<<8|255)>>>0:(e=cQ.exec(t))?(Wl(e[1])<<24|Wl(e[2])<<16|Wl(e[3])<<8|$R(e[4]))>>>0:(e=hQ.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=gQ.exec(t))?parseInt(e[1],16)>>>0:(e=pQ.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=dQ.exec(t))?(GR(jR(e[1]),sp(e[2]),sp(e[3]))|255)>>>0:(e=fQ.exec(t))?(GR(jR(e[1]),sp(e[2]),sp(e[3]))|$R(e[4]))>>>0:null}function r0(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function GR(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,o=r0(r,i,t+1/3),l=r0(r,i,t),c=r0(r,i,t-1/3);return Math.round(o*255)<<24|Math.round(l*255)<<16|Math.round(c*255)<<8}function Wl(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function jR(t){return(parseFloat(t)%360+360)%360/360}function $R(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function sp(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function KR(t){let e=yQ(t);if(e===null)return t;e=e||0;let n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,o=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${o})`}const op=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,vQ=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,_Q=new RegExp(`(${Object.keys(xm).join("|")})`,"g"),TQ=t=>{const e=t.output.map(r=>r.replace(vQ,KR)).map(r=>r.replace(_Q,KR)),n=e[0].match(op).map(()=>[]);e.forEach(r=>{r.match(op).forEach((o,l)=>n[l].push(+o))});const i=e[0].match(op).map((r,o)=>wm(on({},t,{output:n[o]})));return r=>{let o=0;return e[0].replace(op,()=>i[o++](r)).replace(/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,(l,c,d,f,p)=>`rgba(${Math.round(c)}, ${Math.round(d)}, ${Math.round(f)}, ${p})`)}};let Id={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};const EQ=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),SQ=["Webkit","Ms","Moz","O"];Id=Object.keys(Id).reduce((t,e)=>(SQ.forEach(n=>t[EQ(n,e)]=t[e]),t),Id);function bQ(t,e,n){return e==null||typeof e=="boolean"||e===""?"":!n&&typeof e=="number"&&e!==0&&!(Id.hasOwnProperty(t)&&Id[t])?e+"px":(""+e).trim()}const YR={};YW(t=>new lQ(t));$W(TQ);jW(xm);GW((t,e)=>{if(t.nodeType&&t.setAttribute!==void 0){const r=e.style,o=e.children,l=e.scrollTop,c=e.scrollLeft,d=_u(e,["style","children","scrollTop","scrollLeft"]),f=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter";l!==void 0&&(t.scrollTop=l),c!==void 0&&(t.scrollLeft=c),o!==void 0&&(t.textContent=o);for(let p in r)if(r.hasOwnProperty(p)){var n=p.indexOf("--")===0,i=bQ(p,r[p],n);p==="float"&&(p="cssFloat"),n?t.style.setProperty(p,i):t.style[p]=i}for(let p in d){const v=f?p:YR[p]||(YR[p]=p.replace(/([A-Z])/g,T=>"-"+T.toLowerCase()));typeof t.getAttribute(v)<"u"&&t.setAttribute(v,d[p])}return}else return!1},t=>t);const wQ=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],xQ=BW(QW),AQ=xQ(wQ);function JR(t,e){return t.map(function(n,i){return n+e[i]})}function Qk(t,e){return t.map(function(n,i){return n-e[i]})}function b_(t){return Math.hypot.apply(Math,t)}function CQ(t,e,n){var i=b_(e),r=i===0?0:1/i,o=n===0?0:1/n,l=o*i,c=e.map(function(p){return o*p}),d=e.map(function(p){return r*p}),f=b_(t);return{velocities:c,velocity:l,distance:f,direction:d}}function w_(t){return Math.sign?Math.sign(t):+(t>0)-+(t<0)||+t}function IQ(t,e,n){return Math.max(e,Math.min(t,n))}function RQ(t,e){return Math.pow(t,e*5)}function WR(t,e,n){return e===0||Math.abs(e)===1/0?RQ(t,n):t*e*n/(e+n*t)}function Rd(t,e,n,i){return i===void 0&&(i=.15),i===0?IQ(t,e,n):t<e?-WR(e-t,n-e,i)+e:t>n?+WR(t-n,n-e,i)+n:t}function NQ(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function PQ(t,e,n){return e&&NQ(t.prototype,e),t}function bi(){return bi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},bi.apply(this,arguments)}function Xk(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function DQ(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function ap(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function MQ(t,e){if(t){if(typeof t=="string")return QR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QR(t,e)}}function QR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Eg(t,e){var n;if(typeof Symbol>"u"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=MQ(t))||e){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return n=t[Symbol.iterator](),n.next.bind(n)}function Zk(){}function e2(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?Zk:e.length===1?e[0]:function(){for(var i,r=Eg(e),o;!(o=r()).done;){var l=o.value;i=l.apply(this,arguments)||i}return i}}function Oo(t,e){if(t===void 0){if(e===void 0)throw new Error("Must define fallback value if undefined is expected");t=e}return Array.isArray(t)?t:[t,t]}function lp(t){if(typeof t=="function"){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return t.apply(void 0,n)}else return t}function RE(t,e){t===void 0&&(t={});for(var n={},i=0,r=Object.entries(e);i<r.length;i++){var o=r[i],l=o[0],c=o[1];switch(typeof c){case"function":n[l]=c.call(n,t[l],l,t);break;case"object":n[l]=RE(t[l],c);break;case"boolean":c&&(n[l]=t[l]);break}}return n}var kQ=180,VQ=.15,LQ=.5,OQ=60,UQ={threshold:function(e){return e===void 0&&(e=0),Oo(e)},rubberband:function(e){switch(e===void 0&&(e=0),e){case!0:return Oo(VQ);case!1:return Oo(0);default:return Oo(e)}},enabled:function(e){return e===void 0&&(e=!0),e},triggerAllEvents:function(e){return e===void 0&&(e=!1),e},initial:function(e){return e===void 0&&(e=0),typeof e=="function"?e:Oo(e)}},t2=bi({},UQ,{axis:!0,lockDirection:function(e){return e===void 0&&(e=!1),e},bounds:function(e){if(e===void 0&&(e={}),typeof e=="function")return function(v){return t2.bounds(e(v))};var n=e,i=n.left,r=i===void 0?-1/0:i,o=n.right,l=o===void 0?1/0:o,c=n.top,d=c===void 0?-1/0:c,f=n.bottom,p=f===void 0?1/0:f;return[[r,l],[d,p]]}}),FQ=typeof window<"u"&&window.document&&window.document.createElement,BQ={enabled:function(e){return e===void 0&&(e=!0),e},domTarget:!0,window:(function(t){function e(n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e})(function(t){return t===void 0&&(t=FQ?window:void 0),t}),eventOptions:function(e){var n=e===void 0?{}:e,i=n.passive,r=i===void 0?!0:i,o=n.capture,l=o===void 0?!1:o;return{passive:r,capture:l}}},qQ=bi({},t2,{threshold:function(e,n,i){var r=i.filterTaps,o=r===void 0?!1:r,l=i.lockDirection,c=l===void 0?!1:l,d=i.axis,f=d===void 0?void 0:d,p=Oo(e,o?3:c||f?1:0);return this.filterTaps=o||p[0]+p[1]>0,p},swipeVelocity:function(e){return e===void 0&&(e=LQ),Oo(e)},swipeDistance:function(e){return e===void 0&&(e=OQ),Oo(e)},delay:function(e){switch(e===void 0&&(e=0),e){case!0:return kQ;case!1:return 0;default:return e}}});function zQ(t){return t===void 0&&(t={}),RE(t,BQ)}function HQ(t){return t===void 0&&(t={}),RE(t,qQ)}function GQ(t){var e=t.domTarget,n=t.eventOptions,i=t.window,r=t.enabled,o=DQ(t,["domTarget","eventOptions","window","enabled"]),l=zQ({domTarget:e,eventOptions:n,window:i,enabled:r});return l.drag=HQ(o),l}function Jc(t){return bi({_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_lastEventType:void 0,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:Zk,canceled:!1,memo:void 0,args:void 0},t)}function n2(){var t={hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1},e=Jc({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,_isTap:!0,_delayedEvent:!1,_pointerId:void 0,tap:!1,swipe:[0,0]}),n=Jc({da:[0,0],vdva:[0,0],origin:void 0,turns:0}),i=Jc({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),r=Jc({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),o=Jc({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0});return{shared:t,drag:e,pinch:n,wheel:i,move:r,scroll:o}}var Ba=new Map,jQ=(function(){function t(n,i){var r=this;i===void 0&&(i=[]),this.controller=n,this.args=i,this.debounced=!0,this.setTimeout=function(o,l){var c;l===void 0&&(l=140),clearTimeout(r.controller.timeouts[r.stateKey]);for(var d=arguments.length,f=new Array(d>2?d-2:0),p=2;p<d;p++)f[p-2]=arguments[p];r.controller.timeouts[r.stateKey]=(c=window).setTimeout.apply(c,[o,l].concat(f))},this.clearTimeout=function(){clearTimeout(r.controller.timeouts[r.stateKey])},this.fireGestureHandler=function(o){if(o===void 0&&(o=!1),r.state._blocked)return r.debounced||(r.state._active=!1,r.clean()),null;if(!o&&!r.state.intentional&&!r.config.triggerAllEvents)return null;if(r.state.intentional){var l=r.state.active,c=r.state._active;r.state.active=c,r.state.first=c&&!l,r.state.last=l&&!c,r.controller.state.shared[r.ingKey]=c}var d=bi({},r.controller.state.shared,r.state,r.mapStateValues(r.state)),f=r.handler(d);return r.state.memo=f!==void 0?f:r.state.memo,r.state._active||r.clean(),d}}var e=t.prototype;return e.updateSharedState=function(i){Object.assign(this.controller.state.shared,i)},e.updateGestureState=function(i){Object.assign(this.state,i)},e.checkIntentionality=function(i,r){return{_intentional:i,_blocked:!1}},e.getMovement=function(i){var r=this.config,o=r.initial,l=r.bounds,c=r.rubberband,d=r.threshold,f=this.state,p=f._bounds,v=f._initial,T=f._active,b=f._intentional,C=f.lastOffset,N=f.movement,D=this.getInternalMovement(i,this.state),O=b[0]===!1?XR(D[0],d[0]):b[0],k=b[1]===!1?XR(D[1],d[1]):b[1],F=this.checkIntentionality([O,k],D);if(F._blocked)return bi({},F,{_movement:D,delta:[0,0]});var G=F._intentional,K=D,H,R;if(G[0]!==!1&&b[0]===!1&&(R=lp(o,this.state),H=lp(l,this.state),v[0]=R[0],p[0]=H[0]),G[1]!==!1&&b[1]===!1){var I,P;R=(I=R)!=null?I:lp(o,this.state),H=(P=H)!=null?P:lp(l,this.state),v[1]=R[1],p[1]=H[1]}var U=[G[0]!==!1?D[0]-G[0]:v[0],G[1]!==!1?D[1]-G[1]:v[1]],q=JR(U,C),V=T?c:[0,0];return U=ZR(p,JR(U,v),V),bi({},F,{intentional:G[0]!==!1||G[1]!==!1,_initial:v,_movement:K,movement:U,values:i,offset:ZR(p,q,V),delta:Qk(U,N)})},e.clean=function(){this.clearTimeout()},PQ(t,[{key:"config",get:function(){return this.controller.config[this.stateKey]}},{key:"enabled",get:function(){return this.controller.config.enabled&&this.config.enabled}},{key:"state",get:function(){return this.controller.state[this.stateKey]}},{key:"handler",get:function(){return this.controller.handlers[this.stateKey]}}]),t})();function XR(t,e){return Math.abs(t)>=e?w_(t)*e:!1}function ZR(t,e,n){var i=e[0],r=e[1],o=n[0],l=n[1],c=t[0],d=c[0],f=c[1],p=t[1],v=p[0],T=p[1];return[Rd(i,d,f,o),Rd(r,v,T,l)]}function s0(t,e,n){var i=t.state,r=t.args,o=e.timeStamp,l=e.type,c=i.values,d=n?0:o-i.startTime;return{_lastEventType:l,event:e,timeStamp:o,elapsedTime:d,args:r,previous:c}}function $Q(t,e,n){var i=t.state.offset,r=n.timeStamp;return bi({},n2()[t.stateKey],{_active:!0,values:e,initial:e,offset:i,lastOffset:i,startTime:r})}function KQ(t,e){return function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return t.call.apply(t,[this,bi({},e,{event:n})].concat(r))}}var YQ=function(e){var n=this;this.classes=e,this.bind=function(){for(var i={},r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];for(var c=Eg(n.classes),d;!(d=c()).done;){var f=d.value;new f(n,o).addBindings(i)}for(var p=0,v=Object.entries(n.nativeRefs);p<v.length;p++){var T=v[p],b=T[0],C=T[1];x_(i,b,KQ(C,bi({},n.state.shared,{args:o})))}return n.config.domTarget?XQ(n,i):ZQ(n,i)},this.effect=function(){return n.config.domTarget&&n.bind(),n.clean},this.clean=function(){var i=r2(n.config),r=n.config.eventOptions;i&&vf(i,i2(n.domListeners),r),Object.values(n.timeouts).forEach(clearTimeout),JQ(n)},this.state=n2(),this.timeouts={},this.domListeners=[],this.windowListeners={}};function JQ(t){var e=t.config,n=e.window,i=e.eventOptions,r=t.windowListeners;if(n){for(var o in r){var l=r[o];vf(n,l,i)}t.windowListeners={}}}function WQ(t,e){var n=t.config,i=t.windowListeners;n.window&&(vf(n.window,i[e],n.eventOptions),delete i[e])}function QQ(t,e,n){var i=t.config,r=t.windowListeners;n===void 0&&(n=[]),i.window&&(vf(i.window,r[e],i.eventOptions),s2(i.window,r[e]=n,i.eventOptions))}function XQ(t,e){var n=t.config,i=t.domListeners,r=r2(n);if(!r)throw new Error("domTarget must be defined");var o=n.eventOptions;vf(r,i2(i),o);for(var l=0,c=Object.entries(e);l<c.length;l++){var d=c[l],f=d[0],p=d[1],v=f.slice(2).toLowerCase();i.push([v,e2.apply(void 0,p)])}s2(r,i,o)}function ZQ(t,e){for(var n=t.config,i={},r=n.eventOptions.capture?"Capture":"",o=0,l=Object.entries(e);o<l.length;o++){var c=l[o],d=c[0],f=c[1],p=Array.isArray(f)?f:[f],v=d+r;i[v]=e2.apply(void 0,p)}return i}function i2(t){return t===void 0&&(t=[]),t.splice(0,t.length)}function r2(t){var e=t.domTarget;return e&&"current"in e?e.current:e}function x_(t,e,n){t[e]||(t[e]=[]),t[e].push(n)}function s2(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var i=Eg(e),r;!(r=i()).done;){var o=r.value,l=o[0],c=o[1];t.addEventListener(l,c,n)}}function vf(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var i=Eg(e),r;!(r=i()).done;){var o=r.value,l=o[0],c=o[1];t.removeEventListener(l,c,n)}}function eX(t,e,n){n===void 0&&(n={});var i=nX(t),r=Pn.useMemo(function(){return new YQ(i)},[]);return r.config=e,r.handlers=t,r.nativeRefs=n,Pn.useEffect(r.effect,[]),r.config.domTarget?tX:r.bind}function tX(){}function nX(t){var e=new Set;return t.drag&&e.add(Ba.get("drag")),t.wheel&&e.add(Ba.get("wheel")),t.scroll&&e.add(Ba.get("scroll")),t.move&&e.add(Ba.get("move")),t.pinch&&e.add(Ba.get("pinch")),t.hover&&e.add(Ba.get("hover")),e}var iX=(function(t){Xk(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.getInternalMovement=function(r,o){return Qk(r,o.initial)},n.checkIntentionality=function(r,o){if(r[0]===!1&&r[1]===!1)return{_intentional:r,axis:this.state.axis};var l=o.map(Math.abs),c=l[0],d=l[1],f=this.state.axis||(c>d?"x":c<d?"y":void 0);return!this.config.axis&&!this.config.lockDirection?{_intentional:r,_blocked:!1,axis:f}:f?this.config.axis&&f!==this.config.axis?{_intentional:r,_blocked:!0,axis:f}:(r[f==="x"?1:0]=!1,{_intentional:r,_blocked:!1,axis:f}):{_intentional:[!1,!1],_blocked:!1,axis:f}},n.getKinematics=function(r,o){var l=this.getMovement(r);if(!l._blocked){var c=o.timeStamp-this.state.timeStamp;Object.assign(l,CQ(l.movement,l.delta,c))}return l},n.mapStateValues=function(r){return{xy:r.values,vxvy:r.velocities}},e})(jQ);function o2(t){if("touches"in t){var e=t.targetTouches,n=t.changedTouches;return e.length>0?e:n}return null}function e1(t){var e="buttons"in t?t.buttons:0,n=o2(t),i=n&&n.length||0,r=i>0||e>0,o=t.shiftKey,l=t.altKey,c=t.metaKey,d=t.ctrlKey;return{touches:i,down:r,buttons:e,shiftKey:o,altKey:l,metaKey:c,ctrlKey:d}}function t1(t){var e=o2(t),n=e?e[0]:t,i=n.clientX,r=n.clientY;return[i,r]}var rX=3,sX=220,oX=(function(t){Xk(e,t);function e(){var i;return i=t.apply(this,arguments)||this,i.ingKey="dragging",i.stateKey="drag",i.onDragStart=function(r){!i.enabled||i.state._active||(QQ(i.controller,i.stateKey,[["pointermove",i.onDragChange],["pointerup",i.onDragEnd],["pointercancel",i.onDragEnd]]),i.updateGestureState({_pointerId:r.pointerId}),i.config.delay>0?(i.state._delayedEvent=!0,"persist"in r&&typeof r.persist=="function"&&r.persist(),i.setTimeout(i.startDrag.bind(ap(i)),i.config.delay,r)):i.startDrag(r))},i.onDragChange=function(r){if(!i.state.canceled&&r.pointerId===i.state._pointerId){if(!i.state._active){i.state._delayedEvent&&(i.clearTimeout(),i.startDrag(r));return}var o=e1(r);if(!o.down){i.onDragEnd(r);return}i.updateSharedState(o);var l=t1(r),c=i.getKinematics(l,r),d=s0(ap(i),r),f=i.state._isTap,p=b_(c._movement);f&&p>=rX&&(f=!1),i.updateGestureState(bi({},d,c,{_isTap:f})),i.fireGestureHandler()}},i.onDragEnd=function(r){if(r.pointerId===i.state._pointerId){i.state._active=!1,i.updateSharedState({down:!1,buttons:0,touches:0});var o=i.state._isTap,l=i.state.velocities,c=l[0],d=l[1],f=i.state.movement,p=f[0],v=f[1],T=i.state._intentional,b=T[0],C=T[1],N=i.config.swipeVelocity,D=N[0],O=N[1],k=i.config.swipeDistance,F=k[0],G=k[1],K=bi({},s0(ap(i),r),i.getMovement(i.state.values)),H=[0,0];K.elapsedTime<sX&&(b!==!1&&Math.abs(c)>D&&Math.abs(p)>F&&(H[0]=w_(c)),C!==!1&&Math.abs(d)>O&&Math.abs(v)>G&&(H[1]=w_(d))),i.updateGestureState(bi({},K,{tap:o,swipe:H})),i.fireGestureHandler(o===!0)}},i.clean=function(){t.prototype.clean.call(ap(i)),i.state._delayedEvent=!1,WQ(i.controller,i.stateKey)},i.onCancel=function(){i.state.canceled||(i.updateGestureState({canceled:!0}),i.state._active=!1,i.updateSharedState({down:!1,buttons:0,touches:0}),requestAnimationFrame(function(){return i.fireGestureHandler()}))},i.onClick=function(r){i.state._isTap||r.stopPropagation()},i}var n=e.prototype;return n.startDrag=function(r){var o=t1(r);this.updateSharedState(e1(r)),this.updateGestureState(bi({},$Q(this,o,r),s0(this,r,!0),{_pointerId:r.pointerId,cancel:this.onCancel})),this.updateGestureState(this.getMovement(o)),this.fireGestureHandler()},n.addBindings=function(r){if(x_(r,"onPointerDown",this.onDragStart),this.config.filterTaps){var o=this.controller.config.eventOptions.capture?"onClick":"onClickCapture";x_(r,o,this.onClick)}},e})(iX);function aX(t,e){var n,i=[],r,o=!1;function l(){for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];return o&&n===this&&e(d,i)||(r=t.apply(this,d),o=!0,n=this,i=d),r}return l}function Lp(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,i,r;if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!Lp(t[i],e[i]))return!1;return!0}var o;if(typeof Map=="function"&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(o=t.entries();!(i=o.next()).done;)if(!e.has(i.value[0]))return!1;for(o=t.entries();!(i=o.next()).done;)if(!Lp(i.value[1],e.get(i.value[0])))return!1;return!0}if(typeof Set=="function"&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(o=t.entries();!(i=o.next()).done;)if(!e.has(i.value[0]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,r[i]))return!1;if(typeof Element<"u"&&t instanceof Element)return!1;for(i=n;i--!==0;)if(!(r[i]==="_owner"&&t.$$typeof)&&!Lp(t[r[i]],e[r[i]]))return!1;return!0}return t!==t&&e!==e}function lX(t,e){try{return Lp(t,e)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}function uX(t,e){e===void 0&&(e={}),Ba.set("drag",oX);var n=B.useRef();return n.current||(n.current=aX(GQ,lX)),eX({drag:t},n.current(e))}/*!
* tabbable 5.3.3
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var a2=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],Cm=a2.join(","),l2=typeof Element>"u",il=l2?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,A_=!l2&&Element.prototype.getRootNode?function(t){return t.getRootNode()}:function(t){return t.ownerDocument},u2=function(e,n,i){var r=Array.prototype.slice.apply(e.querySelectorAll(Cm));return n&&il.call(e,Cm)&&r.unshift(e),r=r.filter(i),r},c2=function t(e,n,i){for(var r=[],o=Array.from(e);o.length;){var l=o.shift();if(l.tagName==="SLOT"){var c=l.assignedElements(),d=c.length?c:l.children,f=t(d,!0,i);i.flatten?r.push.apply(r,f):r.push({scope:l,candidates:f})}else{var p=il.call(l,Cm);p&&i.filter(l)&&(n||!e.includes(l))&&r.push(l);var v=l.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(l),T=!i.shadowRootFilter||i.shadowRootFilter(l);if(v&&T){var b=t(v===!0?l.children:v.children,!0,i);i.flatten?r.push.apply(r,b):r.push({scope:l,candidates:b})}else o.unshift.apply(o,l.children)}}return r},d2=function(e,n){return e.tabIndex<0&&(n||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||e.isContentEditable)&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},cX=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},f2=function(e){return e.tagName==="INPUT"},dX=function(e){return f2(e)&&e.type==="hidden"},fX=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(i){return i.tagName==="SUMMARY"});return n},hX=function(e,n){for(var i=0;i<e.length;i++)if(e[i].checked&&e[i].form===n)return e[i]},pX=function(e){if(!e.name)return!0;var n=e.form||A_(e),i=function(c){return n.querySelectorAll('input[type="radio"][name="'+c+'"]')},r;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")r=i(window.CSS.escape(e.name));else try{r=i(e.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var o=hX(r,e.form);return!o||o===e},mX=function(e){return f2(e)&&e.type==="radio"},gX=function(e){return mX(e)&&!pX(e)},n1=function(e){var n=e.getBoundingClientRect(),i=n.width,r=n.height;return i===0&&r===0},yX=function(e,n){var i=n.displayCheck,r=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var o=il.call(e,"details>summary:first-of-type"),l=o?e.parentElement:e;if(il.call(l,"details:not([open]) *"))return!0;var c=A_(e).host,d=(c==null?void 0:c.ownerDocument.contains(c))||e.ownerDocument.contains(e);if(!i||i==="full"){if(typeof r=="function"){for(var f=e;e;){var p=e.parentElement,v=A_(e);if(p&&!p.shadowRoot&&r(p)===!0)return n1(e);e.assignedSlot?e=e.assignedSlot:!p&&v!==e.ownerDocument?e=v.host:e=p}e=f}if(d)return!e.getClientRects().length}else if(i==="non-zero-area")return n1(e);return!1},vX=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var i=0;i<n.children.length;i++){var r=n.children.item(i);if(r.tagName==="LEGEND")return il.call(n,"fieldset[disabled] *")?!0:!r.contains(e)}return!0}n=n.parentElement}return!1},Im=function(e,n){return!(n.disabled||dX(n)||yX(n,e)||fX(n)||vX(n))},C_=function(e,n){return!(gX(n)||d2(n)<0||!Im(e,n))},_X=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},TX=function t(e){var n=[],i=[];return e.forEach(function(r,o){var l=!!r.scope,c=l?r.scope:r,d=d2(c,l),f=l?t(r.candidates):c;d===0?l?n.push.apply(n,f):n.push(c):i.push({documentOrder:o,tabIndex:d,item:r,isScope:l,content:f})}),i.sort(cX).reduce(function(r,o){return o.isScope?r.push.apply(r,o.content):r.push(o.content),r},[]).concat(n)},EX=function(e,n){n=n||{};var i;return n.getShadowRoot?i=c2([e],n.includeContainer,{filter:C_.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:_X}):i=u2(e,n.includeContainer,C_.bind(null,n)),TX(i)},SX=function(e,n){n=n||{};var i;return n.getShadowRoot?i=c2([e],n.includeContainer,{filter:Im.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):i=u2(e,n.includeContainer,Im.bind(null,n)),i},up=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return il.call(e,Cm)===!1?!1:C_(n,e)},bX=a2.concat("iframe").join(","),o0=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return il.call(e,bX)===!1?!1:Im(n,e)};/*!
* focus-trap 6.9.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function i1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function r1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i1(Object(n),!0).forEach(function(i){wX(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i1(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function wX(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s1=(function(){var t=[];return{activateTrap:function(n){if(t.length>0){var i=t[t.length-1];i!==n&&i.pause()}var r=t.indexOf(n);r===-1||t.splice(r,1),t.push(n)},deactivateTrap:function(n){var i=t.indexOf(n);i!==-1&&t.splice(i,1),t.length>0&&t[t.length-1].unpause()}}})(),xX=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},AX=function(e){return e.key==="Escape"||e.key==="Esc"||e.keyCode===27},CX=function(e){return e.key==="Tab"||e.keyCode===9},o1=function(e){return setTimeout(e,0)},a1=function(e,n){var i=-1;return e.every(function(r,o){return n(r)?(i=o,!1):!0}),i},Wc=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return typeof e=="function"?e.apply(void 0,i):e},cp=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},IX=function(e,n){var i=(n==null?void 0:n.document)||document,r=r1({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},n),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},l,c=function(H,R,I){return H&&H[R]!==void 0?H[R]:r[I||R]},d=function(H){return o.containerGroups.findIndex(function(R){var I=R.container,P=R.tabbableNodes;return I.contains(H)||P.find(function(U){return U===H})})},f=function(H){var R=r[H];if(typeof R=="function"){for(var I=arguments.length,P=new Array(I>1?I-1:0),U=1;U<I;U++)P[U-1]=arguments[U];R=R.apply(void 0,P)}if(R===!0&&(R=void 0),!R){if(R===void 0||R===!1)return R;throw new Error("`".concat(H,"` was specified but was not a node, or did not return a node"))}var q=R;if(typeof R=="string"&&(q=i.querySelector(R),!q))throw new Error("`".concat(H,"` as selector refers to no known node"));return q},p=function(){var H=f("initialFocus");if(H===!1)return!1;if(H===void 0)if(d(i.activeElement)>=0)H=i.activeElement;else{var R=o.tabbableGroups[0],I=R&&R.firstTabbableNode;H=I||f("fallbackFocus")}if(!H)throw new Error("Your focus-trap needs to have at least one focusable element");return H},v=function(){if(o.containerGroups=o.containers.map(function(H){var R=EX(H,r.tabbableOptions),I=SX(H,r.tabbableOptions);return{container:H,tabbableNodes:R,focusableNodes:I,firstTabbableNode:R.length>0?R[0]:null,lastTabbableNode:R.length>0?R[R.length-1]:null,nextTabbableNode:function(U){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,V=I.findIndex(function(z){return z===U});if(!(V<0))return q?I.slice(V+1).find(function(z){return up(z,r.tabbableOptions)}):I.slice(0,V).reverse().find(function(z){return up(z,r.tabbableOptions)})}}}),o.tabbableGroups=o.containerGroups.filter(function(H){return H.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!f("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},T=function K(H){if(H!==!1&&H!==i.activeElement){if(!H||!H.focus){K(p());return}H.focus({preventScroll:!!r.preventScroll}),o.mostRecentlyFocusedNode=H,xX(H)&&H.select()}},b=function(H){var R=f("setReturnFocus",H);return R||(R===!1?!1:H)},C=function(H){var R=cp(H);if(!(d(R)>=0)){if(Wc(r.clickOutsideDeactivates,H)){l.deactivate({returnFocus:r.returnFocusOnDeactivate&&!o0(R,r.tabbableOptions)});return}Wc(r.allowOutsideClick,H)||H.preventDefault()}},N=function(H){var R=cp(H),I=d(R)>=0;I||R instanceof Document?I&&(o.mostRecentlyFocusedNode=R):(H.stopImmediatePropagation(),T(o.mostRecentlyFocusedNode||p()))},D=function(H){var R=cp(H);v();var I=null;if(o.tabbableGroups.length>0){var P=d(R),U=P>=0?o.containerGroups[P]:void 0;if(P<0)H.shiftKey?I=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:I=o.tabbableGroups[0].firstTabbableNode;else if(H.shiftKey){var q=a1(o.tabbableGroups,function(se){var he=se.firstTabbableNode;return R===he});if(q<0&&(U.container===R||o0(R,r.tabbableOptions)&&!up(R,r.tabbableOptions)&&!U.nextTabbableNode(R,!1))&&(q=P),q>=0){var V=q===0?o.tabbableGroups.length-1:q-1,z=o.tabbableGroups[V];I=z.lastTabbableNode}}else{var Ee=a1(o.tabbableGroups,function(se){var he=se.lastTabbableNode;return R===he});if(Ee<0&&(U.container===R||o0(R,r.tabbableOptions)&&!up(R,r.tabbableOptions)&&!U.nextTabbableNode(R))&&(Ee=P),Ee>=0){var Ne=Ee===o.tabbableGroups.length-1?0:Ee+1,W=o.tabbableGroups[Ne];I=W.firstTabbableNode}}}else I=f("fallbackFocus");I&&(H.preventDefault(),T(I))},O=function(H){if(AX(H)&&Wc(r.escapeDeactivates,H)!==!1){H.preventDefault(),l.deactivate();return}if(CX(H)){D(H);return}},k=function(H){var R=cp(H);d(R)>=0||Wc(r.clickOutsideDeactivates,H)||Wc(r.allowOutsideClick,H)||(H.preventDefault(),H.stopImmediatePropagation())},F=function(){if(o.active)return s1.activateTrap(l),o.delayInitialFocusTimer=r.delayInitialFocus?o1(function(){T(p())}):T(p()),i.addEventListener("focusin",N,!0),i.addEventListener("mousedown",C,{capture:!0,passive:!1}),i.addEventListener("touchstart",C,{capture:!0,passive:!1}),i.addEventListener("click",k,{capture:!0,passive:!1}),i.addEventListener("keydown",O,{capture:!0,passive:!1}),l},G=function(){if(o.active)return i.removeEventListener("focusin",N,!0),i.removeEventListener("mousedown",C,!0),i.removeEventListener("touchstart",C,!0),i.removeEventListener("click",k,!0),i.removeEventListener("keydown",O,!0),l};return l={get active(){return o.active},get paused(){return o.paused},activate:function(H){if(o.active)return this;var R=c(H,"onActivate"),I=c(H,"onPostActivate"),P=c(H,"checkCanFocusTrap");P||v(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=i.activeElement,R&&R();var U=function(){P&&v(),F(),I&&I()};return P?(P(o.containers.concat()).then(U,U),this):(U(),this)},deactivate:function(H){if(!o.active)return this;var R=r1({onDeactivate:r.onDeactivate,onPostDeactivate:r.onPostDeactivate,checkCanReturnFocus:r.checkCanReturnFocus},H);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,G(),o.active=!1,o.paused=!1,s1.deactivateTrap(l);var I=c(R,"onDeactivate"),P=c(R,"onPostDeactivate"),U=c(R,"checkCanReturnFocus"),q=c(R,"returnFocus","returnFocusOnDeactivate");I&&I();var V=function(){o1(function(){q&&T(b(o.nodeFocusedBeforeActivation)),P&&P()})};return q&&U?(U(b(o.nodeFocusedBeforeActivation)).then(V,V),this):(V(),this)},pause:function(){return o.paused||!o.active?this:(o.paused=!0,G(),this)},unpause:function(){return!o.paused||!o.active?this:(o.paused=!1,v(),F(),this)},updateContainerElements:function(H){var R=[].concat(H).filter(Boolean);return o.containers=R.map(function(I){return typeof I=="string"?i.querySelector(I):I}),o.active&&v(),this}},l.updateContainerElements(e),l};function RX(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}else return Array.from(t)}var NE=!1;if(typeof window<"u"){var l1={get passive(){NE=!0}};window.addEventListener("testPassive",null,l1),window.removeEventListener("testPassive",null,l1)}var h2=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),Fo=[],Rm=!1,p2=-1,Nd=void 0,Pd=void 0,m2=function(e){return Fo.some(function(n){return!!(n.options.allowTouchMove&&n.options.allowTouchMove(e))})},Nm=function(e){var n=e||window.event;return m2(n.target)||n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)},NX=function(e){if(Pd===void 0){var n=!!e&&e.reserveScrollBarGap===!0,i=window.innerWidth-document.documentElement.clientWidth;n&&i>0&&(Pd=document.body.style.paddingRight,document.body.style.paddingRight=i+"px")}Nd===void 0&&(Nd=document.body.style.overflow,document.body.style.overflow="hidden")},PX=function(){Pd!==void 0&&(document.body.style.paddingRight=Pd,Pd=void 0),Nd!==void 0&&(document.body.style.overflow=Nd,Nd=void 0)},DX=function(e){return e?e.scrollHeight-e.scrollTop<=e.clientHeight:!1},MX=function(e,n){var i=e.targetTouches[0].clientY-p2;return m2(e.target)?!1:n&&n.scrollTop===0&&i>0||DX(n)&&i<0?Nm(e):(e.stopPropagation(),!0)},kX=function(e,n){if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!Fo.some(function(r){return r.targetElement===e})){var i={targetElement:e,options:n||{}};Fo=[].concat(RX(Fo),[i]),h2?(e.ontouchstart=function(r){r.targetTouches.length===1&&(p2=r.targetTouches[0].clientY)},e.ontouchmove=function(r){r.targetTouches.length===1&&MX(r,e)},Rm||(document.addEventListener("touchmove",Nm,NE?{passive:!1}:void 0),Rm=!0)):NX(n)}},VX=function(e){if(!e){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}Fo=Fo.filter(function(n){return n.targetElement!==e}),h2?(e.ontouchstart=null,e.ontouchmove=null,Rm&&Fo.length===0&&(document.removeEventListener("touchmove",Nm,NE?{passive:!1}:void 0),Rm=!1)):Fo.length||PX()},Ya=[],LX=function(){return Ya.some(function(t){return t.activeTargets.length>0})},OX=function(){return Ya.some(function(t){return t.skippedTargets.length>0})},u1="ResizeObserver loop completed with undelivered notifications.",UX=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:u1}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=u1),window.dispatchEvent(t)},Qd;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Qd||(Qd={}));var Ja=function(t){return Object.freeze(t)},FX=(function(){function t(e,n){this.inlineSize=e,this.blockSize=n,Ja(this)}return t})(),g2=(function(){function t(e,n,i,r){return this.x=e,this.y=n,this.width=i,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Ja(this)}return t.prototype.toJSON=function(){var e=this,n=e.x,i=e.y,r=e.top,o=e.right,l=e.bottom,c=e.left,d=e.width,f=e.height;return{x:n,y:i,top:r,right:o,bottom:l,left:c,width:d,height:f}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t})(),PE=function(t){return t instanceof SVGElement&&"getBBox"in t},y2=function(t){if(PE(t)){var e=t.getBBox(),n=e.width,i=e.height;return!n&&!i}var r=t,o=r.offsetWidth,l=r.offsetHeight;return!(o||l||t.getClientRects().length)},c1=function(t){var e;if(t instanceof Element)return!0;var n=(e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(n&&t instanceof n.Element)},BX=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Dd=typeof window<"u"?window:{},dp=new WeakMap,d1=/auto|scroll/,qX=/^tb|vertical/,zX=/msie|trident/i.test(Dd.navigator&&Dd.navigator.userAgent),Zr=function(t){return parseFloat(t||"0")},Tu=function(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=!1),new FX((n?e:t)||0,(n?t:e)||0)},f1=Ja({devicePixelContentBoxSize:Tu(),borderBoxSize:Tu(),contentBoxSize:Tu(),contentRect:new g2(0,0,0,0)}),v2=function(t,e){if(e===void 0&&(e=!1),dp.has(t)&&!e)return dp.get(t);if(y2(t))return dp.set(t,f1),f1;var n=getComputedStyle(t),i=PE(t)&&t.ownerSVGElement&&t.getBBox(),r=!zX&&n.boxSizing==="border-box",o=qX.test(n.writingMode||""),l=!i&&d1.test(n.overflowY||""),c=!i&&d1.test(n.overflowX||""),d=i?0:Zr(n.paddingTop),f=i?0:Zr(n.paddingRight),p=i?0:Zr(n.paddingBottom),v=i?0:Zr(n.paddingLeft),T=i?0:Zr(n.borderTopWidth),b=i?0:Zr(n.borderRightWidth),C=i?0:Zr(n.borderBottomWidth),N=i?0:Zr(n.borderLeftWidth),D=v+f,O=d+p,k=N+b,F=T+C,G=c?t.offsetHeight-F-t.clientHeight:0,K=l?t.offsetWidth-k-t.clientWidth:0,H=r?D+k:0,R=r?O+F:0,I=i?i.width:Zr(n.width)-H-K,P=i?i.height:Zr(n.height)-R-G,U=I+D+K+k,q=P+O+G+F,V=Ja({devicePixelContentBoxSize:Tu(Math.round(I*devicePixelRatio),Math.round(P*devicePixelRatio),o),borderBoxSize:Tu(U,q,o),contentBoxSize:Tu(I,P,o),contentRect:new g2(v,d,I,P)});return dp.set(t,V),V},_2=function(t,e,n){var i=v2(t,n),r=i.borderBoxSize,o=i.contentBoxSize,l=i.devicePixelContentBoxSize;switch(e){case Qd.DEVICE_PIXEL_CONTENT_BOX:return l;case Qd.BORDER_BOX:return r;default:return o}},HX=(function(){function t(e){var n=v2(e);this.target=e,this.contentRect=n.contentRect,this.borderBoxSize=Ja([n.borderBoxSize]),this.contentBoxSize=Ja([n.contentBoxSize]),this.devicePixelContentBoxSize=Ja([n.devicePixelContentBoxSize])}return t})(),T2=function(t){if(y2(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},GX=function(){var t=1/0,e=[];Ya.forEach(function(l){if(l.activeTargets.length!==0){var c=[];l.activeTargets.forEach(function(f){var p=new HX(f.target),v=T2(f.target);c.push(p),f.lastReportedSize=_2(f.target,f.observedBox),v<t&&(t=v)}),e.push(function(){l.callback.call(l.observer,c,l.observer)}),l.activeTargets.splice(0,l.activeTargets.length)}});for(var n=0,i=e;n<i.length;n++){var r=i[n];r()}return t},h1=function(t){Ya.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(r){r.isActive()&&(T2(r.target)>t?n.activeTargets.push(r):n.skippedTargets.push(r))})})},jX=function(){var t=0;for(h1(t);LX();)t=GX(),h1(t);return OX()&&UX(),t>0},a0,E2=[],$X=function(){return E2.splice(0).forEach(function(t){return t()})},KX=function(t){if(!a0){var e=0,n=document.createTextNode(""),i={characterData:!0};new MutationObserver(function(){return $X()}).observe(n,i),a0=function(){n.textContent="".concat(e?e--:e++)}}E2.push(t),a0()},YX=function(t){KX(function(){requestAnimationFrame(t)})},Op=0,JX=function(){return!!Op},WX=250,QX={attributes:!0,characterData:!0,childList:!0,subtree:!0},p1=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],m1=function(t){return t===void 0&&(t=0),Date.now()+t},l0=!1,XX=(function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var n=this;if(e===void 0&&(e=WX),!l0){l0=!0;var i=m1(e);YX(function(){var r=!1;try{r=jX()}finally{if(l0=!1,e=i-m1(),!JX())return;r?n.run(1e3):e>0?n.run(e):n.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,n=function(){return e.observer&&e.observer.observe(document.body,QX)};document.body?n():Dd.addEventListener("DOMContentLoaded",n)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),p1.forEach(function(n){return Dd.addEventListener(n,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),p1.forEach(function(n){return Dd.removeEventListener(n,e.listener,!0)}),this.stopped=!0)},t})(),I_=new XX,g1=function(t){!Op&&t>0&&I_.start(),Op+=t,!Op&&I_.stop()},ZX=function(t){return!PE(t)&&!BX(t)&&getComputedStyle(t).display==="inline"},eZ=(function(){function t(e,n){this.target=e,this.observedBox=n||Qd.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=_2(this.target,this.observedBox,!0);return ZX(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t})(),tZ=(function(){function t(e,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=n}return t})(),fp=new WeakMap,y1=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},hp=(function(){function t(){}return t.connect=function(e,n){var i=new tZ(e,n);fp.set(e,i)},t.observe=function(e,n,i){var r=fp.get(e),o=r.observationTargets.length===0;y1(r.observationTargets,n)<0&&(o&&Ya.push(r),r.observationTargets.push(new eZ(n,i&&i.box)),g1(1),I_.schedule())},t.unobserve=function(e,n){var i=fp.get(e),r=y1(i.observationTargets,n),o=i.observationTargets.length===1;r>=0&&(o&&Ya.splice(Ya.indexOf(i),1),i.observationTargets.splice(r,1),g1(-1))},t.disconnect=function(e){var n=this,i=fp.get(e);i.observationTargets.slice().forEach(function(r){return n.unobserve(e,r.target)}),i.activeTargets.splice(0,i.activeTargets.length)},t})(),nZ=(function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");hp.connect(this,e)}return t.prototype.observe=function(e,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!c1(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");hp.observe(this,e,n)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!c1(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");hp.unobserve(this,e)},t.prototype.disconnect=function(){hp.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t})();function ri(){return ri=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ri.apply(this,arguments)}function Up(t,e){if(t==null)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)e.indexOf(n=o[i])>=0||(r[n]=t[n]);return r}var Md=typeof window<"u"?B.useLayoutEffect:B.useEffect;function Qc(t,e,n){return e=(e=+e)==e?e:0,n=(n=+n)==n?n:0,(t=+t)==t&&(t=(t=t<=n?t:n)>=e?t:e),t}function pp(t){var e=Math.round(t);if(Number.isNaN(t))throw new TypeError("Found a NaN! Check your snapPoints / defaultSnap / snapTo ");return e}var iZ={box:"border-box"};function u0(t,e){var n=e.label,i=e.enabled,r=e.resizeSourceRef,o=B.useState(0),l=o[0],c=o[1];B.useDebugValue(n+": "+l);var d=B.useCallback(function(f){c(f[0].borderBoxSize[0].blockSize),r.current="element"},[r]);return Md(function(){if(t.current&&i){var f=new nZ(d);return f.observe(t.current,iZ),function(){f.disconnect()}}},[t,d,i]),i?l:0}function ni(t){return t===void 0&&(t=1e3),new Promise(function(e){return setTimeout(e,t)})}var v1={DRAG:{target:"#overlay.dragging",actions:"onOpenEnd"}},_1={RESIZE:{target:"#overlay.resizing",actions:"onOpenEnd"}},rZ=RW({id:"overlay",initial:"closed",context:{initialState:"CLOSED"},states:{closed:{on:{OPEN:"opening",CLOSE:void 0}},opening:{initial:"start",states:{start:{invoke:{src:"onOpenStart",onDone:"transition"}},transition:{always:[{target:"immediately",cond:"initiallyOpen"},{target:"smoothly",cond:"initiallyClosed"}]},immediately:{initial:"open",states:{open:{invoke:{src:"openImmediately",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"#overlay.opening.end"},on:ri({},v1,_1)}}},smoothly:{initial:"visuallyHidden",states:{visuallyHidden:{invoke:{src:"renderVisuallyHidden",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"open"}},open:{invoke:{src:"openSmoothly",onDone:"#overlay.opening.end"},on:ri({},v1,_1)}}},end:{invoke:{src:"onOpenEnd",onDone:"done"},on:{CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:ri({},{CLOSE:{target:"#overlay.closing",actions:"onOpenCancel"}}),onDone:"open"},open:{on:{DRAG:"#overlay.dragging",SNAP:"snapping",RESIZE:"resizing"}},dragging:{on:{SNAP:"snapping"}},snapping:{initial:"start",states:{start:{invoke:{src:"onSnapStart",onDone:"snappingSmoothly"},entry:[NW({y:function(t,e){return e.payload.y},velocity:function(t,e){return e.payload.velocity},snapSource:function(t,e){var n=e.payload.source;return n===void 0?"custom":n}})]},snappingSmoothly:{invoke:{src:"snapSmoothly",onDone:"end"}},end:{invoke:{src:"onSnapEnd",onDone:"done"},on:{RESIZE:"#overlay.resizing",SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{SNAP:{target:"snapping",actions:"onSnapEnd"},RESIZE:{target:"#overlay.resizing",actions:"onSnapCancel"},DRAG:{target:"#overlay.dragging",actions:"onSnapCancel"},CLOSE:{target:"#overlay.closing",actions:"onSnapCancel"}},onDone:"open"},resizing:{initial:"start",states:{start:{invoke:{src:"onResizeStart",onDone:"resizingSmoothly"}},resizingSmoothly:{invoke:{src:"resizeSmoothly",onDone:"end"}},end:{invoke:{src:"onResizeEnd",onDone:"done"},on:{SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{RESIZE:{target:"resizing",actions:"onResizeEnd"},SNAP:{target:"snapping",actions:"onResizeCancel"},DRAG:{target:"#overlay.dragging",actions:"onResizeCancel"},CLOSE:{target:"#overlay.closing",actions:"onResizeCancel"}},onDone:"open"},closing:{initial:"start",states:{start:{invoke:{src:"onCloseStart",onDone:"deactivating"},on:{OPEN:{target:"#overlay.open",actions:"onCloseCancel"}}},deactivating:{invoke:{src:"deactivate",onDone:"closingSmoothly"}},closingSmoothly:{invoke:{src:"closeSmoothly",onDone:"end"}},end:{invoke:{src:"onCloseEnd",onDone:"done"},on:{OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}}},done:{type:"final"}},on:{CLOSE:void 0,OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}},onDone:"closed"}},on:{CLOSE:"closing"}},{actions:{onOpenCancel:function(t,e){},onSnapCancel:function(t,e){},onResizeCancel:function(t,e){},onCloseCancel:function(t,e){},onOpenEnd:function(t,e){},onSnapEnd:function(t,e){},onRezizeEnd:function(t,e){}},services:{onSnapStart:function(){try{return Promise.resolve(ni()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenStart:function(){try{return Promise.resolve(ni()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseStart:function(){try{return Promise.resolve(ni()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeStart:function(){try{return Promise.resolve(ni()).then(function(){})}catch(t){return Promise.reject(t)}},onSnapEnd:function(){try{return Promise.resolve(ni()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenEnd:function(){try{return Promise.resolve(ni()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseEnd:function(){try{return Promise.resolve(ni()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeEnd:function(){try{return Promise.resolve(ni()).then(function(){})}catch(t){return Promise.reject(t)}},renderVisuallyHidden:function(t,e){try{return Promise.resolve(ni()).then(function(){})}catch(n){return Promise.reject(n)}},activate:function(t,e){try{return Promise.resolve(ni()).then(function(){})}catch(n){return Promise.reject(n)}},deactivate:function(t,e){try{return Promise.resolve(ni()).then(function(){})}catch(n){return Promise.reject(n)}},openSmoothly:function(t,e){try{return Promise.resolve(ni()).then(function(){})}catch(n){return Promise.reject(n)}},openImmediately:function(t,e){try{return Promise.resolve(ni()).then(function(){})}catch(n){return Promise.reject(n)}},snapSmoothly:function(t,e){try{return Promise.resolve(ni()).then(function(){})}catch(n){return Promise.reject(n)}},resizeSmoothly:function(t,e){try{return Promise.resolve(ni()).then(function(){})}catch(n){return Promise.reject(n)}},closeSmoothly:function(t,e){try{return Promise.resolve(ni()).then(function(){})}catch(n){return Promise.reject(n)}}},guards:{initiallyClosed:function(t){return t.initialState==="CLOSED"},initiallyOpen:function(t){return t.initialState==="OPEN"}}}),sZ=["children","sibling","className","footer","header","open","initialState","lastSnapRef","initialFocusRef","onDismiss","maxHeight","defaultSnap","snapPoints","blocking","scrollLocking","style","onSpringStart","onSpringCancel","onSpringEnd","reserveScrollBarGap","expandOnContentDrag"],oZ=["velocity"],aZ=["onRest","config"],S2=nQ.default,lZ=S2.tension,mp=S2.friction,uZ=Pn.forwardRef(function(t,e){var n=t.children,i=t.sibling,r=t.className,o=t.footer,l=t.header,c=t.open,d=t.initialState,f=t.lastSnapRef,p=t.initialFocusRef,v=t.onDismiss,T=t.maxHeight,b=t.defaultSnap,C=b===void 0?dZ:b,N=t.snapPoints,D=N===void 0?fZ:N,O=t.blocking,k=O===void 0||O,F=t.scrollLocking,G=F===void 0||F,K=t.style,H=t.onSpringStart,R=t.onSpringCancel,I=t.onSpringEnd,P=t.reserveScrollBarGap,U=P===void 0?k:P,q=t.expandOnContentDrag,V=q!==void 0&&q,z=Up(t,sZ),Ee=(function(){var le=B.useState(!1),pe=le[0],Te=le[1],ze=B.useState({}),Ve=ze[0],Qe=ze[1],Ye=B.useCallback(function(et){return Qe(function(tt){var Me;return ri({},tt,((Me={})[et]=!1,Me))}),function(){Qe(function(tt){var Me;return ri({},tt,((Me={})[et]=!0,Me))})}},[]);return B.useEffect(function(){var et=Object.values(Ve);et.length!==0&&et.every(Boolean)&&Te(!0)},[Ve]),{ready:pe,registerReady:Ye}})(),Ne=Ee.ready,W=Ee.registerReady,se=B.useRef(!1),he=B.useRef(H),xe=B.useRef(R),Ae=B.useRef(I);B.useEffect(function(){he.current=H,xe.current=R,Ae.current=I},[R,H,I]);var j,ee,ne=aQ(function(){return{y:0,ready:0,maxHeight:0,minSnap:0,maxSnap:0}}),oe=ne[0],ye=ne[1],Oe=B.useRef(null),Ie=B.useRef(null),Vt=B.useRef(null),At=B.useRef(null),qn=B.useRef(null),wi=B.useRef(null),Ft=B.useRef(0),zn=B.useRef(),Cn=B.useRef(!1),Mn=(j=B.useMemo(function(){return typeof window<"u"?window.matchMedia("(prefers-reduced-motion: reduce)"):null},[]),ee=B.useRef(j==null?void 0:j.matches),B.useDebugValue(ee.current?"reduce":"no-preference"),B.useEffect(function(){var le=function(pe){ee.current=pe.matches};return j==null||j.addListener(le),function(){return j==null?void 0:j.removeListener(le)}},[j]),ee),ci=(function(le){var pe=le.targetRef,Te=le.enabled,ze=le.reserveScrollBarGap,Ve=B.useRef({activate:function(){throw new TypeError("Tried to activate scroll lock too early")},deactivate:function(){}});return B.useDebugValue(Te?"Enabled":"Disabled"),B.useEffect(function(){if(!Te)return Ve.current.deactivate(),void(Ve.current={activate:function(){},deactivate:function(){}});var Qe=pe.current,Ye=!1;Ve.current={activate:function(){Ye||(Ye=!0,kX(Qe,{allowTouchMove:function(et){return et.closest("[data-body-scroll-lock-ignore]")},reserveScrollBarGap:ze}))},deactivate:function(){Ye&&(Ye=!1,VX(Qe))}}},[Te,pe,ze]),Ve})({targetRef:Ie,enabled:Ne&&G,reserveScrollBarGap:U}),rr=(function(le){var pe=le.targetRef,Te=le.enabled,ze=B.useRef({activate:function(){throw new TypeError("Tried to activate aria hider too early")},deactivate:function(){}});return B.useDebugValue(Te?"Enabled":"Disabled"),B.useEffect(function(){if(!Te)return ze.current.deactivate(),void(ze.current={activate:function(){},deactivate:function(){}});var Ve=pe.current,Qe=!1,Ye=[],et=[];ze.current={activate:function(){if(!Qe){Qe=!0;var tt=Ve.parentNode;document.querySelectorAll("body > *").forEach(function(Me){if(Me!==tt){var He=Me.getAttribute("aria-hidden");He!==null&&He!=="false"||(Ye.push(He),et.push(Me),Me.setAttribute("aria-hidden","true"))}})}},deactivate:function(){Qe&&(Qe=!1,et.forEach(function(tt,Me){var He=Ye[Me];He===null?tt.removeAttribute("aria-hidden"):tt.setAttribute("aria-hidden",He)}),Ye=[],et=[])}}},[pe,Te]),ze})({targetRef:Oe,enabled:Ne&&k}),xi=(function(le){var pe=le.targetRef,Te=le.fallbackRef,ze=le.initialFocusRef,Ve=le.enabled,Qe=B.useRef({activate:function(){throw new TypeError("Tried to activate focus trap too early")},deactivate:function(){}});return B.useDebugValue(Ve?"Enabled":"Disabled"),B.useEffect(function(){if(!Ve)return Qe.current.deactivate(),void(Qe.current={activate:function(){},deactivate:function(){}});var Ye=Te.current,et=IX(pe.current,{onActivate:void 0,initialFocus:ze?function(){return(ze==null?void 0:ze.current)||Ye}:void 0,fallbackFocus:Ye,escapeDeactivates:!1,clickOutsideDeactivates:!1}),tt=!1;Qe.current={activate:function(){try{return tt?Promise.resolve():(tt=!0,Promise.resolve(et.activate()).then(function(){return Promise.resolve(new Promise(function(Me){return setTimeout(function(){return Me(void 0)},0)})).then(function(){})}))}catch(Me){return Promise.reject(Me)}},deactivate:function(){tt&&(tt=!1,et.deactivate())}}},[Ve,Te,ze,pe]),Qe})({targetRef:Oe,fallbackRef:wi,initialFocusRef:p||void 0,enabled:Ne&&k&&p!==!1}),Ai=(function(le){var pe=le.getSnapPoints,Te=le.heightRef,ze=le.lastSnapRef,Ve=le.ready,Qe=(function(Ct){var ft=Ct.contentRef,Hn=Ct.controlledMaxHeight,Ot=Ct.footerEnabled,dn=Ct.footerRef,Ii=Ct.headerEnabled,Rn=Ct.headerRef,vn=Ct.registerReady,Hi=Ct.resizeSourceRef,me=B.useMemo(function(){return vn("contentHeight")},[vn]),be=(function(pi,Ni,sr){var Pi=B.useMemo(function(){return Ni("maxHeight")},[Ni]),or=B.useState(function(){return pp(pi)||typeof window<"u"?window.innerHeight:0}),Gr=or[0],mi=or[1],Jt=Gr>0,Cr=B.useRef(0);return B.useDebugValue(pi?"controlled":"auto"),B.useEffect(function(){Jt&&Pi()},[Jt,Pi]),Md(function(){if(pi)return mi(pp(pi)),void(sr.current="maxheightprop");var Ir=function(){Cr.current||(Cr.current=requestAnimationFrame(function(){mi(window.innerHeight),sr.current="window",Cr.current=0}))};return window.addEventListener("resize",Ir),mi(window.innerHeight),sr.current="window",Pi(),function(){window.removeEventListener("resize",Ir),cancelAnimationFrame(Cr.current)}},[pi,Pi,sr]),Gr})(Hn,vn,Hi),qe=u0(Rn,{label:"headerHeight",enabled:Ii,resizeSourceRef:Hi}),Dt=u0(ft,{label:"contentHeight",enabled:!0,resizeSourceRef:Hi}),Ri=u0(dn,{label:"footerHeight",enabled:Ot,resizeSourceRef:Hi}),hi=Math.min(be-qe-Ri,Dt)+qe+Ri;B.useDebugValue("minHeight: "+hi);var Ar=Dt>0;return B.useEffect(function(){Ar&&me()},[Ar,me]),{maxHeight:be,minHeight:hi,headerHeight:qe,footerHeight:Ri}})({contentRef:le.contentRef,controlledMaxHeight:le.controlledMaxHeight,footerEnabled:le.footerEnabled,footerRef:le.footerRef,headerEnabled:le.headerEnabled,headerRef:le.headerRef,registerReady:le.registerReady,resizeSourceRef:le.resizeSourceRef}),Ye=Qe.maxHeight,et=Qe.minHeight,tt=Qe.headerHeight,Me=Qe.footerHeight,He=(function(Ct,ft){var Hn=[].concat(Ct).map(pp).reduce(function(Rn,vn){return Rn.add(Qc(vn,0,ft)),Rn},new Set),Ot=Array.from(Hn),dn=Math.min.apply(Math,Ot);if(Number.isNaN(dn))throw new TypeError("minSnap is NaN");var Ii=Math.max.apply(Math,Ot);if(Number.isNaN(Ii))throw new TypeError("maxSnap is NaN");return{snapPoints:Ot,minSnap:dn,maxSnap:Ii}})(Ve?pe({height:Te.current,footerHeight:Me,headerHeight:tt,minHeight:et,maxHeight:Ye}):[0],Ye),cn=He.snapPoints,Ci=He.minSnap,Yt=He.maxSnap;return B.useDebugValue("minSnap: "+Ci+", maxSnap:"+Yt),{minSnap:Ci,maxSnap:Yt,findSnap:function(Ct){var ft=pp(typeof Ct=="function"?Ct({footerHeight:Me,headerHeight:tt,height:Te.current,minHeight:et,maxHeight:Ye,snapPoints:cn,lastSnap:ze.current}):Ct);return cn.reduce(function(Hn,Ot){return Math.abs(Ot-ft)<Math.abs(Hn-ft)?Ot:Hn},Ci)},maxHeight:Ye}})({contentRef:Vt,controlledMaxHeight:T,footerEnabled:!!o,footerRef:qn,getSnapPoints:D,headerEnabled:l!==!1,headerRef:At,heightRef:Ft,lastSnapRef:f,ready:Ne,registerReady:W,resizeSourceRef:zn}),kn=Ai.minSnap,di=Ai.maxSnap,wr=Ai.maxHeight,zi=Ai.findSnap,bt=B.useRef(wr),yn=B.useRef(kn),ke=B.useRef(di),Lt=B.useRef(zi),Qt=B.useRef(0);Md(function(){bt.current=wr,ke.current=di,yn.current=kn,Lt.current=zi,Qt.current=zi(C)},[zi,C,wr,di,kn]);var tn=B.useCallback(function(le){var pe=le.onRest,Te=le.config,ze=(Te=Te===void 0?{}:Te).velocity,Ve=ze===void 0?1:ze,Qe=Up(Te,oZ),Ye=Up(le,aZ);return new Promise(function(et){return ye(ri({},Ye,{config:ri({velocity:Ve},Qe,{mass:1,tension:lZ,friction:Math.max(mp,mp+(mp-mp*Ve))}),onRest:function(){var tt=[].slice.call(arguments);et.apply(void 0,tt),pe==null||pe.apply(void 0,tt)}}))})},[ye]),xr=FW(rZ,{devTools:!1,actions:{onOpenCancel:B.useCallback(function(){return xe.current==null?void 0:xe.current({type:"OPEN"})},[]),onSnapCancel:B.useCallback(function(le){return xe.current==null?void 0:xe.current({type:"SNAP",source:le.snapSource})},[]),onCloseCancel:B.useCallback(function(){return xe.current==null?void 0:xe.current({type:"CLOSE"})},[]),onResizeCancel:B.useCallback(function(){return xe.current==null?void 0:xe.current({type:"RESIZE",source:zn.current})},[]),onOpenEnd:B.useCallback(function(){return Ae.current==null?void 0:Ae.current({type:"OPEN"})},[]),onSnapEnd:B.useCallback(function(le,pe){return Ae.current==null?void 0:Ae.current({type:"SNAP",source:le.snapSource})},[]),onResizeEnd:B.useCallback(function(){return Ae.current==null?void 0:Ae.current({type:"RESIZE",source:zn.current})},[])},context:{initialState:d},services:{onSnapStart:B.useCallback(function(le,pe){try{return Promise.resolve(he.current==null?void 0:he.current({type:"SNAP",source:pe.payload.source||"custom"}))}catch(Te){return Promise.reject(Te)}},[]),onOpenStart:B.useCallback(function(){try{return Promise.resolve(he.current==null?void 0:he.current({type:"OPEN"}))}catch(le){return Promise.reject(le)}},[]),onCloseStart:B.useCallback(function(){try{return Promise.resolve(he.current==null?void 0:he.current({type:"CLOSE"}))}catch(le){return Promise.reject(le)}},[]),onResizeStart:B.useCallback(function(){try{return Promise.resolve(he.current==null?void 0:he.current({type:"RESIZE",source:zn.current}))}catch(le){return Promise.reject(le)}},[]),onSnapEnd:B.useCallback(function(le,pe){try{return Promise.resolve(Ae.current==null?void 0:Ae.current({type:"SNAP",source:le.snapSource}))}catch(Te){return Promise.reject(Te)}},[]),onOpenEnd:B.useCallback(function(){try{return Promise.resolve(Ae.current==null?void 0:Ae.current({type:"OPEN"}))}catch(le){return Promise.reject(le)}},[]),onCloseEnd:B.useCallback(function(){try{return Promise.resolve(Ae.current==null?void 0:Ae.current({type:"CLOSE"}))}catch(le){return Promise.reject(le)}},[]),onResizeEnd:B.useCallback(function(){try{return Promise.resolve(Ae.current==null?void 0:Ae.current({type:"RESIZE",source:zn.current}))}catch(le){return Promise.reject(le)}},[]),renderVisuallyHidden:B.useCallback(function(le,pe){try{return Promise.resolve(tn({y:Qt.current,ready:0,maxHeight:bt.current,maxSnap:ke.current,minSnap:Qt.current,immediate:!0})).then(function(){})}catch(Te){return Promise.reject(Te)}},[tn]),activate:B.useCallback(function(le,pe){try{return se.current=!0,Promise.resolve(Promise.all([ci.current.activate(),xi.current.activate(),rr.current.activate()])).then(function(){})}catch(Te){return Promise.reject(Te)}},[rr,xi,ci]),deactivate:B.useCallback(function(){try{return ci.current.deactivate(),xi.current.deactivate(),rr.current.deactivate(),se.current=!1,Promise.resolve()}catch(le){return Promise.reject(le)}},[rr,xi,ci]),openImmediately:B.useCallback(function(){try{return Ft.current=Qt.current,Promise.resolve(tn({y:Qt.current,ready:1,maxHeight:bt.current,maxSnap:ke.current,minSnap:Qt.current,immediate:!0})).then(function(){})}catch(le){return Promise.reject(le)}},[tn]),openSmoothly:B.useCallback(function(){try{return Promise.resolve(tn({y:0,ready:1,maxHeight:bt.current,maxSnap:ke.current,minSnap:Qt.current,immediate:!0})).then(function(){return Ft.current=Qt.current,Promise.resolve(tn({y:Qt.current,ready:1,maxHeight:bt.current,maxSnap:ke.current,minSnap:Qt.current,immediate:Mn.current})).then(function(){})})}catch(le){return Promise.reject(le)}},[tn,Mn]),snapSmoothly:B.useCallback(function(le,pe){try{var Te=Lt.current(le.y);return Ft.current=Te,f.current=Te,Promise.resolve(tn({y:Te,ready:1,maxHeight:bt.current,maxSnap:ke.current,minSnap:yn.current,immediate:Mn.current,config:{velocity:le.velocity}})).then(function(){})}catch(ze){return Promise.reject(ze)}},[tn,f,Mn]),resizeSmoothly:B.useCallback(function(){try{var le=Lt.current(Ft.current);return Ft.current=le,f.current=le,Promise.resolve(tn({y:le,ready:1,maxHeight:bt.current,maxSnap:ke.current,minSnap:yn.current,immediate:zn.current!=="element"||Mn.current})).then(function(){})}catch(pe){return Promise.reject(pe)}},[tn,f,Mn]),closeSmoothly:B.useCallback(function(le,pe){try{return tn({minSnap:Ft.current,immediate:!0}),Ft.current=0,Promise.resolve(tn({y:0,maxHeight:bt.current,maxSnap:ke.current,immediate:Mn.current})).then(function(){return Promise.resolve(tn({ready:0,immediate:!0})).then(function(){})})}catch(Te){return Promise.reject(Te)}},[tn,Mn])}}),ua=xr[0],In=xr[1];B.useEffect(function(){Ne&&In(c?"OPEN":"CLOSE")},[c,In,Ne]),Md(function(){(wr||di||kn)&&In("RESIZE")},[wr,di,kn,In]),B.useEffect(function(){return function(){ci.current.deactivate(),xi.current.deactivate(),rr.current.deactivate()}},[rr,xi,ci]),B.useImperativeHandle(e,function(){return{snapTo:function(le,pe){var Te=pe===void 0?{}:pe,ze=Te.velocity,Ve=ze===void 0?1:ze,Qe=Te.source,Ye=Qe===void 0?"custom":Qe;In("SNAP",{payload:{y:Lt.current(le),velocity:Ve,source:Ye}})},get height(){return Ft.current}}},[In]),B.useEffect(function(){var le=Ie.current,pe=function(ze){Cn.current&&ze.preventDefault()},Te=function(ze){le.scrollTop<0&&(requestAnimationFrame(function(){le.style.overflow="hidden",le.scrollTop=0,le.style.removeProperty("overflow")}),ze.preventDefault())};return V&&(le.addEventListener("scroll",pe),le.addEventListener("touchmove",pe),le.addEventListener("touchstart",Te)),function(){le.removeEventListener("scroll",pe),le.removeEventListener("touchmove",pe),le.removeEventListener("touchstart",Te)}},[V,Ie]);var fi=uX(function(le){var pe=le.args,Te=(pe=pe===void 0?[]:pe)[0],ze=(Te=Te===void 0?{}:Te).closeOnTap,Ve=ze!==void 0&&ze,Qe=Te.isContentDragging,Ye=Qe!==void 0&&Qe,et=le.cancel,tt=le.direction[1],Me=le.down,He=le.first,cn=le.last,Ci=le.memo,Yt=Ci===void 0?oe.y.getValue():Ci,Ct=le.tap,ft=le.velocity,Hn=-1*le.movement[1];if(!se.current)return et(),Yt;if(v&&Ve&&Ct)return et(),setTimeout(function(){return v()},0),Yt;if(Ct)return Yt;var Ot=Yt+Hn,dn=Hn*ft,Ii=Math.max(yn.current,Math.min(ke.current,Ot+2*dn));if(!Me&&v&&tt>0&&Ot+dn<yn.current/2)return et(),v(),Yt;var Rn=Me?v||yn.current!==ke.current?Rd(Ot,v?0:yn.current,ke.current,.55):Ot<yn.current?Rd(Ot,yn.current,2*ke.current,.55):Rd(Ot,yn.current/2,ke.current,.55):Ii;return V&&Ye?(Rn>=ke.current&&(Rn=ke.current),Yt===ke.current&&Ie.current.scrollTop>0&&(Rn=ke.current),Cn.current=Rn<ke.current):Cn.current=!1,He&&In("DRAG"),cn?(In("SNAP",{payload:{y:Rn,velocity:ft>.05?ft:1,source:"dragging"}}),Yt):(ye({y:Rn,ready:1,maxHeight:bt.current,maxSnap:ke.current,minSnap:yn.current,immediate:!0,config:{velocity:ft}}),Yt)},{filterTaps:!0});if(Number.isNaN(ke.current))throw new TypeError("maxSnapRef is NaN!!");if(Number.isNaN(yn.current))throw new TypeError("minSnapRef is NaN!!");var Bt=(function(le){var pe,Te=le.spring,ze=Jl([Te.y,Te.maxHeight],function(Me,He){return Math.round(Qc(He-Me,0,16))+"px"}),Ve=Jl([Te.y,Te.minSnap,Te.maxSnap],function(Me,He,cn){return Qc(Me,He,cn)+"px"}),Qe=Jl([Te.y,Te.minSnap,Te.maxSnap],function(Me,He,cn){return Me<He?He-Me+"px":Me>cn?cn-Me+"px":"0px"}),Ye=Jl([Te.y,Te.maxSnap],function(Me,He){return Me>=He?Math.ceil(Me-He):0}),et=Jl([Te.y,Te.minSnap],function(Me,He){if(!He)return 0;var cn=Math.max(He/2-45,0);return Qc((Me-cn)*(1/(Math.min(He/2+45,He)-cn)+0),0,1)}),tt=Jl([Te.y,Te.minSnap],function(Me,He){return He?Qc(Me/He,0,1):0});return(pe={})["--rsbs-content-opacity"]=et,pe["--rsbs-backdrop-opacity"]=tt,pe["--rsbs-antigap-scale-y"]=Ye,pe["--rsbs-overlay-translate-y"]=Qe,pe["--rsbs-overlay-rounded"]=ze,pe["--rsbs-overlay-h"]=Ve,pe})({spring:oe});return Pn.createElement(AQ.div,ri({},z,{"data-rsbs-root":!0,"data-rsbs-state":cZ.find(ua.matches),"data-rsbs-is-blocking":k,"data-rsbs-is-dismissable":!!v,"data-rsbs-has-header":!!l,"data-rsbs-has-footer":!!o,className:r,ref:Oe,style:ri({},Bt,K,{opacity:oe.ready})}),i,k&&Pn.createElement("div",ri({key:"backdrop","data-rsbs-backdrop":!0},fi({closeOnTap:!0}))),Pn.createElement("div",{key:"overlay","aria-modal":"true",role:"dialog","data-rsbs-overlay":!0,tabIndex:-1,ref:wi,onKeyDown:function(le){le.key==="Escape"&&(le.stopPropagation(),v&&v())}},l!==!1&&Pn.createElement("div",ri({key:"header","data-rsbs-header":!0,ref:At},fi()),l),Pn.createElement("div",ri({key:"scroll","data-rsbs-scroll":!0,ref:Ie},V?fi({isContentDragging:!0}):{}),Pn.createElement("div",{"data-rsbs-content":!0,ref:Vt},n)),o&&Pn.createElement("div",ri({key:"footer",ref:qn,"data-rsbs-footer":!0},fi()),o)))}),cZ=["closed","opening","open","closing","dragging","snapping","resizing"];function dZ(t){var e=t.lastSnap;return e??Math.min.apply(Math,t.snapPoints)}function fZ(t){return t.minHeight}var hZ=["onSpringStart","onSpringEnd","skipInitialTransition"],Ku=B.forwardRef(function(t,e){var n=t.onSpringStart,i=t.onSpringEnd,r=t.skipInitialTransition,o=Up(t,hZ),l=B.useState(!1),c=l[0],d=l[1],f=B.useRef(),p=B.useRef(null),v=B.useRef(r&&o.open?"OPEN":"CLOSED");Md(function(){if(o.open)return cancelAnimationFrame(f.current),d(!0),function(){v.current="CLOSED"}},[o.open]);var T=B.useCallback(function(C){return Promise.resolve(n==null?void 0:n(C)).then(function(){C.type==="OPEN"&&cancelAnimationFrame(f.current)})},[n]),b=B.useCallback(function(C){return Promise.resolve(i==null?void 0:i(C)).then(function(){C.type==="CLOSE"&&(f.current=requestAnimationFrame(function(){return d(!1)}))})},[i]);return c?Pn.createElement(kJ,{"data-rsbs-portal":!0},Pn.createElement(uZ,ri({},o,{lastSnapRef:p,ref:e,initialState:v.current,onSpringStart:T,onSpringEnd:b}))):null});const pZ=({item:t,clothingSets:e,onClose:n,onUpdate:i,onGenerateFrom:r,onRemoveSet:o,onDelete:l,getItemWearCount:c})=>{const[d,f]=B.useState({analysis:t.analysis,category:t.category,color:t.color,material:t.material}),[p,v]=B.useState(!1),[T,b]=B.useState(window.innerWidth<768),[C,N]=B.useState(!1),[D,O]=B.useState(!1),k=document.documentElement.classList.contains("dark"),F=e.find(V=>V.itemIds.includes(t.id));B.useEffect(()=>{f({analysis:t.analysis,category:t.category,color:t.color,material:t.material}),N(!1),requestAnimationFrame(()=>{requestAnimationFrame(()=>{N(!0)})})},[t]),B.useEffect(()=>{const V=()=>b(window.innerWidth<768);return window.addEventListener("resize",V),()=>window.removeEventListener("resize",V)},[]),B.useEffect(()=>{if(!T){const V=z=>{z.key==="Escape"&&n()};return window.addEventListener("keydown",V),()=>window.removeEventListener("keydown",V)}},[T,n]);const G=V=>{const{name:z,value:Ee}=V.target;f(Ne=>({...Ne,[z]:Ee}))},K=V=>{V.preventDefault(),i({...t,...d}),v(!0),setTimeout(()=>{v(!1)},2e3)},H=()=>{console.log(" Ouverture confirmation suppression"),O(!0)},R=()=>{console.log(" Confirmation suppression"),l(t.id),O(!1),n()},I=()=>{console.log(" Annulation suppression"),O(!1)},P=V=>{V.stopPropagation(),i({...t,isFavorite:!t.isFavorite})},U=S.jsxs("div",{className:"bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[S.jsx("div",{className:"relative px-4 pt-2 pb-4",children:S.jsx("img",{src:t.imageSrc,alt:t.analysis,className:"w-full h-auto max-h-[40vh] object-contain rounded-lg"})}),S.jsxs("form",{onSubmit:K,className:"p-6",children:[S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"analysis",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Description"}),S.jsx("textarea",{id:"analysis",name:"analysis",value:d.analysis,onChange:G,rows:3,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Catgorie"}),S.jsx("select",{id:"category",name:"category",value:d.category,onChange:G,className:"mt-1 w-full appearance-none px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow",children:["Hauts","Bas","Chaussures","Accessoires"].map(V=>S.jsx("option",{value:V,children:V},V))})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Couleur"}),S.jsx("input",{type:"text",id:"color",name:"color",value:d.color,onChange:G,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"material",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Matire"}),S.jsx("input",{type:"text",id:"material",name:"material",value:d.material,onChange:G,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]})]}),S.jsx("div",{className:"bg-gradient-to-r from-gold/5 to-gold-dark/5 dark:from-gold/10 dark:to-gold-dark/10 p-3 rounded-lg border border-gold/20",children:S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{children:[S.jsx("p",{className:"text-xs font-semibold text-gold dark:text-gold-light uppercase tracking-wider",children:"Statistique"}),S.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 mt-1",children:["Port ",S.jsx("span",{className:"font-bold text-lg text-gold",children:c(t.id)})," fois ces 30 derniers jours"]})]}),S.jsx("div",{className:"text-3xl",children:""})]})}),F&&S.jsxs("div",{className:"bg-gold/10 dark:bg-gold/20 p-3 rounded-lg flex items-center justify-between gap-4",children:[S.jsxs("div",{children:[S.jsx("p",{className:"text-xs font-semibold text-gold uppercase tracking-wider",children:"Fait partie de l'ensemble"}),S.jsx("p",{className:"font-medium text-onyx dark:text-snow truncate",title:F.name,children:F.name})]}),S.jsxs("button",{type:"button",onClick:()=>{o(F.id),n()},className:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white dark:bg-onyx text-rose-500 border border-rose-500/50 rounded-md hover:bg-rose-500 hover:text-white transition-colors",title:"Dissocier l'ensemble",children:[S.jsx(j7,{}),S.jsx("span",{children:"Dissocier"})]})]})]}),S.jsxs("div",{className:"mt-6 pt-4 border-t border-black/10 dark:border-white/10 flex flex-col sm:flex-row gap-3 justify-between",children:[S.jsxs("button",{type:"button",onClick:H,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2.5 bg-red-500/10 text-red-500 font-bold rounded-lg hover:bg-red-500/20 transition-all duration-300",children:[S.jsx(BT,{}),"Supprimer"]}),S.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[S.jsxs("button",{type:"button",onClick:()=>r(t),className:"w-full sm:w-auto flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300",children:[S.jsx(Hd,{}),"Crer une tenue"]}),S.jsx("button",{type:"submit",disabled:p,className:`w-full sm:w-auto px-6 py-2.5 font-bold rounded-lg transition-all duration-300 flex items-center justify-center gap-2 ${p?"bg-green-600 text-white cursor-not-allowed":"bg-gold text-onyx hover:bg-gold-dark"}`,children:p?S.jsxs(S.Fragment,{children:[S.jsx(qT,{}),"Enregistr !"]}):"Enregistrer"})]})]})]})]});B.useEffect(()=>{console.log(" showDeleteConfirm:",D)},[D]);const q=D?Ak.createPortal(S.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center p-4 transition-opacity duration-200",style:{zIndex:9999},onClick:V=>{console.log(" Clic sur backdrop"),I()},children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-md w-full p-6 transform transition-all duration-200 scale-100",onClick:V=>V.stopPropagation(),children:[S.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[S.jsx("img",{src:t.imageSrc,alt:t.analysis,className:"w-20 h-20 object-cover rounded-lg flex-shrink-0"}),S.jsxs("div",{className:"flex-1 min-w-0",children:[S.jsx("h3",{className:"text-lg font-bold text-raisin-black dark:text-snow mb-1",children:"Supprimer cet article ?"}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:t.analysis})]})]}),S.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:S.jsxs("div",{className:"flex items-start gap-3",children:[S.jsx("svg",{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),S.jsxs("div",{className:"flex-1",children:[S.jsx("p",{className:"text-sm font-semibold text-red-800 dark:text-red-300 mb-1",children:"Cette action est irrversible"}),S.jsx("p",{className:"text-xs text-red-700 dark:text-red-400",children:"L'article sera dfinitivement supprim de votre garde-robe et ne pourra pas tre rcupr."})]})]})}),S.jsxs("div",{className:"flex gap-3",children:[S.jsx("button",{onClick:V=>{console.log(" Clic sur bouton Annuler"),V.stopPropagation(),I()},className:"flex-1 px-4 py-2.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 font-semibold rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:"Annuler"}),S.jsx("button",{onClick:V=>{console.log(" Clic sur bouton Supprimer"),V.stopPropagation(),R()},className:"flex-1 px-4 py-2.5 bg-red-600 text-white font-bold rounded-lg hover:bg-red-700 transition-colors shadow-lg shadow-red-500/30",children:"Supprimer"})]})]})}),document.body):null;return T?S.jsxs(S.Fragment,{children:[S.jsx(Ku,{open:!!t,onDismiss:n,className:k?"dark":"",style:D?{pointerEvents:"none"}:void 0,header:S.jsxs("div",{className:"flex items-center justify-between w-full px-4 py-2",children:[S.jsx("h2",{className:"text-lg font-bold text-raisin-black dark:text-snow",children:"Dtails de l'article"}),S.jsx("button",{onClick:P,className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors","aria-label":"Ajouter aux favoris",children:t.isFavorite?S.jsx(Cu,{className:"w-6 h-6 text-red-500"}):S.jsx(dm,{className:"w-6 h-6"})})]}),defaultSnap:({maxHeight:V})=>V*.85,snapPoints:({maxHeight:V})=>[V*.5,V*.85,V*.95],children:U}),q]}):S.jsxs(S.Fragment,{children:[S.jsx("div",{className:`fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 transition-opacity duration-200 ${C?"opacity-100":"opacity-0"}`,style:D?{pointerEvents:"none"}:void 0,onClick:n,children:S.jsxs("div",{className:`relative bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto transition-all duration-200 ${C?"opacity-100 scale-100":"opacity-0 scale-95"}`,style:D?{pointerEvents:"none"}:void 0,onClick:V=>V.stopPropagation(),children:[S.jsxs("div",{className:"sticky top-0 bg-white dark:bg-raisin-black border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between z-10",children:[S.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:"Dtails de l'article"}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("button",{onClick:P,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors","aria-label":"Ajouter aux favoris",children:t.isFavorite?S.jsx(Cu,{className:"w-6 h-6 text-red-500"}):S.jsx(dm,{className:"w-6 h-6"})}),S.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors","aria-label":"Fermer",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),U]})}),q]})},b2=({clothingItems:t,clothingSets:e,onGeneratePlan:n,isGenerating:i})=>{const[r,o]=B.useState(3),[l,c]=B.useState(""),[d,f]=B.useState(""),p=v=>{v.preventDefault();const T=l||"",b=d?parseFloat(d):void 0;T.trim()&&r>0&&n(r,T,b)};return S.jsxs("form",{onSubmit:p,className:"space-y-6",children:[S.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 items-end",children:[S.jsxs("div",{className:"sm:col-span-1",children:[S.jsx("label",{htmlFor:"days",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Dure (jours)"}),S.jsx("input",{id:"days",type:"number",value:r,onChange:v=>o(parseInt(v.target.value,10)||1),min:"1",max:"30",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i,required:!0})]}),S.jsxs("div",{className:"sm:col-span-1",children:[S.jsx("label",{htmlFor:"weight",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Poids max (kg)"}),S.jsxs("div",{className:"relative",children:[S.jsx("input",{id:"weight",type:"number",value:d,onChange:v=>f(v.target.value),placeholder:"Optionnel",min:"1",max:"50",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i}),S.jsx("span",{className:"absolute right-3 top-3.5 text-gray-400 text-sm",children:"kg"})]})]}),S.jsxs("div",{className:"sm:col-span-2",children:[S.jsx("label",{htmlFor:"vacation-context",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Destination / Mto"}),S.jsx("input",{id:"vacation-context",type:"text",value:l,onChange:v=>c(v.target.value),placeholder:"Ex: Weekend  Rome, temps doux",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center sm:text-left",disabled:i,required:!0})]})]}),S.jsxs("button",{type:"submit",disabled:i||!(l||"").trim()||r<=0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[S.jsx(KD,{}),i?"Analyse du poids...":"Gnrer la valise"]})]})},w2=({plan:t,allClothingItems:e,allClothingSets:n})=>{const i=r=>{const{id:o,description:l}=r;let c=e.find(f=>f.id===o);if(c)return c;let d=n.find(f=>f.id===o);if(d)return d;if(c=e.find(f=>f.analysis===o),c||(c=e.find(f=>f.analysis===l),c))return c};return S.jsx("div",{className:"mt-10",children:S.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5",children:[S.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:t.titre}),S.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:t.resume}),S.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:t.valise.map((r,o)=>{const l=i(r),c=l?l.imageSrc:null;return S.jsxs("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden relative group",title:r.description,children:[c?S.jsx("img",{src:c,alt:r.description,className:"w-full h-full object-cover"}):S.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:S.jsx($D,{})}),S.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center p-2",children:S.jsx("p",{className:"text-white text-xs text-center line-clamp-3",children:r.description})})]},o)})}),S.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:t.valise.map((r,o)=>S.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:r.description},o))})]})})},Ps={light:()=>{"vibrate"in navigator&&navigator.vibrate(10)},medium:()=>{"vibrate"in navigator&&navigator.vibrate(20)},success:()=>{"vibrate"in navigator&&navigator.vibrate([10,50,10])},error:()=>{"vibrate"in navigator&&navigator.vibrate([50,30,50])}},mZ=({onFilesSelected:t,isAnalyzing:e,isOtherModalOpen:n})=>{const[i,r]=B.useState(!1),o=B.useRef(null),l=B.useRef(null),c=v=>{const T=Array.from(v.target.files||[]);T.length>0&&(Ps.success(),t(T),r(!1)),v.target.value=""},d=()=>{Ps.medium(),r(!i)},f=()=>{var v;(v=o.current)==null||v.click()},p=()=>{var v;(v=l.current)==null||v.click()};return n?null:S.jsxs(S.Fragment,{children:[S.jsx("input",{ref:o,type:"file",accept:"image/*",capture:"environment",multiple:!0,onChange:c,className:"hidden"}),S.jsx("input",{ref:l,type:"file",accept:"image/*",multiple:!0,onChange:c,className:"hidden"}),i&&S.jsx("div",{className:"md:hidden fixed inset-0 z-30",onClick:()=>r(!1)}),S.jsxs("div",{className:"md:hidden fixed bottom-24 right-6 z-40",children:[S.jsxs("div",{className:`absolute bottom-20 right-0 transition-all duration-300 origin-bottom-right ${i?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-75 translate-y-4 pointer-events-none"}`,children:[S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl border border-black/10 dark:border-white/10 overflow-hidden w-56",children:[S.jsxs("button",{type:"button",onClick:f,className:"w-full flex items-center gap-3 p-4 hover:bg-gold/10 active:bg-gold/20 transition-colors cursor-pointer border-b border-black/5 dark:border-white/5 text-left",children:[S.jsx("div",{className:"w-10 h-10 bg-gold rounded-full flex items-center justify-center flex-shrink-0",children:S.jsxs("svg",{className:"w-5 h-5 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),S.jsxs("div",{children:[S.jsx("p",{className:"font-semibold text-sm",children:"Appareil Photo"}),S.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Prendre une photo"})]})]}),S.jsxs("button",{type:"button",onClick:p,className:"w-full flex items-center gap-3 p-4 hover:bg-gray-100 dark:hover:bg-gray-800 active:bg-gray-200 dark:active:bg-gray-700 transition-colors cursor-pointer text-left",children:[S.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center flex-shrink-0",children:S.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),S.jsxs("div",{children:[S.jsx("p",{className:"font-semibold text-sm",children:"Galerie"}),S.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Choisir des photos"})]})]})]}),S.jsx("div",{className:"absolute -bottom-2 right-6 w-4 h-4 bg-white dark:bg-raisin-black rotate-45 border-r border-b border-black/10 dark:border-white/10"})]}),S.jsx("button",{onClick:d,disabled:e,className:`
            relative w-16 h-16 
            bg-gradient-to-r from-gold to-gold-dark text-onyx 
            rounded-full shadow-2xl 
            transition-all duration-300 ease-out
            flex items-center justify-center
            disabled:opacity-50 disabled:cursor-not-allowed 
            active:scale-90
            ${i?"rotate-45 shadow-gold/50 ring-4 ring-gold/30":"rotate-0 hover:scale-105 hover:shadow-gold/30"}
          `,"aria-label":i?"Fermer le menu":"Ajouter un vtement",children:e?S.jsxs("svg",{className:"animate-spin h-8 w-8",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):S.jsx("svg",{className:"w-8 h-8 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]})]})},gZ=({onAnalyzeWardrobe:t,onScrollToOutfits:e,onScrollToVacation:n,onStartSetCreation:i,onShowFavorites:r,onShowWornOutfits:o,isAnalyzingWardrobe:l,clothingCount:c,favoriteOutfitCount:d,wornOutfitCount:f})=>S.jsxs("div",{className:"space-y-4 pb-24",children:[S.jsxs("div",{className:"text-center py-6",children:[S.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:[S.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),S.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[c," vtement",c>1?"s":""," dans votre collection"]})]}),S.jsxs("div",{className:"space-y-3 px-4",children:[c>=3&&S.jsx("button",{onClick:t,disabled:l,className:"w-full bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-2xl p-5 text-left transition-all active:scale-98 disabled:opacity-50",children:S.jsxs("div",{className:"flex items-start gap-4",children:[S.jsx("div",{className:"w-12 h-12 bg-gold rounded-xl flex items-center justify-center flex-shrink-0",children:l?S.jsxs("svg",{className:"animate-spin h-6 w-6 text-onyx",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):S.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),S.jsxs("div",{className:"flex-1",children:[S.jsx("h3",{className:"text-lg font-bold mb-1",children:" Analyser ma garde-robe"}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour plus de polyvalence"})]})]})}),S.jsx("button",{onClick:e,className:"w-full bg-gradient-to-r from-purple-500/10 to-pink-500/10 border-2 border-purple-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:S.jsxs("div",{className:"flex items-start gap-4",children:[S.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center flex-shrink-0",children:S.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),S.jsxs("div",{className:"flex-1",children:[S.jsx("h3",{className:"text-lg font-bold mb-1",children:" Crateur de Tenues"}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Gnrez des looks personnaliss avec l'IA"})]})]})}),S.jsx("button",{onClick:n,className:"w-full bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border-2 border-blue-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:S.jsxs("div",{className:"flex items-start gap-4",children:[S.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center flex-shrink-0",children:S.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),S.jsxs("div",{className:"flex-1",children:[S.jsx("h3",{className:"text-lg font-bold mb-1",children:" Planificateur de Valise"}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Prparez votre valise optimale pour votre voyage"})]})]})})]}),S.jsx("div",{className:"px-4 pt-6",children:S.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-2xl p-4",children:[S.jsx("h4",{className:"font-semibold mb-3 text-sm text-gray-600 dark:text-gray-400",children:"Aperu rapide"}),S.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[S.jsxs("button",{onClick:o,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[S.jsx("div",{className:"text-blue-500",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),S.jsx("p",{className:"text-2xl font-bold",children:f}),S.jsx("p",{className:"text-xs text-gray-500 mt-0.5 font-medium",children:"Portes (7j)"})]}),S.jsxs("button",{onClick:i,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[S.jsx("div",{className:"text-green-500",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),S.jsx("p",{className:"text-xs text-gray-500 mt-1.5 font-medium",children:"Crer un ensemble"})]}),S.jsxs("button",{onClick:r,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[S.jsx("div",{className:"text-red-500",children:S.jsx(dm,{})}),S.jsx("p",{className:"text-2xl font-bold",children:d}),S.jsx("p",{className:"text-xs text-gray-500 mt-0.5 font-medium",children:"Favorites"})]})]})]})})]}),yZ=({activeTab:t,onTabChange:e,counts:n})=>{const i=[{id:"home",label:"Home",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),count:null},{id:"hauts",label:"Hauts",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),count:n.hauts},{id:"bas",label:"Bas",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),count:n.bas},{id:"chaussures",label:"Chaussures",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5"})}),count:n.chaussures},{id:"accessoires",label:"Accessoires",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),count:n.accessoires}];return S.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-raisin-black border-t border-black/10 dark:border-white/10 z-30 pb-8",children:S.jsx("div",{className:"flex justify-around items-center h-16",children:i.map(r=>{const o=t===r.id;return S.jsxs("button",{onClick:()=>{Ps.light(),e(r.id)},className:`flex flex-col items-center justify-center gap-1 px-3 py-2 transition-all flex-1 ${o?"text-gold":"text-gray-500 dark:text-gray-400"}`,children:[S.jsxs("div",{className:"relative",children:[r.icon,r.count!==null&&r.count>0&&S.jsx("span",{className:`absolute -top-1 -right-1 text-[10px] font-bold px-1.5 py-0.5 rounded-full ${o?"bg-gold text-onyx":"bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300"}`,children:r.count})]}),S.jsx("span",{className:`text-xs font-medium ${o?"font-bold":""}`,children:r.label})]},r.id)})})})},vZ=({analysis:t,onClose:e})=>{if(!t)return null;const n={high:"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20",medium:"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 border-yellow-500/20",low:"bg-green-500/10 text-green-600 dark:text-green-400 border-green-500/20"},i={high:"Priorit haute",medium:"Priorit moyenne",low:"Bonne ide"};return S.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[S.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-gold to-gold-dark p-6 rounded-t-2xl",children:S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsx("h2",{className:"text-2xl font-serif font-bold text-onyx",children:" Suggestions d'Achats"}),S.jsx("button",{onClick:e,className:"p-2 hover:bg-black/10 rounded-full transition",children:S.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),S.jsxs("div",{className:"p-6 space-y-6",children:[S.jsxs("div",{className:"bg-gold/5 border border-gold/20 rounded-xl p-4",children:[S.jsx("h3",{className:"font-semibold text-lg mb-2",children:" Analyse de votre garde-robe"}),S.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:t.summary})]}),S.jsxs("div",{children:[S.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[S.jsx("span",{className:"text-green-500",children:""})," Points forts"]}),S.jsx("div",{className:"grid gap-2",children:t.strengths.map((r,o)=>S.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[S.jsx("span",{className:"text-green-500 mt-0.5",children:""}),S.jsx("span",{children:r})]},o))})]}),S.jsxs("div",{children:[S.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[S.jsx("span",{className:"text-orange-500",children:""})," Opportunits d'amlioration"]}),S.jsx("div",{className:"grid gap-2",children:t.gaps.map((r,o)=>S.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[S.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),S.jsx("span",{children:r})]},o))})]}),S.jsxs("div",{children:[S.jsxs("h3",{className:"font-semibold text-xl mb-4 flex items-center gap-2",children:[S.jsx("span",{children:""})," Pices recommandes"]}),S.jsx("div",{className:"grid gap-4",children:t.suggestions.map((r,o)=>S.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-xl p-5 hover:shadow-lg transition-shadow",children:[S.jsxs("div",{className:"flex justify-between items-start mb-3",children:[S.jsxs("div",{children:[S.jsx("h4",{className:"font-bold text-lg",children:r.description}),S.jsx("p",{className:"text-sm text-gray-500",children:r.category})]}),S.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${n[r.priority]}`,children:i[r.priority]})]}),S.jsxs("p",{className:"text-sm mb-3 text-gray-700 dark:text-gray-300",children:[S.jsx("span",{className:"font-semibold",children:"Pourquoi ?"})," ",r.reason]}),S.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.estimatedPrice&&S.jsxs("div",{className:"flex items-center gap-2 text-sm text-gold font-semibold",children:[S.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.estimatedPrice]}),S.jsxs("a",{href:`https://www.google.com/search?q=${encodeURIComponent(r.searchQuery+" achat en ligne")}&tbm=shop`,target:"_blank",rel:"noopener noreferrer",className:"ml-auto inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white text-sm font-semibold rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all shadow-sm hover:shadow-md",children:[S.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Rechercher en ligne"]})]})]},o))})]})]})]})})},_Z=({open:t,clothingItems:e,clothingSets:n,onGenerate:i,isGenerating:r,suggestedOutfits:o,onClose:l,weatherInfo:c,weatherError:d,favoriteOutfits:f,onToggleFavorite:p,onGenerateVisual:v,generatingVisualFor:T,selectedOutfit:b,onSelectOutfit:C})=>{const N=document.documentElement.classList.contains("dark"),D=B.useRef(null);return B.useEffect(()=>{!r&&o.length>0&&D.current&&D.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[r,o.length]),S.jsx(Ku,{open:t,onDismiss:l,className:N?"dark":"",header:S.jsxs("div",{className:"flex items-center justify-between w-full",children:[S.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Crateur de Tenues"}),S.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:O})=>O*.65,snapPoints:({minHeight:O,maxHeight:k})=>[O,k*.65,k*.85],children:S.jsxs("div",{className:"p-6 space-y-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[S.jsx(xk,{clothingItems:e,clothingSets:n,onGenerate:i,isGenerating:r,weatherInfo:c,weatherError:d}),r&&S.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[S.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),S.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"L'IA compose vos tenues..."})]}),S.jsx("div",{ref:D,children:o.length>0&&S.jsx(yu,{outfits:o,allClothingItems:e,allClothingSets:n,favoriteOutfits:f,onToggleFavorite:p,onGenerateVisual:v,generatingVisualFor:T,selectedOutfit:b,onSelectOutfit:C})})]})})},TZ=({open:t,clothingItems:e,clothingSets:n,onGeneratePlan:i,isGenerating:r,vacationPlan:o,onCreateSet:l,onClose:c})=>{const d=document.documentElement.classList.contains("dark");return S.jsx(Ku,{open:t,onDismiss:c,className:d?"dark":"",header:S.jsxs("div",{className:"flex items-center justify-between w-full",children:[S.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Planificateur de Valise"}),S.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:f})=>f*.6,snapPoints:({maxHeight:f})=>[f*.55,f*.85],children:S.jsxs("div",{className:"p-6 space-y-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow min-h-[45vh]",children:[S.jsx(b2,{clothingItems:e,clothingSets:n,onGeneratePlan:i,isGenerating:r}),r&&S.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[S.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),S.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"Prparation de votre valise..."})]}),o&&S.jsx(w2,{plan:o,allClothingItems:e,allClothingSets:n,onCreateSet:l})]})})},EZ=({open:t,clothingItems:e,clothingSets:n,onClose:i,onCreateSet:r})=>{const[o,l]=B.useState(new Set),c=new Set(n.flatMap(b=>b.itemIds)),f=e.filter(b=>!c.has(b.id)).reduce((b,C)=>(b[C.category]||(b[C.category]=[]),b[C.category].push(C),b),{}),p=b=>{l(C=>{const N=new Set(C);return N.has(b)?N.delete(b):N.add(b),N})},v=()=>{if(o.size<2){alert("Veuillez slectionner au moins 2 articles.");return}const b=window.prompt("Donnez un nom  cet ensemble :");b&&r(b,Array.from(o))},T=document.documentElement.classList.contains("dark");return S.jsx(Ku,{open:t,onDismiss:i,className:T?"dark":"",header:S.jsxs("div",{className:"flex items-center justify-between w-full",children:[S.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Crer un ensemble"}),S.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),footer:o.size>0&&S.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 bg-white dark:bg-raisin-black",children:S.jsxs("button",{onClick:v,disabled:o.size<2,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600",children:[S.jsx(dg,{}),"Lier ",o.size," article",o.size>1?"s":""]})}),defaultSnap:({maxHeight:b})=>b*.6,snapPoints:({maxHeight:b})=>[b*.6,b*.85],children:S.jsxs("div",{className:"p-4 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[S.jsx("p",{className:"text-sm text-center text-gray-500 dark:text-gray-400 mb-4",children:"Slectionnez les articles que vous souhaitez lier (ex: une veste et son pantalon)."}),S.jsx("div",{className:"space-y-4",children:Object.keys(f).map(b=>f[b].length>0&&S.jsxs("div",{children:[S.jsx("h3",{className:"font-semibold text-lg mb-2",children:b}),S.jsx("div",{className:"grid grid-cols-3 gap-3",children:f[b].map(C=>{const N=o.has(C.id);return S.jsxs("button",{onClick:()=>p(C.id),className:"relative rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform border-2",style:{borderColor:N?"#D4AF37":"transparent"},children:[N&&S.jsx("div",{className:"absolute top-1 right-1 p-0.5 bg-gold rounded-full text-onyx z-10",children:S.jsx(qT,{})}),S.jsx("div",{className:"aspect-square",children:S.jsx("img",{src:C.imageSrc,alt:C.analysis,className:"w-full h-full object-cover"})}),S.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),S.jsx("p",{className:"absolute bottom-1 left-1 right-1 text-white text-xs font-medium line-clamp-2 p-1",children:C.analysis})]},C.id)})})]},b))})]})})},SZ=(t,e)=>{const n=oa(ir,"users",t,"items"),i=eg(n);return ig(i,o=>{const l=o.docs.map(c=>({id:c.id,...c.data()}));e(l)},o=>{console.error("Erreur (items listener):",o)})},bZ=async(t,e)=>{try{const n=oa(ir,"users",t,"items");return(await ng(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'un vtement:",n),n}},T1=async(t,e,n)=>{try{const i=Bu(ir,"users",t,"items",e);await TF(i,n)}catch(i){throw console.error("Erreur lors de la mise  jour d'un vtement:",i),i}},E1=async(t,e)=>{try{const n=Bu(ir,"users",t,"items",e);await wT(n)}catch(n){throw console.error("Erreur lors de la suppression d'un vtement:",n),n}},wZ=(t,e)=>{const n=oa(ir,"users",t,"favoriteOutfits"),i=eg(n);return ig(i,o=>{const l=o.docs.map(c=>({id:c.id,...c.data()}));e(l)},o=>{console.error("Erreur (favoriteOutfits listener):",o)})},xZ=async(t,e)=>{try{const n=oa(ir,"users",t,"favoriteOutfits");return(await ng(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'une tenue favorite:",n),n}},AZ=async(t,e)=>{try{const n=Bu(ir,"users",t,"favoriteOutfits",e);await wT(n)}catch(n){throw console.error("Erreur lors de la suppression d'une tenue favorite:",n),n}},CZ=(t,e)=>{const n=oa(ir,"users",t,"sets"),i=eg(n);return ig(i,o=>{const l=o.docs.map(c=>({id:c.id,...c.data()}));e(l)},o=>{console.error("Erreur (sets listener):",o)})},IZ=async(t,e)=>{try{const n=oa(ir,"users",t,"sets");return(await ng(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'un ensemble:",n),n}},RZ=async(t,e)=>{try{const n=Bu(ir,"users",t,"sets",e);await wT(n)}catch(n){throw console.error("Erreur lors de la suppression d'un ensemble:",n),n}},NZ=async(t,e,n,i)=>{try{const r=oa(ir,"users",t,"wearHistory");return(await ng(r,{outfitTitle:e,outfitDescription:n,itemIds:i,wornAt:Date.now()})).id}catch(r){throw console.error("Erreur lors de l'ajout de l'historique de port:",r),r}},PZ=(t,e)=>{const n=oa(ir,"users",t,"wearHistory"),i=Date.now()-720*60*60*1e3,r=eg(n,mF("wornAt",">=",i));return ig(r,l=>{const c=l.docs.map(d=>({id:d.id,...d.data()}));e(c)},l=>{console.error("Erreur (wearHistory listener):",l)})},DZ=async(t,e,n)=>{try{const i=hD(gD,`users/${t}/clothing/${n}.jpg`);return await IB(i,e,"data_url"),await fD(i)}catch(i){throw console.error("Erreur upload vtement:",i),i}},MZ=async(t,e)=>{try{const n=await kZ(e,1024),i=hD(gD,`users/${t}/profile/model_photo.jpg`);return await CB(i,n),await fD(i)}catch(n){throw console.error("Erreur upload photo profil:",n),n}},kZ=(t,e)=>new Promise((n,i)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=o=>{var c;const l=new Image;l.src=(c=o.target)==null?void 0:c.result,l.onload=()=>{const d=e/l.width,f=document.createElement("canvas");f.width=e,f.height=l.height*d;const p=f.getContext("2d");p?(p.drawImage(l,0,0,f.width,f.height),f.toBlob(v=>{v?n(v):i(new Error("Blob creation failed"))},"image/jpeg",.85)):i(new Error("Canvas error"))}},r.onerror=o=>i(o)}),x2=B.createContext(void 0),VZ=t=>new Promise((e,n)=>{const i=new FileReader;i.readAsDataURL(t),i.onload=r=>{var l;const o=new Image;o.src=(l=r.target)==null?void 0:l.result,o.onload=()=>{const c=document.createElement("canvas"),d=800,f=d/o.width;c.width=d,c.height=o.height*f;const p=c.getContext("2d");p?(p.drawImage(o,0,0,c.width,c.height),e(c.toDataURL("image/jpeg",.7))):n(new Error("Canvas context error"))},o.onerror=c=>n(c)},i.onerror=r=>n(r)}),LZ=({children:t,user:e})=>{const[n,i]=B.useState([]),[r,o]=B.useState([]),[l,c]=B.useState([]),[d,f]=B.useState([]),[p,v]=B.useState(localStorage.getItem("dressmup_user_model_url")),[T,b]=B.useState(!1),[C,N]=B.useState(!0);B.useEffect(()=>{p&&localStorage.setItem("dressmup_user_model_url",p)},[p]),B.useEffect(()=>{if(e){const V=SZ(e.uid,W=>{i(W),N(!1)}),z=CZ(e.uid,W=>{o(W)}),Ee=wZ(e.uid,W=>{c(W)}),Ne=PZ(e.uid,W=>{f(W)});return()=>{V(),z(),Ee(),Ne()}}else i([]),o([]),c([]),f([]),N(!1)},[e]);const D=B.useCallback(async V=>{if(e)try{const z=await MZ(e.uid,V);v(z)}catch(z){throw console.error("Erreur mise  jour photo modle:",z),z}},[e]),O=B.useCallback(async V=>{if(!(V.length===0||!e)){b(!0);try{const z=V.map(he=>VZ(he)),Ee=await Promise.all(z),Ne=Ee.map(he=>he.split(",")[1]),W=await M7(Ne),se=Math.min(W.length,V.length);for(let he=0;he<se;he++){const xe=W[he];let Ae="";try{Ae=await bZ(e.uid,{...xe,createdAt:Date.now()});const j=await DZ(e.uid,Ee[he],Ae);await T1(e.uid,Ae,{imageSrc:j})}catch(j){console.error(`chec pour ${V[he].name}.`,j),Ae&&await E1(e.uid,Ae)}}}catch(z){console.error("Erreur lot:",z)}finally{b(!1)}}},[e]),k=B.useCallback(async V=>{e&&await E1(e.uid,V)},[e]),F=B.useCallback(async V=>{e&&await T1(e.uid,V.id,V)},[e]),G=B.useCallback(async V=>{if(!e)return;const{id:z,...Ee}=V;await xZ(e.uid,Ee)},[e]),K=B.useCallback(async V=>{e&&await AZ(e.uid,V)},[e]),H=B.useCallback(async(V,z)=>{var W;if(!e)return;const Ee=((W=n.find(se=>se.id===z[0]))==null?void 0:W.imageSrc)||"",Ne={name:V,itemIds:z,imageSrc:Ee};await IZ(e.uid,Ne)},[e,n]),R=B.useCallback(async V=>{e&&await RZ(e.uid,V)},[e]),I=B.useCallback(async(V,z,Ee)=>{e&&await NZ(e.uid,V,z,Ee)},[e]),P=B.useCallback(V=>d.filter(z=>z.itemIds.includes(V)).length,[d]),U=B.useCallback(()=>{const V=Date.now()-6048e5;return d.filter(z=>z.wornAt>=V).sort((z,Ee)=>Ee.wornAt-z.wornAt)},[d]),q={clothingItems:n,clothingSets:r,favoriteOutfits:l,wearHistory:d,userModelImage:p,setUserModelImage:v,updateUserModelPhoto:D,isAnalyzing:T,analyzeClothingItems:O,deleteClothingItem:k,updateClothingItem:F,createClothingSet:H,deleteClothingSet:R,addFavoriteOutfit:G,deleteFavoriteOutfit:K,recordOutfitWear:I,getItemWearCount:P,getWornOutfitsLast7Days:U,loading:C};return S.jsx(x2.Provider,{value:q,children:t})},OZ=()=>{const t=B.useContext(x2);if(t===void 0)throw new Error("useWardrobe doit tre utilis  l'intrieur d'un WardrobeProvider");return t},UZ=({open:t,onClose:e,allClothingItems:n,allClothingSets:i,favoriteOutfits:r,onToggleFavorite:o,onGenerateVisual:l,generatingVisualFor:c,selectedOutfit:d,onSelectOutfit:f})=>{const p=document.documentElement.classList.contains("dark");return S.jsx(Ku,{open:t,onDismiss:e,className:p?"dark":"",header:S.jsxs("div",{className:"flex items-center justify-between w-full",children:[S.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Tenues Favorites"}),S.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:v})=>v*.65,snapPoints:({maxHeight:v})=>[v*.65,v*.85],children:S.jsx("div",{className:"p-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:r.length>0?S.jsx(yu,{outfits:r,allClothingItems:n,allClothingSets:i,favoriteOutfits:r,onToggleFavorite:o,onGenerateVisual:l,generatingVisualFor:c,selectedOutfit:d,onSelectOutfit:f}):S.jsxs("div",{className:"text-center py-12",children:[S.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas encore de tenues favorites."}),S.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Cliquez sur le cur  sur une tenue gnre pour l'ajouter."})]})})})},FZ=({open:t,onClose:e,allClothingItems:n,allClothingSets:i,wornOutfits:r,favoriteOutfits:o,onToggleFavorite:l,onGenerateVisual:c,generatingVisualFor:d,selectedOutfit:f,onSelectOutfit:p})=>{const v=document.documentElement.classList.contains("dark"),T=B.useMemo(()=>r.map(b=>{const C=b.itemIds.map(N=>{const D=n.find(O=>O.id===N);return D?{id:D.id,description:D.analysis}:{id:N,description:"Article supprim"}});return{titre:b.outfitTitle,description:b.outfitDescription,vetements:C}}),[r,n]);return S.jsx(Ku,{open:t,onDismiss:e,className:v?"dark":"",header:S.jsxs("div",{className:"flex items-center justify-between w-full",children:[S.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Tenues Portes"}),S.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:b})=>b*.65,snapPoints:({maxHeight:b})=>[b*.65,b*.85],children:S.jsx("div",{className:"p-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:T.length>0?S.jsxs(S.Fragment,{children:[S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Vos tenues portes ces 7 derniers jours"}),S.jsx(yu,{outfits:T,allClothingItems:n,allClothingSets:i,favoriteOutfits:o,onToggleFavorite:l,onGenerateVisual:c,generatingVisualFor:d,selectedOutfit:f,onSelectOutfit:p})]}):S.jsxs("div",{className:"text-center py-12",children:[S.jsx("div",{className:"text-6xl mb-4",children:""}),S.jsx("p",{className:"text-gray-500 font-medium",children:"Vous n'avez pas encore port de tenue cette semaine."}),S.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Slectionnez une tenue en cliquant sur  pour l'ajouter  votre historique"})]})})})},gp=!1,Va=t=>{const e=t instanceof Error?t.message:String(t);return e.includes("API_KEY_HTTP_REFERRER_BLOCKED")||e.includes("403")?" Accs refus par Google : Domaine non autoris. Vrifiez la console Google Cloud.":e.includes("429")||e.includes("payment method")||e.includes("throttled")?" Limite de gnration atteinte. Veuillez attendre quelques secondes ou ajouter un moyen de paiement sur Replicate.":e.includes("prediction")?" Erreur lors de la gnration visuelle. Le service est peut-tre surcharg.":e.includes("404")?" Modle introuvable. Veuillez ressayer plus tard.":e.includes("API_KEY_INVALID")?" Cl API invalide. Vrifiez votre configuration.":e},BZ=()=>{const[t,e]=B.useState(null),[n,i]=B.useState(null),[r,o]=B.useState([]),[l,c]=B.useState(null),[d,f]=B.useState(!1),[p,v]=B.useState(null),[T,b]=B.useState(!1),[C,N]=B.useState(null),[D,O]=B.useState(!1),[k,F]=B.useState("home"),[G,K]=B.useState(!1),[H,R]=B.useState(!1),[I,P]=B.useState(!1),[U,q]=B.useState(!1),[V,z]=B.useState(!1),[Ee,Ne]=B.useState(!1),[W,se]=B.useState(null),[he,xe]=B.useState(null),[Ae,j]=B.useState(!1),[ee,ne]=B.useState(0),[oe,ye]=B.useState(null),[Oe,Ie]=B.useState(null),[Vt,At]=B.useState(!1),[qn,wi]=B.useState(!1),[Ft,zn]=B.useState(""),[Cn,Mn]=B.useState("favorites");B.useEffect(()=>{if(n){const me=n.includes("Accs refus")?1e4:5e3,be=setTimeout(()=>i(null),me);return()=>clearTimeout(be)}},[n]);const[ci,rr]=B.useState(()=>!localStorage.getItem("dressmup_onboarding_complete")),{clothingItems:xi,clothingSets:Ai,isAnalyzing:kn,analyzeClothingItems:di,deleteClothingItem:wr,createClothingSet:zi,updateClothingItem:bt,deleteClothingSet:yn,favoriteOutfits:ke,addFavoriteOutfit:Lt,deleteFavoriteOutfit:Qt,userModelImage:tn,recordOutfitWear:xr,getItemWearCount:ua,getWornOutfitsLast7Days:In,loading:fi}=OZ(),[Bt,le]=B.useState(null),pe=Pn.useMemo(()=>(xi||[]).sort((be,qe)=>(qe.isFavorite?1:0)-(be.isFavorite?1:0)),[xi]),Te=B.useCallback(me=>{const be=ke.find(qe=>qe.titre===me.titre&&qe.description===me.description);be?(Qt(be.id),le("Retir des favoris"),Ps.light()):(Lt(me),le("Ajout aux favoris "),Ps.success()),setTimeout(()=>le(null),2e3)},[ke,Lt,Qt]),ze=B.useCallback(me=>{if((l==null?void 0:l.titre)===me.titre&&(l==null?void 0:l.description)===me.description)c(null),le("Slection annule"),Ps.light();else{c(me),le("Tenue choisie "),Ps.success();const qe=me.vetements.map(Dt=>Dt.id);xr(me.titre,me.description,qe)}setTimeout(()=>le(null),2e3)},[l,xr]),Ve=Pn.useMemo(()=>Ai||[],[Ai]),Qe=Pn.useMemo(()=>new Set(Ve.flatMap(me=>me.itemIds||[])),[Ve]),Ye=B.useMemo(()=>In(),[In]);B.useEffect(()=>{const me=async be=>{const qe=be.coords.latitude,Dt=be.coords.longitude,Ri=jD.openWeatherApiKey,hi=`https://api.openweathermap.org/data/2.5/weather?lat=${qe}&lon=${Dt}&appid=${Ri}&units=metric&lang=fr`;try{const Ar=await fetch(hi);if(!Ar.ok)throw new Error("Impossible de rcuprer la mto.");const pi=await Ar.json(),Ni=`${Math.round(pi.main.temp)}C, ${pi.weather[0].description},  ${pi.name}`;se(Ni),xe(null)}catch{xe("Mto indisponible.")}};navigator.geolocation?navigator.geolocation.getCurrentPosition(me,()=>xe("Activez la golocalisation pour la mto.")):xe("Golocalisation non supporte.")},[]);const et=B.useCallback(async(me,be)=>{if(pe.length===0){i("Veuillez d'abord ajouter des vtements.");return}f(!0),i(null);const qe=W?`Mto actuelle : ${W}. Occasion : ${me}`:`Occasion : ${me}`;try{const Dt=await k7(pe,Ve,qe,be);o(Dt)}catch(Dt){i(Va(Dt))}finally{f(!1)}},[pe,Ve,W]),tt=B.useCallback(async(me,be,qe)=>{if(pe.length===0){i("Veuillez d'abord ajouter des vtements.");return}b(!0),i(null);try{const Dt=await L7(pe,Ve,me,be,qe);v(Dt)}catch(Dt){i(Va(Dt))}finally{b(!1)}},[pe,Ve]),Me=B.useCallback(async()=>{if(pe.length<3){i("Ajoutez au moins 3 vtements pour une analyse.");return}O(!0),i(null);try{const me=await V7(pe,Ve);N(me)}catch(me){i(Va(me))}finally{O(!1)}},[pe,Ve]),He=B.useCallback(async me=>{},[pe,tn]),cn=B.useCallback(()=>K(!0),[]),Ci=B.useCallback(()=>R(!0),[]),Yt=me=>e(me),Ct=()=>e(null),ft=me=>{wr(me).catch(be=>i(Va(be))),e(null)},Hn=me=>{bt(me).catch(be=>i(Va(be))),e(me)},Ot=me=>{const be=`Focus sur l'article : ${me.analysis}`;et(be,me),e(null),window.innerWidth<768&&K(!0)},dn=B.useCallback((me,be)=>{zi(me,be).catch(qe=>i(Va(qe)))},[zi]),Ii=B.useCallback(me=>{yn(me).catch(be=>i(Va(be)))},[yn]);B.useCallback(async()=>{j(!0),Ps.medium(),await new Promise(me=>setTimeout(me,1e3)),j(!1),Ps.success()},[]);const Rn={hauts:pe.filter(me=>me.category==="Hauts").length,bas:pe.filter(me=>me.category==="Bas").length,chaussures:pe.filter(me=>me.category==="Chaussures").length,accessoires:pe.filter(me=>me.category==="Accessoires").length},vn=B.useMemo(()=>{if(k==="home")return[];let me=pe.filter(be=>k==="hauts"?be.category==="Hauts":k==="bas"?be.category==="Bas":k==="chaussures"?be.category==="Chaussures":k==="accessoires"?be.category==="Accessoires":!1);if(Ft.trim()){const be=Ft.toLowerCase();me=me.filter(qe=>qe.analysis.toLowerCase().includes(be)||qe.color.toLowerCase().includes(be)||qe.material.toLowerCase().includes(be))}return[...me].sort((be,qe)=>{switch(Cn){case"favorites":return(qe.isFavorite?1:0)-(be.isFavorite?1:0);case"newest":return(qe.createdAt||0)-(be.createdAt||0);case"oldest":return(be.createdAt||0)-(qe.createdAt||0);case"color":return be.color.localeCompare(qe.color);default:return 0}})},[k,pe,Ft,Cn]),Hi=G||H||I||!!t||!!C||!!Oe||Ee;return B.useEffect(()=>{const me=document.querySelector("header");me&&(me.style.zIndex=Hi?"10":"50")},[Hi]),B.useEffect(()=>{if(!kn&&pe.length>ee&&ee>0){const me=pe.length-ee;le(`${me} vtement${me>1?"s":""} ajout${me>1?"s":""} `),setTimeout(()=>le(null),2e3)}ne(pe.length)},[kn,pe.length]),S.jsxs("main",{className:"container mx-auto px-4 lg:px-8 py-10",children:[gp,n&&S.jsxs("div",{className:"bg-red-500/20 border border-red-500 text-red-700 dark:text-red-300 px-4 py-3 rounded-lg relative mb-8 flex items-center justify-between shadow-sm animate-pulse",role:"alert",children:[S.jsxs("div",{className:"flex-1 mr-2",children:[S.jsx("strong",{className:"font-bold block mb-1",children:"Attention :"}),S.jsx("span",{className:"block text-sm leading-relaxed",children:n})]}),S.jsx("button",{onClick:()=>i(null),className:"p-1.5 hover:bg-red-500/30 rounded-full transition-colors flex-shrink-0","aria-label":"Fermer",children:S.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[S.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[gp,pe.length>=3&&S.jsxs("div",{className:"hidden md:block bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-xl p-4 md:p-6 flex flex-col md:flex-row items-start md:items-center gap-4 md:justify-between",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-bold mb-2",children:" Besoin d'inspiration ?"}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour rendre votre garde-robe plus polyvalente"})]}),S.jsx("button",{onClick:Me,disabled:D,className:"px-4 md:px-6 py-3 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm md:text-base flex-shrink-0",children:D?"Analyse...":"Analyser ma garde-robe"})]}),S.jsx("div",{className:"hidden md:block",children:S.jsx(wJ,{onAnalyze:di,isAnalyzing:kn})}),S.jsx("div",{className:"hidden md:block",children:S.jsx(IJ,{clothingItems:pe,clothingSets:Ve,onItemClick:Yt,onDeleteItem:ft,onCreateSet:dn,isLoading:fi})}),S.jsxs("div",{className:"md:hidden",children:[k==="home"&&S.jsx(gZ,{onAnalyzeWardrobe:Me,onScrollToOutfits:cn,onScrollToVacation:Ci,onStartSetCreation:()=>P(!0),onShowFavorites:()=>q(!0),onShowWornOutfits:()=>z(!0),isAnalyzingWardrobe:D,clothingCount:pe.length,favoriteOutfitCount:ke.length,wornOutfitCount:Ye.length}),k!=="home"&&S.jsxs("div",{className:"pb-24",children:[Ae&&S.jsx("div",{className:"flex justify-center py-4",children:S.jsxs("svg",{className:"animate-spin h-6 w-6 text-gold",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),S.jsxs("div",{className:"text-center py-4 px-4",children:[S.jsx("h2",{className:"text-2xl font-bold mb-1 capitalize",children:k}),S.jsxs("p",{className:"text-sm text-gray-500",children:[vn.length," vtement",vn.length>1?"s":""]})]}),S.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[S.jsxs("div",{className:"relative",children:[S.jsx(YD,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),S.jsx("input",{type:"text",value:Ft,onChange:me=>zn(me.target.value),placeholder:"Rechercher...",className:"w-full pl-10 pr-10 py-2.5 bg-white dark:bg-raisin-black border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-all"}),Ft&&S.jsx("button",{onClick:()=>zn(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors","aria-label":"Effacer",children:S.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),S.jsxs("div",{className:"relative",children:[S.jsx(JD,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"}),S.jsxs("select",{value:Cn,onChange:me=>Mn(me.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white dark:bg-raisin-black border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent appearance-none cursor-pointer transition-all",children:[S.jsx("option",{value:"favorites",children:"Favoris d'abord"}),S.jsx("option",{value:"newest",children:"Plus rcents"}),S.jsx("option",{value:"oldest",children:"Plus anciens"}),S.jsx("option",{value:"color",children:"Couleur (A-Z)"})]}),S.jsx(_d,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),vn.length>0?S.jsx("div",{className:"grid grid-cols-2 gap-3 px-4",children:vn.map(me=>S.jsxs("div",{onClick:()=>Yt(me),className:"relative bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform",children:[me.isFavorite?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-red-500 z-10",children:S.jsx(Cu,{className:"w-4 h-4"})}):Qe.has(me.id)?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:S.jsx(dg,{})}):null,S.jsx("div",{className:"aspect-square",children:S.jsx("img",{src:me.imageSrc,alt:me.analysis,loading:"lazy",className:"w-full h-full object-cover"})}),S.jsxs("div",{className:"p-3",children:[S.jsx("p",{className:"text-sm font-medium line-clamp-2",children:me.analysis}),S.jsx("p",{className:"text-xs text-gray-500 mt-1",children:me.color})]})]},me.id))}):S.jsx("div",{className:"text-center py-12 px-4",children:Ft?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"text-6xl mb-4",children:""}),S.jsxs("p",{className:"text-gray-500 font-medium",children:['Aucun rsultat pour "',Ft,'"']}),S.jsx("button",{onClick:()=>zn(""),className:"mt-3 text-gold font-medium",children:"Effacer la recherche"})]}):S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"text-6xl mb-4",children:""}),S.jsx("p",{className:"text-gray-500 font-medium",children:"Aucun vtement dans cette catgorie"}),S.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Appuyez sur + pour en ajouter"})]})})]})]})]}),S.jsxs("div",{className:"lg:col-span-1 space-y-10 lg:sticky lg:top-40 hidden md:block",children:[S.jsx("div",{id:"outfit-generator",children:S.jsx(xk,{clothingItems:pe,clothingSets:Ve,onGenerate:et,isGenerating:d,weatherInfo:W,weatherError:he})}),r.length>0&&S.jsx(yu,{outfits:r,allClothingItems:pe,allClothingSets:Ve,favoriteOutfits:ke,onToggleFavorite:Te,onGenerateVisual:He,generatingVisualFor:oe,selectedOutfit:l,onSelectOutfit:ze}),ke.length>0&&S.jsxs("div",{className:"mt-10 border border-black/10 dark:border-white/10 rounded-xl overflow-hidden bg-white dark:bg-raisin-black shadow-sm",children:[S.jsxs("button",{onClick:()=>At(!Vt),className:"w-full flex items-center justify-between p-5 hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(Cu,{className:"text-gold w-5 h-5"}),S.jsxs("h2",{className:"text-xl font-serif font-bold text-raisin-black dark:text-snow",children:["Mes Favoris ",S.jsxs("span",{className:"text-sm font-sans font-normal text-gray-500",children:["(",ke.length,")"]})]})]}),S.jsx("div",{className:`transition-transform duration-300 ${Vt?"rotate-180":""} text-gray-400`,children:S.jsx(_d,{})})]}),Vt&&S.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 bg-snow dark:bg-onyx/50 max-h-[600px] overflow-y-auto custom-scrollbar",children:S.jsx(yu,{outfits:ke,allClothingItems:pe,allClothingSets:Ve,favoriteOutfits:ke,onToggleFavorite:Te,onGenerateVisual:He,generatingVisualFor:oe,selectedOutfit:l,onSelectOutfit:ze})})]}),Ye.length>0&&S.jsxs("div",{className:"mt-10 border border-black/10 dark:border-white/10 rounded-xl overflow-hidden bg-white dark:bg-raisin-black shadow-sm",children:[S.jsxs("button",{onClick:()=>wi(!qn),className:"w-full flex items-center justify-between p-5 hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),S.jsxs("h2",{className:"text-xl font-serif font-bold text-raisin-black dark:text-snow",children:["Tenues Portes ",S.jsxs("span",{className:"text-sm font-sans font-normal text-gray-500",children:["(7 derniers jours - ",Ye.length,")"]})]})]}),S.jsx("div",{className:`transition-transform duration-300 ${qn?"rotate-180":""} text-gray-400`,children:S.jsx(_d,{})})]}),qn&&S.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 bg-snow dark:bg-onyx/50 max-h-[600px] overflow-y-auto custom-scrollbar",children:S.jsx(yu,{outfits:Ye.map(me=>({titre:me.outfitTitle,description:me.outfitDescription,vetements:me.itemIds.map(be=>{const qe=pe.find(Dt=>Dt.id===be);return{id:be,description:qe?qe.analysis:"Article supprim"}})})),allClothingItems:pe,allClothingSets:Ve,favoriteOutfits:ke,onToggleFavorite:Te,onGenerateVisual:He,generatingVisualFor:oe,selectedOutfit:l,onSelectOutfit:ze})})]}),S.jsx("div",{id:"vacation-planner",children:S.jsx(b2,{clothingItems:pe,clothingSets:Ve,onGeneratePlan:tt,isGenerating:T})}),p&&S.jsx(w2,{plan:p,allClothingItems:pe,allClothingSets:Ve,onCreateSet:dn})]})]}),t&&S.jsx(pZ,{item:t,clothingSets:Ve,onClose:Ct,onUpdate:Hn,onGenerateFrom:Ot,onRemoveSet:Ii,onDelete:ft,getItemWearCount:ua}),C&&S.jsx(vZ,{analysis:C,onClose:()=>N(null)}),gp,S.jsx(mZ,{onFilesSelected:di,isAnalyzing:kn,isOtherModalOpen:Hi}),S.jsx(yZ,{activeTab:k,onTabChange:F,counts:Rn}),S.jsx(_Z,{open:G,clothingItems:pe,clothingSets:Ve,onGenerate:et,isGenerating:d,suggestedOutfits:r,onClose:()=>K(!1),weatherInfo:W,weatherError:he,favoriteOutfits:ke,onToggleFavorite:Te,onGenerateVisual:He,generatingVisualFor:oe,selectedOutfit:l,onSelectOutfit:ze}),S.jsx(TZ,{open:H,clothingItems:pe,clothingSets:Ve,onGeneratePlan:tt,isGenerating:T,vacationPlan:p,onCreateSet:dn,onClose:()=>R(!1)}),S.jsx(EZ,{open:I,clothingItems:pe,clothingSets:Ve,onClose:()=>P(!1),onCreateSet:(me,be)=>{dn(me,be),P(!1)}}),S.jsx(UZ,{open:U,onClose:()=>q(!1),allClothingItems:pe,allClothingSets:Ve,favoriteOutfits:ke,onToggleFavorite:Te,onGenerateVisual:He,generatingVisualFor:oe,selectedOutfit:l,onSelectOutfit:ze}),S.jsx(FZ,{open:V,onClose:()=>z(!1),allClothingItems:pe,allClothingSets:Ve,wornOutfits:Ye,favoriteOutfits:ke,onToggleFavorite:Te,onGenerateVisual:He,generatingVisualFor:oe,selectedOutfit:l,onSelectOutfit:ze}),gp,ci&&S.jsx(cL,{onComplete:()=>rr(!1)}),Bt&&S.jsx("div",{className:"fixed bottom-32 md:bottom-8 left-1/2 -translate-x-1/2 z-[100]",children:S.jsxs("div",{className:"bg-raisin-black dark:bg-white text-white dark:text-raisin-black px-6 py-3 rounded-full shadow-2xl font-medium flex items-center gap-2 animate-slide-up",children:[Bt.includes("")&&S.jsx("span",{className:"animate-pulse",children:""}),Bt.includes("Retir")&&S.jsx("span",{children:""}),Bt.includes("ajout")&&!Bt.includes("")&&S.jsx("span",{children:""}),S.jsx("span",{children:Bt.replace("","").trim()})]})})]})},qZ=()=>{const[t,e]=B.useState(null),[n,i]=B.useState("dark"),[r,o]=B.useState(!1);B.useEffect(()=>{const c=Y4(Oa,d=>{e(d),d&&o(!1)});return()=>c()},[]),B.useEffect(()=>{n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[n]);const l=()=>{i(c=>c==="light"?"dark":"light")};return S.jsx("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow transition-colors duration-300",children:t?S.jsxs(S.Fragment,{children:[S.jsx($7,{theme:n,toggleTheme:l,children:S.jsx(vI,{user:t})}),S.jsx(LZ,{user:t,children:S.jsx(BZ,{})})]}):r?S.jsx("div",{className:"flex items-center justify-center min-h-screen p-4 animate-slide-up",children:S.jsxs("div",{className:"w-full max-w-md",children:[S.jsx("button",{onClick:()=>o(!1),className:"mb-4 flex items-center gap-2 text-gray-500 hover:text-gold transition-colors text-sm font-medium",children:" Retour"}),S.jsx(vI,{user:t})]})}):S.jsx(bJ,{onGetStarted:()=>o(!0)})})},A2=document.getElementById("root");if(!A2)throw new Error("L'lment root est introuvable dans le DOM");const zZ=uL.createRoot(A2);zZ.render(S.jsx(Pn.StrictMode,{children:S.jsx(qZ,{})}));
