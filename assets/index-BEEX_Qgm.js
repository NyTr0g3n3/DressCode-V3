(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function h1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cv={exports:{}},Mc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BA;function LV(){if(BA)return Mc;BA=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,o){var l=null;if(o!==void 0&&(l=""+o),r.key!==void 0&&(l=""+r.key),"key"in r){o={};for(var c in r)c!=="key"&&(o[c]=r[c])}else o=r;return r=o.ref,{$$typeof:t,type:i,key:l,ref:r!==void 0?r:null,props:o}}return Mc.Fragment=e,Mc.jsx=n,Mc.jsxs=n,Mc}var qA;function OV(){return qA||(qA=1,cv.exports=LV()),cv.exports}var S=OV(),fv={exports:{}},He={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zA;function UV(){if(zA)return He;zA=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),T=Symbol.iterator;function w($){return $===null||typeof $!="object"?null:($=T&&$[T]||$["@@iterator"],typeof $=="function"?$:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,P={};function O($,Z,pe){this.props=$,this.context=Z,this.refs=P,this.updater=pe||x}O.prototype.isReactComponent={},O.prototype.setState=function($,Z){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,Z,"setState")},O.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function k(){}k.prototype=O.prototype;function F($,Z,pe){this.props=$,this.context=Z,this.refs=P,this.updater=pe||x}var G=F.prototype=new k;G.constructor=F,N(G,O.prototype),G.isPureReactComponent=!0;var K=Array.isArray;function H(){}var R={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function D($,Z,pe){var re=pe.ref;return{$$typeof:t,type:$,key:Z,ref:re!==void 0?re:null,props:pe}}function V($,Z){return D($.type,Z,$.props)}function U($){return typeof $=="object"&&$!==null&&$.$$typeof===t}function z($){var Z={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(pe){return Z[pe]})}var B=/\/+/g;function Re($,Z){return typeof $=="object"&&$!==null&&$.key!=null?z(""+$.key):Z.toString(36)}function Ue($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(H,H):($.status="pending",$.then(function(Z){$.status==="pending"&&($.status="fulfilled",$.value=Z)},function(Z){$.status==="pending"&&($.status="rejected",$.reason=Z)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function ee($,Z,pe,re,he){var Te=typeof $;(Te==="undefined"||Te==="boolean")&&($=null);var Ve=!1;if($===null)Ve=!0;else switch(Te){case"bigint":case"string":case"number":Ve=!0;break;case"object":switch($.$$typeof){case t:case e:Ve=!0;break;case p:return Ve=$._init,ee(Ve($._payload),Z,pe,re,he)}}if(Ve)return he=he($),Ve=re===""?"."+Re($,0):re,K(he)?(pe="",Ve!=null&&(pe=Ve.replace(B,"$&/")+"/"),ee(he,Z,pe,"",function(Un){return Un})):he!=null&&(U(he)&&(he=V(he,pe+(he.key==null||$&&$.key===he.key?"":(""+he.key).replace(B,"$&/")+"/")+Ve)),Z.push(he)),1;Ve=0;var qe=re===""?".":re+":";if(K($))for(var yt=0;yt<$.length;yt++)re=$[yt],Te=qe+Re(re,yt),Ve+=ee(re,Z,pe,Te,he);else if(yt=w($),typeof yt=="function")for($=yt.call($),yt=0;!(re=$.next()).done;)re=re.value,Te=qe+Re(re,yt++),Ve+=ee(re,Z,pe,Te,he);else if(Te==="object"){if(typeof $.then=="function")return ee(Ue($),Z,pe,re,he);throw Z=String($),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return Ve}function oe($,Z,pe){if($==null)return $;var re=[],he=0;return ee($,re,"","",function(Te){return Z.call(pe,Te,he++)}),re}function me($){if($._status===-1){var Z=$._result;Z=Z(),Z.then(function(pe){($._status===0||$._status===-1)&&($._status=1,$._result=pe)},function(pe){($._status===0||$._status===-1)&&($._status=2,$._result=pe)}),$._status===-1&&($._status=0,$._result=Z)}if($._status===1)return $._result.default;throw $._result}var xe=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)},be={map:oe,forEach:function($,Z,pe){oe($,function(){Z.apply(this,arguments)},pe)},count:function($){var Z=0;return oe($,function(){Z++}),Z},toArray:function($){return oe($,function(Z){return Z})||[]},only:function($){if(!U($))throw Error("React.Children.only expected to receive a single React element child.");return $}};return He.Activity=v,He.Children=be,He.Component=O,He.Fragment=n,He.Profiler=r,He.PureComponent=F,He.StrictMode=i,He.Suspense=f,He.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,He.__COMPILER_RUNTIME={__proto__:null,c:function($){return R.H.useMemoCache($)}},He.cache=function($){return function(){return $.apply(null,arguments)}},He.cacheSignal=function(){return null},He.cloneElement=function($,Z,pe){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var re=N({},$.props),he=$.key;if(Z!=null)for(Te in Z.key!==void 0&&(he=""+Z.key),Z)!I.call(Z,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&Z.ref===void 0||(re[Te]=Z[Te]);var Te=arguments.length-2;if(Te===1)re.children=pe;else if(1<Te){for(var Ve=Array(Te),qe=0;qe<Te;qe++)Ve[qe]=arguments[qe+2];re.children=Ve}return D($.type,he,re)},He.createContext=function($){return $={$$typeof:l,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:o,_context:$},$},He.createElement=function($,Z,pe){var re,he={},Te=null;if(Z!=null)for(re in Z.key!==void 0&&(Te=""+Z.key),Z)I.call(Z,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(he[re]=Z[re]);var Ve=arguments.length-2;if(Ve===1)he.children=pe;else if(1<Ve){for(var qe=Array(Ve),yt=0;yt<Ve;yt++)qe[yt]=arguments[yt+2];he.children=qe}if($&&$.defaultProps)for(re in Ve=$.defaultProps,Ve)he[re]===void 0&&(he[re]=Ve[re]);return D($,Te,he)},He.createRef=function(){return{current:null}},He.forwardRef=function($){return{$$typeof:c,render:$}},He.isValidElement=U,He.lazy=function($){return{$$typeof:p,_payload:{_status:-1,_result:$},_init:me}},He.memo=function($,Z){return{$$typeof:d,type:$,compare:Z===void 0?null:Z}},He.startTransition=function($){var Z=R.T,pe={};R.T=pe;try{var re=$(),he=R.S;he!==null&&he(pe,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(H,xe)}catch(Te){xe(Te)}finally{Z!==null&&pe.types!==null&&(Z.types=pe.types),R.T=Z}},He.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},He.use=function($){return R.H.use($)},He.useActionState=function($,Z,pe){return R.H.useActionState($,Z,pe)},He.useCallback=function($,Z){return R.H.useCallback($,Z)},He.useContext=function($){return R.H.useContext($)},He.useDebugValue=function(){},He.useDeferredValue=function($,Z){return R.H.useDeferredValue($,Z)},He.useEffect=function($,Z){return R.H.useEffect($,Z)},He.useEffectEvent=function($){return R.H.useEffectEvent($)},He.useId=function(){return R.H.useId()},He.useImperativeHandle=function($,Z,pe){return R.H.useImperativeHandle($,Z,pe)},He.useInsertionEffect=function($,Z){return R.H.useInsertionEffect($,Z)},He.useLayoutEffect=function($,Z){return R.H.useLayoutEffect($,Z)},He.useMemo=function($,Z){return R.H.useMemo($,Z)},He.useOptimistic=function($,Z){return R.H.useOptimistic($,Z)},He.useReducer=function($,Z,pe){return R.H.useReducer($,Z,pe)},He.useRef=function($){return R.H.useRef($)},He.useState=function($){return R.H.useState($)},He.useSyncExternalStore=function($,Z,pe){return R.H.useSyncExternalStore($,Z,pe)},He.useTransition=function(){return R.H.useTransition()},He.version="19.2.0",He}var HA;function p_(){return HA||(HA=1,fv.exports=UV()),fv.exports}var q=p_();const Cn=h1(q);var dv={exports:{}},kc={},hv={exports:{}},pv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GA;function FV(){return GA||(GA=1,(function(t){function e(ee,oe){var me=ee.length;ee.push(oe);e:for(;0<me;){var xe=me-1>>>1,be=ee[xe];if(0<r(be,oe))ee[xe]=oe,ee[me]=be,me=xe;else break e}}function n(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var oe=ee[0],me=ee.pop();if(me!==oe){ee[0]=me;e:for(var xe=0,be=ee.length,$=be>>>1;xe<$;){var Z=2*(xe+1)-1,pe=ee[Z],re=Z+1,he=ee[re];if(0>r(pe,me))re<be&&0>r(he,pe)?(ee[xe]=he,ee[re]=me,xe=re):(ee[xe]=pe,ee[Z]=me,xe=Z);else if(re<be&&0>r(he,me))ee[xe]=he,ee[re]=me,xe=re;else break e}}return oe}function r(ee,oe){var me=ee.sortIndex-oe.sortIndex;return me!==0?me:ee.id-oe.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var f=[],d=[],p=1,v=null,T=3,w=!1,x=!1,N=!1,P=!1,O=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function G(ee){for(var oe=n(d);oe!==null;){if(oe.callback===null)i(d);else if(oe.startTime<=ee)i(d),oe.sortIndex=oe.expirationTime,e(f,oe);else break;oe=n(d)}}function K(ee){if(N=!1,G(ee),!x)if(n(f)!==null)x=!0,H||(H=!0,z());else{var oe=n(d);oe!==null&&Ue(K,oe.startTime-ee)}}var H=!1,R=-1,I=5,D=-1;function V(){return P?!0:!(t.unstable_now()-D<I)}function U(){if(P=!1,H){var ee=t.unstable_now();D=ee;var oe=!0;try{e:{x=!1,N&&(N=!1,k(R),R=-1),w=!0;var me=T;try{t:{for(G(ee),v=n(f);v!==null&&!(v.expirationTime>ee&&V());){var xe=v.callback;if(typeof xe=="function"){v.callback=null,T=v.priorityLevel;var be=xe(v.expirationTime<=ee);if(ee=t.unstable_now(),typeof be=="function"){v.callback=be,G(ee),oe=!0;break t}v===n(f)&&i(f),G(ee)}else i(f);v=n(f)}if(v!==null)oe=!0;else{var $=n(d);$!==null&&Ue(K,$.startTime-ee),oe=!1}}break e}finally{v=null,T=me,w=!1}oe=void 0}}finally{oe?z():H=!1}}}var z;if(typeof F=="function")z=function(){F(U)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,Re=B.port2;B.port1.onmessage=U,z=function(){Re.postMessage(null)}}else z=function(){O(U,0)};function Ue(ee,oe){R=O(function(){ee(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(ee){switch(T){case 1:case 2:case 3:var oe=3;break;default:oe=T}var me=T;T=oe;try{return ee()}finally{T=me}},t.unstable_requestPaint=function(){P=!0},t.unstable_runWithPriority=function(ee,oe){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var me=T;T=ee;try{return oe()}finally{T=me}},t.unstable_scheduleCallback=function(ee,oe,me){var xe=t.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?xe+me:xe):me=xe,ee){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=me+be,ee={id:p++,callback:oe,priorityLevel:ee,startTime:me,expirationTime:be,sortIndex:-1},me>xe?(ee.sortIndex=me,e(d,ee),n(f)===null&&ee===n(d)&&(N?(k(R),R=-1):N=!0,Ue(K,me-xe))):(ee.sortIndex=be,e(f,ee),x||w||(x=!0,H||(H=!0,z()))),ee},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(ee){var oe=T;return function(){var me=T;T=oe;try{return ee.apply(this,arguments)}finally{T=me}}}})(pv)),pv}var jA;function BV(){return jA||(jA=1,hv.exports=FV()),hv.exports}var mv={exports:{}},ei={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $A;function qV(){if($A)return ei;$A=1;var t=p_();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(f,d,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:f,containerInfo:d,implementation:p}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return ei.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ei.createPortal=function(f,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return o(f,d,null,p)},ei.flushSync=function(f){var d=l.T,p=i.p;try{if(l.T=null,i.p=2,f)return f()}finally{l.T=d,i.p=p,i.d.f()}},ei.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(f,d))},ei.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},ei.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var p=d.as,v=c(p,d.crossOrigin),T=typeof d.integrity=="string"?d.integrity:void 0,w=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?i.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:v,integrity:T,fetchPriority:w}):p==="script"&&i.d.X(f,{crossOrigin:v,integrity:T,fetchPriority:w,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},ei.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=c(d.as,d.crossOrigin);i.d.M(f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(f)},ei.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,v=c(p,d.crossOrigin);i.d.L(f,p,{crossOrigin:v,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},ei.preloadModule=function(f,d){if(typeof f=="string")if(d){var p=c(d.as,d.crossOrigin);i.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(f)},ei.requestFormReset=function(f){i.d.r(f)},ei.unstable_batchedUpdates=function(f,d){return f(d)},ei.useFormState=function(f,d,p){return l.H.useFormState(f,d,p)},ei.useFormStatus=function(){return l.H.useHostTransitionStatus()},ei.version="19.2.0",ei}var KA;function p1(){if(KA)return mv.exports;KA=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),mv.exports=qV(),mv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YA;function zV(){if(YA)return kc;YA=1;var t=BV(),e=p_(),n=p1();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function l(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function c(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function f(s){if(o(s)!==s)throw Error(i(188))}function d(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(i(188));return a!==s?null:s}for(var u=s,h=a;;){var _=u.return;if(_===null)break;var E=_.alternate;if(E===null){if(h=_.return,h!==null){u=h;continue}break}if(_.child===E.child){for(E=_.child;E;){if(E===u)return f(_),s;if(E===h)return f(_),a;E=E.sibling}throw Error(i(188))}if(u.return!==h.return)u=_,h=E;else{for(var b=!1,M=_.child;M;){if(M===u){b=!0,u=_,h=E;break}if(M===h){b=!0,h=_,u=E;break}M=M.sibling}if(!b){for(M=E.child;M;){if(M===u){b=!0,u=E,h=_;break}if(M===h){b=!0,h=E,u=_;break}M=M.sibling}if(!b)throw Error(i(189))}}if(u.alternate!==h)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?s:a}function p(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=p(s),a!==null)return a;s=s.sibling}return null}var v=Object.assign,T=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),F=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function z(s){return s===null||typeof s!="object"?null:(s=U&&s[U]||s["@@iterator"],typeof s=="function"?s:null)}var B=Symbol.for("react.client.reference");function Re(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===B?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case N:return"Fragment";case O:return"Profiler";case P:return"StrictMode";case K:return"Suspense";case H:return"SuspenseList";case D:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case x:return"Portal";case F:return s.displayName||"Context";case k:return(s._context.displayName||"Context")+".Consumer";case G:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case R:return a=s.displayName||null,a!==null?a:Re(s.type)||"Memo";case I:a=s._payload,s=s._init;try{return Re(s(a))}catch{}}return null}var Ue=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},xe=[],be=-1;function $(s){return{current:s}}function Z(s){0>be||(s.current=xe[be],xe[be]=null,be--)}function pe(s,a){be++,xe[be]=s.current,s.current=a}var re=$(null),he=$(null),Te=$(null),Ve=$(null);function qe(s,a){switch(pe(Te,a),pe(he,s),pe(re,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?uA(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=uA(a),s=cA(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Z(re),pe(re,s)}function yt(){Z(re),Z(he),Z(Te)}function Un(s){s.memoizedState!==null&&pe(Ve,s);var a=re.current,u=cA(a,s.type);a!==u&&(pe(he,s),pe(re,u))}function ci(s){he.current===s&&(Z(re),Z(he)),Ve.current===s&&(Z(Ve),Rc._currentValue=me)}var xt,Jn;function In(s){if(xt===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);xt=a&&a[1]||"",Jn=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xt+s+Jn}var Rn=!1;function Wn(s,a){if(!s||Rn)return"";Rn=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(ne){var te=ne}Reflect.construct(s,[],le)}else{try{le.call()}catch(ne){te=ne}s.call(le.prototype)}}else{try{throw Error()}catch(ne){te=ne}(le=s())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(ne){if(ne&&te&&typeof ne.stack=="string")return[ne.stack,te.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=h.DetermineComponentFrameRoot(),b=E[0],M=E[1];if(b&&M){var j=b.split(`
`),Q=M.split(`
`);for(_=h=0;h<j.length&&!j[h].includes("DetermineComponentFrameRoot");)h++;for(;_<Q.length&&!Q[_].includes("DetermineComponentFrameRoot");)_++;if(h===j.length||_===Q.length)for(h=j.length-1,_=Q.length-1;1<=h&&0<=_&&j[h]!==Q[_];)_--;for(;1<=h&&0<=_;h--,_--)if(j[h]!==Q[_]){if(h!==1||_!==1)do if(h--,_--,0>_||j[h]!==Q[_]){var se=`
`+j[h].replace(" at new "," at ");return s.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",s.displayName)),se}while(1<=h&&0<=_);break}}}finally{Rn=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?In(u):""}function Si(s,a){switch(s.tag){case 26:case 27:case 5:return In(s.type);case 16:return In("Lazy");case 13:return s.child!==a&&a!==null?In("Suspense Fallback"):In("Suspense");case 19:return In("SuspenseList");case 0:case 15:return Wn(s.type,!1);case 11:return Wn(s.type.render,!1);case 1:return Wn(s.type,!0);case 31:return In("Activity");default:return""}}function Je(s){try{var a="",u=null;do a+=Si(s,u),u=s,s=s.return;while(s);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var Xn=Object.prototype.hasOwnProperty,ft=t.unstable_scheduleCallback,wi=t.unstable_cancelCallback,Vi=t.unstable_shouldYield,Li=t.unstable_requestPaint,Tt=t.unstable_now,Qt=t.unstable_getCurrentPriorityLevel,Ke=t.unstable_ImmediatePriority,Lt=t.unstable_UserBlockingPriority,Yt=t.unstable_NormalPriority,Zt=t.unstable_LowPriority,Sr=t.unstable_IdlePriority,ra=t.log,Nn=t.unstable_setDisableYieldValue,Pn=null,mn=null;function ue(s){if(typeof ra=="function"&&Nn(s),mn&&typeof mn.setStrictMode=="function")try{mn.setStrictMode(Pn,s)}catch{}}var Ee=Math.clz32?Math.clz32:Ae,Se=Math.log,de=Math.LN2;function Ae(s){return s>>>=0,s===0?32:31-(Se(s)/de|0)|0}var Ne=256,ke=262144,Xe=4194304;function et(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Pe(s,a,u){var h=s.pendingLanes;if(h===0)return 0;var _=0,E=s.suspendedLanes,b=s.pingedLanes;s=s.warmLanes;var M=h&134217727;return M!==0?(h=M&~E,h!==0?_=et(h):(b&=M,b!==0?_=et(b):u||(u=M&~s,u!==0&&(_=et(u))))):(M=h&~E,M!==0?_=et(M):b!==0?_=et(b):u||(u=h&~s,u!==0&&(_=et(u)))),_===0?0:a!==0&&a!==_&&(a&E)===0&&(E=_&-_,u=a&-a,E>=u||E===32&&(u&4194048)!==0)?a:_}function $e(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function ln(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zi(){var s=Xe;return Xe<<=1,(Xe&62914560)===0&&(Xe=4194304),s}function un(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function Mt(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function At(s,a,u,h,_,E){var b=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var M=s.entanglements,j=s.expirationTimes,Q=s.hiddenUpdates;for(u=b&~u;0<u;){var se=31-Ee(u),le=1<<se;M[se]=0,j[se]=-1;var te=Q[se];if(te!==null)for(Q[se]=null,se=0;se<te.length;se++){var ne=te[se];ne!==null&&(ne.lane&=-536870913)}u&=~le}h!==0&&fi(s,h,0),E!==0&&_===0&&s.tag!==0&&(s.suspendedLanes|=E&~(b&~a))}function fi(s,a,u){s.pendingLanes|=a,s.suspendedLanes&=~a;var h=31-Ee(a);s.entangledLanes|=a,s.entanglements[h]=s.entanglements[h]|1073741824|u&261930}function jt(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var h=31-Ee(u),_=1<<h;_&a|s[h]&a&&(s[h]|=a),u&=~_}}function Qn(s,a){var u=a&-a;return u=(u&42)!==0?1:er(u),(u&(s.suspendedLanes|a))!==0?0:u}function er(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Fn(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function di(){var s=oe.p;return s!==0?s:(s=window.event,s===void 0?32:MA(s.type))}function as(s,a){var u=oe.p;try{return oe.p=s,a()}finally{oe.p=u}}var Oi=Math.random().toString(36).slice(2),Ot="__reactFiber$"+Oi,cn="__reactProps$"+Oi,Ui="__reactContainer$"+Oi,tr="__reactEvents$"+Oi,Fi="__reactListeners$"+Oi,sa="__reactHandles$"+Oi,wr="__reactResources$"+Oi,nr="__reactMarker$"+Oi;function ir(s){delete s[Ot],delete s[cn],delete s[tr],delete s[Fi],delete s[sa]}function Ai(s){var a=s[Ot];if(a)return a;for(var u=s.parentNode;u;){if(a=u[Ui]||u[Ot]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=yA(s);s!==null;){if(u=s[Ot])return u;s=yA(s)}return a}s=u,u=s.parentNode}return null}function rr(s){if(s=s[Ot]||s[Ui]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function qr(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function hi(s){var a=s[wr];return a||(a=s[wr]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function $t(s){s[nr]=!0}var Ar=new Set,br={};function pi(s,a){zr(s,a),zr(s+"Capture",a)}function zr(s,a){for(br[s]=a,s=0;s<a.length;s++)Ar.add(a[s])}var fg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bu={},qu={};function fd(s){return Xn.call(qu,s)?!0:Xn.call(Bu,s)?!1:fg.test(s)?qu[s]=!0:(Bu[s]=!0,!1)}function Gs(s,a,u){if(fd(a))if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+u)}}function js(s,a,u){if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+u)}}function sr(s,a,u,h){if(h===null)s.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(a,u,""+h)}}function mi(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function dd(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function dg(s,a,u){var h=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var _=h.get,E=h.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return _.call(this)},set:function(b){u=""+b,E.call(this,b)}}),Object.defineProperty(s,a,{enumerable:h.enumerable}),{getValue:function(){return u},setValue:function(b){u=""+b},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function il(s){if(!s._valueTracker){var a=dd(s)?"checked":"value";s._valueTracker=dg(s,a,""+s[a])}}function zu(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),h="";return s&&(h=dd(s)?s.checked?"true":"false":s.value),s=h,s!==u?(a.setValue(s),!0):!1}function rl(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var ls=/[\n"\\]/g;function en(s){return s.replace(ls,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function $s(s,a,u,h,_,E,b,M){s.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?s.type=b:s.removeAttribute("type"),a!=null?b==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+mi(a)):s.value!==""+mi(a)&&(s.value=""+mi(a)):b!=="submit"&&b!=="reset"||s.removeAttribute("value"),a!=null?sl(s,b,mi(a)):u!=null?sl(s,b,mi(u)):h!=null&&s.removeAttribute("value"),_==null&&E!=null&&(s.defaultChecked=!!E),_!=null&&(s.checked=_&&typeof _!="function"&&typeof _!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?s.name=""+mi(M):s.removeAttribute("name")}function oa(s,a,u,h,_,E,b,M){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.type=E),a!=null||u!=null){if(!(E!=="submit"&&E!=="reset"||a!=null)){il(s);return}u=u!=null?""+mi(u):"",a=a!=null?""+mi(a):u,M||a===s.value||(s.value=a),s.defaultValue=a}h=h??_,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=M?s.checked:!!h,s.defaultChecked=!!h,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(s.name=b),il(s)}function sl(s,a,u){a==="number"&&rl(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function dt(s,a,u,h){if(s=s.options,a){a={};for(var _=0;_<u.length;_++)a["$"+u[_]]=!0;for(u=0;u<s.length;u++)_=a.hasOwnProperty("$"+s[u].value),s[u].selected!==_&&(s[u].selected=_),_&&h&&(s[u].defaultSelected=!0)}else{for(u=""+mi(u),a=null,_=0;_<s.length;_++){if(s[_].value===u){s[_].selected=!0,h&&(s[_].defaultSelected=!0);return}a!==null||s[_].disabled||(a=s[_])}a!==null&&(a.selected=!0)}}function aa(s,a,u){if(a!=null&&(a=""+mi(a),a!==s.value&&(s.value=a),u==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=u!=null?""+mi(u):""}function Ks(s,a,u,h){if(a==null){if(h!=null){if(u!=null)throw Error(i(92));if(Ue(h)){if(1<h.length)throw Error(i(93));h=h[0]}u=h}u==null&&(u=""),a=u}u=mi(a),s.defaultValue=u,h=s.textContent,h===u&&h!==""&&h!==null&&(s.value=h),il(s)}function or(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var hg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hu(s,a,u){var h=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?h?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":h?s.setProperty(a,u):typeof u!="number"||u===0||hg.has(a)?a==="float"?s.cssFloat=u:s[a]=(""+u).trim():s[a]=u+"px"}function hd(s,a,u){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,u!=null){for(var h in u)!u.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var _ in a)h=a[_],a.hasOwnProperty(_)&&u[_]!==h&&Hu(s,_,h)}else for(var E in a)a.hasOwnProperty(E)&&Hu(s,E,a[E])}function Gu(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Hr(s){return mg.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Dn(){}var ol=null;function al(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var us=null,Bi=null;function pd(s){var a=rr(s);if(a&&(s=a.stateNode)){var u=s[cn]||null;e:switch(s=a.stateNode,a.type){case"input":if($s(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+en(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var h=u[a];if(h!==s&&h.form===s.form){var _=h[cn]||null;if(!_)throw Error(i(90));$s(h,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(a=0;a<u.length;a++)h=u[a],h.form===s.form&&zu(h)}break e;case"textarea":aa(s,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&dt(s,!!u.multiple,a,!1)}}}var ju=!1;function md(s,a,u){if(ju)return s(a,u);ju=!0;try{var h=s(a);return h}finally{if(ju=!1,(us!==null||Bi!==null)&&(fh(),us&&(a=us,s=Bi,Bi=us=null,pd(a),s)))for(a=0;a<s.length;a++)pd(s[a])}}function bi(s,a){var u=s.stateNode;if(u===null)return null;var h=u[cn]||null;if(h===null)return null;u=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(i(231,a,typeof u));return u}var Cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$u=!1;if(Cr)try{var Gr={};Object.defineProperty(Gr,"passive",{get:function(){$u=!0}}),window.addEventListener("test",Gr,Gr),window.removeEventListener("test",Gr,Gr)}catch{$u=!1}var qi=null,ll=null,jr=null;function Ys(){if(jr)return jr;var s,a=ll,u=a.length,h,_="value"in qi?qi.value:qi.textContent,E=_.length;for(s=0;s<u&&a[s]===_[s];s++);var b=u-s;for(h=1;h<=b&&a[u-h]===_[E-h];h++);return jr=_.slice(s,1<h?1-h:void 0)}function la(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Js(){return!0}function Ut(){return!1}function Zn(s){function a(u,h,_,E,b){this._reactName=u,this._targetInst=_,this.type=h,this.nativeEvent=E,this.target=b,this.currentTarget=null;for(var M in s)s.hasOwnProperty(M)&&(u=s[M],this[M]=u?u(E):E[M]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Js:Ut,this.isPropagationStopped=Ut,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Js)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Js)},persist:function(){},isPersistent:Js}),a}var cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ua=Zn(cs),Ws=v({},cs,{view:0,detail:0}),gd=Zn(Ws),Xs,ul,gi,ca=v({},Ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zs,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==gi&&(gi&&s.type==="mousemove"?(Xs=s.screenX-gi.screenX,ul=s.screenY-gi.screenY):ul=Xs=0,gi=s),Xs)},movementY:function(s){return"movementY"in s?s.movementY:ul}}),yd=Zn(ca),fa=v({},ca,{dataTransfer:0}),vd=Zn(fa),Ku=v({},Ws,{relatedTarget:0}),Qs=Zn(Ku),_d=v({},cs,{animationName:0,elapsedTime:0,pseudoElement:0}),cl=Zn(_d),gg=v({},cs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Td=Zn(gg),da=v({},cs,{data:0}),Yu=Zn(da),Ed={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ju={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sd(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=Wu[s])?!!a[s]:!1}function Zs(){return Sd}var wd=v({},Ws,{key:function(s){if(s.key){var a=Ed[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=la(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Ju[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zs,charCode:function(s){return s.type==="keypress"?la(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?la(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Ad=Zn(wd),fs=v({},ca,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xu=Zn(fs),bd=v({},Ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zs}),Cd=Zn(bd),xd=v({},cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),fl=Zn(xd),yi=v({},ca,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Id=Zn(yi),Rd=v({},cs,{newState:0,oldState:0}),eo=Zn(Rd),g=[9,13,27,32],A=Cr&&"CompositionEvent"in window,C=null;Cr&&"documentMode"in document&&(C=document.documentMode);var L=Cr&&"TextEvent"in window&&!C,W=Cr&&(!A||C&&8<C&&11>=C),ie=" ",ge=!1;function Et(s,a){switch(s){case"keyup":return g.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gn(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Qe=!1;function Mn(s,a){switch(s){case"compositionend":return gn(a);case"keypress":return a.which!==32?null:(ge=!0,ie);case"textInput":return s=a.data,s===ie&&ge?null:s;default:return null}}function kn(s,a){if(Qe)return s==="compositionend"||!A&&Et(s,a)?(s=Ys(),jr=ll=qi=null,Qe=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return W&&a.locale!=="ko"?null:a.data;default:return null}}var to={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ci(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!to[s.type]:a==="textarea"}function ha(s,a,u,h){us?Bi?Bi.push(h):Bi=[h]:us=h,a=vh(a,"onChange"),0<a.length&&(u=new ua("onChange","change",null,u,h),s.push({event:u,listeners:a}))}var ds=null,Qu=null;function u2(s){iA(s,0)}function Nd(s){var a=qr(s);if(zu(a))return s}function SE(s,a){if(s==="change")return a}var wE=!1;if(Cr){var yg;if(Cr){var vg="oninput"in document;if(!vg){var AE=document.createElement("div");AE.setAttribute("oninput","return;"),vg=typeof AE.oninput=="function"}yg=vg}else yg=!1;wE=yg&&(!document.documentMode||9<document.documentMode)}function bE(){ds&&(ds.detachEvent("onpropertychange",CE),Qu=ds=null)}function CE(s){if(s.propertyName==="value"&&Nd(Qu)){var a=[];ha(a,Qu,s,al(s)),md(u2,a)}}function c2(s,a,u){s==="focusin"?(bE(),ds=a,Qu=u,ds.attachEvent("onpropertychange",CE)):s==="focusout"&&bE()}function f2(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Nd(Qu)}function d2(s,a){if(s==="click")return Nd(a)}function h2(s,a){if(s==="input"||s==="change")return Nd(a)}function p2(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var zi=typeof Object.is=="function"?Object.is:p2;function Zu(s,a){if(zi(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),h=Object.keys(a);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var _=u[h];if(!Xn.call(a,_)||!zi(s[_],a[_]))return!1}return!0}function xE(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function IE(s,a){var u=xE(s);s=0;for(var h;u;){if(u.nodeType===3){if(h=s+u.textContent.length,s<=a&&h>=a)return{node:u,offset:a-s};s=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=xE(u)}}function RE(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?RE(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function NE(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=rl(s.document);a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=rl(s.document)}return a}function _g(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var m2=Cr&&"documentMode"in document&&11>=document.documentMode,dl=null,Tg=null,ec=null,Eg=!1;function PE(s,a,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Eg||dl==null||dl!==rl(h)||(h=dl,"selectionStart"in h&&_g(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),ec&&Zu(ec,h)||(ec=h,h=vh(Tg,"onSelect"),0<h.length&&(a=new ua("onSelect","select",null,a,u),s.push({event:a,listeners:h}),a.target=dl)))}function pa(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var hl={animationend:pa("Animation","AnimationEnd"),animationiteration:pa("Animation","AnimationIteration"),animationstart:pa("Animation","AnimationStart"),transitionrun:pa("Transition","TransitionRun"),transitionstart:pa("Transition","TransitionStart"),transitioncancel:pa("Transition","TransitionCancel"),transitionend:pa("Transition","TransitionEnd")},Sg={},DE={};Cr&&(DE=document.createElement("div").style,"AnimationEvent"in window||(delete hl.animationend.animation,delete hl.animationiteration.animation,delete hl.animationstart.animation),"TransitionEvent"in window||delete hl.transitionend.transition);function ma(s){if(Sg[s])return Sg[s];if(!hl[s])return s;var a=hl[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in DE)return Sg[s]=a[u];return s}var ME=ma("animationend"),kE=ma("animationiteration"),VE=ma("animationstart"),g2=ma("transitionrun"),y2=ma("transitionstart"),v2=ma("transitioncancel"),LE=ma("transitionend"),OE=new Map,wg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wg.push("scrollEnd");function xr(s,a){OE.set(s,a),pi(a,[s])}var Pd=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},ar=[],pl=0,Ag=0;function Dd(){for(var s=pl,a=Ag=pl=0;a<s;){var u=ar[a];ar[a++]=null;var h=ar[a];ar[a++]=null;var _=ar[a];ar[a++]=null;var E=ar[a];if(ar[a++]=null,h!==null&&_!==null){var b=h.pending;b===null?_.next=_:(_.next=b.next,b.next=_),h.pending=_}E!==0&&UE(u,_,E)}}function Md(s,a,u,h){ar[pl++]=s,ar[pl++]=a,ar[pl++]=u,ar[pl++]=h,Ag|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function bg(s,a,u,h){return Md(s,a,u,h),kd(s)}function ga(s,a){return Md(s,null,null,a),kd(s)}function UE(s,a,u){s.lanes|=u;var h=s.alternate;h!==null&&(h.lanes|=u);for(var _=!1,E=s.return;E!==null;)E.childLanes|=u,h=E.alternate,h!==null&&(h.childLanes|=u),E.tag===22&&(s=E.stateNode,s===null||s._visibility&1||(_=!0)),s=E,E=E.return;return s.tag===3?(E=s.stateNode,_&&a!==null&&(_=31-Ee(u),s=E.hiddenUpdates,h=s[_],h===null?s[_]=[a]:h.push(a),a.lane=u|536870912),E):null}function kd(s){if(50<Sc)throw Sc=0,ky=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var ml={};function _2(s,a,u,h){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hi(s,a,u,h){return new _2(s,a,u,h)}function Cg(s){return s=s.prototype,!(!s||!s.isReactComponent)}function hs(s,a){var u=s.alternate;return u===null?(u=Hi(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function FE(s,a){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,a=u.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function Vd(s,a,u,h,_,E){var b=0;if(h=s,typeof s=="function")Cg(s)&&(b=1);else if(typeof s=="string")b=AV(s,u,re.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case D:return s=Hi(31,u,a,_),s.elementType=D,s.lanes=E,s;case N:return ya(u.children,_,E,a);case P:b=8,_|=24;break;case O:return s=Hi(12,u,a,_|2),s.elementType=O,s.lanes=E,s;case K:return s=Hi(13,u,a,_),s.elementType=K,s.lanes=E,s;case H:return s=Hi(19,u,a,_),s.elementType=H,s.lanes=E,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case F:b=10;break e;case k:b=9;break e;case G:b=11;break e;case R:b=14;break e;case I:b=16,h=null;break e}b=29,u=Error(i(130,s===null?"null":typeof s,"")),h=null}return a=Hi(b,u,a,_),a.elementType=s,a.type=h,a.lanes=E,a}function ya(s,a,u,h){return s=Hi(7,s,h,a),s.lanes=u,s}function xg(s,a,u){return s=Hi(6,s,null,a),s.lanes=u,s}function BE(s){var a=Hi(18,null,null,0);return a.stateNode=s,a}function Ig(s,a,u){return a=Hi(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var qE=new WeakMap;function lr(s,a){if(typeof s=="object"&&s!==null){var u=qE.get(s);return u!==void 0?u:(a={value:s,source:a,stack:Je(a)},qE.set(s,a),a)}return{value:s,source:a,stack:Je(a)}}var gl=[],yl=0,Ld=null,tc=0,ur=[],cr=0,no=null,$r=1,Kr="";function ps(s,a){gl[yl++]=tc,gl[yl++]=Ld,Ld=s,tc=a}function zE(s,a,u){ur[cr++]=$r,ur[cr++]=Kr,ur[cr++]=no,no=s;var h=$r;s=Kr;var _=32-Ee(h)-1;h&=~(1<<_),u+=1;var E=32-Ee(a)+_;if(30<E){var b=_-_%5;E=(h&(1<<b)-1).toString(32),h>>=b,_-=b,$r=1<<32-Ee(a)+_|u<<_|h,Kr=E+s}else $r=1<<E|u<<_|h,Kr=s}function Rg(s){s.return!==null&&(ps(s,1),zE(s,1,0))}function Ng(s){for(;s===Ld;)Ld=gl[--yl],gl[yl]=null,tc=gl[--yl],gl[yl]=null;for(;s===no;)no=ur[--cr],ur[cr]=null,Kr=ur[--cr],ur[cr]=null,$r=ur[--cr],ur[cr]=null}function HE(s,a){ur[cr++]=$r,ur[cr++]=Kr,ur[cr++]=no,$r=a.id,Kr=a.overflow,no=s}var Bn=null,Ft=null,lt=!1,io=null,fr=!1,Pg=Error(i(519));function ro(s){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw nc(lr(a,s)),Pg}function GE(s){var a=s.stateNode,u=s.type,h=s.memoizedProps;switch(a[Ot]=s,a[cn]=h,u){case"dialog":nt("cancel",a),nt("close",a);break;case"iframe":case"object":case"embed":nt("load",a);break;case"video":case"audio":for(u=0;u<Ac.length;u++)nt(Ac[u],a);break;case"source":nt("error",a);break;case"img":case"image":case"link":nt("error",a),nt("load",a);break;case"details":nt("toggle",a);break;case"input":nt("invalid",a),oa(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":nt("invalid",a);break;case"textarea":nt("invalid",a),Ks(a,h.value,h.defaultValue,h.children)}u=h.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||h.suppressHydrationWarning===!0||aA(a.textContent,u)?(h.popover!=null&&(nt("beforetoggle",a),nt("toggle",a)),h.onScroll!=null&&nt("scroll",a),h.onScrollEnd!=null&&nt("scrollend",a),h.onClick!=null&&(a.onclick=Dn),a=!0):a=!1,a||ro(s,!0)}function jE(s){for(Bn=s.return;Bn;)switch(Bn.tag){case 5:case 31:case 13:fr=!1;return;case 27:case 3:fr=!0;return;default:Bn=Bn.return}}function vl(s){if(s!==Bn)return!1;if(!lt)return jE(s),lt=!0,!1;var a=s.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||Jy(s.type,s.memoizedProps)),u=!u),u&&Ft&&ro(s),jE(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Ft=gA(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Ft=gA(s)}else a===27?(a=Ft,_o(s.type)?(s=ev,ev=null,Ft=s):Ft=a):Ft=Bn?hr(s.stateNode.nextSibling):null;return!0}function va(){Ft=Bn=null,lt=!1}function Dg(){var s=io;return s!==null&&(Ni===null?Ni=s:Ni.push.apply(Ni,s),io=null),s}function nc(s){io===null?io=[s]:io.push(s)}var Mg=$(null),_a=null,ms=null;function so(s,a,u){pe(Mg,a._currentValue),a._currentValue=u}function gs(s){s._currentValue=Mg.current,Z(Mg)}function kg(s,a,u){for(;s!==null;){var h=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),s===u)break;s=s.return}}function Vg(s,a,u,h){var _=s.child;for(_!==null&&(_.return=s);_!==null;){var E=_.dependencies;if(E!==null){var b=_.child;E=E.firstContext;e:for(;E!==null;){var M=E;E=_;for(var j=0;j<a.length;j++)if(M.context===a[j]){E.lanes|=u,M=E.alternate,M!==null&&(M.lanes|=u),kg(E.return,u,s),h||(b=null);break e}E=M.next}}else if(_.tag===18){if(b=_.return,b===null)throw Error(i(341));b.lanes|=u,E=b.alternate,E!==null&&(E.lanes|=u),kg(b,u,s),b=null}else b=_.child;if(b!==null)b.return=_;else for(b=_;b!==null;){if(b===s){b=null;break}if(_=b.sibling,_!==null){_.return=b.return,b=_;break}b=b.return}_=b}}function _l(s,a,u,h){s=null;for(var _=a,E=!1;_!==null;){if(!E){if((_.flags&524288)!==0)E=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var b=_.alternate;if(b===null)throw Error(i(387));if(b=b.memoizedProps,b!==null){var M=_.type;zi(_.pendingProps.value,b.value)||(s!==null?s.push(M):s=[M])}}else if(_===Ve.current){if(b=_.alternate,b===null)throw Error(i(387));b.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(s!==null?s.push(Rc):s=[Rc])}_=_.return}s!==null&&Vg(a,s,u,h),a.flags|=262144}function Od(s){for(s=s.firstContext;s!==null;){if(!zi(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Ta(s){_a=s,ms=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function qn(s){return $E(_a,s)}function Ud(s,a){return _a===null&&Ta(s),$E(s,a)}function $E(s,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},ms===null){if(s===null)throw Error(i(308));ms=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else ms=ms.next=a;return u}var T2=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(u,h){s.push(h)}};this.abort=function(){a.aborted=!0,s.forEach(function(u){return u()})}},E2=t.unstable_scheduleCallback,S2=t.unstable_NormalPriority,yn={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lg(){return{controller:new T2,data:new Map,refCount:0}}function ic(s){s.refCount--,s.refCount===0&&E2(S2,function(){s.controller.abort()})}var rc=null,Og=0,Tl=0,El=null;function w2(s,a){if(rc===null){var u=rc=[];Og=0,Tl=By(),El={status:"pending",value:void 0,then:function(h){u.push(h)}}}return Og++,a.then(KE,KE),a}function KE(){if(--Og===0&&rc!==null){El!==null&&(El.status="fulfilled");var s=rc;rc=null,Tl=0,El=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function A2(s,a){var u=[],h={status:"pending",value:null,reason:null,then:function(_){u.push(_)}};return s.then(function(){h.status="fulfilled",h.value=a;for(var _=0;_<u.length;_++)(0,u[_])(a)},function(_){for(h.status="rejected",h.reason=_,_=0;_<u.length;_++)(0,u[_])(void 0)}),h}var YE=ee.S;ee.S=function(s,a){Pw=Tt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&w2(s,a),YE!==null&&YE(s,a)};var Ea=$(null);function Ug(){var s=Ea.current;return s!==null?s:Dt.pooledCache}function Fd(s,a){a===null?pe(Ea,Ea.current):pe(Ea,a.pool)}function JE(){var s=Ug();return s===null?null:{parent:yn._currentValue,pool:s}}var Sl=Error(i(460)),Fg=Error(i(474)),Bd=Error(i(542)),qd={then:function(){}};function WE(s){return s=s.status,s==="fulfilled"||s==="rejected"}function XE(s,a,u){switch(u=s[u],u===void 0?s.push(a):u!==a&&(a.then(Dn,Dn),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,ZE(s),s;default:if(typeof a.status=="string")a.then(Dn,Dn);else{if(s=Dt,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(h){if(a.status==="pending"){var _=a;_.status="fulfilled",_.value=h}},function(h){if(a.status==="pending"){var _=a;_.status="rejected",_.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,ZE(s),s}throw wa=a,Sl}}function Sa(s){try{var a=s._init;return a(s._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(wa=u,Sl):u}}var wa=null;function QE(){if(wa===null)throw Error(i(459));var s=wa;return wa=null,s}function ZE(s){if(s===Sl||s===Bd)throw Error(i(483))}var wl=null,sc=0;function zd(s){var a=sc;return sc+=1,wl===null&&(wl=[]),XE(wl,s,a)}function oc(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function Hd(s,a){throw a.$$typeof===T?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function eS(s){function a(J,Y){if(s){var X=J.deletions;X===null?(J.deletions=[Y],J.flags|=16):X.push(Y)}}function u(J,Y){if(!s)return null;for(;Y!==null;)a(J,Y),Y=Y.sibling;return null}function h(J){for(var Y=new Map;J!==null;)J.key!==null?Y.set(J.key,J):Y.set(J.index,J),J=J.sibling;return Y}function _(J,Y){return J=hs(J,Y),J.index=0,J.sibling=null,J}function E(J,Y,X){return J.index=X,s?(X=J.alternate,X!==null?(X=X.index,X<Y?(J.flags|=67108866,Y):X):(J.flags|=67108866,Y)):(J.flags|=1048576,Y)}function b(J){return s&&J.alternate===null&&(J.flags|=67108866),J}function M(J,Y,X,ae){return Y===null||Y.tag!==6?(Y=xg(X,J.mode,ae),Y.return=J,Y):(Y=_(Y,X),Y.return=J,Y)}function j(J,Y,X,ae){var De=X.type;return De===N?se(J,Y,X.props.children,ae,X.key):Y!==null&&(Y.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===I&&Sa(De)===Y.type)?(Y=_(Y,X.props),oc(Y,X),Y.return=J,Y):(Y=Vd(X.type,X.key,X.props,null,J.mode,ae),oc(Y,X),Y.return=J,Y)}function Q(J,Y,X,ae){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==X.containerInfo||Y.stateNode.implementation!==X.implementation?(Y=Ig(X,J.mode,ae),Y.return=J,Y):(Y=_(Y,X.children||[]),Y.return=J,Y)}function se(J,Y,X,ae,De){return Y===null||Y.tag!==7?(Y=ya(X,J.mode,ae,De),Y.return=J,Y):(Y=_(Y,X),Y.return=J,Y)}function le(J,Y,X){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=xg(""+Y,J.mode,X),Y.return=J,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:return X=Vd(Y.type,Y.key,Y.props,null,J.mode,X),oc(X,Y),X.return=J,X;case x:return Y=Ig(Y,J.mode,X),Y.return=J,Y;case I:return Y=Sa(Y),le(J,Y,X)}if(Ue(Y)||z(Y))return Y=ya(Y,J.mode,X,null),Y.return=J,Y;if(typeof Y.then=="function")return le(J,zd(Y),X);if(Y.$$typeof===F)return le(J,Ud(J,Y),X);Hd(J,Y)}return null}function te(J,Y,X,ae){var De=Y!==null?Y.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return De!==null?null:M(J,Y,""+X,ae);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case w:return X.key===De?j(J,Y,X,ae):null;case x:return X.key===De?Q(J,Y,X,ae):null;case I:return X=Sa(X),te(J,Y,X,ae)}if(Ue(X)||z(X))return De!==null?null:se(J,Y,X,ae,null);if(typeof X.then=="function")return te(J,Y,zd(X),ae);if(X.$$typeof===F)return te(J,Y,Ud(J,X),ae);Hd(J,X)}return null}function ne(J,Y,X,ae,De){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return J=J.get(X)||null,M(Y,J,""+ae,De);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case w:return J=J.get(ae.key===null?X:ae.key)||null,j(Y,J,ae,De);case x:return J=J.get(ae.key===null?X:ae.key)||null,Q(Y,J,ae,De);case I:return ae=Sa(ae),ne(J,Y,X,ae,De)}if(Ue(ae)||z(ae))return J=J.get(X)||null,se(Y,J,ae,De,null);if(typeof ae.then=="function")return ne(J,Y,X,zd(ae),De);if(ae.$$typeof===F)return ne(J,Y,X,Ud(Y,ae),De);Hd(Y,ae)}return null}function Ce(J,Y,X,ae){for(var De=null,ht=null,Ie=Y,We=Y=0,st=null;Ie!==null&&We<X.length;We++){Ie.index>We?(st=Ie,Ie=null):st=Ie.sibling;var pt=te(J,Ie,X[We],ae);if(pt===null){Ie===null&&(Ie=st);break}s&&Ie&&pt.alternate===null&&a(J,Ie),Y=E(pt,Y,We),ht===null?De=pt:ht.sibling=pt,ht=pt,Ie=st}if(We===X.length)return u(J,Ie),lt&&ps(J,We),De;if(Ie===null){for(;We<X.length;We++)Ie=le(J,X[We],ae),Ie!==null&&(Y=E(Ie,Y,We),ht===null?De=Ie:ht.sibling=Ie,ht=Ie);return lt&&ps(J,We),De}for(Ie=h(Ie);We<X.length;We++)st=ne(Ie,J,We,X[We],ae),st!==null&&(s&&st.alternate!==null&&Ie.delete(st.key===null?We:st.key),Y=E(st,Y,We),ht===null?De=st:ht.sibling=st,ht=st);return s&&Ie.forEach(function(Ao){return a(J,Ao)}),lt&&ps(J,We),De}function Le(J,Y,X,ae){if(X==null)throw Error(i(151));for(var De=null,ht=null,Ie=Y,We=Y=0,st=null,pt=X.next();Ie!==null&&!pt.done;We++,pt=X.next()){Ie.index>We?(st=Ie,Ie=null):st=Ie.sibling;var Ao=te(J,Ie,pt.value,ae);if(Ao===null){Ie===null&&(Ie=st);break}s&&Ie&&Ao.alternate===null&&a(J,Ie),Y=E(Ao,Y,We),ht===null?De=Ao:ht.sibling=Ao,ht=Ao,Ie=st}if(pt.done)return u(J,Ie),lt&&ps(J,We),De;if(Ie===null){for(;!pt.done;We++,pt=X.next())pt=le(J,pt.value,ae),pt!==null&&(Y=E(pt,Y,We),ht===null?De=pt:ht.sibling=pt,ht=pt);return lt&&ps(J,We),De}for(Ie=h(Ie);!pt.done;We++,pt=X.next())pt=ne(Ie,J,We,pt.value,ae),pt!==null&&(s&&pt.alternate!==null&&Ie.delete(pt.key===null?We:pt.key),Y=E(pt,Y,We),ht===null?De=pt:ht.sibling=pt,ht=pt);return s&&Ie.forEach(function(VV){return a(J,VV)}),lt&&ps(J,We),De}function Nt(J,Y,X,ae){if(typeof X=="object"&&X!==null&&X.type===N&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case w:e:{for(var De=X.key;Y!==null;){if(Y.key===De){if(De=X.type,De===N){if(Y.tag===7){u(J,Y.sibling),ae=_(Y,X.props.children),ae.return=J,J=ae;break e}}else if(Y.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===I&&Sa(De)===Y.type){u(J,Y.sibling),ae=_(Y,X.props),oc(ae,X),ae.return=J,J=ae;break e}u(J,Y);break}else a(J,Y);Y=Y.sibling}X.type===N?(ae=ya(X.props.children,J.mode,ae,X.key),ae.return=J,J=ae):(ae=Vd(X.type,X.key,X.props,null,J.mode,ae),oc(ae,X),ae.return=J,J=ae)}return b(J);case x:e:{for(De=X.key;Y!==null;){if(Y.key===De)if(Y.tag===4&&Y.stateNode.containerInfo===X.containerInfo&&Y.stateNode.implementation===X.implementation){u(J,Y.sibling),ae=_(Y,X.children||[]),ae.return=J,J=ae;break e}else{u(J,Y);break}else a(J,Y);Y=Y.sibling}ae=Ig(X,J.mode,ae),ae.return=J,J=ae}return b(J);case I:return X=Sa(X),Nt(J,Y,X,ae)}if(Ue(X))return Ce(J,Y,X,ae);if(z(X)){if(De=z(X),typeof De!="function")throw Error(i(150));return X=De.call(X),Le(J,Y,X,ae)}if(typeof X.then=="function")return Nt(J,Y,zd(X),ae);if(X.$$typeof===F)return Nt(J,Y,Ud(J,X),ae);Hd(J,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,Y!==null&&Y.tag===6?(u(J,Y.sibling),ae=_(Y,X),ae.return=J,J=ae):(u(J,Y),ae=xg(X,J.mode,ae),ae.return=J,J=ae),b(J)):u(J,Y)}return function(J,Y,X,ae){try{sc=0;var De=Nt(J,Y,X,ae);return wl=null,De}catch(Ie){if(Ie===Sl||Ie===Bd)throw Ie;var ht=Hi(29,Ie,null,J.mode);return ht.lanes=ae,ht.return=J,ht}finally{}}}var Aa=eS(!0),tS=eS(!1),oo=!1;function Bg(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qg(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ao(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function lo(s,a,u){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(vt&2)!==0){var _=h.pending;return _===null?a.next=a:(a.next=_.next,_.next=a),h.pending=a,a=kd(s),UE(s,null,u),a}return Md(s,h,a,u),kd(s)}function ac(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var h=a.lanes;h&=s.pendingLanes,u|=h,a.lanes=u,jt(s,u)}}function zg(s,a){var u=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var _=null,E=null;if(u=u.firstBaseUpdate,u!==null){do{var b={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};E===null?_=E=b:E=E.next=b,u=u.next}while(u!==null);E===null?_=E=a:E=E.next=a}else _=E=a;u={baseState:h.baseState,firstBaseUpdate:_,lastBaseUpdate:E,shared:h.shared,callbacks:h.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}var Hg=!1;function lc(){if(Hg){var s=El;if(s!==null)throw s}}function uc(s,a,u,h){Hg=!1;var _=s.updateQueue;oo=!1;var E=_.firstBaseUpdate,b=_.lastBaseUpdate,M=_.shared.pending;if(M!==null){_.shared.pending=null;var j=M,Q=j.next;j.next=null,b===null?E=Q:b.next=Q,b=j;var se=s.alternate;se!==null&&(se=se.updateQueue,M=se.lastBaseUpdate,M!==b&&(M===null?se.firstBaseUpdate=Q:M.next=Q,se.lastBaseUpdate=j))}if(E!==null){var le=_.baseState;b=0,se=Q=j=null,M=E;do{var te=M.lane&-536870913,ne=te!==M.lane;if(ne?(rt&te)===te:(h&te)===te){te!==0&&te===Tl&&(Hg=!0),se!==null&&(se=se.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var Ce=s,Le=M;te=a;var Nt=u;switch(Le.tag){case 1:if(Ce=Le.payload,typeof Ce=="function"){le=Ce.call(Nt,le,te);break e}le=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Le.payload,te=typeof Ce=="function"?Ce.call(Nt,le,te):Ce,te==null)break e;le=v({},le,te);break e;case 2:oo=!0}}te=M.callback,te!==null&&(s.flags|=64,ne&&(s.flags|=8192),ne=_.callbacks,ne===null?_.callbacks=[te]:ne.push(te))}else ne={lane:te,tag:M.tag,payload:M.payload,callback:M.callback,next:null},se===null?(Q=se=ne,j=le):se=se.next=ne,b|=te;if(M=M.next,M===null){if(M=_.shared.pending,M===null)break;ne=M,M=ne.next,ne.next=null,_.lastBaseUpdate=ne,_.shared.pending=null}}while(!0);se===null&&(j=le),_.baseState=j,_.firstBaseUpdate=Q,_.lastBaseUpdate=se,E===null&&(_.shared.lanes=0),po|=b,s.lanes=b,s.memoizedState=le}}function nS(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function iS(s,a){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)nS(u[s],a)}var Al=$(null),Gd=$(0);function rS(s,a){s=bs,pe(Gd,s),pe(Al,a),bs=s|a.baseLanes}function Gg(){pe(Gd,bs),pe(Al,Al.current)}function jg(){bs=Gd.current,Z(Al),Z(Gd)}var Gi=$(null),dr=null;function uo(s){var a=s.alternate;pe(fn,fn.current&1),pe(Gi,s),dr===null&&(a===null||Al.current!==null||a.memoizedState!==null)&&(dr=s)}function $g(s){pe(fn,fn.current),pe(Gi,s),dr===null&&(dr=s)}function sS(s){s.tag===22?(pe(fn,fn.current),pe(Gi,s),dr===null&&(dr=s)):co()}function co(){pe(fn,fn.current),pe(Gi,Gi.current)}function ji(s){Z(Gi),dr===s&&(dr=null),Z(fn)}var fn=$(0);function jd(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Qy(u)||Zy(u)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ys=0,Ye=null,It=null,vn=null,$d=!1,bl=!1,ba=!1,Kd=0,cc=0,Cl=null,b2=0;function tn(){throw Error(i(321))}function Kg(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!zi(s[u],a[u]))return!1;return!0}function Yg(s,a,u,h,_,E){return ys=E,Ye=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,ee.H=s===null||s.memoizedState===null?zS:uy,ba=!1,E=u(h,_),ba=!1,bl&&(E=aS(a,u,h,_)),oS(s),E}function oS(s){ee.H=hc;var a=It!==null&&It.next!==null;if(ys=0,vn=It=Ye=null,$d=!1,cc=0,Cl=null,a)throw Error(i(300));s===null||_n||(s=s.dependencies,s!==null&&Od(s)&&(_n=!0))}function aS(s,a,u,h){Ye=s;var _=0;do{if(bl&&(Cl=null),cc=0,bl=!1,25<=_)throw Error(i(301));if(_+=1,vn=It=null,s.updateQueue!=null){var E=s.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}ee.H=HS,E=a(u,h)}while(bl);return E}function C2(){var s=ee.H,a=s.useState()[0];return a=typeof a.then=="function"?fc(a):a,s=s.useState()[0],(It!==null?It.memoizedState:null)!==s&&(Ye.flags|=1024),a}function Jg(){var s=Kd!==0;return Kd=0,s}function Wg(s,a,u){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~u}function Xg(s){if($d){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}$d=!1}ys=0,vn=It=Ye=null,bl=!1,cc=Kd=0,Cl=null}function vi(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?Ye.memoizedState=vn=s:vn=vn.next=s,vn}function dn(){if(It===null){var s=Ye.alternate;s=s!==null?s.memoizedState:null}else s=It.next;var a=vn===null?Ye.memoizedState:vn.next;if(a!==null)vn=a,It=s;else{if(s===null)throw Ye.alternate===null?Error(i(467)):Error(i(310));It=s,s={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},vn===null?Ye.memoizedState=vn=s:vn=vn.next=s}return vn}function Yd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fc(s){var a=cc;return cc+=1,Cl===null&&(Cl=[]),s=XE(Cl,s,a),a=Ye,(vn===null?a.memoizedState:vn.next)===null&&(a=a.alternate,ee.H=a===null||a.memoizedState===null?zS:uy),s}function Jd(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return fc(s);if(s.$$typeof===F)return qn(s)}throw Error(i(438,String(s)))}function Qg(s){var a=null,u=Ye.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var h=Ye.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(_){return _.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=Yd(),Ye.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(s),h=0;h<s;h++)u[h]=V;return a.index++,u}function vs(s,a){return typeof a=="function"?a(s):a}function Wd(s){var a=dn();return Zg(a,It,s)}function Zg(s,a,u){var h=s.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=u;var _=s.baseQueue,E=h.pending;if(E!==null){if(_!==null){var b=_.next;_.next=E.next,E.next=b}a.baseQueue=_=E,h.pending=null}if(E=s.baseState,_===null)s.memoizedState=E;else{a=_.next;var M=b=null,j=null,Q=a,se=!1;do{var le=Q.lane&-536870913;if(le!==Q.lane?(rt&le)===le:(ys&le)===le){var te=Q.revertLane;if(te===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),le===Tl&&(se=!0);else if((ys&te)===te){Q=Q.next,te===Tl&&(se=!0);continue}else le={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},j===null?(M=j=le,b=E):j=j.next=le,Ye.lanes|=te,po|=te;le=Q.action,ba&&u(E,le),E=Q.hasEagerState?Q.eagerState:u(E,le)}else te={lane:le,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},j===null?(M=j=te,b=E):j=j.next=te,Ye.lanes|=le,po|=le;Q=Q.next}while(Q!==null&&Q!==a);if(j===null?b=E:j.next=M,!zi(E,s.memoizedState)&&(_n=!0,se&&(u=El,u!==null)))throw u;s.memoizedState=E,s.baseState=b,s.baseQueue=j,h.lastRenderedState=E}return _===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function ey(s){var a=dn(),u=a.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=s;var h=u.dispatch,_=u.pending,E=a.memoizedState;if(_!==null){u.pending=null;var b=_=_.next;do E=s(E,b.action),b=b.next;while(b!==_);zi(E,a.memoizedState)||(_n=!0),a.memoizedState=E,a.baseQueue===null&&(a.baseState=E),u.lastRenderedState=E}return[E,h]}function lS(s,a,u){var h=Ye,_=dn(),E=lt;if(E){if(u===void 0)throw Error(i(407));u=u()}else u=a();var b=!zi((It||_).memoizedState,u);if(b&&(_.memoizedState=u,_n=!0),_=_.queue,iy(fS.bind(null,h,_,s),[s]),_.getSnapshot!==a||b||vn!==null&&vn.memoizedState.tag&1){if(h.flags|=2048,xl(9,{destroy:void 0},cS.bind(null,h,_,u,a),null),Dt===null)throw Error(i(349));E||(ys&127)!==0||uS(h,a,u)}return u}function uS(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=Ye.updateQueue,a===null?(a=Yd(),Ye.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function cS(s,a,u,h){a.value=u,a.getSnapshot=h,dS(a)&&hS(s)}function fS(s,a,u){return u(function(){dS(a)&&hS(s)})}function dS(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!zi(s,u)}catch{return!0}}function hS(s){var a=ga(s,2);a!==null&&Pi(a,s,2)}function ty(s){var a=vi();if(typeof s=="function"){var u=s;if(s=u(),ba){ue(!0);try{u()}finally{ue(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:s},a}function pS(s,a,u,h){return s.baseState=u,Zg(s,It,typeof h=="function"?h:vs)}function x2(s,a,u,h,_){if(Zd(s))throw Error(i(485));if(s=a.action,s!==null){var E={payload:_,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){E.listeners.push(b)}};ee.T!==null?u(!0):E.isTransition=!1,h(E),u=a.pending,u===null?(E.next=a.pending=E,mS(a,E)):(E.next=u.next,a.pending=u.next=E)}}function mS(s,a){var u=a.action,h=a.payload,_=s.state;if(a.isTransition){var E=ee.T,b={};ee.T=b;try{var M=u(_,h),j=ee.S;j!==null&&j(b,M),gS(s,a,M)}catch(Q){ny(s,a,Q)}finally{E!==null&&b.types!==null&&(E.types=b.types),ee.T=E}}else try{E=u(_,h),gS(s,a,E)}catch(Q){ny(s,a,Q)}}function gS(s,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(h){yS(s,a,h)},function(h){return ny(s,a,h)}):yS(s,a,u)}function yS(s,a,u){a.status="fulfilled",a.value=u,vS(a),s.state=u,a=s.pending,a!==null&&(u=a.next,u===a?s.pending=null:(u=u.next,a.next=u,mS(s,u)))}function ny(s,a,u){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=u,vS(a),a=a.next;while(a!==h)}s.action=null}function vS(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function _S(s,a){return a}function TS(s,a){if(lt){var u=Dt.formState;if(u!==null){e:{var h=Ye;if(lt){if(Ft){t:{for(var _=Ft,E=fr;_.nodeType!==8;){if(!E){_=null;break t}if(_=hr(_.nextSibling),_===null){_=null;break t}}E=_.data,_=E==="F!"||E==="F"?_:null}if(_){Ft=hr(_.nextSibling),h=_.data==="F!";break e}}ro(h)}h=!1}h&&(a=u[0])}}return u=vi(),u.memoizedState=u.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_S,lastRenderedState:a},u.queue=h,u=FS.bind(null,Ye,h),h.dispatch=u,h=ty(!1),E=ly.bind(null,Ye,!1,h.queue),h=vi(),_={state:a,dispatch:null,action:s,pending:null},h.queue=_,u=x2.bind(null,Ye,_,E,u),_.dispatch=u,h.memoizedState=s,[a,u,!1]}function ES(s){var a=dn();return SS(a,It,s)}function SS(s,a,u){if(a=Zg(s,a,_S)[0],s=Wd(vs)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=fc(a)}catch(b){throw b===Sl?Bd:b}else h=a;a=dn();var _=a.queue,E=_.dispatch;return u!==a.memoizedState&&(Ye.flags|=2048,xl(9,{destroy:void 0},I2.bind(null,_,u),null)),[h,E,s]}function I2(s,a){s.action=a}function wS(s){var a=dn(),u=It;if(u!==null)return SS(a,u,s);dn(),a=a.memoizedState,u=dn();var h=u.queue.dispatch;return u.memoizedState=s,[a,h,!1]}function xl(s,a,u,h){return s={tag:s,create:u,deps:h,inst:a,next:null},a=Ye.updateQueue,a===null&&(a=Yd(),Ye.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=s.next=s:(h=u.next,u.next=s,s.next=h,a.lastEffect=s),s}function AS(){return dn().memoizedState}function Xd(s,a,u,h){var _=vi();Ye.flags|=s,_.memoizedState=xl(1|a,{destroy:void 0},u,h===void 0?null:h)}function Qd(s,a,u,h){var _=dn();h=h===void 0?null:h;var E=_.memoizedState.inst;It!==null&&h!==null&&Kg(h,It.memoizedState.deps)?_.memoizedState=xl(a,E,u,h):(Ye.flags|=s,_.memoizedState=xl(1|a,E,u,h))}function bS(s,a){Xd(8390656,8,s,a)}function iy(s,a){Qd(2048,8,s,a)}function R2(s){Ye.flags|=4;var a=Ye.updateQueue;if(a===null)a=Yd(),Ye.updateQueue=a,a.events=[s];else{var u=a.events;u===null?a.events=[s]:u.push(s)}}function CS(s){var a=dn().memoizedState;return R2({ref:a,nextImpl:s}),function(){if((vt&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function xS(s,a){return Qd(4,2,s,a)}function IS(s,a){return Qd(4,4,s,a)}function RS(s,a){if(typeof a=="function"){s=s();var u=a(s);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function NS(s,a,u){u=u!=null?u.concat([s]):null,Qd(4,4,RS.bind(null,a,s),u)}function ry(){}function PS(s,a){var u=dn();a=a===void 0?null:a;var h=u.memoizedState;return a!==null&&Kg(a,h[1])?h[0]:(u.memoizedState=[s,a],s)}function DS(s,a){var u=dn();a=a===void 0?null:a;var h=u.memoizedState;if(a!==null&&Kg(a,h[1]))return h[0];if(h=s(),ba){ue(!0);try{s()}finally{ue(!1)}}return u.memoizedState=[h,a],h}function sy(s,a,u){return u===void 0||(ys&1073741824)!==0&&(rt&261930)===0?s.memoizedState=a:(s.memoizedState=u,s=Mw(),Ye.lanes|=s,po|=s,u)}function MS(s,a,u,h){return zi(u,a)?u:Al.current!==null?(s=sy(s,u,h),zi(s,a)||(_n=!0),s):(ys&42)===0||(ys&1073741824)!==0&&(rt&261930)===0?(_n=!0,s.memoizedState=u):(s=Mw(),Ye.lanes|=s,po|=s,a)}function kS(s,a,u,h,_){var E=oe.p;oe.p=E!==0&&8>E?E:8;var b=ee.T,M={};ee.T=M,ly(s,!1,a,u);try{var j=_(),Q=ee.S;if(Q!==null&&Q(M,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var se=A2(j,h);dc(s,a,se,Yi(s))}else dc(s,a,h,Yi(s))}catch(le){dc(s,a,{then:function(){},status:"rejected",reason:le},Yi())}finally{oe.p=E,b!==null&&M.types!==null&&(b.types=M.types),ee.T=b}}function N2(){}function oy(s,a,u,h){if(s.tag!==5)throw Error(i(476));var _=VS(s).queue;kS(s,_,a,me,u===null?N2:function(){return LS(s),u(h)})}function VS(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:me},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:u},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function LS(s){var a=VS(s);a.next===null&&(a=s.alternate.memoizedState),dc(s,a.next.queue,{},Yi())}function ay(){return qn(Rc)}function OS(){return dn().memoizedState}function US(){return dn().memoizedState}function P2(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var u=Yi();s=ao(u);var h=lo(a,s,u);h!==null&&(Pi(h,a,u),ac(h,a,u)),a={cache:Lg()},s.payload=a;return}a=a.return}}function D2(s,a,u){var h=Yi();u={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Zd(s)?BS(a,u):(u=bg(s,a,u,h),u!==null&&(Pi(u,s,h),qS(u,a,h)))}function FS(s,a,u){var h=Yi();dc(s,a,u,h)}function dc(s,a,u,h){var _={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Zd(s))BS(a,_);else{var E=s.alternate;if(s.lanes===0&&(E===null||E.lanes===0)&&(E=a.lastRenderedReducer,E!==null))try{var b=a.lastRenderedState,M=E(b,u);if(_.hasEagerState=!0,_.eagerState=M,zi(M,b))return Md(s,a,_,0),Dt===null&&Dd(),!1}catch{}finally{}if(u=bg(s,a,_,h),u!==null)return Pi(u,s,h),qS(u,a,h),!0}return!1}function ly(s,a,u,h){if(h={lane:2,revertLane:By(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Zd(s)){if(a)throw Error(i(479))}else a=bg(s,u,h,2),a!==null&&Pi(a,s,2)}function Zd(s){var a=s.alternate;return s===Ye||a!==null&&a===Ye}function BS(s,a){bl=$d=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function qS(s,a,u){if((u&4194048)!==0){var h=a.lanes;h&=s.pendingLanes,u|=h,a.lanes=u,jt(s,u)}}var hc={readContext:qn,use:Jd,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useLayoutEffect:tn,useInsertionEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useSyncExternalStore:tn,useId:tn,useHostTransitionStatus:tn,useFormState:tn,useActionState:tn,useOptimistic:tn,useMemoCache:tn,useCacheRefresh:tn};hc.useEffectEvent=tn;var zS={readContext:qn,use:Jd,useCallback:function(s,a){return vi().memoizedState=[s,a===void 0?null:a],s},useContext:qn,useEffect:bS,useImperativeHandle:function(s,a,u){u=u!=null?u.concat([s]):null,Xd(4194308,4,RS.bind(null,a,s),u)},useLayoutEffect:function(s,a){return Xd(4194308,4,s,a)},useInsertionEffect:function(s,a){Xd(4,2,s,a)},useMemo:function(s,a){var u=vi();a=a===void 0?null:a;var h=s();if(ba){ue(!0);try{s()}finally{ue(!1)}}return u.memoizedState=[h,a],h},useReducer:function(s,a,u){var h=vi();if(u!==void 0){var _=u(a);if(ba){ue(!0);try{u(a)}finally{ue(!1)}}}else _=a;return h.memoizedState=h.baseState=_,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:_},h.queue=s,s=s.dispatch=D2.bind(null,Ye,s),[h.memoizedState,s]},useRef:function(s){var a=vi();return s={current:s},a.memoizedState=s},useState:function(s){s=ty(s);var a=s.queue,u=FS.bind(null,Ye,a);return a.dispatch=u,[s.memoizedState,u]},useDebugValue:ry,useDeferredValue:function(s,a){var u=vi();return sy(u,s,a)},useTransition:function(){var s=ty(!1);return s=kS.bind(null,Ye,s.queue,!0,!1),vi().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,u){var h=Ye,_=vi();if(lt){if(u===void 0)throw Error(i(407));u=u()}else{if(u=a(),Dt===null)throw Error(i(349));(rt&127)!==0||uS(h,a,u)}_.memoizedState=u;var E={value:u,getSnapshot:a};return _.queue=E,bS(fS.bind(null,h,E,s),[s]),h.flags|=2048,xl(9,{destroy:void 0},cS.bind(null,h,E,u,a),null),u},useId:function(){var s=vi(),a=Dt.identifierPrefix;if(lt){var u=Kr,h=$r;u=(h&~(1<<32-Ee(h)-1)).toString(32)+u,a="_"+a+"R_"+u,u=Kd++,0<u&&(a+="H"+u.toString(32)),a+="_"}else u=b2++,a="_"+a+"r_"+u.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:ay,useFormState:TS,useActionState:TS,useOptimistic:function(s){var a=vi();a.memoizedState=a.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=ly.bind(null,Ye,!0,u),u.dispatch=a,[s,a]},useMemoCache:Qg,useCacheRefresh:function(){return vi().memoizedState=P2.bind(null,Ye)},useEffectEvent:function(s){var a=vi(),u={impl:s};return a.memoizedState=u,function(){if((vt&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},uy={readContext:qn,use:Jd,useCallback:PS,useContext:qn,useEffect:iy,useImperativeHandle:NS,useInsertionEffect:xS,useLayoutEffect:IS,useMemo:DS,useReducer:Wd,useRef:AS,useState:function(){return Wd(vs)},useDebugValue:ry,useDeferredValue:function(s,a){var u=dn();return MS(u,It.memoizedState,s,a)},useTransition:function(){var s=Wd(vs)[0],a=dn().memoizedState;return[typeof s=="boolean"?s:fc(s),a]},useSyncExternalStore:lS,useId:OS,useHostTransitionStatus:ay,useFormState:ES,useActionState:ES,useOptimistic:function(s,a){var u=dn();return pS(u,It,s,a)},useMemoCache:Qg,useCacheRefresh:US};uy.useEffectEvent=CS;var HS={readContext:qn,use:Jd,useCallback:PS,useContext:qn,useEffect:iy,useImperativeHandle:NS,useInsertionEffect:xS,useLayoutEffect:IS,useMemo:DS,useReducer:ey,useRef:AS,useState:function(){return ey(vs)},useDebugValue:ry,useDeferredValue:function(s,a){var u=dn();return It===null?sy(u,s,a):MS(u,It.memoizedState,s,a)},useTransition:function(){var s=ey(vs)[0],a=dn().memoizedState;return[typeof s=="boolean"?s:fc(s),a]},useSyncExternalStore:lS,useId:OS,useHostTransitionStatus:ay,useFormState:wS,useActionState:wS,useOptimistic:function(s,a){var u=dn();return It!==null?pS(u,It,s,a):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:Qg,useCacheRefresh:US};HS.useEffectEvent=CS;function cy(s,a,u,h){a=s.memoizedState,u=u(h,a),u=u==null?a:v({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var fy={enqueueSetState:function(s,a,u){s=s._reactInternals;var h=Yi(),_=ao(h);_.payload=a,u!=null&&(_.callback=u),a=lo(s,_,h),a!==null&&(Pi(a,s,h),ac(a,s,h))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var h=Yi(),_=ao(h);_.tag=1,_.payload=a,u!=null&&(_.callback=u),a=lo(s,_,h),a!==null&&(Pi(a,s,h),ac(a,s,h))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=Yi(),h=ao(u);h.tag=2,a!=null&&(h.callback=a),a=lo(s,h,u),a!==null&&(Pi(a,s,u),ac(a,s,u))}};function GS(s,a,u,h,_,E,b){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,E,b):a.prototype&&a.prototype.isPureReactComponent?!Zu(u,h)||!Zu(_,E):!0}function jS(s,a,u,h){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,h),a.state!==s&&fy.enqueueReplaceState(a,a.state,null)}function Ca(s,a){var u=a;if("ref"in a){u={};for(var h in a)h!=="ref"&&(u[h]=a[h])}if(s=s.defaultProps){u===a&&(u=v({},u));for(var _ in s)u[_]===void 0&&(u[_]=s[_])}return u}function $S(s){Pd(s)}function KS(s){console.error(s)}function YS(s){Pd(s)}function eh(s,a){try{var u=s.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function JS(s,a,u){try{var h=s.onCaughtError;h(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function dy(s,a,u){return u=ao(u),u.tag=3,u.payload={element:null},u.callback=function(){eh(s,a)},u}function WS(s){return s=ao(s),s.tag=3,s}function XS(s,a,u,h){var _=u.type.getDerivedStateFromError;if(typeof _=="function"){var E=h.value;s.payload=function(){return _(E)},s.callback=function(){JS(a,u,h)}}var b=u.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(s.callback=function(){JS(a,u,h),typeof _!="function"&&(mo===null?mo=new Set([this]):mo.add(this));var M=h.stack;this.componentDidCatch(h.value,{componentStack:M!==null?M:""})})}function M2(s,a,u,h,_){if(u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=u.alternate,a!==null&&_l(a,u,_,!0),u=Gi.current,u!==null){switch(u.tag){case 31:case 13:return dr===null?dh():u.alternate===null&&nn===0&&(nn=3),u.flags&=-257,u.flags|=65536,u.lanes=_,h===qd?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([h]):a.add(h),Oy(s,h,_)),!1;case 22:return u.flags|=65536,h===qd?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([h]):u.add(h)),Oy(s,h,_)),!1}throw Error(i(435,u.tag))}return Oy(s,h,_),dh(),!1}if(lt)return a=Gi.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=_,h!==Pg&&(s=Error(i(422),{cause:h}),nc(lr(s,u)))):(h!==Pg&&(a=Error(i(423),{cause:h}),nc(lr(a,u))),s=s.current.alternate,s.flags|=65536,_&=-_,s.lanes|=_,h=lr(h,u),_=dy(s.stateNode,h,_),zg(s,_),nn!==4&&(nn=2)),!1;var E=Error(i(520),{cause:h});if(E=lr(E,u),Ec===null?Ec=[E]:Ec.push(E),nn!==4&&(nn=2),a===null)return!0;h=lr(h,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,s=_&-_,u.lanes|=s,s=dy(u.stateNode,h,s),zg(u,s),!1;case 1:if(a=u.type,E=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(mo===null||!mo.has(E))))return u.flags|=65536,_&=-_,u.lanes|=_,_=WS(_),XS(_,s,u,h),zg(u,_),!1}u=u.return}while(u!==null);return!1}var hy=Error(i(461)),_n=!1;function zn(s,a,u,h){a.child=s===null?tS(a,null,u,h):Aa(a,s.child,u,h)}function QS(s,a,u,h,_){u=u.render;var E=a.ref;if("ref"in h){var b={};for(var M in h)M!=="ref"&&(b[M]=h[M])}else b=h;return Ta(a),h=Yg(s,a,u,b,E,_),M=Jg(),s!==null&&!_n?(Wg(s,a,_),_s(s,a,_)):(lt&&M&&Rg(a),a.flags|=1,zn(s,a,h,_),a.child)}function ZS(s,a,u,h,_){if(s===null){var E=u.type;return typeof E=="function"&&!Cg(E)&&E.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=E,ew(s,a,E,h,_)):(s=Vd(u.type,null,h,a,a.mode,_),s.ref=a.ref,s.return=a,a.child=s)}if(E=s.child,!Ey(s,_)){var b=E.memoizedProps;if(u=u.compare,u=u!==null?u:Zu,u(b,h)&&s.ref===a.ref)return _s(s,a,_)}return a.flags|=1,s=hs(E,h),s.ref=a.ref,s.return=a,a.child=s}function ew(s,a,u,h,_){if(s!==null){var E=s.memoizedProps;if(Zu(E,h)&&s.ref===a.ref)if(_n=!1,a.pendingProps=h=E,Ey(s,_))(s.flags&131072)!==0&&(_n=!0);else return a.lanes=s.lanes,_s(s,a,_)}return py(s,a,u,h,_)}function tw(s,a,u,h){var _=h.children,E=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((a.flags&128)!==0){if(E=E!==null?E.baseLanes|u:u,s!==null){for(h=a.child=s.child,_=0;h!==null;)_=_|h.lanes|h.childLanes,h=h.sibling;h=_&~E}else h=0,a.child=null;return nw(s,a,E,u,h)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&Fd(a,E!==null?E.cachePool:null),E!==null?rS(a,E):Gg(),sS(a);else return h=a.lanes=536870912,nw(s,a,E!==null?E.baseLanes|u:u,u,h)}else E!==null?(Fd(a,E.cachePool),rS(a,E),co(),a.memoizedState=null):(s!==null&&Fd(a,null),Gg(),co());return zn(s,a,_,u),a.child}function pc(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function nw(s,a,u,h,_){var E=Ug();return E=E===null?null:{parent:yn._currentValue,pool:E},a.memoizedState={baseLanes:u,cachePool:E},s!==null&&Fd(a,null),Gg(),sS(a),s!==null&&_l(s,a,h,!0),a.childLanes=_,null}function th(s,a){return a=ih({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function iw(s,a,u){return Aa(a,s.child,null,u),s=th(a,a.pendingProps),s.flags|=2,ji(a),a.memoizedState=null,s}function k2(s,a,u){var h=a.pendingProps,_=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(lt){if(h.mode==="hidden")return s=th(a,h),a.lanes=536870912,pc(null,s);if($g(a),(s=Ft)?(s=mA(s,fr),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:no!==null?{id:$r,overflow:Kr}:null,retryLane:536870912,hydrationErrors:null},u=BE(s),u.return=a,a.child=u,Bn=a,Ft=null)):s=null,s===null)throw ro(a);return a.lanes=536870912,null}return th(a,h)}var E=s.memoizedState;if(E!==null){var b=E.dehydrated;if($g(a),_)if(a.flags&256)a.flags&=-257,a=iw(s,a,u);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(i(558));else if(_n||_l(s,a,u,!1),_=(u&s.childLanes)!==0,_n||_){if(h=Dt,h!==null&&(b=Qn(h,u),b!==0&&b!==E.retryLane))throw E.retryLane=b,ga(s,b),Pi(h,s,b),hy;dh(),a=iw(s,a,u)}else s=E.treeContext,Ft=hr(b.nextSibling),Bn=a,lt=!0,io=null,fr=!1,s!==null&&HE(a,s),a=th(a,h),a.flags|=4096;return a}return s=hs(s.child,{mode:h.mode,children:h.children}),s.ref=a.ref,a.child=s,s.return=a,s}function nh(s,a){var u=a.ref;if(u===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(s===null||s.ref!==u)&&(a.flags|=4194816)}}function py(s,a,u,h,_){return Ta(a),u=Yg(s,a,u,h,void 0,_),h=Jg(),s!==null&&!_n?(Wg(s,a,_),_s(s,a,_)):(lt&&h&&Rg(a),a.flags|=1,zn(s,a,u,_),a.child)}function rw(s,a,u,h,_,E){return Ta(a),a.updateQueue=null,u=aS(a,h,u,_),oS(s),h=Jg(),s!==null&&!_n?(Wg(s,a,E),_s(s,a,E)):(lt&&h&&Rg(a),a.flags|=1,zn(s,a,u,E),a.child)}function sw(s,a,u,h,_){if(Ta(a),a.stateNode===null){var E=ml,b=u.contextType;typeof b=="object"&&b!==null&&(E=qn(b)),E=new u(h,E),a.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=fy,a.stateNode=E,E._reactInternals=a,E=a.stateNode,E.props=h,E.state=a.memoizedState,E.refs={},Bg(a),b=u.contextType,E.context=typeof b=="object"&&b!==null?qn(b):ml,E.state=a.memoizedState,b=u.getDerivedStateFromProps,typeof b=="function"&&(cy(a,u,b,h),E.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(b=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),b!==E.state&&fy.enqueueReplaceState(E,E.state,null),uc(a,h,E,_),lc(),E.state=a.memoizedState),typeof E.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(s===null){E=a.stateNode;var M=a.memoizedProps,j=Ca(u,M);E.props=j;var Q=E.context,se=u.contextType;b=ml,typeof se=="object"&&se!==null&&(b=qn(se));var le=u.getDerivedStateFromProps;se=typeof le=="function"||typeof E.getSnapshotBeforeUpdate=="function",M=a.pendingProps!==M,se||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(M||Q!==b)&&jS(a,E,h,b),oo=!1;var te=a.memoizedState;E.state=te,uc(a,h,E,_),lc(),Q=a.memoizedState,M||te!==Q||oo?(typeof le=="function"&&(cy(a,u,le,h),Q=a.memoizedState),(j=oo||GS(a,u,j,h,te,Q,b))?(se||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(a.flags|=4194308)):(typeof E.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=Q),E.props=h,E.state=Q,E.context=b,h=j):(typeof E.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{E=a.stateNode,qg(s,a),b=a.memoizedProps,se=Ca(u,b),E.props=se,le=a.pendingProps,te=E.context,Q=u.contextType,j=ml,typeof Q=="object"&&Q!==null&&(j=qn(Q)),M=u.getDerivedStateFromProps,(Q=typeof M=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(b!==le||te!==j)&&jS(a,E,h,j),oo=!1,te=a.memoizedState,E.state=te,uc(a,h,E,_),lc();var ne=a.memoizedState;b!==le||te!==ne||oo||s!==null&&s.dependencies!==null&&Od(s.dependencies)?(typeof M=="function"&&(cy(a,u,M,h),ne=a.memoizedState),(se=oo||GS(a,u,se,h,te,ne,j)||s!==null&&s.dependencies!==null&&Od(s.dependencies))?(Q||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,ne,j),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,ne,j)),typeof E.componentDidUpdate=="function"&&(a.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof E.componentDidUpdate!="function"||b===s.memoizedProps&&te===s.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||b===s.memoizedProps&&te===s.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=ne),E.props=h,E.state=ne,E.context=j,h=se):(typeof E.componentDidUpdate!="function"||b===s.memoizedProps&&te===s.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||b===s.memoizedProps&&te===s.memoizedState||(a.flags|=1024),h=!1)}return E=h,nh(s,a),h=(a.flags&128)!==0,E||h?(E=a.stateNode,u=h&&typeof u.getDerivedStateFromError!="function"?null:E.render(),a.flags|=1,s!==null&&h?(a.child=Aa(a,s.child,null,_),a.child=Aa(a,null,u,_)):zn(s,a,u,_),a.memoizedState=E.state,s=a.child):s=_s(s,a,_),s}function ow(s,a,u,h){return va(),a.flags|=256,zn(s,a,u,h),a.child}var my={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gy(s){return{baseLanes:s,cachePool:JE()}}function yy(s,a,u){return s=s!==null?s.childLanes&~u:0,a&&(s|=Ki),s}function aw(s,a,u){var h=a.pendingProps,_=!1,E=(a.flags&128)!==0,b;if((b=E)||(b=s!==null&&s.memoizedState===null?!1:(fn.current&2)!==0),b&&(_=!0,a.flags&=-129),b=(a.flags&32)!==0,a.flags&=-33,s===null){if(lt){if(_?uo(a):co(),(s=Ft)?(s=mA(s,fr),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:no!==null?{id:$r,overflow:Kr}:null,retryLane:536870912,hydrationErrors:null},u=BE(s),u.return=a,a.child=u,Bn=a,Ft=null)):s=null,s===null)throw ro(a);return Zy(s)?a.lanes=32:a.lanes=536870912,null}var M=h.children;return h=h.fallback,_?(co(),_=a.mode,M=ih({mode:"hidden",children:M},_),h=ya(h,_,u,null),M.return=a,h.return=a,M.sibling=h,a.child=M,h=a.child,h.memoizedState=gy(u),h.childLanes=yy(s,b,u),a.memoizedState=my,pc(null,h)):(uo(a),vy(a,M))}var j=s.memoizedState;if(j!==null&&(M=j.dehydrated,M!==null)){if(E)a.flags&256?(uo(a),a.flags&=-257,a=_y(s,a,u)):a.memoizedState!==null?(co(),a.child=s.child,a.flags|=128,a=null):(co(),M=h.fallback,_=a.mode,h=ih({mode:"visible",children:h.children},_),M=ya(M,_,u,null),M.flags|=2,h.return=a,M.return=a,h.sibling=M,a.child=h,Aa(a,s.child,null,u),h=a.child,h.memoizedState=gy(u),h.childLanes=yy(s,b,u),a.memoizedState=my,a=pc(null,h));else if(uo(a),Zy(M)){if(b=M.nextSibling&&M.nextSibling.dataset,b)var Q=b.dgst;b=Q,h=Error(i(419)),h.stack="",h.digest=b,nc({value:h,source:null,stack:null}),a=_y(s,a,u)}else if(_n||_l(s,a,u,!1),b=(u&s.childLanes)!==0,_n||b){if(b=Dt,b!==null&&(h=Qn(b,u),h!==0&&h!==j.retryLane))throw j.retryLane=h,ga(s,h),Pi(b,s,h),hy;Qy(M)||dh(),a=_y(s,a,u)}else Qy(M)?(a.flags|=192,a.child=s.child,a=null):(s=j.treeContext,Ft=hr(M.nextSibling),Bn=a,lt=!0,io=null,fr=!1,s!==null&&HE(a,s),a=vy(a,h.children),a.flags|=4096);return a}return _?(co(),M=h.fallback,_=a.mode,j=s.child,Q=j.sibling,h=hs(j,{mode:"hidden",children:h.children}),h.subtreeFlags=j.subtreeFlags&65011712,Q!==null?M=hs(Q,M):(M=ya(M,_,u,null),M.flags|=2),M.return=a,h.return=a,h.sibling=M,a.child=h,pc(null,h),h=a.child,M=s.child.memoizedState,M===null?M=gy(u):(_=M.cachePool,_!==null?(j=yn._currentValue,_=_.parent!==j?{parent:j,pool:j}:_):_=JE(),M={baseLanes:M.baseLanes|u,cachePool:_}),h.memoizedState=M,h.childLanes=yy(s,b,u),a.memoizedState=my,pc(s.child,h)):(uo(a),u=s.child,s=u.sibling,u=hs(u,{mode:"visible",children:h.children}),u.return=a,u.sibling=null,s!==null&&(b=a.deletions,b===null?(a.deletions=[s],a.flags|=16):b.push(s)),a.child=u,a.memoizedState=null,u)}function vy(s,a){return a=ih({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function ih(s,a){return s=Hi(22,s,null,a),s.lanes=0,s}function _y(s,a,u){return Aa(a,s.child,null,u),s=vy(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function lw(s,a,u){s.lanes|=a;var h=s.alternate;h!==null&&(h.lanes|=a),kg(s.return,a,u)}function Ty(s,a,u,h,_,E){var b=s.memoizedState;b===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:_,treeForkCount:E}:(b.isBackwards=a,b.rendering=null,b.renderingStartTime=0,b.last=h,b.tail=u,b.tailMode=_,b.treeForkCount=E)}function uw(s,a,u){var h=a.pendingProps,_=h.revealOrder,E=h.tail;h=h.children;var b=fn.current,M=(b&2)!==0;if(M?(b=b&1|2,a.flags|=128):b&=1,pe(fn,b),zn(s,a,h,u),h=lt?tc:0,!M&&s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&lw(s,u,a);else if(s.tag===19)lw(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(_){case"forwards":for(u=a.child,_=null;u!==null;)s=u.alternate,s!==null&&jd(s)===null&&(_=u),u=u.sibling;u=_,u===null?(_=a.child,a.child=null):(_=u.sibling,u.sibling=null),Ty(a,!1,_,u,E,h);break;case"backwards":case"unstable_legacy-backwards":for(u=null,_=a.child,a.child=null;_!==null;){if(s=_.alternate,s!==null&&jd(s)===null){a.child=_;break}s=_.sibling,_.sibling=u,u=_,_=s}Ty(a,!0,u,null,E,h);break;case"together":Ty(a,!1,null,null,void 0,h);break;default:a.memoizedState=null}return a.child}function _s(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),po|=a.lanes,(u&a.childLanes)===0)if(s!==null){if(_l(s,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,u=hs(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=hs(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function Ey(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&Od(s)))}function V2(s,a,u){switch(a.tag){case 3:qe(a,a.stateNode.containerInfo),so(a,yn,s.memoizedState.cache),va();break;case 27:case 5:Un(a);break;case 4:qe(a,a.stateNode.containerInfo);break;case 10:so(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,$g(a),null;break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(uo(a),a.flags|=128,null):(u&a.child.childLanes)!==0?aw(s,a,u):(uo(a),s=_s(s,a,u),s!==null?s.sibling:null);uo(a);break;case 19:var _=(s.flags&128)!==0;if(h=(u&a.childLanes)!==0,h||(_l(s,a,u,!1),h=(u&a.childLanes)!==0),_){if(h)return uw(s,a,u);a.flags|=128}if(_=a.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),pe(fn,fn.current),h)break;return null;case 22:return a.lanes=0,tw(s,a,u,a.pendingProps);case 24:so(a,yn,s.memoizedState.cache)}return _s(s,a,u)}function cw(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps)_n=!0;else{if(!Ey(s,u)&&(a.flags&128)===0)return _n=!1,V2(s,a,u);_n=(s.flags&131072)!==0}else _n=!1,lt&&(a.flags&1048576)!==0&&zE(a,tc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var h=a.pendingProps;if(s=Sa(a.elementType),a.type=s,typeof s=="function")Cg(s)?(h=Ca(s,h),a.tag=1,a=sw(null,a,s,h,u)):(a.tag=0,a=py(null,a,s,h,u));else{if(s!=null){var _=s.$$typeof;if(_===G){a.tag=11,a=QS(null,a,s,h,u);break e}else if(_===R){a.tag=14,a=ZS(null,a,s,h,u);break e}}throw a=Re(s)||s,Error(i(306,a,""))}}return a;case 0:return py(s,a,a.type,a.pendingProps,u);case 1:return h=a.type,_=Ca(h,a.pendingProps),sw(s,a,h,_,u);case 3:e:{if(qe(a,a.stateNode.containerInfo),s===null)throw Error(i(387));h=a.pendingProps;var E=a.memoizedState;_=E.element,qg(s,a),uc(a,h,null,u);var b=a.memoizedState;if(h=b.cache,so(a,yn,h),h!==E.cache&&Vg(a,[yn],u,!0),lc(),h=b.element,E.isDehydrated)if(E={element:h,isDehydrated:!1,cache:b.cache},a.updateQueue.baseState=E,a.memoizedState=E,a.flags&256){a=ow(s,a,h,u);break e}else if(h!==_){_=lr(Error(i(424)),a),nc(_),a=ow(s,a,h,u);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Ft=hr(s.firstChild),Bn=a,lt=!0,io=null,fr=!0,u=tS(a,null,h,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(va(),h===_){a=_s(s,a,u);break e}zn(s,a,h,u)}a=a.child}return a;case 26:return nh(s,a),s===null?(u=EA(a.type,null,a.pendingProps,null))?a.memoizedState=u:lt||(u=a.type,s=a.pendingProps,h=_h(Te.current).createElement(u),h[Ot]=a,h[cn]=s,Hn(h,u,s),$t(h),a.stateNode=h):a.memoizedState=EA(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return Un(a),s===null&&lt&&(h=a.stateNode=vA(a.type,a.pendingProps,Te.current),Bn=a,fr=!0,_=Ft,_o(a.type)?(ev=_,Ft=hr(h.firstChild)):Ft=_),zn(s,a,a.pendingProps.children,u),nh(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&lt&&((_=h=Ft)&&(h=fV(h,a.type,a.pendingProps,fr),h!==null?(a.stateNode=h,Bn=a,Ft=hr(h.firstChild),fr=!1,_=!0):_=!1),_||ro(a)),Un(a),_=a.type,E=a.pendingProps,b=s!==null?s.memoizedProps:null,h=E.children,Jy(_,E)?h=null:b!==null&&Jy(_,b)&&(a.flags|=32),a.memoizedState!==null&&(_=Yg(s,a,C2,null,null,u),Rc._currentValue=_),nh(s,a),zn(s,a,h,u),a.child;case 6:return s===null&&lt&&((s=u=Ft)&&(u=dV(u,a.pendingProps,fr),u!==null?(a.stateNode=u,Bn=a,Ft=null,s=!0):s=!1),s||ro(a)),null;case 13:return aw(s,a,u);case 4:return qe(a,a.stateNode.containerInfo),h=a.pendingProps,s===null?a.child=Aa(a,null,h,u):zn(s,a,h,u),a.child;case 11:return QS(s,a,a.type,a.pendingProps,u);case 7:return zn(s,a,a.pendingProps,u),a.child;case 8:return zn(s,a,a.pendingProps.children,u),a.child;case 12:return zn(s,a,a.pendingProps.children,u),a.child;case 10:return h=a.pendingProps,so(a,a.type,h.value),zn(s,a,h.children,u),a.child;case 9:return _=a.type._context,h=a.pendingProps.children,Ta(a),_=qn(_),h=h(_),a.flags|=1,zn(s,a,h,u),a.child;case 14:return ZS(s,a,a.type,a.pendingProps,u);case 15:return ew(s,a,a.type,a.pendingProps,u);case 19:return uw(s,a,u);case 31:return k2(s,a,u);case 22:return tw(s,a,u,a.pendingProps);case 24:return Ta(a),h=qn(yn),s===null?(_=Ug(),_===null&&(_=Dt,E=Lg(),_.pooledCache=E,E.refCount++,E!==null&&(_.pooledCacheLanes|=u),_=E),a.memoizedState={parent:h,cache:_},Bg(a),so(a,yn,_)):((s.lanes&u)!==0&&(qg(s,a),uc(a,null,null,u),lc()),_=s.memoizedState,E=a.memoizedState,_.parent!==h?(_={parent:h,cache:h},a.memoizedState=_,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=_),so(a,yn,h)):(h=E.cache,so(a,yn,h),h!==_.cache&&Vg(a,[yn],u,!0))),zn(s,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Ts(s){s.flags|=4}function Sy(s,a,u,h,_){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(_&335544128)===_)if(s.stateNode.complete)s.flags|=8192;else if(Ow())s.flags|=8192;else throw wa=qd,Fg}else s.flags&=-16777217}function fw(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!CA(a))if(Ow())s.flags|=8192;else throw wa=qd,Fg}function rh(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?Zi():536870912,s.lanes|=a,Pl|=a)}function mc(s,a){if(!lt)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function Bt(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,h=0;if(a)for(var _=s.child;_!==null;)u|=_.lanes|_.childLanes,h|=_.subtreeFlags&65011712,h|=_.flags&65011712,_.return=s,_=_.sibling;else for(_=s.child;_!==null;)u|=_.lanes|_.childLanes,h|=_.subtreeFlags,h|=_.flags,_.return=s,_=_.sibling;return s.subtreeFlags|=h,s.childLanes=u,a}function L2(s,a,u){var h=a.pendingProps;switch(Ng(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(a),null;case 1:return Bt(a),null;case 3:return u=a.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),gs(yn),yt(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(vl(a)?Ts(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Dg())),Bt(a),null;case 26:var _=a.type,E=a.memoizedState;return s===null?(Ts(a),E!==null?(Bt(a),fw(a,E)):(Bt(a),Sy(a,_,null,h,u))):E?E!==s.memoizedState?(Ts(a),Bt(a),fw(a,E)):(Bt(a),a.flags&=-16777217):(s=s.memoizedProps,s!==h&&Ts(a),Bt(a),Sy(a,_,s,h,u)),null;case 27:if(ci(a),u=Te.current,_=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&Ts(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return Bt(a),null}s=re.current,vl(a)?GE(a):(s=vA(_,h,u),a.stateNode=s,Ts(a))}return Bt(a),null;case 5:if(ci(a),_=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&Ts(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return Bt(a),null}if(E=re.current,vl(a))GE(a);else{var b=_h(Te.current);switch(E){case 1:E=b.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:E=b.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":E=b.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":E=b.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":E=b.createElement("div"),E.innerHTML="<script><\/script>",E=E.removeChild(E.firstChild);break;case"select":E=typeof h.is=="string"?b.createElement("select",{is:h.is}):b.createElement("select"),h.multiple?E.multiple=!0:h.size&&(E.size=h.size);break;default:E=typeof h.is=="string"?b.createElement(_,{is:h.is}):b.createElement(_)}}E[Ot]=a,E[cn]=h;e:for(b=a.child;b!==null;){if(b.tag===5||b.tag===6)E.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===a)break e;for(;b.sibling===null;){if(b.return===null||b.return===a)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}a.stateNode=E;e:switch(Hn(E,_,h),_){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Ts(a)}}return Bt(a),Sy(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,u),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==h&&Ts(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(i(166));if(s=Te.current,vl(a)){if(s=a.stateNode,u=a.memoizedProps,h=null,_=Bn,_!==null)switch(_.tag){case 27:case 5:h=_.memoizedProps}s[Ot]=a,s=!!(s.nodeValue===u||h!==null&&h.suppressHydrationWarning===!0||aA(s.nodeValue,u)),s||ro(a,!0)}else s=_h(s).createTextNode(h),s[Ot]=a,a.stateNode=s}return Bt(a),null;case 31:if(u=a.memoizedState,s===null||s.memoizedState!==null){if(h=vl(a),u!==null){if(s===null){if(!h)throw Error(i(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Ot]=a}else va(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Bt(a),s=!1}else u=Dg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=u),s=!0;if(!s)return a.flags&256?(ji(a),a):(ji(a),null);if((a.flags&128)!==0)throw Error(i(558))}return Bt(a),null;case 13:if(h=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(_=vl(a),h!==null&&h.dehydrated!==null){if(s===null){if(!_)throw Error(i(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(i(317));_[Ot]=a}else va(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Bt(a),_=!1}else _=Dg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=_),_=!0;if(!_)return a.flags&256?(ji(a),a):(ji(a),null)}return ji(a),(a.flags&128)!==0?(a.lanes=u,a):(u=h!==null,s=s!==null&&s.memoizedState!==null,u&&(h=a.child,_=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(_=h.alternate.memoizedState.cachePool.pool),E=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(E=h.memoizedState.cachePool.pool),E!==_&&(h.flags|=2048)),u!==s&&u&&(a.child.flags|=8192),rh(a,a.updateQueue),Bt(a),null);case 4:return yt(),s===null&&Gy(a.stateNode.containerInfo),Bt(a),null;case 10:return gs(a.type),Bt(a),null;case 19:if(Z(fn),h=a.memoizedState,h===null)return Bt(a),null;if(_=(a.flags&128)!==0,E=h.rendering,E===null)if(_)mc(h,!1);else{if(nn!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(E=jd(s),E!==null){for(a.flags|=128,mc(h,!1),s=E.updateQueue,a.updateQueue=s,rh(a,s),a.subtreeFlags=0,s=u,u=a.child;u!==null;)FE(u,s),u=u.sibling;return pe(fn,fn.current&1|2),lt&&ps(a,h.treeForkCount),a.child}s=s.sibling}h.tail!==null&&Tt()>uh&&(a.flags|=128,_=!0,mc(h,!1),a.lanes=4194304)}else{if(!_)if(s=jd(E),s!==null){if(a.flags|=128,_=!0,s=s.updateQueue,a.updateQueue=s,rh(a,s),mc(h,!0),h.tail===null&&h.tailMode==="hidden"&&!E.alternate&&!lt)return Bt(a),null}else 2*Tt()-h.renderingStartTime>uh&&u!==536870912&&(a.flags|=128,_=!0,mc(h,!1),a.lanes=4194304);h.isBackwards?(E.sibling=a.child,a.child=E):(s=h.last,s!==null?s.sibling=E:a.child=E,h.last=E)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=Tt(),s.sibling=null,u=fn.current,pe(fn,_?u&1|2:u&1),lt&&ps(a,h.treeForkCount),s):(Bt(a),null);case 22:case 23:return ji(a),jg(),h=a.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(u&536870912)!==0&&(a.flags&128)===0&&(Bt(a),a.subtreeFlags&6&&(a.flags|=8192)):Bt(a),u=a.updateQueue,u!==null&&rh(a,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==u&&(a.flags|=2048),s!==null&&Z(Ea),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),gs(yn),Bt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function O2(s,a){switch(Ng(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return gs(yn),yt(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return ci(a),null;case 31:if(a.memoizedState!==null){if(ji(a),a.alternate===null)throw Error(i(340));va()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(ji(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));va()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return Z(fn),null;case 4:return yt(),null;case 10:return gs(a.type),null;case 22:case 23:return ji(a),jg(),s!==null&&Z(Ea),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return gs(yn),null;case 25:return null;default:return null}}function dw(s,a){switch(Ng(a),a.tag){case 3:gs(yn),yt();break;case 26:case 27:case 5:ci(a);break;case 4:yt();break;case 31:a.memoizedState!==null&&ji(a);break;case 13:ji(a);break;case 19:Z(fn);break;case 10:gs(a.type);break;case 22:case 23:ji(a),jg(),s!==null&&Z(Ea);break;case 24:gs(yn)}}function gc(s,a){try{var u=a.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var _=h.next;u=_;do{if((u.tag&s)===s){h=void 0;var E=u.create,b=u.inst;h=E(),b.destroy=h}u=u.next}while(u!==_)}}catch(M){Ct(a,a.return,M)}}function fo(s,a,u){try{var h=a.updateQueue,_=h!==null?h.lastEffect:null;if(_!==null){var E=_.next;h=E;do{if((h.tag&s)===s){var b=h.inst,M=b.destroy;if(M!==void 0){b.destroy=void 0,_=a;var j=u,Q=M;try{Q()}catch(se){Ct(_,j,se)}}}h=h.next}while(h!==E)}}catch(se){Ct(a,a.return,se)}}function hw(s){var a=s.updateQueue;if(a!==null){var u=s.stateNode;try{iS(a,u)}catch(h){Ct(s,s.return,h)}}}function pw(s,a,u){u.props=Ca(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(h){Ct(s,a,h)}}function yc(s,a){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof u=="function"?s.refCleanup=u(h):u.current=h}}catch(_){Ct(s,a,_)}}function Yr(s,a){var u=s.ref,h=s.refCleanup;if(u!==null)if(typeof h=="function")try{h()}catch(_){Ct(s,a,_)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(_){Ct(s,a,_)}else u.current=null}function mw(s){var a=s.type,u=s.memoizedProps,h=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&h.focus();break e;case"img":u.src?h.src=u.src:u.srcSet&&(h.srcset=u.srcSet)}}catch(_){Ct(s,s.return,_)}}function wy(s,a,u){try{var h=s.stateNode;sV(h,s.type,u,a),h[cn]=a}catch(_){Ct(s,s.return,_)}}function gw(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&_o(s.type)||s.tag===4}function Ay(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||gw(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&_o(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function by(s,a,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(s),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Dn));else if(h!==4&&(h===27&&_o(s.type)&&(u=s.stateNode,a=null),s=s.child,s!==null))for(by(s,a,u),s=s.sibling;s!==null;)by(s,a,u),s=s.sibling}function sh(s,a,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(h!==4&&(h===27&&_o(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(sh(s,a,u),s=s.sibling;s!==null;)sh(s,a,u),s=s.sibling}function yw(s){var a=s.stateNode,u=s.memoizedProps;try{for(var h=s.type,_=a.attributes;_.length;)a.removeAttributeNode(_[0]);Hn(a,h,u),a[Ot]=s,a[cn]=u}catch(E){Ct(s,s.return,E)}}var Es=!1,Tn=!1,Cy=!1,vw=typeof WeakSet=="function"?WeakSet:Set,Vn=null;function U2(s,a){if(s=s.containerInfo,Ky=Ch,s=NE(s),_g(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var _=h.anchorOffset,E=h.focusNode;h=h.focusOffset;try{u.nodeType,E.nodeType}catch{u=null;break e}var b=0,M=-1,j=-1,Q=0,se=0,le=s,te=null;t:for(;;){for(var ne;le!==u||_!==0&&le.nodeType!==3||(M=b+_),le!==E||h!==0&&le.nodeType!==3||(j=b+h),le.nodeType===3&&(b+=le.nodeValue.length),(ne=le.firstChild)!==null;)te=le,le=ne;for(;;){if(le===s)break t;if(te===u&&++Q===_&&(M=b),te===E&&++se===h&&(j=b),(ne=le.nextSibling)!==null)break;le=te,te=le.parentNode}le=ne}u=M===-1||j===-1?null:{start:M,end:j}}else u=null}u=u||{start:0,end:0}}else u=null;for(Yy={focusedElem:s,selectionRange:u},Ch=!1,Vn=a;Vn!==null;)if(a=Vn,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Vn=s;else for(;Vn!==null;){switch(a=Vn,E=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(u=0;u<s.length;u++)_=s[u],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&E!==null){s=void 0,u=a,_=E.memoizedProps,E=E.memoizedState,h=u.stateNode;try{var Ce=Ca(u.type,_);s=h.getSnapshotBeforeUpdate(Ce,E),h.__reactInternalSnapshotBeforeUpdate=s}catch(Le){Ct(u,u.return,Le)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,u=s.nodeType,u===9)Xy(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Xy(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,Vn=s;break}Vn=a.return}}function _w(s,a,u){var h=u.flags;switch(u.tag){case 0:case 11:case 15:ws(s,u),h&4&&gc(5,u);break;case 1:if(ws(s,u),h&4)if(s=u.stateNode,a===null)try{s.componentDidMount()}catch(b){Ct(u,u.return,b)}else{var _=Ca(u.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(_,a,s.__reactInternalSnapshotBeforeUpdate)}catch(b){Ct(u,u.return,b)}}h&64&&hw(u),h&512&&yc(u,u.return);break;case 3:if(ws(s,u),h&64&&(s=u.updateQueue,s!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{iS(s,a)}catch(b){Ct(u,u.return,b)}}break;case 27:a===null&&h&4&&yw(u);case 26:case 5:ws(s,u),a===null&&h&4&&mw(u),h&512&&yc(u,u.return);break;case 12:ws(s,u);break;case 31:ws(s,u),h&4&&Sw(s,u);break;case 13:ws(s,u),h&4&&ww(s,u),h&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=K2.bind(null,u),hV(s,u))));break;case 22:if(h=u.memoizedState!==null||Es,!h){a=a!==null&&a.memoizedState!==null||Tn,_=Es;var E=Tn;Es=h,(Tn=a)&&!E?As(s,u,(u.subtreeFlags&8772)!==0):ws(s,u),Es=_,Tn=E}break;case 30:break;default:ws(s,u)}}function Tw(s){var a=s.alternate;a!==null&&(s.alternate=null,Tw(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&ir(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Kt=null,xi=!1;function Ss(s,a,u){for(u=u.child;u!==null;)Ew(s,a,u),u=u.sibling}function Ew(s,a,u){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(Pn,u)}catch{}switch(u.tag){case 26:Tn||Yr(u,a),Ss(s,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Tn||Yr(u,a);var h=Kt,_=xi;_o(u.type)&&(Kt=u.stateNode,xi=!1),Ss(s,a,u),Cc(u.stateNode),Kt=h,xi=_;break;case 5:Tn||Yr(u,a);case 6:if(h=Kt,_=xi,Kt=null,Ss(s,a,u),Kt=h,xi=_,Kt!==null)if(xi)try{(Kt.nodeType===9?Kt.body:Kt.nodeName==="HTML"?Kt.ownerDocument.body:Kt).removeChild(u.stateNode)}catch(E){Ct(u,a,E)}else try{Kt.removeChild(u.stateNode)}catch(E){Ct(u,a,E)}break;case 18:Kt!==null&&(xi?(s=Kt,hA(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),Fl(s)):hA(Kt,u.stateNode));break;case 4:h=Kt,_=xi,Kt=u.stateNode.containerInfo,xi=!0,Ss(s,a,u),Kt=h,xi=_;break;case 0:case 11:case 14:case 15:fo(2,u,a),Tn||fo(4,u,a),Ss(s,a,u);break;case 1:Tn||(Yr(u,a),h=u.stateNode,typeof h.componentWillUnmount=="function"&&pw(u,a,h)),Ss(s,a,u);break;case 21:Ss(s,a,u);break;case 22:Tn=(h=Tn)||u.memoizedState!==null,Ss(s,a,u),Tn=h;break;default:Ss(s,a,u)}}function Sw(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Fl(s)}catch(u){Ct(a,a.return,u)}}}function ww(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Fl(s)}catch(u){Ct(a,a.return,u)}}function F2(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new vw),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new vw),a;default:throw Error(i(435,s.tag))}}function oh(s,a){var u=F2(s);a.forEach(function(h){if(!u.has(h)){u.add(h);var _=Y2.bind(null,s,h);h.then(_,_)}})}function Ii(s,a){var u=a.deletions;if(u!==null)for(var h=0;h<u.length;h++){var _=u[h],E=s,b=a,M=b;e:for(;M!==null;){switch(M.tag){case 27:if(_o(M.type)){Kt=M.stateNode,xi=!1;break e}break;case 5:Kt=M.stateNode,xi=!1;break e;case 3:case 4:Kt=M.stateNode.containerInfo,xi=!0;break e}M=M.return}if(Kt===null)throw Error(i(160));Ew(E,b,_),Kt=null,xi=!1,E=_.alternate,E!==null&&(E.return=null),_.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Aw(a,s),a=a.sibling}var Ir=null;function Aw(s,a){var u=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ii(a,s),Ri(s),h&4&&(fo(3,s,s.return),gc(3,s),fo(5,s,s.return));break;case 1:Ii(a,s),Ri(s),h&512&&(Tn||u===null||Yr(u,u.return)),h&64&&Es&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?h:u.concat(h))));break;case 26:var _=Ir;if(Ii(a,s),Ri(s),h&512&&(Tn||u===null||Yr(u,u.return)),h&4){var E=u!==null?u.memoizedState:null;if(h=s.memoizedState,u===null)if(h===null)if(s.stateNode===null){e:{h=s.type,u=s.memoizedProps,_=_.ownerDocument||_;t:switch(h){case"title":E=_.getElementsByTagName("title")[0],(!E||E[nr]||E[Ot]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=_.createElement(h),_.head.insertBefore(E,_.querySelector("head > title"))),Hn(E,h,u),E[Ot]=s,$t(E),h=E;break e;case"link":var b=AA("link","href",_).get(h+(u.href||""));if(b){for(var M=0;M<b.length;M++)if(E=b[M],E.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&E.getAttribute("rel")===(u.rel==null?null:u.rel)&&E.getAttribute("title")===(u.title==null?null:u.title)&&E.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){b.splice(M,1);break t}}E=_.createElement(h),Hn(E,h,u),_.head.appendChild(E);break;case"meta":if(b=AA("meta","content",_).get(h+(u.content||""))){for(M=0;M<b.length;M++)if(E=b[M],E.getAttribute("content")===(u.content==null?null:""+u.content)&&E.getAttribute("name")===(u.name==null?null:u.name)&&E.getAttribute("property")===(u.property==null?null:u.property)&&E.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&E.getAttribute("charset")===(u.charSet==null?null:u.charSet)){b.splice(M,1);break t}}E=_.createElement(h),Hn(E,h,u),_.head.appendChild(E);break;default:throw Error(i(468,h))}E[Ot]=s,$t(E),h=E}s.stateNode=h}else bA(_,s.type,s.stateNode);else s.stateNode=wA(_,h,s.memoizedProps);else E!==h?(E===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):E.count--,h===null?bA(_,s.type,s.stateNode):wA(_,h,s.memoizedProps)):h===null&&s.stateNode!==null&&wy(s,s.memoizedProps,u.memoizedProps)}break;case 27:Ii(a,s),Ri(s),h&512&&(Tn||u===null||Yr(u,u.return)),u!==null&&h&4&&wy(s,s.memoizedProps,u.memoizedProps);break;case 5:if(Ii(a,s),Ri(s),h&512&&(Tn||u===null||Yr(u,u.return)),s.flags&32){_=s.stateNode;try{or(_,"")}catch(Ce){Ct(s,s.return,Ce)}}h&4&&s.stateNode!=null&&(_=s.memoizedProps,wy(s,_,u!==null?u.memoizedProps:_)),h&1024&&(Cy=!0);break;case 6:if(Ii(a,s),Ri(s),h&4){if(s.stateNode===null)throw Error(i(162));h=s.memoizedProps,u=s.stateNode;try{u.nodeValue=h}catch(Ce){Ct(s,s.return,Ce)}}break;case 3:if(Sh=null,_=Ir,Ir=Th(a.containerInfo),Ii(a,s),Ir=_,Ri(s),h&4&&u!==null&&u.memoizedState.isDehydrated)try{Fl(a.containerInfo)}catch(Ce){Ct(s,s.return,Ce)}Cy&&(Cy=!1,bw(s));break;case 4:h=Ir,Ir=Th(s.stateNode.containerInfo),Ii(a,s),Ri(s),Ir=h;break;case 12:Ii(a,s),Ri(s);break;case 31:Ii(a,s),Ri(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,oh(s,h)));break;case 13:Ii(a,s),Ri(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(lh=Tt()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,oh(s,h)));break;case 22:_=s.memoizedState!==null;var j=u!==null&&u.memoizedState!==null,Q=Es,se=Tn;if(Es=Q||_,Tn=se||j,Ii(a,s),Tn=se,Es=Q,Ri(s),h&8192)e:for(a=s.stateNode,a._visibility=_?a._visibility&-2:a._visibility|1,_&&(u===null||j||Es||Tn||xa(s)),u=null,a=s;;){if(a.tag===5||a.tag===26){if(u===null){j=u=a;try{if(E=j.stateNode,_)b=E.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{M=j.stateNode;var le=j.memoizedProps.style,te=le!=null&&le.hasOwnProperty("display")?le.display:null;M.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Ce){Ct(j,j.return,Ce)}}}else if(a.tag===6){if(u===null){j=a;try{j.stateNode.nodeValue=_?"":j.memoizedProps}catch(Ce){Ct(j,j.return,Ce)}}}else if(a.tag===18){if(u===null){j=a;try{var ne=j.stateNode;_?pA(ne,!0):pA(j.stateNode,!1)}catch(Ce){Ct(j,j.return,Ce)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=s.updateQueue,h!==null&&(u=h.retryQueue,u!==null&&(h.retryQueue=null,oh(s,u))));break;case 19:Ii(a,s),Ri(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,oh(s,h)));break;case 30:break;case 21:break;default:Ii(a,s),Ri(s)}}function Ri(s){var a=s.flags;if(a&2){try{for(var u,h=s.return;h!==null;){if(gw(h)){u=h;break}h=h.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var _=u.stateNode,E=Ay(s);sh(s,E,_);break;case 5:var b=u.stateNode;u.flags&32&&(or(b,""),u.flags&=-33);var M=Ay(s);sh(s,M,b);break;case 3:case 4:var j=u.stateNode.containerInfo,Q=Ay(s);by(s,Q,j);break;default:throw Error(i(161))}}catch(se){Ct(s,s.return,se)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function bw(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;bw(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function ws(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)_w(s,a.alternate,a),a=a.sibling}function xa(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:fo(4,a,a.return),xa(a);break;case 1:Yr(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&pw(a,a.return,u),xa(a);break;case 27:Cc(a.stateNode);case 26:case 5:Yr(a,a.return),xa(a);break;case 22:a.memoizedState===null&&xa(a);break;case 30:xa(a);break;default:xa(a)}s=s.sibling}}function As(s,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,_=s,E=a,b=E.flags;switch(E.tag){case 0:case 11:case 15:As(_,E,u),gc(4,E);break;case 1:if(As(_,E,u),h=E,_=h.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(Q){Ct(h,h.return,Q)}if(h=E,_=h.updateQueue,_!==null){var M=h.stateNode;try{var j=_.shared.hiddenCallbacks;if(j!==null)for(_.shared.hiddenCallbacks=null,_=0;_<j.length;_++)nS(j[_],M)}catch(Q){Ct(h,h.return,Q)}}u&&b&64&&hw(E),yc(E,E.return);break;case 27:yw(E);case 26:case 5:As(_,E,u),u&&h===null&&b&4&&mw(E),yc(E,E.return);break;case 12:As(_,E,u);break;case 31:As(_,E,u),u&&b&4&&Sw(_,E);break;case 13:As(_,E,u),u&&b&4&&ww(_,E);break;case 22:E.memoizedState===null&&As(_,E,u),yc(E,E.return);break;case 30:break;default:As(_,E,u)}a=a.sibling}}function xy(s,a){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&ic(u))}function Iy(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&ic(s))}function Rr(s,a,u,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Cw(s,a,u,h),a=a.sibling}function Cw(s,a,u,h){var _=a.flags;switch(a.tag){case 0:case 11:case 15:Rr(s,a,u,h),_&2048&&gc(9,a);break;case 1:Rr(s,a,u,h);break;case 3:Rr(s,a,u,h),_&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&ic(s)));break;case 12:if(_&2048){Rr(s,a,u,h),s=a.stateNode;try{var E=a.memoizedProps,b=E.id,M=E.onPostCommit;typeof M=="function"&&M(b,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(j){Ct(a,a.return,j)}}else Rr(s,a,u,h);break;case 31:Rr(s,a,u,h);break;case 13:Rr(s,a,u,h);break;case 23:break;case 22:E=a.stateNode,b=a.alternate,a.memoizedState!==null?E._visibility&2?Rr(s,a,u,h):vc(s,a):E._visibility&2?Rr(s,a,u,h):(E._visibility|=2,Il(s,a,u,h,(a.subtreeFlags&10256)!==0||!1)),_&2048&&xy(b,a);break;case 24:Rr(s,a,u,h),_&2048&&Iy(a.alternate,a);break;default:Rr(s,a,u,h)}}function Il(s,a,u,h,_){for(_=_&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var E=s,b=a,M=u,j=h,Q=b.flags;switch(b.tag){case 0:case 11:case 15:Il(E,b,M,j,_),gc(8,b);break;case 23:break;case 22:var se=b.stateNode;b.memoizedState!==null?se._visibility&2?Il(E,b,M,j,_):vc(E,b):(se._visibility|=2,Il(E,b,M,j,_)),_&&Q&2048&&xy(b.alternate,b);break;case 24:Il(E,b,M,j,_),_&&Q&2048&&Iy(b.alternate,b);break;default:Il(E,b,M,j,_)}a=a.sibling}}function vc(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=s,h=a,_=h.flags;switch(h.tag){case 22:vc(u,h),_&2048&&xy(h.alternate,h);break;case 24:vc(u,h),_&2048&&Iy(h.alternate,h);break;default:vc(u,h)}a=a.sibling}}var _c=8192;function Rl(s,a,u){if(s.subtreeFlags&_c)for(s=s.child;s!==null;)xw(s,a,u),s=s.sibling}function xw(s,a,u){switch(s.tag){case 26:Rl(s,a,u),s.flags&_c&&s.memoizedState!==null&&bV(u,Ir,s.memoizedState,s.memoizedProps);break;case 5:Rl(s,a,u);break;case 3:case 4:var h=Ir;Ir=Th(s.stateNode.containerInfo),Rl(s,a,u),Ir=h;break;case 22:s.memoizedState===null&&(h=s.alternate,h!==null&&h.memoizedState!==null?(h=_c,_c=16777216,Rl(s,a,u),_c=h):Rl(s,a,u));break;default:Rl(s,a,u)}}function Iw(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function Tc(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var h=a[u];Vn=h,Nw(h,s)}Iw(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Rw(s),s=s.sibling}function Rw(s){switch(s.tag){case 0:case 11:case 15:Tc(s),s.flags&2048&&fo(9,s,s.return);break;case 3:Tc(s);break;case 12:Tc(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,ah(s)):Tc(s);break;default:Tc(s)}}function ah(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var h=a[u];Vn=h,Nw(h,s)}Iw(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:fo(8,a,a.return),ah(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,ah(a));break;default:ah(a)}s=s.sibling}}function Nw(s,a){for(;Vn!==null;){var u=Vn;switch(u.tag){case 0:case 11:case 15:fo(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var h=u.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:ic(u.memoizedState.cache)}if(h=u.child,h!==null)h.return=u,Vn=h;else e:for(u=s;Vn!==null;){h=Vn;var _=h.sibling,E=h.return;if(Tw(h),h===u){Vn=null;break e}if(_!==null){_.return=E,Vn=_;break e}Vn=E}}}var B2={getCacheForType:function(s){var a=qn(yn),u=a.data.get(s);return u===void 0&&(u=s(),a.data.set(s,u)),u},cacheSignal:function(){return qn(yn).controller.signal}},q2=typeof WeakMap=="function"?WeakMap:Map,vt=0,Dt=null,tt=null,rt=0,bt=0,$i=null,ho=!1,Nl=!1,Ry=!1,bs=0,nn=0,po=0,Ia=0,Ny=0,Ki=0,Pl=0,Ec=null,Ni=null,Py=!1,lh=0,Pw=0,uh=1/0,ch=null,mo=null,bn=0,go=null,Dl=null,Cs=0,Dy=0,My=null,Dw=null,Sc=0,ky=null;function Yi(){return(vt&2)!==0&&rt!==0?rt&-rt:ee.T!==null?By():di()}function Mw(){if(Ki===0)if((rt&536870912)===0||lt){var s=ke;ke<<=1,(ke&3932160)===0&&(ke=262144),Ki=s}else Ki=536870912;return s=Gi.current,s!==null&&(s.flags|=32),Ki}function Pi(s,a,u){(s===Dt&&(bt===2||bt===9)||s.cancelPendingCommit!==null)&&(Ml(s,0),yo(s,rt,Ki,!1)),Mt(s,u),((vt&2)===0||s!==Dt)&&(s===Dt&&((vt&2)===0&&(Ia|=u),nn===4&&yo(s,rt,Ki,!1)),Jr(s))}function kw(s,a,u){if((vt&6)!==0)throw Error(i(327));var h=!u&&(a&127)===0&&(a&s.expiredLanes)===0||$e(s,a),_=h?G2(s,a):Ly(s,a,!0),E=h;do{if(_===0){Nl&&!h&&yo(s,a,0,!1);break}else{if(u=s.current.alternate,E&&!z2(u)){_=Ly(s,a,!1),E=!1;continue}if(_===2){if(E=a,s.errorRecoveryDisabledLanes&E)var b=0;else b=s.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){a=b;e:{var M=s;_=Ec;var j=M.current.memoizedState.isDehydrated;if(j&&(Ml(M,b).flags|=256),b=Ly(M,b,!1),b!==2){if(Ry&&!j){M.errorRecoveryDisabledLanes|=E,Ia|=E,_=4;break e}E=Ni,Ni=_,E!==null&&(Ni===null?Ni=E:Ni.push.apply(Ni,E))}_=b}if(E=!1,_!==2)continue}}if(_===1){Ml(s,0),yo(s,a,0,!0);break}e:{switch(h=s,E=_,E){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:yo(h,a,Ki,!ho);break e;case 2:Ni=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(_=lh+300-Tt(),10<_)){if(yo(h,a,Ki,!ho),Pe(h,0,!0)!==0)break e;Cs=a,h.timeoutHandle=fA(Vw.bind(null,h,u,Ni,ch,Py,a,Ki,Ia,Pl,ho,E,"Throttled",-0,0),_);break e}Vw(h,u,Ni,ch,Py,a,Ki,Ia,Pl,ho,E,null,-0,0)}}break}while(!0);Jr(s)}function Vw(s,a,u,h,_,E,b,M,j,Q,se,le,te,ne){if(s.timeoutHandle=-1,le=a.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Dn},xw(a,E,le);var Ce=(E&62914560)===E?lh-Tt():(E&4194048)===E?Pw-Tt():0;if(Ce=CV(le,Ce),Ce!==null){Cs=E,s.cancelPendingCommit=Ce(Hw.bind(null,s,a,E,u,h,_,b,M,j,se,le,null,te,ne)),yo(s,E,b,!Q);return}}Hw(s,a,E,u,h,_,b,M,j)}function z2(s){for(var a=s;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var h=0;h<u.length;h++){var _=u[h],E=_.getSnapshot;_=_.value;try{if(!zi(E(),_))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function yo(s,a,u,h){a&=~Ny,a&=~Ia,s.suspendedLanes|=a,s.pingedLanes&=~a,h&&(s.warmLanes|=a),h=s.expirationTimes;for(var _=a;0<_;){var E=31-Ee(_),b=1<<E;h[E]=-1,_&=~b}u!==0&&fi(s,u,a)}function fh(){return(vt&6)===0?(wc(0),!1):!0}function Vy(){if(tt!==null){if(bt===0)var s=tt.return;else s=tt,ms=_a=null,Xg(s),wl=null,sc=0,s=tt;for(;s!==null;)dw(s.alternate,s),s=s.return;tt=null}}function Ml(s,a){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,lV(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),Cs=0,Vy(),Dt=s,tt=u=hs(s.current,null),rt=a,bt=0,$i=null,ho=!1,Nl=$e(s,a),Ry=!1,Pl=Ki=Ny=Ia=po=nn=0,Ni=Ec=null,Py=!1,(a&8)!==0&&(a|=a&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=a;0<h;){var _=31-Ee(h),E=1<<_;a|=s[_],h&=~E}return bs=a,Dd(),u}function Lw(s,a){Ye=null,ee.H=hc,a===Sl||a===Bd?(a=QE(),bt=3):a===Fg?(a=QE(),bt=4):bt=a===hy?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,$i=a,tt===null&&(nn=1,eh(s,lr(a,s.current)))}function Ow(){var s=Gi.current;return s===null?!0:(rt&4194048)===rt?dr===null:(rt&62914560)===rt||(rt&536870912)!==0?s===dr:!1}function Uw(){var s=ee.H;return ee.H=hc,s===null?hc:s}function Fw(){var s=ee.A;return ee.A=B2,s}function dh(){nn=4,ho||(rt&4194048)!==rt&&Gi.current!==null||(Nl=!0),(po&134217727)===0&&(Ia&134217727)===0||Dt===null||yo(Dt,rt,Ki,!1)}function Ly(s,a,u){var h=vt;vt|=2;var _=Uw(),E=Fw();(Dt!==s||rt!==a)&&(ch=null,Ml(s,a)),a=!1;var b=nn;e:do try{if(bt!==0&&tt!==null){var M=tt,j=$i;switch(bt){case 8:Vy(),b=6;break e;case 3:case 2:case 9:case 6:Gi.current===null&&(a=!0);var Q=bt;if(bt=0,$i=null,kl(s,M,j,Q),u&&Nl){b=0;break e}break;default:Q=bt,bt=0,$i=null,kl(s,M,j,Q)}}H2(),b=nn;break}catch(se){Lw(s,se)}while(!0);return a&&s.shellSuspendCounter++,ms=_a=null,vt=h,ee.H=_,ee.A=E,tt===null&&(Dt=null,rt=0,Dd()),b}function H2(){for(;tt!==null;)Bw(tt)}function G2(s,a){var u=vt;vt|=2;var h=Uw(),_=Fw();Dt!==s||rt!==a?(ch=null,uh=Tt()+500,Ml(s,a)):Nl=$e(s,a);e:do try{if(bt!==0&&tt!==null){a=tt;var E=$i;t:switch(bt){case 1:bt=0,$i=null,kl(s,a,E,1);break;case 2:case 9:if(WE(E)){bt=0,$i=null,qw(a);break}a=function(){bt!==2&&bt!==9||Dt!==s||(bt=7),Jr(s)},E.then(a,a);break e;case 3:bt=7;break e;case 4:bt=5;break e;case 7:WE(E)?(bt=0,$i=null,qw(a)):(bt=0,$i=null,kl(s,a,E,7));break;case 5:var b=null;switch(tt.tag){case 26:b=tt.memoizedState;case 5:case 27:var M=tt;if(b?CA(b):M.stateNode.complete){bt=0,$i=null;var j=M.sibling;if(j!==null)tt=j;else{var Q=M.return;Q!==null?(tt=Q,hh(Q)):tt=null}break t}}bt=0,$i=null,kl(s,a,E,5);break;case 6:bt=0,$i=null,kl(s,a,E,6);break;case 8:Vy(),nn=6;break e;default:throw Error(i(462))}}j2();break}catch(se){Lw(s,se)}while(!0);return ms=_a=null,ee.H=h,ee.A=_,vt=u,tt!==null?0:(Dt=null,rt=0,Dd(),nn)}function j2(){for(;tt!==null&&!Vi();)Bw(tt)}function Bw(s){var a=cw(s.alternate,s,bs);s.memoizedProps=s.pendingProps,a===null?hh(s):tt=a}function qw(s){var a=s,u=a.alternate;switch(a.tag){case 15:case 0:a=rw(u,a,a.pendingProps,a.type,void 0,rt);break;case 11:a=rw(u,a,a.pendingProps,a.type.render,a.ref,rt);break;case 5:Xg(a);default:dw(u,a),a=tt=FE(a,bs),a=cw(u,a,bs)}s.memoizedProps=s.pendingProps,a===null?hh(s):tt=a}function kl(s,a,u,h){ms=_a=null,Xg(a),wl=null,sc=0;var _=a.return;try{if(M2(s,_,a,u,rt)){nn=1,eh(s,lr(u,s.current)),tt=null;return}}catch(E){if(_!==null)throw tt=_,E;nn=1,eh(s,lr(u,s.current)),tt=null;return}a.flags&32768?(lt||h===1?s=!0:Nl||(rt&536870912)!==0?s=!1:(ho=s=!0,(h===2||h===9||h===3||h===6)&&(h=Gi.current,h!==null&&h.tag===13&&(h.flags|=16384))),zw(a,s)):hh(a)}function hh(s){var a=s;do{if((a.flags&32768)!==0){zw(a,ho);return}s=a.return;var u=L2(a.alternate,a,bs);if(u!==null){tt=u;return}if(a=a.sibling,a!==null){tt=a;return}tt=a=s}while(a!==null);nn===0&&(nn=5)}function zw(s,a){do{var u=O2(s.alternate,s);if(u!==null){u.flags&=32767,tt=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(s=s.sibling,s!==null)){tt=s;return}tt=s=u}while(s!==null);nn=6,tt=null}function Hw(s,a,u,h,_,E,b,M,j){s.cancelPendingCommit=null;do ph();while(bn!==0);if((vt&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(E=a.lanes|a.childLanes,E|=Ag,At(s,u,E,b,M,j),s===Dt&&(tt=Dt=null,rt=0),Dl=a,go=s,Cs=u,Dy=E,My=_,Dw=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,J2(Yt,function(){return Yw(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=ee.T,ee.T=null,_=oe.p,oe.p=2,b=vt,vt|=4;try{U2(s,a,u)}finally{vt=b,oe.p=_,ee.T=h}}bn=1,Gw(),jw(),$w()}}function Gw(){if(bn===1){bn=0;var s=go,a=Dl,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=ee.T,ee.T=null;var h=oe.p;oe.p=2;var _=vt;vt|=4;try{Aw(a,s);var E=Yy,b=NE(s.containerInfo),M=E.focusedElem,j=E.selectionRange;if(b!==M&&M&&M.ownerDocument&&RE(M.ownerDocument.documentElement,M)){if(j!==null&&_g(M)){var Q=j.start,se=j.end;if(se===void 0&&(se=Q),"selectionStart"in M)M.selectionStart=Q,M.selectionEnd=Math.min(se,M.value.length);else{var le=M.ownerDocument||document,te=le&&le.defaultView||window;if(te.getSelection){var ne=te.getSelection(),Ce=M.textContent.length,Le=Math.min(j.start,Ce),Nt=j.end===void 0?Le:Math.min(j.end,Ce);!ne.extend&&Le>Nt&&(b=Nt,Nt=Le,Le=b);var J=IE(M,Le),Y=IE(M,Nt);if(J&&Y&&(ne.rangeCount!==1||ne.anchorNode!==J.node||ne.anchorOffset!==J.offset||ne.focusNode!==Y.node||ne.focusOffset!==Y.offset)){var X=le.createRange();X.setStart(J.node,J.offset),ne.removeAllRanges(),Le>Nt?(ne.addRange(X),ne.extend(Y.node,Y.offset)):(X.setEnd(Y.node,Y.offset),ne.addRange(X))}}}}for(le=[],ne=M;ne=ne.parentNode;)ne.nodeType===1&&le.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<le.length;M++){var ae=le[M];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Ch=!!Ky,Yy=Ky=null}finally{vt=_,oe.p=h,ee.T=u}}s.current=a,bn=2}}function jw(){if(bn===2){bn=0;var s=go,a=Dl,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=ee.T,ee.T=null;var h=oe.p;oe.p=2;var _=vt;vt|=4;try{_w(s,a.alternate,a)}finally{vt=_,oe.p=h,ee.T=u}}bn=3}}function $w(){if(bn===4||bn===3){bn=0,Li();var s=go,a=Dl,u=Cs,h=Dw;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?bn=5:(bn=0,Dl=go=null,Kw(s,s.pendingLanes));var _=s.pendingLanes;if(_===0&&(mo=null),Fn(u),a=a.stateNode,mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(Pn,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=ee.T,_=oe.p,oe.p=2,ee.T=null;try{for(var E=s.onRecoverableError,b=0;b<h.length;b++){var M=h[b];E(M.value,{componentStack:M.stack})}}finally{ee.T=a,oe.p=_}}(Cs&3)!==0&&ph(),Jr(s),_=s.pendingLanes,(u&261930)!==0&&(_&42)!==0?s===ky?Sc++:(Sc=0,ky=s):Sc=0,wc(0)}}function Kw(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,ic(a)))}function ph(){return Gw(),jw(),$w(),Yw()}function Yw(){if(bn!==5)return!1;var s=go,a=Dy;Dy=0;var u=Fn(Cs),h=ee.T,_=oe.p;try{oe.p=32>u?32:u,ee.T=null,u=My,My=null;var E=go,b=Cs;if(bn=0,Dl=go=null,Cs=0,(vt&6)!==0)throw Error(i(331));var M=vt;if(vt|=4,Rw(E.current),Cw(E,E.current,b,u),vt=M,wc(0,!1),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(Pn,E)}catch{}return!0}finally{oe.p=_,ee.T=h,Kw(s,a)}}function Jw(s,a,u){a=lr(u,a),a=dy(s.stateNode,a,2),s=lo(s,a,2),s!==null&&(Mt(s,2),Jr(s))}function Ct(s,a,u){if(s.tag===3)Jw(s,s,u);else for(;a!==null;){if(a.tag===3){Jw(a,s,u);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(mo===null||!mo.has(h))){s=lr(u,s),u=WS(2),h=lo(a,u,2),h!==null&&(XS(u,h,a,s),Mt(h,2),Jr(h));break}}a=a.return}}function Oy(s,a,u){var h=s.pingCache;if(h===null){h=s.pingCache=new q2;var _=new Set;h.set(a,_)}else _=h.get(a),_===void 0&&(_=new Set,h.set(a,_));_.has(u)||(Ry=!0,_.add(u),s=$2.bind(null,s,a,u),a.then(s,s))}function $2(s,a,u){var h=s.pingCache;h!==null&&h.delete(a),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,Dt===s&&(rt&u)===u&&(nn===4||nn===3&&(rt&62914560)===rt&&300>Tt()-lh?(vt&2)===0&&Ml(s,0):Ny|=u,Pl===rt&&(Pl=0)),Jr(s)}function Ww(s,a){a===0&&(a=Zi()),s=ga(s,a),s!==null&&(Mt(s,a),Jr(s))}function K2(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),Ww(s,u)}function Y2(s,a){var u=0;switch(s.tag){case 31:case 13:var h=s.stateNode,_=s.memoizedState;_!==null&&(u=_.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(a),Ww(s,u)}function J2(s,a){return ft(s,a)}var mh=null,Vl=null,Uy=!1,gh=!1,Fy=!1,vo=0;function Jr(s){s!==Vl&&s.next===null&&(Vl===null?mh=Vl=s:Vl=Vl.next=s),gh=!0,Uy||(Uy=!0,X2())}function wc(s,a){if(!Fy&&gh){Fy=!0;do for(var u=!1,h=mh;h!==null;){if(s!==0){var _=h.pendingLanes;if(_===0)var E=0;else{var b=h.suspendedLanes,M=h.pingedLanes;E=(1<<31-Ee(42|s)+1)-1,E&=_&~(b&~M),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(u=!0,eA(h,E))}else E=rt,E=Pe(h,h===Dt?E:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(E&3)===0||$e(h,E)||(u=!0,eA(h,E));h=h.next}while(u);Fy=!1}}function W2(){Xw()}function Xw(){gh=Uy=!1;var s=0;vo!==0&&aV()&&(s=vo);for(var a=Tt(),u=null,h=mh;h!==null;){var _=h.next,E=Qw(h,a);E===0?(h.next=null,u===null?mh=_:u.next=_,_===null&&(Vl=u)):(u=h,(s!==0||(E&3)!==0)&&(gh=!0)),h=_}bn!==0&&bn!==5||wc(s),vo!==0&&(vo=0)}function Qw(s,a){for(var u=s.suspendedLanes,h=s.pingedLanes,_=s.expirationTimes,E=s.pendingLanes&-62914561;0<E;){var b=31-Ee(E),M=1<<b,j=_[b];j===-1?((M&u)===0||(M&h)!==0)&&(_[b]=ln(M,a)):j<=a&&(s.expiredLanes|=M),E&=~M}if(a=Dt,u=rt,u=Pe(s,s===a?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,u===0||s===a&&(bt===2||bt===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&wi(h),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||$e(s,u)){if(a=u&-u,a===s.callbackPriority)return a;switch(h!==null&&wi(h),Fn(u)){case 2:case 8:u=Lt;break;case 32:u=Yt;break;case 268435456:u=Sr;break;default:u=Yt}return h=Zw.bind(null,s),u=ft(u,h),s.callbackPriority=a,s.callbackNode=u,a}return h!==null&&h!==null&&wi(h),s.callbackPriority=2,s.callbackNode=null,2}function Zw(s,a){if(bn!==0&&bn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(ph()&&s.callbackNode!==u)return null;var h=rt;return h=Pe(s,s===Dt?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(kw(s,h,a),Qw(s,Tt()),s.callbackNode!=null&&s.callbackNode===u?Zw.bind(null,s):null)}function eA(s,a){if(ph())return null;kw(s,a,!0)}function X2(){uV(function(){(vt&6)!==0?ft(Ke,W2):Xw()})}function By(){if(vo===0){var s=Tl;s===0&&(s=Ne,Ne<<=1,(Ne&261888)===0&&(Ne=256)),vo=s}return vo}function tA(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Hr(""+s)}function nA(s,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,s.id&&u.setAttribute("form",s.id),a.parentNode.insertBefore(u,a),s=new FormData(s),u.parentNode.removeChild(u),s}function Q2(s,a,u,h,_){if(a==="submit"&&u&&u.stateNode===_){var E=tA((_[cn]||null).action),b=h.submitter;b&&(a=(a=b[cn]||null)?tA(a.formAction):b.getAttribute("formAction"),a!==null&&(E=a,b=null));var M=new ua("action","action",null,h,_);s.push({event:M,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(vo!==0){var j=b?nA(_,b):new FormData(_);oy(u,{pending:!0,data:j,method:_.method,action:E},null,j)}}else typeof E=="function"&&(M.preventDefault(),j=b?nA(_,b):new FormData(_),oy(u,{pending:!0,data:j,method:_.method,action:E},E,j))},currentTarget:_}]})}}for(var qy=0;qy<wg.length;qy++){var zy=wg[qy],Z2=zy.toLowerCase(),eV=zy[0].toUpperCase()+zy.slice(1);xr(Z2,"on"+eV)}xr(ME,"onAnimationEnd"),xr(kE,"onAnimationIteration"),xr(VE,"onAnimationStart"),xr("dblclick","onDoubleClick"),xr("focusin","onFocus"),xr("focusout","onBlur"),xr(g2,"onTransitionRun"),xr(y2,"onTransitionStart"),xr(v2,"onTransitionCancel"),xr(LE,"onTransitionEnd"),zr("onMouseEnter",["mouseout","mouseover"]),zr("onMouseLeave",["mouseout","mouseover"]),zr("onPointerEnter",["pointerout","pointerover"]),zr("onPointerLeave",["pointerout","pointerover"]),pi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pi("onBeforeInput",["compositionend","keypress","textInput","paste"]),pi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tV=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ac));function iA(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var h=s[u],_=h.event;h=h.listeners;e:{var E=void 0;if(a)for(var b=h.length-1;0<=b;b--){var M=h[b],j=M.instance,Q=M.currentTarget;if(M=M.listener,j!==E&&_.isPropagationStopped())break e;E=M,_.currentTarget=Q;try{E(_)}catch(se){Pd(se)}_.currentTarget=null,E=j}else for(b=0;b<h.length;b++){if(M=h[b],j=M.instance,Q=M.currentTarget,M=M.listener,j!==E&&_.isPropagationStopped())break e;E=M,_.currentTarget=Q;try{E(_)}catch(se){Pd(se)}_.currentTarget=null,E=j}}}}function nt(s,a){var u=a[tr];u===void 0&&(u=a[tr]=new Set);var h=s+"__bubble";u.has(h)||(rA(a,s,2,!1),u.add(h))}function Hy(s,a,u){var h=0;a&&(h|=4),rA(u,s,h,a)}var yh="_reactListening"+Math.random().toString(36).slice(2);function Gy(s){if(!s[yh]){s[yh]=!0,Ar.forEach(function(u){u!=="selectionchange"&&(tV.has(u)||Hy(u,!1,s),Hy(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[yh]||(a[yh]=!0,Hy("selectionchange",!1,a))}}function rA(s,a,u,h){switch(MA(a)){case 2:var _=RV;break;case 8:_=NV;break;default:_=sv}u=_.bind(null,a,u,s),_=void 0,!$u||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(_=!0),h?_!==void 0?s.addEventListener(a,u,{capture:!0,passive:_}):s.addEventListener(a,u,!0):_!==void 0?s.addEventListener(a,u,{passive:_}):s.addEventListener(a,u,!1)}function jy(s,a,u,h,_){var E=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var b=h.tag;if(b===3||b===4){var M=h.stateNode.containerInfo;if(M===_)break;if(b===4)for(b=h.return;b!==null;){var j=b.tag;if((j===3||j===4)&&b.stateNode.containerInfo===_)return;b=b.return}for(;M!==null;){if(b=Ai(M),b===null)return;if(j=b.tag,j===5||j===6||j===26||j===27){h=E=b;continue e}M=M.parentNode}}h=h.return}md(function(){var Q=E,se=al(u),le=[];e:{var te=OE.get(s);if(te!==void 0){var ne=ua,Ce=s;switch(s){case"keypress":if(la(u)===0)break e;case"keydown":case"keyup":ne=Ad;break;case"focusin":Ce="focus",ne=Qs;break;case"focusout":Ce="blur",ne=Qs;break;case"beforeblur":case"afterblur":ne=Qs;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=yd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=vd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=Cd;break;case ME:case kE:case VE:ne=cl;break;case LE:ne=fl;break;case"scroll":case"scrollend":ne=gd;break;case"wheel":ne=Id;break;case"copy":case"cut":case"paste":ne=Td;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=Xu;break;case"toggle":case"beforetoggle":ne=eo}var Le=(a&4)!==0,Nt=!Le&&(s==="scroll"||s==="scrollend"),J=Le?te!==null?te+"Capture":null:te;Le=[];for(var Y=Q,X;Y!==null;){var ae=Y;if(X=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||X===null||J===null||(ae=bi(Y,J),ae!=null&&Le.push(bc(Y,ae,X))),Nt)break;Y=Y.return}0<Le.length&&(te=new ne(te,Ce,null,u,se),le.push({event:te,listeners:Le}))}}if((a&7)===0){e:{if(te=s==="mouseover"||s==="pointerover",ne=s==="mouseout"||s==="pointerout",te&&u!==ol&&(Ce=u.relatedTarget||u.fromElement)&&(Ai(Ce)||Ce[Ui]))break e;if((ne||te)&&(te=se.window===se?se:(te=se.ownerDocument)?te.defaultView||te.parentWindow:window,ne?(Ce=u.relatedTarget||u.toElement,ne=Q,Ce=Ce?Ai(Ce):null,Ce!==null&&(Nt=o(Ce),Le=Ce.tag,Ce!==Nt||Le!==5&&Le!==27&&Le!==6)&&(Ce=null)):(ne=null,Ce=Q),ne!==Ce)){if(Le=yd,ae="onMouseLeave",J="onMouseEnter",Y="mouse",(s==="pointerout"||s==="pointerover")&&(Le=Xu,ae="onPointerLeave",J="onPointerEnter",Y="pointer"),Nt=ne==null?te:qr(ne),X=Ce==null?te:qr(Ce),te=new Le(ae,Y+"leave",ne,u,se),te.target=Nt,te.relatedTarget=X,ae=null,Ai(se)===Q&&(Le=new Le(J,Y+"enter",Ce,u,se),Le.target=X,Le.relatedTarget=Nt,ae=Le),Nt=ae,ne&&Ce)t:{for(Le=nV,J=ne,Y=Ce,X=0,ae=J;ae;ae=Le(ae))X++;ae=0;for(var De=Y;De;De=Le(De))ae++;for(;0<X-ae;)J=Le(J),X--;for(;0<ae-X;)Y=Le(Y),ae--;for(;X--;){if(J===Y||Y!==null&&J===Y.alternate){Le=J;break t}J=Le(J),Y=Le(Y)}Le=null}else Le=null;ne!==null&&sA(le,te,ne,Le,!1),Ce!==null&&Nt!==null&&sA(le,Nt,Ce,Le,!0)}}e:{if(te=Q?qr(Q):window,ne=te.nodeName&&te.nodeName.toLowerCase(),ne==="select"||ne==="input"&&te.type==="file")var ht=SE;else if(Ci(te))if(wE)ht=h2;else{ht=f2;var Ie=c2}else ne=te.nodeName,!ne||ne.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?Q&&Gu(Q.elementType)&&(ht=SE):ht=d2;if(ht&&(ht=ht(s,Q))){ha(le,ht,u,se);break e}Ie&&Ie(s,te,Q),s==="focusout"&&Q&&te.type==="number"&&Q.memoizedProps.value!=null&&sl(te,"number",te.value)}switch(Ie=Q?qr(Q):window,s){case"focusin":(Ci(Ie)||Ie.contentEditable==="true")&&(dl=Ie,Tg=Q,ec=null);break;case"focusout":ec=Tg=dl=null;break;case"mousedown":Eg=!0;break;case"contextmenu":case"mouseup":case"dragend":Eg=!1,PE(le,u,se);break;case"selectionchange":if(m2)break;case"keydown":case"keyup":PE(le,u,se)}var We;if(A)e:{switch(s){case"compositionstart":var st="onCompositionStart";break e;case"compositionend":st="onCompositionEnd";break e;case"compositionupdate":st="onCompositionUpdate";break e}st=void 0}else Qe?Et(s,u)&&(st="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(st="onCompositionStart");st&&(W&&u.locale!=="ko"&&(Qe||st!=="onCompositionStart"?st==="onCompositionEnd"&&Qe&&(We=Ys()):(qi=se,ll="value"in qi?qi.value:qi.textContent,Qe=!0)),Ie=vh(Q,st),0<Ie.length&&(st=new Yu(st,s,null,u,se),le.push({event:st,listeners:Ie}),We?st.data=We:(We=gn(u),We!==null&&(st.data=We)))),(We=L?Mn(s,u):kn(s,u))&&(st=vh(Q,"onBeforeInput"),0<st.length&&(Ie=new Yu("onBeforeInput","beforeinput",null,u,se),le.push({event:Ie,listeners:st}),Ie.data=We)),Q2(le,s,Q,u,se)}iA(le,a)})}function bc(s,a,u){return{instance:s,listener:a,currentTarget:u}}function vh(s,a){for(var u=a+"Capture",h=[];s!==null;){var _=s,E=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||E===null||(_=bi(s,u),_!=null&&h.unshift(bc(s,_,E)),_=bi(s,a),_!=null&&h.push(bc(s,_,E))),s.tag===3)return h;s=s.return}return[]}function nV(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function sA(s,a,u,h,_){for(var E=a._reactName,b=[];u!==null&&u!==h;){var M=u,j=M.alternate,Q=M.stateNode;if(M=M.tag,j!==null&&j===h)break;M!==5&&M!==26&&M!==27||Q===null||(j=Q,_?(Q=bi(u,E),Q!=null&&b.unshift(bc(u,Q,j))):_||(Q=bi(u,E),Q!=null&&b.push(bc(u,Q,j)))),u=u.return}b.length!==0&&s.push({event:a,listeners:b})}var iV=/\r\n?/g,rV=/\u0000|\uFFFD/g;function oA(s){return(typeof s=="string"?s:""+s).replace(iV,`
`).replace(rV,"")}function aA(s,a){return a=oA(a),oA(s)===a}function Rt(s,a,u,h,_,E){switch(u){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||or(s,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&or(s,""+h);break;case"className":js(s,"class",h);break;case"tabIndex":js(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":js(s,u,h);break;case"style":hd(s,h,E);break;case"data":if(a!=="object"){js(s,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||u!=="href")){s.removeAttribute(u);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=Hr(""+h),s.setAttribute(u,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(u==="formAction"?(a!=="input"&&Rt(s,a,"name",_.name,_,null),Rt(s,a,"formEncType",_.formEncType,_,null),Rt(s,a,"formMethod",_.formMethod,_,null),Rt(s,a,"formTarget",_.formTarget,_,null)):(Rt(s,a,"encType",_.encType,_,null),Rt(s,a,"method",_.method,_,null),Rt(s,a,"target",_.target,_,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=Hr(""+h),s.setAttribute(u,h);break;case"onClick":h!=null&&(s.onclick=Dn);break;case"onScroll":h!=null&&nt("scroll",s);break;case"onScrollEnd":h!=null&&nt("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(_.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}u=Hr(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""+h):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":h===!0?s.setAttribute(u,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,h):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(u,h):s.removeAttribute(u);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(u):s.setAttribute(u,h);break;case"popover":nt("beforetoggle",s),nt("toggle",s),Gs(s,"popover",h);break;case"xlinkActuate":sr(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":sr(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":sr(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":sr(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":sr(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":sr(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":sr(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":sr(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":sr(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Gs(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=pg.get(u)||u,Gs(s,u,h))}}function $y(s,a,u,h,_,E){switch(u){case"style":hd(s,h,E);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(_.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"children":typeof h=="string"?or(s,h):(typeof h=="number"||typeof h=="bigint")&&or(s,""+h);break;case"onScroll":h!=null&&nt("scroll",s);break;case"onScrollEnd":h!=null&&nt("scrollend",s);break;case"onClick":h!=null&&(s.onclick=Dn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!br.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(_=u.endsWith("Capture"),a=u.slice(2,_?u.length-7:void 0),E=s[cn]||null,E=E!=null?E[u]:null,typeof E=="function"&&s.removeEventListener(a,E,_),typeof h=="function")){typeof E!="function"&&E!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(a,h,_);break e}u in s?s[u]=h:h===!0?s.setAttribute(u,""):Gs(s,u,h)}}}function Hn(s,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nt("error",s),nt("load",s);var h=!1,_=!1,E;for(E in u)if(u.hasOwnProperty(E)){var b=u[E];if(b!=null)switch(E){case"src":h=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Rt(s,a,E,b,u,null)}}_&&Rt(s,a,"srcSet",u.srcSet,u,null),h&&Rt(s,a,"src",u.src,u,null);return;case"input":nt("invalid",s);var M=E=b=_=null,j=null,Q=null;for(h in u)if(u.hasOwnProperty(h)){var se=u[h];if(se!=null)switch(h){case"name":_=se;break;case"type":b=se;break;case"checked":j=se;break;case"defaultChecked":Q=se;break;case"value":E=se;break;case"defaultValue":M=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,a));break;default:Rt(s,a,h,se,u,null)}}oa(s,E,M,j,Q,b,_,!1);return;case"select":nt("invalid",s),h=b=E=null;for(_ in u)if(u.hasOwnProperty(_)&&(M=u[_],M!=null))switch(_){case"value":E=M;break;case"defaultValue":b=M;break;case"multiple":h=M;default:Rt(s,a,_,M,u,null)}a=E,u=b,s.multiple=!!h,a!=null?dt(s,!!h,a,!1):u!=null&&dt(s,!!h,u,!0);return;case"textarea":nt("invalid",s),E=_=h=null;for(b in u)if(u.hasOwnProperty(b)&&(M=u[b],M!=null))switch(b){case"value":h=M;break;case"defaultValue":_=M;break;case"children":E=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(i(91));break;default:Rt(s,a,b,M,u,null)}Ks(s,h,_,E);return;case"option":for(j in u)if(u.hasOwnProperty(j)&&(h=u[j],h!=null))switch(j){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Rt(s,a,j,h,u,null)}return;case"dialog":nt("beforetoggle",s),nt("toggle",s),nt("cancel",s),nt("close",s);break;case"iframe":case"object":nt("load",s);break;case"video":case"audio":for(h=0;h<Ac.length;h++)nt(Ac[h],s);break;case"image":nt("error",s),nt("load",s);break;case"details":nt("toggle",s);break;case"embed":case"source":case"link":nt("error",s),nt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in u)if(u.hasOwnProperty(Q)&&(h=u[Q],h!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Rt(s,a,Q,h,u,null)}return;default:if(Gu(a)){for(se in u)u.hasOwnProperty(se)&&(h=u[se],h!==void 0&&$y(s,a,se,h,u,void 0));return}}for(M in u)u.hasOwnProperty(M)&&(h=u[M],h!=null&&Rt(s,a,M,h,u,null))}function sV(s,a,u,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,E=null,b=null,M=null,j=null,Q=null,se=null;for(ne in u){var le=u[ne];if(u.hasOwnProperty(ne)&&le!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":j=le;default:h.hasOwnProperty(ne)||Rt(s,a,ne,null,h,le)}}for(var te in h){var ne=h[te];if(le=u[te],h.hasOwnProperty(te)&&(ne!=null||le!=null))switch(te){case"type":E=ne;break;case"name":_=ne;break;case"checked":Q=ne;break;case"defaultChecked":se=ne;break;case"value":b=ne;break;case"defaultValue":M=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,a));break;default:ne!==le&&Rt(s,a,te,ne,h,le)}}$s(s,b,M,j,Q,se,E,_);return;case"select":ne=b=M=te=null;for(E in u)if(j=u[E],u.hasOwnProperty(E)&&j!=null)switch(E){case"value":break;case"multiple":ne=j;default:h.hasOwnProperty(E)||Rt(s,a,E,null,h,j)}for(_ in h)if(E=h[_],j=u[_],h.hasOwnProperty(_)&&(E!=null||j!=null))switch(_){case"value":te=E;break;case"defaultValue":M=E;break;case"multiple":b=E;default:E!==j&&Rt(s,a,_,E,h,j)}a=M,u=b,h=ne,te!=null?dt(s,!!u,te,!1):!!h!=!!u&&(a!=null?dt(s,!!u,a,!0):dt(s,!!u,u?[]:"",!1));return;case"textarea":ne=te=null;for(M in u)if(_=u[M],u.hasOwnProperty(M)&&_!=null&&!h.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:Rt(s,a,M,null,h,_)}for(b in h)if(_=h[b],E=u[b],h.hasOwnProperty(b)&&(_!=null||E!=null))switch(b){case"value":te=_;break;case"defaultValue":ne=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(i(91));break;default:_!==E&&Rt(s,a,b,_,h,E)}aa(s,te,ne);return;case"option":for(var Ce in u)if(te=u[Ce],u.hasOwnProperty(Ce)&&te!=null&&!h.hasOwnProperty(Ce))switch(Ce){case"selected":s.selected=!1;break;default:Rt(s,a,Ce,null,h,te)}for(j in h)if(te=h[j],ne=u[j],h.hasOwnProperty(j)&&te!==ne&&(te!=null||ne!=null))switch(j){case"selected":s.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:Rt(s,a,j,te,h,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in u)te=u[Le],u.hasOwnProperty(Le)&&te!=null&&!h.hasOwnProperty(Le)&&Rt(s,a,Le,null,h,te);for(Q in h)if(te=h[Q],ne=u[Q],h.hasOwnProperty(Q)&&te!==ne&&(te!=null||ne!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,a));break;default:Rt(s,a,Q,te,h,ne)}return;default:if(Gu(a)){for(var Nt in u)te=u[Nt],u.hasOwnProperty(Nt)&&te!==void 0&&!h.hasOwnProperty(Nt)&&$y(s,a,Nt,void 0,h,te);for(se in h)te=h[se],ne=u[se],!h.hasOwnProperty(se)||te===ne||te===void 0&&ne===void 0||$y(s,a,se,te,h,ne);return}}for(var J in u)te=u[J],u.hasOwnProperty(J)&&te!=null&&!h.hasOwnProperty(J)&&Rt(s,a,J,null,h,te);for(le in h)te=h[le],ne=u[le],!h.hasOwnProperty(le)||te===ne||te==null&&ne==null||Rt(s,a,le,te,h,ne)}function lA(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function oV(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,u=performance.getEntriesByType("resource"),h=0;h<u.length;h++){var _=u[h],E=_.transferSize,b=_.initiatorType,M=_.duration;if(E&&M&&lA(b)){for(b=0,M=_.responseEnd,h+=1;h<u.length;h++){var j=u[h],Q=j.startTime;if(Q>M)break;var se=j.transferSize,le=j.initiatorType;se&&lA(le)&&(j=j.responseEnd,b+=se*(j<M?1:(M-Q)/(j-Q)))}if(--h,a+=8*(E+b)/(_.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Ky=null,Yy=null;function _h(s){return s.nodeType===9?s:s.ownerDocument}function uA(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cA(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function Jy(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Wy=null;function aV(){var s=window.event;return s&&s.type==="popstate"?s===Wy?!1:(Wy=s,!0):(Wy=null,!1)}var fA=typeof setTimeout=="function"?setTimeout:void 0,lV=typeof clearTimeout=="function"?clearTimeout:void 0,dA=typeof Promise=="function"?Promise:void 0,uV=typeof queueMicrotask=="function"?queueMicrotask:typeof dA<"u"?function(s){return dA.resolve(null).then(s).catch(cV)}:fA;function cV(s){setTimeout(function(){throw s})}function _o(s){return s==="head"}function hA(s,a){var u=a,h=0;do{var _=u.nextSibling;if(s.removeChild(u),_&&_.nodeType===8)if(u=_.data,u==="/$"||u==="/&"){if(h===0){s.removeChild(_),Fl(a);return}h--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")h++;else if(u==="html")Cc(s.ownerDocument.documentElement);else if(u==="head"){u=s.ownerDocument.head,Cc(u);for(var E=u.firstChild;E;){var b=E.nextSibling,M=E.nodeName;E[nr]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&E.rel.toLowerCase()==="stylesheet"||u.removeChild(E),E=b}}else u==="body"&&Cc(s.ownerDocument.body);u=_}while(u);Fl(a)}function pA(s,a){var u=s;s=0;do{var h=u.nextSibling;if(u.nodeType===1?a?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(a?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),h&&h.nodeType===8)if(u=h.data,u==="/$"){if(s===0)break;s--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||s++;u=h}while(u)}function Xy(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Xy(u),ir(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function fV(s,a,u,h){for(;s.nodeType===1;){var _=u;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[nr])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(E=s.getAttribute("rel"),E==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(E!==_.rel||s.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||s.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||s.getAttribute("title")!==(_.title==null?null:_.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(E=s.getAttribute("src"),(E!==(_.src==null?null:_.src)||s.getAttribute("type")!==(_.type==null?null:_.type)||s.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&E&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var E=_.name==null?null:""+_.name;if(_.type==="hidden"&&s.getAttribute("name")===E)return s}else return s;if(s=hr(s.nextSibling),s===null)break}return null}function dV(s,a,u){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=hr(s.nextSibling),s===null))return null;return s}function mA(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=hr(s.nextSibling),s===null))return null;return s}function Qy(s){return s.data==="$?"||s.data==="$~"}function Zy(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function hV(s,a){var u=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||u.readyState!=="loading")a();else{var h=function(){a(),u.removeEventListener("DOMContentLoaded",h)};u.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function hr(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var ev=null;function gA(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"||u==="/&"){if(a===0)return hr(s.nextSibling);a--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||a++}s=s.nextSibling}return null}function yA(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(a===0)return s;a--}else u!=="/$"&&u!=="/&"||a++}s=s.previousSibling}return null}function vA(s,a,u){switch(a=_h(u),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Cc(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);ir(s)}var pr=new Map,_A=new Set;function Th(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var xs=oe.d;oe.d={f:pV,r:mV,D:gV,C:yV,L:vV,m:_V,X:EV,S:TV,M:SV};function pV(){var s=xs.f(),a=fh();return s||a}function mV(s){var a=rr(s);a!==null&&a.tag===5&&a.type==="form"?LS(a):xs.r(s)}var Ll=typeof document>"u"?null:document;function TA(s,a,u){var h=Ll;if(h&&typeof a=="string"&&a){var _=en(a);_='link[rel="'+s+'"][href="'+_+'"]',typeof u=="string"&&(_+='[crossorigin="'+u+'"]'),_A.has(_)||(_A.add(_),s={rel:s,crossOrigin:u,href:a},h.querySelector(_)===null&&(a=h.createElement("link"),Hn(a,"link",s),$t(a),h.head.appendChild(a)))}}function gV(s){xs.D(s),TA("dns-prefetch",s,null)}function yV(s,a){xs.C(s,a),TA("preconnect",s,a)}function vV(s,a,u){xs.L(s,a,u);var h=Ll;if(h&&s&&a){var _='link[rel="preload"][as="'+en(a)+'"]';a==="image"&&u&&u.imageSrcSet?(_+='[imagesrcset="'+en(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(_+='[imagesizes="'+en(u.imageSizes)+'"]')):_+='[href="'+en(s)+'"]';var E=_;switch(a){case"style":E=Ol(s);break;case"script":E=Ul(s)}pr.has(E)||(s=v({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:s,as:a},u),pr.set(E,s),h.querySelector(_)!==null||a==="style"&&h.querySelector(xc(E))||a==="script"&&h.querySelector(Ic(E))||(a=h.createElement("link"),Hn(a,"link",s),$t(a),h.head.appendChild(a)))}}function _V(s,a){xs.m(s,a);var u=Ll;if(u&&s){var h=a&&typeof a.as=="string"?a.as:"script",_='link[rel="modulepreload"][as="'+en(h)+'"][href="'+en(s)+'"]',E=_;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Ul(s)}if(!pr.has(E)&&(s=v({rel:"modulepreload",href:s},a),pr.set(E,s),u.querySelector(_)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Ic(E)))return}h=u.createElement("link"),Hn(h,"link",s),$t(h),u.head.appendChild(h)}}}function TV(s,a,u){xs.S(s,a,u);var h=Ll;if(h&&s){var _=hi(h).hoistableStyles,E=Ol(s);a=a||"default";var b=_.get(E);if(!b){var M={loading:0,preload:null};if(b=h.querySelector(xc(E)))M.loading=5;else{s=v({rel:"stylesheet",href:s,"data-precedence":a},u),(u=pr.get(E))&&tv(s,u);var j=b=h.createElement("link");$t(j),Hn(j,"link",s),j._p=new Promise(function(Q,se){j.onload=Q,j.onerror=se}),j.addEventListener("load",function(){M.loading|=1}),j.addEventListener("error",function(){M.loading|=2}),M.loading|=4,Eh(b,a,h)}b={type:"stylesheet",instance:b,count:1,state:M},_.set(E,b)}}}function EV(s,a){xs.X(s,a);var u=Ll;if(u&&s){var h=hi(u).hoistableScripts,_=Ul(s),E=h.get(_);E||(E=u.querySelector(Ic(_)),E||(s=v({src:s,async:!0},a),(a=pr.get(_))&&nv(s,a),E=u.createElement("script"),$t(E),Hn(E,"link",s),u.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},h.set(_,E))}}function SV(s,a){xs.M(s,a);var u=Ll;if(u&&s){var h=hi(u).hoistableScripts,_=Ul(s),E=h.get(_);E||(E=u.querySelector(Ic(_)),E||(s=v({src:s,async:!0,type:"module"},a),(a=pr.get(_))&&nv(s,a),E=u.createElement("script"),$t(E),Hn(E,"link",s),u.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},h.set(_,E))}}function EA(s,a,u,h){var _=(_=Te.current)?Th(_):null;if(!_)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=Ol(u.href),u=hi(_).hoistableStyles,h=u.get(a),h||(h={type:"style",instance:null,count:0,state:null},u.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=Ol(u.href);var E=hi(_).hoistableStyles,b=E.get(s);if(b||(_=_.ownerDocument||_,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(s,b),(E=_.querySelector(xc(s)))&&!E._p&&(b.instance=E,b.state.loading=5),pr.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},pr.set(s,u),E||wV(_,s,u,b.state))),a&&h===null)throw Error(i(528,""));return b}if(a&&h!==null)throw Error(i(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ul(u),u=hi(_).hoistableScripts,h=u.get(a),h||(h={type:"script",instance:null,count:0,state:null},u.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Ol(s){return'href="'+en(s)+'"'}function xc(s){return'link[rel="stylesheet"]['+s+"]"}function SA(s){return v({},s,{"data-precedence":s.precedence,precedence:null})}function wV(s,a,u,h){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=s.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),Hn(a,"link",u),$t(a),s.head.appendChild(a))}function Ul(s){return'[src="'+en(s)+'"]'}function Ic(s){return"script[async]"+s}function wA(s,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var h=s.querySelector('style[data-href~="'+en(u.href)+'"]');if(h)return a.instance=h,$t(h),h;var _=v({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),$t(h),Hn(h,"style",_),Eh(h,u.precedence,s),a.instance=h;case"stylesheet":_=Ol(u.href);var E=s.querySelector(xc(_));if(E)return a.state.loading|=4,a.instance=E,$t(E),E;h=SA(u),(_=pr.get(_))&&tv(h,_),E=(s.ownerDocument||s).createElement("link"),$t(E);var b=E;return b._p=new Promise(function(M,j){b.onload=M,b.onerror=j}),Hn(E,"link",h),a.state.loading|=4,Eh(E,u.precedence,s),a.instance=E;case"script":return E=Ul(u.src),(_=s.querySelector(Ic(E)))?(a.instance=_,$t(_),_):(h=u,(_=pr.get(E))&&(h=v({},u),nv(h,_)),s=s.ownerDocument||s,_=s.createElement("script"),$t(_),Hn(_,"link",h),s.head.appendChild(_),a.instance=_);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,Eh(h,u.precedence,s));return a.instance}function Eh(s,a,u){for(var h=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=h.length?h[h.length-1]:null,E=_,b=0;b<h.length;b++){var M=h[b];if(M.dataset.precedence===a)E=M;else if(E!==_)break}E?E.parentNode.insertBefore(s,E.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(s,a.firstChild))}function tv(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function nv(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var Sh=null;function AA(s,a,u){if(Sh===null){var h=new Map,_=Sh=new Map;_.set(u,h)}else _=Sh,h=_.get(u),h||(h=new Map,_.set(u,h));if(h.has(s))return h;for(h.set(s,null),u=u.getElementsByTagName(s),_=0;_<u.length;_++){var E=u[_];if(!(E[nr]||E[Ot]||s==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var b=E.getAttribute(a)||"";b=s+b;var M=h.get(b);M?M.push(E):h.set(b,[E])}}return h}function bA(s,a,u){s=s.ownerDocument||s,s.head.insertBefore(u,a==="title"?s.querySelector("head > title"):null)}function AV(s,a,u){if(u===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function CA(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function bV(s,a,u,h){if(u.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var _=Ol(h.href),E=a.querySelector(xc(_));if(E){a=E._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=wh.bind(s),a.then(s,s)),u.state.loading|=4,u.instance=E,$t(E);return}E=a.ownerDocument||a,h=SA(h),(_=pr.get(_))&&tv(h,_),E=E.createElement("link"),$t(E);var b=E;b._p=new Promise(function(M,j){b.onload=M,b.onerror=j}),Hn(E,"link",h),u.instance=E}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(u,a),(a=u.state.preload)&&(u.state.loading&3)===0&&(s.count++,u=wh.bind(s),a.addEventListener("load",u),a.addEventListener("error",u))}}var iv=0;function CV(s,a){return s.stylesheets&&s.count===0&&bh(s,s.stylesheets),0<s.count||0<s.imgCount?function(u){var h=setTimeout(function(){if(s.stylesheets&&bh(s,s.stylesheets),s.unsuspend){var E=s.unsuspend;s.unsuspend=null,E()}},6e4+a);0<s.imgBytes&&iv===0&&(iv=62500*oV());var _=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&bh(s,s.stylesheets),s.unsuspend)){var E=s.unsuspend;s.unsuspend=null,E()}},(s.imgBytes>iv?50:800)+a);return s.unsuspend=u,function(){s.unsuspend=null,clearTimeout(h),clearTimeout(_)}}:null}function wh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)bh(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Ah=null;function bh(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Ah=new Map,a.forEach(xV,s),Ah=null,wh.call(s))}function xV(s,a){if(!(a.state.loading&4)){var u=Ah.get(s);if(u)var h=u.get(null);else{u=new Map,Ah.set(s,u);for(var _=s.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<_.length;E++){var b=_[E];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(u.set(b.dataset.precedence,b),h=b)}h&&u.set(null,h)}_=a.instance,b=_.getAttribute("data-precedence"),E=u.get(b)||h,E===h&&u.set(null,_),u.set(b,_),this.count++,h=wh.bind(this),_.addEventListener("load",h),_.addEventListener("error",h),E?E.parentNode.insertBefore(_,E.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(_,s.firstChild)),a.state.loading|=4}}var Rc={$$typeof:F,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function IV(s,a,u,h,_,E,b,M,j){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=un(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=un(0),this.hiddenUpdates=un(null),this.identifierPrefix=h,this.onUncaughtError=_,this.onCaughtError=E,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function xA(s,a,u,h,_,E,b,M,j,Q,se,le){return s=new IV(s,a,u,b,j,Q,se,le,M),a=1,E===!0&&(a|=24),E=Hi(3,null,null,a),s.current=E,E.stateNode=s,a=Lg(),a.refCount++,s.pooledCache=a,a.refCount++,E.memoizedState={element:h,isDehydrated:u,cache:a},Bg(E),s}function IA(s){return s?(s=ml,s):ml}function RA(s,a,u,h,_,E){_=IA(_),h.context===null?h.context=_:h.pendingContext=_,h=ao(a),h.payload={element:u},E=E===void 0?null:E,E!==null&&(h.callback=E),u=lo(s,h,a),u!==null&&(Pi(u,s,a),ac(u,s,a))}function NA(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function rv(s,a){NA(s,a),(s=s.alternate)&&NA(s,a)}function PA(s){if(s.tag===13||s.tag===31){var a=ga(s,67108864);a!==null&&Pi(a,s,67108864),rv(s,67108864)}}function DA(s){if(s.tag===13||s.tag===31){var a=Yi();a=er(a);var u=ga(s,a);u!==null&&Pi(u,s,a),rv(s,a)}}var Ch=!0;function RV(s,a,u,h){var _=ee.T;ee.T=null;var E=oe.p;try{oe.p=2,sv(s,a,u,h)}finally{oe.p=E,ee.T=_}}function NV(s,a,u,h){var _=ee.T;ee.T=null;var E=oe.p;try{oe.p=8,sv(s,a,u,h)}finally{oe.p=E,ee.T=_}}function sv(s,a,u,h){if(Ch){var _=ov(h);if(_===null)jy(s,a,h,xh,u),kA(s,h);else if(DV(_,s,a,u,h))h.stopPropagation();else if(kA(s,h),a&4&&-1<PV.indexOf(s)){for(;_!==null;){var E=rr(_);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var b=et(E.pendingLanes);if(b!==0){var M=E;for(M.pendingLanes|=2,M.entangledLanes|=2;b;){var j=1<<31-Ee(b);M.entanglements[1]|=j,b&=~j}Jr(E),(vt&6)===0&&(uh=Tt()+500,wc(0))}}break;case 31:case 13:M=ga(E,2),M!==null&&Pi(M,E,2),fh(),rv(E,2)}if(E=ov(h),E===null&&jy(s,a,h,xh,u),E===_)break;_=E}_!==null&&h.stopPropagation()}else jy(s,a,h,null,u)}}function ov(s){return s=al(s),av(s)}var xh=null;function av(s){if(xh=null,s=Ai(s),s!==null){var a=o(s);if(a===null)s=null;else{var u=a.tag;if(u===13){if(s=l(a),s!==null)return s;s=null}else if(u===31){if(s=c(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return xh=s,null}function MA(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qt()){case Ke:return 2;case Lt:return 8;case Yt:case Zt:return 32;case Sr:return 268435456;default:return 32}default:return 32}}var lv=!1,To=null,Eo=null,So=null,Nc=new Map,Pc=new Map,wo=[],PV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kA(s,a){switch(s){case"focusin":case"focusout":To=null;break;case"dragenter":case"dragleave":Eo=null;break;case"mouseover":case"mouseout":So=null;break;case"pointerover":case"pointerout":Nc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(a.pointerId)}}function Dc(s,a,u,h,_,E){return s===null||s.nativeEvent!==E?(s={blockedOn:a,domEventName:u,eventSystemFlags:h,nativeEvent:E,targetContainers:[_]},a!==null&&(a=rr(a),a!==null&&PA(a)),s):(s.eventSystemFlags|=h,a=s.targetContainers,_!==null&&a.indexOf(_)===-1&&a.push(_),s)}function DV(s,a,u,h,_){switch(a){case"focusin":return To=Dc(To,s,a,u,h,_),!0;case"dragenter":return Eo=Dc(Eo,s,a,u,h,_),!0;case"mouseover":return So=Dc(So,s,a,u,h,_),!0;case"pointerover":var E=_.pointerId;return Nc.set(E,Dc(Nc.get(E)||null,s,a,u,h,_)),!0;case"gotpointercapture":return E=_.pointerId,Pc.set(E,Dc(Pc.get(E)||null,s,a,u,h,_)),!0}return!1}function VA(s){var a=Ai(s.target);if(a!==null){var u=o(a);if(u!==null){if(a=u.tag,a===13){if(a=l(u),a!==null){s.blockedOn=a,as(s.priority,function(){DA(u)});return}}else if(a===31){if(a=c(u),a!==null){s.blockedOn=a,as(s.priority,function(){DA(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Ih(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=ov(s.nativeEvent);if(u===null){u=s.nativeEvent;var h=new u.constructor(u.type,u);ol=h,u.target.dispatchEvent(h),ol=null}else return a=rr(u),a!==null&&PA(a),s.blockedOn=u,!1;a.shift()}return!0}function LA(s,a,u){Ih(s)&&u.delete(a)}function MV(){lv=!1,To!==null&&Ih(To)&&(To=null),Eo!==null&&Ih(Eo)&&(Eo=null),So!==null&&Ih(So)&&(So=null),Nc.forEach(LA),Pc.forEach(LA)}function Rh(s,a){s.blockedOn===a&&(s.blockedOn=null,lv||(lv=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,MV)))}var Nh=null;function OA(s){Nh!==s&&(Nh=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Nh===s&&(Nh=null);for(var a=0;a<s.length;a+=3){var u=s[a],h=s[a+1],_=s[a+2];if(typeof h!="function"){if(av(h||u)===null)continue;break}var E=rr(u);E!==null&&(s.splice(a,3),a-=3,oy(E,{pending:!0,data:_,method:u.method,action:h},h,_))}}))}function Fl(s){function a(j){return Rh(j,s)}To!==null&&Rh(To,s),Eo!==null&&Rh(Eo,s),So!==null&&Rh(So,s),Nc.forEach(a),Pc.forEach(a);for(var u=0;u<wo.length;u++){var h=wo[u];h.blockedOn===s&&(h.blockedOn=null)}for(;0<wo.length&&(u=wo[0],u.blockedOn===null);)VA(u),u.blockedOn===null&&wo.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(h=0;h<u.length;h+=3){var _=u[h],E=u[h+1],b=_[cn]||null;if(typeof E=="function")b||OA(u);else if(b){var M=null;if(E&&E.hasAttribute("formAction")){if(_=E,b=E[cn]||null)M=b.formAction;else if(av(_)!==null)continue}else M=b.action;typeof M=="function"?u[h+1]=M:(u.splice(h,3),h-=3),OA(u)}}}function UA(){function s(E){E.canIntercept&&E.info==="react-transition"&&E.intercept({handler:function(){return new Promise(function(b){return _=b})},focusReset:"manual",scroll:"manual"})}function a(){_!==null&&(_(),_=null),h||setTimeout(u,20)}function u(){if(!h&&!navigation.transition){var E=navigation.currentEntry;E&&E.url!=null&&navigation.navigate(E.url,{state:E.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,_=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(u,100),function(){h=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),_!==null&&(_(),_=null)}}}function uv(s){this._internalRoot=s}Ph.prototype.render=uv.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var u=a.current,h=Yi();RA(u,h,s,a,null,null)},Ph.prototype.unmount=uv.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;RA(s.current,2,null,s,null,null),fh(),a[Ui]=null}};function Ph(s){this._internalRoot=s}Ph.prototype.unstable_scheduleHydration=function(s){if(s){var a=di();s={blockedOn:null,target:s,priority:a};for(var u=0;u<wo.length&&a!==0&&a<wo[u].priority;u++);wo.splice(u,0,s),u===0&&VA(s)}};var FA=e.version;if(FA!=="19.2.0")throw Error(i(527,FA,"19.2.0"));oe.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=d(a),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var kV={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dh.isDisabled&&Dh.supportsFiber)try{Pn=Dh.inject(kV),mn=Dh}catch{}}return kc.createRoot=function(s,a){if(!r(s))throw Error(i(299));var u=!1,h="",_=$S,E=KS,b=YS;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError)),a=xA(s,1,!1,null,null,u,h,null,_,E,b,UA),s[Ui]=a.current,Gy(s),new uv(a)},kc.hydrateRoot=function(s,a,u){if(!r(s))throw Error(i(299));var h=!1,_="",E=$S,b=KS,M=YS,j=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onUncaughtError!==void 0&&(E=u.onUncaughtError),u.onCaughtError!==void 0&&(b=u.onCaughtError),u.onRecoverableError!==void 0&&(M=u.onRecoverableError),u.formState!==void 0&&(j=u.formState)),a=xA(s,1,!0,a,u??null,h,_,j,E,b,M,UA),a.context=IA(null),u=a.current,h=Yi(),h=er(h),_=ao(h),_.callback=null,lo(u,_,h),u=h,a.current.lanes=u,Mt(a,u),Jr(a),s[Ui]=a.current,Gy(s),new Ph(a)},kc.version="19.2.0",kc}var JA;function HV(){if(JA)return dv.exports;JA=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),dv.exports=zV(),dv.exports}var GV=HV();const jV=h1(GV),$V=()=>{};var WA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},KV=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],l=t[n++],c=t[n++],f=((r&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|l&63)}}return e.join("")},g1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],l=r+1<t.length,c=l?t[r+1]:0,f=r+2<t.length,d=f?t[r+2]:0,p=o>>2,v=(o&3)<<4|c>>4;let T=(c&15)<<2|d>>6,w=d&63;f||(w=64,l||(T=64)),i.push(n[p],n[v],n[T],n[w])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(m1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):KV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],c=r<t.length?n[t.charAt(r)]:0;++r;const d=r<t.length?n[t.charAt(r)]:64;++r;const v=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||c==null||d==null||v==null)throw new YV;const T=o<<2|c>>4;if(i.push(T),d!==64){const w=c<<4&240|d>>2;if(i.push(w),v!==64){const x=d<<6&192|v;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class YV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JV=function(t){const e=m1(t);return g1.encodeByteArray(e,!0)},Np=function(t){return JV(t).replace(/\./g,"")},y1=function(t){try{return g1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV=()=>WV().__FIREBASE_DEFAULTS__,QV=()=>{if(typeof process>"u"||typeof WA>"u")return;const t=WA.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ZV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&y1(t[1]);return e&&JSON.parse(e)},wm=()=>{try{return $V()||XV()||QV()||ZV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},v1=t=>{var e,n;return(n=(e=wm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},m_=t=>{const e=v1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},_1=()=>{var t;return(t=wm())===null||t===void 0?void 0:t.config},T1=t=>{var e;return(e=wm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Am(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Np(JSON.stringify(n)),Np(JSON.stringify(l)),""].join(".")}const rf={};function tL(){const t={prod:[],emulator:[]};for(const e of Object.keys(rf))rf[e]?t.emulator.push(e):t.prod.push(e);return t}function nL(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let XA=!1;function bm(t,e){if(typeof window>"u"||typeof document>"u"||!qs(window.location.host)||rf[t]===e||rf[t]||XA)return;rf[t]=e;function n(T){return`__firebase__banner__${T}`}const i="__firebase__banner",o=tL().prod.length>0;function l(){const T=document.getElementById(i);T&&T.remove()}function c(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function f(T,w){T.setAttribute("width","24"),T.setAttribute("id",w),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function d(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{XA=!0,l()},T}function p(T,w){T.setAttribute("id",w),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function v(){const T=nL(i),w=n("text"),x=document.getElementById(w)||document.createElement("span"),N=n("learnmore"),P=document.getElementById(N)||document.createElement("a"),O=n("preprendIcon"),k=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const F=T.element;c(F),p(P,N);const G=d();f(k,O),F.append(k,x,P,G),document.body.appendChild(F)}o?(x.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ui())}function rL(){var t;const e=(t=wm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function aL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lL(){const t=ui();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function uL(){return!rL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cL(){try{return typeof indexedDB=="object"}catch{return!1}}function fL(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL="FirebaseError";class Fr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=dL,Object.setPrototypeOf(this,Fr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gf.prototype.create)}}class Gf{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],l=o?hL(o,i):"Error",c=`${this.serviceName}: ${l} (${r}).`;return new Fr(r,c,i)}}function hL(t,e){return t.replace(pL,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const pL=/\{\$([^}]+)}/g;function mL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ja(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],l=e[r];if(QA(o)&&QA(l)){if(!ja(o,l))return!1}else if(o!==l)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function QA(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Hc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function Gc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function gL(t,e){const n=new yL(t,e);return n.subscribe.bind(n)}class yL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");vL(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=gv),r.error===void 0&&(r.error=gv),r.complete===void 0&&(r.complete=gv);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function gv(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(t){return t&&t._delegate?t._delegate:t}class ks{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new eL;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(EL(e))try{this.getOrInitializeService({instanceIdentifier:Pa})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Pa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pa){return this.instances.has(e)}getOptions(e=Pa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);i===c&&l.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const l=this.instances.get(r);return l&&e(l,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:TL(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Pa){return this.component?this.component.multipleInstances?e:Pa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TL(t){return t===Pa?void 0:t}function EL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _L(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ot||(ot={}));const wL={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},AL=ot.INFO,bL={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},CL=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=bL[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class g_{constructor(e){this.name=e,this._logLevel=AL,this._logHandler=CL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ot))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...e),this._logHandler(this,ot.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...e),this._logHandler(this,ot.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...e),this._logHandler(this,ot.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...e),this._logHandler(this,ot.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...e),this._logHandler(this,ot.ERROR,...e)}}const xL=(t,e)=>e.some(n=>t instanceof n);let ZA,eb;function IL(){return ZA||(ZA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RL(){return eb||(eb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const S1=new WeakMap,Xv=new WeakMap,w1=new WeakMap,yv=new WeakMap,y_=new WeakMap;function NL(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(Lo(t.result)),r()},l=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&S1.set(n,t)}).catch(()=>{}),y_.set(e,t),e}function PL(t){if(Xv.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),r()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});Xv.set(t,e)}let Qv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Xv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||w1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Lo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function DL(t){Qv=t(Qv)}function ML(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(vv(this),e,...n);return w1.set(i,e.sort?e.sort():[e]),Lo(i)}:RL().includes(t)?function(...e){return t.apply(vv(this),e),Lo(S1.get(this))}:function(...e){return Lo(t.apply(vv(this),e))}}function kL(t){return typeof t=="function"?ML(t):(t instanceof IDBTransaction&&PL(t),xL(t,IL())?new Proxy(t,Qv):t)}function Lo(t){if(t instanceof IDBRequest)return NL(t);if(yv.has(t))return yv.get(t);const e=kL(t);return e!==t&&(yv.set(t,e),y_.set(e,t)),e}const vv=t=>y_.get(t);function VL(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const l=indexedDB.open(t,e),c=Lo(l);return i&&l.addEventListener("upgradeneeded",f=>{i(Lo(l.result),f.oldVersion,f.newVersion,Lo(l.transaction),f)}),n&&l.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),c.then(f=>{o&&f.addEventListener("close",()=>o()),r&&f.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const LL=["get","getKey","getAll","getAllKeys","count"],OL=["put","add","delete","clear"],_v=new Map;function tb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(_v.get(e))return _v.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=OL.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||LL.includes(n)))return;const o=async function(l,...c){const f=this.transaction(l,r?"readwrite":"readonly");let d=f.store;return i&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),r&&f.done]))[0]};return _v.set(e,o),o}DL(t=>({...t,get:(e,n,i)=>tb(e,n)||t.get(e,n,i),has:(e,n)=>!!tb(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(FL(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function FL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Zv="@firebase/app",nb="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs=new g_("@firebase/app"),BL="@firebase/app-compat",qL="@firebase/analytics-compat",zL="@firebase/analytics",HL="@firebase/app-check-compat",GL="@firebase/app-check",jL="@firebase/auth",$L="@firebase/auth-compat",KL="@firebase/database",YL="@firebase/data-connect",JL="@firebase/database-compat",WL="@firebase/functions",XL="@firebase/functions-compat",QL="@firebase/installations",ZL="@firebase/installations-compat",eO="@firebase/messaging",tO="@firebase/messaging-compat",nO="@firebase/performance",iO="@firebase/performance-compat",rO="@firebase/remote-config",sO="@firebase/remote-config-compat",oO="@firebase/storage",aO="@firebase/storage-compat",lO="@firebase/firestore",uO="@firebase/ai",cO="@firebase/firestore-compat",fO="firebase",dO="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0="[DEFAULT]",hO={[Zv]:"fire-core",[BL]:"fire-core-compat",[zL]:"fire-analytics",[qL]:"fire-analytics-compat",[GL]:"fire-app-check",[HL]:"fire-app-check-compat",[jL]:"fire-auth",[$L]:"fire-auth-compat",[KL]:"fire-rtdb",[YL]:"fire-data-connect",[JL]:"fire-rtdb-compat",[WL]:"fire-fn",[XL]:"fire-fn-compat",[QL]:"fire-iid",[ZL]:"fire-iid-compat",[eO]:"fire-fcm",[tO]:"fire-fcm-compat",[nO]:"fire-perf",[iO]:"fire-perf-compat",[rO]:"fire-rc",[sO]:"fire-rc-compat",[oO]:"fire-gcs",[aO]:"fire-gcs-compat",[lO]:"fire-fst",[cO]:"fire-fst-compat",[uO]:"fire-vertex","fire-js":"fire-js",[fO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp=new Map,pO=new Map,t0=new Map;function ib(t,e){try{t.container.addComponent(e)}catch(n){Vs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qo(t){const e=t.name;if(t0.has(e))return Vs.debug(`There were multiple attempts to register component ${e}.`),!1;t0.set(e,t);for(const n of Pp.values())ib(n,t);for(const n of pO.values())ib(n,t);return!0}function $f(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ti(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Oo=new Gf("app","Firebase",mO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ks("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Oo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa=dO;function A1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:e0,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw Oo.create("bad-app-name",{appName:String(r)});if(n||(n=_1()),!n)throw Oo.create("no-options");const o=Pp.get(r);if(o){if(ja(n,o.options)&&ja(i,o.config))return o;throw Oo.create("duplicate-app",{appName:r})}const l=new SL(r);for(const f of t0.values())l.addComponent(f);const c=new gO(n,i,l);return Pp.set(r,c),c}function Cm(t=e0){const e=Pp.get(t);if(!e&&t===e0&&_1())return A1();if(!e)throw Oo.create("no-app",{appName:t});return e}function _r(t,e,n){var i;let r=(i=hO[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${r}" with version "${e}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vs.warn(c.join(" "));return}qo(new ks(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO="firebase-heartbeat-database",vO=1,Cf="firebase-heartbeat-store";let Tv=null;function b1(){return Tv||(Tv=VL(yO,vO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Cf)}catch(n){console.warn(n)}}}}).catch(t=>{throw Oo.create("idb-open",{originalErrorMessage:t.message})})),Tv}async function _O(t){try{const n=(await b1()).transaction(Cf),i=await n.objectStore(Cf).get(C1(t));return await n.done,i}catch(e){if(e instanceof Fr)Vs.warn(e.message);else{const n=Oo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Vs.warn(n.message)}}}async function rb(t,e){try{const i=(await b1()).transaction(Cf,"readwrite");await i.objectStore(Cf).put(e,C1(t)),await i.done}catch(n){if(n instanceof Fr)Vs.warn(n.message);else{const i=Oo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Vs.warn(i.message)}}}function C1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO=1024,EO=30;class SO{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new AO(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=sb();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>EO){const l=bO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Vs.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=sb(),{heartbeatsToSend:i,unsentEntries:r}=wO(this._heartbeatsCache.heartbeats),o=Np(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Vs.warn(n),""}}}function sb(){return new Date().toISOString().substring(0,10)}function wO(t,e=TO){const n=[];let i=t.slice();for(const r of t){const o=n.find(l=>l.agent===r.agent);if(o){if(o.dates.push(r.date),ob(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),ob(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class AO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cL()?fL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await _O(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return rb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return rb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ob(t){return Np(JSON.stringify({version:2,heartbeats:t})).length}function bO(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CO(t){qo(new ks("platform-logger",e=>new UL(e),"PRIVATE")),qo(new ks("heartbeat",e=>new SO(e),"PRIVATE")),_r(Zv,nb,t),_r(Zv,nb,"esm2017"),_r("fire-js","")}CO("");function v_(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function x1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xO=x1,I1=new Gf("auth","Firebase",x1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp=new g_("@firebase/auth");function IO(t,...e){Dp.logLevel<=ot.WARN&&Dp.warn(`Auth (${Qa}): ${t}`,...e)}function lp(t,...e){Dp.logLevel<=ot.ERROR&&Dp.error(`Auth (${Qa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(t,...e){throw T_(t,...e)}function Lr(t,...e){return T_(t,...e)}function __(t,e,n){const i=Object.assign(Object.assign({},xO()),{[e]:n});return new Gf("auth","Firebase",i).create(e,{appName:t.name})}function Ps(t){return __(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function RO(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Er(t,"argument-error"),__(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function T_(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return I1.create(t,...e)}function Fe(t,e,...n){if(!t)throw T_(e,...n)}function Rs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw lp(e),new Error(e)}function Ls(t,e){t||Rs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function NO(){return ab()==="http:"||ab()==="https:"}function ab(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NO()||oL()||"connection"in navigator)?navigator.onLine:!0}function DO(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ls(n>e,"Short delay should be less than long delay!"),this.isMobile=iL()||aL()}get(){return PO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(t,e){Ls(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Rs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Rs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Rs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],VO=new Kf(3e4,6e4);function Xo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Qo(t,e,n,i,r={}){return N1(t,r,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const c=jf(Object.assign({key:t.config.apiKey},l)).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:f},o);return sL()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&qs(t.emulatorConfig.host)&&(d.credentials="include"),R1.fetch()(await P1(t,t.config.apiHost,n,c),d)})}async function N1(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},MO),e);try{const r=new OO(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Mh(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[f,d]=c.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Mh(t,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw Mh(t,"email-already-in-use",l);if(f==="USER_DISABLED")throw Mh(t,"user-disabled",l);const p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw __(t,p,d);Er(t,p)}}catch(r){if(r instanceof Fr)throw r;Er(t,"network-request-failed",{message:String(r)})}}async function Yf(t,e,n,i,r={}){const o=await Qo(t,e,n,i,r);return"mfaPendingCredential"in o&&Er(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function P1(t,e,n,i){const r=`${e}${n}?${i}`,o=t,l=o.config.emulator?E_(t.config,r):`${t.config.apiScheme}://${r}`;return kO.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function LO(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class OO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Lr(this.auth,"network-request-failed")),VO.get())})}}function Mh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Lr(t,e,i);return r.customData._tokenResponse=n,r}function lb(t){return t!==void 0&&t.enterprise!==void 0}class UO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return LO(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function FO(t,e){return Qo(t,"GET","/v2/recaptchaConfig",Xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BO(t,e){return Qo(t,"POST","/v1/accounts:delete",e)}async function Mp(t,e){return Qo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qO(t,e=!1){const n=Vt(t),i=await n.getIdToken(e),r=S_(i);Fe(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:sf(Ev(r.auth_time)),issuedAtTime:sf(Ev(r.iat)),expirationTime:sf(Ev(r.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Ev(t){return Number(t)*1e3}function S_(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return lp("JWT malformed, contained fewer than 3 sections"),null;try{const r=y1(n);return r?JSON.parse(r):(lp("Failed to decode base64 JWT payload"),null)}catch(r){return lp("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function ub(t){const e=S_(t);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xf(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Fr&&zO(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function zO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=sf(this.lastLoginAt),this.creationTime=sf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kp(t){var e;const n=t.auth,i=await t.getIdToken(),r=await xf(t,Mp(n,{idToken:i}));Fe(r==null?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?D1(o.providerUserInfo):[],c=jO(t.providerData,l),f=t.isAnonymous,d=!(t.email&&o.passwordHash)&&!(c!=null&&c.length),p=f?d:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new i0(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(t,v)}async function GO(t){const e=Vt(t);await kp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jO(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function D1(t){return t.map(e=>{var{providerId:n}=e,i=v_(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $O(t,e){const n=await N1(t,{},async()=>{const i=jf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,l=await P1(t,r,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:c,body:i};return t.emulatorConfig&&qs(t.emulatorConfig.host)&&(f.credentials="include"),R1.fetch()(l,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function KO(t,e){return Qo(t,"POST","/v2/accounts:revokeToken",Xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ub(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const n=ub(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await $O(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,l=new iu;return i&&(Fe(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),r&&(Fe(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),o&&(Fe(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new iu,this.toJSON())}_performRefresh(){return Rs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(t,e){Fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Mr{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=v_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new HO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new i0(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await xf(this,this.stsTokenManager.getToken(this.auth,e));return Fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return qO(this,e)}reload(){return GO(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Mr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await kp(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ti(this.auth.app))return Promise.reject(Ps(this.auth));const e=await this.getIdToken();return await xf(this,BO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,l,c,f,d,p;const v=(i=n.displayName)!==null&&i!==void 0?i:void 0,T=(r=n.email)!==null&&r!==void 0?r:void 0,w=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,x=(l=n.photoURL)!==null&&l!==void 0?l:void 0,N=(c=n.tenantId)!==null&&c!==void 0?c:void 0,P=(f=n._redirectEventId)!==null&&f!==void 0?f:void 0,O=(d=n.createdAt)!==null&&d!==void 0?d:void 0,k=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:F,emailVerified:G,isAnonymous:K,providerData:H,stsTokenManager:R}=n;Fe(F&&R,e,"internal-error");const I=iu.fromJSON(this.name,R);Fe(typeof F=="string",e,"internal-error"),bo(v,e.name),bo(T,e.name),Fe(typeof G=="boolean",e,"internal-error"),Fe(typeof K=="boolean",e,"internal-error"),bo(w,e.name),bo(x,e.name),bo(N,e.name),bo(P,e.name),bo(O,e.name),bo(k,e.name);const D=new Mr({uid:F,auth:e,email:T,emailVerified:G,displayName:v,isAnonymous:K,photoURL:x,phoneNumber:w,tenantId:N,stsTokenManager:I,createdAt:O,lastLoginAt:k});return H&&Array.isArray(H)&&(D.providerData=H.map(V=>Object.assign({},V))),P&&(D._redirectEventId=P),D}static async _fromIdTokenResponse(e,n,i=!1){const r=new iu;r.updateFromServerResponse(n);const o=new Mr({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await kp(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];Fe(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?D1(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),c=new iu;c.updateFromIdToken(i);const f=new Mr({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:l}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new i0(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(f,d),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb=new Map;function Ns(t){Ls(t instanceof Function,"Expected a class definition");let e=cb.get(t);return e?(Ls(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,cb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}M1.type="NONE";const fb=M1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(t,e,n){return`firebase:${t}:${e}:${n}`}class ru{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=up(this.userKey,r.apiKey,o),this.fullPersistenceKey=up("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Mp(this.auth,{idToken:e}).catch(()=>{});return n?Mr._fromGetAccountInfoResponse(this.auth,n,e):null}return Mr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new ru(Ns(fb),e,i);const r=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=r[0]||Ns(fb);const l=up(i,e.config.apiKey,e.name);let c=null;for(const d of n)try{const p=await d._get(l);if(p){let v;if(typeof p=="string"){const T=await Mp(e,{idToken:p}).catch(()=>{});if(!T)break;v=await Mr._fromGetAccountInfoResponse(e,T,p)}else v=Mr._fromJSON(e,p);d!==o&&(c=v),o=d;break}}catch{}const f=r.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new ru(o,e,i):(o=f[0],c&&await o._set(l,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==o)try{await d._remove(l)}catch{}})),new ru(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(O1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(k1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(F1(e))return"Blackberry";if(B1(e))return"Webos";if(V1(e))return"Safari";if((e.includes("chrome/")||L1(e))&&!e.includes("edge/"))return"Chrome";if(U1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function k1(t=ui()){return/firefox\//i.test(t)}function V1(t=ui()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function L1(t=ui()){return/crios\//i.test(t)}function O1(t=ui()){return/iemobile/i.test(t)}function U1(t=ui()){return/android/i.test(t)}function F1(t=ui()){return/blackberry/i.test(t)}function B1(t=ui()){return/webos/i.test(t)}function w_(t=ui()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function YO(t=ui()){var e;return w_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function JO(){return lL()&&document.documentMode===10}function q1(t=ui()){return w_(t)||U1(t)||B1(t)||F1(t)||/windows phone/i.test(t)||O1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(t,e=[]){let n;switch(t){case"Browser":n=db(ui());break;case"Worker":n=`${db(ui())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Qa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,c)=>{try{const f=e(o);l(f)}catch(f){c(f)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XO(t,e={}){return Qo(t,"GET","/v2/passwordPolicy",Xo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO=6;class ZO{constructor(e){var n,i,r,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:QO,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,o,l,c;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(n=f.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),f.isValid&&(f.isValid=(i=f.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(r=f.containsLowercaseLetter)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(o=f.containsUppercaseLetter)!==null&&o!==void 0?o:!0),f.isValid&&(f.isValid=(l=f.containsNumericCharacter)!==null&&l!==void 0?l:!0),f.isValid&&(f.isValid=(c=f.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),f}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hb(this),this.idTokenSubscription=new hb(this),this.beforeStateQueue=new WO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=I1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ns(n)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await ru.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Mp(this,{idToken:e}),i=await Mr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ti(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=r==null?void 0:r._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===c)&&(f!=null&&f.user)&&(r=f.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await kp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=DO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ti(this.app))return Promise.reject(Ps(this));const n=e?Vt(e):null;return n&&Fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ti(this.app)?Promise.reject(Ps(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ti(this.app)?Promise.reject(Ps(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ns(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await XO(this),n=new ZO(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gf("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await KO(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ns(e)||this._popupRedirectResolver;Fe(n,this,"argument-error"),this.redirectPersistenceManager=await ru.create(this,[Ns(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,i,r);return()=>{l=!0,f()}}else{const f=e.addObserver(n);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=z1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;if(Ti(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&IO(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Zo(t){return Vt(t)}class hb{constructor(e){this.auth=e,this.observer=null,this.addObserver=gL(n=>this.observer=n)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tU(t){xm=t}function H1(t){return xm.loadJS(t)}function nU(){return xm.recaptchaEnterpriseScript}function iU(){return xm.gapiScript}function rU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class sU{constructor(){this.enterprise=new oU}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class oU{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const aU="recaptcha-enterprise",G1="NO_RECAPTCHA";class lU{constructor(e){this.type=aU,this.auth=Zo(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{FO(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new UO(f);return o.tenantId==null?o._agentRecaptchaConfig=d:o._tenantRecaptchaConfigs[o.tenantId]=d,l(d.siteKey)}}).catch(f=>{c(f)})})}function r(o,l,c){const f=window.grecaptcha;lb(f)?f.enterprise.ready(()=>{f.enterprise.execute(o,{action:e}).then(d=>{l(d)}).catch(()=>{l(G1)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new sU().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{i(this.auth).then(c=>{if(!n&&lb(window.grecaptcha))r(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let f=nU();f.length!==0&&(f+=c),H1(f).then(()=>{r(c,o,l)}).catch(d=>{l(d)})}}).catch(c=>{l(c)})})}}async function pb(t,e,n,i=!1,r=!1){const o=new lU(t);let l;if(r)l=G1;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const f=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const f=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return i?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function r0(t,e,n,i,r){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await pb(t,e,n,n==="getOobCode");return i(t,l)}else return i(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await pb(t,e,n,n==="getOobCode");return i(t,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uU(t,e){const n=$f(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(ja(o,e??{}))return r;Er(r,"already-initialized")}return n.initialize({options:e})}function cU(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Ns);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function fU(t,e,n){const i=Zo(t);Fe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=j1(e),{host:l,port:c}=dU(e),f=c===null?"":`:${c}`,d={url:`${o}//${l}${f}/`},p=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Fe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Fe(ja(d,i.config.emulator)&&ja(p,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=d,i.emulatorConfig=p,i.settings.appVerificationDisabledForTesting=!0,qs(l)?(Am(`${o}//${l}${f}`),bm("Auth",!0)):hU()}function j1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function dU(t){const e=j1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:mb(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:mb(l)}}}function mb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function hU(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Rs("not implemented")}_getIdTokenResponse(e){return Rs("not implemented")}_linkToIdToken(e,n){return Rs("not implemented")}_getReauthenticationResolver(e){return Rs("not implemented")}}async function pU(t,e){return Qo(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mU(t,e){return Yf(t,"POST","/v1/accounts:signInWithPassword",Xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gU(t,e){return Yf(t,"POST","/v1/accounts:signInWithEmailLink",Xo(t,e))}async function yU(t,e){return Yf(t,"POST","/v1/accounts:signInWithEmailLink",Xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If extends A_{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new If(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new If(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return r0(e,n,"signInWithPassword",mU);case"emailLink":return gU(e,{email:this._email,oobCode:this._password});default:Er(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return r0(e,i,"signUpPassword",pU);case"emailLink":return yU(e,{idToken:n,email:this._email,oobCode:this._password});default:Er(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function su(t,e){return Yf(t,"POST","/v1/accounts:signInWithIdp",Xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vU="http://localhost";class $a extends A_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $a(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Er("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,o=v_(n,["providerId","signInMethod"]);if(!i||!r)return null;const l=new $a(i,r);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return su(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,su(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,su(e,n)}buildRequest(){const e={requestUri:vU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=jf(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _U(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function TU(t){const e=Hc(Gc(t)).link,n=e?Hc(Gc(e)).deep_link_id:null,i=Hc(Gc(t)).deep_link_id;return(i?Hc(Gc(i)).link:null)||i||n||e||t}class b_{constructor(e){var n,i,r,o,l,c;const f=Hc(Gc(e)),d=(n=f.apiKey)!==null&&n!==void 0?n:null,p=(i=f.oobCode)!==null&&i!==void 0?i:null,v=_U((r=f.mode)!==null&&r!==void 0?r:null);Fe(d&&p&&v,"argument-error"),this.apiKey=d,this.operation=v,this.code=p,this.continueUrl=(o=f.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=f.lang)!==null&&l!==void 0?l:null,this.tenantId=(c=f.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=TU(e);try{return new b_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(){this.providerId=xu.PROVIDER_ID}static credential(e,n){return If._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=b_.parseLink(n);return Fe(i,"argument-error"),If._fromEmailAndCode(e,i.code,i.tenantId)}}xu.PROVIDER_ID="password";xu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";xu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf extends C_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo extends Jf{constructor(){super("facebook.com")}static credential(e){return $a._fromParams({providerId:xo.PROVIDER_ID,signInMethod:xo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xo.credentialFromTaggedObject(e)}static credentialFromError(e){return xo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xo.credential(e.oauthAccessToken)}catch{return null}}}xo.FACEBOOK_SIGN_IN_METHOD="facebook.com";xo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends Jf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $a._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Is.credential(n,i)}catch{return null}}}Is.GOOGLE_SIGN_IN_METHOD="google.com";Is.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io extends Jf{constructor(){super("github.com")}static credential(e){return $a._fromParams({providerId:Io.PROVIDER_ID,signInMethod:Io.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Io.credentialFromTaggedObject(e)}static credentialFromError(e){return Io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Io.credential(e.oauthAccessToken)}catch{return null}}}Io.GITHUB_SIGN_IN_METHOD="github.com";Io.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro extends Jf{constructor(){super("twitter.com")}static credential(e,n){return $a._fromParams({providerId:Ro.PROVIDER_ID,signInMethod:Ro.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ro.credentialFromTaggedObject(e)}static credentialFromError(e){return Ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Ro.credential(n,i)}catch{return null}}}Ro.TWITTER_SIGN_IN_METHOD="twitter.com";Ro.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EU(t,e){return Yf(t,"POST","/v1/accounts:signUp",Xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await Mr._fromIdTokenResponse(e,i,r),l=gb(i);return new Ka({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=gb(i);return new Ka({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function gb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp extends Fr{constructor(e,n,i,r){var o;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Vp.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Vp(e,n,i,r)}}function $1(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Vp._fromErrorAndOperation(t,o,e,i):o})}async function SU(t,e,n=!1){const i=await xf(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ka._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wU(t,e,n=!1){const{auth:i}=t;if(Ti(i.app))return Promise.reject(Ps(i));const r="reauthenticate";try{const o=await xf(t,$1(i,r,e,t),n);Fe(o.idToken,i,"internal-error");const l=S_(o.idToken);Fe(l,i,"internal-error");const{sub:c}=l;return Fe(t.uid===c,i,"user-mismatch"),Ka._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Er(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K1(t,e,n=!1){if(Ti(t.app))return Promise.reject(Ps(t));const i="signIn",r=await $1(t,i,e),o=await Ka._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}async function AU(t,e){return K1(Zo(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y1(t){const e=Zo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function bU(t,e,n){if(Ti(t.app))return Promise.reject(Ps(t));const i=Zo(t),l=await r0(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",EU).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&Y1(t),f}),c=await Ka._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(c.user),c}function CU(t,e,n){return Ti(t.app)?Promise.reject(Ps(t)):AU(Vt(t),xu.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Y1(t),i})}function xU(t,e,n,i){return Vt(t).onIdTokenChanged(e,n,i)}function IU(t,e,n){return Vt(t).beforeAuthStateChanged(e,n)}function RU(t,e,n,i){return Vt(t).onAuthStateChanged(e,n,i)}function NU(t){return Vt(t).signOut()}const Lp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Lp,"1"),this.storage.removeItem(Lp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PU=1e3,DU=10;class W1 extends J1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=q1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,c,f)=>{this.notifyListeners(l,f)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);JO()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,DU):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},PU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}W1.type="LOCAL";const MU=W1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1 extends J1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}X1.type="SESSION";const Q1=X1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kU(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Im(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,l=this.handlersMap[r];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const c=Array.from(l).map(async d=>d(n.origin,o)),f=await kU(c);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Im.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,l;return new Promise((c,f)=>{const d=x_("",20);r.port1.start();const p=setTimeout(()=>{f(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(v){const T=v;if(T.data.eventId===d)switch(T.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(T.data.response);break;default:clearTimeout(p),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(){return window}function LU(t){Qr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(){return typeof Qr().WorkerGlobalScope<"u"&&typeof Qr().importScripts=="function"}async function OU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function UU(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function FU(){return Z1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN="firebaseLocalStorageDb",BU=1,Op="firebaseLocalStorage",tN="fbase_key";class Wf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Rm(t,e){return t.transaction([Op],e?"readwrite":"readonly").objectStore(Op)}function qU(){const t=indexedDB.deleteDatabase(eN);return new Wf(t).toPromise()}function s0(){const t=indexedDB.open(eN,BU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Op,{keyPath:tN})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Op)?e(i):(i.close(),await qU(),e(await s0()))})})}async function yb(t,e,n){const i=Rm(t,!0).put({[tN]:e,value:n});return new Wf(i).toPromise()}async function zU(t,e){const n=Rm(t,!1).get(e),i=await new Wf(n).toPromise();return i===void 0?null:i.value}function vb(t,e){const n=Rm(t,!0).delete(e);return new Wf(n).toPromise()}const HU=800,GU=3;class nN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await s0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>GU)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Z1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Im._getInstance(FU()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await OU(),!this.activeServiceWorker)return;this.sender=new VU(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||UU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await s0();return await yb(e,Lp,"1"),await vb(e,Lp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>yb(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>zU(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>vb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Rm(r,!1).getAll();return new Wf(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),HU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nN.type="LOCAL";const jU=nN;new Kf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(t,e){return e?Ns(e):(Fe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_ extends A_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return su(e,this._buildIdpRequest())}_linkToIdToken(e,n){return su(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return su(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function $U(t){return K1(t.auth,new I_(t),t.bypassAuthState)}function KU(t){const{auth:e,user:n}=t;return Fe(n,e,"internal-error"),wU(n,new I_(t),t.bypassAuthState)}async function YU(t){const{auth:e,user:n}=t;return Fe(n,e,"internal-error"),SU(n,new I_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(f))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $U;case"linkViaPopup":case"linkViaRedirect":return YU;case"reauthViaPopup":case"reauthViaRedirect":return KU;default:Er(this.auth,"internal-error")}}resolve(e){Ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JU=new Kf(2e3,1e4);async function WU(t,e,n){if(Ti(t.app))return Promise.reject(Lr(t,"operation-not-supported-in-this-environment"));const i=Zo(t);RO(t,e,C_);const r=iN(i,n);return new Va(i,"signInViaPopup",e,r).executeNotNull()}class Va extends rN{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,Va.currentPopupAction&&Va.currentPopupAction.cancel(),Va.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){Ls(this.filter.length===1,"Popup operations only handle one event");const e=x_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Va.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,JU.get())};e()}}Va.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XU="pendingRedirect",cp=new Map;class QU extends rN{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=cp.get(this.auth._key());if(!e){try{const i=await ZU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}cp.set(this.auth._key(),e)}return this.bypassAuthState||cp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ZU(t,e){const n=n4(e),i=t4(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function e4(t,e){cp.set(t._key(),e)}function t4(t){return Ns(t._redirectPersistence)}function n4(t){return up(XU,t.config.apiKey,t.name)}async function i4(t,e,n=!1){if(Ti(t.app))return Promise.reject(Ps(t));const i=Zo(t),r=iN(i,e),l=await new QU(i,r,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4=600*1e3;class s4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!o4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!sN(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Lr(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=r4&&this.cachedEventUids.clear(),this.cachedEventUids.has(_b(e))}saveEventToCache(e){this.cachedEventUids.add(_b(e)),this.lastProcessedEventTime=Date.now()}}function _b(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function sN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function o4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a4(t,e={}){return Qo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,u4=/^https?/;async function c4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await a4(t);for(const n of e)try{if(f4(n))return}catch{}Er(t,"unauthorized-domain")}function f4(t){const e=n0(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!u4.test(n))return!1;if(l4.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4=new Kf(3e4,6e4);function Tb(){const t=Qr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function h4(t){return new Promise((e,n)=>{var i,r,o;function l(){Tb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Tb(),n(Lr(t,"network-request-failed"))},timeout:d4.get()})}if(!((r=(i=Qr().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=Qr().gapi)===null||o===void 0)&&o.load)l();else{const c=rU("iframefcb");return Qr()[c]=()=>{gapi.load?l():n(Lr(t,"network-request-failed"))},H1(`${iU()}?onload=${c}`).catch(f=>n(f))}}).catch(e=>{throw fp=null,e})}let fp=null;function p4(t){return fp=fp||h4(t),fp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4=new Kf(5e3,15e3),g4="__/auth/iframe",y4="emulator/auth/iframe",v4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function T4(t){const e=t.config;Fe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?E_(e,y4):`https://${t.config.authDomain}/${g4}`,i={apiKey:e.apiKey,appName:t.name,v:Qa},r=_4.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${jf(i).slice(1)}`}async function E4(t){const e=await p4(t),n=Qr().gapi;return Fe(n,t,"internal-error"),e.open({where:document.body,url:T4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:v4,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const l=Lr(t,"network-request-failed"),c=Qr().setTimeout(()=>{o(l)},m4.get());function f(){Qr().clearTimeout(c),r(i)}i.ping(f).then(f,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},w4=500,A4=600,b4="_blank",C4="http://localhost";class Eb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function x4(t,e,n,i=w4,r=A4){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const f=Object.assign(Object.assign({},S4),{width:i.toString(),height:r.toString(),top:o,left:l}),d=ui().toLowerCase();n&&(c=L1(d)?b4:n),k1(d)&&(e=e||C4,f.scrollbars="yes");const p=Object.entries(f).reduce((T,[w,x])=>`${T}${w}=${x},`,"");if(YO(d)&&c!=="_self")return I4(e||"",c),new Eb(null);const v=window.open(e||"",c,p);Fe(v,t,"popup-blocked");try{v.focus()}catch{}return new Eb(v)}function I4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4="__/auth/handler",N4="emulator/auth/handler",P4=encodeURIComponent("fac");async function Sb(t,e,n,i,r,o){Fe(t.config.authDomain,t,"auth-domain-config-required"),Fe(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Qa,eventId:r};if(e instanceof C_){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",mL(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,v]of Object.entries({}))l[p]=v}if(e instanceof Jf){const p=e.getScopes().filter(v=>v!=="");p.length>0&&(l.scopes=p.join(","))}t.tenantId&&(l.tid=t.tenantId);const c=l;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const f=await t._getAppCheckToken(),d=f?`#${P4}=${encodeURIComponent(f)}`:"";return`${D4(t)}?${jf(c).slice(1)}${d}`}function D4({config:t}){return t.emulator?E_(t,N4):`https://${t.authDomain}/${R4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv="webStorageSupport";class M4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Q1,this._completeRedirectFn=i4,this._overrideRedirectResult=e4}async _openPopup(e,n,i,r){var o;Ls((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await Sb(e,n,i,n0(),r);return x4(e,l,x_())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await Sb(e,n,i,n0(),r);return LU(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(Ls(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await E4(e),i=new s4(e);return n.register("authEvent",r=>(Fe(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Sv,{type:Sv},r=>{var o;const l=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[Sv];l!==void 0&&n(!!l),Er(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=c4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return q1()||V1()||w_()}}const k4=M4;var wb="@firebase/auth",Ab="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function O4(t){qo(new ks("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=i.options;Fe(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:l,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:z1(t)},d=new eU(i,r,o,f);return cU(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),qo(new ks("auth-internal",e=>{const n=Zo(e.getProvider("auth").getImmediate());return(i=>new V4(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_r(wb,Ab,L4(t)),_r(wb,Ab,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4=300,F4=T1("authIdTokenMaxAge")||U4;let bb=null;const B4=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>F4)return;const r=n==null?void 0:n.token;bb!==r&&(bb=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function q4(t=Cm()){const e=$f(t,"auth");if(e.isInitialized())return e.getImmediate();const n=uU(t,{popupRedirectResolver:k4,persistence:[jU,MU,Q1]}),i=T1("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=B4(o.toString());IU(n,l,()=>l(n.currentUser)),xU(n,c=>l(c))}}const r=v1("auth");return r&&fU(n,`http://${r}`),n}function z4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}tU({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=Lr("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",z4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});O4("Browser");var H4="firebase",G4="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_r(H4,G4,"app");var Cb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Uo,oN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,I){function D(){}D.prototype=I.prototype,R.D=I.prototype,R.prototype=new D,R.prototype.constructor=R,R.C=function(V,U,z){for(var B=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)B[Re-2]=arguments[Re];return I.prototype[U].apply(V,B)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(R,I,D){D||(D=0);var V=Array(16);if(typeof I=="string")for(var U=0;16>U;++U)V[U]=I.charCodeAt(D++)|I.charCodeAt(D++)<<8|I.charCodeAt(D++)<<16|I.charCodeAt(D++)<<24;else for(U=0;16>U;++U)V[U]=I[D++]|I[D++]<<8|I[D++]<<16|I[D++]<<24;I=R.g[0],D=R.g[1],U=R.g[2];var z=R.g[3],B=I+(z^D&(U^z))+V[0]+3614090360&4294967295;I=D+(B<<7&4294967295|B>>>25),B=z+(U^I&(D^U))+V[1]+3905402710&4294967295,z=I+(B<<12&4294967295|B>>>20),B=U+(D^z&(I^D))+V[2]+606105819&4294967295,U=z+(B<<17&4294967295|B>>>15),B=D+(I^U&(z^I))+V[3]+3250441966&4294967295,D=U+(B<<22&4294967295|B>>>10),B=I+(z^D&(U^z))+V[4]+4118548399&4294967295,I=D+(B<<7&4294967295|B>>>25),B=z+(U^I&(D^U))+V[5]+1200080426&4294967295,z=I+(B<<12&4294967295|B>>>20),B=U+(D^z&(I^D))+V[6]+2821735955&4294967295,U=z+(B<<17&4294967295|B>>>15),B=D+(I^U&(z^I))+V[7]+4249261313&4294967295,D=U+(B<<22&4294967295|B>>>10),B=I+(z^D&(U^z))+V[8]+1770035416&4294967295,I=D+(B<<7&4294967295|B>>>25),B=z+(U^I&(D^U))+V[9]+2336552879&4294967295,z=I+(B<<12&4294967295|B>>>20),B=U+(D^z&(I^D))+V[10]+4294925233&4294967295,U=z+(B<<17&4294967295|B>>>15),B=D+(I^U&(z^I))+V[11]+2304563134&4294967295,D=U+(B<<22&4294967295|B>>>10),B=I+(z^D&(U^z))+V[12]+1804603682&4294967295,I=D+(B<<7&4294967295|B>>>25),B=z+(U^I&(D^U))+V[13]+4254626195&4294967295,z=I+(B<<12&4294967295|B>>>20),B=U+(D^z&(I^D))+V[14]+2792965006&4294967295,U=z+(B<<17&4294967295|B>>>15),B=D+(I^U&(z^I))+V[15]+1236535329&4294967295,D=U+(B<<22&4294967295|B>>>10),B=I+(U^z&(D^U))+V[1]+4129170786&4294967295,I=D+(B<<5&4294967295|B>>>27),B=z+(D^U&(I^D))+V[6]+3225465664&4294967295,z=I+(B<<9&4294967295|B>>>23),B=U+(I^D&(z^I))+V[11]+643717713&4294967295,U=z+(B<<14&4294967295|B>>>18),B=D+(z^I&(U^z))+V[0]+3921069994&4294967295,D=U+(B<<20&4294967295|B>>>12),B=I+(U^z&(D^U))+V[5]+3593408605&4294967295,I=D+(B<<5&4294967295|B>>>27),B=z+(D^U&(I^D))+V[10]+38016083&4294967295,z=I+(B<<9&4294967295|B>>>23),B=U+(I^D&(z^I))+V[15]+3634488961&4294967295,U=z+(B<<14&4294967295|B>>>18),B=D+(z^I&(U^z))+V[4]+3889429448&4294967295,D=U+(B<<20&4294967295|B>>>12),B=I+(U^z&(D^U))+V[9]+568446438&4294967295,I=D+(B<<5&4294967295|B>>>27),B=z+(D^U&(I^D))+V[14]+3275163606&4294967295,z=I+(B<<9&4294967295|B>>>23),B=U+(I^D&(z^I))+V[3]+4107603335&4294967295,U=z+(B<<14&4294967295|B>>>18),B=D+(z^I&(U^z))+V[8]+1163531501&4294967295,D=U+(B<<20&4294967295|B>>>12),B=I+(U^z&(D^U))+V[13]+2850285829&4294967295,I=D+(B<<5&4294967295|B>>>27),B=z+(D^U&(I^D))+V[2]+4243563512&4294967295,z=I+(B<<9&4294967295|B>>>23),B=U+(I^D&(z^I))+V[7]+1735328473&4294967295,U=z+(B<<14&4294967295|B>>>18),B=D+(z^I&(U^z))+V[12]+2368359562&4294967295,D=U+(B<<20&4294967295|B>>>12),B=I+(D^U^z)+V[5]+4294588738&4294967295,I=D+(B<<4&4294967295|B>>>28),B=z+(I^D^U)+V[8]+2272392833&4294967295,z=I+(B<<11&4294967295|B>>>21),B=U+(z^I^D)+V[11]+1839030562&4294967295,U=z+(B<<16&4294967295|B>>>16),B=D+(U^z^I)+V[14]+4259657740&4294967295,D=U+(B<<23&4294967295|B>>>9),B=I+(D^U^z)+V[1]+2763975236&4294967295,I=D+(B<<4&4294967295|B>>>28),B=z+(I^D^U)+V[4]+1272893353&4294967295,z=I+(B<<11&4294967295|B>>>21),B=U+(z^I^D)+V[7]+4139469664&4294967295,U=z+(B<<16&4294967295|B>>>16),B=D+(U^z^I)+V[10]+3200236656&4294967295,D=U+(B<<23&4294967295|B>>>9),B=I+(D^U^z)+V[13]+681279174&4294967295,I=D+(B<<4&4294967295|B>>>28),B=z+(I^D^U)+V[0]+3936430074&4294967295,z=I+(B<<11&4294967295|B>>>21),B=U+(z^I^D)+V[3]+3572445317&4294967295,U=z+(B<<16&4294967295|B>>>16),B=D+(U^z^I)+V[6]+76029189&4294967295,D=U+(B<<23&4294967295|B>>>9),B=I+(D^U^z)+V[9]+3654602809&4294967295,I=D+(B<<4&4294967295|B>>>28),B=z+(I^D^U)+V[12]+3873151461&4294967295,z=I+(B<<11&4294967295|B>>>21),B=U+(z^I^D)+V[15]+530742520&4294967295,U=z+(B<<16&4294967295|B>>>16),B=D+(U^z^I)+V[2]+3299628645&4294967295,D=U+(B<<23&4294967295|B>>>9),B=I+(U^(D|~z))+V[0]+4096336452&4294967295,I=D+(B<<6&4294967295|B>>>26),B=z+(D^(I|~U))+V[7]+1126891415&4294967295,z=I+(B<<10&4294967295|B>>>22),B=U+(I^(z|~D))+V[14]+2878612391&4294967295,U=z+(B<<15&4294967295|B>>>17),B=D+(z^(U|~I))+V[5]+4237533241&4294967295,D=U+(B<<21&4294967295|B>>>11),B=I+(U^(D|~z))+V[12]+1700485571&4294967295,I=D+(B<<6&4294967295|B>>>26),B=z+(D^(I|~U))+V[3]+2399980690&4294967295,z=I+(B<<10&4294967295|B>>>22),B=U+(I^(z|~D))+V[10]+4293915773&4294967295,U=z+(B<<15&4294967295|B>>>17),B=D+(z^(U|~I))+V[1]+2240044497&4294967295,D=U+(B<<21&4294967295|B>>>11),B=I+(U^(D|~z))+V[8]+1873313359&4294967295,I=D+(B<<6&4294967295|B>>>26),B=z+(D^(I|~U))+V[15]+4264355552&4294967295,z=I+(B<<10&4294967295|B>>>22),B=U+(I^(z|~D))+V[6]+2734768916&4294967295,U=z+(B<<15&4294967295|B>>>17),B=D+(z^(U|~I))+V[13]+1309151649&4294967295,D=U+(B<<21&4294967295|B>>>11),B=I+(U^(D|~z))+V[4]+4149444226&4294967295,I=D+(B<<6&4294967295|B>>>26),B=z+(D^(I|~U))+V[11]+3174756917&4294967295,z=I+(B<<10&4294967295|B>>>22),B=U+(I^(z|~D))+V[2]+718787259&4294967295,U=z+(B<<15&4294967295|B>>>17),B=D+(z^(U|~I))+V[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(U+(B<<21&4294967295|B>>>11))&4294967295,R.g[2]=R.g[2]+U&4294967295,R.g[3]=R.g[3]+z&4294967295}i.prototype.u=function(R,I){I===void 0&&(I=R.length);for(var D=I-this.blockSize,V=this.B,U=this.h,z=0;z<I;){if(U==0)for(;z<=D;)r(this,R,z),z+=this.blockSize;if(typeof R=="string"){for(;z<I;)if(V[U++]=R.charCodeAt(z++),U==this.blockSize){r(this,V),U=0;break}}else for(;z<I;)if(V[U++]=R[z++],U==this.blockSize){r(this,V),U=0;break}}this.h=U,this.o+=I},i.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;var D=8*this.o;for(I=R.length-8;I<R.length;++I)R[I]=D&255,D/=256;for(this.u(R),R=Array(16),I=D=0;4>I;++I)for(var V=0;32>V;V+=8)R[D++]=this.g[I]>>>V&255;return R};function o(R,I){var D=c;return Object.prototype.hasOwnProperty.call(D,R)?D[R]:D[R]=I(R)}function l(R,I){this.h=I;for(var D=[],V=!0,U=R.length-1;0<=U;U--){var z=R[U]|0;V&&z==I||(D[U]=z,V=!1)}this.g=D}var c={};function f(R){return-128<=R&&128>R?o(R,function(I){return new l([I|0],0>I?-1:0)}):new l([R|0],0>R?-1:0)}function d(R){if(isNaN(R)||!isFinite(R))return v;if(0>R)return P(d(-R));for(var I=[],D=1,V=0;R>=D;V++)I[V]=R/D|0,D*=4294967296;return new l(I,0)}function p(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return P(p(R.substring(1),I));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=d(Math.pow(I,8)),V=v,U=0;U<R.length;U+=8){var z=Math.min(8,R.length-U),B=parseInt(R.substring(U,U+z),I);8>z?(z=d(Math.pow(I,z)),V=V.j(z).add(d(B))):(V=V.j(D),V=V.add(d(B)))}return V}var v=f(0),T=f(1),w=f(16777216);t=l.prototype,t.m=function(){if(N(this))return-P(this).m();for(var R=0,I=1,D=0;D<this.g.length;D++){var V=this.i(D);R+=(0<=V?V:4294967296+V)*I,I*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(x(this))return"0";if(N(this))return"-"+P(this).toString(R);for(var I=d(Math.pow(R,6)),D=this,V="";;){var U=G(D,I).g;D=O(D,U.j(I));var z=((0<D.g.length?D.g[0]:D.h)>>>0).toString(R);if(D=U,x(D))return z+V;for(;6>z.length;)z="0"+z;V=z+V}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function x(R){if(R.h!=0)return!1;for(var I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function N(R){return R.h==-1}t.l=function(R){return R=O(this,R),N(R)?-1:x(R)?0:1};function P(R){for(var I=R.g.length,D=[],V=0;V<I;V++)D[V]=~R.g[V];return new l(D,~R.h).add(T)}t.abs=function(){return N(this)?P(this):this},t.add=function(R){for(var I=Math.max(this.g.length,R.g.length),D=[],V=0,U=0;U<=I;U++){var z=V+(this.i(U)&65535)+(R.i(U)&65535),B=(z>>>16)+(this.i(U)>>>16)+(R.i(U)>>>16);V=B>>>16,z&=65535,B&=65535,D[U]=B<<16|z}return new l(D,D[D.length-1]&-2147483648?-1:0)};function O(R,I){return R.add(P(I))}t.j=function(R){if(x(this)||x(R))return v;if(N(this))return N(R)?P(this).j(P(R)):P(P(this).j(R));if(N(R))return P(this.j(P(R)));if(0>this.l(w)&&0>R.l(w))return d(this.m()*R.m());for(var I=this.g.length+R.g.length,D=[],V=0;V<2*I;V++)D[V]=0;for(V=0;V<this.g.length;V++)for(var U=0;U<R.g.length;U++){var z=this.i(V)>>>16,B=this.i(V)&65535,Re=R.i(U)>>>16,Ue=R.i(U)&65535;D[2*V+2*U]+=B*Ue,k(D,2*V+2*U),D[2*V+2*U+1]+=z*Ue,k(D,2*V+2*U+1),D[2*V+2*U+1]+=B*Re,k(D,2*V+2*U+1),D[2*V+2*U+2]+=z*Re,k(D,2*V+2*U+2)}for(V=0;V<I;V++)D[V]=D[2*V+1]<<16|D[2*V];for(V=I;V<2*I;V++)D[V]=0;return new l(D,0)};function k(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function F(R,I){this.g=R,this.h=I}function G(R,I){if(x(I))throw Error("division by zero");if(x(R))return new F(v,v);if(N(R))return I=G(P(R),I),new F(P(I.g),P(I.h));if(N(I))return I=G(R,P(I)),new F(P(I.g),I.h);if(30<R.g.length){if(N(R)||N(I))throw Error("slowDivide_ only works with positive integers.");for(var D=T,V=I;0>=V.l(R);)D=K(D),V=K(V);var U=H(D,1),z=H(V,1);for(V=H(V,2),D=H(D,2);!x(V);){var B=z.add(V);0>=B.l(R)&&(U=U.add(D),z=B),V=H(V,1),D=H(D,1)}return I=O(R,U.j(I)),new F(U,I)}for(U=v;0<=R.l(I);){for(D=Math.max(1,Math.floor(R.m()/I.m())),V=Math.ceil(Math.log(D)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),z=d(D),B=z.j(I);N(B)||0<B.l(R);)D-=V,z=d(D),B=z.j(I);x(z)&&(z=T),U=U.add(z),R=O(R,B)}return new F(U,R)}t.A=function(R){return G(this,R).h},t.and=function(R){for(var I=Math.max(this.g.length,R.g.length),D=[],V=0;V<I;V++)D[V]=this.i(V)&R.i(V);return new l(D,this.h&R.h)},t.or=function(R){for(var I=Math.max(this.g.length,R.g.length),D=[],V=0;V<I;V++)D[V]=this.i(V)|R.i(V);return new l(D,this.h|R.h)},t.xor=function(R){for(var I=Math.max(this.g.length,R.g.length),D=[],V=0;V<I;V++)D[V]=this.i(V)^R.i(V);return new l(D,this.h^R.h)};function K(R){for(var I=R.g.length+1,D=[],V=0;V<I;V++)D[V]=R.i(V)<<1|R.i(V-1)>>>31;return new l(D,R.h)}function H(R,I){var D=I>>5;I%=32;for(var V=R.g.length-D,U=[],z=0;z<V;z++)U[z]=0<I?R.i(z+D)>>>I|R.i(z+D+1)<<32-I:R.i(z+D);return new l(U,R.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,oN=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=d,l.fromString=p,Uo=l}).apply(typeof Cb<"u"?Cb:typeof self<"u"?self:typeof window<"u"?window:{});var kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aN,jc,lN,dp,o0,uN,cN,fN;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,A,C){return g==Array.prototype||g==Object.prototype||(g[A]=C.value),g};function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof kh=="object"&&kh];for(var A=0;A<g.length;++A){var C=g[A];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=n(this);function r(g,A){if(A)e:{var C=i;g=g.split(".");for(var L=0;L<g.length-1;L++){var W=g[L];if(!(W in C))break e;C=C[W]}g=g[g.length-1],L=C[g],A=A(L),A!=L&&A!=null&&e(C,g,{configurable:!0,writable:!0,value:A})}}function o(g,A){g instanceof String&&(g+="");var C=0,L=!1,W={next:function(){if(!L&&C<g.length){var ie=C++;return{value:A(ie,g[ie]),done:!1}}return L=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}r("Array.prototype.values",function(g){return g||function(){return o(this,function(A,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function f(g){var A=typeof g;return A=A!="object"?A:g?Array.isArray(g)?"array":A:"null",A=="array"||A=="object"&&typeof g.length=="number"}function d(g){var A=typeof g;return A=="object"&&g!=null||A=="function"}function p(g,A,C){return g.call.apply(g.bind,arguments)}function v(g,A,C){if(!g)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,L),g.apply(A,W)}}return function(){return g.apply(A,arguments)}}function T(g,A,C){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:v,T.apply(null,arguments)}function w(g,A){var C=Array.prototype.slice.call(arguments,1);return function(){var L=C.slice();return L.push.apply(L,arguments),g.apply(this,L)}}function x(g,A){function C(){}C.prototype=A.prototype,g.aa=A.prototype,g.prototype=new C,g.prototype.constructor=g,g.Qb=function(L,W,ie){for(var ge=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)ge[Et-2]=arguments[Et];return A.prototype[W].apply(L,ge)}}function N(g){const A=g.length;if(0<A){const C=Array(A);for(let L=0;L<A;L++)C[L]=g[L];return C}return[]}function P(g,A){for(let C=1;C<arguments.length;C++){const L=arguments[C];if(f(L)){const W=g.length||0,ie=L.length||0;g.length=W+ie;for(let ge=0;ge<ie;ge++)g[W+ge]=L[ge]}else g.push(L)}}class O{constructor(A,C){this.i=A,this.j=C,this.h=0,this.g=null}get(){let A;return 0<this.h?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function k(g){return/^[\s\xa0]*$/.test(g)}function F(){var g=c.navigator;return g&&(g=g.userAgent)?g:""}function G(g){return G[" "](g),g}G[" "]=function(){};var K=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function H(g,A,C){for(const L in g)A.call(C,g[L],L,g)}function R(g,A){for(const C in g)A.call(void 0,g[C],C,g)}function I(g){const A={};for(const C in g)A[C]=g[C];return A}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(g,A){let C,L;for(let W=1;W<arguments.length;W++){L=arguments[W];for(C in L)g[C]=L[C];for(let ie=0;ie<D.length;ie++)C=D[ie],Object.prototype.hasOwnProperty.call(L,C)&&(g[C]=L[C])}}function U(g){var A=1;g=g.split(":");const C=[];for(;0<A&&g.length;)C.push(g.shift()),A--;return g.length&&C.push(g.join(":")),C}function z(g){c.setTimeout(()=>{throw g},0)}function B(){var g=xe;let A=null;return g.g&&(A=g.g,g.g=g.g.next,g.g||(g.h=null),A.next=null),A}class Re{constructor(){this.h=this.g=null}add(A,C){const L=Ue.get();L.set(A,C),this.h?this.h.next=L:this.g=L,this.h=L}}var Ue=new O(()=>new ee,g=>g.reset());class ee{constructor(){this.next=this.g=this.h=null}set(A,C){this.h=A,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,me=!1,xe=new Re,be=()=>{const g=c.Promise.resolve(void 0);oe=()=>{g.then($)}};var $=()=>{for(var g;g=B();){try{g.h.call(g.g)}catch(C){z(C)}var A=Ue;A.j(g),100>A.h&&(A.h++,g.next=A.g,A.g=g)}me=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(g,A){this.type=g,this.g=this.target=A,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var re=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var g=!1,A=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const C=()=>{};c.addEventListener("test",C,A),c.removeEventListener("test",C,A)}catch{}return g})();function he(g,A){if(pe.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var C=this.type=g.type,L=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=A,A=g.relatedTarget){if(K){e:{try{G(A.nodeName);var W=!0;break e}catch{}W=!1}W||(A=null)}}else C=="mouseover"?A=g.fromElement:C=="mouseout"&&(A=g.toElement);this.relatedTarget=A,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:Te[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&he.aa.h.call(this)}}x(he,pe);var Te={2:"touch",3:"pen",4:"mouse"};he.prototype.h=function(){he.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Ve="closure_listenable_"+(1e6*Math.random()|0),qe=0;function yt(g,A,C,L,W){this.listener=g,this.proxy=null,this.src=A,this.type=C,this.capture=!!L,this.ha=W,this.key=++qe,this.da=this.fa=!1}function Un(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function ci(g){this.src=g,this.g={},this.h=0}ci.prototype.add=function(g,A,C,L,W){var ie=g.toString();g=this.g[ie],g||(g=this.g[ie]=[],this.h++);var ge=Jn(g,A,L,W);return-1<ge?(A=g[ge],C||(A.fa=!1)):(A=new yt(A,this.src,ie,!!L,W),A.fa=C,g.push(A)),A};function xt(g,A){var C=A.type;if(C in g.g){var L=g.g[C],W=Array.prototype.indexOf.call(L,A,void 0),ie;(ie=0<=W)&&Array.prototype.splice.call(L,W,1),ie&&(Un(A),g.g[C].length==0&&(delete g.g[C],g.h--))}}function Jn(g,A,C,L){for(var W=0;W<g.length;++W){var ie=g[W];if(!ie.da&&ie.listener==A&&ie.capture==!!C&&ie.ha==L)return W}return-1}var In="closure_lm_"+(1e6*Math.random()|0),Rn={};function Wn(g,A,C,L,W){if(Array.isArray(A)){for(var ie=0;ie<A.length;ie++)Wn(g,A[ie],C,L,W);return null}return C=Qt(C),g&&g[Ve]?g.K(A,C,d(L)?!!L.capture:!1,W):Si(g,A,C,!1,L,W)}function Si(g,A,C,L,W,ie){if(!A)throw Error("Invalid event type");var ge=d(W)?!!W.capture:!!W,Et=Li(g);if(Et||(g[In]=Et=new ci(g)),C=Et.add(A,C,L,ge,ie),C.proxy)return C;if(L=Je(),C.proxy=L,L.src=g,L.listener=C,g.addEventListener)re||(W=ge),W===void 0&&(W=!1),g.addEventListener(A.toString(),L,W);else if(g.attachEvent)g.attachEvent(wi(A.toString()),L);else if(g.addListener&&g.removeListener)g.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Je(){function g(C){return A.call(g.src,g.listener,C)}const A=Vi;return g}function Xn(g,A,C,L,W){if(Array.isArray(A))for(var ie=0;ie<A.length;ie++)Xn(g,A[ie],C,L,W);else L=d(L)?!!L.capture:!!L,C=Qt(C),g&&g[Ve]?(g=g.i,A=String(A).toString(),A in g.g&&(ie=g.g[A],C=Jn(ie,C,L,W),-1<C&&(Un(ie[C]),Array.prototype.splice.call(ie,C,1),ie.length==0&&(delete g.g[A],g.h--)))):g&&(g=Li(g))&&(A=g.g[A.toString()],g=-1,A&&(g=Jn(A,C,L,W)),(C=-1<g?A[g]:null)&&ft(C))}function ft(g){if(typeof g!="number"&&g&&!g.da){var A=g.src;if(A&&A[Ve])xt(A.i,g);else{var C=g.type,L=g.proxy;A.removeEventListener?A.removeEventListener(C,L,g.capture):A.detachEvent?A.detachEvent(wi(C),L):A.addListener&&A.removeListener&&A.removeListener(L),(C=Li(A))?(xt(C,g),C.h==0&&(C.src=null,A[In]=null)):Un(g)}}}function wi(g){return g in Rn?Rn[g]:Rn[g]="on"+g}function Vi(g,A){if(g.da)g=!0;else{A=new he(A,this);var C=g.listener,L=g.ha||g.src;g.fa&&ft(g),g=C.call(L,A)}return g}function Li(g){return g=g[In],g instanceof ci?g:null}var Tt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qt(g){return typeof g=="function"?g:(g[Tt]||(g[Tt]=function(A){return g.handleEvent(A)}),g[Tt])}function Ke(){Z.call(this),this.i=new ci(this),this.M=this,this.F=null}x(Ke,Z),Ke.prototype[Ve]=!0,Ke.prototype.removeEventListener=function(g,A,C,L){Xn(this,g,A,C,L)};function Lt(g,A){var C,L=g.F;if(L)for(C=[];L;L=L.F)C.push(L);if(g=g.M,L=A.type||A,typeof A=="string")A=new pe(A,g);else if(A instanceof pe)A.target=A.target||g;else{var W=A;A=new pe(L,g),V(A,W)}if(W=!0,C)for(var ie=C.length-1;0<=ie;ie--){var ge=A.g=C[ie];W=Yt(ge,L,!0,A)&&W}if(ge=A.g=g,W=Yt(ge,L,!0,A)&&W,W=Yt(ge,L,!1,A)&&W,C)for(ie=0;ie<C.length;ie++)ge=A.g=C[ie],W=Yt(ge,L,!1,A)&&W}Ke.prototype.N=function(){if(Ke.aa.N.call(this),this.i){var g=this.i,A;for(A in g.g){for(var C=g.g[A],L=0;L<C.length;L++)Un(C[L]);delete g.g[A],g.h--}}this.F=null},Ke.prototype.K=function(g,A,C,L){return this.i.add(String(g),A,!1,C,L)},Ke.prototype.L=function(g,A,C,L){return this.i.add(String(g),A,!0,C,L)};function Yt(g,A,C,L){if(A=g.i.g[String(A)],!A)return!0;A=A.concat();for(var W=!0,ie=0;ie<A.length;++ie){var ge=A[ie];if(ge&&!ge.da&&ge.capture==C){var Et=ge.listener,gn=ge.ha||ge.src;ge.fa&&xt(g.i,ge),W=Et.call(gn,L)!==!1&&W}}return W&&!L.defaultPrevented}function Zt(g,A,C){if(typeof g=="function")C&&(g=T(g,C));else if(g&&typeof g.handleEvent=="function")g=T(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(A)?-1:c.setTimeout(g,A||0)}function Sr(g){g.g=Zt(()=>{g.g=null,g.i&&(g.i=!1,Sr(g))},g.l);const A=g.h;g.h=null,g.m.apply(null,A)}class ra extends Z{constructor(A,C){super(),this.m=A,this.l=C,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:Sr(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nn(g){Z.call(this),this.h=g,this.g={}}x(Nn,Z);var Pn=[];function mn(g){H(g.g,function(A,C){this.g.hasOwnProperty(C)&&ft(A)},g),g.g={}}Nn.prototype.N=function(){Nn.aa.N.call(this),mn(this)},Nn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ue=c.JSON.stringify,Ee=c.JSON.parse,Se=class{stringify(g){return c.JSON.stringify(g,void 0)}parse(g){return c.JSON.parse(g,void 0)}};function de(){}de.prototype.h=null;function Ae(g){return g.h||(g.h=g.i())}function Ne(){}var ke={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xe(){pe.call(this,"d")}x(Xe,pe);function et(){pe.call(this,"c")}x(et,pe);var Pe={},$e=null;function ln(){return $e=$e||new Ke}Pe.La="serverreachability";function Zi(g){pe.call(this,Pe.La,g)}x(Zi,pe);function un(g){const A=ln();Lt(A,new Zi(A))}Pe.STAT_EVENT="statevent";function Mt(g,A){pe.call(this,Pe.STAT_EVENT,g),this.stat=A}x(Mt,pe);function At(g){const A=ln();Lt(A,new Mt(A,g))}Pe.Ma="timingevent";function fi(g,A){pe.call(this,Pe.Ma,g),this.size=A}x(fi,pe);function jt(g,A){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){g()},A)}function Qn(){this.g=!0}Qn.prototype.xa=function(){this.g=!1};function er(g,A,C,L,W,ie){g.info(function(){if(g.g)if(ie)for(var ge="",Et=ie.split("&"),gn=0;gn<Et.length;gn++){var Qe=Et[gn].split("=");if(1<Qe.length){var Mn=Qe[0];Qe=Qe[1];var kn=Mn.split("_");ge=2<=kn.length&&kn[1]=="type"?ge+(Mn+"="+Qe+"&"):ge+(Mn+"=redacted&")}}else ge=null;else ge=ie;return"XMLHTTP REQ ("+L+") [attempt "+W+"]: "+A+`
`+C+`
`+ge})}function Fn(g,A,C,L,W,ie,ge){g.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+W+"]: "+A+`
`+C+`
`+ie+" "+ge})}function di(g,A,C,L){g.info(function(){return"XMLHTTP TEXT ("+A+"): "+Oi(g,C)+(L?" "+L:"")})}function as(g,A){g.info(function(){return"TIMEOUT: "+A})}Qn.prototype.info=function(){};function Oi(g,A){if(!g.g)return A;if(!A)return null;try{var C=JSON.parse(A);if(C){for(g=0;g<C.length;g++)if(Array.isArray(C[g])){var L=C[g];if(!(2>L.length)){var W=L[1];if(Array.isArray(W)&&!(1>W.length)){var ie=W[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(var ge=1;ge<W.length;ge++)W[ge]=""}}}}return ue(C)}catch{return A}}var Ot={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},cn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ui;function tr(){}x(tr,de),tr.prototype.g=function(){return new XMLHttpRequest},tr.prototype.i=function(){return{}},Ui=new tr;function Fi(g,A,C,L){this.j=g,this.i=A,this.l=C,this.R=L||1,this.U=new Nn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new sa}function sa(){this.i=null,this.g="",this.h=!1}var wr={},nr={};function ir(g,A,C){g.L=1,g.v=aa(en(A)),g.m=C,g.P=!0,Ai(g,null)}function Ai(g,A){g.F=Date.now(),hi(g),g.A=en(g.v);var C=g.A,L=g.R;Array.isArray(L)||(L=[String(L)]),us(C.i,"t",L),g.C=0,C=g.j.J,g.h=new sa,g.g=Cd(g.j,C?A:null,!g.m),0<g.O&&(g.M=new ra(T(g.Y,g,g.g),g.O)),A=g.U,C=g.g,L=g.ca;var W="readystatechange";Array.isArray(W)||(W&&(Pn[0]=W.toString()),W=Pn);for(var ie=0;ie<W.length;ie++){var ge=Wn(C,W[ie],L||A.handleEvent,!1,A.h||A);if(!ge)break;A.g[ge.key]=ge}A=g.H?I(g.H):{},g.m?(g.u||(g.u="POST"),A["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,A)):(g.u="GET",g.g.ea(g.A,g.u,null,A)),un(),er(g.i,g.u,g.A,g.l,g.R,g.m)}Fi.prototype.ca=function(g){g=g.target;const A=this.M;A&&gi(g)==3?A.j():this.Y(g)},Fi.prototype.Y=function(g){try{if(g==this.g)e:{const kn=gi(this.g);var A=this.g.Ba();const to=this.g.Z();if(!(3>kn)&&(kn!=3||this.g&&(this.h.h||this.g.oa()||ca(this.g)))){this.J||kn!=4||A==7||(A==8||0>=to?un(3):un(2)),Ar(this);var C=this.g.Z();this.X=C;t:if(rr(this)){var L=ca(this.g);g="";var W=L.length,ie=gi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pi(this),br(this);var ge="";break t}this.h.i=new c.TextDecoder}for(A=0;A<W;A++)this.h.h=!0,g+=this.h.i.decode(L[A],{stream:!(ie&&A==W-1)});L.length=0,this.h.g+=g,this.C=0,ge=this.h.g}else ge=this.g.oa();if(this.o=C==200,Fn(this.i,this.u,this.A,this.l,this.R,kn,C),this.o){if(this.T&&!this.K){t:{if(this.g){var Et,gn=this.g;if((Et=gn.g?gn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(Et)){var Qe=Et;break t}}Qe=null}if(C=Qe)di(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zr(this,C);else{this.o=!1,this.s=3,At(12),pi(this),br(this);break e}}if(this.P){C=!0;let Ci;for(;!this.J&&this.C<ge.length;)if(Ci=qr(this,ge),Ci==nr){kn==4&&(this.s=4,At(14),C=!1),di(this.i,this.l,null,"[Incomplete Response]");break}else if(Ci==wr){this.s=4,At(15),di(this.i,this.l,ge,"[Invalid Chunk]"),C=!1;break}else di(this.i,this.l,Ci,null),zr(this,Ci);if(rr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kn!=4||ge.length!=0||this.h.h||(this.s=1,At(16),C=!1),this.o=this.o&&C,!C)di(this.i,this.l,ge,"[Invalid Chunked Response]"),pi(this),br(this);else if(0<ge.length&&!this.W){this.W=!0;var Mn=this.j;Mn.g==this&&Mn.ba&&!Mn.M&&(Mn.j.info("Great, no buffering proxy detected. Bytes received: "+ge.length),Wu(Mn),Mn.M=!0,At(11))}}else di(this.i,this.l,ge,null),zr(this,ge);kn==4&&pi(this),this.o&&!this.J&&(kn==4?wd(this.j,this):(this.o=!1,hi(this)))}else yd(this.g),C==400&&0<ge.indexOf("Unknown SID")?(this.s=3,At(12)):(this.s=0,At(13)),pi(this),br(this)}}}catch{}finally{}};function rr(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function qr(g,A){var C=g.C,L=A.indexOf(`
`,C);return L==-1?nr:(C=Number(A.substring(C,L)),isNaN(C)?wr:(L+=1,L+C>A.length?nr:(A=A.slice(L,L+C),g.C=L+C,A)))}Fi.prototype.cancel=function(){this.J=!0,pi(this)};function hi(g){g.S=Date.now()+g.I,$t(g,g.I)}function $t(g,A){if(g.B!=null)throw Error("WatchDog timer not null");g.B=jt(T(g.ba,g),A)}function Ar(g){g.B&&(c.clearTimeout(g.B),g.B=null)}Fi.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(as(this.i,this.A),this.L!=2&&(un(),At(17)),pi(this),this.s=2,br(this)):$t(this,this.S-g)};function br(g){g.j.G==0||g.J||wd(g.j,g)}function pi(g){Ar(g);var A=g.M;A&&typeof A.ma=="function"&&A.ma(),g.M=null,mn(g.U),g.g&&(A=g.g,g.g=null,A.abort(),A.ma())}function zr(g,A){try{var C=g.j;if(C.G!=0&&(C.g==g||Gs(C.h,g))){if(!g.K&&Gs(C.h,g)&&C.G==3){try{var L=C.Da.g.parse(A)}catch{L=null}if(Array.isArray(L)&&L.length==3){var W=L;if(W[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<g.F)Zs(C),Qs(C);else break e;Ju(C),At(18)}}else C.za=W[1],0<C.za-C.T&&37500>W[2]&&C.F&&C.v==0&&!C.C&&(C.C=jt(T(C.Za,C),6e3));if(1>=fd(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else fs(C,11)}else if((g.K||C.g==g)&&Zs(C),!k(A))for(W=C.Da.g.parse(A),A=0;A<W.length;A++){let Qe=W[A];if(C.T=Qe[0],Qe=Qe[1],C.G==2)if(Qe[0]=="c"){C.K=Qe[1],C.ia=Qe[2];const Mn=Qe[3];Mn!=null&&(C.la=Mn,C.j.info("VER="+C.la));const kn=Qe[4];kn!=null&&(C.Aa=kn,C.j.info("SVER="+C.Aa));const to=Qe[5];to!=null&&typeof to=="number"&&0<to&&(L=1.5*to,C.L=L,C.j.info("backChannelRequestTimeoutMs_="+L)),L=C;const Ci=g.g;if(Ci){const ha=Ci.g?Ci.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ha){var ie=L.h;ie.g||ha.indexOf("spdy")==-1&&ha.indexOf("quic")==-1&&ha.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(js(ie,ie.h),ie.h=null))}if(L.D){const ds=Ci.g?Ci.g.getResponseHeader("X-HTTP-Session-Id"):null;ds&&(L.ya=ds,dt(L.I,L.D,ds))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-g.F,C.j.info("Handshake RTT: "+C.R+"ms")),L=C;var ge=g;if(L.qa=bd(L,L.J?L.ia:null,L.W),ge.K){sr(L.h,ge);var Et=ge,gn=L.L;gn&&(Et.I=gn),Et.B&&(Ar(Et),hi(Et)),L.g=ge}else Ed(L);0<C.i.length&&cl(C)}else Qe[0]!="stop"&&Qe[0]!="close"||fs(C,7);else C.G==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?fs(C,7):Ku(C):Qe[0]!="noop"&&C.l&&C.l.ta(Qe),C.v=0)}}un(4)}catch{}}var fg=class{constructor(g,A){this.g=g,this.map=A}};function Bu(g){this.l=g||10,c.PerformanceNavigationTiming?(g=c.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qu(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function fd(g){return g.h?1:g.g?g.g.size:0}function Gs(g,A){return g.h?g.h==A:g.g?g.g.has(A):!1}function js(g,A){g.g?g.g.add(A):g.h=A}function sr(g,A){g.h&&g.h==A?g.h=null:g.g&&g.g.has(A)&&g.g.delete(A)}Bu.prototype.cancel=function(){if(this.i=mi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function mi(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let A=g.i;for(const C of g.g.values())A=A.concat(C.D);return A}return N(g.i)}function dd(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(f(g)){for(var A=[],C=g.length,L=0;L<C;L++)A.push(g[L]);return A}A=[],C=0;for(L in g)A[C++]=g[L];return A}function dg(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(f(g)||typeof g=="string"){var A=[];g=g.length;for(var C=0;C<g;C++)A.push(C);return A}A=[],C=0;for(const L in g)A[C++]=L;return A}}}function il(g,A){if(g.forEach&&typeof g.forEach=="function")g.forEach(A,void 0);else if(f(g)||typeof g=="string")Array.prototype.forEach.call(g,A,void 0);else for(var C=dg(g),L=dd(g),W=L.length,ie=0;ie<W;ie++)A.call(void 0,L[ie],C&&C[ie],g)}var zu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rl(g,A){if(g){g=g.split("&");for(var C=0;C<g.length;C++){var L=g[C].indexOf("="),W=null;if(0<=L){var ie=g[C].substring(0,L);W=g[C].substring(L+1)}else ie=g[C];A(ie,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function ls(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof ls){this.h=g.h,$s(this,g.j),this.o=g.o,this.g=g.g,oa(this,g.s),this.l=g.l;var A=g.i,C=new Hr;C.i=A.i,A.g&&(C.g=new Map(A.g),C.h=A.h),sl(this,C),this.m=g.m}else g&&(A=String(g).match(zu))?(this.h=!1,$s(this,A[1]||"",!0),this.o=Ks(A[2]||""),this.g=Ks(A[3]||"",!0),oa(this,A[4]),this.l=Ks(A[5]||"",!0),sl(this,A[6]||"",!0),this.m=Ks(A[7]||"")):(this.h=!1,this.i=new Hr(null,this.h))}ls.prototype.toString=function(){var g=[],A=this.j;A&&g.push(or(A,Hu,!0),":");var C=this.g;return(C||A=="file")&&(g.push("//"),(A=this.o)&&g.push(or(A,Hu,!0),"@"),g.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&g.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&g.push("/"),g.push(or(C,C.charAt(0)=="/"?Gu:hd,!0))),(C=this.i.toString())&&g.push("?",C),(C=this.m)&&g.push("#",or(C,mg)),g.join("")};function en(g){return new ls(g)}function $s(g,A,C){g.j=C?Ks(A,!0):A,g.j&&(g.j=g.j.replace(/:$/,""))}function oa(g,A){if(A){if(A=Number(A),isNaN(A)||0>A)throw Error("Bad port number "+A);g.s=A}else g.s=null}function sl(g,A,C){A instanceof Hr?(g.i=A,pd(g.i,g.h)):(C||(A=or(A,pg)),g.i=new Hr(A,g.h))}function dt(g,A,C){g.i.set(A,C)}function aa(g){return dt(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function Ks(g,A){return g?A?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function or(g,A,C){return typeof g=="string"?(g=encodeURI(g).replace(A,hg),C&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function hg(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Hu=/[#\/\?@]/g,hd=/[#\?:]/g,Gu=/[#\?]/g,pg=/[#\?@]/g,mg=/#/g;function Hr(g,A){this.h=this.g=null,this.i=g||null,this.j=!!A}function Dn(g){g.g||(g.g=new Map,g.h=0,g.i&&rl(g.i,function(A,C){g.add(decodeURIComponent(A.replace(/\+/g," ")),C)}))}t=Hr.prototype,t.add=function(g,A){Dn(this),this.i=null,g=Bi(this,g);var C=this.g.get(g);return C||this.g.set(g,C=[]),C.push(A),this.h+=1,this};function ol(g,A){Dn(g),A=Bi(g,A),g.g.has(A)&&(g.i=null,g.h-=g.g.get(A).length,g.g.delete(A))}function al(g,A){return Dn(g),A=Bi(g,A),g.g.has(A)}t.forEach=function(g,A){Dn(this),this.g.forEach(function(C,L){C.forEach(function(W){g.call(A,W,L,this)},this)},this)},t.na=function(){Dn(this);const g=Array.from(this.g.values()),A=Array.from(this.g.keys()),C=[];for(let L=0;L<A.length;L++){const W=g[L];for(let ie=0;ie<W.length;ie++)C.push(A[L])}return C},t.V=function(g){Dn(this);let A=[];if(typeof g=="string")al(this,g)&&(A=A.concat(this.g.get(Bi(this,g))));else{g=Array.from(this.g.values());for(let C=0;C<g.length;C++)A=A.concat(g[C])}return A},t.set=function(g,A){return Dn(this),this.i=null,g=Bi(this,g),al(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[A]),this.h+=1,this},t.get=function(g,A){return g?(g=this.V(g),0<g.length?String(g[0]):A):A};function us(g,A,C){ol(g,A),0<C.length&&(g.i=null,g.g.set(Bi(g,A),N(C)),g.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],A=Array.from(this.g.keys());for(var C=0;C<A.length;C++){var L=A[C];const ie=encodeURIComponent(String(L)),ge=this.V(L);for(L=0;L<ge.length;L++){var W=ie;ge[L]!==""&&(W+="="+encodeURIComponent(String(ge[L]))),g.push(W)}}return this.i=g.join("&")};function Bi(g,A){return A=String(A),g.j&&(A=A.toLowerCase()),A}function pd(g,A){A&&!g.j&&(Dn(g),g.i=null,g.g.forEach(function(C,L){var W=L.toLowerCase();L!=W&&(ol(this,L),us(this,W,C))},g)),g.j=A}function ju(g,A){const C=new Qn;if(c.Image){const L=new Image;L.onload=w(bi,C,"TestLoadImage: loaded",!0,A,L),L.onerror=w(bi,C,"TestLoadImage: error",!1,A,L),L.onabort=w(bi,C,"TestLoadImage: abort",!1,A,L),L.ontimeout=w(bi,C,"TestLoadImage: timeout",!1,A,L),c.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=g}else A(!1)}function md(g,A){const C=new Qn,L=new AbortController,W=setTimeout(()=>{L.abort(),bi(C,"TestPingServer: timeout",!1,A)},1e4);fetch(g,{signal:L.signal}).then(ie=>{clearTimeout(W),ie.ok?bi(C,"TestPingServer: ok",!0,A):bi(C,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(W),bi(C,"TestPingServer: error",!1,A)})}function bi(g,A,C,L,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),L(C)}catch{}}function Cr(){this.g=new Se}function $u(g,A,C){const L=C||"";try{il(g,function(W,ie){let ge=W;d(W)&&(ge=ue(W)),A.push(L+ie+"="+encodeURIComponent(ge))})}catch(W){throw A.push(L+"type="+encodeURIComponent("_badmap")),W}}function Gr(g){this.l=g.Ub||null,this.j=g.eb||!1}x(Gr,de),Gr.prototype.g=function(){return new qi(this.l,this.j)},Gr.prototype.i=(function(g){return function(){return g}})({});function qi(g,A){Ke.call(this),this.D=g,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(qi,Ke),t=qi.prototype,t.open=function(g,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=A,this.readyState=1,Ys(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const A={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(A.body=g),(this.D||c).fetch(new Request(this.A,A)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,jr(this)),this.readyState=0},t.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Ys(this)),this.g&&(this.readyState=3,Ys(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ll(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function ll(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}t.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var A=g.value?g.value:new Uint8Array(0);(A=this.v.decode(A,{stream:!g.done}))&&(this.response=this.responseText+=A)}g.done?jr(this):Ys(this),this.readyState==3&&ll(this)}},t.Ra=function(g){this.g&&(this.response=this.responseText=g,jr(this))},t.Qa=function(g){this.g&&(this.response=g,jr(this))},t.ga=function(){this.g&&jr(this)};function jr(g){g.readyState=4,g.l=null,g.j=null,g.v=null,Ys(g)}t.setRequestHeader=function(g,A){this.u.append(g,A)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],A=this.h.entries();for(var C=A.next();!C.done;)C=C.value,g.push(C[0]+": "+C[1]),C=A.next();return g.join(`\r
`)};function Ys(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(qi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function la(g){let A="";return H(g,function(C,L){A+=L,A+=":",A+=C,A+=`\r
`}),A}function Js(g,A,C){e:{for(L in C){var L=!1;break e}L=!0}L||(C=la(C),typeof g=="string"?C!=null&&encodeURIComponent(String(C)):dt(g,A,C))}function Ut(g){Ke.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Ut,Ke);var Zn=/^https?$/i,cs=["POST","PUT"];t=Ut.prototype,t.Ha=function(g){this.J=g},t.ea=function(g,A,C,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);A=A?A.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ui.g(),this.v=this.o?Ae(this.o):Ae(Ui),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(A,String(g),!0),this.B=!1}catch(ie){ua(this,ie);return}if(g=C||"",C=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var W in L)C.set(W,L[W]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const ie of L.keys())C.set(ie,L.get(ie));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(C.keys()).find(ie=>ie.toLowerCase()=="content-type"),W=c.FormData&&g instanceof c.FormData,!(0<=Array.prototype.indexOf.call(cs,A,void 0))||L||W||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,ge]of C)this.g.setRequestHeader(ie,ge);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ul(this),this.u=!0,this.g.send(g),this.u=!1}catch(ie){ua(this,ie)}};function ua(g,A){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=A,g.m=5,Ws(g),Xs(g)}function Ws(g){g.A||(g.A=!0,Lt(g,"complete"),Lt(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,Lt(this,"complete"),Lt(this,"abort"),Xs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xs(this,!0)),Ut.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?gd(this):this.bb())},t.bb=function(){gd(this)};function gd(g){if(g.h&&typeof l<"u"&&(!g.v[1]||gi(g)!=4||g.Z()!=2)){if(g.u&&gi(g)==4)Zt(g.Ea,0,g);else if(Lt(g,"readystatechange"),gi(g)==4){g.h=!1;try{const ge=g.Z();e:switch(ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var C;if(!(C=A)){var L;if(L=ge===0){var W=String(g.D).match(zu)[1]||null;!W&&c.self&&c.self.location&&(W=c.self.location.protocol.slice(0,-1)),L=!Zn.test(W?W.toLowerCase():"")}C=L}if(C)Lt(g,"complete"),Lt(g,"success");else{g.m=6;try{var ie=2<gi(g)?g.g.statusText:""}catch{ie=""}g.l=ie+" ["+g.Z()+"]",Ws(g)}}finally{Xs(g)}}}}function Xs(g,A){if(g.g){ul(g);const C=g.g,L=g.v[0]?()=>{}:null;g.g=null,g.v=null,A||Lt(g,"ready");try{C.onreadystatechange=L}catch{}}}function ul(g){g.I&&(c.clearTimeout(g.I),g.I=null)}t.isActive=function(){return!!this.g};function gi(g){return g.g?g.g.readyState:0}t.Z=function(){try{return 2<gi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(g){if(this.g){var A=this.g.responseText;return g&&A.indexOf(g)==0&&(A=A.substring(g.length)),Ee(A)}};function ca(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function yd(g){const A={};g=(g.g&&2<=gi(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<g.length;L++){if(k(g[L]))continue;var C=U(g[L]);const W=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const ie=A[W]||[];A[W]=ie,ie.push(C)}R(A,function(L){return L.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fa(g,A,C){return C&&C.internalChannelParams&&C.internalChannelParams[g]||A}function vd(g){this.Aa=0,this.i=[],this.j=new Qn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fa("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fa("baseRetryDelayMs",5e3,g),this.cb=fa("retryDelaySeedMs",1e4,g),this.Wa=fa("forwardChannelMaxRetries",2,g),this.wa=fa("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new Bu(g&&g.concurrentRequestLimit),this.Da=new Cr,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=vd.prototype,t.la=8,t.G=1,t.connect=function(g,A,C,L){At(0),this.W=g,this.H=A||{},C&&L!==void 0&&(this.H.OSID=C,this.H.OAID=L),this.F=this.X,this.I=bd(this,null,this.W),cl(this)};function Ku(g){if(_d(g),g.G==3){var A=g.U++,C=en(g.I);if(dt(C,"SID",g.K),dt(C,"RID",A),dt(C,"TYPE","terminate"),da(g,C),A=new Fi(g,g.j,A),A.L=2,A.v=aa(en(C)),C=!1,c.navigator&&c.navigator.sendBeacon)try{C=c.navigator.sendBeacon(A.v.toString(),"")}catch{}!C&&c.Image&&(new Image().src=A.v,C=!0),C||(A.g=Cd(A.j,null),A.g.ea(A.v)),A.F=Date.now(),hi(A)}Xu(g)}function Qs(g){g.g&&(Wu(g),g.g.cancel(),g.g=null)}function _d(g){Qs(g),g.u&&(c.clearTimeout(g.u),g.u=null),Zs(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&c.clearTimeout(g.s),g.s=null)}function cl(g){if(!qu(g.h)&&!g.s){g.s=!0;var A=g.Ga;oe||be(),me||(oe(),me=!0),xe.add(A,g),g.B=0}}function gg(g,A){return fd(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=A.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=jt(T(g.Ga,g,A),Ad(g,g.B)),g.B++,!0)}t.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const W=new Fi(this,this.j,g);let ie=this.o;if(this.S&&(ie?(ie=I(ie),V(ie,this.S)):ie=this.S),this.m!==null||this.O||(W.H=ie,ie=null),this.P)e:{for(var A=0,C=0;C<this.i.length;C++){t:{var L=this.i[C];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(A+=L,4096<A){A=C;break e}if(A===4096||C===this.i.length-1){A=C+1;break e}}A=1e3}else A=1e3;A=Yu(this,W,A),C=en(this.I),dt(C,"RID",g),dt(C,"CVER",22),this.D&&dt(C,"X-HTTP-Session-Id",this.D),da(this,C),ie&&(this.O?A="headers="+encodeURIComponent(String(la(ie)))+"&"+A:this.m&&Js(C,this.m,ie)),js(this.h,W),this.Ua&&dt(C,"TYPE","init"),this.P?(dt(C,"$req",A),dt(C,"SID","null"),W.T=!0,ir(W,C,null)):ir(W,C,A),this.G=2}}else this.G==3&&(g?Td(this,g):this.i.length==0||qu(this.h)||Td(this))};function Td(g,A){var C;A?C=A.l:C=g.U++;const L=en(g.I);dt(L,"SID",g.K),dt(L,"RID",C),dt(L,"AID",g.T),da(g,L),g.m&&g.o&&Js(L,g.m,g.o),C=new Fi(g,g.j,C,g.B+1),g.m===null&&(C.H=g.o),A&&(g.i=A.D.concat(g.i)),A=Yu(g,C,1e3),C.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),js(g.h,C),ir(C,L,A)}function da(g,A){g.H&&H(g.H,function(C,L){dt(A,L,C)}),g.l&&il({},function(C,L){dt(A,L,C)})}function Yu(g,A,C){C=Math.min(g.i.length,C);var L=g.l?T(g.l.Na,g.l,g):null;e:{var W=g.i;let ie=-1;for(;;){const ge=["count="+C];ie==-1?0<C?(ie=W[0].g,ge.push("ofs="+ie)):ie=0:ge.push("ofs="+ie);let Et=!0;for(let gn=0;gn<C;gn++){let Qe=W[gn].g;const Mn=W[gn].map;if(Qe-=ie,0>Qe)ie=Math.max(0,W[gn].g-100),Et=!1;else try{$u(Mn,ge,"req"+Qe+"_")}catch{L&&L(Mn)}}if(Et){L=ge.join("&");break e}}}return g=g.i.splice(0,C),A.D=g,L}function Ed(g){if(!g.g&&!g.u){g.Y=1;var A=g.Fa;oe||be(),me||(oe(),me=!0),xe.add(A,g),g.v=0}}function Ju(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=jt(T(g.Fa,g),Ad(g,g.v)),g.v++,!0)}t.Fa=function(){if(this.u=null,Sd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=jt(T(this.ab,this),g)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,At(10),Qs(this),Sd(this))};function Wu(g){g.A!=null&&(c.clearTimeout(g.A),g.A=null)}function Sd(g){g.g=new Fi(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var A=en(g.qa);dt(A,"RID","rpc"),dt(A,"SID",g.K),dt(A,"AID",g.T),dt(A,"CI",g.F?"0":"1"),!g.F&&g.ja&&dt(A,"TO",g.ja),dt(A,"TYPE","xmlhttp"),da(g,A),g.m&&g.o&&Js(A,g.m,g.o),g.L&&(g.g.I=g.L);var C=g.g;g=g.ia,C.L=1,C.v=aa(en(A)),C.m=null,C.P=!0,Ai(C,g)}t.Za=function(){this.C!=null&&(this.C=null,Qs(this),Ju(this),At(19))};function Zs(g){g.C!=null&&(c.clearTimeout(g.C),g.C=null)}function wd(g,A){var C=null;if(g.g==A){Zs(g),Wu(g),g.g=null;var L=2}else if(Gs(g.h,A))C=A.D,sr(g.h,A),L=1;else return;if(g.G!=0){if(A.o)if(L==1){C=A.m?A.m.length:0,A=Date.now()-A.F;var W=g.B;L=ln(),Lt(L,new fi(L,C)),cl(g)}else Ed(g);else if(W=A.s,W==3||W==0&&0<A.X||!(L==1&&gg(g,A)||L==2&&Ju(g)))switch(C&&0<C.length&&(A=g.h,A.i=A.i.concat(C)),W){case 1:fs(g,5);break;case 4:fs(g,10);break;case 3:fs(g,6);break;default:fs(g,2)}}}function Ad(g,A){let C=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(C*=2),C*A}function fs(g,A){if(g.j.info("Error code "+A),A==2){var C=T(g.fb,g),L=g.Xa;const W=!L;L=new ls(L||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||$s(L,"https"),aa(L),W?ju(L.toString(),C):md(L.toString(),C)}else At(2);g.G=0,g.l&&g.l.sa(A),Xu(g),_d(g)}t.fb=function(g){g?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function Xu(g){if(g.G=0,g.ka=[],g.l){const A=mi(g.h);(A.length!=0||g.i.length!=0)&&(P(g.ka,A),P(g.ka,g.i),g.h.i.length=0,N(g.i),g.i.length=0),g.l.ra()}}function bd(g,A,C){var L=C instanceof ls?en(C):new ls(C);if(L.g!="")A&&(L.g=A+"."+L.g),oa(L,L.s);else{var W=c.location;L=W.protocol,A=A?A+"."+W.hostname:W.hostname,W=+W.port;var ie=new ls(null);L&&$s(ie,L),A&&(ie.g=A),W&&oa(ie,W),C&&(ie.l=C),L=ie}return C=g.D,A=g.ya,C&&A&&dt(L,C,A),dt(L,"VER",g.la),da(g,L),L}function Cd(g,A,C){if(A&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return A=g.Ca&&!g.pa?new Ut(new Gr({eb:C})):new Ut(g.pa),A.Ha(g.J),A}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function xd(){}t=xd.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function fl(){}fl.prototype.g=function(g,A){return new yi(g,A)};function yi(g,A){Ke.call(this),this.g=new vd(A),this.l=g,this.h=A&&A.messageUrlParams||null,g=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(g?g["X-WebChannel-Content-Type"]=A.messageContentType:g={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.va&&(g?g["X-WebChannel-Client-Profile"]=A.va:g={"X-WebChannel-Client-Profile":A.va}),this.g.S=g,(g=A&&A.Sb)&&!k(g)&&(this.g.m=g),this.v=A&&A.supportsCrossDomainXhr||!1,this.u=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!k(A)&&(this.g.D=A,g=this.h,g!==null&&A in g&&(g=this.h,A in g&&delete g[A])),this.j=new eo(this)}x(yi,Ke),yi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yi.prototype.close=function(){Ku(this.g)},yi.prototype.o=function(g){var A=this.g;if(typeof g=="string"){var C={};C.__data__=g,g=C}else this.u&&(C={},C.__data__=ue(g),g=C);A.i.push(new fg(A.Ya++,g)),A.G==3&&cl(A)},yi.prototype.N=function(){this.g.l=null,delete this.j,Ku(this.g),delete this.g,yi.aa.N.call(this)};function Id(g){Xe.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var A=g.__sm__;if(A){e:{for(const C in A){g=C;break e}g=void 0}(this.i=g)&&(g=this.i,A=A!==null&&g in A?A[g]:void 0),this.data=A}else this.data=g}x(Id,Xe);function Rd(){et.call(this),this.status=1}x(Rd,et);function eo(g){this.g=g}x(eo,xd),eo.prototype.ua=function(){Lt(this.g,"a")},eo.prototype.ta=function(g){Lt(this.g,new Id(g))},eo.prototype.sa=function(g){Lt(this.g,new Rd)},eo.prototype.ra=function(){Lt(this.g,"b")},fl.prototype.createWebChannel=fl.prototype.g,yi.prototype.send=yi.prototype.o,yi.prototype.open=yi.prototype.m,yi.prototype.close=yi.prototype.close,fN=function(){return new fl},cN=function(){return ln()},uN=Pe,o0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ot.NO_ERROR=0,Ot.TIMEOUT=8,Ot.HTTP_ERROR=6,dp=Ot,cn.COMPLETE="complete",lN=cn,Ne.EventType=ke,ke.OPEN="a",ke.CLOSE="b",ke.ERROR="c",ke.MESSAGE="d",Ke.prototype.listen=Ke.prototype.K,jc=Ne,Ut.prototype.listenOnce=Ut.prototype.L,Ut.prototype.getLastError=Ut.prototype.Ka,Ut.prototype.getLastErrorCode=Ut.prototype.Ba,Ut.prototype.getStatus=Ut.prototype.Z,Ut.prototype.getResponseJson=Ut.prototype.Oa,Ut.prototype.getResponseText=Ut.prototype.oa,Ut.prototype.send=Ut.prototype.ea,Ut.prototype.setWithCredentials=Ut.prototype.Ha,aN=Ut}).apply(typeof kh<"u"?kh:typeof self<"u"?self:typeof window<"u"?window:{});const xb="@firebase/firestore",Ib="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}si.UNAUTHENTICATED=new si(null),si.GOOGLE_CREDENTIALS=new si("google-credentials-uid"),si.FIRST_PARTY=new si("first-party-uid"),si.MOCK_USER=new si("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Iu="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ya=new g_("@firebase/firestore");function jl(){return Ya.logLevel}function _e(t,...e){if(Ya.logLevel<=ot.DEBUG){const n=e.map(R_);Ya.debug(`Firestore (${Iu}): ${t}`,...n)}}function Os(t,...e){if(Ya.logLevel<=ot.ERROR){const n=e.map(R_);Ya.error(`Firestore (${Iu}): ${t}`,...n)}}function zo(t,...e){if(Ya.logLevel<=ot.WARN){const n=e.map(R_);Ya.warn(`Firestore (${Iu}): ${t}`,...n)}}function R_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,dN(t,i,n)}function dN(t,e,n){let i=`FIRESTORE (${Iu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Os(i),new Error(i)}function wt(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||dN(e,r,i)}function je(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends Fr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class j4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(si.UNAUTHENTICATED)))}shutdown(){}}class $4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class K4{constructor(e){this.t=e,this.currentUser=si.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){wt(this.o===void 0,42304);let i=this.i;const r=f=>this.i!==i?(i=this.i,n(f)):Promise.resolve();let o=new Ua;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ua,e.enqueueRetryable((()=>r(this.currentUser)))};const l=()=>{const f=o;e.enqueueRetryable((async()=>{await f.promise,await r(this.currentUser)}))},c=f=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((f=>c(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?c(f):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ua)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(wt(typeof i.accessToken=="string",31837,{l:i}),new hN(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return wt(e===null||typeof e=="string",2055,{h:e}),new si(e)}}class Y4{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=si.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class J4{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new Y4(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(si.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Rb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class W4{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ti(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){wt(this.o===void 0,3512);const i=o=>{o.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,_e("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>i(o)))};const r=o=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>r(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Rb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(wt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Rb(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=X4(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%62))}return i}}function Ze(t,e){return t<e?-1:t>e?1:0}function a0(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),r=e.codePointAt(n);if(i!==r){if(i<128&&r<128)return Ze(i,r);{const o=pN(),l=Q4(o.encode(Nb(t,n)),o.encode(Nb(e,n)));return l!==0?l:Ze(i,r)}}n+=i>65535?2:1}return Ze(t.length,e.length)}function Nb(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function Q4(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Ze(t[n],e[n]);return Ze(t.length,e.length)}function pu(t,e,n){return t.length===e.length&&t.every(((i,r)=>n(i,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb="__name__";class Xr{constructor(e,n,i){n===void 0?n=0:n>e.length&&Be(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Be(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Xr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Xr?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=Xr.compareSegments(e.get(r),n.get(r));if(o!==0)return o}return Ze(e.length,n.length)}static compareSegments(e,n){const i=Xr.isNumericId(e),r=Xr.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Xr.extractNumericId(e).compare(Xr.extractNumericId(n)):a0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Uo.fromString(e.substring(4,e.length-2))}}class kt extends Xr{construct(e,n,i){return new kt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new we(ce.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((r=>r.length>0)))}return new kt(n)}static emptyPath(){return new kt([])}}const Z4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kn extends Xr{construct(e,n,i){return new Kn(e,n,i)}static isValidIdentifier(e){return Z4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Pb}static keyField(){return new Kn([Pb])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new we(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;r<e.length;){const c=e[r];if(c==="\\"){if(r+1===e.length)throw new we(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[r+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new we(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,r+=2}else c==="`"?(l=!l,r++):c!=="."||l?(i+=c,r++):(o(),r++)}if(o(),l)throw new we(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kn(n)}static emptyPath(){return new Kn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.path=e}static fromPath(e){return new Me(kt.fromString(e))}static fromName(e){return new Me(kt.fromString(e).popFirst(5))}static empty(){return new Me(kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return kt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new kt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(t,e,n){if(!n)throw new we(ce.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function e3(t,e,n,i){if(e===!0&&i===!0)throw new we(ce.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Db(t){if(!Me.isDocumentKey(t))throw new we(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Mb(t){if(Me.isDocumentKey(t))throw new we(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function gN(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Nm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Be(12329,{type:typeof t})}function Fo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new we(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Nm(t);throw new we(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Xf(t,e){if(!gN(t))throw new we(ce.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const l=t[i];if(r&&typeof l!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&l!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new we(ce.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb=-62135596800,Vb=1e6;class Ht{static now(){return Ht.fromMillis(Date.now())}static fromDate(e){return Ht.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Vb);return new Ht(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new we(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new we(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<kb)throw new we(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Vb}_compareTo(e){return this.seconds===e.seconds?Ze(this.nanoseconds,e.nanoseconds):Ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Xf(e,Ht._jsonSchema))return new Ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-kb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ht._jsonSchemaVersion="firestore/timestamp/1.0",Ht._jsonSchema={type:wn("string",Ht._jsonSchemaVersion),seconds:wn("number"),nanoseconds:wn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{static fromTimestamp(e){return new ze(e)}static min(){return new ze(new Ht(0,0))}static max(){return new ze(new Ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf=-1;function t3(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=ze.fromTimestamp(i===1e9?new Ht(n+1,0):new Ht(n,i));return new Ho(r,Me.empty(),e)}function n3(t){return new Ho(t.readTime,t.key,Rf)}class Ho{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ho(ze.min(),Me.empty(),Rf)}static max(){return new Ho(ze.max(),Me.empty(),Rf)}}function i3(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Me.comparator(t.documentKey,e.documentKey),n!==0?n:Ze(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class s3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ru(t){if(t.code!==ce.FAILED_PRECONDITION||t.message!==r3)throw t;_e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new fe(((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof fe?n:fe.resolve(n)}catch(n){return fe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):fe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):fe.reject(n)}static resolve(e){return new fe(((n,i)=>{n(e)}))}static reject(e){return new fe(((n,i)=>{i(e)}))}static waitFor(e){return new fe(((n,i)=>{let r=0,o=0,l=!1;e.forEach((c=>{++r,c.next((()=>{++o,l&&o===r&&n()}),(f=>i(f)))})),l=!0,o===r&&n()}))}static or(e){let n=fe.resolve(!1);for(const i of e)n=n.next((r=>r?fe.resolve(r):i()));return n}static forEach(e,n){const i=[];return e.forEach(((r,o)=>{i.push(n.call(this,r,o))})),this.waitFor(i)}static mapArray(e,n){return new fe(((i,r)=>{const o=e.length,l=new Array(o);let c=0;for(let f=0;f<o;f++){const d=f;n(e[d]).next((p=>{l[d]=p,++c,c===o&&i(l)}),(p=>r(p)))}}))}static doWhile(e,n){return new fe(((i,r)=>{const o=()=>{e()===!0?n().next((()=>{o()}),r):i()};o()}))}}function o3(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Nu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this._e(i),this.ae=i=>n.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Pm.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_=-1;function Dm(t){return t==null}function Up(t){return t===0&&1/t==-1/0}function a3(t){return typeof t=="number"&&Number.isInteger(t)&&!Up(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN="";function l3(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Lb(e)),e=u3(t.get(n),e);return Lb(e)}function u3(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case yN:n+="";break;default:n+=o}}return n}function Lb(t){return t+yN+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ea(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function vN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,n){this.comparator=e,this.root=n||$n.EMPTY}insert(e,n){return new Xt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$n.BLACK,null,null))}remove(e){return new Xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$n.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vh(this.root,e,this.comparator,!0)}}class Vh{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $n{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??$n.RED,this.left=r??$n.EMPTY,this.right=o??$n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new $n(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return $n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return $n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Be(27949);return e+(this.isRed()?0:1)}}$n.EMPTY=null,$n.RED=!0,$n.BLACK=!1;$n.EMPTY=new class{constructor(){this.size=0}get key(){throw Be(57766)}get value(){throw Be(16141)}get color(){throw Be(16727)}get left(){throw Be(29726)}get right(){throw Be(36894)}copy(e,n,i,r,o){return this}insert(e,n,i){return new $n(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.comparator=e,this.data=new Xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ub(this.data.getIterator())}getIteratorFrom(e){return new Ub(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof xn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new xn(this.comparator);return n.data=e,n}}class Ub{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e){this.fields=e,e.sort(Kn.comparator)}static empty(){return new Ji([])}unionWith(e){let n=new xn(Kn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Ji(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return pu(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new _N("Invalid base64 string: "+o):o}})(e);return new Yn(n)}static fromUint8Array(e){const n=(function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o})(e);return new Yn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yn.EMPTY_BYTE_STRING=new Yn("");const c3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Go(t){if(wt(!!t,39018),typeof t=="string"){let e=0;const n=c3.exec(t);if(wt(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:pn(t.seconds),nanos:pn(t.nanos)}}function pn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function jo(t){return typeof t=="string"?Yn.fromBase64String(t):Yn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN="server_timestamp",EN="__type__",SN="__previous_value__",wN="__local_write_time__";function D_(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[EN])===null||n===void 0?void 0:n.stringValue)===TN}function Mm(t){const e=t.mapValue.fields[SN];return D_(e)?Mm(e):e}function Nf(t){const e=Go(t.mapValue.fields[wN].timestampValue);return new Ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e,n,i,r,o,l,c,f,d,p){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=f,this.useFetchStreams=d,this.isUsingEmulator=p}}const Fp="(default)";class Pf{constructor(e,n){this.projectId=e,this.database=n||Fp}static empty(){return new Pf("","")}get isDefaultDatabase(){return this.database===Fp}isEqual(e){return e instanceof Pf&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN="__type__",d3="__max__",Lh={mapValue:{}},bN="__vector__",Bp="value";function $o(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?D_(t)?4:p3(t)?9007199254740991:h3(t)?10:11:Be(28295,{value:t})}function ss(t,e){if(t===e)return!0;const n=$o(t);if(n!==$o(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Nf(t).isEqual(Nf(e));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=Go(r.timestampValue),c=Go(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(r,o){return jo(r.bytesValue).isEqual(jo(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(r,o){return pn(r.geoPointValue.latitude)===pn(o.geoPointValue.latitude)&&pn(r.geoPointValue.longitude)===pn(o.geoPointValue.longitude)})(t,e);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return pn(r.integerValue)===pn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=pn(r.doubleValue),c=pn(o.doubleValue);return l===c?Up(l)===Up(c):isNaN(l)&&isNaN(c)}return!1})(t,e);case 9:return pu(t.arrayValue.values||[],e.arrayValue.values||[],ss);case 10:case 11:return(function(r,o){const l=r.mapValue.fields||{},c=o.mapValue.fields||{};if(Ob(l)!==Ob(c))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(c[f]===void 0||!ss(l[f],c[f])))return!1;return!0})(t,e);default:return Be(52216,{left:t})}}function Df(t,e){return(t.values||[]).find((n=>ss(n,e)))!==void 0}function mu(t,e){if(t===e)return 0;const n=$o(t),i=$o(e);if(n!==i)return Ze(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ze(t.booleanValue,e.booleanValue);case 2:return(function(o,l){const c=pn(o.integerValue||o.doubleValue),f=pn(l.integerValue||l.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1})(t,e);case 3:return Fb(t.timestampValue,e.timestampValue);case 4:return Fb(Nf(t),Nf(e));case 5:return a0(t.stringValue,e.stringValue);case 6:return(function(o,l){const c=jo(o),f=jo(l);return c.compareTo(f)})(t.bytesValue,e.bytesValue);case 7:return(function(o,l){const c=o.split("/"),f=l.split("/");for(let d=0;d<c.length&&d<f.length;d++){const p=Ze(c[d],f[d]);if(p!==0)return p}return Ze(c.length,f.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,l){const c=Ze(pn(o.latitude),pn(l.latitude));return c!==0?c:Ze(pn(o.longitude),pn(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Bb(t.arrayValue,e.arrayValue);case 10:return(function(o,l){var c,f,d,p;const v=o.fields||{},T=l.fields||{},w=(c=v[Bp])===null||c===void 0?void 0:c.arrayValue,x=(f=T[Bp])===null||f===void 0?void 0:f.arrayValue,N=Ze(((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0,((p=x==null?void 0:x.values)===null||p===void 0?void 0:p.length)||0);return N!==0?N:Bb(w,x)})(t.mapValue,e.mapValue);case 11:return(function(o,l){if(o===Lh.mapValue&&l===Lh.mapValue)return 0;if(o===Lh.mapValue)return 1;if(l===Lh.mapValue)return-1;const c=o.fields||{},f=Object.keys(c),d=l.fields||{},p=Object.keys(d);f.sort(),p.sort();for(let v=0;v<f.length&&v<p.length;++v){const T=a0(f[v],p[v]);if(T!==0)return T;const w=mu(c[f[v]],d[p[v]]);if(w!==0)return w}return Ze(f.length,p.length)})(t.mapValue,e.mapValue);default:throw Be(23264,{le:n})}}function Fb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ze(t,e);const n=Go(t),i=Go(e),r=Ze(n.seconds,i.seconds);return r!==0?r:Ze(n.nanos,i.nanos)}function Bb(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=mu(n[r],i[r]);if(o)return o}return Ze(n.length,i.length)}function gu(t){return l0(t)}function l0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const i=Go(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return jo(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Me.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=l0(o);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const l of i)o?o=!1:r+=",",r+=`${l}:${l0(n.fields[l])}`;return r+"}"})(t.mapValue):Be(61005,{value:t})}function hp(t){switch($o(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mm(t);return e?16+hp(e):16;case 5:return 2*t.stringValue.length;case 6:return jo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,o)=>r+hp(o)),0)})(t.arrayValue);case 10:case 11:return(function(i){let r=0;return ea(i.fields,((o,l)=>{r+=o.length+hp(l)})),r})(t.mapValue);default:throw Be(13486,{value:t})}}function qb(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function u0(t){return!!t&&"integerValue"in t}function M_(t){return!!t&&"arrayValue"in t}function zb(t){return!!t&&"nullValue"in t}function Hb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function pp(t){return!!t&&"mapValue"in t}function h3(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[AN])===null||n===void 0?void 0:n.stringValue)===bN}function of(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ea(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=of(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=of(t.arrayValue.values[n]);return e}return Object.assign({},t)}function p3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===d3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e){this.value=e}static empty(){return new Mi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!pp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=of(n)}setAll(e){let n=Kn.emptyPath(),i={},r=[];e.forEach(((l,c)=>{if(!n.isImmediateParentOf(c)){const f=this.getFieldsMap(n);this.applyChanges(f,i,r),i={},r=[],n=c.popLast()}l?i[c.lastSegment()]=of(l):r.push(c.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());pp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ss(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];pp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){ea(n,((r,o)=>e[r]=o));for(const r of i)delete e[r]}clone(){return new Mi(of(this.value))}}function CN(t){const e=[];return ea(t.fields,((n,i)=>{const r=new Kn([n]);if(pp(i)){const o=CN(i.mapValue).fields;if(o.length===0)e.push(r);else for(const l of o)e.push(r.child(l))}else e.push(r)})),new Ji(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,n,i,r,o,l,c){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new oi(e,0,ze.min(),ze.min(),ze.min(),Mi.empty(),0)}static newFoundDocument(e,n,i,r){return new oi(e,1,n,ze.min(),i,r,0)}static newNoDocument(e,n){return new oi(e,2,n,ze.min(),ze.min(),Mi.empty(),0)}static newUnknownDocument(e,n){return new oi(e,3,n,ze.min(),ze.min(),Mi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof oi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new oi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,n){this.position=e,this.inclusive=n}}function Gb(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],l=t.position[r];if(o.field.isKeyField()?i=Me.comparator(Me.fromName(l.referenceValue),n.key):i=mu(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function jb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ss(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,n="asc"){this.field=e,this.dir=n}}function m3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{}class Sn extends xN{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new y3(e,n,i):n==="array-contains"?new T3(e,i):n==="in"?new E3(e,i):n==="not-in"?new S3(e,i):n==="array-contains-any"?new w3(e,i):new Sn(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new v3(e,i):new _3(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(mu(n,this.value)):n!==null&&$o(this.value)===$o(n)&&this.matchesComparison(mu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ur extends xN{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Ur(e,n)}matches(e){return IN(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function IN(t){return t.op==="and"}function RN(t){return g3(t)&&IN(t)}function g3(t){for(const e of t.filters)if(e instanceof Ur)return!1;return!0}function c0(t){if(t instanceof Sn)return t.field.canonicalString()+t.op.toString()+gu(t.value);if(RN(t))return t.filters.map((e=>c0(e))).join(",");{const e=t.filters.map((n=>c0(n))).join(",");return`${t.op}(${e})`}}function NN(t,e){return t instanceof Sn?(function(i,r){return r instanceof Sn&&i.op===r.op&&i.field.isEqual(r.field)&&ss(i.value,r.value)})(t,e):t instanceof Ur?(function(i,r){return r instanceof Ur&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((o,l,c)=>o&&NN(l,r.filters[c])),!0):!1})(t,e):void Be(19439)}function PN(t){return t instanceof Sn?(function(n){return`${n.field.canonicalString()} ${n.op} ${gu(n.value)}`})(t):t instanceof Ur?(function(n){return n.op.toString()+" {"+n.getFilters().map(PN).join(" ,")+"}"})(t):"Filter"}class y3 extends Sn{constructor(e,n,i){super(e,n,i),this.key=Me.fromName(i.referenceValue)}matches(e){const n=Me.comparator(e.key,this.key);return this.matchesComparison(n)}}class v3 extends Sn{constructor(e,n){super(e,"in",n),this.keys=DN("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class _3 extends Sn{constructor(e,n){super(e,"not-in",n),this.keys=DN("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function DN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((i=>Me.fromName(i.referenceValue)))}class T3 extends Sn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return M_(n)&&Df(n.arrayValue,this.value)}}class E3 extends Sn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Df(this.value.arrayValue,n)}}class S3 extends Sn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Df(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Df(this.value.arrayValue,n)}}class w3 extends Sn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!M_(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Df(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(e,n=null,i=[],r=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=l,this.endAt=c,this.Pe=null}}function $b(t,e=null,n=[],i=[],r=null,o=null,l=null){return new A3(t,e,n,i,r,o,l)}function k_(t){const e=je(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>c0(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),Dm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>gu(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>gu(i))).join(",")),e.Pe=n}return e.Pe}function V_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!m3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!NN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!jb(t.startAt,e.startAt)&&jb(t.endAt,e.endAt)}function f0(t){return Me.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,n=null,i=[],r=[],o=null,l="F",c=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=f,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function b3(t,e,n,i,r,o,l,c){return new Qf(t,e,n,i,r,o,l,c)}function L_(t){return new Qf(t)}function Kb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function MN(t){return t.collectionGroup!==null}function af(t){const e=je(t);if(e.Te===null){e.Te=[];const n=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new xn(Kn.comparator);return l.filters.forEach((f=>{f.getFlattenedFilters().forEach((d=>{d.isInequality()&&(c=c.add(d.field))}))})),c})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new zp(o,i))})),n.has(Kn.keyField().canonicalString())||e.Te.push(new zp(Kn.keyField(),i))}return e.Te}function Zr(t){const e=je(t);return e.Ie||(e.Ie=C3(e,af(t))),e.Ie}function C3(t,e){if(t.limitType==="F")return $b(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((r=>{const o=r.dir==="desc"?"asc":"desc";return new zp(r.field,o)}));const n=t.endAt?new qp(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new qp(t.startAt.position,t.startAt.inclusive):null;return $b(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function d0(t,e){const n=t.filters.concat([e]);return new Qf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function h0(t,e,n){return new Qf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function km(t,e){return V_(Zr(t),Zr(e))&&t.limitType===e.limitType}function kN(t){return`${k_(Zr(t))}|lt:${t.limitType}`}function $l(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((r=>PN(r))).join(", ")}]`),Dm(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((r=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(r))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((r=>gu(r))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((r=>gu(r))).join(",")),`Target(${i})`})(Zr(t))}; limitType=${t.limitType})`}function Vm(t,e){return e.isFoundDocument()&&(function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Me.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(t,e)&&(function(i,r){for(const o of af(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0})(t,e)&&(function(i,r){return!(i.startAt&&!(function(l,c,f){const d=Gb(l,c,f);return l.inclusive?d<=0:d<0})(i.startAt,af(i),r)||i.endAt&&!(function(l,c,f){const d=Gb(l,c,f);return l.inclusive?d>=0:d>0})(i.endAt,af(i),r))})(t,e)}function x3(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function VN(t){return(e,n)=>{let i=!1;for(const r of af(t)){const o=I3(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function I3(t,e,n){const i=t.field.isKeyField()?Me.comparator(e.key,n.key):(function(o,l,c){const f=l.data.field(o),d=c.data.field(o);return f!==null&&d!==null?mu(f,d):Be(42886)})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Be(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ea(this.inner,((n,i)=>{for(const[r,o]of i)e(r,o)}))}isEmpty(){return vN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3=new Xt(Me.comparator);function Us(){return R3}const LN=new Xt(Me.comparator);function $c(...t){let e=LN;for(const n of t)e=e.insert(n.key,n);return e}function ON(t){let e=LN;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function La(){return lf()}function UN(){return lf()}function lf(){return new Za((t=>t.toString()),((t,e)=>t.isEqual(e)))}const N3=new Xt(Me.comparator),P3=new xn(Me.comparator);function at(...t){let e=P3;for(const n of t)e=e.add(n);return e}const D3=new xn(Ze);function M3(){return D3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Up(e)?"-0":e}}function FN(t){return{integerValue:""+t}}function k3(t,e){return a3(e)?FN(e):O_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(){this._=void 0}}function V3(t,e,n){return t instanceof Hp?(function(r,o){const l={fields:{[EN]:{stringValue:TN},[wN]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&D_(o)&&(o=Mm(o)),o&&(l.fields[SN]=o),{mapValue:l}})(n,e):t instanceof Mf?qN(t,e):t instanceof kf?zN(t,e):(function(r,o){const l=BN(r,o),c=Yb(l)+Yb(r.Ee);return u0(l)&&u0(r.Ee)?FN(c):O_(r.serializer,c)})(t,e)}function L3(t,e,n){return t instanceof Mf?qN(t,e):t instanceof kf?zN(t,e):n}function BN(t,e){return t instanceof Gp?(function(i){return u0(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}class Hp extends Lm{}class Mf extends Lm{constructor(e){super(),this.elements=e}}function qN(t,e){const n=HN(e);for(const i of t.elements)n.some((r=>ss(r,i)))||n.push(i);return{arrayValue:{values:n}}}class kf extends Lm{constructor(e){super(),this.elements=e}}function zN(t,e){let n=HN(e);for(const i of t.elements)n=n.filter((r=>!ss(r,i)));return{arrayValue:{values:n}}}class Gp extends Lm{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Yb(t){return pn(t.integerValue||t.doubleValue)}function HN(t){return M_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function O3(t,e){return t.field.isEqual(e.field)&&(function(i,r){return i instanceof Mf&&r instanceof Mf||i instanceof kf&&r instanceof kf?pu(i.elements,r.elements,ss):i instanceof Gp&&r instanceof Gp?ss(i.Ee,r.Ee):i instanceof Hp&&r instanceof Hp})(t.transform,e.transform)}class U3{constructor(e,n){this.version=e,this.transformResults=n}}class Or{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Or}static exists(e){return new Or(void 0,e)}static updateTime(e){return new Or(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Om{}function GN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new U_(t.key,Or.none()):new Zf(t.key,t.data,Or.none());{const n=t.data,i=Mi.empty();let r=new xn(Kn.comparator);for(let o of e.fields)if(!r.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),r=r.add(o)}return new ta(t.key,i,new Ji(r.toArray()),Or.none())}}function F3(t,e,n){t instanceof Zf?(function(r,o,l){const c=r.value.clone(),f=Wb(r.fieldTransforms,o,l.transformResults);c.setAll(f),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(t,e,n):t instanceof ta?(function(r,o,l){if(!mp(r.precondition,o))return void o.convertToUnknownDocument(l.version);const c=Wb(r.fieldTransforms,o,l.transformResults),f=o.data;f.setAll(jN(r)),f.setAll(c),o.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(t,e,n):(function(r,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function uf(t,e,n,i){return t instanceof Zf?(function(o,l,c,f){if(!mp(o.precondition,l))return c;const d=o.value.clone(),p=Xb(o.fieldTransforms,f,l);return d.setAll(p),l.convertToFoundDocument(l.version,d).setHasLocalMutations(),null})(t,e,n,i):t instanceof ta?(function(o,l,c,f){if(!mp(o.precondition,l))return c;const d=Xb(o.fieldTransforms,f,l),p=l.data;return p.setAll(jN(o)),p.setAll(d),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((v=>v.field)))})(t,e,n,i):(function(o,l,c){return mp(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(t,e,n)}function B3(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=BN(i.transform,r||null);o!=null&&(n===null&&(n=Mi.empty()),n.set(i.field,o))}return n||null}function Jb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&pu(i,r,((o,l)=>O3(o,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Zf extends Om{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ta extends Om{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function jN(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function Wb(t,e,n){const i=new Map;wt(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let r=0;r<n.length;r++){const o=t[r],l=o.transform,c=e.data.field(o.field);i.set(o.field,L3(l,c,n[r]))}return i}function Xb(t,e,n){const i=new Map;for(const r of t){const o=r.transform,l=n.data.field(r.field);i.set(r.field,V3(o,l,e))}return i}class U_ extends Om{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class q3 extends Om{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&F3(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=uf(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=uf(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=UN();return this.mutations.forEach((r=>{const o=e.get(r.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=n.has(r.key)?null:c;const f=GN(l,c);f!==null&&i.set(r.key,f),l.isValidDocument()||l.convertToNoDocument(ze.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),at())}isEqual(e){return this.batchId===e.batchId&&pu(this.mutations,e.mutations,((n,i)=>Jb(n,i)))&&pu(this.baseMutations,e.baseMutations,((n,i)=>Jb(n,i)))}}class F_{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){wt(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let r=(function(){return N3})();const o=e.mutations;for(let l=0;l<o.length;l++)r=r.insert(o[l].key,i[l].version);return new F_(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var En,ct;function j3(t){switch(t){case ce.OK:return Be(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return Be(15467,{code:t})}}function $N(t){if(t===void 0)return Os("GRPC error has no .code"),ce.UNKNOWN;switch(t){case En.OK:return ce.OK;case En.CANCELLED:return ce.CANCELLED;case En.UNKNOWN:return ce.UNKNOWN;case En.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case En.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case En.INTERNAL:return ce.INTERNAL;case En.UNAVAILABLE:return ce.UNAVAILABLE;case En.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case En.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case En.NOT_FOUND:return ce.NOT_FOUND;case En.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case En.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case En.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case En.ABORTED:return ce.ABORTED;case En.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case En.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case En.DATA_LOSS:return ce.DATA_LOSS;default:return Be(39323,{code:t})}}(ct=En||(En={}))[ct.OK=0]="OK",ct[ct.CANCELLED=1]="CANCELLED",ct[ct.UNKNOWN=2]="UNKNOWN",ct[ct.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ct[ct.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ct[ct.NOT_FOUND=5]="NOT_FOUND",ct[ct.ALREADY_EXISTS=6]="ALREADY_EXISTS",ct[ct.PERMISSION_DENIED=7]="PERMISSION_DENIED",ct[ct.UNAUTHENTICATED=16]="UNAUTHENTICATED",ct[ct.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ct[ct.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ct[ct.ABORTED=10]="ABORTED",ct[ct.OUT_OF_RANGE=11]="OUT_OF_RANGE",ct[ct.UNIMPLEMENTED=12]="UNIMPLEMENTED",ct[ct.INTERNAL=13]="INTERNAL",ct[ct.UNAVAILABLE=14]="UNAVAILABLE",ct[ct.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $3=new Uo([4294967295,4294967295],0);function Qb(t){const e=pN().encode(t),n=new oN;return n.update(e),new Uint8Array(n.digest())}function Zb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Uo([n,i],0),new Uo([r,o],0)]}class B_{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Kc(`Invalid padding: ${n}`);if(i<0)throw new Kc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Kc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Kc(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Uo.fromNumber(this.fe)}pe(e,n,i){let r=e.add(n.multiply(Uo.fromNumber(i)));return r.compare($3)===1&&(r=new Uo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=Qb(e),[i,r]=Zb(n);for(let o=0;o<this.hashCount;o++){const l=this.pe(i,r,o);if(!this.ye(l))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new B_(o,r,n);return i.forEach((c=>l.insert(c))),l}insert(e){if(this.fe===0)return;const n=Qb(e),[i,r]=Zb(n);for(let o=0;o<this.hashCount;o++){const l=this.pe(i,r,o);this.we(l)}}we(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Kc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,ed.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Um(ze.min(),r,new Xt(Ze),Us(),at())}}class ed{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new ed(i,n,at(),at(),at())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,n,i,r){this.Se=e,this.removedTargetIds=n,this.key=i,this.be=r}}class KN{constructor(e,n){this.targetId=e,this.De=n}}class YN{constructor(e,n,i=Yn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class eC{constructor(){this.ve=0,this.Ce=tC(),this.Fe=Yn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=at(),n=at(),i=at();return this.Ce.forEach(((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Be(38017,{changeType:o})}})),new ed(this.Fe,this.Me,e,n,i)}ke(){this.xe=!1,this.Ce=tC()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,wt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class K3{constructor(e){this.We=e,this.Ge=new Map,this.ze=Us(),this.je=Oh(),this.Je=Oh(),this.He=new Xt(Ze)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,(n=>{const i=this.tt(n);switch(e.state){case 0:this.nt(n)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),i.Be(e.resumeToken));break;default:Be(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach(((i,r)=>{this.nt(r)&&n(r)}))}it(e){const n=e.targetId,i=e.De.count,r=this.st(n);if(r){const o=r.target;if(f0(o))if(i===0){const l=new Me(o.path);this.Xe(n,l,oi.newNoDocument(l,ze.min()))}else wt(i===1,20013,{expectedCount:i});else{const l=this.ot(n);if(l!==i){const c=this._t(e),f=c?this.ut(c,e,l):1;if(f!==0){this.rt(n);const d=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,d)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let l,c;try{l=jo(i).toUint8Array()}catch(f){if(f instanceof _N)return zo("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{c=new B_(l,r,o)}catch(f){return zo(f instanceof Kc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return c.fe===0?null:c}ut(e,n,i){return n.De.count===i-this.ht(e,n.targetId)?0:2}ht(e,n){const i=this.We.getRemoteKeysForTarget(n);let r=0;return i.forEach((o=>{const l=this.We.lt(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Xe(n,o,null),r++)})),r}Pt(e){const n=new Map;this.Ge.forEach(((o,l)=>{const c=this.st(l);if(c){if(o.current&&f0(c.target)){const f=new Me(c.target.path);this.Tt(f).has(l)||this.It(l,f)||this.Xe(l,f,oi.newNoDocument(f,e))}o.Ne&&(n.set(l,o.Le()),o.ke())}}));let i=at();this.Je.forEach(((o,l)=>{let c=!0;l.forEachWhile((f=>{const d=this.st(f);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(i=i.add(o))})),this.ze.forEach(((o,l)=>l.setReadTime(e)));const r=new Um(e,n,this.He,this.ze,i);return this.ze=Us(),this.je=Oh(),this.Je=Oh(),this.He=new Xt(Ze),r}Ze(e,n){if(!this.nt(e))return;const i=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,i),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,i){if(!this.nt(e))return;const r=this.tt(e);this.It(e,n)?r.qe(n,1):r.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),i&&(this.ze=this.ze.insert(n,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new eC,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new xn(Ze),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new xn(Ze),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||_e("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new eC),this.We.getRemoteKeysForTarget(e).forEach((n=>{this.Xe(e,n,null)}))}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Oh(){return new Xt(Me.comparator)}function tC(){return new Xt(Me.comparator)}const Y3={asc:"ASCENDING",desc:"DESCENDING"},J3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},W3={and:"AND",or:"OR"};class X3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function p0(t,e){return t.useProto3Json||Dm(e)?e:{value:e}}function jp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function JN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Q3(t,e){return jp(t,e.toTimestamp())}function es(t){return wt(!!t,49232),ze.fromTimestamp((function(n){const i=Go(n);return new Ht(i.seconds,i.nanos)})(t))}function q_(t,e){return m0(t,e).canonicalString()}function m0(t,e){const n=(function(r){return new kt(["projects",r.projectId,"databases",r.database])})(t).child("documents");return e===void 0?n:n.child(e)}function WN(t){const e=kt.fromString(t);return wt(tP(e),10190,{key:e.toString()}),e}function g0(t,e){return q_(t.databaseId,e.path)}function wv(t,e){const n=WN(e);if(n.get(1)!==t.databaseId.projectId)throw new we(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new we(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Me(QN(n))}function XN(t,e){return q_(t.databaseId,e)}function Z3(t){const e=WN(t);return e.length===4?kt.emptyPath():QN(e)}function y0(t){return new kt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function QN(t){return wt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function nC(t,e,n){return{name:g0(t,e),fields:n.value.mapValue.fields}}function e6(t,e){let n;if("targetChange"in e){e.targetChange;const i=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Be(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=(function(d,p){return d.useProto3Json?(wt(p===void 0||typeof p=="string",58123),Yn.fromBase64String(p||"")):(wt(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Yn.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(d){const p=d.code===void 0?ce.UNKNOWN:$N(d.code);return new we(p,d.message||"")})(l);n=new YN(i,r,o,c||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=wv(t,i.document.name),o=es(i.document.updateTime),l=i.document.createTime?es(i.document.createTime):ze.min(),c=new Mi({mapValue:{fields:i.document.fields}}),f=oi.newFoundDocument(r,o,l,c),d=i.targetIds||[],p=i.removedTargetIds||[];n=new gp(d,p,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=wv(t,i.document),o=i.readTime?es(i.readTime):ze.min(),l=oi.newNoDocument(r,o),c=i.removedTargetIds||[];n=new gp([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=wv(t,i.document),o=i.removedTargetIds||[];n=new gp([],o,r,null)}else{if(!("filter"in e))return Be(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,l=new G3(r,o),c=i.targetId;n=new KN(c,l)}}return n}function t6(t,e){let n;if(e instanceof Zf)n={update:nC(t,e.key,e.value)};else if(e instanceof U_)n={delete:g0(t,e.key)};else if(e instanceof ta)n={update:nC(t,e.key,e.data),updateMask:c6(e.fieldMask)};else{if(!(e instanceof q3))return Be(16599,{Rt:e.type});n={verify:g0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(o,l){const c=l.transform;if(c instanceof Hp)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Mf)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof kf)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Gp)return{fieldPath:l.field.canonicalString(),increment:c.Ee};throw Be(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(r,o){return o.updateTime!==void 0?{updateTime:Q3(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Be(27497)})(t,e.precondition)),n}function n6(t,e){return t&&t.length>0?(wt(e!==void 0,14353),t.map((n=>(function(r,o){let l=r.updateTime?es(r.updateTime):es(o);return l.isEqual(ze.min())&&(l=es(o)),new U3(l,r.transformResults||[])})(n,e)))):[]}function i6(t,e){return{documents:[XN(t,e.path)]}}function r6(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=XN(t,r);const o=(function(d){if(d.length!==0)return eP(Ur.create(d,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const l=(function(d){if(d.length!==0)return d.map((p=>(function(T){return{field:Kl(T.field),direction:a6(T.dir)}})(p)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const c=p0(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{Vt:n,parent:r}}function s6(t){let e=Z3(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){wt(i===1,65062);const p=n.from[0];p.allDescendants?r=p.collectionId:e=e.child(p.collectionId)}let o=[];n.where&&(o=(function(v){const T=ZN(v);return T instanceof Ur&&RN(T)?T.getFilters():[T]})(n.where));let l=[];n.orderBy&&(l=(function(v){return v.map((T=>(function(x){return new zp(Yl(x.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(x.direction))})(T)))})(n.orderBy));let c=null;n.limit&&(c=(function(v){let T;return T=typeof v=="object"?v.value:v,Dm(T)?null:T})(n.limit));let f=null;n.startAt&&(f=(function(v){const T=!!v.before,w=v.values||[];return new qp(w,T)})(n.startAt));let d=null;return n.endAt&&(d=(function(v){const T=!v.before,w=v.values||[];return new qp(w,T)})(n.endAt)),b3(e,r,l,o,c,"F",f,d)}function o6(t,e){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Be(28987,{purpose:r})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ZN(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Yl(n.unaryFilter.field);return Sn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Yl(n.unaryFilter.field);return Sn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Yl(n.unaryFilter.field);return Sn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Yl(n.unaryFilter.field);return Sn.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Be(61313);default:return Be(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Sn.create(Yl(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Be(58110);default:return Be(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ur.create(n.compositeFilter.filters.map((i=>ZN(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Be(1026)}})(n.compositeFilter.op))})(t):Be(30097,{filter:t})}function a6(t){return Y3[t]}function l6(t){return J3[t]}function u6(t){return W3[t]}function Kl(t){return{fieldPath:t.canonicalString()}}function Yl(t){return Kn.fromServerFormat(t.fieldPath)}function eP(t){return t instanceof Sn?(function(n){if(n.op==="=="){if(Hb(n.value))return{unaryFilter:{field:Kl(n.field),op:"IS_NAN"}};if(zb(n.value))return{unaryFilter:{field:Kl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Hb(n.value))return{unaryFilter:{field:Kl(n.field),op:"IS_NOT_NAN"}};if(zb(n.value))return{unaryFilter:{field:Kl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kl(n.field),op:l6(n.op),value:n.value}}})(t):t instanceof Ur?(function(n){const i=n.getFilters().map((r=>eP(r)));return i.length===1?i[0]:{compositeFilter:{op:u6(n.op),filters:i}}})(t):Be(54877,{filter:t})}function c6(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function tP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n,i,r,o=ze.min(),l=ze.min(),c=Yn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=f}withSequenceNumber(e){return new ko(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ko(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ko(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ko(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(e){this.gt=e}}function d6(t){const e=s6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?h0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(){this.Dn=new p6}addToCollectionParentIndex(e,n){return this.Dn.add(n),fe.resolve()}getCollectionParents(e,n){return fe.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return fe.resolve()}deleteFieldIndex(e,n){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,n){return fe.resolve()}getDocumentsMatchingTarget(e,n){return fe.resolve(null)}getIndexType(e,n){return fe.resolve(0)}getFieldIndexes(e,n){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,n){return fe.resolve(Ho.min())}getMinOffsetFromCollectionGroup(e,n){return fe.resolve(Ho.min())}updateCollectionGroup(e,n,i){return fe.resolve()}updateIndexEntries(e,n){return fe.resolve()}}class p6{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new xn(kt.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new xn(kt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nP=41943040;class Di{static withCacheSize(e){return new Di(e,Di.DEFAULT_COLLECTION_PERCENTILE,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Di.DEFAULT_COLLECTION_PERCENTILE=10,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Di.DEFAULT=new Di(nP,Di.DEFAULT_COLLECTION_PERCENTILE,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Di.DISABLED=new Di(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new yu(0)}static ur(){return new yu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC="LruGarbageCollector",m6=1048576;function sC([t,e],[n,i]){const r=Ze(t,n);return r===0?Ze(e,i):r}class g6{constructor(e){this.Tr=e,this.buffer=new xn(sC),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();sC(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class y6{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){_e(rC,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Nu(n)?_e(rC,"Ignoring IndexedDB error during garbage collection: ",n):await Ru(n)}await this.Rr(3e5)}))}}class v6{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return fe.resolve(Pm.ue);const i=new g6(n);return this.Vr.forEachTarget(e,(r=>i.Er(r.sequenceNumber))).next((()=>this.Vr.gr(e,(r=>i.Er(r))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(iC)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iC):this.pr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let i,r,o,l,c,f,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),r=this.params.maximumSequenceNumbersToCollect):r=v,l=Date.now(),this.nthSequenceNumber(e,r)))).next((v=>(i=v,c=Date.now(),this.removeTargets(e,i,n)))).next((v=>(o=v,f=Date.now(),this.removeOrphanedDocuments(e,i)))).next((v=>(d=Date.now(),jl()<=ot.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-p}ms
	Determined least recently used ${r} in `+(c-l)+`ms
	Removed ${o} targets in `+(f-c)+`ms
	Removed ${v} documents in `+(d-f)+`ms
Total Duration: ${d-p}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:v}))))}}function _6(t,e){return new v6(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(){this.changes=new Za((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,oi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?fe.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,n)))).next((r=>(i!==null&&uf(i.mutation,r,Ji.empty(),Ht.now()),r)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,at()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=at()){const r=La();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,i).next((o=>{let l=$c();return o.forEach(((c,f)=>{l=l.insert(c,f.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const i=La();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,at())))}populateOverlays(e,n,i){const r=[];return i.forEach((o=>{n.has(o)||r.push(o)})),this.documentOverlayCache.getOverlays(e,r).next((o=>{o.forEach(((l,c)=>{n.set(l,c)}))}))}computeViews(e,n,i,r){let o=Us();const l=lf(),c=(function(){return lf()})();return n.forEach(((f,d)=>{const p=i.get(d.key);r.has(d.key)&&(p===void 0||p.mutation instanceof ta)?o=o.insert(d.key,d):p!==void 0?(l.set(d.key,p.mutation.getFieldMask()),uf(p.mutation,d,p.mutation.getFieldMask(),Ht.now())):l.set(d.key,Ji.empty())})),this.recalculateAndSaveOverlays(e,o).next((f=>(f.forEach(((d,p)=>l.set(d,p))),n.forEach(((d,p)=>{var v;return c.set(d,new E6(p,(v=l.get(d))!==null&&v!==void 0?v:null))})),c)))}recalculateAndSaveOverlays(e,n){const i=lf();let r=new Xt(((l,c)=>l-c)),o=at();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const c of l)c.keys().forEach((f=>{const d=n.get(f);if(d===null)return;let p=i.get(f)||Ji.empty();p=c.applyToLocalView(d,p),i.set(f,p);const v=(r.get(c.batchId)||at()).add(f);r=r.insert(c.batchId,v)}))})).next((()=>{const l=[],c=r.getReverseIterator();for(;c.hasNext();){const f=c.getNext(),d=f.key,p=f.value,v=UN();p.forEach((T=>{if(!o.has(T)){const w=GN(n.get(T),i.get(T));w!==null&&v.set(T,w),o=o.add(T)}})),l.push(this.documentOverlayCache.saveOverlays(e,d,v))}return fe.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,r){return(function(l){return Me.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):MN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next((o=>{const l=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):fe.resolve(La());let c=Rf,f=o;return l.next((d=>fe.forEach(d,((p,v)=>(c<v.largestBatchId&&(c=v.largestBatchId),o.get(p)?fe.resolve():this.remoteDocumentCache.getEntry(e,p).next((T=>{f=f.insert(p,T)}))))).next((()=>this.populateOverlays(e,d,o))).next((()=>this.computeViews(e,f,d,at()))).next((p=>({batchId:c,changes:ON(p)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Me(n)).next((i=>{let r=$c();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let l=$c();return this.indexManager.getCollectionParents(e,o).next((c=>fe.forEach(c,(f=>{const d=(function(v,T){return new Qf(T,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(n,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,i,r).next((p=>{p.forEach(((v,T)=>{l=l.insert(v,T)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r)))).next((l=>{o.forEach(((f,d)=>{const p=d.getKey();l.get(p)===null&&(l=l.insert(p,oi.newInvalidDocument(p)))}));let c=$c();return l.forEach(((f,d)=>{const p=o.get(f);p!==void 0&&uf(p.mutation,d,Ji.empty(),Ht.now()),Vm(n,d)&&(c=c.insert(f,d))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return fe.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:es(r.createTime)}})(n)),fe.resolve()}getNamedQuery(e,n){return fe.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(r){return{name:r.name,query:d6(r.bundledQuery),readTime:es(r.readTime)}})(n)),fe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(){this.overlays=new Xt(Me.comparator),this.kr=new Map}getOverlay(e,n){return fe.resolve(this.overlays.get(n))}getOverlays(e,n){const i=La();return fe.forEach(n,(r=>this.getOverlay(e,r).next((o=>{o!==null&&i.set(r,o)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((r,o)=>{this.wt(e,n,o)})),fe.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.kr.get(i);return r!==void 0&&(r.forEach((o=>this.overlays=this.overlays.remove(o))),this.kr.delete(i)),fe.resolve()}getOverlaysForCollection(e,n,i){const r=La(),o=n.length+1,l=new Me(n.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const f=c.getNext().value,d=f.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===o&&f.largestBatchId>i&&r.set(f.getKey(),f)}return fe.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new Xt(((d,p)=>d-p));const l=this.overlays.getIterator();for(;l.hasNext();){const d=l.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>i){let p=o.get(d.largestBatchId);p===null&&(p=La(),o=o.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const c=La(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((d,p)=>c.set(d,p))),!(c.size()>=r)););return fe.resolve(c)}wt(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.kr.get(r.largestBatchId).delete(i.key);this.kr.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new H3(n,i));let o=this.kr.get(n);o===void 0&&(o=at(),this.kr.set(n,o)),this.kr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(){this.sessionToken=Yn.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,fe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(){this.qr=new xn(On.Qr),this.$r=new xn(On.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const i=new On(e,n);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new On(e,n))}Gr(e,n){e.forEach((i=>this.removeReference(i,n)))}zr(e){const n=new Me(new kt([])),i=new On(n,e),r=new On(n,e+1),o=[];return this.$r.forEachInRange([i,r],(l=>{this.Wr(l),o.push(l.key)})),o}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Me(new kt([])),i=new On(n,e),r=new On(n,e+1);let o=at();return this.$r.forEachInRange([i,r],(l=>{o=o.add(l.key)})),o}containsKey(e){const n=new On(e,0),i=this.qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class On{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Me.comparator(e.key,n.key)||Ze(e.Hr,n.Hr)}static Ur(e,n){return Ze(e.Hr,n.Hr)||Me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new xn(On.Qr)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new z3(o,n,i,r);this.mutationQueue.push(l);for(const c of r)this.Yr=this.Yr.add(new On(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return fe.resolve(l)}lookupMutationBatch(e,n){return fe.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.Xr(i),o=r<0?0:r;return fe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?P_:this.er-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new On(n,0),r=new On(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([i,r],(l=>{const c=this.Zr(l.Hr);o.push(c)})),fe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new xn(Ze);return n.forEach((r=>{const o=new On(r,0),l=new On(r,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,l],(c=>{i=i.add(c.Hr)}))})),fe.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;Me.isDocumentKey(o)||(o=o.child(""));const l=new On(new Me(o),0);let c=new xn(Ze);return this.Yr.forEachWhile((f=>{const d=f.key.path;return!!i.isPrefixOf(d)&&(d.length===r&&(c=c.add(f.Hr)),!0)}),l),fe.resolve(this.ei(c))}ei(e){const n=[];return e.forEach((i=>{const r=this.Zr(i);r!==null&&n.push(r)})),n}removeMutationBatch(e,n){wt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return fe.forEach(n.mutations,(r=>{const o=new On(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,n){const i=new On(n,0),r=this.Yr.firstAfterOrEqual(i);return fe.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(e){this.ni=e,this.docs=(function(){return new Xt(Me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,l=this.ni(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return fe.resolve(i?i.document.mutableCopy():oi.newInvalidDocument(n))}getEntries(e,n){let i=Us();return n.forEach((r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():oi.newInvalidDocument(r))})),fe.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=Us();const l=n.path,c=new Me(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(c);for(;f.hasNext();){const{key:d,value:{document:p}}=f.getNext();if(!l.isPrefixOf(d.path))break;d.path.length>l.length+1||i3(n3(p),i)<=0||(r.has(p.key)||Vm(n,p))&&(o=o.insert(p.key,p.mutableCopy()))}return fe.resolve(o)}getAllFromCollectionGroup(e,n,i,r){Be(9500)}ri(e,n){return fe.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new I6(this)}getSize(e){return fe.resolve(this.size)}}class I6 extends T6{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?n.push(this.Or.addEntry(e,r)):this.Or.removeEntry(i)})),fe.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e){this.persistence=e,this.ii=new Za((n=>k_(n)),V_),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this.si=0,this.oi=new z_,this.targetCount=0,this._i=yu.ar()}forEachTarget(e,n){return this.ii.forEach(((i,r)=>n(r))),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.si&&(this.si=n),fe.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new yu(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,fe.resolve()}updateTargetData(e,n){return this.hr(n),fe.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.ii.forEach(((l,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.ii.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)})),fe.waitFor(o).next((()=>r))}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,n){const i=this.ii.get(n)||null;return fe.resolve(i)}addMatchingKeys(e,n,i){return this.oi.Kr(n,i),fe.resolve()}removeMatchingKeys(e,n,i){this.oi.Gr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach((l=>{o.push(r.markPotentiallyOrphaned(e,l))})),fe.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),fe.resolve()}getMatchingKeysForTargetId(e,n){const i=this.oi.Jr(n);return fe.resolve(i)}containsKey(e,n){return fe.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e,n){this.ai={},this.overlays={},this.ui=new Pm(0),this.ci=!1,this.ci=!0,this.li=new b6,this.referenceDelegate=e(this),this.hi=new R6(this),this.indexManager=new h6,this.remoteDocumentCache=(function(r){return new x6(r)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new f6(n),this.Ti=new w6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new A6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ai[e.toKey()];return i||(i=new C6(n,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,i){_e("MemoryPersistence","Starting transaction:",e);const r=new N6(this.ui.next());return this.referenceDelegate.Ii(),i(r).next((o=>this.referenceDelegate.di(r).next((()=>o)))).toPromise().then((o=>(r.raiseOnCommittedEvent(),o)))}Ei(e,n){return fe.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,n))))}}class N6 extends s3{constructor(e){super(),this.currentSequenceNumber=e}}class H_{constructor(e){this.persistence=e,this.Ai=new z_,this.Ri=null}static Vi(e){return new H_(e)}get mi(){if(this.Ri)return this.Ri;throw Be(60996)}addReference(e,n,i){return this.Ai.addReference(i,n),this.mi.delete(i.toString()),fe.resolve()}removeReference(e,n,i){return this.Ai.removeReference(i,n),this.mi.add(i.toString()),fe.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),fe.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach((r=>this.mi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((r=>{r.forEach((o=>this.mi.add(o.toString())))})).next((()=>i.removeTargetData(e,n)))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.mi,(i=>{const r=Me.fromPath(i);return this.fi(e,r).next((o=>{o||n.removeEntry(r,ze.min())}))})).next((()=>(this.Ri=null,n.apply(e))))}updateLimboDocument(e,n){return this.fi(e,n).next((i=>{i?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(e){return 0}fi(e,n){return fe.or([()=>fe.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class $p{constructor(e,n){this.persistence=e,this.gi=new Za((i=>l3(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=_6(this,n)}static Vi(e,n){return new $p(e,n)}Ii(){}di(e){return fe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((r=>i+r))))}yr(e){let n=0;return this.gr(e,(i=>{n++})).next((()=>n))}gr(e,n){return fe.forEach(this.gi,((i,r)=>this.Sr(e,i,r).next((o=>o?fe.resolve():n(r)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ri(e,(l=>this.Sr(e,l,n).next((c=>{c||(i++,o.removeEntry(l,ze.min()))})))).next((()=>o.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),fe.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),fe.resolve()}removeReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),fe.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=hp(e.data.value)),n}Sr(e,n,i){return fe.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.gi.get(n);return fe.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Is=i,this.ds=r}static Es(e,n){let i=at(),r=at();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new G_(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return uL()?8:o3(ui())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.ps(e,n).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ys(e,n,r,i).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new P6;return this.ws(e,n,l).next((c=>{if(o.result=c,this.Rs)return this.Ss(e,n,l,c.size)}))})).next((()=>o.result))}Ss(e,n,i,r){return i.documentReadCount<this.Vs?(jl()<=ot.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",$l(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),fe.resolve()):(jl()<=ot.DEBUG&&_e("QueryEngine","Query:",$l(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.fs*r?(jl()<=ot.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",$l(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zr(n))):fe.resolve())}ps(e,n){if(Kb(n))return fe.resolve(null);let i=Zr(n);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=h0(n,null,"F"),i=Zr(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((o=>{const l=at(...o);return this.gs.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,i).next((f=>{const d=this.bs(n,c);return this.Ds(n,d,l,f.readTime)?this.ps(e,h0(n,null,"F")):this.vs(e,d,n,f)}))))})))))}ys(e,n,i,r){return Kb(n)||r.isEqual(ze.min())?fe.resolve(null):this.gs.getDocuments(e,i).next((o=>{const l=this.bs(n,o);return this.Ds(n,l,i,r)?fe.resolve(null):(jl()<=ot.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),$l(n)),this.vs(e,l,n,t3(r,Rf)).next((c=>c)))}))}bs(e,n){let i=new xn(VN(e));return n.forEach(((r,o)=>{Vm(e,o)&&(i=i.add(o))})),i}Ds(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}ws(e,n,i){return jl()<=ot.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",$l(n)),this.gs.getDocumentsMatchingQuery(e,n,Ho.min(),i)}vs(e,n,i,r){return this.gs.getDocumentsMatchingQuery(e,i,r).next((o=>(n.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_="LocalStore",M6=3e8;class k6{constructor(e,n,i,r){this.persistence=e,this.Cs=n,this.serializer=r,this.Fs=new Xt(Ze),this.Ms=new Za((o=>k_(o)),V_),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new S6(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Fs)))}}function V6(t,e,n,i){return new k6(t,e,n,i)}async function rP(t,e){const n=je(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next((o=>(r=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(i)))).next((o=>{const l=[],c=[];let f=at();for(const d of r){l.push(d.batchId);for(const p of d.mutations)f=f.add(p.key)}for(const d of o){c.push(d.batchId);for(const p of d.mutations)f=f.add(p.key)}return n.localDocuments.getDocuments(i,f).next((d=>({Bs:d,removedBatchIds:l,addedBatchIds:c})))}))}))}function L6(t,e){const n=je(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(c,f,d,p){const v=d.batch,T=v.keys();let w=fe.resolve();return T.forEach((x=>{w=w.next((()=>p.getEntry(f,x))).next((N=>{const P=d.docVersions.get(x);wt(P!==null,48541),N.version.compareTo(P)<0&&(v.applyToRemoteDocument(N,d),N.isValidDocument()&&(N.setReadTime(d.commitVersion),p.addEntry(N)))}))})),w.next((()=>c.mutationQueue.removeMutationBatch(f,v)))})(n,i,e,o).next((()=>o.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(c){let f=at();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(f=f.add(c.batch.mutations[d].key));return f})(e)))).next((()=>n.localDocuments.getDocuments(i,r)))}))}function sP(t){const e=je(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.hi.getLastRemoteSnapshotVersion(n)))}function O6(t,e){const n=je(t),i=e.snapshotVersion;let r=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=n.Os.newChangeBuffer({trackRemovals:!0});r=n.Fs;const c=[];e.targetChanges.forEach(((p,v)=>{const T=r.get(v);if(!T)return;c.push(n.hi.removeMatchingKeys(o,p.removedDocuments,v).next((()=>n.hi.addMatchingKeys(o,p.addedDocuments,v))));let w=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?w=w.withResumeToken(Yn.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):p.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(p.resumeToken,i)),r=r.insert(v,w),(function(N,P,O){return N.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=M6?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0})(T,w,p)&&c.push(n.hi.updateTargetData(o,w))}));let f=Us(),d=at();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,p))})),c.push(U6(o,l,e.documentUpdates).next((p=>{f=p.Ls,d=p.ks}))),!i.isEqual(ze.min())){const p=n.hi.getLastRemoteSnapshotVersion(o).next((v=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,i)));c.push(p)}return fe.waitFor(c).next((()=>l.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,f,d))).next((()=>f))})).then((o=>(n.Fs=r,o)))}function U6(t,e,n){let i=at(),r=at();return n.forEach((o=>i=i.add(o))),e.getEntries(t,i).next((o=>{let l=Us();return n.forEach(((c,f)=>{const d=o.get(c);f.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(c)),f.isNoDocument()&&f.version.isEqual(ze.min())?(e.removeEntry(c,f.readTime),l=l.insert(c,f)):!d.isValidDocument()||f.version.compareTo(d.version)>0||f.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(f),l=l.insert(c,f)):_e(j_,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",f.version)})),{Ls:l,ks:r}}))}function F6(t,e){const n=je(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=P_),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function B6(t,e){const n=je(t);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return n.hi.getTargetData(i,e).next((o=>o?(r=o,fe.resolve(r)):n.hi.allocateTargetId(i).next((l=>(r=new ko(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.hi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=n.Fs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(i.targetId,i),n.Ms.set(e,i.targetId)),i}))}async function v0(t,e,n){const i=je(t),r=i.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,(l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!Nu(l))throw l;_e(j_,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(r.target)}function oC(t,e,n){const i=je(t);let r=ze.min(),o=at();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(f,d,p){const v=je(f),T=v.Ms.get(p);return T!==void 0?fe.resolve(v.Fs.get(T)):v.hi.getTargetData(d,p)})(i,l,Zr(e)).next((c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(l,c.targetId).next((f=>{o=f}))})).next((()=>i.Cs.getDocumentsMatchingQuery(l,e,n?r:ze.min(),n?o:at()))).next((c=>(q6(i,x3(e),c),{documents:c,qs:o})))))}function q6(t,e,n){let i=t.xs.get(e)||ze.min();n.forEach(((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),t.xs.set(e,i)}class aC{constructor(){this.activeTargetIds=M3()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class z6{constructor(){this.Fo=new aC,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,i){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new aC,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC="ConnectivityMonitor";class uC{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){_e(lC,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){_e(lC,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uh=null;function _0(){return Uh===null?Uh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Uh++,"0x"+Uh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av="RestConnection",G6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class j6{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.Ko=this.databaseId.database===Fp?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,n,i,r,o){const l=_0(),c=this.Go(e,n.toUriEncodedString());_e(Av,`Sending RPC '${e}' ${l}:`,c,i);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(f,r,o);const{host:d}=new URL(c),p=qs(d);return this.jo(e,c,f,i,p).then((v=>(_e(Av,`Received RPC '${e}' ${l}: `,v),v)),(v=>{throw zo(Av,`RPC '${e}' ${l} failed with error: `,v,"url: ",c,"request:",i),v}))}Jo(e,n,i,r,o,l){return this.Wo(e,n,i,r,o)}zo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Iu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((r,o)=>e[o]=r)),i&&i.headers.forEach(((r,o)=>e[o]=r))}Go(e,n){const i=G6[e];return`${this.$o}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti="WebChannelConnection";class K6 extends j6{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,i,r,o){const l=_0();return new Promise(((c,f)=>{const d=new aN;d.setWithCredentials(!0),d.listenOnce(lN.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case dp.NO_ERROR:const v=d.getResponseJson();_e(ti,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),c(v);break;case dp.TIMEOUT:_e(ti,`RPC '${e}' ${l} timed out`),f(new we(ce.DEADLINE_EXCEEDED,"Request time out"));break;case dp.HTTP_ERROR:const T=d.getStatus();if(_e(ti,`RPC '${e}' ${l} failed with status:`,T,"response text:",d.getResponseText()),T>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);const x=w==null?void 0:w.error;if(x&&x.status&&x.message){const N=(function(O){const k=O.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(k)>=0?k:ce.UNKNOWN})(x.status);f(new we(N,x.message))}else f(new we(ce.UNKNOWN,"Server responded with status "+d.getStatus()))}else f(new we(ce.UNAVAILABLE,"Connection failed."));break;default:Be(9055,{c_:e,streamId:l,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{_e(ti,`RPC '${e}' ${l} completed.`)}}));const p=JSON.stringify(r);_e(ti,`RPC '${e}' ${l} sending request:`,r),d.send(n,"POST",p,i,15)}))}P_(e,n,i){const r=_0(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=fN(),c=cN(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(f.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(f.useFetchStreams=!0),this.zo(f.initMessageHeaders,n,i),f.encodeInitMessageHeaders=!0;const p=o.join("");_e(ti,`Creating RPC '${e}' stream ${r}: ${p}`,f);const v=l.createWebChannel(p,f);this.T_(v);let T=!1,w=!1;const x=new $6({Ho:P=>{w?_e(ti,`Not sending because RPC '${e}' stream ${r} is closed:`,P):(T||(_e(ti,`Opening RPC '${e}' stream ${r} transport.`),v.open(),T=!0),_e(ti,`RPC '${e}' stream ${r} sending:`,P),v.send(P))},Yo:()=>v.close()}),N=(P,O,k)=>{P.listen(O,(F=>{try{k(F)}catch(G){setTimeout((()=>{throw G}),0)}}))};return N(v,jc.EventType.OPEN,(()=>{w||(_e(ti,`RPC '${e}' stream ${r} transport opened.`),x.s_())})),N(v,jc.EventType.CLOSE,(()=>{w||(w=!0,_e(ti,`RPC '${e}' stream ${r} transport closed`),x.__(),this.I_(v))})),N(v,jc.EventType.ERROR,(P=>{w||(w=!0,zo(ti,`RPC '${e}' stream ${r} transport errored. Name:`,P.name,"Message:",P.message),x.__(new we(ce.UNAVAILABLE,"The operation could not be completed")))})),N(v,jc.EventType.MESSAGE,(P=>{var O;if(!w){const k=P.data[0];wt(!!k,16349);const F=k,G=(F==null?void 0:F.error)||((O=F[0])===null||O===void 0?void 0:O.error);if(G){_e(ti,`RPC '${e}' stream ${r} received error:`,G);const K=G.status;let H=(function(D){const V=En[D];if(V!==void 0)return $N(V)})(K),R=G.message;H===void 0&&(H=ce.INTERNAL,R="Unknown error status: "+K+" with message "+G.message),w=!0,x.__(new we(H,R)),v.close()}else _e(ti,`RPC '${e}' stream ${r} received:`,k),x.a_(k)}})),N(c,uN.STAT_EVENT,(P=>{P.stat===o0.PROXY?_e(ti,`RPC '${e}' stream ${r} detected buffering proxy`):P.stat===o0.NOPROXY&&_e(ti,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{x.o_()}),0),x}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((n=>n===e))}}function bv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(t){return new X3(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=i,this.E_=r,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),r=Math.max(0,n-i);r>0&&_e("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC="PersistentStream";class aP{constructor(e,n,i,r,o,l,c,f){this.Fi=e,this.w_=i,this.S_=r,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=f,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new oP(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===ce.RESOURCE_EXHAUSTED?(Os(n.toString()),Os("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.b_===n&&this.W_(i,r)}),(i=>{e((()=>{const r=new we(ce.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(r)}))}))}W_(e,n){const i=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((r=>{i((()=>this.G_(r)))})),this.stream.onMessage((r=>{i((()=>++this.C_==1?this.j_(r):this.onNext(r)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return _e(cC,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget((()=>this.b_===e?n():(_e(cC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Y6 extends aP{constructor(e,n,i,r,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,l),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=e6(this.serializer,e),i=(function(o){if(!("targetChange"in o))return ze.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?ze.min():l.readTime?es(l.readTime):ze.min()})(e);return this.listener.J_(n,i)}H_(e){const n={};n.database=y0(this.serializer),n.addTarget=(function(o,l){let c;const f=l.target;if(c=f0(f)?{documents:i6(o,f)}:{query:r6(o,f).Vt},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=JN(o,l.resumeToken);const d=p0(o,l.expectedCount);d!==null&&(c.expectedCount=d)}else if(l.snapshotVersion.compareTo(ze.min())>0){c.readTime=jp(o,l.snapshotVersion.toTimestamp());const d=p0(o,l.expectedCount);d!==null&&(c.expectedCount=d)}return c})(this.serializer,e);const i=o6(this.serializer,e);i&&(n.labels=i),this.k_(n)}Y_(e){const n={};n.database=y0(this.serializer),n.removeTarget=e,this.k_(n)}}class J6 extends aP{constructor(e,n,i,r,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,l),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return wt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,wt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){wt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=n6(e.writeResults,e.commitTime),i=es(e.commitTime);return this.listener.ta(i,n)}na(){const e={};e.database=y0(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>t6(this.serializer,i)))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{}class X6 extends W6{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new we(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Wo(e,m0(n,i),r,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new we(ce.UNKNOWN,o.toString())}))}Jo(e,n,i,r,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Jo(e,m0(n,i),r,l,c,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new we(ce.UNKNOWN,l.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class Q6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Os(n),this._a=!1):_e("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja="RemoteStore";class Z6{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo((l=>{i.enqueueAndForget((async()=>{el(this)&&(_e(Ja,"Restarting streams for network reachability change."),await(async function(f){const d=je(f);d.Ia.add(4),await td(d),d.Aa.set("Unknown"),d.Ia.delete(4),await Bm(d)})(this))}))})),this.Aa=new Q6(i,r)}}async function Bm(t){if(el(t))for(const e of t.da)await e(!0)}async function td(t){for(const e of t.da)await e(!1)}function lP(t,e){const n=je(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),J_(n)?Y_(n):Pu(n).x_()&&K_(n,e))}function $_(t,e){const n=je(t),i=Pu(n);n.Ta.delete(e),i.x_()&&uP(n,e),n.Ta.size===0&&(i.x_()?i.B_():el(n)&&n.Aa.set("Unknown"))}function K_(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ze.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Pu(t).H_(e)}function uP(t,e){t.Ra.$e(e),Pu(t).Y_(e)}function Y_(t){t.Ra=new K3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Pu(t).start(),t.Aa.aa()}function J_(t){return el(t)&&!Pu(t).M_()&&t.Ta.size>0}function el(t){return je(t).Ia.size===0}function cP(t){t.Ra=void 0}async function e5(t){t.Aa.set("Online")}async function t5(t){t.Ta.forEach(((e,n)=>{K_(t,e)}))}async function n5(t,e){cP(t),J_(t)?(t.Aa.la(e),Y_(t)):t.Aa.set("Unknown")}async function i5(t,e,n){if(t.Aa.set("Online"),e instanceof YN&&e.state===2&&e.cause)try{await(async function(r,o){const l=o.cause;for(const c of o.targetIds)r.Ta.has(c)&&(await r.remoteSyncer.rejectListen(c,l),r.Ta.delete(c),r.Ra.removeTarget(c))})(t,e)}catch(i){_e(Ja,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Kp(t,i)}else if(e instanceof gp?t.Ra.Ye(e):e instanceof KN?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ze.min()))try{const i=await sP(t.localStore);n.compareTo(i)>=0&&await(function(o,l){const c=o.Ra.Pt(l);return c.targetChanges.forEach(((f,d)=>{if(f.resumeToken.approximateByteSize()>0){const p=o.Ta.get(d);p&&o.Ta.set(d,p.withResumeToken(f.resumeToken,l))}})),c.targetMismatches.forEach(((f,d)=>{const p=o.Ta.get(f);if(!p)return;o.Ta.set(f,p.withResumeToken(Yn.EMPTY_BYTE_STRING,p.snapshotVersion)),uP(o,f);const v=new ko(p.target,f,d,p.sequenceNumber);K_(o,v)})),o.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(i){_e(Ja,"Failed to raise snapshot:",i),await Kp(t,i)}}async function Kp(t,e,n){if(!Nu(e))throw e;t.Ia.add(1),await td(t),t.Aa.set("Offline"),n||(n=()=>sP(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{_e(Ja,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Bm(t)}))}function fP(t,e){return e().catch((n=>Kp(t,n,e)))}async function qm(t){const e=je(t),n=Ko(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:P_;for(;r5(e);)try{const r=await F6(e.localStore,i);if(r===null){e.Pa.length===0&&n.B_();break}i=r.batchId,s5(e,r)}catch(r){await Kp(e,r)}dP(e)&&hP(e)}function r5(t){return el(t)&&t.Pa.length<10}function s5(t,e){t.Pa.push(e);const n=Ko(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function dP(t){return el(t)&&!Ko(t).M_()&&t.Pa.length>0}function hP(t){Ko(t).start()}async function o5(t){Ko(t).na()}async function a5(t){const e=Ko(t);for(const n of t.Pa)e.X_(n.mutations)}async function l5(t,e,n){const i=t.Pa.shift(),r=F_.from(i,e,n);await fP(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await qm(t)}async function u5(t,e){e&&Ko(t).Z_&&await(async function(i,r){if((function(l){return j3(l)&&l!==ce.ABORTED})(r.code)){const o=i.Pa.shift();Ko(i).N_(),await fP(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r))),await qm(i)}})(t,e),dP(t)&&hP(t)}async function fC(t,e){const n=je(t);n.asyncQueue.verifyOperationInProgress(),_e(Ja,"RemoteStore received new credentials");const i=el(n);n.Ia.add(3),await td(n),i&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Bm(n)}async function c5(t,e){const n=je(t);e?(n.Ia.delete(2),await Bm(n)):e||(n.Ia.add(2),await td(n),n.Aa.set("Unknown"))}function Pu(t){return t.Va||(t.Va=(function(n,i,r){const o=je(n);return o.ia(),new Y6(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(t.datastore,t.asyncQueue,{Zo:e5.bind(null,t),e_:t5.bind(null,t),n_:n5.bind(null,t),J_:i5.bind(null,t)}),t.da.push((async e=>{e?(t.Va.N_(),J_(t)?Y_(t):t.Aa.set("Unknown")):(await t.Va.stop(),cP(t))}))),t.Va}function Ko(t){return t.ma||(t.ma=(function(n,i,r){const o=je(n);return o.ia(),new J6(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:o5.bind(null,t),n_:u5.bind(null,t),ea:a5.bind(null,t),ta:l5.bind(null,t)}),t.da.push((async e=>{e?(t.ma.N_(),await qm(t)):(await t.ma.stop(),t.Pa.length>0&&(_e(Ja,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Ua,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const l=Date.now()+i,c=new W_(e,n,l,r,o);return c.start(i),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function X_(t,e){if(Os("AsyncQueue",`${e}: ${t}`),Nu(t))return new we(ce.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{static emptySet(e){return new ou(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Me.comparator(n.key,i.key):(n,i)=>Me.comparator(n.key,i.key),this.keyedMap=$c(),this.sortedSet=new Xt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ou)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new ou;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(){this.fa=new Xt(Me.comparator)}track(e){const n=e.doc.key,i=this.fa.get(n);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(n,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(n):e.type===1&&i.type===2?this.fa=this.fa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Be(63341,{At:e,ga:i}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal(((n,i)=>{e.push(i)})),e}}class vu{constructor(e,n,i,r,o,l,c,f,d){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=f,this.hasCachedResults=d}static fromInitialDocuments(e,n,i,r,o){const l=[];return n.forEach((c=>{l.push({type:0,doc:c})})),new vu(e,n,ou.emptySet(n),l,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&km(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class d5{constructor(){this.queries=hC(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,i){const r=je(n),o=r.queries;r.queries=hC(),o.forEach(((l,c)=>{for(const f of c.wa)f.onError(i)}))})(this,new we(ce.ABORTED,"Firestore shutting down"))}}function hC(){return new Za((t=>kN(t)),km)}async function h5(t,e){const n=je(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.Sa()&&e.ba()&&(i=2):(o=new f5,i=e.ba()?0:1);try{switch(i){case 0:o.ya=await n.onListen(r,!0);break;case 1:o.ya=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(l){const c=X_(l,`Initialization of query '${$l(e.query)}' failed`);return void e.onError(c)}n.queries.set(r,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&Q_(n)}async function p5(t,e){const n=je(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const l=o.wa.indexOf(e);l>=0&&(o.wa.splice(l,1),o.wa.length===0?r=e.ba()?0:1:!o.Sa()&&e.ba()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function m5(t,e){const n=je(t);let i=!1;for(const r of e){const o=r.query,l=n.queries.get(o);if(l){for(const c of l.wa)c.Ca(r)&&(i=!0);l.ya=r}}i&&Q_(n)}function g5(t,e,n){const i=je(t),r=i.queries.get(e);if(r)for(const o of r.wa)o.onError(n);i.queries.delete(e)}function Q_(t){t.Da.forEach((e=>{e.next()}))}var T0,pC;(pC=T0||(T0={})).Fa="default",pC.Cache="cache";class y5{constructor(e,n,i){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new vu(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const i=n!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=vu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==T0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e){this.key=e}}class mP{constructor(e){this.key=e}}class v5{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=at(),this.mutatedKeys=at(),this.Xa=VN(e),this.eu=new ou(this.Xa)}get tu(){return this.Ha}nu(e,n){const i=n?n.ru:new dC,r=n?n.eu:this.eu;let o=n?n.mutatedKeys:this.mutatedKeys,l=r,c=!1;const f=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((p,v)=>{const T=r.get(p),w=Vm(this.query,v)?v:null,x=!!T&&this.mutatedKeys.has(T.key),N=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let P=!1;T&&w?T.data.isEqual(w.data)?x!==N&&(i.track({type:3,doc:w}),P=!0):this.iu(T,w)||(i.track({type:2,doc:w}),P=!0,(f&&this.Xa(w,f)>0||d&&this.Xa(w,d)<0)&&(c=!0)):!T&&w?(i.track({type:0,doc:w}),P=!0):T&&!w&&(i.track({type:1,doc:T}),P=!0,(f||d)&&(c=!0)),P&&(w?(l=l.add(w),o=N?o.add(p):o.delete(p)):(l=l.delete(p),o=o.delete(p)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const p=this.query.limitType==="F"?l.last():l.first();l=l.delete(p.key),o=o.delete(p.key),i.track({type:1,doc:p})}return{eu:l,ru:i,Ds:c,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const l=e.ru.pa();l.sort(((p,v)=>(function(w,x){const N=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Be(20277,{At:P})}};return N(w)-N(x)})(p.type,v.type)||this.Xa(p.doc,v.doc))),this.su(i),r=r!=null&&r;const c=n&&!r?this.ou():[],f=this.Za.size===0&&this.current&&!r?1:0,d=f!==this.Ya;return this.Ya=f,l.length!==0||d?{snapshot:new vu(this.query,e.eu,o,l,e.mutatedKeys,f===0,d,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new dC,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=at(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const n=[];return e.forEach((i=>{this.Za.has(i)||n.push(new mP(i))})),this.Za.forEach((i=>{e.has(i)||n.push(new pP(i))})),n}uu(e){this.Ha=e.qs,this.Za=at();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return vu.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Z_="SyncEngine";class _5{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class T5{constructor(e){this.key=e,this.lu=!1}}class E5{constructor(e,n,i,r,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.hu={},this.Pu=new Za((c=>kN(c)),km),this.Tu=new Map,this.Iu=new Set,this.du=new Xt(Me.comparator),this.Eu=new Map,this.Au=new z_,this.Ru={},this.Vu=new Map,this.mu=yu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function S5(t,e,n=!0){const i=EP(t);let r;const o=i.Pu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.cu()):r=await gP(i,e,n,!0),r}async function w5(t,e){const n=EP(t);await gP(n,e,!0,!1)}async function gP(t,e,n,i){const r=await B6(t.localStore,Zr(e)),o=r.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let c;return i&&(c=await A5(t,e,o,l==="current",r.resumeToken)),t.isPrimaryClient&&n&&lP(t.remoteStore,r),c}async function A5(t,e,n,i,r){t.gu=(v,T,w)=>(async function(N,P,O,k){let F=P.view.nu(O);F.Ds&&(F=await oC(N.localStore,P.query,!1).then((({documents:R})=>P.view.nu(R,F))));const G=k&&k.targetChanges.get(P.targetId),K=k&&k.targetMismatches.get(P.targetId)!=null,H=P.view.applyChanges(F,N.isPrimaryClient,G,K);return gC(N,P.targetId,H._u),H.snapshot})(t,v,T,w);const o=await oC(t.localStore,e,!0),l=new v5(e,o.qs),c=l.nu(o.documents),f=ed.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),d=l.applyChanges(c,t.isPrimaryClient,f);gC(t,n,d._u);const p=new _5(e,n,l);return t.Pu.set(e,p),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),d.snapshot}async function b5(t,e,n){const i=je(t),r=i.Pu.get(e),o=i.Tu.get(r.targetId);if(o.length>1)return i.Tu.set(r.targetId,o.filter((l=>!km(l,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await v0(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),n&&$_(i.remoteStore,r.targetId),E0(i,r.targetId)})).catch(Ru)):(E0(i,r.targetId),await v0(i.localStore,r.targetId,!0))}async function C5(t,e){const n=je(t),i=n.Pu.get(e),r=n.Tu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),$_(n.remoteStore,i.targetId))}async function x5(t,e,n){const i=k5(t);try{const r=await(function(l,c){const f=je(l),d=Ht.now(),p=c.reduce(((w,x)=>w.add(x.key)),at());let v,T;return f.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let x=Us(),N=at();return f.Os.getEntries(w,p).next((P=>{x=P,x.forEach(((O,k)=>{k.isValidDocument()||(N=N.add(O))}))})).next((()=>f.localDocuments.getOverlayedDocuments(w,x))).next((P=>{v=P;const O=[];for(const k of c){const F=B3(k,v.get(k.key).overlayedDocument);F!=null&&O.push(new ta(k.key,F,CN(F.value.mapValue),Or.exists(!0)))}return f.mutationQueue.addMutationBatch(w,d,O,c)})).next((P=>{T=P;const O=P.applyToLocalDocumentSet(v,N);return f.documentOverlayCache.saveOverlays(w,P.batchId,O)}))})).then((()=>({batchId:T.batchId,changes:ON(v)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(l,c,f){let d=l.Ru[l.currentUser.toKey()];d||(d=new Xt(Ze)),d=d.insert(c,f),l.Ru[l.currentUser.toKey()]=d})(i,r.batchId,n),await nd(i,r.changes),await qm(i.remoteStore)}catch(r){const o=X_(r,"Failed to persist write");n.reject(o)}}async function yP(t,e){const n=je(t);try{const i=await O6(n.localStore,e);e.targetChanges.forEach(((r,o)=>{const l=n.Eu.get(o);l&&(wt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?l.lu=!0:r.modifiedDocuments.size>0?wt(l.lu,14607):r.removedDocuments.size>0&&(wt(l.lu,42227),l.lu=!1))})),await nd(n,i,e)}catch(i){await Ru(i)}}function mC(t,e,n){const i=je(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Pu.forEach(((o,l)=>{const c=l.view.va(e);c.snapshot&&r.push(c.snapshot)})),(function(l,c){const f=je(l);f.onlineState=c;let d=!1;f.queries.forEach(((p,v)=>{for(const T of v.wa)T.va(c)&&(d=!0)})),d&&Q_(f)})(i.eventManager,e),r.length&&i.hu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function I5(t,e,n){const i=je(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Eu.get(e),o=r&&r.key;if(o){let l=new Xt(Me.comparator);l=l.insert(o,oi.newNoDocument(o,ze.min()));const c=at().add(o),f=new Um(ze.min(),new Map,new Xt(Ze),l,c);await yP(i,f),i.du=i.du.remove(o),i.Eu.delete(e),eT(i)}else await v0(i.localStore,e,!1).then((()=>E0(i,e,n))).catch(Ru)}async function R5(t,e){const n=je(t),i=e.batch.batchId;try{const r=await L6(n.localStore,e);_P(n,i,null),vP(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await nd(n,r)}catch(r){await Ru(r)}}async function N5(t,e,n){const i=je(t);try{const r=await(function(l,c){const f=je(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let p;return f.mutationQueue.lookupMutationBatch(d,c).next((v=>(wt(v!==null,37113),p=v.keys(),f.mutationQueue.removeMutationBatch(d,v)))).next((()=>f.mutationQueue.performConsistencyCheck(d))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(d,p,c))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p))).next((()=>f.localDocuments.getDocuments(d,p)))}))})(i.localStore,e);_P(i,e,n),vP(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await nd(i,r)}catch(r){await Ru(r)}}function vP(t,e){(t.Vu.get(e)||[]).forEach((n=>{n.resolve()})),t.Vu.delete(e)}function _P(t,e,n){const i=je(t);let r=i.Ru[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Ru[i.currentUser.toKey()]=r}}function E0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Tu.get(e))t.Pu.delete(i),n&&t.hu.pu(i,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach((i=>{t.Au.containsKey(i)||TP(t,i)}))}function TP(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&($_(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),eT(t))}function gC(t,e,n){for(const i of n)i instanceof pP?(t.Au.addReference(i.key,e),P5(t,i)):i instanceof mP?(_e(Z_,"Document no longer in limbo: "+i.key),t.Au.removeReference(i.key,e),t.Au.containsKey(i.key)||TP(t,i.key)):Be(19791,{yu:i})}function P5(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Iu.has(i)||(_e(Z_,"New document in limbo: "+n),t.Iu.add(i),eT(t))}function eT(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new Me(kt.fromString(e)),i=t.mu.next();t.Eu.set(i,new T5(n)),t.du=t.du.insert(n,i),lP(t.remoteStore,new ko(Zr(L_(n.path)),i,"TargetPurposeLimboResolution",Pm.ue))}}async function nd(t,e,n){const i=je(t),r=[],o=[],l=[];i.Pu.isEmpty()||(i.Pu.forEach(((c,f)=>{l.push(i.gu(f,e,n).then((d=>{var p;if((d||n)&&i.isPrimaryClient){const v=d?!d.fromCache:(p=n==null?void 0:n.targetChanges.get(f.targetId))===null||p===void 0?void 0:p.current;i.sharedClientState.updateQueryState(f.targetId,v?"current":"not-current")}if(d){r.push(d);const v=G_.Es(f.targetId,d);o.push(v)}})))})),await Promise.all(l),i.hu.J_(r),await(async function(f,d){const p=je(f);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>fe.forEach(d,(T=>fe.forEach(T.Is,(w=>p.persistence.referenceDelegate.addReference(v,T.targetId,w))).next((()=>fe.forEach(T.ds,(w=>p.persistence.referenceDelegate.removeReference(v,T.targetId,w)))))))))}catch(v){if(!Nu(v))throw v;_e(j_,"Failed to update sequence numbers: "+v)}for(const v of d){const T=v.targetId;if(!v.fromCache){const w=p.Fs.get(T),x=w.snapshotVersion,N=w.withLastLimboFreeSnapshotVersion(x);p.Fs=p.Fs.insert(T,N)}}})(i.localStore,o))}async function D5(t,e){const n=je(t);if(!n.currentUser.isEqual(e)){_e(Z_,"User change. New user:",e.toKey());const i=await rP(n.localStore,e);n.currentUser=e,(function(o,l){o.Vu.forEach((c=>{c.forEach((f=>{f.reject(new we(ce.CANCELLED,l))}))})),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await nd(n,i.Bs)}}function M5(t,e){const n=je(t),i=n.Eu.get(e);if(i&&i.lu)return at().add(i.key);{let r=at();const o=n.Tu.get(e);if(!o)return r;for(const l of o){const c=n.Pu.get(l);r=r.unionWith(c.view.tu)}return r}}function EP(t){const e=je(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=yP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=M5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=I5.bind(null,e),e.hu.J_=m5.bind(null,e.eventManager),e.hu.pu=g5.bind(null,e.eventManager),e}function k5(t){const e=je(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=R5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=N5.bind(null,e),e}class Yp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fm(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return V6(this.persistence,new D6,e.initialUser,this.serializer)}Du(e){return new iP(H_.Vi,this.serializer)}bu(e){return new z6}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yp.provider={build:()=>new Yp};class V5 extends Yp{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){wt(this.persistence.referenceDelegate instanceof $p,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new y6(i,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Di.withCacheSize(this.cacheSizeBytes):Di.DEFAULT;return new iP((i=>$p.Vi(i,n)),this.serializer)}}class S0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>mC(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=D5.bind(null,this.syncEngine),await c5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new d5})()}createDatastore(e){const n=Fm(e.databaseInfo.databaseId),i=(function(o){return new K6(o)})(e.databaseInfo);return(function(o,l,c,f){return new X6(o,l,c,f)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,r,o,l,c){return new Z6(i,r,o,l,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>mC(this.syncEngine,n,0)),(function(){return uC.C()?new uC:new H6})())}createSyncEngine(e,n){return(function(r,o,l,c,f,d,p){const v=new E5(r,o,l,c,f,d);return p&&(v.fu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(r){const o=je(r);_e(Ja,"RemoteStore shutting down."),o.Ia.add(5),await td(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}S0.provider={build:()=>new S0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Os("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo="FirestoreClient";class O5{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=si.UNAUTHENTICATED,this.clientId=N_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async l=>{_e(Yo,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(_e(Yo,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ua;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=X_(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Cv(t,e){t.asyncQueue.verifyOperationInProgress(),_e(Yo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async r=>{i.isEqual(r)||(await rP(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>{zo("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then((()=>{_e("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((r=>{zo("Terminating Firestore due to IndexedDb database deletion failed",r)}))})),t._offlineComponents=e}async function yC(t,e){t.asyncQueue.verifyOperationInProgress();const n=await U5(t);_e(Yo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>fC(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,r)=>fC(e.remoteStore,r))),t._onlineComponents=e}async function U5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){_e(Yo,"Using user provided OfflineComponentProvider");try{await Cv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ce.FAILED_PRECONDITION||r.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;zo("Error using user provided cache. Falling back to memory cache: "+n),await Cv(t,new Yp)}}else _e(Yo,"Using default OfflineComponentProvider"),await Cv(t,new V5(void 0));return t._offlineComponents}async function SP(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(_e(Yo,"Using user provided OnlineComponentProvider"),await yC(t,t._uninitializedComponentsProvider._online)):(_e(Yo,"Using default OnlineComponentProvider"),await yC(t,new S0))),t._onlineComponents}function F5(t){return SP(t).then((e=>e.syncEngine))}async function vC(t){const e=await SP(t),n=e.eventManager;return n.onListen=S5.bind(null,e.syncEngine),n.onUnlisten=b5.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=w5.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=C5.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP="firestore.googleapis.com",TC=!0;class EC{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new we(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=AP,this.ssl=TC}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:TC;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=nP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<m6)throw new we(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}e3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wP((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zm{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new EC({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new EC(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new j4;switch(i.type){case"firstParty":return new J4(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new we(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=_C.get(n);i&&(_e("ComponentProvider","Removing Datastore"),_C.delete(n),i.terminate())})(this),Promise.resolve()}}function B5(t,e,n,i={}){var r;t=Fo(t,zm);const o=qs(e),l=t._getSettings(),c=Object.assign(Object.assign({},l),{emulatorOptions:t._getEmulatorOptions()}),f=`${e}:${n}`;o&&(Am(`https://${f}`),bm("Firestore",!0)),l.host!==AP&&l.host!==f&&zo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},l),{host:f,ssl:o,emulatorOptions:i});if(!ja(d,c)&&(t._setSettings(d),i.mockUserToken)){let p,v;if(typeof i.mockUserToken=="string")p=i.mockUserToken,v=si.MOCK_USER;else{p=E1(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new we(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new si(T)}t._authCredentials=new $4(new hN(p,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Du(this.firestore,e,this._query)}}class An{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new An(this.firestore,e,this._key)}toJSON(){return{type:An._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Xf(n,An._jsonSchema))return new An(e,i||null,new Me(kt.fromString(n.referencePath)))}}An._jsonSchemaVersion="firestore/documentReference/1.0",An._jsonSchema={type:wn("string",An._jsonSchemaVersion),referencePath:wn("string")};class Bo extends Du{constructor(e,n,i){super(e,n,L_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new An(this.firestore,null,new Me(e))}withConverter(e){return new Bo(this.firestore,e,this._path)}}function Mu(t,e,...n){if(t=Vt(t),mN("collection","path",e),t instanceof zm){const i=kt.fromString(e,...n);return Mb(i),new Bo(t,null,i)}{if(!(t instanceof An||t instanceof Bo))throw new we(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(kt.fromString(e,...n));return Mb(i),new Bo(t.firestore,null,i)}}function id(t,e,...n){if(t=Vt(t),arguments.length===1&&(e=N_.newId()),mN("doc","path",e),t instanceof zm){const i=kt.fromString(e,...n);return Db(i),new An(t,null,new Me(i))}{if(!(t instanceof An||t instanceof Bo))throw new we(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(kt.fromString(e,...n));return Db(i),new An(t.firestore,t instanceof Bo?t.converter:null,new Me(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="AsyncQueue";class wC{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new oP(this,"async_queue_retry"),this.oc=()=>{const i=bv();i&&_e(SC,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const n=bv();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=bv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new Ua;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Nu(e))throw e;_e(SC,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const n=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,Os("INTERNAL UNHANDLED ERROR: ",AC(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=n,n}enqueueAfterDelay(e,n,i){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const r=W_.createAndSchedule(this,e,n,i,(o=>this.lc(o)));return this.ec.push(r),r}ac(){this.tc&&Be(47125,{hc:AC(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function AC(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(t){return(function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1})(t,["next","error","complete"])}class _u extends zm{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new wC,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new wC(e),this._firestoreClient=void 0,await e}}}function q5(t,e){const n=typeof t=="object"?t:Cm(),i=typeof t=="string"?t:Fp,r=$f(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=m_("firestore");o&&B5(r,...o)}return r}function bP(t){if(t._terminated)throw new we(ce.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||z5(t),t._firestoreClient}function z5(t){var e,n,i;const r=t._freezeSettings(),o=(function(c,f,d,p){return new f3(c,f,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,wP(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new O5(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(c){const f=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(f),_online:f}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vr(Yn.fromBase64String(e))}catch(n){throw new we(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new vr(Yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:vr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Xf(e,vr._jsonSchema))return vr.fromBase64String(e.bytes)}}vr._jsonSchemaVersion="firestore/bytes/1.0",vr._jsonSchema={type:wn("string",vr._jsonSchemaVersion),bytes:wn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new we(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new we(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new we(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ze(this._lat,e._lat)||Ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ts._jsonSchemaVersion}}static fromJSON(e){if(Xf(e,ts._jsonSchema))return new ts(e.latitude,e.longitude)}}ts._jsonSchemaVersion="firestore/geoPoint/1.0",ts._jsonSchema={type:wn("string",ts._jsonSchemaVersion),latitude:wn("number"),longitude:wn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ns._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Xf(e,ns._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ns(e.vectorValues);throw new we(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ns._jsonSchemaVersion="firestore/vectorValue/1.0",ns._jsonSchema={type:wn("string",ns._jsonSchemaVersion),vectorValues:wn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5=/^__.*__$/;class G5{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ta(e,this.data,this.fieldMask,n,this.fieldTransforms):new Zf(e,this.data,n,this.fieldTransforms)}}class CP{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new ta(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function xP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Be(40011,{Ec:t})}}class nT{constructor(e,n,i,r,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new nT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Rc({path:i,mc:!1});return r.fc(e),r}gc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Rc({path:i,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Jp(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(xP(this.Ec)&&H5.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class j5{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Fm(e)}Dc(e,n,i,r=!1){return new nT({Ec:e,methodName:n,bc:i,path:Kn.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function iT(t){const e=t._freezeSettings(),n=Fm(t._databaseId);return new j5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $5(t,e,n,i,r,o={}){const l=t.Dc(o.merge||o.mergeFields?2:0,e,n,r);rT("Data must be an object, but it was:",l,i);const c=IP(i,l);let f,d;if(o.merge)f=new Ji(l.fieldMask),d=l.fieldTransforms;else if(o.mergeFields){const p=[];for(const v of o.mergeFields){const T=w0(e,v,n);if(!l.contains(T))throw new we(ce.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);NP(p,T)||p.push(T)}f=new Ji(p),d=l.fieldTransforms.filter((v=>f.covers(v.field)))}else f=null,d=l.fieldTransforms;return new G5(new Mi(c),f,d)}class Gm extends tT{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gm}}function K5(t,e,n,i){const r=t.Dc(1,e,n);rT("Data must be an object, but it was:",r,i);const o=[],l=Mi.empty();ea(i,((f,d)=>{const p=sT(e,f,n);d=Vt(d);const v=r.gc(p);if(d instanceof Gm)o.push(p);else{const T=rd(d,v);T!=null&&(o.push(p),l.set(p,T))}}));const c=new Ji(o);return new CP(l,c,r.fieldTransforms)}function Y5(t,e,n,i,r,o){const l=t.Dc(1,e,n),c=[w0(e,i,n)],f=[r];if(o.length%2!=0)throw new we(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)c.push(w0(e,o[T])),f.push(o[T+1]);const d=[],p=Mi.empty();for(let T=c.length-1;T>=0;--T)if(!NP(d,c[T])){const w=c[T];let x=f[T];x=Vt(x);const N=l.gc(w);if(x instanceof Gm)d.push(w);else{const P=rd(x,N);P!=null&&(d.push(w),p.set(w,P))}}const v=new Ji(d);return new CP(p,v,l.fieldTransforms)}function J5(t,e,n,i=!1){return rd(n,t.Dc(i?4:3,e))}function rd(t,e){if(RP(t=Vt(t)))return rT("Unsupported field value:",e,t),IP(t,e);if(t instanceof tT)return(function(i,r){if(!xP(r.Ec))throw r.wc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.wc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,r){const o=[];let l=0;for(const c of i){let f=rd(c,r.yc(l));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),l++}return{arrayValue:{values:o}}})(t,e)}return(function(i,r){if((i=Vt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return k3(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Ht.fromDate(i);return{timestampValue:jp(r.serializer,o)}}if(i instanceof Ht){const o=new Ht(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:jp(r.serializer,o)}}if(i instanceof ts)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof vr)return{bytesValue:JN(r.serializer,i._byteString)};if(i instanceof An){const o=r.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw r.wc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:q_(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof ns)return(function(l,c){return{mapValue:{fields:{[AN]:{stringValue:bN},[Bp]:{arrayValue:{values:l.toArray().map((d=>{if(typeof d!="number")throw c.wc("VectorValues must only contain numeric values.");return O_(c.serializer,d)}))}}}}}})(i,r);throw r.wc(`Unsupported field value: ${Nm(i)}`)})(t,e)}function IP(t,e){const n={};return vN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ea(t,((i,r)=>{const o=rd(r,e.Vc(i));o!=null&&(n[i]=o)})),{mapValue:{fields:n}}}function RP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ht||t instanceof ts||t instanceof vr||t instanceof An||t instanceof tT||t instanceof ns)}function rT(t,e,n){if(!RP(n)||!gN(n)){const i=Nm(n);throw i==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+i)}}function w0(t,e,n){if((e=Vt(e))instanceof Hm)return e._internalPath;if(typeof e=="string")return sT(t,e);throw Jp("Field path arguments must be of type string or ",t,!1,void 0,n)}const W5=new RegExp("[~\\*/\\[\\]]");function sT(t,e,n){if(e.search(W5)>=0)throw Jp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Hm(...e.split("."))._internalPath}catch{throw Jp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Jp(t,e,n,i,r){const o=i&&!i.isEmpty(),l=r!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let f="";return(o||l)&&(f+=" (found",o&&(f+=` in field ${i}`),l&&(f+=` in document ${r}`),f+=")"),new we(ce.INVALID_ARGUMENT,c+t+f)}function NP(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new An(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new X5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(DP("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class X5 extends PP{data(){return super.data()}}function DP(t,e){return typeof e=="string"?sT(t,e):e instanceof Hm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q5(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new we(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class oT{}class Z5 extends oT{}function aT(t,e,...n){let i=[];e instanceof oT&&i.push(e),i=i.concat(n),(function(o){const l=o.filter((f=>f instanceof uT)).length,c=o.filter((f=>f instanceof lT)).length;if(l>1||l>0&&c>0)throw new we(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const r of i)t=r._apply(t);return t}class lT extends Z5{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new lT(e,n,i)}_apply(e){const n=this._parse(e);return MP(e._query,n),new Du(e.firestore,e.converter,d0(e._query,n))}_parse(e){const n=iT(e.firestore);return(function(o,l,c,f,d,p,v){let T;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new we(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){xC(v,p);const x=[];for(const N of v)x.push(CC(f,o,N));T={arrayValue:{values:x}}}else T=CC(f,o,v)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||xC(v,p),T=J5(c,l,v,p==="in"||p==="not-in");return Sn.create(d,p,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class uT extends oT{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new uT(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Ur.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(r,o){let l=r;const c=o.getFlattenedFilters();for(const f of c)MP(l,f),l=d0(l,f)})(e._query,n),new Du(e.firestore,e.converter,d0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function CC(t,e,n){if(typeof(n=Vt(n))=="string"){if(n==="")throw new we(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!MN(e)&&n.indexOf("/")!==-1)throw new we(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(kt.fromString(n));if(!Me.isDocumentKey(i))throw new we(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return qb(t,new Me(i))}if(n instanceof An)return qb(t,n._key);throw new we(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nm(n)}.`)}function xC(t,e){if(!Array.isArray(t)||t.length===0)throw new we(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function MP(t,e){const n=(function(r,o){for(const l of r)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new we(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class eF{convertValue(e,n="none"){switch($o(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(jo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Be(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return ea(e,((r,o)=>{i[r]=this.convertValue(o,n)})),i}convertVectorValue(e){var n,i,r;const o=(r=(i=(n=e.fields)===null||n===void 0?void 0:n[Bp].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map((l=>pn(l.doubleValue)));return new ns(o)}convertGeoPoint(e){return new ts(pn(e.latitude),pn(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Mm(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Nf(e));default:return null}}convertTimestamp(e){const n=Go(e);return new Ht(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=kt.fromString(e);wt(tP(i),9688,{name:e});const r=new Pf(i.get(1),i.get(3)),o=new Me(i.popFirst(5));return r.isEqual(n)||Os(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tF(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class Yc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fa extends PP{constructor(e,n,i,r,o,l){super(e,n,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(DP("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new we(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Fa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Fa._jsonSchemaVersion="firestore/documentSnapshot/1.0",Fa._jsonSchema={type:wn("string",Fa._jsonSchemaVersion),bundleSource:wn("string","DocumentSnapshot"),bundleName:wn("string"),bundle:wn("string")};class yp extends Fa{data(e={}){return super.data(e)}}class au{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Yc(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new yp(this._firestore,this._userDataWriter,i.key,i,new Yc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new we(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map((c=>{const f=new yp(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Yc(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((c=>o||c.type!==3)).map((c=>{const f=new yp(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Yc(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,p=-1;return c.type!==0&&(d=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),p=l.indexOf(c.doc.key)),{type:nF(c.type),doc:f,oldIndex:d,newIndex:p}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new we(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=au._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=N_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function nF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Be(61501,{type:t})}}au._jsonSchemaVersion="firestore/querySnapshot/1.0",au._jsonSchema={type:wn("string",au._jsonSchemaVersion),bundleSource:wn("string","QuerySnapshot"),bundleName:wn("string"),bundle:wn("string")};class kP extends eF{constructor(e){super(),this.firestore=e}convertBytes(e){return new vr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new An(this.firestore,null,n)}}function iF(t,e,n,...i){t=Fo(t,An);const r=Fo(t.firestore,_u),o=iT(r);let l;return l=typeof(e=Vt(e))=="string"||e instanceof Hm?Y5(o,"updateDoc",t._key,e,n,i):K5(o,"updateDoc",t._key,e),hT(r,[l.toMutation(t._key,Or.exists(!0))])}function cT(t){return hT(Fo(t.firestore,_u),[new U_(t._key,Or.none())])}function fT(t,e){const n=Fo(t.firestore,_u),i=id(t),r=tF(t.converter,e);return hT(n,[$5(iT(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Or.exists(!1))]).then((()=>i))}function dT(t,...e){var n,i,r;t=Vt(t);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||bC(e[l])||(o=e[l++]);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(bC(e[l])){const v=e[l];e[l]=(n=v.next)===null||n===void 0?void 0:n.bind(v),e[l+1]=(i=v.error)===null||i===void 0?void 0:i.bind(v),e[l+2]=(r=v.complete)===null||r===void 0?void 0:r.bind(v)}let f,d,p;if(t instanceof An)d=Fo(t.firestore,_u),p=L_(t._key.path),f={next:v=>{e[l]&&e[l](rF(d,t,v))},error:e[l+1],complete:e[l+2]};else{const v=Fo(t,Du);d=Fo(v.firestore,_u),p=v._query;const T=new kP(d);f={next:w=>{e[l]&&e[l](new au(d,T,v,w))},error:e[l+1],complete:e[l+2]},Q5(t._query)}return(function(T,w,x,N){const P=new L5(N),O=new y5(w,P,x);return T.asyncQueue.enqueueAndForget((async()=>h5(await vC(T),O))),()=>{P.Ou(),T.asyncQueue.enqueueAndForget((async()=>p5(await vC(T),O)))}})(bP(d),p,c,f)}function hT(t,e){return(function(i,r){const o=new Ua;return i.asyncQueue.enqueueAndForget((async()=>x5(await F5(i),r,o))),o.promise})(bP(t),e)}function rF(t,e,n){const i=n.docs.get(e._key),r=new kP(t);return new Fa(t,r,e._key,i,new Yc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){Iu=r})(Qa),qo(new ks("firestore",((i,{instanceIdentifier:r,options:o})=>{const l=i.getProvider("app").getImmediate(),c=new _u(new K4(i.getProvider("auth-internal")),new W4(l,i.getProvider("app-check-internal")),(function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new we(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pf(d.options.projectId,p)})(l,r),l);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c}),"PUBLIC").setMultipleInstances(!0)),_r(xb,Ib,e),_r(xb,Ib,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP="firebasestorage.googleapis.com",LP="storageBucket",sF=120*1e3,oF=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an extends Fr{constructor(e,n,i=0){super(xv(e),`Firebase Storage: ${n} (${xv(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,an.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return xv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var on;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(on||(on={}));function xv(t){return"storage/"+t}function pT(){const t="An unknown error occurred, please check the error payload for server response.";return new an(on.UNKNOWN,t)}function aF(t){return new an(on.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function lF(t){return new an(on.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function uF(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new an(on.UNAUTHENTICATED,t)}function cF(){return new an(on.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function fF(t){return new an(on.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function dF(){return new an(on.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function hF(){return new an(on.CANCELED,"User canceled the upload/download.")}function pF(t){return new an(on.INVALID_URL,"Invalid URL '"+t+"'.")}function mF(t){return new an(on.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function gF(){return new an(on.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+LP+"' property when initializing the app?")}function yF(){return new an(on.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function vF(){return new an(on.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function _F(t){return new an(on.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function A0(t){return new an(on.INVALID_ARGUMENT,t)}function OP(){return new an(on.APP_DELETED,"The Firebase app was deleted.")}function TF(t){return new an(on.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function cf(t,e){return new an(on.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Vc(t){throw new an(on.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Wi.makeFromUrl(e,n)}catch{return new Wi(e,"")}if(i.path==="")return i;throw mF(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function o(G){G.path.charAt(G.path.length-1)==="/"&&(G.path_=G.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+r+l,"i"),f={bucket:1,path:3};function d(G){G.path_=decodeURIComponent(G.path)}const p="v[A-Za-z0-9_]+",v=n.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",w=new RegExp(`^https?://${v}/${p}/b/${r}/o${T}`,"i"),x={bucket:1,path:3},N=n===VP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",O=new RegExp(`^https?://${N}/${r}/${P}`,"i"),F=[{regex:c,indices:f,postModify:o},{regex:w,indices:x,postModify:d},{regex:O,indices:{bucket:1,path:2},postModify:d}];for(let G=0;G<F.length;G++){const K=F[G],H=K.regex.exec(e);if(H){const R=H[K.indices.bucket];let I=H[K.indices.path];I||(I=""),i=new Wi(R,I),K.postModify(i);break}}if(i==null)throw pF(e);return i}}class EF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SF(t,e,n){let i=1,r=null,o=null,l=!1,c=0;function f(){return c===2}let d=!1;function p(...P){d||(d=!0,e.apply(null,P))}function v(P){r=setTimeout(()=>{r=null,t(w,f())},P)}function T(){o&&clearTimeout(o)}function w(P,...O){if(d){T();return}if(P){T(),p.call(null,P,...O);return}if(f()||l){T(),p.call(null,P,...O);return}i<64&&(i*=2);let F;c===1?(c=2,F=0):F=(i+Math.random())*1e3,v(F)}let x=!1;function N(P){x||(x=!0,T(),!d&&(r!==null?(P||(c=2),clearTimeout(r),v(0)):P||(c=1)))}return v(0),o=setTimeout(()=>{l=!0,N(!0)},n),N}function wF(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AF(t){return t!==void 0}function bF(t){return typeof t=="object"&&!Array.isArray(t)}function mT(t){return typeof t=="string"||t instanceof String}function IC(t){return gT()&&t instanceof Blob}function gT(){return typeof Blob<"u"}function RC(t,e,n,i){if(i<e)throw A0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw A0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function UP(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var Ba;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ba||(Ba={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CF(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||r||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(e,n,i,r,o,l,c,f,d,p,v,T=!0,w=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=f,this.timeout_=d,this.progressCallback_=p,this.connectionFactory_=v,this.retry=T,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,N)=>{this.resolve_=x,this.reject_=N,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new Fh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=c=>{const f=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,d)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const c=o.getErrorCode()===Ba.NO_ERROR,f=o.getStatus();if(!c||CF(f,this.additionalRetryCodes_)&&this.retry){const p=o.getErrorCode()===Ba.ABORT;i(!1,new Fh(!1,null,p));return}const d=this.successCodes_.indexOf(f)!==-1;i(!0,new Fh(d,o))})},n=(i,r)=>{const o=this.resolve_,l=this.reject_,c=r.connection;if(r.wasSuccessCode)try{const f=this.callback_(c,c.getResponse());AF(f)?o(f):o()}catch(f){l(f)}else if(c!==null){const f=pT();f.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,f)):l(f)}else if(r.canceled){const f=this.appDelete_?OP():hF();l(f)}else{const f=dF();l(f)}};this.canceled_?n(!1,new Fh(!1,null,!0)):this.backoffId_=SF(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&wF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Fh{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function IF(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function RF(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function NF(t,e){e&&(t["X-Firebase-GMPID"]=e)}function PF(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function DF(t,e,n,i,r,o,l=!0,c=!1){const f=UP(t.urlParams),d=t.url+f,p=Object.assign({},t.headers);return NF(p,e),IF(p,n),RF(p,o),PF(p,i),new xF(d,t.method,p,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,l,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MF(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function kF(...t){const e=MF();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(gT())return new Blob(t);throw new an(on.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function VF(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LF(t){if(typeof atob>"u")throw _F("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Iv{constructor(e,n){this.data=e,this.contentType=n||null}}function FP(t,e){switch(t){case kr.RAW:return new Iv(BP(e));case kr.BASE64:case kr.BASE64URL:return new Iv(qP(t,e));case kr.DATA_URL:return new Iv(UF(e),FF(e))}throw pT()}function BP(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=i,l=t.charCodeAt(++n);i=65536|(o&1023)<<10|l&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function OF(t){let e;try{e=decodeURIComponent(t)}catch{throw cf(kr.DATA_URL,"Malformed data URL.")}return BP(e)}function qP(t,e){switch(t){case kr.BASE64:{const r=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(r||o)throw cf(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case kr.BASE64URL:{const r=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(r||o)throw cf(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=LF(e)}catch(r){throw r.message.includes("polyfill")?r:cf(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class zP{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw cf(kr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=BF(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function UF(t){const e=new zP(t);return e.base64?qP(kr.BASE64,e.rest):OF(e.rest)}function FF(t){return new zP(t).contentType}function BF(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,n){let i=0,r="";IC(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(IC(this.data_)){const i=this.data_,r=VF(i,e,n);return r===null?null:new No(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new No(i,!0)}}static getBlob(...e){if(gT()){const n=e.map(i=>i instanceof No?i.data_:i);return new No(kF.apply(null,n))}else{const n=e.map(l=>mT(l)?FP(kr.RAW,l).data:l.data_);let i=0;n.forEach(l=>{i+=l.byteLength});const r=new Uint8Array(i);let o=0;return n.forEach(l=>{for(let c=0;c<l.length;c++)r[o++]=l[c]}),new No(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(t){let e;try{e=JSON.parse(t)}catch{return null}return bF(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qF(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function zF(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function GP(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HF(t,e){return e}class _i{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||HF}}let Bh=null;function GF(t){return!mT(t)||t.length<2?t:GP(t)}function jP(){if(Bh)return Bh;const t=[];t.push(new _i("bucket")),t.push(new _i("generation")),t.push(new _i("metageneration")),t.push(new _i("name","fullPath",!0));function e(o,l){return GF(l)}const n=new _i("name");n.xform=e,t.push(n);function i(o,l){return l!==void 0?Number(l):l}const r=new _i("size");return r.xform=i,t.push(r),t.push(new _i("timeCreated")),t.push(new _i("updated")),t.push(new _i("md5Hash",null,!0)),t.push(new _i("cacheControl",null,!0)),t.push(new _i("contentDisposition",null,!0)),t.push(new _i("contentEncoding",null,!0)),t.push(new _i("contentLanguage",null,!0)),t.push(new _i("contentType",null,!0)),t.push(new _i("metadata","customMetadata",!0)),Bh=t,Bh}function jF(t,e){function n(){const i=t.bucket,r=t.fullPath,o=new Wi(i,r);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function $F(t,e,n){const i={};i.type="file";const r=n.length;for(let o=0;o<r;o++){const l=n[o];i[l.local]=l.xform(i,e[l.server])}return jF(i,t),i}function $P(t,e,n){const i=HP(e);return i===null?null:$F(t,i,n)}function KF(t,e,n,i){const r=HP(e);if(r===null||!mT(r.downloadTokens))return null;const o=r.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(d=>{const p=t.bucket,v=t.fullPath,T="/b/"+l(p)+"/o/"+l(v),w=yT(T,n,i),x=UP({alt:"media",token:d});return w+x})[0]}function YF(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const o=e[r];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class KP{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YP(t){if(!t)throw pT()}function JF(t,e){function n(i,r){const o=$P(t,r,e);return YP(o!==null),o}return n}function WF(t,e){function n(i,r){const o=$P(t,r,e);return YP(o!==null),KF(o,r,t.host,t._protocol)}return n}function JP(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=cF():r=uF():n.getStatus()===402?r=lF(t.bucket):n.getStatus()===403?r=fF(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function XF(t){const e=JP(t);function n(i,r){let o=e(i,r);return i.getStatus()===404&&(o=aF(t.path)),o.serverResponse=r.serverResponse,o}return n}function QF(t,e,n){const i=e.fullServerUrl(),r=yT(i,t.host,t._protocol),o="GET",l=t.maxOperationRetryTime,c=new KP(r,o,WF(t,n),l);return c.errorHandler=XF(e),c}function ZF(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function eB(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=ZF(null,e)),i}function tB(t,e,n,i,r){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let F="";for(let G=0;G<2;G++)F=F+Math.random().toString().slice(2);return F}const f=c();l["Content-Type"]="multipart/related; boundary="+f;const d=eB(e,i,r),p=YF(d,n),v="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+f+`\r
Content-Type: `+d.contentType+`\r
\r
`,T=`\r
--`+f+"--",w=No.getBlob(v,i,T);if(w===null)throw yF();const x={name:d.fullPath},N=yT(o,t.host,t._protocol),P="POST",O=t.maxUploadRetryTime,k=new KP(N,P,JF(t,n),O);return k.urlParams=x,k.headers=l,k.body=w.uploadData(),k.errorHandler=JP(e),k}class nB{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ba.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ba.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ba.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r,o){if(this.sent_)throw Vc("cannot .send() more than once");if(qs(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const l in o)o.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,o[l].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Vc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Vc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Vc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Vc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class iB extends nB{initXhr(){this.xhr_.responseType="text"}}function WP(){return new iB}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n){this._service=e,n instanceof Wi?this._location=n:this._location=Wi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Wa(e,n)}get root(){const e=new Wi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return GP(this._location.path)}get storage(){return this._service}get parent(){const e=qF(this._location.path);if(e===null)return null;const n=new Wi(this._location.bucket,e);return new Wa(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw TF(e)}}function rB(t,e,n){t._throwIfRoot("uploadBytes");const i=tB(t.storage,t._location,jP(),new No(e,!0),n);return t.storage.makeRequestWithTokens(i,WP).then(r=>({metadata:r,ref:t}))}function sB(t,e,n=kr.RAW,i){t._throwIfRoot("uploadString");const r=FP(n,e),o=Object.assign({},i);return o.contentType==null&&r.contentType!=null&&(o.contentType=r.contentType),rB(t,r.data,o)}function oB(t){t._throwIfRoot("getDownloadURL");const e=QF(t.storage,t._location,jP());return t.storage.makeRequestWithTokens(e,WP).then(n=>{if(n===null)throw vF();return n})}function aB(t,e){const n=zF(t._location.path,e),i=new Wi(t._location.bucket,n);return new Wa(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lB(t){return/^[A-Za-z]+:\/\//.test(t)}function uB(t,e){return new Wa(t,e)}function XP(t,e){if(t instanceof vT){const n=t;if(n._bucket==null)throw gF();const i=new Wa(n,n._bucket);return e!=null?XP(i,e):i}else return e!==void 0?aB(t,e):t}function cB(t,e){if(e&&lB(e)){if(t instanceof vT)return uB(t,e);throw A0("To use ref(service, url), the first argument must be a Storage instance.")}else return XP(t,e)}function NC(t,e){const n=e==null?void 0:e[LP];return n==null?null:Wi.makeFromBucketSpec(n,t)}function fB(t,e,n,i={}){t.host=`${e}:${n}`;const r=qs(e);r&&(Am(`https://${t.host}/b`),bm("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:o}=i;o&&(t._overrideAuthToken=typeof o=="string"?o:E1(o,t.app.options.projectId))}class vT{constructor(e,n,i,r,o,l=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._isUsingEmulator=l,this._bucket=null,this._host=VP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=sF,this._maxUploadRetryTime=oF,this._requests=new Set,r!=null?this._bucket=Wi.makeFromBucketSpec(r,this._host):this._bucket=NC(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Wi.makeFromBucketSpec(this._url,e):this._bucket=NC(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){RC("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){RC("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Ti(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Wa(this,e)}_makeRequest(e,n,i,r,o=!0){if(this._deleted)return new EF(OP());{const l=DF(e,this._appId,i,r,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const PC="@firebase/storage",DC="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP="storage";function dB(t,e,n,i){return t=Vt(t),sB(t,e,n,i)}function hB(t){return t=Vt(t),oB(t)}function pB(t,e){return t=Vt(t),cB(t,e)}function mB(t=Cm(),e){t=Vt(t);const i=$f(t,QP).getImmediate({identifier:e}),r=m_("storage");return r&&gB(i,...r),i}function gB(t,e,n,i={}){fB(t,e,n,i)}function yB(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new vT(n,i,r,e,Qa)}function vB(){qo(new ks(QP,yB,"PUBLIC").setMultipleInstances(!0)),_r(PC,DC,""),_r(PC,DC,"esm2017")}vB();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _B="type.googleapis.com/google.protobuf.Int64Value",TB="type.googleapis.com/google.protobuf.UInt64Value";function ZP(t,e){const n={};for(const i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}function Wp(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Wp(e));if(typeof t=="function"||typeof t=="object")return ZP(t,e=>Wp(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Tu(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case _B:case TB:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Tu(e)):typeof t=="function"||typeof t=="object"?ZP(t,e=>Tu(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ki extends Fr{constructor(e,n,i){super(`${_T}/${e}`,n||""),this.details=i,Object.setPrototypeOf(this,ki.prototype)}}function EB(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Xp(t,e){let n=EB(t),i=n,r;try{const o=e&&e.error;if(o){const l=o.status;if(typeof l=="string"){if(!MC[l])return new ki("internal","internal");n=MC[l],i=l}const c=o.message;typeof c=="string"&&(i=c),r=o.details,r!==void 0&&(r=Tu(r))}}catch{}return n==="ok"?null:new ki(n,i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SB{constructor(e,n,i,r){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Ti(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||n.get().then(o=>this.auth=o,()=>{}),this.messaging||i.get().then(o=>this.messaging=o,()=>{}),this.appCheck||r==null||r.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),i=await this.getMessagingToken(),r=await this.getAppCheckToken(e);return{authToken:n,messagingToken:i,appCheckToken:r}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="us-central1",wB=/^data: (.*?)(?:\n|$)/;function AB(t){let e=null;return{promise:new Promise((n,i)=>{e=setTimeout(()=>{i(new ki("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class bB{constructor(e,n,i,r,o=b0,l=(...c)=>fetch(...c)){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new SB(e,n,i,r),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(o);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=b0}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function CB(t,e,n){const i=qs(e);t.emulatorOrigin=`http${i?"s":""}://${e}:${n}`,i&&(Am(t.emulatorOrigin),bm("Functions",!0))}function xB(t,e,n){const i=r=>RB(t,e,r,{});return i.stream=(r,o)=>PB(t,e,r,o),i}async function IB(t,e,n,i){n["Content-Type"]="application/json";let r;try{r=await i(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let o=null;try{o=await r.json()}catch{}return{status:r.status,json:o}}async function eD(t,e){const n={},i=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(n.Authorization="Bearer "+i.authToken),i.messagingToken&&(n["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=i.appCheckToken),n}function RB(t,e,n,i){const r=t._url(e);return NB(t,r,n,i)}async function NB(t,e,n,i){n=Wp(n);const r={data:n},o=await eD(t,i),l=i.timeout||7e4,c=AB(l),f=await Promise.race([IB(e,r,o,t.fetchImpl),c.promise,t.cancelAllRequests]);if(c.cancel(),!f)throw new ki("cancelled","Firebase Functions instance was deleted.");const d=Xp(f.status,f.json);if(d)throw d;if(!f.json)throw new ki("internal","Response is not valid JSON object.");let p=f.json.data;if(typeof p>"u"&&(p=f.json.result),typeof p>"u")throw new ki("internal","Response is missing data field.");return{data:Tu(p)}}function PB(t,e,n,i){const r=t._url(e);return DB(t,r,n,i||{})}async function DB(t,e,n,i){var r;n=Wp(n);const o={data:n},l=await eD(t,i);l["Content-Type"]="application/json",l.Accept="text/event-stream";let c;try{c=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:l,signal:i==null?void 0:i.signal})}catch(w){if(w instanceof Error&&w.name==="AbortError"){const N=new ki("cancelled","Request was cancelled.");return{data:Promise.reject(N),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(N)}}}}}}const x=Xp(0,null);return{data:Promise.reject(x),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(x)}}}}}}let f,d;const p=new Promise((w,x)=>{f=w,d=x});(r=i==null?void 0:i.signal)===null||r===void 0||r.addEventListener("abort",()=>{const w=new ki("cancelled","Request was cancelled.");d(w)});const v=c.body.getReader(),T=MB(v,f,d,i==null?void 0:i.signal);return{stream:{[Symbol.asyncIterator](){const w=T.getReader();return{async next(){const{value:x,done:N}=await w.read();return{value:x,done:N}},async return(){return await w.cancel(),{done:!0,value:void 0}}}}},data:p}}function MB(t,e,n,i){const r=(l,c)=>{const f=l.match(wB);if(!f)return;const d=f[1];try{const p=JSON.parse(d);if("result"in p){e(Tu(p.result));return}if("message"in p){c.enqueue(Tu(p.message));return}if("error"in p){const v=Xp(0,p);c.error(v),n(v);return}}catch(p){if(p instanceof ki){c.error(p),n(p);return}}},o=new TextDecoder;return new ReadableStream({start(l){let c="";return f();async function f(){if(i!=null&&i.aborted){const d=new ki("cancelled","Request was cancelled");return l.error(d),n(d),Promise.resolve()}try{const{value:d,done:p}=await t.read();if(p){c.trim()&&r(c.trim(),l),l.close();return}if(i!=null&&i.aborted){const T=new ki("cancelled","Request was cancelled");l.error(T),n(T),await t.cancel();return}c+=o.decode(d,{stream:!0});const v=c.split(`
`);c=v.pop()||"";for(const T of v)T.trim()&&r(T.trim(),l);return f()}catch(d){const p=d instanceof ki?d:Xp(0,null);l.error(p),n(p)}}},cancel(){return t.cancel()}})}const kC="@firebase/functions",VC="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kB="auth-internal",VB="app-check-internal",LB="messaging-internal";function OB(t){const e=(n,{instanceIdentifier:i})=>{const r=n.getProvider("app").getImmediate(),o=n.getProvider(kB),l=n.getProvider(LB),c=n.getProvider(VB);return new bB(r,o,l,c,i)};qo(new ks(_T,e,"PUBLIC").setMultipleInstances(!0)),_r(kC,VC,t),_r(kC,VC,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UB(t=Cm(),e=b0){const i=$f(Vt(t),_T).getImmediate({identifier:e}),r=m_("functions");return r&&FB(i,...r),i}function FB(t,e,n){CB(Vt(t),e,n)}function BB(t,e,n){return xB(Vt(t),e)}OB();const qB={apiKey:"AIzaSyAoMQ8oVPP5oFjw8YzgF0H1Dy4DAJmNaKM",authDomain:"dresscode-ai-32c50.firebaseapp.com",projectId:"dresscode-ai-32c50",storageBucket:"dresscode-ai-32c50.firebasestorage.app",messagingSenderId:"215593114437",appId:"1:215593114437:web:5d9c1f3161182802f37c2c"},jm=A1(qB),Jc=q4(jm),zB=new Is,os=q5(jm),HB=mB(jm),GB=UB(jm,"us-central1");/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let jB,$B;function KB(){return{geminiUrl:jB,vertexUrl:$B}}function YB(t,e,n,i){var r,o;if(!(t!=null&&t.baseUrl)){const l=KB();return e?(r=l.vertexUrl)!==null&&r!==void 0?r:n:(o=l.geminiUrl)!==null&&o!==void 0?o:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zs{}function ve(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const o=e[r];return o!=null?String(o):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function y(t,e,n){for(let o=0;o<e.length-1;o++){const l=e[o];if(l.endsWith("[]")){const c=l.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(t[c])){const f=t[c];if(Array.isArray(n))for(let d=0;d<f.length;d++){const p=f[d];y(p,e.slice(o+1),n[d])}else for(const d of f)y(d,e.slice(o+1),n)}return}else if(l.endsWith("[0]")){const c=l.slice(0,-3);c in t||(t[c]=[{}]);const f=t[c];y(f[0],e.slice(o+1),n);return}(!t[l]||typeof t[l]!="object")&&(t[l]={}),t=t[l]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function m(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const r=e[i];if(r.endsWith("[]")){const o=r.slice(0,-2);if(o in t){const l=t[o];return Array.isArray(l)?l.map(c=>m(c,e.slice(i+1),n)):n}else return n}else t=t[r]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function JB(t,e){for(const[n,i]of Object.entries(e)){const r=n.split("."),o=i.split("."),l=new Set;let c=-1;for(let f=0;f<r.length;f++)if(r[f]==="*"){c=f;break}if(c!==-1&&o.length>c)for(let f=c;f<o.length;f++){const d=o[f];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&l.add(d)}C0(t,r,o,0,l)}}function C0(t,e,n,i,r){if(i>=e.length||typeof t!="object"||t===null)return;const o=e[i];if(o.endsWith("[]")){const l=o.slice(0,-2),c=t;if(l in c&&Array.isArray(c[l]))for(const f of c[l])C0(f,e,n,i+1,r)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const l=t,c=Object.keys(l).filter(d=>!d.startsWith("_")&&!r.has(d)),f={};for(const d of c)f[d]=l[d];for(const[d,p]of Object.entries(f)){const v=[];for(const T of n.slice(i))T==="*"?v.push(d):v.push(T);y(l,v,p)}for(const d of c)delete l[d]}}else{const l=t;o in l&&C0(l[o],e,n,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TT(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WB(t){const e={},n=m(t,["operationName"]);n!=null&&y(e,["operationName"],n);const i=m(t,["resourceName"]);return i!=null&&y(e,["_url","resourceName"],i),e}function XB(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response","generateVideoResponse"]);return l!=null&&y(e,["response"],ZB(l)),e}function QB(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response"]);return l!=null&&y(e,["response"],e9(l)),e}function ZB(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>t9(l))),y(e,["generatedVideos"],o)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const r=m(t,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function e9(t){const e={},n=m(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>n9(l))),y(e,["generatedVideos"],o)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const r=m(t,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function t9(t){const e={},n=m(t,["video"]);return n!=null&&y(e,["video"],l9(n)),e}function n9(t){const e={},n=m(t,["_self"]);return n!=null&&y(e,["video"],u9(n)),e}function i9(t){const e={},n=m(t,["operationName"]);return n!=null&&y(e,["_url","operationName"],n),e}function r9(t){const e={},n=m(t,["operationName"]);return n!=null&&y(e,["_url","operationName"],n),e}function s9(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response"]);return l!=null&&y(e,["response"],o9(l)),e}function o9(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["parent"]);i!=null&&y(e,["parent"],i);const r=m(t,["documentName"]);return r!=null&&y(e,["documentName"],r),e}function tD(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response"]);return l!=null&&y(e,["response"],a9(l)),e}function a9(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["parent"]);i!=null&&y(e,["parent"],i);const r=m(t,["documentName"]);return r!=null&&y(e,["documentName"],r),e}function l9(t){const e={},n=m(t,["uri"]);n!=null&&y(e,["uri"],n);const i=m(t,["encodedVideo"]);i!=null&&y(e,["videoBytes"],TT(i));const r=m(t,["encoding"]);return r!=null&&y(e,["mimeType"],r),e}function u9(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&y(e,["videoBytes"],TT(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var LC;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(LC||(LC={}));var OC;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(OC||(OC={}));var UC;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(UC||(UC={}));var Ge;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Ge||(Ge={}));var FC;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(FC||(FC={}));var BC;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(BC||(BC={}));var qC;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(qC||(qC={}));var zC;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(zC||(zC={}));var HC;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(HC||(HC={}));var GC;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(GC||(GC={}));var jC;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(jC||(jC={}));var $C;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})($C||($C={}));var KC;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(KC||(KC={}));var YC;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(YC||(YC={}));var JC;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(JC||(JC={}));var WC;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(WC||(WC={}));var XC;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(XC||(XC={}));var QC;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(QC||(QC={}));var ZC;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(ZC||(ZC={}));var Qp;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Qp||(Qp={}));var ex;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(ex||(ex={}));var tx;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(tx||(tx={}));var nx;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(nx||(nx={}));var x0;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(x0||(x0={}));var ix;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(ix||(ix={}));var rx;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(rx||(rx={}));var sx;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(sx||(sx={}));var ox;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(ox||(ox={}));var ax;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(ax||(ax={}));var lx;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(lx||(lx={}));var ux;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(ux||(ux={}));var cx;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(cx||(cx={}));var fx;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(fx||(fx={}));var dx;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(dx||(dx={}));var hx;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(hx||(hx={}));var px;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(px||(px={}));var mx;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(mx||(mx={}));var gx;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(gx||(gx={}));var yx;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(yx||(yx={}));var vx;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(vx||(vx={}));var _x;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(_x||(_x={}));var Tx;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Tx||(Tx={}));var Ex;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Ex||(Ex={}));var Sx;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Sx||(Sx={}));var wx;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(wx||(wx={}));var Ax;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Ax||(Ax={}));var bx;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(bx||(bx={}));var Cx;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Cx||(Cx={}));var xx;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(xx||(xx={}));var Ix;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Ix||(Ix={}));var Rx;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Rx||(Rx={}));var Nx;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Nx||(Nx={}));var Px;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Px||(Px={}));var Dx;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Dx||(Dx={}));var Wl;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Wl||(Wl={}));class I0{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Lc{get text(){var e,n,i,r,o,l,c,f;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",p=!1;const v=[];for(const T of(f=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&f!==void 0?f:[]){for(const[w,x]of Object.entries(T))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(x!==null||x!==void 0)&&v.push(w);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;p=!0,d+=T.text}}return v.length>0&&console.warn(`there are non-text parts ${v} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?d:void 0}get data(){var e,n,i,r,o,l,c,f;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const p=[];for(const v of(f=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&f!==void 0?f:[]){for(const[T,w]of Object.entries(v))T!=="inlineData"&&(w!==null||w!==void 0)&&p.push(T);v.inlineData&&typeof v.inlineData.data=="string"&&(d+=atob(v.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,i,r,o,l,c,f;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(f=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,i,r,o,l,c,f,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(f=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(v=>v.executableCode).map(v=>v.executableCode).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return(d=p==null?void 0:p[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,i,r,o,l,c,f,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(f=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(v=>v.codeExecutionResult).map(v=>v.codeExecutionResult).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return(d=p==null?void 0:p[0])===null||d===void 0?void 0:d.output}}class Mx{}class kx{}class c9{}class f9{}class d9{}class h9{}class Vx{}class Lx{}class Ox{}class p9{}class Zp{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Zp;let r;const o=e;return n?r=QB(o):r=XB(o),Object.assign(i,r),i}}class Ux{}class Fx{}class Bx{}class m9{}class g9{}class y9{}class ET{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new ET,o=s9(e);return Object.assign(i,o),i}}class v9{}class _9{}class T9{}class qx{}class E9{get text(){var e,n,i;let r="",o=!1;const l=[];for(const c of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[f,d]of Object.entries(c))f!=="text"&&f!=="thought"&&d!==null&&l.push(f);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;o=!0,r+=c.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?r:void 0}get data(){var e,n,i;let r="";const o=[];for(const l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,f]of Object.entries(l))c!=="inlineData"&&f!==null&&o.push(c);l.inlineData&&typeof l.inlineData.data=="string"&&(r+=atob(l.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class S9{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class ST{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new ST,o=tD(e);return Object.assign(i,o),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function nD(t,e){const n=gt(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function iD(t){return Array.isArray(t)?t.map(e=>em(e)):[em(t)]}function em(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function rD(t){const e=em(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function sD(t){const e=em(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function zx(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function oD(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>zx(e)):[zx(t)]}function R0(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Hx(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Gx(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function ai(t){if(t==null)throw new Error("ContentUnion is required");return R0(t)?t:{role:"user",parts:oD(t)}}function wT(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=ai(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=ai(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>ai(n)):[ai(e)]}function Tr(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Hx(t)||Gx(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ai(t)]}const e=[],n=[],i=R0(t[0]);for(const r of t){const o=R0(r);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(r);else{if(Hx(r)||Gx(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:oD(n)}),e}function w9(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(Ge).includes(n[0].toUpperCase())?n[0].toUpperCase():Ge.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(Ge).includes(i.toUpperCase())?i.toUpperCase():Ge.TYPE_UNSPECIFIED})}}function lu(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&w9(t.type,e);for(const[l,c]of Object.entries(t))if(c!=null)if(l=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(Ge).includes(c.toUpperCase())?c.toUpperCase():Ge.TYPE_UNSPECIFIED}else if(n.includes(l))e[l]=lu(c);else if(i.includes(l)){const f=[];for(const d of c){if(d.type=="null"){e.nullable=!0;continue}f.push(lu(d))}e[l]=f}else if(r.includes(l)){const f={};for(const[d,p]of Object.entries(c))f[d]=lu(p);e[l]=f}else{if(l==="additionalProperties")continue;e[l]=c}return e}function AT(t){return lu(t)}function bT(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function CT(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function ku(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=lu(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=lu(e.response));return t}function Vu(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function A9(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Hs(t,e){if(typeof e!="string")throw new Error("name must be a string");return A9(t,e,"cachedContents")}function aD(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function na(t){return TT(t)}function b9(t){return t!=null&&typeof t=="object"&&"name"in t}function C9(t){return t!=null&&typeof t=="object"&&"video"in t}function x9(t){return t!=null&&typeof t=="object"&&"uri"in t}function lD(t){var e;let n;if(b9(t)&&(n=t.name),!(x9(t)&&(n=t.uri,n===void 0))&&!(C9(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function uD(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function cD(t){for(const e of["models","tunedModels","publisherModels"])if(I9(t,e))return t[e];return[]}function I9(t,e){return t!==null&&typeof t=="object"&&e in t}function R9(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function N9(t,e={}){const n=[],i=new Set;for(const r of t){const o=r.name;if(i.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);i.add(o);const l=R9(r,e);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function fD(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function P9(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function dD(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let o=!1;for(const l of r){if(typeof l!="object"||l===null)continue;const f=l.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Lu(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function hD(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function D9(t){const e={},n=m(t,["responsesFile"]);n!=null&&y(e,["fileName"],n);const i=m(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>dq(l))),y(e,["inlinedResponses"],o)}const r=m(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["inlinedEmbedContentResponses"],o)}return e}function M9(t){const e={},n=m(t,["predictionsFormat"]);n!=null&&y(e,["format"],n);const i=m(t,["gcsDestination","outputUriPrefix"]);i!=null&&y(e,["gcsUri"],i);const r=m(t,["bigqueryDestination","outputUri"]);return r!=null&&y(e,["bigqueryUri"],r),e}function k9(t){const e={},n=m(t,["format"]);n!=null&&y(e,["predictionsFormat"],n);const i=m(t,["gcsUri"]);i!=null&&y(e,["gcsDestination","outputUriPrefix"],i);const r=m(t,["bigqueryUri"]);if(r!=null&&y(e,["bigqueryDestination","outputUri"],r),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(m(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function vp(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata","displayName"]);i!=null&&y(e,["displayName"],i);const r=m(t,["metadata","state"]);r!=null&&y(e,["state"],hD(r));const o=m(t,["metadata","createTime"]);o!=null&&y(e,["createTime"],o);const l=m(t,["metadata","endTime"]);l!=null&&y(e,["endTime"],l);const c=m(t,["metadata","updateTime"]);c!=null&&y(e,["updateTime"],c);const f=m(t,["metadata","model"]);f!=null&&y(e,["model"],f);const d=m(t,["metadata","output"]);return d!=null&&y(e,["dest"],D9(dD(d))),e}function N0(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["displayName"]);i!=null&&y(e,["displayName"],i);const r=m(t,["state"]);r!=null&&y(e,["state"],hD(r));const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["createTime"]);l!=null&&y(e,["createTime"],l);const c=m(t,["startTime"]);c!=null&&y(e,["startTime"],c);const f=m(t,["endTime"]);f!=null&&y(e,["endTime"],f);const d=m(t,["updateTime"]);d!=null&&y(e,["updateTime"],d);const p=m(t,["model"]);p!=null&&y(e,["model"],p);const v=m(t,["inputConfig"]);v!=null&&y(e,["src"],V9(v));const T=m(t,["outputConfig"]);T!=null&&y(e,["dest"],M9(dD(T)));const w=m(t,["completionStats"]);return w!=null&&y(e,["completionStats"],w),e}function V9(t){const e={},n=m(t,["instancesFormat"]);n!=null&&y(e,["format"],n);const i=m(t,["gcsSource","uris"]);i!=null&&y(e,["gcsUri"],i);const r=m(t,["bigquerySource","inputUri"]);return r!=null&&y(e,["bigqueryUri"],r),e}function L9(t,e){const n={};if(m(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(m(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=m(e,["fileName"]);i!=null&&y(n,["fileName"],i);const r=m(e,["inlinedRequests"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>fq(t,l))),y(n,["requests","requests"],o)}return n}function O9(t){const e={},n=m(t,["format"]);n!=null&&y(e,["instancesFormat"],n);const i=m(t,["gcsUri"]);i!=null&&y(e,["gcsSource","uris"],i);const r=m(t,["bigqueryUri"]);if(r!=null&&y(e,["bigquerySource","inputUri"],r),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function U9(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function F9(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Lu(t,i)),n}function B9(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Lu(t,i)),n}function q9(t){const e={},n=m(t,["content"]);n!=null&&y(e,["content"],n);const i=m(t,["citationMetadata"]);i!=null&&y(e,["citationMetadata"],z9(i));const r=m(t,["tokenCount"]);r!=null&&y(e,["tokenCount"],r);const o=m(t,["finishReason"]);o!=null&&y(e,["finishReason"],o);const l=m(t,["avgLogprobs"]);l!=null&&y(e,["avgLogprobs"],l);const c=m(t,["groundingMetadata"]);c!=null&&y(e,["groundingMetadata"],c);const f=m(t,["index"]);f!=null&&y(e,["index"],f);const d=m(t,["logprobsResult"]);d!=null&&y(e,["logprobsResult"],d);const p=m(t,["safetyRatings"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(w=>w)),y(e,["safetyRatings"],T)}const v=m(t,["urlContextMetadata"]);return v!=null&&y(e,["urlContextMetadata"],v),e}function z9(t){const e={},n=m(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),y(e,["citations"],i)}return e}function pD(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>_q(o))),y(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function H9(t,e){const n={},i=m(t,["displayName"]);if(e!==void 0&&i!=null&&y(e,["batch","displayName"],i),m(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function G9(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const r=m(t,["dest"]);return e!==void 0&&r!=null&&y(e,["outputConfig"],k9(P9(r))),n}function jx(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const r=m(e,["src"]);r!=null&&y(n,["batch","inputConfig"],L9(t,fD(t,r)));const o=m(e,["config"]);return o!=null&&H9(o,n),n}function j9(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["model"],gt(t,i));const r=m(e,["src"]);r!=null&&y(n,["inputConfig"],O9(fD(t,r)));const o=m(e,["config"]);return o!=null&&G9(o,n),n}function $9(t,e){const n={},i=m(t,["displayName"]);return e!==void 0&&i!=null&&y(e,["batch","displayName"],i),n}function K9(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const r=m(e,["src"]);r!=null&&y(n,["batch","inputConfig"],eq(t,r));const o=m(e,["config"]);return o!=null&&$9(o,n),n}function Y9(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Lu(t,i)),n}function J9(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Lu(t,i)),n}function W9(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);return o!=null&&y(e,["error"],o),e}function X9(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);return o!=null&&y(e,["error"],o),e}function Q9(t,e){const n={},i=m(e,["contents"]);if(i!=null){let o=wT(t,i);Array.isArray(o)&&(o=o.map(l=>l)),y(n,["requests[]","request","content"],o)}const r=m(e,["config"]);return r!=null&&(y(n,["_self"],Z9(r,n)),JB(n,{"requests[].*":"requests[].request.*"})),n}function Z9(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&y(e,["requests[]","taskType"],i);const r=m(t,["title"]);e!==void 0&&r!=null&&y(e,["requests[]","title"],r);const o=m(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&y(e,["requests[]","outputDimensionality"],o),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function eq(t,e){const n={},i=m(e,["fileName"]);i!=null&&y(n,["file_name"],i);const r=m(e,["inlinedRequests"]);return r!=null&&y(n,["requests"],Q9(t,r)),n}function tq(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function nq(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const i=m(t,["args"]);i!=null&&y(e,["args"],i);const r=m(t,["name"]);if(r!=null&&y(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function iq(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const i=m(t,["allowedFunctionNames"]);if(i!=null&&y(e,["allowedFunctionNames"],i),m(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function rq(t,e,n){const i={},r=m(e,["systemInstruction"]);n!==void 0&&r!=null&&y(n,["systemInstruction"],pD(ai(r)));const o=m(e,["temperature"]);o!=null&&y(i,["temperature"],o);const l=m(e,["topP"]);l!=null&&y(i,["topP"],l);const c=m(e,["topK"]);c!=null&&y(i,["topK"],c);const f=m(e,["candidateCount"]);f!=null&&y(i,["candidateCount"],f);const d=m(e,["maxOutputTokens"]);d!=null&&y(i,["maxOutputTokens"],d);const p=m(e,["stopSequences"]);p!=null&&y(i,["stopSequences"],p);const v=m(e,["responseLogprobs"]);v!=null&&y(i,["responseLogprobs"],v);const T=m(e,["logprobs"]);T!=null&&y(i,["logprobs"],T);const w=m(e,["presencePenalty"]);w!=null&&y(i,["presencePenalty"],w);const x=m(e,["frequencyPenalty"]);x!=null&&y(i,["frequencyPenalty"],x);const N=m(e,["seed"]);N!=null&&y(i,["seed"],N);const P=m(e,["responseMimeType"]);P!=null&&y(i,["responseMimeType"],P);const O=m(e,["responseSchema"]);O!=null&&y(i,["responseSchema"],AT(O));const k=m(e,["responseJsonSchema"]);if(k!=null&&y(i,["responseJsonSchema"],k),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const F=m(e,["safetySettings"]);if(n!==void 0&&F!=null){let z=F;Array.isArray(z)&&(z=z.map(B=>Tq(B))),y(n,["safetySettings"],z)}const G=m(e,["tools"]);if(n!==void 0&&G!=null){let z=Vu(G);Array.isArray(z)&&(z=z.map(B=>Sq(ku(B)))),y(n,["tools"],z)}const K=m(e,["toolConfig"]);if(n!==void 0&&K!=null&&y(n,["toolConfig"],Eq(K)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const H=m(e,["cachedContent"]);n!==void 0&&H!=null&&y(n,["cachedContent"],Hs(t,H));const R=m(e,["responseModalities"]);R!=null&&y(i,["responseModalities"],R);const I=m(e,["mediaResolution"]);I!=null&&y(i,["mediaResolution"],I);const D=m(e,["speechConfig"]);if(D!=null&&y(i,["speechConfig"],bT(D)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=m(e,["thinkingConfig"]);V!=null&&y(i,["thinkingConfig"],V);const U=m(e,["imageConfig"]);return U!=null&&y(i,["imageConfig"],cq(U)),i}function sq(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(d=>q9(d))),y(e,["candidates"],f)}const r=m(t,["modelVersion"]);r!=null&&y(e,["modelVersion"],r);const o=m(t,["promptFeedback"]);o!=null&&y(e,["promptFeedback"],o);const l=m(t,["responseId"]);l!=null&&y(e,["responseId"],l);const c=m(t,["usageMetadata"]);return c!=null&&y(e,["usageMetadata"],c),e}function oq(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Lu(t,i)),n}function aq(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Lu(t,i)),n}function lq(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function uq(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function cq(t){const e={},n=m(t,["aspectRatio"]);n!=null&&y(e,["aspectRatio"],n);const i=m(t,["imageSize"]);if(i!=null&&y(e,["imageSize"],i),m(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(m(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function fq(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["request","model"],gt(t,i));const r=m(e,["contents"]);if(r!=null){let c=Tr(r);Array.isArray(c)&&(c=c.map(f=>pD(f))),y(n,["request","contents"],c)}const o=m(e,["metadata"]);o!=null&&y(n,["metadata"],o);const l=m(e,["config"]);return l!=null&&y(n,["request","generationConfig"],rq(t,l,m(n,["request"],{}))),n}function dq(t){const e={},n=m(t,["response"]);n!=null&&y(e,["response"],sq(n));const i=m(t,["error"]);return i!=null&&y(e,["error"],i),e}function hq(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);if(e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),m(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function pq(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);e!==void 0&&r!=null&&y(e,["_query","pageToken"],r);const o=m(t,["filter"]);return e!==void 0&&o!=null&&y(e,["_query","filter"],o),n}function mq(t){const e={},n=m(t,["config"]);return n!=null&&hq(n,e),e}function gq(t){const e={},n=m(t,["config"]);return n!=null&&pq(n,e),e}function yq(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["operations"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>vp(l))),y(e,["batchJobs"],o)}return e}function vq(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["batchPredictionJobs"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>N0(l))),y(e,["batchJobs"],o)}return e}function _q(t){const e={},n=m(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],tq(o));const l=m(t,["functionCall"]);l!=null&&y(e,["functionCall"],nq(l));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const f=m(t,["inlineData"]);f!=null&&y(e,["inlineData"],U9(f));const d=m(t,["text"]);d!=null&&y(e,["text"],d);const p=m(t,["thought"]);p!=null&&y(e,["thought"],p);const v=m(t,["thoughtSignature"]);v!=null&&y(e,["thoughtSignature"],v);const T=m(t,["videoMetadata"]);return T!=null&&y(e,["videoMetadata"],T),e}function Tq(t){const e={},n=m(t,["category"]);if(n!=null&&y(e,["category"],n),m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=m(t,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function Eq(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&y(e,["functionCallingConfig"],iq(n));const i=m(t,["retrievalConfig"]);return i!=null&&y(e,["retrievalConfig"],i),e}function Sq(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(v=>v)),y(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&y(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],lq(c));const f=m(t,["googleSearch"]);f!=null&&y(e,["googleSearch"],uq(f));const d=m(t,["urlContext"]);return d!=null&&y(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Fs;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Fs||(Fs={}));class tl{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!i||Object.keys(i).length===0?l={config:{}}:typeof i=="object"?l=Object.assign({},i):l=i,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(o=(r=l.config)===null||r===void 0?void 0:r.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wq extends zs{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new tl(Fs.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=jx(this.apiClient,e),i=n._url,r=ve("{model}:batchGenerateContent",i),c=n.batch.inputConfig.requests,f=c.requests,d=[];for(const p of f){const v=Object.assign({},p);if(v.systemInstruction){const T=v.systemInstruction;delete v.systemInstruction;const w=v.request;w.systemInstruction=T,v.request=w}d.push(v)}return c.requests=d,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const o=this.getGcsUri(e),l=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?i.dest=`${o.slice(0,-6)}/dest`:i.dest=`${o}_dest_${r}`;else if(l)i.dest=`${l}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=j9(this.apiClient,e);return c=ve("batchPredictionJobs",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>N0(p))}else{const d=jx(this.apiClient,e);return c=ve("{model}:batchGenerateContent",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>vp(p))}}async createEmbeddingsInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=K9(this.apiClient,e);return o=ve("{model}:asyncBatchEmbedContent",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>vp(f))}}async get(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=aq(this.apiClient,e);return c=ve("batchPredictionJobs/{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>N0(p))}else{const d=oq(this.apiClient,e);return c=ve("batches/{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>vp(p))}}async cancel(e){var n,i,r,o;let l="",c={};if(this.apiClient.isVertexAI()){const f=B9(this.apiClient,e);l=ve("batchPredictionJobs/{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=F9(this.apiClient,e);l=ve("batches/{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=gq(e);return c=ve("batchPredictionJobs",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=vq(p),T=new qx;return Object.assign(T,v),T})}else{const d=mq(e);return c=ve("batches",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=yq(p),T=new qx;return Object.assign(T,v),T})}}async delete(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=J9(this.apiClient,e);return c=ve("batchPredictionJobs/{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>X9(p))}else{const d=Y9(this.apiClient,e);return c=ve("batches/{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>W9(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Aq(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function $x(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>Kq(o))),y(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function bq(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const r=m(t,["expireTime"]);e!==void 0&&r!=null&&y(e,["expireTime"],r);const o=m(t,["displayName"]);e!==void 0&&o!=null&&y(e,["displayName"],o);const l=m(t,["contents"]);if(e!==void 0&&l!=null){let p=Tr(l);Array.isArray(p)&&(p=p.map(v=>$x(v))),y(e,["contents"],p)}const c=m(t,["systemInstruction"]);e!==void 0&&c!=null&&y(e,["systemInstruction"],$x(ai(c)));const f=m(t,["tools"]);if(e!==void 0&&f!=null){let p=f;Array.isArray(p)&&(p=p.map(v=>Jq(v))),y(e,["tools"],p)}const d=m(t,["toolConfig"]);if(e!==void 0&&d!=null&&y(e,["toolConfig"],Yq(d)),m(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Cq(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const r=m(t,["expireTime"]);e!==void 0&&r!=null&&y(e,["expireTime"],r);const o=m(t,["displayName"]);e!==void 0&&o!=null&&y(e,["displayName"],o);const l=m(t,["contents"]);if(e!==void 0&&l!=null){let v=Tr(l);Array.isArray(v)&&(v=v.map(T=>T)),y(e,["contents"],v)}const c=m(t,["systemInstruction"]);e!==void 0&&c!=null&&y(e,["systemInstruction"],ai(c));const f=m(t,["tools"]);if(e!==void 0&&f!=null){let v=f;Array.isArray(v)&&(v=v.map(T=>Wq(T))),y(e,["tools"],v)}const d=m(t,["toolConfig"]);e!==void 0&&d!=null&&y(e,["toolConfig"],d);const p=m(t,["kmsKeyName"]);return e!==void 0&&p!=null&&y(e,["encryption_spec","kmsKeyName"],p),n}function xq(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["model"],nD(t,i));const r=m(e,["config"]);return r!=null&&bq(r,n),n}function Iq(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["model"],nD(t,i));const r=m(e,["config"]);return r!=null&&Cq(r,n),n}function Rq(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Hs(t,i)),n}function Nq(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Hs(t,i)),n}function Pq(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function Dq(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function Mq(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function kq(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const i=m(t,["args"]);i!=null&&y(e,["args"],i);const r=m(t,["name"]);if(r!=null&&y(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Vq(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const i=m(t,["allowedFunctionNames"]);if(i!=null&&y(e,["allowedFunctionNames"],i),m(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Lq(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&y(e,["description"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const r=m(t,["parameters"]);r!=null&&y(e,["parameters"],r);const o=m(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const l=m(t,["response"]);l!=null&&y(e,["response"],l);const c=m(t,["responseJsonSchema"]);return c!=null&&y(e,["responseJsonSchema"],c),e}function Oq(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Hs(t,i)),n}function Uq(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Hs(t,i)),n}function Fq(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function Bq(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function qq(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),n}function zq(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),n}function Hq(t){const e={},n=m(t,["config"]);return n!=null&&qq(n,e),e}function Gq(t){const e={},n=m(t,["config"]);return n!=null&&zq(n,e),e}function jq(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["cachedContents"],o)}return e}function $q(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["cachedContents"],o)}return e}function Kq(t){const e={},n=m(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],Mq(o));const l=m(t,["functionCall"]);l!=null&&y(e,["functionCall"],kq(l));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const f=m(t,["inlineData"]);f!=null&&y(e,["inlineData"],Aq(f));const d=m(t,["text"]);d!=null&&y(e,["text"],d);const p=m(t,["thought"]);p!=null&&y(e,["thought"],p);const v=m(t,["thoughtSignature"]);v!=null&&y(e,["thoughtSignature"],v);const T=m(t,["videoMetadata"]);return T!=null&&y(e,["videoMetadata"],T),e}function Yq(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&y(e,["functionCallingConfig"],Vq(n));const i=m(t,["retrievalConfig"]);return i!=null&&y(e,["retrievalConfig"],i),e}function Jq(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(v=>v)),y(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&y(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],Fq(c));const f=m(t,["googleSearch"]);f!=null&&y(e,["googleSearch"],Bq(f));const d=m(t,["urlContext"]);return d!=null&&y(e,["urlContext"],d),e}function Wq(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(T=>Lq(T))),y(e,["functionDeclarations"],v)}const i=m(t,["retrieval"]);i!=null&&y(e,["retrieval"],i);const r=m(t,["googleSearchRetrieval"]);r!=null&&y(e,["googleSearchRetrieval"],r);const o=m(t,["computerUse"]);if(o!=null&&y(e,["computerUse"],o),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=m(t,["codeExecution"]);l!=null&&y(e,["codeExecution"],l);const c=m(t,["enterpriseWebSearch"]);c!=null&&y(e,["enterpriseWebSearch"],c);const f=m(t,["googleMaps"]);f!=null&&y(e,["googleMaps"],f);const d=m(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],d);const p=m(t,["urlContext"]);return p!=null&&y(e,["urlContext"],p),e}function Xq(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const r=m(t,["expireTime"]);return e!==void 0&&r!=null&&y(e,["expireTime"],r),n}function Qq(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const r=m(t,["expireTime"]);return e!==void 0&&r!=null&&y(e,["expireTime"],r),n}function Zq(t,e){const n={},i=m(e,["name"]);i!=null&&y(n,["_url","name"],Hs(t,i));const r=m(e,["config"]);return r!=null&&Xq(r,n),n}function ez(t,e){const n={},i=m(e,["name"]);i!=null&&y(n,["_url","name"],Hs(t,i));const r=m(e,["config"]);return r!=null&&Qq(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tz extends zs{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new tl(Fs.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=Iq(this.apiClient,e);return c=ve("cachedContents",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const d=xq(this.apiClient,e);return c=ve("cachedContents",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async get(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=Uq(this.apiClient,e);return c=ve("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const d=Oq(this.apiClient,e);return c=ve("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async delete(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=Nq(this.apiClient,e);return c=ve("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=Dq(p),T=new Fx;return Object.assign(T,v),T})}else{const d=Rq(this.apiClient,e);return c=ve("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=Pq(p),T=new Fx;return Object.assign(T,v),T})}}async update(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=ez(this.apiClient,e);return c=ve("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const d=Zq(this.apiClient,e);return c=ve("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async listInternal(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=Gq(e);return c=ve("cachedContents",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=$q(p),T=new Bx;return Object.assign(T,v),T})}else{const d=Hq(e);return c=ve("cachedContents",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=jq(p),T=new Bx;return Object.assign(T,v),T})}}}function Kx(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function zt(t){return this instanceof zt?(this.v=t,this):new zt(t)}function uu(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),r[Symbol.asyncIterator]=function(){return this},r;function l(w){return function(x){return Promise.resolve(x).then(w,v)}}function c(w,x){i[w]&&(r[w]=function(N){return new Promise(function(P,O){o.push([w,N,P,O])>1||f(w,N)})},x&&(r[w]=x(r[w])))}function f(w,x){try{d(i[w](x))}catch(N){T(o[0][3],N)}}function d(w){w.value instanceof zt?Promise.resolve(w.value.v).then(p,v):T(o[0][2],w)}function p(w){f("next",w)}function v(w){f("throw",w)}function T(w,x){w(x),o.shift(),o.length&&f(o[0][0],o[0][1])}}function ff(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Kx=="function"?Kx(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(l){return new Promise(function(c,f){l=t[o](l),r(c,f,l.done,l.value)})}}function r(o,l,c,f){Promise.resolve(f).then(function(d){o({value:d,done:c})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nz(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:mD(n)}function mD(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function iz(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Yx(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let o=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),o&&!mD(t[i])&&(o=!1),i++;o?e.push(...r):e.pop()}return e}class rz{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new sz(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class sz{constructor(e,n,i,r={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=o,this.sendPromise=Promise.resolve(),iz(o)}async sendMessage(e){var n;await this.sendPromise;const i=ai(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,l,c;const f=await r,d=(l=(o=f.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content,p=f.automaticFunctionCallingHistory,v=this.getHistory(!0).length;let T=[];p!=null&&(T=(c=p.slice(v))!==null&&c!==void 0?c:[]);const w=d?[d]:[];this.recordHistory(i,w,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=ai(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const o=await r;return this.processStreamResponse(o,i)}getHistory(e=!1){const n=e?Yx(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,r;return uu(this,arguments,function*(){var l,c,f,d;const p=[];try{for(var v=!0,T=ff(e),w;w=yield zt(T.next()),l=w.done,!l;v=!0){d=w.value,v=!1;const x=d;if(nz(x)){const N=(r=(i=x.candidates)===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.content;N!==void 0&&p.push(N)}yield yield zt(x)}}catch(x){c={error:x}}finally{try{!v&&!l&&(f=T.return)&&(yield zt(f.call(T)))}finally{if(c)throw c.error}}this.recordHistory(n,p)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(o=>o.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Yx(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $m extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,$m.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oz(t){const e={},n=m(t,["file"]);return n!=null&&y(e,["file"],n),e}function az(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function lz(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","file"],lD(n)),e}function uz(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function cz(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","file"],lD(n)),e}function fz(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),n}function dz(t){const e={},n=m(t,["config"]);return n!=null&&fz(n,e),e}function hz(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["files"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pz extends zs{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new tl(Fs.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=dz(e);return o=ve("files",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),r.then(f=>{const d=hz(f),p=new v9;return Object.assign(p,d),p})}}async createInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=oz(e);return o=ve("upload/v1beta/files",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const d=az(f),p=new _9;return Object.assign(p,d),p})}}async get(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=cz(e);return o=ve("files/{file}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>f)}}async delete(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=lz(e);return o=ve("files/{file}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),r.then(f=>{const d=uz(f),p=new T9;return Object.assign(p,d),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _p(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function mz(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>Pz(o))),y(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function gz(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function yz(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const i=m(t,["args"]);i!=null&&y(e,["args"],i);const r=m(t,["name"]);if(r!=null&&y(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function vz(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&y(e,["description"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const r=m(t,["parameters"]);r!=null&&y(e,["parameters"],r);const o=m(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const l=m(t,["response"]);l!=null&&y(e,["response"],l);const c=m(t,["responseJsonSchema"]);return c!=null&&y(e,["responseJsonSchema"],c),e}function _z(t){const e={},n=m(t,["modelSelectionConfig"]);n!=null&&y(e,["modelConfig"],n);const i=m(t,["responseJsonSchema"]);i!=null&&y(e,["responseJsonSchema"],i);const r=m(t,["audioTimestamp"]);r!=null&&y(e,["audioTimestamp"],r);const o=m(t,["candidateCount"]);o!=null&&y(e,["candidateCount"],o);const l=m(t,["enableAffectiveDialog"]);l!=null&&y(e,["enableAffectiveDialog"],l);const c=m(t,["frequencyPenalty"]);c!=null&&y(e,["frequencyPenalty"],c);const f=m(t,["logprobs"]);f!=null&&y(e,["logprobs"],f);const d=m(t,["maxOutputTokens"]);d!=null&&y(e,["maxOutputTokens"],d);const p=m(t,["mediaResolution"]);p!=null&&y(e,["mediaResolution"],p);const v=m(t,["presencePenalty"]);v!=null&&y(e,["presencePenalty"],v);const T=m(t,["responseLogprobs"]);T!=null&&y(e,["responseLogprobs"],T);const w=m(t,["responseMimeType"]);w!=null&&y(e,["responseMimeType"],w);const x=m(t,["responseModalities"]);x!=null&&y(e,["responseModalities"],x);const N=m(t,["responseSchema"]);N!=null&&y(e,["responseSchema"],N);const P=m(t,["routingConfig"]);P!=null&&y(e,["routingConfig"],P);const O=m(t,["seed"]);O!=null&&y(e,["seed"],O);const k=m(t,["speechConfig"]);k!=null&&y(e,["speechConfig"],gD(k));const F=m(t,["stopSequences"]);F!=null&&y(e,["stopSequences"],F);const G=m(t,["temperature"]);G!=null&&y(e,["temperature"],G);const K=m(t,["thinkingConfig"]);K!=null&&y(e,["thinkingConfig"],K);const H=m(t,["topK"]);H!=null&&y(e,["topK"],H);const R=m(t,["topP"]);if(R!=null&&y(e,["topP"],R),m(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Tz(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function Ez(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function Sz(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],i);const r=m(t,["responseModalities"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","responseModalities"],r);const o=m(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const l=m(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=m(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const f=m(t,["maxOutputTokens"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","maxOutputTokens"],f);const d=m(t,["mediaResolution"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","mediaResolution"],d);const p=m(t,["seed"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","seed"],p);const v=m(t,["speechConfig"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","speechConfig"],CT(v));const T=m(t,["thinkingConfig"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","thinkingConfig"],T);const w=m(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],w);const x=m(t,["systemInstruction"]);e!==void 0&&x!=null&&y(e,["setup","systemInstruction"],mz(ai(x)));const N=m(t,["tools"]);if(e!==void 0&&N!=null){let H=Vu(N);Array.isArray(H)&&(H=H.map(R=>Mz(ku(R)))),y(e,["setup","tools"],H)}const P=m(t,["sessionResumption"]);e!==void 0&&P!=null&&y(e,["setup","sessionResumption"],Dz(P));const O=m(t,["inputAudioTranscription"]);e!==void 0&&O!=null&&y(e,["setup","inputAudioTranscription"],O);const k=m(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&y(e,["setup","outputAudioTranscription"],k);const F=m(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&y(e,["setup","realtimeInputConfig"],F);const G=m(t,["contextWindowCompression"]);e!==void 0&&G!=null&&y(e,["setup","contextWindowCompression"],G);const K=m(t,["proactivity"]);return e!==void 0&&K!=null&&y(e,["setup","proactivity"],K),n}function wz(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],_z(i));const r=m(t,["responseModalities"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","responseModalities"],r);const o=m(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const l=m(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=m(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const f=m(t,["maxOutputTokens"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","maxOutputTokens"],f);const d=m(t,["mediaResolution"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","mediaResolution"],d);const p=m(t,["seed"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","seed"],p);const v=m(t,["speechConfig"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","speechConfig"],gD(CT(v)));const T=m(t,["thinkingConfig"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","thinkingConfig"],T);const w=m(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],w);const x=m(t,["systemInstruction"]);e!==void 0&&x!=null&&y(e,["setup","systemInstruction"],ai(x));const N=m(t,["tools"]);if(e!==void 0&&N!=null){let H=Vu(N);Array.isArray(H)&&(H=H.map(R=>kz(ku(R)))),y(e,["setup","tools"],H)}const P=m(t,["sessionResumption"]);e!==void 0&&P!=null&&y(e,["setup","sessionResumption"],P);const O=m(t,["inputAudioTranscription"]);e!==void 0&&O!=null&&y(e,["setup","inputAudioTranscription"],O);const k=m(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&y(e,["setup","outputAudioTranscription"],k);const F=m(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&y(e,["setup","realtimeInputConfig"],F);const G=m(t,["contextWindowCompression"]);e!==void 0&&G!=null&&y(e,["setup","contextWindowCompression"],G);const K=m(t,["proactivity"]);return e!==void 0&&K!=null&&y(e,["setup","proactivity"],K),n}function Az(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["setup","model"],gt(t,i));const r=m(e,["config"]);return r!=null&&y(n,["config"],Sz(r,n)),n}function bz(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["setup","model"],gt(t,i));const r=m(e,["config"]);return r!=null&&y(n,["config"],wz(r,n)),n}function Cz(t){const e={},n=m(t,["musicGenerationConfig"]);return n!=null&&y(e,["musicGenerationConfig"],n),e}function xz(t){const e={},n=m(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),y(e,["weightedPrompts"],i)}return e}function Iz(t){const e={},n=m(t,["media"]);if(n!=null){let d=iD(n);Array.isArray(d)&&(d=d.map(p=>_p(p))),y(e,["mediaChunks"],d)}const i=m(t,["audio"]);i!=null&&y(e,["audio"],_p(sD(i)));const r=m(t,["audioStreamEnd"]);r!=null&&y(e,["audioStreamEnd"],r);const o=m(t,["video"]);o!=null&&y(e,["video"],_p(rD(o)));const l=m(t,["text"]);l!=null&&y(e,["text"],l);const c=m(t,["activityStart"]);c!=null&&y(e,["activityStart"],c);const f=m(t,["activityEnd"]);return f!=null&&y(e,["activityEnd"],f),e}function Rz(t){const e={},n=m(t,["media"]);if(n!=null){let d=iD(n);Array.isArray(d)&&(d=d.map(p=>p)),y(e,["mediaChunks"],d)}const i=m(t,["audio"]);i!=null&&y(e,["audio"],sD(i));const r=m(t,["audioStreamEnd"]);r!=null&&y(e,["audioStreamEnd"],r);const o=m(t,["video"]);o!=null&&y(e,["video"],rD(o));const l=m(t,["text"]);l!=null&&y(e,["text"],l);const c=m(t,["activityStart"]);c!=null&&y(e,["activityStart"],c);const f=m(t,["activityEnd"]);return f!=null&&y(e,["activityEnd"],f),e}function Nz(t){const e={},n=m(t,["setupComplete"]);n!=null&&y(e,["setupComplete"],n);const i=m(t,["serverContent"]);i!=null&&y(e,["serverContent"],i);const r=m(t,["toolCall"]);r!=null&&y(e,["toolCall"],r);const o=m(t,["toolCallCancellation"]);o!=null&&y(e,["toolCallCancellation"],o);const l=m(t,["usageMetadata"]);l!=null&&y(e,["usageMetadata"],Vz(l));const c=m(t,["goAway"]);c!=null&&y(e,["goAway"],c);const f=m(t,["sessionResumptionUpdate"]);return f!=null&&y(e,["sessionResumptionUpdate"],f),e}function Pz(t){const e={},n=m(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],gz(o));const l=m(t,["functionCall"]);l!=null&&y(e,["functionCall"],yz(l));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const f=m(t,["inlineData"]);f!=null&&y(e,["inlineData"],_p(f));const d=m(t,["text"]);d!=null&&y(e,["text"],d);const p=m(t,["thought"]);p!=null&&y(e,["thought"],p);const v=m(t,["thoughtSignature"]);v!=null&&y(e,["thoughtSignature"],v);const T=m(t,["videoMetadata"]);return T!=null&&y(e,["videoMetadata"],T),e}function Dz(t){const e={},n=m(t,["handle"]);if(n!=null&&y(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function gD(t){const e={},n=m(t,["languageCode"]);n!=null&&y(e,["languageCode"],n);const i=m(t,["voiceConfig"]);if(i!=null&&y(e,["voiceConfig"],i),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Mz(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(v=>v)),y(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&y(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],Tz(c));const f=m(t,["googleSearch"]);f!=null&&y(e,["googleSearch"],Ez(f));const d=m(t,["urlContext"]);return d!=null&&y(e,["urlContext"],d),e}function kz(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(T=>vz(T))),y(e,["functionDeclarations"],v)}const i=m(t,["retrieval"]);i!=null&&y(e,["retrieval"],i);const r=m(t,["googleSearchRetrieval"]);r!=null&&y(e,["googleSearchRetrieval"],r);const o=m(t,["computerUse"]);if(o!=null&&y(e,["computerUse"],o),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=m(t,["codeExecution"]);l!=null&&y(e,["codeExecution"],l);const c=m(t,["enterpriseWebSearch"]);c!=null&&y(e,["enterpriseWebSearch"],c);const f=m(t,["googleMaps"]);f!=null&&y(e,["googleMaps"],f);const d=m(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],d);const p=m(t,["urlContext"]);return p!=null&&y(e,["urlContext"],p),e}function Vz(t){const e={},n=m(t,["promptTokenCount"]);n!=null&&y(e,["promptTokenCount"],n);const i=m(t,["cachedContentTokenCount"]);i!=null&&y(e,["cachedContentTokenCount"],i);const r=m(t,["candidatesTokenCount"]);r!=null&&y(e,["responseTokenCount"],r);const o=m(t,["toolUsePromptTokenCount"]);o!=null&&y(e,["toolUsePromptTokenCount"],o);const l=m(t,["thoughtsTokenCount"]);l!=null&&y(e,["thoughtsTokenCount"],l);const c=m(t,["totalTokenCount"]);c!=null&&y(e,["totalTokenCount"],c);const f=m(t,["promptTokensDetails"]);if(f!=null){let w=f;Array.isArray(w)&&(w=w.map(x=>x)),y(e,["promptTokensDetails"],w)}const d=m(t,["cacheTokensDetails"]);if(d!=null){let w=d;Array.isArray(w)&&(w=w.map(x=>x)),y(e,["cacheTokensDetails"],w)}const p=m(t,["candidatesTokensDetails"]);if(p!=null){let w=p;Array.isArray(w)&&(w=w.map(x=>x)),y(e,["responseTokensDetails"],w)}const v=m(t,["toolUsePromptTokensDetails"]);if(v!=null){let w=v;Array.isArray(w)&&(w=w.map(x=>x)),y(e,["toolUsePromptTokensDetails"],w)}const T=m(t,["trafficType"]);return T!=null&&y(e,["trafficType"],T),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lz(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Oz(t){const e={},n=m(t,["content"]);n!=null&&y(e,["content"],n);const i=m(t,["citationMetadata"]);i!=null&&y(e,["citationMetadata"],Uz(i));const r=m(t,["tokenCount"]);r!=null&&y(e,["tokenCount"],r);const o=m(t,["finishReason"]);o!=null&&y(e,["finishReason"],o);const l=m(t,["avgLogprobs"]);l!=null&&y(e,["avgLogprobs"],l);const c=m(t,["groundingMetadata"]);c!=null&&y(e,["groundingMetadata"],c);const f=m(t,["index"]);f!=null&&y(e,["index"],f);const d=m(t,["logprobsResult"]);d!=null&&y(e,["logprobsResult"],d);const p=m(t,["safetyRatings"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(w=>w)),y(e,["safetyRatings"],T)}const v=m(t,["urlContextMetadata"]);return v!=null&&y(e,["urlContextMetadata"],v),e}function Uz(t){const e={},n=m(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),y(e,["citations"],i)}return e}function Fz(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const r=m(e,["contents"]);if(r!=null){let o=Tr(r);Array.isArray(o)&&(o=o.map(l=>l)),y(n,["contents"],o)}return n}function Bz(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),y(e,["tokensInfo"],r)}return e}function qz(t){const e={},n=m(t,["values"]);n!=null&&y(e,["values"],n);const i=m(t,["statistics"]);return i!=null&&y(e,["statistics"],zz(i)),e}function zz(t){const e={},n=m(t,["truncated"]);n!=null&&y(e,["truncated"],n);const i=m(t,["token_count"]);return i!=null&&y(e,["tokenCount"],i),e}function Km(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>XH(o))),y(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function Hz(t){const e={},n=m(t,["controlType"]);n!=null&&y(e,["controlType"],n);const i=m(t,["enableControlImageComputation"]);return i!=null&&y(e,["computeControl"],i),e}function Gz(t){const e={};if(m(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(m(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(m(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function jz(t,e){const n={},i=m(t,["systemInstruction"]);e!==void 0&&i!=null&&y(e,["systemInstruction"],ai(i));const r=m(t,["tools"]);if(e!==void 0&&r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>ED(c))),y(e,["tools"],l)}const o=m(t,["generationConfig"]);return e!==void 0&&o!=null&&y(e,["generationConfig"],LH(o)),n}function $z(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const r=m(e,["contents"]);if(r!=null){let l=Tr(r);Array.isArray(l)&&(l=l.map(c=>Km(c))),y(n,["contents"],l)}const o=m(e,["config"]);return o!=null&&Gz(o),n}function Kz(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const r=m(e,["contents"]);if(r!=null){let l=Tr(r);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["contents"],l)}const o=m(e,["config"]);return o!=null&&jz(o,n),n}function Yz(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["totalTokens"]);i!=null&&y(e,["totalTokens"],i);const r=m(t,["cachedContentTokenCount"]);return r!=null&&y(e,["cachedContentTokenCount"],r),e}function Jz(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["totalTokens"]);return i!=null&&y(e,["totalTokens"],i),e}function Wz(t,e){const n={},i=m(e,["model"]);return i!=null&&y(n,["_url","name"],gt(t,i)),n}function Xz(t,e){const n={},i=m(e,["model"]);return i!=null&&y(n,["_url","name"],gt(t,i)),n}function Qz(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function Zz(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function eH(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const r=m(t,["negativePrompt"]);e!==void 0&&r!=null&&y(e,["parameters","negativePrompt"],r);const o=m(t,["numberOfImages"]);e!==void 0&&o!=null&&y(e,["parameters","sampleCount"],o);const l=m(t,["aspectRatio"]);e!==void 0&&l!=null&&y(e,["parameters","aspectRatio"],l);const c=m(t,["guidanceScale"]);e!==void 0&&c!=null&&y(e,["parameters","guidanceScale"],c);const f=m(t,["seed"]);e!==void 0&&f!=null&&y(e,["parameters","seed"],f);const d=m(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&y(e,["parameters","safetySetting"],d);const p=m(t,["personGeneration"]);e!==void 0&&p!=null&&y(e,["parameters","personGeneration"],p);const v=m(t,["includeSafetyAttributes"]);e!==void 0&&v!=null&&y(e,["parameters","includeSafetyAttributes"],v);const T=m(t,["includeRaiReason"]);e!==void 0&&T!=null&&y(e,["parameters","includeRaiReason"],T);const w=m(t,["language"]);e!==void 0&&w!=null&&y(e,["parameters","language"],w);const x=m(t,["outputMimeType"]);e!==void 0&&x!=null&&y(e,["parameters","outputOptions","mimeType"],x);const N=m(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&y(e,["parameters","outputOptions","compressionQuality"],N);const P=m(t,["addWatermark"]);e!==void 0&&P!=null&&y(e,["parameters","addWatermark"],P);const O=m(t,["labels"]);e!==void 0&&O!=null&&y(e,["labels"],O);const k=m(t,["editMode"]);e!==void 0&&k!=null&&y(e,["parameters","editMode"],k);const F=m(t,["baseSteps"]);return e!==void 0&&F!=null&&y(e,["parameters","editConfig","baseSteps"],F),n}function tH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const r=m(e,["prompt"]);r!=null&&y(n,["instances[0]","prompt"],r);const o=m(e,["referenceImages"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>iG(f))),y(n,["instances[0]","referenceImages"],c)}const l=m(e,["config"]);return l!=null&&eH(l,n),n}function nH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>Ym(o))),y(e,["generatedImages"],r)}return e}function iH(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&y(e,["requests[]","taskType"],i);const r=m(t,["title"]);e!==void 0&&r!=null&&y(e,["requests[]","title"],r);const o=m(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&y(e,["requests[]","outputDimensionality"],o),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function rH(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&y(e,["instances[]","task_type"],i);const r=m(t,["title"]);e!==void 0&&r!=null&&y(e,["instances[]","title"],r);const o=m(t,["outputDimensionality"]);e!==void 0&&o!=null&&y(e,["parameters","outputDimensionality"],o);const l=m(t,["mimeType"]);e!==void 0&&l!=null&&y(e,["instances[]","mimeType"],l);const c=m(t,["autoTruncate"]);return e!==void 0&&c!=null&&y(e,["parameters","autoTruncate"],c),n}function sH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const r=m(e,["contents"]);if(r!=null){let c=wT(t,r);Array.isArray(c)&&(c=c.map(f=>f)),y(n,["requests[]","content"],c)}const o=m(e,["config"]);o!=null&&iH(o,n);const l=m(e,["model"]);return l!==void 0&&y(n,["requests[]","model"],gt(t,l)),n}function oH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const r=m(e,["contents"]);if(r!=null){let l=wT(t,r);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["instances[]","content"],l)}const o=m(e,["config"]);return o!=null&&rH(o,n),n}function aH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["embeddings"],o)}const r=m(t,["metadata"]);return r!=null&&y(e,["metadata"],r),e}function lH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>qz(l))),y(e,["embeddings"],o)}const r=m(t,["metadata"]);return r!=null&&y(e,["metadata"],r),e}function uH(t){const e={},n=m(t,["endpoint"]);n!=null&&y(e,["name"],n);const i=m(t,["deployedModelId"]);return i!=null&&y(e,["deployedModelId"],i),e}function cH(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function fH(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const i=m(t,["args"]);i!=null&&y(e,["args"],i);const r=m(t,["name"]);if(r!=null&&y(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function dH(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const i=m(t,["allowedFunctionNames"]);if(i!=null&&y(e,["allowedFunctionNames"],i),m(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function hH(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&y(e,["description"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const r=m(t,["parameters"]);r!=null&&y(e,["parameters"],r);const o=m(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const l=m(t,["response"]);l!=null&&y(e,["response"],l);const c=m(t,["responseJsonSchema"]);return c!=null&&y(e,["responseJsonSchema"],c),e}function pH(t,e,n){const i={},r=m(e,["systemInstruction"]);n!==void 0&&r!=null&&y(n,["systemInstruction"],Km(ai(r)));const o=m(e,["temperature"]);o!=null&&y(i,["temperature"],o);const l=m(e,["topP"]);l!=null&&y(i,["topP"],l);const c=m(e,["topK"]);c!=null&&y(i,["topK"],c);const f=m(e,["candidateCount"]);f!=null&&y(i,["candidateCount"],f);const d=m(e,["maxOutputTokens"]);d!=null&&y(i,["maxOutputTokens"],d);const p=m(e,["stopSequences"]);p!=null&&y(i,["stopSequences"],p);const v=m(e,["responseLogprobs"]);v!=null&&y(i,["responseLogprobs"],v);const T=m(e,["logprobs"]);T!=null&&y(i,["logprobs"],T);const w=m(e,["presencePenalty"]);w!=null&&y(i,["presencePenalty"],w);const x=m(e,["frequencyPenalty"]);x!=null&&y(i,["frequencyPenalty"],x);const N=m(e,["seed"]);N!=null&&y(i,["seed"],N);const P=m(e,["responseMimeType"]);P!=null&&y(i,["responseMimeType"],P);const O=m(e,["responseSchema"]);O!=null&&y(i,["responseSchema"],AT(O));const k=m(e,["responseJsonSchema"]);if(k!=null&&y(i,["responseJsonSchema"],k),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const F=m(e,["safetySettings"]);if(n!==void 0&&F!=null){let z=F;Array.isArray(z)&&(z=z.map(B=>rG(B))),y(n,["safetySettings"],z)}const G=m(e,["tools"]);if(n!==void 0&&G!=null){let z=Vu(G);Array.isArray(z)&&(z=z.map(B=>fG(ku(B)))),y(n,["tools"],z)}const K=m(e,["toolConfig"]);if(n!==void 0&&K!=null&&y(n,["toolConfig"],cG(K)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const H=m(e,["cachedContent"]);n!==void 0&&H!=null&&y(n,["cachedContent"],Hs(t,H));const R=m(e,["responseModalities"]);R!=null&&y(i,["responseModalities"],R);const I=m(e,["mediaResolution"]);I!=null&&y(i,["mediaResolution"],I);const D=m(e,["speechConfig"]);if(D!=null&&y(i,["speechConfig"],bT(D)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=m(e,["thinkingConfig"]);V!=null&&y(i,["thinkingConfig"],V);const U=m(e,["imageConfig"]);return U!=null&&y(i,["imageConfig"],qH(U)),i}function mH(t,e,n){const i={},r=m(e,["systemInstruction"]);n!==void 0&&r!=null&&y(n,["systemInstruction"],ai(r));const o=m(e,["temperature"]);o!=null&&y(i,["temperature"],o);const l=m(e,["topP"]);l!=null&&y(i,["topP"],l);const c=m(e,["topK"]);c!=null&&y(i,["topK"],c);const f=m(e,["candidateCount"]);f!=null&&y(i,["candidateCount"],f);const d=m(e,["maxOutputTokens"]);d!=null&&y(i,["maxOutputTokens"],d);const p=m(e,["stopSequences"]);p!=null&&y(i,["stopSequences"],p);const v=m(e,["responseLogprobs"]);v!=null&&y(i,["responseLogprobs"],v);const T=m(e,["logprobs"]);T!=null&&y(i,["logprobs"],T);const w=m(e,["presencePenalty"]);w!=null&&y(i,["presencePenalty"],w);const x=m(e,["frequencyPenalty"]);x!=null&&y(i,["frequencyPenalty"],x);const N=m(e,["seed"]);N!=null&&y(i,["seed"],N);const P=m(e,["responseMimeType"]);P!=null&&y(i,["responseMimeType"],P);const O=m(e,["responseSchema"]);O!=null&&y(i,["responseSchema"],AT(O));const k=m(e,["responseJsonSchema"]);k!=null&&y(i,["responseJsonSchema"],k);const F=m(e,["routingConfig"]);F!=null&&y(i,["routingConfig"],F);const G=m(e,["modelSelectionConfig"]);G!=null&&y(i,["modelConfig"],G);const K=m(e,["safetySettings"]);if(n!==void 0&&K!=null){let ee=K;Array.isArray(ee)&&(ee=ee.map(oe=>oe)),y(n,["safetySettings"],ee)}const H=m(e,["tools"]);if(n!==void 0&&H!=null){let ee=Vu(H);Array.isArray(ee)&&(ee=ee.map(oe=>ED(ku(oe)))),y(n,["tools"],ee)}const R=m(e,["toolConfig"]);n!==void 0&&R!=null&&y(n,["toolConfig"],R);const I=m(e,["labels"]);n!==void 0&&I!=null&&y(n,["labels"],I);const D=m(e,["cachedContent"]);n!==void 0&&D!=null&&y(n,["cachedContent"],Hs(t,D));const V=m(e,["responseModalities"]);V!=null&&y(i,["responseModalities"],V);const U=m(e,["mediaResolution"]);U!=null&&y(i,["mediaResolution"],U);const z=m(e,["speechConfig"]);z!=null&&y(i,["speechConfig"],TD(bT(z)));const B=m(e,["audioTimestamp"]);B!=null&&y(i,["audioTimestamp"],B);const Re=m(e,["thinkingConfig"]);Re!=null&&y(i,["thinkingConfig"],Re);const Ue=m(e,["imageConfig"]);return Ue!=null&&y(i,["imageConfig"],zH(Ue)),i}function Jx(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const r=m(e,["contents"]);if(r!=null){let l=Tr(r);Array.isArray(l)&&(l=l.map(c=>Km(c))),y(n,["contents"],l)}const o=m(e,["config"]);return o!=null&&y(n,["generationConfig"],pH(t,o,n)),n}function Wx(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const r=m(e,["contents"]);if(r!=null){let l=Tr(r);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["contents"],l)}const o=m(e,["config"]);return o!=null&&y(n,["generationConfig"],mH(t,o,n)),n}function Xx(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(d=>Oz(d))),y(e,["candidates"],f)}const r=m(t,["modelVersion"]);r!=null&&y(e,["modelVersion"],r);const o=m(t,["promptFeedback"]);o!=null&&y(e,["promptFeedback"],o);const l=m(t,["responseId"]);l!=null&&y(e,["responseId"],l);const c=m(t,["usageMetadata"]);return c!=null&&y(e,["usageMetadata"],c),e}function Qx(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(p=>p)),y(e,["candidates"],d)}const r=m(t,["createTime"]);r!=null&&y(e,["createTime"],r);const o=m(t,["modelVersion"]);o!=null&&y(e,["modelVersion"],o);const l=m(t,["promptFeedback"]);l!=null&&y(e,["promptFeedback"],l);const c=m(t,["responseId"]);c!=null&&y(e,["responseId"],c);const f=m(t,["usageMetadata"]);return f!=null&&y(e,["usageMetadata"],f),e}function gH(t,e){const n={};if(m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=m(t,["numberOfImages"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const r=m(t,["aspectRatio"]);e!==void 0&&r!=null&&y(e,["parameters","aspectRatio"],r);const o=m(t,["guidanceScale"]);if(e!==void 0&&o!=null&&y(e,["parameters","guidanceScale"],o),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=m(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&y(e,["parameters","safetySetting"],l);const c=m(t,["personGeneration"]);e!==void 0&&c!=null&&y(e,["parameters","personGeneration"],c);const f=m(t,["includeSafetyAttributes"]);e!==void 0&&f!=null&&y(e,["parameters","includeSafetyAttributes"],f);const d=m(t,["includeRaiReason"]);e!==void 0&&d!=null&&y(e,["parameters","includeRaiReason"],d);const p=m(t,["language"]);e!==void 0&&p!=null&&y(e,["parameters","language"],p);const v=m(t,["outputMimeType"]);e!==void 0&&v!=null&&y(e,["parameters","outputOptions","mimeType"],v);const T=m(t,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&y(e,["parameters","outputOptions","compressionQuality"],T),m(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(m(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=m(t,["imageSize"]);if(e!==void 0&&w!=null&&y(e,["parameters","sampleImageSize"],w),m(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function yH(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const r=m(t,["negativePrompt"]);e!==void 0&&r!=null&&y(e,["parameters","negativePrompt"],r);const o=m(t,["numberOfImages"]);e!==void 0&&o!=null&&y(e,["parameters","sampleCount"],o);const l=m(t,["aspectRatio"]);e!==void 0&&l!=null&&y(e,["parameters","aspectRatio"],l);const c=m(t,["guidanceScale"]);e!==void 0&&c!=null&&y(e,["parameters","guidanceScale"],c);const f=m(t,["seed"]);e!==void 0&&f!=null&&y(e,["parameters","seed"],f);const d=m(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&y(e,["parameters","safetySetting"],d);const p=m(t,["personGeneration"]);e!==void 0&&p!=null&&y(e,["parameters","personGeneration"],p);const v=m(t,["includeSafetyAttributes"]);e!==void 0&&v!=null&&y(e,["parameters","includeSafetyAttributes"],v);const T=m(t,["includeRaiReason"]);e!==void 0&&T!=null&&y(e,["parameters","includeRaiReason"],T);const w=m(t,["language"]);e!==void 0&&w!=null&&y(e,["parameters","language"],w);const x=m(t,["outputMimeType"]);e!==void 0&&x!=null&&y(e,["parameters","outputOptions","mimeType"],x);const N=m(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&y(e,["parameters","outputOptions","compressionQuality"],N);const P=m(t,["addWatermark"]);e!==void 0&&P!=null&&y(e,["parameters","addWatermark"],P);const O=m(t,["labels"]);e!==void 0&&O!=null&&y(e,["labels"],O);const k=m(t,["imageSize"]);e!==void 0&&k!=null&&y(e,["parameters","sampleImageSize"],k);const F=m(t,["enhancePrompt"]);return e!==void 0&&F!=null&&y(e,["parameters","enhancePrompt"],F),n}function vH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const r=m(e,["prompt"]);r!=null&&y(n,["instances[0]","prompt"],r);const o=m(e,["config"]);return o!=null&&gH(o,n),n}function _H(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const r=m(e,["prompt"]);r!=null&&y(n,["instances[0]","prompt"],r);const o=m(e,["config"]);return o!=null&&yH(o,n),n}function TH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>DH(l))),y(e,["generatedImages"],o)}const r=m(t,["positivePromptSafetyAttributes"]);return r!=null&&y(e,["positivePromptSafetyAttributes"],vD(r)),e}function EH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Ym(l))),y(e,["generatedImages"],o)}const r=m(t,["positivePromptSafetyAttributes"]);return r!=null&&y(e,["positivePromptSafetyAttributes"],_D(r)),e}function SH(t,e){const n={},i=m(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i),m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=m(t,["durationSeconds"]);if(e!==void 0&&r!=null&&y(e,["parameters","durationSeconds"],r),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=m(t,["aspectRatio"]);e!==void 0&&o!=null&&y(e,["parameters","aspectRatio"],o);const l=m(t,["resolution"]);e!==void 0&&l!=null&&y(e,["parameters","resolution"],l);const c=m(t,["personGeneration"]);if(e!==void 0&&c!=null&&y(e,["parameters","personGeneration"],c),m(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=m(t,["negativePrompt"]);e!==void 0&&f!=null&&y(e,["parameters","negativePrompt"],f);const d=m(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&y(e,["parameters","enhancePrompt"],d),m(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=m(t,["lastFrame"]);e!==void 0&&p!=null&&y(e,["instances[0]","lastFrame"],Jm(p));const v=m(t,["referenceImages"]);if(e!==void 0&&v!=null){let T=v;Array.isArray(T)&&(T=T.map(w=>AG(w))),y(e,["instances[0]","referenceImages"],T)}if(m(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(m(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function wH(t,e){const n={},i=m(t,["numberOfVideos"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const r=m(t,["outputGcsUri"]);e!==void 0&&r!=null&&y(e,["parameters","storageUri"],r);const o=m(t,["fps"]);e!==void 0&&o!=null&&y(e,["parameters","fps"],o);const l=m(t,["durationSeconds"]);e!==void 0&&l!=null&&y(e,["parameters","durationSeconds"],l);const c=m(t,["seed"]);e!==void 0&&c!=null&&y(e,["parameters","seed"],c);const f=m(t,["aspectRatio"]);e!==void 0&&f!=null&&y(e,["parameters","aspectRatio"],f);const d=m(t,["resolution"]);e!==void 0&&d!=null&&y(e,["parameters","resolution"],d);const p=m(t,["personGeneration"]);e!==void 0&&p!=null&&y(e,["parameters","personGeneration"],p);const v=m(t,["pubsubTopic"]);e!==void 0&&v!=null&&y(e,["parameters","pubsubTopic"],v);const T=m(t,["negativePrompt"]);e!==void 0&&T!=null&&y(e,["parameters","negativePrompt"],T);const w=m(t,["enhancePrompt"]);e!==void 0&&w!=null&&y(e,["parameters","enhancePrompt"],w);const x=m(t,["generateAudio"]);e!==void 0&&x!=null&&y(e,["parameters","generateAudio"],x);const N=m(t,["lastFrame"]);e!==void 0&&N!=null&&y(e,["instances[0]","lastFrame"],Br(N));const P=m(t,["referenceImages"]);if(e!==void 0&&P!=null){let F=P;Array.isArray(F)&&(F=F.map(G=>bG(G))),y(e,["instances[0]","referenceImages"],F)}const O=m(t,["mask"]);e!==void 0&&O!=null&&y(e,["instances[0]","mask"],wG(O));const k=m(t,["compressionQuality"]);return e!==void 0&&k!=null&&y(e,["parameters","compressionQuality"],k),n}function AH(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response","generateVideoResponse"]);return l!=null&&y(e,["response"],IH(l)),e}function bH(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response"]);return l!=null&&y(e,["response"],RH(l)),e}function CH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const r=m(e,["prompt"]);r!=null&&y(n,["instances[0]","prompt"],r);const o=m(e,["image"]);o!=null&&y(n,["instances[0]","image"],Jm(o));const l=m(e,["video"]);l!=null&&y(n,["instances[0]","video"],SD(l));const c=m(e,["source"]);c!=null&&NH(c,n);const f=m(e,["config"]);return f!=null&&SH(f,n),n}function xH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const r=m(e,["prompt"]);r!=null&&y(n,["instances[0]","prompt"],r);const o=m(e,["image"]);o!=null&&y(n,["instances[0]","image"],Br(o));const l=m(e,["video"]);l!=null&&y(n,["instances[0]","video"],wD(l));const c=m(e,["source"]);c!=null&&PH(c,n);const f=m(e,["config"]);return f!=null&&wH(f,n),n}function IH(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>kH(l))),y(e,["generatedVideos"],o)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const r=m(t,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function RH(t){const e={},n=m(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>VH(l))),y(e,["generatedVideos"],o)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const r=m(t,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function NH(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const r=m(t,["image"]);e!==void 0&&r!=null&&y(e,["instances[0]","image"],Jm(r));const o=m(t,["video"]);return e!==void 0&&o!=null&&y(e,["instances[0]","video"],SD(o)),n}function PH(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const r=m(t,["image"]);e!==void 0&&r!=null&&y(e,["instances[0]","image"],Br(r));const o=m(t,["video"]);return e!==void 0&&o!=null&&y(e,["instances[0]","video"],wD(o)),n}function DH(t){const e={},n=m(t,["_self"]);n!=null&&y(e,["image"],HH(n));const i=m(t,["raiFilteredReason"]);i!=null&&y(e,["raiFilteredReason"],i);const r=m(t,["_self"]);return r!=null&&y(e,["safetyAttributes"],vD(r)),e}function Ym(t){const e={},n=m(t,["_self"]);n!=null&&y(e,["image"],yD(n));const i=m(t,["raiFilteredReason"]);i!=null&&y(e,["raiFilteredReason"],i);const r=m(t,["_self"]);r!=null&&y(e,["safetyAttributes"],_D(r));const o=m(t,["prompt"]);return o!=null&&y(e,["enhancedPrompt"],o),e}function MH(t){const e={},n=m(t,["_self"]);n!=null&&y(e,["mask"],yD(n));const i=m(t,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),y(e,["labels"],r)}return e}function kH(t){const e={},n=m(t,["video"]);return n!=null&&y(e,["video"],EG(n)),e}function VH(t){const e={},n=m(t,["_self"]);return n!=null&&y(e,["video"],SG(n)),e}function LH(t){const e={},n=m(t,["modelSelectionConfig"]);n!=null&&y(e,["modelConfig"],n);const i=m(t,["responseJsonSchema"]);i!=null&&y(e,["responseJsonSchema"],i);const r=m(t,["audioTimestamp"]);r!=null&&y(e,["audioTimestamp"],r);const o=m(t,["candidateCount"]);o!=null&&y(e,["candidateCount"],o);const l=m(t,["enableAffectiveDialog"]);l!=null&&y(e,["enableAffectiveDialog"],l);const c=m(t,["frequencyPenalty"]);c!=null&&y(e,["frequencyPenalty"],c);const f=m(t,["logprobs"]);f!=null&&y(e,["logprobs"],f);const d=m(t,["maxOutputTokens"]);d!=null&&y(e,["maxOutputTokens"],d);const p=m(t,["mediaResolution"]);p!=null&&y(e,["mediaResolution"],p);const v=m(t,["presencePenalty"]);v!=null&&y(e,["presencePenalty"],v);const T=m(t,["responseLogprobs"]);T!=null&&y(e,["responseLogprobs"],T);const w=m(t,["responseMimeType"]);w!=null&&y(e,["responseMimeType"],w);const x=m(t,["responseModalities"]);x!=null&&y(e,["responseModalities"],x);const N=m(t,["responseSchema"]);N!=null&&y(e,["responseSchema"],N);const P=m(t,["routingConfig"]);P!=null&&y(e,["routingConfig"],P);const O=m(t,["seed"]);O!=null&&y(e,["seed"],O);const k=m(t,["speechConfig"]);k!=null&&y(e,["speechConfig"],TD(k));const F=m(t,["stopSequences"]);F!=null&&y(e,["stopSequences"],F);const G=m(t,["temperature"]);G!=null&&y(e,["temperature"],G);const K=m(t,["thinkingConfig"]);K!=null&&y(e,["thinkingConfig"],K);const H=m(t,["topK"]);H!=null&&y(e,["topK"],H);const R=m(t,["topP"]);if(R!=null&&y(e,["topP"],R),m(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function OH(t,e){const n={},i=m(e,["model"]);return i!=null&&y(n,["_url","name"],gt(t,i)),n}function UH(t,e){const n={},i=m(e,["model"]);return i!=null&&y(n,["_url","name"],gt(t,i)),n}function FH(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function BH(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function qH(t){const e={},n=m(t,["aspectRatio"]);n!=null&&y(e,["aspectRatio"],n);const i=m(t,["imageSize"]);if(i!=null&&y(e,["imageSize"],i),m(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(m(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function zH(t){const e={},n=m(t,["aspectRatio"]);n!=null&&y(e,["aspectRatio"],n);const i=m(t,["imageSize"]);i!=null&&y(e,["imageSize"],i);const r=m(t,["outputMimeType"]);r!=null&&y(e,["imageOutputOptions","mimeType"],r);const o=m(t,["outputCompressionQuality"]);return o!=null&&y(e,["imageOutputOptions","compressionQuality"],o),e}function HH(t){const e={},n=m(t,["bytesBase64Encoded"]);n!=null&&y(e,["imageBytes"],na(n));const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function yD(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&y(e,["imageBytes"],na(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function Jm(t){const e={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=m(t,["imageBytes"]);n!=null&&y(e,["bytesBase64Encoded"],na(n));const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Br(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const i=m(t,["imageBytes"]);i!=null&&y(e,["bytesBase64Encoded"],na(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function GH(t,e,n){const i={},r=m(e,["pageSize"]);n!==void 0&&r!=null&&y(n,["_query","pageSize"],r);const o=m(e,["pageToken"]);n!==void 0&&o!=null&&y(n,["_query","pageToken"],o);const l=m(e,["filter"]);n!==void 0&&l!=null&&y(n,["_query","filter"],l);const c=m(e,["queryBase"]);return n!==void 0&&c!=null&&y(n,["_url","models_url"],uD(t,c)),i}function jH(t,e,n){const i={},r=m(e,["pageSize"]);n!==void 0&&r!=null&&y(n,["_query","pageSize"],r);const o=m(e,["pageToken"]);n!==void 0&&o!=null&&y(n,["_query","pageToken"],o);const l=m(e,["filter"]);n!==void 0&&l!=null&&y(n,["_query","filter"],l);const c=m(e,["queryBase"]);return n!==void 0&&c!=null&&y(n,["_url","models_url"],uD(t,c)),i}function $H(t,e){const n={},i=m(e,["config"]);return i!=null&&GH(t,i,n),n}function KH(t,e){const n={},i=m(e,["config"]);return i!=null&&jH(t,i,n),n}function YH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["_self"]);if(r!=null){let o=cD(r);Array.isArray(o)&&(o=o.map(l=>P0(l))),y(e,["models"],o)}return e}function JH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["_self"]);if(r!=null){let o=cD(r);Array.isArray(o)&&(o=o.map(l=>D0(l))),y(e,["models"],o)}return e}function WH(t){const e={},n=m(t,["maskMode"]);n!=null&&y(e,["maskMode"],n);const i=m(t,["segmentationClasses"]);i!=null&&y(e,["maskClasses"],i);const r=m(t,["maskDilation"]);return r!=null&&y(e,["dilation"],r),e}function P0(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["displayName"]);i!=null&&y(e,["displayName"],i);const r=m(t,["description"]);r!=null&&y(e,["description"],r);const o=m(t,["version"]);o!=null&&y(e,["version"],o);const l=m(t,["_self"]);l!=null&&y(e,["tunedModelInfo"],dG(l));const c=m(t,["inputTokenLimit"]);c!=null&&y(e,["inputTokenLimit"],c);const f=m(t,["outputTokenLimit"]);f!=null&&y(e,["outputTokenLimit"],f);const d=m(t,["supportedGenerationMethods"]);d!=null&&y(e,["supportedActions"],d);const p=m(t,["temperature"]);p!=null&&y(e,["temperature"],p);const v=m(t,["maxTemperature"]);v!=null&&y(e,["maxTemperature"],v);const T=m(t,["topP"]);T!=null&&y(e,["topP"],T);const w=m(t,["topK"]);w!=null&&y(e,["topK"],w);const x=m(t,["thinking"]);return x!=null&&y(e,["thinking"],x),e}function D0(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["displayName"]);i!=null&&y(e,["displayName"],i);const r=m(t,["description"]);r!=null&&y(e,["description"],r);const o=m(t,["versionId"]);o!=null&&y(e,["version"],o);const l=m(t,["deployedModels"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(T=>uH(T))),y(e,["endpoints"],v)}const c=m(t,["labels"]);c!=null&&y(e,["labels"],c);const f=m(t,["_self"]);f!=null&&y(e,["tunedModelInfo"],hG(f));const d=m(t,["defaultCheckpointId"]);d!=null&&y(e,["defaultCheckpointId"],d);const p=m(t,["checkpoints"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(T=>T)),y(e,["checkpoints"],v)}return e}function XH(t){const e={},n=m(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],cH(o));const l=m(t,["functionCall"]);l!=null&&y(e,["functionCall"],fH(l));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const f=m(t,["inlineData"]);f!=null&&y(e,["inlineData"],Lz(f));const d=m(t,["text"]);d!=null&&y(e,["text"],d);const p=m(t,["thought"]);p!=null&&y(e,["thought"],p);const v=m(t,["thoughtSignature"]);v!=null&&y(e,["thoughtSignature"],v);const T=m(t,["videoMetadata"]);return T!=null&&y(e,["videoMetadata"],T),e}function QH(t){const e={},n=m(t,["productImage"]);return n!=null&&y(e,["image"],Br(n)),e}function ZH(t,e){const n={},i=m(t,["numberOfImages"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const r=m(t,["baseSteps"]);e!==void 0&&r!=null&&y(e,["parameters","baseSteps"],r);const o=m(t,["outputGcsUri"]);e!==void 0&&o!=null&&y(e,["parameters","storageUri"],o);const l=m(t,["seed"]);e!==void 0&&l!=null&&y(e,["parameters","seed"],l);const c=m(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&y(e,["parameters","safetySetting"],c);const f=m(t,["personGeneration"]);e!==void 0&&f!=null&&y(e,["parameters","personGeneration"],f);const d=m(t,["addWatermark"]);e!==void 0&&d!=null&&y(e,["parameters","addWatermark"],d);const p=m(t,["outputMimeType"]);e!==void 0&&p!=null&&y(e,["parameters","outputOptions","mimeType"],p);const v=m(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&y(e,["parameters","outputOptions","compressionQuality"],v);const T=m(t,["enhancePrompt"]);e!==void 0&&T!=null&&y(e,["parameters","enhancePrompt"],T);const w=m(t,["labels"]);return e!==void 0&&w!=null&&y(e,["labels"],w),n}function eG(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const r=m(e,["source"]);r!=null&&nG(r,n);const o=m(e,["config"]);return o!=null&&ZH(o,n),n}function tG(t){const e={},n=m(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Ym(r))),y(e,["generatedImages"],i)}return e}function nG(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const r=m(t,["personImage"]);e!==void 0&&r!=null&&y(e,["instances[0]","personImage","image"],Br(r));const o=m(t,["productImages"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>QH(c))),y(e,["instances[0]","productImages"],l)}return n}function iG(t){const e={},n=m(t,["referenceImage"]);n!=null&&y(e,["referenceImage"],Br(n));const i=m(t,["referenceId"]);i!=null&&y(e,["referenceId"],i);const r=m(t,["referenceType"]);r!=null&&y(e,["referenceType"],r);const o=m(t,["maskImageConfig"]);o!=null&&y(e,["maskImageConfig"],WH(o));const l=m(t,["controlImageConfig"]);l!=null&&y(e,["controlImageConfig"],Hz(l));const c=m(t,["styleImageConfig"]);c!=null&&y(e,["styleImageConfig"],c);const f=m(t,["subjectImageConfig"]);return f!=null&&y(e,["subjectImageConfig"],f),e}function vD(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const i=m(t,["safetyAttributes","scores"]);i!=null&&y(e,["scores"],i);const r=m(t,["contentType"]);return r!=null&&y(e,["contentType"],r),e}function _D(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const i=m(t,["safetyAttributes","scores"]);i!=null&&y(e,["scores"],i);const r=m(t,["contentType"]);return r!=null&&y(e,["contentType"],r),e}function rG(t){const e={},n=m(t,["category"]);if(n!=null&&y(e,["category"],n),m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=m(t,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function sG(t){const e={},n=m(t,["image"]);return n!=null&&y(e,["image"],Br(n)),e}function oG(t,e){const n={},i=m(t,["mode"]);e!==void 0&&i!=null&&y(e,["parameters","mode"],i);const r=m(t,["maxPredictions"]);e!==void 0&&r!=null&&y(e,["parameters","maxPredictions"],r);const o=m(t,["confidenceThreshold"]);e!==void 0&&o!=null&&y(e,["parameters","confidenceThreshold"],o);const l=m(t,["maskDilation"]);e!==void 0&&l!=null&&y(e,["parameters","maskDilation"],l);const c=m(t,["binaryColorThreshold"]);e!==void 0&&c!=null&&y(e,["parameters","binaryColorThreshold"],c);const f=m(t,["labels"]);return e!==void 0&&f!=null&&y(e,["labels"],f),n}function aG(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const r=m(e,["source"]);r!=null&&uG(r,n);const o=m(e,["config"]);return o!=null&&oG(o,n),n}function lG(t){const e={},n=m(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>MH(r))),y(e,["generatedMasks"],i)}return e}function uG(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const r=m(t,["image"]);e!==void 0&&r!=null&&y(e,["instances[0]","image"],Br(r));const o=m(t,["scribbleImage"]);return e!==void 0&&o!=null&&y(e,["instances[0]","scribble"],sG(o)),n}function TD(t){const e={},n=m(t,["languageCode"]);n!=null&&y(e,["languageCode"],n);const i=m(t,["voiceConfig"]);if(i!=null&&y(e,["voiceConfig"],i),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function cG(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&y(e,["functionCallingConfig"],dH(n));const i=m(t,["retrievalConfig"]);return i!=null&&y(e,["retrievalConfig"],i),e}function fG(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(v=>v)),y(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&y(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],FH(c));const f=m(t,["googleSearch"]);f!=null&&y(e,["googleSearch"],BH(f));const d=m(t,["urlContext"]);return d!=null&&y(e,["urlContext"],d),e}function ED(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(T=>hH(T))),y(e,["functionDeclarations"],v)}const i=m(t,["retrieval"]);i!=null&&y(e,["retrieval"],i);const r=m(t,["googleSearchRetrieval"]);r!=null&&y(e,["googleSearchRetrieval"],r);const o=m(t,["computerUse"]);if(o!=null&&y(e,["computerUse"],o),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=m(t,["codeExecution"]);l!=null&&y(e,["codeExecution"],l);const c=m(t,["enterpriseWebSearch"]);c!=null&&y(e,["enterpriseWebSearch"],c);const f=m(t,["googleMaps"]);f!=null&&y(e,["googleMaps"],f);const d=m(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],d);const p=m(t,["urlContext"]);return p!=null&&y(e,["urlContext"],p),e}function dG(t){const e={},n=m(t,["baseModel"]);n!=null&&y(e,["baseModel"],n);const i=m(t,["createTime"]);i!=null&&y(e,["createTime"],i);const r=m(t,["updateTime"]);return r!=null&&y(e,["updateTime"],r),e}function hG(t){const e={},n=m(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&y(e,["baseModel"],n);const i=m(t,["createTime"]);i!=null&&y(e,["createTime"],i);const r=m(t,["updateTime"]);return r!=null&&y(e,["updateTime"],r),e}function pG(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const r=m(t,["description"]);e!==void 0&&r!=null&&y(e,["description"],r);const o=m(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&y(e,["defaultCheckpointId"],o),n}function mG(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const r=m(t,["description"]);e!==void 0&&r!=null&&y(e,["description"],r);const o=m(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&y(e,["defaultCheckpointId"],o),n}function gG(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","name"],gt(t,i));const r=m(e,["config"]);return r!=null&&pG(r,n),n}function yG(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const r=m(e,["config"]);return r!=null&&mG(r,n),n}function vG(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const r=m(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&y(e,["parameters","safetySetting"],r);const o=m(t,["personGeneration"]);e!==void 0&&o!=null&&y(e,["parameters","personGeneration"],o);const l=m(t,["includeRaiReason"]);e!==void 0&&l!=null&&y(e,["parameters","includeRaiReason"],l);const c=m(t,["outputMimeType"]);e!==void 0&&c!=null&&y(e,["parameters","outputOptions","mimeType"],c);const f=m(t,["outputCompressionQuality"]);e!==void 0&&f!=null&&y(e,["parameters","outputOptions","compressionQuality"],f);const d=m(t,["enhanceInputImage"]);e!==void 0&&d!=null&&y(e,["parameters","upscaleConfig","enhanceInputImage"],d);const p=m(t,["imagePreservationFactor"]);e!==void 0&&p!=null&&y(e,["parameters","upscaleConfig","imagePreservationFactor"],p);const v=m(t,["labels"]);e!==void 0&&v!=null&&y(e,["labels"],v);const T=m(t,["numberOfImages"]);e!==void 0&&T!=null&&y(e,["parameters","sampleCount"],T);const w=m(t,["mode"]);return e!==void 0&&w!=null&&y(e,["parameters","mode"],w),n}function _G(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],gt(t,i));const r=m(e,["image"]);r!=null&&y(n,["instances[0]","image"],Br(r));const o=m(e,["upscaleFactor"]);o!=null&&y(n,["parameters","upscaleConfig","upscaleFactor"],o);const l=m(e,["config"]);return l!=null&&vG(l,n),n}function TG(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>Ym(o))),y(e,["generatedImages"],r)}return e}function EG(t){const e={},n=m(t,["uri"]);n!=null&&y(e,["uri"],n);const i=m(t,["encodedVideo"]);i!=null&&y(e,["videoBytes"],na(i));const r=m(t,["encoding"]);return r!=null&&y(e,["mimeType"],r),e}function SG(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&y(e,["videoBytes"],na(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function wG(t){const e={},n=m(t,["image"]);n!=null&&y(e,["_self"],Br(n));const i=m(t,["maskMode"]);return i!=null&&y(e,["maskMode"],i),e}function AG(t){const e={},n=m(t,["image"]);n!=null&&y(e,["image"],Jm(n));const i=m(t,["referenceType"]);return i!=null&&y(e,["referenceType"],i),e}function bG(t){const e={},n=m(t,["image"]);n!=null&&y(e,["image"],Br(n));const i=m(t,["referenceType"]);return i!=null&&y(e,["referenceType"],i),e}function SD(t){const e={},n=m(t,["uri"]);n!=null&&y(e,["uri"],n);const i=m(t,["videoBytes"]);i!=null&&y(e,["encodedVideo"],na(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["encoding"],r),e}function wD(t){const e={},n=m(t,["uri"]);n!=null&&y(e,["gcsUri"],n);const i=m(t,["videoBytes"]);i!=null&&y(e,["bytesBase64Encoded"],na(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CG="Content-Type",xG="X-Server-Timeout",IG="User-Agent",M0="x-goog-api-client",RG="1.30.0",NG=`google-genai-sdk/${RG}`,PG="v1beta1",DG="v1beta",Zx=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class MG{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:PG,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:DG,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[l,c]of Object.entries(e.queryParams))r.searchParams.append(l,String(c));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.unaryApiCall(r,o,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,o]of Object.entries(n))typeof o=="object"?i[r]=Object.assign(Object.assign({},i[r]),o):o!==void 0&&(i[r]=o);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.streamApiCall(r,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,r){if(n&&n.timeout||r){const o=new AbortController,l=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const c=setTimeout(()=>o.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}r&&r.addEventListener("abort",()=>{o.abort()}),e.signal=l}return n&&n.extraBody!==null&&kG(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await eI(r),new I0(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await eI(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var n;return uu(this,arguments,function*(){const r=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let l="";for(;;){const{done:c,value:f}=yield zt(r.read());if(c){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=o.decode(f,{stream:!0});try{const v=JSON.parse(d);if("error"in v){const T=JSON.parse(JSON.stringify(v.error)),w=T.status,x=T.code,N=`got status: ${w}. ${JSON.stringify(v)}`;if(x>=400&&x<600)throw new $m({message:N,status:x})}}catch(v){if(v.name==="ApiError")throw v}l+=d;let p=l.match(Zx);for(;p;){const v=p[1];try{const T=new Response(v,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield zt(new I0(T)),l=l.slice(p[0].length),p=l.match(Zx)}catch(T){throw new Error(`exception parsing stream chunk ${v}. ${T}`)}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=NG+" "+this.clientOptions.userAgentExtra;return e[IG]=n,e[M0]=n,e[CG]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[r,o]of Object.entries(e.headers))i.append(r,o);e.timeout&&e.timeout>0&&i.append(xG,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const o=this.clientOptions.uploader,l=await o.stat(e);r.sizeBytes=String(l.size);const c=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=c;const f={file:r},d=this.getFileName(e),p=ve("upload/v1beta/files",f._url),v=await this.fetchUploadUrl(p,r.sizeBytes,r.mimeType,d,f,n==null?void 0:n.httpOptions);return o.upload(e,v,this)}async uploadFileToFileSearchStore(e,n,i){var r;const o=this.clientOptions.uploader,l=await o.stat(n),c=String(l.size),f=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:l.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,p=this.getFileName(n),v={};i!=null&&i.customMetadata&&(v.customMetadata=i.customMetadata),i!=null&&i.chunkingConfig&&(v.chunkingConfig=i.chunkingConfig);const T=await this.fetchUploadUrl(d,c,f,p,v,i==null?void 0:i.httpOptions);return o.uploadToFileSearchStore(n,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,r,o,l){var c;let f={};l?f=l:f={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const d=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:f});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(c=d==null?void 0:d.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function eI(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new $m({message:r,status:n}):new Error(r)}}function kG(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(o,l){const c=Object.assign({},o);for(const f in l)if(Object.prototype.hasOwnProperty.call(l,f)){const d=l[f],p=c[f];d&&typeof d=="object"&&!Array.isArray(d)&&p&&typeof p=="object"&&!Array.isArray(p)?c[f]=i(p,d):(p&&d&&typeof p!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof p}, New type: ${typeof d}. Overwriting.`),c[f]=d)}return c}const r=i(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VG="mcp_used/unknown";let LG=!1;function AD(t){for(const e of t)if(OG(e)||typeof e=="object"&&"inputSchema"in e)return!0;return LG}function bD(t){var e;const n=(e=t[M0])!==null&&e!==void 0?e:"";t[M0]=(n+` ${VG}`).trimStart()}function OG(t){return t!==null&&typeof t=="object"&&t instanceof xT}function UG(t,e=100){return uu(this,arguments,function*(){let i,r=0;for(;r<e;){const o=yield zt(t.listTools({cursor:i}));for(const l of o.tools)yield yield zt(l),r++;if(!o.nextCursor)break;i=o.nextCursor}})}class xT{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new xT(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const o={},l=[];for(const p of this.mcpClients)try{for(var c=!0,f=(n=void 0,ff(UG(p))),d;d=await f.next(),e=d.done,!e;c=!0){r=d.value,c=!1;const v=r;l.push(v);const T=v.name;if(o[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);o[T]=p}}catch(v){n={error:v}}finally{try{!c&&!e&&(i=f.return)&&await i.call(f)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),N9(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const l=await r.callTool({name:i.name,arguments:i.args},void 0,o);n.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function FG(t,e,n){const i=new S9;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(i,r),e(i)}class BG{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),l=HG(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),f=`${r}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${c}`;let d=()=>{};const p=new Promise(F=>{d=F}),v=e.callbacks,T=function(){d({})},w=this.apiClient,x={onopen:T,onmessage:F=>{FG(w,v.onmessage,F)},onerror:(n=v==null?void 0:v.onerror)!==null&&n!==void 0?n:function(F){},onclose:(i=v==null?void 0:v.onclose)!==null&&i!==void 0?i:function(F){}},N=this.webSocketFactory.create(f,zG(l),x);N.connect(),await p;const k={setup:{model:gt(this.apiClient,e.model)}};return N.send(JSON.stringify(k)),new qG(N,this.apiClient)}}class qG{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=xz(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Cz(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Wl.PLAY)}pause(){this.sendPlaybackControl(Wl.PAUSE)}stop(){this.sendPlaybackControl(Wl.STOP)}resetContext(){this.sendPlaybackControl(Wl.RESET_CONTEXT)}close(){this.conn.close()}}function zG(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function HG(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GG="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function jG(t,e,n){const i=new E9;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const o=JSON.parse(r);if(t.isVertexAI()){const l=Nz(o);Object.assign(i,l)}else Object.assign(i,o);e(i)}class $G{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new BG(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,o,l,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let p;const v=this.apiClient.getHeaders();e.config&&e.config.tools&&AD(e.config.tools)&&bD(v);const T=WG(v);if(this.apiClient.isVertexAI())p=`${f}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,p);else{const D=this.apiClient.getApiKey();let V="BidiGenerateContent",U="key";D!=null&&D.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),V="BidiGenerateContentConstrained",U="access_token"),p=`${f}/ws/google.ai.generativelanguage.${d}.GenerativeService.${V}?${U}=${D}`}let w=()=>{};const x=new Promise(D=>{w=D}),N=e.callbacks,P=function(){var D;(D=N==null?void 0:N.onopen)===null||D===void 0||D.call(N),w({})},O=this.apiClient,k={onopen:P,onmessage:D=>{jG(O,N.onmessage,D)},onerror:(n=N==null?void 0:N.onerror)!==null&&n!==void 0?n:function(D){},onclose:(i=N==null?void 0:N.onclose)!==null&&i!==void 0?i:function(D){}},F=this.webSocketFactory.create(p,JG(T),k);F.connect(),await x;let G=gt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&G.startsWith("publishers/")){const D=this.apiClient.getProject(),V=this.apiClient.getLocation();G=`projects/${D}/locations/${V}/`+G}let K={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Qp.AUDIO]}:e.config.responseModalities=[Qp.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const H=(c=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[],R=[];for(const D of H)if(this.isCallableTool(D)){const V=D;R.push(await V.tool())}else R.push(D);R.length>0&&(e.config.tools=R);const I={model:G,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?K=bz(this.apiClient,I):K=Az(this.apiClient,I),delete K.config,F.send(JSON.stringify(K)),new YG(F,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const KG={turnComplete:!0};class YG{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Tr(n.turns),e.isVertexAI()||(i=i.map(r=>Km(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(GG)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},KG),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Rz(e)}:n={realtimeInput:Iz(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function JG(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function WG(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tI=10;function nI(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const l of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(cu(l)){r=!0;break}if(!r)return!0;const o=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function cu(t){return"callTool"in t&&typeof t.callTool=="function"}function XG(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>cu(r)))!==null&&i!==void 0?i:!1}function iI(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,r)=>{if(cu(i))return;const o=i;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(r)}),n}function rI(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QG extends zs{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,o,l,c;const f=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!XG(n)||nI(n.config))return await this.generateContentInternal(f);const d=iI(n);if(d.length>0){const N=d.map(P=>`tools[${P}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${N}.`)}let p,v;const T=Tr(f.contents),w=(o=(r=(i=f.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:tI;let x=0;for(;x<w&&(p=await this.generateContentInternal(f),!(!p.functionCalls||p.functionCalls.length===0));){const N=p.candidates[0].content,P=[];for(const O of(c=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[])if(cu(O)){const F=await O.callTool(p.functionCalls);P.push(...F)}x++,v={role:"user",parts:P},f.contents=Tr(f.contents),f.contents.push(N),f.contents.push(v),rI(f.config)&&(T.push(N),T.push(v))}return rI(f.config)&&(p.automaticFunctionCallingHistory=T),p},this.generateContentStream=async n=>{var i,r,o,l,c;if(this.maybeMoveToResponseJsonSchem(n),nI(n.config)){const v=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(v)}const f=iI(n);if(f.length>0){const v=f.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${v}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(o=(r=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,p=(c=(l=n==null?void 0:n.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||c===void 0?void 0:c.disable;if(d&&!p)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let o;const l=[];if(i!=null&&i.generatedImages)for(const f of i.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((r=f==null?void 0:f.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?o=f==null?void 0:f.safetyAttributes:l.push(f);let c;return o?c={generatedImages:l,positivePromptSafetyAttributes:o,sdkHttpResponse:i.sdkHttpResponse}:c={generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},c}),this.list=async n=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new tl(Fs.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(l),l)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var i,r,o,l,c,f;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((l=(o=n.source)===null||o===void 0?void 0:o.video)===null||l===void 0)&&l.uri&&(!((f=(c=n.source)===null||c===void 0?void 0:c.video)===null||f===void 0)&&f.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const l=await Promise.all(o.map(async f=>cu(f)?await f.tool():f)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(c.config.tools=l,e.config&&e.config.tools&&AD(e.config.tools)){const f=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let d=Object.assign({},f);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),bD(d),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return c}async initAfcToolsMap(e){var n,i,r;const o=new Map;for(const l of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(cu(l)){const c=l,f=await c.tool();for(const d of(r=f.functionDeclarations)!==null&&r!==void 0?r:[]){if(!d.name)throw new Error("Function declaration name is required.");if(o.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);o.set(d.name,c)}}return o}async processAfcStream(e){var n,i,r;const o=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:tI;let l=!1,c=0;const f=await this.initAfcToolsMap(e);return(function(d,p,v){var T,w;return uu(this,arguments,function*(){for(var x,N,P,O;c<o;){l&&(c++,l=!1);const K=yield zt(d.processParamsMaybeAddMcpUsage(v)),H=yield zt(d.generateContentStreamInternal(K)),R=[],I=[];try{for(var k=!0,F=(N=void 0,ff(H)),G;G=yield zt(F.next()),x=G.done,!x;k=!0){O=G.value,k=!1;const D=O;if(yield yield zt(D),D.candidates&&(!((T=D.candidates[0])===null||T===void 0)&&T.content)){I.push(D.candidates[0].content);for(const V of(w=D.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(c<o&&V.functionCall){if(!V.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(V.functionCall.name)){const U=yield zt(p.get(V.functionCall.name).callTool([V.functionCall]));R.push(...U)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${V.functionCall.name}`)}}}}catch(D){N={error:D}}finally{try{!k&&!x&&(P=F.return)&&(yield zt(P.call(F)))}finally{if(N)throw N.error}}if(R.length>0){l=!0;const D=new Lc;D.candidates=[{content:{role:"user",parts:R}}],yield yield zt(D);const V=[];V.push(...I),V.push({role:"user",parts:R});const U=Tr(v.contents).concat(V);v.contents=U}else break}})})(this,f,e)}async generateContentInternal(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=Wx(this.apiClient,e);return c=ve("{model}:generateContent",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=Qx(p),T=new Lc;return Object.assign(T,v),T})}else{const d=Jx(this.apiClient,e);return c=ve("{model}:generateContent",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=Xx(p),T=new Lc;return Object.assign(T,v),T})}}async generateContentStreamInternal(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=Wx(this.apiClient,e);return c=ve("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.requestStream({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(v){return uu(this,arguments,function*(){var T,w,x,N;try{for(var P=!0,O=ff(v),k;k=yield zt(O.next()),T=k.done,!T;P=!0){N=k.value,P=!1;const F=N,G=Qx(yield zt(F.json()));G.sdkHttpResponse={headers:F.headers};const K=new Lc;Object.assign(K,G),yield yield zt(K)}}catch(F){w={error:F}}finally{try{!P&&!T&&(x=O.return)&&(yield zt(x.call(O)))}finally{if(w)throw w.error}}})})}else{const d=Jx(this.apiClient,e);return c=ve("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.requestStream({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),l.then(function(v){return uu(this,arguments,function*(){var T,w,x,N;try{for(var P=!0,O=ff(v),k;k=yield zt(O.next()),T=k.done,!T;P=!0){N=k.value,P=!1;const F=N,G=Xx(yield zt(F.json()));G.sdkHttpResponse={headers:F.headers};const K=new Lc;Object.assign(K,G),yield yield zt(K)}}catch(F){w={error:F}}finally{try{!P&&!T&&(x=O.return)&&(yield zt(x.call(O)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=oH(this.apiClient,e);return c=ve("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=lH(p),T=new Mx;return Object.assign(T,v),T})}else{const d=sH(this.apiClient,e);return c=ve("{model}:batchEmbedContents",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=aH(p),T=new Mx;return Object.assign(T,v),T})}}async generateImagesInternal(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=_H(this.apiClient,e);return c=ve("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=EH(p),T=new kx;return Object.assign(T,v),T})}else{const d=vH(this.apiClient,e);return c=ve("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=TH(p),T=new kx;return Object.assign(T,v),T})}}async editImageInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=tH(this.apiClient,e);return o=ve("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),r.then(f=>{const d=nH(f),p=new c9;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=_G(this.apiClient,e);return o=ve("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),r.then(f=>{const d=TG(f),p=new f9;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=eG(this.apiClient,e);return o=ve("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const d=tG(f),p=new d9;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=aG(this.apiClient,e);return o=ve("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const d=lG(f),p=new h9;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=UH(this.apiClient,e);return c=ve("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>D0(p))}else{const d=OH(this.apiClient,e);return c=ve("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>P0(p))}}async listInternal(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=KH(this.apiClient,e);return c=ve("{models_url}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=JH(p),T=new Vx;return Object.assign(T,v),T})}else{const d=$H(this.apiClient,e);return c=ve("{models_url}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=YH(p),T=new Vx;return Object.assign(T,v),T})}}async update(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=yG(this.apiClient,e);return c=ve("{model}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>D0(p))}else{const d=gG(this.apiClient,e);return c=ve("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>P0(p))}}async delete(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=Xz(this.apiClient,e);return c=ve("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=Zz(p),T=new Lx;return Object.assign(T,v),T})}else{const d=Wz(this.apiClient,e);return c=ve("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=Qz(p),T=new Lx;return Object.assign(T,v),T})}}async countTokens(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=Kz(this.apiClient,e);return c=ve("{model}:countTokens",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=Jz(p),T=new Ox;return Object.assign(T,v),T})}else{const d=$z(this.apiClient,e);return c=ve("{model}:countTokens",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=Yz(p),T=new Ox;return Object.assign(T,v),T})}}async computeTokens(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=Fz(this.apiClient,e);return o=ve("{model}:computeTokens",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),r.then(f=>{const d=Bz(f),p=new p9;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=xH(this.apiClient,e);return c=ve("{model}:predictLongRunning",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>{const v=bH(p),T=new Zp;return Object.assign(T,v),T})}else{const d=CH(this.apiClient,e);return c=ve("{model}:predictLongRunning",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>{const v=AH(p),T=new Zp;return Object.assign(T,v),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZG extends zs{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=r9(e);return c=ve("{operationName}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l}else{const d=i9(e);return c=ve("{operationName}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l}}async fetchPredictVideosOperationInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=WB(e);return o=ve("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function e8(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function t8(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>c8(o))),y(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function n8(t,e,n){const i={},r=m(e,["expireTime"]);n!==void 0&&r!=null&&y(n,["expireTime"],r);const o=m(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&y(n,["newSessionExpireTime"],o);const l=m(e,["uses"]);n!==void 0&&l!=null&&y(n,["uses"],l);const c=m(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&y(n,["bidiGenerateContentSetup"],u8(t,c));const f=m(e,["lockAdditionalFields"]);return n!==void 0&&f!=null&&y(n,["fieldMask"],f),i}function i8(t,e){const n={},i=m(e,["config"]);return i!=null&&y(n,["config"],n8(t,i,n)),n}function r8(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function s8(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const i=m(t,["args"]);i!=null&&y(e,["args"],i);const r=m(t,["name"]);if(r!=null&&y(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function o8(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function a8(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function l8(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],i);const r=m(t,["responseModalities"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","responseModalities"],r);const o=m(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const l=m(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=m(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const f=m(t,["maxOutputTokens"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","maxOutputTokens"],f);const d=m(t,["mediaResolution"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","mediaResolution"],d);const p=m(t,["seed"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","seed"],p);const v=m(t,["speechConfig"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","speechConfig"],CT(v));const T=m(t,["thinkingConfig"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","thinkingConfig"],T);const w=m(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],w);const x=m(t,["systemInstruction"]);e!==void 0&&x!=null&&y(e,["setup","systemInstruction"],t8(ai(x)));const N=m(t,["tools"]);if(e!==void 0&&N!=null){let H=Vu(N);Array.isArray(H)&&(H=H.map(R=>d8(ku(R)))),y(e,["setup","tools"],H)}const P=m(t,["sessionResumption"]);e!==void 0&&P!=null&&y(e,["setup","sessionResumption"],f8(P));const O=m(t,["inputAudioTranscription"]);e!==void 0&&O!=null&&y(e,["setup","inputAudioTranscription"],O);const k=m(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&y(e,["setup","outputAudioTranscription"],k);const F=m(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&y(e,["setup","realtimeInputConfig"],F);const G=m(t,["contextWindowCompression"]);e!==void 0&&G!=null&&y(e,["setup","contextWindowCompression"],G);const K=m(t,["proactivity"]);return e!==void 0&&K!=null&&y(e,["setup","proactivity"],K),n}function u8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["setup","model"],gt(t,i));const r=m(e,["config"]);return r!=null&&y(n,["config"],l8(r,n)),n}function c8(t){const e={},n=m(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],r8(o));const l=m(t,["functionCall"]);l!=null&&y(e,["functionCall"],s8(l));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const f=m(t,["inlineData"]);f!=null&&y(e,["inlineData"],e8(f));const d=m(t,["text"]);d!=null&&y(e,["text"],d);const p=m(t,["thought"]);p!=null&&y(e,["thought"],p);const v=m(t,["thoughtSignature"]);v!=null&&y(e,["thoughtSignature"],v);const T=m(t,["videoMetadata"]);return T!=null&&y(e,["videoMetadata"],T),e}function f8(t){const e={},n=m(t,["handle"]);if(n!=null&&y(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function d8(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(v=>v)),y(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&y(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],o8(c));const f=m(t,["googleSearch"]);f!=null&&y(e,["googleSearch"],a8(f));const d=m(t,["urlContext"]);return d!=null&&y(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function h8(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(o=>`${n}.${o}`);e.push(...r)}else e.push(n)}return e.join(",")}function p8(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const o=i.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const o=h8(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];r.length>0&&(c=r.map(d=>l.includes(d)?`generationConfig.${d}`:d));const f=[];o&&f.push(o),c.length>0&&f.push(...c),f.length>0?t.fieldMask=f.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class m8 extends zs{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=i8(this.apiClient,e);o=ve("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const f=p8(c,e.config);return r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function g8(t,e){const n={},i=m(t,["displayName"]);return e!==void 0&&i!=null&&y(e,["displayName"],i),n}function y8(t){const e={},n=m(t,["config"]);return n!=null&&g8(n,e),e}function v8(t,e){const n={},i=m(t,["force"]);return e!==void 0&&i!=null&&y(e,["_query","force"],i),n}function _8(t){const e={},n=m(t,["name"]);n!=null&&y(e,["_url","name"],n);const i=m(t,["config"]);return i!=null&&v8(i,e),e}function T8(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","name"],n),e}function E8(t,e){const n={},i=m(t,["customMetadata"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["customMetadata"],o)}const r=m(t,["chunkingConfig"]);return e!==void 0&&r!=null&&y(e,["chunkingConfig"],r),n}function S8(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response"]);return l!=null&&y(e,["response"],A8(l)),e}function w8(t){const e={},n=m(t,["fileSearchStoreName"]);n!=null&&y(e,["_url","file_search_store_name"],n);const i=m(t,["fileName"]);i!=null&&y(e,["fileName"],i);const r=m(t,["config"]);return r!=null&&E8(r,e),e}function A8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["parent"]);i!=null&&y(e,["parent"],i);const r=m(t,["documentName"]);return r!=null&&y(e,["documentName"],r),e}function b8(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),n}function C8(t){const e={},n=m(t,["config"]);return n!=null&&b8(n,e),e}function x8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["fileSearchStores"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["fileSearchStores"],o)}return e}function I8(t,e){const n={},i=m(t,["mimeType"]);e!==void 0&&i!=null&&y(e,["mimeType"],i);const r=m(t,["displayName"]);e!==void 0&&r!=null&&y(e,["displayName"],r);const o=m(t,["customMetadata"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>f)),y(e,["customMetadata"],c)}const l=m(t,["chunkingConfig"]);return e!==void 0&&l!=null&&y(e,["chunkingConfig"],l),n}function R8(t){const e={},n=m(t,["fileSearchStoreName"]);n!=null&&y(e,["_url","file_search_store_name"],n);const i=m(t,["config"]);return i!=null&&I8(i,e),e}function N8(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function P8(t,e){const n={},i=m(t,["force"]);return e!==void 0&&i!=null&&y(e,["_query","force"],i),n}function D8(t){const e={},n=m(t,["name"]);n!=null&&y(e,["_url","name"],n);const i=m(t,["config"]);return i!=null&&P8(i,e),e}function M8(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","name"],n),e}function k8(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),n}function V8(t){const e={},n=m(t,["parent"]);n!=null&&y(e,["_url","parent"],n);const i=m(t,["config"]);return i!=null&&k8(i,e),e}function L8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["documents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class O8 extends zs{constructor(e){super(),this.apiClient=e,this.list=async n=>new tl(Fs.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=M8(e);return o=ve("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>f)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=D8(e);r=ve("{name}",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=V8(e);return o=ve("{parent}/documents",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const d=L8(f),p=new m9;return Object.assign(p,d),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class U8 extends zs{constructor(e,n=new O8(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new tl(Fs.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=y8(e);return o=ve("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>f)}}async get(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=T8(e);return o=ve("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>f)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=_8(e);r=ve("{name}",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=C8(e);return o=ve("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const d=x8(f),p=new g9;return Object.assign(p,d),p})}}async uploadToFileSearchStoreInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=R8(e);return o=ve("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const d=N8(f),p=new y9;return Object.assign(p,d),p})}}async importFile(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=w8(e);return o=ve("{file_search_store_name}:importFile",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const d=S8(f),p=new ET;return Object.assign(p,d),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function F8(t,e){const n={},i=m(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function B8(t,e){const n={},i=m(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function q8(t,e,n){const i={};if(m(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=m(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&y(e,["displayName"],r),m(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=m(t,["epochCount"]);e!==void 0&&o!=null&&y(e,["tuningTask","hyperparameters","epochCount"],o);const l=m(t,["learningRateMultiplier"]);if(l!=null&&y(i,["tuningTask","hyperparameters","learningRateMultiplier"],l),m(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(m(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(m(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=m(t,["batchSize"]);e!==void 0&&c!=null&&y(e,["tuningTask","hyperparameters","batchSize"],c);const f=m(t,["learningRate"]);if(e!==void 0&&f!=null&&y(e,["tuningTask","hyperparameters","learningRate"],f),m(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(m(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function z8(t,e,n){const i={};let r=m(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const w=m(t,["validationDataset"]);e!==void 0&&w!=null&&y(e,["supervisedTuningSpec"],sI(w))}else if(r==="PREFERENCE_TUNING"){const w=m(t,["validationDataset"]);e!==void 0&&w!=null&&y(e,["preferenceOptimizationSpec"],sI(w))}const o=m(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&y(e,["tunedModelDisplayName"],o);const l=m(t,["description"]);e!==void 0&&l!=null&&y(e,["description"],l);let c=m(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const w=m(t,["epochCount"]);e!==void 0&&w!=null&&y(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(c==="PREFERENCE_TUNING"){const w=m(t,["epochCount"]);e!==void 0&&w!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let f=m(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const w=m(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&y(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(f==="PREFERENCE_TUNING"){const w=m(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let d=m(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const w=m(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&y(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(d==="PREFERENCE_TUNING"){const w=m(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&y(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let p=m(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const w=m(t,["adapterSize"]);e!==void 0&&w!=null&&y(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(p==="PREFERENCE_TUNING"){const w=m(t,["adapterSize"]);e!==void 0&&w!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(m(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(m(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const v=m(t,["labels"]);e!==void 0&&v!=null&&y(e,["labels"],v);const T=m(t,["beta"]);return e!==void 0&&T!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),i}function H8(t,e){const n={},i=m(t,["baseModel"]);i!=null&&y(n,["baseModel"],i);const r=m(t,["preTunedModel"]);r!=null&&y(n,["preTunedModel"],r);const o=m(t,["trainingDataset"]);o!=null&&e7(o);const l=m(t,["config"]);return l!=null&&q8(l,n),n}function G8(t,e){const n={},i=m(t,["baseModel"]);i!=null&&y(n,["baseModel"],i);const r=m(t,["preTunedModel"]);r!=null&&y(n,["preTunedModel"],r);const o=m(t,["trainingDataset"]);o!=null&&t7(o,n,e);const l=m(t,["config"]);return l!=null&&z8(l,n,e),n}function j8(t,e){const n={},i=m(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function $8(t,e){const n={},i=m(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function K8(t,e,n){const i={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const o=m(t,["pageToken"]);e!==void 0&&o!=null&&y(e,["_query","pageToken"],o);const l=m(t,["filter"]);return e!==void 0&&l!=null&&y(e,["_query","filter"],l),i}function Y8(t,e,n){const i={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const o=m(t,["pageToken"]);e!==void 0&&o!=null&&y(e,["_query","pageToken"],o);const l=m(t,["filter"]);return e!==void 0&&l!=null&&y(e,["_query","filter"],l),i}function J8(t,e){const n={},i=m(t,["config"]);return i!=null&&K8(i,n),n}function W8(t,e){const n={},i=m(t,["config"]);return i!=null&&Y8(i,n),n}function X8(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const r=m(t,["nextPageToken"]);r!=null&&y(n,["nextPageToken"],r);const o=m(t,["tunedModels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>CD(c))),y(n,["tuningJobs"],l)}return n}function Q8(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const r=m(t,["nextPageToken"]);r!=null&&y(n,["nextPageToken"],r);const o=m(t,["tuningJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>k0(c))),y(n,["tuningJobs"],l)}return n}function Z8(t,e){const n={},i=m(t,["name"]);i!=null&&y(n,["model"],i);const r=m(t,["name"]);return r!=null&&y(n,["endpoint"],r),n}function e7(t,e){const n={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=m(t,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),y(n,["examples","examples"],r)}return n}function t7(t,e,n){const i={};let r=m(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const l=m(t,["gcsUri"]);e!==void 0&&l!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(r==="PREFERENCE_TUNING"){const l=m(t,["gcsUri"]);e!==void 0&&l!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let o=m(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const l=m(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(o==="PREFERENCE_TUNING"){const l=m(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(m(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function CD(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const r=m(t,["name"]);r!=null&&y(n,["name"],r);const o=m(t,["state"]);o!=null&&y(n,["state"],aD(o));const l=m(t,["createTime"]);l!=null&&y(n,["createTime"],l);const c=m(t,["tuningTask","startTime"]);c!=null&&y(n,["startTime"],c);const f=m(t,["tuningTask","completeTime"]);f!=null&&y(n,["endTime"],f);const d=m(t,["updateTime"]);d!=null&&y(n,["updateTime"],d);const p=m(t,["description"]);p!=null&&y(n,["description"],p);const v=m(t,["baseModel"]);v!=null&&y(n,["baseModel"],v);const T=m(t,["_self"]);return T!=null&&y(n,["tunedModel"],Z8(T)),n}function k0(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const r=m(t,["name"]);r!=null&&y(n,["name"],r);const o=m(t,["state"]);o!=null&&y(n,["state"],aD(o));const l=m(t,["createTime"]);l!=null&&y(n,["createTime"],l);const c=m(t,["startTime"]);c!=null&&y(n,["startTime"],c);const f=m(t,["endTime"]);f!=null&&y(n,["endTime"],f);const d=m(t,["updateTime"]);d!=null&&y(n,["updateTime"],d);const p=m(t,["error"]);p!=null&&y(n,["error"],p);const v=m(t,["description"]);v!=null&&y(n,["description"],v);const T=m(t,["baseModel"]);T!=null&&y(n,["baseModel"],T);const w=m(t,["tunedModel"]);w!=null&&y(n,["tunedModel"],w);const x=m(t,["preTunedModel"]);x!=null&&y(n,["preTunedModel"],x);const N=m(t,["supervisedTuningSpec"]);N!=null&&y(n,["supervisedTuningSpec"],N);const P=m(t,["preferenceOptimizationSpec"]);P!=null&&y(n,["preferenceOptimizationSpec"],P);const O=m(t,["tuningDataStats"]);O!=null&&y(n,["tuningDataStats"],O);const k=m(t,["encryptionSpec"]);k!=null&&y(n,["encryptionSpec"],k);const F=m(t,["partnerModelTuningSpec"]);F!=null&&y(n,["partnerModelTuningSpec"],F);const G=m(t,["customBaseModel"]);G!=null&&y(n,["customBaseModel"],G);const K=m(t,["experiment"]);K!=null&&y(n,["experiment"],K);const H=m(t,["labels"]);H!=null&&y(n,["labels"],H);const R=m(t,["outputUri"]);R!=null&&y(n,["outputUri"],R);const I=m(t,["pipelineJob"]);I!=null&&y(n,["pipelineJob"],I);const D=m(t,["serviceAccount"]);D!=null&&y(n,["serviceAccount"],D);const V=m(t,["tunedModelDisplayName"]);V!=null&&y(n,["tunedModelDisplayName"],V);const U=m(t,["veoTuningSpec"]);return U!=null&&y(n,["veoTuningSpec"],U),n}function n7(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const r=m(t,["name"]);r!=null&&y(n,["name"],r);const o=m(t,["metadata"]);o!=null&&y(n,["metadata"],o);const l=m(t,["done"]);l!=null&&y(n,["done"],l);const c=m(t,["error"]);return c!=null&&y(n,["error"],c),n}function sI(t,e){const n={},i=m(t,["gcsUri"]);i!=null&&y(n,["validationDatasetUri"],i);const r=m(t,["vertexDatasetResource"]);return r!=null&&y(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class i7 extends zs{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new tl(Fs.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:r});return o.baseModel=void 0,await this.tuneInternal(o)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),o=await this.tuneMldevInternal(r);let l="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?l=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(l=o.name.split("/operations/")[0]),{name:l,state:x0.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=$8(e);return c=ve("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>k0(p))}else{const d=j8(e);return c=ve("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>CD(p))}}async listInternal(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=W8(e);return c=ve("tuningJobs",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=Q8(p),T=new Ux;return Object.assign(T,v),T})}else{const d=J8(e);return c=ve("tunedModels",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=X8(p),T=new Ux;return Object.assign(T,v),T})}}async cancel(e){var n,i,r,o;let l="",c={};if(this.apiClient.isVertexAI()){const f=B8(e);l=ve("{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=F8(e);l=ve("{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async tuneInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=G8(e,e);return o=ve("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),r.then(f=>k0(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=H8(e);return o=ve("tunedModels",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),r.then(f=>n7(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class r7{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const s7=1024*1024*8,o7=3,a7=1e3,l7=2,tm="x-goog-upload-status";async function u7(t,e,n){var i;const r=await xD(t,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[tm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function c7(t,e,n){var i;const r=await xD(t,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[tm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=tD(o),c=new ST;return Object.assign(c,l),c}async function xD(t,e,n){var i,r;let o=0,l=0,c=new I0(new Response),f="upload";for(o=t.size;l<o;){const d=Math.min(s7,o-l),p=t.slice(l,l+d);l+d>=o&&(f+=", finalize");let v=0,T=a7;for(;v<o7&&(c=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(l),"Content-Length":String(d)}}}),!(!((i=c==null?void 0:c.headers)===null||i===void 0)&&i[tm]));)v++,await d7(T),T=T*l7;if(l+=d,((r=c==null?void 0:c.headers)===null||r===void 0?void 0:r[tm])!=="active")break;if(o<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function f7(t){return{size:t.size,type:t.type}}function d7(t){return new Promise(e=>setTimeout(e,t))}class h7{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await u7(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await c7(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await f7(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class p7{create(e,n,i){return new m7(e,n,i)}}class m7{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oI="x-goog-api-key";class g7{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(oI)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(oI,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const y7="gl-node/";class v7{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=YB(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const r=new g7(this.apiKey);this.apiClient=new MG({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:y7+"web",uploader:new h7,downloader:new r7}),this.models=new QG(this.apiClient),this.live=new $G(this.apiClient,r,new p7),this.batches=new wq(this.apiClient),this.chats=new rz(this.models,this.apiClient),this.caches=new tz(this.apiClient),this.files=new pz(this.apiClient),this.operations=new ZG(this.apiClient),this.authTokens=new m8(this.apiClient),this.tunings=new i7(this.apiClient),this.fileSearchStores=new U8(this.apiClient)}}const ID={geminiApiKey:"AIzaSyBAzdNikRnpu5iyeg8VJ03fc0HXVG2B2iY",openWeatherApiKey:"074ebc9404ca1a72d5b0759070161539"},Wm=new v7({apiKey:ID.geminiApiKey});function Xm(t){try{if(typeof t.text=="function")return t.text();if(t.candidates&&t.candidates.length>0){const e=t.candidates[0];if(e.content&&e.content.parts&&e.content.parts.length>0)return e.content.parts[0].text||"{}"}return"{}"}catch(e){return console.error("Erreur lors de l'extraction du texte Gemini:",e),"{}"}}async function _7(t){const e={text:`Analyse chacune des images de vtements fournies. Pour chaque image, dans l'ordre, extrais les informations suivantes en franais :
    1. Une description concise incluant son type (ex: T-shirt, jean), sa couleur principale, et son style.
    2. Sa catgorie : "Hauts", "Bas", "Chaussures", ou "Accessoires".
    3. Sa couleur principale (ex: "Bleu", "Noir"). Sois concis.
    4. Sa matire principale (ex: "Coton", "Cuir"). Sois concis.
    
    Retourne le rsultat sous la forme d'un objet JSON unique contenant une cl "items", qui est un tableau d'objets.`},n=t.map(r=>({inlineData:{data:r,mimeType:"image/jpeg"}})),i=await Wm.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[e,...n]},config:{responseMimeType:"application/json",responseSchema:{type:Ge.OBJECT,properties:{items:{type:Ge.ARRAY,items:{type:Ge.OBJECT,properties:{analysis:{type:Ge.STRING},category:{type:Ge.STRING,enum:["Hauts","Bas","Chaussures","Accessoires"]},color:{type:Ge.STRING},material:{type:Ge.STRING}},required:["analysis","category","color","material"]}}},required:["items"]}}});try{const r=Xm(i),o=JSON.parse(r),l=["Hauts","Bas","Chaussures","Accessoires"];return o.items?(o.items.forEach(c=>{l.includes(c.category)||(c.category="Accessoires")}),o.items):[]}catch(r){throw console.error("Erreur parsing Gemini:",r),new Error("L'IA a renvoy une rponse malforme.")}}async function T7(t,e,n,i){const r=new Set((e||[]).flatMap(T=>T.itemIds)),l=t.filter(T=>!r.has(T.id)).map(T=>`- ${T.analysis} (ID: ${T.id}, Cat: ${T.category})`).join(`
`),c=e.map(T=>`- ${T.name} (Ensemble, ID: ${T.id})`).join(`
`),f=[l,c].filter(Boolean).join(`
`),d=i?`
**RGLE D'ANCRAGE : La tenue DOIT inclure : "${"name"in i?i.name:i.analysis} (ID: ${i.id})".**
`:"",p=`
    Tu es un styliste expert reconnu pour ton got impeccable. Cre 3 tenues compltes et harmonieuses bases sur le contexte : "${n}".
    
    Vtements disponibles :
    ${f}
    ${d}

    Rgles IMPRATIVES de style, de CONFORT et d'ESTHTIQUE :

    1. **BASE :** Utilise UNIQUEMENT les articles lists. Chaque tenue doit tre complte (Haut + Bas + Chaussures).
    
    2. **ACCESSOIRES :** Chaque tenue DOIT tre accompagne d'une montre (si disponible).
    
    3. **SUPERPOSITION (LAYERING) :**
       - Si tu utilises un **pull  col V**, tu DOIS lui associer une **chemise** en dessous.
       - Si tu utilises un **pull  col camionneur (zipp)**, tu DOIS lui associer un **t-shirt** ou une **chemise** en dessous.

    4. **LOGIQUE THERMIQUE (CRITIQUE) :**
       - Analyse la mto dans le contexte.
       - **FROID (< 10C)** : Layering OBLIGATOIRE (ex: T-shirt + Pull + Manteau). Ne laisse jamais une simple chemise seule sous un manteau.
       - **DOUX (10-20C)** : Veste lgre ou Pull/Sweat.
       - **CHAUD (> 20C)** : Une seule couche (T-shirt ou Chemise), pas de grosses paisseurs.

    5. **HARMONIE DES COULEURS & MOTIFS (STYLE) :**
       - **Rgle des 3 couleurs :** Ne combine pas plus de 3 couleurs fortes diffrentes dans une mme tenue.
       - **quilibre :** Si le haut est  motifs (rayures, carreaux, imprim), le bas DOIT tre uni (et inversement). Jamais deux motifs diffrents ensemble.
       - **Contraste :** vite les tons trop proches qui jurent (ex: bleu marine avec noir, sauf si c'est un choix dlibr "chic").

    6. **VARIT DES PROPOSITIONS :**
       - Les 3 tenues proposes doivent tre VISUELLEMENT diffrentes.
       - vite de proposer le mme pantalon pour les 3 tenues si tu as d'autres options valides.

    7. **SORTIE :** Renvoie l'ID EXACT et la description EXACTE pour chaque article slectionn.

    Rponds en JSON avec une liste "tenues".
  `,v=await Wm.models.generateContent({model:"gemini-2.5-flash",contents:p,config:{responseMimeType:"application/json",responseSchema:{type:Ge.OBJECT,properties:{tenues:{type:Ge.ARRAY,items:{type:Ge.OBJECT,properties:{titre:{type:Ge.STRING},description:{type:Ge.STRING},vetements:{type:Ge.ARRAY,items:{type:Ge.OBJECT,properties:{id:{type:Ge.STRING},description:{type:Ge.STRING}},required:["id","description"]}}},required:["titre","description","vetements"]}}},required:["tenues"]}}});try{const T=Xm(v);return JSON.parse(T).tenues}catch(T){throw console.error("Erreur parsing Gemini:",T),new Error("Rponse malforme.")}}async function E7(t,e){const n=t.map(l=>`${l.category}: ${l.analysis}`).join(`
`),i=`Analyse cette garde-robe (${t.length} pices) et suggre 3-5 achats stratgiques.
  
  Garde-robe :
  ${n}
  
  Renvoie un rsum, les points forts, les manques, et des suggestions avec priorit et prix estim.`,r=await Wm.models.generateContent({model:"gemini-2.5-flash",contents:i,config:{responseMimeType:"application/json",responseSchema:{type:Ge.OBJECT,properties:{summary:{type:Ge.STRING},strengths:{type:Ge.ARRAY,items:{type:Ge.STRING}},gaps:{type:Ge.ARRAY,items:{type:Ge.STRING}},suggestions:{type:Ge.ARRAY,items:{type:Ge.OBJECT,properties:{category:{type:Ge.STRING},description:{type:Ge.STRING},reason:{type:Ge.STRING},priority:{type:Ge.STRING,enum:["high","medium","low"]},estimatedPrice:{type:Ge.STRING}},required:["category","description","reason","priority","estimatedPrice"]}}},required:["summary","strengths","gaps","suggestions"]}}}),o=Xm(r);return JSON.parse(o)}async function S7(t,e,n,i,r){const o=new Set((e||[]).flatMap(x=>x.itemIds)),c=t.filter(x=>!o.has(x.id)).map(x=>`- ${x.analysis} (ID: ${x.id})`).join(`
`),f=e.map(x=>`- ${x.name} (Ensemble, ID: ${x.id})`).join(`
`),d=[c,f].filter(Boolean).join(`
`),p=r?`CONTRAINTE MAJEURE : Le poids total de la valise NE DOIT PAS dpasser ${r} kg. Estime le poids moyen de chaque vtement (ex: T-shirt ~150g, Jean ~600g) pour respecter cette limite.`:"",v=`Cre une valise optimise pour ${n} jours. Contexte : ${i}.
    ${p}
    
    Utilise ces vtements :
    ${d}
    
    Renvoie un titre, un rsum (mentionne si la limite de poids est respecte) et la liste des articles (id et description).`,T=await Wm.models.generateContent({model:"gemini-2.5-flash",contents:v,config:{responseMimeType:"application/json",responseSchema:{type:Ge.OBJECT,properties:{titre:{type:Ge.STRING},resume:{type:Ge.STRING},valise:{type:Ge.ARRAY,items:{type:Ge.OBJECT,properties:{id:{type:Ge.STRING},description:{type:Ge.STRING}},required:["id","description"]}}},required:["titre","resume","valise"]}}}),w=Xm(T);return JSON.parse(w)}const w7=BB(GB,"generateVisualOutfit");async function A7(t,e){console.log(" Prparation du Virtual Try-On...");const n=t[0];if(!n||!n.imageSrc)throw new Error("Aucun vtement valide trouv pour l'essayage.");try{const r=(await w7({garmentUrl:n.imageSrc,category:n.category,description:n.analysis})).data;if(!r||!r.imageUrl)throw new Error("Pas d'image retourne par le serveur.");return console.log(" Image reue de Replicate !"),r.imageUrl}catch(i){throw console.error(" Erreur lors de l'appel Cloud Function :",i),i}}const b7=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),C7=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),aI=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),RD=({className:t="h-8 w-8 text-gold"})=>S.jsxs("svg",{className:`animate-spin ${t}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),IT=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{d:"M10 3a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0V7H8a1 1 0 110-2h1V4a1 1 0 011-1zM4 9a1 1 0 011 1v1h1a1 1 0 110 2H5v1a1 1 0 11-2 0v-1H2a1 1 0 110-2h1v-1a1 1 0 011-1zM16 9a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})}),Qm=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),lI=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.5 6.6C12.5 5.54903 11.651 4.7 10.6 4.7C9.54903 4.7 8.7 5.54903 8.7 6.6V8.7C8.7 9.36274 9.23726 9.9 9.9 9.9H14.1C14.7627 9.9 15.3 9.36274 15.3 8.7V7.8"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.10879 16.5C4.43285 14.805 5.86246 13.5 7.6 13.5H16.4C18.1375 13.5 19.5672 14.805 19.8912 16.5L20.5 19.5H3.5L4.10879 16.5Z"})]}),ND=()=>S.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4 0 1.132-.497 2.16-1.32 2.874-.823.714-1.823 1.126-2.904 1.126H12v.01M12 17h.01"})}),x7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 4h6l2 5-2 1-3-4-3 4-2-1 2-5z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v10m-3-10v10h6V10"})]}),I7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 4h12v10H6z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 14v6h-2L6 4"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 14v6h2l1-16"})]}),R7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 18h16l-3-6H7L4 18z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 12V7a2 2 0 012-2h0a2 2 0 012 2v5"})]}),N7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 000-18 9 9 0 000 18z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11.5l-3.5 3.5"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.5 8.5l-3.5 3.5"})]}),nm=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),RT=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Zm=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),NT=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),P7=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),D7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[S.jsx("path",{d:"M8 3a1 1 0 000 2h4a1 1 0 100-2H8z"}),S.jsx("path",{fillRule:"evenodd",d:"M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 3a1 1 0 011-1h10a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1V7z",clipRule:"evenodd"})]}),PT=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 016.364 0L12 7.5l1.318-1.182a4.5 4.5 0 116.364 6.364L12 18.75l-7.682-7.682a4.5 4.5 0 010-6.364z"})}),Vf=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),M7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})]}),PD=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),DD=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"})}),k7=({theme:t,toggleTheme:e,children:n,isModalOpen:i=!1})=>S.jsx("header",{className:`bg-snow/80 dark:bg-onyx/80 backdrop-blur-lg border-b border-black/5 dark:border-white/10 sticky top-0 transition-all ${i?"z-10":"z-50"}`,children:S.jsxs("div",{className:"container mx-auto px-4 lg:px-8 h-24 flex justify-between items-center",children:[S.jsxs("h1",{className:"text-4xl font-serif font-bold tracking-wider text-raisin-black dark:text-snow",children:["Dress ",S.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),S.jsxs("div",{className:"flex items-center gap-4",children:[n,S.jsx("button",{onClick:e,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-black/5 dark:hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx transition-colors","aria-label":"Changer le thme",children:t==="light"?S.jsx(C7,{}):S.jsx(b7,{})})]})]})}),uI=({user:t})=>{var w,x,N;const[e,n]=q.useState(""),[i,r]=q.useState(""),[o,l]=q.useState(!1),[c,f]=q.useState(!1),d=q.useRef(null);q.useEffect(()=>{const P=O=>{d.current&&!d.current.contains(O.target)&&f(!1)};return c&&document.addEventListener("mousedown",P),()=>{document.removeEventListener("mousedown",P)}},[c]);const p=async()=>{try{await WU(Jc,zB)}catch(P){console.error("Erreur de connexion Google:",P)}},v=async P=>{P.preventDefault();try{o?await bU(Jc,e,i):await CU(Jc,e,i)}catch(O){console.error("Erreur d'authentification:",O)}},T=async()=>{try{await NU(Jc)}catch(P){console.error("Erreur de dconnexion:",P)}};return t?S.jsxs("div",{className:"relative",ref:d,children:[S.jsxs("button",{onClick:()=>f(!c),className:"flex items-center gap-3 px-4 py-2 rounded-full bg-gold/10 hover:bg-gold/20 transition-all border border-gold/30",children:[S.jsx("div",{className:"w-8 h-8 rounded-full bg-gold flex items-center justify-center text-onyx font-bold",children:(((w=t.displayName)==null?void 0:w[0])||((x=t.email)==null?void 0:x[0])||"U").toUpperCase()}),S.jsx("span",{className:"hidden md:block text-sm font-medium",children:t.displayName||((N=t.email)==null?void 0:N.split("@")[0])})]}),c&&S.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-raisin-black rounded-xl shadow-2xl border border-black/10 dark:border-white/10 overflow-hidden z-50",children:[S.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[S.jsx("p",{className:"text-sm font-medium",children:t.displayName||"Utilisateur"}),S.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.email})]}),S.jsxs("button",{onClick:T,className:"w-full px-4 py-3 text-left text-sm hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors flex items-center gap-2",children:[S.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Dconnexion"]})]})]}):S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl p-8 max-w-md mx-auto border border-black/5 dark:border-white/10",children:[S.jsxs("div",{className:"text-center mb-8",children:[S.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:["Dress ",S.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),S.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:o?"Crez votre compte":"Bienvenue"})]}),S.jsxs("button",{onClick:p,className:"w-full mb-6 px-6 py-4 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl hover:border-gold hover:shadow-lg hover:shadow-gold/20 transition-all duration-300 flex items-center justify-center gap-3 group",children:[S.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[S.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),S.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),S.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),S.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),S.jsx("span",{className:"font-semibold group-hover:text-gold transition-colors",children:"Continuer avec Google"})]}),S.jsxs("div",{className:"relative my-6",children:[S.jsx("div",{className:"absolute inset-0 flex items-center",children:S.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),S.jsx("div",{className:"relative flex justify-center text-sm",children:S.jsx("span",{className:"px-4 bg-white dark:bg-raisin-black text-gray-500",children:"Ou avec email"})})]}),S.jsxs("form",{onSubmit:v,className:"space-y-4",children:[S.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:P=>n(P.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),S.jsx("input",{type:"password",placeholder:"Mot de passe",value:i,onChange:P=>r(P.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),S.jsx("button",{type:"submit",className:"w-full px-6 py-4 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all duration-300 font-bold",children:o?"Crer mon compte":"Se connecter"})]}),S.jsx("button",{onClick:()=>l(!o),className:"w-full mt-6 text-sm text-gray-500 hover:text-gold transition-colors",children:o?"Dj un compte ? Se connecter":"Pas encore de compte ? S'inscrire"})]})},V7=({onAnalyze:t,isAnalyzing:e})=>{const n=q.useRef(null),[i,r]=q.useState([]),[o,l]=q.useState(!1),[c,f]=q.useState(!1);q.useEffect(()=>{const k=()=>f(window.innerWidth<1024);return k(),window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]),q.useEffect(()=>()=>{i.forEach(k=>URL.revokeObjectURL(k.preview))},[i]);const d=k=>{const F=k.map(G=>({id:`${G.name}-${G.lastModified}-${Math.random()}`,file:G,preview:URL.createObjectURL(G)}));r(G=>[...G,...F])},p=k=>{k.target.files&&(d(Array.from(k.target.files)),k.target.value="")},v=()=>{var k;e||(k=n.current)==null||k.click()},T=k=>{c||(k.preventDefault(),k.stopPropagation(),l(!0))},w=k=>{c||(k.preventDefault(),k.stopPropagation(),l(!1))},x=k=>{c||(k.preventDefault(),k.stopPropagation())},N=k=>{c||(k.preventDefault(),k.stopPropagation(),l(!1),k.dataTransfer.files&&k.dataTransfer.files.length>0&&(d(Array.from(k.dataTransfer.files)),k.dataTransfer.clearData()))},P=k=>{const F=i.find(G=>G.id===k);F&&URL.revokeObjectURL(F.preview),r(G=>G.filter(K=>K.id!==k))},O=()=>{i.length>0&&!e&&(t(i.map(k=>k.file)),r([]))};return S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",onDragEnter:T,onDragLeave:w,onDragOver:x,onDrop:N,children:[S.jsx("h2",{className:"text-2xl font-serif font-bold mb-6 text-gold",children:"Ajouter  ma garde-robe"}),S.jsxs("div",{onClick:v,className:`relative bg-snow dark:bg-onyx rounded-lg p-12 text-center transition-all duration-300 ring-1 ring-dashed ring-black/20 dark:ring-white/20 ${e?"cursor-default":"cursor-pointer hover:ring-gold dark:hover:ring-gold"}`,children:[S.jsx("input",{type:"file",ref:n,onChange:p,className:"hidden",accept:"image/png, image/jpeg, image/webp",multiple:!0,disabled:e}),S.jsx("div",{className:"flex flex-col items-center justify-center min-h-[8rem]",children:e?S.jsxs(S.Fragment,{children:[S.jsx(RD,{}),S.jsx("p",{className:"mt-4 text-sm font-medium text-gray-500 dark:text-gray-400 tracking-wide",children:"Analyse en cours..."})]}):S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:S.jsx(aI,{})}),S.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:c?"Appuyez pour ajouter des photos":"Glissez-dposez vos photos"}),S.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["ou ",S.jsx("span",{className:"text-gold font-medium",children:"cliquez pour slectionner"})]})]})}),o&&!c&&S.jsxs("div",{className:"absolute inset-0 bg-gold/90 backdrop-blur-sm rounded-lg flex flex-col items-center justify-center transition-opacity",children:[S.jsx("div",{className:"text-black transform-gpu scale-110",children:S.jsx(aI,{})}),S.jsx("p",{className:"mt-2 font-bold text-lg text-black",children:"Dposez pour ajouter"})]})]}),i.length>0&&!e&&S.jsxs("div",{className:"mt-8",children:[S.jsx("h3",{className:"font-semibold mb-4 text-gray-600 dark:text-gray-300",children:"Prts pour l'analyse :"}),S.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 mb-6",children:i.map(k=>S.jsxs("div",{className:"relative group aspect-square",children:[S.jsx("img",{src:k.preview,alt:k.file.name,className:"w-full h-full object-cover rounded-md shadow-md"}),S.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity rounded-md"}),S.jsx("button",{onClick:()=>P(k.id),className:"absolute -top-2 -right-2 p-1 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white opacity-0 group-hover:opacity-100 transition-all hover:bg-red-500 hover:scale-110 focus:opacity-100","aria-label":"Supprimer",children:S.jsx(Qm,{})})]},k.id))}),S.jsxs("button",{onClick:O,disabled:e||i.length===0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[S.jsx(IT,{}),"Analyser les ",i.length," article(s)"]})]})]})},DT=q.createContext({});function MT(t){const e=q.useRef(null);return e.current===null&&(e.current=t()),e.current}const eg=q.createContext(null),kT=q.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class L7 extends q.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function O7({children:t,isPresent:e}){const n=q.useId(),i=q.useRef(null),r=q.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=q.useContext(kT);return q.useInsertionEffect(()=>{const{width:l,height:c,top:f,left:d}=r.current;if(e||!i.current||!l||!c)return;i.current.dataset.motionPopId=n;const p=document.createElement("style");return o&&(p.nonce=o),document.head.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${c}px !important;
            top: ${f}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(p)}},[e]),S.jsx(L7,{isPresent:e,childRef:i,sizeRef:r,children:q.cloneElement(t,{ref:i})})}const U7=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:l})=>{const c=MT(F7),f=q.useId(),d=q.useCallback(v=>{c.set(v,!0);for(const T of c.values())if(!T)return;i&&i()},[c,i]),p=q.useMemo(()=>({id:f,initial:e,isPresent:n,custom:r,onExitComplete:d,register:v=>(c.set(v,!1),()=>c.delete(v))}),o?[Math.random(),d]:[n,d]);return q.useMemo(()=>{c.forEach((v,T)=>c.set(T,!1))},[n]),q.useEffect(()=>{!n&&!c.size&&i&&i()},[n]),l==="popLayout"&&(t=S.jsx(O7,{isPresent:n,children:t})),S.jsx(eg.Provider,{value:p,children:t})};function F7(){return new Map}function MD(t=!0){const e=q.useContext(eg);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,o=q.useId();q.useEffect(()=>{t&&r(o)},[t]);const l=q.useCallback(()=>t&&i&&i(o),[o,i,t]);return!n&&i?[!1,l]:[!0]}const qh=t=>t.key||"";function cI(t){const e=[];return q.Children.forEach(t,n=>{q.isValidElement(n)&&e.push(n)}),e}const VT=typeof window<"u",kD=VT?q.useLayoutEffect:q.useEffect,B7=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:o="sync",propagate:l=!1})=>{const[c,f]=MD(l),d=q.useMemo(()=>cI(t),[t]),p=l&&!c?[]:d.map(qh),v=q.useRef(!0),T=q.useRef(d),w=MT(()=>new Map),[x,N]=q.useState(d),[P,O]=q.useState(d);kD(()=>{v.current=!1,T.current=d;for(let G=0;G<P.length;G++){const K=qh(P[G]);p.includes(K)?w.delete(K):w.get(K)!==!0&&w.set(K,!1)}},[P,p.length,p.join("-")]);const k=[];if(d!==x){let G=[...d];for(let K=0;K<P.length;K++){const H=P[K],R=qh(H);p.includes(R)||(G.splice(K,0,H),k.push(H))}o==="wait"&&k.length&&(G=k),O(cI(G)),N(d);return}const{forceRender:F}=q.useContext(DT);return S.jsx(S.Fragment,{children:P.map(G=>{const K=qh(G),H=l&&!c?!1:d===P||p.includes(K),R=()=>{if(w.has(K))w.set(K,!0);else return;let I=!0;w.forEach(D=>{D||(I=!1)}),I&&(F==null||F(),O(T.current),l&&(f==null||f()),i&&i())};return S.jsx(U7,{isPresent:H,initial:!v.current||n?void 0:!1,custom:H?void 0:e,presenceAffectsLayout:r,mode:o,onExitComplete:H?void 0:R,children:G},K)})})},Xi=t=>t;let VD=Xi;function LT(t){let e;return()=>(e===void 0&&(e=t()),e)}const Eu=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},Ds=t=>t*1e3,Ms=t=>t/1e3,q7={useManualTiming:!1};function z7(t){let e=new Set,n=new Set,i=!1,r=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(d){o.has(d)&&(f.schedule(d),t()),d(l)}const f={schedule:(d,p=!1,v=!1)=>{const w=v&&i?e:n;return p&&o.add(d),w.has(d)||w.add(d),d},cancel:d=>{n.delete(d),o.delete(d)},process:d=>{if(l=d,i){r=!0;return}i=!0,[e,n]=[n,e],e.forEach(c),e.clear(),i=!1,r&&(r=!1,f.process(d))}};return f}const zh=["read","resolveKeyframes","update","preRender","render","postRender"],H7=40;function LD(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,l=zh.reduce((O,k)=>(O[k]=z7(o),O),{}),{read:c,resolveKeyframes:f,update:d,preRender:p,render:v,postRender:T}=l,w=()=>{const O=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(O-r.timestamp,H7),1),r.timestamp=O,r.isProcessing=!0,c.process(r),f.process(r),d.process(r),p.process(r),v.process(r),T.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(w))},x=()=>{n=!0,i=!0,r.isProcessing||t(w)};return{schedule:zh.reduce((O,k)=>{const F=l[k];return O[k]=(G,K=!1,H=!1)=>(n||x(),F.schedule(G,K,H)),O},{}),cancel:O=>{for(let k=0;k<zh.length;k++)l[zh[k]].cancel(O)},state:r,steps:l}}const{schedule:Gt,cancel:Jo,state:jn,steps:Rv}=LD(typeof requestAnimationFrame<"u"?requestAnimationFrame:Xi,!0),OD=q.createContext({strict:!1}),fI={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Su={};for(const t in fI)Su[t]={isEnabled:e=>fI[t].some(n=>!!e[n])};function G7(t){for(const e in t)Su[e]={...Su[e],...t[e]}}const j7=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function im(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||j7.has(t)}let UD=t=>!im(t);function $7(t){t&&(UD=e=>e.startsWith("on")?!im(e):t(e))}try{$7(require("@emotion/is-prop-valid").default)}catch{}function K7(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(UD(r)||n===!0&&im(r)||!e&&!im(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function Y7(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...i)=>t(...i);return new Proxy(n,{get:(i,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}const tg=q.createContext({});function Lf(t){return typeof t=="string"||Array.isArray(t)}function ng(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const OT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],UT=["initial",...OT];function ig(t){return ng(t.animate)||UT.some(e=>Lf(t[e]))}function FD(t){return!!(ig(t)||t.variants)}function J7(t,e){if(ig(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Lf(n)?n:void 0,animate:Lf(i)?i:void 0}}return t.inherit!==!1?e:{}}function W7(t){const{initial:e,animate:n}=J7(t,q.useContext(tg));return q.useMemo(()=>({initial:e,animate:n}),[dI(e),dI(n)])}function dI(t){return Array.isArray(t)?t.join(" "):t}const X7=Symbol.for("motionComponentSymbol");function Xl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Q7(t,e,n){return q.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):Xl(n)&&(n.current=i))},[e])}const FT=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Z7="framerAppearId",BD="data-"+FT(Z7),{schedule:BT}=LD(queueMicrotask,!1),qD=q.createContext({});function ej(t,e,n,i,r){var o,l;const{visualElement:c}=q.useContext(tg),f=q.useContext(OD),d=q.useContext(eg),p=q.useContext(kT).reducedMotion,v=q.useRef(null);i=i||f.renderer,!v.current&&i&&(v.current=i(t,{visualState:e,parent:c,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:p}));const T=v.current,w=q.useContext(qD);T&&!T.projection&&r&&(T.type==="html"||T.type==="svg")&&tj(v.current,n,r,w);const x=q.useRef(!1);q.useInsertionEffect(()=>{T&&x.current&&T.update(n,d)});const N=n[BD],P=q.useRef(!!N&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,N))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,N)));return kD(()=>{T&&(x.current=!0,window.MotionIsMounted=!0,T.updateFeatures(),BT.render(T.render),P.current&&T.animationState&&T.animationState.animateChanges())}),q.useEffect(()=>{T&&(!P.current&&T.animationState&&T.animationState.animateChanges(),P.current&&(queueMicrotask(()=>{var O;(O=window.MotionHandoffMarkAsComplete)===null||O===void 0||O.call(window,N)}),P.current=!1))}),T}function tj(t,e,n,i){const{layoutId:r,layout:o,drag:l,dragConstraints:c,layoutScroll:f,layoutRoot:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:zD(t.parent)),t.projection.setOptions({layoutId:r,layout:o,alwaysMeasureLayout:!!l||c&&Xl(c),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:d})}function zD(t){if(t)return t.options.allowProjection!==!1?t.projection:zD(t.parent)}function nj({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){var o,l;t&&G7(t);function c(d,p){let v;const T={...q.useContext(kT),...d,layoutId:ij(d)},{isStatic:w}=T,x=W7(d),N=i(d,w);if(!w&&VT){rj();const P=sj(T);v=P.MeasureLayout,x.visualElement=ej(r,N,T,e,P.ProjectionNode)}return S.jsxs(tg.Provider,{value:x,children:[v&&x.visualElement?S.jsx(v,{visualElement:x.visualElement,...T}):null,n(r,d,Q7(N,x.visualElement,p),N,w,x.visualElement)]})}c.displayName=`motion.${typeof r=="string"?r:`create(${(l=(o=r.displayName)!==null&&o!==void 0?o:r.name)!==null&&l!==void 0?l:""})`}`;const f=q.forwardRef(c);return f[X7]=r,f}function ij({layoutId:t}){const e=q.useContext(DT).id;return e&&t!==void 0?e+"-"+t:t}function rj(t,e){q.useContext(OD).strict}function sj(t){const{drag:e,layout:n}=Su;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const oj=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function qT(t){return typeof t!="string"||t.includes("-")?!1:!!(oj.indexOf(t)>-1||/[A-Z]/u.test(t))}function hI(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function zT(t,e,n,i){if(typeof e=="function"){const[r,o]=hI(i);e=e(n!==void 0?n:t.custom,r,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,o]=hI(i);e=e(n!==void 0?n:t.custom,r,o)}return e}const V0=t=>Array.isArray(t),aj=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),lj=t=>V0(t)?t[t.length-1]||0:t,li=t=>!!(t&&t.getVelocity);function Tp(t){const e=li(t)?t.get():t;return aj(e)?e.toValue():e}function uj({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},i,r,o){const l={latestValues:cj(i,r,o,t),renderState:e()};return n&&(l.onMount=c=>n({props:i,current:c,...l}),l.onUpdate=c=>n(c)),l}const HD=t=>(e,n)=>{const i=q.useContext(tg),r=q.useContext(eg),o=()=>uj(t,e,i,r);return n?o():MT(o)};function cj(t,e,n,i){const r={},o=i(t,{});for(const T in o)r[T]=Tp(o[T]);let{initial:l,animate:c}=t;const f=ig(t),d=FD(t);e&&d&&!f&&t.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let p=n?n.initial===!1:!1;p=p||l===!1;const v=p?c:l;if(v&&typeof v!="boolean"&&!ng(v)){const T=Array.isArray(v)?v:[v];for(let w=0;w<T.length;w++){const x=zT(t,T[w]);if(x){const{transitionEnd:N,transition:P,...O}=x;for(const k in O){let F=O[k];if(Array.isArray(F)){const G=p?F.length-1:0;F=F[G]}F!==null&&(r[k]=F)}for(const k in N)r[k]=N[k]}}}return r}const Ou=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],nl=new Set(Ou),GD=t=>e=>typeof e=="string"&&e.startsWith(t),jD=GD("--"),fj=GD("var(--"),HT=t=>fj(t)?dj.test(t.split("/*")[0].trim()):!1,dj=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,$D=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Bs=(t,e,n)=>n>e?e:n<t?t:n,Uu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Of={...Uu,transform:t=>Bs(0,1,t)},Hh={...Uu,default:1},sd=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Co=sd("deg"),is=sd("%"),Oe=sd("px"),hj=sd("vh"),pj=sd("vw"),pI={...is,parse:t=>is.parse(t)/100,transform:t=>is.transform(t*100)},mj={borderWidth:Oe,borderTopWidth:Oe,borderRightWidth:Oe,borderBottomWidth:Oe,borderLeftWidth:Oe,borderRadius:Oe,radius:Oe,borderTopLeftRadius:Oe,borderTopRightRadius:Oe,borderBottomRightRadius:Oe,borderBottomLeftRadius:Oe,width:Oe,maxWidth:Oe,height:Oe,maxHeight:Oe,top:Oe,right:Oe,bottom:Oe,left:Oe,padding:Oe,paddingTop:Oe,paddingRight:Oe,paddingBottom:Oe,paddingLeft:Oe,margin:Oe,marginTop:Oe,marginRight:Oe,marginBottom:Oe,marginLeft:Oe,backgroundPositionX:Oe,backgroundPositionY:Oe},gj={rotate:Co,rotateX:Co,rotateY:Co,rotateZ:Co,scale:Hh,scaleX:Hh,scaleY:Hh,scaleZ:Hh,skew:Co,skewX:Co,skewY:Co,distance:Oe,translateX:Oe,translateY:Oe,translateZ:Oe,x:Oe,y:Oe,z:Oe,perspective:Oe,transformPerspective:Oe,opacity:Of,originX:pI,originY:pI,originZ:Oe},mI={...Uu,transform:Math.round},GT={...mj,...gj,zIndex:mI,size:Oe,fillOpacity:Of,strokeOpacity:Of,numOctaves:mI},yj={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},vj=Ou.length;function _j(t,e,n){let i="",r=!0;for(let o=0;o<vj;o++){const l=Ou[o],c=t[l];if(c===void 0)continue;let f=!0;if(typeof c=="number"?f=c===(l.startsWith("scale")?1:0):f=parseFloat(c)===0,!f||n){const d=$D(c,GT[l]);if(!f){r=!1;const p=yj[l]||l;i+=`${p}(${d}) `}n&&(e[l]=d)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function jT(t,e,n){const{style:i,vars:r,transformOrigin:o}=t;let l=!1,c=!1;for(const f in e){const d=e[f];if(nl.has(f)){l=!0;continue}else if(jD(f)){r[f]=d;continue}else{const p=$D(d,GT[f]);f.startsWith("origin")?(c=!0,o[f]=p):i[f]=p}}if(e.transform||(l||n?i.transform=_j(e,t.transform,n):i.transform&&(i.transform="none")),c){const{originX:f="50%",originY:d="50%",originZ:p=0}=o;i.transformOrigin=`${f} ${d} ${p}`}}const Tj={offset:"stroke-dashoffset",array:"stroke-dasharray"},Ej={offset:"strokeDashoffset",array:"strokeDasharray"};function Sj(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?Tj:Ej;t[o.offset]=Oe.transform(-i);const l=Oe.transform(e),c=Oe.transform(n);t[o.array]=`${l} ${c}`}function gI(t,e,n){return typeof t=="string"?t:Oe.transform(e+n*t)}function wj(t,e,n){const i=gI(e,t.x,t.width),r=gI(n,t.y,t.height);return`${i} ${r}`}function $T(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:o,pathLength:l,pathSpacing:c=1,pathOffset:f=0,...d},p,v){if(jT(t,d,v),p){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:T,style:w,dimensions:x}=t;T.transform&&(x&&(w.transform=T.transform),delete T.transform),x&&(r!==void 0||o!==void 0||w.transform)&&(w.transformOrigin=wj(x,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(T.x=e),n!==void 0&&(T.y=n),i!==void 0&&(T.scale=i),l!==void 0&&Sj(T,l,c,f,!1)}const KT=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),KD=()=>({...KT(),attrs:{}}),YT=t=>typeof t=="string"&&t.toLowerCase()==="svg";function YD(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const o in n)t.style.setProperty(o,n[o])}const JD=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function WD(t,e,n,i){YD(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(JD.has(r)?r:FT(r),e.attrs[r])}const rm={};function Aj(t){Object.assign(rm,t)}function XD(t,{layout:e,layoutId:n}){return nl.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!rm[t]||t==="opacity")}function JT(t,e,n){var i;const{style:r}=t,o={};for(const l in r)(li(r[l])||e.style&&li(e.style[l])||XD(l,t)||((i=n==null?void 0:n.getValue(l))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(o[l]=r[l]);return o}function QD(t,e,n){const i=JT(t,e,n);for(const r in t)if(li(t[r])||li(e[r])){const o=Ou.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[o]=t[r]}return i}function bj(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const yI=["x","y","width","height","cx","cy","r"],Cj={useVisualState:HD({scrapeMotionValuesFromProps:QD,createRenderState:KD,onUpdate:({props:t,prevProps:e,current:n,renderState:i,latestValues:r})=>{if(!n)return;let o=!!t.drag;if(!o){for(const c in r)if(nl.has(c)){o=!0;break}}if(!o)return;let l=!e;if(e)for(let c=0;c<yI.length;c++){const f=yI[c];t[f]!==e[f]&&(l=!0)}l&&Gt.read(()=>{bj(n,i),Gt.render(()=>{$T(i,r,YT(n.tagName),t.transformTemplate),WD(n,i)})})}})},xj={useVisualState:HD({scrapeMotionValuesFromProps:JT,createRenderState:KT})};function ZD(t,e,n){for(const i in e)!li(e[i])&&!XD(i,n)&&(t[i]=e[i])}function Ij({transformTemplate:t},e){return q.useMemo(()=>{const n=KT();return jT(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Rj(t,e){const n=t.style||{},i={};return ZD(i,n,t),Object.assign(i,Ij(t,e)),i}function Nj(t,e){const n={},i=Rj(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}function Pj(t,e,n,i){const r=q.useMemo(()=>{const o=KD();return $T(o,e,YT(i),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};ZD(o,t.style,t),r.style={...o,...r.style}}return r}function Dj(t=!1){return(n,i,r,{latestValues:o},l)=>{const f=(qT(n)?Pj:Nj)(i,o,l,n),d=K7(i,typeof n=="string",t),p=n!==q.Fragment?{...d,...f,ref:r}:{},{children:v}=i,T=q.useMemo(()=>li(v)?v.get():v,[v]);return q.createElement(n,{...p,children:T})}}function Mj(t,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const l={...qT(i)?Cj:xj,preloadedFeatures:t,useRender:Dj(r),createVisualElement:e,Component:i};return nj(l)}}function eM(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function rg(t,e,n){const i=t.getProps();return zT(i,e,n!==void 0?n:i.custom,t)}const kj=LT(()=>window.ScrollTimeline!==void 0);class Vj{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e,n){const i=this.animations.map(r=>{if(kj()&&r.attachTimeline)return r.attachTimeline(e);if(typeof n=="function")return n(r)});return()=>{i.forEach((r,o)=>{r&&r(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Lj extends Vj{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function WT(t,e){return t?t[e]||t.default||t:void 0}const L0=2e4;function tM(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<L0;)e+=n,i=t.next(e);return e>=L0?1/0:e}function XT(t){return typeof t=="function"}function vI(t,e){t.timeline=e,t.onfinish=null}const QT=t=>Array.isArray(t)&&typeof t[0]=="number",Oj={linearEasing:void 0};function Uj(t,e){const n=LT(t);return()=>{var i;return(i=Oj[e])!==null&&i!==void 0?i:n()}}const sm=Uj(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),nM=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let o=0;o<r;o++)i+=t(Eu(0,r-1,o))+", ";return`linear(${i.substring(0,i.length-2)})`};function iM(t){return!!(typeof t=="function"&&sm()||!t||typeof t=="string"&&(t in O0||sm())||QT(t)||Array.isArray(t)&&t.every(iM))}const Wc=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,O0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Wc([0,.65,.55,1]),circOut:Wc([.55,0,1,.45]),backIn:Wc([.31,.01,.66,-.59]),backOut:Wc([.33,1.53,.69,.99])};function rM(t,e){if(t)return typeof t=="function"&&sm()?nM(t,e):QT(t)?Wc(t):Array.isArray(t)?t.map(n=>rM(n,e)||O0.easeOut):O0[t]}const Nr={x:!1,y:!1};function sM(){return Nr.x||Nr.y}function Fj(t,e,n){var i;if(t instanceof Element)return[t];if(typeof t=="string"){let r=document;const o=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function oM(t,e){const n=Fj(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function _I(t){return e=>{e.pointerType==="touch"||sM()||t(e)}}function Bj(t,e,n={}){const[i,r,o]=oM(t,n),l=_I(c=>{const{target:f}=c,d=e(c);if(typeof d!="function"||!f)return;const p=_I(v=>{d(v),f.removeEventListener("pointerleave",p)});f.addEventListener("pointerleave",p,r)});return i.forEach(c=>{c.addEventListener("pointerenter",l,r)}),o}const aM=(t,e)=>e?t===e?!0:aM(t,e.parentElement):!1,ZT=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,qj=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function zj(t){return qj.has(t.tagName)||t.tabIndex!==-1}const Xc=new WeakSet;function TI(t){return e=>{e.key==="Enter"&&t(e)}}function Nv(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Hj=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=TI(()=>{if(Xc.has(n))return;Nv(n,"down");const r=TI(()=>{Nv(n,"up")}),o=()=>Nv(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function EI(t){return ZT(t)&&!sM()}function Gj(t,e,n={}){const[i,r,o]=oM(t,n),l=c=>{const f=c.currentTarget;if(!EI(c)||Xc.has(f))return;Xc.add(f);const d=e(c),p=(w,x)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",T),!(!EI(w)||!Xc.has(f))&&(Xc.delete(f),typeof d=="function"&&d(w,{success:x}))},v=w=>{p(w,n.useGlobalTarget||aM(f,w.target))},T=w=>{p(w,!1)};window.addEventListener("pointerup",v,r),window.addEventListener("pointercancel",T,r)};return i.forEach(c=>{!zj(c)&&c.getAttribute("tabindex")===null&&(c.tabIndex=0),(n.useGlobalTarget?window:c).addEventListener("pointerdown",l,r),c.addEventListener("focus",d=>Hj(d,r),r)}),o}function jj(t){return t==="x"||t==="y"?Nr[t]?null:(Nr[t]=!0,()=>{Nr[t]=!1}):Nr.x||Nr.y?null:(Nr.x=Nr.y=!0,()=>{Nr.x=Nr.y=!1})}const lM=new Set(["width","height","top","left","right","bottom",...Ou]);let Ep;function $j(){Ep=void 0}const rs={now:()=>(Ep===void 0&&rs.set(jn.isProcessing||q7.useManualTiming?jn.timestamp:performance.now()),Ep),set:t=>{Ep=t,queueMicrotask($j)}};function eE(t,e){t.indexOf(e)===-1&&t.push(e)}function tE(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class nE{constructor(){this.subscriptions=[]}add(e){return eE(this.subscriptions,e),()=>tE(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const l=this.subscriptions[o];l&&l(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function uM(t,e){return e?t*(1e3/e):0}const SI=30,Kj=t=>!isNaN(parseFloat(t));class Yj{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const o=rs.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=rs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Kj(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new nE);const i=this.events[e].add(n);return e==="change"?()=>{i(),Gt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=rs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>SI)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,SI);return uM(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Uf(t,e){return new Yj(t,e)}function Jj(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Uf(n))}function Wj(t,e){const n=rg(t,e);let{transitionEnd:i={},transition:r={},...o}=n||{};o={...o,...i};for(const l in o){const c=lj(o[l]);Jj(t,l,c)}}function Xj(t){return!!(li(t)&&t.add)}function U0(t,e){const n=t.getValue("willChange");if(Xj(n))return n.add(e)}function cM(t){return t.props[BD]}const fM=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Qj=1e-7,Zj=12;function e$(t,e,n,i,r){let o,l,c=0;do l=e+(n-e)/2,o=fM(l,i,r)-t,o>0?n=l:e=l;while(Math.abs(o)>Qj&&++c<Zj);return l}function od(t,e,n,i){if(t===e&&n===i)return Xi;const r=o=>e$(o,0,1,t,n);return o=>o===0||o===1?o:fM(r(o),e,i)}const dM=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,hM=t=>e=>1-t(1-e),pM=od(.33,1.53,.69,.99),iE=hM(pM),mM=dM(iE),gM=t=>(t*=2)<1?.5*iE(t):.5*(2-Math.pow(2,-10*(t-1))),rE=t=>1-Math.sin(Math.acos(t)),yM=hM(rE),vM=dM(rE),_M=t=>/^0[^.\s]+$/u.test(t);function t$(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||_M(t):!0}const df=t=>Math.round(t*1e5)/1e5,sE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function n$(t){return t==null}const i$=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,oE=(t,e)=>n=>!!(typeof n=="string"&&i$.test(n)&&n.startsWith(t)||e&&!n$(n)&&Object.prototype.hasOwnProperty.call(n,e)),TM=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,o,l,c]=i.match(sE);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},r$=t=>Bs(0,255,t),Pv={...Uu,transform:t=>Math.round(r$(t))},Oa={test:oE("rgb","red"),parse:TM("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Pv.transform(t)+", "+Pv.transform(e)+", "+Pv.transform(n)+", "+df(Of.transform(i))+")"};function s$(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const F0={test:oE("#"),parse:s$,transform:Oa.transform},Ql={test:oE("hsl","hue"),parse:TM("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+is.transform(df(e))+", "+is.transform(df(n))+", "+df(Of.transform(i))+")"},ii={test:t=>Oa.test(t)||F0.test(t)||Ql.test(t),parse:t=>Oa.test(t)?Oa.parse(t):Ql.test(t)?Ql.parse(t):F0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Oa.transform(t):Ql.transform(t)},o$=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function a$(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(sE))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(o$))===null||n===void 0?void 0:n.length)||0)>0}const EM="number",SM="color",l$="var",u$="var(",wI="${}",c$=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ff(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let o=0;const c=e.replace(c$,f=>(ii.test(f)?(i.color.push(o),r.push(SM),n.push(ii.parse(f))):f.startsWith(u$)?(i.var.push(o),r.push(l$),n.push(f)):(i.number.push(o),r.push(EM),n.push(parseFloat(f))),++o,wI)).split(wI);return{values:n,split:c,indexes:i,types:r}}function wM(t){return Ff(t).values}function AM(t){const{split:e,types:n}=Ff(t),i=e.length;return r=>{let o="";for(let l=0;l<i;l++)if(o+=e[l],r[l]!==void 0){const c=n[l];c===EM?o+=df(r[l]):c===SM?o+=ii.transform(r[l]):o+=r[l]}return o}}const f$=t=>typeof t=="number"?0:t;function d$(t){const e=wM(t);return AM(t)(e.map(f$))}const Wo={test:a$,parse:wM,createTransformer:AM,getAnimatableNone:d$},h$=new Set(["brightness","contrast","saturate","opacity"]);function p$(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(sE)||[];if(!i)return t;const r=n.replace(i,"");let o=h$.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const m$=/\b([a-z-]*)\(.*?\)/gu,B0={...Wo,getAnimatableNone:t=>{const e=t.match(m$);return e?e.map(p$).join(" "):t}},g$={...GT,color:ii,backgroundColor:ii,outlineColor:ii,fill:ii,stroke:ii,borderColor:ii,borderTopColor:ii,borderRightColor:ii,borderBottomColor:ii,borderLeftColor:ii,filter:B0,WebkitFilter:B0},aE=t=>g$[t];function bM(t,e){let n=aE(t);return n!==B0&&(n=Wo),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const y$=new Set(["auto","none","0"]);function v$(t,e,n){let i=0,r;for(;i<t.length&&!r;){const o=t[i];typeof o=="string"&&!y$.has(o)&&Ff(o).values.length&&(r=t[i]),i++}if(r&&n)for(const o of e)t[o]=bM(n,r)}const AI=t=>t===Uu||t===Oe,bI=(t,e)=>parseFloat(t.split(", ")[e]),CI=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return bI(r[1],e);{const o=i.match(/^matrix\((.+)\)$/u);return o?bI(o[1],t):0}},_$=new Set(["x","y","z"]),T$=Ou.filter(t=>!_$.has(t));function E$(t){const e=[];return T$.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const wu={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:CI(4,13),y:CI(5,14)};wu.translateX=wu.x;wu.translateY=wu.y;const qa=new Set;let q0=!1,z0=!1;function CM(){if(z0){const t=Array.from(qa).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=E$(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([o,l])=>{var c;(c=i.getValue(o))===null||c===void 0||c.set(l)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}z0=!1,q0=!1,qa.forEach(t=>t.complete()),qa.clear()}function xM(){qa.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(z0=!0)})}function S$(){xM(),CM()}class lE{constructor(e,n,i,r,o,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=o,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(qa.add(this),q0||(q0=!0,Gt.read(xM),Gt.resolveKeyframes(CM))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const l=r==null?void 0:r.get(),c=e[e.length-1];if(l!==void 0)e[0]=l;else if(i&&n){const f=i.readValue(n,c);f!=null&&(e[0]=f)}e[0]===void 0&&(e[0]=c),r&&l===void 0&&r.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),qa.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,qa.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const IM=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),w$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function A$(t){const e=w$.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function RM(t,e,n=1){const[i,r]=A$(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const l=o.trim();return IM(l)?parseFloat(l):l}return HT(r)?RM(r,e,n+1):r}const NM=t=>e=>e.test(t),b$={test:t=>t==="auto",parse:t=>t},PM=[Uu,Oe,is,Co,pj,hj,b$],xI=t=>PM.find(NM(t));class DM extends lE{constructor(e,n,i,r,o){super(e,n,i,r,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let d=e[f];if(typeof d=="string"&&(d=d.trim(),HT(d))){const p=RM(d,n.current);p!==void 0&&(e[f]=p),f===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!lM.has(i)||e.length!==2)return;const[r,o]=e,l=xI(r),c=xI(o);if(l!==c)if(AI(l)&&AI(c))for(let f=0;f<e.length;f++){const d=e[f];typeof d=="string"&&(e[f]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)t$(e[r])&&i.push(r);i.length&&v$(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=wu[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:n,name:i,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const o=n.getValue(i);o&&o.jump(this.measuredOrigin,!1);const l=r.length-1,c=r[l];r[l]=wu[i](n.measureViewportBox(),window.getComputedStyle(n.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([f,d])=>{n.getValue(f).set(d)}),this.resolveNoneKeyframes()}}const II=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Wo.test(t)||t==="0")&&!t.startsWith("url("));function C$(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function x$(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],l=II(r,e),c=II(o,e);return!l||!c?!1:C$(t)||(n==="spring"||XT(n))&&i}const I$=t=>t!==null;function sg(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(I$),o=e&&n!=="loop"&&e%2===1?0:r.length-1;return!o||i===void 0?r[o]:i}const R$=40;class MM{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:l="loop",...c}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=rs.now(),this.options={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:o,repeatType:l,...c},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>R$?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&S$(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=rs.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:o,delay:l,onComplete:c,onUpdate:f,isGenerator:d}=this.options;if(!d&&!x$(e,i,r,o))if(l)this.options.duration=0;else{f&&f(sg(e,this.options,n)),c&&c(),this.resolveFinishedPromise();return}const p=this.initPlayback(e,n);p!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...p},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Wt=(t,e,n)=>t+(e-t)*n;function Dv(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function N$({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,l=0;if(!e)r=o=l=n;else{const c=n<.5?n*(1+e):n+e-n*e,f=2*n-c;r=Dv(f,c,t+1/3),o=Dv(f,c,t),l=Dv(f,c,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:i}}function om(t,e){return n=>n>0?e:t}const Mv=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},P$=[F0,Oa,Ql],D$=t=>P$.find(e=>e.test(t));function RI(t){const e=D$(t);if(!e)return!1;let n=e.parse(t);return e===Ql&&(n=N$(n)),n}const NI=(t,e)=>{const n=RI(t),i=RI(e);if(!n||!i)return om(t,e);const r={...n};return o=>(r.red=Mv(n.red,i.red,o),r.green=Mv(n.green,i.green,o),r.blue=Mv(n.blue,i.blue,o),r.alpha=Wt(n.alpha,i.alpha,o),Oa.transform(r))},M$=(t,e)=>n=>e(t(n)),ad=(...t)=>t.reduce(M$),H0=new Set(["none","hidden"]);function k$(t,e){return H0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function V$(t,e){return n=>Wt(t,e,n)}function uE(t){return typeof t=="number"?V$:typeof t=="string"?HT(t)?om:ii.test(t)?NI:U$:Array.isArray(t)?kM:typeof t=="object"?ii.test(t)?NI:L$:om}function kM(t,e){const n=[...t],i=n.length,r=t.map((o,l)=>uE(o)(o,e[l]));return o=>{for(let l=0;l<i;l++)n[l]=r[l](o);return n}}function L$(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=uE(t[r])(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}}function O$(t,e){var n;const i=[],r={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const l=e.types[o],c=t.indexes[l][r[l]],f=(n=t.values[c])!==null&&n!==void 0?n:0;i[o]=f,r[l]++}return i}const U$=(t,e)=>{const n=Wo.createTransformer(e),i=Ff(t),r=Ff(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?H0.has(t)&&!r.values.length||H0.has(e)&&!i.values.length?k$(t,e):ad(kM(O$(i,r),r.values),n):om(t,e)};function VM(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Wt(t,e,n):uE(t)(t,e)}const F$=5;function LM(t,e,n){const i=Math.max(e-F$,0);return uM(n-t(i),e-i)}const sn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},kv=.001;function B$({duration:t=sn.duration,bounce:e=sn.bounce,velocity:n=sn.velocity,mass:i=sn.mass}){let r,o,l=1-e;l=Bs(sn.minDamping,sn.maxDamping,l),t=Bs(sn.minDuration,sn.maxDuration,Ms(t)),l<1?(r=d=>{const p=d*l,v=p*t,T=p-n,w=G0(d,l),x=Math.exp(-v);return kv-T/w*x},o=d=>{const v=d*l*t,T=v*n+n,w=Math.pow(l,2)*Math.pow(d,2)*t,x=Math.exp(-v),N=G0(Math.pow(d,2),l);return(-r(d)+kv>0?-1:1)*((T-w)*x)/N}):(r=d=>{const p=Math.exp(-d*t),v=(d-n)*t+1;return-kv+p*v},o=d=>{const p=Math.exp(-d*t),v=(n-d)*(t*t);return p*v});const c=5/t,f=z$(r,o,c);if(t=Ds(t),isNaN(f))return{stiffness:sn.stiffness,damping:sn.damping,duration:t};{const d=Math.pow(f,2)*i;return{stiffness:d,damping:l*2*Math.sqrt(i*d),duration:t}}}const q$=12;function z$(t,e,n){let i=n;for(let r=1;r<q$;r++)i=i-t(i)/e(i);return i}function G0(t,e){return t*Math.sqrt(1-e*e)}const H$=["duration","bounce"],G$=["stiffness","damping","mass"];function PI(t,e){return e.some(n=>t[n]!==void 0)}function j$(t){let e={velocity:sn.velocity,stiffness:sn.stiffness,damping:sn.damping,mass:sn.mass,isResolvedFromDuration:!1,...t};if(!PI(t,G$)&&PI(t,H$))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,o=2*Bs(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:sn.mass,stiffness:r,damping:o}}else{const n=B$(t);e={...e,...n,mass:sn.mass},e.isResolvedFromDuration=!0}return e}function OM(t=sn.visualDuration,e=sn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const o=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],c={done:!1,value:o},{stiffness:f,damping:d,mass:p,duration:v,velocity:T,isResolvedFromDuration:w}=j$({...n,velocity:-Ms(n.velocity||0)}),x=T||0,N=d/(2*Math.sqrt(f*p)),P=l-o,O=Ms(Math.sqrt(f/p)),k=Math.abs(P)<5;i||(i=k?sn.restSpeed.granular:sn.restSpeed.default),r||(r=k?sn.restDelta.granular:sn.restDelta.default);let F;if(N<1){const K=G0(O,N);F=H=>{const R=Math.exp(-N*O*H);return l-R*((x+N*O*P)/K*Math.sin(K*H)+P*Math.cos(K*H))}}else if(N===1)F=K=>l-Math.exp(-O*K)*(P+(x+O*P)*K);else{const K=O*Math.sqrt(N*N-1);F=H=>{const R=Math.exp(-N*O*H),I=Math.min(K*H,300);return l-R*((x+N*O*P)*Math.sinh(I)+K*P*Math.cosh(I))/K}}const G={calculatedDuration:w&&v||null,next:K=>{const H=F(K);if(w)c.done=K>=v;else{let R=0;N<1&&(R=K===0?Ds(x):LM(F,K,H));const I=Math.abs(R)<=i,D=Math.abs(l-H)<=r;c.done=I&&D}return c.value=c.done?l:H,c},toString:()=>{const K=Math.min(tM(G),L0),H=nM(R=>G.next(K*R).value,K,30);return K+"ms "+H}};return G}function DI({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:l,min:c,max:f,restDelta:d=.5,restSpeed:p}){const v=t[0],T={done:!1,value:v},w=I=>c!==void 0&&I<c||f!==void 0&&I>f,x=I=>c===void 0?f:f===void 0||Math.abs(c-I)<Math.abs(f-I)?c:f;let N=n*e;const P=v+N,O=l===void 0?P:l(P);O!==P&&(N=O-v);const k=I=>-N*Math.exp(-I/i),F=I=>O+k(I),G=I=>{const D=k(I),V=F(I);T.done=Math.abs(D)<=d,T.value=T.done?O:V};let K,H;const R=I=>{w(T.value)&&(K=I,H=OM({keyframes:[T.value,x(T.value)],velocity:LM(F,I,T.value),damping:r,stiffness:o,restDelta:d,restSpeed:p}))};return R(0),{calculatedDuration:null,next:I=>{let D=!1;return!H&&K===void 0&&(D=!0,G(I),R(I)),K!==void 0&&I>=K?H.next(I-K):(!D&&G(I),T)}}}const $$=od(.42,0,1,1),K$=od(0,0,.58,1),UM=od(.42,0,.58,1),Y$=t=>Array.isArray(t)&&typeof t[0]!="number",J$={linear:Xi,easeIn:$$,easeInOut:UM,easeOut:K$,circIn:rE,circInOut:vM,circOut:yM,backIn:iE,backInOut:mM,backOut:pM,anticipate:gM},MI=t=>{if(QT(t)){VD(t.length===4);const[e,n,i,r]=t;return od(e,n,i,r)}else if(typeof t=="string")return J$[t];return t};function W$(t,e,n){const i=[],r=n||VM,o=t.length-1;for(let l=0;l<o;l++){let c=r(t[l],t[l+1]);if(e){const f=Array.isArray(e)?e[l]||Xi:e;c=ad(f,c)}i.push(c)}return i}function X$(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(VD(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=W$(e,i,r),f=c.length,d=p=>{if(l&&p<t[0])return e[0];let v=0;if(f>1)for(;v<t.length-2&&!(p<t[v+1]);v++);const T=Eu(t[v],t[v+1],p);return c[v](T)};return n?p=>d(Bs(t[0],t[o-1],p)):d}function Q$(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=Eu(0,e,i);t.push(Wt(n,1,r))}}function Z$(t){const e=[0];return Q$(e,t.length-1),e}function eK(t,e){return t.map(n=>n*e)}function tK(t,e){return t.map(()=>e||UM).splice(0,t.length-1)}function am({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=Y$(i)?i.map(MI):MI(i),o={done:!1,value:e[0]},l=eK(n&&n.length===e.length?n:Z$(e),t),c=X$(l,e,{ease:Array.isArray(r)?r:tK(e,r)});return{calculatedDuration:t,next:f=>(o.value=c(f),o.done=f>=t,o)}}const nK=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Gt.update(e,!0),stop:()=>Jo(e),now:()=>jn.isProcessing?jn.timestamp:rs.now()}},iK={decay:DI,inertia:DI,tween:am,keyframes:am,spring:OM},rK=t=>t/100;class cE extends MM{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:f}=this.options;f&&f()};const{name:n,motionValue:i,element:r,keyframes:o}=this.options,l=(r==null?void 0:r.KeyframeResolver)||lE,c=(f,d)=>this.onKeyframesResolved(f,d);this.resolver=new l(o,c,n,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:o,velocity:l=0}=this.options,c=XT(n)?n:iK[n]||am;let f,d;c!==am&&typeof e[0]!="number"&&(f=ad(rK,VM(e[0],e[1])),e=[0,100]);const p=c({...this.options,keyframes:e});o==="mirror"&&(d=c({...this.options,keyframes:[...e].reverse(),velocity:-l})),p.calculatedDuration===null&&(p.calculatedDuration=tM(p));const{calculatedDuration:v}=p,T=v+r,w=T*(i+1)-r;return{generator:p,mirroredGenerator:d,mapPercentToKeyframes:f,calculatedDuration:v,resolvedDuration:T,totalDuration:w}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:i}=this;if(!i){const{keyframes:I}=this.options;return{done:!0,value:I[I.length-1]}}const{finalKeyframe:r,generator:o,mirroredGenerator:l,mapPercentToKeyframes:c,keyframes:f,calculatedDuration:d,totalDuration:p,resolvedDuration:v}=i;if(this.startTime===null)return o.next(0);const{delay:T,repeat:w,repeatType:x,repeatDelay:N,onUpdate:P}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-p/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const O=this.currentTime-T*(this.speed>=0?1:-1),k=this.speed>=0?O<0:O>p;this.currentTime=Math.max(O,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let F=this.currentTime,G=o;if(w){const I=Math.min(this.currentTime,p)/v;let D=Math.floor(I),V=I%1;!V&&I>=1&&(V=1),V===1&&D--,D=Math.min(D,w+1),!!(D%2)&&(x==="reverse"?(V=1-V,N&&(V-=N/v)):x==="mirror"&&(G=l)),F=Bs(0,1,V)*v}const K=k?{done:!1,value:f[0]}:G.next(F);c&&(K.value=c(K.value));let{done:H}=K;!k&&d!==null&&(H=this.speed>=0?this.currentTime>=p:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&H);return R&&r!==void 0&&(K.value=sg(f,this.options,r)),P&&P(K.value),R&&this.finish(),K}get duration(){const{resolved:e}=this;return e?Ms(e.calculatedDuration):0}get time(){return Ms(this.currentTime)}set time(e){e=Ds(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ms(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=nK,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const sK=new Set(["opacity","clipPath","filter","transform"]);function oK(t,e,n,{delay:i=0,duration:r=300,repeat:o=0,repeatType:l="loop",ease:c="easeInOut",times:f}={}){const d={[e]:n};f&&(d.offset=f);const p=rM(c,r);return Array.isArray(p)&&(d.easing=p),t.animate(d,{delay:i,duration:r,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"})}const aK=LT(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),lm=10,lK=2e4;function uK(t){return XT(t.type)||t.type==="spring"||!iM(t.ease)}function cK(t,e){const n=new cE({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const r=[];let o=0;for(;!i.done&&o<lK;)i=n.sample(o),r.push(i.value),o+=lm;return{times:void 0,keyframes:r,duration:o-lm,ease:"linear"}}const FM={anticipate:gM,backInOut:mM,circInOut:vM};function fK(t){return t in FM}class kI extends MM{constructor(e){super(e);const{name:n,motionValue:i,element:r,keyframes:o}=this.options;this.resolver=new DM(o,(l,c)=>this.onKeyframesResolved(l,c),n,i,r),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:i=300,times:r,ease:o,type:l,motionValue:c,name:f,startTime:d}=this.options;if(!c.owner||!c.owner.current)return!1;if(typeof o=="string"&&sm()&&fK(o)&&(o=FM[o]),uK(this.options)){const{onComplete:v,onUpdate:T,motionValue:w,element:x,...N}=this.options,P=cK(e,N);e=P.keyframes,e.length===1&&(e[1]=e[0]),i=P.duration,r=P.times,o=P.ease,l="keyframes"}const p=oK(c.owner.current,f,e,{...this.options,duration:i,times:r,ease:o});return p.startTime=d??this.calcStartTime(),this.pendingTimeline?(vI(p,this.pendingTimeline),this.pendingTimeline=void 0):p.onfinish=()=>{const{onComplete:v}=this.options;c.set(sg(e,this.options,n)),v&&v(),this.cancel(),this.resolveFinishedPromise()},{animation:p,duration:i,times:r,type:l,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Ms(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Ms(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=Ds(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Xi;const{animation:i}=n;vI(i,e)}return Xi}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:i,duration:r,type:o,ease:l,times:c}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:p,onComplete:v,element:T,...w}=this.options,x=new cE({...w,keyframes:i,duration:r,type:o,ease:l,times:c,isGenerator:!0}),N=Ds(this.time);d.setWithVelocity(x.sample(N-lm).value,x.sample(N).value,lm)}const{onStop:f}=this.options;f&&f(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:i,repeatDelay:r,repeatType:o,damping:l,type:c}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:d}=n.owner.getProps();return aK()&&i&&sK.has(i)&&!f&&!d&&!r&&o!=="mirror"&&l!==0&&c!=="inertia"}}const dK={type:"spring",stiffness:500,damping:25,restSpeed:10},hK=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),pK={type:"keyframes",duration:.8},mK={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},gK=(t,{keyframes:e})=>e.length>2?pK:nl.has(t)?t.startsWith("scale")?hK(e[1]):dK:mK;function yK({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:l,repeatDelay:c,from:f,elapsed:d,...p}){return!!Object.keys(p).length}const fE=(t,e,n,i={},r,o)=>l=>{const c=WT(i,t)||{},f=c.delay||i.delay||0;let{elapsed:d=0}=i;d=d-Ds(f);let p={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-d,onUpdate:T=>{e.set(T),c.onUpdate&&c.onUpdate(T)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:o?void 0:r};yK(c)||(p={...p,...gK(t,p)}),p.duration&&(p.duration=Ds(p.duration)),p.repeatDelay&&(p.repeatDelay=Ds(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let v=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(v=!0)),v&&!o&&e.get()!==void 0){const T=sg(p.keyframes,c);if(T!==void 0)return Gt.update(()=>{p.onUpdate(T),p.onComplete()}),new Lj([])}return!o&&kI.supports(p)?new kI(p):new cE(p)};function vK({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function BM(t,e,{delay:n=0,transitionOverride:i,type:r}={}){var o;let{transition:l=t.getDefaultTransition(),transitionEnd:c,...f}=e;i&&(l=i);const d=[],p=r&&t.animationState&&t.animationState.getState()[r];for(const v in f){const T=t.getValue(v,(o=t.latestValues[v])!==null&&o!==void 0?o:null),w=f[v];if(w===void 0||p&&vK(p,v))continue;const x={delay:n,...WT(l||{},v)};let N=!1;if(window.MotionHandoffAnimation){const O=cM(t);if(O){const k=window.MotionHandoffAnimation(O,v,Gt);k!==null&&(x.startTime=k,N=!0)}}U0(t,v),T.start(fE(v,T,w,t.shouldReduceMotion&&lM.has(v)?{type:!1}:x,t,N));const P=T.animation;P&&d.push(P)}return c&&Promise.all(d).then(()=>{Gt.update(()=>{c&&Wj(t,c)})}),d}function j0(t,e,n={}){var i;const r=rg(t,e,n.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const l=r?()=>Promise.all(BM(t,r,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:p=0,staggerChildren:v,staggerDirection:T}=o;return _K(t,e,p+d,v,T,n)}:()=>Promise.resolve(),{when:f}=o;if(f){const[d,p]=f==="beforeChildren"?[l,c]:[c,l];return d().then(()=>p())}else return Promise.all([l(),c(n.delay)])}function _K(t,e,n=0,i=0,r=1,o){const l=[],c=(t.variantChildren.size-1)*i,f=r===1?(d=0)=>d*i:(d=0)=>c-d*i;return Array.from(t.variantChildren).sort(TK).forEach((d,p)=>{d.notify("AnimationStart",e),l.push(j0(d,e,{...o,delay:n+f(p)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(l)}function TK(t,e){return t.sortNodePosition(e)}function EK(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>j0(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=j0(t,e,n);else{const r=typeof e=="function"?rg(t,e,n.custom):e;i=Promise.all(BM(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}const SK=UT.length;function qM(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?qM(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<SK;n++){const i=UT[n],r=t.props[i];(Lf(r)||r===!1)&&(e[i]=r)}return e}const wK=[...OT].reverse(),AK=OT.length;function bK(t){return e=>Promise.all(e.map(({animation:n,options:i})=>EK(t,n,i)))}function CK(t){let e=bK(t),n=VI(),i=!0;const r=f=>(d,p)=>{var v;const T=rg(t,p,f==="exit"?(v=t.presenceContext)===null||v===void 0?void 0:v.custom:void 0);if(T){const{transition:w,transitionEnd:x,...N}=T;d={...d,...N,...x}}return d};function o(f){e=f(t)}function l(f){const{props:d}=t,p=qM(t.parent)||{},v=[],T=new Set;let w={},x=1/0;for(let P=0;P<AK;P++){const O=wK[P],k=n[O],F=d[O]!==void 0?d[O]:p[O],G=Lf(F),K=O===f?k.isActive:null;K===!1&&(x=P);let H=F===p[O]&&F!==d[O]&&G;if(H&&i&&t.manuallyAnimateOnMount&&(H=!1),k.protectedKeys={...w},!k.isActive&&K===null||!F&&!k.prevProp||ng(F)||typeof F=="boolean")continue;const R=xK(k.prevProp,F);let I=R||O===f&&k.isActive&&!H&&G||P>x&&G,D=!1;const V=Array.isArray(F)?F:[F];let U=V.reduce(r(O),{});K===!1&&(U={});const{prevResolvedValues:z={}}=k,B={...z,...U},Re=oe=>{I=!0,T.has(oe)&&(D=!0,T.delete(oe)),k.needsAnimating[oe]=!0;const me=t.getValue(oe);me&&(me.liveStyle=!1)};for(const oe in B){const me=U[oe],xe=z[oe];if(w.hasOwnProperty(oe))continue;let be=!1;V0(me)&&V0(xe)?be=!eM(me,xe):be=me!==xe,be?me!=null?Re(oe):T.add(oe):me!==void 0&&T.has(oe)?Re(oe):k.protectedKeys[oe]=!0}k.prevProp=F,k.prevResolvedValues=U,k.isActive&&(w={...w,...U}),i&&t.blockInitialAnimation&&(I=!1),I&&(!(H&&R)||D)&&v.push(...V.map(oe=>({animation:oe,options:{type:O}})))}if(T.size){const P={};T.forEach(O=>{const k=t.getBaseTarget(O),F=t.getValue(O);F&&(F.liveStyle=!0),P[O]=k??null}),v.push({animation:P})}let N=!!v.length;return i&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(N=!1),i=!1,N?e(v):Promise.resolve()}function c(f,d){var p;if(n[f].isActive===d)return Promise.resolve();(p=t.variantChildren)===null||p===void 0||p.forEach(T=>{var w;return(w=T.animationState)===null||w===void 0?void 0:w.setActive(f,d)}),n[f].isActive=d;const v=l(f);for(const T in n)n[T].protectedKeys={};return v}return{animateChanges:l,setActive:c,setAnimateFunction:o,getState:()=>n,reset:()=>{n=VI(),i=!0}}}function xK(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!eM(e,t):!1}function Ra(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function VI(){return{animate:Ra(!0),whileInView:Ra(),whileHover:Ra(),whileTap:Ra(),whileDrag:Ra(),whileFocus:Ra(),exit:Ra()}}class ia{constructor(e){this.isMounted=!1,this.node=e}update(){}}class IK extends ia{constructor(e){super(e),e.animationState||(e.animationState=CK(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ng(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let RK=0;class NK extends ia{constructor(){super(...arguments),this.id=RK++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const PK={animation:{Feature:IK},exit:{Feature:NK}};function Bf(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function ld(t){return{point:{x:t.pageX,y:t.pageY}}}const DK=t=>e=>ZT(e)&&t(e,ld(e));function hf(t,e,n,i){return Bf(t,e,DK(n),i)}const LI=(t,e)=>Math.abs(t-e);function MK(t,e){const n=LI(t.x,e.x),i=LI(t.y,e.y);return Math.sqrt(n**2+i**2)}class zM{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Lv(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,w=MK(v.offset,{x:0,y:0})>=3;if(!T&&!w)return;const{point:x}=v,{timestamp:N}=jn;this.history.push({...x,timestamp:N});const{onStart:P,onMove:O}=this.handlers;T||(P&&P(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),O&&O(this.lastMoveEvent,v)},this.handlePointerMove=(v,T)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=Vv(T,this.transformPagePoint),Gt.update(this.updatePoint,!0)},this.handlePointerUp=(v,T)=>{this.end();const{onEnd:w,onSessionEnd:x,resumeAnimation:N}=this.handlers;if(this.dragSnapToOrigin&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=Lv(v.type==="pointercancel"?this.lastMoveEventInfo:Vv(T,this.transformPagePoint),this.history);this.startEvent&&w&&w(v,P),x&&x(v,P)},!ZT(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const l=ld(e),c=Vv(l,this.transformPagePoint),{point:f}=c,{timestamp:d}=jn;this.history=[{...f,timestamp:d}];const{onSessionStart:p}=n;p&&p(e,Lv(c,this.history)),this.removeListeners=ad(hf(this.contextWindow,"pointermove",this.handlePointerMove),hf(this.contextWindow,"pointerup",this.handlePointerUp),hf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Jo(this.updatePoint)}}function Vv(t,e){return e?{point:e(t.point)}:t}function OI(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Lv({point:t},e){return{point:t,delta:OI(t,HM(e)),offset:OI(t,kK(e)),velocity:VK(e,.1)}}function kK(t){return t[0]}function HM(t){return t[t.length-1]}function VK(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=HM(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>Ds(e)));)n--;if(!i)return{x:0,y:0};const o=Ms(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const l={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}const GM=1e-4,LK=1-GM,OK=1+GM,jM=.01,UK=0-jM,FK=0+jM;function Qi(t){return t.max-t.min}function BK(t,e,n){return Math.abs(t-e)<=n}function UI(t,e,n,i=.5){t.origin=i,t.originPoint=Wt(e.min,e.max,t.origin),t.scale=Qi(n)/Qi(e),t.translate=Wt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=LK&&t.scale<=OK||isNaN(t.scale))&&(t.scale=1),(t.translate>=UK&&t.translate<=FK||isNaN(t.translate))&&(t.translate=0)}function pf(t,e,n,i){UI(t.x,e.x,n.x,i?i.originX:void 0),UI(t.y,e.y,n.y,i?i.originY:void 0)}function FI(t,e,n){t.min=n.min+e.min,t.max=t.min+Qi(e)}function qK(t,e,n){FI(t.x,e.x,n.x),FI(t.y,e.y,n.y)}function BI(t,e,n){t.min=e.min-n.min,t.max=t.min+Qi(e)}function mf(t,e,n){BI(t.x,e.x,n.x),BI(t.y,e.y,n.y)}function zK(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?Wt(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?Wt(n,t,i.max):Math.min(t,n)),t}function qI(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function HK(t,{top:e,left:n,bottom:i,right:r}){return{x:qI(t.x,n,r),y:qI(t.y,e,i)}}function zI(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function GK(t,e){return{x:zI(t.x,e.x),y:zI(t.y,e.y)}}function jK(t,e){let n=.5;const i=Qi(t),r=Qi(e);return r>i?n=Eu(e.min,e.max-i,t.min):i>r&&(n=Eu(t.min,t.max-r,e.min)),Bs(0,1,n)}function $K(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const $0=.35;function KK(t=$0){return t===!1?t=0:t===!0&&(t=$0),{x:HI(t,"left","right"),y:HI(t,"top","bottom")}}function HI(t,e,n){return{min:GI(t,e),max:GI(t,n)}}function GI(t,e){return typeof t=="number"?t:t[e]||0}const jI=()=>({translate:0,scale:1,origin:0,originPoint:0}),Zl=()=>({x:jI(),y:jI()}),$I=()=>({min:0,max:0}),hn=()=>({x:$I(),y:$I()});function gr(t){return[t("x"),t("y")]}function $M({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function YK({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function JK(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Ov(t){return t===void 0||t===1}function K0({scale:t,scaleX:e,scaleY:n}){return!Ov(t)||!Ov(e)||!Ov(n)}function Da(t){return K0(t)||KM(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function KM(t){return KI(t.x)||KI(t.y)}function KI(t){return t&&t!=="0%"}function um(t,e,n){const i=t-n,r=e*i;return n+r}function YI(t,e,n,i,r){return r!==void 0&&(t=um(t,r,i)),um(t,n,i)+e}function Y0(t,e=0,n=1,i,r){t.min=YI(t.min,e,n,i,r),t.max=YI(t.max,e,n,i,r)}function YM(t,{x:e,y:n}){Y0(t.x,e.translate,e.scale,e.originPoint),Y0(t.y,n.translate,n.scale,n.originPoint)}const JI=.999999999999,WI=1.0000000000001;function WK(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,l;for(let c=0;c<r;c++){o=n[c],l=o.projectionDelta;const{visualElement:f}=o.options;f&&f.props.style&&f.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&tu(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,YM(t,l)),i&&Da(o.latestValues)&&tu(t,o.latestValues))}e.x<WI&&e.x>JI&&(e.x=1),e.y<WI&&e.y>JI&&(e.y=1)}function eu(t,e){t.min=t.min+e,t.max=t.max+e}function XI(t,e,n,i,r=.5){const o=Wt(t.min,t.max,r);Y0(t,e,n,o,i)}function tu(t,e){XI(t.x,e.x,e.scaleX,e.scale,e.originX),XI(t.y,e.y,e.scaleY,e.scale,e.originY)}function JM(t,e){return $M(JK(t.getBoundingClientRect(),e))}function XK(t,e,n){const i=JM(t,n),{scroll:r}=e;return r&&(eu(i.x,r.offset.x),eu(i.y,r.offset.y)),i}const WM=({current:t})=>t?t.ownerDocument.defaultView:null,QK=new WeakMap;class ZK{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=hn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=p=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ld(p).point)},o=(p,v)=>{const{drag:T,dragPropagation:w,onDragStart:x}=this.getProps();if(T&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=jj(T),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),gr(P=>{let O=this.getAxisMotionValue(P).get()||0;if(is.test(O)){const{projection:k}=this.visualElement;if(k&&k.layout){const F=k.layout.layoutBox[P];F&&(O=Qi(F)*(parseFloat(O)/100))}}this.originPoint[P]=O}),x&&Gt.postRender(()=>x(p,v)),U0(this.visualElement,"transform");const{animationState:N}=this.visualElement;N&&N.setActive("whileDrag",!0)},l=(p,v)=>{const{dragPropagation:T,dragDirectionLock:w,onDirectionLock:x,onDrag:N}=this.getProps();if(!T&&!this.openDragLock)return;const{offset:P}=v;if(w&&this.currentDirection===null){this.currentDirection=eY(P),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",v.point,P),this.updateAxis("y",v.point,P),this.visualElement.render(),N&&N(p,v)},c=(p,v)=>this.stop(p,v),f=()=>gr(p=>{var v;return this.getAnimationState(p)==="paused"&&((v=this.getAxisMotionValue(p).animation)===null||v===void 0?void 0:v.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new zM(e,{onSessionStart:r,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:WM(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&Gt.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!Gh(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(l=zK(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&Xl(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=HK(r.layoutBox,n):this.constraints=!1,this.elastic=KK(i),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&gr(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=$K(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Xl(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=XK(i,r.root,this.visualElement.getTransformPagePoint());let l=GK(r.layout.layoutBox,o);if(n){const c=n(YK(l));this.hasMutatedConstraints=!!c,c&&(l=$M(c))}return l}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),f=this.constraints||{},d=gr(p=>{if(!Gh(p,n,this.currentDirection))return;let v=f&&f[p]||{};l&&(v={min:0,max:0});const T=r?200:1e6,w=r?40:1e7,x={type:"inertia",velocity:i?e[p]:0,bounceStiffness:T,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...o,...v};return this.startAxisValueAnimation(p,x)});return Promise.all(d).then(c)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return U0(this.visualElement,e),i.start(fE(e,i,0,n,this.visualElement,!1))}stopAnimation(){gr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){gr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){gr(n=>{const{drag:i}=this.getProps();if(!Gh(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:l,max:c}=r.layout.layoutBox[n];o.set(e[n]-Wt(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Xl(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};gr(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const f=c.get();r[l]=jK({min:f,max:f},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),gr(l=>{if(!Gh(l,e,null))return;const c=this.getAxisMotionValue(l),{min:f,max:d}=this.constraints[l];c.set(Wt(f,d,r[l]))})}addListeners(){if(!this.visualElement.current)return;QK.set(this.visualElement,this);const e=this.visualElement.current,n=hf(e,"pointerdown",f=>{const{drag:d,dragListener:p=!0}=this.getProps();d&&p&&this.start(f)}),i=()=>{const{dragConstraints:f}=this.getProps();Xl(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Gt.read(i);const l=Bf(window,"resize",()=>this.scalePositionWithinConstraints()),c=r.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:d})=>{this.isDragging&&d&&(gr(p=>{const v=this.getAxisMotionValue(p);v&&(this.originPoint[p]+=f[p].translate,v.set(v.get()+f[p].translate))}),this.visualElement.render())}));return()=>{l(),n(),o(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:l=$0,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:l,dragMomentum:c}}}function Gh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function eY(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class tY extends ia{constructor(e){super(e),this.removeGroupControls=Xi,this.removeListeners=Xi,this.controls=new ZK(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Xi}unmount(){this.removeGroupControls(),this.removeListeners()}}const QI=t=>(e,n)=>{t&&Gt.postRender(()=>t(e,n))};class nY extends ia{constructor(){super(...arguments),this.removePointerDownListener=Xi}onPointerDown(e){this.session=new zM(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:WM(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:QI(e),onStart:QI(n),onMove:i,onEnd:(o,l)=>{delete this.session,r&&Gt.postRender(()=>r(o,l))}}}mount(){this.removePointerDownListener=hf(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Sp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ZI(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Oc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Oe.test(t))t=parseFloat(t);else return t;const n=ZI(t,e.target.x),i=ZI(t,e.target.y);return`${n}% ${i}%`}},iY={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=Wo.parse(t);if(r.length>5)return i;const o=Wo.createTransformer(t),l=typeof r[0]!="number"?1:0,c=n.x.scale*e.x,f=n.y.scale*e.y;r[0+l]/=c,r[1+l]/=f;const d=Wt(c,f,.5);return typeof r[2+l]=="number"&&(r[2+l]/=d),typeof r[3+l]=="number"&&(r[3+l]/=d),o(r)}};class rY extends q.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;Aj(sY),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Sp.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,l=i.projection;return l&&(l.isPresent=o,r||e.layoutDependency!==n||n===void 0?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||Gt.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),BT.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function XM(t){const[e,n]=MD(),i=q.useContext(DT);return S.jsx(rY,{...t,layoutGroup:i,switchLayoutGroup:q.useContext(qD),isPresent:e,safeToRemove:n})}const sY={borderRadius:{...Oc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Oc,borderTopRightRadius:Oc,borderBottomLeftRadius:Oc,borderBottomRightRadius:Oc,boxShadow:iY};function oY(t,e,n){const i=li(t)?t:Uf(t);return i.start(fE("",i,e,n)),i.animation}function aY(t){return t instanceof SVGElement&&t.tagName!=="svg"}const lY=(t,e)=>t.depth-e.depth;class uY{constructor(){this.children=[],this.isDirty=!1}add(e){eE(this.children,e),this.isDirty=!0}remove(e){tE(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(lY),this.isDirty=!1,this.children.forEach(e)}}function cY(t,e){const n=rs.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(Jo(i),t(o-e))};return Gt.read(i,!0),()=>Jo(i)}const QM=["TopLeft","TopRight","BottomLeft","BottomRight"],fY=QM.length,eR=t=>typeof t=="string"?parseFloat(t):t,tR=t=>typeof t=="number"||Oe.test(t);function dY(t,e,n,i,r,o){r?(t.opacity=Wt(0,n.opacity!==void 0?n.opacity:1,hY(i)),t.opacityExit=Wt(e.opacity!==void 0?e.opacity:1,0,pY(i))):o&&(t.opacity=Wt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let l=0;l<fY;l++){const c=`border${QM[l]}Radius`;let f=nR(e,c),d=nR(n,c);if(f===void 0&&d===void 0)continue;f||(f=0),d||(d=0),f===0||d===0||tR(f)===tR(d)?(t[c]=Math.max(Wt(eR(f),eR(d),i),0),(is.test(d)||is.test(f))&&(t[c]+="%")):t[c]=d}(e.rotate||n.rotate)&&(t.rotate=Wt(e.rotate||0,n.rotate||0,i))}function nR(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const hY=ZM(0,.5,yM),pY=ZM(.5,.95,Xi);function ZM(t,e,n){return i=>i<t?0:i>e?1:n(Eu(t,e,i))}function iR(t,e){t.min=e.min,t.max=e.max}function mr(t,e){iR(t.x,e.x),iR(t.y,e.y)}function rR(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function sR(t,e,n,i,r){return t-=e,t=um(t,1/n,i),r!==void 0&&(t=um(t,1/r,i)),t}function mY(t,e=0,n=1,i=.5,r,o=t,l=t){if(is.test(e)&&(e=parseFloat(e),e=Wt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=Wt(o.min,o.max,i);t===o&&(c-=e),t.min=sR(t.min,e,n,c,r),t.max=sR(t.max,e,n,c,r)}function oR(t,e,[n,i,r],o,l){mY(t,e[n],e[i],e[r],e.scale,o,l)}const gY=["x","scaleX","originX"],yY=["y","scaleY","originY"];function aR(t,e,n,i){oR(t.x,e,gY,n?n.x:void 0,i?i.x:void 0),oR(t.y,e,yY,n?n.y:void 0,i?i.y:void 0)}function lR(t){return t.translate===0&&t.scale===1}function ek(t){return lR(t.x)&&lR(t.y)}function uR(t,e){return t.min===e.min&&t.max===e.max}function vY(t,e){return uR(t.x,e.x)&&uR(t.y,e.y)}function cR(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function tk(t,e){return cR(t.x,e.x)&&cR(t.y,e.y)}function fR(t){return Qi(t.x)/Qi(t.y)}function dR(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class _Y{constructor(){this.members=[]}add(e){eE(this.members,e),e.scheduleRender()}remove(e){if(tE(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function TY(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y,l=(n==null?void 0:n.z)||0;if((r||o||l)&&(i=`translate3d(${r}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:p,rotateX:v,rotateY:T,skewX:w,skewY:x}=n;d&&(i=`perspective(${d}px) ${i}`),p&&(i+=`rotate(${p}deg) `),v&&(i+=`rotateX(${v}deg) `),T&&(i+=`rotateY(${T}deg) `),w&&(i+=`skewX(${w}deg) `),x&&(i+=`skewY(${x}deg) `)}const c=t.x.scale*e.x,f=t.y.scale*e.y;return(c!==1||f!==1)&&(i+=`scale(${c}, ${f})`),i||"none"}const Ma={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Qc=typeof window<"u"&&window.MotionDebug!==void 0,Uv=["","X","Y","Z"],EY={visibility:"hidden"},hR=1e3;let SY=0;function Fv(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function nk(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=cM(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Gt,!(r||o))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&nk(i)}function ik({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(l={},c=e==null?void 0:e()){this.id=SY++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Qc&&(Ma.totalNodes=Ma.resolvedTargetDeltas=Ma.recalculatedProjection=0),this.nodes.forEach(bY),this.nodes.forEach(NY),this.nodes.forEach(PY),this.nodes.forEach(CY),Qc&&window.MotionDebug.record(Ma)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new uY)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new nE),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const f=this.eventHandlers.get(l);f&&f.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,c=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=aY(l),this.instance=l;const{layoutId:f,layout:d,visualElement:p}=this.options;if(p&&!p.current&&p.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),c&&(d||f)&&(this.isLayoutDirty=!0),t){let v;const T=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,v&&v(),v=cY(T,250),Sp.hasAnimatedSinceResize&&(Sp.hasAnimatedSinceResize=!1,this.nodes.forEach(mR))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&p&&(f||d)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:T,hasRelativeTargetChanged:w,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||p.getDefaultTransition()||LY,{onLayoutAnimationStart:P,onLayoutAnimationComplete:O}=p.getProps(),k=!this.targetLayout||!tk(this.targetLayout,x)||w,F=!T&&w;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||F||T&&(k||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(v,F);const G={...WT(N,"layout"),onPlay:P,onComplete:O};(p.shouldReduceMotion||this.options.layoutRoot)&&(G.delay=0,G.type=!1),this.startAnimation(G)}else T||mR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Jo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(DY),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&nk(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const v=this.path[p];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:c,layout:f}=this.options;if(c===void 0&&!f)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(pR);return}this.isUpdating||this.nodes.forEach(IY),this.isUpdating=!1,this.nodes.forEach(RY),this.nodes.forEach(wY),this.nodes.forEach(AY),this.clearAllSnapshots();const c=rs.now();jn.delta=Bs(0,1e3/60,c-jn.timestamp),jn.timestamp=c,jn.isProcessing=!0,Rv.update.process(jn),Rv.preRender.process(jn),Rv.render.process(jn),jn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,BT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(xY),this.sharedNodes.forEach(MY)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Gt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Gt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=hn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c){const f=i(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!r)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!ek(this.projectionDelta),f=this.getTransformTemplate(),d=f?f(this.latestValues,""):void 0,p=d!==this.prevTransformTemplateValue;l&&(c||Da(this.latestValues)||p)&&(r(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let f=this.removeElementScroll(c);return l&&(f=this.removeTransform(f)),OY(f),{animationId:this.root.animationId,measuredBox:c,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:c}=this.options;if(!c)return hn();const f=c.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(UY))){const{scroll:p}=this.root;p&&(eu(f.x,p.offset.x),eu(f.y,p.offset.y))}return f}removeElementScroll(l){var c;const f=hn();if(mr(f,l),!((c=this.scroll)===null||c===void 0)&&c.wasRoot)return f;for(let d=0;d<this.path.length;d++){const p=this.path[d],{scroll:v,options:T}=p;p!==this.root&&v&&T.layoutScroll&&(v.wasRoot&&mr(f,l),eu(f.x,v.offset.x),eu(f.y,v.offset.y))}return f}applyTransform(l,c=!1){const f=hn();mr(f,l);for(let d=0;d<this.path.length;d++){const p=this.path[d];!c&&p.options.layoutScroll&&p.scroll&&p!==p.root&&tu(f,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Da(p.latestValues)&&tu(f,p.latestValues)}return Da(this.latestValues)&&tu(f,this.latestValues),f}removeTransform(l){const c=hn();mr(c,l);for(let f=0;f<this.path.length;f++){const d=this.path[f];if(!d.instance||!Da(d.latestValues))continue;K0(d.latestValues)&&d.updateSnapshot();const p=hn(),v=d.measurePageBox();mr(p,v),aR(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,p)}return Da(this.latestValues)&&aR(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==jn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var c;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==f;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:v,layoutId:T}=this.options;if(!(!this.layout||!(v||T))){if(this.resolvedRelativeTargetAt=jn.timestamp,!this.targetDelta&&!this.relativeTarget){const w=this.getClosestProjectingParent();w&&w.layout&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hn(),this.relativeTargetOrigin=hn(),mf(this.relativeTargetOrigin,this.layout.layoutBox,w.layout.layoutBox),mr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=hn(),this.targetWithTransforms=hn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),qK(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):mr(this.target,this.layout.layoutBox),YM(this.target,this.targetDelta)):mr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const w=this.getClosestProjectingParent();w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hn(),this.relativeTargetOrigin=hn(),mf(this.relativeTargetOrigin,this.target,w.target),mr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Qc&&Ma.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||K0(this.parent.latestValues)||KM(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const c=this.getLead(),f=!!this.resumingFrom||this!==c;let d=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(d=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===jn.timestamp&&(d=!1),d)return;const{layout:p,layoutId:v}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||v))return;mr(this.layoutCorrected,this.layout.layoutBox);const T=this.treeScale.x,w=this.treeScale.y;WK(this.layoutCorrected,this.treeScale,this.path,f),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=hn());const{target:x}=c;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(rR(this.prevProjectionDelta.x,this.projectionDelta.x),rR(this.prevProjectionDelta.y,this.projectionDelta.y)),pf(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==T||this.treeScale.y!==w||!dR(this.projectionDelta.x,this.prevProjectionDelta.x)||!dR(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x)),Qc&&Ma.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var c;if((c=this.options.visualElement)===null||c===void 0||c.scheduleRender(),l){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Zl(),this.projectionDelta=Zl(),this.projectionDeltaWithTransform=Zl()}setAnimationOrigin(l,c=!1){const f=this.snapshot,d=f?f.latestValues:{},p={...this.latestValues},v=Zl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const T=hn(),w=f?f.source:void 0,x=this.layout?this.layout.source:void 0,N=w!==x,P=this.getStack(),O=!P||P.members.length<=1,k=!!(N&&!O&&this.options.crossfade===!0&&!this.path.some(VY));this.animationProgress=0;let F;this.mixTargetDelta=G=>{const K=G/1e3;gR(v.x,l.x,K),gR(v.y,l.y,K),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(mf(T,this.layout.layoutBox,this.relativeParent.layout.layoutBox),kY(this.relativeTarget,this.relativeTargetOrigin,T,K),F&&vY(this.relativeTarget,F)&&(this.isProjectionDirty=!1),F||(F=hn()),mr(F,this.relativeTarget)),N&&(this.animationValues=p,dY(p,d,this.latestValues,K,k,O)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=K},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Jo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Gt.update(()=>{Sp.hasAnimatedSinceResize=!0,this.currentAnimation=oY(0,hR,{...l,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(hR),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:f,layout:d,latestValues:p}=l;if(!(!c||!f||!d)){if(this!==l&&this.layout&&d&&rk(this.options.animationType,this.layout.layoutBox,d.layoutBox)){f=this.target||hn();const v=Qi(this.layout.layoutBox.x);f.x.min=l.target.x.min,f.x.max=f.x.min+v;const T=Qi(this.layout.layoutBox.y);f.y.min=l.target.y.min,f.y.max=f.y.min+T}mr(c,f),tu(c,p),pf(this.projectionDeltaWithTransform,this.layoutCorrected,c,p)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new _Y),this.sharedNodes.get(l).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:c}=this.options;return c?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:c}=this.options;return c?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:f}={}){const d=this.getStack();d&&d.promote(this,f),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:f}=l;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(c=!0),!c)return;const d={};f.z&&Fv("z",l,d,this.animationValues);for(let p=0;p<Uv.length;p++)Fv(`rotate${Uv[p]}`,l,d,this.animationValues),Fv(`skew${Uv[p]}`,l,d,this.animationValues);l.render();for(const p in d)l.setStaticValue(p,d[p]),this.animationValues&&(this.animationValues[p]=d[p]);l.scheduleRender()}getProjectionStyles(l){var c,f;if(!this.instance||this.isSVG)return;if(!this.isVisible)return EY;const d={visibility:""},p=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=Tp(l==null?void 0:l.pointerEvents)||"",d.transform=p?p(this.latestValues,""):"none",d;const v=this.getLead();if(!this.projectionDelta||!this.layout||!v.target){const N={};return this.options.layoutId&&(N.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,N.pointerEvents=Tp(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Da(this.latestValues)&&(N.transform=p?p({},""):"none",this.hasProjected=!1),N}const T=v.animationValues||v.latestValues;this.applyTransformsToTarget(),d.transform=TY(this.projectionDeltaWithTransform,this.treeScale,T),p&&(d.transform=p(T,d.transform));const{x:w,y:x}=this.projectionDelta;d.transformOrigin=`${w.origin*100}% ${x.origin*100}% 0`,v.animationValues?d.opacity=v===this?(f=(c=T.opacity)!==null&&c!==void 0?c:this.latestValues.opacity)!==null&&f!==void 0?f:1:this.preserveOpacity?this.latestValues.opacity:T.opacityExit:d.opacity=v===this?T.opacity!==void 0?T.opacity:"":T.opacityExit!==void 0?T.opacityExit:0;for(const N in rm){if(T[N]===void 0)continue;const{correct:P,applyTo:O}=rm[N],k=d.transform==="none"?T[N]:P(T[N],v);if(O){const F=O.length;for(let G=0;G<F;G++)d[O[G]]=k}else d[N]=k}return this.options.layoutId&&(d.pointerEvents=v===this?Tp(l==null?void 0:l.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var c;return(c=l.currentAnimation)===null||c===void 0?void 0:c.stop()}),this.root.nodes.forEach(pR),this.root.sharedNodes.clear()}}}function wY(t){t.updateLayout()}function AY(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:o}=t.options,l=n.source!==t.layout.source;o==="size"?gr(v=>{const T=l?n.measuredBox[v]:n.layoutBox[v],w=Qi(T);T.min=i[v].min,T.max=T.min+w}):rk(o,n.layoutBox,i)&&gr(v=>{const T=l?n.measuredBox[v]:n.layoutBox[v],w=Qi(i[v]);T.max=T.min+w,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[v].max=t.relativeTarget[v].min+w)});const c=Zl();pf(c,i,n.layoutBox);const f=Zl();l?pf(f,t.applyTransform(r,!0),n.measuredBox):pf(f,i,n.layoutBox);const d=!ek(c);let p=!1;if(!t.resumeFrom){const v=t.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:T,layout:w}=v;if(T&&w){const x=hn();mf(x,n.layoutBox,T.layoutBox);const N=hn();mf(N,i,w.layoutBox),tk(x,N)||(p=!0),v.options.layoutRoot&&(t.relativeTarget=N,t.relativeTargetOrigin=x,t.relativeParent=v)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:f,layoutDelta:c,hasLayoutChanged:d,hasRelativeTargetChanged:p})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function bY(t){Qc&&Ma.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function CY(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function xY(t){t.clearSnapshot()}function pR(t){t.clearMeasurements()}function IY(t){t.isLayoutDirty=!1}function RY(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function mR(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function NY(t){t.resolveTargetDelta()}function PY(t){t.calcProjection()}function DY(t){t.resetSkewAndRotation()}function MY(t){t.removeLeadSnapshot()}function gR(t,e,n){t.translate=Wt(e.translate,0,n),t.scale=Wt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function yR(t,e,n,i){t.min=Wt(e.min,n.min,i),t.max=Wt(e.max,n.max,i)}function kY(t,e,n,i){yR(t.x,e.x,n.x,i),yR(t.y,e.y,n.y,i)}function VY(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const LY={duration:.45,ease:[.4,0,.1,1]},vR=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),_R=vR("applewebkit/")&&!vR("chrome/")?Math.round:Xi;function TR(t){t.min=_R(t.min),t.max=_R(t.max)}function OY(t){TR(t.x),TR(t.y)}function rk(t,e,n){return t==="position"||t==="preserve-aspect"&&!BK(fR(e),fR(n),.2)}function UY(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const FY=ik({attachResizeListener:(t,e)=>Bf(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Bv={current:void 0},sk=ik({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Bv.current){const t=new FY({});t.mount(window),t.setOptions({layoutScroll:!0}),Bv.current=t}return Bv.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),BY={pan:{Feature:nY},drag:{Feature:tY,ProjectionNode:sk,MeasureLayout:XM}};function ER(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,o=i[r];o&&Gt.postRender(()=>o(e,ld(e)))}class qY extends ia{mount(){const{current:e}=this.node;e&&(this.unmount=Bj(e,n=>(ER(this.node,n,"Start"),i=>ER(this.node,i,"End"))))}unmount(){}}class zY extends ia{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ad(Bf(this.node.current,"focus",()=>this.onFocus()),Bf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function SR(t,e,n){const{props:i}=t;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),o=i[r];o&&Gt.postRender(()=>o(e,ld(e)))}class HY extends ia{mount(){const{current:e}=this.node;e&&(this.unmount=Gj(e,n=>(SR(this.node,n,"Start"),(i,{success:r})=>SR(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const J0=new WeakMap,qv=new WeakMap,GY=t=>{const e=J0.get(t.target);e&&e(t)},jY=t=>{t.forEach(GY)};function $Y({root:t,...e}){const n=t||document;qv.has(n)||qv.set(n,{});const i=qv.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(jY,{root:t,...e})),i[r]}function KY(t,e,n){const i=$Y(e);return J0.set(t,n),i.observe(t),()=>{J0.delete(t),i.unobserve(t)}}const YY={some:0,all:1};class JY extends ia{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,l={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:YY[r]},c=f=>{const{isIntersecting:d}=f;if(this.isInView===d||(this.isInView=d,o&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:p,onViewportLeave:v}=this.node.getProps(),T=d?p:v;T&&T(f)};return KY(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(WY(e,n))&&this.startObserver()}unmount(){}}function WY({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const XY={inView:{Feature:JY},tap:{Feature:HY},focus:{Feature:zY},hover:{Feature:qY}},QY={layout:{ProjectionNode:sk,MeasureLayout:XM}},W0={current:null},ok={current:!1};function ZY(){if(ok.current=!0,!!VT)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>W0.current=t.matches;t.addListener(e),e()}else W0.current=!1}const eJ=[...PM,ii,Wo],tJ=t=>eJ.find(NM(t)),wR=new WeakMap;function nJ(t,e,n){for(const i in e){const r=e[i],o=n[i];if(li(r))t.addValue(i,r);else if(li(o))t.addValue(i,Uf(r,{owner:t}));else if(o!==r)if(t.hasValue(i)){const l=t.getValue(i);l.liveStyle===!0?l.jump(r):l.hasAnimated||l.set(r)}else{const l=t.getStaticValue(i);t.addValue(i,Uf(l!==void 0?l:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const AR=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class iJ{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:o,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=lE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const w=rs.now();this.renderScheduledAt<w&&(this.renderScheduledAt=w,Gt.render(this.render,!1,!0))};const{latestValues:f,renderState:d,onUpdate:p}=l;this.onUpdate=p,this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=ig(n),this.isVariantNode=FD(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:v,...T}=this.scrapeMotionValuesFromProps(n,{},this);for(const w in T){const x=T[w];f[w]!==void 0&&li(x)&&x.set(f[w],!1)}}mount(e){this.current=e,wR.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),ok.current||ZY(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:W0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){wR.delete(this.current),this.projection&&this.projection.unmount(),Jo(this.notifyUpdate),Jo(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=nl.has(e),r=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&Gt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),o(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Su){const n=Su[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):hn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<AR.length;i++){const r=AR[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o="on"+r,l=e[o];l&&(this.propEventSubscriptions[r]=this.on(r,l))}this.prevMotionValues=nJ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Uf(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(IM(r)||_M(r))?r=parseFloat(r):!tJ(r)&&Wo.test(n)&&(r=bM(e,n)),this.setBaseTarget(e,li(r)?r.get():r)),li(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const l=zT(this.props,i,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);l&&(r=l[e])}if(i&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!li(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new nE),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class ak extends iJ{constructor(){super(...arguments),this.KeyframeResolver=DM}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;li(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function rJ(t){return window.getComputedStyle(t)}class sJ extends ak{constructor(){super(...arguments),this.type="html",this.renderInstance=YD}readValueFromInstance(e,n){if(nl.has(n)){const i=aE(n);return i&&i.default||0}else{const i=rJ(e),r=(jD(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return JM(e,n)}build(e,n,i){jT(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return JT(e,n,i)}}class oJ extends ak{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=hn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(nl.has(n)){const i=aE(n);return i&&i.default||0}return n=JD.has(n)?n:FT(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return QD(e,n,i)}build(e,n,i){$T(e,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,i,r){WD(e,n,i,r)}mount(e){this.isSVGTag=YT(e.tagName),super.mount(e)}}const aJ=(t,e)=>qT(t)?new oJ(e):new sJ(e,{allowProjection:t!==q.Fragment}),lJ=Mj({...PK,...XY,...BY,...QY},aJ),uJ=Y7(lJ),cJ=()=>S.jsx("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-800 rounded-lg aspect-square relative overflow-hidden",children:S.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent skew-x-12 translate-x-[-100%] animate-shimmer"})}),fJ=({imageSrc:t,analysis:e,onClick:n,onRemove:i,isSelected:r,isSet:o,isFavorite:l})=>S.jsxs("div",{onClick:n,className:"group relative aspect-square bg-raisin-black rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 cursor-pointer",children:[S.jsx("img",{src:t,alt:e,loading:"lazy",className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"}),S.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${r?"ring-4 ring-gold":"ring-2 ring-transparent"} rounded-lg`}),S.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),r?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-gold rounded-full text-onyx z-10",children:S.jsx(NT,{})}):l?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-red-500 z-10",children:S.jsx(Vf,{className:"w-4 h-4"})}):o?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:S.jsx(Zm,{})}):null,S.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:S.jsx("p",{className:"text-white text-sm font-medium line-clamp-2",children:e})}),S.jsx("button",{onClick:i,className:"absolute top-2 right-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-500 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-red-500","aria-label":"Supprimer",children:S.jsx(Qm,{})})]}),dJ={Hauts:{color:"Toutes",material:"Toutes"},Bas:{color:"Toutes",material:"Toutes"},Chaussures:{color:"Toutes",material:"Toutes"},Accessoires:{color:"Toutes",material:"Toutes"}},hJ=({clothingItems:t,isLoading:e,clothingSets:n=[],onItemClick:i,onDeleteItem:r,onCreateSet:o})=>{var Z,pe;const[l,c]=q.useState("Hauts"),[f,d]=q.useState(dJ),[p,v]=q.useState(""),[T,w]=q.useState("favorites"),[x,N]=q.useState(!1),[P,O]=q.useState(new Set),k=q.useMemo(()=>n||[],[n]),F=q.useMemo(()=>new Set(k.flatMap(re=>re.itemIds||[])),[k]),G=t.length,K=[{name:"Hauts",icon:S.jsx(x7,{})},{name:"Bas",icon:S.jsx(I7,{})},{name:"Chaussures",icon:S.jsx(R7,{})},{name:"Accessoires",icon:S.jsx(N7,{})}],H=[{value:"favorites",label:"Favoris d'abord"},{value:"newest",label:"Plus rcents"},{value:"oldest",label:"Plus anciens"},{value:"color",label:"Couleur (A-Z)"},{value:"category",label:"Catgorie"}],R=re=>{x?O(he=>{const Te=new Set(he);return Te.has(re.id)?Te.delete(re.id):Te.add(re.id),Te}):i(re)},I=(re,he)=>{re.stopPropagation(),P.has(he)&&O(Te=>{const Ve=new Set(Te);return Ve.delete(he),Ve}),r(he)},D=re=>[...re].sort((he,Te)=>{switch(T){case"favorites":return(Te.isFavorite?1:0)-(he.isFavorite?1:0);case"newest":return(Te.createdAt||0)-(he.createdAt||0);case"oldest":return(he.createdAt||0)-(Te.createdAt||0);case"color":return he.color.localeCompare(Te.color);case"category":return he.category.localeCompare(Te.category);default:return 0}}),V=q.useMemo(()=>{if(!p.trim())return t;const re=p.toLowerCase();return t.filter(he=>he.analysis.toLowerCase().includes(re)||he.color.toLowerCase().includes(re)||he.material.toLowerCase().includes(re)||he.category.toLowerCase().includes(re))},[t,p]),U=q.useMemo(()=>{if(!l)return[];const re=V.filter(Te=>Te.category===l),he=f[l];return he?re.filter(Te=>{const Ve=he.color==="Toutes"||Te.color===he.color,qe=he.material==="Toutes"||Te.material===he.material;return Ve&&qe}):re},[V,l,(Z=f[l])==null?void 0:Z.color,(pe=f[l])==null?void 0:pe.material]),z=q.useMemo(()=>D(U),[U,T]),B=q.useMemo(()=>K.reduce((re,{name:he})=>(re[he]=V.filter(Te=>Te.category===he).length,re),{}),[V]),Re=q.useMemo(()=>{if(!l)return[];const re=V.filter(he=>he.category===l).map(he=>he.color);return["Toutes",...Array.from(new Set(re))]},[V,l]),Ue=q.useMemo(()=>{if(!l)return[];const re=V.filter(he=>he.category===l).map(he=>he.material);return["Toutes",...Array.from(new Set(re))]},[V,l]),ee=re=>{l&&d(he=>({...he,[l]:{...he[l],color:re}}))},oe=re=>{l&&d(he=>({...he,[l]:{...he[l],material:re}}))},me=re=>{c(l===re?null:re)},xe=()=>{N(!x),O(new Set)},be=()=>{if(P.size<2){alert("Veuillez slectionner au moins 2 articles pour crer un ensemble.");return}const re=window.prompt("Donnez un nom  cet ensemble :");re&&(o(re,Array.from(P)),xe())},$=()=>{v("")};return e?S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl p-6 lg:p-8",children:[S.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[S.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded-full animate-pulse"}),S.jsx("div",{className:"h-8 w-48 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]}),S.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:[...Array(10)].map((re,he)=>S.jsx(cJ,{},he))})]}):G===0?S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-8 text-center",children:[S.jsx(lI,{className:"w-20 h-20 mx-auto text-gray-400 dark:text-gray-600 mb-4"}),S.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-700 dark:text-gray-300",children:"Votre garde-robe est vide"}),S.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Ajoutez vos premiers vtements pour commencer  crer vos tenues !"})]}):S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",children:[S.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-6",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx(lI,{className:"w-8 h-8 text-gold"}),S.jsxs("div",{children:[S.jsxs("h2",{className:"text-3xl font-serif font-bold tracking-tight",children:[S.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),S.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[G," vtement",G>1?"s":""]})]})]}),x?S.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[S.jsx("button",{onClick:xe,className:"flex-shrink-0 px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors text-sm font-medium",children:"Annuler"}),S.jsxs("button",{onClick:be,disabled:P.size<2,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 text-sm disabled:opacity-50",children:["Valider (",P.size,")"]})]}):S.jsxs("button",{onClick:xe,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300 text-sm",children:[S.jsx(Zm,{}),"Crer un ensemble"]})]}),S.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-6",children:[S.jsxs("div",{className:"relative flex-1",children:[S.jsx(PD,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),S.jsx("input",{type:"text",value:p,onChange:re=>v(re.target.value),placeholder:"Rechercher par description, couleur, matire...",className:"w-full pl-10 pr-10 py-2.5 bg-snow dark:bg-onyx border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-all"}),p&&S.jsx("button",{onClick:$,className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors","aria-label":"Effacer la recherche",children:S.jsx(Qm,{})})]}),S.jsxs("div",{className:"relative sm:w-48",children:[S.jsx(DD,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"}),S.jsx("select",{value:T,onChange:re=>w(re.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-snow dark:bg-onyx border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent appearance-none cursor-pointer transition-all",children:H.map(re=>S.jsx("option",{value:re.value,children:re.label},re.value))}),S.jsx(nm,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),p&&S.jsxs("div",{className:"mb-4 text-sm text-gray-500 dark:text-gray-400",children:[V.length," rsultat",V.length>1?"s":"",' pour "',p,'"']}),x&&S.jsxs("div",{className:"bg-gold/10 border border-gold/30 text-gold-dark dark:text-gold p-4 rounded-lg mb-6 text-center",children:[S.jsx("p",{className:"font-semibold",children:"Mode Cration d'Ensemble"}),S.jsx("p",{className:"text-sm",children:"Slectionnez les articles que vous souhaitez lier."})]}),S.jsx("div",{className:"space-y-6",children:K.map(({name:re,icon:he})=>{const Te=B[re]||0,Ve=l===re;return S.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-lg overflow-hidden",children:[S.jsxs("button",{onClick:()=>me(re),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900/50 hover:bg-gray-100 dark:hover:bg-gray-900 transition-colors",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("span",{className:"w-5 h-5 text-gold",children:he}),S.jsx("span",{className:"font-semibold text-lg",children:re}),S.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",Te,")"]})]}),S.jsx(nm,{className:`w-5 h-5 transition-transform ${Ve?"rotate-180":""}`})]}),Ve&&S.jsxs("div",{className:"p-6 space-y-6",children:[S.jsxs("div",{className:"flex flex-wrap gap-4",children:[S.jsxs("div",{className:"flex-1 min-w-[150px]",children:[S.jsx("label",{className:"block text-sm font-medium mb-2",children:"Couleur"}),S.jsx("select",{value:f[re].color,onChange:qe=>ee(qe.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:Re.map(qe=>S.jsx("option",{value:qe,children:qe},qe))})]}),S.jsxs("div",{className:"flex-1 min-w-[150px]",children:[S.jsx("label",{className:"block text-sm font-medium mb-2",children:"Matire"}),S.jsx("select",{value:f[re].material,onChange:qe=>oe(qe.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:Ue.map(qe=>S.jsx("option",{value:qe,children:qe},qe))})]})]}),z.length>0?S.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:S.jsx(B7,{mode:"popLayout",children:z.map((qe,yt)=>S.jsx(uJ.div,{layout:!0,initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.5,transition:{duration:.2}},transition:{duration:.4,delay:yt*.05,type:"spring",bounce:.3},children:S.jsx(fJ,{imageSrc:qe.imageSrc,analysis:qe.analysis,onClick:()=>R(qe),onRemove:Un=>I(Un,qe.id),isSelected:P.has(qe.id),isSet:F.has(qe.id),isFavorite:qe.isFavorite})},qe.id))})}):S.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"Aucun vtement ne correspond aux filtres slectionns."})]})]},re)})})]})},lk=({clothingItems:t,clothingSets:e,onGenerate:n,isGenerating:i,weatherInfo:r,weatherError:o})=>{const[l,c]=Cn.useState(""),f=p=>{p.preventDefault(),n(l||"Casual")},d=["Casual","Soire chic","Travail (formel)"];return S.jsxs("div",{children:[S.jsxs("div",{className:"text-center mb-6 p-3 rounded-lg bg-snow dark:bg-onyx border border-black/10 dark:border-white/10",children:[r&&S.jsxs("p",{className:"text-sm font-medium text-blue-500 dark:text-blue-400",children:["Mto : ",r," "]}),o&&S.jsx("p",{className:"text-sm font-medium text-red-500",children:o}),!r&&!o&&S.jsx("p",{className:"text-sm font-medium text-gray-400 animate-pulse",children:"Rcupration de la mto..."})]}),S.jsx("form",{onSubmit:f,children:S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"occasion",className:"block text-sm font-medium text-center text-gray-500 dark:text-gray-400 mb-3",children:"Pour quelle occasion ?"}),S.jsx("div",{className:"flex justify-center gap-2 mb-4",children:d.map(p=>S.jsx("button",{type:"button",onClick:()=>c(p),className:`px-4 py-1.5 rounded-full text-sm font-semibold transition-colors duration-200 ${l===p?"bg-gold text-onyx":"bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 hover:border-gold dark:hover:border-gold text-gray-700 dark:text-gray-300"}`,disabled:i,children:p},p))}),S.jsx("input",{id:"occasion",type:"text",value:l,onChange:p=>c(p.target.value),placeholder:"Ou dcrivez... (ex: Brunch dcontract)",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i})]}),S.jsxs("button",{type:"submit",disabled:i,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[S.jsx(IT,{}),i?"Gnration...":"Gnrer des Tenues"]})]})})]})},pJ=({outfits:t,allClothingItems:e,allClothingSets:n,favoriteOutfits:i,onToggleFavorite:r,onGenerateVisual:o,generatingVisualFor:l})=>{const[c,f]=q.useState(null);q.useEffect(()=>{if(!c)return;const p=v=>{v.key==="Escape"&&f(null)};return window.addEventListener("keydown",p),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",p),document.body.style.overflow="auto"}},[c]);const d=p=>{const{id:v,description:T}=p,w=v?v.trim():"",x=T?T.trim().toLowerCase():"";let N=e.find(O=>O.id===w);if(N)return N;let P=n.find(O=>O.id===w);if(P)return P;if(w&&(N=e.find(O=>O.analysis.toLowerCase().includes(w.toLowerCase())),N)||x&&(N=e.find(O=>{const k=O.analysis.toLowerCase();return k.includes(x)||x.includes(k)}),N))return N};return S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"mt-10 space-y-8",children:t.map((p,v)=>{const T=i.some(x=>x.titre===p.titre&&x.description===p.description),w=l===p.titre;return S.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5 transition-all duration-300 hover:shadow-lg hover:border-gold/50",children:[S.jsxs("div",{className:"flex justify-between items-start",children:[S.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:p.titre}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("button",{onClick:()=>o(p),disabled:w,className:"p-1.5 text-gray-400 hover:text-gold dark:hover:text-gold transition-colors disabled:cursor-not-allowed","aria-label":"Gnrer un rendu visuel",title:"Gnrer un rendu visuel",children:w?S.jsx(RD,{className:"h-5 w-5"}):S.jsx(M7,{})}),S.jsx("button",{onClick:()=>r(p),className:"p-1.5 text-gray-400 hover:text-gold dark:hover:text-gold transition-colors","aria-label":T?"Retirer des favoris":"Ajouter aux favoris",children:T?S.jsx(Vf,{className:"w-6 h-6 text-gold"}):S.jsx(PT,{className:"w-6 h-6"})})]})]}),S.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:p.description}),S.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:p.vetements.map((x,N)=>{const P=d(x),O=P?P.imageSrc:null;return S.jsx("button",{onClick:()=>O&&f(O),className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden transition-transform duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx disabled:cursor-default disabled:hover:scale-100 relative group",disabled:!O,"aria-label":`Agrandir l'image de : ${x.description}`,title:x.description,children:O?S.jsx("img",{src:O,alt:x.description,className:"w-full h-full object-cover"}):S.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:S.jsx(ND,{})})},N)})}),S.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:p.vetements.map((x,N)=>S.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:x.description},N))})]},v)})}),c&&S.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:()=>f(null),role:"dialog","aria-modal":"true",children:S.jsxs("div",{className:"relative",onClick:p=>p.stopPropagation(),children:[S.jsx("img",{src:c,alt:"Vue agrandie",className:"max-w-[90vw] max-h-[85vh] object-contain rounded-lg shadow-2xl"}),S.jsx("button",{onClick:()=>f(null),className:"absolute -top-3 -right-3 p-1.5 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white hover:bg-red-500 hover:scale-110 transition-all focus:outline-none focus:ring-2 focus:ring-gold","aria-label":"Fermer",children:S.jsx(RT,{})})]})})]})},cm=q.memo(pJ),mJ=({item:t,clothingSets:e,onClose:n,onUpdate:i,onGenerateFrom:r,onRemoveSet:o,onDelete:l})=>{const[c,f]=q.useState({analysis:t.analysis,category:t.category,color:t.color,material:t.material}),[d,p]=q.useState(!1),v=e.find(P=>P.itemIds.includes(t.id));q.useEffect(()=>{f({analysis:t.analysis,category:t.category,color:t.color,material:t.material})},[t]),q.useEffect(()=>{const P=F=>{F.key==="Escape"&&n()};document.body.style.overflow="hidden",window.addEventListener("keydown",P);const O=document.querySelector('[role="dialog"]'),k=O==null?void 0:O.querySelector("button, input, textarea, select");return k==null||k.focus(),()=>{document.body.style.overflow="auto",window.removeEventListener("keydown",P)}},[n]);const T=P=>{const{name:O,value:k}=P.target;f(F=>({...F,[O]:k}))},w=P=>{P.preventDefault(),i({...t,...c}),p(!0),setTimeout(()=>{p(!1)},2e3)},x=()=>{window.confirm("tes-vous sr de vouloir supprimer cet article ? Cette action est irrversible.")&&(l(t.id),n())},N=P=>{P.stopPropagation(),i({...t,isFavorite:!t.isFavorite})};return S.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:n,role:"dialog","aria-modal":"true","aria-labelledby":"clothing-item-title",children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col overflow-hidden",onClick:P=>P.stopPropagation(),children:[S.jsxs("div",{className:"relative",children:[S.jsx("img",{src:t.imageSrc,alt:t.analysis,className:"w-full h-auto max-h-[50vh] object-cover"}),S.jsx("button",{onClick:N,className:"absolute top-3 left-3 p-1.5 bg-black/40 backdrop-blur-sm rounded-full text-white hover:bg-black/60 transition-colors","aria-label":"Ajouter aux favoris",children:t.isFavorite?S.jsx(Vf,{className:"w-6 h-6 text-red-500"}):S.jsx(PT,{className:"w-6 h-6"})}),S.jsx("button",{onClick:n,className:"absolute top-3 right-3 p-1.5 bg-black/40 backdrop-blur-sm rounded-full text-white hover:bg-black/60 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-raisin-black","aria-label":"Fermer la vue dtaille",children:S.jsx(RT,{})})]}),S.jsxs("form",{onSubmit:w,className:"p-6 overflow-y-auto flex-grow flex flex-col",children:[S.jsxs("div",{className:"space-y-4 flex-grow",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"analysis",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Description"}),S.jsx("textarea",{id:"analysis",name:"analysis",value:c.analysis,onChange:T,rows:3,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Catgorie"}),S.jsx("select",{id:"category",name:"category",value:c.category,onChange:T,className:"mt-1 w-full appearance-none px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow",children:["Hauts","Bas","Chaussures","Accessoires"].map(P=>S.jsx("option",{value:P,children:P},P))})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Couleur"}),S.jsx("input",{type:"text",id:"color",name:"color",value:c.color,onChange:T,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"material",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Matire"}),S.jsx("input",{type:"text",id:"material",name:"material",value:c.material,onChange:T,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]})]}),v&&S.jsxs("div",{className:"bg-gold/10 dark:bg-gold/20 p-3 rounded-lg flex items-center justify-between gap-4",children:[S.jsxs("div",{children:[S.jsx("p",{className:"text-xs font-semibold text-gold uppercase tracking-wider",children:"Fait partie de l'ensemble"}),S.jsx("p",{className:"font-medium text-onyx dark:text-snow truncate",title:v.name,children:v.name})]}),S.jsxs("button",{type:"button",onClick:()=>{o(v.id),n()},className:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white dark:bg-onyx text-rose-500 border border-rose-500/50 rounded-md hover:bg-rose-500 hover:text-white transition-colors",title:"Dissocier l'ensemble",children:[S.jsx(P7,{}),S.jsx("span",{children:"Dissocier"})]})]})]}),S.jsxs("div",{className:"mt-6 pt-4 border-t border-black/10 dark:border-white/10 flex flex-col sm:flex-row gap-3 justify-between",children:[S.jsxs("button",{type:"button",onClick:x,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2.5 bg-red-500/10 text-red-500 font-bold rounded-lg hover:bg-red-500/20 transition-all duration-300",children:[S.jsx(Qm,{}),"Supprimer"]}),S.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[S.jsxs("button",{type:"button",onClick:()=>r(t),className:"w-full sm:w-auto flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300",children:[S.jsx(IT,{}),"Crer une tenue"]}),S.jsx("button",{type:"submit",disabled:d,className:`w-full sm:w-auto px-6 py-2.5 font-bold rounded-lg transition-all duration-300 flex items-center justify-center gap-2 ${d?"bg-green-600 text-white cursor-not-allowed":"bg-gold text-onyx hover:bg-gold-dark"}`,children:d?S.jsxs(S.Fragment,{children:[S.jsx(NT,{}),"Enregistr !"]}):"Enregistrer"})]})]})]})]})})},uk=({clothingItems:t,clothingSets:e,onGeneratePlan:n,isGenerating:i})=>{const[r,o]=q.useState(3),[l,c]=q.useState(""),[f,d]=q.useState(""),p=v=>{v.preventDefault();const T=l||"",w=f?parseFloat(f):void 0;T.trim()&&r>0&&n(r,T,w)};return S.jsxs("form",{onSubmit:p,className:"space-y-6",children:[S.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 items-end",children:[S.jsxs("div",{className:"sm:col-span-1",children:[S.jsx("label",{htmlFor:"days",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Dure (jours)"}),S.jsx("input",{id:"days",type:"number",value:r,onChange:v=>o(parseInt(v.target.value,10)||1),min:"1",max:"30",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i,required:!0})]}),S.jsxs("div",{className:"sm:col-span-1",children:[S.jsx("label",{htmlFor:"weight",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Poids max (kg)"}),S.jsxs("div",{className:"relative",children:[S.jsx("input",{id:"weight",type:"number",value:f,onChange:v=>d(v.target.value),placeholder:"Optionnel",min:"1",max:"50",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i}),S.jsx("span",{className:"absolute right-3 top-3.5 text-gray-400 text-sm",children:"kg"})]})]}),S.jsxs("div",{className:"sm:col-span-2",children:[S.jsx("label",{htmlFor:"vacation-context",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Destination / Mto"}),S.jsx("input",{id:"vacation-context",type:"text",value:l,onChange:v=>c(v.target.value),placeholder:"Ex: Weekend  Rome, temps doux",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center sm:text-left",disabled:i,required:!0})]})]}),S.jsxs("button",{type:"submit",disabled:i||!(l||"").trim()||r<=0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[S.jsx(D7,{}),i?"Analyse du poids...":"Gnrer la valise"]})]})},ck=({plan:t,allClothingItems:e,allClothingSets:n})=>{const i=r=>{const{id:o,description:l}=r;let c=e.find(d=>d.id===o);if(c)return c;let f=n.find(d=>d.id===o);if(f)return f;if(c=e.find(d=>d.analysis===o),c||(c=e.find(d=>d.analysis===l),c))return c};return S.jsx("div",{className:"mt-10",children:S.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5",children:[S.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:t.titre}),S.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:t.resume}),S.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:t.valise.map((r,o)=>{const l=i(r),c=l?l.imageSrc:null;return S.jsxs("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden relative group",title:r.description,children:[c?S.jsx("img",{src:c,alt:r.description,className:"w-full h-full object-cover"}):S.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:S.jsx(ND,{})}),S.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center p-2",children:S.jsx("p",{className:"text-white text-xs text-center line-clamp-3",children:r.description})})]},o)})}),S.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:t.valise.map((r,o)=>S.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:r.description},o))})]})})},gJ=({onFilesSelected:t,isAnalyzing:e,isOtherModalOpen:n})=>{const[i,r]=q.useState(!1),o=l=>{const c=Array.from(l.target.files||[]);c.length>0&&(t(c),r(!1))};return S.jsxs(S.Fragment,{children:[!n&&S.jsx("button",{onClick:()=>r(!0),disabled:e,className:"md:hidden fixed bottom-24 right-6 w-16 h-16 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-full shadow-2xl hover:shadow-gold/50 transition-all duration-300 flex items-center justify-center z-40 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95","aria-label":"Ajouter un vtement",children:e?S.jsxs("svg",{className:"animate-spin h-8 w-8",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):S.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})}),i&&S.jsx("div",{className:"md:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end",onClick:()=>r(!1),children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black w-full rounded-t-3xl p-6 pb-8 animate-slide-up",onClick:l=>l.stopPropagation(),children:[S.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mb-6"}),S.jsx("h3",{className:"text-xl font-bold mb-6 text-center",children:"Ajouter un vtement"}),S.jsxs("div",{className:"space-y-3",children:[S.jsxs("label",{className:"block",children:[S.jsx("input",{type:"file",accept:"image/*",capture:"environment",multiple:!0,onChange:o,className:"hidden"}),S.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gradient-to-r from-gold/10 to-gold-dark/10 hover:from-gold/20 hover:to-gold-dark/20 border-2 border-gold/30 rounded-xl transition-all cursor-pointer active:scale-98",children:[S.jsx("div",{className:"w-12 h-12 bg-gold rounded-full flex items-center justify-center flex-shrink-0",children:S.jsxs("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),S.jsxs("div",{className:"flex-1",children:[S.jsx("p",{className:"font-semibold",children:"Appareil Photo"}),S.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Prendre une photo"})]})]})]}),S.jsxs("label",{className:"block",children:[S.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:o,className:"hidden"}),S.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 rounded-xl transition-all cursor-pointer active:scale-98",children:[S.jsx("div",{className:"w-12 h-12 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center flex-shrink-0",children:S.jsx("svg",{className:"w-6 h-6 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),S.jsxs("div",{className:"flex-1",children:[S.jsx("p",{className:"font-semibold",children:"Galerie"}),S.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Choisir depuis vos photos"})]})]})]})]}),S.jsx("button",{onClick:()=>r(!1),className:"w-full mt-4 py-3 text-gray-500 dark:text-gray-400 font-medium",children:"Annuler"})]})})]})},yJ=({onAnalyzeWardrobe:t,onScrollToOutfits:e,onScrollToVacation:n,onStartSetCreation:i,onShowFavorites:r,isAnalyzingWardrobe:o,clothingCount:l,favoriteOutfitCount:c})=>S.jsxs("div",{className:"space-y-4 pb-24",children:[S.jsxs("div",{className:"text-center py-6",children:[S.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:[S.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),S.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[l," vtement",l>1?"s":""," dans votre collection"]})]}),S.jsxs("div",{className:"space-y-3 px-4",children:[l>=3&&S.jsx("button",{onClick:t,disabled:o,className:"w-full bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-2xl p-5 text-left transition-all active:scale-98 disabled:opacity-50",children:S.jsxs("div",{className:"flex items-start gap-4",children:[S.jsx("div",{className:"w-12 h-12 bg-gold rounded-xl flex items-center justify-center flex-shrink-0",children:o?S.jsxs("svg",{className:"animate-spin h-6 w-6 text-onyx",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):S.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),S.jsxs("div",{className:"flex-1",children:[S.jsx("h3",{className:"text-lg font-bold mb-1",children:" Analyser ma garde-robe"}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour plus de polyvalence"})]})]})}),S.jsx("button",{onClick:e,className:"w-full bg-gradient-to-r from-purple-500/10 to-pink-500/10 border-2 border-purple-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:S.jsxs("div",{className:"flex items-start gap-4",children:[S.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center flex-shrink-0",children:S.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),S.jsxs("div",{className:"flex-1",children:[S.jsx("h3",{className:"text-lg font-bold mb-1",children:" Crateur de Tenues"}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Gnrez des looks personnaliss avec l'IA"})]})]})}),S.jsx("button",{onClick:n,className:"w-full bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border-2 border-blue-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:S.jsxs("div",{className:"flex items-start gap-4",children:[S.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center flex-shrink-0",children:S.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),S.jsxs("div",{className:"flex-1",children:[S.jsx("h3",{className:"text-lg font-bold mb-1",children:" Planificateur de Valise"}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Prparez votre valise optimale pour votre voyage"})]})]})})]}),S.jsx("div",{className:"px-4 pt-6",children:S.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-2xl p-4",children:[S.jsx("h4",{className:"font-semibold mb-3 text-sm text-gray-600 dark:text-gray-400",children:"Aperu rapide"}),S.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center",children:[S.jsx("p",{className:"text-2xl font-bold text-gold",children:l}),S.jsx("p",{className:"text-xs text-gray-500",children:"Vtements"})]}),S.jsxs("button",{onClick:i,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[S.jsx("div",{className:"text-green-500",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),S.jsx("p",{className:"text-xs text-gray-500 mt-1.5 font-medium",children:"Crer un ensemble"})]}),S.jsxs("button",{onClick:r,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[S.jsxs("div",{className:"text-red-500",children:[S.jsx(PT,{})," "]}),S.jsx("p",{className:"text-2xl font-bold",children:c}),S.jsx("p",{className:"text-xs text-gray-500 mt-0.5 font-medium",children:"Favorites"})]})]})]})})]}),vJ=({activeTab:t,onTabChange:e,counts:n})=>{const i=[{id:"home",label:"Home",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),count:null},{id:"hauts",label:"Hauts",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),count:n.hauts},{id:"bas",label:"Bas",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),count:n.bas},{id:"chaussures",label:"Chaussures",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5"})}),count:n.chaussures},{id:"accessoires",label:"Accessoires",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),count:n.accessoires}];return S.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-raisin-black border-t border-black/10 dark:border-white/10 z-30 pb-8",children:S.jsx("div",{className:"flex justify-around items-center h-16",children:i.map(r=>{const o=t===r.id;return S.jsxs("button",{onClick:()=>e(r.id),className:`flex flex-col items-center justify-center gap-1 px-3 py-2 transition-all flex-1 ${o?"text-gold":"text-gray-500 dark:text-gray-400"}`,children:[S.jsxs("div",{className:"relative",children:[r.icon,r.count!==null&&r.count>0&&S.jsx("span",{className:`absolute -top-1 -right-1 text-[10px] font-bold px-1.5 py-0.5 rounded-full ${o?"bg-gold text-onyx":"bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300"}`,children:r.count})]}),S.jsx("span",{className:`text-xs font-medium ${o?"font-bold":""}`,children:r.label})]},r.id)})})})},_J=({analysis:t,onClose:e})=>{if(!t)return null;const n={high:"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20",medium:"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 border-yellow-500/20",low:"bg-green-500/10 text-green-600 dark:text-green-400 border-green-500/20"},i={high:"Priorit haute",medium:"Priorit moyenne",low:"Bonne ide"};return S.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[S.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-gold to-gold-dark p-6 rounded-t-2xl",children:S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsx("h2",{className:"text-2xl font-serif font-bold text-onyx",children:" Suggestions d'Achats"}),S.jsx("button",{onClick:e,className:"p-2 hover:bg-black/10 rounded-full transition",children:S.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),S.jsxs("div",{className:"p-6 space-y-6",children:[S.jsxs("div",{className:"bg-gold/5 border border-gold/20 rounded-xl p-4",children:[S.jsx("h3",{className:"font-semibold text-lg mb-2",children:" Analyse de votre garde-robe"}),S.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:t.summary})]}),S.jsxs("div",{children:[S.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[S.jsx("span",{className:"text-green-500",children:""})," Points forts"]}),S.jsx("div",{className:"grid gap-2",children:t.strengths.map((r,o)=>S.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[S.jsx("span",{className:"text-green-500 mt-0.5",children:""}),S.jsx("span",{children:r})]},o))})]}),S.jsxs("div",{children:[S.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[S.jsx("span",{className:"text-orange-500",children:""})," Opportunits d'amlioration"]}),S.jsx("div",{className:"grid gap-2",children:t.gaps.map((r,o)=>S.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[S.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),S.jsx("span",{children:r})]},o))})]}),S.jsxs("div",{children:[S.jsxs("h3",{className:"font-semibold text-xl mb-4 flex items-center gap-2",children:[S.jsx("span",{children:""})," Pices recommandes"]}),S.jsx("div",{className:"grid gap-4",children:t.suggestions.map((r,o)=>S.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-xl p-5 hover:shadow-lg transition-shadow",children:[S.jsxs("div",{className:"flex justify-between items-start mb-3",children:[S.jsxs("div",{children:[S.jsx("h4",{className:"font-bold text-lg",children:r.description}),S.jsx("p",{className:"text-sm text-gray-500",children:r.category})]}),S.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${n[r.priority]}`,children:i[r.priority]})]}),S.jsxs("p",{className:"text-sm mb-3 text-gray-700 dark:text-gray-300",children:[S.jsx("span",{className:"font-semibold",children:"Pourquoi ?"})," ",r.reason]}),r.estimatedPrice&&S.jsxs("div",{className:"flex items-center gap-2 text-sm text-gold font-semibold",children:[S.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.estimatedPrice]})]},o))})]})]})]})})};var TJ=EJ()?q.useLayoutEffect:q.useEffect;function EJ(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function SJ(){var t=q.useState(Object.create(null)),e=t[1];return q.useCallback(function(){e(Object.create(null))},[])}var wJ=p1(),AJ=function(e){var n=e.children,i=e.type,r=i===void 0?"reach-portal":i,o=q.useRef(null),l=q.useRef(null),c=SJ();return TJ(function(){if(o.current){var f=o.current.ownerDocument;return l.current=f==null?void 0:f.createElement(r),f.body.appendChild(l.current),c(),function(){l.current&&l.current.ownerDocument&&l.current.ownerDocument.body.removeChild(l.current)}}},[r,c]),l.current?wJ.createPortal(n,l.current):q.createElement("span",{ref:o})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ye=function(){return ye=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ye.apply(this,arguments)};function dE(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function ut(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function mt(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,o=[],l;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(c){l={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return o}function qt(t,e,n){if(arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))}var Pt;(function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"})(Pt||(Pt={}));var Au;(function(t){t.Parent="#_parent",t.Internal="#_internal"})(Au||(Au={}));var X0=Pt.Start,hE=Pt.Stop,ud=Pt.Raise,og=Pt.Send,fk=Pt.Cancel,bJ=Pt.NullEvent,pE=Pt.Assign;Pt.After;Pt.DoneState;var dk=Pt.Log,CJ=Pt.Init,Q0=Pt.Invoke;Pt.ErrorExecution;var bR=Pt.ErrorPlatform,xJ=Pt.ErrorCustom,hk=Pt.Update,IJ=Pt.Choose,RJ=Pt.Pure,pk=".",CR={},Z0="xstate.guard",NJ="",jh;function mE(t,e,n){n===void 0&&(n=pk);var i=gf(t,n),r=gf(e,n);return St(r)?St(i)?r===i:!1:St(i)?i in r:Object.keys(i).every(function(o){return o in r?mE(i[o],r[o]):!1})}function mk(t){try{return St(t)||typeof t=="number"?"".concat(t):t.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function e_(t,e){try{return Fu(t)?t:t.toString().split(e)}catch{throw new Error("'".concat(t,"' is not a valid state path."))}}function PJ(t){return typeof t=="object"&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function gf(t,e){if(PJ(t))return t.value;if(Fu(t))return fm(t);if(typeof t!="string")return t;var n=e_(t,e);return fm(n)}function fm(t){if(t.length===1)return t[0];for(var e={},n=e,i=0;i<t.length-1;i++)i===t.length-2?n[t[i]]=t[i+1]:(n[t[i]]={},n=n[t[i]]);return e}function Zc(t,e){for(var n={},i=Object.keys(t),r=0;r<i.length;r++){var o=i[r];n[o]=e(t[o],o,t,r)}return n}function xR(t,e,n){var i,r,o={};try{for(var l=ut(Object.keys(t)),c=l.next();!c.done;c=l.next()){var f=c.value,d=t[f];n(d)&&(o[f]=e(d,f,t))}}catch(p){i={error:p}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}return o}var DJ=function(t){return function(e){var n,i,r=e;try{for(var o=ut(t),l=o.next();!l.done;l=o.next()){var c=l.value;r=r[c]}}catch(f){n={error:f}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return r}};function MJ(t,e){return function(n){var i,r,o=n;try{for(var l=ut(t),c=l.next();!c.done;c=l.next()){var f=c.value;o=o[e][f]}}catch(d){i={error:d}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}return o}}function wp(t){if(!t)return[[]];if(St(t))return[[t]];var e=Jt(Object.keys(t).map(function(n){var i=t[n];return typeof i!="string"&&(!i||!Object.keys(i).length)?[[n]]:wp(t[n]).map(function(r){return[n].concat(r)})}));return e}function Jt(t){var e;return(e=[]).concat.apply(e,qt([],mt(t),!1))}function gk(t){return Fu(t)?t:[t]}function Pr(t){return t===void 0?[]:gk(t)}function dm(t,e,n){var i,r;if(_t(t))return t(e,n.data);var o={};try{for(var l=ut(Object.keys(t)),c=l.next();!c.done;c=l.next()){var f=c.value,d=t[f];_t(d)?o[f]=d(e,n.data):o[f]=d}}catch(p){i={error:p}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}return o}function kJ(t){return/^(done|error)\./.test(t)}function IR(t){return!!(t instanceof Promise||t!==null&&(_t(t)||typeof t=="object")&&_t(t.then))}function VJ(t){return t!==null&&typeof t=="object"&&"transition"in t&&typeof t.transition=="function"}function LJ(t,e){var n,i,r=mt([[],[]],2),o=r[0],l=r[1];try{for(var c=ut(t),f=c.next();!f.done;f=c.next()){var d=f.value;e(d)?o.push(d):l.push(d)}}catch(p){n={error:p}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return[o,l]}function yk(t,e){return Zc(t.states,function(n,i){if(n){var r=(St(e)?void 0:e[i])||(n?n.current:void 0);if(r)return{current:r,states:yk(n,r)}}})}function OJ(t,e){return{current:e,states:yk(t,e)}}function RR(t,e,n,i){var r=t&&n.reduce(function(o,l){var c,f,d=l.assignment,p={state:i,action:l,_event:e},v={};if(_t(d))v=d(o,e.data,p);else try{for(var T=ut(Object.keys(d)),w=T.next();!w.done;w=T.next()){var x=w.value,N=d[x];v[x]=_t(N)?N(o,e.data,p):N}}catch(P){c={error:P}}finally{try{w&&!w.done&&(f=T.return)&&f.call(T)}finally{if(c)throw c.error}}return Object.assign({},o,v)},t);return r}var UJ=function(){};function Fu(t){return Array.isArray(t)}function _t(t){return typeof t=="function"}function St(t){return typeof t=="string"}function vk(t,e){if(t)return St(t)?{type:Z0,name:t,predicate:e?e[t]:void 0}:_t(t)?{type:Z0,name:t.name,predicate:t}:t}function FJ(t){try{return"subscribe"in t&&_t(t.subscribe)}catch{return!1}}var Po=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();jh={},jh[Po]=function(){return this},jh[Symbol.observable]=function(){return this};function bu(t){return!!t&&"__xstatenode"in t}function BJ(t){return!!t&&typeof t.send=="function"}function ag(t,e){return St(t)||typeof t=="number"?ye({type:t},e):t}function Gn(t,e){if(!St(t)&&"$$type"in t&&t.$$type==="scxml")return t;var n=ag(t);return ye({name:n.type,data:n,$$type:"scxml",type:"external"},e)}function Bl(t,e){var n=gk(e).map(function(i){return typeof i>"u"||typeof i=="string"||bu(i)?{target:i,event:t}:ye(ye({},i),{event:t})});return n}function qJ(t){if(!(t===void 0||t===NJ))return Pr(t)}function _k(t,e,n,i,r){var o=t.options.guards,l={state:r,cond:e,_event:i};if(e.type===Z0)return((o==null?void 0:o[e.name])||e.predicate)(n,i.data,l);var c=o==null?void 0:o[e.type];if(!c)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return c(n,i.data,l)}function Tk(t){return typeof t=="string"?{type:t}:t}function Ap(t,e,n){var i=function(){},r=typeof t=="object",o=r?t:null;return{next:((r?t.next:t)||i).bind(o),error:((r?t.error:e)||i).bind(o),complete:((r?t.complete:n)||i).bind(o)}}function $h(t,e){return"".concat(t,":invocation[").concat(e,"]")}function t_(t){return(t.type===ud||t.type===og&&t.to===Au.Internal)&&typeof t.delay!="number"}var fu=Gn({type:CJ});function n_(t,e){return e&&e[t]||void 0}function qf(t,e){var n;if(St(t)||typeof t=="number"){var i=n_(t,e);_t(i)?n={type:t,exec:i}:i?n=i:n={type:t,exec:void 0}}else if(_t(t))n={type:t.name||t.toString(),exec:t};else{var i=n_(t.type,e);if(_t(i))n=ye(ye({},t),{exec:i});else if(i){var r=i.type||t.type;n=ye(ye(ye({},i),t),{type:r})}else n=t}return n}var Do=function(t,e){if(!t)return[];var n=Fu(t)?t:[t];return n.map(function(i){return qf(i,e)})};function gE(t){var e=qf(t);return ye(ye({id:St(t)?t:e.id},e),{type:e.type})}function zJ(t,e){return{type:ud,event:typeof t=="function"?t:ag(t),delay:e?e.delay:void 0,id:e==null?void 0:e.id}}function HJ(t,e,n,i){var r={_event:n},o=Gn(_t(t.event)?t.event(e,n.data,r):t.event),l;if(St(t.delay)){var c=i&&i[t.delay];l=_t(c)?c(e,n.data,r):c}else l=_t(t.delay)?t.delay(e,n.data,r):t.delay;return ye(ye({},t),{type:ud,_event:o,delay:l})}function GJ(t,e){return{to:e?e.to:void 0,type:og,event:_t(t)?t:ag(t),delay:e?e.delay:void 0,id:e&&e.id!==void 0?e.id:_t(t)?t.name:mk(t)}}function jJ(t,e,n,i){var r={_event:n},o=Gn(_t(t.event)?t.event(e,n.data,r):t.event),l;if(St(t.delay)){var c=i&&i[t.delay];l=_t(c)?c(e,n.data,r):c}else l=_t(t.delay)?t.delay(e,n.data,r):t.delay;var f=_t(t.to)?t.to(e,n.data,r):t.to;return ye(ye({},t),{to:f,_event:o,event:o.data,delay:l})}var $J=function(t,e,n){return ye(ye({},t),{value:St(t.expr)?t.expr:t.expr(e,n.data,{_event:n})})},KJ=function(t){return{type:fk,sendId:t}};function YJ(t){var e=gE(t);return{type:Pt.Start,activity:e,exec:void 0}}function JJ(t){var e=_t(t)?t:gE(t);return{type:Pt.Stop,activity:e,exec:void 0}}function WJ(t,e,n){var i=_t(t.activity)?t.activity(e,n.data):t.activity,r=typeof i=="string"?{id:i}:i,o={type:Pt.Stop,activity:r};return o}var XJ=function(t){return{type:pE,assignment:t}};function QJ(t,e){var n=e?"#".concat(e):"";return"".concat(Pt.After,"(").concat(t,")").concat(n)}function Kh(t,e){var n="".concat(Pt.DoneState,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}function bp(t,e){var n="".concat(Pt.DoneInvoke,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}function ef(t,e){var n="".concat(Pt.ErrorPlatform,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}var ZJ=function(t){var e,n,i=[];try{for(var r=ut(t),o=r.next();!o.done;o=r.next())for(var l=o.value,c=0;c<l.actions.length;){if(l.actions[c].type===pE){i.push(l.actions[c]),l.actions.splice(c,1);continue}c++}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i};function hm(t,e,n,i,r,o,l){l===void 0&&(l=!1);var c=l?[]:ZJ(r),f=c.length?RR(n,i,c,e):n,d=l?[n]:void 0,p=[];function v(x,N){var P;switch(N.type){case ud:{var O=HJ(N,f,i,t.options.delays);return o&&typeof O.delay=="number"&&o(O,f,i),O}case og:var k=jJ(N,f,i,t.options.delays);return o&&k.to!==Au.Internal&&(x==="entry"?p.push(k):o(k,f,i)),k;case dk:{var F=$J(N,f,i);return o==null||o(F,f,i),F}case IJ:{var G=N,K=(P=G.conds.find(function(ee){var oe=vk(ee.cond,t.options.guards);return!oe||_k(t,oe,f,i,o?void 0:e)}))===null||P===void 0?void 0:P.actions;if(!K)return[];var H=mt(hm(t,e,f,i,[{type:x,actions:Do(Pr(K),t.options.actions)}],o,l),2),R=H[0],I=H[1];return f=I,d==null||d.push(f),R}case RJ:{var K=N.get(f,i.data);if(!K)return[];var D=mt(hm(t,e,f,i,[{type:x,actions:Do(Pr(K),t.options.actions)}],o,l),2),V=D[0],U=D[1];return f=U,d==null||d.push(f),V}case hE:{var F=WJ(N,f,i);return o==null||o(F,n,i),F}case pE:{f=RR(f,i,[N],o?void 0:e),d==null||d.push(f);break}default:var z=qf(N,t.options.actions),B=z.exec;if(o)o(z,f,i);else if(B&&d){var Re=d.length-1,Ue=ye(ye({},z),{exec:function(ee){for(var oe=[],me=1;me<arguments.length;me++)oe[me-1]=arguments[me];B.apply(void 0,qt([d[Re]],mt(oe),!1))}});z=Ue}return z}}function T(x){var N,P,O=[];try{for(var k=ut(x.actions),F=k.next();!F.done;F=k.next()){var G=F.value,K=v(x.type,G);K&&(O=O.concat(K))}}catch(H){N={error:H}}finally{try{F&&!F.done&&(P=k.return)&&P.call(k)}finally{if(N)throw N.error}}return p.forEach(function(H){o(H,f,i)}),p.length=0,O}var w=Jt(r.map(T));return[w,f]}var Jl=function(t,e){var n=e(t);return n};function Ek(t){var e;return e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}},e[Po]=function(){return this},e}function eW(t,e,n,i){var r,o=Tk(t.src),l=(r=e==null?void 0:e.options.services)===null||r===void 0?void 0:r[o.type],c=t.data?dm(t.data,n,i):void 0,f=l?Sk(l,t.id,c):Ek(t.id);return f.meta=t,f}function Sk(t,e,n){var i=Ek(e);if(i.deferred=!0,bu(t)){var r=i.state=Jl(void 0,function(){return(n?t.withContext(n):t).initialState});i.getSnapshot=function(){return r}}return i}function tW(t){try{return typeof t.send=="function"}catch{return!1}}function nW(t){return tW(t)&&"id"in t}function iW(t){var e;return ye((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e[Po]=function(){return this},e),t)}var pm=function(t){return t.type==="atomic"||t.type==="final"};function wk(t){return Object.keys(t.states).map(function(e){return t.states[e]})}function zf(t){return wk(t).filter(function(e){return e.type!=="history"})}function Ak(t){var e=[t];return pm(t)?e:e.concat(Jt(zf(t).map(Ak)))}function tf(t,e){var n,i,r,o,l,c,f,d,p=new Set(t),v=i_(p),T=new Set(e);try{for(var w=ut(T),x=w.next();!x.done;x=w.next())for(var N=x.value,P=N.parent;P&&!T.has(P);)T.add(P),P=P.parent}catch(D){n={error:D}}finally{try{x&&!x.done&&(i=w.return)&&i.call(w)}finally{if(n)throw n.error}}var O=i_(T);try{for(var k=ut(T),F=k.next();!F.done;F=k.next()){var N=F.value;if(N.type==="compound"&&(!O.get(N)||!O.get(N).length))v.get(N)?v.get(N).forEach(function(V){return T.add(V)}):N.initialStateNodes.forEach(function(V){return T.add(V)});else if(N.type==="parallel")try{for(var G=(l=void 0,ut(zf(N))),K=G.next();!K.done;K=G.next()){var H=K.value;T.has(H)||(T.add(H),v.get(H)?v.get(H).forEach(function(V){return T.add(V)}):H.initialStateNodes.forEach(function(V){return T.add(V)}))}}catch(V){l={error:V}}finally{try{K&&!K.done&&(c=G.return)&&c.call(G)}finally{if(l)throw l.error}}}}catch(D){r={error:D}}finally{try{F&&!F.done&&(o=k.return)&&o.call(k)}finally{if(r)throw r.error}}try{for(var R=ut(T),I=R.next();!I.done;I=R.next())for(var N=I.value,P=N.parent;P&&!T.has(P);)T.add(P),P=P.parent}catch(D){f={error:D}}finally{try{I&&!I.done&&(d=R.return)&&d.call(R)}finally{if(f)throw f.error}}return T}function bk(t,e){var n=e.get(t);if(!n)return{};if(t.type==="compound"){var i=n[0];if(i){if(pm(i))return i.key}else return{}}var r={};return n.forEach(function(o){r[o.key]=bk(o,e)}),r}function i_(t){var e,n,i=new Map;try{for(var r=ut(t),o=r.next();!o.done;o=r.next()){var l=o.value;i.has(l)||i.set(l,[]),l.parent&&(i.has(l.parent)||i.set(l.parent,[]),i.get(l.parent).push(l))}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i}function rW(t,e){var n=tf([t],e);return bk(t,i_(n))}function nf(t,e){return Array.isArray(t)?t.some(function(n){return n===e}):t instanceof Set?t.has(e):!1}function sW(t){return qt([],mt(new Set(Jt(qt([],mt(t.map(function(e){return e.ownEvents})),!1)))),!1)}function Cp(t,e){return e.type==="compound"?zf(e).some(function(n){return n.type==="final"&&nf(t,n)}):e.type==="parallel"?zf(e).every(function(n){return Cp(t,n)}):!1}function oW(t){return t===void 0&&(t=[]),t.reduce(function(e,n){return n.meta!==void 0&&(e[n.id]=n.meta),e},{})}function NR(t){return new Set(Jt(t.map(function(e){return e.tags})))}function Ck(t,e){if(t===e)return!0;if(t===void 0||e===void 0)return!1;if(St(t)||St(e))return t===e;var n=Object.keys(t),i=Object.keys(e);return n.length===i.length&&n.every(function(r){return Ck(t[r],e[r])})}function aW(t){return typeof t!="object"||t===null?!1:"value"in t&&"_event"in t}function lW(t,e){var n=t.exec,i=ye(ye({},t),{exec:n!==void 0?function(){return n(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0});return i}var yr=(function(){function t(e){var n=this,i;this.actions=[],this.activities=CR,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||CR,this.meta=oW(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=(i=Array.isArray(e.tags)?new Set(e.tags):e.tags)!==null&&i!==void 0?i:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return sW(n.configuration)}})}return t.from=function(e,n){if(e instanceof t)return e.context!==n?new t({value:e.value,context:n,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,events:[],configuration:[],transitions:[],children:{}}):e;var i=fu;return new t({value:e,context:n,_event:i,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,n){if(e instanceof t){if(!e.actions.length)return e;var i=fu;return new t({value:e.value,context:n,_event:i,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,n)},t.prototype.toStrings=function(e,n){var i=this;if(e===void 0&&(e=this.value),n===void 0&&(n="."),St(e))return[e];var r=Object.keys(e);return r.concat.apply(r,qt([],mt(r.map(function(o){return i.toStrings(e[o],n).map(function(l){return o+n+l})})),!1))},t.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var n=e.tags;e.machine;var i=dE(e,["configuration","transitions","tags","machine"]);return ye(ye({},i),{tags:Array.from(n)})},t.prototype.matches=function(e){return mE(e,this.value)},t.prototype.hasTag=function(e){return this.tags.has(e)},t.prototype.can=function(e){var n;UJ(!!this.machine);var i=(n=this.machine)===null||n===void 0?void 0:n.getTransitionData(this,e);return!!(i!=null&&i.transitions.length)&&i.transitions.some(function(r){return r.target!==void 0||r.actions.length})},t})(),uW={deferEvents:!1},PR=(function(){function t(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=ye(ye({},uW),e)}return t.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents){this.schedule(e);return}this.process(e)}this.flushEvents()},t.prototype.schedule=function(e){if(!this.initialized||this.processingEvent){this.queue.push(e);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},t.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(n){throw this.clear(),n}finally{this.processingEvent=!1}},t})(),zv=new Map,cW=0,Uc={bookId:function(){return"x:".concat(cW++)},register:function(t,e){return zv.set(t,e),t},get:function(t){return zv.get(t)},free:function(t){zv.delete(t)}};function yE(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function fW(){var t=yE();if(t&&"__xstate__"in t)return t.__xstate__}function dW(t){if(yE()){var e=fW();e&&e.register(t)}}function hW(t,e){e===void 0&&(e={});var n=t.initialState,i=new Set,r=[],o=!1,l=function(){if(!o){for(o=!0;r.length>0;){var d=r.shift();n=t.transition(n,d,f),i.forEach(function(p){return p.next(n)})}o=!1}},c=iW({id:e.id,send:function(d){r.push(d),l()},getSnapshot:function(){return n},subscribe:function(d,p,v){var T=Ap(d,p,v);return i.add(T),T.next(n),{unsubscribe:function(){i.delete(T)}}}}),f={parent:e.parent,self:c,id:e.id||"anonymous",observers:i};return n=t.start?t.start(f):n,c}var pW={sync:!1,autoForward:!1},Ln;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(Ln||(Ln={}));var mW=(function(){function t(e,n){n===void 0&&(n=t.defaultOptions);var i=this;this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=Ln.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(p,v){if(Fu(p))return i.batch(p),i.state;var T=Gn(ag(p,v));if(i.status===Ln.Stopped)return i.state;if(i.status!==Ln.Running&&!i.options.deferEvents)throw new Error('Event "'.concat(T.name,'" was sent to uninitialized service "').concat(i.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(T.data)));return i.scheduler.schedule(function(){i.forward(T);var w=i._nextState(T);i.update(w,T)}),i._state},this.sendTo=function(p,v,T){var w=i.parent&&(v===Au.Parent||i.parent.id===v),x=w?i.parent:St(v)?v===Au.Internal?i:i.children.get(v)||Uc.get(v):BJ(v)?v:void 0;if(!x){if(!w)throw new Error("Unable to send event to child '".concat(v,"' from service '").concat(i.id,"'."));return}if("machine"in x){if(i.status!==Ln.Stopped||i.parent!==x||i.state.done){var N=ye(ye({},p),{name:p.name===xJ?"".concat(ef(i.id)):p.name,origin:i.sessionId});!T&&i.machine.config.predictableActionArguments?i._outgoingQueue.push([x,N]):x.send(N)}}else!T&&i.machine.config.predictableActionArguments?i._outgoingQueue.push([x,p.data]):x.send(p.data)},this._exec=function(p,v,T,w){w===void 0&&(w=i.machine.options.actions);var x=p.exec||n_(p.type,w),N=_t(x)?x:x?x.exec:p.exec;if(N)try{return N(v,T.data,i.machine.config.predictableActionArguments?{action:p,_event:T}:{action:p,state:i.state,_event:T})}catch(Re){throw i.parent&&i.parent.send({type:"xstate.error",data:Re}),Re}switch(p.type){case ud:{var P=p;i.defer(P);break}case og:var O=p;if(typeof O.delay=="number"){i.defer(O);return}else O.to?i.sendTo(O._event,O.to,T===fu):i.send(O._event);break;case fk:i.cancel(p.sendId);break;case X0:{if(i.status!==Ln.Running)return;var k=p.activity;if(!i.machine.config.predictableActionArguments&&!i.state.activities[k.id||k.type])break;if(k.type===Pt.Invoke){var F=Tk(k.src),G=i.machine.options.services?i.machine.options.services[F.type]:void 0,K=k.id,H=k.data,R="autoForward"in k?k.autoForward:!!k.forward;if(!G)return;var I=H?dm(H,v,T):void 0;if(typeof G=="string")return;var D=_t(G)?G(v,T.data,{data:I,src:F,meta:k.meta}):G;if(!D)return;var V=void 0;bu(D)&&(D=I?D.withContext(I):D,V={autoForward:R}),i.spawn(D,K,V)}else i.spawnActivity(k);break}case hE:{i.stopChild(p.activity.id);break}case dk:var U=p,z=U.label,B=U.value;z?i.logger(z,B):i.logger(B);break}};var r=ye(ye({},t.defaultOptions),n),o=r.clock,l=r.logger,c=r.parent,f=r.id,d=f!==void 0?f:e.id;this.id=d,this.logger=l,this.clock=o,this.parent=c,this.options=r,this.scheduler=new PR({deferEvents:this.options.deferEvents}),this.sessionId=Uc.bookId()}return Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:Jl(this,function(){return e._initialState=e.machine.initialState,e._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(e,n){var i,r;try{for(var o=ut(e.actions),l=o.next();!l.done;l=o.next()){var c=l.value;this.exec(c,e,n)}}catch(f){i={error:f}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}},t.prototype.update=function(e,n){var i,r,o,l,c,f,d,p,v=this;if(e._sessionid=this.sessionId,this._state=e,(!this.machine.config.predictableActionArguments||n===fu)&&this.options.execute)this.execute(this.state);else for(var T=void 0;T=this._outgoingQueue.shift();)T[0].send(T[1]);if(this.children.forEach(function(D){v.state.children[D.id]=D}),this.devTools&&this.devTools.send(n.data,e),e.event)try{for(var w=ut(this.eventListeners),x=w.next();!x.done;x=w.next()){var N=x.value;N(e.event)}}catch(D){i={error:D}}finally{try{x&&!x.done&&(r=w.return)&&r.call(w)}finally{if(i)throw i.error}}try{for(var P=ut(this.listeners),O=P.next();!O.done;O=P.next()){var N=O.value;N(e,e.event)}}catch(D){o={error:D}}finally{try{O&&!O.done&&(l=P.return)&&l.call(P)}finally{if(o)throw o.error}}try{for(var k=ut(this.contextListeners),F=k.next();!F.done;F=k.next()){var G=F.value;G(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(D){c={error:D}}finally{try{F&&!F.done&&(f=k.return)&&f.call(k)}finally{if(c)throw c.error}}if(this.state.done){var K=e.configuration.find(function(D){return D.type==="final"&&D.parent===v.machine}),H=K&&K.doneData?dm(K.doneData,e.context,n):void 0;this._doneEvent=bp(this.id,H);try{for(var R=ut(this.doneListeners),I=R.next();!I.done;I=R.next()){var N=I.value;N(this._doneEvent)}}catch(D){d={error:D}}finally{try{I&&!I.done&&(p=R.return)&&p.call(R)}finally{if(d)throw d.error}}this._stop(),this._stopChildren(),Uc.free(this.sessionId)}},t.prototype.onTransition=function(e){return this.listeners.add(e),this.status===Ln.Running&&e(this.state,this.state.event),this},t.prototype.subscribe=function(e,n,i){var r=this,o=Ap(e,n,i);this.listeners.add(o.next),this.status!==Ln.NotStarted&&o.next(this.state);var l=function(){r.doneListeners.delete(l),r.stopListeners.delete(l),o.complete()};return this.status===Ln.Stopped?o.complete():(this.onDone(l),this.onStop(l)),{unsubscribe:function(){r.listeners.delete(o.next),r.doneListeners.delete(l),r.stopListeners.delete(l)}}},t.prototype.onEvent=function(e){return this.eventListeners.add(e),this},t.prototype.onSend=function(e){return this.sendListeners.add(e),this},t.prototype.onChange=function(e){return this.contextListeners.add(e),this},t.prototype.onStop=function(e){return this.stopListeners.add(e),this},t.prototype.onDone=function(e){return this.status===Ln.Stopped&&this._doneEvent?e(this._doneEvent):this.doneListeners.add(e),this},t.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},t.prototype.start=function(e){var n=this;if(this.status===Ln.Running)return this;this.machine._init(),Uc.register(this.sessionId,this),this.initialized=!0,this.status=Ln.Running;var i=e===void 0?this.initialState:Jl(this,function(){return aW(e)?n.machine.resolveState(e):n.machine.resolveState(yr.from(e,n.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){n.update(i,fu)}),this},t.prototype._stopChildren=function(){this.children.forEach(function(e){_t(e.stop)&&e.stop()}),this.children.clear()},t.prototype._stop=function(){var e,n,i,r,o,l,c,f,d,p;try{for(var v=ut(this.listeners),T=v.next();!T.done;T=v.next()){var w=T.value;this.listeners.delete(w)}}catch(R){e={error:R}}finally{try{T&&!T.done&&(n=v.return)&&n.call(v)}finally{if(e)throw e.error}}try{for(var x=ut(this.stopListeners),N=x.next();!N.done;N=x.next()){var w=N.value;w(),this.stopListeners.delete(w)}}catch(R){i={error:R}}finally{try{N&&!N.done&&(r=x.return)&&r.call(x)}finally{if(i)throw i.error}}try{for(var P=ut(this.contextListeners),O=P.next();!O.done;O=P.next()){var w=O.value;this.contextListeners.delete(w)}}catch(R){o={error:R}}finally{try{O&&!O.done&&(l=P.return)&&l.call(P)}finally{if(o)throw o.error}}try{for(var k=ut(this.doneListeners),F=k.next();!F.done;F=k.next()){var w=F.value;this.doneListeners.delete(w)}}catch(R){c={error:R}}finally{try{F&&!F.done&&(f=k.return)&&f.call(k)}finally{if(c)throw c.error}}if(!this.initialized)return this;this.initialized=!1,this.status=Ln.Stopped,this._initialState=void 0;try{for(var G=ut(Object.keys(this.delayedEventsMap)),K=G.next();!K.done;K=G.next()){var H=K.value;this.clock.clearTimeout(this.delayedEventsMap[H])}}catch(R){d={error:R}}finally{try{K&&!K.done&&(p=G.return)&&p.call(G)}finally{if(d)throw d.error}}this.scheduler.clear(),this.scheduler=new PR({deferEvents:this.options.deferEvents})},t.prototype.stop=function(){var e=this,n=this.scheduler;return this._stop(),n.schedule(function(){var i;if(!(!((i=e._state)===null||i===void 0)&&i.done)){var r=Gn({type:"xstate.stop"}),o=Jl(e,function(){var l=Jt(qt([],mt(e.state.configuration),!1).sort(function(v,T){return T.order-v.order}).map(function(v){return Do(v.onExit,e.machine.options.actions)})),c=mt(hm(e.machine,e.state,e.state.context,r,[{type:"exit",actions:l}],e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),f=c[0],d=c[1],p=new yr({value:e.state.value,context:d,_event:r,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:f.filter(function(v){return!t_(v)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return p.changed=!0,p});e.update(o,r),e._stopChildren(),Uc.free(e.sessionId)}}),this},t.prototype.batch=function(e){var n=this;if(!(this.status===Ln.NotStarted&&this.options.deferEvents)){if(this.status!==Ln.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'))}if(e.length){var i=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var r,o,l=n.state,c=!1,f=[],d=function(w){var x=Gn(w);n.forward(x),l=Jl(n,function(){return n.machine.transition(l,x,void 0,i||void 0)}),f.push.apply(f,qt([],mt(n.machine.config.predictableActionArguments?l.actions:l.actions.map(function(N){return lW(N,l)})),!1)),c=c||!!l.changed};try{for(var p=ut(e),v=p.next();!v.done;v=p.next()){var T=v.value;d(T)}}catch(w){r={error:w}}finally{try{v&&!v.done&&(o=p.return)&&o.call(p)}finally{if(r)throw r.error}}l.changed=c,l.actions=f,n.update(l,Gn(e[e.length-1]))})}},t.prototype.sender=function(e){return this.send.bind(this,e)},t.prototype._nextState=function(e,n){var i=this;n===void 0&&(n=!!this.machine.config.predictableActionArguments&&this._exec);var r=Gn(e);if(r.name.indexOf(bR)===0&&!this.state.nextEvents.some(function(l){return l.indexOf(bR)===0}))throw r.data.data;var o=Jl(this,function(){return i.machine.transition(i.state,r,void 0,n||void 0)});return o},t.prototype.nextState=function(e){return this._nextState(e,!1)},t.prototype.forward=function(e){var n,i;try{for(var r=ut(this.forwardTo),o=r.next();!o.done;o=r.next()){var l=o.value,c=this.children.get(l);if(!c)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(l,"'."));c.send(e)}}catch(f){n={error:f}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}},t.prototype.defer=function(e){var n=this,i=this.clock.setTimeout(function(){"to"in e&&e.to?n.sendTo(e._event,e.to,!0):n.send(e._event)},e.delay);e.id&&(this.delayedEventsMap[e.id]=i)},t.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},t.prototype.exec=function(e,n,i){i===void 0&&(i=this.machine.options.actions),this._exec(e,n.context,n._event,i)},t.prototype.removeChild=function(e){var n;this.children.delete(e),this.forwardTo.delete(e),(n=this.state)===null||n===void 0||delete n.children[e]},t.prototype.stopChild=function(e){var n=this.children.get(e);n&&(this.removeChild(e),_t(n.stop)&&n.stop())},t.prototype.spawn=function(e,n,i){if(this.status!==Ln.Running)return Sk(e,n);if(IR(e))return this.spawnPromise(Promise.resolve(e),n);if(_t(e))return this.spawnCallback(e,n);if(nW(e))return this.spawnActor(e,n);if(FJ(e))return this.spawnObservable(e,n);if(bu(e))return this.spawnMachine(e,ye(ye({},i),{id:n}));if(VJ(e))return this.spawnBehavior(e,n);throw new Error('Unable to spawn entity "'.concat(n,'" of type "').concat(typeof e,'".'))},t.prototype.spawnMachine=function(e,n){var i=this;n===void 0&&(n={});var r=new t(e,ye(ye({},this.options),{parent:this,id:n.id||e.id})),o=ye(ye({},pW),n);o.sync&&r.onTransition(function(c){i.send(hk,{state:c,id:r.id})});var l=r;return this.children.set(r.id,l),o.autoForward&&this.forwardTo.add(r.id),r.onDone(function(c){i.removeChild(r.id),i.send(Gn(c,{origin:r.id}))}).start(),l},t.prototype.spawnBehavior=function(e,n){var i=hW(e,{id:n,parent:this});return this.children.set(n,i),i},t.prototype.spawnPromise=function(e,n){var i,r=this,o=!1,l;e.then(function(f){o||(l=f,r.removeChild(n),r.send(Gn(bp(n,f),{origin:n})))},function(f){if(!o){r.removeChild(n);var d=ef(n,f);try{r.send(Gn(d,{origin:n}))}catch{r.devTools&&r.devTools.send(d,r.state),r.machine.strict&&r.stop()}}});var c=(i={id:n,send:function(){},subscribe:function(f,d,p){var v=Ap(f,d,p),T=!1;return e.then(function(w){T||(v.next(w),!T&&v.complete())},function(w){T||v.error(w)}),{unsubscribe:function(){return T=!0}}},stop:function(){o=!0},toJSON:function(){return{id:n}},getSnapshot:function(){return l}},i[Po]=function(){return this},i);return this.children.set(n,c),c},t.prototype.spawnCallback=function(e,n){var i,r=this,o=!1,l=new Set,c=new Set,f,d=function(T){f=T,c.forEach(function(w){return w(T)}),!o&&r.send(Gn(T,{origin:n}))},p;try{p=e(d,function(T){l.add(T)})}catch(T){this.send(ef(n,T))}if(IR(p))return this.spawnPromise(p,n);var v=(i={id:n,send:function(T){return l.forEach(function(w){return w(T)})},subscribe:function(T){var w=Ap(T);return c.add(w.next),{unsubscribe:function(){c.delete(w.next)}}},stop:function(){o=!0,_t(p)&&p()},toJSON:function(){return{id:n}},getSnapshot:function(){return f}},i[Po]=function(){return this},i);return this.children.set(n,v),v},t.prototype.spawnObservable=function(e,n){var i,r=this,o,l=e.subscribe(function(f){o=f,r.send(Gn(f,{origin:n}))},function(f){r.removeChild(n),r.send(Gn(ef(n,f),{origin:n}))},function(){r.removeChild(n),r.send(Gn(bp(n),{origin:n}))}),c=(i={id:n,send:function(){},subscribe:function(f,d,p){return e.subscribe(f,d,p)},stop:function(){return l.unsubscribe()},getSnapshot:function(){return o},toJSON:function(){return{id:n}}},i[Po]=function(){return this},i);return this.children.set(n,c),c},t.prototype.spawnActor=function(e,n){return this.children.set(n,e),e},t.prototype.spawnActivity=function(e){var n=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(n){var i=n(this.state.context,e);this.spawnEffect(e.id,i)}},t.prototype.spawnEffect=function(e,n){var i;this.children.set(e,(i={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:n||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}},i[Po]=function(){return this},i))},t.prototype.attachDev=function(){var e=yE();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var n=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(ye(ye({name:this.id,autoPause:!0,stateSanitizer:function(i){return{value:i.value,context:i.context,actions:i.actions}}},n),{features:ye({jump:!1,skip:!1},n?n.features:void 0)}),this.machine),this.devTools.init(this.state)}dW(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[Po]=function(){return this},t.prototype.getSnapshot=function(){return this.status===Ln.NotStarted?this.initialState:this._state},t.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,n){return setTimeout(e,n)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},t.interpret=xk,t})();function xk(t,e){var n=new mW(t,e);return n}function gW(t){if(typeof t=="string"){var e={type:t};return e.toString=function(){return t},e}return t}function Yh(t){return ye(ye({type:Q0},t),{toJSON:function(){t.onDone,t.onError;var e=dE(t,["onDone","onError"]);return ye(ye({},e),{type:Q0,src:gW(t.src)})}})}var Jh="",r_="#",Hv="*",ql={},zl=function(t){return t[0]===r_},yW=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},vW=(function(){function t(e,n,i,r){i===void 0&&(i="context"in e?e.context:void 0);var o=this,l;this.config=e,this._context=i,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(yW(),n),this.parent=r==null?void 0:r.parent,this.key=this.config.key||(r==null?void 0:r.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:pk),this.id=this.config.id||qt([this.machine.key],mt(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(l=this.config.schema)!==null&&l!==void 0?l:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?Zc(this.config.states,function(d,p){var v,T=new t(d,{},void 0,{parent:o,key:p});return Object.assign(o.idMap,ye((v={},v[T.id]=T,v),T.idMap)),T}):ql;var c=0;function f(d){var p,v;d.order=c++;try{for(var T=ut(wk(d)),w=T.next();!w.done;w=T.next()){var x=w.value;f(x)}}catch(N){p={error:N}}finally{try{w&&!w.done&&(v=T.return)&&v.call(T)}finally{if(p)throw p.error}}}f(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(d){var p=d.event;return p===Jh}):Jh in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=Pr(this.config.entry||this.config.onEntry).map(function(d){return qf(d)}),this.onExit=Pr(this.config.exit||this.config.onExit).map(function(d){return qf(d)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=Pr(this.config.invoke).map(function(d,p){var v,T;if(bu(d)){var w=$h(o.id,p);return o.machine.options.services=ye((v={},v[w]=d,v),o.machine.options.services),Yh({src:w,id:w})}else if(St(d.src)){var w=d.id||$h(o.id,p);return Yh(ye(ye({},d),{id:w,src:d.src}))}else if(bu(d.src)||_t(d.src)){var w=d.id||$h(o.id,p);return o.machine.options.services=ye((T={},T[w]=d.src,T),o.machine.options.services),Yh(ye(ye({id:w},d),{src:w}))}else{var x=d.src;return Yh(ye(ye({id:$h(o.id,p)},d),{src:x}))}}),this.activities=Pr(this.config.activities).concat(this.invoke).map(function(d){return gE(d)}),this.transition=this.transition.bind(this),this.tags=Pr(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||Ak(this).forEach(function(e){return e.on})},t.prototype.withConfig=function(e,n){var i=this.options,r=i.actions,o=i.activities,l=i.guards,c=i.services,f=i.delays;return new t(this.config,{actions:ye(ye({},r),e.actions),activities:ye(ye({},o),e.activities),guards:ye(ye({},l),e.guards),services:ye(ye({},c),e.services),delays:ye(ye({},f),e.delays)},n??this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return _t(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:Zc(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce(function(n,i){return n[i.eventType]=n[i.eventType]||[],n[i.eventType].push(i),n},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var n=e===Jh,i=this.transitions.filter(function(r){var o=r.eventType===e;return n?o:o||r.eventType===Hv});return this.__cache.candidates[e]=i,i},t.prototype.getDelayedTransitions=function(){var e=this,n=this.config.after;if(!n)return[];var i=function(o,l){var c=_t(o)?"".concat(e.id,":delay[").concat(l,"]"):o,f=QJ(c,e.id);return e.onEntry.push(GJ(f,{delay:o})),e.onExit.push(KJ(f)),f},r=Fu(n)?n.map(function(o,l){var c=i(o.delay,l);return ye(ye({},o),{event:c})}):Jt(Object.keys(n).map(function(o,l){var c=n[o],f=St(c)?{target:c}:c,d=isNaN(+o)?o:+o,p=i(d,l);return Pr(f).map(function(v){return ye(ye({},v),{event:p,delay:d})})}));return r.map(function(o){var l=o.delay;return ye(ye({},e.formatTransition(o)),{delay:l})})},t.prototype.getStateNodes=function(e){var n,i=this;if(!e)return[];var r=e instanceof yr?e.value:gf(e,this.delimiter);if(St(r)){var o=this.getStateNode(r).initial;return o!==void 0?this.getStateNodes((n={},n[r]=o,n)):[this,this.states[r]]}var l=Object.keys(r),c=[this];return c.push.apply(c,qt([],mt(Jt(l.map(function(f){return i.getStateNode(f).getStateNodes(r[f])}))),!1)),c},t.prototype.handles=function(e){var n=mk(e);return this.events.includes(n)},t.prototype.resolveState=function(e){var n=e instanceof yr?e:yr.create(e),i=Array.from(tf([],this.getStateNodes(n.value)));return new yr(ye(ye({},n),{value:this.resolve(n.value),configuration:i,done:Cp(i,this),tags:NR(i),machine:this.machine}))},t.prototype.transitionLeafNode=function(e,n,i){var r=this.getStateNode(e),o=r.next(n,i);return!o||!o.transitions.length?this.next(n,i):o},t.prototype.transitionCompoundNode=function(e,n,i){var r=Object.keys(e),o=this.getStateNode(r[0]),l=o._transition(e[r[0]],n,i);return!l||!l.transitions.length?this.next(n,i):l},t.prototype.transitionParallelNode=function(e,n,i){var r,o,l={};try{for(var c=ut(Object.keys(e)),f=c.next();!f.done;f=c.next()){var d=f.value,p=e[d];if(p){var v=this.getStateNode(d),T=v._transition(p,n,i);T&&(l[d]=T)}}}catch(O){r={error:O}}finally{try{f&&!f.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}var w=Object.keys(l).map(function(O){return l[O]}),x=Jt(w.map(function(O){return O.transitions})),N=w.some(function(O){return O.transitions.length>0});if(!N)return this.next(n,i);var P=Jt(Object.keys(l).map(function(O){return l[O].configuration}));return{transitions:x,exitSet:Jt(w.map(function(O){return O.exitSet})),configuration:P,source:n,actions:Jt(Object.keys(l).map(function(O){return l[O].actions}))}},t.prototype._transition=function(e,n,i){return St(e)?this.transitionLeafNode(e,n,i):Object.keys(e).length===1?this.transitionCompoundNode(e,n,i):this.transitionParallelNode(e,n,i)},t.prototype.getTransitionData=function(e,n){return this._transition(e.value,e,Gn(n))},t.prototype.next=function(e,n){var i,r,o=this,l=n.name,c=[],f=[],d;try{for(var p=ut(this.getCandidates(l)),v=p.next();!v.done;v=p.next()){var T=v.value,w=T.cond,x=T.in,N=e.context,P=x?St(x)&&zl(x)?e.matches(gf(this.getStateNodeById(x).path,this.delimiter)):mE(gf(x,this.delimiter),DJ(this.path.slice(0,-2))(e.value)):!0,O=!1;try{O=!w||_k(this.machine,w,N,n,e)}catch(G){throw new Error("Unable to evaluate guard '".concat(w.name||w.type,"' in transition for event '").concat(l,"' in state node '").concat(this.id,`':
`).concat(G.message))}if(O&&P){T.target!==void 0&&(f=T.target),c.push.apply(c,qt([],mt(T.actions),!1)),d=T;break}}}catch(G){i={error:G}}finally{try{v&&!v.done&&(r=p.return)&&r.call(p)}finally{if(i)throw i.error}}if(d){if(!f.length)return{transitions:[d],exitSet:[],configuration:e.value?[this]:[],source:e,actions:c};var k=Jt(f.map(function(G){return o.getRelativeStateNodes(G,e.historyValue)})),F=!!d.internal;return{transitions:[d],exitSet:F?[]:Jt(f.map(function(G){return o.getPotentiallyReenteringNodes(G)})),configuration:k,source:e,actions:c}}},t.prototype.getPotentiallyReenteringNodes=function(e){if(this.order<e.order)return[this];for(var n=[],i=this,r=e;i&&i!==r;)n.push(i),i=i.parent;return i!==r?[]:(n.push(r),n)},t.prototype.getActions=function(e,n,i,r,o,l,c){var f,d,p,v,T=this,w=l?tf([],this.getStateNodes(l.value)):[],x=new Set;try{for(var N=ut(Array.from(e).sort(function(U,z){return U.order-z.order})),P=N.next();!P.done;P=N.next()){var O=P.value;(!nf(w,O)||nf(i.exitSet,O)||O.parent&&x.has(O.parent))&&x.add(O)}}catch(U){f={error:U}}finally{try{P&&!P.done&&(d=N.return)&&d.call(N)}finally{if(f)throw f.error}}try{for(var k=ut(w),F=k.next();!F.done;F=k.next()){var O=F.value;(!nf(e,O)||nf(i.exitSet,O.parent))&&i.exitSet.push(O)}}catch(U){p={error:U}}finally{try{F&&!F.done&&(v=k.return)&&v.call(k)}finally{if(p)throw p.error}}i.exitSet.sort(function(U,z){return z.order-U.order});var G=Array.from(x).sort(function(U,z){return U.order-z.order}),K=new Set(i.exitSet),H=Jt(G.map(function(U){var z=[];if(U.type!=="final")return z;var B=U.parent;if(!B.parent)return z;z.push(Kh(U.id,U.doneData),Kh(B.id,U.doneData?dm(U.doneData,r,o):void 0));var Re=B.parent;return Re.type==="parallel"&&zf(Re).every(function(Ue){return Cp(i.configuration,Ue)})&&z.push(Kh(Re.id)),z})),R=G.map(function(U){var z=U.onEntry,B=U.activities.map(function(Re){return YJ(Re)});return{type:"entry",actions:Do(c?qt(qt([],mt(z),!1),mt(B),!1):qt(qt([],mt(B),!1),mt(z),!1),T.machine.options.actions)}}).concat({type:"state_done",actions:H.map(function(U){return zJ(U)})}),I=Array.from(K).map(function(U){return{type:"exit",actions:Do(qt(qt([],mt(U.onExit),!1),mt(U.activities.map(function(z){return JJ(z)})),!1),T.machine.options.actions)}}),D=I.concat({type:"transition",actions:Do(i.actions,this.machine.options.actions)}).concat(R);if(n){var V=Do(Jt(qt([],mt(e),!1).sort(function(U,z){return z.order-U.order}).map(function(U){return U.onExit})),this.machine.options.actions).filter(function(U){return!t_(U)});return D.concat({type:"stop",actions:V})}return D},t.prototype.transition=function(e,n,i,r){e===void 0&&(e=this.initialState);var o=Gn(n),l;if(e instanceof yr)l=i===void 0?e:this.resolveState(yr.from(e,i));else{var c=St(e)?this.resolve(fm(this.getResolvedPath(e))):this.resolve(e),f=i??this.machine.context;l=this.resolveState(yr.from(c,f))}if(this.strict&&!this.events.includes(o.name)&&!kJ(o.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(o.name,"'"));var d=this._transition(l.value,l,o)||{transitions:[],configuration:[],exitSet:[],source:l,actions:[]},p=tf([],this.getStateNodes(l.value)),v=d.configuration.length?tf(p,d.configuration):p;return d.configuration=qt([],mt(v),!1),this.resolveTransition(d,l,l.context,r,o)},t.prototype.resolveRaisedTransition=function(e,n,i,r){var o,l=e.actions;return e=this.transition(e,n,void 0,r),e._event=i,e.event=i.data,(o=e.actions).unshift.apply(o,qt([],mt(l),!1)),e},t.prototype.resolveTransition=function(e,n,i,r,o){var l,c,f,d,p=this;o===void 0&&(o=fu);var v=e.configuration,T=!n||e.transitions.length>0,w=T?e.configuration:n?n.configuration:[],x=Cp(w,this),N=T?rW(this.machine,v):void 0,P=n?n.historyValue?n.historyValue:e.source?this.machine.historyValue(n.value):void 0:void 0,O=this.getActions(new Set(w),x,e,i,o,n,r),k=n?ye({},n.activities):{};try{for(var F=ut(O),G=F.next();!G.done;G=F.next()){var K=G.value;try{for(var H=(f=void 0,ut(K.actions)),R=H.next();!R.done;R=H.next()){var I=R.value;I.type===X0?k[I.activity.id||I.activity.type]=I:I.type===hE&&(k[I.activity.id||I.activity.type]=!1)}}catch(re){f={error:re}}finally{try{R&&!R.done&&(d=H.return)&&d.call(H)}finally{if(f)throw f.error}}}}catch(re){l={error:re}}finally{try{G&&!G.done&&(c=F.return)&&c.call(F)}finally{if(l)throw l.error}}var D=mt(hm(this,n,i,o,O,r,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),V=D[0],U=D[1],z=mt(LJ(V,t_),2),B=z[0],Re=z[1],Ue=V.filter(function(re){var he;return re.type===X0&&((he=re.activity)===null||he===void 0?void 0:he.type)===Q0}),ee=Ue.reduce(function(re,he){return re[he.activity.id]=eW(he.activity,p.machine,U,o),re},n?ye({},n.children):{}),oe=new yr({value:N||n.value,context:U,_event:o,_sessionid:n?n._sessionid:null,historyValue:N?P?OJ(P,N):void 0:n?n.historyValue:void 0,history:!N||e.source?n:void 0,actions:N?Re:[],activities:N?k:n?n.activities:{},events:[],configuration:w,transitions:e.transitions,children:ee,done:x,tags:NR(w),machine:this}),me=i!==U;oe.changed=o.name===hk||me;var xe=oe.history;xe&&delete xe.history;var be=!x&&(this._transient||v.some(function(re){return re._transient}));if(!T&&(!be||o.name===Jh))return oe;var $=oe;if(!x)for(be&&($=this.resolveRaisedTransition($,{type:bJ},o,r));B.length;){var Z=B.shift();$=this.resolveRaisedTransition($,Z._event,o,r)}var pe=$.changed||(xe?!!$.actions.length||me||typeof xe.value!=typeof $.value||!Ck($.value,xe.value):void 0);return $.changed=pe,$.history=xe,$},t.prototype.getStateNode=function(e){if(zl(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var n=this.states[e];if(!n)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return n},t.prototype.getStateNodeById=function(e){var n=zl(e)?e.slice(r_.length):e;if(n===this.id)return this;var i=this.machine.idMap[n];if(!i)throw new Error("Child state node '#".concat(n,"' does not exist on machine '").concat(this.id,"'"));return i},t.prototype.getStateNodeByPath=function(e){if(typeof e=="string"&&zl(e))try{return this.getStateNodeById(e.slice(1))}catch{}for(var n=e_(e,this.delimiter).slice(),i=this;n.length;){var r=n.shift();if(!r.length)break;i=i.getStateNode(r)}return i},t.prototype.resolve=function(e){var n,i=this;if(!e)return this.initialStateValue||ql;switch(this.type){case"parallel":return Zc(this.initialStateValue,function(o,l){return o?i.getStateNode(l).resolve(e[l]||o):ql});case"compound":if(St(e)){var r=this.getStateNode(e);return r.type==="parallel"||r.type==="compound"?(n={},n[e]=r.initialStateValue,n):e}return Object.keys(e).length?Zc(e,function(o,l){return o?i.getStateNode(l).resolve(o):ql}):this.initialStateValue||{};default:return e||ql}},t.prototype.getResolvedPath=function(e){if(zl(e)){var n=this.machine.idMap[e.slice(r_.length)];if(!n)throw new Error("Unable to find state node '".concat(e,"'"));return n.path}return e_(e,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var n;if(this.type==="parallel")n=xR(this.states,function(i){return i.initialStateValue||ql},function(i){return i.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));n=pm(this.states[this.initial])?this.initial:(e={},e[this.initial]=this.states[this.initial].initialStateValue,e)}else n={};return this.__cache.initialStateValue=n,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(e,n){this._init();var i=this.getStateNodes(e);return this.resolveTransition({configuration:i,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,n??this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var e;if(this.type==="history"){var n=this.config;St(n.target)?e=zl(n.target)?fm(this.machine.getStateNodeById(n.target).path.slice(this.path.length-1)):n.target:e=n.target}return e},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(e,n,i){return i===void 0&&(i=!0),i?e.type==="history"?e.resolveHistory(n):e.initialStateNodes:[e]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var e=this;if(pm(this))return[this];if(this.type==="compound"&&!this.initial)return[this];var n=wp(this.initialStateValue);return Jt(n.map(function(i){return e.getFromRelativePath(i)}))},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var n=mt(e),i=n[0],r=n.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(i,"' from node with no states"));var o=this.getStateNode(i);if(o.type==="history")return o.resolveHistory();if(!this.states[i])throw new Error("Child state '".concat(i,"' does not exist on '").concat(this.id,"'"));return this.states[i].getFromRelativePath(r)},t.prototype.historyValue=function(e){if(Object.keys(this.states).length)return{current:e||this.initialStateValue,states:xR(this.states,function(n,i){if(!e)return n.historyValue();var r=St(e)?void 0:e[i];return n.historyValue(r||n.initialStateValue)},function(n){return!n.history})}},t.prototype.resolveHistory=function(e){var n=this;if(this.type!=="history")return[this];var i=this.parent;if(!e){var r=this.target;return r?Jt(wp(r).map(function(l){return i.getFromRelativePath(l)})):i.initialStateNodes}var o=MJ(i.path,"states")(e).current;return St(o)?[i.getStateNode(o)]:Jt(wp(o).map(function(l){return n.history==="deep"?i.getFromRelativePath(l):[i.states[l[0]]]}))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var e=this,n=Jt(Object.keys(this.states).map(function(i){return e.states[i].stateIds}));return[this.id].concat(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var e,n,i,r;if(this.__cache.events)return this.__cache.events;var o=this.states,l=new Set(this.ownEvents);if(o)try{for(var c=ut(Object.keys(o)),f=c.next();!f.done;f=c.next()){var d=f.value,p=o[d];if(p.states)try{for(var v=(i=void 0,ut(p.events)),T=v.next();!T.done;T=v.next()){var w=T.value;l.add("".concat(w))}}catch(x){i={error:x}}finally{try{T&&!T.done&&(r=v.return)&&r.call(v)}finally{if(i)throw i.error}}}}catch(x){e={error:x}}finally{try{f&&!f.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(l)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter(function(n){return!(!n.target&&!n.actions.length&&n.internal)}).map(function(n){return n.eventType}));return Array.from(e)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(e){var n=this;if(e!==void 0)return e.map(function(i){if(!St(i))return i;var r=i[0]===n.delimiter;if(r&&!n.parent)return n.getStateNodeByPath(i.slice(1));var o=r?n.key+i:i;if(n.parent)try{var l=n.parent.getStateNodeByPath(o);return l}catch(c){throw new Error("Invalid transition definition for state node '".concat(n.id,`':
`).concat(c.message))}else return n.getStateNodeByPath(o)})},t.prototype.formatTransition=function(e){var n=this,i=qJ(e.target),r="internal"in e?e.internal:i?i.some(function(f){return St(f)&&f[0]===n.delimiter}):!0,o=this.machine.options.guards,l=this.resolveTarget(i),c=ye(ye({},e),{actions:Do(Pr(e.actions)),cond:vk(e.cond,o),target:l,source:this,internal:r,eventType:e.event,toJSON:function(){return ye(ye({},c),{target:c.target?c.target.map(function(f){return"#".concat(f.id)}):void 0,source:"#".concat(n.id)})}});return c},t.prototype.formatTransitions=function(){var e,n,i=this,r;if(!this.config.on)r=[];else if(Array.isArray(this.config.on))r=this.config.on;else{var o=this.config.on,l=Hv,c=o[l],f=c===void 0?[]:c,d=dE(o,[typeof l=="symbol"?l:l+""]);r=Jt(Object.keys(d).map(function(k){var F=Bl(k,d[k]);return F}).concat(Bl(Hv,f)))}var p=this.config.always?Bl("",this.config.always):[],v=this.config.onDone?Bl(String(Kh(this.id)),this.config.onDone):[],T=Jt(this.invoke.map(function(k){var F=[];return k.onDone&&F.push.apply(F,qt([],mt(Bl(String(bp(k.id)),k.onDone)),!1)),k.onError&&F.push.apply(F,qt([],mt(Bl(String(ef(k.id)),k.onError)),!1)),F})),w=this.after,x=Jt(qt(qt(qt(qt([],mt(v),!1),mt(T),!1),mt(r),!1),mt(p),!1).map(function(k){return Pr(k).map(function(F){return i.formatTransition(F)})}));try{for(var N=ut(w),P=N.next();!P.done;P=N.next()){var O=P.value;x.push(O)}}catch(k){e={error:k}}finally{try{P&&!P.done&&(n=N.return)&&n.call(N)}finally{if(e)throw e.error}}return x},t})();function _W(t,e,n){return n===void 0&&(n=t.context),new vW(t,e,n)}var TW=XJ,s_;(function(t){t[t.Effect=1]="Effect",t[t.LayoutEffect=2]="LayoutEffect"})(s_||(s_={}));var yf=q.useLayoutEffect;function DR(t){var e=q.useRef();return e.current||(e.current={v:t()}),e.current.v}var EW=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,o=[],l;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(c){l={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return o},SW=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function wW(t,e){var n,i,r=EW([[],[]],2),o=r[0],l=r[1];try{for(var c=SW(t),f=c.next();!f.done;f=c.next()){var d=f.value;e(d)?o.push(d):l.push(d)}}catch(p){n={error:p}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return[o,l]}var Fc=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,o=[],l;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(c){l={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return o},MR=function(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))};function kR(t,e){var n=t.exec,i=n(e.context,e._event.data,{action:t,state:e,_event:e._event});i()}function AW(t){var e=q.useRef([]),n=q.useRef([]);yf(function(){var i=t.subscribe(function(r){var o,l;if(r.actions.length){var c=r.actions.filter(function(v){return typeof v.exec=="function"&&"__effect"in v.exec}),f=Fc(wW(c,function(v){return v.exec.__effect===s_.Effect}),2),d=f[0],p=f[1];(o=e.current).push.apply(o,MR([],Fc(d.map(function(v){return[v,r]})),!1)),(l=n.current).push.apply(l,MR([],Fc(p.map(function(v){return[v,r]})),!1))}});return function(){i.unsubscribe()}},[]),yf(function(){for(;n.current.length;){var i=Fc(n.current.shift(),2),r=i[0],o=i[1];kR(r,o)}}),q.useEffect(function(){for(;e.current.length;){var i=Fc(e.current.shift(),2),r=i[0],o=i[1];kR(r,o)}})}var vf=function(){return vf=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},vf.apply(this,arguments)},bW=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n};function CW(t,e,n){if(typeof t=="object")return t;var i=function(){};return{next:t,error:e||i,complete:n||i}}function xW(t,e,n){e===void 0&&(e={});var i=DR(function(){return typeof t=="function"?t():t}),r=e.context,o=e.guards,l=e.actions,c=e.activities,f=e.services,d=e.delays,p=e.state,v=bW(e,["context","guards","actions","activities","services","delays","state"]),T=DR(function(){var w={context:r,guards:o,actions:l,activities:c,services:f,delays:d},x=i.withConfig(w,function(){return vf(vf({},i.context),r)});return xk(x,vf({deferEvents:!0},v))});return yf(function(){var w;return n&&(w=T.subscribe(CW(n))),function(){w==null||w.unsubscribe()}},[n]),yf(function(){return T.start(p?yr.create(p):void 0),function(){T.stop()}},[]),yf(function(){Object.assign(T.machine.options.actions,l),Object.assign(T.machine.options.guards,o),Object.assign(T.machine.options.activities,c),Object.assign(T.machine.options.services,f),Object.assign(T.machine.options.delays,d)},[l,o,c,f,d]),AW(T),T}var IW=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,o=[],l;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(c){l={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return o};function RW(t,e){e===void 0&&(e={});var n=q.useCallback(function(c){var f=c.changed===void 0&&Object.keys(c.children).length;(c.changed||f)&&l(c)},[]),i=xW(t,e,n),r=IW(q.useState(function(){var c=i.machine.initialState;return e.state?yr.create(e.state):c}),2),o=r[0],l=r[1];return[o,i.send,i]}function rn(){return rn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},rn.apply(null,arguments)}function du(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}const it={arr:Array.isArray,obj:t=>Object.prototype.toString.call(t)==="[object Object]",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0,nul:t=>t===null,set:t=>t instanceof Set,map:t=>t instanceof Map,equ(t,e){if(typeof t!=typeof e)return!1;if(it.str(t)||it.num(t))return t===e;if(it.obj(t)&&it.obj(e)&&Object.keys(t).length+Object.keys(e).length===0)return!0;let n;for(n in t)if(!(n in e))return!1;for(n in e)if(t[n]!==e[n])return!1;return it.und(n)?t===e:!0}};function NW(t,e){return n=>(it.arr(n)?n:Object.keys(n)).reduce((i,r)=>{const o=r;return i[o]=t(o),i},t)}function PW(){const t=q.useState(!1),e=t[1];return q.useCallback(()=>e(i=>!i),[])}function Na(t,e){return it.und(t)||it.nul(t)?e:t}function Wh(t){return it.und(t)?[]:it.arr(t)?t:[t]}function nu(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return it.fun(t)?t(...n):t}function DW(t){return t.to,t.from,t.config,t.onStart,t.onRest,t.onFrame,t.children,t.reset,t.reverse,t.force,t.immediate,t.delay,t.attach,t.destroyed,t.interpolateTo,t.ref,t.lazy,du(t,["to","from","config","onStart","onRest","onFrame","children","reset","reverse","force","immediate","delay","attach","destroyed","interpolateTo","ref","lazy"])}function Gv(t){const e=DW(t);if(it.und(e))return rn({to:e},t);const n=Object.keys(t).reduce((i,r)=>it.und(e[r])?rn({},i,{[r]:t[r]}):i,{});return rn({to:e},n)}function MW(t,e){return e&&(it.fun(e)?e(t):it.obj(e)&&(e.current=t)),t}class Dr{constructor(){this.payload=void 0,this.children=[]}getAnimatedValue(){return this.getValue()}getPayload(){return this.payload||this}attach(){}detach(){}getChildren(){return this.children}addChild(e){this.children.length===0&&this.attach(),this.children.push(e)}removeChild(e){const n=this.children.indexOf(e);this.children.splice(n,1),this.children.length===0&&this.detach()}}class o_ extends Dr{constructor(){super(...arguments),this.payload=[],this.attach=()=>this.payload.forEach(e=>e instanceof Dr&&e.addChild(this)),this.detach=()=>this.payload.forEach(e=>e instanceof Dr&&e.removeChild(this))}}class Ik extends Dr{constructor(){super(...arguments),this.payload={},this.attach=()=>Object.values(this.payload).forEach(e=>e instanceof Dr&&e.addChild(this)),this.detach=()=>Object.values(this.payload).forEach(e=>e instanceof Dr&&e.removeChild(this))}getValue(e){e===void 0&&(e=!1);const n={};for(const i in this.payload){const r=this.payload[i];e&&!(r instanceof Dr)||(n[i]=r instanceof Dr?r[e?"getAnimatedValue":"getValue"]():r)}return n}getAnimatedValue(){return this.getValue(!0)}}let vE;function kW(t,e){vE={fn:t,transform:e}}let Rk;function VW(t){Rk=t}let Nk=t=>typeof window<"u"?window.requestAnimationFrame(t):-1,mm;function LW(t){mm=t}let Pk=()=>Date.now(),OW=t=>t.current,Dk;function UW(t){Dk=t}class FW extends Ik{constructor(e,n){super(),this.update=void 0,this.payload=e.style?rn({},e,{style:Dk(e.style)}):e,this.update=n,this.attach()}}const BW=t=>it.fun(t)&&!(t.prototype instanceof Cn.Component),qW=t=>q.forwardRef((n,i)=>{const r=PW(),o=q.useRef(!0),l=q.useRef(null),c=q.useRef(null),f=q.useCallback(T=>{const w=l.current,x=()=>{let N=!1;c.current&&(N=vE.fn(c.current,l.current.getAnimatedValue())),(!c.current||N===!1)&&r()};l.current=new FW(T,x),w&&w.detach()},[]);q.useEffect(()=>()=>{o.current=!1,l.current&&l.current.detach()},[]),q.useImperativeHandle(i,()=>OW(c)),f(n);const d=l.current.getValue();d.scrollTop,d.scrollLeft;const p=du(d,["scrollTop","scrollLeft"]),v=BW(t)?void 0:T=>c.current=MW(T,i);return Cn.createElement(t,rn({},p,{ref:v}))});let _f=!1;const za=new Set,Mk=()=>{if(!_f)return!1;let t=Pk();for(let e of za){let n=!1;for(let i=0;i<e.configs.length;i++){let r=e.configs[i],o,l;for(let c=0;c<r.animatedValues.length;c++){let f=r.animatedValues[c];if(f.done)continue;let d=r.fromValues[c],p=r.toValues[c],v=f.lastPosition,T=p instanceof Dr,w=Array.isArray(r.initialVelocity)?r.initialVelocity[c]:r.initialVelocity;if(T&&(p=p.getValue()),r.immediate){f.setValue(p),f.done=!0;continue}if(typeof d=="string"||typeof p=="string"){f.setValue(p),f.done=!0;continue}if(r.duration!==void 0)v=d+r.easing((t-f.startTime)/r.duration)*(p-d),o=t>=f.startTime+r.duration;else if(r.decay)v=d+w/(1-.998)*(1-Math.exp(-.0020000000000000018*(t-f.startTime))),o=Math.abs(f.lastPosition-v)<.1,o&&(p=v);else{l=f.lastTime!==void 0?f.lastTime:t,w=f.lastVelocity!==void 0?f.lastVelocity:r.initialVelocity,t>l+64&&(l=t);let x=Math.floor(t-l);for(let k=0;k<x;++k){let F=-r.tension*(v-p),G=-r.friction*w,K=(F+G)/r.mass;w=w+K*1/1e3,v=v+w*1/1e3}let N=r.clamp&&r.tension!==0?d<p?v>p:v<p:!1,P=Math.abs(w)<=r.precision,O=r.tension!==0?Math.abs(p-v)<=r.precision:!0;o=N||P&&O,f.lastVelocity=w,f.lastTime=t}T&&!r.toValues[c].done&&(o=!1),o?(f.value!==p&&(v=p),f.done=!0):n=!0,f.setValue(v),f.lastPosition=v}e.props.onFrame&&(e.values[r.name]=r.interpolation.getValue())}e.props.onFrame&&e.props.onFrame(e.values),n||(za.delete(e),e.stop(!0))}return za.size?Nk(Mk):_f=!1,_f},zW=t=>{za.has(t)||za.add(t),_f||(_f=!0,Nk(Mk))},HW=t=>{za.has(t)&&za.delete(t)};function gm(t,e,n){if(typeof t=="function")return t;if(Array.isArray(t))return gm({range:t,output:e,extrapolate:n});if(mm&&typeof t.output[0]=="string")return mm(t);const i=t,r=i.output,o=i.range||[0,1],l=i.extrapolateLeft||i.extrapolate||"extend",c=i.extrapolateRight||i.extrapolate||"extend",f=i.easing||(d=>d);return d=>{const p=jW(d,o);return GW(d,o[p],o[p+1],r[p],r[p+1],f,l,c,i.map)}}function GW(t,e,n,i,r,o,l,c,f){let d=f?f(t):t;if(d<e){if(l==="identity")return d;l==="clamp"&&(d=e)}if(d>n){if(c==="identity")return d;c==="clamp"&&(d=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?d=-d:n===1/0?d=d-e:d=(d-e)/(n-e),d=o(d),i===-1/0?d=-d:r===1/0?d=d+i:d=d*(r-i)+i,d)}function jW(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}class Cu extends o_{constructor(e,n,i,r){super(),this.calc=void 0,this.payload=e instanceof o_&&!(e instanceof Cu)?e.getPayload():Array.isArray(e)?e:[e],this.calc=gm(n,i,r)}getValue(){return this.calc(...this.payload.map(e=>e.getValue()))}updateConfig(e,n,i){this.calc=gm(e,n,i)}interpolate(e,n,i){return new Cu(this,e,n,i)}}const Hl=(t,e,n)=>t&&new Cu(t,e,n),$W={default:{tension:170,friction:26}};function kk(t,e){"update"in t?e.add(t):t.getChildren().forEach(n=>kk(n,e))}class a_ extends Dr{constructor(e){var n;super(),n=this,this.animatedStyles=new Set,this.value=void 0,this.startPosition=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.startTime=void 0,this.lastTime=void 0,this.done=!1,this.setValue=function(i,r){r===void 0&&(r=!0),n.value=i,r&&n.flush()},this.value=e,this.startPosition=e,this.lastPosition=e}flush(){this.animatedStyles.size===0&&kk(this,this.animatedStyles),this.animatedStyles.forEach(e=>e.update())}clearStyles(){this.animatedStyles.clear()}getValue(){return this.value}interpolate(e,n,i){return new Cu(this,e,n,i)}}class KW extends o_{constructor(e){super(),this.payload=e.map(n=>new a_(n))}setValue(e,n){n===void 0&&(n=!0),Array.isArray(e)?e.length===this.payload.length&&e.forEach((i,r)=>this.payload[r].setValue(i,n)):this.payload.forEach(i=>i.setValue(e,n))}getValue(){return this.payload.map(e=>e.getValue())}interpolate(e,n){return new Cu(this,e,n)}}let YW=0,JW=class{constructor(){this.id=void 0,this.idle=!0,this.hasChanged=!1,this.guid=0,this.local=0,this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.listeners=[],this.queue=[],this.localQueue=void 0,this.getValues=()=>this.interpolations,this.id=YW++}update(e){if(!e)return this;const n=Gv(e),i=n.delay,r=i===void 0?0:i,o=n.to,l=du(n,["delay","to"]);if(it.arr(o)||it.fun(o))this.queue.push(rn({},l,{delay:r,to:o}));else if(o){let c={};Object.entries(o).forEach(f=>{let d=f[0],p=f[1];const v=rn({to:{[d]:p},delay:nu(r,d)},l),T=c[v.delay]&&c[v.delay].to;c[v.delay]=rn({},c[v.delay],v,{to:rn({},T,v.to)})}),this.queue=Object.values(c)}return this.queue=this.queue.sort((c,f)=>c.delay-f.delay),this.diff(l),this}start(e){if(this.queue.length){this.idle=!1,this.localQueue&&this.localQueue.forEach(r=>{let o=r.from,l=o===void 0?{}:o,c=r.to,f=c===void 0?{}:c;it.obj(l)&&(this.merged=rn({},l,this.merged)),it.obj(f)&&(this.merged=rn({},this.merged,f))});const n=this.local=++this.guid,i=this.localQueue=this.queue;this.queue=[],i.forEach((r,o)=>{let l=r.delay,c=du(r,["delay"]);const f=p=>{o===i.length-1&&n===this.guid&&p&&(this.idle=!0,this.props.onRest&&this.props.onRest(this.merged)),e&&e()};let d=it.arr(c.to)||it.fun(c.to);l?setTimeout(()=>{n===this.guid&&(d?this.runAsync(c,f):this.diff(c).start(f))},l):d?this.runAsync(c,f):this.diff(c).start(f)})}else it.fun(e)&&this.listeners.push(e),this.props.onStart&&this.props.onStart(),zW(this);return this}stop(e){return this.listeners.forEach(n=>n(e)),this.listeners=[],this}pause(e){return this.stop(!0),e&&HW(this),this}runAsync(e,n){var i=this;e.delay;let r=du(e,["delay"]);const o=this.local;let l=Promise.resolve(void 0);if(it.arr(r.to))for(let c=0;c<r.to.length;c++){const f=c,d=rn({},r,Gv(r.to[f]));it.arr(d.config)&&(d.config=d.config[f]),l=l.then(()=>{if(o===this.guid)return new Promise(p=>this.diff(d).start(p))})}else if(it.fun(r.to)){let c=0,f;l=l.then(()=>r.to(d=>{const p=rn({},r,Gv(d));if(it.arr(p.config)&&(p.config=p.config[c]),c++,o===this.guid)return f=new Promise(v=>this.diff(p).start(v))},function(d){return d===void 0&&(d=!0),i.stop(d)}).then(()=>f))}l.then(n)}diff(e){this.props=rn({},this.props,e);let n=this.props,i=n.from,r=i===void 0?{}:i,o=n.to,l=o===void 0?{}:o,c=n.config,f=c===void 0?{}:c,d=n.reverse,p=n.attach,v=n.reset,T=n.immediate;if(d){var w=[l,r];r=w[0],l=w[1]}this.merged=rn({},r,this.merged,l),this.hasChanged=!1;let x=p&&p(this);if(this.animations=Object.entries(this.merged).reduce((N,P)=>{let O=P[0],k=P[1],F=N[O]||{};const G=it.num(k),K=it.str(k)&&!k.startsWith("#")&&!/\d/.test(k)&&!Rk[k],H=it.arr(k),R=!G&&!H&&!K;let I=it.und(r[O])?k:r[O],D=G||H||K?k:1,V=nu(f,O);x&&(D=x.animations[O].parent);let U=F.parent,z=F.interpolation,B=Wh(x?D.getPayload():D),Re,Ue=k;R&&(Ue=mm({range:[0,1],output:[k,k]})(1));let ee=z&&z.getValue();const me=!it.und(U)&&F.animatedValues.some(Z=>!Z.done),xe=!it.equ(Ue,ee),be=!it.equ(Ue,F.previous),$=!it.equ(V,F.config);if(v||be&&xe||$){if(G||K)U=z=F.parent||new a_(I);else if(H)U=z=F.parent||new KW(I);else if(R){let Z=F.interpolation&&F.interpolation.calc(F.parent.value);Z=Z!==void 0&&!v?Z:I,F.parent?(U=F.parent,U.setValue(0,!1)):U=new a_(0);const pe={output:[Z,k]};F.interpolation?(z=F.interpolation,F.interpolation.updateConfig(pe)):z=U.interpolate(pe)}return B=Wh(x?D.getPayload():D),Re=Wh(U.getPayload()),v&&!R&&U.setValue(I,!1),this.hasChanged=!0,Re.forEach(Z=>{Z.startPosition=Z.value,Z.lastPosition=Z.value,Z.lastVelocity=me?Z.lastVelocity:void 0,Z.lastTime=me?Z.lastTime:void 0,Z.startTime=Pk(),Z.done=!1,Z.animatedStyles.clear()}),nu(T,O)&&U.setValue(R?D:k,!1),rn({},N,{[O]:rn({},F,{name:O,parent:U,interpolation:z,animatedValues:Re,toValues:B,previous:Ue,config:V,fromValues:Wh(U.getValue()),immediate:nu(T,O),initialVelocity:Na(V.velocity,0),clamp:Na(V.clamp,!1),precision:Na(V.precision,.01),tension:Na(V.tension,170),friction:Na(V.friction,26),mass:Na(V.mass,1),duration:V.duration,easing:Na(V.easing,Z=>Z),decay:V.decay})})}else return xe?N:(R&&(U.setValue(1,!1),z.updateConfig({output:[Ue,Ue]})),U.done=!0,this.hasChanged=!0,rn({},N,{[O]:rn({},N[O],{previous:Ue})}))},this.animations),this.hasChanged){this.configs=Object.values(this.animations),this.values={},this.interpolations={};for(let N in this.animations)this.interpolations[N]=this.animations[N].interpolation,this.values[N]=this.animations[N].interpolation.getValue()}return this}destroy(){this.stop(),this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.local=0}};const WW=(t,e)=>{const n=q.useRef(!1),i=q.useRef(),r=it.fun(e),o=q.useMemo(()=>{i.current&&(i.current.map(v=>v.destroy()),i.current=void 0);let p;return[new Array(t).fill().map((v,T)=>{const w=new JW,x=r?nu(e,T,w):e[T];return T===0&&(p=x.ref),w.update(x),p||w.start(),w}),p]},[t]),l=o[0],c=o[1];i.current=l,q.useImperativeHandle(c,()=>({start:()=>Promise.all(i.current.map(p=>new Promise(v=>p.start(v)))),stop:p=>i.current.forEach(v=>v.stop(p)),get controllers(){return i.current}}));const f=q.useMemo(()=>p=>i.current.map((v,T)=>{v.update(r?nu(p,T,v):p[T]),c||v.start()}),[t]);q.useEffect(()=>{n.current?r||f(e):c||i.current.forEach(p=>p.start())}),q.useEffect(()=>(n.current=!0,()=>i.current.forEach(p=>p.destroy())),[]);const d=i.current.map(p=>p.getValues());return r?[d,f,p=>i.current.forEach(v=>v.pause(p))]:d},XW=t=>{const e=it.fun(t),n=WW(1,e?t:[t]),i=n[0],r=n[1],o=n[2];return e?[i[0],r,o]:i};class QW extends Ik{constructor(e){e===void 0&&(e={}),super(),e.transform&&!(e.transform instanceof Dr)&&(e=vE.transform(e)),this.payload=e}}const ym={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Vr="[-+]?\\d*\\.?\\d+",vm=Vr+"%";function lg(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}const ZW=new RegExp("rgb"+lg(Vr,Vr,Vr)),eX=new RegExp("rgba"+lg(Vr,Vr,Vr,Vr)),tX=new RegExp("hsl"+lg(Vr,vm,vm)),nX=new RegExp("hsla"+lg(Vr,vm,vm,Vr)),iX=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,rX=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,sX=/^#([0-9a-fA-F]{6})$/,oX=/^#([0-9a-fA-F]{8})$/;function aX(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=sX.exec(t))?parseInt(e[1]+"ff",16)>>>0:ym.hasOwnProperty(t)?ym[t]:(e=ZW.exec(t))?(Gl(e[1])<<24|Gl(e[2])<<16|Gl(e[3])<<8|255)>>>0:(e=eX.exec(t))?(Gl(e[1])<<24|Gl(e[2])<<16|Gl(e[3])<<8|OR(e[4]))>>>0:(e=iX.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=oX.exec(t))?parseInt(e[1],16)>>>0:(e=rX.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=tX.exec(t))?(VR(LR(e[1]),Xh(e[2]),Xh(e[3]))|255)>>>0:(e=nX.exec(t))?(VR(LR(e[1]),Xh(e[2]),Xh(e[3]))|OR(e[4]))>>>0:null}function jv(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function VR(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,o=jv(r,i,t+1/3),l=jv(r,i,t),c=jv(r,i,t-1/3);return Math.round(o*255)<<24|Math.round(l*255)<<16|Math.round(c*255)<<8}function Gl(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function LR(t){return(parseFloat(t)%360+360)%360/360}function OR(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Xh(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function UR(t){let e=aX(t);if(e===null)return t;e=e||0;let n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,o=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${o})`}const Qh=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,lX=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,uX=new RegExp(`(${Object.keys(ym).join("|")})`,"g"),cX=t=>{const e=t.output.map(r=>r.replace(lX,UR)).map(r=>r.replace(uX,UR)),n=e[0].match(Qh).map(()=>[]);e.forEach(r=>{r.match(Qh).forEach((o,l)=>n[l].push(+o))});const i=e[0].match(Qh).map((r,o)=>gm(rn({},t,{output:n[o]})));return r=>{let o=0;return e[0].replace(Qh,()=>i[o++](r)).replace(/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,(l,c,f,d,p)=>`rgba(${Math.round(c)}, ${Math.round(f)}, ${Math.round(d)}, ${p})`)}};let Tf={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};const fX=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),dX=["Webkit","Ms","Moz","O"];Tf=Object.keys(Tf).reduce((t,e)=>(dX.forEach(n=>t[fX(n,e)]=t[e]),t),Tf);function hX(t,e,n){return e==null||typeof e=="boolean"||e===""?"":!n&&typeof e=="number"&&e!==0&&!(Tf.hasOwnProperty(t)&&Tf[t])?e+"px":(""+e).trim()}const FR={};UW(t=>new QW(t));LW(cX);VW(ym);kW((t,e)=>{if(t.nodeType&&t.setAttribute!==void 0){const r=e.style,o=e.children,l=e.scrollTop,c=e.scrollLeft,f=du(e,["style","children","scrollTop","scrollLeft"]),d=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter";l!==void 0&&(t.scrollTop=l),c!==void 0&&(t.scrollLeft=c),o!==void 0&&(t.textContent=o);for(let p in r)if(r.hasOwnProperty(p)){var n=p.indexOf("--")===0,i=hX(p,r[p],n);p==="float"&&(p="cssFloat"),n?t.style.setProperty(p,i):t.style[p]=i}for(let p in f){const v=d?p:FR[p]||(FR[p]=p.replace(/([A-Z])/g,T=>"-"+T.toLowerCase()));typeof t.getAttribute(v)<"u"&&t.setAttribute(v,f[p])}return}else return!1},t=>t);const pX=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],mX=NW(qW),gX=mX(pX);function BR(t,e){return t.map(function(n,i){return n+e[i]})}function Vk(t,e){return t.map(function(n,i){return n-e[i]})}function l_(t){return Math.hypot.apply(Math,t)}function yX(t,e,n){var i=l_(e),r=i===0?0:1/i,o=n===0?0:1/n,l=o*i,c=e.map(function(p){return o*p}),f=e.map(function(p){return r*p}),d=l_(t);return{velocities:c,velocity:l,distance:d,direction:f}}function u_(t){return Math.sign?Math.sign(t):+(t>0)-+(t<0)||+t}function vX(t,e,n){return Math.max(e,Math.min(t,n))}function _X(t,e){return Math.pow(t,e*5)}function qR(t,e,n){return e===0||Math.abs(e)===1/0?_X(t,n):t*e*n/(e+n*t)}function Ef(t,e,n,i){return i===void 0&&(i=.15),i===0?vX(t,e,n):t<e?-qR(e-t,n-e,i)+e:t>n?+qR(t-n,n-e,i)+n:t}function TX(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function EX(t,e,n){return e&&TX(t.prototype,e),t}function Ei(){return Ei=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ei.apply(this,arguments)}function Lk(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function SX(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function Zh(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wX(t,e){if(t){if(typeof t=="string")return zR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zR(t,e)}}function zR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function ug(t,e){var n;if(typeof Symbol>"u"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=wX(t))||e){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return n=t[Symbol.iterator](),n.next.bind(n)}function Ok(){}function Uk(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?Ok:e.length===1?e[0]:function(){for(var i,r=ug(e),o;!(o=r()).done;){var l=o.value;i=l.apply(this,arguments)||i}return i}}function Mo(t,e){if(t===void 0){if(e===void 0)throw new Error("Must define fallback value if undefined is expected");t=e}return Array.isArray(t)?t:[t,t]}function ep(t){if(typeof t=="function"){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return t.apply(void 0,n)}else return t}function _E(t,e){t===void 0&&(t={});for(var n={},i=0,r=Object.entries(e);i<r.length;i++){var o=r[i],l=o[0],c=o[1];switch(typeof c){case"function":n[l]=c.call(n,t[l],l,t);break;case"object":n[l]=_E(t[l],c);break;case"boolean":c&&(n[l]=t[l]);break}}return n}var AX=180,bX=.15,CX=.5,xX=60,IX={threshold:function(e){return e===void 0&&(e=0),Mo(e)},rubberband:function(e){switch(e===void 0&&(e=0),e){case!0:return Mo(bX);case!1:return Mo(0);default:return Mo(e)}},enabled:function(e){return e===void 0&&(e=!0),e},triggerAllEvents:function(e){return e===void 0&&(e=!1),e},initial:function(e){return e===void 0&&(e=0),typeof e=="function"?e:Mo(e)}},Fk=Ei({},IX,{axis:!0,lockDirection:function(e){return e===void 0&&(e=!1),e},bounds:function(e){if(e===void 0&&(e={}),typeof e=="function")return function(v){return Fk.bounds(e(v))};var n=e,i=n.left,r=i===void 0?-1/0:i,o=n.right,l=o===void 0?1/0:o,c=n.top,f=c===void 0?-1/0:c,d=n.bottom,p=d===void 0?1/0:d;return[[r,l],[f,p]]}}),RX=typeof window<"u"&&window.document&&window.document.createElement,NX={enabled:function(e){return e===void 0&&(e=!0),e},domTarget:!0,window:(function(t){function e(n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e})(function(t){return t===void 0&&(t=RX?window:void 0),t}),eventOptions:function(e){var n=e===void 0?{}:e,i=n.passive,r=i===void 0?!0:i,o=n.capture,l=o===void 0?!1:o;return{passive:r,capture:l}}},PX=Ei({},Fk,{threshold:function(e,n,i){var r=i.filterTaps,o=r===void 0?!1:r,l=i.lockDirection,c=l===void 0?!1:l,f=i.axis,d=f===void 0?void 0:f,p=Mo(e,o?3:c||d?1:0);return this.filterTaps=o||p[0]+p[1]>0,p},swipeVelocity:function(e){return e===void 0&&(e=CX),Mo(e)},swipeDistance:function(e){return e===void 0&&(e=xX),Mo(e)},delay:function(e){switch(e===void 0&&(e=0),e){case!0:return AX;case!1:return 0;default:return e}}});function DX(t){return t===void 0&&(t={}),_E(t,NX)}function MX(t){return t===void 0&&(t={}),_E(t,PX)}function kX(t){var e=t.domTarget,n=t.eventOptions,i=t.window,r=t.enabled,o=SX(t,["domTarget","eventOptions","window","enabled"]),l=DX({domTarget:e,eventOptions:n,window:i,enabled:r});return l.drag=MX(o),l}function Bc(t){return Ei({_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_lastEventType:void 0,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:Ok,canceled:!1,memo:void 0,args:void 0},t)}function Bk(){var t={hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1},e=Bc({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,_isTap:!0,_delayedEvent:!1,_pointerId:void 0,tap:!1,swipe:[0,0]}),n=Bc({da:[0,0],vdva:[0,0],origin:void 0,turns:0}),i=Bc({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),r=Bc({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),o=Bc({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0});return{shared:t,drag:e,pinch:n,wheel:i,move:r,scroll:o}}var ka=new Map,VX=(function(){function t(n,i){var r=this;i===void 0&&(i=[]),this.controller=n,this.args=i,this.debounced=!0,this.setTimeout=function(o,l){var c;l===void 0&&(l=140),clearTimeout(r.controller.timeouts[r.stateKey]);for(var f=arguments.length,d=new Array(f>2?f-2:0),p=2;p<f;p++)d[p-2]=arguments[p];r.controller.timeouts[r.stateKey]=(c=window).setTimeout.apply(c,[o,l].concat(d))},this.clearTimeout=function(){clearTimeout(r.controller.timeouts[r.stateKey])},this.fireGestureHandler=function(o){if(o===void 0&&(o=!1),r.state._blocked)return r.debounced||(r.state._active=!1,r.clean()),null;if(!o&&!r.state.intentional&&!r.config.triggerAllEvents)return null;if(r.state.intentional){var l=r.state.active,c=r.state._active;r.state.active=c,r.state.first=c&&!l,r.state.last=l&&!c,r.controller.state.shared[r.ingKey]=c}var f=Ei({},r.controller.state.shared,r.state,r.mapStateValues(r.state)),d=r.handler(f);return r.state.memo=d!==void 0?d:r.state.memo,r.state._active||r.clean(),f}}var e=t.prototype;return e.updateSharedState=function(i){Object.assign(this.controller.state.shared,i)},e.updateGestureState=function(i){Object.assign(this.state,i)},e.checkIntentionality=function(i,r){return{_intentional:i,_blocked:!1}},e.getMovement=function(i){var r=this.config,o=r.initial,l=r.bounds,c=r.rubberband,f=r.threshold,d=this.state,p=d._bounds,v=d._initial,T=d._active,w=d._intentional,x=d.lastOffset,N=d.movement,P=this.getInternalMovement(i,this.state),O=w[0]===!1?HR(P[0],f[0]):w[0],k=w[1]===!1?HR(P[1],f[1]):w[1],F=this.checkIntentionality([O,k],P);if(F._blocked)return Ei({},F,{_movement:P,delta:[0,0]});var G=F._intentional,K=P,H,R;if(G[0]!==!1&&w[0]===!1&&(R=ep(o,this.state),H=ep(l,this.state),v[0]=R[0],p[0]=H[0]),G[1]!==!1&&w[1]===!1){var I,D;R=(I=R)!=null?I:ep(o,this.state),H=(D=H)!=null?D:ep(l,this.state),v[1]=R[1],p[1]=H[1]}var V=[G[0]!==!1?P[0]-G[0]:v[0],G[1]!==!1?P[1]-G[1]:v[1]],U=BR(V,x),z=T?c:[0,0];return V=GR(p,BR(V,v),z),Ei({},F,{intentional:G[0]!==!1||G[1]!==!1,_initial:v,_movement:K,movement:V,values:i,offset:GR(p,U,z),delta:Vk(V,N)})},e.clean=function(){this.clearTimeout()},EX(t,[{key:"config",get:function(){return this.controller.config[this.stateKey]}},{key:"enabled",get:function(){return this.controller.config.enabled&&this.config.enabled}},{key:"state",get:function(){return this.controller.state[this.stateKey]}},{key:"handler",get:function(){return this.controller.handlers[this.stateKey]}}]),t})();function HR(t,e){return Math.abs(t)>=e?u_(t)*e:!1}function GR(t,e,n){var i=e[0],r=e[1],o=n[0],l=n[1],c=t[0],f=c[0],d=c[1],p=t[1],v=p[0],T=p[1];return[Ef(i,f,d,o),Ef(r,v,T,l)]}function $v(t,e,n){var i=t.state,r=t.args,o=e.timeStamp,l=e.type,c=i.values,f=n?0:o-i.startTime;return{_lastEventType:l,event:e,timeStamp:o,elapsedTime:f,args:r,previous:c}}function LX(t,e,n){var i=t.state.offset,r=n.timeStamp;return Ei({},Bk()[t.stateKey],{_active:!0,values:e,initial:e,offset:i,lastOffset:i,startTime:r})}function OX(t,e){return function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return t.call.apply(t,[this,Ei({},e,{event:n})].concat(r))}}var UX=function(e){var n=this;this.classes=e,this.bind=function(){for(var i={},r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];for(var c=ug(n.classes),f;!(f=c()).done;){var d=f.value;new d(n,o).addBindings(i)}for(var p=0,v=Object.entries(n.nativeRefs);p<v.length;p++){var T=v[p],w=T[0],x=T[1];c_(i,w,OX(x,Ei({},n.state.shared,{args:o})))}return n.config.domTarget?zX(n,i):HX(n,i)},this.effect=function(){return n.config.domTarget&&n.bind(),n.clean},this.clean=function(){var i=zk(n.config),r=n.config.eventOptions;i&&cd(i,qk(n.domListeners),r),Object.values(n.timeouts).forEach(clearTimeout),FX(n)},this.state=Bk(),this.timeouts={},this.domListeners=[],this.windowListeners={}};function FX(t){var e=t.config,n=e.window,i=e.eventOptions,r=t.windowListeners;if(n){for(var o in r){var l=r[o];cd(n,l,i)}t.windowListeners={}}}function BX(t,e){var n=t.config,i=t.windowListeners;n.window&&(cd(n.window,i[e],n.eventOptions),delete i[e])}function qX(t,e,n){var i=t.config,r=t.windowListeners;n===void 0&&(n=[]),i.window&&(cd(i.window,r[e],i.eventOptions),Hk(i.window,r[e]=n,i.eventOptions))}function zX(t,e){var n=t.config,i=t.domListeners,r=zk(n);if(!r)throw new Error("domTarget must be defined");var o=n.eventOptions;cd(r,qk(i),o);for(var l=0,c=Object.entries(e);l<c.length;l++){var f=c[l],d=f[0],p=f[1],v=d.slice(2).toLowerCase();i.push([v,Uk.apply(void 0,p)])}Hk(r,i,o)}function HX(t,e){for(var n=t.config,i={},r=n.eventOptions.capture?"Capture":"",o=0,l=Object.entries(e);o<l.length;o++){var c=l[o],f=c[0],d=c[1],p=Array.isArray(d)?d:[d],v=f+r;i[v]=Uk.apply(void 0,p)}return i}function qk(t){return t===void 0&&(t=[]),t.splice(0,t.length)}function zk(t){var e=t.domTarget;return e&&"current"in e?e.current:e}function c_(t,e,n){t[e]||(t[e]=[]),t[e].push(n)}function Hk(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var i=ug(e),r;!(r=i()).done;){var o=r.value,l=o[0],c=o[1];t.addEventListener(l,c,n)}}function cd(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var i=ug(e),r;!(r=i()).done;){var o=r.value,l=o[0],c=o[1];t.removeEventListener(l,c,n)}}function GX(t,e,n){n===void 0&&(n={});var i=$X(t),r=Cn.useMemo(function(){return new UX(i)},[]);return r.config=e,r.handlers=t,r.nativeRefs=n,Cn.useEffect(r.effect,[]),r.config.domTarget?jX:r.bind}function jX(){}function $X(t){var e=new Set;return t.drag&&e.add(ka.get("drag")),t.wheel&&e.add(ka.get("wheel")),t.scroll&&e.add(ka.get("scroll")),t.move&&e.add(ka.get("move")),t.pinch&&e.add(ka.get("pinch")),t.hover&&e.add(ka.get("hover")),e}var KX=(function(t){Lk(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.getInternalMovement=function(r,o){return Vk(r,o.initial)},n.checkIntentionality=function(r,o){if(r[0]===!1&&r[1]===!1)return{_intentional:r,axis:this.state.axis};var l=o.map(Math.abs),c=l[0],f=l[1],d=this.state.axis||(c>f?"x":c<f?"y":void 0);return!this.config.axis&&!this.config.lockDirection?{_intentional:r,_blocked:!1,axis:d}:d?this.config.axis&&d!==this.config.axis?{_intentional:r,_blocked:!0,axis:d}:(r[d==="x"?1:0]=!1,{_intentional:r,_blocked:!1,axis:d}):{_intentional:[!1,!1],_blocked:!1,axis:d}},n.getKinematics=function(r,o){var l=this.getMovement(r);if(!l._blocked){var c=o.timeStamp-this.state.timeStamp;Object.assign(l,yX(l.movement,l.delta,c))}return l},n.mapStateValues=function(r){return{xy:r.values,vxvy:r.velocities}},e})(VX);function Gk(t){if("touches"in t){var e=t.targetTouches,n=t.changedTouches;return e.length>0?e:n}return null}function jR(t){var e="buttons"in t?t.buttons:0,n=Gk(t),i=n&&n.length||0,r=i>0||e>0,o=t.shiftKey,l=t.altKey,c=t.metaKey,f=t.ctrlKey;return{touches:i,down:r,buttons:e,shiftKey:o,altKey:l,metaKey:c,ctrlKey:f}}function $R(t){var e=Gk(t),n=e?e[0]:t,i=n.clientX,r=n.clientY;return[i,r]}var YX=3,JX=220,WX=(function(t){Lk(e,t);function e(){var i;return i=t.apply(this,arguments)||this,i.ingKey="dragging",i.stateKey="drag",i.onDragStart=function(r){!i.enabled||i.state._active||(qX(i.controller,i.stateKey,[["pointermove",i.onDragChange],["pointerup",i.onDragEnd],["pointercancel",i.onDragEnd]]),i.updateGestureState({_pointerId:r.pointerId}),i.config.delay>0?(i.state._delayedEvent=!0,"persist"in r&&typeof r.persist=="function"&&r.persist(),i.setTimeout(i.startDrag.bind(Zh(i)),i.config.delay,r)):i.startDrag(r))},i.onDragChange=function(r){if(!i.state.canceled&&r.pointerId===i.state._pointerId){if(!i.state._active){i.state._delayedEvent&&(i.clearTimeout(),i.startDrag(r));return}var o=jR(r);if(!o.down){i.onDragEnd(r);return}i.updateSharedState(o);var l=$R(r),c=i.getKinematics(l,r),f=$v(Zh(i),r),d=i.state._isTap,p=l_(c._movement);d&&p>=YX&&(d=!1),i.updateGestureState(Ei({},f,c,{_isTap:d})),i.fireGestureHandler()}},i.onDragEnd=function(r){if(r.pointerId===i.state._pointerId){i.state._active=!1,i.updateSharedState({down:!1,buttons:0,touches:0});var o=i.state._isTap,l=i.state.velocities,c=l[0],f=l[1],d=i.state.movement,p=d[0],v=d[1],T=i.state._intentional,w=T[0],x=T[1],N=i.config.swipeVelocity,P=N[0],O=N[1],k=i.config.swipeDistance,F=k[0],G=k[1],K=Ei({},$v(Zh(i),r),i.getMovement(i.state.values)),H=[0,0];K.elapsedTime<JX&&(w!==!1&&Math.abs(c)>P&&Math.abs(p)>F&&(H[0]=u_(c)),x!==!1&&Math.abs(f)>O&&Math.abs(v)>G&&(H[1]=u_(f))),i.updateGestureState(Ei({},K,{tap:o,swipe:H})),i.fireGestureHandler(o===!0)}},i.clean=function(){t.prototype.clean.call(Zh(i)),i.state._delayedEvent=!1,BX(i.controller,i.stateKey)},i.onCancel=function(){i.state.canceled||(i.updateGestureState({canceled:!0}),i.state._active=!1,i.updateSharedState({down:!1,buttons:0,touches:0}),requestAnimationFrame(function(){return i.fireGestureHandler()}))},i.onClick=function(r){i.state._isTap||r.stopPropagation()},i}var n=e.prototype;return n.startDrag=function(r){var o=$R(r);this.updateSharedState(jR(r)),this.updateGestureState(Ei({},LX(this,o,r),$v(this,r,!0),{_pointerId:r.pointerId,cancel:this.onCancel})),this.updateGestureState(this.getMovement(o)),this.fireGestureHandler()},n.addBindings=function(r){if(c_(r,"onPointerDown",this.onDragStart),this.config.filterTaps){var o=this.controller.config.eventOptions.capture?"onClick":"onClickCapture";c_(r,o,this.onClick)}},e})(KX);function XX(t,e){var n,i=[],r,o=!1;function l(){for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return o&&n===this&&e(f,i)||(r=t.apply(this,f),o=!0,n=this,i=f),r}return l}function xp(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,i,r;if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!xp(t[i],e[i]))return!1;return!0}var o;if(typeof Map=="function"&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(o=t.entries();!(i=o.next()).done;)if(!e.has(i.value[0]))return!1;for(o=t.entries();!(i=o.next()).done;)if(!xp(i.value[1],e.get(i.value[0])))return!1;return!0}if(typeof Set=="function"&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(o=t.entries();!(i=o.next()).done;)if(!e.has(i.value[0]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,r[i]))return!1;if(typeof Element<"u"&&t instanceof Element)return!1;for(i=n;i--!==0;)if(!(r[i]==="_owner"&&t.$$typeof)&&!xp(t[r[i]],e[r[i]]))return!1;return!0}return t!==t&&e!==e}function QX(t,e){try{return xp(t,e)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}function ZX(t,e){e===void 0&&(e={}),ka.set("drag",WX);var n=q.useRef();return n.current||(n.current=XX(kX,QX)),GX({drag:t},n.current(e))}/*!
* tabbable 5.3.3
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var jk=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],_m=jk.join(","),$k=typeof Element>"u",Xa=$k?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,f_=!$k&&Element.prototype.getRootNode?function(t){return t.getRootNode()}:function(t){return t.ownerDocument},Kk=function(e,n,i){var r=Array.prototype.slice.apply(e.querySelectorAll(_m));return n&&Xa.call(e,_m)&&r.unshift(e),r=r.filter(i),r},Yk=function t(e,n,i){for(var r=[],o=Array.from(e);o.length;){var l=o.shift();if(l.tagName==="SLOT"){var c=l.assignedElements(),f=c.length?c:l.children,d=t(f,!0,i);i.flatten?r.push.apply(r,d):r.push({scope:l,candidates:d})}else{var p=Xa.call(l,_m);p&&i.filter(l)&&(n||!e.includes(l))&&r.push(l);var v=l.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(l),T=!i.shadowRootFilter||i.shadowRootFilter(l);if(v&&T){var w=t(v===!0?l.children:v.children,!0,i);i.flatten?r.push.apply(r,w):r.push({scope:l,candidates:w})}else o.unshift.apply(o,l.children)}}return r},Jk=function(e,n){return e.tabIndex<0&&(n||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||e.isContentEditable)&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},eQ=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},Wk=function(e){return e.tagName==="INPUT"},tQ=function(e){return Wk(e)&&e.type==="hidden"},nQ=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(i){return i.tagName==="SUMMARY"});return n},iQ=function(e,n){for(var i=0;i<e.length;i++)if(e[i].checked&&e[i].form===n)return e[i]},rQ=function(e){if(!e.name)return!0;var n=e.form||f_(e),i=function(c){return n.querySelectorAll('input[type="radio"][name="'+c+'"]')},r;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")r=i(window.CSS.escape(e.name));else try{r=i(e.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var o=iQ(r,e.form);return!o||o===e},sQ=function(e){return Wk(e)&&e.type==="radio"},oQ=function(e){return sQ(e)&&!rQ(e)},KR=function(e){var n=e.getBoundingClientRect(),i=n.width,r=n.height;return i===0&&r===0},aQ=function(e,n){var i=n.displayCheck,r=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var o=Xa.call(e,"details>summary:first-of-type"),l=o?e.parentElement:e;if(Xa.call(l,"details:not([open]) *"))return!0;var c=f_(e).host,f=(c==null?void 0:c.ownerDocument.contains(c))||e.ownerDocument.contains(e);if(!i||i==="full"){if(typeof r=="function"){for(var d=e;e;){var p=e.parentElement,v=f_(e);if(p&&!p.shadowRoot&&r(p)===!0)return KR(e);e.assignedSlot?e=e.assignedSlot:!p&&v!==e.ownerDocument?e=v.host:e=p}e=d}if(f)return!e.getClientRects().length}else if(i==="non-zero-area")return KR(e);return!1},lQ=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var i=0;i<n.children.length;i++){var r=n.children.item(i);if(r.tagName==="LEGEND")return Xa.call(n,"fieldset[disabled] *")?!0:!r.contains(e)}return!0}n=n.parentElement}return!1},Tm=function(e,n){return!(n.disabled||tQ(n)||aQ(n,e)||nQ(n)||lQ(n))},d_=function(e,n){return!(oQ(n)||Jk(n)<0||!Tm(e,n))},uQ=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},cQ=function t(e){var n=[],i=[];return e.forEach(function(r,o){var l=!!r.scope,c=l?r.scope:r,f=Jk(c,l),d=l?t(r.candidates):c;f===0?l?n.push.apply(n,d):n.push(c):i.push({documentOrder:o,tabIndex:f,item:r,isScope:l,content:d})}),i.sort(eQ).reduce(function(r,o){return o.isScope?r.push.apply(r,o.content):r.push(o.content),r},[]).concat(n)},fQ=function(e,n){n=n||{};var i;return n.getShadowRoot?i=Yk([e],n.includeContainer,{filter:d_.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:uQ}):i=Kk(e,n.includeContainer,d_.bind(null,n)),cQ(i)},dQ=function(e,n){n=n||{};var i;return n.getShadowRoot?i=Yk([e],n.includeContainer,{filter:Tm.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):i=Kk(e,n.includeContainer,Tm.bind(null,n)),i},tp=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return Xa.call(e,_m)===!1?!1:d_(n,e)},hQ=jk.concat("iframe").join(","),Kv=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return Xa.call(e,hQ)===!1?!1:Tm(n,e)};/*!
* focus-trap 6.9.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function YR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function JR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YR(Object(n),!0).forEach(function(i){pQ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function pQ(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var WR=(function(){var t=[];return{activateTrap:function(n){if(t.length>0){var i=t[t.length-1];i!==n&&i.pause()}var r=t.indexOf(n);r===-1||t.splice(r,1),t.push(n)},deactivateTrap:function(n){var i=t.indexOf(n);i!==-1&&t.splice(i,1),t.length>0&&t[t.length-1].unpause()}}})(),mQ=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},gQ=function(e){return e.key==="Escape"||e.key==="Esc"||e.keyCode===27},yQ=function(e){return e.key==="Tab"||e.keyCode===9},XR=function(e){return setTimeout(e,0)},QR=function(e,n){var i=-1;return e.every(function(r,o){return n(r)?(i=o,!1):!0}),i},qc=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return typeof e=="function"?e.apply(void 0,i):e},np=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},vQ=function(e,n){var i=(n==null?void 0:n.document)||document,r=JR({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},n),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},l,c=function(H,R,I){return H&&H[R]!==void 0?H[R]:r[I||R]},f=function(H){return o.containerGroups.findIndex(function(R){var I=R.container,D=R.tabbableNodes;return I.contains(H)||D.find(function(V){return V===H})})},d=function(H){var R=r[H];if(typeof R=="function"){for(var I=arguments.length,D=new Array(I>1?I-1:0),V=1;V<I;V++)D[V-1]=arguments[V];R=R.apply(void 0,D)}if(R===!0&&(R=void 0),!R){if(R===void 0||R===!1)return R;throw new Error("`".concat(H,"` was specified but was not a node, or did not return a node"))}var U=R;if(typeof R=="string"&&(U=i.querySelector(R),!U))throw new Error("`".concat(H,"` as selector refers to no known node"));return U},p=function(){var H=d("initialFocus");if(H===!1)return!1;if(H===void 0)if(f(i.activeElement)>=0)H=i.activeElement;else{var R=o.tabbableGroups[0],I=R&&R.firstTabbableNode;H=I||d("fallbackFocus")}if(!H)throw new Error("Your focus-trap needs to have at least one focusable element");return H},v=function(){if(o.containerGroups=o.containers.map(function(H){var R=fQ(H,r.tabbableOptions),I=dQ(H,r.tabbableOptions);return{container:H,tabbableNodes:R,focusableNodes:I,firstTabbableNode:R.length>0?R[0]:null,lastTabbableNode:R.length>0?R[R.length-1]:null,nextTabbableNode:function(V){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,z=I.findIndex(function(B){return B===V});if(!(z<0))return U?I.slice(z+1).find(function(B){return tp(B,r.tabbableOptions)}):I.slice(0,z).reverse().find(function(B){return tp(B,r.tabbableOptions)})}}}),o.tabbableGroups=o.containerGroups.filter(function(H){return H.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!d("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},T=function K(H){if(H!==!1&&H!==i.activeElement){if(!H||!H.focus){K(p());return}H.focus({preventScroll:!!r.preventScroll}),o.mostRecentlyFocusedNode=H,mQ(H)&&H.select()}},w=function(H){var R=d("setReturnFocus",H);return R||(R===!1?!1:H)},x=function(H){var R=np(H);if(!(f(R)>=0)){if(qc(r.clickOutsideDeactivates,H)){l.deactivate({returnFocus:r.returnFocusOnDeactivate&&!Kv(R,r.tabbableOptions)});return}qc(r.allowOutsideClick,H)||H.preventDefault()}},N=function(H){var R=np(H),I=f(R)>=0;I||R instanceof Document?I&&(o.mostRecentlyFocusedNode=R):(H.stopImmediatePropagation(),T(o.mostRecentlyFocusedNode||p()))},P=function(H){var R=np(H);v();var I=null;if(o.tabbableGroups.length>0){var D=f(R),V=D>=0?o.containerGroups[D]:void 0;if(D<0)H.shiftKey?I=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:I=o.tabbableGroups[0].firstTabbableNode;else if(H.shiftKey){var U=QR(o.tabbableGroups,function(oe){var me=oe.firstTabbableNode;return R===me});if(U<0&&(V.container===R||Kv(R,r.tabbableOptions)&&!tp(R,r.tabbableOptions)&&!V.nextTabbableNode(R,!1))&&(U=D),U>=0){var z=U===0?o.tabbableGroups.length-1:U-1,B=o.tabbableGroups[z];I=B.lastTabbableNode}}else{var Re=QR(o.tabbableGroups,function(oe){var me=oe.lastTabbableNode;return R===me});if(Re<0&&(V.container===R||Kv(R,r.tabbableOptions)&&!tp(R,r.tabbableOptions)&&!V.nextTabbableNode(R))&&(Re=D),Re>=0){var Ue=Re===o.tabbableGroups.length-1?0:Re+1,ee=o.tabbableGroups[Ue];I=ee.firstTabbableNode}}}else I=d("fallbackFocus");I&&(H.preventDefault(),T(I))},O=function(H){if(gQ(H)&&qc(r.escapeDeactivates,H)!==!1){H.preventDefault(),l.deactivate();return}if(yQ(H)){P(H);return}},k=function(H){var R=np(H);f(R)>=0||qc(r.clickOutsideDeactivates,H)||qc(r.allowOutsideClick,H)||(H.preventDefault(),H.stopImmediatePropagation())},F=function(){if(o.active)return WR.activateTrap(l),o.delayInitialFocusTimer=r.delayInitialFocus?XR(function(){T(p())}):T(p()),i.addEventListener("focusin",N,!0),i.addEventListener("mousedown",x,{capture:!0,passive:!1}),i.addEventListener("touchstart",x,{capture:!0,passive:!1}),i.addEventListener("click",k,{capture:!0,passive:!1}),i.addEventListener("keydown",O,{capture:!0,passive:!1}),l},G=function(){if(o.active)return i.removeEventListener("focusin",N,!0),i.removeEventListener("mousedown",x,!0),i.removeEventListener("touchstart",x,!0),i.removeEventListener("click",k,!0),i.removeEventListener("keydown",O,!0),l};return l={get active(){return o.active},get paused(){return o.paused},activate:function(H){if(o.active)return this;var R=c(H,"onActivate"),I=c(H,"onPostActivate"),D=c(H,"checkCanFocusTrap");D||v(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=i.activeElement,R&&R();var V=function(){D&&v(),F(),I&&I()};return D?(D(o.containers.concat()).then(V,V),this):(V(),this)},deactivate:function(H){if(!o.active)return this;var R=JR({onDeactivate:r.onDeactivate,onPostDeactivate:r.onPostDeactivate,checkCanReturnFocus:r.checkCanReturnFocus},H);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,G(),o.active=!1,o.paused=!1,WR.deactivateTrap(l);var I=c(R,"onDeactivate"),D=c(R,"onPostDeactivate"),V=c(R,"checkCanReturnFocus"),U=c(R,"returnFocus","returnFocusOnDeactivate");I&&I();var z=function(){XR(function(){U&&T(w(o.nodeFocusedBeforeActivation)),D&&D()})};return U&&V?(V(w(o.nodeFocusedBeforeActivation)).then(z,z),this):(z(),this)},pause:function(){return o.paused||!o.active?this:(o.paused=!0,G(),this)},unpause:function(){return!o.paused||!o.active?this:(o.paused=!1,v(),F(),this)},updateContainerElements:function(H){var R=[].concat(H).filter(Boolean);return o.containers=R.map(function(I){return typeof I=="string"?i.querySelector(I):I}),o.active&&v(),this}},l.updateContainerElements(e),l};function _Q(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}else return Array.from(t)}var TE=!1;if(typeof window<"u"){var ZR={get passive(){TE=!0}};window.addEventListener("testPassive",null,ZR),window.removeEventListener("testPassive",null,ZR)}var Xk=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),Vo=[],Em=!1,Qk=-1,Sf=void 0,wf=void 0,Zk=function(e){return Vo.some(function(n){return!!(n.options.allowTouchMove&&n.options.allowTouchMove(e))})},Sm=function(e){var n=e||window.event;return Zk(n.target)||n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)},TQ=function(e){if(wf===void 0){var n=!!e&&e.reserveScrollBarGap===!0,i=window.innerWidth-document.documentElement.clientWidth;n&&i>0&&(wf=document.body.style.paddingRight,document.body.style.paddingRight=i+"px")}Sf===void 0&&(Sf=document.body.style.overflow,document.body.style.overflow="hidden")},EQ=function(){wf!==void 0&&(document.body.style.paddingRight=wf,wf=void 0),Sf!==void 0&&(document.body.style.overflow=Sf,Sf=void 0)},SQ=function(e){return e?e.scrollHeight-e.scrollTop<=e.clientHeight:!1},wQ=function(e,n){var i=e.targetTouches[0].clientY-Qk;return Zk(e.target)?!1:n&&n.scrollTop===0&&i>0||SQ(n)&&i<0?Sm(e):(e.stopPropagation(),!0)},AQ=function(e,n){if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!Vo.some(function(r){return r.targetElement===e})){var i={targetElement:e,options:n||{}};Vo=[].concat(_Q(Vo),[i]),Xk?(e.ontouchstart=function(r){r.targetTouches.length===1&&(Qk=r.targetTouches[0].clientY)},e.ontouchmove=function(r){r.targetTouches.length===1&&wQ(r,e)},Em||(document.addEventListener("touchmove",Sm,TE?{passive:!1}:void 0),Em=!0)):TQ(n)}},bQ=function(e){if(!e){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}Vo=Vo.filter(function(n){return n.targetElement!==e}),Xk?(e.ontouchstart=null,e.ontouchmove=null,Em&&Vo.length===0&&(document.removeEventListener("touchmove",Sm,TE?{passive:!1}:void 0),Em=!1)):Vo.length||EQ()},Ha=[],CQ=function(){return Ha.some(function(t){return t.activeTargets.length>0})},xQ=function(){return Ha.some(function(t){return t.skippedTargets.length>0})},e1="ResizeObserver loop completed with undelivered notifications.",IQ=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:e1}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=e1),window.dispatchEvent(t)},Hf;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Hf||(Hf={}));var Ga=function(t){return Object.freeze(t)},RQ=(function(){function t(e,n){this.inlineSize=e,this.blockSize=n,Ga(this)}return t})(),e2=(function(){function t(e,n,i,r){return this.x=e,this.y=n,this.width=i,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Ga(this)}return t.prototype.toJSON=function(){var e=this,n=e.x,i=e.y,r=e.top,o=e.right,l=e.bottom,c=e.left,f=e.width,d=e.height;return{x:n,y:i,top:r,right:o,bottom:l,left:c,width:f,height:d}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t})(),EE=function(t){return t instanceof SVGElement&&"getBBox"in t},t2=function(t){if(EE(t)){var e=t.getBBox(),n=e.width,i=e.height;return!n&&!i}var r=t,o=r.offsetWidth,l=r.offsetHeight;return!(o||l||t.getClientRects().length)},t1=function(t){var e;if(t instanceof Element)return!0;var n=(e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(n&&t instanceof n.Element)},NQ=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Af=typeof window<"u"?window:{},ip=new WeakMap,n1=/auto|scroll/,PQ=/^tb|vertical/,DQ=/msie|trident/i.test(Af.navigator&&Af.navigator.userAgent),Wr=function(t){return parseFloat(t||"0")},hu=function(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=!1),new RQ((n?e:t)||0,(n?t:e)||0)},i1=Ga({devicePixelContentBoxSize:hu(),borderBoxSize:hu(),contentBoxSize:hu(),contentRect:new e2(0,0,0,0)}),n2=function(t,e){if(e===void 0&&(e=!1),ip.has(t)&&!e)return ip.get(t);if(t2(t))return ip.set(t,i1),i1;var n=getComputedStyle(t),i=EE(t)&&t.ownerSVGElement&&t.getBBox(),r=!DQ&&n.boxSizing==="border-box",o=PQ.test(n.writingMode||""),l=!i&&n1.test(n.overflowY||""),c=!i&&n1.test(n.overflowX||""),f=i?0:Wr(n.paddingTop),d=i?0:Wr(n.paddingRight),p=i?0:Wr(n.paddingBottom),v=i?0:Wr(n.paddingLeft),T=i?0:Wr(n.borderTopWidth),w=i?0:Wr(n.borderRightWidth),x=i?0:Wr(n.borderBottomWidth),N=i?0:Wr(n.borderLeftWidth),P=v+d,O=f+p,k=N+w,F=T+x,G=c?t.offsetHeight-F-t.clientHeight:0,K=l?t.offsetWidth-k-t.clientWidth:0,H=r?P+k:0,R=r?O+F:0,I=i?i.width:Wr(n.width)-H-K,D=i?i.height:Wr(n.height)-R-G,V=I+P+K+k,U=D+O+G+F,z=Ga({devicePixelContentBoxSize:hu(Math.round(I*devicePixelRatio),Math.round(D*devicePixelRatio),o),borderBoxSize:hu(V,U,o),contentBoxSize:hu(I,D,o),contentRect:new e2(v,f,I,D)});return ip.set(t,z),z},i2=function(t,e,n){var i=n2(t,n),r=i.borderBoxSize,o=i.contentBoxSize,l=i.devicePixelContentBoxSize;switch(e){case Hf.DEVICE_PIXEL_CONTENT_BOX:return l;case Hf.BORDER_BOX:return r;default:return o}},MQ=(function(){function t(e){var n=n2(e);this.target=e,this.contentRect=n.contentRect,this.borderBoxSize=Ga([n.borderBoxSize]),this.contentBoxSize=Ga([n.contentBoxSize]),this.devicePixelContentBoxSize=Ga([n.devicePixelContentBoxSize])}return t})(),r2=function(t){if(t2(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},kQ=function(){var t=1/0,e=[];Ha.forEach(function(l){if(l.activeTargets.length!==0){var c=[];l.activeTargets.forEach(function(d){var p=new MQ(d.target),v=r2(d.target);c.push(p),d.lastReportedSize=i2(d.target,d.observedBox),v<t&&(t=v)}),e.push(function(){l.callback.call(l.observer,c,l.observer)}),l.activeTargets.splice(0,l.activeTargets.length)}});for(var n=0,i=e;n<i.length;n++){var r=i[n];r()}return t},r1=function(t){Ha.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(r){r.isActive()&&(r2(r.target)>t?n.activeTargets.push(r):n.skippedTargets.push(r))})})},VQ=function(){var t=0;for(r1(t);CQ();)t=kQ(),r1(t);return xQ()&&IQ(),t>0},Yv,s2=[],LQ=function(){return s2.splice(0).forEach(function(t){return t()})},OQ=function(t){if(!Yv){var e=0,n=document.createTextNode(""),i={characterData:!0};new MutationObserver(function(){return LQ()}).observe(n,i),Yv=function(){n.textContent="".concat(e?e--:e++)}}s2.push(t),Yv()},UQ=function(t){OQ(function(){requestAnimationFrame(t)})},Ip=0,FQ=function(){return!!Ip},BQ=250,qQ={attributes:!0,characterData:!0,childList:!0,subtree:!0},s1=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],o1=function(t){return t===void 0&&(t=0),Date.now()+t},Jv=!1,zQ=(function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var n=this;if(e===void 0&&(e=BQ),!Jv){Jv=!0;var i=o1(e);UQ(function(){var r=!1;try{r=VQ()}finally{if(Jv=!1,e=i-o1(),!FQ())return;r?n.run(1e3):e>0?n.run(e):n.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,n=function(){return e.observer&&e.observer.observe(document.body,qQ)};document.body?n():Af.addEventListener("DOMContentLoaded",n)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),s1.forEach(function(n){return Af.addEventListener(n,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),s1.forEach(function(n){return Af.removeEventListener(n,e.listener,!0)}),this.stopped=!0)},t})(),h_=new zQ,a1=function(t){!Ip&&t>0&&h_.start(),Ip+=t,!Ip&&h_.stop()},HQ=function(t){return!EE(t)&&!NQ(t)&&getComputedStyle(t).display==="inline"},GQ=(function(){function t(e,n){this.target=e,this.observedBox=n||Hf.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=i2(this.target,this.observedBox,!0);return HQ(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t})(),jQ=(function(){function t(e,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=n}return t})(),rp=new WeakMap,l1=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},sp=(function(){function t(){}return t.connect=function(e,n){var i=new jQ(e,n);rp.set(e,i)},t.observe=function(e,n,i){var r=rp.get(e),o=r.observationTargets.length===0;l1(r.observationTargets,n)<0&&(o&&Ha.push(r),r.observationTargets.push(new GQ(n,i&&i.box)),a1(1),h_.schedule())},t.unobserve=function(e,n){var i=rp.get(e),r=l1(i.observationTargets,n),o=i.observationTargets.length===1;r>=0&&(o&&Ha.splice(Ha.indexOf(i),1),i.observationTargets.splice(r,1),a1(-1))},t.disconnect=function(e){var n=this,i=rp.get(e);i.observationTargets.slice().forEach(function(r){return n.unobserve(e,r.target)}),i.activeTargets.splice(0,i.activeTargets.length)},t})(),$Q=(function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");sp.connect(this,e)}return t.prototype.observe=function(e,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!t1(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");sp.observe(this,e,n)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!t1(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");sp.unobserve(this,e)},t.prototype.disconnect=function(){sp.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t})();function ri(){return ri=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ri.apply(this,arguments)}function Rp(t,e){if(t==null)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)e.indexOf(n=o[i])>=0||(r[n]=t[n]);return r}var bf=typeof window<"u"?q.useLayoutEffect:q.useEffect;function zc(t,e,n){return e=(e=+e)==e?e:0,n=(n=+n)==n?n:0,(t=+t)==t&&(t=(t=t<=n?t:n)>=e?t:e),t}function op(t){var e=Math.round(t);if(Number.isNaN(t))throw new TypeError("Found a NaN! Check your snapPoints / defaultSnap / snapTo ");return e}var KQ={box:"border-box"};function Wv(t,e){var n=e.label,i=e.enabled,r=e.resizeSourceRef,o=q.useState(0),l=o[0],c=o[1];q.useDebugValue(n+": "+l);var f=q.useCallback(function(d){c(d[0].borderBoxSize[0].blockSize),r.current="element"},[r]);return bf(function(){if(t.current&&i){var d=new $Q(f);return d.observe(t.current,KQ),function(){d.disconnect()}}},[t,f,i]),i?l:0}function ni(t){return t===void 0&&(t=1e3),new Promise(function(e){return setTimeout(e,t)})}var u1={DRAG:{target:"#overlay.dragging",actions:"onOpenEnd"}},c1={RESIZE:{target:"#overlay.resizing",actions:"onOpenEnd"}},YQ=_W({id:"overlay",initial:"closed",context:{initialState:"CLOSED"},states:{closed:{on:{OPEN:"opening",CLOSE:void 0}},opening:{initial:"start",states:{start:{invoke:{src:"onOpenStart",onDone:"transition"}},transition:{always:[{target:"immediately",cond:"initiallyOpen"},{target:"smoothly",cond:"initiallyClosed"}]},immediately:{initial:"open",states:{open:{invoke:{src:"openImmediately",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"#overlay.opening.end"},on:ri({},u1,c1)}}},smoothly:{initial:"visuallyHidden",states:{visuallyHidden:{invoke:{src:"renderVisuallyHidden",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"open"}},open:{invoke:{src:"openSmoothly",onDone:"#overlay.opening.end"},on:ri({},u1,c1)}}},end:{invoke:{src:"onOpenEnd",onDone:"done"},on:{CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:ri({},{CLOSE:{target:"#overlay.closing",actions:"onOpenCancel"}}),onDone:"open"},open:{on:{DRAG:"#overlay.dragging",SNAP:"snapping",RESIZE:"resizing"}},dragging:{on:{SNAP:"snapping"}},snapping:{initial:"start",states:{start:{invoke:{src:"onSnapStart",onDone:"snappingSmoothly"},entry:[TW({y:function(t,e){return e.payload.y},velocity:function(t,e){return e.payload.velocity},snapSource:function(t,e){var n=e.payload.source;return n===void 0?"custom":n}})]},snappingSmoothly:{invoke:{src:"snapSmoothly",onDone:"end"}},end:{invoke:{src:"onSnapEnd",onDone:"done"},on:{RESIZE:"#overlay.resizing",SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{SNAP:{target:"snapping",actions:"onSnapEnd"},RESIZE:{target:"#overlay.resizing",actions:"onSnapCancel"},DRAG:{target:"#overlay.dragging",actions:"onSnapCancel"},CLOSE:{target:"#overlay.closing",actions:"onSnapCancel"}},onDone:"open"},resizing:{initial:"start",states:{start:{invoke:{src:"onResizeStart",onDone:"resizingSmoothly"}},resizingSmoothly:{invoke:{src:"resizeSmoothly",onDone:"end"}},end:{invoke:{src:"onResizeEnd",onDone:"done"},on:{SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{RESIZE:{target:"resizing",actions:"onResizeEnd"},SNAP:{target:"snapping",actions:"onResizeCancel"},DRAG:{target:"#overlay.dragging",actions:"onResizeCancel"},CLOSE:{target:"#overlay.closing",actions:"onResizeCancel"}},onDone:"open"},closing:{initial:"start",states:{start:{invoke:{src:"onCloseStart",onDone:"deactivating"},on:{OPEN:{target:"#overlay.open",actions:"onCloseCancel"}}},deactivating:{invoke:{src:"deactivate",onDone:"closingSmoothly"}},closingSmoothly:{invoke:{src:"closeSmoothly",onDone:"end"}},end:{invoke:{src:"onCloseEnd",onDone:"done"},on:{OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}}},done:{type:"final"}},on:{CLOSE:void 0,OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}},onDone:"closed"}},on:{CLOSE:"closing"}},{actions:{onOpenCancel:function(t,e){},onSnapCancel:function(t,e){},onResizeCancel:function(t,e){},onCloseCancel:function(t,e){},onOpenEnd:function(t,e){},onSnapEnd:function(t,e){},onRezizeEnd:function(t,e){}},services:{onSnapStart:function(){try{return Promise.resolve(ni()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenStart:function(){try{return Promise.resolve(ni()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseStart:function(){try{return Promise.resolve(ni()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeStart:function(){try{return Promise.resolve(ni()).then(function(){})}catch(t){return Promise.reject(t)}},onSnapEnd:function(){try{return Promise.resolve(ni()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenEnd:function(){try{return Promise.resolve(ni()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseEnd:function(){try{return Promise.resolve(ni()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeEnd:function(){try{return Promise.resolve(ni()).then(function(){})}catch(t){return Promise.reject(t)}},renderVisuallyHidden:function(t,e){try{return Promise.resolve(ni()).then(function(){})}catch(n){return Promise.reject(n)}},activate:function(t,e){try{return Promise.resolve(ni()).then(function(){})}catch(n){return Promise.reject(n)}},deactivate:function(t,e){try{return Promise.resolve(ni()).then(function(){})}catch(n){return Promise.reject(n)}},openSmoothly:function(t,e){try{return Promise.resolve(ni()).then(function(){})}catch(n){return Promise.reject(n)}},openImmediately:function(t,e){try{return Promise.resolve(ni()).then(function(){})}catch(n){return Promise.reject(n)}},snapSmoothly:function(t,e){try{return Promise.resolve(ni()).then(function(){})}catch(n){return Promise.reject(n)}},resizeSmoothly:function(t,e){try{return Promise.resolve(ni()).then(function(){})}catch(n){return Promise.reject(n)}},closeSmoothly:function(t,e){try{return Promise.resolve(ni()).then(function(){})}catch(n){return Promise.reject(n)}}},guards:{initiallyClosed:function(t){return t.initialState==="CLOSED"},initiallyOpen:function(t){return t.initialState==="OPEN"}}}),JQ=["children","sibling","className","footer","header","open","initialState","lastSnapRef","initialFocusRef","onDismiss","maxHeight","defaultSnap","snapPoints","blocking","scrollLocking","style","onSpringStart","onSpringCancel","onSpringEnd","reserveScrollBarGap","expandOnContentDrag"],WQ=["velocity"],XQ=["onRest","config"],o2=$W.default,QQ=o2.tension,ap=o2.friction,ZQ=Cn.forwardRef(function(t,e){var n=t.children,i=t.sibling,r=t.className,o=t.footer,l=t.header,c=t.open,f=t.initialState,d=t.lastSnapRef,p=t.initialFocusRef,v=t.onDismiss,T=t.maxHeight,w=t.defaultSnap,x=w===void 0?tZ:w,N=t.snapPoints,P=N===void 0?nZ:N,O=t.blocking,k=O===void 0||O,F=t.scrollLocking,G=F===void 0||F,K=t.style,H=t.onSpringStart,R=t.onSpringCancel,I=t.onSpringEnd,D=t.reserveScrollBarGap,V=D===void 0?k:D,U=t.expandOnContentDrag,z=U!==void 0&&U,B=Rp(t,JQ),Re=(function(){var ue=q.useState(!1),Ee=ue[0],Se=ue[1],de=q.useState({}),Ae=de[0],Ne=de[1],ke=q.useCallback(function(Xe){return Ne(function(et){var Pe;return ri({},et,((Pe={})[Xe]=!1,Pe))}),function(){Ne(function(et){var Pe;return ri({},et,((Pe={})[Xe]=!0,Pe))})}},[]);return q.useEffect(function(){var Xe=Object.values(Ae);Xe.length!==0&&Xe.every(Boolean)&&Se(!0)},[Ae]),{ready:Ee,registerReady:ke}})(),Ue=Re.ready,ee=Re.registerReady,oe=q.useRef(!1),me=q.useRef(H),xe=q.useRef(R),be=q.useRef(I);q.useEffect(function(){me.current=H,xe.current=R,be.current=I},[R,H,I]);var $,Z,pe=XW(function(){return{y:0,ready:0,maxHeight:0,minSnap:0,maxSnap:0}}),re=pe[0],he=pe[1],Te=q.useRef(null),Ve=q.useRef(null),qe=q.useRef(null),yt=q.useRef(null),Un=q.useRef(null),ci=q.useRef(null),xt=q.useRef(0),Jn=q.useRef(),In=q.useRef(!1),Rn=($=q.useMemo(function(){return typeof window<"u"?window.matchMedia("(prefers-reduced-motion: reduce)"):null},[]),Z=q.useRef($==null?void 0:$.matches),q.useDebugValue(Z.current?"reduce":"no-preference"),q.useEffect(function(){var ue=function(Ee){Z.current=Ee.matches};return $==null||$.addListener(ue),function(){return $==null?void 0:$.removeListener(ue)}},[$]),Z),Wn=(function(ue){var Ee=ue.targetRef,Se=ue.enabled,de=ue.reserveScrollBarGap,Ae=q.useRef({activate:function(){throw new TypeError("Tried to activate scroll lock too early")},deactivate:function(){}});return q.useDebugValue(Se?"Enabled":"Disabled"),q.useEffect(function(){if(!Se)return Ae.current.deactivate(),void(Ae.current={activate:function(){},deactivate:function(){}});var Ne=Ee.current,ke=!1;Ae.current={activate:function(){ke||(ke=!0,AQ(Ne,{allowTouchMove:function(Xe){return Xe.closest("[data-body-scroll-lock-ignore]")},reserveScrollBarGap:de}))},deactivate:function(){ke&&(ke=!1,bQ(Ne))}}},[Se,Ee,de]),Ae})({targetRef:Ve,enabled:Ue&&G,reserveScrollBarGap:V}),Si=(function(ue){var Ee=ue.targetRef,Se=ue.enabled,de=q.useRef({activate:function(){throw new TypeError("Tried to activate aria hider too early")},deactivate:function(){}});return q.useDebugValue(Se?"Enabled":"Disabled"),q.useEffect(function(){if(!Se)return de.current.deactivate(),void(de.current={activate:function(){},deactivate:function(){}});var Ae=Ee.current,Ne=!1,ke=[],Xe=[];de.current={activate:function(){if(!Ne){Ne=!0;var et=Ae.parentNode;document.querySelectorAll("body > *").forEach(function(Pe){if(Pe!==et){var $e=Pe.getAttribute("aria-hidden");$e!==null&&$e!=="false"||(ke.push($e),Xe.push(Pe),Pe.setAttribute("aria-hidden","true"))}})}},deactivate:function(){Ne&&(Ne=!1,Xe.forEach(function(et,Pe){var $e=ke[Pe];$e===null?et.removeAttribute("aria-hidden"):et.setAttribute("aria-hidden",$e)}),ke=[],Xe=[])}}},[Ee,Se]),de})({targetRef:Te,enabled:Ue&&k}),Je=(function(ue){var Ee=ue.targetRef,Se=ue.fallbackRef,de=ue.initialFocusRef,Ae=ue.enabled,Ne=q.useRef({activate:function(){throw new TypeError("Tried to activate focus trap too early")},deactivate:function(){}});return q.useDebugValue(Ae?"Enabled":"Disabled"),q.useEffect(function(){if(!Ae)return Ne.current.deactivate(),void(Ne.current={activate:function(){},deactivate:function(){}});var ke=Se.current,Xe=vQ(Ee.current,{onActivate:void 0,initialFocus:de?function(){return(de==null?void 0:de.current)||ke}:void 0,fallbackFocus:ke,escapeDeactivates:!1,clickOutsideDeactivates:!1}),et=!1;Ne.current={activate:function(){try{return et?Promise.resolve():(et=!0,Promise.resolve(Xe.activate()).then(function(){return Promise.resolve(new Promise(function(Pe){return setTimeout(function(){return Pe(void 0)},0)})).then(function(){})}))}catch(Pe){return Promise.reject(Pe)}},deactivate:function(){et&&(et=!1,Xe.deactivate())}}},[Ae,Se,de,Ee]),Ne})({targetRef:Te,fallbackRef:ci,initialFocusRef:p||void 0,enabled:Ue&&k&&p!==!1}),Xn=(function(ue){var Ee=ue.getSnapPoints,Se=ue.heightRef,de=ue.lastSnapRef,Ae=ue.ready,Ne=(function(Mt){var At=Mt.contentRef,fi=Mt.controlledMaxHeight,jt=Mt.footerEnabled,Qn=Mt.footerRef,er=Mt.headerEnabled,Fn=Mt.headerRef,di=Mt.registerReady,as=Mt.resizeSourceRef,Oi=q.useMemo(function(){return di("contentHeight")},[di]),Ot=(function(wr,nr,ir){var Ai=q.useMemo(function(){return nr("maxHeight")},[nr]),rr=q.useState(function(){return op(wr)||typeof window<"u"?window.innerHeight:0}),qr=rr[0],hi=rr[1],$t=qr>0,Ar=q.useRef(0);return q.useDebugValue(wr?"controlled":"auto"),q.useEffect(function(){$t&&Ai()},[$t,Ai]),bf(function(){if(wr)return hi(op(wr)),void(ir.current="maxheightprop");var br=function(){Ar.current||(Ar.current=requestAnimationFrame(function(){hi(window.innerHeight),ir.current="window",Ar.current=0}))};return window.addEventListener("resize",br),hi(window.innerHeight),ir.current="window",Ai(),function(){window.removeEventListener("resize",br),cancelAnimationFrame(Ar.current)}},[wr,Ai,ir]),qr})(fi,di,as),cn=Wv(Fn,{label:"headerHeight",enabled:er,resizeSourceRef:as}),Ui=Wv(At,{label:"contentHeight",enabled:!0,resizeSourceRef:as}),tr=Wv(Qn,{label:"footerHeight",enabled:jt,resizeSourceRef:as}),Fi=Math.min(Ot-cn-tr,Ui)+cn+tr;q.useDebugValue("minHeight: "+Fi);var sa=Ui>0;return q.useEffect(function(){sa&&Oi()},[sa,Oi]),{maxHeight:Ot,minHeight:Fi,headerHeight:cn,footerHeight:tr}})({contentRef:ue.contentRef,controlledMaxHeight:ue.controlledMaxHeight,footerEnabled:ue.footerEnabled,footerRef:ue.footerRef,headerEnabled:ue.headerEnabled,headerRef:ue.headerRef,registerReady:ue.registerReady,resizeSourceRef:ue.resizeSourceRef}),ke=Ne.maxHeight,Xe=Ne.minHeight,et=Ne.headerHeight,Pe=Ne.footerHeight,$e=(function(Mt,At){var fi=[].concat(Mt).map(op).reduce(function(Fn,di){return Fn.add(zc(di,0,At)),Fn},new Set),jt=Array.from(fi),Qn=Math.min.apply(Math,jt);if(Number.isNaN(Qn))throw new TypeError("minSnap is NaN");var er=Math.max.apply(Math,jt);if(Number.isNaN(er))throw new TypeError("maxSnap is NaN");return{snapPoints:jt,minSnap:Qn,maxSnap:er}})(Ae?Ee({height:Se.current,footerHeight:Pe,headerHeight:et,minHeight:Xe,maxHeight:ke}):[0],ke),ln=$e.snapPoints,Zi=$e.minSnap,un=$e.maxSnap;return q.useDebugValue("minSnap: "+Zi+", maxSnap:"+un),{minSnap:Zi,maxSnap:un,findSnap:function(Mt){var At=op(typeof Mt=="function"?Mt({footerHeight:Pe,headerHeight:et,height:Se.current,minHeight:Xe,maxHeight:ke,snapPoints:ln,lastSnap:de.current}):Mt);return ln.reduce(function(fi,jt){return Math.abs(jt-At)<Math.abs(fi-At)?jt:fi},Zi)},maxHeight:ke}})({contentRef:qe,controlledMaxHeight:T,footerEnabled:!!o,footerRef:Un,getSnapPoints:P,headerEnabled:l!==!1,headerRef:yt,heightRef:xt,lastSnapRef:d,ready:Ue,registerReady:ee,resizeSourceRef:Jn}),ft=Xn.minSnap,wi=Xn.maxSnap,Vi=Xn.maxHeight,Li=Xn.findSnap,Tt=q.useRef(Vi),Qt=q.useRef(ft),Ke=q.useRef(wi),Lt=q.useRef(Li),Yt=q.useRef(0);bf(function(){Tt.current=Vi,Ke.current=wi,Qt.current=ft,Lt.current=Li,Yt.current=Li(x)},[Li,x,Vi,wi,ft]);var Zt=q.useCallback(function(ue){var Ee=ue.onRest,Se=ue.config,de=(Se=Se===void 0?{}:Se).velocity,Ae=de===void 0?1:de,Ne=Rp(Se,WQ),ke=Rp(ue,XQ);return new Promise(function(Xe){return he(ri({},ke,{config:ri({velocity:Ae},Ne,{mass:1,tension:QQ,friction:Math.max(ap,ap+(ap-ap*Ae))}),onRest:function(){var et=[].slice.call(arguments);Xe.apply(void 0,et),Ee==null||Ee.apply(void 0,et)}}))})},[he]),Sr=RW(YQ,{devTools:!1,actions:{onOpenCancel:q.useCallback(function(){return xe.current==null?void 0:xe.current({type:"OPEN"})},[]),onSnapCancel:q.useCallback(function(ue){return xe.current==null?void 0:xe.current({type:"SNAP",source:ue.snapSource})},[]),onCloseCancel:q.useCallback(function(){return xe.current==null?void 0:xe.current({type:"CLOSE"})},[]),onResizeCancel:q.useCallback(function(){return xe.current==null?void 0:xe.current({type:"RESIZE",source:Jn.current})},[]),onOpenEnd:q.useCallback(function(){return be.current==null?void 0:be.current({type:"OPEN"})},[]),onSnapEnd:q.useCallback(function(ue,Ee){return be.current==null?void 0:be.current({type:"SNAP",source:ue.snapSource})},[]),onResizeEnd:q.useCallback(function(){return be.current==null?void 0:be.current({type:"RESIZE",source:Jn.current})},[])},context:{initialState:f},services:{onSnapStart:q.useCallback(function(ue,Ee){try{return Promise.resolve(me.current==null?void 0:me.current({type:"SNAP",source:Ee.payload.source||"custom"}))}catch(Se){return Promise.reject(Se)}},[]),onOpenStart:q.useCallback(function(){try{return Promise.resolve(me.current==null?void 0:me.current({type:"OPEN"}))}catch(ue){return Promise.reject(ue)}},[]),onCloseStart:q.useCallback(function(){try{return Promise.resolve(me.current==null?void 0:me.current({type:"CLOSE"}))}catch(ue){return Promise.reject(ue)}},[]),onResizeStart:q.useCallback(function(){try{return Promise.resolve(me.current==null?void 0:me.current({type:"RESIZE",source:Jn.current}))}catch(ue){return Promise.reject(ue)}},[]),onSnapEnd:q.useCallback(function(ue,Ee){try{return Promise.resolve(be.current==null?void 0:be.current({type:"SNAP",source:ue.snapSource}))}catch(Se){return Promise.reject(Se)}},[]),onOpenEnd:q.useCallback(function(){try{return Promise.resolve(be.current==null?void 0:be.current({type:"OPEN"}))}catch(ue){return Promise.reject(ue)}},[]),onCloseEnd:q.useCallback(function(){try{return Promise.resolve(be.current==null?void 0:be.current({type:"CLOSE"}))}catch(ue){return Promise.reject(ue)}},[]),onResizeEnd:q.useCallback(function(){try{return Promise.resolve(be.current==null?void 0:be.current({type:"RESIZE",source:Jn.current}))}catch(ue){return Promise.reject(ue)}},[]),renderVisuallyHidden:q.useCallback(function(ue,Ee){try{return Promise.resolve(Zt({y:Yt.current,ready:0,maxHeight:Tt.current,maxSnap:Ke.current,minSnap:Yt.current,immediate:!0})).then(function(){})}catch(Se){return Promise.reject(Se)}},[Zt]),activate:q.useCallback(function(ue,Ee){try{return oe.current=!0,Promise.resolve(Promise.all([Wn.current.activate(),Je.current.activate(),Si.current.activate()])).then(function(){})}catch(Se){return Promise.reject(Se)}},[Si,Je,Wn]),deactivate:q.useCallback(function(){try{return Wn.current.deactivate(),Je.current.deactivate(),Si.current.deactivate(),oe.current=!1,Promise.resolve()}catch(ue){return Promise.reject(ue)}},[Si,Je,Wn]),openImmediately:q.useCallback(function(){try{return xt.current=Yt.current,Promise.resolve(Zt({y:Yt.current,ready:1,maxHeight:Tt.current,maxSnap:Ke.current,minSnap:Yt.current,immediate:!0})).then(function(){})}catch(ue){return Promise.reject(ue)}},[Zt]),openSmoothly:q.useCallback(function(){try{return Promise.resolve(Zt({y:0,ready:1,maxHeight:Tt.current,maxSnap:Ke.current,minSnap:Yt.current,immediate:!0})).then(function(){return xt.current=Yt.current,Promise.resolve(Zt({y:Yt.current,ready:1,maxHeight:Tt.current,maxSnap:Ke.current,minSnap:Yt.current,immediate:Rn.current})).then(function(){})})}catch(ue){return Promise.reject(ue)}},[Zt,Rn]),snapSmoothly:q.useCallback(function(ue,Ee){try{var Se=Lt.current(ue.y);return xt.current=Se,d.current=Se,Promise.resolve(Zt({y:Se,ready:1,maxHeight:Tt.current,maxSnap:Ke.current,minSnap:Qt.current,immediate:Rn.current,config:{velocity:ue.velocity}})).then(function(){})}catch(de){return Promise.reject(de)}},[Zt,d,Rn]),resizeSmoothly:q.useCallback(function(){try{var ue=Lt.current(xt.current);return xt.current=ue,d.current=ue,Promise.resolve(Zt({y:ue,ready:1,maxHeight:Tt.current,maxSnap:Ke.current,minSnap:Qt.current,immediate:Jn.current!=="element"||Rn.current})).then(function(){})}catch(Ee){return Promise.reject(Ee)}},[Zt,d,Rn]),closeSmoothly:q.useCallback(function(ue,Ee){try{return Zt({minSnap:xt.current,immediate:!0}),xt.current=0,Promise.resolve(Zt({y:0,maxHeight:Tt.current,maxSnap:Ke.current,immediate:Rn.current})).then(function(){return Promise.resolve(Zt({ready:0,immediate:!0})).then(function(){})})}catch(Se){return Promise.reject(Se)}},[Zt,Rn])}}),ra=Sr[0],Nn=Sr[1];q.useEffect(function(){Ue&&Nn(c?"OPEN":"CLOSE")},[c,Nn,Ue]),bf(function(){(Vi||wi||ft)&&Nn("RESIZE")},[Vi,wi,ft,Nn]),q.useEffect(function(){return function(){Wn.current.deactivate(),Je.current.deactivate(),Si.current.deactivate()}},[Si,Je,Wn]),q.useImperativeHandle(e,function(){return{snapTo:function(ue,Ee){var Se=Ee===void 0?{}:Ee,de=Se.velocity,Ae=de===void 0?1:de,Ne=Se.source,ke=Ne===void 0?"custom":Ne;Nn("SNAP",{payload:{y:Lt.current(ue),velocity:Ae,source:ke}})},get height(){return xt.current}}},[Nn]),q.useEffect(function(){var ue=Ve.current,Ee=function(de){In.current&&de.preventDefault()},Se=function(de){ue.scrollTop<0&&(requestAnimationFrame(function(){ue.style.overflow="hidden",ue.scrollTop=0,ue.style.removeProperty("overflow")}),de.preventDefault())};return z&&(ue.addEventListener("scroll",Ee),ue.addEventListener("touchmove",Ee),ue.addEventListener("touchstart",Se)),function(){ue.removeEventListener("scroll",Ee),ue.removeEventListener("touchmove",Ee),ue.removeEventListener("touchstart",Se)}},[z,Ve]);var Pn=ZX(function(ue){var Ee=ue.args,Se=(Ee=Ee===void 0?[]:Ee)[0],de=(Se=Se===void 0?{}:Se).closeOnTap,Ae=de!==void 0&&de,Ne=Se.isContentDragging,ke=Ne!==void 0&&Ne,Xe=ue.cancel,et=ue.direction[1],Pe=ue.down,$e=ue.first,ln=ue.last,Zi=ue.memo,un=Zi===void 0?re.y.getValue():Zi,Mt=ue.tap,At=ue.velocity,fi=-1*ue.movement[1];if(!oe.current)return Xe(),un;if(v&&Ae&&Mt)return Xe(),setTimeout(function(){return v()},0),un;if(Mt)return un;var jt=un+fi,Qn=fi*At,er=Math.max(Qt.current,Math.min(Ke.current,jt+2*Qn));if(!Pe&&v&&et>0&&jt+Qn<Qt.current/2)return Xe(),v(),un;var Fn=Pe?v||Qt.current!==Ke.current?Ef(jt,v?0:Qt.current,Ke.current,.55):jt<Qt.current?Ef(jt,Qt.current,2*Ke.current,.55):Ef(jt,Qt.current/2,Ke.current,.55):er;return z&&ke?(Fn>=Ke.current&&(Fn=Ke.current),un===Ke.current&&Ve.current.scrollTop>0&&(Fn=Ke.current),In.current=Fn<Ke.current):In.current=!1,$e&&Nn("DRAG"),ln?(Nn("SNAP",{payload:{y:Fn,velocity:At>.05?At:1,source:"dragging"}}),un):(he({y:Fn,ready:1,maxHeight:Tt.current,maxSnap:Ke.current,minSnap:Qt.current,immediate:!0,config:{velocity:At}}),un)},{filterTaps:!0});if(Number.isNaN(Ke.current))throw new TypeError("maxSnapRef is NaN!!");if(Number.isNaN(Qt.current))throw new TypeError("minSnapRef is NaN!!");var mn=(function(ue){var Ee,Se=ue.spring,de=Hl([Se.y,Se.maxHeight],function(Pe,$e){return Math.round(zc($e-Pe,0,16))+"px"}),Ae=Hl([Se.y,Se.minSnap,Se.maxSnap],function(Pe,$e,ln){return zc(Pe,$e,ln)+"px"}),Ne=Hl([Se.y,Se.minSnap,Se.maxSnap],function(Pe,$e,ln){return Pe<$e?$e-Pe+"px":Pe>ln?ln-Pe+"px":"0px"}),ke=Hl([Se.y,Se.maxSnap],function(Pe,$e){return Pe>=$e?Math.ceil(Pe-$e):0}),Xe=Hl([Se.y,Se.minSnap],function(Pe,$e){if(!$e)return 0;var ln=Math.max($e/2-45,0);return zc((Pe-ln)*(1/(Math.min($e/2+45,$e)-ln)+0),0,1)}),et=Hl([Se.y,Se.minSnap],function(Pe,$e){return $e?zc(Pe/$e,0,1):0});return(Ee={})["--rsbs-content-opacity"]=Xe,Ee["--rsbs-backdrop-opacity"]=et,Ee["--rsbs-antigap-scale-y"]=ke,Ee["--rsbs-overlay-translate-y"]=Ne,Ee["--rsbs-overlay-rounded"]=de,Ee["--rsbs-overlay-h"]=Ae,Ee})({spring:re});return Cn.createElement(gX.div,ri({},B,{"data-rsbs-root":!0,"data-rsbs-state":eZ.find(ra.matches),"data-rsbs-is-blocking":k,"data-rsbs-is-dismissable":!!v,"data-rsbs-has-header":!!l,"data-rsbs-has-footer":!!o,className:r,ref:Te,style:ri({},mn,K,{opacity:re.ready})}),i,k&&Cn.createElement("div",ri({key:"backdrop","data-rsbs-backdrop":!0},Pn({closeOnTap:!0}))),Cn.createElement("div",{key:"overlay","aria-modal":"true",role:"dialog","data-rsbs-overlay":!0,tabIndex:-1,ref:ci,onKeyDown:function(ue){ue.key==="Escape"&&(ue.stopPropagation(),v&&v())}},l!==!1&&Cn.createElement("div",ri({key:"header","data-rsbs-header":!0,ref:yt},Pn()),l),Cn.createElement("div",ri({key:"scroll","data-rsbs-scroll":!0,ref:Ve},z?Pn({isContentDragging:!0}):{}),Cn.createElement("div",{"data-rsbs-content":!0,ref:qe},n)),o&&Cn.createElement("div",ri({key:"footer",ref:Un,"data-rsbs-footer":!0},Pn()),o)))}),eZ=["closed","opening","open","closing","dragging","snapping","resizing"];function tZ(t){var e=t.lastSnap;return e??Math.min.apply(Math,t.snapPoints)}function nZ(t){return t.minHeight}var iZ=["onSpringStart","onSpringEnd","skipInitialTransition"],cg=q.forwardRef(function(t,e){var n=t.onSpringStart,i=t.onSpringEnd,r=t.skipInitialTransition,o=Rp(t,iZ),l=q.useState(!1),c=l[0],f=l[1],d=q.useRef(),p=q.useRef(null),v=q.useRef(r&&o.open?"OPEN":"CLOSED");bf(function(){if(o.open)return cancelAnimationFrame(d.current),f(!0),function(){v.current="CLOSED"}},[o.open]);var T=q.useCallback(function(x){return Promise.resolve(n==null?void 0:n(x)).then(function(){x.type==="OPEN"&&cancelAnimationFrame(d.current)})},[n]),w=q.useCallback(function(x){return Promise.resolve(i==null?void 0:i(x)).then(function(){x.type==="CLOSE"&&(d.current=requestAnimationFrame(function(){return f(!1)}))})},[i]);return c?Cn.createElement(AJ,{"data-rsbs-portal":!0},Cn.createElement(ZQ,ri({},o,{lastSnapRef:p,ref:e,initialState:v.current,onSpringStart:T,onSpringEnd:w}))):null});const rZ=({open:t,clothingItems:e,clothingSets:n,onGenerate:i,isGenerating:r,suggestedOutfits:o,onClose:l,weatherInfo:c,weatherError:f,favoriteOutfits:d,onToggleFavorite:p,onGenerateVisual:v,generatingVisualFor:T})=>{const w=document.documentElement.classList.contains("dark"),x=q.useRef(null);return q.useEffect(()=>{!r&&o.length>0&&x.current&&x.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[r,o.length]),S.jsx(cg,{open:t,onDismiss:l,className:w?"dark":"",header:S.jsxs("div",{className:"flex items-center justify-between w-full",children:[S.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Crateur de Tenues"}),S.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:N})=>N*.65,snapPoints:({minHeight:N,maxHeight:P})=>[N,P*.65,P*.85],children:S.jsxs("div",{className:"p-6 space-y-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[S.jsx(lk,{clothingItems:e,clothingSets:n,onGenerate:i,isGenerating:r,weatherInfo:c,weatherError:f}),r&&S.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[S.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),S.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"L'IA compose vos tenues..."})]}),S.jsx("div",{ref:x,children:o.length>0&&S.jsx(cm,{outfits:o,allClothingItems:e,allClothingSets:n,favoriteOutfits:d,onToggleFavorite:p,onGenerateVisual:v,generatingVisualFor:T})})]})})},sZ=({open:t,clothingItems:e,clothingSets:n,onGeneratePlan:i,isGenerating:r,vacationPlan:o,onCreateSet:l,onClose:c})=>{const f=document.documentElement.classList.contains("dark");return S.jsx(cg,{open:t,onDismiss:c,className:f?"dark":"",header:S.jsxs("div",{className:"flex items-center justify-between w-full",children:[S.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Planificateur de Valise"}),S.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:d})=>d*.6,snapPoints:({maxHeight:d})=>[d*.55,d*.85],children:S.jsxs("div",{className:"p-6 space-y-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow min-h-[45vh]",children:[S.jsx(uk,{clothingItems:e,clothingSets:n,onGeneratePlan:i,isGenerating:r}),r&&S.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[S.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),S.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"Prparation de votre valise..."})]}),o&&S.jsx(ck,{plan:o,allClothingItems:e,allClothingSets:n,onCreateSet:l})]})})},oZ=({open:t,clothingItems:e,clothingSets:n,onClose:i,onCreateSet:r})=>{const[o,l]=q.useState(new Set),c=new Set(n.flatMap(w=>w.itemIds)),d=e.filter(w=>!c.has(w.id)).reduce((w,x)=>(w[x.category]||(w[x.category]=[]),w[x.category].push(x),w),{}),p=w=>{l(x=>{const N=new Set(x);return N.has(w)?N.delete(w):N.add(w),N})},v=()=>{if(o.size<2){alert("Veuillez slectionner au moins 2 articles.");return}const w=window.prompt("Donnez un nom  cet ensemble :");w&&r(w,Array.from(o))},T=document.documentElement.classList.contains("dark");return S.jsx(cg,{open:t,onDismiss:i,className:T?"dark":"",header:S.jsxs("div",{className:"flex items-center justify-between w-full",children:[S.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Crer un ensemble"}),S.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),footer:o.size>0&&S.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 bg-white dark:bg-raisin-black",children:S.jsxs("button",{onClick:v,disabled:o.size<2,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600",children:[S.jsx(Zm,{}),"Lier ",o.size," article",o.size>1?"s":""]})}),defaultSnap:({maxHeight:w})=>w*.6,snapPoints:({maxHeight:w})=>[w*.6,w*.85],children:S.jsxs("div",{className:"p-4 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[S.jsx("p",{className:"text-sm text-center text-gray-500 dark:text-gray-400 mb-4",children:"Slectionnez les articles que vous souhaitez lier (ex: une veste et son pantalon)."}),S.jsx("div",{className:"space-y-4",children:Object.keys(d).map(w=>d[w].length>0&&S.jsxs("div",{children:[S.jsx("h3",{className:"font-semibold text-lg mb-2",children:w}),S.jsx("div",{className:"grid grid-cols-3 gap-3",children:d[w].map(x=>{const N=o.has(x.id);return S.jsxs("button",{onClick:()=>p(x.id),className:"relative rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform border-2",style:{borderColor:N?"#D4AF37":"transparent"},children:[N&&S.jsx("div",{className:"absolute top-1 right-1 p-0.5 bg-gold rounded-full text-onyx z-10",children:S.jsx(NT,{})}),S.jsx("div",{className:"aspect-square",children:S.jsx("img",{src:x.imageSrc,alt:x.analysis,className:"w-full h-full object-cover"})}),S.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),S.jsx("p",{className:"absolute bottom-1 left-1 right-1 text-white text-xs font-medium line-clamp-2 p-1",children:x.analysis})]},x.id)})})]},w))})]})})},aZ=(t,e)=>{const n=Mu(os,"users",t,"items"),i=aT(n);return dT(i,o=>{const l=o.docs.map(c=>({id:c.id,...c.data()}));e(l)},o=>{console.error("Erreur (items listener):",o)})},lZ=async(t,e)=>{try{const n=Mu(os,"users",t,"items");return(await fT(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'un vtement:",n),n}},f1=async(t,e,n)=>{try{const i=id(os,"users",t,"items",e);await iF(i,n)}catch(i){throw console.error("Erreur lors de la mise  jour d'un vtement:",i),i}},d1=async(t,e)=>{try{const n=id(os,"users",t,"items",e);await cT(n)}catch(n){throw console.error("Erreur lors de la suppression d'un vtement:",n),n}},uZ=(t,e)=>{const n=Mu(os,"users",t,"favoriteOutfits"),i=aT(n);return dT(i,o=>{const l=o.docs.map(c=>({id:c.id,...c.data()}));e(l)},o=>{console.error("Erreur (favoriteOutfits listener):",o)})},cZ=async(t,e)=>{try{const n=Mu(os,"users",t,"favoriteOutfits");return(await fT(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'une tenue favorite:",n),n}},fZ=async(t,e)=>{try{const n=id(os,"users",t,"favoriteOutfits",e);await cT(n)}catch(n){throw console.error("Erreur lors de la suppression d'une tenue favorite:",n),n}},dZ=(t,e)=>{const n=Mu(os,"users",t,"sets"),i=aT(n);return dT(i,o=>{const l=o.docs.map(c=>({id:c.id,...c.data()}));e(l)},o=>{console.error("Erreur (sets listener):",o)})},hZ=async(t,e)=>{try{const n=Mu(os,"users",t,"sets");return(await fT(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'un ensemble:",n),n}},pZ=async(t,e)=>{try{const n=id(os,"users",t,"sets",e);await cT(n)}catch(n){throw console.error("Erreur lors de la suppression d'un ensemble:",n),n}},mZ=async(t,e,n)=>{try{const i=pB(HB,`users/${t}/clothing/${n}.jpg`);return await dB(i,e,"data_url"),await hB(i)}catch(i){throw console.error("Erreur lors de l'upload de l'image:",i),i}},a2=q.createContext(void 0),gZ=t=>new Promise((e,n)=>{const i=new FileReader;i.readAsDataURL(t),i.onload=r=>{var l;const o=new Image;o.src=(l=r.target)==null?void 0:l.result,o.onload=()=>{const c=document.createElement("canvas"),f=800,d=f/o.width;c.width=f,c.height=o.height*d;const p=c.getContext("2d");p?(p.drawImage(o,0,0,c.width,c.height),e(c.toDataURL("image/jpeg",.7))):n(new Error("Canvas context error"))},o.onerror=c=>n(c)},i.onerror=r=>n(r)}),yZ=({children:t,user:e})=>{const[n,i]=q.useState([]),[r,o]=q.useState([]),[l,c]=q.useState([]),[f,d]=q.useState(!1),[p,v]=q.useState(!0);q.useEffect(()=>{if(e){const G=aZ(e.uid,R=>{i(R),v(!1)}),K=dZ(e.uid,R=>{o(R)}),H=uZ(e.uid,R=>{c(R)});return()=>{G(),K(),H()}}else i([]),o([]),c([]),v(!1)},[e]);const T=q.useCallback(async G=>{if(!(G.length===0||!e)){d(!0);try{const K=G.map(V=>gZ(V)),H=await Promise.all(K),R=H.map(V=>V.split(",")[1]),I=await _7(R),D=Math.min(I.length,G.length);for(let V=0;V<D;V++){const U=I[V];let z="";try{z=await lZ(e.uid,{...U,createdAt:Date.now()});const B=await mZ(e.uid,H[V],z);await f1(e.uid,z,{imageSrc:B})}catch(B){if(console.error(`chec de cration/upload pour ${G[V].name}.`,B),z)try{await d1(e.uid,z)}catch(Re){console.error(`chec suppression orphelin ${z}:`,Re)}}}}catch(K){console.error("Erreur lors de l'analyse par lot:",K)}finally{d(!1)}}},[e]),w=q.useCallback(async G=>{if(e)try{await d1(e.uid,G)}catch(K){console.error("Erreur suppression item:",K)}},[e]),x=q.useCallback(async G=>{if(e)try{await f1(e.uid,G.id,G)}catch(K){console.error("Erreur mise  jour item:",K)}},[e]),N=q.useCallback(async G=>{if(e)try{const{id:K,...H}=G;await cZ(e.uid,H)}catch(K){console.error("Erreur ajout favori:",K)}},[e]),P=q.useCallback(async G=>{if(e)try{await fZ(e.uid,G)}catch(K){console.error("Erreur suppression favori:",K)}},[e]),O=q.useCallback(async(G,K)=>{var I;if(!e)return;const H=((I=n.find(D=>D.id===K[0]))==null?void 0:I.imageSrc)||"",R={name:G,itemIds:K,imageSrc:H};try{await hZ(e.uid,R)}catch(D){console.error("Erreur cration set:",D)}},[e,n]),k=q.useCallback(async G=>{if(e)try{await pZ(e.uid,G)}catch(K){console.error("Erreur suppression set:",K)}},[e]),F={clothingItems:n,clothingSets:r,favoriteOutfits:l,isAnalyzing:f,analyzeClothingItems:T,deleteClothingItem:w,updateClothingItem:x,createClothingSet:O,deleteClothingSet:k,addFavoriteOutfit:N,deleteFavoriteOutfit:P,loading:p};return S.jsx(a2.Provider,{value:F,children:t})},vZ=()=>{const t=q.useContext(a2);if(t===void 0)throw new Error("useWardrobe doit tre utilis  l'intrieur d'un WardrobeProvider");return t},_Z=({open:t,onClose:e,allClothingItems:n,allClothingSets:i,favoriteOutfits:r,onToggleFavorite:o,onGenerateVisual:l,generatingVisualFor:c})=>{const f=document.documentElement.classList.contains("dark");return S.jsx(cg,{open:t,onDismiss:e,className:f?"dark":"",header:S.jsxs("div",{className:"flex items-center justify-between w-full",children:[S.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Tenues Favorites"}),S.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:d})=>d*.65,snapPoints:({maxHeight:d})=>[d*.65,d*.85],children:S.jsx("div",{className:"p-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:r.length>0?S.jsx(cm,{outfits:r,allClothingItems:n,allClothingSets:i,favoriteOutfits:r,onToggleFavorite:o,onGenerateVisual:l,generatingVisualFor:c}):S.jsxs("div",{className:"text-center py-12",children:[S.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas encore de tenues favorites."}),S.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Cliquez sur le cur  sur une tenue gnre pour l'ajouter."})]})})})},TZ=({imageUrl:t,onClose:e})=>(q.useEffect(()=>{const n=i=>{i.key==="Escape"&&e()};return window.addEventListener("keydown",n),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",n),document.body.style.overflow="auto"}},[e]),S.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{zIndex:999999},onClick:e,role:"dialog","aria-modal":"true",children:[S.jsx("div",{className:"absolute inset-0 bg-onyx/80 backdrop-blur-md",style:{zIndex:999999}}),S.jsxs("div",{className:"relative bg-white dark:bg-raisin-black rounded-lg shadow-2xl p-4",style:{zIndex:1e6},onClick:n=>n.stopPropagation(),children:[S.jsx("img",{src:t,alt:"Rendu visuel de la tenue",className:"max-w-[85vw] max-h-[75vh] object-contain rounded-lg"}),S.jsx("p",{className:"text-xs text-center text-gray-500 dark:text-gray-400 mt-3",children:"Rendu gnr par IA (image factice)."}),S.jsx("button",{onClick:n=>{n.stopPropagation(),e()},onTouchEnd:n=>{n.stopPropagation(),e()},className:"absolute -top-3 -right-3 p-3 bg-red-500 border-4 border-white rounded-full text-white shadow-2xl hover:bg-red-600 active:scale-95 touch-none",style:{zIndex:1000001},"aria-label":"Fermer",children:S.jsx(RT,{})})]})]})),EZ=()=>{const[t,e]=q.useState(null),[n,i]=q.useState(null),[r,o]=q.useState([]),[l,c]=q.useState(!1),[f,d]=q.useState(null),[p,v]=q.useState(!1),[T,w]=q.useState(null),[x,N]=q.useState(!1),[P,O]=q.useState("home"),[k,F]=q.useState(!1),[G,K]=q.useState(!1),[H,R]=q.useState(!1),[I,D]=q.useState(!1),[V,U]=q.useState(null),[z,B]=q.useState(null),[Re,Ue]=q.useState(null),[ee,oe]=q.useState(null),[me,xe]=q.useState(!1),[be,$]=q.useState(""),[Z,pe]=q.useState("favorites");q.useEffect(()=>{if(n){const de=setTimeout(()=>i(null),5e3);return()=>clearTimeout(de)}},[n]);const{clothingItems:re,clothingSets:he,isAnalyzing:Te,analyzeClothingItems:Ve,deleteClothingItem:qe,createClothingSet:yt,updateClothingItem:Un,deleteClothingSet:ci,favoriteOutfits:xt,addFavoriteOutfit:Jn,deleteFavoriteOutfit:In,loading:Rn}=vZ(),[Wn,Si]=q.useState(null),Je=Cn.useMemo(()=>(re||[]).sort((Ae,Ne)=>(Ne.isFavorite?1:0)-(Ae.isFavorite?1:0)),[re]),Xn=q.useCallback(de=>{const Ae=xt.find(Ne=>Ne.titre===de.titre&&Ne.description===de.description);Ae?(In(Ae.id),Si("Retir des favoris")):(Jn(de),Si("Ajout aux favoris ")),setTimeout(()=>Si(null),2e3)},[xt,Jn,In]),ft=Cn.useMemo(()=>he||[],[he]),wi=Cn.useMemo(()=>new Set(ft.flatMap(de=>de.itemIds||[])),[ft]);q.useEffect(()=>{const de=async Ae=>{const Ne=Ae.coords.latitude,ke=Ae.coords.longitude,Xe=ID.openWeatherApiKey,et=`https://api.openweathermap.org/data/2.5/weather?lat=${Ne}&lon=${ke}&appid=${Xe}&units=metric&lang=fr`;try{const Pe=await fetch(et);if(!Pe.ok)throw new Error("Impossible de rcuprer la mto.");const $e=await Pe.json(),ln=`${Math.round($e.main.temp)}C, ${$e.weather[0].description},  ${$e.name}`;U(ln),B(null)}catch{B("Mto indisponible.")}};navigator.geolocation?navigator.geolocation.getCurrentPosition(de,()=>B("Activez la golocalisation pour la mto.")):B("Golocalisation non supporte.")},[]);const Vi=q.useCallback(async(de,Ae)=>{if(Je.length===0){i("Veuillez d'abord ajouter des vtements.");return}c(!0),i(null);const Ne=V?`Mto actuelle : ${V}. Occasion : ${de}`:`Occasion : ${de}`;try{const ke=await T7(Je,ft,Ne,Ae);o(ke)}catch(ke){i(ke instanceof Error?ke.message:"Erreur inconnue")}finally{c(!1)}},[Je,ft,V]),Li=q.useCallback(async(de,Ae,Ne)=>{if(Je.length===0){i("Veuillez d'abord ajouter des vtements.");return}v(!0),i(null);try{const ke=await S7(Je,ft,de,Ae,Ne);d(ke)}catch(ke){i(ke instanceof Error?ke.message:"Erreur inconnue")}finally{v(!1)}},[Je,ft]),Tt=q.useCallback(async()=>{if(Je.length<3){i("Ajoutez au moins 3 vtements pour une analyse.");return}N(!0),i(null);try{const de=await E7(Je,ft);w(de)}catch(de){i(de instanceof Error?de.message:"Erreur inconnue")}finally{N(!1)}},[Je,ft]),Qt=q.useCallback(async de=>{Ue(de.titre),i(null);try{const Ae=de.vetements.map(ke=>Je.find(Xe=>Xe.id===ke.id||Xe.analysis===ke.description)).filter(ke=>!!ke);if(Ae.length===0)throw new Error("Impossible de retrouver les articles originaux pour le rendu.");const Ne=await A7(Ae,de.description);oe(Ne)}catch(Ae){i(Ae instanceof Error?Ae.message:"Erreur inconnue lors du rendu visuel")}finally{Ue(null)}},[Je]),Ke=q.useCallback(()=>F(!0),[]),Lt=q.useCallback(()=>K(!0),[]),Yt=de=>e(de),Zt=()=>e(null),Sr=de=>{qe(de).catch(i),e(null)},ra=de=>{Un(de).catch(i),e(de)},Nn=de=>{const Ae=`Focus sur l'article : ${de.analysis}`;Vi(Ae,de),e(null),window.innerWidth<768&&F(!0)},Pn=q.useCallback((de,Ae)=>{yt(de,Ae).catch(i)},[yt]),mn=q.useCallback(de=>{ci(de).catch(i)},[ci]),ue={hauts:Je.filter(de=>de.category==="Hauts").length,bas:Je.filter(de=>de.category==="Bas").length,chaussures:Je.filter(de=>de.category==="Chaussures").length,accessoires:Je.filter(de=>de.category==="Accessoires").length},Ee=q.useMemo(()=>{if(P==="home")return[];let de=Je.filter(Ae=>P==="hauts"?Ae.category==="Hauts":P==="bas"?Ae.category==="Bas":P==="chaussures"?Ae.category==="Chaussures":P==="accessoires"?Ae.category==="Accessoires":!1);if(be.trim()){const Ae=be.toLowerCase();de=de.filter(Ne=>Ne.analysis.toLowerCase().includes(Ae)||Ne.color.toLowerCase().includes(Ae)||Ne.material.toLowerCase().includes(Ae))}return[...de].sort((Ae,Ne)=>{switch(Z){case"favorites":return(Ne.isFavorite?1:0)-(Ae.isFavorite?1:0);case"newest":return(Ne.createdAt||0)-(Ae.createdAt||0);case"oldest":return(Ae.createdAt||0)-(Ne.createdAt||0);case"color":return Ae.color.localeCompare(Ne.color);default:return 0}})},[P,Je,be,Z]),Se=k||G||H||!!t||!!T||!!ee;return q.useEffect(()=>{const de=document.querySelector("header");de&&(de.style.zIndex=Se?"10":"50")},[Se]),S.jsxs("main",{className:"container mx-auto px-4 lg:px-8 py-10",children:[n&&S.jsxs("div",{className:"bg-red-500/20 border border-red-500 text-red-300 px-4 py-3 rounded-lg relative mb-8 flex items-center justify-between",role:"alert",children:[S.jsxs("div",{children:[S.jsx("strong",{className:"font-bold",children:"Erreur: "}),S.jsx("span",{className:"inline",children:n})]}),S.jsx("button",{onClick:()=>i(null),className:"p-1 hover:bg-red-500/30 rounded-full transition-colors","aria-label":"Fermer",children:S.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[S.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[Je.length>=3&&S.jsxs("div",{className:"hidden md:block bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-xl p-4 md:p-6 flex flex-col md:flex-row items-start md:items-center gap-4 md:justify-between",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-bold mb-2",children:" Besoin d'inspiration ?"}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour rendre votre garde-robe plus polyvalente"})]}),S.jsx("button",{onClick:Tt,disabled:x,className:"px-4 md:px-6 py-3 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm md:text-base flex-shrink-0",children:x?"Analyse...":"Analyser ma garde-robe"})]}),S.jsx("div",{className:"hidden md:block",children:S.jsx(V7,{onAnalyze:Ve,isAnalyzing:Te})}),S.jsx("div",{className:"hidden md:block",children:S.jsx(hJ,{clothingItems:Je,clothingSets:ft,onItemClick:Yt,onDeleteItem:Sr,onCreateSet:Pn,isLoading:Rn})}),S.jsxs("div",{className:"md:hidden",children:[P==="home"&&S.jsx(yJ,{onAnalyzeWardrobe:Tt,onScrollToOutfits:Ke,onScrollToVacation:Lt,onStartSetCreation:()=>R(!0),onShowFavorites:()=>D(!0),isAnalyzingWardrobe:x,clothingCount:Je.length,favoriteOutfitCount:xt.length}),P!=="home"&&S.jsxs("div",{className:"pb-24",children:[S.jsxs("div",{className:"text-center py-4 px-4",children:[S.jsx("h2",{className:"text-2xl font-bold mb-1 capitalize",children:P}),S.jsxs("p",{className:"text-sm text-gray-500",children:[Ee.length," vtement",Ee.length>1?"s":""]})]}),S.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[S.jsxs("div",{className:"relative",children:[S.jsx(PD,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),S.jsx("input",{type:"text",value:be,onChange:de=>$(de.target.value),placeholder:"Rechercher...",className:"w-full pl-10 pr-10 py-2.5 bg-white dark:bg-raisin-black border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-all"}),be&&S.jsx("button",{onClick:()=>$(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors","aria-label":"Effacer",children:S.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),S.jsxs("div",{className:"relative",children:[S.jsx(DD,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"}),S.jsxs("select",{value:Z,onChange:de=>pe(de.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white dark:bg-raisin-black border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent appearance-none cursor-pointer transition-all",children:[S.jsx("option",{value:"favorites",children:"Favoris d'abord"}),S.jsx("option",{value:"newest",children:"Plus rcents"}),S.jsx("option",{value:"oldest",children:"Plus anciens"}),S.jsx("option",{value:"color",children:"Couleur (A-Z)"})]}),S.jsx(nm,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),Ee.length>0?S.jsx("div",{className:"grid grid-cols-2 gap-3 px-4",children:Ee.map(de=>S.jsxs("div",{onClick:()=>Yt(de),className:"relative bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform",children:[de.isFavorite?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-red-500 z-10",children:S.jsx(Vf,{className:"w-4 h-4"})}):wi.has(de.id)?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:S.jsx(Zm,{})}):null,S.jsx("div",{className:"aspect-square",children:S.jsx("img",{src:de.imageSrc,alt:de.analysis,loading:"lazy",className:"w-full h-full object-cover"})}),S.jsxs("div",{className:"p-3",children:[S.jsx("p",{className:"text-sm font-medium line-clamp-2",children:de.analysis}),S.jsx("p",{className:"text-xs text-gray-500 mt-1",children:de.color})]})]},de.id))}):S.jsx("div",{className:"text-center py-12 px-4",children:be?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"text-6xl mb-4",children:""}),S.jsxs("p",{className:"text-gray-500 font-medium",children:['Aucun rsultat pour "',be,'"']}),S.jsx("button",{onClick:()=>$(""),className:"mt-3 text-gold font-medium",children:"Effacer la recherche"})]}):S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"text-6xl mb-4",children:""}),S.jsx("p",{className:"text-gray-500 font-medium",children:"Aucun vtement dans cette catgorie"}),S.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Appuyez sur + pour en ajouter"})]})})]})]})]}),S.jsxs("div",{className:"lg:col-span-1 space-y-10 lg:sticky lg:top-40 hidden md:block",children:[S.jsx("div",{id:"outfit-generator",children:S.jsx(lk,{clothingItems:Je,clothingSets:ft,onGenerate:Vi,isGenerating:l,weatherInfo:V,weatherError:z})}),r.length>0&&S.jsx(cm,{outfits:r,allClothingItems:Je,allClothingSets:ft,favoriteOutfits:xt,onToggleFavorite:Xn,onGenerateVisual:Qt,generatingVisualFor:Re}),xt.length>0&&S.jsxs("div",{className:"mt-10 border border-black/10 dark:border-white/10 rounded-xl overflow-hidden bg-white dark:bg-raisin-black shadow-sm",children:[S.jsxs("button",{onClick:()=>xe(!me),className:"w-full flex items-center justify-between p-5 hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(Vf,{className:"text-gold w-5 h-5"}),S.jsxs("h2",{className:"text-xl font-serif font-bold text-raisin-black dark:text-snow",children:["Mes Favoris ",S.jsxs("span",{className:"text-sm font-sans font-normal text-gray-500",children:["(",xt.length,")"]})]})]}),S.jsx("div",{className:`transition-transform duration-300 ${me?"rotate-180":""} text-gray-400`,children:S.jsx(nm,{})})]}),me&&S.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 bg-snow dark:bg-onyx/50 max-h-[600px] overflow-y-auto custom-scrollbar",children:S.jsx(cm,{outfits:xt,allClothingItems:Je,allClothingSets:ft,favoriteOutfits:xt,onToggleFavorite:Xn,onGenerateVisual:Qt,generatingVisualFor:Re})})]}),S.jsx("div",{id:"vacation-planner",children:S.jsx(uk,{clothingItems:Je,clothingSets:ft,onGeneratePlan:Li,isGenerating:p})}),f&&S.jsx(ck,{plan:f,allClothingItems:Je,allClothingSets:ft,onCreateSet:Pn})]})]}),t&&S.jsx(mJ,{item:t,clothingSets:ft,onClose:Zt,onUpdate:ra,onGenerateFrom:Nn,onRemoveSet:mn,onDelete:Sr}),T&&S.jsx(_J,{analysis:T,onClose:()=>w(null)}),ee&&S.jsx(TZ,{imageUrl:ee,onClose:()=>oe(null)}),S.jsx(gJ,{onFilesSelected:Ve,isAnalyzing:Te,isOtherModalOpen:Se}),S.jsx(vJ,{activeTab:P,onTabChange:O,counts:ue}),S.jsx(rZ,{open:k,clothingItems:Je,clothingSets:ft,onGenerate:Vi,isGenerating:l,suggestedOutfits:r,onClose:()=>F(!1),weatherInfo:V,weatherError:z,favoriteOutfits:xt,onToggleFavorite:Xn,onGenerateVisual:Qt,generatingVisualFor:Re}),S.jsx(sZ,{open:G,clothingItems:Je,clothingSets:ft,onGeneratePlan:Li,isGenerating:p,vacationPlan:f,onCreateSet:Pn,onClose:()=>K(!1)}),S.jsx(oZ,{open:H,clothingItems:Je,clothingSets:ft,onClose:()=>R(!1),onCreateSet:(de,Ae)=>{Pn(de,Ae),R(!1)}}),S.jsx(_Z,{open:I,onClose:()=>D(!1),allClothingItems:Je,allClothingSets:ft,favoriteOutfits:xt,onToggleFavorite:Xn,onGenerateVisual:Qt,generatingVisualFor:Re}),Wn&&S.jsx("div",{className:"fixed bottom-32 md:bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-slide-up",children:S.jsx("div",{className:"bg-raisin-black dark:bg-white text-white dark:text-raisin-black px-6 py-3 rounded-full shadow-2xl font-medium",children:Wn})})]})},SZ=()=>{const[t,e]=q.useState(null),[n,i]=q.useState("dark");q.useEffect(()=>{const o=RU(Jc,l=>{e(l)});return()=>o()},[]),q.useEffect(()=>{n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[n]);const r=()=>{i(o=>o==="light"?"dark":"light")};return S.jsx("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow transition-colors duration-300",children:t?S.jsxs(S.Fragment,{children:[S.jsx(k7,{theme:n,toggleTheme:r,children:S.jsx(uI,{user:t})}),S.jsx(yZ,{user:t,children:S.jsx(EZ,{})})]}):S.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:S.jsx(uI,{user:t})})})},l2=document.getElementById("root");if(!l2)throw new Error("L'lment root est introuvable dans le DOM");const wZ=jV.createRoot(l2);wZ.render(S.jsx(Cn.StrictMode,{children:S.jsx(SZ,{})}));
