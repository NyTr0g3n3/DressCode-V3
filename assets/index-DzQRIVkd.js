(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function S1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ev={exports:{}},Uc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qw;function eL(){if(Qw)return Uc;Qw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,o){var l=null;if(o!==void 0&&(l=""+o),r.key!==void 0&&(l=""+r.key),"key"in r){o={};for(var c in r)c!=="key"&&(o[c]=r[c])}else o=r;return r=o.ref,{$$typeof:t,type:i,key:l,ref:r!==void 0?r:null,props:o}}return Uc.Fragment=e,Uc.jsx=n,Uc.jsxs=n,Uc}var Xw;function tL(){return Xw||(Xw=1,Ev.exports=eL()),Ev.exports}var S=tL(),Sv={exports:{}},ze={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zw;function nL(){if(Zw)return ze;Zw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),T=Symbol.iterator;function b($){return $===null||typeof $!="object"?null:($=T&&$[T]||$["@@iterator"],typeof $=="function"?$:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,M={};function V($,Z,he){this.props=$,this.context=Z,this.refs=M,this.updater=he||C}V.prototype.isReactComponent={},V.prototype.setState=function($,Z){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,Z,"setState")},V.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function k(){}k.prototype=V.prototype;function F($,Z,he){this.props=$,this.context=Z,this.refs=M,this.updater=he||C}var G=F.prototype=new k;G.constructor=F,N(G,V.prototype),G.isPureReactComponent=!0;var K=Array.isArray;function H(){}var R={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function P($,Z,he){var se=he.ref;return{$$typeof:t,type:$,key:Z,ref:se!==void 0?se:null,props:he}}function U($,Z){return P($.type,Z,$.props)}function L($){return typeof $=="object"&&$!==null&&$.$$typeof===t}function z($){var Z={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(he){return Z[he]})}var q=/\/+/g;function xe($,Z){return typeof $=="object"&&$!==null&&$.key!=null?z(""+$.key):Z.toString(36)}function Ie($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(H,H):($.status="pending",$.then(function(Z){$.status==="pending"&&($.status="fulfilled",$.value=Z)},function(Z){$.status==="pending"&&($.status="rejected",$.reason=Z)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function ee($,Z,he,se,fe){var Ee=typeof $;(Ee==="undefined"||Ee==="boolean")&&($=null);var ke=!1;if($===null)ke=!0;else switch(Ee){case"bigint":case"string":case"number":ke=!0;break;case"object":switch($.$$typeof){case t:case e:ke=!0;break;case p:return ke=$._init,ee(ke($._payload),Z,he,se,fe)}}if(ke)return fe=fe($),ke=se===""?"."+xe($,0):se,K(fe)?(he="",ke!=null&&(he=ke.replace(q,"$&/")+"/"),ee(fe,Z,he,"",function(Rn){return Rn})):fe!=null&&(L(fe)&&(fe=U(fe,he+(fe.key==null||$&&$.key===fe.key?"":(""+fe.key).replace(q,"$&/")+"/")+ke)),Z.push(fe)),1;ke=0;var Ve=se===""?".":se+":";if(K($))for(var yt=0;yt<$.length;yt++)se=$[yt],Ee=Ve+xe(se,yt),ke+=ee(se,Z,he,Ee,fe);else if(yt=b($),typeof yt=="function")for($=yt.call($),yt=0;!(se=$.next()).done;)se=se.value,Ee=Ve+xe(se,yt++),ke+=ee(se,Z,he,Ee,fe);else if(Ee==="object"){if(typeof $.then=="function")return ee(Ie($),Z,he,se,fe);throw Z=String($),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return ke}function re($,Z,he){if($==null)return $;var se=[],fe=0;return ee($,se,"","",function(Ee){return Z.call(he,Ee,fe++)}),se}function me($){if($._status===-1){var Z=$._result;Z=Z(),Z.then(function(he){($._status===0||$._status===-1)&&($._status=1,$._result=he)},function(he){($._status===0||$._status===-1)&&($._status=2,$._result=he)}),$._status===-1&&($._status=0,$._result=Z)}if($._status===1)return $._result.default;throw $._result}var Te=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)},Ae={map:re,forEach:function($,Z,he){re($,function(){Z.apply(this,arguments)},he)},count:function($){var Z=0;return re($,function(){Z++}),Z},toArray:function($){return re($,function(Z){return Z})||[]},only:function($){if(!L($))throw Error("React.Children.only expected to receive a single React element child.");return $}};return ze.Activity=v,ze.Children=Ae,ze.Component=V,ze.Fragment=n,ze.Profiler=r,ze.PureComponent=F,ze.StrictMode=i,ze.Suspense=d,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,ze.__COMPILER_RUNTIME={__proto__:null,c:function($){return R.H.useMemoCache($)}},ze.cache=function($){return function(){return $.apply(null,arguments)}},ze.cacheSignal=function(){return null},ze.cloneElement=function($,Z,he){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var se=N({},$.props),fe=$.key;if(Z!=null)for(Ee in Z.key!==void 0&&(fe=""+Z.key),Z)!I.call(Z,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&Z.ref===void 0||(se[Ee]=Z[Ee]);var Ee=arguments.length-2;if(Ee===1)se.children=he;else if(1<Ee){for(var ke=Array(Ee),Ve=0;Ve<Ee;Ve++)ke[Ve]=arguments[Ve+2];se.children=ke}return P($.type,fe,se)},ze.createContext=function($){return $={$$typeof:l,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:o,_context:$},$},ze.createElement=function($,Z,he){var se,fe={},Ee=null;if(Z!=null)for(se in Z.key!==void 0&&(Ee=""+Z.key),Z)I.call(Z,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(fe[se]=Z[se]);var ke=arguments.length-2;if(ke===1)fe.children=he;else if(1<ke){for(var Ve=Array(ke),yt=0;yt<ke;yt++)Ve[yt]=arguments[yt+2];fe.children=Ve}if($&&$.defaultProps)for(se in ke=$.defaultProps,ke)fe[se]===void 0&&(fe[se]=ke[se]);return P($,Ee,fe)},ze.createRef=function(){return{current:null}},ze.forwardRef=function($){return{$$typeof:c,render:$}},ze.isValidElement=L,ze.lazy=function($){return{$$typeof:p,_payload:{_status:-1,_result:$},_init:me}},ze.memo=function($,Z){return{$$typeof:f,type:$,compare:Z===void 0?null:Z}},ze.startTransition=function($){var Z=R.T,he={};R.T=he;try{var se=$(),fe=R.S;fe!==null&&fe(he,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(H,Te)}catch(Ee){Te(Ee)}finally{Z!==null&&he.types!==null&&(Z.types=he.types),R.T=Z}},ze.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},ze.use=function($){return R.H.use($)},ze.useActionState=function($,Z,he){return R.H.useActionState($,Z,he)},ze.useCallback=function($,Z){return R.H.useCallback($,Z)},ze.useContext=function($){return R.H.useContext($)},ze.useDebugValue=function(){},ze.useDeferredValue=function($,Z){return R.H.useDeferredValue($,Z)},ze.useEffect=function($,Z){return R.H.useEffect($,Z)},ze.useEffectEvent=function($){return R.H.useEffectEvent($)},ze.useId=function(){return R.H.useId()},ze.useImperativeHandle=function($,Z,he){return R.H.useImperativeHandle($,Z,he)},ze.useInsertionEffect=function($,Z){return R.H.useInsertionEffect($,Z)},ze.useLayoutEffect=function($,Z){return R.H.useLayoutEffect($,Z)},ze.useMemo=function($,Z){return R.H.useMemo($,Z)},ze.useOptimistic=function($,Z){return R.H.useOptimistic($,Z)},ze.useReducer=function($,Z,he){return R.H.useReducer($,Z,he)},ze.useRef=function($){return R.H.useRef($)},ze.useState=function($){return R.H.useState($)},ze.useSyncExternalStore=function($,Z,he){return R.H.useSyncExternalStore($,Z,he)},ze.useTransition=function(){return R.H.useTransition()},ze.version="19.2.0",ze}var ex;function I_(){return ex||(ex=1,Sv.exports=nL()),Sv.exports}var B=I_();const kn=S1(B);var bv={exports:{}},Fc={},wv={exports:{}},xv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tx;function iL(){return tx||(tx=1,(function(t){function e(ee,re){var me=ee.length;ee.push(re);e:for(;0<me;){var Te=me-1>>>1,Ae=ee[Te];if(0<r(Ae,re))ee[Te]=re,ee[me]=Ae,me=Te;else break e}}function n(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var re=ee[0],me=ee.pop();if(me!==re){ee[0]=me;e:for(var Te=0,Ae=ee.length,$=Ae>>>1;Te<$;){var Z=2*(Te+1)-1,he=ee[Z],se=Z+1,fe=ee[se];if(0>r(he,me))se<Ae&&0>r(fe,he)?(ee[Te]=fe,ee[se]=me,Te=se):(ee[Te]=he,ee[Z]=me,Te=Z);else if(se<Ae&&0>r(fe,me))ee[Te]=fe,ee[se]=me,Te=se;else break e}}return re}function r(ee,re){var me=ee.sortIndex-re.sortIndex;return me!==0?me:ee.id-re.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var d=[],f=[],p=1,v=null,T=3,b=!1,C=!1,N=!1,M=!1,V=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function G(ee){for(var re=n(f);re!==null;){if(re.callback===null)i(f);else if(re.startTime<=ee)i(f),re.sortIndex=re.expirationTime,e(d,re);else break;re=n(f)}}function K(ee){if(N=!1,G(ee),!C)if(n(d)!==null)C=!0,H||(H=!0,z());else{var re=n(f);re!==null&&Ie(K,re.startTime-ee)}}var H=!1,R=-1,I=5,P=-1;function U(){return M?!0:!(t.unstable_now()-P<I)}function L(){if(M=!1,H){var ee=t.unstable_now();P=ee;var re=!0;try{e:{C=!1,N&&(N=!1,k(R),R=-1),b=!0;var me=T;try{t:{for(G(ee),v=n(d);v!==null&&!(v.expirationTime>ee&&U());){var Te=v.callback;if(typeof Te=="function"){v.callback=null,T=v.priorityLevel;var Ae=Te(v.expirationTime<=ee);if(ee=t.unstable_now(),typeof Ae=="function"){v.callback=Ae,G(ee),re=!0;break t}v===n(d)&&i(d),G(ee)}else i(d);v=n(d)}if(v!==null)re=!0;else{var $=n(f);$!==null&&Ie(K,$.startTime-ee),re=!1}}break e}finally{v=null,T=me,b=!1}re=void 0}}finally{re?z():H=!1}}}var z;if(typeof F=="function")z=function(){F(L)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,xe=q.port2;q.port1.onmessage=L,z=function(){xe.postMessage(null)}}else z=function(){V(L,0)};function Ie(ee,re){R=V(function(){ee(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(ee){switch(T){case 1:case 2:case 3:var re=3;break;default:re=T}var me=T;T=re;try{return ee()}finally{T=me}},t.unstable_requestPaint=function(){M=!0},t.unstable_runWithPriority=function(ee,re){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var me=T;T=ee;try{return re()}finally{T=me}},t.unstable_scheduleCallback=function(ee,re,me){var Te=t.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Te+me:Te):me=Te,ee){case 1:var Ae=-1;break;case 2:Ae=250;break;case 5:Ae=1073741823;break;case 4:Ae=1e4;break;default:Ae=5e3}return Ae=me+Ae,ee={id:p++,callback:re,priorityLevel:ee,startTime:me,expirationTime:Ae,sortIndex:-1},me>Te?(ee.sortIndex=me,e(f,ee),n(d)===null&&ee===n(f)&&(N?(k(R),R=-1):N=!0,Ie(K,me-Te))):(ee.sortIndex=Ae,e(d,ee),C||b||(C=!0,H||(H=!0,z()))),ee},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(ee){var re=T;return function(){var me=T;T=re;try{return ee.apply(this,arguments)}finally{T=me}}}})(xv)),xv}var nx;function rL(){return nx||(nx=1,wv.exports=iL()),wv.exports}var Av={exports:{}},ri={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ix;function sL(){if(ix)return ri;ix=1;var t=I_();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(d,f,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:d,containerInfo:f,implementation:p}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return ri.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ri.createPortal=function(d,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,p)},ri.flushSync=function(d){var f=l.T,p=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=f,i.p=p,i.d.f()}},ri.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},ri.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},ri.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var p=f.as,v=c(p,f.crossOrigin),T=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:T,fetchPriority:b}):p==="script"&&i.d.X(d,{crossOrigin:v,integrity:T,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},ri.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=c(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},ri.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,v=c(p,f.crossOrigin);i.d.L(d,p,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},ri.preloadModule=function(d,f){if(typeof d=="string")if(f){var p=c(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},ri.requestFormReset=function(d){i.d.r(d)},ri.unstable_batchedUpdates=function(d,f){return d(f)},ri.useFormState=function(d,f,p){return l.H.useFormState(d,f,p)},ri.useFormStatus=function(){return l.H.useHostTransitionStatus()},ri.version="19.2.0",ri}var rx;function b1(){if(rx)return Av.exports;rx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Av.exports=sL(),Av.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sx;function oL(){if(sx)return Fc;sx=1;var t=rL(),e=I_(),n=b1();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function l(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function c(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function d(s){if(o(s)!==s)throw Error(i(188))}function f(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(i(188));return a!==s?null:s}for(var u=s,h=a;;){var _=u.return;if(_===null)break;var E=_.alternate;if(E===null){if(h=_.return,h!==null){u=h;continue}break}if(_.child===E.child){for(E=_.child;E;){if(E===u)return d(_),s;if(E===h)return d(_),a;E=E.sibling}throw Error(i(188))}if(u.return!==h.return)u=_,h=E;else{for(var x=!1,D=_.child;D;){if(D===u){x=!0,u=_,h=E;break}if(D===h){x=!0,h=_,u=E;break}D=D.sibling}if(!x){for(D=E.child;D;){if(D===u){x=!0,u=E,h=_;break}if(D===h){x=!0,h=E,u=_;break}D=D.sibling}if(!x)throw Error(i(189))}}if(u.alternate!==h)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?s:a}function p(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=p(s),a!==null)return a;s=s.sibling}return null}var v=Object.assign,T=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),F=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function z(s){return s===null||typeof s!="object"?null:(s=L&&s[L]||s["@@iterator"],typeof s=="function"?s:null)}var q=Symbol.for("react.client.reference");function xe(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===q?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case N:return"Fragment";case V:return"Profiler";case M:return"StrictMode";case K:return"Suspense";case H:return"SuspenseList";case P:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case C:return"Portal";case F:return s.displayName||"Context";case k:return(s._context.displayName||"Context")+".Consumer";case G:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case R:return a=s.displayName||null,a!==null?a:xe(s.type)||"Memo";case I:a=s._payload,s=s._init;try{return xe(s(a))}catch{}}return null}var Ie=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Te=[],Ae=-1;function $(s){return{current:s}}function Z(s){0>Ae||(s.current=Te[Ae],Te[Ae]=null,Ae--)}function he(s,a){Ae++,Te[Ae]=s.current,s.current=a}var se=$(null),fe=$(null),Ee=$(null),ke=$(null);function Ve(s,a){switch(he(Ee,a),he(fe,s),he(se,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?Tw(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=Tw(a),s=Ew(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Z(se),he(se,s)}function yt(){Z(se),Z(fe),Z(Ee)}function Rn(s){s.memoizedState!==null&&he(ke,s);var a=se.current,u=Ew(a,s.type);a!==u&&(he(fe,s),he(se,u))}function Ai(s){fe.current===s&&(Z(se),Z(fe)),ke.current===s&&(Z(ke),kc._currentValue=me)}var Nn,pi;function Ln(s){if(Nn===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);Nn=a&&a[1]||"",pi=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Nn+s+pi}var Pn=!1;function On(s,a){if(!s||Pn)return"";Pn=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(ne){var te=ne}Reflect.construct(s,[],le)}else{try{le.call()}catch(ne){te=ne}s.call(le.prototype)}}else{try{throw Error()}catch(ne){te=ne}(le=s())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(ne){if(ne&&te&&typeof ne.stack=="string")return[ne.stack,te.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=h.DetermineComponentFrameRoot(),x=E[0],D=E[1];if(x&&D){var j=x.split(`
`),X=D.split(`
`);for(_=h=0;h<j.length&&!j[h].includes("DetermineComponentFrameRoot");)h++;for(;_<X.length&&!X[_].includes("DetermineComponentFrameRoot");)_++;if(h===j.length||_===X.length)for(h=j.length-1,_=X.length-1;1<=h&&0<=_&&j[h]!==X[_];)_--;for(;1<=h&&0<=_;h--,_--)if(j[h]!==X[_]){if(h!==1||_!==1)do if(h--,_--,0>_||j[h]!==X[_]){var oe=`
`+j[h].replace(" at new "," at ");return s.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",s.displayName)),oe}while(1<=h&&0<=_);break}}}finally{Pn=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?Ln(u):""}function Fi(s,a){switch(s.tag){case 26:case 27:case 5:return Ln(s.type);case 16:return Ln("Lazy");case 13:return s.child!==a&&a!==null?Ln("Suspense Fallback"):Ln("Suspense");case 19:return Ln("SuspenseList");case 0:case 15:return On(s.type,!1);case 11:return On(s.type.render,!1);case 1:return On(s.type,!0);case 31:return Ln("Activity");default:return""}}function Bi(s){try{var a="",u=null;do a+=Fi(s,u),u=s,s=s.return;while(s);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var Ci=Object.prototype.hasOwnProperty,mi=t.unstable_scheduleCallback,gi=t.unstable_cancelCallback,_n=t.unstable_shouldYield,zi=t.unstable_requestPaint,xt=t.unstable_now,zt=t.unstable_getCurrentPriorityLevel,Ge=t.unstable_ImmediatePriority,qt=t.unstable_UserBlockingPriority,rn=t.unstable_NormalPriority,Ot=t.unstable_LowPriority,Un=t.unstable_IdlePriority,We=t.log,fn=t.unstable_setDisableYieldValue,Fn=null,et=null;function ce(s){if(typeof We=="function"&&fn(s),et&&typeof et.setStrictMode=="function")try{et.setStrictMode(Fn,s)}catch{}}var be=Math.clz32?Math.clz32:ht,we=Math.log,je=Math.LN2;function ht(s){return s>>>=0,s===0?32:31-(we(s)/je|0)|0}var Je=256,Qe=262144,nt=4194304;function it(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Me(s,a,u){var h=s.pendingLanes;if(h===0)return 0;var _=0,E=s.suspendedLanes,x=s.pingedLanes;s=s.warmLanes;var D=h&134217727;return D!==0?(h=D&~E,h!==0?_=it(h):(x&=D,x!==0?_=it(x):u||(u=D&~s,u!==0&&(_=it(u))))):(D=h&~E,D!==0?_=it(D):x!==0?_=it(x):u||(u=h&~s,u!==0&&(_=it(u)))),_===0?0:a!==0&&a!==_&&(a&E)===0&&(E=_&-_,u=a&-a,E>=u||E===32&&(u&4194048)!==0)?a:_}function Ke(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function hn(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $n(){var s=nt;return nt<<=1,(nt&62914560)===0&&(nt=4194304),s}function Xt(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function Dt(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function pt(s,a,u,h,_,E){var x=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var D=s.entanglements,j=s.expirationTimes,X=s.hiddenUpdates;for(u=x&~u;0<u;){var oe=31-be(u),le=1<<oe;D[oe]=0,j[oe]=-1;var te=X[oe];if(te!==null)for(X[oe]=null,oe=0;oe<te.length;oe++){var ne=te[oe];ne!==null&&(ne.lane&=-536870913)}u&=~le}h!==0&&Dn(s,h,0),E!==0&&_===0&&s.tag!==0&&(s.suspendedLanes|=E&~(x&~a))}function Dn(s,a,u){s.pendingLanes|=a,s.suspendedLanes&=~a;var h=31-be(a);s.entangledLanes|=a,s.entanglements[h]=s.entanglements[h]|1073741824|u&261930}function pe(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var h=31-be(u),_=1<<h;_&a|s[h]&a&&(s[h]|=a),u&=~_}}function Re(s,a){var u=a&-a;return u=(u&42)!==0?1:tt(u),(u&(s.suspendedLanes|a))!==0?0:u}function tt(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function mt(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Tn(){var s=re.p;return s!==0?s:(s=window.event,s===void 0?32:Gw(s.type))}function xr(s,a){var u=re.p;try{return re.p=s,a()}finally{re.p=u}}var Kn=Math.random().toString(36).slice(2),Rt="__reactFiber$"+Kn,Zt="__reactProps$"+Kn,qi="__reactContainer$"+Kn,rr="__reactEvents$"+Kn,Hi="__reactListeners$"+Kn,ca="__reactHandles$"+Kn,Ar="__reactResources$"+Kn,sr="__reactMarker$"+Kn;function or(s){delete s[Rt],delete s[Zt],delete s[rr],delete s[Hi],delete s[ca]}function Ii(s){var a=s[Rt];if(a)return a;for(var u=s.parentNode;u;){if(a=u[qi]||u[Rt]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=Iw(s);s!==null;){if(u=s[Rt])return u;s=Iw(s)}return a}s=u,u=s.parentNode}return null}function ar(s){if(s=s[Rt]||s[qi]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function Gr(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function yi(s){var a=s[Ar];return a||(a=s[Ar]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Wt(s){s[sr]=!0}var Cr=new Set,Ir={};function vi(s,a){jr(s,a),jr(s+"Capture",a)}function jr(s,a){for(Ir[s]=a,s=0;s<a.length;s++)Cr.add(a[s])}var Sg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ju={},$u={};function yf(s){return Ci.call($u,s)?!0:Ci.call(ju,s)?!1:Sg.test(s)?$u[s]=!0:(ju[s]=!0,!1)}function Ys(s,a,u){if(yf(a))if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+u)}}function Js(s,a,u){if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+u)}}function lr(s,a,u,h){if(h===null)s.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(a,u,""+h)}}function _i(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function vf(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function bg(s,a,u){var h=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var _=h.get,E=h.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return _.call(this)},set:function(x){u=""+x,E.call(this,x)}}),Object.defineProperty(s,a,{enumerable:h.enumerable}),{getValue:function(){return u},setValue:function(x){u=""+x},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function ul(s){if(!s._valueTracker){var a=vf(s)?"checked":"value";s._valueTracker=bg(s,a,""+s[a])}}function Ku(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),h="";return s&&(h=vf(s)?s.checked?"true":"false":s.value),s=h,s!==u?(a.setValue(s),!0):!1}function cl(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var cs=/[\n"\\]/g;function sn(s){return s.replace(cs,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Ws(s,a,u,h,_,E,x,D){s.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?s.type=x:s.removeAttribute("type"),a!=null?x==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+_i(a)):s.value!==""+_i(a)&&(s.value=""+_i(a)):x!=="submit"&&x!=="reset"||s.removeAttribute("value"),a!=null?dl(s,x,_i(a)):u!=null?dl(s,x,_i(u)):h!=null&&s.removeAttribute("value"),_==null&&E!=null&&(s.defaultChecked=!!E),_!=null&&(s.checked=_&&typeof _!="function"&&typeof _!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?s.name=""+_i(D):s.removeAttribute("name")}function da(s,a,u,h,_,E,x,D){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.type=E),a!=null||u!=null){if(!(E!=="submit"&&E!=="reset"||a!=null)){ul(s);return}u=u!=null?""+_i(u):"",a=a!=null?""+_i(a):u,D||a===s.value||(s.value=a),s.defaultValue=a}h=h??_,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=D?s.checked:!!h,s.defaultChecked=!!h,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(s.name=x),ul(s)}function dl(s,a,u){a==="number"&&cl(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function vt(s,a,u,h){if(s=s.options,a){a={};for(var _=0;_<u.length;_++)a["$"+u[_]]=!0;for(u=0;u<s.length;u++)_=a.hasOwnProperty("$"+s[u].value),s[u].selected!==_&&(s[u].selected=_),_&&h&&(s[u].defaultSelected=!0)}else{for(u=""+_i(u),a=null,_=0;_<s.length;_++){if(s[_].value===u){s[_].selected=!0,h&&(s[_].defaultSelected=!0);return}a!==null||s[_].disabled||(a=s[_])}a!==null&&(a.selected=!0)}}function fa(s,a,u){if(a!=null&&(a=""+_i(a),a!==s.value&&(s.value=a),u==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=u!=null?""+_i(u):""}function Qs(s,a,u,h){if(a==null){if(h!=null){if(u!=null)throw Error(i(92));if(Ie(h)){if(1<h.length)throw Error(i(93));h=h[0]}u=h}u==null&&(u=""),a=u}u=_i(a),s.defaultValue=u,h=s.textContent,h===u&&h!==""&&h!==null&&(s.value=h),ul(s)}function ur(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var wg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yu(s,a,u){var h=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?h?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":h?s.setProperty(a,u):typeof u!="number"||u===0||wg.has(a)?a==="float"?s.cssFloat=u:s[a]=(""+u).trim():s[a]=u+"px"}function _f(s,a,u){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,u!=null){for(var h in u)!u.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var _ in a)h=a[_],a.hasOwnProperty(_)&&u[_]!==h&&Yu(s,_,h)}else for(var E in a)a.hasOwnProperty(E)&&Yu(s,E,a[E])}function Ju(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ag=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $r(s){return Ag.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Bn(){}var fl=null;function hl(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ds=null,Gi=null;function Tf(s){var a=ar(s);if(a&&(s=a.stateNode)){var u=s[Zt]||null;e:switch(s=a.stateNode,a.type){case"input":if(Ws(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+sn(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var h=u[a];if(h!==s&&h.form===s.form){var _=h[Zt]||null;if(!_)throw Error(i(90));Ws(h,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(a=0;a<u.length;a++)h=u[a],h.form===s.form&&Ku(h)}break e;case"textarea":fa(s,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&vt(s,!!u.multiple,a,!1)}}}var Wu=!1;function Ef(s,a,u){if(Wu)return s(a,u);Wu=!0;try{var h=s(a);return h}finally{if(Wu=!1,(ds!==null||Gi!==null)&&(yh(),ds&&(a=ds,s=Gi,Gi=ds=null,Tf(a),s)))for(a=0;a<s.length;a++)Tf(s[a])}}function Ri(s,a){var u=s.stateNode;if(u===null)return null;var h=u[Zt]||null;if(h===null)return null;u=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(i(231,a,typeof u));return u}var Rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qu=!1;if(Rr)try{var Kr={};Object.defineProperty(Kr,"passive",{get:function(){Qu=!0}}),window.addEventListener("test",Kr,Kr),window.removeEventListener("test",Kr,Kr)}catch{Qu=!1}var ji=null,pl=null,Yr=null;function Xs(){if(Yr)return Yr;var s,a=pl,u=a.length,h,_="value"in ji?ji.value:ji.textContent,E=_.length;for(s=0;s<u&&a[s]===_[s];s++);var x=u-s;for(h=1;h<=x&&a[u-h]===_[E-h];h++);return Yr=_.slice(s,1<h?1-h:void 0)}function ha(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Zs(){return!0}function Ht(){return!1}function ii(s){function a(u,h,_,E,x){this._reactName=u,this._targetInst=_,this.type=h,this.nativeEvent=E,this.target=x,this.currentTarget=null;for(var D in s)s.hasOwnProperty(D)&&(u=s[D],this[D]=u?u(E):E[D]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Zs:Ht,this.isPropagationStopped=Ht,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Zs)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Zs)},persist:function(){},isPersistent:Zs}),a}var fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pa=ii(fs),eo=v({},fs,{view:0,detail:0}),Sf=ii(eo),to,ml,Ti,ma=v({},eo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:io,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ti&&(Ti&&s.type==="mousemove"?(to=s.screenX-Ti.screenX,ml=s.screenY-Ti.screenY):ml=to=0,Ti=s),to)},movementY:function(s){return"movementY"in s?s.movementY:ml}}),bf=ii(ma),ga=v({},ma,{dataTransfer:0}),wf=ii(ga),Xu=v({},eo,{relatedTarget:0}),no=ii(Xu),xf=v({},fs,{animationName:0,elapsedTime:0,pseudoElement:0}),gl=ii(xf),Cg=v({},fs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Af=ii(Cg),ya=v({},fs,{data:0}),Zu=ii(ya),Cf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ec={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function If(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=tc[s])?!!a[s]:!1}function io(){return If}var Rf=v({},eo,{key:function(s){if(s.key){var a=Cf[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=ha(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ec[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:io,charCode:function(s){return s.type==="keypress"?ha(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ha(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Nf=ii(Rf),hs=v({},ma,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nc=ii(hs),Pf=v({},eo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:io}),Df=ii(Pf),Mf=v({},fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),yl=ii(Mf),Ei=v({},ma,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),kf=ii(Ei),Vf=v({},fs,{newState:0,oldState:0}),ro=ii(Vf),g=[9,13,27,32],w=Rr&&"CompositionEvent"in window,A=null;Rr&&"documentMode"in document&&(A=document.documentMode);var O=Rr&&"TextEvent"in window&&!A,W=Rr&&(!w||A&&8<A&&11>=A),ie=" ",ge=!1;function At(s,a){switch(s){case"keyup":return g.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function En(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Xe=!1;function zn(s,a){switch(s){case"compositionend":return En(a);case"keypress":return a.which!==32?null:(ge=!0,ie);case"textInput":return s=a.data,s===ie&&ge?null:s;default:return null}}function qn(s,a){if(Xe)return s==="compositionend"||!w&&At(s,a)?(s=Xs(),Yr=pl=ji=null,Xe=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return W&&a.locale!=="ko"?null:a.data;default:return null}}var so={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ni(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!so[s.type]:a==="textarea"}function va(s,a,u,h){ds?Gi?Gi.push(h):Gi=[h]:ds=h,a=wh(a,"onChange"),0<a.length&&(u=new pa("onChange","change",null,u,h),s.push({event:u,listeners:a}))}var ps=null,ic=null;function Ck(s){pw(s,0)}function Lf(s){var a=Gr(s);if(Ku(a))return s}function ME(s,a){if(s==="change")return a}var kE=!1;if(Rr){var Ig;if(Rr){var Rg="oninput"in document;if(!Rg){var VE=document.createElement("div");VE.setAttribute("oninput","return;"),Rg=typeof VE.oninput=="function"}Ig=Rg}else Ig=!1;kE=Ig&&(!document.documentMode||9<document.documentMode)}function LE(){ps&&(ps.detachEvent("onpropertychange",OE),ic=ps=null)}function OE(s){if(s.propertyName==="value"&&Lf(ic)){var a=[];va(a,ic,s,hl(s)),Ef(Ck,a)}}function Ik(s,a,u){s==="focusin"?(LE(),ps=a,ic=u,ps.attachEvent("onpropertychange",OE)):s==="focusout"&&LE()}function Rk(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Lf(ic)}function Nk(s,a){if(s==="click")return Lf(a)}function Pk(s,a){if(s==="input"||s==="change")return Lf(a)}function Dk(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var $i=typeof Object.is=="function"?Object.is:Dk;function rc(s,a){if($i(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),h=Object.keys(a);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var _=u[h];if(!Ci.call(a,_)||!$i(s[_],a[_]))return!1}return!0}function UE(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function FE(s,a){var u=UE(s);s=0;for(var h;u;){if(u.nodeType===3){if(h=s+u.textContent.length,s<=a&&h>=a)return{node:u,offset:a-s};s=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=UE(u)}}function BE(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?BE(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function zE(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=cl(s.document);a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=cl(s.document)}return a}function Ng(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var Mk=Rr&&"documentMode"in document&&11>=document.documentMode,vl=null,Pg=null,sc=null,Dg=!1;function qE(s,a,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Dg||vl==null||vl!==cl(h)||(h=vl,"selectionStart"in h&&Ng(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),sc&&rc(sc,h)||(sc=h,h=wh(Pg,"onSelect"),0<h.length&&(a=new pa("onSelect","select",null,a,u),s.push({event:a,listeners:h}),a.target=vl)))}function _a(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var _l={animationend:_a("Animation","AnimationEnd"),animationiteration:_a("Animation","AnimationIteration"),animationstart:_a("Animation","AnimationStart"),transitionrun:_a("Transition","TransitionRun"),transitionstart:_a("Transition","TransitionStart"),transitioncancel:_a("Transition","TransitionCancel"),transitionend:_a("Transition","TransitionEnd")},Mg={},HE={};Rr&&(HE=document.createElement("div").style,"AnimationEvent"in window||(delete _l.animationend.animation,delete _l.animationiteration.animation,delete _l.animationstart.animation),"TransitionEvent"in window||delete _l.transitionend.transition);function Ta(s){if(Mg[s])return Mg[s];if(!_l[s])return s;var a=_l[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in HE)return Mg[s]=a[u];return s}var GE=Ta("animationend"),jE=Ta("animationiteration"),$E=Ta("animationstart"),kk=Ta("transitionrun"),Vk=Ta("transitionstart"),Lk=Ta("transitioncancel"),KE=Ta("transitionend"),YE=new Map,kg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kg.push("scrollEnd");function Nr(s,a){YE.set(s,a),vi(a,[s])}var Of=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},cr=[],Tl=0,Vg=0;function Uf(){for(var s=Tl,a=Vg=Tl=0;a<s;){var u=cr[a];cr[a++]=null;var h=cr[a];cr[a++]=null;var _=cr[a];cr[a++]=null;var E=cr[a];if(cr[a++]=null,h!==null&&_!==null){var x=h.pending;x===null?_.next=_:(_.next=x.next,x.next=_),h.pending=_}E!==0&&JE(u,_,E)}}function Ff(s,a,u,h){cr[Tl++]=s,cr[Tl++]=a,cr[Tl++]=u,cr[Tl++]=h,Vg|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function Lg(s,a,u,h){return Ff(s,a,u,h),Bf(s)}function Ea(s,a){return Ff(s,null,null,a),Bf(s)}function JE(s,a,u){s.lanes|=u;var h=s.alternate;h!==null&&(h.lanes|=u);for(var _=!1,E=s.return;E!==null;)E.childLanes|=u,h=E.alternate,h!==null&&(h.childLanes|=u),E.tag===22&&(s=E.stateNode,s===null||s._visibility&1||(_=!0)),s=E,E=E.return;return s.tag===3?(E=s.stateNode,_&&a!==null&&(_=31-be(u),s=E.hiddenUpdates,h=s[_],h===null?s[_]=[a]:h.push(a),a.lane=u|536870912),E):null}function Bf(s){if(50<Cc)throw Cc=0,jy=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var El={};function Ok(s,a,u,h){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ki(s,a,u,h){return new Ok(s,a,u,h)}function Og(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ms(s,a){var u=s.alternate;return u===null?(u=Ki(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function WE(s,a){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,a=u.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function zf(s,a,u,h,_,E){var x=0;if(h=s,typeof s=="function")Og(s)&&(x=1);else if(typeof s=="string")x=qV(s,u,se.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case P:return s=Ki(31,u,a,_),s.elementType=P,s.lanes=E,s;case N:return Sa(u.children,_,E,a);case M:x=8,_|=24;break;case V:return s=Ki(12,u,a,_|2),s.elementType=V,s.lanes=E,s;case K:return s=Ki(13,u,a,_),s.elementType=K,s.lanes=E,s;case H:return s=Ki(19,u,a,_),s.elementType=H,s.lanes=E,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case F:x=10;break e;case k:x=9;break e;case G:x=11;break e;case R:x=14;break e;case I:x=16,h=null;break e}x=29,u=Error(i(130,s===null?"null":typeof s,"")),h=null}return a=Ki(x,u,a,_),a.elementType=s,a.type=h,a.lanes=E,a}function Sa(s,a,u,h){return s=Ki(7,s,h,a),s.lanes=u,s}function Ug(s,a,u){return s=Ki(6,s,null,a),s.lanes=u,s}function QE(s){var a=Ki(18,null,null,0);return a.stateNode=s,a}function Fg(s,a,u){return a=Ki(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var XE=new WeakMap;function dr(s,a){if(typeof s=="object"&&s!==null){var u=XE.get(s);return u!==void 0?u:(a={value:s,source:a,stack:Bi(a)},XE.set(s,a),a)}return{value:s,source:a,stack:Bi(a)}}var Sl=[],bl=0,qf=null,oc=0,fr=[],hr=0,oo=null,Jr=1,Wr="";function gs(s,a){Sl[bl++]=oc,Sl[bl++]=qf,qf=s,oc=a}function ZE(s,a,u){fr[hr++]=Jr,fr[hr++]=Wr,fr[hr++]=oo,oo=s;var h=Jr;s=Wr;var _=32-be(h)-1;h&=~(1<<_),u+=1;var E=32-be(a)+_;if(30<E){var x=_-_%5;E=(h&(1<<x)-1).toString(32),h>>=x,_-=x,Jr=1<<32-be(a)+_|u<<_|h,Wr=E+s}else Jr=1<<E|u<<_|h,Wr=s}function Bg(s){s.return!==null&&(gs(s,1),ZE(s,1,0))}function zg(s){for(;s===qf;)qf=Sl[--bl],Sl[bl]=null,oc=Sl[--bl],Sl[bl]=null;for(;s===oo;)oo=fr[--hr],fr[hr]=null,Wr=fr[--hr],fr[hr]=null,Jr=fr[--hr],fr[hr]=null}function eS(s,a){fr[hr++]=Jr,fr[hr++]=Wr,fr[hr++]=oo,Jr=a.id,Wr=a.overflow,oo=s}var Yn=null,Gt=null,dt=!1,ao=null,pr=!1,qg=Error(i(519));function lo(s){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ac(dr(a,s)),qg}function tS(s){var a=s.stateNode,u=s.type,h=s.memoizedProps;switch(a[Rt]=s,a[Zt]=h,u){case"dialog":st("cancel",a),st("close",a);break;case"iframe":case"object":case"embed":st("load",a);break;case"video":case"audio":for(u=0;u<Rc.length;u++)st(Rc[u],a);break;case"source":st("error",a);break;case"img":case"image":case"link":st("error",a),st("load",a);break;case"details":st("toggle",a);break;case"input":st("invalid",a),da(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":st("invalid",a);break;case"textarea":st("invalid",a),Qs(a,h.value,h.defaultValue,h.children)}u=h.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||h.suppressHydrationWarning===!0||vw(a.textContent,u)?(h.popover!=null&&(st("beforetoggle",a),st("toggle",a)),h.onScroll!=null&&st("scroll",a),h.onScrollEnd!=null&&st("scrollend",a),h.onClick!=null&&(a.onclick=Bn),a=!0):a=!1,a||lo(s,!0)}function nS(s){for(Yn=s.return;Yn;)switch(Yn.tag){case 5:case 31:case 13:pr=!1;return;case 27:case 3:pr=!0;return;default:Yn=Yn.return}}function wl(s){if(s!==Yn)return!1;if(!dt)return nS(s),dt=!0,!1;var a=s.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||ov(s.type,s.memoizedProps)),u=!u),u&&Gt&&lo(s),nS(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Gt=Cw(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Gt=Cw(s)}else a===27?(a=Gt,bo(s.type)?(s=dv,dv=null,Gt=s):Gt=a):Gt=Yn?gr(s.stateNode.nextSibling):null;return!0}function ba(){Gt=Yn=null,dt=!1}function Hg(){var s=ao;return s!==null&&(ki===null?ki=s:ki.push.apply(ki,s),ao=null),s}function ac(s){ao===null?ao=[s]:ao.push(s)}var Gg=$(null),wa=null,ys=null;function uo(s,a,u){he(Gg,a._currentValue),a._currentValue=u}function vs(s){s._currentValue=Gg.current,Z(Gg)}function jg(s,a,u){for(;s!==null;){var h=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),s===u)break;s=s.return}}function $g(s,a,u,h){var _=s.child;for(_!==null&&(_.return=s);_!==null;){var E=_.dependencies;if(E!==null){var x=_.child;E=E.firstContext;e:for(;E!==null;){var D=E;E=_;for(var j=0;j<a.length;j++)if(D.context===a[j]){E.lanes|=u,D=E.alternate,D!==null&&(D.lanes|=u),jg(E.return,u,s),h||(x=null);break e}E=D.next}}else if(_.tag===18){if(x=_.return,x===null)throw Error(i(341));x.lanes|=u,E=x.alternate,E!==null&&(E.lanes|=u),jg(x,u,s),x=null}else x=_.child;if(x!==null)x.return=_;else for(x=_;x!==null;){if(x===s){x=null;break}if(_=x.sibling,_!==null){_.return=x.return,x=_;break}x=x.return}_=x}}function xl(s,a,u,h){s=null;for(var _=a,E=!1;_!==null;){if(!E){if((_.flags&524288)!==0)E=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var x=_.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var D=_.type;$i(_.pendingProps.value,x.value)||(s!==null?s.push(D):s=[D])}}else if(_===ke.current){if(x=_.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(s!==null?s.push(kc):s=[kc])}_=_.return}s!==null&&$g(a,s,u,h),a.flags|=262144}function Hf(s){for(s=s.firstContext;s!==null;){if(!$i(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function xa(s){wa=s,ys=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Jn(s){return iS(wa,s)}function Gf(s,a){return wa===null&&xa(s),iS(s,a)}function iS(s,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},ys===null){if(s===null)throw Error(i(308));ys=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else ys=ys.next=a;return u}var Uk=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(u,h){s.push(h)}};this.abort=function(){a.aborted=!0,s.forEach(function(u){return u()})}},Fk=t.unstable_scheduleCallback,Bk=t.unstable_NormalPriority,Sn={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Kg(){return{controller:new Uk,data:new Map,refCount:0}}function lc(s){s.refCount--,s.refCount===0&&Fk(Bk,function(){s.controller.abort()})}var uc=null,Yg=0,Al=0,Cl=null;function zk(s,a){if(uc===null){var u=uc=[];Yg=0,Al=Qy(),Cl={status:"pending",value:void 0,then:function(h){u.push(h)}}}return Yg++,a.then(rS,rS),a}function rS(){if(--Yg===0&&uc!==null){Cl!==null&&(Cl.status="fulfilled");var s=uc;uc=null,Al=0,Cl=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function qk(s,a){var u=[],h={status:"pending",value:null,reason:null,then:function(_){u.push(_)}};return s.then(function(){h.status="fulfilled",h.value=a;for(var _=0;_<u.length;_++)(0,u[_])(a)},function(_){for(h.status="rejected",h.reason=_,_=0;_<u.length;_++)(0,u[_])(void 0)}),h}var sS=ee.S;ee.S=function(s,a){qb=xt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&zk(s,a),sS!==null&&sS(s,a)};var Aa=$(null);function Jg(){var s=Aa.current;return s!==null?s:Ut.pooledCache}function jf(s,a){a===null?he(Aa,Aa.current):he(Aa,a.pool)}function oS(){var s=Jg();return s===null?null:{parent:Sn._currentValue,pool:s}}var Il=Error(i(460)),Wg=Error(i(474)),$f=Error(i(542)),Kf={then:function(){}};function aS(s){return s=s.status,s==="fulfilled"||s==="rejected"}function lS(s,a,u){switch(u=s[u],u===void 0?s.push(a):u!==a&&(a.then(Bn,Bn),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,cS(s),s;default:if(typeof a.status=="string")a.then(Bn,Bn);else{if(s=Ut,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(h){if(a.status==="pending"){var _=a;_.status="fulfilled",_.value=h}},function(h){if(a.status==="pending"){var _=a;_.status="rejected",_.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,cS(s),s}throw Ia=a,Il}}function Ca(s){try{var a=s._init;return a(s._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Ia=u,Il):u}}var Ia=null;function uS(){if(Ia===null)throw Error(i(459));var s=Ia;return Ia=null,s}function cS(s){if(s===Il||s===$f)throw Error(i(483))}var Rl=null,cc=0;function Yf(s){var a=cc;return cc+=1,Rl===null&&(Rl=[]),lS(Rl,s,a)}function dc(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function Jf(s,a){throw a.$$typeof===T?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function dS(s){function a(J,Y){if(s){var Q=J.deletions;Q===null?(J.deletions=[Y],J.flags|=16):Q.push(Y)}}function u(J,Y){if(!s)return null;for(;Y!==null;)a(J,Y),Y=Y.sibling;return null}function h(J){for(var Y=new Map;J!==null;)J.key!==null?Y.set(J.key,J):Y.set(J.index,J),J=J.sibling;return Y}function _(J,Y){return J=ms(J,Y),J.index=0,J.sibling=null,J}function E(J,Y,Q){return J.index=Q,s?(Q=J.alternate,Q!==null?(Q=Q.index,Q<Y?(J.flags|=67108866,Y):Q):(J.flags|=67108866,Y)):(J.flags|=1048576,Y)}function x(J){return s&&J.alternate===null&&(J.flags|=67108866),J}function D(J,Y,Q,ae){return Y===null||Y.tag!==6?(Y=Ug(Q,J.mode,ae),Y.return=J,Y):(Y=_(Y,Q),Y.return=J,Y)}function j(J,Y,Q,ae){var Pe=Q.type;return Pe===N?oe(J,Y,Q.props.children,ae,Q.key):Y!==null&&(Y.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===I&&Ca(Pe)===Y.type)?(Y=_(Y,Q.props),dc(Y,Q),Y.return=J,Y):(Y=zf(Q.type,Q.key,Q.props,null,J.mode,ae),dc(Y,Q),Y.return=J,Y)}function X(J,Y,Q,ae){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==Q.containerInfo||Y.stateNode.implementation!==Q.implementation?(Y=Fg(Q,J.mode,ae),Y.return=J,Y):(Y=_(Y,Q.children||[]),Y.return=J,Y)}function oe(J,Y,Q,ae,Pe){return Y===null||Y.tag!==7?(Y=Sa(Q,J.mode,ae,Pe),Y.return=J,Y):(Y=_(Y,Q),Y.return=J,Y)}function le(J,Y,Q){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=Ug(""+Y,J.mode,Q),Y.return=J,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case b:return Q=zf(Y.type,Y.key,Y.props,null,J.mode,Q),dc(Q,Y),Q.return=J,Q;case C:return Y=Fg(Y,J.mode,Q),Y.return=J,Y;case I:return Y=Ca(Y),le(J,Y,Q)}if(Ie(Y)||z(Y))return Y=Sa(Y,J.mode,Q,null),Y.return=J,Y;if(typeof Y.then=="function")return le(J,Yf(Y),Q);if(Y.$$typeof===F)return le(J,Gf(J,Y),Q);Jf(J,Y)}return null}function te(J,Y,Q,ae){var Pe=Y!==null?Y.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Pe!==null?null:D(J,Y,""+Q,ae);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case b:return Q.key===Pe?j(J,Y,Q,ae):null;case C:return Q.key===Pe?X(J,Y,Q,ae):null;case I:return Q=Ca(Q),te(J,Y,Q,ae)}if(Ie(Q)||z(Q))return Pe!==null?null:oe(J,Y,Q,ae,null);if(typeof Q.then=="function")return te(J,Y,Yf(Q),ae);if(Q.$$typeof===F)return te(J,Y,Gf(J,Q),ae);Jf(J,Q)}return null}function ne(J,Y,Q,ae,Pe){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return J=J.get(Q)||null,D(Y,J,""+ae,Pe);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case b:return J=J.get(ae.key===null?Q:ae.key)||null,j(Y,J,ae,Pe);case C:return J=J.get(ae.key===null?Q:ae.key)||null,X(Y,J,ae,Pe);case I:return ae=Ca(ae),ne(J,Y,Q,ae,Pe)}if(Ie(ae)||z(ae))return J=J.get(Q)||null,oe(Y,J,ae,Pe,null);if(typeof ae.then=="function")return ne(J,Y,Q,Yf(ae),Pe);if(ae.$$typeof===F)return ne(J,Y,Q,Gf(Y,ae),Pe);Jf(Y,ae)}return null}function Ce(J,Y,Q,ae){for(var Pe=null,_t=null,Ne=Y,Ye=Y=0,lt=null;Ne!==null&&Ye<Q.length;Ye++){Ne.index>Ye?(lt=Ne,Ne=null):lt=Ne.sibling;var Tt=te(J,Ne,Q[Ye],ae);if(Tt===null){Ne===null&&(Ne=lt);break}s&&Ne&&Tt.alternate===null&&a(J,Ne),Y=E(Tt,Y,Ye),_t===null?Pe=Tt:_t.sibling=Tt,_t=Tt,Ne=lt}if(Ye===Q.length)return u(J,Ne),dt&&gs(J,Ye),Pe;if(Ne===null){for(;Ye<Q.length;Ye++)Ne=le(J,Q[Ye],ae),Ne!==null&&(Y=E(Ne,Y,Ye),_t===null?Pe=Ne:_t.sibling=Ne,_t=Ne);return dt&&gs(J,Ye),Pe}for(Ne=h(Ne);Ye<Q.length;Ye++)lt=ne(Ne,J,Ye,Q[Ye],ae),lt!==null&&(s&&lt.alternate!==null&&Ne.delete(lt.key===null?Ye:lt.key),Y=E(lt,Y,Ye),_t===null?Pe=lt:_t.sibling=lt,_t=lt);return s&&Ne.forEach(function(Io){return a(J,Io)}),dt&&gs(J,Ye),Pe}function Le(J,Y,Q,ae){if(Q==null)throw Error(i(151));for(var Pe=null,_t=null,Ne=Y,Ye=Y=0,lt=null,Tt=Q.next();Ne!==null&&!Tt.done;Ye++,Tt=Q.next()){Ne.index>Ye?(lt=Ne,Ne=null):lt=Ne.sibling;var Io=te(J,Ne,Tt.value,ae);if(Io===null){Ne===null&&(Ne=lt);break}s&&Ne&&Io.alternate===null&&a(J,Ne),Y=E(Io,Y,Ye),_t===null?Pe=Io:_t.sibling=Io,_t=Io,Ne=lt}if(Tt.done)return u(J,Ne),dt&&gs(J,Ye),Pe;if(Ne===null){for(;!Tt.done;Ye++,Tt=Q.next())Tt=le(J,Tt.value,ae),Tt!==null&&(Y=E(Tt,Y,Ye),_t===null?Pe=Tt:_t.sibling=Tt,_t=Tt);return dt&&gs(J,Ye),Pe}for(Ne=h(Ne);!Tt.done;Ye++,Tt=Q.next())Tt=ne(Ne,J,Ye,Tt.value,ae),Tt!==null&&(s&&Tt.alternate!==null&&Ne.delete(Tt.key===null?Ye:Tt.key),Y=E(Tt,Y,Ye),_t===null?Pe=Tt:_t.sibling=Tt,_t=Tt);return s&&Ne.forEach(function(ZV){return a(J,ZV)}),dt&&gs(J,Ye),Pe}function Vt(J,Y,Q,ae){if(typeof Q=="object"&&Q!==null&&Q.type===N&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case b:e:{for(var Pe=Q.key;Y!==null;){if(Y.key===Pe){if(Pe=Q.type,Pe===N){if(Y.tag===7){u(J,Y.sibling),ae=_(Y,Q.props.children),ae.return=J,J=ae;break e}}else if(Y.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===I&&Ca(Pe)===Y.type){u(J,Y.sibling),ae=_(Y,Q.props),dc(ae,Q),ae.return=J,J=ae;break e}u(J,Y);break}else a(J,Y);Y=Y.sibling}Q.type===N?(ae=Sa(Q.props.children,J.mode,ae,Q.key),ae.return=J,J=ae):(ae=zf(Q.type,Q.key,Q.props,null,J.mode,ae),dc(ae,Q),ae.return=J,J=ae)}return x(J);case C:e:{for(Pe=Q.key;Y!==null;){if(Y.key===Pe)if(Y.tag===4&&Y.stateNode.containerInfo===Q.containerInfo&&Y.stateNode.implementation===Q.implementation){u(J,Y.sibling),ae=_(Y,Q.children||[]),ae.return=J,J=ae;break e}else{u(J,Y);break}else a(J,Y);Y=Y.sibling}ae=Fg(Q,J.mode,ae),ae.return=J,J=ae}return x(J);case I:return Q=Ca(Q),Vt(J,Y,Q,ae)}if(Ie(Q))return Ce(J,Y,Q,ae);if(z(Q)){if(Pe=z(Q),typeof Pe!="function")throw Error(i(150));return Q=Pe.call(Q),Le(J,Y,Q,ae)}if(typeof Q.then=="function")return Vt(J,Y,Yf(Q),ae);if(Q.$$typeof===F)return Vt(J,Y,Gf(J,Q),ae);Jf(J,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,Y!==null&&Y.tag===6?(u(J,Y.sibling),ae=_(Y,Q),ae.return=J,J=ae):(u(J,Y),ae=Ug(Q,J.mode,ae),ae.return=J,J=ae),x(J)):u(J,Y)}return function(J,Y,Q,ae){try{cc=0;var Pe=Vt(J,Y,Q,ae);return Rl=null,Pe}catch(Ne){if(Ne===Il||Ne===$f)throw Ne;var _t=Ki(29,Ne,null,J.mode);return _t.lanes=ae,_t.return=J,_t}finally{}}}var Ra=dS(!0),fS=dS(!1),co=!1;function Qg(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xg(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function fo(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function ho(s,a,u){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(bt&2)!==0){var _=h.pending;return _===null?a.next=a:(a.next=_.next,_.next=a),h.pending=a,a=Bf(s),JE(s,null,u),a}return Ff(s,h,a,u),Bf(s)}function fc(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var h=a.lanes;h&=s.pendingLanes,u|=h,a.lanes=u,pe(s,u)}}function Zg(s,a){var u=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var _=null,E=null;if(u=u.firstBaseUpdate,u!==null){do{var x={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};E===null?_=E=x:E=E.next=x,u=u.next}while(u!==null);E===null?_=E=a:E=E.next=a}else _=E=a;u={baseState:h.baseState,firstBaseUpdate:_,lastBaseUpdate:E,shared:h.shared,callbacks:h.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}var ey=!1;function hc(){if(ey){var s=Cl;if(s!==null)throw s}}function pc(s,a,u,h){ey=!1;var _=s.updateQueue;co=!1;var E=_.firstBaseUpdate,x=_.lastBaseUpdate,D=_.shared.pending;if(D!==null){_.shared.pending=null;var j=D,X=j.next;j.next=null,x===null?E=X:x.next=X,x=j;var oe=s.alternate;oe!==null&&(oe=oe.updateQueue,D=oe.lastBaseUpdate,D!==x&&(D===null?oe.firstBaseUpdate=X:D.next=X,oe.lastBaseUpdate=j))}if(E!==null){var le=_.baseState;x=0,oe=X=j=null,D=E;do{var te=D.lane&-536870913,ne=te!==D.lane;if(ne?(at&te)===te:(h&te)===te){te!==0&&te===Al&&(ey=!0),oe!==null&&(oe=oe.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Ce=s,Le=D;te=a;var Vt=u;switch(Le.tag){case 1:if(Ce=Le.payload,typeof Ce=="function"){le=Ce.call(Vt,le,te);break e}le=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Le.payload,te=typeof Ce=="function"?Ce.call(Vt,le,te):Ce,te==null)break e;le=v({},le,te);break e;case 2:co=!0}}te=D.callback,te!==null&&(s.flags|=64,ne&&(s.flags|=8192),ne=_.callbacks,ne===null?_.callbacks=[te]:ne.push(te))}else ne={lane:te,tag:D.tag,payload:D.payload,callback:D.callback,next:null},oe===null?(X=oe=ne,j=le):oe=oe.next=ne,x|=te;if(D=D.next,D===null){if(D=_.shared.pending,D===null)break;ne=D,D=ne.next,ne.next=null,_.lastBaseUpdate=ne,_.shared.pending=null}}while(!0);oe===null&&(j=le),_.baseState=j,_.firstBaseUpdate=X,_.lastBaseUpdate=oe,E===null&&(_.shared.lanes=0),vo|=x,s.lanes=x,s.memoizedState=le}}function hS(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function pS(s,a){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)hS(u[s],a)}var Nl=$(null),Wf=$(0);function mS(s,a){s=Cs,he(Wf,s),he(Nl,a),Cs=s|a.baseLanes}function ty(){he(Wf,Cs),he(Nl,Nl.current)}function ny(){Cs=Wf.current,Z(Nl),Z(Wf)}var Yi=$(null),mr=null;function po(s){var a=s.alternate;he(pn,pn.current&1),he(Yi,s),mr===null&&(a===null||Nl.current!==null||a.memoizedState!==null)&&(mr=s)}function iy(s){he(pn,pn.current),he(Yi,s),mr===null&&(mr=s)}function gS(s){s.tag===22?(he(pn,pn.current),he(Yi,s),mr===null&&(mr=s)):mo()}function mo(){he(pn,pn.current),he(Yi,Yi.current)}function Ji(s){Z(Yi),mr===s&&(mr=null),Z(pn)}var pn=$(0);function Qf(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||uv(u)||cv(u)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var _s=0,$e=null,Mt=null,bn=null,Xf=!1,Pl=!1,Na=!1,Zf=0,mc=0,Dl=null,Hk=0;function on(){throw Error(i(321))}function ry(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!$i(s[u],a[u]))return!1;return!0}function sy(s,a,u,h,_,E){return _s=E,$e=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,ee.H=s===null||s.memoizedState===null?ZS:Ty,Na=!1,E=u(h,_),Na=!1,Pl&&(E=vS(a,u,h,_)),yS(s),E}function yS(s){ee.H=vc;var a=Mt!==null&&Mt.next!==null;if(_s=0,bn=Mt=$e=null,Xf=!1,mc=0,Dl=null,a)throw Error(i(300));s===null||wn||(s=s.dependencies,s!==null&&Hf(s)&&(wn=!0))}function vS(s,a,u,h){$e=s;var _=0;do{if(Pl&&(Dl=null),mc=0,Pl=!1,25<=_)throw Error(i(301));if(_+=1,bn=Mt=null,s.updateQueue!=null){var E=s.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}ee.H=eb,E=a(u,h)}while(Pl);return E}function Gk(){var s=ee.H,a=s.useState()[0];return a=typeof a.then=="function"?gc(a):a,s=s.useState()[0],(Mt!==null?Mt.memoizedState:null)!==s&&($e.flags|=1024),a}function oy(){var s=Zf!==0;return Zf=0,s}function ay(s,a,u){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~u}function ly(s){if(Xf){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Xf=!1}_s=0,bn=Mt=$e=null,Pl=!1,mc=Zf=0,Dl=null}function Si(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bn===null?$e.memoizedState=bn=s:bn=bn.next=s,bn}function mn(){if(Mt===null){var s=$e.alternate;s=s!==null?s.memoizedState:null}else s=Mt.next;var a=bn===null?$e.memoizedState:bn.next;if(a!==null)bn=a,Mt=s;else{if(s===null)throw $e.alternate===null?Error(i(467)):Error(i(310));Mt=s,s={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},bn===null?$e.memoizedState=bn=s:bn=bn.next=s}return bn}function eh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gc(s){var a=mc;return mc+=1,Dl===null&&(Dl=[]),s=lS(Dl,s,a),a=$e,(bn===null?a.memoizedState:bn.next)===null&&(a=a.alternate,ee.H=a===null||a.memoizedState===null?ZS:Ty),s}function th(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return gc(s);if(s.$$typeof===F)return Jn(s)}throw Error(i(438,String(s)))}function uy(s){var a=null,u=$e.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var h=$e.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(_){return _.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=eh(),$e.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(s),h=0;h<s;h++)u[h]=U;return a.index++,u}function Ts(s,a){return typeof a=="function"?a(s):a}function nh(s){var a=mn();return cy(a,Mt,s)}function cy(s,a,u){var h=s.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=u;var _=s.baseQueue,E=h.pending;if(E!==null){if(_!==null){var x=_.next;_.next=E.next,E.next=x}a.baseQueue=_=E,h.pending=null}if(E=s.baseState,_===null)s.memoizedState=E;else{a=_.next;var D=x=null,j=null,X=a,oe=!1;do{var le=X.lane&-536870913;if(le!==X.lane?(at&le)===le:(_s&le)===le){var te=X.revertLane;if(te===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),le===Al&&(oe=!0);else if((_s&te)===te){X=X.next,te===Al&&(oe=!0);continue}else le={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},j===null?(D=j=le,x=E):j=j.next=le,$e.lanes|=te,vo|=te;le=X.action,Na&&u(E,le),E=X.hasEagerState?X.eagerState:u(E,le)}else te={lane:le,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},j===null?(D=j=te,x=E):j=j.next=te,$e.lanes|=le,vo|=le;X=X.next}while(X!==null&&X!==a);if(j===null?x=E:j.next=D,!$i(E,s.memoizedState)&&(wn=!0,oe&&(u=Cl,u!==null)))throw u;s.memoizedState=E,s.baseState=x,s.baseQueue=j,h.lastRenderedState=E}return _===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function dy(s){var a=mn(),u=a.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=s;var h=u.dispatch,_=u.pending,E=a.memoizedState;if(_!==null){u.pending=null;var x=_=_.next;do E=s(E,x.action),x=x.next;while(x!==_);$i(E,a.memoizedState)||(wn=!0),a.memoizedState=E,a.baseQueue===null&&(a.baseState=E),u.lastRenderedState=E}return[E,h]}function _S(s,a,u){var h=$e,_=mn(),E=dt;if(E){if(u===void 0)throw Error(i(407));u=u()}else u=a();var x=!$i((Mt||_).memoizedState,u);if(x&&(_.memoizedState=u,wn=!0),_=_.queue,py(SS.bind(null,h,_,s),[s]),_.getSnapshot!==a||x||bn!==null&&bn.memoizedState.tag&1){if(h.flags|=2048,Ml(9,{destroy:void 0},ES.bind(null,h,_,u,a),null),Ut===null)throw Error(i(349));E||(_s&127)!==0||TS(h,a,u)}return u}function TS(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=$e.updateQueue,a===null?(a=eh(),$e.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function ES(s,a,u,h){a.value=u,a.getSnapshot=h,bS(a)&&wS(s)}function SS(s,a,u){return u(function(){bS(a)&&wS(s)})}function bS(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!$i(s,u)}catch{return!0}}function wS(s){var a=Ea(s,2);a!==null&&Vi(a,s,2)}function fy(s){var a=Si();if(typeof s=="function"){var u=s;if(s=u(),Na){ce(!0);try{u()}finally{ce(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:s},a}function xS(s,a,u,h){return s.baseState=u,cy(s,Mt,typeof h=="function"?h:Ts)}function jk(s,a,u,h,_){if(sh(s))throw Error(i(485));if(s=a.action,s!==null){var E={payload:_,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){E.listeners.push(x)}};ee.T!==null?u(!0):E.isTransition=!1,h(E),u=a.pending,u===null?(E.next=a.pending=E,AS(a,E)):(E.next=u.next,a.pending=u.next=E)}}function AS(s,a){var u=a.action,h=a.payload,_=s.state;if(a.isTransition){var E=ee.T,x={};ee.T=x;try{var D=u(_,h),j=ee.S;j!==null&&j(x,D),CS(s,a,D)}catch(X){hy(s,a,X)}finally{E!==null&&x.types!==null&&(E.types=x.types),ee.T=E}}else try{E=u(_,h),CS(s,a,E)}catch(X){hy(s,a,X)}}function CS(s,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(h){IS(s,a,h)},function(h){return hy(s,a,h)}):IS(s,a,u)}function IS(s,a,u){a.status="fulfilled",a.value=u,RS(a),s.state=u,a=s.pending,a!==null&&(u=a.next,u===a?s.pending=null:(u=u.next,a.next=u,AS(s,u)))}function hy(s,a,u){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=u,RS(a),a=a.next;while(a!==h)}s.action=null}function RS(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function NS(s,a){return a}function PS(s,a){if(dt){var u=Ut.formState;if(u!==null){e:{var h=$e;if(dt){if(Gt){t:{for(var _=Gt,E=pr;_.nodeType!==8;){if(!E){_=null;break t}if(_=gr(_.nextSibling),_===null){_=null;break t}}E=_.data,_=E==="F!"||E==="F"?_:null}if(_){Gt=gr(_.nextSibling),h=_.data==="F!";break e}}lo(h)}h=!1}h&&(a=u[0])}}return u=Si(),u.memoizedState=u.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:NS,lastRenderedState:a},u.queue=h,u=WS.bind(null,$e,h),h.dispatch=u,h=fy(!1),E=_y.bind(null,$e,!1,h.queue),h=Si(),_={state:a,dispatch:null,action:s,pending:null},h.queue=_,u=jk.bind(null,$e,_,E,u),_.dispatch=u,h.memoizedState=s,[a,u,!1]}function DS(s){var a=mn();return MS(a,Mt,s)}function MS(s,a,u){if(a=cy(s,a,NS)[0],s=nh(Ts)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=gc(a)}catch(x){throw x===Il?$f:x}else h=a;a=mn();var _=a.queue,E=_.dispatch;return u!==a.memoizedState&&($e.flags|=2048,Ml(9,{destroy:void 0},$k.bind(null,_,u),null)),[h,E,s]}function $k(s,a){s.action=a}function kS(s){var a=mn(),u=Mt;if(u!==null)return MS(a,u,s);mn(),a=a.memoizedState,u=mn();var h=u.queue.dispatch;return u.memoizedState=s,[a,h,!1]}function Ml(s,a,u,h){return s={tag:s,create:u,deps:h,inst:a,next:null},a=$e.updateQueue,a===null&&(a=eh(),$e.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=s.next=s:(h=u.next,u.next=s,s.next=h,a.lastEffect=s),s}function VS(){return mn().memoizedState}function ih(s,a,u,h){var _=Si();$e.flags|=s,_.memoizedState=Ml(1|a,{destroy:void 0},u,h===void 0?null:h)}function rh(s,a,u,h){var _=mn();h=h===void 0?null:h;var E=_.memoizedState.inst;Mt!==null&&h!==null&&ry(h,Mt.memoizedState.deps)?_.memoizedState=Ml(a,E,u,h):($e.flags|=s,_.memoizedState=Ml(1|a,E,u,h))}function LS(s,a){ih(8390656,8,s,a)}function py(s,a){rh(2048,8,s,a)}function Kk(s){$e.flags|=4;var a=$e.updateQueue;if(a===null)a=eh(),$e.updateQueue=a,a.events=[s];else{var u=a.events;u===null?a.events=[s]:u.push(s)}}function OS(s){var a=mn().memoizedState;return Kk({ref:a,nextImpl:s}),function(){if((bt&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function US(s,a){return rh(4,2,s,a)}function FS(s,a){return rh(4,4,s,a)}function BS(s,a){if(typeof a=="function"){s=s();var u=a(s);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function zS(s,a,u){u=u!=null?u.concat([s]):null,rh(4,4,BS.bind(null,a,s),u)}function my(){}function qS(s,a){var u=mn();a=a===void 0?null:a;var h=u.memoizedState;return a!==null&&ry(a,h[1])?h[0]:(u.memoizedState=[s,a],s)}function HS(s,a){var u=mn();a=a===void 0?null:a;var h=u.memoizedState;if(a!==null&&ry(a,h[1]))return h[0];if(h=s(),Na){ce(!0);try{s()}finally{ce(!1)}}return u.memoizedState=[h,a],h}function gy(s,a,u){return u===void 0||(_s&1073741824)!==0&&(at&261930)===0?s.memoizedState=a:(s.memoizedState=u,s=Gb(),$e.lanes|=s,vo|=s,u)}function GS(s,a,u,h){return $i(u,a)?u:Nl.current!==null?(s=gy(s,u,h),$i(s,a)||(wn=!0),s):(_s&42)===0||(_s&1073741824)!==0&&(at&261930)===0?(wn=!0,s.memoizedState=u):(s=Gb(),$e.lanes|=s,vo|=s,a)}function jS(s,a,u,h,_){var E=re.p;re.p=E!==0&&8>E?E:8;var x=ee.T,D={};ee.T=D,_y(s,!1,a,u);try{var j=_(),X=ee.S;if(X!==null&&X(D,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var oe=qk(j,h);yc(s,a,oe,Xi(s))}else yc(s,a,h,Xi(s))}catch(le){yc(s,a,{then:function(){},status:"rejected",reason:le},Xi())}finally{re.p=E,x!==null&&D.types!==null&&(x.types=D.types),ee.T=x}}function Yk(){}function yy(s,a,u,h){if(s.tag!==5)throw Error(i(476));var _=$S(s).queue;jS(s,_,a,me,u===null?Yk:function(){return KS(s),u(h)})}function $S(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:me},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:u},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function KS(s){var a=$S(s);a.next===null&&(a=s.alternate.memoizedState),yc(s,a.next.queue,{},Xi())}function vy(){return Jn(kc)}function YS(){return mn().memoizedState}function JS(){return mn().memoizedState}function Jk(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var u=Xi();s=fo(u);var h=ho(a,s,u);h!==null&&(Vi(h,a,u),fc(h,a,u)),a={cache:Kg()},s.payload=a;return}a=a.return}}function Wk(s,a,u){var h=Xi();u={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},sh(s)?QS(a,u):(u=Lg(s,a,u,h),u!==null&&(Vi(u,s,h),XS(u,a,h)))}function WS(s,a,u){var h=Xi();yc(s,a,u,h)}function yc(s,a,u,h){var _={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(sh(s))QS(a,_);else{var E=s.alternate;if(s.lanes===0&&(E===null||E.lanes===0)&&(E=a.lastRenderedReducer,E!==null))try{var x=a.lastRenderedState,D=E(x,u);if(_.hasEagerState=!0,_.eagerState=D,$i(D,x))return Ff(s,a,_,0),Ut===null&&Uf(),!1}catch{}finally{}if(u=Lg(s,a,_,h),u!==null)return Vi(u,s,h),XS(u,a,h),!0}return!1}function _y(s,a,u,h){if(h={lane:2,revertLane:Qy(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},sh(s)){if(a)throw Error(i(479))}else a=Lg(s,u,h,2),a!==null&&Vi(a,s,2)}function sh(s){var a=s.alternate;return s===$e||a!==null&&a===$e}function QS(s,a){Pl=Xf=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function XS(s,a,u){if((u&4194048)!==0){var h=a.lanes;h&=s.pendingLanes,u|=h,a.lanes=u,pe(s,u)}}var vc={readContext:Jn,use:th,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useLayoutEffect:on,useInsertionEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useSyncExternalStore:on,useId:on,useHostTransitionStatus:on,useFormState:on,useActionState:on,useOptimistic:on,useMemoCache:on,useCacheRefresh:on};vc.useEffectEvent=on;var ZS={readContext:Jn,use:th,useCallback:function(s,a){return Si().memoizedState=[s,a===void 0?null:a],s},useContext:Jn,useEffect:LS,useImperativeHandle:function(s,a,u){u=u!=null?u.concat([s]):null,ih(4194308,4,BS.bind(null,a,s),u)},useLayoutEffect:function(s,a){return ih(4194308,4,s,a)},useInsertionEffect:function(s,a){ih(4,2,s,a)},useMemo:function(s,a){var u=Si();a=a===void 0?null:a;var h=s();if(Na){ce(!0);try{s()}finally{ce(!1)}}return u.memoizedState=[h,a],h},useReducer:function(s,a,u){var h=Si();if(u!==void 0){var _=u(a);if(Na){ce(!0);try{u(a)}finally{ce(!1)}}}else _=a;return h.memoizedState=h.baseState=_,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:_},h.queue=s,s=s.dispatch=Wk.bind(null,$e,s),[h.memoizedState,s]},useRef:function(s){var a=Si();return s={current:s},a.memoizedState=s},useState:function(s){s=fy(s);var a=s.queue,u=WS.bind(null,$e,a);return a.dispatch=u,[s.memoizedState,u]},useDebugValue:my,useDeferredValue:function(s,a){var u=Si();return gy(u,s,a)},useTransition:function(){var s=fy(!1);return s=jS.bind(null,$e,s.queue,!0,!1),Si().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,u){var h=$e,_=Si();if(dt){if(u===void 0)throw Error(i(407));u=u()}else{if(u=a(),Ut===null)throw Error(i(349));(at&127)!==0||TS(h,a,u)}_.memoizedState=u;var E={value:u,getSnapshot:a};return _.queue=E,LS(SS.bind(null,h,E,s),[s]),h.flags|=2048,Ml(9,{destroy:void 0},ES.bind(null,h,E,u,a),null),u},useId:function(){var s=Si(),a=Ut.identifierPrefix;if(dt){var u=Wr,h=Jr;u=(h&~(1<<32-be(h)-1)).toString(32)+u,a="_"+a+"R_"+u,u=Zf++,0<u&&(a+="H"+u.toString(32)),a+="_"}else u=Hk++,a="_"+a+"r_"+u.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:vy,useFormState:PS,useActionState:PS,useOptimistic:function(s){var a=Si();a.memoizedState=a.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=_y.bind(null,$e,!0,u),u.dispatch=a,[s,a]},useMemoCache:uy,useCacheRefresh:function(){return Si().memoizedState=Jk.bind(null,$e)},useEffectEvent:function(s){var a=Si(),u={impl:s};return a.memoizedState=u,function(){if((bt&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},Ty={readContext:Jn,use:th,useCallback:qS,useContext:Jn,useEffect:py,useImperativeHandle:zS,useInsertionEffect:US,useLayoutEffect:FS,useMemo:HS,useReducer:nh,useRef:VS,useState:function(){return nh(Ts)},useDebugValue:my,useDeferredValue:function(s,a){var u=mn();return GS(u,Mt.memoizedState,s,a)},useTransition:function(){var s=nh(Ts)[0],a=mn().memoizedState;return[typeof s=="boolean"?s:gc(s),a]},useSyncExternalStore:_S,useId:YS,useHostTransitionStatus:vy,useFormState:DS,useActionState:DS,useOptimistic:function(s,a){var u=mn();return xS(u,Mt,s,a)},useMemoCache:uy,useCacheRefresh:JS};Ty.useEffectEvent=OS;var eb={readContext:Jn,use:th,useCallback:qS,useContext:Jn,useEffect:py,useImperativeHandle:zS,useInsertionEffect:US,useLayoutEffect:FS,useMemo:HS,useReducer:dy,useRef:VS,useState:function(){return dy(Ts)},useDebugValue:my,useDeferredValue:function(s,a){var u=mn();return Mt===null?gy(u,s,a):GS(u,Mt.memoizedState,s,a)},useTransition:function(){var s=dy(Ts)[0],a=mn().memoizedState;return[typeof s=="boolean"?s:gc(s),a]},useSyncExternalStore:_S,useId:YS,useHostTransitionStatus:vy,useFormState:kS,useActionState:kS,useOptimistic:function(s,a){var u=mn();return Mt!==null?xS(u,Mt,s,a):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:uy,useCacheRefresh:JS};eb.useEffectEvent=OS;function Ey(s,a,u,h){a=s.memoizedState,u=u(h,a),u=u==null?a:v({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var Sy={enqueueSetState:function(s,a,u){s=s._reactInternals;var h=Xi(),_=fo(h);_.payload=a,u!=null&&(_.callback=u),a=ho(s,_,h),a!==null&&(Vi(a,s,h),fc(a,s,h))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var h=Xi(),_=fo(h);_.tag=1,_.payload=a,u!=null&&(_.callback=u),a=ho(s,_,h),a!==null&&(Vi(a,s,h),fc(a,s,h))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=Xi(),h=fo(u);h.tag=2,a!=null&&(h.callback=a),a=ho(s,h,u),a!==null&&(Vi(a,s,u),fc(a,s,u))}};function tb(s,a,u,h,_,E,x){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,E,x):a.prototype&&a.prototype.isPureReactComponent?!rc(u,h)||!rc(_,E):!0}function nb(s,a,u,h){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,h),a.state!==s&&Sy.enqueueReplaceState(a,a.state,null)}function Pa(s,a){var u=a;if("ref"in a){u={};for(var h in a)h!=="ref"&&(u[h]=a[h])}if(s=s.defaultProps){u===a&&(u=v({},u));for(var _ in s)u[_]===void 0&&(u[_]=s[_])}return u}function ib(s){Of(s)}function rb(s){console.error(s)}function sb(s){Of(s)}function oh(s,a){try{var u=s.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function ob(s,a,u){try{var h=s.onCaughtError;h(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function by(s,a,u){return u=fo(u),u.tag=3,u.payload={element:null},u.callback=function(){oh(s,a)},u}function ab(s){return s=fo(s),s.tag=3,s}function lb(s,a,u,h){var _=u.type.getDerivedStateFromError;if(typeof _=="function"){var E=h.value;s.payload=function(){return _(E)},s.callback=function(){ob(a,u,h)}}var x=u.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(s.callback=function(){ob(a,u,h),typeof _!="function"&&(_o===null?_o=new Set([this]):_o.add(this));var D=h.stack;this.componentDidCatch(h.value,{componentStack:D!==null?D:""})})}function Qk(s,a,u,h,_){if(u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=u.alternate,a!==null&&xl(a,u,_,!0),u=Yi.current,u!==null){switch(u.tag){case 31:case 13:return mr===null?vh():u.alternate===null&&an===0&&(an=3),u.flags&=-257,u.flags|=65536,u.lanes=_,h===Kf?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([h]):a.add(h),Yy(s,h,_)),!1;case 22:return u.flags|=65536,h===Kf?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([h]):u.add(h)),Yy(s,h,_)),!1}throw Error(i(435,u.tag))}return Yy(s,h,_),vh(),!1}if(dt)return a=Yi.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=_,h!==qg&&(s=Error(i(422),{cause:h}),ac(dr(s,u)))):(h!==qg&&(a=Error(i(423),{cause:h}),ac(dr(a,u))),s=s.current.alternate,s.flags|=65536,_&=-_,s.lanes|=_,h=dr(h,u),_=by(s.stateNode,h,_),Zg(s,_),an!==4&&(an=2)),!1;var E=Error(i(520),{cause:h});if(E=dr(E,u),Ac===null?Ac=[E]:Ac.push(E),an!==4&&(an=2),a===null)return!0;h=dr(h,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,s=_&-_,u.lanes|=s,s=by(u.stateNode,h,s),Zg(u,s),!1;case 1:if(a=u.type,E=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(_o===null||!_o.has(E))))return u.flags|=65536,_&=-_,u.lanes|=_,_=ab(_),lb(_,s,u,h),Zg(u,_),!1}u=u.return}while(u!==null);return!1}var wy=Error(i(461)),wn=!1;function Wn(s,a,u,h){a.child=s===null?fS(a,null,u,h):Ra(a,s.child,u,h)}function ub(s,a,u,h,_){u=u.render;var E=a.ref;if("ref"in h){var x={};for(var D in h)D!=="ref"&&(x[D]=h[D])}else x=h;return xa(a),h=sy(s,a,u,x,E,_),D=oy(),s!==null&&!wn?(ay(s,a,_),Es(s,a,_)):(dt&&D&&Bg(a),a.flags|=1,Wn(s,a,h,_),a.child)}function cb(s,a,u,h,_){if(s===null){var E=u.type;return typeof E=="function"&&!Og(E)&&E.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=E,db(s,a,E,h,_)):(s=zf(u.type,null,h,a,a.mode,_),s.ref=a.ref,s.return=a,a.child=s)}if(E=s.child,!Dy(s,_)){var x=E.memoizedProps;if(u=u.compare,u=u!==null?u:rc,u(x,h)&&s.ref===a.ref)return Es(s,a,_)}return a.flags|=1,s=ms(E,h),s.ref=a.ref,s.return=a,a.child=s}function db(s,a,u,h,_){if(s!==null){var E=s.memoizedProps;if(rc(E,h)&&s.ref===a.ref)if(wn=!1,a.pendingProps=h=E,Dy(s,_))(s.flags&131072)!==0&&(wn=!0);else return a.lanes=s.lanes,Es(s,a,_)}return xy(s,a,u,h,_)}function fb(s,a,u,h){var _=h.children,E=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((a.flags&128)!==0){if(E=E!==null?E.baseLanes|u:u,s!==null){for(h=a.child=s.child,_=0;h!==null;)_=_|h.lanes|h.childLanes,h=h.sibling;h=_&~E}else h=0,a.child=null;return hb(s,a,E,u,h)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&jf(a,E!==null?E.cachePool:null),E!==null?mS(a,E):ty(),gS(a);else return h=a.lanes=536870912,hb(s,a,E!==null?E.baseLanes|u:u,u,h)}else E!==null?(jf(a,E.cachePool),mS(a,E),mo(),a.memoizedState=null):(s!==null&&jf(a,null),ty(),mo());return Wn(s,a,_,u),a.child}function _c(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function hb(s,a,u,h,_){var E=Jg();return E=E===null?null:{parent:Sn._currentValue,pool:E},a.memoizedState={baseLanes:u,cachePool:E},s!==null&&jf(a,null),ty(),gS(a),s!==null&&xl(s,a,h,!0),a.childLanes=_,null}function ah(s,a){return a=uh({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function pb(s,a,u){return Ra(a,s.child,null,u),s=ah(a,a.pendingProps),s.flags|=2,Ji(a),a.memoizedState=null,s}function Xk(s,a,u){var h=a.pendingProps,_=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(dt){if(h.mode==="hidden")return s=ah(a,h),a.lanes=536870912,_c(null,s);if(iy(a),(s=Gt)?(s=Aw(s,pr),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:oo!==null?{id:Jr,overflow:Wr}:null,retryLane:536870912,hydrationErrors:null},u=QE(s),u.return=a,a.child=u,Yn=a,Gt=null)):s=null,s===null)throw lo(a);return a.lanes=536870912,null}return ah(a,h)}var E=s.memoizedState;if(E!==null){var x=E.dehydrated;if(iy(a),_)if(a.flags&256)a.flags&=-257,a=pb(s,a,u);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(i(558));else if(wn||xl(s,a,u,!1),_=(u&s.childLanes)!==0,wn||_){if(h=Ut,h!==null&&(x=Re(h,u),x!==0&&x!==E.retryLane))throw E.retryLane=x,Ea(s,x),Vi(h,s,x),wy;vh(),a=pb(s,a,u)}else s=E.treeContext,Gt=gr(x.nextSibling),Yn=a,dt=!0,ao=null,pr=!1,s!==null&&eS(a,s),a=ah(a,h),a.flags|=4096;return a}return s=ms(s.child,{mode:h.mode,children:h.children}),s.ref=a.ref,a.child=s,s.return=a,s}function lh(s,a){var u=a.ref;if(u===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(s===null||s.ref!==u)&&(a.flags|=4194816)}}function xy(s,a,u,h,_){return xa(a),u=sy(s,a,u,h,void 0,_),h=oy(),s!==null&&!wn?(ay(s,a,_),Es(s,a,_)):(dt&&h&&Bg(a),a.flags|=1,Wn(s,a,u,_),a.child)}function mb(s,a,u,h,_,E){return xa(a),a.updateQueue=null,u=vS(a,h,u,_),yS(s),h=oy(),s!==null&&!wn?(ay(s,a,E),Es(s,a,E)):(dt&&h&&Bg(a),a.flags|=1,Wn(s,a,u,E),a.child)}function gb(s,a,u,h,_){if(xa(a),a.stateNode===null){var E=El,x=u.contextType;typeof x=="object"&&x!==null&&(E=Jn(x)),E=new u(h,E),a.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=Sy,a.stateNode=E,E._reactInternals=a,E=a.stateNode,E.props=h,E.state=a.memoizedState,E.refs={},Qg(a),x=u.contextType,E.context=typeof x=="object"&&x!==null?Jn(x):El,E.state=a.memoizedState,x=u.getDerivedStateFromProps,typeof x=="function"&&(Ey(a,u,x,h),E.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(x=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),x!==E.state&&Sy.enqueueReplaceState(E,E.state,null),pc(a,h,E,_),hc(),E.state=a.memoizedState),typeof E.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(s===null){E=a.stateNode;var D=a.memoizedProps,j=Pa(u,D);E.props=j;var X=E.context,oe=u.contextType;x=El,typeof oe=="object"&&oe!==null&&(x=Jn(oe));var le=u.getDerivedStateFromProps;oe=typeof le=="function"||typeof E.getSnapshotBeforeUpdate=="function",D=a.pendingProps!==D,oe||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(D||X!==x)&&nb(a,E,h,x),co=!1;var te=a.memoizedState;E.state=te,pc(a,h,E,_),hc(),X=a.memoizedState,D||te!==X||co?(typeof le=="function"&&(Ey(a,u,le,h),X=a.memoizedState),(j=co||tb(a,u,j,h,te,X,x))?(oe||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(a.flags|=4194308)):(typeof E.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=X),E.props=h,E.state=X,E.context=x,h=j):(typeof E.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{E=a.stateNode,Xg(s,a),x=a.memoizedProps,oe=Pa(u,x),E.props=oe,le=a.pendingProps,te=E.context,X=u.contextType,j=El,typeof X=="object"&&X!==null&&(j=Jn(X)),D=u.getDerivedStateFromProps,(X=typeof D=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(x!==le||te!==j)&&nb(a,E,h,j),co=!1,te=a.memoizedState,E.state=te,pc(a,h,E,_),hc();var ne=a.memoizedState;x!==le||te!==ne||co||s!==null&&s.dependencies!==null&&Hf(s.dependencies)?(typeof D=="function"&&(Ey(a,u,D,h),ne=a.memoizedState),(oe=co||tb(a,u,oe,h,te,ne,j)||s!==null&&s.dependencies!==null&&Hf(s.dependencies))?(X||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,ne,j),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,ne,j)),typeof E.componentDidUpdate=="function"&&(a.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof E.componentDidUpdate!="function"||x===s.memoizedProps&&te===s.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||x===s.memoizedProps&&te===s.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=ne),E.props=h,E.state=ne,E.context=j,h=oe):(typeof E.componentDidUpdate!="function"||x===s.memoizedProps&&te===s.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||x===s.memoizedProps&&te===s.memoizedState||(a.flags|=1024),h=!1)}return E=h,lh(s,a),h=(a.flags&128)!==0,E||h?(E=a.stateNode,u=h&&typeof u.getDerivedStateFromError!="function"?null:E.render(),a.flags|=1,s!==null&&h?(a.child=Ra(a,s.child,null,_),a.child=Ra(a,null,u,_)):Wn(s,a,u,_),a.memoizedState=E.state,s=a.child):s=Es(s,a,_),s}function yb(s,a,u,h){return ba(),a.flags|=256,Wn(s,a,u,h),a.child}var Ay={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cy(s){return{baseLanes:s,cachePool:oS()}}function Iy(s,a,u){return s=s!==null?s.childLanes&~u:0,a&&(s|=Qi),s}function vb(s,a,u){var h=a.pendingProps,_=!1,E=(a.flags&128)!==0,x;if((x=E)||(x=s!==null&&s.memoizedState===null?!1:(pn.current&2)!==0),x&&(_=!0,a.flags&=-129),x=(a.flags&32)!==0,a.flags&=-33,s===null){if(dt){if(_?po(a):mo(),(s=Gt)?(s=Aw(s,pr),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:oo!==null?{id:Jr,overflow:Wr}:null,retryLane:536870912,hydrationErrors:null},u=QE(s),u.return=a,a.child=u,Yn=a,Gt=null)):s=null,s===null)throw lo(a);return cv(s)?a.lanes=32:a.lanes=536870912,null}var D=h.children;return h=h.fallback,_?(mo(),_=a.mode,D=uh({mode:"hidden",children:D},_),h=Sa(h,_,u,null),D.return=a,h.return=a,D.sibling=h,a.child=D,h=a.child,h.memoizedState=Cy(u),h.childLanes=Iy(s,x,u),a.memoizedState=Ay,_c(null,h)):(po(a),Ry(a,D))}var j=s.memoizedState;if(j!==null&&(D=j.dehydrated,D!==null)){if(E)a.flags&256?(po(a),a.flags&=-257,a=Ny(s,a,u)):a.memoizedState!==null?(mo(),a.child=s.child,a.flags|=128,a=null):(mo(),D=h.fallback,_=a.mode,h=uh({mode:"visible",children:h.children},_),D=Sa(D,_,u,null),D.flags|=2,h.return=a,D.return=a,h.sibling=D,a.child=h,Ra(a,s.child,null,u),h=a.child,h.memoizedState=Cy(u),h.childLanes=Iy(s,x,u),a.memoizedState=Ay,a=_c(null,h));else if(po(a),cv(D)){if(x=D.nextSibling&&D.nextSibling.dataset,x)var X=x.dgst;x=X,h=Error(i(419)),h.stack="",h.digest=x,ac({value:h,source:null,stack:null}),a=Ny(s,a,u)}else if(wn||xl(s,a,u,!1),x=(u&s.childLanes)!==0,wn||x){if(x=Ut,x!==null&&(h=Re(x,u),h!==0&&h!==j.retryLane))throw j.retryLane=h,Ea(s,h),Vi(x,s,h),wy;uv(D)||vh(),a=Ny(s,a,u)}else uv(D)?(a.flags|=192,a.child=s.child,a=null):(s=j.treeContext,Gt=gr(D.nextSibling),Yn=a,dt=!0,ao=null,pr=!1,s!==null&&eS(a,s),a=Ry(a,h.children),a.flags|=4096);return a}return _?(mo(),D=h.fallback,_=a.mode,j=s.child,X=j.sibling,h=ms(j,{mode:"hidden",children:h.children}),h.subtreeFlags=j.subtreeFlags&65011712,X!==null?D=ms(X,D):(D=Sa(D,_,u,null),D.flags|=2),D.return=a,h.return=a,h.sibling=D,a.child=h,_c(null,h),h=a.child,D=s.child.memoizedState,D===null?D=Cy(u):(_=D.cachePool,_!==null?(j=Sn._currentValue,_=_.parent!==j?{parent:j,pool:j}:_):_=oS(),D={baseLanes:D.baseLanes|u,cachePool:_}),h.memoizedState=D,h.childLanes=Iy(s,x,u),a.memoizedState=Ay,_c(s.child,h)):(po(a),u=s.child,s=u.sibling,u=ms(u,{mode:"visible",children:h.children}),u.return=a,u.sibling=null,s!==null&&(x=a.deletions,x===null?(a.deletions=[s],a.flags|=16):x.push(s)),a.child=u,a.memoizedState=null,u)}function Ry(s,a){return a=uh({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function uh(s,a){return s=Ki(22,s,null,a),s.lanes=0,s}function Ny(s,a,u){return Ra(a,s.child,null,u),s=Ry(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function _b(s,a,u){s.lanes|=a;var h=s.alternate;h!==null&&(h.lanes|=a),jg(s.return,a,u)}function Py(s,a,u,h,_,E){var x=s.memoizedState;x===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:_,treeForkCount:E}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=h,x.tail=u,x.tailMode=_,x.treeForkCount=E)}function Tb(s,a,u){var h=a.pendingProps,_=h.revealOrder,E=h.tail;h=h.children;var x=pn.current,D=(x&2)!==0;if(D?(x=x&1|2,a.flags|=128):x&=1,he(pn,x),Wn(s,a,h,u),h=dt?oc:0,!D&&s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&_b(s,u,a);else if(s.tag===19)_b(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(_){case"forwards":for(u=a.child,_=null;u!==null;)s=u.alternate,s!==null&&Qf(s)===null&&(_=u),u=u.sibling;u=_,u===null?(_=a.child,a.child=null):(_=u.sibling,u.sibling=null),Py(a,!1,_,u,E,h);break;case"backwards":case"unstable_legacy-backwards":for(u=null,_=a.child,a.child=null;_!==null;){if(s=_.alternate,s!==null&&Qf(s)===null){a.child=_;break}s=_.sibling,_.sibling=u,u=_,_=s}Py(a,!0,u,null,E,h);break;case"together":Py(a,!1,null,null,void 0,h);break;default:a.memoizedState=null}return a.child}function Es(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),vo|=a.lanes,(u&a.childLanes)===0)if(s!==null){if(xl(s,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,u=ms(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=ms(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function Dy(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&Hf(s)))}function Zk(s,a,u){switch(a.tag){case 3:Ve(a,a.stateNode.containerInfo),uo(a,Sn,s.memoizedState.cache),ba();break;case 27:case 5:Rn(a);break;case 4:Ve(a,a.stateNode.containerInfo);break;case 10:uo(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,iy(a),null;break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(po(a),a.flags|=128,null):(u&a.child.childLanes)!==0?vb(s,a,u):(po(a),s=Es(s,a,u),s!==null?s.sibling:null);po(a);break;case 19:var _=(s.flags&128)!==0;if(h=(u&a.childLanes)!==0,h||(xl(s,a,u,!1),h=(u&a.childLanes)!==0),_){if(h)return Tb(s,a,u);a.flags|=128}if(_=a.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),he(pn,pn.current),h)break;return null;case 22:return a.lanes=0,fb(s,a,u,a.pendingProps);case 24:uo(a,Sn,s.memoizedState.cache)}return Es(s,a,u)}function Eb(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps)wn=!0;else{if(!Dy(s,u)&&(a.flags&128)===0)return wn=!1,Zk(s,a,u);wn=(s.flags&131072)!==0}else wn=!1,dt&&(a.flags&1048576)!==0&&ZE(a,oc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var h=a.pendingProps;if(s=Ca(a.elementType),a.type=s,typeof s=="function")Og(s)?(h=Pa(s,h),a.tag=1,a=gb(null,a,s,h,u)):(a.tag=0,a=xy(null,a,s,h,u));else{if(s!=null){var _=s.$$typeof;if(_===G){a.tag=11,a=ub(null,a,s,h,u);break e}else if(_===R){a.tag=14,a=cb(null,a,s,h,u);break e}}throw a=xe(s)||s,Error(i(306,a,""))}}return a;case 0:return xy(s,a,a.type,a.pendingProps,u);case 1:return h=a.type,_=Pa(h,a.pendingProps),gb(s,a,h,_,u);case 3:e:{if(Ve(a,a.stateNode.containerInfo),s===null)throw Error(i(387));h=a.pendingProps;var E=a.memoizedState;_=E.element,Xg(s,a),pc(a,h,null,u);var x=a.memoizedState;if(h=x.cache,uo(a,Sn,h),h!==E.cache&&$g(a,[Sn],u,!0),hc(),h=x.element,E.isDehydrated)if(E={element:h,isDehydrated:!1,cache:x.cache},a.updateQueue.baseState=E,a.memoizedState=E,a.flags&256){a=yb(s,a,h,u);break e}else if(h!==_){_=dr(Error(i(424)),a),ac(_),a=yb(s,a,h,u);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Gt=gr(s.firstChild),Yn=a,dt=!0,ao=null,pr=!0,u=fS(a,null,h,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(ba(),h===_){a=Es(s,a,u);break e}Wn(s,a,h,u)}a=a.child}return a;case 26:return lh(s,a),s===null?(u=Dw(a.type,null,a.pendingProps,null))?a.memoizedState=u:dt||(u=a.type,s=a.pendingProps,h=xh(Ee.current).createElement(u),h[Rt]=a,h[Zt]=s,Qn(h,u,s),Wt(h),a.stateNode=h):a.memoizedState=Dw(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return Rn(a),s===null&&dt&&(h=a.stateNode=Rw(a.type,a.pendingProps,Ee.current),Yn=a,pr=!0,_=Gt,bo(a.type)?(dv=_,Gt=gr(h.firstChild)):Gt=_),Wn(s,a,a.pendingProps.children,u),lh(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&dt&&((_=h=Gt)&&(h=RV(h,a.type,a.pendingProps,pr),h!==null?(a.stateNode=h,Yn=a,Gt=gr(h.firstChild),pr=!1,_=!0):_=!1),_||lo(a)),Rn(a),_=a.type,E=a.pendingProps,x=s!==null?s.memoizedProps:null,h=E.children,ov(_,E)?h=null:x!==null&&ov(_,x)&&(a.flags|=32),a.memoizedState!==null&&(_=sy(s,a,Gk,null,null,u),kc._currentValue=_),lh(s,a),Wn(s,a,h,u),a.child;case 6:return s===null&&dt&&((s=u=Gt)&&(u=NV(u,a.pendingProps,pr),u!==null?(a.stateNode=u,Yn=a,Gt=null,s=!0):s=!1),s||lo(a)),null;case 13:return vb(s,a,u);case 4:return Ve(a,a.stateNode.containerInfo),h=a.pendingProps,s===null?a.child=Ra(a,null,h,u):Wn(s,a,h,u),a.child;case 11:return ub(s,a,a.type,a.pendingProps,u);case 7:return Wn(s,a,a.pendingProps,u),a.child;case 8:return Wn(s,a,a.pendingProps.children,u),a.child;case 12:return Wn(s,a,a.pendingProps.children,u),a.child;case 10:return h=a.pendingProps,uo(a,a.type,h.value),Wn(s,a,h.children,u),a.child;case 9:return _=a.type._context,h=a.pendingProps.children,xa(a),_=Jn(_),h=h(_),a.flags|=1,Wn(s,a,h,u),a.child;case 14:return cb(s,a,a.type,a.pendingProps,u);case 15:return db(s,a,a.type,a.pendingProps,u);case 19:return Tb(s,a,u);case 31:return Xk(s,a,u);case 22:return fb(s,a,u,a.pendingProps);case 24:return xa(a),h=Jn(Sn),s===null?(_=Jg(),_===null&&(_=Ut,E=Kg(),_.pooledCache=E,E.refCount++,E!==null&&(_.pooledCacheLanes|=u),_=E),a.memoizedState={parent:h,cache:_},Qg(a),uo(a,Sn,_)):((s.lanes&u)!==0&&(Xg(s,a),pc(a,null,null,u),hc()),_=s.memoizedState,E=a.memoizedState,_.parent!==h?(_={parent:h,cache:h},a.memoizedState=_,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=_),uo(a,Sn,h)):(h=E.cache,uo(a,Sn,h),h!==_.cache&&$g(a,[Sn],u,!0))),Wn(s,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Ss(s){s.flags|=4}function My(s,a,u,h,_){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(_&335544128)===_)if(s.stateNode.complete)s.flags|=8192;else if(Yb())s.flags|=8192;else throw Ia=Kf,Wg}else s.flags&=-16777217}function Sb(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Ow(a))if(Yb())s.flags|=8192;else throw Ia=Kf,Wg}function ch(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?$n():536870912,s.lanes|=a,Ol|=a)}function Tc(s,a){if(!dt)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function jt(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,h=0;if(a)for(var _=s.child;_!==null;)u|=_.lanes|_.childLanes,h|=_.subtreeFlags&65011712,h|=_.flags&65011712,_.return=s,_=_.sibling;else for(_=s.child;_!==null;)u|=_.lanes|_.childLanes,h|=_.subtreeFlags,h|=_.flags,_.return=s,_=_.sibling;return s.subtreeFlags|=h,s.childLanes=u,a}function eV(s,a,u){var h=a.pendingProps;switch(zg(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(a),null;case 1:return jt(a),null;case 3:return u=a.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),vs(Sn),yt(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(wl(a)?Ss(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Hg())),jt(a),null;case 26:var _=a.type,E=a.memoizedState;return s===null?(Ss(a),E!==null?(jt(a),Sb(a,E)):(jt(a),My(a,_,null,h,u))):E?E!==s.memoizedState?(Ss(a),jt(a),Sb(a,E)):(jt(a),a.flags&=-16777217):(s=s.memoizedProps,s!==h&&Ss(a),jt(a),My(a,_,s,h,u)),null;case 27:if(Ai(a),u=Ee.current,_=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&Ss(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return jt(a),null}s=se.current,wl(a)?tS(a):(s=Rw(_,h,u),a.stateNode=s,Ss(a))}return jt(a),null;case 5:if(Ai(a),_=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&Ss(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return jt(a),null}if(E=se.current,wl(a))tS(a);else{var x=xh(Ee.current);switch(E){case 1:E=x.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:E=x.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":E=x.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":E=x.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":E=x.createElement("div"),E.innerHTML="<script><\/script>",E=E.removeChild(E.firstChild);break;case"select":E=typeof h.is=="string"?x.createElement("select",{is:h.is}):x.createElement("select"),h.multiple?E.multiple=!0:h.size&&(E.size=h.size);break;default:E=typeof h.is=="string"?x.createElement(_,{is:h.is}):x.createElement(_)}}E[Rt]=a,E[Zt]=h;e:for(x=a.child;x!==null;){if(x.tag===5||x.tag===6)E.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===a)break e;for(;x.sibling===null;){if(x.return===null||x.return===a)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}a.stateNode=E;e:switch(Qn(E,_,h),_){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Ss(a)}}return jt(a),My(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,u),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==h&&Ss(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(i(166));if(s=Ee.current,wl(a)){if(s=a.stateNode,u=a.memoizedProps,h=null,_=Yn,_!==null)switch(_.tag){case 27:case 5:h=_.memoizedProps}s[Rt]=a,s=!!(s.nodeValue===u||h!==null&&h.suppressHydrationWarning===!0||vw(s.nodeValue,u)),s||lo(a,!0)}else s=xh(s).createTextNode(h),s[Rt]=a,a.stateNode=s}return jt(a),null;case 31:if(u=a.memoizedState,s===null||s.memoizedState!==null){if(h=wl(a),u!==null){if(s===null){if(!h)throw Error(i(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Rt]=a}else ba(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;jt(a),s=!1}else u=Hg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=u),s=!0;if(!s)return a.flags&256?(Ji(a),a):(Ji(a),null);if((a.flags&128)!==0)throw Error(i(558))}return jt(a),null;case 13:if(h=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(_=wl(a),h!==null&&h.dehydrated!==null){if(s===null){if(!_)throw Error(i(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(i(317));_[Rt]=a}else ba(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;jt(a),_=!1}else _=Hg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=_),_=!0;if(!_)return a.flags&256?(Ji(a),a):(Ji(a),null)}return Ji(a),(a.flags&128)!==0?(a.lanes=u,a):(u=h!==null,s=s!==null&&s.memoizedState!==null,u&&(h=a.child,_=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(_=h.alternate.memoizedState.cachePool.pool),E=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(E=h.memoizedState.cachePool.pool),E!==_&&(h.flags|=2048)),u!==s&&u&&(a.child.flags|=8192),ch(a,a.updateQueue),jt(a),null);case 4:return yt(),s===null&&tv(a.stateNode.containerInfo),jt(a),null;case 10:return vs(a.type),jt(a),null;case 19:if(Z(pn),h=a.memoizedState,h===null)return jt(a),null;if(_=(a.flags&128)!==0,E=h.rendering,E===null)if(_)Tc(h,!1);else{if(an!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(E=Qf(s),E!==null){for(a.flags|=128,Tc(h,!1),s=E.updateQueue,a.updateQueue=s,ch(a,s),a.subtreeFlags=0,s=u,u=a.child;u!==null;)WE(u,s),u=u.sibling;return he(pn,pn.current&1|2),dt&&gs(a,h.treeForkCount),a.child}s=s.sibling}h.tail!==null&&xt()>mh&&(a.flags|=128,_=!0,Tc(h,!1),a.lanes=4194304)}else{if(!_)if(s=Qf(E),s!==null){if(a.flags|=128,_=!0,s=s.updateQueue,a.updateQueue=s,ch(a,s),Tc(h,!0),h.tail===null&&h.tailMode==="hidden"&&!E.alternate&&!dt)return jt(a),null}else 2*xt()-h.renderingStartTime>mh&&u!==536870912&&(a.flags|=128,_=!0,Tc(h,!1),a.lanes=4194304);h.isBackwards?(E.sibling=a.child,a.child=E):(s=h.last,s!==null?s.sibling=E:a.child=E,h.last=E)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=xt(),s.sibling=null,u=pn.current,he(pn,_?u&1|2:u&1),dt&&gs(a,h.treeForkCount),s):(jt(a),null);case 22:case 23:return Ji(a),ny(),h=a.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(u&536870912)!==0&&(a.flags&128)===0&&(jt(a),a.subtreeFlags&6&&(a.flags|=8192)):jt(a),u=a.updateQueue,u!==null&&ch(a,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==u&&(a.flags|=2048),s!==null&&Z(Aa),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),vs(Sn),jt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function tV(s,a){switch(zg(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return vs(Sn),yt(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return Ai(a),null;case 31:if(a.memoizedState!==null){if(Ji(a),a.alternate===null)throw Error(i(340));ba()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(Ji(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));ba()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return Z(pn),null;case 4:return yt(),null;case 10:return vs(a.type),null;case 22:case 23:return Ji(a),ny(),s!==null&&Z(Aa),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return vs(Sn),null;case 25:return null;default:return null}}function bb(s,a){switch(zg(a),a.tag){case 3:vs(Sn),yt();break;case 26:case 27:case 5:Ai(a);break;case 4:yt();break;case 31:a.memoizedState!==null&&Ji(a);break;case 13:Ji(a);break;case 19:Z(pn);break;case 10:vs(a.type);break;case 22:case 23:Ji(a),ny(),s!==null&&Z(Aa);break;case 24:vs(Sn)}}function Ec(s,a){try{var u=a.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var _=h.next;u=_;do{if((u.tag&s)===s){h=void 0;var E=u.create,x=u.inst;h=E(),x.destroy=h}u=u.next}while(u!==_)}}catch(D){Pt(a,a.return,D)}}function go(s,a,u){try{var h=a.updateQueue,_=h!==null?h.lastEffect:null;if(_!==null){var E=_.next;h=E;do{if((h.tag&s)===s){var x=h.inst,D=x.destroy;if(D!==void 0){x.destroy=void 0,_=a;var j=u,X=D;try{X()}catch(oe){Pt(_,j,oe)}}}h=h.next}while(h!==E)}}catch(oe){Pt(a,a.return,oe)}}function wb(s){var a=s.updateQueue;if(a!==null){var u=s.stateNode;try{pS(a,u)}catch(h){Pt(s,s.return,h)}}}function xb(s,a,u){u.props=Pa(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(h){Pt(s,a,h)}}function Sc(s,a){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof u=="function"?s.refCleanup=u(h):u.current=h}}catch(_){Pt(s,a,_)}}function Qr(s,a){var u=s.ref,h=s.refCleanup;if(u!==null)if(typeof h=="function")try{h()}catch(_){Pt(s,a,_)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(_){Pt(s,a,_)}else u.current=null}function Ab(s){var a=s.type,u=s.memoizedProps,h=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&h.focus();break e;case"img":u.src?h.src=u.src:u.srcSet&&(h.srcset=u.srcSet)}}catch(_){Pt(s,s.return,_)}}function ky(s,a,u){try{var h=s.stateNode;bV(h,s.type,u,a),h[Zt]=a}catch(_){Pt(s,s.return,_)}}function Cb(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&bo(s.type)||s.tag===4}function Vy(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Cb(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&bo(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Ly(s,a,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(s),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Bn));else if(h!==4&&(h===27&&bo(s.type)&&(u=s.stateNode,a=null),s=s.child,s!==null))for(Ly(s,a,u),s=s.sibling;s!==null;)Ly(s,a,u),s=s.sibling}function dh(s,a,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(h!==4&&(h===27&&bo(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(dh(s,a,u),s=s.sibling;s!==null;)dh(s,a,u),s=s.sibling}function Ib(s){var a=s.stateNode,u=s.memoizedProps;try{for(var h=s.type,_=a.attributes;_.length;)a.removeAttributeNode(_[0]);Qn(a,h,u),a[Rt]=s,a[Zt]=u}catch(E){Pt(s,s.return,E)}}var bs=!1,xn=!1,Oy=!1,Rb=typeof WeakSet=="function"?WeakSet:Set,Hn=null;function nV(s,a){if(s=s.containerInfo,rv=Dh,s=zE(s),Ng(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var _=h.anchorOffset,E=h.focusNode;h=h.focusOffset;try{u.nodeType,E.nodeType}catch{u=null;break e}var x=0,D=-1,j=-1,X=0,oe=0,le=s,te=null;t:for(;;){for(var ne;le!==u||_!==0&&le.nodeType!==3||(D=x+_),le!==E||h!==0&&le.nodeType!==3||(j=x+h),le.nodeType===3&&(x+=le.nodeValue.length),(ne=le.firstChild)!==null;)te=le,le=ne;for(;;){if(le===s)break t;if(te===u&&++X===_&&(D=x),te===E&&++oe===h&&(j=x),(ne=le.nextSibling)!==null)break;le=te,te=le.parentNode}le=ne}u=D===-1||j===-1?null:{start:D,end:j}}else u=null}u=u||{start:0,end:0}}else u=null;for(sv={focusedElem:s,selectionRange:u},Dh=!1,Hn=a;Hn!==null;)if(a=Hn,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Hn=s;else for(;Hn!==null;){switch(a=Hn,E=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(u=0;u<s.length;u++)_=s[u],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&E!==null){s=void 0,u=a,_=E.memoizedProps,E=E.memoizedState,h=u.stateNode;try{var Ce=Pa(u.type,_);s=h.getSnapshotBeforeUpdate(Ce,E),h.__reactInternalSnapshotBeforeUpdate=s}catch(Le){Pt(u,u.return,Le)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,u=s.nodeType,u===9)lv(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":lv(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,Hn=s;break}Hn=a.return}}function Nb(s,a,u){var h=u.flags;switch(u.tag){case 0:case 11:case 15:xs(s,u),h&4&&Ec(5,u);break;case 1:if(xs(s,u),h&4)if(s=u.stateNode,a===null)try{s.componentDidMount()}catch(x){Pt(u,u.return,x)}else{var _=Pa(u.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(_,a,s.__reactInternalSnapshotBeforeUpdate)}catch(x){Pt(u,u.return,x)}}h&64&&wb(u),h&512&&Sc(u,u.return);break;case 3:if(xs(s,u),h&64&&(s=u.updateQueue,s!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{pS(s,a)}catch(x){Pt(u,u.return,x)}}break;case 27:a===null&&h&4&&Ib(u);case 26:case 5:xs(s,u),a===null&&h&4&&Ab(u),h&512&&Sc(u,u.return);break;case 12:xs(s,u);break;case 31:xs(s,u),h&4&&Mb(s,u);break;case 13:xs(s,u),h&4&&kb(s,u),h&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=dV.bind(null,u),PV(s,u))));break;case 22:if(h=u.memoizedState!==null||bs,!h){a=a!==null&&a.memoizedState!==null||xn,_=bs;var E=xn;bs=h,(xn=a)&&!E?As(s,u,(u.subtreeFlags&8772)!==0):xs(s,u),bs=_,xn=E}break;case 30:break;default:xs(s,u)}}function Pb(s){var a=s.alternate;a!==null&&(s.alternate=null,Pb(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&or(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Qt=null,Pi=!1;function ws(s,a,u){for(u=u.child;u!==null;)Db(s,a,u),u=u.sibling}function Db(s,a,u){if(et&&typeof et.onCommitFiberUnmount=="function")try{et.onCommitFiberUnmount(Fn,u)}catch{}switch(u.tag){case 26:xn||Qr(u,a),ws(s,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:xn||Qr(u,a);var h=Qt,_=Pi;bo(u.type)&&(Qt=u.stateNode,Pi=!1),ws(s,a,u),Pc(u.stateNode),Qt=h,Pi=_;break;case 5:xn||Qr(u,a);case 6:if(h=Qt,_=Pi,Qt=null,ws(s,a,u),Qt=h,Pi=_,Qt!==null)if(Pi)try{(Qt.nodeType===9?Qt.body:Qt.nodeName==="HTML"?Qt.ownerDocument.body:Qt).removeChild(u.stateNode)}catch(E){Pt(u,a,E)}else try{Qt.removeChild(u.stateNode)}catch(E){Pt(u,a,E)}break;case 18:Qt!==null&&(Pi?(s=Qt,ww(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),jl(s)):ww(Qt,u.stateNode));break;case 4:h=Qt,_=Pi,Qt=u.stateNode.containerInfo,Pi=!0,ws(s,a,u),Qt=h,Pi=_;break;case 0:case 11:case 14:case 15:go(2,u,a),xn||go(4,u,a),ws(s,a,u);break;case 1:xn||(Qr(u,a),h=u.stateNode,typeof h.componentWillUnmount=="function"&&xb(u,a,h)),ws(s,a,u);break;case 21:ws(s,a,u);break;case 22:xn=(h=xn)||u.memoizedState!==null,ws(s,a,u),xn=h;break;default:ws(s,a,u)}}function Mb(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{jl(s)}catch(u){Pt(a,a.return,u)}}}function kb(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{jl(s)}catch(u){Pt(a,a.return,u)}}function iV(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new Rb),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new Rb),a;default:throw Error(i(435,s.tag))}}function fh(s,a){var u=iV(s);a.forEach(function(h){if(!u.has(h)){u.add(h);var _=fV.bind(null,s,h);h.then(_,_)}})}function Di(s,a){var u=a.deletions;if(u!==null)for(var h=0;h<u.length;h++){var _=u[h],E=s,x=a,D=x;e:for(;D!==null;){switch(D.tag){case 27:if(bo(D.type)){Qt=D.stateNode,Pi=!1;break e}break;case 5:Qt=D.stateNode,Pi=!1;break e;case 3:case 4:Qt=D.stateNode.containerInfo,Pi=!0;break e}D=D.return}if(Qt===null)throw Error(i(160));Db(E,x,_),Qt=null,Pi=!1,E=_.alternate,E!==null&&(E.return=null),_.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Vb(a,s),a=a.sibling}var Pr=null;function Vb(s,a){var u=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Di(a,s),Mi(s),h&4&&(go(3,s,s.return),Ec(3,s),go(5,s,s.return));break;case 1:Di(a,s),Mi(s),h&512&&(xn||u===null||Qr(u,u.return)),h&64&&bs&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?h:u.concat(h))));break;case 26:var _=Pr;if(Di(a,s),Mi(s),h&512&&(xn||u===null||Qr(u,u.return)),h&4){var E=u!==null?u.memoizedState:null;if(h=s.memoizedState,u===null)if(h===null)if(s.stateNode===null){e:{h=s.type,u=s.memoizedProps,_=_.ownerDocument||_;t:switch(h){case"title":E=_.getElementsByTagName("title")[0],(!E||E[sr]||E[Rt]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=_.createElement(h),_.head.insertBefore(E,_.querySelector("head > title"))),Qn(E,h,u),E[Rt]=s,Wt(E),h=E;break e;case"link":var x=Vw("link","href",_).get(h+(u.href||""));if(x){for(var D=0;D<x.length;D++)if(E=x[D],E.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&E.getAttribute("rel")===(u.rel==null?null:u.rel)&&E.getAttribute("title")===(u.title==null?null:u.title)&&E.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){x.splice(D,1);break t}}E=_.createElement(h),Qn(E,h,u),_.head.appendChild(E);break;case"meta":if(x=Vw("meta","content",_).get(h+(u.content||""))){for(D=0;D<x.length;D++)if(E=x[D],E.getAttribute("content")===(u.content==null?null:""+u.content)&&E.getAttribute("name")===(u.name==null?null:u.name)&&E.getAttribute("property")===(u.property==null?null:u.property)&&E.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&E.getAttribute("charset")===(u.charSet==null?null:u.charSet)){x.splice(D,1);break t}}E=_.createElement(h),Qn(E,h,u),_.head.appendChild(E);break;default:throw Error(i(468,h))}E[Rt]=s,Wt(E),h=E}s.stateNode=h}else Lw(_,s.type,s.stateNode);else s.stateNode=kw(_,h,s.memoizedProps);else E!==h?(E===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):E.count--,h===null?Lw(_,s.type,s.stateNode):kw(_,h,s.memoizedProps)):h===null&&s.stateNode!==null&&ky(s,s.memoizedProps,u.memoizedProps)}break;case 27:Di(a,s),Mi(s),h&512&&(xn||u===null||Qr(u,u.return)),u!==null&&h&4&&ky(s,s.memoizedProps,u.memoizedProps);break;case 5:if(Di(a,s),Mi(s),h&512&&(xn||u===null||Qr(u,u.return)),s.flags&32){_=s.stateNode;try{ur(_,"")}catch(Ce){Pt(s,s.return,Ce)}}h&4&&s.stateNode!=null&&(_=s.memoizedProps,ky(s,_,u!==null?u.memoizedProps:_)),h&1024&&(Oy=!0);break;case 6:if(Di(a,s),Mi(s),h&4){if(s.stateNode===null)throw Error(i(162));h=s.memoizedProps,u=s.stateNode;try{u.nodeValue=h}catch(Ce){Pt(s,s.return,Ce)}}break;case 3:if(Ih=null,_=Pr,Pr=Ah(a.containerInfo),Di(a,s),Pr=_,Mi(s),h&4&&u!==null&&u.memoizedState.isDehydrated)try{jl(a.containerInfo)}catch(Ce){Pt(s,s.return,Ce)}Oy&&(Oy=!1,Lb(s));break;case 4:h=Pr,Pr=Ah(s.stateNode.containerInfo),Di(a,s),Mi(s),Pr=h;break;case 12:Di(a,s),Mi(s);break;case 31:Di(a,s),Mi(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,fh(s,h)));break;case 13:Di(a,s),Mi(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(ph=xt()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,fh(s,h)));break;case 22:_=s.memoizedState!==null;var j=u!==null&&u.memoizedState!==null,X=bs,oe=xn;if(bs=X||_,xn=oe||j,Di(a,s),xn=oe,bs=X,Mi(s),h&8192)e:for(a=s.stateNode,a._visibility=_?a._visibility&-2:a._visibility|1,_&&(u===null||j||bs||xn||Da(s)),u=null,a=s;;){if(a.tag===5||a.tag===26){if(u===null){j=u=a;try{if(E=j.stateNode,_)x=E.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{D=j.stateNode;var le=j.memoizedProps.style,te=le!=null&&le.hasOwnProperty("display")?le.display:null;D.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Ce){Pt(j,j.return,Ce)}}}else if(a.tag===6){if(u===null){j=a;try{j.stateNode.nodeValue=_?"":j.memoizedProps}catch(Ce){Pt(j,j.return,Ce)}}}else if(a.tag===18){if(u===null){j=a;try{var ne=j.stateNode;_?xw(ne,!0):xw(j.stateNode,!1)}catch(Ce){Pt(j,j.return,Ce)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=s.updateQueue,h!==null&&(u=h.retryQueue,u!==null&&(h.retryQueue=null,fh(s,u))));break;case 19:Di(a,s),Mi(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,fh(s,h)));break;case 30:break;case 21:break;default:Di(a,s),Mi(s)}}function Mi(s){var a=s.flags;if(a&2){try{for(var u,h=s.return;h!==null;){if(Cb(h)){u=h;break}h=h.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var _=u.stateNode,E=Vy(s);dh(s,E,_);break;case 5:var x=u.stateNode;u.flags&32&&(ur(x,""),u.flags&=-33);var D=Vy(s);dh(s,D,x);break;case 3:case 4:var j=u.stateNode.containerInfo,X=Vy(s);Ly(s,X,j);break;default:throw Error(i(161))}}catch(oe){Pt(s,s.return,oe)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function Lb(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;Lb(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function xs(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Nb(s,a.alternate,a),a=a.sibling}function Da(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:go(4,a,a.return),Da(a);break;case 1:Qr(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&xb(a,a.return,u),Da(a);break;case 27:Pc(a.stateNode);case 26:case 5:Qr(a,a.return),Da(a);break;case 22:a.memoizedState===null&&Da(a);break;case 30:Da(a);break;default:Da(a)}s=s.sibling}}function As(s,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,_=s,E=a,x=E.flags;switch(E.tag){case 0:case 11:case 15:As(_,E,u),Ec(4,E);break;case 1:if(As(_,E,u),h=E,_=h.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(X){Pt(h,h.return,X)}if(h=E,_=h.updateQueue,_!==null){var D=h.stateNode;try{var j=_.shared.hiddenCallbacks;if(j!==null)for(_.shared.hiddenCallbacks=null,_=0;_<j.length;_++)hS(j[_],D)}catch(X){Pt(h,h.return,X)}}u&&x&64&&wb(E),Sc(E,E.return);break;case 27:Ib(E);case 26:case 5:As(_,E,u),u&&h===null&&x&4&&Ab(E),Sc(E,E.return);break;case 12:As(_,E,u);break;case 31:As(_,E,u),u&&x&4&&Mb(_,E);break;case 13:As(_,E,u),u&&x&4&&kb(_,E);break;case 22:E.memoizedState===null&&As(_,E,u),Sc(E,E.return);break;case 30:break;default:As(_,E,u)}a=a.sibling}}function Uy(s,a){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&lc(u))}function Fy(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&lc(s))}function Dr(s,a,u,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Ob(s,a,u,h),a=a.sibling}function Ob(s,a,u,h){var _=a.flags;switch(a.tag){case 0:case 11:case 15:Dr(s,a,u,h),_&2048&&Ec(9,a);break;case 1:Dr(s,a,u,h);break;case 3:Dr(s,a,u,h),_&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&lc(s)));break;case 12:if(_&2048){Dr(s,a,u,h),s=a.stateNode;try{var E=a.memoizedProps,x=E.id,D=E.onPostCommit;typeof D=="function"&&D(x,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(j){Pt(a,a.return,j)}}else Dr(s,a,u,h);break;case 31:Dr(s,a,u,h);break;case 13:Dr(s,a,u,h);break;case 23:break;case 22:E=a.stateNode,x=a.alternate,a.memoizedState!==null?E._visibility&2?Dr(s,a,u,h):bc(s,a):E._visibility&2?Dr(s,a,u,h):(E._visibility|=2,kl(s,a,u,h,(a.subtreeFlags&10256)!==0||!1)),_&2048&&Uy(x,a);break;case 24:Dr(s,a,u,h),_&2048&&Fy(a.alternate,a);break;default:Dr(s,a,u,h)}}function kl(s,a,u,h,_){for(_=_&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var E=s,x=a,D=u,j=h,X=x.flags;switch(x.tag){case 0:case 11:case 15:kl(E,x,D,j,_),Ec(8,x);break;case 23:break;case 22:var oe=x.stateNode;x.memoizedState!==null?oe._visibility&2?kl(E,x,D,j,_):bc(E,x):(oe._visibility|=2,kl(E,x,D,j,_)),_&&X&2048&&Uy(x.alternate,x);break;case 24:kl(E,x,D,j,_),_&&X&2048&&Fy(x.alternate,x);break;default:kl(E,x,D,j,_)}a=a.sibling}}function bc(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=s,h=a,_=h.flags;switch(h.tag){case 22:bc(u,h),_&2048&&Uy(h.alternate,h);break;case 24:bc(u,h),_&2048&&Fy(h.alternate,h);break;default:bc(u,h)}a=a.sibling}}var wc=8192;function Vl(s,a,u){if(s.subtreeFlags&wc)for(s=s.child;s!==null;)Ub(s,a,u),s=s.sibling}function Ub(s,a,u){switch(s.tag){case 26:Vl(s,a,u),s.flags&wc&&s.memoizedState!==null&&HV(u,Pr,s.memoizedState,s.memoizedProps);break;case 5:Vl(s,a,u);break;case 3:case 4:var h=Pr;Pr=Ah(s.stateNode.containerInfo),Vl(s,a,u),Pr=h;break;case 22:s.memoizedState===null&&(h=s.alternate,h!==null&&h.memoizedState!==null?(h=wc,wc=16777216,Vl(s,a,u),wc=h):Vl(s,a,u));break;default:Vl(s,a,u)}}function Fb(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function xc(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var h=a[u];Hn=h,zb(h,s)}Fb(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Bb(s),s=s.sibling}function Bb(s){switch(s.tag){case 0:case 11:case 15:xc(s),s.flags&2048&&go(9,s,s.return);break;case 3:xc(s);break;case 12:xc(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,hh(s)):xc(s);break;default:xc(s)}}function hh(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var h=a[u];Hn=h,zb(h,s)}Fb(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:go(8,a,a.return),hh(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,hh(a));break;default:hh(a)}s=s.sibling}}function zb(s,a){for(;Hn!==null;){var u=Hn;switch(u.tag){case 0:case 11:case 15:go(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var h=u.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:lc(u.memoizedState.cache)}if(h=u.child,h!==null)h.return=u,Hn=h;else e:for(u=s;Hn!==null;){h=Hn;var _=h.sibling,E=h.return;if(Pb(h),h===u){Hn=null;break e}if(_!==null){_.return=E,Hn=_;break e}Hn=E}}}var rV={getCacheForType:function(s){var a=Jn(Sn),u=a.data.get(s);return u===void 0&&(u=s(),a.data.set(s,u)),u},cacheSignal:function(){return Jn(Sn).controller.signal}},sV=typeof WeakMap=="function"?WeakMap:Map,bt=0,Ut=null,rt=null,at=0,Nt=0,Wi=null,yo=!1,Ll=!1,By=!1,Cs=0,an=0,vo=0,Ma=0,zy=0,Qi=0,Ol=0,Ac=null,ki=null,qy=!1,ph=0,qb=0,mh=1/0,gh=null,_o=null,Mn=0,To=null,Ul=null,Is=0,Hy=0,Gy=null,Hb=null,Cc=0,jy=null;function Xi(){return(bt&2)!==0&&at!==0?at&-at:ee.T!==null?Qy():Tn()}function Gb(){if(Qi===0)if((at&536870912)===0||dt){var s=Qe;Qe<<=1,(Qe&3932160)===0&&(Qe=262144),Qi=s}else Qi=536870912;return s=Yi.current,s!==null&&(s.flags|=32),Qi}function Vi(s,a,u){(s===Ut&&(Nt===2||Nt===9)||s.cancelPendingCommit!==null)&&(Fl(s,0),Eo(s,at,Qi,!1)),Dt(s,u),((bt&2)===0||s!==Ut)&&(s===Ut&&((bt&2)===0&&(Ma|=u),an===4&&Eo(s,at,Qi,!1)),Xr(s))}function jb(s,a,u){if((bt&6)!==0)throw Error(i(327));var h=!u&&(a&127)===0&&(a&s.expiredLanes)===0||Ke(s,a),_=h?lV(s,a):Ky(s,a,!0),E=h;do{if(_===0){Ll&&!h&&Eo(s,a,0,!1);break}else{if(u=s.current.alternate,E&&!oV(u)){_=Ky(s,a,!1),E=!1;continue}if(_===2){if(E=a,s.errorRecoveryDisabledLanes&E)var x=0;else x=s.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){a=x;e:{var D=s;_=Ac;var j=D.current.memoizedState.isDehydrated;if(j&&(Fl(D,x).flags|=256),x=Ky(D,x,!1),x!==2){if(By&&!j){D.errorRecoveryDisabledLanes|=E,Ma|=E,_=4;break e}E=ki,ki=_,E!==null&&(ki===null?ki=E:ki.push.apply(ki,E))}_=x}if(E=!1,_!==2)continue}}if(_===1){Fl(s,0),Eo(s,a,0,!0);break}e:{switch(h=s,E=_,E){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Eo(h,a,Qi,!yo);break e;case 2:ki=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(_=ph+300-xt(),10<_)){if(Eo(h,a,Qi,!yo),Me(h,0,!0)!==0)break e;Is=a,h.timeoutHandle=Sw($b.bind(null,h,u,ki,gh,qy,a,Qi,Ma,Ol,yo,E,"Throttled",-0,0),_);break e}$b(h,u,ki,gh,qy,a,Qi,Ma,Ol,yo,E,null,-0,0)}}break}while(!0);Xr(s)}function $b(s,a,u,h,_,E,x,D,j,X,oe,le,te,ne){if(s.timeoutHandle=-1,le=a.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Bn},Ub(a,E,le);var Ce=(E&62914560)===E?ph-xt():(E&4194048)===E?qb-xt():0;if(Ce=GV(le,Ce),Ce!==null){Is=E,s.cancelPendingCommit=Ce(ew.bind(null,s,a,E,u,h,_,x,D,j,oe,le,null,te,ne)),Eo(s,E,x,!X);return}}ew(s,a,E,u,h,_,x,D,j)}function oV(s){for(var a=s;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var h=0;h<u.length;h++){var _=u[h],E=_.getSnapshot;_=_.value;try{if(!$i(E(),_))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Eo(s,a,u,h){a&=~zy,a&=~Ma,s.suspendedLanes|=a,s.pingedLanes&=~a,h&&(s.warmLanes|=a),h=s.expirationTimes;for(var _=a;0<_;){var E=31-be(_),x=1<<E;h[E]=-1,_&=~x}u!==0&&Dn(s,u,a)}function yh(){return(bt&6)===0?(Ic(0),!1):!0}function $y(){if(rt!==null){if(Nt===0)var s=rt.return;else s=rt,ys=wa=null,ly(s),Rl=null,cc=0,s=rt;for(;s!==null;)bb(s.alternate,s),s=s.return;rt=null}}function Fl(s,a){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,AV(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),Is=0,$y(),Ut=s,rt=u=ms(s.current,null),at=a,Nt=0,Wi=null,yo=!1,Ll=Ke(s,a),By=!1,Ol=Qi=zy=Ma=vo=an=0,ki=Ac=null,qy=!1,(a&8)!==0&&(a|=a&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=a;0<h;){var _=31-be(h),E=1<<_;a|=s[_],h&=~E}return Cs=a,Uf(),u}function Kb(s,a){$e=null,ee.H=vc,a===Il||a===$f?(a=uS(),Nt=3):a===Wg?(a=uS(),Nt=4):Nt=a===wy?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Wi=a,rt===null&&(an=1,oh(s,dr(a,s.current)))}function Yb(){var s=Yi.current;return s===null?!0:(at&4194048)===at?mr===null:(at&62914560)===at||(at&536870912)!==0?s===mr:!1}function Jb(){var s=ee.H;return ee.H=vc,s===null?vc:s}function Wb(){var s=ee.A;return ee.A=rV,s}function vh(){an=4,yo||(at&4194048)!==at&&Yi.current!==null||(Ll=!0),(vo&134217727)===0&&(Ma&134217727)===0||Ut===null||Eo(Ut,at,Qi,!1)}function Ky(s,a,u){var h=bt;bt|=2;var _=Jb(),E=Wb();(Ut!==s||at!==a)&&(gh=null,Fl(s,a)),a=!1;var x=an;e:do try{if(Nt!==0&&rt!==null){var D=rt,j=Wi;switch(Nt){case 8:$y(),x=6;break e;case 3:case 2:case 9:case 6:Yi.current===null&&(a=!0);var X=Nt;if(Nt=0,Wi=null,Bl(s,D,j,X),u&&Ll){x=0;break e}break;default:X=Nt,Nt=0,Wi=null,Bl(s,D,j,X)}}aV(),x=an;break}catch(oe){Kb(s,oe)}while(!0);return a&&s.shellSuspendCounter++,ys=wa=null,bt=h,ee.H=_,ee.A=E,rt===null&&(Ut=null,at=0,Uf()),x}function aV(){for(;rt!==null;)Qb(rt)}function lV(s,a){var u=bt;bt|=2;var h=Jb(),_=Wb();Ut!==s||at!==a?(gh=null,mh=xt()+500,Fl(s,a)):Ll=Ke(s,a);e:do try{if(Nt!==0&&rt!==null){a=rt;var E=Wi;t:switch(Nt){case 1:Nt=0,Wi=null,Bl(s,a,E,1);break;case 2:case 9:if(aS(E)){Nt=0,Wi=null,Xb(a);break}a=function(){Nt!==2&&Nt!==9||Ut!==s||(Nt=7),Xr(s)},E.then(a,a);break e;case 3:Nt=7;break e;case 4:Nt=5;break e;case 7:aS(E)?(Nt=0,Wi=null,Xb(a)):(Nt=0,Wi=null,Bl(s,a,E,7));break;case 5:var x=null;switch(rt.tag){case 26:x=rt.memoizedState;case 5:case 27:var D=rt;if(x?Ow(x):D.stateNode.complete){Nt=0,Wi=null;var j=D.sibling;if(j!==null)rt=j;else{var X=D.return;X!==null?(rt=X,_h(X)):rt=null}break t}}Nt=0,Wi=null,Bl(s,a,E,5);break;case 6:Nt=0,Wi=null,Bl(s,a,E,6);break;case 8:$y(),an=6;break e;default:throw Error(i(462))}}uV();break}catch(oe){Kb(s,oe)}while(!0);return ys=wa=null,ee.H=h,ee.A=_,bt=u,rt!==null?0:(Ut=null,at=0,Uf(),an)}function uV(){for(;rt!==null&&!_n();)Qb(rt)}function Qb(s){var a=Eb(s.alternate,s,Cs);s.memoizedProps=s.pendingProps,a===null?_h(s):rt=a}function Xb(s){var a=s,u=a.alternate;switch(a.tag){case 15:case 0:a=mb(u,a,a.pendingProps,a.type,void 0,at);break;case 11:a=mb(u,a,a.pendingProps,a.type.render,a.ref,at);break;case 5:ly(a);default:bb(u,a),a=rt=WE(a,Cs),a=Eb(u,a,Cs)}s.memoizedProps=s.pendingProps,a===null?_h(s):rt=a}function Bl(s,a,u,h){ys=wa=null,ly(a),Rl=null,cc=0;var _=a.return;try{if(Qk(s,_,a,u,at)){an=1,oh(s,dr(u,s.current)),rt=null;return}}catch(E){if(_!==null)throw rt=_,E;an=1,oh(s,dr(u,s.current)),rt=null;return}a.flags&32768?(dt||h===1?s=!0:Ll||(at&536870912)!==0?s=!1:(yo=s=!0,(h===2||h===9||h===3||h===6)&&(h=Yi.current,h!==null&&h.tag===13&&(h.flags|=16384))),Zb(a,s)):_h(a)}function _h(s){var a=s;do{if((a.flags&32768)!==0){Zb(a,yo);return}s=a.return;var u=eV(a.alternate,a,Cs);if(u!==null){rt=u;return}if(a=a.sibling,a!==null){rt=a;return}rt=a=s}while(a!==null);an===0&&(an=5)}function Zb(s,a){do{var u=tV(s.alternate,s);if(u!==null){u.flags&=32767,rt=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(s=s.sibling,s!==null)){rt=s;return}rt=s=u}while(s!==null);an=6,rt=null}function ew(s,a,u,h,_,E,x,D,j){s.cancelPendingCommit=null;do Th();while(Mn!==0);if((bt&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(E=a.lanes|a.childLanes,E|=Vg,pt(s,u,E,x,D,j),s===Ut&&(rt=Ut=null,at=0),Ul=a,To=s,Is=u,Hy=E,Gy=_,Hb=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,hV(rn,function(){return sw(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=ee.T,ee.T=null,_=re.p,re.p=2,x=bt,bt|=4;try{nV(s,a,u)}finally{bt=x,re.p=_,ee.T=h}}Mn=1,tw(),nw(),iw()}}function tw(){if(Mn===1){Mn=0;var s=To,a=Ul,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=ee.T,ee.T=null;var h=re.p;re.p=2;var _=bt;bt|=4;try{Vb(a,s);var E=sv,x=zE(s.containerInfo),D=E.focusedElem,j=E.selectionRange;if(x!==D&&D&&D.ownerDocument&&BE(D.ownerDocument.documentElement,D)){if(j!==null&&Ng(D)){var X=j.start,oe=j.end;if(oe===void 0&&(oe=X),"selectionStart"in D)D.selectionStart=X,D.selectionEnd=Math.min(oe,D.value.length);else{var le=D.ownerDocument||document,te=le&&le.defaultView||window;if(te.getSelection){var ne=te.getSelection(),Ce=D.textContent.length,Le=Math.min(j.start,Ce),Vt=j.end===void 0?Le:Math.min(j.end,Ce);!ne.extend&&Le>Vt&&(x=Vt,Vt=Le,Le=x);var J=FE(D,Le),Y=FE(D,Vt);if(J&&Y&&(ne.rangeCount!==1||ne.anchorNode!==J.node||ne.anchorOffset!==J.offset||ne.focusNode!==Y.node||ne.focusOffset!==Y.offset)){var Q=le.createRange();Q.setStart(J.node,J.offset),ne.removeAllRanges(),Le>Vt?(ne.addRange(Q),ne.extend(Y.node,Y.offset)):(Q.setEnd(Y.node,Y.offset),ne.addRange(Q))}}}}for(le=[],ne=D;ne=ne.parentNode;)ne.nodeType===1&&le.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<le.length;D++){var ae=le[D];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Dh=!!rv,sv=rv=null}finally{bt=_,re.p=h,ee.T=u}}s.current=a,Mn=2}}function nw(){if(Mn===2){Mn=0;var s=To,a=Ul,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=ee.T,ee.T=null;var h=re.p;re.p=2;var _=bt;bt|=4;try{Nb(s,a.alternate,a)}finally{bt=_,re.p=h,ee.T=u}}Mn=3}}function iw(){if(Mn===4||Mn===3){Mn=0,zi();var s=To,a=Ul,u=Is,h=Hb;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Mn=5:(Mn=0,Ul=To=null,rw(s,s.pendingLanes));var _=s.pendingLanes;if(_===0&&(_o=null),mt(u),a=a.stateNode,et&&typeof et.onCommitFiberRoot=="function")try{et.onCommitFiberRoot(Fn,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=ee.T,_=re.p,re.p=2,ee.T=null;try{for(var E=s.onRecoverableError,x=0;x<h.length;x++){var D=h[x];E(D.value,{componentStack:D.stack})}}finally{ee.T=a,re.p=_}}(Is&3)!==0&&Th(),Xr(s),_=s.pendingLanes,(u&261930)!==0&&(_&42)!==0?s===jy?Cc++:(Cc=0,jy=s):Cc=0,Ic(0)}}function rw(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,lc(a)))}function Th(){return tw(),nw(),iw(),sw()}function sw(){if(Mn!==5)return!1;var s=To,a=Hy;Hy=0;var u=mt(Is),h=ee.T,_=re.p;try{re.p=32>u?32:u,ee.T=null,u=Gy,Gy=null;var E=To,x=Is;if(Mn=0,Ul=To=null,Is=0,(bt&6)!==0)throw Error(i(331));var D=bt;if(bt|=4,Bb(E.current),Ob(E,E.current,x,u),bt=D,Ic(0,!1),et&&typeof et.onPostCommitFiberRoot=="function")try{et.onPostCommitFiberRoot(Fn,E)}catch{}return!0}finally{re.p=_,ee.T=h,rw(s,a)}}function ow(s,a,u){a=dr(u,a),a=by(s.stateNode,a,2),s=ho(s,a,2),s!==null&&(Dt(s,2),Xr(s))}function Pt(s,a,u){if(s.tag===3)ow(s,s,u);else for(;a!==null;){if(a.tag===3){ow(a,s,u);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(_o===null||!_o.has(h))){s=dr(u,s),u=ab(2),h=ho(a,u,2),h!==null&&(lb(u,h,a,s),Dt(h,2),Xr(h));break}}a=a.return}}function Yy(s,a,u){var h=s.pingCache;if(h===null){h=s.pingCache=new sV;var _=new Set;h.set(a,_)}else _=h.get(a),_===void 0&&(_=new Set,h.set(a,_));_.has(u)||(By=!0,_.add(u),s=cV.bind(null,s,a,u),a.then(s,s))}function cV(s,a,u){var h=s.pingCache;h!==null&&h.delete(a),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,Ut===s&&(at&u)===u&&(an===4||an===3&&(at&62914560)===at&&300>xt()-ph?(bt&2)===0&&Fl(s,0):zy|=u,Ol===at&&(Ol=0)),Xr(s)}function aw(s,a){a===0&&(a=$n()),s=Ea(s,a),s!==null&&(Dt(s,a),Xr(s))}function dV(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),aw(s,u)}function fV(s,a){var u=0;switch(s.tag){case 31:case 13:var h=s.stateNode,_=s.memoizedState;_!==null&&(u=_.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(a),aw(s,u)}function hV(s,a){return mi(s,a)}var Eh=null,zl=null,Jy=!1,Sh=!1,Wy=!1,So=0;function Xr(s){s!==zl&&s.next===null&&(zl===null?Eh=zl=s:zl=zl.next=s),Sh=!0,Jy||(Jy=!0,mV())}function Ic(s,a){if(!Wy&&Sh){Wy=!0;do for(var u=!1,h=Eh;h!==null;){if(s!==0){var _=h.pendingLanes;if(_===0)var E=0;else{var x=h.suspendedLanes,D=h.pingedLanes;E=(1<<31-be(42|s)+1)-1,E&=_&~(x&~D),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(u=!0,dw(h,E))}else E=at,E=Me(h,h===Ut?E:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(E&3)===0||Ke(h,E)||(u=!0,dw(h,E));h=h.next}while(u);Wy=!1}}function pV(){lw()}function lw(){Sh=Jy=!1;var s=0;So!==0&&xV()&&(s=So);for(var a=xt(),u=null,h=Eh;h!==null;){var _=h.next,E=uw(h,a);E===0?(h.next=null,u===null?Eh=_:u.next=_,_===null&&(zl=u)):(u=h,(s!==0||(E&3)!==0)&&(Sh=!0)),h=_}Mn!==0&&Mn!==5||Ic(s),So!==0&&(So=0)}function uw(s,a){for(var u=s.suspendedLanes,h=s.pingedLanes,_=s.expirationTimes,E=s.pendingLanes&-62914561;0<E;){var x=31-be(E),D=1<<x,j=_[x];j===-1?((D&u)===0||(D&h)!==0)&&(_[x]=hn(D,a)):j<=a&&(s.expiredLanes|=D),E&=~D}if(a=Ut,u=at,u=Me(s,s===a?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,u===0||s===a&&(Nt===2||Nt===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&gi(h),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||Ke(s,u)){if(a=u&-u,a===s.callbackPriority)return a;switch(h!==null&&gi(h),mt(u)){case 2:case 8:u=qt;break;case 32:u=rn;break;case 268435456:u=Un;break;default:u=rn}return h=cw.bind(null,s),u=mi(u,h),s.callbackPriority=a,s.callbackNode=u,a}return h!==null&&h!==null&&gi(h),s.callbackPriority=2,s.callbackNode=null,2}function cw(s,a){if(Mn!==0&&Mn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(Th()&&s.callbackNode!==u)return null;var h=at;return h=Me(s,s===Ut?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(jb(s,h,a),uw(s,xt()),s.callbackNode!=null&&s.callbackNode===u?cw.bind(null,s):null)}function dw(s,a){if(Th())return null;jb(s,a,!0)}function mV(){CV(function(){(bt&6)!==0?mi(Ge,pV):lw()})}function Qy(){if(So===0){var s=Al;s===0&&(s=Je,Je<<=1,(Je&261888)===0&&(Je=256)),So=s}return So}function fw(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:$r(""+s)}function hw(s,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,s.id&&u.setAttribute("form",s.id),a.parentNode.insertBefore(u,a),s=new FormData(s),u.parentNode.removeChild(u),s}function gV(s,a,u,h,_){if(a==="submit"&&u&&u.stateNode===_){var E=fw((_[Zt]||null).action),x=h.submitter;x&&(a=(a=x[Zt]||null)?fw(a.formAction):x.getAttribute("formAction"),a!==null&&(E=a,x=null));var D=new pa("action","action",null,h,_);s.push({event:D,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(So!==0){var j=x?hw(_,x):new FormData(_);yy(u,{pending:!0,data:j,method:_.method,action:E},null,j)}}else typeof E=="function"&&(D.preventDefault(),j=x?hw(_,x):new FormData(_),yy(u,{pending:!0,data:j,method:_.method,action:E},E,j))},currentTarget:_}]})}}for(var Xy=0;Xy<kg.length;Xy++){var Zy=kg[Xy],yV=Zy.toLowerCase(),vV=Zy[0].toUpperCase()+Zy.slice(1);Nr(yV,"on"+vV)}Nr(GE,"onAnimationEnd"),Nr(jE,"onAnimationIteration"),Nr($E,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(kk,"onTransitionRun"),Nr(Vk,"onTransitionStart"),Nr(Lk,"onTransitionCancel"),Nr(KE,"onTransitionEnd"),jr("onMouseEnter",["mouseout","mouseover"]),jr("onMouseLeave",["mouseout","mouseover"]),jr("onPointerEnter",["pointerout","pointerover"]),jr("onPointerLeave",["pointerout","pointerover"]),vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_V=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rc));function pw(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var h=s[u],_=h.event;h=h.listeners;e:{var E=void 0;if(a)for(var x=h.length-1;0<=x;x--){var D=h[x],j=D.instance,X=D.currentTarget;if(D=D.listener,j!==E&&_.isPropagationStopped())break e;E=D,_.currentTarget=X;try{E(_)}catch(oe){Of(oe)}_.currentTarget=null,E=j}else for(x=0;x<h.length;x++){if(D=h[x],j=D.instance,X=D.currentTarget,D=D.listener,j!==E&&_.isPropagationStopped())break e;E=D,_.currentTarget=X;try{E(_)}catch(oe){Of(oe)}_.currentTarget=null,E=j}}}}function st(s,a){var u=a[rr];u===void 0&&(u=a[rr]=new Set);var h=s+"__bubble";u.has(h)||(mw(a,s,2,!1),u.add(h))}function ev(s,a,u){var h=0;a&&(h|=4),mw(u,s,h,a)}var bh="_reactListening"+Math.random().toString(36).slice(2);function tv(s){if(!s[bh]){s[bh]=!0,Cr.forEach(function(u){u!=="selectionchange"&&(_V.has(u)||ev(u,!1,s),ev(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[bh]||(a[bh]=!0,ev("selectionchange",!1,a))}}function mw(s,a,u,h){switch(Gw(a)){case 2:var _=KV;break;case 8:_=YV;break;default:_=gv}u=_.bind(null,a,u,s),_=void 0,!Qu||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(_=!0),h?_!==void 0?s.addEventListener(a,u,{capture:!0,passive:_}):s.addEventListener(a,u,!0):_!==void 0?s.addEventListener(a,u,{passive:_}):s.addEventListener(a,u,!1)}function nv(s,a,u,h,_){var E=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var x=h.tag;if(x===3||x===4){var D=h.stateNode.containerInfo;if(D===_)break;if(x===4)for(x=h.return;x!==null;){var j=x.tag;if((j===3||j===4)&&x.stateNode.containerInfo===_)return;x=x.return}for(;D!==null;){if(x=Ii(D),x===null)return;if(j=x.tag,j===5||j===6||j===26||j===27){h=E=x;continue e}D=D.parentNode}}h=h.return}Ef(function(){var X=E,oe=hl(u),le=[];e:{var te=YE.get(s);if(te!==void 0){var ne=pa,Ce=s;switch(s){case"keypress":if(ha(u)===0)break e;case"keydown":case"keyup":ne=Nf;break;case"focusin":Ce="focus",ne=no;break;case"focusout":Ce="blur",ne=no;break;case"beforeblur":case"afterblur":ne=no;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=bf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=wf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=Df;break;case GE:case jE:case $E:ne=gl;break;case KE:ne=yl;break;case"scroll":case"scrollend":ne=Sf;break;case"wheel":ne=kf;break;case"copy":case"cut":case"paste":ne=Af;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=nc;break;case"toggle":case"beforetoggle":ne=ro}var Le=(a&4)!==0,Vt=!Le&&(s==="scroll"||s==="scrollend"),J=Le?te!==null?te+"Capture":null:te;Le=[];for(var Y=X,Q;Y!==null;){var ae=Y;if(Q=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||Q===null||J===null||(ae=Ri(Y,J),ae!=null&&Le.push(Nc(Y,ae,Q))),Vt)break;Y=Y.return}0<Le.length&&(te=new ne(te,Ce,null,u,oe),le.push({event:te,listeners:Le}))}}if((a&7)===0){e:{if(te=s==="mouseover"||s==="pointerover",ne=s==="mouseout"||s==="pointerout",te&&u!==fl&&(Ce=u.relatedTarget||u.fromElement)&&(Ii(Ce)||Ce[qi]))break e;if((ne||te)&&(te=oe.window===oe?oe:(te=oe.ownerDocument)?te.defaultView||te.parentWindow:window,ne?(Ce=u.relatedTarget||u.toElement,ne=X,Ce=Ce?Ii(Ce):null,Ce!==null&&(Vt=o(Ce),Le=Ce.tag,Ce!==Vt||Le!==5&&Le!==27&&Le!==6)&&(Ce=null)):(ne=null,Ce=X),ne!==Ce)){if(Le=bf,ae="onMouseLeave",J="onMouseEnter",Y="mouse",(s==="pointerout"||s==="pointerover")&&(Le=nc,ae="onPointerLeave",J="onPointerEnter",Y="pointer"),Vt=ne==null?te:Gr(ne),Q=Ce==null?te:Gr(Ce),te=new Le(ae,Y+"leave",ne,u,oe),te.target=Vt,te.relatedTarget=Q,ae=null,Ii(oe)===X&&(Le=new Le(J,Y+"enter",Ce,u,oe),Le.target=Q,Le.relatedTarget=Vt,ae=Le),Vt=ae,ne&&Ce)t:{for(Le=TV,J=ne,Y=Ce,Q=0,ae=J;ae;ae=Le(ae))Q++;ae=0;for(var Pe=Y;Pe;Pe=Le(Pe))ae++;for(;0<Q-ae;)J=Le(J),Q--;for(;0<ae-Q;)Y=Le(Y),ae--;for(;Q--;){if(J===Y||Y!==null&&J===Y.alternate){Le=J;break t}J=Le(J),Y=Le(Y)}Le=null}else Le=null;ne!==null&&gw(le,te,ne,Le,!1),Ce!==null&&Vt!==null&&gw(le,Vt,Ce,Le,!0)}}e:{if(te=X?Gr(X):window,ne=te.nodeName&&te.nodeName.toLowerCase(),ne==="select"||ne==="input"&&te.type==="file")var _t=ME;else if(Ni(te))if(kE)_t=Pk;else{_t=Rk;var Ne=Ik}else ne=te.nodeName,!ne||ne.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?X&&Ju(X.elementType)&&(_t=ME):_t=Nk;if(_t&&(_t=_t(s,X))){va(le,_t,u,oe);break e}Ne&&Ne(s,te,X),s==="focusout"&&X&&te.type==="number"&&X.memoizedProps.value!=null&&dl(te,"number",te.value)}switch(Ne=X?Gr(X):window,s){case"focusin":(Ni(Ne)||Ne.contentEditable==="true")&&(vl=Ne,Pg=X,sc=null);break;case"focusout":sc=Pg=vl=null;break;case"mousedown":Dg=!0;break;case"contextmenu":case"mouseup":case"dragend":Dg=!1,qE(le,u,oe);break;case"selectionchange":if(Mk)break;case"keydown":case"keyup":qE(le,u,oe)}var Ye;if(w)e:{switch(s){case"compositionstart":var lt="onCompositionStart";break e;case"compositionend":lt="onCompositionEnd";break e;case"compositionupdate":lt="onCompositionUpdate";break e}lt=void 0}else Xe?At(s,u)&&(lt="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(lt="onCompositionStart");lt&&(W&&u.locale!=="ko"&&(Xe||lt!=="onCompositionStart"?lt==="onCompositionEnd"&&Xe&&(Ye=Xs()):(ji=oe,pl="value"in ji?ji.value:ji.textContent,Xe=!0)),Ne=wh(X,lt),0<Ne.length&&(lt=new Zu(lt,s,null,u,oe),le.push({event:lt,listeners:Ne}),Ye?lt.data=Ye:(Ye=En(u),Ye!==null&&(lt.data=Ye)))),(Ye=O?zn(s,u):qn(s,u))&&(lt=wh(X,"onBeforeInput"),0<lt.length&&(Ne=new Zu("onBeforeInput","beforeinput",null,u,oe),le.push({event:Ne,listeners:lt}),Ne.data=Ye)),gV(le,s,X,u,oe)}pw(le,a)})}function Nc(s,a,u){return{instance:s,listener:a,currentTarget:u}}function wh(s,a){for(var u=a+"Capture",h=[];s!==null;){var _=s,E=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||E===null||(_=Ri(s,u),_!=null&&h.unshift(Nc(s,_,E)),_=Ri(s,a),_!=null&&h.push(Nc(s,_,E))),s.tag===3)return h;s=s.return}return[]}function TV(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function gw(s,a,u,h,_){for(var E=a._reactName,x=[];u!==null&&u!==h;){var D=u,j=D.alternate,X=D.stateNode;if(D=D.tag,j!==null&&j===h)break;D!==5&&D!==26&&D!==27||X===null||(j=X,_?(X=Ri(u,E),X!=null&&x.unshift(Nc(u,X,j))):_||(X=Ri(u,E),X!=null&&x.push(Nc(u,X,j)))),u=u.return}x.length!==0&&s.push({event:a,listeners:x})}var EV=/\r\n?/g,SV=/\u0000|\uFFFD/g;function yw(s){return(typeof s=="string"?s:""+s).replace(EV,`
`).replace(SV,"")}function vw(s,a){return a=yw(a),yw(s)===a}function kt(s,a,u,h,_,E){switch(u){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||ur(s,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&ur(s,""+h);break;case"className":Js(s,"class",h);break;case"tabIndex":Js(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Js(s,u,h);break;case"style":_f(s,h,E);break;case"data":if(a!=="object"){Js(s,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||u!=="href")){s.removeAttribute(u);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=$r(""+h),s.setAttribute(u,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(u==="formAction"?(a!=="input"&&kt(s,a,"name",_.name,_,null),kt(s,a,"formEncType",_.formEncType,_,null),kt(s,a,"formMethod",_.formMethod,_,null),kt(s,a,"formTarget",_.formTarget,_,null)):(kt(s,a,"encType",_.encType,_,null),kt(s,a,"method",_.method,_,null),kt(s,a,"target",_.target,_,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=$r(""+h),s.setAttribute(u,h);break;case"onClick":h!=null&&(s.onclick=Bn);break;case"onScroll":h!=null&&st("scroll",s);break;case"onScrollEnd":h!=null&&st("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(_.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}u=$r(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""+h):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":h===!0?s.setAttribute(u,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,h):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(u,h):s.removeAttribute(u);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(u):s.setAttribute(u,h);break;case"popover":st("beforetoggle",s),st("toggle",s),Ys(s,"popover",h);break;case"xlinkActuate":lr(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":lr(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":lr(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":lr(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":lr(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":lr(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":lr(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":lr(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":lr(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Ys(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=xg.get(u)||u,Ys(s,u,h))}}function iv(s,a,u,h,_,E){switch(u){case"style":_f(s,h,E);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(_.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"children":typeof h=="string"?ur(s,h):(typeof h=="number"||typeof h=="bigint")&&ur(s,""+h);break;case"onScroll":h!=null&&st("scroll",s);break;case"onScrollEnd":h!=null&&st("scrollend",s);break;case"onClick":h!=null&&(s.onclick=Bn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ir.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(_=u.endsWith("Capture"),a=u.slice(2,_?u.length-7:void 0),E=s[Zt]||null,E=E!=null?E[u]:null,typeof E=="function"&&s.removeEventListener(a,E,_),typeof h=="function")){typeof E!="function"&&E!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(a,h,_);break e}u in s?s[u]=h:h===!0?s.setAttribute(u,""):Ys(s,u,h)}}}function Qn(s,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",s),st("load",s);var h=!1,_=!1,E;for(E in u)if(u.hasOwnProperty(E)){var x=u[E];if(x!=null)switch(E){case"src":h=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:kt(s,a,E,x,u,null)}}_&&kt(s,a,"srcSet",u.srcSet,u,null),h&&kt(s,a,"src",u.src,u,null);return;case"input":st("invalid",s);var D=E=x=_=null,j=null,X=null;for(h in u)if(u.hasOwnProperty(h)){var oe=u[h];if(oe!=null)switch(h){case"name":_=oe;break;case"type":x=oe;break;case"checked":j=oe;break;case"defaultChecked":X=oe;break;case"value":E=oe;break;case"defaultValue":D=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,a));break;default:kt(s,a,h,oe,u,null)}}da(s,E,D,j,X,x,_,!1);return;case"select":st("invalid",s),h=x=E=null;for(_ in u)if(u.hasOwnProperty(_)&&(D=u[_],D!=null))switch(_){case"value":E=D;break;case"defaultValue":x=D;break;case"multiple":h=D;default:kt(s,a,_,D,u,null)}a=E,u=x,s.multiple=!!h,a!=null?vt(s,!!h,a,!1):u!=null&&vt(s,!!h,u,!0);return;case"textarea":st("invalid",s),E=_=h=null;for(x in u)if(u.hasOwnProperty(x)&&(D=u[x],D!=null))switch(x){case"value":h=D;break;case"defaultValue":_=D;break;case"children":E=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(i(91));break;default:kt(s,a,x,D,u,null)}Qs(s,h,_,E);return;case"option":for(j in u)if(u.hasOwnProperty(j)&&(h=u[j],h!=null))switch(j){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:kt(s,a,j,h,u,null)}return;case"dialog":st("beforetoggle",s),st("toggle",s),st("cancel",s),st("close",s);break;case"iframe":case"object":st("load",s);break;case"video":case"audio":for(h=0;h<Rc.length;h++)st(Rc[h],s);break;case"image":st("error",s),st("load",s);break;case"details":st("toggle",s);break;case"embed":case"source":case"link":st("error",s),st("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in u)if(u.hasOwnProperty(X)&&(h=u[X],h!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:kt(s,a,X,h,u,null)}return;default:if(Ju(a)){for(oe in u)u.hasOwnProperty(oe)&&(h=u[oe],h!==void 0&&iv(s,a,oe,h,u,void 0));return}}for(D in u)u.hasOwnProperty(D)&&(h=u[D],h!=null&&kt(s,a,D,h,u,null))}function bV(s,a,u,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,E=null,x=null,D=null,j=null,X=null,oe=null;for(ne in u){var le=u[ne];if(u.hasOwnProperty(ne)&&le!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":j=le;default:h.hasOwnProperty(ne)||kt(s,a,ne,null,h,le)}}for(var te in h){var ne=h[te];if(le=u[te],h.hasOwnProperty(te)&&(ne!=null||le!=null))switch(te){case"type":E=ne;break;case"name":_=ne;break;case"checked":X=ne;break;case"defaultChecked":oe=ne;break;case"value":x=ne;break;case"defaultValue":D=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,a));break;default:ne!==le&&kt(s,a,te,ne,h,le)}}Ws(s,x,D,j,X,oe,E,_);return;case"select":ne=x=D=te=null;for(E in u)if(j=u[E],u.hasOwnProperty(E)&&j!=null)switch(E){case"value":break;case"multiple":ne=j;default:h.hasOwnProperty(E)||kt(s,a,E,null,h,j)}for(_ in h)if(E=h[_],j=u[_],h.hasOwnProperty(_)&&(E!=null||j!=null))switch(_){case"value":te=E;break;case"defaultValue":D=E;break;case"multiple":x=E;default:E!==j&&kt(s,a,_,E,h,j)}a=D,u=x,h=ne,te!=null?vt(s,!!u,te,!1):!!h!=!!u&&(a!=null?vt(s,!!u,a,!0):vt(s,!!u,u?[]:"",!1));return;case"textarea":ne=te=null;for(D in u)if(_=u[D],u.hasOwnProperty(D)&&_!=null&&!h.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:kt(s,a,D,null,h,_)}for(x in h)if(_=h[x],E=u[x],h.hasOwnProperty(x)&&(_!=null||E!=null))switch(x){case"value":te=_;break;case"defaultValue":ne=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(i(91));break;default:_!==E&&kt(s,a,x,_,h,E)}fa(s,te,ne);return;case"option":for(var Ce in u)if(te=u[Ce],u.hasOwnProperty(Ce)&&te!=null&&!h.hasOwnProperty(Ce))switch(Ce){case"selected":s.selected=!1;break;default:kt(s,a,Ce,null,h,te)}for(j in h)if(te=h[j],ne=u[j],h.hasOwnProperty(j)&&te!==ne&&(te!=null||ne!=null))switch(j){case"selected":s.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:kt(s,a,j,te,h,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in u)te=u[Le],u.hasOwnProperty(Le)&&te!=null&&!h.hasOwnProperty(Le)&&kt(s,a,Le,null,h,te);for(X in h)if(te=h[X],ne=u[X],h.hasOwnProperty(X)&&te!==ne&&(te!=null||ne!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,a));break;default:kt(s,a,X,te,h,ne)}return;default:if(Ju(a)){for(var Vt in u)te=u[Vt],u.hasOwnProperty(Vt)&&te!==void 0&&!h.hasOwnProperty(Vt)&&iv(s,a,Vt,void 0,h,te);for(oe in h)te=h[oe],ne=u[oe],!h.hasOwnProperty(oe)||te===ne||te===void 0&&ne===void 0||iv(s,a,oe,te,h,ne);return}}for(var J in u)te=u[J],u.hasOwnProperty(J)&&te!=null&&!h.hasOwnProperty(J)&&kt(s,a,J,null,h,te);for(le in h)te=h[le],ne=u[le],!h.hasOwnProperty(le)||te===ne||te==null&&ne==null||kt(s,a,le,te,h,ne)}function _w(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function wV(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,u=performance.getEntriesByType("resource"),h=0;h<u.length;h++){var _=u[h],E=_.transferSize,x=_.initiatorType,D=_.duration;if(E&&D&&_w(x)){for(x=0,D=_.responseEnd,h+=1;h<u.length;h++){var j=u[h],X=j.startTime;if(X>D)break;var oe=j.transferSize,le=j.initiatorType;oe&&_w(le)&&(j=j.responseEnd,x+=oe*(j<D?1:(D-X)/(j-X)))}if(--h,a+=8*(E+x)/(_.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var rv=null,sv=null;function xh(s){return s.nodeType===9?s:s.ownerDocument}function Tw(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ew(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function ov(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var av=null;function xV(){var s=window.event;return s&&s.type==="popstate"?s===av?!1:(av=s,!0):(av=null,!1)}var Sw=typeof setTimeout=="function"?setTimeout:void 0,AV=typeof clearTimeout=="function"?clearTimeout:void 0,bw=typeof Promise=="function"?Promise:void 0,CV=typeof queueMicrotask=="function"?queueMicrotask:typeof bw<"u"?function(s){return bw.resolve(null).then(s).catch(IV)}:Sw;function IV(s){setTimeout(function(){throw s})}function bo(s){return s==="head"}function ww(s,a){var u=a,h=0;do{var _=u.nextSibling;if(s.removeChild(u),_&&_.nodeType===8)if(u=_.data,u==="/$"||u==="/&"){if(h===0){s.removeChild(_),jl(a);return}h--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")h++;else if(u==="html")Pc(s.ownerDocument.documentElement);else if(u==="head"){u=s.ownerDocument.head,Pc(u);for(var E=u.firstChild;E;){var x=E.nextSibling,D=E.nodeName;E[sr]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&E.rel.toLowerCase()==="stylesheet"||u.removeChild(E),E=x}}else u==="body"&&Pc(s.ownerDocument.body);u=_}while(u);jl(a)}function xw(s,a){var u=s;s=0;do{var h=u.nextSibling;if(u.nodeType===1?a?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(a?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),h&&h.nodeType===8)if(u=h.data,u==="/$"){if(s===0)break;s--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||s++;u=h}while(u)}function lv(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":lv(u),or(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function RV(s,a,u,h){for(;s.nodeType===1;){var _=u;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[sr])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(E=s.getAttribute("rel"),E==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(E!==_.rel||s.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||s.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||s.getAttribute("title")!==(_.title==null?null:_.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(E=s.getAttribute("src"),(E!==(_.src==null?null:_.src)||s.getAttribute("type")!==(_.type==null?null:_.type)||s.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&E&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var E=_.name==null?null:""+_.name;if(_.type==="hidden"&&s.getAttribute("name")===E)return s}else return s;if(s=gr(s.nextSibling),s===null)break}return null}function NV(s,a,u){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=gr(s.nextSibling),s===null))return null;return s}function Aw(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=gr(s.nextSibling),s===null))return null;return s}function uv(s){return s.data==="$?"||s.data==="$~"}function cv(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function PV(s,a){var u=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||u.readyState!=="loading")a();else{var h=function(){a(),u.removeEventListener("DOMContentLoaded",h)};u.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function gr(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var dv=null;function Cw(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"||u==="/&"){if(a===0)return gr(s.nextSibling);a--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||a++}s=s.nextSibling}return null}function Iw(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(a===0)return s;a--}else u!=="/$"&&u!=="/&"||a++}s=s.previousSibling}return null}function Rw(s,a,u){switch(a=xh(u),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Pc(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);or(s)}var yr=new Map,Nw=new Set;function Ah(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Rs=re.d;re.d={f:DV,r:MV,D:kV,C:VV,L:LV,m:OV,X:FV,S:UV,M:BV};function DV(){var s=Rs.f(),a=yh();return s||a}function MV(s){var a=ar(s);a!==null&&a.tag===5&&a.type==="form"?KS(a):Rs.r(s)}var ql=typeof document>"u"?null:document;function Pw(s,a,u){var h=ql;if(h&&typeof a=="string"&&a){var _=sn(a);_='link[rel="'+s+'"][href="'+_+'"]',typeof u=="string"&&(_+='[crossorigin="'+u+'"]'),Nw.has(_)||(Nw.add(_),s={rel:s,crossOrigin:u,href:a},h.querySelector(_)===null&&(a=h.createElement("link"),Qn(a,"link",s),Wt(a),h.head.appendChild(a)))}}function kV(s){Rs.D(s),Pw("dns-prefetch",s,null)}function VV(s,a){Rs.C(s,a),Pw("preconnect",s,a)}function LV(s,a,u){Rs.L(s,a,u);var h=ql;if(h&&s&&a){var _='link[rel="preload"][as="'+sn(a)+'"]';a==="image"&&u&&u.imageSrcSet?(_+='[imagesrcset="'+sn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(_+='[imagesizes="'+sn(u.imageSizes)+'"]')):_+='[href="'+sn(s)+'"]';var E=_;switch(a){case"style":E=Hl(s);break;case"script":E=Gl(s)}yr.has(E)||(s=v({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:s,as:a},u),yr.set(E,s),h.querySelector(_)!==null||a==="style"&&h.querySelector(Dc(E))||a==="script"&&h.querySelector(Mc(E))||(a=h.createElement("link"),Qn(a,"link",s),Wt(a),h.head.appendChild(a)))}}function OV(s,a){Rs.m(s,a);var u=ql;if(u&&s){var h=a&&typeof a.as=="string"?a.as:"script",_='link[rel="modulepreload"][as="'+sn(h)+'"][href="'+sn(s)+'"]',E=_;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Gl(s)}if(!yr.has(E)&&(s=v({rel:"modulepreload",href:s},a),yr.set(E,s),u.querySelector(_)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Mc(E)))return}h=u.createElement("link"),Qn(h,"link",s),Wt(h),u.head.appendChild(h)}}}function UV(s,a,u){Rs.S(s,a,u);var h=ql;if(h&&s){var _=yi(h).hoistableStyles,E=Hl(s);a=a||"default";var x=_.get(E);if(!x){var D={loading:0,preload:null};if(x=h.querySelector(Dc(E)))D.loading=5;else{s=v({rel:"stylesheet",href:s,"data-precedence":a},u),(u=yr.get(E))&&fv(s,u);var j=x=h.createElement("link");Wt(j),Qn(j,"link",s),j._p=new Promise(function(X,oe){j.onload=X,j.onerror=oe}),j.addEventListener("load",function(){D.loading|=1}),j.addEventListener("error",function(){D.loading|=2}),D.loading|=4,Ch(x,a,h)}x={type:"stylesheet",instance:x,count:1,state:D},_.set(E,x)}}}function FV(s,a){Rs.X(s,a);var u=ql;if(u&&s){var h=yi(u).hoistableScripts,_=Gl(s),E=h.get(_);E||(E=u.querySelector(Mc(_)),E||(s=v({src:s,async:!0},a),(a=yr.get(_))&&hv(s,a),E=u.createElement("script"),Wt(E),Qn(E,"link",s),u.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},h.set(_,E))}}function BV(s,a){Rs.M(s,a);var u=ql;if(u&&s){var h=yi(u).hoistableScripts,_=Gl(s),E=h.get(_);E||(E=u.querySelector(Mc(_)),E||(s=v({src:s,async:!0,type:"module"},a),(a=yr.get(_))&&hv(s,a),E=u.createElement("script"),Wt(E),Qn(E,"link",s),u.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},h.set(_,E))}}function Dw(s,a,u,h){var _=(_=Ee.current)?Ah(_):null;if(!_)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=Hl(u.href),u=yi(_).hoistableStyles,h=u.get(a),h||(h={type:"style",instance:null,count:0,state:null},u.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=Hl(u.href);var E=yi(_).hoistableStyles,x=E.get(s);if(x||(_=_.ownerDocument||_,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(s,x),(E=_.querySelector(Dc(s)))&&!E._p&&(x.instance=E,x.state.loading=5),yr.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},yr.set(s,u),E||zV(_,s,u,x.state))),a&&h===null)throw Error(i(528,""));return x}if(a&&h!==null)throw Error(i(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Gl(u),u=yi(_).hoistableScripts,h=u.get(a),h||(h={type:"script",instance:null,count:0,state:null},u.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Hl(s){return'href="'+sn(s)+'"'}function Dc(s){return'link[rel="stylesheet"]['+s+"]"}function Mw(s){return v({},s,{"data-precedence":s.precedence,precedence:null})}function zV(s,a,u,h){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=s.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),Qn(a,"link",u),Wt(a),s.head.appendChild(a))}function Gl(s){return'[src="'+sn(s)+'"]'}function Mc(s){return"script[async]"+s}function kw(s,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var h=s.querySelector('style[data-href~="'+sn(u.href)+'"]');if(h)return a.instance=h,Wt(h),h;var _=v({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),Wt(h),Qn(h,"style",_),Ch(h,u.precedence,s),a.instance=h;case"stylesheet":_=Hl(u.href);var E=s.querySelector(Dc(_));if(E)return a.state.loading|=4,a.instance=E,Wt(E),E;h=Mw(u),(_=yr.get(_))&&fv(h,_),E=(s.ownerDocument||s).createElement("link"),Wt(E);var x=E;return x._p=new Promise(function(D,j){x.onload=D,x.onerror=j}),Qn(E,"link",h),a.state.loading|=4,Ch(E,u.precedence,s),a.instance=E;case"script":return E=Gl(u.src),(_=s.querySelector(Mc(E)))?(a.instance=_,Wt(_),_):(h=u,(_=yr.get(E))&&(h=v({},u),hv(h,_)),s=s.ownerDocument||s,_=s.createElement("script"),Wt(_),Qn(_,"link",h),s.head.appendChild(_),a.instance=_);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,Ch(h,u.precedence,s));return a.instance}function Ch(s,a,u){for(var h=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=h.length?h[h.length-1]:null,E=_,x=0;x<h.length;x++){var D=h[x];if(D.dataset.precedence===a)E=D;else if(E!==_)break}E?E.parentNode.insertBefore(s,E.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(s,a.firstChild))}function fv(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function hv(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var Ih=null;function Vw(s,a,u){if(Ih===null){var h=new Map,_=Ih=new Map;_.set(u,h)}else _=Ih,h=_.get(u),h||(h=new Map,_.set(u,h));if(h.has(s))return h;for(h.set(s,null),u=u.getElementsByTagName(s),_=0;_<u.length;_++){var E=u[_];if(!(E[sr]||E[Rt]||s==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var x=E.getAttribute(a)||"";x=s+x;var D=h.get(x);D?D.push(E):h.set(x,[E])}}return h}function Lw(s,a,u){s=s.ownerDocument||s,s.head.insertBefore(u,a==="title"?s.querySelector("head > title"):null)}function qV(s,a,u){if(u===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Ow(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function HV(s,a,u,h){if(u.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var _=Hl(h.href),E=a.querySelector(Dc(_));if(E){a=E._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=Rh.bind(s),a.then(s,s)),u.state.loading|=4,u.instance=E,Wt(E);return}E=a.ownerDocument||a,h=Mw(h),(_=yr.get(_))&&fv(h,_),E=E.createElement("link"),Wt(E);var x=E;x._p=new Promise(function(D,j){x.onload=D,x.onerror=j}),Qn(E,"link",h),u.instance=E}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(u,a),(a=u.state.preload)&&(u.state.loading&3)===0&&(s.count++,u=Rh.bind(s),a.addEventListener("load",u),a.addEventListener("error",u))}}var pv=0;function GV(s,a){return s.stylesheets&&s.count===0&&Ph(s,s.stylesheets),0<s.count||0<s.imgCount?function(u){var h=setTimeout(function(){if(s.stylesheets&&Ph(s,s.stylesheets),s.unsuspend){var E=s.unsuspend;s.unsuspend=null,E()}},6e4+a);0<s.imgBytes&&pv===0&&(pv=62500*wV());var _=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Ph(s,s.stylesheets),s.unsuspend)){var E=s.unsuspend;s.unsuspend=null,E()}},(s.imgBytes>pv?50:800)+a);return s.unsuspend=u,function(){s.unsuspend=null,clearTimeout(h),clearTimeout(_)}}:null}function Rh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ph(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Nh=null;function Ph(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Nh=new Map,a.forEach(jV,s),Nh=null,Rh.call(s))}function jV(s,a){if(!(a.state.loading&4)){var u=Nh.get(s);if(u)var h=u.get(null);else{u=new Map,Nh.set(s,u);for(var _=s.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<_.length;E++){var x=_[E];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(u.set(x.dataset.precedence,x),h=x)}h&&u.set(null,h)}_=a.instance,x=_.getAttribute("data-precedence"),E=u.get(x)||h,E===h&&u.set(null,_),u.set(x,_),this.count++,h=Rh.bind(this),_.addEventListener("load",h),_.addEventListener("error",h),E?E.parentNode.insertBefore(_,E.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(_,s.firstChild)),a.state.loading|=4}}var kc={$$typeof:F,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function $V(s,a,u,h,_,E,x,D,j){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xt(0),this.hiddenUpdates=Xt(null),this.identifierPrefix=h,this.onUncaughtError=_,this.onCaughtError=E,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function Uw(s,a,u,h,_,E,x,D,j,X,oe,le){return s=new $V(s,a,u,x,j,X,oe,le,D),a=1,E===!0&&(a|=24),E=Ki(3,null,null,a),s.current=E,E.stateNode=s,a=Kg(),a.refCount++,s.pooledCache=a,a.refCount++,E.memoizedState={element:h,isDehydrated:u,cache:a},Qg(E),s}function Fw(s){return s?(s=El,s):El}function Bw(s,a,u,h,_,E){_=Fw(_),h.context===null?h.context=_:h.pendingContext=_,h=fo(a),h.payload={element:u},E=E===void 0?null:E,E!==null&&(h.callback=E),u=ho(s,h,a),u!==null&&(Vi(u,s,a),fc(u,s,a))}function zw(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function mv(s,a){zw(s,a),(s=s.alternate)&&zw(s,a)}function qw(s){if(s.tag===13||s.tag===31){var a=Ea(s,67108864);a!==null&&Vi(a,s,67108864),mv(s,67108864)}}function Hw(s){if(s.tag===13||s.tag===31){var a=Xi();a=tt(a);var u=Ea(s,a);u!==null&&Vi(u,s,a),mv(s,a)}}var Dh=!0;function KV(s,a,u,h){var _=ee.T;ee.T=null;var E=re.p;try{re.p=2,gv(s,a,u,h)}finally{re.p=E,ee.T=_}}function YV(s,a,u,h){var _=ee.T;ee.T=null;var E=re.p;try{re.p=8,gv(s,a,u,h)}finally{re.p=E,ee.T=_}}function gv(s,a,u,h){if(Dh){var _=yv(h);if(_===null)nv(s,a,h,Mh,u),jw(s,h);else if(WV(_,s,a,u,h))h.stopPropagation();else if(jw(s,h),a&4&&-1<JV.indexOf(s)){for(;_!==null;){var E=ar(_);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var x=it(E.pendingLanes);if(x!==0){var D=E;for(D.pendingLanes|=2,D.entangledLanes|=2;x;){var j=1<<31-be(x);D.entanglements[1]|=j,x&=~j}Xr(E),(bt&6)===0&&(mh=xt()+500,Ic(0))}}break;case 31:case 13:D=Ea(E,2),D!==null&&Vi(D,E,2),yh(),mv(E,2)}if(E=yv(h),E===null&&nv(s,a,h,Mh,u),E===_)break;_=E}_!==null&&h.stopPropagation()}else nv(s,a,h,null,u)}}function yv(s){return s=hl(s),vv(s)}var Mh=null;function vv(s){if(Mh=null,s=Ii(s),s!==null){var a=o(s);if(a===null)s=null;else{var u=a.tag;if(u===13){if(s=l(a),s!==null)return s;s=null}else if(u===31){if(s=c(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return Mh=s,null}function Gw(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zt()){case Ge:return 2;case qt:return 8;case rn:case Ot:return 32;case Un:return 268435456;default:return 32}default:return 32}}var _v=!1,wo=null,xo=null,Ao=null,Vc=new Map,Lc=new Map,Co=[],JV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jw(s,a){switch(s){case"focusin":case"focusout":wo=null;break;case"dragenter":case"dragleave":xo=null;break;case"mouseover":case"mouseout":Ao=null;break;case"pointerover":case"pointerout":Vc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lc.delete(a.pointerId)}}function Oc(s,a,u,h,_,E){return s===null||s.nativeEvent!==E?(s={blockedOn:a,domEventName:u,eventSystemFlags:h,nativeEvent:E,targetContainers:[_]},a!==null&&(a=ar(a),a!==null&&qw(a)),s):(s.eventSystemFlags|=h,a=s.targetContainers,_!==null&&a.indexOf(_)===-1&&a.push(_),s)}function WV(s,a,u,h,_){switch(a){case"focusin":return wo=Oc(wo,s,a,u,h,_),!0;case"dragenter":return xo=Oc(xo,s,a,u,h,_),!0;case"mouseover":return Ao=Oc(Ao,s,a,u,h,_),!0;case"pointerover":var E=_.pointerId;return Vc.set(E,Oc(Vc.get(E)||null,s,a,u,h,_)),!0;case"gotpointercapture":return E=_.pointerId,Lc.set(E,Oc(Lc.get(E)||null,s,a,u,h,_)),!0}return!1}function $w(s){var a=Ii(s.target);if(a!==null){var u=o(a);if(u!==null){if(a=u.tag,a===13){if(a=l(u),a!==null){s.blockedOn=a,xr(s.priority,function(){Hw(u)});return}}else if(a===31){if(a=c(u),a!==null){s.blockedOn=a,xr(s.priority,function(){Hw(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function kh(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=yv(s.nativeEvent);if(u===null){u=s.nativeEvent;var h=new u.constructor(u.type,u);fl=h,u.target.dispatchEvent(h),fl=null}else return a=ar(u),a!==null&&qw(a),s.blockedOn=u,!1;a.shift()}return!0}function Kw(s,a,u){kh(s)&&u.delete(a)}function QV(){_v=!1,wo!==null&&kh(wo)&&(wo=null),xo!==null&&kh(xo)&&(xo=null),Ao!==null&&kh(Ao)&&(Ao=null),Vc.forEach(Kw),Lc.forEach(Kw)}function Vh(s,a){s.blockedOn===a&&(s.blockedOn=null,_v||(_v=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,QV)))}var Lh=null;function Yw(s){Lh!==s&&(Lh=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Lh===s&&(Lh=null);for(var a=0;a<s.length;a+=3){var u=s[a],h=s[a+1],_=s[a+2];if(typeof h!="function"){if(vv(h||u)===null)continue;break}var E=ar(u);E!==null&&(s.splice(a,3),a-=3,yy(E,{pending:!0,data:_,method:u.method,action:h},h,_))}}))}function jl(s){function a(j){return Vh(j,s)}wo!==null&&Vh(wo,s),xo!==null&&Vh(xo,s),Ao!==null&&Vh(Ao,s),Vc.forEach(a),Lc.forEach(a);for(var u=0;u<Co.length;u++){var h=Co[u];h.blockedOn===s&&(h.blockedOn=null)}for(;0<Co.length&&(u=Co[0],u.blockedOn===null);)$w(u),u.blockedOn===null&&Co.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(h=0;h<u.length;h+=3){var _=u[h],E=u[h+1],x=_[Zt]||null;if(typeof E=="function")x||Yw(u);else if(x){var D=null;if(E&&E.hasAttribute("formAction")){if(_=E,x=E[Zt]||null)D=x.formAction;else if(vv(_)!==null)continue}else D=x.action;typeof D=="function"?u[h+1]=D:(u.splice(h,3),h-=3),Yw(u)}}}function Jw(){function s(E){E.canIntercept&&E.info==="react-transition"&&E.intercept({handler:function(){return new Promise(function(x){return _=x})},focusReset:"manual",scroll:"manual"})}function a(){_!==null&&(_(),_=null),h||setTimeout(u,20)}function u(){if(!h&&!navigation.transition){var E=navigation.currentEntry;E&&E.url!=null&&navigation.navigate(E.url,{state:E.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,_=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(u,100),function(){h=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),_!==null&&(_(),_=null)}}}function Tv(s){this._internalRoot=s}Oh.prototype.render=Tv.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var u=a.current,h=Xi();Bw(u,h,s,a,null,null)},Oh.prototype.unmount=Tv.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;Bw(s.current,2,null,s,null,null),yh(),a[qi]=null}};function Oh(s){this._internalRoot=s}Oh.prototype.unstable_scheduleHydration=function(s){if(s){var a=Tn();s={blockedOn:null,target:s,priority:a};for(var u=0;u<Co.length&&a!==0&&a<Co[u].priority;u++);Co.splice(u,0,s),u===0&&$w(s)}};var Ww=e.version;if(Ww!=="19.2.0")throw Error(i(527,Ww,"19.2.0"));re.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=f(a),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var XV={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uh.isDisabled&&Uh.supportsFiber)try{Fn=Uh.inject(XV),et=Uh}catch{}}return Fc.createRoot=function(s,a){if(!r(s))throw Error(i(299));var u=!1,h="",_=ib,E=rb,x=sb;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=Uw(s,1,!1,null,null,u,h,null,_,E,x,Jw),s[qi]=a.current,tv(s),new Tv(a)},Fc.hydrateRoot=function(s,a,u){if(!r(s))throw Error(i(299));var h=!1,_="",E=ib,x=rb,D=sb,j=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onUncaughtError!==void 0&&(E=u.onUncaughtError),u.onCaughtError!==void 0&&(x=u.onCaughtError),u.onRecoverableError!==void 0&&(D=u.onRecoverableError),u.formState!==void 0&&(j=u.formState)),a=Uw(s,1,!0,a,u??null,h,_,j,E,x,D,Jw),a.context=Fw(null),u=a.current,h=Xi(),h=tt(h),_=fo(h),_.callback=null,ho(u,_,h),u=h,a.current.lanes=u,Dt(a,u),Xr(a),s[qi]=a.current,tv(s),new Oh(a)},Fc.version="19.2.0",Fc}var ox;function aL(){if(ox)return bv.exports;ox=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),bv.exports=oL(),bv.exports}var lL=aL();const uL=S1(lL),Bc=[{emoji:"",title:"Bienvenue dans Dress Me Up!",description:"Votre assistant mode personnel propuls par l'IA. Dcouvrons ensemble comment a marche."},{emoji:"",title:"Ajoutez vos vtements",description:"Prenez en photo vos vtements. L'IA analysera automatiquement la couleur, la matire et le type."},{emoji:"",title:"Gnrez des tenues",description:"Dcrivez une occasion et l'IA crera des combinaisons parfaites  partir de votre garde-robe."},{emoji:"",title:"Planifiez vos valises",description:"Partez en voyage ? L'IA optimise votre valise selon la dure et la destination."}],cL=({onComplete:t})=>{const[e,n]=B.useState(0),i=()=>{e<Bc.length-1?n(e+1):(localStorage.setItem("dressmup_onboarding_complete","true"),t())},r=()=>{localStorage.setItem("dressmup_onboarding_complete","true"),t()},o=Bc[e];return S.jsx("div",{className:"fixed inset-0 bg-onyx/90 backdrop-blur-md flex items-center justify-center z-[200] p-4",children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-md w-full overflow-hidden",children:[S.jsx("div",{className:"h-1 bg-gray-200 dark:bg-gray-700",children:S.jsx("div",{className:"h-full bg-gold transition-all duration-300",style:{width:`${(e+1)/Bc.length*100}%`}})}),S.jsxs("div",{className:"p-8 text-center",children:[S.jsx("div",{className:"text-6xl mb-6",children:o.emoji}),S.jsx("h2",{className:"text-2xl font-serif font-bold mb-4",children:o.title}),S.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:o.description}),S.jsx("div",{className:"flex justify-center gap-2 mb-8",children:Bc.map((l,c)=>S.jsx("div",{className:`w-2 h-2 rounded-full transition-all ${c===e?"bg-gold w-6":"bg-gray-300 dark:bg-gray-600"}`},c))}),S.jsxs("div",{className:"flex gap-3",children:[S.jsx("button",{onClick:r,className:"flex-1 px-4 py-3 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 font-medium transition-colors",children:"Passer"}),S.jsx("button",{onClick:i,className:"flex-1 px-4 py-3 bg-gold text-onyx font-bold rounded-xl hover:bg-gold-dark transition-all",children:e<Bc.length-1?"Suivant":"Commencer"})]})]})]})})},dL=()=>{};var ax={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},fL=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],l=t[n++],c=t[n++],d=((r&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|l&63)}}return e.join("")},x1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],l=r+1<t.length,c=l?t[r+1]:0,d=r+2<t.length,f=d?t[r+2]:0,p=o>>2,v=(o&3)<<4|c>>4;let T=(c&15)<<2|f>>6,b=f&63;d||(b=64,l||(T=64)),i.push(n[p],n[v],n[T],n[b])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(w1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):fL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],c=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const v=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||c==null||f==null||v==null)throw new hL;const T=o<<2|c>>4;if(i.push(T),f!==64){const b=c<<4&240|f>>2;if(i.push(b),v!==64){const C=f<<6&192|v;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class hL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pL=function(t){const e=w1(t);return x1.encodeByteArray(e,!0)},Lp=function(t){return pL(t).replace(/\./g,"")},A1=function(t){try{return x1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL=()=>mL().__FIREBASE_DEFAULTS__,yL=()=>{if(typeof process>"u"||typeof ax>"u")return;const t=ax.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&A1(t[1]);return e&&JSON.parse(e)},Nm=()=>{try{return dL()||gL()||yL()||vL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},C1=t=>{var e,n;return(n=(e=Nm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},R_=t=>{const e=C1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},I1=()=>{var t;return(t=Nm())===null||t===void 0?void 0:t.config},R1=t=>{var e;return(e=Nm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Pm(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Lp(JSON.stringify(n)),Lp(JSON.stringify(l)),""].join(".")}const ld={};function TL(){const t={prod:[],emulator:[]};for(const e of Object.keys(ld))ld[e]?t.emulator.push(e):t.prod.push(e);return t}function EL(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let lx=!1;function Dm(t,e){if(typeof window>"u"||typeof document>"u"||!js(window.location.host)||ld[t]===e||ld[t]||lx)return;ld[t]=e;function n(T){return`__firebase__banner__${T}`}const i="__firebase__banner",o=TL().prod.length>0;function l(){const T=document.getElementById(i);T&&T.remove()}function c(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function d(T,b){T.setAttribute("width","24"),T.setAttribute("id",b),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function f(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{lx=!0,l()},T}function p(T,b){T.setAttribute("id",b),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function v(){const T=EL(i),b=n("text"),C=document.getElementById(b)||document.createElement("span"),N=n("learnmore"),M=document.getElementById(N)||document.createElement("a"),V=n("preprendIcon"),k=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const F=T.element;c(F),p(M,N);const G=f();d(k,V),F.append(k,C,M,G),document.body.appendChild(F)}o?(C.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hi())}function bL(){var t;const e=(t=Nm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function AL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CL(){const t=hi();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function IL(){return!bL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function RL(){try{return typeof indexedDB=="object"}catch{return!1}}function NL(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL="FirebaseError";class qr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=PL,Object.setPrototypeOf(this,qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jd.prototype.create)}}class Jd{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],l=o?DL(o,i):"Error",c=`${this.serviceName}: ${l} (${r}).`;return new qr(r,c,i)}}function DL(t,e){return t.replace(ML,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const ML=/\{\$([^}]+)}/g;function kL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Wa(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],l=e[r];if(ux(o)&&ux(l)){if(!Wa(o,l))return!1}else if(o!==l)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function ux(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Jc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function Wc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function VL(t,e){const n=new LL(t,e);return n.subscribe.bind(n)}class LL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");OL(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Cv),r.error===void 0&&(r.error=Cv),r.complete===void 0&&(r.complete=Cv);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function OL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Cv(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(t){return t&&t._delegate?t._delegate:t}class Us{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new _L;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(BL(e))try{this.getOrInitializeService({instanceIdentifier:La})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=La){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=La){return this.instances.has(e)}getOptions(e=La){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);i===c&&l.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const l=this.instances.get(r);return l&&e(l,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:FL(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=La){return this.component?this.component.multipleInstances?e:La:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FL(t){return t===La?void 0:t}function BL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new UL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ut||(ut={}));const qL={debug:ut.DEBUG,verbose:ut.VERBOSE,info:ut.INFO,warn:ut.WARN,error:ut.ERROR,silent:ut.SILENT},HL=ut.INFO,GL={[ut.DEBUG]:"log",[ut.VERBOSE]:"log",[ut.INFO]:"info",[ut.WARN]:"warn",[ut.ERROR]:"error"},jL=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=GL[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class N_{constructor(e){this.name=e,this._logLevel=HL,this._logHandler=jL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ut))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ut.DEBUG,...e),this._logHandler(this,ut.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ut.VERBOSE,...e),this._logHandler(this,ut.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ut.INFO,...e),this._logHandler(this,ut.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ut.WARN,...e),this._logHandler(this,ut.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ut.ERROR,...e),this._logHandler(this,ut.ERROR,...e)}}const $L=(t,e)=>e.some(n=>t instanceof n);let cx,dx;function KL(){return cx||(cx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YL(){return dx||(dx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const P1=new WeakMap,c0=new WeakMap,D1=new WeakMap,Iv=new WeakMap,P_=new WeakMap;function JL(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(zo(t.result)),r()},l=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&P1.set(n,t)}).catch(()=>{}),P_.set(e,t),e}function WL(t){if(c0.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),r()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});c0.set(t,e)}let d0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return c0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||D1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function QL(t){d0=t(d0)}function XL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Rv(this),e,...n);return D1.set(i,e.sort?e.sort():[e]),zo(i)}:YL().includes(t)?function(...e){return t.apply(Rv(this),e),zo(P1.get(this))}:function(...e){return zo(t.apply(Rv(this),e))}}function ZL(t){return typeof t=="function"?XL(t):(t instanceof IDBTransaction&&WL(t),$L(t,KL())?new Proxy(t,d0):t)}function zo(t){if(t instanceof IDBRequest)return JL(t);if(Iv.has(t))return Iv.get(t);const e=ZL(t);return e!==t&&(Iv.set(t,e),P_.set(e,t)),e}const Rv=t=>P_.get(t);function eO(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const l=indexedDB.open(t,e),c=zo(l);return i&&l.addEventListener("upgradeneeded",d=>{i(zo(l.result),d.oldVersion,d.newVersion,zo(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),c.then(d=>{o&&d.addEventListener("close",()=>o()),r&&d.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const tO=["get","getKey","getAll","getAllKeys","count"],nO=["put","add","delete","clear"],Nv=new Map;function fx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Nv.get(e))return Nv.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=nO.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||tO.includes(n)))return;const o=async function(l,...c){const d=this.transaction(l,r?"readwrite":"readonly");let f=d.store;return i&&(f=f.index(c.shift())),(await Promise.all([f[n](...c),r&&d.done]))[0]};return Nv.set(e,o),o}QL(t=>({...t,get:(e,n,i)=>fx(e,n)||t.get(e,n,i),has:(e,n)=>!!fx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rO(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function rO(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const f0="@firebase/app",hx="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs=new N_("@firebase/app"),sO="@firebase/app-compat",oO="@firebase/analytics-compat",aO="@firebase/analytics",lO="@firebase/app-check-compat",uO="@firebase/app-check",cO="@firebase/auth",dO="@firebase/auth-compat",fO="@firebase/database",hO="@firebase/data-connect",pO="@firebase/database-compat",mO="@firebase/functions",gO="@firebase/functions-compat",yO="@firebase/installations",vO="@firebase/installations-compat",_O="@firebase/messaging",TO="@firebase/messaging-compat",EO="@firebase/performance",SO="@firebase/performance-compat",bO="@firebase/remote-config",wO="@firebase/remote-config-compat",xO="@firebase/storage",AO="@firebase/storage-compat",CO="@firebase/firestore",IO="@firebase/ai",RO="@firebase/firestore-compat",NO="firebase",PO="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="[DEFAULT]",DO={[f0]:"fire-core",[sO]:"fire-core-compat",[aO]:"fire-analytics",[oO]:"fire-analytics-compat",[uO]:"fire-app-check",[lO]:"fire-app-check-compat",[cO]:"fire-auth",[dO]:"fire-auth-compat",[fO]:"fire-rtdb",[hO]:"fire-data-connect",[pO]:"fire-rtdb-compat",[mO]:"fire-fn",[gO]:"fire-fn-compat",[yO]:"fire-iid",[vO]:"fire-iid-compat",[_O]:"fire-fcm",[TO]:"fire-fcm-compat",[EO]:"fire-perf",[SO]:"fire-perf-compat",[bO]:"fire-rc",[wO]:"fire-rc-compat",[xO]:"fire-gcs",[AO]:"fire-gcs-compat",[CO]:"fire-fst",[RO]:"fire-fst-compat",[IO]:"fire-vertex","fire-js":"fire-js",[NO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op=new Map,MO=new Map,p0=new Map;function px(t,e){try{t.container.addComponent(e)}catch(n){Fs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function $o(t){const e=t.name;if(p0.has(e))return Fs.debug(`There were multiple attempts to register component ${e}.`),!1;p0.set(e,t);for(const n of Op.values())px(n,t);for(const n of MO.values())px(n,t);return!0}function Qd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function wi(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qo=new Jd("app","Firebase",kO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Us("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl=PO;function M1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:h0,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw qo.create("bad-app-name",{appName:String(r)});if(n||(n=I1()),!n)throw qo.create("no-options");const o=Op.get(r);if(o){if(Wa(n,o.options)&&Wa(i,o.config))return o;throw qo.create("duplicate-app",{appName:r})}const l=new zL(r);for(const d of p0.values())l.addComponent(d);const c=new VO(n,i,l);return Op.set(r,c),c}function Mm(t=h0){const e=Op.get(t);if(!e&&t===h0&&I1())return M1();if(!e)throw qo.create("no-app",{appName:t});return e}function Sr(t,e,n){var i;let r=(i=DO[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${r}" with version "${e}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fs.warn(c.join(" "));return}$o(new Us(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO="firebase-heartbeat-database",OO=1,Nd="firebase-heartbeat-store";let Pv=null;function k1(){return Pv||(Pv=eO(LO,OO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Nd)}catch(n){console.warn(n)}}}}).catch(t=>{throw qo.create("idb-open",{originalErrorMessage:t.message})})),Pv}async function UO(t){try{const n=(await k1()).transaction(Nd),i=await n.objectStore(Nd).get(V1(t));return await n.done,i}catch(e){if(e instanceof qr)Fs.warn(e.message);else{const n=qo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fs.warn(n.message)}}}async function mx(t,e){try{const i=(await k1()).transaction(Nd,"readwrite");await i.objectStore(Nd).put(e,V1(t)),await i.done}catch(n){if(n instanceof qr)Fs.warn(n.message);else{const i=qo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Fs.warn(i.message)}}}function V1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO=1024,BO=30;class zO{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HO(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=gx();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>BO){const l=GO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Fs.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=gx(),{heartbeatsToSend:i,unsentEntries:r}=qO(this._heartbeatsCache.heartbeats),o=Lp(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Fs.warn(n),""}}}function gx(){return new Date().toISOString().substring(0,10)}function qO(t,e=FO){const n=[];let i=t.slice();for(const r of t){const o=n.find(l=>l.agent===r.agent);if(o){if(o.dates.push(r.date),yx(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),yx(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class HO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return RL()?NL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await UO(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return mx(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return mx(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function yx(t){return Lp(JSON.stringify({version:2,heartbeats:t})).length}function GO(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jO(t){$o(new Us("platform-logger",e=>new iO(e),"PRIVATE")),$o(new Us("heartbeat",e=>new zO(e),"PRIVATE")),Sr(f0,hx,t),Sr(f0,hx,"esm2017"),Sr("fire-js","")}jO("");function D_(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function L1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $O=L1,O1=new Jd("auth","Firebase",L1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up=new N_("@firebase/auth");function KO(t,...e){Up.logLevel<=ut.WARN&&Up.warn(`Auth (${rl}): ${t}`,...e)}function pp(t,...e){Up.logLevel<=ut.ERROR&&Up.error(`Auth (${rl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(t,...e){throw k_(t,...e)}function Fr(t,...e){return k_(t,...e)}function M_(t,e,n){const i=Object.assign(Object.assign({},$O()),{[e]:n});return new Jd("auth","Firebase",i).create(e,{appName:t.name})}function Vs(t){return M_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function YO(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&wr(t,"argument-error"),M_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function k_(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return O1.create(t,...e)}function Ue(t,e,...n){if(!t)throw k_(e,...n)}function Ms(t){const e="INTERNAL ASSERTION FAILED: "+t;throw pp(e),new Error(e)}function Bs(t,e){t||Ms(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function JO(){return vx()==="http:"||vx()==="https:"}function vx(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JO()||xL()||"connection"in navigator)?navigator.onLine:!0}function QO(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Bs(n>e,"Short delay should be less than long delay!"),this.isMobile=SL()||AL()}get(){return WO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(t,e){Bs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ms("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ms("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ms("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],e4=new Xd(3e4,6e4);function na(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ia(t,e,n,i,r={}){return F1(t,r,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const c=Wd(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:d},o);return wL()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&js(t.emulatorConfig.host)&&(f.credentials="include"),U1.fetch()(await B1(t,t.config.apiHost,n,c),f)})}async function F1(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},XO),e);try{const r=new n4(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Fh(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[d,f]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fh(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Fh(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw Fh(t,"user-disabled",l);const p=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw M_(t,p,f);wr(t,p)}}catch(r){if(r instanceof qr)throw r;wr(t,"network-request-failed",{message:String(r)})}}async function Zd(t,e,n,i,r={}){const o=await ia(t,e,n,i,r);return"mfaPendingCredential"in o&&wr(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function B1(t,e,n,i){const r=`${e}${n}?${i}`,o=t,l=o.config.emulator?V_(t.config,r):`${t.config.apiScheme}://${r}`;return ZO.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function t4(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class n4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Fr(this.auth,"network-request-failed")),e4.get())})}}function Fh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Fr(t,e,i);return r.customData._tokenResponse=n,r}function _x(t){return t!==void 0&&t.enterprise!==void 0}class i4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return t4(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function r4(t,e){return ia(t,"GET","/v2/recaptchaConfig",na(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s4(t,e){return ia(t,"POST","/v1/accounts:delete",e)}async function Fp(t,e){return ia(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function o4(t,e=!1){const n=Ft(t),i=await n.getIdToken(e),r=L_(i);Ue(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:ud(Dv(r.auth_time)),issuedAtTime:ud(Dv(r.iat)),expirationTime:ud(Dv(r.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Dv(t){return Number(t)*1e3}function L_(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return pp("JWT malformed, contained fewer than 3 sections"),null;try{const r=A1(n);return r?JSON.parse(r):(pp("Failed to decode base64 JWT payload"),null)}catch(r){return pp("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Tx(t){const e=L_(t);return Ue(e,"internal-error"),Ue(typeof e.exp<"u","internal-error"),Ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pd(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof qr&&a4(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function a4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ud(this.lastLoginAt),this.creationTime=ud(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bp(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Pd(t,Fp(n,{idToken:i}));Ue(r==null?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?z1(o.providerUserInfo):[],c=c4(t.providerData,l),d=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!(c!=null&&c.length),p=d?f:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new g0(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(t,v)}async function u4(t){const e=Ft(t);await Bp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function c4(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function z1(t){return t.map(e=>{var{providerId:n}=e,i=D_(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d4(t,e){const n=await F1(t,{},async()=>{const i=Wd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,l=await B1(t,r,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:c,body:i};return t.emulatorConfig&&js(t.emulatorConfig.host)&&(d.credentials="include"),U1.fetch()(l,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function f4(t,e){return ia(t,"POST","/v2/accounts:revokeToken",na(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ue(e.idToken,"internal-error"),Ue(typeof e.idToken<"u","internal-error"),Ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Tx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ue(e.length!==0,"internal-error");const n=Tx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await d4(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,l=new uu;return i&&(Ue(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),r&&(Ue(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),o&&(Ue(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new uu,this.toJSON())}_performRefresh(){return Ms("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(t,e){Ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Lr{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=D_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new l4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new g0(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Pd(this,this.stsTokenManager.getToken(this.auth,e));return Ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return o4(this,e)}reload(){return u4(this)}_assign(e){this!==e&&(Ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Lr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Bp(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wi(this.auth.app))return Promise.reject(Vs(this.auth));const e=await this.getIdToken();return await Pd(this,s4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,l,c,d,f,p;const v=(i=n.displayName)!==null&&i!==void 0?i:void 0,T=(r=n.email)!==null&&r!==void 0?r:void 0,b=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,C=(l=n.photoURL)!==null&&l!==void 0?l:void 0,N=(c=n.tenantId)!==null&&c!==void 0?c:void 0,M=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,V=(f=n.createdAt)!==null&&f!==void 0?f:void 0,k=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:F,emailVerified:G,isAnonymous:K,providerData:H,stsTokenManager:R}=n;Ue(F&&R,e,"internal-error");const I=uu.fromJSON(this.name,R);Ue(typeof F=="string",e,"internal-error"),Ro(v,e.name),Ro(T,e.name),Ue(typeof G=="boolean",e,"internal-error"),Ue(typeof K=="boolean",e,"internal-error"),Ro(b,e.name),Ro(C,e.name),Ro(N,e.name),Ro(M,e.name),Ro(V,e.name),Ro(k,e.name);const P=new Lr({uid:F,auth:e,email:T,emailVerified:G,displayName:v,isAnonymous:K,photoURL:C,phoneNumber:b,tenantId:N,stsTokenManager:I,createdAt:V,lastLoginAt:k});return H&&Array.isArray(H)&&(P.providerData=H.map(U=>Object.assign({},U))),M&&(P._redirectEventId=M),P}static async _fromIdTokenResponse(e,n,i=!1){const r=new uu;r.updateFromServerResponse(n);const o=new Lr({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Bp(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];Ue(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?z1(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),c=new uu;c.updateFromIdToken(i);const d=new Lr({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:l}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new g0(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex=new Map;function ks(t){Bs(t instanceof Function,"Expected a class definition");let e=Ex.get(t);return e?(Bs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ex.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}q1.type="NONE";const Sx=q1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(t,e,n){return`firebase:${t}:${e}:${n}`}class cu{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=mp(this.userKey,r.apiKey,o),this.fullPersistenceKey=mp("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Fp(this.auth,{idToken:e}).catch(()=>{});return n?Lr._fromGetAccountInfoResponse(this.auth,n,e):null}return Lr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new cu(ks(Sx),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||ks(Sx);const l=mp(i,e.config.apiKey,e.name);let c=null;for(const f of n)try{const p=await f._get(l);if(p){let v;if(typeof p=="string"){const T=await Fp(e,{idToken:p}).catch(()=>{});if(!T)break;v=await Lr._fromGetAccountInfoResponse(e,T,p)}else v=Lr._fromJSON(e,p);f!==o&&(c=v),o=f;break}}catch{}const d=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new cu(o,e,i):(o=d[0],c&&await o._set(l,c.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new cu(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(H1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Y1(e))return"Blackberry";if(J1(e))return"Webos";if(G1(e))return"Safari";if((e.includes("chrome/")||j1(e))&&!e.includes("edge/"))return"Chrome";if(K1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function H1(t=hi()){return/firefox\//i.test(t)}function G1(t=hi()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function j1(t=hi()){return/crios\//i.test(t)}function $1(t=hi()){return/iemobile/i.test(t)}function K1(t=hi()){return/android/i.test(t)}function Y1(t=hi()){return/blackberry/i.test(t)}function J1(t=hi()){return/webos/i.test(t)}function O_(t=hi()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function h4(t=hi()){var e;return O_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function p4(){return CL()&&document.documentMode===10}function W1(t=hi()){return O_(t)||K1(t)||J1(t)||Y1(t)||/windows phone/i.test(t)||$1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(t,e=[]){let n;switch(t){case"Browser":n=bx(hi());break;case"Worker":n=`${bx(hi())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${rl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,c)=>{try{const d=e(o);l(d)}catch(d){c(d)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g4(t,e={}){return ia(t,"GET","/v2/passwordPolicy",na(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4=6;class v4{constructor(e){var n,i,r,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:y4,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,o,l,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(r=d.containsLowercaseLetter)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wx(this),this.idTokenSubscription=new wx(this),this.beforeStateQueue=new m4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=O1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ks(n)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await cu.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Fp(this,{idToken:e}),i=await Lr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(wi(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=r==null?void 0:r._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&(d!=null&&d.user)&&(r=d.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Bp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=QO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(wi(this.app))return Promise.reject(Vs(this));const n=e?Ft(e):null;return n&&Ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return wi(this.app)?Promise.reject(Vs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return wi(this.app)?Promise.reject(Vs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ks(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await g4(this),n=new v4(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Jd("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await f4(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ks(e)||this._popupRedirectResolver;Ue(n,this,"argument-error"),this.redirectPersistenceManager=await cu.create(this,[ks(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ue(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,r);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Q1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;if(wi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&KO(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ra(t){return Ft(t)}class wx{constructor(e){this.auth=e,this.observer=null,this.addObserver=VL(n=>this.observer=n)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let km={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function T4(t){km=t}function X1(t){return km.loadJS(t)}function E4(){return km.recaptchaEnterpriseScript}function S4(){return km.gapiScript}function b4(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class w4{constructor(){this.enterprise=new x4}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class x4{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const A4="recaptcha-enterprise",Z1="NO_RECAPTCHA";class C4{constructor(e){this.type=A4,this.auth=ra(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{r4(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const f=new i4(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,l(f.siteKey)}}).catch(d=>{c(d)})})}function r(o,l,c){const d=window.grecaptcha;_x(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(f=>{l(f)}).catch(()=>{l(Z1)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new w4().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{i(this.auth).then(c=>{if(!n&&_x(window.grecaptcha))r(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=E4();d.length!==0&&(d+=c),X1(d).then(()=>{r(c,o,l)}).catch(f=>{l(f)})}}).catch(c=>{l(c)})})}}async function xx(t,e,n,i=!1,r=!1){const o=new C4(t);let l;if(r)l=Z1;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,f=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return i?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function y0(t,e,n,i,r){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await xx(t,e,n,n==="getOobCode");return i(t,l)}else return i(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await xx(t,e,n,n==="getOobCode");return i(t,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(t,e){const n=Qd(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(Wa(o,e??{}))return r;wr(r,"already-initialized")}return n.initialize({options:e})}function R4(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ks);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function N4(t,e,n){const i=ra(t);Ue(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=eN(e),{host:l,port:c}=P4(e),d=c===null?"":`:${c}`,f={url:`${o}//${l}${d}/`},p=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Ue(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ue(Wa(f,i.config.emulator)&&Wa(p,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=p,i.settings.appVerificationDisabledForTesting=!0,js(l)?(Pm(`${o}//${l}${d}`),Dm("Auth",!0)):D4()}function eN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function P4(t){const e=eN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:Ax(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:Ax(l)}}}function Ax(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function D4(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ms("not implemented")}_getIdTokenResponse(e){return Ms("not implemented")}_linkToIdToken(e,n){return Ms("not implemented")}_getReauthenticationResolver(e){return Ms("not implemented")}}async function M4(t,e){return ia(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k4(t,e){return Zd(t,"POST","/v1/accounts:signInWithPassword",na(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V4(t,e){return Zd(t,"POST","/v1/accounts:signInWithEmailLink",na(t,e))}async function L4(t,e){return Zd(t,"POST","/v1/accounts:signInWithEmailLink",na(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd extends U_{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Dd(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Dd(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return y0(e,n,"signInWithPassword",k4);case"emailLink":return V4(e,{email:this._email,oobCode:this._password});default:wr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return y0(e,i,"signUpPassword",M4);case"emailLink":return L4(e,{idToken:n,email:this._email,oobCode:this._password});default:wr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function du(t,e){return Zd(t,"POST","/v1/accounts:signInWithIdp",na(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4="http://localhost";class Qa extends U_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Qa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):wr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,o=D_(n,["providerId","signInMethod"]);if(!i||!r)return null;const l=new Qa(i,r);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return du(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,du(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,du(e,n)}buildRequest(){const e={requestUri:O4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Wd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U4(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function F4(t){const e=Jc(Wc(t)).link,n=e?Jc(Wc(e)).deep_link_id:null,i=Jc(Wc(t)).deep_link_id;return(i?Jc(Wc(i)).link:null)||i||n||e||t}class F_{constructor(e){var n,i,r,o,l,c;const d=Jc(Wc(e)),f=(n=d.apiKey)!==null&&n!==void 0?n:null,p=(i=d.oobCode)!==null&&i!==void 0?i:null,v=U4((r=d.mode)!==null&&r!==void 0?r:null);Ue(f&&p&&v,"argument-error"),this.apiKey=f,this.operation=v,this.code=p,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=d.lang)!==null&&l!==void 0?l:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=F4(e);try{return new F_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(){this.providerId=Du.PROVIDER_ID}static credential(e,n){return Dd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=F_.parseLink(n);return Ue(i,"argument-error"),Dd._fromEmailAndCode(e,i.code,i.tenantId)}}Du.PROVIDER_ID="password";Du.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Du.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef extends B_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do extends ef{constructor(){super("facebook.com")}static credential(e){return Qa._fromParams({providerId:Do.PROVIDER_ID,signInMethod:Do.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Do.credentialFromTaggedObject(e)}static credentialFromError(e){return Do.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Do.credential(e.oauthAccessToken)}catch{return null}}}Do.FACEBOOK_SIGN_IN_METHOD="facebook.com";Do.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds extends ef{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Qa._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ds.credentialFromTaggedObject(e)}static credentialFromError(e){return Ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Ds.credential(n,i)}catch{return null}}}Ds.GOOGLE_SIGN_IN_METHOD="google.com";Ds.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo extends ef{constructor(){super("github.com")}static credential(e){return Qa._fromParams({providerId:Mo.PROVIDER_ID,signInMethod:Mo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mo.credentialFromTaggedObject(e)}static credentialFromError(e){return Mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mo.credential(e.oauthAccessToken)}catch{return null}}}Mo.GITHUB_SIGN_IN_METHOD="github.com";Mo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko extends ef{constructor(){super("twitter.com")}static credential(e,n){return Qa._fromParams({providerId:ko.PROVIDER_ID,signInMethod:ko.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ko.credentialFromTaggedObject(e)}static credentialFromError(e){return ko.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return ko.credential(n,i)}catch{return null}}}ko.TWITTER_SIGN_IN_METHOD="twitter.com";ko.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B4(t,e){return Zd(t,"POST","/v1/accounts:signUp",na(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await Lr._fromIdTokenResponse(e,i,r),l=Cx(i);return new Xa({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=Cx(i);return new Xa({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function Cx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp extends qr{constructor(e,n,i,r){var o;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,zp.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new zp(e,n,i,r)}}function tN(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?zp._fromErrorAndOperation(t,o,e,i):o})}async function z4(t,e,n=!1){const i=await Pd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Xa._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q4(t,e,n=!1){const{auth:i}=t;if(wi(i.app))return Promise.reject(Vs(i));const r="reauthenticate";try{const o=await Pd(t,tN(i,r,e,t),n);Ue(o.idToken,i,"internal-error");const l=L_(o.idToken);Ue(l,i,"internal-error");const{sub:c}=l;return Ue(t.uid===c,i,"user-mismatch"),Xa._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&wr(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nN(t,e,n=!1){if(wi(t.app))return Promise.reject(Vs(t));const i="signIn",r=await tN(t,i,e),o=await Xa._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}async function H4(t,e){return nN(ra(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iN(t){const e=ra(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function G4(t,e,n){if(wi(t.app))return Promise.reject(Vs(t));const i=ra(t),l=await y0(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",B4).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&iN(t),d}),c=await Xa._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(c.user),c}function j4(t,e,n){return wi(t.app)?Promise.reject(Vs(t)):H4(Ft(t),Du.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&iN(t),i})}function $4(t,e,n,i){return Ft(t).onIdTokenChanged(e,n,i)}function K4(t,e,n){return Ft(t).beforeAuthStateChanged(e,n)}function Y4(t,e,n,i){return Ft(t).onAuthStateChanged(e,n,i)}function Mv(t){return Ft(t).signOut()}const qp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qp,"1"),this.storage.removeItem(qp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4=1e3,W4=10;class sN extends rN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=W1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,c,d)=>{this.notifyListeners(l,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);p4()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,W4):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},J4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}sN.type="LOCAL";const Q4=sN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN extends rN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}oN.type="SESSION";const aN=oN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Vm(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,l=this.handlersMap[r];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const c=Array.from(l).map(async f=>f(n.origin,o)),d=await X4(c);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Vm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,l;return new Promise((c,d)=>{const f=z_("",20);r.port1.start();const p=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(v){const T=v;if(T.data.eventId===f)switch(T.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(T.data.response);break;default:clearTimeout(p),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(){return window}function eU(t){ts().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(){return typeof ts().WorkerGlobalScope<"u"&&typeof ts().importScripts=="function"}async function tU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nU(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function iU(){return lN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN="firebaseLocalStorageDb",rU=1,Hp="firebaseLocalStorage",cN="fbase_key";class tf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Lm(t,e){return t.transaction([Hp],e?"readwrite":"readonly").objectStore(Hp)}function sU(){const t=indexedDB.deleteDatabase(uN);return new tf(t).toPromise()}function v0(){const t=indexedDB.open(uN,rU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Hp,{keyPath:cN})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Hp)?e(i):(i.close(),await sU(),e(await v0()))})})}async function Ix(t,e,n){const i=Lm(t,!0).put({[cN]:e,value:n});return new tf(i).toPromise()}async function oU(t,e){const n=Lm(t,!1).get(e),i=await new tf(n).toPromise();return i===void 0?null:i.value}function Rx(t,e){const n=Lm(t,!0).delete(e);return new tf(n).toPromise()}const aU=800,lU=3;class dN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await v0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>lU)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vm._getInstance(iU()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await tU(),!this.activeServiceWorker)return;this.sender=new Z4(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||nU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await v0();return await Ix(e,qp,"1"),await Rx(e,qp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Ix(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>oU(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Rx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Lm(r,!1).getAll();return new tf(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),aU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dN.type="LOCAL";const uU=dN;new Xd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(t,e){return e?ks(e):(Ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_ extends U_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return du(e,this._buildIdpRequest())}_linkToIdToken(e,n){return du(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return du(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function cU(t){return nN(t.auth,new q_(t),t.bypassAuthState)}function dU(t){const{auth:e,user:n}=t;return Ue(n,e,"internal-error"),q4(n,new q_(t),t.bypassAuthState)}async function fU(t){const{auth:e,user:n}=t;return Ue(n,e,"internal-error"),z4(n,new q_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cU;case"linkViaPopup":case"linkViaRedirect":return fU;case"reauthViaPopup":case"reauthViaRedirect":return dU;default:wr(this.auth,"internal-error")}}resolve(e){Bs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Bs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hU=new Xd(2e3,1e4);async function pU(t,e,n){if(wi(t.app))return Promise.reject(Fr(t,"operation-not-supported-in-this-environment"));const i=ra(t);YO(t,e,B_);const r=fN(i,n);return new za(i,"signInViaPopup",e,r).executeNotNull()}class za extends hN{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,za.currentPopupAction&&za.currentPopupAction.cancel(),za.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ue(e,this.auth,"internal-error"),e}async onExecution(){Bs(this.filter.length===1,"Popup operations only handle one event");const e=z_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,za.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hU.get())};e()}}za.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mU="pendingRedirect",gp=new Map;class gU extends hN{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=gp.get(this.auth._key());if(!e){try{const i=await yU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}gp.set(this.auth._key(),e)}return this.bypassAuthState||gp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yU(t,e){const n=TU(e),i=_U(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function vU(t,e){gp.set(t._key(),e)}function _U(t){return ks(t._redirectPersistence)}function TU(t){return mp(mU,t.config.apiKey,t.name)}async function EU(t,e,n=!1){if(wi(t.app))return Promise.reject(Vs(t));const i=ra(t),r=fN(i,e),l=await new gU(i,r,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SU=600*1e3;class bU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!pN(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Fr(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=SU&&this.cachedEventUids.clear(),this.cachedEventUids.has(Nx(e))}saveEventToCache(e){this.cachedEventUids.add(Nx(e)),this.lastProcessedEventTime=Date.now()}}function Nx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function pN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xU(t,e={}){return ia(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CU=/^https?/;async function IU(t){if(t.config.emulator)return;const{authorizedDomains:e}=await xU(t);for(const n of e)try{if(RU(n))return}catch{}wr(t,"unauthorized-domain")}function RU(t){const e=m0(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!CU.test(n))return!1;if(AU.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NU=new Xd(3e4,6e4);function Px(){const t=ts().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function PU(t){return new Promise((e,n)=>{var i,r,o;function l(){Px(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Px(),n(Fr(t,"network-request-failed"))},timeout:NU.get()})}if(!((r=(i=ts().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=ts().gapi)===null||o===void 0)&&o.load)l();else{const c=b4("iframefcb");return ts()[c]=()=>{gapi.load?l():n(Fr(t,"network-request-failed"))},X1(`${S4()}?onload=${c}`).catch(d=>n(d))}}).catch(e=>{throw yp=null,e})}let yp=null;function DU(t){return yp=yp||PU(t),yp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MU=new Xd(5e3,15e3),kU="__/auth/iframe",VU="emulator/auth/iframe",LU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},OU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UU(t){const e=t.config;Ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?V_(e,VU):`https://${t.config.authDomain}/${kU}`,i={apiKey:e.apiKey,appName:t.name,v:rl},r=OU.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${Wd(i).slice(1)}`}async function FU(t){const e=await DU(t),n=ts().gapi;return Ue(n,t,"internal-error"),e.open({where:document.body,url:UU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LU,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const l=Fr(t,"network-request-failed"),c=ts().setTimeout(()=>{o(l)},MU.get());function d(){ts().clearTimeout(c),r(i)}i.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zU=500,qU=600,HU="_blank",GU="http://localhost";class Dx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jU(t,e,n,i=zU,r=qU){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const d=Object.assign(Object.assign({},BU),{width:i.toString(),height:r.toString(),top:o,left:l}),f=hi().toLowerCase();n&&(c=j1(f)?HU:n),H1(f)&&(e=e||GU,d.scrollbars="yes");const p=Object.entries(d).reduce((T,[b,C])=>`${T}${b}=${C},`,"");if(h4(f)&&c!=="_self")return $U(e||"",c),new Dx(null);const v=window.open(e||"",c,p);Ue(v,t,"popup-blocked");try{v.focus()}catch{}return new Dx(v)}function $U(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KU="__/auth/handler",YU="emulator/auth/handler",JU=encodeURIComponent("fac");async function Mx(t,e,n,i,r,o){Ue(t.config.authDomain,t,"auth-domain-config-required"),Ue(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:rl,eventId:r};if(e instanceof B_){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",kL(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,v]of Object.entries({}))l[p]=v}if(e instanceof ef){const p=e.getScopes().filter(v=>v!=="");p.length>0&&(l.scopes=p.join(","))}t.tenantId&&(l.tid=t.tenantId);const c=l;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const d=await t._getAppCheckToken(),f=d?`#${JU}=${encodeURIComponent(d)}`:"";return`${WU(t)}?${Wd(c).slice(1)}${f}`}function WU({config:t}){return t.emulator?V_(t,YU):`https://${t.authDomain}/${KU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv="webStorageSupport";class QU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aN,this._completeRedirectFn=EU,this._overrideRedirectResult=vU}async _openPopup(e,n,i,r){var o;Bs((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await Mx(e,n,i,m0(),r);return jU(e,l,z_())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await Mx(e,n,i,m0(),r);return eU(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(Bs(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await FU(e),i=new bU(e);return n.register("authEvent",r=>(Ue(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(kv,{type:kv},r=>{var o;const l=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[kv];l!==void 0&&n(!!l),wr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=IU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return W1()||G1()||O_()}}const XU=QU;var kx="@firebase/auth",Vx="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function t3(t){$o(new Us("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=i.options;Ue(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Q1(t)},f=new _4(i,r,o,d);return R4(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),$o(new Us("auth-internal",e=>{const n=ra(e.getProvider("auth").getImmediate());return(i=>new ZU(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Sr(kx,Vx,e3(t)),Sr(kx,Vx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3=300,i3=R1("authIdTokenMaxAge")||n3;let Lx=null;const r3=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>i3)return;const r=n==null?void 0:n.token;Lx!==r&&(Lx=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function s3(t=Mm()){const e=Qd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=I4(t,{popupRedirectResolver:XU,persistence:[uU,Q4,aN]}),i=R1("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=r3(o.toString());K4(n,l,()=>l(n.currentUser)),$4(n,c=>l(c))}}const r=C1("auth");return r&&N4(n,`http://${r}`),n}function o3(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}T4({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=Fr("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",o3().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});t3("Browser");var a3="firebase",l3="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sr(a3,l3,"app");var Ox=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ho,mN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,I){function P(){}P.prototype=I.prototype,R.D=I.prototype,R.prototype=new P,R.prototype.constructor=R,R.C=function(U,L,z){for(var q=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)q[xe-2]=arguments[xe];return I.prototype[L].apply(U,q)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(R,I,P){P||(P=0);var U=Array(16);if(typeof I=="string")for(var L=0;16>L;++L)U[L]=I.charCodeAt(P++)|I.charCodeAt(P++)<<8|I.charCodeAt(P++)<<16|I.charCodeAt(P++)<<24;else for(L=0;16>L;++L)U[L]=I[P++]|I[P++]<<8|I[P++]<<16|I[P++]<<24;I=R.g[0],P=R.g[1],L=R.g[2];var z=R.g[3],q=I+(z^P&(L^z))+U[0]+3614090360&4294967295;I=P+(q<<7&4294967295|q>>>25),q=z+(L^I&(P^L))+U[1]+3905402710&4294967295,z=I+(q<<12&4294967295|q>>>20),q=L+(P^z&(I^P))+U[2]+606105819&4294967295,L=z+(q<<17&4294967295|q>>>15),q=P+(I^L&(z^I))+U[3]+3250441966&4294967295,P=L+(q<<22&4294967295|q>>>10),q=I+(z^P&(L^z))+U[4]+4118548399&4294967295,I=P+(q<<7&4294967295|q>>>25),q=z+(L^I&(P^L))+U[5]+1200080426&4294967295,z=I+(q<<12&4294967295|q>>>20),q=L+(P^z&(I^P))+U[6]+2821735955&4294967295,L=z+(q<<17&4294967295|q>>>15),q=P+(I^L&(z^I))+U[7]+4249261313&4294967295,P=L+(q<<22&4294967295|q>>>10),q=I+(z^P&(L^z))+U[8]+1770035416&4294967295,I=P+(q<<7&4294967295|q>>>25),q=z+(L^I&(P^L))+U[9]+2336552879&4294967295,z=I+(q<<12&4294967295|q>>>20),q=L+(P^z&(I^P))+U[10]+4294925233&4294967295,L=z+(q<<17&4294967295|q>>>15),q=P+(I^L&(z^I))+U[11]+2304563134&4294967295,P=L+(q<<22&4294967295|q>>>10),q=I+(z^P&(L^z))+U[12]+1804603682&4294967295,I=P+(q<<7&4294967295|q>>>25),q=z+(L^I&(P^L))+U[13]+4254626195&4294967295,z=I+(q<<12&4294967295|q>>>20),q=L+(P^z&(I^P))+U[14]+2792965006&4294967295,L=z+(q<<17&4294967295|q>>>15),q=P+(I^L&(z^I))+U[15]+1236535329&4294967295,P=L+(q<<22&4294967295|q>>>10),q=I+(L^z&(P^L))+U[1]+4129170786&4294967295,I=P+(q<<5&4294967295|q>>>27),q=z+(P^L&(I^P))+U[6]+3225465664&4294967295,z=I+(q<<9&4294967295|q>>>23),q=L+(I^P&(z^I))+U[11]+643717713&4294967295,L=z+(q<<14&4294967295|q>>>18),q=P+(z^I&(L^z))+U[0]+3921069994&4294967295,P=L+(q<<20&4294967295|q>>>12),q=I+(L^z&(P^L))+U[5]+3593408605&4294967295,I=P+(q<<5&4294967295|q>>>27),q=z+(P^L&(I^P))+U[10]+38016083&4294967295,z=I+(q<<9&4294967295|q>>>23),q=L+(I^P&(z^I))+U[15]+3634488961&4294967295,L=z+(q<<14&4294967295|q>>>18),q=P+(z^I&(L^z))+U[4]+3889429448&4294967295,P=L+(q<<20&4294967295|q>>>12),q=I+(L^z&(P^L))+U[9]+568446438&4294967295,I=P+(q<<5&4294967295|q>>>27),q=z+(P^L&(I^P))+U[14]+3275163606&4294967295,z=I+(q<<9&4294967295|q>>>23),q=L+(I^P&(z^I))+U[3]+4107603335&4294967295,L=z+(q<<14&4294967295|q>>>18),q=P+(z^I&(L^z))+U[8]+1163531501&4294967295,P=L+(q<<20&4294967295|q>>>12),q=I+(L^z&(P^L))+U[13]+2850285829&4294967295,I=P+(q<<5&4294967295|q>>>27),q=z+(P^L&(I^P))+U[2]+4243563512&4294967295,z=I+(q<<9&4294967295|q>>>23),q=L+(I^P&(z^I))+U[7]+1735328473&4294967295,L=z+(q<<14&4294967295|q>>>18),q=P+(z^I&(L^z))+U[12]+2368359562&4294967295,P=L+(q<<20&4294967295|q>>>12),q=I+(P^L^z)+U[5]+4294588738&4294967295,I=P+(q<<4&4294967295|q>>>28),q=z+(I^P^L)+U[8]+2272392833&4294967295,z=I+(q<<11&4294967295|q>>>21),q=L+(z^I^P)+U[11]+1839030562&4294967295,L=z+(q<<16&4294967295|q>>>16),q=P+(L^z^I)+U[14]+4259657740&4294967295,P=L+(q<<23&4294967295|q>>>9),q=I+(P^L^z)+U[1]+2763975236&4294967295,I=P+(q<<4&4294967295|q>>>28),q=z+(I^P^L)+U[4]+1272893353&4294967295,z=I+(q<<11&4294967295|q>>>21),q=L+(z^I^P)+U[7]+4139469664&4294967295,L=z+(q<<16&4294967295|q>>>16),q=P+(L^z^I)+U[10]+3200236656&4294967295,P=L+(q<<23&4294967295|q>>>9),q=I+(P^L^z)+U[13]+681279174&4294967295,I=P+(q<<4&4294967295|q>>>28),q=z+(I^P^L)+U[0]+3936430074&4294967295,z=I+(q<<11&4294967295|q>>>21),q=L+(z^I^P)+U[3]+3572445317&4294967295,L=z+(q<<16&4294967295|q>>>16),q=P+(L^z^I)+U[6]+76029189&4294967295,P=L+(q<<23&4294967295|q>>>9),q=I+(P^L^z)+U[9]+3654602809&4294967295,I=P+(q<<4&4294967295|q>>>28),q=z+(I^P^L)+U[12]+3873151461&4294967295,z=I+(q<<11&4294967295|q>>>21),q=L+(z^I^P)+U[15]+530742520&4294967295,L=z+(q<<16&4294967295|q>>>16),q=P+(L^z^I)+U[2]+3299628645&4294967295,P=L+(q<<23&4294967295|q>>>9),q=I+(L^(P|~z))+U[0]+4096336452&4294967295,I=P+(q<<6&4294967295|q>>>26),q=z+(P^(I|~L))+U[7]+1126891415&4294967295,z=I+(q<<10&4294967295|q>>>22),q=L+(I^(z|~P))+U[14]+2878612391&4294967295,L=z+(q<<15&4294967295|q>>>17),q=P+(z^(L|~I))+U[5]+4237533241&4294967295,P=L+(q<<21&4294967295|q>>>11),q=I+(L^(P|~z))+U[12]+1700485571&4294967295,I=P+(q<<6&4294967295|q>>>26),q=z+(P^(I|~L))+U[3]+2399980690&4294967295,z=I+(q<<10&4294967295|q>>>22),q=L+(I^(z|~P))+U[10]+4293915773&4294967295,L=z+(q<<15&4294967295|q>>>17),q=P+(z^(L|~I))+U[1]+2240044497&4294967295,P=L+(q<<21&4294967295|q>>>11),q=I+(L^(P|~z))+U[8]+1873313359&4294967295,I=P+(q<<6&4294967295|q>>>26),q=z+(P^(I|~L))+U[15]+4264355552&4294967295,z=I+(q<<10&4294967295|q>>>22),q=L+(I^(z|~P))+U[6]+2734768916&4294967295,L=z+(q<<15&4294967295|q>>>17),q=P+(z^(L|~I))+U[13]+1309151649&4294967295,P=L+(q<<21&4294967295|q>>>11),q=I+(L^(P|~z))+U[4]+4149444226&4294967295,I=P+(q<<6&4294967295|q>>>26),q=z+(P^(I|~L))+U[11]+3174756917&4294967295,z=I+(q<<10&4294967295|q>>>22),q=L+(I^(z|~P))+U[2]+718787259&4294967295,L=z+(q<<15&4294967295|q>>>17),q=P+(z^(L|~I))+U[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(L+(q<<21&4294967295|q>>>11))&4294967295,R.g[2]=R.g[2]+L&4294967295,R.g[3]=R.g[3]+z&4294967295}i.prototype.u=function(R,I){I===void 0&&(I=R.length);for(var P=I-this.blockSize,U=this.B,L=this.h,z=0;z<I;){if(L==0)for(;z<=P;)r(this,R,z),z+=this.blockSize;if(typeof R=="string"){for(;z<I;)if(U[L++]=R.charCodeAt(z++),L==this.blockSize){r(this,U),L=0;break}}else for(;z<I;)if(U[L++]=R[z++],L==this.blockSize){r(this,U),L=0;break}}this.h=L,this.o+=I},i.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;var P=8*this.o;for(I=R.length-8;I<R.length;++I)R[I]=P&255,P/=256;for(this.u(R),R=Array(16),I=P=0;4>I;++I)for(var U=0;32>U;U+=8)R[P++]=this.g[I]>>>U&255;return R};function o(R,I){var P=c;return Object.prototype.hasOwnProperty.call(P,R)?P[R]:P[R]=I(R)}function l(R,I){this.h=I;for(var P=[],U=!0,L=R.length-1;0<=L;L--){var z=R[L]|0;U&&z==I||(P[L]=z,U=!1)}this.g=P}var c={};function d(R){return-128<=R&&128>R?o(R,function(I){return new l([I|0],0>I?-1:0)}):new l([R|0],0>R?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return v;if(0>R)return M(f(-R));for(var I=[],P=1,U=0;R>=P;U++)I[U]=R/P|0,P*=4294967296;return new l(I,0)}function p(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return M(p(R.substring(1),I));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=f(Math.pow(I,8)),U=v,L=0;L<R.length;L+=8){var z=Math.min(8,R.length-L),q=parseInt(R.substring(L,L+z),I);8>z?(z=f(Math.pow(I,z)),U=U.j(z).add(f(q))):(U=U.j(P),U=U.add(f(q)))}return U}var v=d(0),T=d(1),b=d(16777216);t=l.prototype,t.m=function(){if(N(this))return-M(this).m();for(var R=0,I=1,P=0;P<this.g.length;P++){var U=this.i(P);R+=(0<=U?U:4294967296+U)*I,I*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(C(this))return"0";if(N(this))return"-"+M(this).toString(R);for(var I=f(Math.pow(R,6)),P=this,U="";;){var L=G(P,I).g;P=V(P,L.j(I));var z=((0<P.g.length?P.g[0]:P.h)>>>0).toString(R);if(P=L,C(P))return z+U;for(;6>z.length;)z="0"+z;U=z+U}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function C(R){if(R.h!=0)return!1;for(var I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function N(R){return R.h==-1}t.l=function(R){return R=V(this,R),N(R)?-1:C(R)?0:1};function M(R){for(var I=R.g.length,P=[],U=0;U<I;U++)P[U]=~R.g[U];return new l(P,~R.h).add(T)}t.abs=function(){return N(this)?M(this):this},t.add=function(R){for(var I=Math.max(this.g.length,R.g.length),P=[],U=0,L=0;L<=I;L++){var z=U+(this.i(L)&65535)+(R.i(L)&65535),q=(z>>>16)+(this.i(L)>>>16)+(R.i(L)>>>16);U=q>>>16,z&=65535,q&=65535,P[L]=q<<16|z}return new l(P,P[P.length-1]&-2147483648?-1:0)};function V(R,I){return R.add(M(I))}t.j=function(R){if(C(this)||C(R))return v;if(N(this))return N(R)?M(this).j(M(R)):M(M(this).j(R));if(N(R))return M(this.j(M(R)));if(0>this.l(b)&&0>R.l(b))return f(this.m()*R.m());for(var I=this.g.length+R.g.length,P=[],U=0;U<2*I;U++)P[U]=0;for(U=0;U<this.g.length;U++)for(var L=0;L<R.g.length;L++){var z=this.i(U)>>>16,q=this.i(U)&65535,xe=R.i(L)>>>16,Ie=R.i(L)&65535;P[2*U+2*L]+=q*Ie,k(P,2*U+2*L),P[2*U+2*L+1]+=z*Ie,k(P,2*U+2*L+1),P[2*U+2*L+1]+=q*xe,k(P,2*U+2*L+1),P[2*U+2*L+2]+=z*xe,k(P,2*U+2*L+2)}for(U=0;U<I;U++)P[U]=P[2*U+1]<<16|P[2*U];for(U=I;U<2*I;U++)P[U]=0;return new l(P,0)};function k(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function F(R,I){this.g=R,this.h=I}function G(R,I){if(C(I))throw Error("division by zero");if(C(R))return new F(v,v);if(N(R))return I=G(M(R),I),new F(M(I.g),M(I.h));if(N(I))return I=G(R,M(I)),new F(M(I.g),I.h);if(30<R.g.length){if(N(R)||N(I))throw Error("slowDivide_ only works with positive integers.");for(var P=T,U=I;0>=U.l(R);)P=K(P),U=K(U);var L=H(P,1),z=H(U,1);for(U=H(U,2),P=H(P,2);!C(U);){var q=z.add(U);0>=q.l(R)&&(L=L.add(P),z=q),U=H(U,1),P=H(P,1)}return I=V(R,L.j(I)),new F(L,I)}for(L=v;0<=R.l(I);){for(P=Math.max(1,Math.floor(R.m()/I.m())),U=Math.ceil(Math.log(P)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),z=f(P),q=z.j(I);N(q)||0<q.l(R);)P-=U,z=f(P),q=z.j(I);C(z)&&(z=T),L=L.add(z),R=V(R,q)}return new F(L,R)}t.A=function(R){return G(this,R).h},t.and=function(R){for(var I=Math.max(this.g.length,R.g.length),P=[],U=0;U<I;U++)P[U]=this.i(U)&R.i(U);return new l(P,this.h&R.h)},t.or=function(R){for(var I=Math.max(this.g.length,R.g.length),P=[],U=0;U<I;U++)P[U]=this.i(U)|R.i(U);return new l(P,this.h|R.h)},t.xor=function(R){for(var I=Math.max(this.g.length,R.g.length),P=[],U=0;U<I;U++)P[U]=this.i(U)^R.i(U);return new l(P,this.h^R.h)};function K(R){for(var I=R.g.length+1,P=[],U=0;U<I;U++)P[U]=R.i(U)<<1|R.i(U-1)>>>31;return new l(P,R.h)}function H(R,I){var P=I>>5;I%=32;for(var U=R.g.length-P,L=[],z=0;z<U;z++)L[z]=0<I?R.i(z+P)>>>I|R.i(z+P+1)<<32-I:R.i(z+P);return new l(L,R.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,mN=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=p,Ho=l}).apply(typeof Ox<"u"?Ox:typeof self<"u"?self:typeof window<"u"?window:{});var Bh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gN,Qc,yN,vp,_0,vN,_N,TN;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,w,A){return g==Array.prototype||g==Object.prototype||(g[w]=A.value),g};function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bh=="object"&&Bh];for(var w=0;w<g.length;++w){var A=g[w];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var i=n(this);function r(g,w){if(w)e:{var A=i;g=g.split(".");for(var O=0;O<g.length-1;O++){var W=g[O];if(!(W in A))break e;A=A[W]}g=g[g.length-1],O=A[g],w=w(O),w!=O&&w!=null&&e(A,g,{configurable:!0,writable:!0,value:w})}}function o(g,w){g instanceof String&&(g+="");var A=0,O=!1,W={next:function(){if(!O&&A<g.length){var ie=A++;return{value:w(ie,g[ie]),done:!1}}return O=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}r("Array.prototype.values",function(g){return g||function(){return o(this,function(w,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(g){var w=typeof g;return w=w!="object"?w:g?Array.isArray(g)?"array":w:"null",w=="array"||w=="object"&&typeof g.length=="number"}function f(g){var w=typeof g;return w=="object"&&g!=null||w=="function"}function p(g,w,A){return g.call.apply(g.bind,arguments)}function v(g,w,A){if(!g)throw Error();if(2<arguments.length){var O=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,O),g.apply(w,W)}}return function(){return g.apply(w,arguments)}}function T(g,w,A){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:v,T.apply(null,arguments)}function b(g,w){var A=Array.prototype.slice.call(arguments,1);return function(){var O=A.slice();return O.push.apply(O,arguments),g.apply(this,O)}}function C(g,w){function A(){}A.prototype=w.prototype,g.aa=w.prototype,g.prototype=new A,g.prototype.constructor=g,g.Qb=function(O,W,ie){for(var ge=Array(arguments.length-2),At=2;At<arguments.length;At++)ge[At-2]=arguments[At];return w.prototype[W].apply(O,ge)}}function N(g){const w=g.length;if(0<w){const A=Array(w);for(let O=0;O<w;O++)A[O]=g[O];return A}return[]}function M(g,w){for(let A=1;A<arguments.length;A++){const O=arguments[A];if(d(O)){const W=g.length||0,ie=O.length||0;g.length=W+ie;for(let ge=0;ge<ie;ge++)g[W+ge]=O[ge]}else g.push(O)}}class V{constructor(w,A){this.i=w,this.j=A,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function k(g){return/^[\s\xa0]*$/.test(g)}function F(){var g=c.navigator;return g&&(g=g.userAgent)?g:""}function G(g){return G[" "](g),g}G[" "]=function(){};var K=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function H(g,w,A){for(const O in g)w.call(A,g[O],O,g)}function R(g,w){for(const A in g)w.call(void 0,g[A],A,g)}function I(g){const w={};for(const A in g)w[A]=g[A];return w}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(g,w){let A,O;for(let W=1;W<arguments.length;W++){O=arguments[W];for(A in O)g[A]=O[A];for(let ie=0;ie<P.length;ie++)A=P[ie],Object.prototype.hasOwnProperty.call(O,A)&&(g[A]=O[A])}}function L(g){var w=1;g=g.split(":");const A=[];for(;0<w&&g.length;)A.push(g.shift()),w--;return g.length&&A.push(g.join(":")),A}function z(g){c.setTimeout(()=>{throw g},0)}function q(){var g=Te;let w=null;return g.g&&(w=g.g,g.g=g.g.next,g.g||(g.h=null),w.next=null),w}class xe{constructor(){this.h=this.g=null}add(w,A){const O=Ie.get();O.set(w,A),this.h?this.h.next=O:this.g=O,this.h=O}}var Ie=new V(()=>new ee,g=>g.reset());class ee{constructor(){this.next=this.g=this.h=null}set(w,A){this.h=w,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let re,me=!1,Te=new xe,Ae=()=>{const g=c.Promise.resolve(void 0);re=()=>{g.then($)}};var $=()=>{for(var g;g=q();){try{g.h.call(g.g)}catch(A){z(A)}var w=Ie;w.j(g),100>w.h&&(w.h++,g.next=w.g,w.g=g)}me=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(g,w){this.type=g,this.g=this.target=w,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var se=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var g=!1,w=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const A=()=>{};c.addEventListener("test",A,w),c.removeEventListener("test",A,w)}catch{}return g})();function fe(g,w){if(he.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var A=this.type=g.type,O=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=w,w=g.relatedTarget){if(K){e:{try{G(w.nodeName);var W=!0;break e}catch{}W=!1}W||(w=null)}}else A=="mouseover"?w=g.fromElement:A=="mouseout"&&(w=g.toElement);this.relatedTarget=w,O?(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:Ee[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&fe.aa.h.call(this)}}C(fe,he);var Ee={2:"touch",3:"pen",4:"mouse"};fe.prototype.h=function(){fe.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var ke="closure_listenable_"+(1e6*Math.random()|0),Ve=0;function yt(g,w,A,O,W){this.listener=g,this.proxy=null,this.src=w,this.type=A,this.capture=!!O,this.ha=W,this.key=++Ve,this.da=this.fa=!1}function Rn(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Ai(g){this.src=g,this.g={},this.h=0}Ai.prototype.add=function(g,w,A,O,W){var ie=g.toString();g=this.g[ie],g||(g=this.g[ie]=[],this.h++);var ge=pi(g,w,O,W);return-1<ge?(w=g[ge],A||(w.fa=!1)):(w=new yt(w,this.src,ie,!!O,W),w.fa=A,g.push(w)),w};function Nn(g,w){var A=w.type;if(A in g.g){var O=g.g[A],W=Array.prototype.indexOf.call(O,w,void 0),ie;(ie=0<=W)&&Array.prototype.splice.call(O,W,1),ie&&(Rn(w),g.g[A].length==0&&(delete g.g[A],g.h--))}}function pi(g,w,A,O){for(var W=0;W<g.length;++W){var ie=g[W];if(!ie.da&&ie.listener==w&&ie.capture==!!A&&ie.ha==O)return W}return-1}var Ln="closure_lm_"+(1e6*Math.random()|0),Pn={};function On(g,w,A,O,W){if(Array.isArray(w)){for(var ie=0;ie<w.length;ie++)On(g,w[ie],A,O,W);return null}return A=zt(A),g&&g[ke]?g.K(w,A,f(O)?!!O.capture:!1,W):Fi(g,w,A,!1,O,W)}function Fi(g,w,A,O,W,ie){if(!w)throw Error("Invalid event type");var ge=f(W)?!!W.capture:!!W,At=zi(g);if(At||(g[Ln]=At=new Ai(g)),A=At.add(w,A,O,ge,ie),A.proxy)return A;if(O=Bi(),A.proxy=O,O.src=g,O.listener=A,g.addEventListener)se||(W=ge),W===void 0&&(W=!1),g.addEventListener(w.toString(),O,W);else if(g.attachEvent)g.attachEvent(gi(w.toString()),O);else if(g.addListener&&g.removeListener)g.addListener(O);else throw Error("addEventListener and attachEvent are unavailable.");return A}function Bi(){function g(A){return w.call(g.src,g.listener,A)}const w=_n;return g}function Ci(g,w,A,O,W){if(Array.isArray(w))for(var ie=0;ie<w.length;ie++)Ci(g,w[ie],A,O,W);else O=f(O)?!!O.capture:!!O,A=zt(A),g&&g[ke]?(g=g.i,w=String(w).toString(),w in g.g&&(ie=g.g[w],A=pi(ie,A,O,W),-1<A&&(Rn(ie[A]),Array.prototype.splice.call(ie,A,1),ie.length==0&&(delete g.g[w],g.h--)))):g&&(g=zi(g))&&(w=g.g[w.toString()],g=-1,w&&(g=pi(w,A,O,W)),(A=-1<g?w[g]:null)&&mi(A))}function mi(g){if(typeof g!="number"&&g&&!g.da){var w=g.src;if(w&&w[ke])Nn(w.i,g);else{var A=g.type,O=g.proxy;w.removeEventListener?w.removeEventListener(A,O,g.capture):w.detachEvent?w.detachEvent(gi(A),O):w.addListener&&w.removeListener&&w.removeListener(O),(A=zi(w))?(Nn(A,g),A.h==0&&(A.src=null,w[Ln]=null)):Rn(g)}}}function gi(g){return g in Pn?Pn[g]:Pn[g]="on"+g}function _n(g,w){if(g.da)g=!0;else{w=new fe(w,this);var A=g.listener,O=g.ha||g.src;g.fa&&mi(g),g=A.call(O,w)}return g}function zi(g){return g=g[Ln],g instanceof Ai?g:null}var xt="__closure_events_fn_"+(1e9*Math.random()>>>0);function zt(g){return typeof g=="function"?g:(g[xt]||(g[xt]=function(w){return g.handleEvent(w)}),g[xt])}function Ge(){Z.call(this),this.i=new Ai(this),this.M=this,this.F=null}C(Ge,Z),Ge.prototype[ke]=!0,Ge.prototype.removeEventListener=function(g,w,A,O){Ci(this,g,w,A,O)};function qt(g,w){var A,O=g.F;if(O)for(A=[];O;O=O.F)A.push(O);if(g=g.M,O=w.type||w,typeof w=="string")w=new he(w,g);else if(w instanceof he)w.target=w.target||g;else{var W=w;w=new he(O,g),U(w,W)}if(W=!0,A)for(var ie=A.length-1;0<=ie;ie--){var ge=w.g=A[ie];W=rn(ge,O,!0,w)&&W}if(ge=w.g=g,W=rn(ge,O,!0,w)&&W,W=rn(ge,O,!1,w)&&W,A)for(ie=0;ie<A.length;ie++)ge=w.g=A[ie],W=rn(ge,O,!1,w)&&W}Ge.prototype.N=function(){if(Ge.aa.N.call(this),this.i){var g=this.i,w;for(w in g.g){for(var A=g.g[w],O=0;O<A.length;O++)Rn(A[O]);delete g.g[w],g.h--}}this.F=null},Ge.prototype.K=function(g,w,A,O){return this.i.add(String(g),w,!1,A,O)},Ge.prototype.L=function(g,w,A,O){return this.i.add(String(g),w,!0,A,O)};function rn(g,w,A,O){if(w=g.i.g[String(w)],!w)return!0;w=w.concat();for(var W=!0,ie=0;ie<w.length;++ie){var ge=w[ie];if(ge&&!ge.da&&ge.capture==A){var At=ge.listener,En=ge.ha||ge.src;ge.fa&&Nn(g.i,ge),W=At.call(En,O)!==!1&&W}}return W&&!O.defaultPrevented}function Ot(g,w,A){if(typeof g=="function")A&&(g=T(g,A));else if(g&&typeof g.handleEvent=="function")g=T(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:c.setTimeout(g,w||0)}function Un(g){g.g=Ot(()=>{g.g=null,g.i&&(g.i=!1,Un(g))},g.l);const w=g.h;g.h=null,g.m.apply(null,w)}class We extends Z{constructor(w,A){super(),this.m=w,this.l=A,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:Un(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fn(g){Z.call(this),this.h=g,this.g={}}C(fn,Z);var Fn=[];function et(g){H(g.g,function(w,A){this.g.hasOwnProperty(A)&&mi(w)},g),g.g={}}fn.prototype.N=function(){fn.aa.N.call(this),et(this)},fn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ce=c.JSON.stringify,be=c.JSON.parse,we=class{stringify(g){return c.JSON.stringify(g,void 0)}parse(g){return c.JSON.parse(g,void 0)}};function je(){}je.prototype.h=null;function ht(g){return g.h||(g.h=g.i())}function Je(){}var Qe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nt(){he.call(this,"d")}C(nt,he);function it(){he.call(this,"c")}C(it,he);var Me={},Ke=null;function hn(){return Ke=Ke||new Ge}Me.La="serverreachability";function $n(g){he.call(this,Me.La,g)}C($n,he);function Xt(g){const w=hn();qt(w,new $n(w))}Me.STAT_EVENT="statevent";function Dt(g,w){he.call(this,Me.STAT_EVENT,g),this.stat=w}C(Dt,he);function pt(g){const w=hn();qt(w,new Dt(w,g))}Me.Ma="timingevent";function Dn(g,w){he.call(this,Me.Ma,g),this.size=w}C(Dn,he);function pe(g,w){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){g()},w)}function Re(){this.g=!0}Re.prototype.xa=function(){this.g=!1};function tt(g,w,A,O,W,ie){g.info(function(){if(g.g)if(ie)for(var ge="",At=ie.split("&"),En=0;En<At.length;En++){var Xe=At[En].split("=");if(1<Xe.length){var zn=Xe[0];Xe=Xe[1];var qn=zn.split("_");ge=2<=qn.length&&qn[1]=="type"?ge+(zn+"="+Xe+"&"):ge+(zn+"=redacted&")}}else ge=null;else ge=ie;return"XMLHTTP REQ ("+O+") [attempt "+W+"]: "+w+`
`+A+`
`+ge})}function mt(g,w,A,O,W,ie,ge){g.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+W+"]: "+w+`
`+A+`
`+ie+" "+ge})}function Tn(g,w,A,O){g.info(function(){return"XMLHTTP TEXT ("+w+"): "+Kn(g,A)+(O?" "+O:"")})}function xr(g,w){g.info(function(){return"TIMEOUT: "+w})}Re.prototype.info=function(){};function Kn(g,w){if(!g.g)return w;if(!w)return null;try{var A=JSON.parse(w);if(A){for(g=0;g<A.length;g++)if(Array.isArray(A[g])){var O=A[g];if(!(2>O.length)){var W=O[1];if(Array.isArray(W)&&!(1>W.length)){var ie=W[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(var ge=1;ge<W.length;ge++)W[ge]=""}}}}return ce(A)}catch{return w}}var Rt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Zt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qi;function rr(){}C(rr,je),rr.prototype.g=function(){return new XMLHttpRequest},rr.prototype.i=function(){return{}},qi=new rr;function Hi(g,w,A,O){this.j=g,this.i=w,this.l=A,this.R=O||1,this.U=new fn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ca}function ca(){this.i=null,this.g="",this.h=!1}var Ar={},sr={};function or(g,w,A){g.L=1,g.v=fa(sn(w)),g.m=A,g.P=!0,Ii(g,null)}function Ii(g,w){g.F=Date.now(),yi(g),g.A=sn(g.v);var A=g.A,O=g.R;Array.isArray(O)||(O=[String(O)]),ds(A.i,"t",O),g.C=0,A=g.j.J,g.h=new ca,g.g=Df(g.j,A?w:null,!g.m),0<g.O&&(g.M=new We(T(g.Y,g,g.g),g.O)),w=g.U,A=g.g,O=g.ca;var W="readystatechange";Array.isArray(W)||(W&&(Fn[0]=W.toString()),W=Fn);for(var ie=0;ie<W.length;ie++){var ge=On(A,W[ie],O||w.handleEvent,!1,w.h||w);if(!ge)break;w.g[ge.key]=ge}w=g.H?I(g.H):{},g.m?(g.u||(g.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,w)):(g.u="GET",g.g.ea(g.A,g.u,null,w)),Xt(),tt(g.i,g.u,g.A,g.l,g.R,g.m)}Hi.prototype.ca=function(g){g=g.target;const w=this.M;w&&Ti(g)==3?w.j():this.Y(g)},Hi.prototype.Y=function(g){try{if(g==this.g)e:{const qn=Ti(this.g);var w=this.g.Ba();const so=this.g.Z();if(!(3>qn)&&(qn!=3||this.g&&(this.h.h||this.g.oa()||ma(this.g)))){this.J||qn!=4||w==7||(w==8||0>=so?Xt(3):Xt(2)),Cr(this);var A=this.g.Z();this.X=A;t:if(ar(this)){var O=ma(this.g);g="";var W=O.length,ie=Ti(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vi(this),Ir(this);var ge="";break t}this.h.i=new c.TextDecoder}for(w=0;w<W;w++)this.h.h=!0,g+=this.h.i.decode(O[w],{stream:!(ie&&w==W-1)});O.length=0,this.h.g+=g,this.C=0,ge=this.h.g}else ge=this.g.oa();if(this.o=A==200,mt(this.i,this.u,this.A,this.l,this.R,qn,A),this.o){if(this.T&&!this.K){t:{if(this.g){var At,En=this.g;if((At=En.g?En.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(At)){var Xe=At;break t}}Xe=null}if(A=Xe)Tn(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jr(this,A);else{this.o=!1,this.s=3,pt(12),vi(this),Ir(this);break e}}if(this.P){A=!0;let Ni;for(;!this.J&&this.C<ge.length;)if(Ni=Gr(this,ge),Ni==sr){qn==4&&(this.s=4,pt(14),A=!1),Tn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ni==Ar){this.s=4,pt(15),Tn(this.i,this.l,ge,"[Invalid Chunk]"),A=!1;break}else Tn(this.i,this.l,Ni,null),jr(this,Ni);if(ar(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qn!=4||ge.length!=0||this.h.h||(this.s=1,pt(16),A=!1),this.o=this.o&&A,!A)Tn(this.i,this.l,ge,"[Invalid Chunked Response]"),vi(this),Ir(this);else if(0<ge.length&&!this.W){this.W=!0;var zn=this.j;zn.g==this&&zn.ba&&!zn.M&&(zn.j.info("Great, no buffering proxy detected. Bytes received: "+ge.length),tc(zn),zn.M=!0,pt(11))}}else Tn(this.i,this.l,ge,null),jr(this,ge);qn==4&&vi(this),this.o&&!this.J&&(qn==4?Rf(this.j,this):(this.o=!1,yi(this)))}else bf(this.g),A==400&&0<ge.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),vi(this),Ir(this)}}}catch{}finally{}};function ar(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function Gr(g,w){var A=g.C,O=w.indexOf(`
`,A);return O==-1?sr:(A=Number(w.substring(A,O)),isNaN(A)?Ar:(O+=1,O+A>w.length?sr:(w=w.slice(O,O+A),g.C=O+A,w)))}Hi.prototype.cancel=function(){this.J=!0,vi(this)};function yi(g){g.S=Date.now()+g.I,Wt(g,g.I)}function Wt(g,w){if(g.B!=null)throw Error("WatchDog timer not null");g.B=pe(T(g.ba,g),w)}function Cr(g){g.B&&(c.clearTimeout(g.B),g.B=null)}Hi.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(xr(this.i,this.A),this.L!=2&&(Xt(),pt(17)),vi(this),this.s=2,Ir(this)):Wt(this,this.S-g)};function Ir(g){g.j.G==0||g.J||Rf(g.j,g)}function vi(g){Cr(g);var w=g.M;w&&typeof w.ma=="function"&&w.ma(),g.M=null,et(g.U),g.g&&(w=g.g,g.g=null,w.abort(),w.ma())}function jr(g,w){try{var A=g.j;if(A.G!=0&&(A.g==g||Ys(A.h,g))){if(!g.K&&Ys(A.h,g)&&A.G==3){try{var O=A.Da.g.parse(w)}catch{O=null}if(Array.isArray(O)&&O.length==3){var W=O;if(W[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<g.F)io(A),no(A);else break e;ec(A),pt(18)}}else A.za=W[1],0<A.za-A.T&&37500>W[2]&&A.F&&A.v==0&&!A.C&&(A.C=pe(T(A.Za,A),6e3));if(1>=yf(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else hs(A,11)}else if((g.K||A.g==g)&&io(A),!k(w))for(W=A.Da.g.parse(w),w=0;w<W.length;w++){let Xe=W[w];if(A.T=Xe[0],Xe=Xe[1],A.G==2)if(Xe[0]=="c"){A.K=Xe[1],A.ia=Xe[2];const zn=Xe[3];zn!=null&&(A.la=zn,A.j.info("VER="+A.la));const qn=Xe[4];qn!=null&&(A.Aa=qn,A.j.info("SVER="+A.Aa));const so=Xe[5];so!=null&&typeof so=="number"&&0<so&&(O=1.5*so,A.L=O,A.j.info("backChannelRequestTimeoutMs_="+O)),O=A;const Ni=g.g;if(Ni){const va=Ni.g?Ni.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(va){var ie=O.h;ie.g||va.indexOf("spdy")==-1&&va.indexOf("quic")==-1&&va.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(Js(ie,ie.h),ie.h=null))}if(O.D){const ps=Ni.g?Ni.g.getResponseHeader("X-HTTP-Session-Id"):null;ps&&(O.ya=ps,vt(O.I,O.D,ps))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-g.F,A.j.info("Handshake RTT: "+A.R+"ms")),O=A;var ge=g;if(O.qa=Pf(O,O.J?O.ia:null,O.W),ge.K){lr(O.h,ge);var At=ge,En=O.L;En&&(At.I=En),At.B&&(Cr(At),yi(At)),O.g=ge}else Cf(O);0<A.i.length&&gl(A)}else Xe[0]!="stop"&&Xe[0]!="close"||hs(A,7);else A.G==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?hs(A,7):Xu(A):Xe[0]!="noop"&&A.l&&A.l.ta(Xe),A.v=0)}}Xt(4)}catch{}}var Sg=class{constructor(g,w){this.g=g,this.map=w}};function ju(g){this.l=g||10,c.PerformanceNavigationTiming?(g=c.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $u(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function yf(g){return g.h?1:g.g?g.g.size:0}function Ys(g,w){return g.h?g.h==w:g.g?g.g.has(w):!1}function Js(g,w){g.g?g.g.add(w):g.h=w}function lr(g,w){g.h&&g.h==w?g.h=null:g.g&&g.g.has(w)&&g.g.delete(w)}ju.prototype.cancel=function(){if(this.i=_i(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function _i(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let w=g.i;for(const A of g.g.values())w=w.concat(A.D);return w}return N(g.i)}function vf(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(d(g)){for(var w=[],A=g.length,O=0;O<A;O++)w.push(g[O]);return w}w=[],A=0;for(O in g)w[A++]=g[O];return w}function bg(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(d(g)||typeof g=="string"){var w=[];g=g.length;for(var A=0;A<g;A++)w.push(A);return w}w=[],A=0;for(const O in g)w[A++]=O;return w}}}function ul(g,w){if(g.forEach&&typeof g.forEach=="function")g.forEach(w,void 0);else if(d(g)||typeof g=="string")Array.prototype.forEach.call(g,w,void 0);else for(var A=bg(g),O=vf(g),W=O.length,ie=0;ie<W;ie++)w.call(void 0,O[ie],A&&A[ie],g)}var Ku=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cl(g,w){if(g){g=g.split("&");for(var A=0;A<g.length;A++){var O=g[A].indexOf("="),W=null;if(0<=O){var ie=g[A].substring(0,O);W=g[A].substring(O+1)}else ie=g[A];w(ie,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function cs(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof cs){this.h=g.h,Ws(this,g.j),this.o=g.o,this.g=g.g,da(this,g.s),this.l=g.l;var w=g.i,A=new $r;A.i=w.i,w.g&&(A.g=new Map(w.g),A.h=w.h),dl(this,A),this.m=g.m}else g&&(w=String(g).match(Ku))?(this.h=!1,Ws(this,w[1]||"",!0),this.o=Qs(w[2]||""),this.g=Qs(w[3]||"",!0),da(this,w[4]),this.l=Qs(w[5]||"",!0),dl(this,w[6]||"",!0),this.m=Qs(w[7]||"")):(this.h=!1,this.i=new $r(null,this.h))}cs.prototype.toString=function(){var g=[],w=this.j;w&&g.push(ur(w,Yu,!0),":");var A=this.g;return(A||w=="file")&&(g.push("//"),(w=this.o)&&g.push(ur(w,Yu,!0),"@"),g.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&g.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&g.push("/"),g.push(ur(A,A.charAt(0)=="/"?Ju:_f,!0))),(A=this.i.toString())&&g.push("?",A),(A=this.m)&&g.push("#",ur(A,Ag)),g.join("")};function sn(g){return new cs(g)}function Ws(g,w,A){g.j=A?Qs(w,!0):w,g.j&&(g.j=g.j.replace(/:$/,""))}function da(g,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);g.s=w}else g.s=null}function dl(g,w,A){w instanceof $r?(g.i=w,Tf(g.i,g.h)):(A||(w=ur(w,xg)),g.i=new $r(w,g.h))}function vt(g,w,A){g.i.set(w,A)}function fa(g){return vt(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function Qs(g,w){return g?w?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function ur(g,w,A){return typeof g=="string"?(g=encodeURI(g).replace(w,wg),A&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function wg(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Yu=/[#\/\?@]/g,_f=/[#\?:]/g,Ju=/[#\?]/g,xg=/[#\?@]/g,Ag=/#/g;function $r(g,w){this.h=this.g=null,this.i=g||null,this.j=!!w}function Bn(g){g.g||(g.g=new Map,g.h=0,g.i&&cl(g.i,function(w,A){g.add(decodeURIComponent(w.replace(/\+/g," ")),A)}))}t=$r.prototype,t.add=function(g,w){Bn(this),this.i=null,g=Gi(this,g);var A=this.g.get(g);return A||this.g.set(g,A=[]),A.push(w),this.h+=1,this};function fl(g,w){Bn(g),w=Gi(g,w),g.g.has(w)&&(g.i=null,g.h-=g.g.get(w).length,g.g.delete(w))}function hl(g,w){return Bn(g),w=Gi(g,w),g.g.has(w)}t.forEach=function(g,w){Bn(this),this.g.forEach(function(A,O){A.forEach(function(W){g.call(w,W,O,this)},this)},this)},t.na=function(){Bn(this);const g=Array.from(this.g.values()),w=Array.from(this.g.keys()),A=[];for(let O=0;O<w.length;O++){const W=g[O];for(let ie=0;ie<W.length;ie++)A.push(w[O])}return A},t.V=function(g){Bn(this);let w=[];if(typeof g=="string")hl(this,g)&&(w=w.concat(this.g.get(Gi(this,g))));else{g=Array.from(this.g.values());for(let A=0;A<g.length;A++)w=w.concat(g[A])}return w},t.set=function(g,w){return Bn(this),this.i=null,g=Gi(this,g),hl(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[w]),this.h+=1,this},t.get=function(g,w){return g?(g=this.V(g),0<g.length?String(g[0]):w):w};function ds(g,w,A){fl(g,w),0<A.length&&(g.i=null,g.g.set(Gi(g,w),N(A)),g.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],w=Array.from(this.g.keys());for(var A=0;A<w.length;A++){var O=w[A];const ie=encodeURIComponent(String(O)),ge=this.V(O);for(O=0;O<ge.length;O++){var W=ie;ge[O]!==""&&(W+="="+encodeURIComponent(String(ge[O]))),g.push(W)}}return this.i=g.join("&")};function Gi(g,w){return w=String(w),g.j&&(w=w.toLowerCase()),w}function Tf(g,w){w&&!g.j&&(Bn(g),g.i=null,g.g.forEach(function(A,O){var W=O.toLowerCase();O!=W&&(fl(this,O),ds(this,W,A))},g)),g.j=w}function Wu(g,w){const A=new Re;if(c.Image){const O=new Image;O.onload=b(Ri,A,"TestLoadImage: loaded",!0,w,O),O.onerror=b(Ri,A,"TestLoadImage: error",!1,w,O),O.onabort=b(Ri,A,"TestLoadImage: abort",!1,w,O),O.ontimeout=b(Ri,A,"TestLoadImage: timeout",!1,w,O),c.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=g}else w(!1)}function Ef(g,w){const A=new Re,O=new AbortController,W=setTimeout(()=>{O.abort(),Ri(A,"TestPingServer: timeout",!1,w)},1e4);fetch(g,{signal:O.signal}).then(ie=>{clearTimeout(W),ie.ok?Ri(A,"TestPingServer: ok",!0,w):Ri(A,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(W),Ri(A,"TestPingServer: error",!1,w)})}function Ri(g,w,A,O,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),O(A)}catch{}}function Rr(){this.g=new we}function Qu(g,w,A){const O=A||"";try{ul(g,function(W,ie){let ge=W;f(W)&&(ge=ce(W)),w.push(O+ie+"="+encodeURIComponent(ge))})}catch(W){throw w.push(O+"type="+encodeURIComponent("_badmap")),W}}function Kr(g){this.l=g.Ub||null,this.j=g.eb||!1}C(Kr,je),Kr.prototype.g=function(){return new ji(this.l,this.j)},Kr.prototype.i=(function(g){return function(){return g}})({});function ji(g,w){Ge.call(this),this.D=g,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(ji,Ge),t=ji.prototype,t.open=function(g,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=w,this.readyState=1,Xs(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(w.body=g),(this.D||c).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yr(this)),this.readyState=0},t.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Xs(this)),this.g&&(this.readyState=3,Xs(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;pl(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function pl(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}t.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var w=g.value?g.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!g.done}))&&(this.response=this.responseText+=w)}g.done?Yr(this):Xs(this),this.readyState==3&&pl(this)}},t.Ra=function(g){this.g&&(this.response=this.responseText=g,Yr(this))},t.Qa=function(g){this.g&&(this.response=g,Yr(this))},t.ga=function(){this.g&&Yr(this)};function Yr(g){g.readyState=4,g.l=null,g.j=null,g.v=null,Xs(g)}t.setRequestHeader=function(g,w){this.u.append(g,w)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],w=this.h.entries();for(var A=w.next();!A.done;)A=A.value,g.push(A[0]+": "+A[1]),A=w.next();return g.join(`\r
`)};function Xs(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(ji.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function ha(g){let w="";return H(g,function(A,O){w+=O,w+=":",w+=A,w+=`\r
`}),w}function Zs(g,w,A){e:{for(O in A){var O=!1;break e}O=!0}O||(A=ha(A),typeof g=="string"?A!=null&&encodeURIComponent(String(A)):vt(g,w,A))}function Ht(g){Ge.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ht,Ge);var ii=/^https?$/i,fs=["POST","PUT"];t=Ht.prototype,t.Ha=function(g){this.J=g},t.ea=function(g,w,A,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);w=w?w.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qi.g(),this.v=this.o?ht(this.o):ht(qi),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(w,String(g),!0),this.B=!1}catch(ie){pa(this,ie);return}if(g=A||"",A=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var W in O)A.set(W,O[W]);else if(typeof O.keys=="function"&&typeof O.get=="function")for(const ie of O.keys())A.set(ie,O.get(ie));else throw Error("Unknown input type for opt_headers: "+String(O));O=Array.from(A.keys()).find(ie=>ie.toLowerCase()=="content-type"),W=c.FormData&&g instanceof c.FormData,!(0<=Array.prototype.indexOf.call(fs,w,void 0))||O||W||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,ge]of A)this.g.setRequestHeader(ie,ge);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ml(this),this.u=!0,this.g.send(g),this.u=!1}catch(ie){pa(this,ie)}};function pa(g,w){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=w,g.m=5,eo(g),to(g)}function eo(g){g.A||(g.A=!0,qt(g,"complete"),qt(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,qt(this,"complete"),qt(this,"abort"),to(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),to(this,!0)),Ht.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Sf(this):this.bb())},t.bb=function(){Sf(this)};function Sf(g){if(g.h&&typeof l<"u"&&(!g.v[1]||Ti(g)!=4||g.Z()!=2)){if(g.u&&Ti(g)==4)Ot(g.Ea,0,g);else if(qt(g,"readystatechange"),Ti(g)==4){g.h=!1;try{const ge=g.Z();e:switch(ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var A;if(!(A=w)){var O;if(O=ge===0){var W=String(g.D).match(Ku)[1]||null;!W&&c.self&&c.self.location&&(W=c.self.location.protocol.slice(0,-1)),O=!ii.test(W?W.toLowerCase():"")}A=O}if(A)qt(g,"complete"),qt(g,"success");else{g.m=6;try{var ie=2<Ti(g)?g.g.statusText:""}catch{ie=""}g.l=ie+" ["+g.Z()+"]",eo(g)}}finally{to(g)}}}}function to(g,w){if(g.g){ml(g);const A=g.g,O=g.v[0]?()=>{}:null;g.g=null,g.v=null,w||qt(g,"ready");try{A.onreadystatechange=O}catch{}}}function ml(g){g.I&&(c.clearTimeout(g.I),g.I=null)}t.isActive=function(){return!!this.g};function Ti(g){return g.g?g.g.readyState:0}t.Z=function(){try{return 2<Ti(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(g){if(this.g){var w=this.g.responseText;return g&&w.indexOf(g)==0&&(w=w.substring(g.length)),be(w)}};function ma(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function bf(g){const w={};g=(g.g&&2<=Ti(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let O=0;O<g.length;O++){if(k(g[O]))continue;var A=L(g[O]);const W=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const ie=w[W]||[];w[W]=ie,ie.push(A)}R(w,function(O){return O.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ga(g,w,A){return A&&A.internalChannelParams&&A.internalChannelParams[g]||w}function wf(g){this.Aa=0,this.i=[],this.j=new Re,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ga("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ga("baseRetryDelayMs",5e3,g),this.cb=ga("retryDelaySeedMs",1e4,g),this.Wa=ga("forwardChannelMaxRetries",2,g),this.wa=ga("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new ju(g&&g.concurrentRequestLimit),this.Da=new Rr,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=wf.prototype,t.la=8,t.G=1,t.connect=function(g,w,A,O){pt(0),this.W=g,this.H=w||{},A&&O!==void 0&&(this.H.OSID=A,this.H.OAID=O),this.F=this.X,this.I=Pf(this,null,this.W),gl(this)};function Xu(g){if(xf(g),g.G==3){var w=g.U++,A=sn(g.I);if(vt(A,"SID",g.K),vt(A,"RID",w),vt(A,"TYPE","terminate"),ya(g,A),w=new Hi(g,g.j,w),w.L=2,w.v=fa(sn(A)),A=!1,c.navigator&&c.navigator.sendBeacon)try{A=c.navigator.sendBeacon(w.v.toString(),"")}catch{}!A&&c.Image&&(new Image().src=w.v,A=!0),A||(w.g=Df(w.j,null),w.g.ea(w.v)),w.F=Date.now(),yi(w)}nc(g)}function no(g){g.g&&(tc(g),g.g.cancel(),g.g=null)}function xf(g){no(g),g.u&&(c.clearTimeout(g.u),g.u=null),io(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&c.clearTimeout(g.s),g.s=null)}function gl(g){if(!$u(g.h)&&!g.s){g.s=!0;var w=g.Ga;re||Ae(),me||(re(),me=!0),Te.add(w,g),g.B=0}}function Cg(g,w){return yf(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=w.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=pe(T(g.Ga,g,w),Nf(g,g.B)),g.B++,!0)}t.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const W=new Hi(this,this.j,g);let ie=this.o;if(this.S&&(ie?(ie=I(ie),U(ie,this.S)):ie=this.S),this.m!==null||this.O||(W.H=ie,ie=null),this.P)e:{for(var w=0,A=0;A<this.i.length;A++){t:{var O=this.i[A];if("__data__"in O.map&&(O=O.map.__data__,typeof O=="string")){O=O.length;break t}O=void 0}if(O===void 0)break;if(w+=O,4096<w){w=A;break e}if(w===4096||A===this.i.length-1){w=A+1;break e}}w=1e3}else w=1e3;w=Zu(this,W,w),A=sn(this.I),vt(A,"RID",g),vt(A,"CVER",22),this.D&&vt(A,"X-HTTP-Session-Id",this.D),ya(this,A),ie&&(this.O?w="headers="+encodeURIComponent(String(ha(ie)))+"&"+w:this.m&&Zs(A,this.m,ie)),Js(this.h,W),this.Ua&&vt(A,"TYPE","init"),this.P?(vt(A,"$req",w),vt(A,"SID","null"),W.T=!0,or(W,A,null)):or(W,A,w),this.G=2}}else this.G==3&&(g?Af(this,g):this.i.length==0||$u(this.h)||Af(this))};function Af(g,w){var A;w?A=w.l:A=g.U++;const O=sn(g.I);vt(O,"SID",g.K),vt(O,"RID",A),vt(O,"AID",g.T),ya(g,O),g.m&&g.o&&Zs(O,g.m,g.o),A=new Hi(g,g.j,A,g.B+1),g.m===null&&(A.H=g.o),w&&(g.i=w.D.concat(g.i)),w=Zu(g,A,1e3),A.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),Js(g.h,A),or(A,O,w)}function ya(g,w){g.H&&H(g.H,function(A,O){vt(w,O,A)}),g.l&&ul({},function(A,O){vt(w,O,A)})}function Zu(g,w,A){A=Math.min(g.i.length,A);var O=g.l?T(g.l.Na,g.l,g):null;e:{var W=g.i;let ie=-1;for(;;){const ge=["count="+A];ie==-1?0<A?(ie=W[0].g,ge.push("ofs="+ie)):ie=0:ge.push("ofs="+ie);let At=!0;for(let En=0;En<A;En++){let Xe=W[En].g;const zn=W[En].map;if(Xe-=ie,0>Xe)ie=Math.max(0,W[En].g-100),At=!1;else try{Qu(zn,ge,"req"+Xe+"_")}catch{O&&O(zn)}}if(At){O=ge.join("&");break e}}}return g=g.i.splice(0,A),w.D=g,O}function Cf(g){if(!g.g&&!g.u){g.Y=1;var w=g.Fa;re||Ae(),me||(re(),me=!0),Te.add(w,g),g.v=0}}function ec(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=pe(T(g.Fa,g),Nf(g,g.v)),g.v++,!0)}t.Fa=function(){if(this.u=null,If(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=pe(T(this.ab,this),g)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),no(this),If(this))};function tc(g){g.A!=null&&(c.clearTimeout(g.A),g.A=null)}function If(g){g.g=new Hi(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var w=sn(g.qa);vt(w,"RID","rpc"),vt(w,"SID",g.K),vt(w,"AID",g.T),vt(w,"CI",g.F?"0":"1"),!g.F&&g.ja&&vt(w,"TO",g.ja),vt(w,"TYPE","xmlhttp"),ya(g,w),g.m&&g.o&&Zs(w,g.m,g.o),g.L&&(g.g.I=g.L);var A=g.g;g=g.ia,A.L=1,A.v=fa(sn(w)),A.m=null,A.P=!0,Ii(A,g)}t.Za=function(){this.C!=null&&(this.C=null,no(this),ec(this),pt(19))};function io(g){g.C!=null&&(c.clearTimeout(g.C),g.C=null)}function Rf(g,w){var A=null;if(g.g==w){io(g),tc(g),g.g=null;var O=2}else if(Ys(g.h,w))A=w.D,lr(g.h,w),O=1;else return;if(g.G!=0){if(w.o)if(O==1){A=w.m?w.m.length:0,w=Date.now()-w.F;var W=g.B;O=hn(),qt(O,new Dn(O,A)),gl(g)}else Cf(g);else if(W=w.s,W==3||W==0&&0<w.X||!(O==1&&Cg(g,w)||O==2&&ec(g)))switch(A&&0<A.length&&(w=g.h,w.i=w.i.concat(A)),W){case 1:hs(g,5);break;case 4:hs(g,10);break;case 3:hs(g,6);break;default:hs(g,2)}}}function Nf(g,w){let A=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(A*=2),A*w}function hs(g,w){if(g.j.info("Error code "+w),w==2){var A=T(g.fb,g),O=g.Xa;const W=!O;O=new cs(O||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ws(O,"https"),fa(O),W?Wu(O.toString(),A):Ef(O.toString(),A)}else pt(2);g.G=0,g.l&&g.l.sa(w),nc(g),xf(g)}t.fb=function(g){g?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function nc(g){if(g.G=0,g.ka=[],g.l){const w=_i(g.h);(w.length!=0||g.i.length!=0)&&(M(g.ka,w),M(g.ka,g.i),g.h.i.length=0,N(g.i),g.i.length=0),g.l.ra()}}function Pf(g,w,A){var O=A instanceof cs?sn(A):new cs(A);if(O.g!="")w&&(O.g=w+"."+O.g),da(O,O.s);else{var W=c.location;O=W.protocol,w=w?w+"."+W.hostname:W.hostname,W=+W.port;var ie=new cs(null);O&&Ws(ie,O),w&&(ie.g=w),W&&da(ie,W),A&&(ie.l=A),O=ie}return A=g.D,w=g.ya,A&&w&&vt(O,A,w),vt(O,"VER",g.la),ya(g,O),O}function Df(g,w,A){if(w&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=g.Ca&&!g.pa?new Ht(new Kr({eb:A})):new Ht(g.pa),w.Ha(g.J),w}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mf(){}t=Mf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function yl(){}yl.prototype.g=function(g,w){return new Ei(g,w)};function Ei(g,w){Ge.call(this),this.g=new wf(w),this.l=g,this.h=w&&w.messageUrlParams||null,g=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(g?g["X-WebChannel-Content-Type"]=w.messageContentType:g={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(g?g["X-WebChannel-Client-Profile"]=w.va:g={"X-WebChannel-Client-Profile":w.va}),this.g.S=g,(g=w&&w.Sb)&&!k(g)&&(this.g.m=g),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!k(w)&&(this.g.D=w,g=this.h,g!==null&&w in g&&(g=this.h,w in g&&delete g[w])),this.j=new ro(this)}C(Ei,Ge),Ei.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ei.prototype.close=function(){Xu(this.g)},Ei.prototype.o=function(g){var w=this.g;if(typeof g=="string"){var A={};A.__data__=g,g=A}else this.u&&(A={},A.__data__=ce(g),g=A);w.i.push(new Sg(w.Ya++,g)),w.G==3&&gl(w)},Ei.prototype.N=function(){this.g.l=null,delete this.j,Xu(this.g),delete this.g,Ei.aa.N.call(this)};function kf(g){nt.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var w=g.__sm__;if(w){e:{for(const A in w){g=A;break e}g=void 0}(this.i=g)&&(g=this.i,w=w!==null&&g in w?w[g]:void 0),this.data=w}else this.data=g}C(kf,nt);function Vf(){it.call(this),this.status=1}C(Vf,it);function ro(g){this.g=g}C(ro,Mf),ro.prototype.ua=function(){qt(this.g,"a")},ro.prototype.ta=function(g){qt(this.g,new kf(g))},ro.prototype.sa=function(g){qt(this.g,new Vf)},ro.prototype.ra=function(){qt(this.g,"b")},yl.prototype.createWebChannel=yl.prototype.g,Ei.prototype.send=Ei.prototype.o,Ei.prototype.open=Ei.prototype.m,Ei.prototype.close=Ei.prototype.close,TN=function(){return new yl},_N=function(){return hn()},vN=Me,_0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Rt.NO_ERROR=0,Rt.TIMEOUT=8,Rt.HTTP_ERROR=6,vp=Rt,Zt.COMPLETE="complete",yN=Zt,Je.EventType=Qe,Qe.OPEN="a",Qe.CLOSE="b",Qe.ERROR="c",Qe.MESSAGE="d",Ge.prototype.listen=Ge.prototype.K,Qc=Je,Ht.prototype.listenOnce=Ht.prototype.L,Ht.prototype.getLastError=Ht.prototype.Ka,Ht.prototype.getLastErrorCode=Ht.prototype.Ba,Ht.prototype.getStatus=Ht.prototype.Z,Ht.prototype.getResponseJson=Ht.prototype.Oa,Ht.prototype.getResponseText=Ht.prototype.oa,Ht.prototype.send=Ht.prototype.ea,Ht.prototype.setWithCredentials=Ht.prototype.Ha,gN=Ht}).apply(typeof Bh<"u"?Bh:typeof self<"u"?self:typeof window<"u"?window:{});const Ux="@firebase/firestore",Fx="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ui.UNAUTHENTICATED=new ui(null),ui.GOOGLE_CREDENTIALS=new ui("google-credentials-uid"),ui.FIRST_PARTY=new ui("first-party-uid"),ui.MOCK_USER=new ui("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mu="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za=new N_("@firebase/firestore");function Ql(){return Za.logLevel}function Se(t,...e){if(Za.logLevel<=ut.DEBUG){const n=e.map(H_);Za.debug(`Firestore (${Mu}): ${t}`,...n)}}function zs(t,...e){if(Za.logLevel<=ut.ERROR){const n=e.map(H_);Za.error(`Firestore (${Mu}): ${t}`,...n)}}function Ko(t,...e){if(Za.logLevel<=ut.WARN){const n=e.map(H_);Za.warn(`Firestore (${Mu}): ${t}`,...n)}}function H_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,EN(t,i,n)}function EN(t,e,n){let i=`FIRESTORE (${Mu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw zs(i),new Error(i)}function It(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||EN(e,r,i)}function He(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends qr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class u3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ui.UNAUTHENTICATED)))}shutdown(){}}class c3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class d3{constructor(e){this.t=e,this.currentUser=ui.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){It(this.o===void 0,42304);let i=this.i;const r=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new Go;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Go,e.enqueueRetryable((()=>r(this.currentUser)))};const l=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await r(this.currentUser)}))},c=d=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>c(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Go)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(It(typeof i.accessToken=="string",31837,{l:i}),new SN(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return It(e===null||typeof e=="string",2055,{h:e}),new ui(e)}}class f3{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=ui.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class h3{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new f3(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ui.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Bx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class p3{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,wi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){It(this.o===void 0,3512);const i=o=>{o.error!=null&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,Se("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>i(o)))};const r=o=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>r(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Bx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(It(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Bx(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=m3(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%62))}return i}}function Ze(t,e){return t<e?-1:t>e?1:0}function T0(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),r=e.codePointAt(n);if(i!==r){if(i<128&&r<128)return Ze(i,r);{const o=bN(),l=g3(o.encode(zx(t,n)),o.encode(zx(e,n)));return l!==0?l:Ze(i,r)}}n+=i>65535?2:1}return Ze(t.length,e.length)}function zx(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function g3(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Ze(t[n],e[n]);return Ze(t.length,e.length)}function Tu(t,e,n){return t.length===e.length&&t.every(((i,r)=>n(i,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="__name__";class es{constructor(e,n,i){n===void 0?n=0:n>e.length&&Fe(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Fe(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return es.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof es?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=es.compareSegments(e.get(r),n.get(r));if(o!==0)return o}return Ze(e.length,n.length)}static compareSegments(e,n){const i=es.isNumericId(e),r=es.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?es.extractNumericId(e).compare(es.extractNumericId(n)):T0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ho.fromString(e.substring(4,e.length-2))}}class Bt extends es{construct(e,n,i){return new Bt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new _e(ue.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((r=>r.length>0)))}return new Bt(n)}static emptyPath(){return new Bt([])}}const y3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ti extends es{construct(e,n,i){return new ti(e,n,i)}static isValidIdentifier(e){return y3.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ti.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qx}static keyField(){return new ti([qx])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new _e(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;r<e.length;){const c=e[r];if(c==="\\"){if(r+1===e.length)throw new _e(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[r+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new _e(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,r+=2}else c==="`"?(l=!l,r++):c!=="."||l?(i+=c,r++):(o(),r++)}if(o(),l)throw new _e(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ti(n)}static emptyPath(){return new ti([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.path=e}static fromPath(e){return new De(Bt.fromString(e))}static fromName(e){return new De(Bt.fromString(e).popFirst(5))}static empty(){return new De(Bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Bt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new De(new Bt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(t,e,n){if(!n)throw new _e(ue.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function v3(t,e,n,i){if(e===!0&&i===!0)throw new _e(ue.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Hx(t){if(!De.isDocumentKey(t))throw new _e(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Gx(t){if(De.isDocumentKey(t))throw new _e(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function xN(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Om(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Fe(12329,{type:typeof t})}function ns(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new _e(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Om(t);throw new _e(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(t,e){const n={typeString:t};return e&&(n.value=e),n}function nf(t,e){if(!xN(t))throw new _e(ue.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const l=t[i];if(r&&typeof l!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&l!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new _e(ue.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx=-62135596800,$x=1e6;class Yt{static now(){return Yt.fromMillis(Date.now())}static fromDate(e){return Yt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*$x);return new Yt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new _e(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _e(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<jx)throw new _e(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$x}_compareTo(e){return this.seconds===e.seconds?Ze(this.nanoseconds,e.nanoseconds):Ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Yt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(nf(e,Yt._jsonSchema))return new Yt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-jx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Yt._jsonSchemaVersion="firestore/timestamp/1.0",Yt._jsonSchema={type:In("string",Yt._jsonSchemaVersion),seconds:In("number"),nanoseconds:In("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{static fromTimestamp(e){return new Be(e)}static min(){return new Be(new Yt(0,0))}static max(){return new Be(new Yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md=-1;function _3(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Be.fromTimestamp(i===1e9?new Yt(n+1,0):new Yt(n,i));return new Yo(r,De.empty(),e)}function T3(t){return new Yo(t.readTime,t.key,Md)}class Yo{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Yo(Be.min(),De.empty(),Md)}static max(){return new Yo(Be.max(),De.empty(),Md)}}function E3(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=De.comparator(t.documentKey,e.documentKey),n!==0?n:Ze(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class b3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ku(t){if(t.code!==ue.FAILED_PRECONDITION||t.message!==S3)throw t;Se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new de(((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof de?n:de.resolve(n)}catch(n){return de.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):de.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):de.reject(n)}static resolve(e){return new de(((n,i)=>{n(e)}))}static reject(e){return new de(((n,i)=>{i(e)}))}static waitFor(e){return new de(((n,i)=>{let r=0,o=0,l=!1;e.forEach((c=>{++r,c.next((()=>{++o,l&&o===r&&n()}),(d=>i(d)))})),l=!0,o===r&&n()}))}static or(e){let n=de.resolve(!1);for(const i of e)n=n.next((r=>r?de.resolve(r):i()));return n}static forEach(e,n){const i=[];return e.forEach(((r,o)=>{i.push(n.call(this,r,o))})),this.waitFor(i)}static mapArray(e,n){return new de(((i,r)=>{const o=e.length,l=new Array(o);let c=0;for(let d=0;d<o;d++){const f=d;n(e[f]).next((p=>{l[f]=p,++c,c===o&&i(l)}),(p=>r(p)))}}))}static doWhile(e,n){return new de(((i,r)=>{const o=()=>{e()===!0?n().next((()=>{o()}),r):i()};o()}))}}function w3(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Vu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this._e(i),this.ae=i=>n.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Um.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_=-1;function Fm(t){return t==null}function Gp(t){return t===0&&1/t==-1/0}function x3(t){return typeof t=="number"&&Number.isInteger(t)&&!Gp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN="";function A3(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Kx(e)),e=C3(t.get(n),e);return Kx(e)}function C3(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case AN:n+="";break;default:n+=o}}return n}function Kx(t){return t+AN+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function sa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function CN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,n){this.comparator=e,this.root=n||ei.EMPTY}insert(e,n){return new nn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ei.BLACK,null,null))}remove(e){return new nn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ei.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zh(this.root,e,this.comparator,!1)}getReverseIterator(){return new zh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zh(this.root,e,this.comparator,!0)}}class zh{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ei{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??ei.RED,this.left=r??ei.EMPTY,this.right=o??ei.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new ei(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ei.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return ei.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ei.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ei.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Fe(27949);return e+(this.isRed()?0:1)}}ei.EMPTY=null,ei.RED=!0,ei.BLACK=!1;ei.EMPTY=new class{constructor(){this.size=0}get key(){throw Fe(57766)}get value(){throw Fe(16141)}get color(){throw Fe(16727)}get left(){throw Fe(29726)}get right(){throw Fe(36894)}copy(e,n,i,r,o){return this}insert(e,n,i){return new ei(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.comparator=e,this.data=new nn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Jx(this.data.getIterator())}getIteratorFrom(e){return new Jx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof Vn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Vn(this.comparator);return n.data=e,n}}class Jx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e){this.fields=e,e.sort(ti.comparator)}static empty(){return new Zi([])}unionWith(e){let n=new Vn(ti.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Zi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Tu(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new IN("Invalid base64 string: "+o):o}})(e);return new ni(n)}static fromUint8Array(e){const n=(function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o})(e);return new ni(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ni.EMPTY_BYTE_STRING=new ni("");const I3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jo(t){if(It(!!t,39018),typeof t=="string"){let e=0;const n=I3.exec(t);if(It(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:yn(t.seconds),nanos:yn(t.nanos)}}function yn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Wo(t){return typeof t=="string"?ni.fromBase64String(t):ni.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN="server_timestamp",NN="__type__",PN="__previous_value__",DN="__local_write_time__";function $_(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[NN])===null||n===void 0?void 0:n.stringValue)===RN}function Bm(t){const e=t.mapValue.fields[PN];return $_(e)?Bm(e):e}function kd(t){const e=Jo(t.mapValue.fields[DN].timestampValue);return new Yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e,n,i,r,o,l,c,d,f,p){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=p}}const jp="(default)";class Vd{constructor(e,n){this.projectId=e,this.database=n||jp}static empty(){return new Vd("","")}get isDefaultDatabase(){return this.database===jp}isEqual(e){return e instanceof Vd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN="__type__",N3="__max__",qh={mapValue:{}},kN="__vector__",$p="value";function Qo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$_(t)?4:D3(t)?9007199254740991:P3(t)?10:11:Fe(28295,{value:t})}function us(t,e){if(t===e)return!0;const n=Qo(t);if(n!==Qo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return kd(t).isEqual(kd(e));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=Jo(r.timestampValue),c=Jo(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(r,o){return Wo(r.bytesValue).isEqual(Wo(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(r,o){return yn(r.geoPointValue.latitude)===yn(o.geoPointValue.latitude)&&yn(r.geoPointValue.longitude)===yn(o.geoPointValue.longitude)})(t,e);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return yn(r.integerValue)===yn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=yn(r.doubleValue),c=yn(o.doubleValue);return l===c?Gp(l)===Gp(c):isNaN(l)&&isNaN(c)}return!1})(t,e);case 9:return Tu(t.arrayValue.values||[],e.arrayValue.values||[],us);case 10:case 11:return(function(r,o){const l=r.mapValue.fields||{},c=o.mapValue.fields||{};if(Yx(l)!==Yx(c))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(c[d]===void 0||!us(l[d],c[d])))return!1;return!0})(t,e);default:return Fe(52216,{left:t})}}function Ld(t,e){return(t.values||[]).find((n=>us(n,e)))!==void 0}function Eu(t,e){if(t===e)return 0;const n=Qo(t),i=Qo(e);if(n!==i)return Ze(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ze(t.booleanValue,e.booleanValue);case 2:return(function(o,l){const c=yn(o.integerValue||o.doubleValue),d=yn(l.integerValue||l.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1})(t,e);case 3:return Wx(t.timestampValue,e.timestampValue);case 4:return Wx(kd(t),kd(e));case 5:return T0(t.stringValue,e.stringValue);case 6:return(function(o,l){const c=Wo(o),d=Wo(l);return c.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(o,l){const c=o.split("/"),d=l.split("/");for(let f=0;f<c.length&&f<d.length;f++){const p=Ze(c[f],d[f]);if(p!==0)return p}return Ze(c.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,l){const c=Ze(yn(o.latitude),yn(l.latitude));return c!==0?c:Ze(yn(o.longitude),yn(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Qx(t.arrayValue,e.arrayValue);case 10:return(function(o,l){var c,d,f,p;const v=o.fields||{},T=l.fields||{},b=(c=v[$p])===null||c===void 0?void 0:c.arrayValue,C=(d=T[$p])===null||d===void 0?void 0:d.arrayValue,N=Ze(((f=b==null?void 0:b.values)===null||f===void 0?void 0:f.length)||0,((p=C==null?void 0:C.values)===null||p===void 0?void 0:p.length)||0);return N!==0?N:Qx(b,C)})(t.mapValue,e.mapValue);case 11:return(function(o,l){if(o===qh.mapValue&&l===qh.mapValue)return 0;if(o===qh.mapValue)return 1;if(l===qh.mapValue)return-1;const c=o.fields||{},d=Object.keys(c),f=l.fields||{},p=Object.keys(f);d.sort(),p.sort();for(let v=0;v<d.length&&v<p.length;++v){const T=T0(d[v],p[v]);if(T!==0)return T;const b=Eu(c[d[v]],f[p[v]]);if(b!==0)return b}return Ze(d.length,p.length)})(t.mapValue,e.mapValue);default:throw Fe(23264,{le:n})}}function Wx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ze(t,e);const n=Jo(t),i=Jo(e),r=Ze(n.seconds,i.seconds);return r!==0?r:Ze(n.nanos,i.nanos)}function Qx(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=Eu(n[r],i[r]);if(o)return o}return Ze(n.length,i.length)}function Su(t){return E0(t)}function E0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const i=Jo(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Wo(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return De.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=E0(o);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const l of i)o?o=!1:r+=",",r+=`${l}:${E0(n.fields[l])}`;return r+"}"})(t.mapValue):Fe(61005,{value:t})}function _p(t){switch(Qo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Bm(t);return e?16+_p(e):16;case 5:return 2*t.stringValue.length;case 6:return Wo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,o)=>r+_p(o)),0)})(t.arrayValue);case 10:case 11:return(function(i){let r=0;return sa(i.fields,((o,l)=>{r+=o.length+_p(l)})),r})(t.mapValue);default:throw Fe(13486,{value:t})}}function Xx(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function S0(t){return!!t&&"integerValue"in t}function K_(t){return!!t&&"arrayValue"in t}function Zx(t){return!!t&&"nullValue"in t}function eA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Tp(t){return!!t&&"mapValue"in t}function P3(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[MN])===null||n===void 0?void 0:n.stringValue)===kN}function cd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return sa(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=cd(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=cd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function D3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===N3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e){this.value=e}static empty(){return new Oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Tp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=cd(n)}setAll(e){let n=ti.emptyPath(),i={},r=[];e.forEach(((l,c)=>{if(!n.isImmediateParentOf(c)){const d=this.getFieldsMap(n);this.applyChanges(d,i,r),i={},r=[],n=c.popLast()}l?i[c.lastSegment()]=cd(l):r.push(c.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());Tp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return us(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Tp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){sa(n,((r,o)=>e[r]=o));for(const r of i)delete e[r]}clone(){return new Oi(cd(this.value))}}function VN(t){const e=[];return sa(t.fields,((n,i)=>{const r=new ti([n]);if(Tp(i)){const o=VN(i.mapValue).fields;if(o.length===0)e.push(r);else for(const l of o)e.push(r.child(l))}else e.push(r)})),new Zi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,n,i,r,o,l,c){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new ci(e,0,Be.min(),Be.min(),Be.min(),Oi.empty(),0)}static newFoundDocument(e,n,i,r){return new ci(e,1,n,Be.min(),i,r,0)}static newNoDocument(e,n){return new ci(e,2,n,Be.min(),Be.min(),Oi.empty(),0)}static newUnknownDocument(e,n){return new ci(e,3,n,Be.min(),Be.min(),Oi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ci&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ci(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,n){this.position=e,this.inclusive=n}}function tA(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],l=t.position[r];if(o.field.isKeyField()?i=De.comparator(De.fromName(l.referenceValue),n.key):i=Eu(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function nA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!us(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,n="asc"){this.field=e,this.dir=n}}function M3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{}class Cn extends LN{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new V3(e,n,i):n==="array-contains"?new U3(e,i):n==="in"?new F3(e,i):n==="not-in"?new B3(e,i):n==="array-contains-any"?new z3(e,i):new Cn(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new L3(e,i):new O3(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Eu(n,this.value)):n!==null&&Qo(this.value)===Qo(n)&&this.matchesComparison(Eu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zr extends LN{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new zr(e,n)}matches(e){return ON(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function ON(t){return t.op==="and"}function UN(t){return k3(t)&&ON(t)}function k3(t){for(const e of t.filters)if(e instanceof zr)return!1;return!0}function b0(t){if(t instanceof Cn)return t.field.canonicalString()+t.op.toString()+Su(t.value);if(UN(t))return t.filters.map((e=>b0(e))).join(",");{const e=t.filters.map((n=>b0(n))).join(",");return`${t.op}(${e})`}}function FN(t,e){return t instanceof Cn?(function(i,r){return r instanceof Cn&&i.op===r.op&&i.field.isEqual(r.field)&&us(i.value,r.value)})(t,e):t instanceof zr?(function(i,r){return r instanceof zr&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((o,l,c)=>o&&FN(l,r.filters[c])),!0):!1})(t,e):void Fe(19439)}function BN(t){return t instanceof Cn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Su(n.value)}`})(t):t instanceof zr?(function(n){return n.op.toString()+" {"+n.getFilters().map(BN).join(" ,")+"}"})(t):"Filter"}class V3 extends Cn{constructor(e,n,i){super(e,n,i),this.key=De.fromName(i.referenceValue)}matches(e){const n=De.comparator(e.key,this.key);return this.matchesComparison(n)}}class L3 extends Cn{constructor(e,n){super(e,"in",n),this.keys=zN("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class O3 extends Cn{constructor(e,n){super(e,"not-in",n),this.keys=zN("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function zN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((i=>De.fromName(i.referenceValue)))}class U3 extends Cn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return K_(n)&&Ld(n.arrayValue,this.value)}}class F3 extends Cn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ld(this.value.arrayValue,n)}}class B3 extends Cn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ld(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ld(this.value.arrayValue,n)}}class z3 extends Cn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!K_(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Ld(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e,n=null,i=[],r=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=l,this.endAt=c,this.Pe=null}}function iA(t,e=null,n=[],i=[],r=null,o=null,l=null){return new q3(t,e,n,i,r,o,l)}function Y_(t){const e=He(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>b0(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),Fm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Su(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Su(i))).join(",")),e.Pe=n}return e.Pe}function J_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!M3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!FN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!nA(t.startAt,e.startAt)&&nA(t.endAt,e.endAt)}function w0(t){return De.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,n=null,i=[],r=[],o=null,l="F",c=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=d,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function H3(t,e,n,i,r,o,l,c){return new rf(t,e,n,i,r,o,l,c)}function zm(t){return new rf(t)}function rA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function qN(t){return t.collectionGroup!==null}function dd(t){const e=He(t);if(e.Te===null){e.Te=[];const n=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Vn(ti.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((f=>{f.isInequality()&&(c=c.add(f.field))}))})),c})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Yp(o,i))})),n.has(ti.keyField().canonicalString())||e.Te.push(new Yp(ti.keyField(),i))}return e.Te}function is(t){const e=He(t);return e.Ie||(e.Ie=G3(e,dd(t))),e.Ie}function G3(t,e){if(t.limitType==="F")return iA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((r=>{const o=r.dir==="desc"?"asc":"desc";return new Yp(r.field,o)}));const n=t.endAt?new Kp(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Kp(t.startAt.position,t.startAt.inclusive):null;return iA(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function x0(t,e){const n=t.filters.concat([e]);return new rf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function A0(t,e,n){return new rf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function qm(t,e){return J_(is(t),is(e))&&t.limitType===e.limitType}function HN(t){return`${Y_(is(t))}|lt:${t.limitType}`}function Xl(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((r=>BN(r))).join(", ")}]`),Fm(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((r=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(r))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((r=>Su(r))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((r=>Su(r))).join(",")),`Target(${i})`})(is(t))}; limitType=${t.limitType})`}function Hm(t,e){return e.isFoundDocument()&&(function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):De.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(t,e)&&(function(i,r){for(const o of dd(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0})(t,e)&&(function(i,r){return!(i.startAt&&!(function(l,c,d){const f=tA(l,c,d);return l.inclusive?f<=0:f<0})(i.startAt,dd(i),r)||i.endAt&&!(function(l,c,d){const f=tA(l,c,d);return l.inclusive?f>=0:f>0})(i.endAt,dd(i),r))})(t,e)}function j3(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function GN(t){return(e,n)=>{let i=!1;for(const r of dd(t)){const o=$3(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function $3(t,e,n){const i=t.field.isKeyField()?De.comparator(e.key,n.key):(function(o,l,c){const d=l.data.field(o),f=c.data.field(o);return d!==null&&f!==null?Eu(d,f):Fe(42886)})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Fe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){sa(this.inner,((n,i)=>{for(const[r,o]of i)e(r,o)}))}isEmpty(){return CN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K3=new nn(De.comparator);function qs(){return K3}const jN=new nn(De.comparator);function Xc(...t){let e=jN;for(const n of t)e=e.insert(n.key,n);return e}function $N(t){let e=jN;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function qa(){return fd()}function KN(){return fd()}function fd(){return new sl((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Y3=new nn(De.comparator),J3=new Vn(De.comparator);function ct(...t){let e=J3;for(const n of t)e=e.add(n);return e}const W3=new Vn(Ze);function Q3(){return W3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gp(e)?"-0":e}}function YN(t){return{integerValue:""+t}}function X3(t,e){return x3(e)?YN(e):W_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(){this._=void 0}}function Z3(t,e,n){return t instanceof Jp?(function(r,o){const l={fields:{[NN]:{stringValue:RN},[DN]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&$_(o)&&(o=Bm(o)),o&&(l.fields[PN]=o),{mapValue:l}})(n,e):t instanceof Od?WN(t,e):t instanceof Ud?QN(t,e):(function(r,o){const l=JN(r,o),c=sA(l)+sA(r.Ee);return S0(l)&&S0(r.Ee)?YN(c):W_(r.serializer,c)})(t,e)}function e5(t,e,n){return t instanceof Od?WN(t,e):t instanceof Ud?QN(t,e):n}function JN(t,e){return t instanceof Wp?(function(i){return S0(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}class Jp extends Gm{}class Od extends Gm{constructor(e){super(),this.elements=e}}function WN(t,e){const n=XN(e);for(const i of t.elements)n.some((r=>us(r,i)))||n.push(i);return{arrayValue:{values:n}}}class Ud extends Gm{constructor(e){super(),this.elements=e}}function QN(t,e){let n=XN(e);for(const i of t.elements)n=n.filter((r=>!us(r,i)));return{arrayValue:{values:n}}}class Wp extends Gm{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function sA(t){return yn(t.integerValue||t.doubleValue)}function XN(t){return K_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function t5(t,e){return t.field.isEqual(e.field)&&(function(i,r){return i instanceof Od&&r instanceof Od||i instanceof Ud&&r instanceof Ud?Tu(i.elements,r.elements,us):i instanceof Wp&&r instanceof Wp?us(i.Ee,r.Ee):i instanceof Jp&&r instanceof Jp})(t.transform,e.transform)}class n5{constructor(e,n){this.version=e,this.transformResults=n}}class Br{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Br}static exists(e){return new Br(void 0,e)}static updateTime(e){return new Br(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ep(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class jm{}function ZN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Q_(t.key,Br.none()):new sf(t.key,t.data,Br.none());{const n=t.data,i=Oi.empty();let r=new Vn(ti.comparator);for(let o of e.fields)if(!r.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),r=r.add(o)}return new oa(t.key,i,new Zi(r.toArray()),Br.none())}}function i5(t,e,n){t instanceof sf?(function(r,o,l){const c=r.value.clone(),d=aA(r.fieldTransforms,o,l.transformResults);c.setAll(d),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(t,e,n):t instanceof oa?(function(r,o,l){if(!Ep(r.precondition,o))return void o.convertToUnknownDocument(l.version);const c=aA(r.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(eP(r)),d.setAll(c),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(t,e,n):(function(r,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function hd(t,e,n,i){return t instanceof sf?(function(o,l,c,d){if(!Ep(o.precondition,l))return c;const f=o.value.clone(),p=lA(o.fieldTransforms,d,l);return f.setAll(p),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null})(t,e,n,i):t instanceof oa?(function(o,l,c,d){if(!Ep(o.precondition,l))return c;const f=lA(o.fieldTransforms,d,l),p=l.data;return p.setAll(eP(o)),p.setAll(f),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((v=>v.field)))})(t,e,n,i):(function(o,l,c){return Ep(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(t,e,n)}function r5(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=JN(i.transform,r||null);o!=null&&(n===null&&(n=Oi.empty()),n.set(i.field,o))}return n||null}function oA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Tu(i,r,((o,l)=>t5(o,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class sf extends jm{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class oa extends jm{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function eP(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function aA(t,e,n){const i=new Map;It(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let r=0;r<n.length;r++){const o=t[r],l=o.transform,c=e.data.field(o.field);i.set(o.field,e5(l,c,n[r]))}return i}function lA(t,e,n){const i=new Map;for(const r of t){const o=r.transform,l=n.data.field(r.field);i.set(r.field,Z3(o,l,e))}return i}class Q_ extends jm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class s5 extends jm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&i5(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=hd(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=hd(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=KN();return this.mutations.forEach((r=>{const o=e.get(r.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=n.has(r.key)?null:c;const d=ZN(l,c);d!==null&&i.set(r.key,d),l.isValidDocument()||l.convertToNoDocument(Be.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ct())}isEqual(e){return this.batchId===e.batchId&&Tu(this.mutations,e.mutations,((n,i)=>oA(n,i)))&&Tu(this.baseMutations,e.baseMutations,((n,i)=>oA(n,i)))}}class X_{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){It(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let r=(function(){return Y3})();const o=e.mutations;for(let l=0;l<o.length;l++)r=r.insert(o[l].key,i[l].version);return new X_(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var An,gt;function u5(t){switch(t){case ue.OK:return Fe(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return Fe(15467,{code:t})}}function tP(t){if(t===void 0)return zs("GRPC error has no .code"),ue.UNKNOWN;switch(t){case An.OK:return ue.OK;case An.CANCELLED:return ue.CANCELLED;case An.UNKNOWN:return ue.UNKNOWN;case An.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case An.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case An.INTERNAL:return ue.INTERNAL;case An.UNAVAILABLE:return ue.UNAVAILABLE;case An.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case An.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case An.NOT_FOUND:return ue.NOT_FOUND;case An.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case An.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case An.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case An.ABORTED:return ue.ABORTED;case An.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case An.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case An.DATA_LOSS:return ue.DATA_LOSS;default:return Fe(39323,{code:t})}}(gt=An||(An={}))[gt.OK=0]="OK",gt[gt.CANCELLED=1]="CANCELLED",gt[gt.UNKNOWN=2]="UNKNOWN",gt[gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt[gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt[gt.NOT_FOUND=5]="NOT_FOUND",gt[gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt[gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt[gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt[gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt[gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt[gt.ABORTED=10]="ABORTED",gt[gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt[gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt[gt.INTERNAL=13]="INTERNAL",gt[gt.UNAVAILABLE=14]="UNAVAILABLE",gt[gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c5=new Ho([4294967295,4294967295],0);function uA(t){const e=bN().encode(t),n=new mN;return n.update(e),new Uint8Array(n.digest())}function cA(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ho([n,i],0),new Ho([r,o],0)]}class Z_{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Zc(`Invalid padding: ${n}`);if(i<0)throw new Zc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Zc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Zc(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Ho.fromNumber(this.fe)}pe(e,n,i){let r=e.add(n.multiply(Ho.fromNumber(i)));return r.compare(c5)===1&&(r=new Ho([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=uA(e),[i,r]=cA(n);for(let o=0;o<this.hashCount;o++){const l=this.pe(i,r,o);if(!this.ye(l))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Z_(o,r,n);return i.forEach((c=>l.insert(c))),l}insert(e){if(this.fe===0)return;const n=uA(e),[i,r]=cA(n);for(let o=0;o<this.hashCount;o++){const l=this.pe(i,r,o);this.we(l)}}we(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Zc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,of.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new $m(Be.min(),r,new nn(Ze),qs(),ct())}}class of{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new of(i,n,ct(),ct(),ct())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,n,i,r){this.Se=e,this.removedTargetIds=n,this.key=i,this.be=r}}class nP{constructor(e,n){this.targetId=e,this.De=n}}class iP{constructor(e,n,i=ni.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class dA{constructor(){this.ve=0,this.Ce=fA(),this.Fe=ni.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ct(),n=ct(),i=ct();return this.Ce.forEach(((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Fe(38017,{changeType:o})}})),new of(this.Fe,this.Me,e,n,i)}ke(){this.xe=!1,this.Ce=fA()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,It(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class d5{constructor(e){this.We=e,this.Ge=new Map,this.ze=qs(),this.je=Hh(),this.Je=Hh(),this.He=new nn(Ze)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,(n=>{const i=this.tt(n);switch(e.state){case 0:this.nt(n)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),i.Be(e.resumeToken));break;default:Fe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach(((i,r)=>{this.nt(r)&&n(r)}))}it(e){const n=e.targetId,i=e.De.count,r=this.st(n);if(r){const o=r.target;if(w0(o))if(i===0){const l=new De(o.path);this.Xe(n,l,ci.newNoDocument(l,Be.min()))}else It(i===1,20013,{expectedCount:i});else{const l=this.ot(n);if(l!==i){const c=this._t(e),d=c?this.ut(c,e,l):1;if(d!==0){this.rt(n);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,f)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let l,c;try{l=Wo(i).toUint8Array()}catch(d){if(d instanceof IN)return Ko("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new Z_(l,r,o)}catch(d){return Ko(d instanceof Zc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.fe===0?null:c}ut(e,n,i){return n.De.count===i-this.ht(e,n.targetId)?0:2}ht(e,n){const i=this.We.getRemoteKeysForTarget(n);let r=0;return i.forEach((o=>{const l=this.We.lt(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Xe(n,o,null),r++)})),r}Pt(e){const n=new Map;this.Ge.forEach(((o,l)=>{const c=this.st(l);if(c){if(o.current&&w0(c.target)){const d=new De(c.target.path);this.Tt(d).has(l)||this.It(l,d)||this.Xe(l,d,ci.newNoDocument(d,e))}o.Ne&&(n.set(l,o.Le()),o.ke())}}));let i=ct();this.Je.forEach(((o,l)=>{let c=!0;l.forEachWhile((d=>{const f=this.st(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(i=i.add(o))})),this.ze.forEach(((o,l)=>l.setReadTime(e)));const r=new $m(e,n,this.He,this.ze,i);return this.ze=qs(),this.je=Hh(),this.Je=Hh(),this.He=new nn(Ze),r}Ze(e,n){if(!this.nt(e))return;const i=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,i),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,i){if(!this.nt(e))return;const r=this.tt(e);this.It(e,n)?r.qe(n,1):r.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),i&&(this.ze=this.ze.insert(n,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new dA,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Vn(Ze),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Vn(Ze),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||Se("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new dA),this.We.getRemoteKeysForTarget(e).forEach((n=>{this.Xe(e,n,null)}))}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Hh(){return new nn(De.comparator)}function fA(){return new nn(De.comparator)}const f5={asc:"ASCENDING",desc:"DESCENDING"},h5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},p5={and:"AND",or:"OR"};class m5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function C0(t,e){return t.useProto3Json||Fm(e)?e:{value:e}}function Qp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function g5(t,e){return Qp(t,e.toTimestamp())}function rs(t){return It(!!t,49232),Be.fromTimestamp((function(n){const i=Jo(n);return new Yt(i.seconds,i.nanos)})(t))}function eT(t,e){return I0(t,e).canonicalString()}function I0(t,e){const n=(function(r){return new Bt(["projects",r.projectId,"databases",r.database])})(t).child("documents");return e===void 0?n:n.child(e)}function sP(t){const e=Bt.fromString(t);return It(cP(e),10190,{key:e.toString()}),e}function R0(t,e){return eT(t.databaseId,e.path)}function Vv(t,e){const n=sP(e);if(n.get(1)!==t.databaseId.projectId)throw new _e(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new _e(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new De(aP(n))}function oP(t,e){return eT(t.databaseId,e)}function y5(t){const e=sP(t);return e.length===4?Bt.emptyPath():aP(e)}function N0(t){return new Bt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function aP(t){return It(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function hA(t,e,n){return{name:R0(t,e),fields:n.value.mapValue.fields}}function v5(t,e){let n;if("targetChange"in e){e.targetChange;const i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Fe(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=(function(f,p){return f.useProto3Json?(It(p===void 0||typeof p=="string",58123),ni.fromBase64String(p||"")):(It(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),ni.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(f){const p=f.code===void 0?ue.UNKNOWN:tP(f.code);return new _e(p,f.message||"")})(l);n=new iP(i,r,o,c||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Vv(t,i.document.name),o=rs(i.document.updateTime),l=i.document.createTime?rs(i.document.createTime):Be.min(),c=new Oi({mapValue:{fields:i.document.fields}}),d=ci.newFoundDocument(r,o,l,c),f=i.targetIds||[],p=i.removedTargetIds||[];n=new Sp(f,p,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Vv(t,i.document),o=i.readTime?rs(i.readTime):Be.min(),l=ci.newNoDocument(r,o),c=i.removedTargetIds||[];n=new Sp([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Vv(t,i.document),o=i.removedTargetIds||[];n=new Sp([],o,r,null)}else{if(!("filter"in e))return Fe(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,l=new l5(r,o),c=i.targetId;n=new nP(c,l)}}return n}function _5(t,e){let n;if(e instanceof sf)n={update:hA(t,e.key,e.value)};else if(e instanceof Q_)n={delete:R0(t,e.key)};else if(e instanceof oa)n={update:hA(t,e.key,e.data),updateMask:I5(e.fieldMask)};else{if(!(e instanceof s5))return Fe(16599,{Rt:e.type});n={verify:R0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(o,l){const c=l.transform;if(c instanceof Jp)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Od)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ud)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Wp)return{fieldPath:l.field.canonicalString(),increment:c.Ee};throw Fe(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(r,o){return o.updateTime!==void 0?{updateTime:g5(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Fe(27497)})(t,e.precondition)),n}function T5(t,e){return t&&t.length>0?(It(e!==void 0,14353),t.map((n=>(function(r,o){let l=r.updateTime?rs(r.updateTime):rs(o);return l.isEqual(Be.min())&&(l=rs(o)),new n5(l,r.transformResults||[])})(n,e)))):[]}function E5(t,e){return{documents:[oP(t,e.path)]}}function S5(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=oP(t,r);const o=(function(f){if(f.length!==0)return uP(zr.create(f,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const l=(function(f){if(f.length!==0)return f.map((p=>(function(T){return{field:Zl(T.field),direction:x5(T.dir)}})(p)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const c=C0(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{Vt:n,parent:r}}function b5(t){let e=y5(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){It(i===1,65062);const p=n.from[0];p.allDescendants?r=p.collectionId:e=e.child(p.collectionId)}let o=[];n.where&&(o=(function(v){const T=lP(v);return T instanceof zr&&UN(T)?T.getFilters():[T]})(n.where));let l=[];n.orderBy&&(l=(function(v){return v.map((T=>(function(C){return new Yp(eu(C.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(T)))})(n.orderBy));let c=null;n.limit&&(c=(function(v){let T;return T=typeof v=="object"?v.value:v,Fm(T)?null:T})(n.limit));let d=null;n.startAt&&(d=(function(v){const T=!!v.before,b=v.values||[];return new Kp(b,T)})(n.startAt));let f=null;return n.endAt&&(f=(function(v){const T=!v.before,b=v.values||[];return new Kp(b,T)})(n.endAt)),H3(e,r,l,o,c,"F",d,f)}function w5(t,e){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fe(28987,{purpose:r})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function lP(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=eu(n.unaryFilter.field);return Cn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=eu(n.unaryFilter.field);return Cn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=eu(n.unaryFilter.field);return Cn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=eu(n.unaryFilter.field);return Cn.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Fe(61313);default:return Fe(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Cn.create(eu(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Fe(58110);default:return Fe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return zr.create(n.compositeFilter.filters.map((i=>lP(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Fe(1026)}})(n.compositeFilter.op))})(t):Fe(30097,{filter:t})}function x5(t){return f5[t]}function A5(t){return h5[t]}function C5(t){return p5[t]}function Zl(t){return{fieldPath:t.canonicalString()}}function eu(t){return ti.fromServerFormat(t.fieldPath)}function uP(t){return t instanceof Cn?(function(n){if(n.op==="=="){if(eA(n.value))return{unaryFilter:{field:Zl(n.field),op:"IS_NAN"}};if(Zx(n.value))return{unaryFilter:{field:Zl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(eA(n.value))return{unaryFilter:{field:Zl(n.field),op:"IS_NOT_NAN"}};if(Zx(n.value))return{unaryFilter:{field:Zl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zl(n.field),op:A5(n.op),value:n.value}}})(t):t instanceof zr?(function(n){const i=n.getFilters().map((r=>uP(r)));return i.length===1?i[0]:{compositeFilter:{op:C5(n.op),filters:i}}})(t):Fe(54877,{filter:t})}function I5(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function cP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n,i,r,o=Be.min(),l=Be.min(),c=ni.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new Fo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Fo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(e){this.gt=e}}function N5(t){const e=b5({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?A0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(){this.Dn=new D5}addToCollectionParentIndex(e,n){return this.Dn.add(n),de.resolve()}getCollectionParents(e,n){return de.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return de.resolve()}deleteFieldIndex(e,n){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,n){return de.resolve()}getDocumentsMatchingTarget(e,n){return de.resolve(null)}getIndexType(e,n){return de.resolve(0)}getFieldIndexes(e,n){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,n){return de.resolve(Yo.min())}getMinOffsetFromCollectionGroup(e,n){return de.resolve(Yo.min())}updateCollectionGroup(e,n,i){return de.resolve()}updateIndexEntries(e,n){return de.resolve()}}class D5{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Vn(Bt.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Vn(Bt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dP=41943040;class Li{static withCacheSize(e){return new Li(e,Li.DEFAULT_COLLECTION_PERCENTILE,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Li.DEFAULT_COLLECTION_PERCENTILE=10,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Li.DEFAULT=new Li(dP,Li.DEFAULT_COLLECTION_PERCENTILE,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Li.DISABLED=new Li(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new bu(0)}static ur(){return new bu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA="LruGarbageCollector",M5=1048576;function gA([t,e],[n,i]){const r=Ze(t,n);return r===0?Ze(e,i):r}class k5{constructor(e){this.Tr=e,this.buffer=new Vn(gA),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();gA(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class V5{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Se(mA,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Vu(n)?Se(mA,"Ignoring IndexedDB error during garbage collection: ",n):await ku(n)}await this.Rr(3e5)}))}}class L5{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return de.resolve(Um.ue);const i=new k5(n);return this.Vr.forEachTarget(e,(r=>i.Er(r.sequenceNumber))).next((()=>this.Vr.gr(e,(r=>i.Er(r))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Se("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(pA)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Se("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pA):this.pr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let i,r,o,l,c,d,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(Se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),r=this.params.maximumSequenceNumbersToCollect):r=v,l=Date.now(),this.nthSequenceNumber(e,r)))).next((v=>(i=v,c=Date.now(),this.removeTargets(e,i,n)))).next((v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(e,i)))).next((v=>(f=Date.now(),Ql()<=ut.DEBUG&&Se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-p}ms
	Determined least recently used ${r} in `+(c-l)+`ms
	Removed ${o} targets in `+(d-c)+`ms
	Removed ${v} documents in `+(f-d)+`ms
Total Duration: ${f-p}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:v}))))}}function O5(t,e){return new L5(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(){this.changes=new sl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ci.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?de.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,n)))).next((r=>(i!==null&&hd(i.mutation,r,Zi.empty(),Yt.now()),r)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,ct()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=ct()){const r=qa();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,i).next((o=>{let l=Xc();return o.forEach(((c,d)=>{l=l.insert(c,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const i=qa();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,ct())))}populateOverlays(e,n,i){const r=[];return i.forEach((o=>{n.has(o)||r.push(o)})),this.documentOverlayCache.getOverlays(e,r).next((o=>{o.forEach(((l,c)=>{n.set(l,c)}))}))}computeViews(e,n,i,r){let o=qs();const l=fd(),c=(function(){return fd()})();return n.forEach(((d,f)=>{const p=i.get(f.key);r.has(f.key)&&(p===void 0||p.mutation instanceof oa)?o=o.insert(f.key,f):p!==void 0?(l.set(f.key,p.mutation.getFieldMask()),hd(p.mutation,f,p.mutation.getFieldMask(),Yt.now())):l.set(f.key,Zi.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((f,p)=>l.set(f,p))),n.forEach(((f,p)=>{var v;return c.set(f,new F5(p,(v=l.get(f))!==null&&v!==void 0?v:null))})),c)))}recalculateAndSaveOverlays(e,n){const i=fd();let r=new nn(((l,c)=>l-c)),o=ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const c of l)c.keys().forEach((d=>{const f=n.get(d);if(f===null)return;let p=i.get(d)||Zi.empty();p=c.applyToLocalView(f,p),i.set(d,p);const v=(r.get(c.batchId)||ct()).add(d);r=r.insert(c.batchId,v)}))})).next((()=>{const l=[],c=r.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),f=d.key,p=d.value,v=KN();p.forEach((T=>{if(!o.has(T)){const b=ZN(n.get(T),i.get(T));b!==null&&v.set(T,b),o=o.add(T)}})),l.push(this.documentOverlayCache.saveOverlays(e,f,v))}return de.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,r){return(function(l){return De.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):qN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next((o=>{const l=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):de.resolve(qa());let c=Md,d=o;return l.next((f=>de.forEach(f,((p,v)=>(c<v.largestBatchId&&(c=v.largestBatchId),o.get(p)?de.resolve():this.remoteDocumentCache.getEntry(e,p).next((T=>{d=d.insert(p,T)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,d,f,ct()))).next((p=>({batchId:c,changes:$N(p)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new De(n)).next((i=>{let r=Xc();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let l=Xc();return this.indexManager.getCollectionParents(e,o).next((c=>de.forEach(c,(d=>{const f=(function(v,T){return new rf(T,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next((p=>{p.forEach(((v,T)=>{l=l.insert(v,T)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r)))).next((l=>{o.forEach(((d,f)=>{const p=f.getKey();l.get(p)===null&&(l=l.insert(p,ci.newInvalidDocument(p)))}));let c=Xc();return l.forEach(((d,f)=>{const p=o.get(d);p!==void 0&&hd(p.mutation,f,Zi.empty(),Yt.now()),Hm(n,f)&&(c=c.insert(d,f))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return de.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:rs(r.createTime)}})(n)),de.resolve()}getNamedQuery(e,n){return de.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(r){return{name:r.name,query:N5(r.bundledQuery),readTime:rs(r.readTime)}})(n)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(){this.overlays=new nn(De.comparator),this.kr=new Map}getOverlay(e,n){return de.resolve(this.overlays.get(n))}getOverlays(e,n){const i=qa();return de.forEach(n,(r=>this.getOverlay(e,r).next((o=>{o!==null&&i.set(r,o)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((r,o)=>{this.wt(e,n,o)})),de.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.kr.get(i);return r!==void 0&&(r.forEach((o=>this.overlays=this.overlays.remove(o))),this.kr.delete(i)),de.resolve()}getOverlaysForCollection(e,n,i){const r=qa(),o=n.length+1,l=new De(n.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const d=c.getNext().value,f=d.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>i&&r.set(d.getKey(),d)}return de.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new nn(((f,p)=>f-p));const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let p=o.get(f.largestBatchId);p===null&&(p=qa(),o=o.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const c=qa(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((f,p)=>c.set(f,p))),!(c.size()>=r)););return de.resolve(c)}wt(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.kr.get(r.largestBatchId).delete(i.key);this.kr.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new a5(n,i));let o=this.kr.get(n);o===void 0&&(o=ct(),this.kr.set(n,o)),this.kr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(){this.sessionToken=ni.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(){this.qr=new Vn(jn.Qr),this.$r=new Vn(jn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const i=new jn(e,n);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new jn(e,n))}Gr(e,n){e.forEach((i=>this.removeReference(i,n)))}zr(e){const n=new De(new Bt([])),i=new jn(n,e),r=new jn(n,e+1),o=[];return this.$r.forEachInRange([i,r],(l=>{this.Wr(l),o.push(l.key)})),o}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new De(new Bt([])),i=new jn(n,e),r=new jn(n,e+1);let o=ct();return this.$r.forEachInRange([i,r],(l=>{o=o.add(l.key)})),o}containsKey(e){const n=new jn(e,0),i=this.qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class jn{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return De.comparator(e.key,n.key)||Ze(e.Hr,n.Hr)}static Ur(e,n){return Ze(e.Hr,n.Hr)||De.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Vn(jn.Qr)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new o5(o,n,i,r);this.mutationQueue.push(l);for(const c of r)this.Yr=this.Yr.add(new jn(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return de.resolve(l)}lookupMutationBatch(e,n){return de.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.Xr(i),o=r<0?0:r;return de.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?j_:this.er-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new jn(n,0),r=new jn(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([i,r],(l=>{const c=this.Zr(l.Hr);o.push(c)})),de.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Vn(Ze);return n.forEach((r=>{const o=new jn(r,0),l=new jn(r,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,l],(c=>{i=i.add(c.Hr)}))})),de.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;De.isDocumentKey(o)||(o=o.child(""));const l=new jn(new De(o),0);let c=new Vn(Ze);return this.Yr.forEachWhile((d=>{const f=d.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(c=c.add(d.Hr)),!0)}),l),de.resolve(this.ei(c))}ei(e){const n=[];return e.forEach((i=>{const r=this.Zr(i);r!==null&&n.push(r)})),n}removeMutationBatch(e,n){It(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return de.forEach(n.mutations,(r=>{const o=new jn(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,n){const i=new jn(n,0),r=this.Yr.firstAfterOrEqual(i);return de.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(e){this.ni=e,this.docs=(function(){return new nn(De.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,l=this.ni(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return de.resolve(i?i.document.mutableCopy():ci.newInvalidDocument(n))}getEntries(e,n){let i=qs();return n.forEach((r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():ci.newInvalidDocument(r))})),de.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=qs();const l=n.path,c=new De(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:f,value:{document:p}}=d.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||E3(T3(p),i)<=0||(r.has(p.key)||Hm(n,p))&&(o=o.insert(p.key,p.mutableCopy()))}return de.resolve(o)}getAllFromCollectionGroup(e,n,i,r){Fe(9500)}ri(e,n){return de.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new $5(this)}getSize(e){return de.resolve(this.size)}}class $5 extends U5{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?n.push(this.Or.addEntry(e,r)):this.Or.removeEntry(i)})),de.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e){this.persistence=e,this.ii=new sl((n=>Y_(n)),J_),this.lastRemoteSnapshotVersion=Be.min(),this.highestTargetId=0,this.si=0,this.oi=new tT,this.targetCount=0,this._i=bu.ar()}forEachTarget(e,n){return this.ii.forEach(((i,r)=>n(r))),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.si&&(this.si=n),de.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new bu(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,de.resolve()}updateTargetData(e,n){return this.hr(n),de.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.ii.forEach(((l,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.ii.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)})),de.waitFor(o).next((()=>r))}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,n){const i=this.ii.get(n)||null;return de.resolve(i)}addMatchingKeys(e,n,i){return this.oi.Kr(n,i),de.resolve()}removeMatchingKeys(e,n,i){this.oi.Gr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach((l=>{o.push(r.markPotentiallyOrphaned(e,l))})),de.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),de.resolve()}getMatchingKeysForTargetId(e,n){const i=this.oi.Jr(n);return de.resolve(i)}containsKey(e,n){return de.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e,n){this.ai={},this.overlays={},this.ui=new Um(0),this.ci=!1,this.ci=!0,this.li=new H5,this.referenceDelegate=e(this),this.hi=new K5(this),this.indexManager=new P5,this.remoteDocumentCache=(function(r){return new j5(r)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new R5(n),this.Ti=new z5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new q5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ai[e.toKey()];return i||(i=new G5(n,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,i){Se("MemoryPersistence","Starting transaction:",e);const r=new Y5(this.ui.next());return this.referenceDelegate.Ii(),i(r).next((o=>this.referenceDelegate.di(r).next((()=>o)))).toPromise().then((o=>(r.raiseOnCommittedEvent(),o)))}Ei(e,n){return de.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,n))))}}class Y5 extends b3{constructor(e){super(),this.currentSequenceNumber=e}}class nT{constructor(e){this.persistence=e,this.Ai=new tT,this.Ri=null}static Vi(e){return new nT(e)}get mi(){if(this.Ri)return this.Ri;throw Fe(60996)}addReference(e,n,i){return this.Ai.addReference(i,n),this.mi.delete(i.toString()),de.resolve()}removeReference(e,n,i){return this.Ai.removeReference(i,n),this.mi.add(i.toString()),de.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),de.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach((r=>this.mi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((r=>{r.forEach((o=>this.mi.add(o.toString())))})).next((()=>i.removeTargetData(e,n)))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.mi,(i=>{const r=De.fromPath(i);return this.fi(e,r).next((o=>{o||n.removeEntry(r,Be.min())}))})).next((()=>(this.Ri=null,n.apply(e))))}updateLimboDocument(e,n){return this.fi(e,n).next((i=>{i?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(e){return 0}fi(e,n){return de.or([()=>de.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Xp{constructor(e,n){this.persistence=e,this.gi=new sl((i=>A3(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=O5(this,n)}static Vi(e,n){return new Xp(e,n)}Ii(){}di(e){return de.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((r=>i+r))))}yr(e){let n=0;return this.gr(e,(i=>{n++})).next((()=>n))}gr(e,n){return de.forEach(this.gi,((i,r)=>this.Sr(e,i,r).next((o=>o?de.resolve():n(r)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ri(e,(l=>this.Sr(e,l,n).next((c=>{c||(i++,o.removeEntry(l,Be.min()))})))).next((()=>o.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),de.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),de.resolve()}removeReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),de.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=_p(e.data.value)),n}Sr(e,n,i){return de.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.gi.get(n);return de.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Is=i,this.ds=r}static Es(e,n){let i=ct(),r=ct();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new iT(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return IL()?8:w3(hi())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.ps(e,n).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ys(e,n,r,i).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new J5;return this.ws(e,n,l).next((c=>{if(o.result=c,this.Rs)return this.Ss(e,n,l,c.size)}))})).next((()=>o.result))}Ss(e,n,i,r){return i.documentReadCount<this.Vs?(Ql()<=ut.DEBUG&&Se("QueryEngine","SDK will not create cache indexes for query:",Xl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),de.resolve()):(Ql()<=ut.DEBUG&&Se("QueryEngine","Query:",Xl(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.fs*r?(Ql()<=ut.DEBUG&&Se("QueryEngine","The SDK decides to create cache indexes for query:",Xl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,is(n))):de.resolve())}ps(e,n){if(rA(n))return de.resolve(null);let i=is(n);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=A0(n,null,"F"),i=is(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((o=>{const l=ct(...o);return this.gs.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,i).next((d=>{const f=this.bs(n,c);return this.Ds(n,f,l,d.readTime)?this.ps(e,A0(n,null,"F")):this.vs(e,f,n,d)}))))})))))}ys(e,n,i,r){return rA(n)||r.isEqual(Be.min())?de.resolve(null):this.gs.getDocuments(e,i).next((o=>{const l=this.bs(n,o);return this.Ds(n,l,i,r)?de.resolve(null):(Ql()<=ut.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Xl(n)),this.vs(e,l,n,_3(r,Md)).next((c=>c)))}))}bs(e,n){let i=new Vn(GN(e));return n.forEach(((r,o)=>{Hm(e,o)&&(i=i.add(o))})),i}Ds(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}ws(e,n,i){return Ql()<=ut.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",Xl(n)),this.gs.getDocumentsMatchingQuery(e,n,Yo.min(),i)}vs(e,n,i,r){return this.gs.getDocumentsMatchingQuery(e,i,r).next((o=>(n.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="LocalStore",Q5=3e8;class X5{constructor(e,n,i,r){this.persistence=e,this.Cs=n,this.serializer=r,this.Fs=new nn(Ze),this.Ms=new sl((o=>Y_(o)),J_),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new B5(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Fs)))}}function Z5(t,e,n,i){return new X5(t,e,n,i)}async function hP(t,e){const n=He(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next((o=>(r=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(i)))).next((o=>{const l=[],c=[];let d=ct();for(const f of r){l.push(f.batchId);for(const p of f.mutations)d=d.add(p.key)}for(const f of o){c.push(f.batchId);for(const p of f.mutations)d=d.add(p.key)}return n.localDocuments.getDocuments(i,d).next((f=>({Bs:f,removedBatchIds:l,addedBatchIds:c})))}))}))}function e6(t,e){const n=He(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(c,d,f,p){const v=f.batch,T=v.keys();let b=de.resolve();return T.forEach((C=>{b=b.next((()=>p.getEntry(d,C))).next((N=>{const M=f.docVersions.get(C);It(M!==null,48541),N.version.compareTo(M)<0&&(v.applyToRemoteDocument(N,f),N.isValidDocument()&&(N.setReadTime(f.commitVersion),p.addEntry(N)))}))})),b.next((()=>c.mutationQueue.removeMutationBatch(d,v)))})(n,i,e,o).next((()=>o.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(c){let d=ct();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(d=d.add(c.batch.mutations[f].key));return d})(e)))).next((()=>n.localDocuments.getDocuments(i,r)))}))}function pP(t){const e=He(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.hi.getLastRemoteSnapshotVersion(n)))}function t6(t,e){const n=He(t),i=e.snapshotVersion;let r=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=n.Os.newChangeBuffer({trackRemovals:!0});r=n.Fs;const c=[];e.targetChanges.forEach(((p,v)=>{const T=r.get(v);if(!T)return;c.push(n.hi.removeMatchingKeys(o,p.removedDocuments,v).next((()=>n.hi.addMatchingKeys(o,p.addedDocuments,v))));let b=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?b=b.withResumeToken(ni.EMPTY_BYTE_STRING,Be.min()).withLastLimboFreeSnapshotVersion(Be.min()):p.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(p.resumeToken,i)),r=r.insert(v,b),(function(N,M,V){return N.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=Q5?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(T,b,p)&&c.push(n.hi.updateTargetData(o,b))}));let d=qs(),f=ct();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,p))})),c.push(n6(o,l,e.documentUpdates).next((p=>{d=p.Ls,f=p.ks}))),!i.isEqual(Be.min())){const p=n.hi.getLastRemoteSnapshotVersion(o).next((v=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,i)));c.push(p)}return de.waitFor(c).next((()=>l.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,d,f))).next((()=>d))})).then((o=>(n.Fs=r,o)))}function n6(t,e,n){let i=ct(),r=ct();return n.forEach((o=>i=i.add(o))),e.getEntries(t,i).next((o=>{let l=qs();return n.forEach(((c,d)=>{const f=o.get(c);d.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(c)),d.isNoDocument()&&d.version.isEqual(Be.min())?(e.removeEntry(c,d.readTime),l=l.insert(c,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),l=l.insert(c,d)):Se(rT,"Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",d.version)})),{Ls:l,ks:r}}))}function i6(t,e){const n=He(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=j_),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function r6(t,e){const n=He(t);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return n.hi.getTargetData(i,e).next((o=>o?(r=o,de.resolve(r)):n.hi.allocateTargetId(i).next((l=>(r=new Fo(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.hi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=n.Fs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(i.targetId,i),n.Ms.set(e,i.targetId)),i}))}async function P0(t,e,n){const i=He(t),r=i.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,(l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!Vu(l))throw l;Se(rT,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(r.target)}function yA(t,e,n){const i=He(t);let r=Be.min(),o=ct();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,f,p){const v=He(d),T=v.Ms.get(p);return T!==void 0?de.resolve(v.Fs.get(T)):v.hi.getTargetData(f,p)})(i,l,is(e)).next((c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(l,c.targetId).next((d=>{o=d}))})).next((()=>i.Cs.getDocumentsMatchingQuery(l,e,n?r:Be.min(),n?o:ct()))).next((c=>(s6(i,j3(e),c),{documents:c,qs:o})))))}function s6(t,e,n){let i=t.xs.get(e)||Be.min();n.forEach(((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),t.xs.set(e,i)}class vA{constructor(){this.activeTargetIds=Q3()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class o6{constructor(){this.Fo=new vA,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,i){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new vA,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="ConnectivityMonitor";class TA{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Se(_A,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Se(_A,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gh=null;function D0(){return Gh===null?Gh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Gh++,"0x"+Gh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="RestConnection",l6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class u6{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.Ko=this.databaseId.database===jp?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,n,i,r,o){const l=D0(),c=this.Go(e,n.toUriEncodedString());Se(Lv,`Sending RPC '${e}' ${l}:`,c,i);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(d,r,o);const{host:f}=new URL(c),p=js(f);return this.jo(e,c,d,i,p).then((v=>(Se(Lv,`Received RPC '${e}' ${l}: `,v),v)),(v=>{throw Ko(Lv,`RPC '${e}' ${l} failed with error: `,v,"url: ",c,"request:",i),v}))}Jo(e,n,i,r,o,l){return this.Wo(e,n,i,r,o)}zo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Mu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((r,o)=>e[o]=r)),i&&i.headers.forEach(((r,o)=>e[o]=r))}Go(e,n){const i=l6[e];return`${this.$o}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const si="WebChannelConnection";class d6 extends u6{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,i,r,o){const l=D0();return new Promise(((c,d)=>{const f=new gN;f.setWithCredentials(!0),f.listenOnce(yN.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case vp.NO_ERROR:const v=f.getResponseJson();Se(si,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),c(v);break;case vp.TIMEOUT:Se(si,`RPC '${e}' ${l} timed out`),d(new _e(ue.DEADLINE_EXCEEDED,"Request time out"));break;case vp.HTTP_ERROR:const T=f.getStatus();if(Se(si,`RPC '${e}' ${l} failed with status:`,T,"response text:",f.getResponseText()),T>0){let b=f.getResponseJson();Array.isArray(b)&&(b=b[0]);const C=b==null?void 0:b.error;if(C&&C.status&&C.message){const N=(function(V){const k=V.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(k)>=0?k:ue.UNKNOWN})(C.status);d(new _e(N,C.message))}else d(new _e(ue.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new _e(ue.UNAVAILABLE,"Connection failed."));break;default:Fe(9055,{c_:e,streamId:l,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{Se(si,`RPC '${e}' ${l} completed.`)}}));const p=JSON.stringify(r);Se(si,`RPC '${e}' ${l} sending request:`,r),f.send(n,"POST",p,i,15)}))}P_(e,n,i){const r=D0(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=TN(),c=_N(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.zo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const p=o.join("");Se(si,`Creating RPC '${e}' stream ${r}: ${p}`,d);const v=l.createWebChannel(p,d);this.T_(v);let T=!1,b=!1;const C=new c6({Ho:M=>{b?Se(si,`Not sending because RPC '${e}' stream ${r} is closed:`,M):(T||(Se(si,`Opening RPC '${e}' stream ${r} transport.`),v.open(),T=!0),Se(si,`RPC '${e}' stream ${r} sending:`,M),v.send(M))},Yo:()=>v.close()}),N=(M,V,k)=>{M.listen(V,(F=>{try{k(F)}catch(G){setTimeout((()=>{throw G}),0)}}))};return N(v,Qc.EventType.OPEN,(()=>{b||(Se(si,`RPC '${e}' stream ${r} transport opened.`),C.s_())})),N(v,Qc.EventType.CLOSE,(()=>{b||(b=!0,Se(si,`RPC '${e}' stream ${r} transport closed`),C.__(),this.I_(v))})),N(v,Qc.EventType.ERROR,(M=>{b||(b=!0,Ko(si,`RPC '${e}' stream ${r} transport errored. Name:`,M.name,"Message:",M.message),C.__(new _e(ue.UNAVAILABLE,"The operation could not be completed")))})),N(v,Qc.EventType.MESSAGE,(M=>{var V;if(!b){const k=M.data[0];It(!!k,16349);const F=k,G=(F==null?void 0:F.error)||((V=F[0])===null||V===void 0?void 0:V.error);if(G){Se(si,`RPC '${e}' stream ${r} received error:`,G);const K=G.status;let H=(function(P){const U=An[P];if(U!==void 0)return tP(U)})(K),R=G.message;H===void 0&&(H=ue.INTERNAL,R="Unknown error status: "+K+" with message "+G.message),b=!0,C.__(new _e(H,R)),v.close()}else Se(si,`RPC '${e}' stream ${r} received:`,k),C.a_(k)}})),N(c,vN.STAT_EVENT,(M=>{M.stat===_0.PROXY?Se(si,`RPC '${e}' stream ${r} detected buffering proxy`):M.stat===_0.NOPROXY&&Se(si,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{C.o_()}),0),C}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((n=>n===e))}}function Ov(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(t){return new m5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=i,this.E_=r,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),r=Math.max(0,n-i);r>0&&Se("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="PersistentStream";class gP{constructor(e,n,i,r,o,l,c,d){this.Fi=e,this.w_=i,this.S_=r,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new mP(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===ue.RESOURCE_EXHAUSTED?(zs(n.toString()),zs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.b_===n&&this.W_(i,r)}),(i=>{e((()=>{const r=new _e(ue.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(r)}))}))}W_(e,n){const i=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((r=>{i((()=>this.G_(r)))})),this.stream.onMessage((r=>{i((()=>++this.C_==1?this.j_(r):this.onNext(r)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return Se(EA,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget((()=>this.b_===e?n():(Se(EA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class f6 extends gP{constructor(e,n,i,r,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,l),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=v5(this.serializer,e),i=(function(o){if(!("targetChange"in o))return Be.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Be.min():l.readTime?rs(l.readTime):Be.min()})(e);return this.listener.J_(n,i)}H_(e){const n={};n.database=N0(this.serializer),n.addTarget=(function(o,l){let c;const d=l.target;if(c=w0(d)?{documents:E5(o,d)}:{query:S5(o,d).Vt},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=rP(o,l.resumeToken);const f=C0(o,l.expectedCount);f!==null&&(c.expectedCount=f)}else if(l.snapshotVersion.compareTo(Be.min())>0){c.readTime=Qp(o,l.snapshotVersion.toTimestamp());const f=C0(o,l.expectedCount);f!==null&&(c.expectedCount=f)}return c})(this.serializer,e);const i=w5(this.serializer,e);i&&(n.labels=i),this.k_(n)}Y_(e){const n={};n.database=N0(this.serializer),n.removeTarget=e,this.k_(n)}}class h6 extends gP{constructor(e,n,i,r,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,l),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return It(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,It(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){It(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=T5(e.writeResults,e.commitTime),i=rs(e.commitTime);return this.listener.ta(i,n)}na(){const e={};e.database=N0(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>_5(this.serializer,i)))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{}class m6 extends p6{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new _e(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Wo(e,I0(n,i),r,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _e(ue.UNKNOWN,o.toString())}))}Jo(e,n,i,r,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Jo(e,I0(n,i),r,l,c,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new _e(ue.UNKNOWN,l.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class g6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(zs(n),this._a=!1):Se("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el="RemoteStore";class y6{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo((l=>{i.enqueueAndForget((async()=>{ol(this)&&(Se(el,"Restarting streams for network reachability change."),await(async function(d){const f=He(d);f.Ia.add(4),await af(f),f.Aa.set("Unknown"),f.Ia.delete(4),await Ym(f)})(this))}))})),this.Aa=new g6(i,r)}}async function Ym(t){if(ol(t))for(const e of t.da)await e(!0)}async function af(t){for(const e of t.da)await e(!1)}function yP(t,e){const n=He(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),lT(n)?aT(n):Lu(n).x_()&&oT(n,e))}function sT(t,e){const n=He(t),i=Lu(n);n.Ta.delete(e),i.x_()&&vP(n,e),n.Ta.size===0&&(i.x_()?i.B_():ol(n)&&n.Aa.set("Unknown"))}function oT(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Be.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Lu(t).H_(e)}function vP(t,e){t.Ra.$e(e),Lu(t).Y_(e)}function aT(t){t.Ra=new d5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Lu(t).start(),t.Aa.aa()}function lT(t){return ol(t)&&!Lu(t).M_()&&t.Ta.size>0}function ol(t){return He(t).Ia.size===0}function _P(t){t.Ra=void 0}async function v6(t){t.Aa.set("Online")}async function _6(t){t.Ta.forEach(((e,n)=>{oT(t,e)}))}async function T6(t,e){_P(t),lT(t)?(t.Aa.la(e),aT(t)):t.Aa.set("Unknown")}async function E6(t,e,n){if(t.Aa.set("Online"),e instanceof iP&&e.state===2&&e.cause)try{await(async function(r,o){const l=o.cause;for(const c of o.targetIds)r.Ta.has(c)&&(await r.remoteSyncer.rejectListen(c,l),r.Ta.delete(c),r.Ra.removeTarget(c))})(t,e)}catch(i){Se(el,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Zp(t,i)}else if(e instanceof Sp?t.Ra.Ye(e):e instanceof nP?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Be.min()))try{const i=await pP(t.localStore);n.compareTo(i)>=0&&await(function(o,l){const c=o.Ra.Pt(l);return c.targetChanges.forEach(((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const p=o.Ta.get(f);p&&o.Ta.set(f,p.withResumeToken(d.resumeToken,l))}})),c.targetMismatches.forEach(((d,f)=>{const p=o.Ta.get(d);if(!p)return;o.Ta.set(d,p.withResumeToken(ni.EMPTY_BYTE_STRING,p.snapshotVersion)),vP(o,d);const v=new Fo(p.target,d,f,p.sequenceNumber);oT(o,v)})),o.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(i){Se(el,"Failed to raise snapshot:",i),await Zp(t,i)}}async function Zp(t,e,n){if(!Vu(e))throw e;t.Ia.add(1),await af(t),t.Aa.set("Offline"),n||(n=()=>pP(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Se(el,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Ym(t)}))}function TP(t,e){return e().catch((n=>Zp(t,n,e)))}async function Jm(t){const e=He(t),n=Xo(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:j_;for(;S6(e);)try{const r=await i6(e.localStore,i);if(r===null){e.Pa.length===0&&n.B_();break}i=r.batchId,b6(e,r)}catch(r){await Zp(e,r)}EP(e)&&SP(e)}function S6(t){return ol(t)&&t.Pa.length<10}function b6(t,e){t.Pa.push(e);const n=Xo(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function EP(t){return ol(t)&&!Xo(t).M_()&&t.Pa.length>0}function SP(t){Xo(t).start()}async function w6(t){Xo(t).na()}async function x6(t){const e=Xo(t);for(const n of t.Pa)e.X_(n.mutations)}async function A6(t,e,n){const i=t.Pa.shift(),r=X_.from(i,e,n);await TP(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await Jm(t)}async function C6(t,e){e&&Xo(t).Z_&&await(async function(i,r){if((function(l){return u5(l)&&l!==ue.ABORTED})(r.code)){const o=i.Pa.shift();Xo(i).N_(),await TP(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r))),await Jm(i)}})(t,e),EP(t)&&SP(t)}async function SA(t,e){const n=He(t);n.asyncQueue.verifyOperationInProgress(),Se(el,"RemoteStore received new credentials");const i=ol(n);n.Ia.add(3),await af(n),i&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Ym(n)}async function I6(t,e){const n=He(t);e?(n.Ia.delete(2),await Ym(n)):e||(n.Ia.add(2),await af(n),n.Aa.set("Unknown"))}function Lu(t){return t.Va||(t.Va=(function(n,i,r){const o=He(n);return o.ia(),new f6(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(t.datastore,t.asyncQueue,{Zo:v6.bind(null,t),e_:_6.bind(null,t),n_:T6.bind(null,t),J_:E6.bind(null,t)}),t.da.push((async e=>{e?(t.Va.N_(),lT(t)?aT(t):t.Aa.set("Unknown")):(await t.Va.stop(),_P(t))}))),t.Va}function Xo(t){return t.ma||(t.ma=(function(n,i,r){const o=He(n);return o.ia(),new h6(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:w6.bind(null,t),n_:C6.bind(null,t),ea:x6.bind(null,t),ta:A6.bind(null,t)}),t.da.push((async e=>{e?(t.ma.N_(),await Jm(t)):(await t.ma.stop(),t.Pa.length>0&&(Se(el,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Go,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const l=Date.now()+i,c=new uT(e,n,l,r,o);return c.start(i),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cT(t,e){if(zs("AsyncQueue",`${e}: ${t}`),Vu(t))return new _e(ue.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{static emptySet(e){return new fu(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||De.comparator(n.key,i.key):(n,i)=>De.comparator(n.key,i.key),this.keyedMap=Xc(),this.sortedSet=new nn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof fu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new fu;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(){this.fa=new nn(De.comparator)}track(e){const n=e.doc.key,i=this.fa.get(n);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(n,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(n):e.type===1&&i.type===2?this.fa=this.fa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Fe(63341,{At:e,ga:i}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal(((n,i)=>{e.push(i)})),e}}class wu{constructor(e,n,i,r,o,l,c,d,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const l=[];return n.forEach((c=>{l.push({type:0,doc:c})})),new wu(e,n,fu.emptySet(n),l,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class N6{constructor(){this.queries=wA(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,i){const r=He(n),o=r.queries;r.queries=wA(),o.forEach(((l,c)=>{for(const d of c.wa)d.onError(i)}))})(this,new _e(ue.ABORTED,"Firestore shutting down"))}}function wA(){return new sl((t=>HN(t)),qm)}async function bP(t,e){const n=He(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.Sa()&&e.ba()&&(i=2):(o=new R6,i=e.ba()?0:1);try{switch(i){case 0:o.ya=await n.onListen(r,!0);break;case 1:o.ya=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(l){const c=cT(l,`Initialization of query '${Xl(e.query)}' failed`);return void e.onError(c)}n.queries.set(r,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&dT(n)}async function wP(t,e){const n=He(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const l=o.wa.indexOf(e);l>=0&&(o.wa.splice(l,1),o.wa.length===0?r=e.ba()?0:1:!o.Sa()&&e.ba()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function P6(t,e){const n=He(t);let i=!1;for(const r of e){const o=r.query,l=n.queries.get(o);if(l){for(const c of l.wa)c.Ca(r)&&(i=!0);l.ya=r}}i&&dT(n)}function D6(t,e,n){const i=He(t),r=i.queries.get(e);if(r)for(const o of r.wa)o.onError(n);i.queries.delete(e)}function dT(t){t.Da.forEach((e=>{e.next()}))}var M0,xA;(xA=M0||(M0={})).Fa="default",xA.Cache="cache";class xP{constructor(e,n,i){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new wu(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const i=n!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=wu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==M0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e){this.key=e}}class CP{constructor(e){this.key=e}}class M6{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ct(),this.mutatedKeys=ct(),this.Xa=GN(e),this.eu=new fu(this.Xa)}get tu(){return this.Ha}nu(e,n){const i=n?n.ru:new bA,r=n?n.eu:this.eu;let o=n?n.mutatedKeys:this.mutatedKeys,l=r,c=!1;const d=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((p,v)=>{const T=r.get(p),b=Hm(this.query,v)?v:null,C=!!T&&this.mutatedKeys.has(T.key),N=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let M=!1;T&&b?T.data.isEqual(b.data)?C!==N&&(i.track({type:3,doc:b}),M=!0):this.iu(T,b)||(i.track({type:2,doc:b}),M=!0,(d&&this.Xa(b,d)>0||f&&this.Xa(b,f)<0)&&(c=!0)):!T&&b?(i.track({type:0,doc:b}),M=!0):T&&!b&&(i.track({type:1,doc:T}),M=!0,(d||f)&&(c=!0)),M&&(b?(l=l.add(b),o=N?o.add(p):o.delete(p)):(l=l.delete(p),o=o.delete(p)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const p=this.query.limitType==="F"?l.last():l.first();l=l.delete(p.key),o=o.delete(p.key),i.track({type:1,doc:p})}return{eu:l,ru:i,Ds:c,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const l=e.ru.pa();l.sort(((p,v)=>(function(b,C){const N=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fe(20277,{At:M})}};return N(b)-N(C)})(p.type,v.type)||this.Xa(p.doc,v.doc))),this.su(i),r=r!=null&&r;const c=n&&!r?this.ou():[],d=this.Za.size===0&&this.current&&!r?1:0,f=d!==this.Ya;return this.Ya=d,l.length!==0||f?{snapshot:new wu(this.query,e.eu,o,l,e.mutatedKeys,d===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new bA,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ct(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const n=[];return e.forEach((i=>{this.Za.has(i)||n.push(new CP(i))})),this.Za.forEach((i=>{e.has(i)||n.push(new AP(i))})),n}uu(e){this.Ha=e.qs,this.Za=ct();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return wu.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const fT="SyncEngine";class k6{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class V6{constructor(e){this.key=e,this.lu=!1}}class L6{constructor(e,n,i,r,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.hu={},this.Pu=new sl((c=>HN(c)),qm),this.Tu=new Map,this.Iu=new Set,this.du=new nn(De.comparator),this.Eu=new Map,this.Au=new tT,this.Ru={},this.Vu=new Map,this.mu=bu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function O6(t,e,n=!0){const i=MP(t);let r;const o=i.Pu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.cu()):r=await IP(i,e,n,!0),r}async function U6(t,e){const n=MP(t);await IP(n,e,!0,!1)}async function IP(t,e,n,i){const r=await r6(t.localStore,is(e)),o=r.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let c;return i&&(c=await F6(t,e,o,l==="current",r.resumeToken)),t.isPrimaryClient&&n&&yP(t.remoteStore,r),c}async function F6(t,e,n,i,r){t.gu=(v,T,b)=>(async function(N,M,V,k){let F=M.view.nu(V);F.Ds&&(F=await yA(N.localStore,M.query,!1).then((({documents:R})=>M.view.nu(R,F))));const G=k&&k.targetChanges.get(M.targetId),K=k&&k.targetMismatches.get(M.targetId)!=null,H=M.view.applyChanges(F,N.isPrimaryClient,G,K);return CA(N,M.targetId,H._u),H.snapshot})(t,v,T,b);const o=await yA(t.localStore,e,!0),l=new M6(e,o.qs),c=l.nu(o.documents),d=of.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=l.applyChanges(c,t.isPrimaryClient,d);CA(t,n,f._u);const p=new k6(e,n,l);return t.Pu.set(e,p),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),f.snapshot}async function B6(t,e,n){const i=He(t),r=i.Pu.get(e),o=i.Tu.get(r.targetId);if(o.length>1)return i.Tu.set(r.targetId,o.filter((l=>!qm(l,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await P0(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),n&&sT(i.remoteStore,r.targetId),k0(i,r.targetId)})).catch(ku)):(k0(i,r.targetId),await P0(i.localStore,r.targetId,!0))}async function z6(t,e){const n=He(t),i=n.Pu.get(e),r=n.Tu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),sT(n.remoteStore,i.targetId))}async function q6(t,e,n){const i=J6(t);try{const r=await(function(l,c){const d=He(l),f=Yt.now(),p=c.reduce(((b,C)=>b.add(C.key)),ct());let v,T;return d.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let C=qs(),N=ct();return d.Os.getEntries(b,p).next((M=>{C=M,C.forEach(((V,k)=>{k.isValidDocument()||(N=N.add(V))}))})).next((()=>d.localDocuments.getOverlayedDocuments(b,C))).next((M=>{v=M;const V=[];for(const k of c){const F=r5(k,v.get(k.key).overlayedDocument);F!=null&&V.push(new oa(k.key,F,VN(F.value.mapValue),Br.exists(!0)))}return d.mutationQueue.addMutationBatch(b,f,V,c)})).next((M=>{T=M;const V=M.applyToLocalDocumentSet(v,N);return d.documentOverlayCache.saveOverlays(b,M.batchId,V)}))})).then((()=>({batchId:T.batchId,changes:$N(v)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(l,c,d){let f=l.Ru[l.currentUser.toKey()];f||(f=new nn(Ze)),f=f.insert(c,d),l.Ru[l.currentUser.toKey()]=f})(i,r.batchId,n),await lf(i,r.changes),await Jm(i.remoteStore)}catch(r){const o=cT(r,"Failed to persist write");n.reject(o)}}async function RP(t,e){const n=He(t);try{const i=await t6(n.localStore,e);e.targetChanges.forEach(((r,o)=>{const l=n.Eu.get(o);l&&(It(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?l.lu=!0:r.modifiedDocuments.size>0?It(l.lu,14607):r.removedDocuments.size>0&&(It(l.lu,42227),l.lu=!1))})),await lf(n,i,e)}catch(i){await ku(i)}}function AA(t,e,n){const i=He(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Pu.forEach(((o,l)=>{const c=l.view.va(e);c.snapshot&&r.push(c.snapshot)})),(function(l,c){const d=He(l);d.onlineState=c;let f=!1;d.queries.forEach(((p,v)=>{for(const T of v.wa)T.va(c)&&(f=!0)})),f&&dT(d)})(i.eventManager,e),r.length&&i.hu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function H6(t,e,n){const i=He(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Eu.get(e),o=r&&r.key;if(o){let l=new nn(De.comparator);l=l.insert(o,ci.newNoDocument(o,Be.min()));const c=ct().add(o),d=new $m(Be.min(),new Map,new nn(Ze),l,c);await RP(i,d),i.du=i.du.remove(o),i.Eu.delete(e),hT(i)}else await P0(i.localStore,e,!1).then((()=>k0(i,e,n))).catch(ku)}async function G6(t,e){const n=He(t),i=e.batch.batchId;try{const r=await e6(n.localStore,e);PP(n,i,null),NP(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await lf(n,r)}catch(r){await ku(r)}}async function j6(t,e,n){const i=He(t);try{const r=await(function(l,c){const d=He(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let p;return d.mutationQueue.lookupMutationBatch(f,c).next((v=>(It(v!==null,37113),p=v.keys(),d.mutationQueue.removeMutationBatch(f,v)))).next((()=>d.mutationQueue.performConsistencyCheck(f))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(f,p,c))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p))).next((()=>d.localDocuments.getDocuments(f,p)))}))})(i.localStore,e);PP(i,e,n),NP(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await lf(i,r)}catch(r){await ku(r)}}function NP(t,e){(t.Vu.get(e)||[]).forEach((n=>{n.resolve()})),t.Vu.delete(e)}function PP(t,e,n){const i=He(t);let r=i.Ru[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Ru[i.currentUser.toKey()]=r}}function k0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Tu.get(e))t.Pu.delete(i),n&&t.hu.pu(i,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach((i=>{t.Au.containsKey(i)||DP(t,i)}))}function DP(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(sT(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),hT(t))}function CA(t,e,n){for(const i of n)i instanceof AP?(t.Au.addReference(i.key,e),$6(t,i)):i instanceof CP?(Se(fT,"Document no longer in limbo: "+i.key),t.Au.removeReference(i.key,e),t.Au.containsKey(i.key)||DP(t,i.key)):Fe(19791,{yu:i})}function $6(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Iu.has(i)||(Se(fT,"New document in limbo: "+n),t.Iu.add(i),hT(t))}function hT(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new De(Bt.fromString(e)),i=t.mu.next();t.Eu.set(i,new V6(n)),t.du=t.du.insert(n,i),yP(t.remoteStore,new Fo(is(zm(n.path)),i,"TargetPurposeLimboResolution",Um.ue))}}async function lf(t,e,n){const i=He(t),r=[],o=[],l=[];i.Pu.isEmpty()||(i.Pu.forEach(((c,d)=>{l.push(i.gu(d,e,n).then((f=>{var p;if((f||n)&&i.isPrimaryClient){const v=f?!f.fromCache:(p=n==null?void 0:n.targetChanges.get(d.targetId))===null||p===void 0?void 0:p.current;i.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(f){r.push(f);const v=iT.Es(d.targetId,f);o.push(v)}})))})),await Promise.all(l),i.hu.J_(r),await(async function(d,f){const p=He(d);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>de.forEach(f,(T=>de.forEach(T.Is,(b=>p.persistence.referenceDelegate.addReference(v,T.targetId,b))).next((()=>de.forEach(T.ds,(b=>p.persistence.referenceDelegate.removeReference(v,T.targetId,b)))))))))}catch(v){if(!Vu(v))throw v;Se(rT,"Failed to update sequence numbers: "+v)}for(const v of f){const T=v.targetId;if(!v.fromCache){const b=p.Fs.get(T),C=b.snapshotVersion,N=b.withLastLimboFreeSnapshotVersion(C);p.Fs=p.Fs.insert(T,N)}}})(i.localStore,o))}async function K6(t,e){const n=He(t);if(!n.currentUser.isEqual(e)){Se(fT,"User change. New user:",e.toKey());const i=await hP(n.localStore,e);n.currentUser=e,(function(o,l){o.Vu.forEach((c=>{c.forEach((d=>{d.reject(new _e(ue.CANCELLED,l))}))})),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await lf(n,i.Bs)}}function Y6(t,e){const n=He(t),i=n.Eu.get(e);if(i&&i.lu)return ct().add(i.key);{let r=ct();const o=n.Tu.get(e);if(!o)return r;for(const l of o){const c=n.Pu.get(l);r=r.unionWith(c.view.tu)}return r}}function MP(t){const e=He(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=RP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Y6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=H6.bind(null,e),e.hu.J_=P6.bind(null,e.eventManager),e.hu.pu=D6.bind(null,e.eventManager),e}function J6(t){const e=He(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=G6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=j6.bind(null,e),e}class em{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Km(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return Z5(this.persistence,new W5,e.initialUser,this.serializer)}Du(e){return new fP(nT.Vi,this.serializer)}bu(e){return new o6}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}em.provider={build:()=>new em};class W6 extends em{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){It(this.persistence.referenceDelegate instanceof Xp,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new V5(i,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Li.withCacheSize(this.cacheSizeBytes):Li.DEFAULT;return new fP((i=>Xp.Vi(i,n)),this.serializer)}}class V0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>AA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=K6.bind(null,this.syncEngine),await I6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new N6})()}createDatastore(e){const n=Km(e.databaseInfo.databaseId),i=(function(o){return new d6(o)})(e.databaseInfo);return(function(o,l,c,d){return new m6(o,l,c,d)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,r,o,l,c){return new y6(i,r,o,l,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>AA(this.syncEngine,n,0)),(function(){return TA.C()?new TA:new a6})())}createSyncEngine(e,n){return(function(r,o,l,c,d,f,p){const v=new L6(r,o,l,c,d,f);return p&&(v.fu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(r){const o=He(r);Se(el,"RemoteStore shutting down."),o.Ia.add(5),await af(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}V0.provider={build:()=>new V0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):zs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo="FirestoreClient";class Q6{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=ui.UNAUTHENTICATED,this.clientId=G_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async l=>{Se(Zo,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(Se(Zo,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Go;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=cT(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Uv(t,e){t.asyncQueue.verifyOperationInProgress(),Se(Zo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async r=>{i.isEqual(r)||(await hP(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>{Ko("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then((()=>{Se("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((r=>{Ko("Terminating Firestore due to IndexedDb database deletion failed",r)}))})),t._offlineComponents=e}async function IA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await X6(t);Se(Zo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>SA(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,r)=>SA(e.remoteStore,r))),t._onlineComponents=e}async function X6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Se(Zo,"Using user provided OfflineComponentProvider");try{await Uv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ue.FAILED_PRECONDITION||r.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;Ko("Error using user provided cache. Falling back to memory cache: "+n),await Uv(t,new em)}}else Se(Zo,"Using default OfflineComponentProvider"),await Uv(t,new W6(void 0));return t._offlineComponents}async function VP(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Se(Zo,"Using user provided OnlineComponentProvider"),await IA(t,t._uninitializedComponentsProvider._online)):(Se(Zo,"Using default OnlineComponentProvider"),await IA(t,new V0))),t._onlineComponents}function Z6(t){return VP(t).then((e=>e.syncEngine))}async function L0(t){const e=await VP(t),n=e.eventManager;return n.onListen=O6.bind(null,e.syncEngine),n.onUnlisten=B6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=U6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=z6.bind(null,e.syncEngine),n}function eF(t,e,n={}){const i=new Go;return t.asyncQueue.enqueueAndForget((async()=>(function(o,l,c,d,f){const p=new kP({next:T=>{p.Ou(),l.enqueueAndForget((()=>wP(o,v)));const b=T.docs.has(c);!b&&T.fromCache?f.reject(new _e(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&T.fromCache&&d&&d.source==="server"?f.reject(new _e(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(T)},error:T=>f.reject(T)}),v=new xP(zm(c.path),p,{includeMetadataChanges:!0,ka:!0});return bP(o,v)})(await L0(t),t.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP="firestore.googleapis.com",NA=!0;class PA{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new _e(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=OP,this.ssl=NA}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:NA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<M5)throw new _e(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}v3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LP((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new _e(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new _e(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new _e(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wm{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new PA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new PA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new u3;switch(i.type){case"firstParty":return new h3(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new _e(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=RA.get(n);i&&(Se("ComponentProvider","Removing Datastore"),RA.delete(n),i.terminate())})(this),Promise.resolve()}}function tF(t,e,n,i={}){var r;t=ns(t,Wm);const o=js(e),l=t._getSettings(),c=Object.assign(Object.assign({},l),{emulatorOptions:t._getEmulatorOptions()}),d=`${e}:${n}`;o&&(Pm(`https://${d}`),Dm("Firestore",!0)),l.host!==OP&&l.host!==d&&Ko("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},l),{host:d,ssl:o,emulatorOptions:i});if(!Wa(f,c)&&(t._setSettings(f),i.mockUserToken)){let p,v;if(typeof i.mockUserToken=="string")p=i.mockUserToken,v=ui.MOCK_USER;else{p=N1(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new _e(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new ui(T)}t._authCredentials=new c3(new SN(p,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ou(this.firestore,e,this._query)}}class vn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vn(this.firestore,e,this._key)}toJSON(){return{type:vn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(nf(n,vn._jsonSchema))return new vn(e,i||null,new De(Bt.fromString(n.referencePath)))}}vn._jsonSchemaVersion="firestore/documentReference/1.0",vn._jsonSchema={type:In("string",vn._jsonSchemaVersion),referencePath:In("string")};class jo extends Ou{constructor(e,n,i){super(e,n,zm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vn(this.firestore,null,new De(e))}withConverter(e){return new jo(this.firestore,e,this._path)}}function aa(t,e,...n){if(t=Ft(t),wN("collection","path",e),t instanceof Wm){const i=Bt.fromString(e,...n);return Gx(i),new jo(t,null,i)}{if(!(t instanceof vn||t instanceof jo))throw new _e(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Bt.fromString(e,...n));return Gx(i),new jo(t.firestore,null,i)}}function Uu(t,e,...n){if(t=Ft(t),arguments.length===1&&(e=G_.newId()),wN("doc","path",e),t instanceof Wm){const i=Bt.fromString(e,...n);return Hx(i),new vn(t,null,new De(i))}{if(!(t instanceof vn||t instanceof jo))throw new _e(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Bt.fromString(e,...n));return Hx(i),new vn(t.firestore,t instanceof jo?t.converter:null,new De(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA="AsyncQueue";class MA{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new mP(this,"async_queue_retry"),this.oc=()=>{const i=Ov();i&&Se(DA,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const n=Ov();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Ov();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new Go;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Vu(e))throw e;Se(DA,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const n=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,zs("INTERNAL UNHANDLED ERROR: ",kA(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=n,n}enqueueAfterDelay(e,n,i){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const r=uT.createAndSchedule(this,e,n,i,(o=>this.lc(o)));return this.ec.push(r),r}ac(){this.tc&&Fe(47125,{hc:kA(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function kA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(t){return(function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1})(t,["next","error","complete"])}class tl extends Wm{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new MA,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new MA(e),this._firestoreClient=void 0,await e}}}function nF(t,e){const n=typeof t=="object"?t:Mm(),i=typeof t=="string"?t:jp,r=Qd(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=R_("firestore");o&&tF(r,...o)}return r}function pT(t){if(t._terminated)throw new _e(ue.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||iF(t),t._firestoreClient}function iF(t){var e,n,i;const r=t._freezeSettings(),o=(function(c,d,f,p){return new R3(c,d,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,LP(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new Q6(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Er(ni.fromBase64String(e))}catch(n){throw new _e(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Er(ni.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Er._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(nf(e,Er._jsonSchema))return Er.fromBase64String(e.bytes)}}Er._jsonSchemaVersion="firestore/bytes/1.0",Er._jsonSchema={type:In("string",Er._jsonSchemaVersion),bytes:In("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new _e(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ti(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new _e(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new _e(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ze(this._lat,e._lat)||Ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ss._jsonSchemaVersion}}static fromJSON(e){if(nf(e,ss._jsonSchema))return new ss(e.latitude,e.longitude)}}ss._jsonSchemaVersion="firestore/geoPoint/1.0",ss._jsonSchema={type:In("string",ss._jsonSchemaVersion),latitude:In("number"),longitude:In("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:os._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(nf(e,os._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new os(e.vectorValues);throw new _e(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}os._jsonSchemaVersion="firestore/vectorValue/1.0",os._jsonSchema={type:In("string",os._jsonSchemaVersion),vectorValues:In("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF=/^__.*__$/;class sF{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new oa(e,this.data,this.fieldMask,n,this.fieldTransforms):new sf(e,this.data,n,this.fieldTransforms)}}class UP{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new oa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function FP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fe(40011,{Ec:t})}}class gT{constructor(e,n,i,r,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new gT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Rc({path:i,mc:!1});return r.fc(e),r}gc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Rc({path:i,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return tm(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(FP(this.Ec)&&rF.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class oF{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Km(e)}Dc(e,n,i,r=!1){return new gT({Ec:e,methodName:n,bc:i,path:ti.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yT(t){const e=t._freezeSettings(),n=Km(t._databaseId);return new oF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function aF(t,e,n,i,r,o={}){const l=t.Dc(o.merge||o.mergeFields?2:0,e,n,r);vT("Data must be an object, but it was:",l,i);const c=BP(i,l);let d,f;if(o.merge)d=new Zi(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const p=[];for(const v of o.mergeFields){const T=O0(e,v,n);if(!l.contains(T))throw new _e(ue.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);qP(p,T)||p.push(T)}d=new Zi(p),f=l.fieldTransforms.filter((v=>d.covers(v.field)))}else d=null,f=l.fieldTransforms;return new sF(new Oi(c),d,f)}class Xm extends mT{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xm}}function lF(t,e,n,i){const r=t.Dc(1,e,n);vT("Data must be an object, but it was:",r,i);const o=[],l=Oi.empty();sa(i,((d,f)=>{const p=_T(e,d,n);f=Ft(f);const v=r.gc(p);if(f instanceof Xm)o.push(p);else{const T=uf(f,v);T!=null&&(o.push(p),l.set(p,T))}}));const c=new Zi(o);return new UP(l,c,r.fieldTransforms)}function uF(t,e,n,i,r,o){const l=t.Dc(1,e,n),c=[O0(e,i,n)],d=[r];if(o.length%2!=0)throw new _e(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)c.push(O0(e,o[T])),d.push(o[T+1]);const f=[],p=Oi.empty();for(let T=c.length-1;T>=0;--T)if(!qP(f,c[T])){const b=c[T];let C=d[T];C=Ft(C);const N=l.gc(b);if(C instanceof Xm)f.push(b);else{const M=uf(C,N);M!=null&&(f.push(b),p.set(b,M))}}const v=new Zi(f);return new UP(p,v,l.fieldTransforms)}function cF(t,e,n,i=!1){return uf(n,t.Dc(i?4:3,e))}function uf(t,e){if(zP(t=Ft(t)))return vT("Unsupported field value:",e,t),BP(t,e);if(t instanceof mT)return(function(i,r){if(!FP(r.Ec))throw r.wc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.wc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,r){const o=[];let l=0;for(const c of i){let d=uf(c,r.yc(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}})(t,e)}return(function(i,r){if((i=Ft(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return X3(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Yt.fromDate(i);return{timestampValue:Qp(r.serializer,o)}}if(i instanceof Yt){const o=new Yt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Qp(r.serializer,o)}}if(i instanceof ss)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Er)return{bytesValue:rP(r.serializer,i._byteString)};if(i instanceof vn){const o=r.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw r.wc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:eT(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof os)return(function(l,c){return{mapValue:{fields:{[MN]:{stringValue:kN},[$p]:{arrayValue:{values:l.toArray().map((f=>{if(typeof f!="number")throw c.wc("VectorValues must only contain numeric values.");return W_(c.serializer,f)}))}}}}}})(i,r);throw r.wc(`Unsupported field value: ${Om(i)}`)})(t,e)}function BP(t,e){const n={};return CN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sa(t,((i,r)=>{const o=uf(r,e.Vc(i));o!=null&&(n[i]=o)})),{mapValue:{fields:n}}}function zP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Yt||t instanceof ss||t instanceof Er||t instanceof vn||t instanceof mT||t instanceof os)}function vT(t,e,n){if(!zP(n)||!xN(n)){const i=Om(n);throw i==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+i)}}function O0(t,e,n){if((e=Ft(e))instanceof Qm)return e._internalPath;if(typeof e=="string")return _T(t,e);throw tm("Field path arguments must be of type string or ",t,!1,void 0,n)}const dF=new RegExp("[~\\*/\\[\\]]");function _T(t,e,n){if(e.search(dF)>=0)throw tm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Qm(...e.split("."))._internalPath}catch{throw tm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function tm(t,e,n,i,r){const o=i&&!i.isEmpty(),l=r!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${r}`),d+=")"),new _e(ue.INVALID_ARGUMENT,c+t+d)}function qP(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new vn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(TT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class fF extends HP{data(){return super.data()}}function TT(t,e){return typeof e=="string"?_T(t,e):e instanceof Qm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new _e(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ET{}class pF extends ET{}function Zm(t,e,...n){let i=[];e instanceof ET&&i.push(e),i=i.concat(n),(function(o){const l=o.filter((d=>d instanceof ST)).length,c=o.filter((d=>d instanceof eg)).length;if(l>1||l>0&&c>0)throw new _e(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const r of i)t=r._apply(t);return t}class eg extends pF{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new eg(e,n,i)}_apply(e){const n=this._parse(e);return GP(e._query,n),new Ou(e.firestore,e.converter,x0(e._query,n))}_parse(e){const n=yT(e.firestore);return(function(o,l,c,d,f,p,v){let T;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new _e(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){OA(v,p);const C=[];for(const N of v)C.push(LA(d,o,N));T={arrayValue:{values:C}}}else T=LA(d,o,v)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||OA(v,p),T=cF(c,l,v,p==="in"||p==="not-in");return Cn.create(f,p,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function mF(t,e,n){const i=e,r=TT("where",t);return eg._create(r,i,n)}class ST extends ET{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ST(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:zr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(r,o){let l=r;const c=o.getFlattenedFilters();for(const d of c)GP(l,d),l=x0(l,d)})(e._query,n),new Ou(e.firestore,e.converter,x0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function LA(t,e,n){if(typeof(n=Ft(n))=="string"){if(n==="")throw new _e(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qN(e)&&n.indexOf("/")!==-1)throw new _e(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Bt.fromString(n));if(!De.isDocumentKey(i))throw new _e(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Xx(t,new De(i))}if(n instanceof vn)return Xx(t,n._key);throw new _e(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Om(n)}.`)}function OA(t,e){if(!Array.isArray(t)||t.length===0)throw new _e(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function GP(t,e){const n=(function(r,o){for(const l of r)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new _e(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _e(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class gF{convertValue(e,n="none"){switch(Qo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Wo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Fe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return sa(e,((r,o)=>{i[r]=this.convertValue(o,n)})),i}convertVectorValue(e){var n,i,r;const o=(r=(i=(n=e.fields)===null||n===void 0?void 0:n[$p].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map((l=>yn(l.doubleValue)));return new os(o)}convertGeoPoint(e){return new ss(yn(e.latitude),yn(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Bm(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(kd(e));default:return null}}convertTimestamp(e){const n=Jo(e);return new Yt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Bt.fromString(e);It(cP(i),9688,{name:e});const r=new Vd(i.get(1),i.get(3)),o=new De(i.popFirst(5));return r.isEqual(n)||zs(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yF(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class ed{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ga extends HP{constructor(e,n,i,r,o,l){super(e,n,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new bp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(TT("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ga._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ga._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ga._jsonSchema={type:In("string",Ga._jsonSchemaVersion),bundleSource:In("string","DocumentSnapshot"),bundleName:In("string"),bundle:In("string")};class bp extends Ga{data(e={}){return super.data(e)}}class hu{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new ed(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new bp(this._firestore,this._userDataWriter,i.key,i,new ed(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new _e(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map((c=>{const d=new bp(r._firestore,r._userDataWriter,c.doc.key,c.doc,new ed(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((c=>o||c.type!==3)).map((c=>{const d=new bp(r._firestore,r._userDataWriter,c.doc.key,c.doc,new ed(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,p=-1;return c.type!==0&&(f=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),p=l.indexOf(c.doc.key)),{type:vF(c.type),doc:d,oldIndex:f,newIndex:p}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=hu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=G_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function vF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _F(t){t=ns(t,vn);const e=ns(t.firestore,tl);return eF(pT(e),t._key).then((n=>$P(e,t,n)))}hu._jsonSchemaVersion="firestore/querySnapshot/1.0",hu._jsonSchema={type:In("string",hu._jsonSchemaVersion),bundleSource:In("string","QuerySnapshot"),bundleName:In("string"),bundle:In("string")};class jP extends gF{constructor(e){super(),this.firestore=e}convertBytes(e){return new Er(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new vn(this.firestore,null,n)}}function TF(t,e,n,...i){t=ns(t,vn);const r=ns(t.firestore,tl),o=yT(r);let l;return l=typeof(e=Ft(e))=="string"||e instanceof Qm?uF(o,"updateDoc",t._key,e,n,i):lF(o,"updateDoc",t._key,e),wT(r,[l.toMutation(t._key,Br.exists(!0))])}function bT(t){return wT(ns(t.firestore,tl),[new Q_(t._key,Br.none())])}function tg(t,e){const n=ns(t.firestore,tl),i=Uu(t),r=yF(t.converter,e);return wT(n,[aF(yT(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Br.exists(!1))]).then((()=>i))}function ng(t,...e){var n,i,r;t=Ft(t);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||VA(e[l])||(o=e[l++]);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(VA(e[l])){const v=e[l];e[l]=(n=v.next)===null||n===void 0?void 0:n.bind(v),e[l+1]=(i=v.error)===null||i===void 0?void 0:i.bind(v),e[l+2]=(r=v.complete)===null||r===void 0?void 0:r.bind(v)}let d,f,p;if(t instanceof vn)f=ns(t.firestore,tl),p=zm(t._key.path),d={next:v=>{e[l]&&e[l]($P(f,t,v))},error:e[l+1],complete:e[l+2]};else{const v=ns(t,Ou);f=ns(v.firestore,tl),p=v._query;const T=new jP(f);d={next:b=>{e[l]&&e[l](new hu(f,T,v,b))},error:e[l+1],complete:e[l+2]},hF(t._query)}return(function(T,b,C,N){const M=new kP(N),V=new xP(b,M,C);return T.asyncQueue.enqueueAndForget((async()=>bP(await L0(T),V))),()=>{M.Ou(),T.asyncQueue.enqueueAndForget((async()=>wP(await L0(T),V)))}})(pT(f),p,c,d)}function wT(t,e){return(function(i,r){const o=new Go;return i.asyncQueue.enqueueAndForget((async()=>q6(await Z6(i),r,o))),o.promise})(pT(t),e)}function $P(t,e,n){const i=n.docs.get(e._key),r=new jP(t);return new Ga(t,r,e._key,i,new ed(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){Mu=r})(rl),$o(new Us("firestore",((i,{instanceIdentifier:r,options:o})=>{const l=i.getProvider("app").getImmediate(),c=new tl(new d3(i.getProvider("auth-internal")),new p3(l,i.getProvider("app-check-internal")),(function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new _e(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vd(f.options.projectId,p)})(l,r),l);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c}),"PUBLIC").setMultipleInstances(!0)),Sr(Ux,Fx,e),Sr(Ux,Fx,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP="firebasestorage.googleapis.com",YP="storageBucket",EF=120*1e3,SF=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn extends qr{constructor(e,n,i=0){super(Fv(e),`Firebase Storage: ${n} (${Fv(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,dn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Fv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var cn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(cn||(cn={}));function Fv(t){return"storage/"+t}function xT(){const t="An unknown error occurred, please check the error payload for server response.";return new dn(cn.UNKNOWN,t)}function bF(t){return new dn(cn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function wF(t){return new dn(cn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function xF(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new dn(cn.UNAUTHENTICATED,t)}function AF(){return new dn(cn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function CF(t){return new dn(cn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function IF(){return new dn(cn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function RF(){return new dn(cn.CANCELED,"User canceled the upload/download.")}function NF(t){return new dn(cn.INVALID_URL,"Invalid URL '"+t+"'.")}function PF(t){return new dn(cn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function DF(){return new dn(cn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+YP+"' property when initializing the app?")}function MF(){return new dn(cn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function kF(){return new dn(cn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function VF(t){return new dn(cn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function U0(t){return new dn(cn.INVALID_ARGUMENT,t)}function JP(){return new dn(cn.APP_DELETED,"The Firebase app was deleted.")}function LF(t){return new dn(cn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function pd(t,e){return new dn(cn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function zc(t){throw new dn(cn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=er.makeFromUrl(e,n)}catch{return new er(e,"")}if(i.path==="")return i;throw PF(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function o(G){G.path.charAt(G.path.length-1)==="/"&&(G.path_=G.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+r+l,"i"),d={bucket:1,path:3};function f(G){G.path_=decodeURIComponent(G.path)}const p="v[A-Za-z0-9_]+",v=n.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",b=new RegExp(`^https?://${v}/${p}/b/${r}/o${T}`,"i"),C={bucket:1,path:3},N=n===KP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,M="([^?#]*)",V=new RegExp(`^https?://${N}/${r}/${M}`,"i"),F=[{regex:c,indices:d,postModify:o},{regex:b,indices:C,postModify:f},{regex:V,indices:{bucket:1,path:2},postModify:f}];for(let G=0;G<F.length;G++){const K=F[G],H=K.regex.exec(e);if(H){const R=H[K.indices.bucket];let I=H[K.indices.path];I||(I=""),i=new er(R,I),K.postModify(i);break}}if(i==null)throw NF(e);return i}}class OF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UF(t,e,n){let i=1,r=null,o=null,l=!1,c=0;function d(){return c===2}let f=!1;function p(...M){f||(f=!0,e.apply(null,M))}function v(M){r=setTimeout(()=>{r=null,t(b,d())},M)}function T(){o&&clearTimeout(o)}function b(M,...V){if(f){T();return}if(M){T(),p.call(null,M,...V);return}if(d()||l){T(),p.call(null,M,...V);return}i<64&&(i*=2);let F;c===1?(c=2,F=0):F=(i+Math.random())*1e3,v(F)}let C=!1;function N(M){C||(C=!0,T(),!f&&(r!==null?(M||(c=2),clearTimeout(r),v(0)):M||(c=1)))}return v(0),o=setTimeout(()=>{l=!0,N(!0)},n),N}function FF(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BF(t){return t!==void 0}function zF(t){return typeof t=="object"&&!Array.isArray(t)}function AT(t){return typeof t=="string"||t instanceof String}function UA(t){return CT()&&t instanceof Blob}function CT(){return typeof Blob<"u"}function FA(t,e,n,i){if(i<e)throw U0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw U0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function WP(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var ja;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ja||(ja={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qF(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||r||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{constructor(e,n,i,r,o,l,c,d,f,p,v,T=!0,b=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=d,this.timeout_=f,this.progressCallback_=p,this.connectionFactory_=v,this.retry=T,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,N)=>{this.resolve_=C,this.reject_=N,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new jh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=c=>{const d=c.loaded,f=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,f)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const c=o.getErrorCode()===ja.NO_ERROR,d=o.getStatus();if(!c||qF(d,this.additionalRetryCodes_)&&this.retry){const p=o.getErrorCode()===ja.ABORT;i(!1,new jh(!1,null,p));return}const f=this.successCodes_.indexOf(d)!==-1;i(!0,new jh(f,o))})},n=(i,r)=>{const o=this.resolve_,l=this.reject_,c=r.connection;if(r.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());BF(d)?o(d):o()}catch(d){l(d)}else if(c!==null){const d=xT();d.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,d)):l(d)}else if(r.canceled){const d=this.appDelete_?JP():RF();l(d)}else{const d=IF();l(d)}};this.canceled_?n(!1,new jh(!1,null,!0)):this.backoffId_=UF(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&FF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class jh{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function GF(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function jF(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function $F(t,e){e&&(t["X-Firebase-GMPID"]=e)}function KF(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function YF(t,e,n,i,r,o,l=!0,c=!1){const d=WP(t.urlParams),f=t.url+d,p=Object.assign({},t.headers);return $F(p,e),GF(p,n),jF(p,o),KF(p,i),new HF(f,t.method,p,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,l,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JF(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function WF(...t){const e=JF();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(CT())return new Blob(t);throw new dn(cn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function QF(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XF(t){if(typeof atob>"u")throw VF("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Bv{constructor(e,n){this.data=e,this.contentType=n||null}}function QP(t,e){switch(t){case Or.RAW:return new Bv(XP(e));case Or.BASE64:case Or.BASE64URL:return new Bv(ZP(t,e));case Or.DATA_URL:return new Bv(eB(e),tB(e))}throw xT()}function XP(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=i,l=t.charCodeAt(++n);i=65536|(o&1023)<<10|l&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function ZF(t){let e;try{e=decodeURIComponent(t)}catch{throw pd(Or.DATA_URL,"Malformed data URL.")}return XP(e)}function ZP(t,e){switch(t){case Or.BASE64:{const r=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(r||o)throw pd(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Or.BASE64URL:{const r=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(r||o)throw pd(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=XF(e)}catch(r){throw r.message.includes("polyfill")?r:pd(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class eD{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw pd(Or.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=nB(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function eB(t){const e=new eD(t);return e.base64?ZP(Or.BASE64,e.rest):ZF(e.rest)}function tB(t){return new eD(t).contentType}function nB(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,n){let i=0,r="";UA(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(UA(this.data_)){const i=this.data_,r=QF(i,e,n);return r===null?null:new Vo(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Vo(i,!0)}}static getBlob(...e){if(CT()){const n=e.map(i=>i instanceof Vo?i.data_:i);return new Vo(WF.apply(null,n))}else{const n=e.map(l=>AT(l)?QP(Or.RAW,l).data:l.data_);let i=0;n.forEach(l=>{i+=l.byteLength});const r=new Uint8Array(i);let o=0;return n.forEach(l=>{for(let c=0;c<l.length;c++)r[o++]=l[c]}),new Vo(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(t){let e;try{e=JSON.parse(t)}catch{return null}return zF(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iB(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function rB(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function nD(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sB(t,e){return e}class bi{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||sB}}let $h=null;function oB(t){return!AT(t)||t.length<2?t:nD(t)}function iD(){if($h)return $h;const t=[];t.push(new bi("bucket")),t.push(new bi("generation")),t.push(new bi("metageneration")),t.push(new bi("name","fullPath",!0));function e(o,l){return oB(l)}const n=new bi("name");n.xform=e,t.push(n);function i(o,l){return l!==void 0?Number(l):l}const r=new bi("size");return r.xform=i,t.push(r),t.push(new bi("timeCreated")),t.push(new bi("updated")),t.push(new bi("md5Hash",null,!0)),t.push(new bi("cacheControl",null,!0)),t.push(new bi("contentDisposition",null,!0)),t.push(new bi("contentEncoding",null,!0)),t.push(new bi("contentLanguage",null,!0)),t.push(new bi("contentType",null,!0)),t.push(new bi("metadata","customMetadata",!0)),$h=t,$h}function aB(t,e){function n(){const i=t.bucket,r=t.fullPath,o=new er(i,r);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function lB(t,e,n){const i={};i.type="file";const r=n.length;for(let o=0;o<r;o++){const l=n[o];i[l.local]=l.xform(i,e[l.server])}return aB(i,t),i}function rD(t,e,n){const i=tD(e);return i===null?null:lB(t,i,n)}function uB(t,e,n,i){const r=tD(e);if(r===null||!AT(r.downloadTokens))return null;const o=r.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(f=>{const p=t.bucket,v=t.fullPath,T="/b/"+l(p)+"/o/"+l(v),b=IT(T,n,i),C=WP({alt:"media",token:f});return b+C})[0]}function cB(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const o=e[r];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class sD{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(t){if(!t)throw xT()}function dB(t,e){function n(i,r){const o=rD(t,r,e);return oD(o!==null),o}return n}function fB(t,e){function n(i,r){const o=rD(t,r,e);return oD(o!==null),uB(o,r,t.host,t._protocol)}return n}function aD(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=AF():r=xF():n.getStatus()===402?r=wF(t.bucket):n.getStatus()===403?r=CF(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function hB(t){const e=aD(t);function n(i,r){let o=e(i,r);return i.getStatus()===404&&(o=bF(t.path)),o.serverResponse=r.serverResponse,o}return n}function pB(t,e,n){const i=e.fullServerUrl(),r=IT(i,t.host,t._protocol),o="GET",l=t.maxOperationRetryTime,c=new sD(r,o,fB(t,n),l);return c.errorHandler=hB(e),c}function mB(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function gB(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=mB(null,e)),i}function yB(t,e,n,i,r){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let F="";for(let G=0;G<2;G++)F=F+Math.random().toString().slice(2);return F}const d=c();l["Content-Type"]="multipart/related; boundary="+d;const f=gB(e,i,r),p=cB(f,n),v="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+d+`\r
Content-Type: `+f.contentType+`\r
\r
`,T=`\r
--`+d+"--",b=Vo.getBlob(v,i,T);if(b===null)throw MF();const C={name:f.fullPath},N=IT(o,t.host,t._protocol),M="POST",V=t.maxUploadRetryTime,k=new sD(N,M,dB(t,n),V);return k.urlParams=C,k.headers=l,k.body=b.uploadData(),k.errorHandler=aD(e),k}class vB{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ja.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ja.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ja.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r,o){if(this.sent_)throw zc("cannot .send() more than once");if(js(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const l in o)o.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,o[l].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw zc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw zc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw zc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw zc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class _B extends vB{initXhr(){this.xhr_.responseType="text"}}function lD(){return new _B}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n){this._service=e,n instanceof er?this._location=n:this._location=er.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new nl(e,n)}get root(){const e=new er(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return nD(this._location.path)}get storage(){return this._service}get parent(){const e=iB(this._location.path);if(e===null)return null;const n=new er(this._location.bucket,e);return new nl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw LF(e)}}function uD(t,e,n){t._throwIfRoot("uploadBytes");const i=yB(t.storage,t._location,iD(),new Vo(e,!0),n);return t.storage.makeRequestWithTokens(i,lD).then(r=>({metadata:r,ref:t}))}function TB(t,e,n=Or.RAW,i){t._throwIfRoot("uploadString");const r=QP(n,e),o=Object.assign({},i);return o.contentType==null&&r.contentType!=null&&(o.contentType=r.contentType),uD(t,r.data,o)}function EB(t){t._throwIfRoot("getDownloadURL");const e=pB(t.storage,t._location,iD());return t.storage.makeRequestWithTokens(e,lD).then(n=>{if(n===null)throw kF();return n})}function SB(t,e){const n=rB(t._location.path,e),i=new er(t._location.bucket,n);return new nl(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bB(t){return/^[A-Za-z]+:\/\//.test(t)}function wB(t,e){return new nl(t,e)}function cD(t,e){if(t instanceof RT){const n=t;if(n._bucket==null)throw DF();const i=new nl(n,n._bucket);return e!=null?cD(i,e):i}else return e!==void 0?SB(t,e):t}function xB(t,e){if(e&&bB(e)){if(t instanceof RT)return wB(t,e);throw U0("To use ref(service, url), the first argument must be a Storage instance.")}else return cD(t,e)}function BA(t,e){const n=e==null?void 0:e[YP];return n==null?null:er.makeFromBucketSpec(n,t)}function AB(t,e,n,i={}){t.host=`${e}:${n}`;const r=js(e);r&&(Pm(`https://${t.host}/b`),Dm("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:o}=i;o&&(t._overrideAuthToken=typeof o=="string"?o:N1(o,t.app.options.projectId))}class RT{constructor(e,n,i,r,o,l=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._isUsingEmulator=l,this._bucket=null,this._host=KP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=EF,this._maxUploadRetryTime=SF,this._requests=new Set,r!=null?this._bucket=er.makeFromBucketSpec(r,this._host):this._bucket=BA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=er.makeFromBucketSpec(this._url,e):this._bucket=BA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){FA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){FA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(wi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new nl(this,e)}_makeRequest(e,n,i,r,o=!0){if(this._deleted)return new OF(JP());{const l=YF(e,this._appId,i,r,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const zA="@firebase/storage",qA="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD="storage";function CB(t,e,n){return t=Ft(t),uD(t,e,n)}function IB(t,e,n,i){return t=Ft(t),TB(t,e,n,i)}function fD(t){return t=Ft(t),EB(t)}function hD(t,e){return t=Ft(t),xB(t,e)}function RB(t=Mm(),e){t=Ft(t);const i=Qd(t,dD).getImmediate({identifier:e}),r=R_("storage");return r&&NB(i,...r),i}function NB(t,e,n,i={}){AB(t,e,n,i)}function PB(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new RT(n,i,r,e,rl)}function DB(){$o(new Us(dD,PB,"PUBLIC").setMultipleInstances(!0)),Sr(zA,qA,""),Sr(zA,qA,"esm2017")}DB();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MB="type.googleapis.com/google.protobuf.Int64Value",kB="type.googleapis.com/google.protobuf.UInt64Value";function pD(t,e){const n={};for(const i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}function nm(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>nm(e));if(typeof t=="function"||typeof t=="object")return pD(t,e=>nm(e));throw new Error("Data cannot be encoded in JSON: "+t)}function xu(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case MB:case kB:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>xu(e)):typeof t=="function"||typeof t=="object"?pD(t,e=>xu(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ui extends qr{constructor(e,n,i){super(`${NT}/${e}`,n||""),this.details=i,Object.setPrototypeOf(this,Ui.prototype)}}function VB(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function im(t,e){let n=VB(t),i=n,r;try{const o=e&&e.error;if(o){const l=o.status;if(typeof l=="string"){if(!HA[l])return new Ui("internal","internal");n=HA[l],i=l}const c=o.message;typeof c=="string"&&(i=c),r=o.details,r!==void 0&&(r=xu(r))}}catch{}return n==="ok"?null:new Ui(n,i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{constructor(e,n,i,r){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,wi(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||n.get().then(o=>this.auth=o,()=>{}),this.messaging||i.get().then(o=>this.messaging=o,()=>{}),this.appCheck||r==null||r.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),i=await this.getMessagingToken(),r=await this.getAppCheckToken(e);return{authToken:n,messagingToken:i,appCheckToken:r}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="us-central1",OB=/^data: (.*?)(?:\n|$)/;function UB(t){let e=null;return{promise:new Promise((n,i)=>{e=setTimeout(()=>{i(new Ui("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class FB{constructor(e,n,i,r,o=F0,l=(...c)=>fetch(...c)){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new LB(e,n,i,r),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(o);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=F0}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function BB(t,e,n){const i=js(e);t.emulatorOrigin=`http${i?"s":""}://${e}:${n}`,i&&(Pm(t.emulatorOrigin),Dm("Functions",!0))}function zB(t,e,n){const i=r=>HB(t,e,r,{});return i.stream=(r,o)=>jB(t,e,r,o),i}async function qB(t,e,n,i){n["Content-Type"]="application/json";let r;try{r=await i(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let o=null;try{o=await r.json()}catch{}return{status:r.status,json:o}}async function mD(t,e){const n={},i=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(n.Authorization="Bearer "+i.authToken),i.messagingToken&&(n["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=i.appCheckToken),n}function HB(t,e,n,i){const r=t._url(e);return GB(t,r,n,i)}async function GB(t,e,n,i){n=nm(n);const r={data:n},o=await mD(t,i),l=i.timeout||7e4,c=UB(l),d=await Promise.race([qB(e,r,o,t.fetchImpl),c.promise,t.cancelAllRequests]);if(c.cancel(),!d)throw new Ui("cancelled","Firebase Functions instance was deleted.");const f=im(d.status,d.json);if(f)throw f;if(!d.json)throw new Ui("internal","Response is not valid JSON object.");let p=d.json.data;if(typeof p>"u"&&(p=d.json.result),typeof p>"u")throw new Ui("internal","Response is missing data field.");return{data:xu(p)}}function jB(t,e,n,i){const r=t._url(e);return $B(t,r,n,i||{})}async function $B(t,e,n,i){var r;n=nm(n);const o={data:n},l=await mD(t,i);l["Content-Type"]="application/json",l.Accept="text/event-stream";let c;try{c=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:l,signal:i==null?void 0:i.signal})}catch(b){if(b instanceof Error&&b.name==="AbortError"){const N=new Ui("cancelled","Request was cancelled.");return{data:Promise.reject(N),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(N)}}}}}}const C=im(0,null);return{data:Promise.reject(C),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(C)}}}}}}let d,f;const p=new Promise((b,C)=>{d=b,f=C});(r=i==null?void 0:i.signal)===null||r===void 0||r.addEventListener("abort",()=>{const b=new Ui("cancelled","Request was cancelled.");f(b)});const v=c.body.getReader(),T=KB(v,d,f,i==null?void 0:i.signal);return{stream:{[Symbol.asyncIterator](){const b=T.getReader();return{async next(){const{value:C,done:N}=await b.read();return{value:C,done:N}},async return(){return await b.cancel(),{done:!0,value:void 0}}}}},data:p}}function KB(t,e,n,i){const r=(l,c)=>{const d=l.match(OB);if(!d)return;const f=d[1];try{const p=JSON.parse(f);if("result"in p){e(xu(p.result));return}if("message"in p){c.enqueue(xu(p.message));return}if("error"in p){const v=im(0,p);c.error(v),n(v);return}}catch(p){if(p instanceof Ui){c.error(p),n(p);return}}},o=new TextDecoder;return new ReadableStream({start(l){let c="";return d();async function d(){if(i!=null&&i.aborted){const f=new Ui("cancelled","Request was cancelled");return l.error(f),n(f),Promise.resolve()}try{const{value:f,done:p}=await t.read();if(p){c.trim()&&r(c.trim(),l),l.close();return}if(i!=null&&i.aborted){const T=new Ui("cancelled","Request was cancelled");l.error(T),n(T),await t.cancel();return}c+=o.decode(f,{stream:!0});const v=c.split(`
`);c=v.pop()||"";for(const T of v)T.trim()&&r(T.trim(),l);return d()}catch(f){const p=f instanceof Ui?f:im(0,null);l.error(p),n(p)}}},cancel(){return t.cancel()}})}const GA="@firebase/functions",jA="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YB="auth-internal",JB="app-check-internal",WB="messaging-internal";function QB(t){const e=(n,{instanceIdentifier:i})=>{const r=n.getProvider("app").getImmediate(),o=n.getProvider(YB),l=n.getProvider(WB),c=n.getProvider(JB);return new FB(r,o,l,c,i)};$o(new Us(NT,e,"PUBLIC").setMultipleInstances(!0)),Sr(GA,jA,t),Sr(GA,jA,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XB(t=Mm(),e=F0){const i=Qd(Ft(t),NT).getImmediate({identifier:e}),r=R_("functions");return r&&ZB(i,...r),i}function ZB(t,e,n){BB(Ft(t),e,n)}function e9(t,e,n){return zB(Ft(t),e)}QB();const t9={apiKey:"AIzaSyAoMQ8oVPP5oFjw8YzgF0H1Dy4DAJmNaKM",authDomain:"dresscode-ai-32c50.firebaseapp.com",projectId:"dresscode-ai-32c50",storageBucket:"dresscode-ai-32c50.firebasestorage.app",messagingSenderId:"215593114437",appId:"1:215593114437:web:5d9c1f3161182802f37c2c"},ig=M1(t9),Oa=s3(ig),n9=new Ds,ir=nF(ig),gD=RB(ig),i9=XB(ig,"us-central1");/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let r9,s9;function o9(){return{geminiUrl:r9,vertexUrl:s9}}function a9(t,e,n,i){var r,o;if(!(t!=null&&t.baseUrl)){const l=o9();return e?(r=l.vertexUrl)!==null&&r!==void 0?r:n:(o=l.geminiUrl)!==null&&o!==void 0?o:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $s{}function ve(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const o=e[r];return o!=null?String(o):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function y(t,e,n){for(let o=0;o<e.length-1;o++){const l=e[o];if(l.endsWith("[]")){const c=l.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(t[c])){const d=t[c];if(Array.isArray(n))for(let f=0;f<d.length;f++){const p=d[f];y(p,e.slice(o+1),n[f])}else for(const f of d)y(f,e.slice(o+1),n)}return}else if(l.endsWith("[0]")){const c=l.slice(0,-3);c in t||(t[c]=[{}]);const d=t[c];y(d[0],e.slice(o+1),n);return}(!t[l]||typeof t[l]!="object")&&(t[l]={}),t=t[l]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function m(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const r=e[i];if(r.endsWith("[]")){const o=r.slice(0,-2);if(o in t){const l=t[o];return Array.isArray(l)?l.map(c=>m(c,e.slice(i+1),n)):n}else return n}else t=t[r]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function l9(t,e){for(const[n,i]of Object.entries(e)){const r=n.split("."),o=i.split("."),l=new Set;let c=-1;for(let d=0;d<r.length;d++)if(r[d]==="*"){c=d;break}if(c!==-1&&o.length>c)for(let d=c;d<o.length;d++){const f=o[d];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&l.add(f)}B0(t,r,o,0,l)}}function B0(t,e,n,i,r){if(i>=e.length||typeof t!="object"||t===null)return;const o=e[i];if(o.endsWith("[]")){const l=o.slice(0,-2),c=t;if(l in c&&Array.isArray(c[l]))for(const d of c[l])B0(d,e,n,i+1,r)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const l=t,c=Object.keys(l).filter(f=>!f.startsWith("_")&&!r.has(f)),d={};for(const f of c)d[f]=l[f];for(const[f,p]of Object.entries(d)){const v=[];for(const T of n.slice(i))T==="*"?v.push(f):v.push(T);y(l,v,p)}for(const f of c)delete l[f]}}else{const l=t;o in l&&B0(l[o],e,n,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PT(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function u9(t){const e={},n=m(t,["operationName"]);n!=null&&y(e,["operationName"],n);const i=m(t,["resourceName"]);return i!=null&&y(e,["_url","resourceName"],i),e}function c9(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response","generateVideoResponse"]);return l!=null&&y(e,["response"],f9(l)),e}function d9(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response"]);return l!=null&&y(e,["response"],h9(l)),e}function f9(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>p9(l))),y(e,["generatedVideos"],o)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const r=m(t,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function h9(t){const e={},n=m(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>m9(l))),y(e,["generatedVideos"],o)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const r=m(t,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function p9(t){const e={},n=m(t,["video"]);return n!=null&&y(e,["video"],E9(n)),e}function m9(t){const e={},n=m(t,["_self"]);return n!=null&&y(e,["video"],S9(n)),e}function g9(t){const e={},n=m(t,["operationName"]);return n!=null&&y(e,["_url","operationName"],n),e}function y9(t){const e={},n=m(t,["operationName"]);return n!=null&&y(e,["_url","operationName"],n),e}function v9(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response"]);return l!=null&&y(e,["response"],_9(l)),e}function _9(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["parent"]);i!=null&&y(e,["parent"],i);const r=m(t,["documentName"]);return r!=null&&y(e,["documentName"],r),e}function yD(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response"]);return l!=null&&y(e,["response"],T9(l)),e}function T9(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["parent"]);i!=null&&y(e,["parent"],i);const r=m(t,["documentName"]);return r!=null&&y(e,["documentName"],r),e}function E9(t){const e={},n=m(t,["uri"]);n!=null&&y(e,["uri"],n);const i=m(t,["encodedVideo"]);i!=null&&y(e,["videoBytes"],PT(i));const r=m(t,["encoding"]);return r!=null&&y(e,["mimeType"],r),e}function S9(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&y(e,["videoBytes"],PT(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var $A;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})($A||($A={}));var KA;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(KA||(KA={}));var YA;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(YA||(YA={}));var qe;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(qe||(qe={}));var JA;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(JA||(JA={}));var WA;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(WA||(WA={}));var QA;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(QA||(QA={}));var XA;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(XA||(XA={}));var ZA;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(ZA||(ZA={}));var eC;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(eC||(eC={}));var tC;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(tC||(tC={}));var nC;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(nC||(nC={}));var iC;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(iC||(iC={}));var rC;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(rC||(rC={}));var sC;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(sC||(sC={}));var oC;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(oC||(oC={}));var aC;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(aC||(aC={}));var lC;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(lC||(lC={}));var uC;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(uC||(uC={}));var rm;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(rm||(rm={}));var cC;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(cC||(cC={}));var dC;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(dC||(dC={}));var fC;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(fC||(fC={}));var z0;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(z0||(z0={}));var hC;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(hC||(hC={}));var pC;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(pC||(pC={}));var mC;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(mC||(mC={}));var gC;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(gC||(gC={}));var yC;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(yC||(yC={}));var vC;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(vC||(vC={}));var _C;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(_C||(_C={}));var TC;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(TC||(TC={}));var EC;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(EC||(EC={}));var SC;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(SC||(SC={}));var bC;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(bC||(bC={}));var wC;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(wC||(wC={}));var xC;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(xC||(xC={}));var AC;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(AC||(AC={}));var CC;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(CC||(CC={}));var IC;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(IC||(IC={}));var RC;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(RC||(RC={}));var NC;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(NC||(NC={}));var PC;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(PC||(PC={}));var DC;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(DC||(DC={}));var MC;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(MC||(MC={}));var kC;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(kC||(kC={}));var VC;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(VC||(VC={}));var LC;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(LC||(LC={}));var OC;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(OC||(OC={}));var UC;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(UC||(UC={}));var FC;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(FC||(FC={}));var BC;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(BC||(BC={}));var zC;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(zC||(zC={}));var qC;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(qC||(qC={}));var nu;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(nu||(nu={}));class q0{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class qc{get text(){var e,n,i,r,o,l,c,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",p=!1;const v=[];for(const T of(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[b,C]of Object.entries(T))b!=="text"&&b!=="thought"&&b!=="thoughtSignature"&&(C!==null||C!==void 0)&&v.push(b);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;p=!0,f+=T.text}}return v.length>0&&console.warn(`there are non-text parts ${v} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?f:void 0}get data(){var e,n,i,r,o,l,c,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const p=[];for(const v of(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[T,b]of Object.entries(v))T!=="inlineData"&&(b!==null||b!==void 0)&&p.push(T);v.inlineData&&typeof v.inlineData.data=="string"&&(f+=atob(v.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,n,i,r,o,l,c,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,n,i,r,o,l,c,d,f;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(v=>v.executableCode).map(v=>v.executableCode).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return(f=p==null?void 0:p[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,n,i,r,o,l,c,d,f;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(v=>v.codeExecutionResult).map(v=>v.codeExecutionResult).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return(f=p==null?void 0:p[0])===null||f===void 0?void 0:f.output}}class HC{}class GC{}class b9{}class w9{}class x9{}class A9{}class jC{}class $C{}class KC{}class C9{}class sm{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new sm;let r;const o=e;return n?r=d9(o):r=c9(o),Object.assign(i,r),i}}class YC{}class JC{}class WC{}class I9{}class R9{}class N9{}class DT{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new DT,o=v9(e);return Object.assign(i,o),i}}class P9{}class D9{}class M9{}class QC{}class k9{get text(){var e,n,i;let r="",o=!1;const l=[];for(const c of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[d,f]of Object.entries(c))d!=="text"&&d!=="thought"&&f!==null&&l.push(d);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;o=!0,r+=c.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?r:void 0}get data(){var e,n,i;let r="";const o=[];for(const l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,d]of Object.entries(l))c!=="inlineData"&&d!==null&&o.push(c);l.inlineData&&typeof l.inlineData.data=="string"&&(r+=atob(l.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class V9{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class MT{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new MT,o=yD(e);return Object.assign(i,o),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function St(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function vD(t,e){const n=St(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function _D(t){return Array.isArray(t)?t.map(e=>om(e)):[om(t)]}function om(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function TD(t){const e=om(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ED(t){const e=om(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function XC(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function SD(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>XC(e)):[XC(t)]}function H0(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function ZC(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function eI(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function di(t){if(t==null)throw new Error("ContentUnion is required");return H0(t)?t:{role:"user",parts:SD(t)}}function kT(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=di(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=di(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>di(n)):[di(e)]}function br(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(ZC(t)||eI(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[di(t)]}const e=[],n=[],i=H0(t[0]);for(const r of t){const o=H0(r);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(r);else{if(ZC(r)||eI(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:SD(n)}),e}function L9(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(qe).includes(n[0].toUpperCase())?n[0].toUpperCase():qe.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(qe).includes(i.toUpperCase())?i.toUpperCase():qe.TYPE_UNSPECIFIED})}}function pu(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&L9(t.type,e);for(const[l,c]of Object.entries(t))if(c!=null)if(l=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(qe).includes(c.toUpperCase())?c.toUpperCase():qe.TYPE_UNSPECIFIED}else if(n.includes(l))e[l]=pu(c);else if(i.includes(l)){const d=[];for(const f of c){if(f.type=="null"){e.nullable=!0;continue}d.push(pu(f))}e[l]=d}else if(r.includes(l)){const d={};for(const[f,p]of Object.entries(c))d[f]=pu(p);e[l]=d}else{if(l==="additionalProperties")continue;e[l]=c}return e}function VT(t){return pu(t)}function LT(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function OT(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Fu(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=pu(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=pu(e.response));return t}function Bu(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function O9(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Ks(t,e){if(typeof e!="string")throw new Error("name must be a string");return O9(t,e,"cachedContents")}function bD(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function la(t){return PT(t)}function U9(t){return t!=null&&typeof t=="object"&&"name"in t}function F9(t){return t!=null&&typeof t=="object"&&"video"in t}function B9(t){return t!=null&&typeof t=="object"&&"uri"in t}function wD(t){var e;let n;if(U9(t)&&(n=t.name),!(B9(t)&&(n=t.uri,n===void 0))&&!(F9(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function xD(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function AD(t){for(const e of["models","tunedModels","publisherModels"])if(z9(t,e))return t[e];return[]}function z9(t,e){return t!==null&&typeof t=="object"&&e in t}function q9(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function H9(t,e={}){const n=[],i=new Set;for(const r of t){const o=r.name;if(i.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);i.add(o);const l=q9(r,e);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function CD(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function G9(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function ID(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let o=!1;for(const l of r){if(typeof l!="object"||l===null)continue;const d=l.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function zu(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function RD(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function j9(t){const e={},n=m(t,["responsesFile"]);n!=null&&y(e,["fileName"],n);const i=m(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>xz(l))),y(e,["inlinedResponses"],o)}const r=m(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["inlinedEmbedContentResponses"],o)}return e}function $9(t){const e={},n=m(t,["predictionsFormat"]);n!=null&&y(e,["format"],n);const i=m(t,["gcsDestination","outputUriPrefix"]);i!=null&&y(e,["gcsUri"],i);const r=m(t,["bigqueryDestination","outputUri"]);return r!=null&&y(e,["bigqueryUri"],r),e}function K9(t){const e={},n=m(t,["format"]);n!=null&&y(e,["predictionsFormat"],n);const i=m(t,["gcsUri"]);i!=null&&y(e,["gcsDestination","outputUriPrefix"],i);const r=m(t,["bigqueryUri"]);if(r!=null&&y(e,["bigqueryDestination","outputUri"],r),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(m(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function wp(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata","displayName"]);i!=null&&y(e,["displayName"],i);const r=m(t,["metadata","state"]);r!=null&&y(e,["state"],RD(r));const o=m(t,["metadata","createTime"]);o!=null&&y(e,["createTime"],o);const l=m(t,["metadata","endTime"]);l!=null&&y(e,["endTime"],l);const c=m(t,["metadata","updateTime"]);c!=null&&y(e,["updateTime"],c);const d=m(t,["metadata","model"]);d!=null&&y(e,["model"],d);const f=m(t,["metadata","output"]);return f!=null&&y(e,["dest"],j9(ID(f))),e}function G0(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["displayName"]);i!=null&&y(e,["displayName"],i);const r=m(t,["state"]);r!=null&&y(e,["state"],RD(r));const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["createTime"]);l!=null&&y(e,["createTime"],l);const c=m(t,["startTime"]);c!=null&&y(e,["startTime"],c);const d=m(t,["endTime"]);d!=null&&y(e,["endTime"],d);const f=m(t,["updateTime"]);f!=null&&y(e,["updateTime"],f);const p=m(t,["model"]);p!=null&&y(e,["model"],p);const v=m(t,["inputConfig"]);v!=null&&y(e,["src"],Y9(v));const T=m(t,["outputConfig"]);T!=null&&y(e,["dest"],$9(ID(T)));const b=m(t,["completionStats"]);return b!=null&&y(e,["completionStats"],b),e}function Y9(t){const e={},n=m(t,["instancesFormat"]);n!=null&&y(e,["format"],n);const i=m(t,["gcsSource","uris"]);i!=null&&y(e,["gcsUri"],i);const r=m(t,["bigquerySource","inputUri"]);return r!=null&&y(e,["bigqueryUri"],r),e}function J9(t,e){const n={};if(m(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(m(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=m(e,["fileName"]);i!=null&&y(n,["fileName"],i);const r=m(e,["inlinedRequests"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>wz(t,l))),y(n,["requests","requests"],o)}return n}function W9(t){const e={},n=m(t,["format"]);n!=null&&y(e,["instancesFormat"],n);const i=m(t,["gcsUri"]);i!=null&&y(e,["gcsSource","uris"],i);const r=m(t,["bigqueryUri"]);if(r!=null&&y(e,["bigquerySource","inputUri"],r),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Q9(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function X9(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],zu(t,i)),n}function Z9(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],zu(t,i)),n}function ez(t){const e={},n=m(t,["content"]);n!=null&&y(e,["content"],n);const i=m(t,["citationMetadata"]);i!=null&&y(e,["citationMetadata"],tz(i));const r=m(t,["tokenCount"]);r!=null&&y(e,["tokenCount"],r);const o=m(t,["finishReason"]);o!=null&&y(e,["finishReason"],o);const l=m(t,["avgLogprobs"]);l!=null&&y(e,["avgLogprobs"],l);const c=m(t,["groundingMetadata"]);c!=null&&y(e,["groundingMetadata"],c);const d=m(t,["index"]);d!=null&&y(e,["index"],d);const f=m(t,["logprobsResult"]);f!=null&&y(e,["logprobsResult"],f);const p=m(t,["safetyRatings"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(b=>b)),y(e,["safetyRatings"],T)}const v=m(t,["urlContextMetadata"]);return v!=null&&y(e,["urlContextMetadata"],v),e}function tz(t){const e={},n=m(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),y(e,["citations"],i)}return e}function ND(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>Dz(o))),y(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function nz(t,e){const n={},i=m(t,["displayName"]);if(e!==void 0&&i!=null&&y(e,["batch","displayName"],i),m(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function iz(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const r=m(t,["dest"]);return e!==void 0&&r!=null&&y(e,["outputConfig"],K9(G9(r))),n}function tI(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],St(t,i));const r=m(e,["src"]);r!=null&&y(n,["batch","inputConfig"],J9(t,CD(t,r)));const o=m(e,["config"]);return o!=null&&nz(o,n),n}function rz(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["model"],St(t,i));const r=m(e,["src"]);r!=null&&y(n,["inputConfig"],W9(CD(t,r)));const o=m(e,["config"]);return o!=null&&iz(o,n),n}function sz(t,e){const n={},i=m(t,["displayName"]);return e!==void 0&&i!=null&&y(e,["batch","displayName"],i),n}function oz(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],St(t,i));const r=m(e,["src"]);r!=null&&y(n,["batch","inputConfig"],hz(t,r));const o=m(e,["config"]);return o!=null&&sz(o,n),n}function az(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],zu(t,i)),n}function lz(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],zu(t,i)),n}function uz(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);return o!=null&&y(e,["error"],o),e}function cz(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);return o!=null&&y(e,["error"],o),e}function dz(t,e){const n={},i=m(e,["contents"]);if(i!=null){let o=kT(t,i);Array.isArray(o)&&(o=o.map(l=>l)),y(n,["requests[]","request","content"],o)}const r=m(e,["config"]);return r!=null&&(y(n,["_self"],fz(r,n)),l9(n,{"requests[].*":"requests[].request.*"})),n}function fz(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&y(e,["requests[]","taskType"],i);const r=m(t,["title"]);e!==void 0&&r!=null&&y(e,["requests[]","title"],r);const o=m(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&y(e,["requests[]","outputDimensionality"],o),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function hz(t,e){const n={},i=m(e,["fileName"]);i!=null&&y(n,["file_name"],i);const r=m(e,["inlinedRequests"]);return r!=null&&y(n,["requests"],dz(t,r)),n}function pz(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function mz(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const i=m(t,["args"]);i!=null&&y(e,["args"],i);const r=m(t,["name"]);if(r!=null&&y(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function gz(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const i=m(t,["allowedFunctionNames"]);if(i!=null&&y(e,["allowedFunctionNames"],i),m(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function yz(t,e,n){const i={},r=m(e,["systemInstruction"]);n!==void 0&&r!=null&&y(n,["systemInstruction"],ND(di(r)));const o=m(e,["temperature"]);o!=null&&y(i,["temperature"],o);const l=m(e,["topP"]);l!=null&&y(i,["topP"],l);const c=m(e,["topK"]);c!=null&&y(i,["topK"],c);const d=m(e,["candidateCount"]);d!=null&&y(i,["candidateCount"],d);const f=m(e,["maxOutputTokens"]);f!=null&&y(i,["maxOutputTokens"],f);const p=m(e,["stopSequences"]);p!=null&&y(i,["stopSequences"],p);const v=m(e,["responseLogprobs"]);v!=null&&y(i,["responseLogprobs"],v);const T=m(e,["logprobs"]);T!=null&&y(i,["logprobs"],T);const b=m(e,["presencePenalty"]);b!=null&&y(i,["presencePenalty"],b);const C=m(e,["frequencyPenalty"]);C!=null&&y(i,["frequencyPenalty"],C);const N=m(e,["seed"]);N!=null&&y(i,["seed"],N);const M=m(e,["responseMimeType"]);M!=null&&y(i,["responseMimeType"],M);const V=m(e,["responseSchema"]);V!=null&&y(i,["responseSchema"],VT(V));const k=m(e,["responseJsonSchema"]);if(k!=null&&y(i,["responseJsonSchema"],k),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const F=m(e,["safetySettings"]);if(n!==void 0&&F!=null){let z=F;Array.isArray(z)&&(z=z.map(q=>Mz(q))),y(n,["safetySettings"],z)}const G=m(e,["tools"]);if(n!==void 0&&G!=null){let z=Bu(G);Array.isArray(z)&&(z=z.map(q=>Vz(Fu(q)))),y(n,["tools"],z)}const K=m(e,["toolConfig"]);if(n!==void 0&&K!=null&&y(n,["toolConfig"],kz(K)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const H=m(e,["cachedContent"]);n!==void 0&&H!=null&&y(n,["cachedContent"],Ks(t,H));const R=m(e,["responseModalities"]);R!=null&&y(i,["responseModalities"],R);const I=m(e,["mediaResolution"]);I!=null&&y(i,["mediaResolution"],I);const P=m(e,["speechConfig"]);if(P!=null&&y(i,["speechConfig"],LT(P)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=m(e,["thinkingConfig"]);U!=null&&y(i,["thinkingConfig"],U);const L=m(e,["imageConfig"]);return L!=null&&y(i,["imageConfig"],bz(L)),i}function vz(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(f=>ez(f))),y(e,["candidates"],d)}const r=m(t,["modelVersion"]);r!=null&&y(e,["modelVersion"],r);const o=m(t,["promptFeedback"]);o!=null&&y(e,["promptFeedback"],o);const l=m(t,["responseId"]);l!=null&&y(e,["responseId"],l);const c=m(t,["usageMetadata"]);return c!=null&&y(e,["usageMetadata"],c),e}function _z(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],zu(t,i)),n}function Tz(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],zu(t,i)),n}function Ez(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function Sz(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function bz(t){const e={},n=m(t,["aspectRatio"]);n!=null&&y(e,["aspectRatio"],n);const i=m(t,["imageSize"]);if(i!=null&&y(e,["imageSize"],i),m(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(m(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function wz(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["request","model"],St(t,i));const r=m(e,["contents"]);if(r!=null){let c=br(r);Array.isArray(c)&&(c=c.map(d=>ND(d))),y(n,["request","contents"],c)}const o=m(e,["metadata"]);o!=null&&y(n,["metadata"],o);const l=m(e,["config"]);return l!=null&&y(n,["request","generationConfig"],yz(t,l,m(n,["request"],{}))),n}function xz(t){const e={},n=m(t,["response"]);n!=null&&y(e,["response"],vz(n));const i=m(t,["error"]);return i!=null&&y(e,["error"],i),e}function Az(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);if(e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),m(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Cz(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);e!==void 0&&r!=null&&y(e,["_query","pageToken"],r);const o=m(t,["filter"]);return e!==void 0&&o!=null&&y(e,["_query","filter"],o),n}function Iz(t){const e={},n=m(t,["config"]);return n!=null&&Az(n,e),e}function Rz(t){const e={},n=m(t,["config"]);return n!=null&&Cz(n,e),e}function Nz(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["operations"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>wp(l))),y(e,["batchJobs"],o)}return e}function Pz(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["batchPredictionJobs"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>G0(l))),y(e,["batchJobs"],o)}return e}function Dz(t){const e={},n=m(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],pz(o));const l=m(t,["functionCall"]);l!=null&&y(e,["functionCall"],mz(l));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=m(t,["inlineData"]);d!=null&&y(e,["inlineData"],Q9(d));const f=m(t,["text"]);f!=null&&y(e,["text"],f);const p=m(t,["thought"]);p!=null&&y(e,["thought"],p);const v=m(t,["thoughtSignature"]);v!=null&&y(e,["thoughtSignature"],v);const T=m(t,["videoMetadata"]);return T!=null&&y(e,["videoMetadata"],T),e}function Mz(t){const e={},n=m(t,["category"]);if(n!=null&&y(e,["category"],n),m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=m(t,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function kz(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&y(e,["functionCallingConfig"],gz(n));const i=m(t,["retrievalConfig"]);return i!=null&&y(e,["retrievalConfig"],i),e}function Vz(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(v=>v)),y(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&y(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],Ez(c));const d=m(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],Sz(d));const f=m(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Hs;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Hs||(Hs={}));class al{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!i||Object.keys(i).length===0?l={config:{}}:typeof i=="object"?l=Object.assign({},i):l=i,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(o=(r=l.config)===null||r===void 0?void 0:r.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lz extends $s{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new al(Hs.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=tI(this.apiClient,e),i=n._url,r=ve("{model}:batchGenerateContent",i),c=n.batch.inputConfig.requests,d=c.requests,f=[];for(const p of d){const v=Object.assign({},p);if(v.systemInstruction){const T=v.systemInstruction;delete v.systemInstruction;const b=v.request;b.systemInstruction=T,v.request=b}f.push(v)}return c.requests=f,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const o=this.getGcsUri(e),l=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?i.dest=`${o.slice(0,-6)}/dest`:i.dest=`${o}_dest_${r}`;else if(l)i.dest=`${l}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=rz(this.apiClient,e);return c=ve("batchPredictionJobs",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>G0(p))}else{const f=tI(this.apiClient,e);return c=ve("{model}:batchGenerateContent",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>wp(p))}}async createEmbeddingsInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=oz(this.apiClient,e);return o=ve("{model}:asyncBatchEmbedContent",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>wp(d))}}async get(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=Tz(this.apiClient,e);return c=ve("batchPredictionJobs/{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>G0(p))}else{const f=_z(this.apiClient,e);return c=ve("batches/{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>wp(p))}}async cancel(e){var n,i,r,o;let l="",c={};if(this.apiClient.isVertexAI()){const d=Z9(this.apiClient,e);l=ve("batchPredictionJobs/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=X9(this.apiClient,e);l=ve("batches/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=Rz(e);return c=ve("batchPredictionJobs",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=Pz(p),T=new QC;return Object.assign(T,v),T})}else{const f=Iz(e);return c=ve("batches",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=Nz(p),T=new QC;return Object.assign(T,v),T})}}async delete(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=lz(this.apiClient,e);return c=ve("batchPredictionJobs/{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>cz(p))}else{const f=az(this.apiClient,e);return c=ve("batches/{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>uz(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Oz(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function nI(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>oq(o))),y(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function Uz(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const r=m(t,["expireTime"]);e!==void 0&&r!=null&&y(e,["expireTime"],r);const o=m(t,["displayName"]);e!==void 0&&o!=null&&y(e,["displayName"],o);const l=m(t,["contents"]);if(e!==void 0&&l!=null){let p=br(l);Array.isArray(p)&&(p=p.map(v=>nI(v))),y(e,["contents"],p)}const c=m(t,["systemInstruction"]);e!==void 0&&c!=null&&y(e,["systemInstruction"],nI(di(c)));const d=m(t,["tools"]);if(e!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(v=>lq(v))),y(e,["tools"],p)}const f=m(t,["toolConfig"]);if(e!==void 0&&f!=null&&y(e,["toolConfig"],aq(f)),m(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Fz(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const r=m(t,["expireTime"]);e!==void 0&&r!=null&&y(e,["expireTime"],r);const o=m(t,["displayName"]);e!==void 0&&o!=null&&y(e,["displayName"],o);const l=m(t,["contents"]);if(e!==void 0&&l!=null){let v=br(l);Array.isArray(v)&&(v=v.map(T=>T)),y(e,["contents"],v)}const c=m(t,["systemInstruction"]);e!==void 0&&c!=null&&y(e,["systemInstruction"],di(c));const d=m(t,["tools"]);if(e!==void 0&&d!=null){let v=d;Array.isArray(v)&&(v=v.map(T=>uq(T))),y(e,["tools"],v)}const f=m(t,["toolConfig"]);e!==void 0&&f!=null&&y(e,["toolConfig"],f);const p=m(t,["kmsKeyName"]);return e!==void 0&&p!=null&&y(e,["encryption_spec","kmsKeyName"],p),n}function Bz(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["model"],vD(t,i));const r=m(e,["config"]);return r!=null&&Uz(r,n),n}function zz(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["model"],vD(t,i));const r=m(e,["config"]);return r!=null&&Fz(r,n),n}function qz(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Ks(t,i)),n}function Hz(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Ks(t,i)),n}function Gz(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function jz(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function $z(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Kz(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const i=m(t,["args"]);i!=null&&y(e,["args"],i);const r=m(t,["name"]);if(r!=null&&y(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Yz(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const i=m(t,["allowedFunctionNames"]);if(i!=null&&y(e,["allowedFunctionNames"],i),m(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Jz(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&y(e,["description"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const r=m(t,["parameters"]);r!=null&&y(e,["parameters"],r);const o=m(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const l=m(t,["response"]);l!=null&&y(e,["response"],l);const c=m(t,["responseJsonSchema"]);return c!=null&&y(e,["responseJsonSchema"],c),e}function Wz(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Ks(t,i)),n}function Qz(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Ks(t,i)),n}function Xz(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function Zz(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function eq(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),n}function tq(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),n}function nq(t){const e={},n=m(t,["config"]);return n!=null&&eq(n,e),e}function iq(t){const e={},n=m(t,["config"]);return n!=null&&tq(n,e),e}function rq(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["cachedContents"],o)}return e}function sq(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["cachedContents"],o)}return e}function oq(t){const e={},n=m(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],$z(o));const l=m(t,["functionCall"]);l!=null&&y(e,["functionCall"],Kz(l));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=m(t,["inlineData"]);d!=null&&y(e,["inlineData"],Oz(d));const f=m(t,["text"]);f!=null&&y(e,["text"],f);const p=m(t,["thought"]);p!=null&&y(e,["thought"],p);const v=m(t,["thoughtSignature"]);v!=null&&y(e,["thoughtSignature"],v);const T=m(t,["videoMetadata"]);return T!=null&&y(e,["videoMetadata"],T),e}function aq(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&y(e,["functionCallingConfig"],Yz(n));const i=m(t,["retrievalConfig"]);return i!=null&&y(e,["retrievalConfig"],i),e}function lq(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(v=>v)),y(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&y(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],Xz(c));const d=m(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],Zz(d));const f=m(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}function uq(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(T=>Jz(T))),y(e,["functionDeclarations"],v)}const i=m(t,["retrieval"]);i!=null&&y(e,["retrieval"],i);const r=m(t,["googleSearchRetrieval"]);r!=null&&y(e,["googleSearchRetrieval"],r);const o=m(t,["computerUse"]);if(o!=null&&y(e,["computerUse"],o),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=m(t,["codeExecution"]);l!=null&&y(e,["codeExecution"],l);const c=m(t,["enterpriseWebSearch"]);c!=null&&y(e,["enterpriseWebSearch"],c);const d=m(t,["googleMaps"]);d!=null&&y(e,["googleMaps"],d);const f=m(t,["googleSearch"]);f!=null&&y(e,["googleSearch"],f);const p=m(t,["urlContext"]);return p!=null&&y(e,["urlContext"],p),e}function cq(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const r=m(t,["expireTime"]);return e!==void 0&&r!=null&&y(e,["expireTime"],r),n}function dq(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const r=m(t,["expireTime"]);return e!==void 0&&r!=null&&y(e,["expireTime"],r),n}function fq(t,e){const n={},i=m(e,["name"]);i!=null&&y(n,["_url","name"],Ks(t,i));const r=m(e,["config"]);return r!=null&&cq(r,n),n}function hq(t,e){const n={},i=m(e,["name"]);i!=null&&y(n,["_url","name"],Ks(t,i));const r=m(e,["config"]);return r!=null&&dq(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pq extends $s{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new al(Hs.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=zz(this.apiClient,e);return c=ve("cachedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=Bz(this.apiClient,e);return c=ve("cachedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async get(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=Qz(this.apiClient,e);return c=ve("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=Wz(this.apiClient,e);return c=ve("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async delete(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=Hz(this.apiClient,e);return c=ve("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=jz(p),T=new JC;return Object.assign(T,v),T})}else{const f=qz(this.apiClient,e);return c=ve("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=Gz(p),T=new JC;return Object.assign(T,v),T})}}async update(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=hq(this.apiClient,e);return c=ve("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=fq(this.apiClient,e);return c=ve("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async listInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=iq(e);return c=ve("cachedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=sq(p),T=new WC;return Object.assign(T,v),T})}else{const f=nq(e);return c=ve("cachedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=rq(p),T=new WC;return Object.assign(T,v),T})}}}function iI(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Kt(t){return this instanceof Kt?(this.v=t,this):new Kt(t)}function mu(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),r[Symbol.asyncIterator]=function(){return this},r;function l(b){return function(C){return Promise.resolve(C).then(b,v)}}function c(b,C){i[b]&&(r[b]=function(N){return new Promise(function(M,V){o.push([b,N,M,V])>1||d(b,N)})},C&&(r[b]=C(r[b])))}function d(b,C){try{f(i[b](C))}catch(N){T(o[0][3],N)}}function f(b){b.value instanceof Kt?Promise.resolve(b.value.v).then(p,v):T(o[0][2],b)}function p(b){d("next",b)}function v(b){d("throw",b)}function T(b,C){b(C),o.shift(),o.length&&d(o[0][0],o[0][1])}}function md(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof iI=="function"?iI(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(l){return new Promise(function(c,d){l=t[o](l),r(c,d,l.done,l.value)})}}function r(o,l,c,d){Promise.resolve(d).then(function(f){o({value:f,done:c})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mq(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:PD(n)}function PD(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function gq(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function rI(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let o=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),o&&!PD(t[i])&&(o=!1),i++;o?e.push(...r):e.pop()}return e}class yq{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new vq(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class vq{constructor(e,n,i,r={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=o,this.sendPromise=Promise.resolve(),gq(o)}async sendMessage(e){var n;await this.sendPromise;const i=di(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,l,c;const d=await r,f=(l=(o=d.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content,p=d.automaticFunctionCallingHistory,v=this.getHistory(!0).length;let T=[];p!=null&&(T=(c=p.slice(v))!==null&&c!==void 0?c:[]);const b=f?[f]:[];this.recordHistory(i,b,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=di(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const o=await r;return this.processStreamResponse(o,i)}getHistory(e=!1){const n=e?rI(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,r;return mu(this,arguments,function*(){var l,c,d,f;const p=[];try{for(var v=!0,T=md(e),b;b=yield Kt(T.next()),l=b.done,!l;v=!0){f=b.value,v=!1;const C=f;if(mq(C)){const N=(r=(i=C.candidates)===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.content;N!==void 0&&p.push(N)}yield yield Kt(C)}}catch(C){c={error:C}}finally{try{!v&&!l&&(d=T.return)&&(yield Kt(d.call(T)))}finally{if(c)throw c.error}}this.recordHistory(n,p)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(o=>o.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...rI(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rg extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,rg.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _q(t){const e={},n=m(t,["file"]);return n!=null&&y(e,["file"],n),e}function Tq(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function Eq(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","file"],wD(n)),e}function Sq(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function bq(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","file"],wD(n)),e}function wq(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),n}function xq(t){const e={},n=m(t,["config"]);return n!=null&&wq(n,e),e}function Aq(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["files"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cq extends $s{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new al(Hs.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=xq(e);return o=ve("files",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const f=Aq(d),p=new P9;return Object.assign(p,f),p})}}async createInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=_q(e);return o=ve("upload/v1beta/files",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=Tq(d),p=new D9;return Object.assign(p,f),p})}}async get(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=bq(e);return o=ve("files/{file}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Eq(e);return o=ve("files/{file}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const f=Sq(d),p=new M9;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xp(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Iq(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>Gq(o))),y(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function Rq(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Nq(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const i=m(t,["args"]);i!=null&&y(e,["args"],i);const r=m(t,["name"]);if(r!=null&&y(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Pq(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&y(e,["description"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const r=m(t,["parameters"]);r!=null&&y(e,["parameters"],r);const o=m(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const l=m(t,["response"]);l!=null&&y(e,["response"],l);const c=m(t,["responseJsonSchema"]);return c!=null&&y(e,["responseJsonSchema"],c),e}function Dq(t){const e={},n=m(t,["modelSelectionConfig"]);n!=null&&y(e,["modelConfig"],n);const i=m(t,["responseJsonSchema"]);i!=null&&y(e,["responseJsonSchema"],i);const r=m(t,["audioTimestamp"]);r!=null&&y(e,["audioTimestamp"],r);const o=m(t,["candidateCount"]);o!=null&&y(e,["candidateCount"],o);const l=m(t,["enableAffectiveDialog"]);l!=null&&y(e,["enableAffectiveDialog"],l);const c=m(t,["frequencyPenalty"]);c!=null&&y(e,["frequencyPenalty"],c);const d=m(t,["logprobs"]);d!=null&&y(e,["logprobs"],d);const f=m(t,["maxOutputTokens"]);f!=null&&y(e,["maxOutputTokens"],f);const p=m(t,["mediaResolution"]);p!=null&&y(e,["mediaResolution"],p);const v=m(t,["presencePenalty"]);v!=null&&y(e,["presencePenalty"],v);const T=m(t,["responseLogprobs"]);T!=null&&y(e,["responseLogprobs"],T);const b=m(t,["responseMimeType"]);b!=null&&y(e,["responseMimeType"],b);const C=m(t,["responseModalities"]);C!=null&&y(e,["responseModalities"],C);const N=m(t,["responseSchema"]);N!=null&&y(e,["responseSchema"],N);const M=m(t,["routingConfig"]);M!=null&&y(e,["routingConfig"],M);const V=m(t,["seed"]);V!=null&&y(e,["seed"],V);const k=m(t,["speechConfig"]);k!=null&&y(e,["speechConfig"],DD(k));const F=m(t,["stopSequences"]);F!=null&&y(e,["stopSequences"],F);const G=m(t,["temperature"]);G!=null&&y(e,["temperature"],G);const K=m(t,["thinkingConfig"]);K!=null&&y(e,["thinkingConfig"],K);const H=m(t,["topK"]);H!=null&&y(e,["topK"],H);const R=m(t,["topP"]);if(R!=null&&y(e,["topP"],R),m(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Mq(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function kq(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function Vq(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],i);const r=m(t,["responseModalities"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","responseModalities"],r);const o=m(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const l=m(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=m(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const d=m(t,["maxOutputTokens"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","maxOutputTokens"],d);const f=m(t,["mediaResolution"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","mediaResolution"],f);const p=m(t,["seed"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","seed"],p);const v=m(t,["speechConfig"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","speechConfig"],OT(v));const T=m(t,["thinkingConfig"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","thinkingConfig"],T);const b=m(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],b);const C=m(t,["systemInstruction"]);e!==void 0&&C!=null&&y(e,["setup","systemInstruction"],Iq(di(C)));const N=m(t,["tools"]);if(e!==void 0&&N!=null){let H=Bu(N);Array.isArray(H)&&(H=H.map(R=>$q(Fu(R)))),y(e,["setup","tools"],H)}const M=m(t,["sessionResumption"]);e!==void 0&&M!=null&&y(e,["setup","sessionResumption"],jq(M));const V=m(t,["inputAudioTranscription"]);e!==void 0&&V!=null&&y(e,["setup","inputAudioTranscription"],V);const k=m(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&y(e,["setup","outputAudioTranscription"],k);const F=m(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&y(e,["setup","realtimeInputConfig"],F);const G=m(t,["contextWindowCompression"]);e!==void 0&&G!=null&&y(e,["setup","contextWindowCompression"],G);const K=m(t,["proactivity"]);return e!==void 0&&K!=null&&y(e,["setup","proactivity"],K),n}function Lq(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],Dq(i));const r=m(t,["responseModalities"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","responseModalities"],r);const o=m(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const l=m(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=m(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const d=m(t,["maxOutputTokens"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","maxOutputTokens"],d);const f=m(t,["mediaResolution"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","mediaResolution"],f);const p=m(t,["seed"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","seed"],p);const v=m(t,["speechConfig"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","speechConfig"],DD(OT(v)));const T=m(t,["thinkingConfig"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","thinkingConfig"],T);const b=m(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],b);const C=m(t,["systemInstruction"]);e!==void 0&&C!=null&&y(e,["setup","systemInstruction"],di(C));const N=m(t,["tools"]);if(e!==void 0&&N!=null){let H=Bu(N);Array.isArray(H)&&(H=H.map(R=>Kq(Fu(R)))),y(e,["setup","tools"],H)}const M=m(t,["sessionResumption"]);e!==void 0&&M!=null&&y(e,["setup","sessionResumption"],M);const V=m(t,["inputAudioTranscription"]);e!==void 0&&V!=null&&y(e,["setup","inputAudioTranscription"],V);const k=m(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&y(e,["setup","outputAudioTranscription"],k);const F=m(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&y(e,["setup","realtimeInputConfig"],F);const G=m(t,["contextWindowCompression"]);e!==void 0&&G!=null&&y(e,["setup","contextWindowCompression"],G);const K=m(t,["proactivity"]);return e!==void 0&&K!=null&&y(e,["setup","proactivity"],K),n}function Oq(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["setup","model"],St(t,i));const r=m(e,["config"]);return r!=null&&y(n,["config"],Vq(r,n)),n}function Uq(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["setup","model"],St(t,i));const r=m(e,["config"]);return r!=null&&y(n,["config"],Lq(r,n)),n}function Fq(t){const e={},n=m(t,["musicGenerationConfig"]);return n!=null&&y(e,["musicGenerationConfig"],n),e}function Bq(t){const e={},n=m(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),y(e,["weightedPrompts"],i)}return e}function zq(t){const e={},n=m(t,["media"]);if(n!=null){let f=_D(n);Array.isArray(f)&&(f=f.map(p=>xp(p))),y(e,["mediaChunks"],f)}const i=m(t,["audio"]);i!=null&&y(e,["audio"],xp(ED(i)));const r=m(t,["audioStreamEnd"]);r!=null&&y(e,["audioStreamEnd"],r);const o=m(t,["video"]);o!=null&&y(e,["video"],xp(TD(o)));const l=m(t,["text"]);l!=null&&y(e,["text"],l);const c=m(t,["activityStart"]);c!=null&&y(e,["activityStart"],c);const d=m(t,["activityEnd"]);return d!=null&&y(e,["activityEnd"],d),e}function qq(t){const e={},n=m(t,["media"]);if(n!=null){let f=_D(n);Array.isArray(f)&&(f=f.map(p=>p)),y(e,["mediaChunks"],f)}const i=m(t,["audio"]);i!=null&&y(e,["audio"],ED(i));const r=m(t,["audioStreamEnd"]);r!=null&&y(e,["audioStreamEnd"],r);const o=m(t,["video"]);o!=null&&y(e,["video"],TD(o));const l=m(t,["text"]);l!=null&&y(e,["text"],l);const c=m(t,["activityStart"]);c!=null&&y(e,["activityStart"],c);const d=m(t,["activityEnd"]);return d!=null&&y(e,["activityEnd"],d),e}function Hq(t){const e={},n=m(t,["setupComplete"]);n!=null&&y(e,["setupComplete"],n);const i=m(t,["serverContent"]);i!=null&&y(e,["serverContent"],i);const r=m(t,["toolCall"]);r!=null&&y(e,["toolCall"],r);const o=m(t,["toolCallCancellation"]);o!=null&&y(e,["toolCallCancellation"],o);const l=m(t,["usageMetadata"]);l!=null&&y(e,["usageMetadata"],Yq(l));const c=m(t,["goAway"]);c!=null&&y(e,["goAway"],c);const d=m(t,["sessionResumptionUpdate"]);return d!=null&&y(e,["sessionResumptionUpdate"],d),e}function Gq(t){const e={},n=m(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],Rq(o));const l=m(t,["functionCall"]);l!=null&&y(e,["functionCall"],Nq(l));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=m(t,["inlineData"]);d!=null&&y(e,["inlineData"],xp(d));const f=m(t,["text"]);f!=null&&y(e,["text"],f);const p=m(t,["thought"]);p!=null&&y(e,["thought"],p);const v=m(t,["thoughtSignature"]);v!=null&&y(e,["thoughtSignature"],v);const T=m(t,["videoMetadata"]);return T!=null&&y(e,["videoMetadata"],T),e}function jq(t){const e={},n=m(t,["handle"]);if(n!=null&&y(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function DD(t){const e={},n=m(t,["languageCode"]);n!=null&&y(e,["languageCode"],n);const i=m(t,["voiceConfig"]);if(i!=null&&y(e,["voiceConfig"],i),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function $q(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(v=>v)),y(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&y(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],Mq(c));const d=m(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],kq(d));const f=m(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}function Kq(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(T=>Pq(T))),y(e,["functionDeclarations"],v)}const i=m(t,["retrieval"]);i!=null&&y(e,["retrieval"],i);const r=m(t,["googleSearchRetrieval"]);r!=null&&y(e,["googleSearchRetrieval"],r);const o=m(t,["computerUse"]);if(o!=null&&y(e,["computerUse"],o),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=m(t,["codeExecution"]);l!=null&&y(e,["codeExecution"],l);const c=m(t,["enterpriseWebSearch"]);c!=null&&y(e,["enterpriseWebSearch"],c);const d=m(t,["googleMaps"]);d!=null&&y(e,["googleMaps"],d);const f=m(t,["googleSearch"]);f!=null&&y(e,["googleSearch"],f);const p=m(t,["urlContext"]);return p!=null&&y(e,["urlContext"],p),e}function Yq(t){const e={},n=m(t,["promptTokenCount"]);n!=null&&y(e,["promptTokenCount"],n);const i=m(t,["cachedContentTokenCount"]);i!=null&&y(e,["cachedContentTokenCount"],i);const r=m(t,["candidatesTokenCount"]);r!=null&&y(e,["responseTokenCount"],r);const o=m(t,["toolUsePromptTokenCount"]);o!=null&&y(e,["toolUsePromptTokenCount"],o);const l=m(t,["thoughtsTokenCount"]);l!=null&&y(e,["thoughtsTokenCount"],l);const c=m(t,["totalTokenCount"]);c!=null&&y(e,["totalTokenCount"],c);const d=m(t,["promptTokensDetails"]);if(d!=null){let b=d;Array.isArray(b)&&(b=b.map(C=>C)),y(e,["promptTokensDetails"],b)}const f=m(t,["cacheTokensDetails"]);if(f!=null){let b=f;Array.isArray(b)&&(b=b.map(C=>C)),y(e,["cacheTokensDetails"],b)}const p=m(t,["candidatesTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(C=>C)),y(e,["responseTokensDetails"],b)}const v=m(t,["toolUsePromptTokensDetails"]);if(v!=null){let b=v;Array.isArray(b)&&(b=b.map(C=>C)),y(e,["toolUsePromptTokensDetails"],b)}const T=m(t,["trafficType"]);return T!=null&&y(e,["trafficType"],T),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jq(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Wq(t){const e={},n=m(t,["content"]);n!=null&&y(e,["content"],n);const i=m(t,["citationMetadata"]);i!=null&&y(e,["citationMetadata"],Qq(i));const r=m(t,["tokenCount"]);r!=null&&y(e,["tokenCount"],r);const o=m(t,["finishReason"]);o!=null&&y(e,["finishReason"],o);const l=m(t,["avgLogprobs"]);l!=null&&y(e,["avgLogprobs"],l);const c=m(t,["groundingMetadata"]);c!=null&&y(e,["groundingMetadata"],c);const d=m(t,["index"]);d!=null&&y(e,["index"],d);const f=m(t,["logprobsResult"]);f!=null&&y(e,["logprobsResult"],f);const p=m(t,["safetyRatings"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(b=>b)),y(e,["safetyRatings"],T)}const v=m(t,["urlContextMetadata"]);return v!=null&&y(e,["urlContextMetadata"],v),e}function Qq(t){const e={},n=m(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),y(e,["citations"],i)}return e}function Xq(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],St(t,i));const r=m(e,["contents"]);if(r!=null){let o=br(r);Array.isArray(o)&&(o=o.map(l=>l)),y(n,["contents"],o)}return n}function Zq(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),y(e,["tokensInfo"],r)}return e}function eH(t){const e={},n=m(t,["values"]);n!=null&&y(e,["values"],n);const i=m(t,["statistics"]);return i!=null&&y(e,["statistics"],tH(i)),e}function tH(t){const e={},n=m(t,["truncated"]);n!=null&&y(e,["truncated"],n);const i=m(t,["token_count"]);return i!=null&&y(e,["tokenCount"],i),e}function sg(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>c8(o))),y(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function nH(t){const e={},n=m(t,["controlType"]);n!=null&&y(e,["controlType"],n);const i=m(t,["enableControlImageComputation"]);return i!=null&&y(e,["computeControl"],i),e}function iH(t){const e={};if(m(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(m(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(m(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function rH(t,e){const n={},i=m(t,["systemInstruction"]);e!==void 0&&i!=null&&y(e,["systemInstruction"],di(i));const r=m(t,["tools"]);if(e!==void 0&&r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>OD(c))),y(e,["tools"],l)}const o=m(t,["generationConfig"]);return e!==void 0&&o!=null&&y(e,["generationConfig"],JH(o)),n}function sH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],St(t,i));const r=m(e,["contents"]);if(r!=null){let l=br(r);Array.isArray(l)&&(l=l.map(c=>sg(c))),y(n,["contents"],l)}const o=m(e,["config"]);return o!=null&&iH(o),n}function oH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],St(t,i));const r=m(e,["contents"]);if(r!=null){let l=br(r);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["contents"],l)}const o=m(e,["config"]);return o!=null&&rH(o,n),n}function aH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["totalTokens"]);i!=null&&y(e,["totalTokens"],i);const r=m(t,["cachedContentTokenCount"]);return r!=null&&y(e,["cachedContentTokenCount"],r),e}function lH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["totalTokens"]);return i!=null&&y(e,["totalTokens"],i),e}function uH(t,e){const n={},i=m(e,["model"]);return i!=null&&y(n,["_url","name"],St(t,i)),n}function cH(t,e){const n={},i=m(e,["model"]);return i!=null&&y(n,["_url","name"],St(t,i)),n}function dH(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function fH(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function hH(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const r=m(t,["negativePrompt"]);e!==void 0&&r!=null&&y(e,["parameters","negativePrompt"],r);const o=m(t,["numberOfImages"]);e!==void 0&&o!=null&&y(e,["parameters","sampleCount"],o);const l=m(t,["aspectRatio"]);e!==void 0&&l!=null&&y(e,["parameters","aspectRatio"],l);const c=m(t,["guidanceScale"]);e!==void 0&&c!=null&&y(e,["parameters","guidanceScale"],c);const d=m(t,["seed"]);e!==void 0&&d!=null&&y(e,["parameters","seed"],d);const f=m(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&y(e,["parameters","safetySetting"],f);const p=m(t,["personGeneration"]);e!==void 0&&p!=null&&y(e,["parameters","personGeneration"],p);const v=m(t,["includeSafetyAttributes"]);e!==void 0&&v!=null&&y(e,["parameters","includeSafetyAttributes"],v);const T=m(t,["includeRaiReason"]);e!==void 0&&T!=null&&y(e,["parameters","includeRaiReason"],T);const b=m(t,["language"]);e!==void 0&&b!=null&&y(e,["parameters","language"],b);const C=m(t,["outputMimeType"]);e!==void 0&&C!=null&&y(e,["parameters","outputOptions","mimeType"],C);const N=m(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&y(e,["parameters","outputOptions","compressionQuality"],N);const M=m(t,["addWatermark"]);e!==void 0&&M!=null&&y(e,["parameters","addWatermark"],M);const V=m(t,["labels"]);e!==void 0&&V!=null&&y(e,["labels"],V);const k=m(t,["editMode"]);e!==void 0&&k!=null&&y(e,["parameters","editMode"],k);const F=m(t,["baseSteps"]);return e!==void 0&&F!=null&&y(e,["parameters","editConfig","baseSteps"],F),n}function pH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],St(t,i));const r=m(e,["prompt"]);r!=null&&y(n,["instances[0]","prompt"],r);const o=m(e,["referenceImages"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>g8(d))),y(n,["instances[0]","referenceImages"],c)}const l=m(e,["config"]);return l!=null&&hH(l,n),n}function mH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>og(o))),y(e,["generatedImages"],r)}return e}function gH(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&y(e,["requests[]","taskType"],i);const r=m(t,["title"]);e!==void 0&&r!=null&&y(e,["requests[]","title"],r);const o=m(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&y(e,["requests[]","outputDimensionality"],o),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function yH(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&y(e,["instances[]","task_type"],i);const r=m(t,["title"]);e!==void 0&&r!=null&&y(e,["instances[]","title"],r);const o=m(t,["outputDimensionality"]);e!==void 0&&o!=null&&y(e,["parameters","outputDimensionality"],o);const l=m(t,["mimeType"]);e!==void 0&&l!=null&&y(e,["instances[]","mimeType"],l);const c=m(t,["autoTruncate"]);return e!==void 0&&c!=null&&y(e,["parameters","autoTruncate"],c),n}function vH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],St(t,i));const r=m(e,["contents"]);if(r!=null){let c=kT(t,r);Array.isArray(c)&&(c=c.map(d=>d)),y(n,["requests[]","content"],c)}const o=m(e,["config"]);o!=null&&gH(o,n);const l=m(e,["model"]);return l!==void 0&&y(n,["requests[]","model"],St(t,l)),n}function _H(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],St(t,i));const r=m(e,["contents"]);if(r!=null){let l=kT(t,r);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["instances[]","content"],l)}const o=m(e,["config"]);return o!=null&&yH(o,n),n}function TH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["embeddings"],o)}const r=m(t,["metadata"]);return r!=null&&y(e,["metadata"],r),e}function EH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>eH(l))),y(e,["embeddings"],o)}const r=m(t,["metadata"]);return r!=null&&y(e,["metadata"],r),e}function SH(t){const e={},n=m(t,["endpoint"]);n!=null&&y(e,["name"],n);const i=m(t,["deployedModelId"]);return i!=null&&y(e,["deployedModelId"],i),e}function bH(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function wH(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const i=m(t,["args"]);i!=null&&y(e,["args"],i);const r=m(t,["name"]);if(r!=null&&y(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function xH(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const i=m(t,["allowedFunctionNames"]);if(i!=null&&y(e,["allowedFunctionNames"],i),m(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function AH(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&y(e,["description"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const r=m(t,["parameters"]);r!=null&&y(e,["parameters"],r);const o=m(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const l=m(t,["response"]);l!=null&&y(e,["response"],l);const c=m(t,["responseJsonSchema"]);return c!=null&&y(e,["responseJsonSchema"],c),e}function CH(t,e,n){const i={},r=m(e,["systemInstruction"]);n!==void 0&&r!=null&&y(n,["systemInstruction"],sg(di(r)));const o=m(e,["temperature"]);o!=null&&y(i,["temperature"],o);const l=m(e,["topP"]);l!=null&&y(i,["topP"],l);const c=m(e,["topK"]);c!=null&&y(i,["topK"],c);const d=m(e,["candidateCount"]);d!=null&&y(i,["candidateCount"],d);const f=m(e,["maxOutputTokens"]);f!=null&&y(i,["maxOutputTokens"],f);const p=m(e,["stopSequences"]);p!=null&&y(i,["stopSequences"],p);const v=m(e,["responseLogprobs"]);v!=null&&y(i,["responseLogprobs"],v);const T=m(e,["logprobs"]);T!=null&&y(i,["logprobs"],T);const b=m(e,["presencePenalty"]);b!=null&&y(i,["presencePenalty"],b);const C=m(e,["frequencyPenalty"]);C!=null&&y(i,["frequencyPenalty"],C);const N=m(e,["seed"]);N!=null&&y(i,["seed"],N);const M=m(e,["responseMimeType"]);M!=null&&y(i,["responseMimeType"],M);const V=m(e,["responseSchema"]);V!=null&&y(i,["responseSchema"],VT(V));const k=m(e,["responseJsonSchema"]);if(k!=null&&y(i,["responseJsonSchema"],k),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const F=m(e,["safetySettings"]);if(n!==void 0&&F!=null){let z=F;Array.isArray(z)&&(z=z.map(q=>y8(q))),y(n,["safetySettings"],z)}const G=m(e,["tools"]);if(n!==void 0&&G!=null){let z=Bu(G);Array.isArray(z)&&(z=z.map(q=>w8(Fu(q)))),y(n,["tools"],z)}const K=m(e,["toolConfig"]);if(n!==void 0&&K!=null&&y(n,["toolConfig"],b8(K)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const H=m(e,["cachedContent"]);n!==void 0&&H!=null&&y(n,["cachedContent"],Ks(t,H));const R=m(e,["responseModalities"]);R!=null&&y(i,["responseModalities"],R);const I=m(e,["mediaResolution"]);I!=null&&y(i,["mediaResolution"],I);const P=m(e,["speechConfig"]);if(P!=null&&y(i,["speechConfig"],LT(P)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=m(e,["thinkingConfig"]);U!=null&&y(i,["thinkingConfig"],U);const L=m(e,["imageConfig"]);return L!=null&&y(i,["imageConfig"],e8(L)),i}function IH(t,e,n){const i={},r=m(e,["systemInstruction"]);n!==void 0&&r!=null&&y(n,["systemInstruction"],di(r));const o=m(e,["temperature"]);o!=null&&y(i,["temperature"],o);const l=m(e,["topP"]);l!=null&&y(i,["topP"],l);const c=m(e,["topK"]);c!=null&&y(i,["topK"],c);const d=m(e,["candidateCount"]);d!=null&&y(i,["candidateCount"],d);const f=m(e,["maxOutputTokens"]);f!=null&&y(i,["maxOutputTokens"],f);const p=m(e,["stopSequences"]);p!=null&&y(i,["stopSequences"],p);const v=m(e,["responseLogprobs"]);v!=null&&y(i,["responseLogprobs"],v);const T=m(e,["logprobs"]);T!=null&&y(i,["logprobs"],T);const b=m(e,["presencePenalty"]);b!=null&&y(i,["presencePenalty"],b);const C=m(e,["frequencyPenalty"]);C!=null&&y(i,["frequencyPenalty"],C);const N=m(e,["seed"]);N!=null&&y(i,["seed"],N);const M=m(e,["responseMimeType"]);M!=null&&y(i,["responseMimeType"],M);const V=m(e,["responseSchema"]);V!=null&&y(i,["responseSchema"],VT(V));const k=m(e,["responseJsonSchema"]);k!=null&&y(i,["responseJsonSchema"],k);const F=m(e,["routingConfig"]);F!=null&&y(i,["routingConfig"],F);const G=m(e,["modelSelectionConfig"]);G!=null&&y(i,["modelConfig"],G);const K=m(e,["safetySettings"]);if(n!==void 0&&K!=null){let ee=K;Array.isArray(ee)&&(ee=ee.map(re=>re)),y(n,["safetySettings"],ee)}const H=m(e,["tools"]);if(n!==void 0&&H!=null){let ee=Bu(H);Array.isArray(ee)&&(ee=ee.map(re=>OD(Fu(re)))),y(n,["tools"],ee)}const R=m(e,["toolConfig"]);n!==void 0&&R!=null&&y(n,["toolConfig"],R);const I=m(e,["labels"]);n!==void 0&&I!=null&&y(n,["labels"],I);const P=m(e,["cachedContent"]);n!==void 0&&P!=null&&y(n,["cachedContent"],Ks(t,P));const U=m(e,["responseModalities"]);U!=null&&y(i,["responseModalities"],U);const L=m(e,["mediaResolution"]);L!=null&&y(i,["mediaResolution"],L);const z=m(e,["speechConfig"]);z!=null&&y(i,["speechConfig"],LD(LT(z)));const q=m(e,["audioTimestamp"]);q!=null&&y(i,["audioTimestamp"],q);const xe=m(e,["thinkingConfig"]);xe!=null&&y(i,["thinkingConfig"],xe);const Ie=m(e,["imageConfig"]);return Ie!=null&&y(i,["imageConfig"],t8(Ie)),i}function sI(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],St(t,i));const r=m(e,["contents"]);if(r!=null){let l=br(r);Array.isArray(l)&&(l=l.map(c=>sg(c))),y(n,["contents"],l)}const o=m(e,["config"]);return o!=null&&y(n,["generationConfig"],CH(t,o,n)),n}function oI(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],St(t,i));const r=m(e,["contents"]);if(r!=null){let l=br(r);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["contents"],l)}const o=m(e,["config"]);return o!=null&&y(n,["generationConfig"],IH(t,o,n)),n}function aI(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(f=>Wq(f))),y(e,["candidates"],d)}const r=m(t,["modelVersion"]);r!=null&&y(e,["modelVersion"],r);const o=m(t,["promptFeedback"]);o!=null&&y(e,["promptFeedback"],o);const l=m(t,["responseId"]);l!=null&&y(e,["responseId"],l);const c=m(t,["usageMetadata"]);return c!=null&&y(e,["usageMetadata"],c),e}function lI(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(p=>p)),y(e,["candidates"],f)}const r=m(t,["createTime"]);r!=null&&y(e,["createTime"],r);const o=m(t,["modelVersion"]);o!=null&&y(e,["modelVersion"],o);const l=m(t,["promptFeedback"]);l!=null&&y(e,["promptFeedback"],l);const c=m(t,["responseId"]);c!=null&&y(e,["responseId"],c);const d=m(t,["usageMetadata"]);return d!=null&&y(e,["usageMetadata"],d),e}function RH(t,e){const n={};if(m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=m(t,["numberOfImages"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const r=m(t,["aspectRatio"]);e!==void 0&&r!=null&&y(e,["parameters","aspectRatio"],r);const o=m(t,["guidanceScale"]);if(e!==void 0&&o!=null&&y(e,["parameters","guidanceScale"],o),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=m(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&y(e,["parameters","safetySetting"],l);const c=m(t,["personGeneration"]);e!==void 0&&c!=null&&y(e,["parameters","personGeneration"],c);const d=m(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&y(e,["parameters","includeSafetyAttributes"],d);const f=m(t,["includeRaiReason"]);e!==void 0&&f!=null&&y(e,["parameters","includeRaiReason"],f);const p=m(t,["language"]);e!==void 0&&p!=null&&y(e,["parameters","language"],p);const v=m(t,["outputMimeType"]);e!==void 0&&v!=null&&y(e,["parameters","outputOptions","mimeType"],v);const T=m(t,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&y(e,["parameters","outputOptions","compressionQuality"],T),m(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(m(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=m(t,["imageSize"]);if(e!==void 0&&b!=null&&y(e,["parameters","sampleImageSize"],b),m(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function NH(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const r=m(t,["negativePrompt"]);e!==void 0&&r!=null&&y(e,["parameters","negativePrompt"],r);const o=m(t,["numberOfImages"]);e!==void 0&&o!=null&&y(e,["parameters","sampleCount"],o);const l=m(t,["aspectRatio"]);e!==void 0&&l!=null&&y(e,["parameters","aspectRatio"],l);const c=m(t,["guidanceScale"]);e!==void 0&&c!=null&&y(e,["parameters","guidanceScale"],c);const d=m(t,["seed"]);e!==void 0&&d!=null&&y(e,["parameters","seed"],d);const f=m(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&y(e,["parameters","safetySetting"],f);const p=m(t,["personGeneration"]);e!==void 0&&p!=null&&y(e,["parameters","personGeneration"],p);const v=m(t,["includeSafetyAttributes"]);e!==void 0&&v!=null&&y(e,["parameters","includeSafetyAttributes"],v);const T=m(t,["includeRaiReason"]);e!==void 0&&T!=null&&y(e,["parameters","includeRaiReason"],T);const b=m(t,["language"]);e!==void 0&&b!=null&&y(e,["parameters","language"],b);const C=m(t,["outputMimeType"]);e!==void 0&&C!=null&&y(e,["parameters","outputOptions","mimeType"],C);const N=m(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&y(e,["parameters","outputOptions","compressionQuality"],N);const M=m(t,["addWatermark"]);e!==void 0&&M!=null&&y(e,["parameters","addWatermark"],M);const V=m(t,["labels"]);e!==void 0&&V!=null&&y(e,["labels"],V);const k=m(t,["imageSize"]);e!==void 0&&k!=null&&y(e,["parameters","sampleImageSize"],k);const F=m(t,["enhancePrompt"]);return e!==void 0&&F!=null&&y(e,["parameters","enhancePrompt"],F),n}function PH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],St(t,i));const r=m(e,["prompt"]);r!=null&&y(n,["instances[0]","prompt"],r);const o=m(e,["config"]);return o!=null&&RH(o,n),n}function DH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],St(t,i));const r=m(e,["prompt"]);r!=null&&y(n,["instances[0]","prompt"],r);const o=m(e,["config"]);return o!=null&&NH(o,n),n}function MH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>jH(l))),y(e,["generatedImages"],o)}const r=m(t,["positivePromptSafetyAttributes"]);return r!=null&&y(e,["positivePromptSafetyAttributes"],kD(r)),e}function kH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>og(l))),y(e,["generatedImages"],o)}const r=m(t,["positivePromptSafetyAttributes"]);return r!=null&&y(e,["positivePromptSafetyAttributes"],VD(r)),e}function VH(t,e){const n={},i=m(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i),m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=m(t,["durationSeconds"]);if(e!==void 0&&r!=null&&y(e,["parameters","durationSeconds"],r),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=m(t,["aspectRatio"]);e!==void 0&&o!=null&&y(e,["parameters","aspectRatio"],o);const l=m(t,["resolution"]);e!==void 0&&l!=null&&y(e,["parameters","resolution"],l);const c=m(t,["personGeneration"]);if(e!==void 0&&c!=null&&y(e,["parameters","personGeneration"],c),m(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=m(t,["negativePrompt"]);e!==void 0&&d!=null&&y(e,["parameters","negativePrompt"],d);const f=m(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&y(e,["parameters","enhancePrompt"],f),m(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=m(t,["lastFrame"]);e!==void 0&&p!=null&&y(e,["instances[0]","lastFrame"],ag(p));const v=m(t,["referenceImages"]);if(e!==void 0&&v!=null){let T=v;Array.isArray(T)&&(T=T.map(b=>O8(b))),y(e,["instances[0]","referenceImages"],T)}if(m(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(m(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function LH(t,e){const n={},i=m(t,["numberOfVideos"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const r=m(t,["outputGcsUri"]);e!==void 0&&r!=null&&y(e,["parameters","storageUri"],r);const o=m(t,["fps"]);e!==void 0&&o!=null&&y(e,["parameters","fps"],o);const l=m(t,["durationSeconds"]);e!==void 0&&l!=null&&y(e,["parameters","durationSeconds"],l);const c=m(t,["seed"]);e!==void 0&&c!=null&&y(e,["parameters","seed"],c);const d=m(t,["aspectRatio"]);e!==void 0&&d!=null&&y(e,["parameters","aspectRatio"],d);const f=m(t,["resolution"]);e!==void 0&&f!=null&&y(e,["parameters","resolution"],f);const p=m(t,["personGeneration"]);e!==void 0&&p!=null&&y(e,["parameters","personGeneration"],p);const v=m(t,["pubsubTopic"]);e!==void 0&&v!=null&&y(e,["parameters","pubsubTopic"],v);const T=m(t,["negativePrompt"]);e!==void 0&&T!=null&&y(e,["parameters","negativePrompt"],T);const b=m(t,["enhancePrompt"]);e!==void 0&&b!=null&&y(e,["parameters","enhancePrompt"],b);const C=m(t,["generateAudio"]);e!==void 0&&C!=null&&y(e,["parameters","generateAudio"],C);const N=m(t,["lastFrame"]);e!==void 0&&N!=null&&y(e,["instances[0]","lastFrame"],Hr(N));const M=m(t,["referenceImages"]);if(e!==void 0&&M!=null){let F=M;Array.isArray(F)&&(F=F.map(G=>U8(G))),y(e,["instances[0]","referenceImages"],F)}const V=m(t,["mask"]);e!==void 0&&V!=null&&y(e,["instances[0]","mask"],L8(V));const k=m(t,["compressionQuality"]);return e!==void 0&&k!=null&&y(e,["parameters","compressionQuality"],k),n}function OH(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response","generateVideoResponse"]);return l!=null&&y(e,["response"],zH(l)),e}function UH(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response"]);return l!=null&&y(e,["response"],qH(l)),e}function FH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],St(t,i));const r=m(e,["prompt"]);r!=null&&y(n,["instances[0]","prompt"],r);const o=m(e,["image"]);o!=null&&y(n,["instances[0]","image"],ag(o));const l=m(e,["video"]);l!=null&&y(n,["instances[0]","video"],UD(l));const c=m(e,["source"]);c!=null&&HH(c,n);const d=m(e,["config"]);return d!=null&&VH(d,n),n}function BH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],St(t,i));const r=m(e,["prompt"]);r!=null&&y(n,["instances[0]","prompt"],r);const o=m(e,["image"]);o!=null&&y(n,["instances[0]","image"],Hr(o));const l=m(e,["video"]);l!=null&&y(n,["instances[0]","video"],FD(l));const c=m(e,["source"]);c!=null&&GH(c,n);const d=m(e,["config"]);return d!=null&&LH(d,n),n}function zH(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>KH(l))),y(e,["generatedVideos"],o)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const r=m(t,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function qH(t){const e={},n=m(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>YH(l))),y(e,["generatedVideos"],o)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const r=m(t,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function HH(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const r=m(t,["image"]);e!==void 0&&r!=null&&y(e,["instances[0]","image"],ag(r));const o=m(t,["video"]);return e!==void 0&&o!=null&&y(e,["instances[0]","video"],UD(o)),n}function GH(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const r=m(t,["image"]);e!==void 0&&r!=null&&y(e,["instances[0]","image"],Hr(r));const o=m(t,["video"]);return e!==void 0&&o!=null&&y(e,["instances[0]","video"],FD(o)),n}function jH(t){const e={},n=m(t,["_self"]);n!=null&&y(e,["image"],n8(n));const i=m(t,["raiFilteredReason"]);i!=null&&y(e,["raiFilteredReason"],i);const r=m(t,["_self"]);return r!=null&&y(e,["safetyAttributes"],kD(r)),e}function og(t){const e={},n=m(t,["_self"]);n!=null&&y(e,["image"],MD(n));const i=m(t,["raiFilteredReason"]);i!=null&&y(e,["raiFilteredReason"],i);const r=m(t,["_self"]);r!=null&&y(e,["safetyAttributes"],VD(r));const o=m(t,["prompt"]);return o!=null&&y(e,["enhancedPrompt"],o),e}function $H(t){const e={},n=m(t,["_self"]);n!=null&&y(e,["mask"],MD(n));const i=m(t,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),y(e,["labels"],r)}return e}function KH(t){const e={},n=m(t,["video"]);return n!=null&&y(e,["video"],k8(n)),e}function YH(t){const e={},n=m(t,["_self"]);return n!=null&&y(e,["video"],V8(n)),e}function JH(t){const e={},n=m(t,["modelSelectionConfig"]);n!=null&&y(e,["modelConfig"],n);const i=m(t,["responseJsonSchema"]);i!=null&&y(e,["responseJsonSchema"],i);const r=m(t,["audioTimestamp"]);r!=null&&y(e,["audioTimestamp"],r);const o=m(t,["candidateCount"]);o!=null&&y(e,["candidateCount"],o);const l=m(t,["enableAffectiveDialog"]);l!=null&&y(e,["enableAffectiveDialog"],l);const c=m(t,["frequencyPenalty"]);c!=null&&y(e,["frequencyPenalty"],c);const d=m(t,["logprobs"]);d!=null&&y(e,["logprobs"],d);const f=m(t,["maxOutputTokens"]);f!=null&&y(e,["maxOutputTokens"],f);const p=m(t,["mediaResolution"]);p!=null&&y(e,["mediaResolution"],p);const v=m(t,["presencePenalty"]);v!=null&&y(e,["presencePenalty"],v);const T=m(t,["responseLogprobs"]);T!=null&&y(e,["responseLogprobs"],T);const b=m(t,["responseMimeType"]);b!=null&&y(e,["responseMimeType"],b);const C=m(t,["responseModalities"]);C!=null&&y(e,["responseModalities"],C);const N=m(t,["responseSchema"]);N!=null&&y(e,["responseSchema"],N);const M=m(t,["routingConfig"]);M!=null&&y(e,["routingConfig"],M);const V=m(t,["seed"]);V!=null&&y(e,["seed"],V);const k=m(t,["speechConfig"]);k!=null&&y(e,["speechConfig"],LD(k));const F=m(t,["stopSequences"]);F!=null&&y(e,["stopSequences"],F);const G=m(t,["temperature"]);G!=null&&y(e,["temperature"],G);const K=m(t,["thinkingConfig"]);K!=null&&y(e,["thinkingConfig"],K);const H=m(t,["topK"]);H!=null&&y(e,["topK"],H);const R=m(t,["topP"]);if(R!=null&&y(e,["topP"],R),m(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function WH(t,e){const n={},i=m(e,["model"]);return i!=null&&y(n,["_url","name"],St(t,i)),n}function QH(t,e){const n={},i=m(e,["model"]);return i!=null&&y(n,["_url","name"],St(t,i)),n}function XH(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function ZH(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function e8(t){const e={},n=m(t,["aspectRatio"]);n!=null&&y(e,["aspectRatio"],n);const i=m(t,["imageSize"]);if(i!=null&&y(e,["imageSize"],i),m(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(m(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function t8(t){const e={},n=m(t,["aspectRatio"]);n!=null&&y(e,["aspectRatio"],n);const i=m(t,["imageSize"]);i!=null&&y(e,["imageSize"],i);const r=m(t,["outputMimeType"]);r!=null&&y(e,["imageOutputOptions","mimeType"],r);const o=m(t,["outputCompressionQuality"]);return o!=null&&y(e,["imageOutputOptions","compressionQuality"],o),e}function n8(t){const e={},n=m(t,["bytesBase64Encoded"]);n!=null&&y(e,["imageBytes"],la(n));const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function MD(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&y(e,["imageBytes"],la(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function ag(t){const e={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=m(t,["imageBytes"]);n!=null&&y(e,["bytesBase64Encoded"],la(n));const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Hr(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const i=m(t,["imageBytes"]);i!=null&&y(e,["bytesBase64Encoded"],la(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function i8(t,e,n){const i={},r=m(e,["pageSize"]);n!==void 0&&r!=null&&y(n,["_query","pageSize"],r);const o=m(e,["pageToken"]);n!==void 0&&o!=null&&y(n,["_query","pageToken"],o);const l=m(e,["filter"]);n!==void 0&&l!=null&&y(n,["_query","filter"],l);const c=m(e,["queryBase"]);return n!==void 0&&c!=null&&y(n,["_url","models_url"],xD(t,c)),i}function r8(t,e,n){const i={},r=m(e,["pageSize"]);n!==void 0&&r!=null&&y(n,["_query","pageSize"],r);const o=m(e,["pageToken"]);n!==void 0&&o!=null&&y(n,["_query","pageToken"],o);const l=m(e,["filter"]);n!==void 0&&l!=null&&y(n,["_query","filter"],l);const c=m(e,["queryBase"]);return n!==void 0&&c!=null&&y(n,["_url","models_url"],xD(t,c)),i}function s8(t,e){const n={},i=m(e,["config"]);return i!=null&&i8(t,i,n),n}function o8(t,e){const n={},i=m(e,["config"]);return i!=null&&r8(t,i,n),n}function a8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["_self"]);if(r!=null){let o=AD(r);Array.isArray(o)&&(o=o.map(l=>j0(l))),y(e,["models"],o)}return e}function l8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["_self"]);if(r!=null){let o=AD(r);Array.isArray(o)&&(o=o.map(l=>$0(l))),y(e,["models"],o)}return e}function u8(t){const e={},n=m(t,["maskMode"]);n!=null&&y(e,["maskMode"],n);const i=m(t,["segmentationClasses"]);i!=null&&y(e,["maskClasses"],i);const r=m(t,["maskDilation"]);return r!=null&&y(e,["dilation"],r),e}function j0(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["displayName"]);i!=null&&y(e,["displayName"],i);const r=m(t,["description"]);r!=null&&y(e,["description"],r);const o=m(t,["version"]);o!=null&&y(e,["version"],o);const l=m(t,["_self"]);l!=null&&y(e,["tunedModelInfo"],x8(l));const c=m(t,["inputTokenLimit"]);c!=null&&y(e,["inputTokenLimit"],c);const d=m(t,["outputTokenLimit"]);d!=null&&y(e,["outputTokenLimit"],d);const f=m(t,["supportedGenerationMethods"]);f!=null&&y(e,["supportedActions"],f);const p=m(t,["temperature"]);p!=null&&y(e,["temperature"],p);const v=m(t,["maxTemperature"]);v!=null&&y(e,["maxTemperature"],v);const T=m(t,["topP"]);T!=null&&y(e,["topP"],T);const b=m(t,["topK"]);b!=null&&y(e,["topK"],b);const C=m(t,["thinking"]);return C!=null&&y(e,["thinking"],C),e}function $0(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["displayName"]);i!=null&&y(e,["displayName"],i);const r=m(t,["description"]);r!=null&&y(e,["description"],r);const o=m(t,["versionId"]);o!=null&&y(e,["version"],o);const l=m(t,["deployedModels"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(T=>SH(T))),y(e,["endpoints"],v)}const c=m(t,["labels"]);c!=null&&y(e,["labels"],c);const d=m(t,["_self"]);d!=null&&y(e,["tunedModelInfo"],A8(d));const f=m(t,["defaultCheckpointId"]);f!=null&&y(e,["defaultCheckpointId"],f);const p=m(t,["checkpoints"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(T=>T)),y(e,["checkpoints"],v)}return e}function c8(t){const e={},n=m(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],bH(o));const l=m(t,["functionCall"]);l!=null&&y(e,["functionCall"],wH(l));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=m(t,["inlineData"]);d!=null&&y(e,["inlineData"],Jq(d));const f=m(t,["text"]);f!=null&&y(e,["text"],f);const p=m(t,["thought"]);p!=null&&y(e,["thought"],p);const v=m(t,["thoughtSignature"]);v!=null&&y(e,["thoughtSignature"],v);const T=m(t,["videoMetadata"]);return T!=null&&y(e,["videoMetadata"],T),e}function d8(t){const e={},n=m(t,["productImage"]);return n!=null&&y(e,["image"],Hr(n)),e}function f8(t,e){const n={},i=m(t,["numberOfImages"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const r=m(t,["baseSteps"]);e!==void 0&&r!=null&&y(e,["parameters","baseSteps"],r);const o=m(t,["outputGcsUri"]);e!==void 0&&o!=null&&y(e,["parameters","storageUri"],o);const l=m(t,["seed"]);e!==void 0&&l!=null&&y(e,["parameters","seed"],l);const c=m(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&y(e,["parameters","safetySetting"],c);const d=m(t,["personGeneration"]);e!==void 0&&d!=null&&y(e,["parameters","personGeneration"],d);const f=m(t,["addWatermark"]);e!==void 0&&f!=null&&y(e,["parameters","addWatermark"],f);const p=m(t,["outputMimeType"]);e!==void 0&&p!=null&&y(e,["parameters","outputOptions","mimeType"],p);const v=m(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&y(e,["parameters","outputOptions","compressionQuality"],v);const T=m(t,["enhancePrompt"]);e!==void 0&&T!=null&&y(e,["parameters","enhancePrompt"],T);const b=m(t,["labels"]);return e!==void 0&&b!=null&&y(e,["labels"],b),n}function h8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],St(t,i));const r=m(e,["source"]);r!=null&&m8(r,n);const o=m(e,["config"]);return o!=null&&f8(o,n),n}function p8(t){const e={},n=m(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>og(r))),y(e,["generatedImages"],i)}return e}function m8(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const r=m(t,["personImage"]);e!==void 0&&r!=null&&y(e,["instances[0]","personImage","image"],Hr(r));const o=m(t,["productImages"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>d8(c))),y(e,["instances[0]","productImages"],l)}return n}function g8(t){const e={},n=m(t,["referenceImage"]);n!=null&&y(e,["referenceImage"],Hr(n));const i=m(t,["referenceId"]);i!=null&&y(e,["referenceId"],i);const r=m(t,["referenceType"]);r!=null&&y(e,["referenceType"],r);const o=m(t,["maskImageConfig"]);o!=null&&y(e,["maskImageConfig"],u8(o));const l=m(t,["controlImageConfig"]);l!=null&&y(e,["controlImageConfig"],nH(l));const c=m(t,["styleImageConfig"]);c!=null&&y(e,["styleImageConfig"],c);const d=m(t,["subjectImageConfig"]);return d!=null&&y(e,["subjectImageConfig"],d),e}function kD(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const i=m(t,["safetyAttributes","scores"]);i!=null&&y(e,["scores"],i);const r=m(t,["contentType"]);return r!=null&&y(e,["contentType"],r),e}function VD(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const i=m(t,["safetyAttributes","scores"]);i!=null&&y(e,["scores"],i);const r=m(t,["contentType"]);return r!=null&&y(e,["contentType"],r),e}function y8(t){const e={},n=m(t,["category"]);if(n!=null&&y(e,["category"],n),m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=m(t,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function v8(t){const e={},n=m(t,["image"]);return n!=null&&y(e,["image"],Hr(n)),e}function _8(t,e){const n={},i=m(t,["mode"]);e!==void 0&&i!=null&&y(e,["parameters","mode"],i);const r=m(t,["maxPredictions"]);e!==void 0&&r!=null&&y(e,["parameters","maxPredictions"],r);const o=m(t,["confidenceThreshold"]);e!==void 0&&o!=null&&y(e,["parameters","confidenceThreshold"],o);const l=m(t,["maskDilation"]);e!==void 0&&l!=null&&y(e,["parameters","maskDilation"],l);const c=m(t,["binaryColorThreshold"]);e!==void 0&&c!=null&&y(e,["parameters","binaryColorThreshold"],c);const d=m(t,["labels"]);return e!==void 0&&d!=null&&y(e,["labels"],d),n}function T8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],St(t,i));const r=m(e,["source"]);r!=null&&S8(r,n);const o=m(e,["config"]);return o!=null&&_8(o,n),n}function E8(t){const e={},n=m(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>$H(r))),y(e,["generatedMasks"],i)}return e}function S8(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const r=m(t,["image"]);e!==void 0&&r!=null&&y(e,["instances[0]","image"],Hr(r));const o=m(t,["scribbleImage"]);return e!==void 0&&o!=null&&y(e,["instances[0]","scribble"],v8(o)),n}function LD(t){const e={},n=m(t,["languageCode"]);n!=null&&y(e,["languageCode"],n);const i=m(t,["voiceConfig"]);if(i!=null&&y(e,["voiceConfig"],i),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function b8(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&y(e,["functionCallingConfig"],xH(n));const i=m(t,["retrievalConfig"]);return i!=null&&y(e,["retrievalConfig"],i),e}function w8(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(v=>v)),y(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&y(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],XH(c));const d=m(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],ZH(d));const f=m(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}function OD(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(T=>AH(T))),y(e,["functionDeclarations"],v)}const i=m(t,["retrieval"]);i!=null&&y(e,["retrieval"],i);const r=m(t,["googleSearchRetrieval"]);r!=null&&y(e,["googleSearchRetrieval"],r);const o=m(t,["computerUse"]);if(o!=null&&y(e,["computerUse"],o),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=m(t,["codeExecution"]);l!=null&&y(e,["codeExecution"],l);const c=m(t,["enterpriseWebSearch"]);c!=null&&y(e,["enterpriseWebSearch"],c);const d=m(t,["googleMaps"]);d!=null&&y(e,["googleMaps"],d);const f=m(t,["googleSearch"]);f!=null&&y(e,["googleSearch"],f);const p=m(t,["urlContext"]);return p!=null&&y(e,["urlContext"],p),e}function x8(t){const e={},n=m(t,["baseModel"]);n!=null&&y(e,["baseModel"],n);const i=m(t,["createTime"]);i!=null&&y(e,["createTime"],i);const r=m(t,["updateTime"]);return r!=null&&y(e,["updateTime"],r),e}function A8(t){const e={},n=m(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&y(e,["baseModel"],n);const i=m(t,["createTime"]);i!=null&&y(e,["createTime"],i);const r=m(t,["updateTime"]);return r!=null&&y(e,["updateTime"],r),e}function C8(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const r=m(t,["description"]);e!==void 0&&r!=null&&y(e,["description"],r);const o=m(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&y(e,["defaultCheckpointId"],o),n}function I8(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const r=m(t,["description"]);e!==void 0&&r!=null&&y(e,["description"],r);const o=m(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&y(e,["defaultCheckpointId"],o),n}function R8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","name"],St(t,i));const r=m(e,["config"]);return r!=null&&C8(r,n),n}function N8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],St(t,i));const r=m(e,["config"]);return r!=null&&I8(r,n),n}function P8(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const r=m(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&y(e,["parameters","safetySetting"],r);const o=m(t,["personGeneration"]);e!==void 0&&o!=null&&y(e,["parameters","personGeneration"],o);const l=m(t,["includeRaiReason"]);e!==void 0&&l!=null&&y(e,["parameters","includeRaiReason"],l);const c=m(t,["outputMimeType"]);e!==void 0&&c!=null&&y(e,["parameters","outputOptions","mimeType"],c);const d=m(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&y(e,["parameters","outputOptions","compressionQuality"],d);const f=m(t,["enhanceInputImage"]);e!==void 0&&f!=null&&y(e,["parameters","upscaleConfig","enhanceInputImage"],f);const p=m(t,["imagePreservationFactor"]);e!==void 0&&p!=null&&y(e,["parameters","upscaleConfig","imagePreservationFactor"],p);const v=m(t,["labels"]);e!==void 0&&v!=null&&y(e,["labels"],v);const T=m(t,["numberOfImages"]);e!==void 0&&T!=null&&y(e,["parameters","sampleCount"],T);const b=m(t,["mode"]);return e!==void 0&&b!=null&&y(e,["parameters","mode"],b),n}function D8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],St(t,i));const r=m(e,["image"]);r!=null&&y(n,["instances[0]","image"],Hr(r));const o=m(e,["upscaleFactor"]);o!=null&&y(n,["parameters","upscaleConfig","upscaleFactor"],o);const l=m(e,["config"]);return l!=null&&P8(l,n),n}function M8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>og(o))),y(e,["generatedImages"],r)}return e}function k8(t){const e={},n=m(t,["uri"]);n!=null&&y(e,["uri"],n);const i=m(t,["encodedVideo"]);i!=null&&y(e,["videoBytes"],la(i));const r=m(t,["encoding"]);return r!=null&&y(e,["mimeType"],r),e}function V8(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&y(e,["videoBytes"],la(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function L8(t){const e={},n=m(t,["image"]);n!=null&&y(e,["_self"],Hr(n));const i=m(t,["maskMode"]);return i!=null&&y(e,["maskMode"],i),e}function O8(t){const e={},n=m(t,["image"]);n!=null&&y(e,["image"],ag(n));const i=m(t,["referenceType"]);return i!=null&&y(e,["referenceType"],i),e}function U8(t){const e={},n=m(t,["image"]);n!=null&&y(e,["image"],Hr(n));const i=m(t,["referenceType"]);return i!=null&&y(e,["referenceType"],i),e}function UD(t){const e={},n=m(t,["uri"]);n!=null&&y(e,["uri"],n);const i=m(t,["videoBytes"]);i!=null&&y(e,["encodedVideo"],la(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["encoding"],r),e}function FD(t){const e={},n=m(t,["uri"]);n!=null&&y(e,["gcsUri"],n);const i=m(t,["videoBytes"]);i!=null&&y(e,["bytesBase64Encoded"],la(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const F8="Content-Type",B8="X-Server-Timeout",z8="User-Agent",K0="x-goog-api-client",q8="1.30.0",H8=`google-genai-sdk/${q8}`,G8="v1beta1",j8="v1beta",uI=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class $8{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:G8,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:j8,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[l,c]of Object.entries(e.queryParams))r.searchParams.append(l,String(c));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.unaryApiCall(r,o,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,o]of Object.entries(n))typeof o=="object"?i[r]=Object.assign(Object.assign({},i[r]),o):o!==void 0&&(i[r]=o);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.streamApiCall(r,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,r){if(n&&n.timeout||r){const o=new AbortController,l=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const c=setTimeout(()=>o.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}r&&r.addEventListener("abort",()=>{o.abort()}),e.signal=l}return n&&n.extraBody!==null&&K8(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await cI(r),new q0(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await cI(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var n;return mu(this,arguments,function*(){const r=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let l="";for(;;){const{done:c,value:d}=yield Kt(r.read());if(c){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=o.decode(d,{stream:!0});try{const v=JSON.parse(f);if("error"in v){const T=JSON.parse(JSON.stringify(v.error)),b=T.status,C=T.code,N=`got status: ${b}. ${JSON.stringify(v)}`;if(C>=400&&C<600)throw new rg({message:N,status:C})}}catch(v){if(v.name==="ApiError")throw v}l+=f;let p=l.match(uI);for(;p;){const v=p[1];try{const T=new Response(v,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Kt(new q0(T)),l=l.slice(p[0].length),p=l.match(uI)}catch(T){throw new Error(`exception parsing stream chunk ${v}. ${T}`)}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=H8+" "+this.clientOptions.userAgentExtra;return e[z8]=n,e[K0]=n,e[F8]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[r,o]of Object.entries(e.headers))i.append(r,o);e.timeout&&e.timeout>0&&i.append(B8,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const o=this.clientOptions.uploader,l=await o.stat(e);r.sizeBytes=String(l.size);const c=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=c;const d={file:r},f=this.getFileName(e),p=ve("upload/v1beta/files",d._url),v=await this.fetchUploadUrl(p,r.sizeBytes,r.mimeType,f,d,n==null?void 0:n.httpOptions);return o.upload(e,v,this)}async uploadFileToFileSearchStore(e,n,i){var r;const o=this.clientOptions.uploader,l=await o.stat(n),c=String(l.size),d=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:l.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const f=`upload/v1beta/${e}:uploadToFileSearchStore`,p=this.getFileName(n),v={};i!=null&&i.customMetadata&&(v.customMetadata=i.customMetadata),i!=null&&i.chunkingConfig&&(v.chunkingConfig=i.chunkingConfig);const T=await this.fetchUploadUrl(f,c,d,p,v,i==null?void 0:i.httpOptions);return o.uploadToFileSearchStore(n,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,r,o,l){var c;let d={};l?d=l:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const f=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:d});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(c=f==null?void 0:f.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function cI(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new rg({message:r,status:n}):new Error(r)}}function K8(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(o,l){const c=Object.assign({},o);for(const d in l)if(Object.prototype.hasOwnProperty.call(l,d)){const f=l[d],p=c[d];f&&typeof f=="object"&&!Array.isArray(f)&&p&&typeof p=="object"&&!Array.isArray(p)?c[d]=i(p,f):(p&&f&&typeof p!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof p}, New type: ${typeof f}. Overwriting.`),c[d]=f)}return c}const r=i(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Y8="mcp_used/unknown";let J8=!1;function BD(t){for(const e of t)if(W8(e)||typeof e=="object"&&"inputSchema"in e)return!0;return J8}function zD(t){var e;const n=(e=t[K0])!==null&&e!==void 0?e:"";t[K0]=(n+` ${Y8}`).trimStart()}function W8(t){return t!==null&&typeof t=="object"&&t instanceof UT}function Q8(t,e=100){return mu(this,arguments,function*(){let i,r=0;for(;r<e;){const o=yield Kt(t.listTools({cursor:i}));for(const l of o.tools)yield yield Kt(l),r++;if(!o.nextCursor)break;i=o.nextCursor}})}class UT{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new UT(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const o={},l=[];for(const p of this.mcpClients)try{for(var c=!0,d=(n=void 0,md(Q8(p))),f;f=await d.next(),e=f.done,!e;c=!0){r=f.value,c=!1;const v=r;l.push(v);const T=v.name;if(o[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);o[T]=p}}catch(v){n={error:v}}finally{try{!c&&!e&&(i=d.return)&&await i.call(d)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),H9(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const l=await r.callTool({name:i.name,arguments:i.args},void 0,o);n.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function X8(t,e,n){const i=new V9;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(i,r),e(i)}class Z8{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),l=nG(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),d=`${r}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${c}`;let f=()=>{};const p=new Promise(F=>{f=F}),v=e.callbacks,T=function(){f({})},b=this.apiClient,C={onopen:T,onmessage:F=>{X8(b,v.onmessage,F)},onerror:(n=v==null?void 0:v.onerror)!==null&&n!==void 0?n:function(F){},onclose:(i=v==null?void 0:v.onclose)!==null&&i!==void 0?i:function(F){}},N=this.webSocketFactory.create(d,tG(l),C);N.connect(),await p;const k={setup:{model:St(this.apiClient,e.model)}};return N.send(JSON.stringify(k)),new eG(N,this.apiClient)}}class eG{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Bq(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Fq(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(nu.PLAY)}pause(){this.sendPlaybackControl(nu.PAUSE)}stop(){this.sendPlaybackControl(nu.STOP)}resetContext(){this.sendPlaybackControl(nu.RESET_CONTEXT)}close(){this.conn.close()}}function tG(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function nG(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iG="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function rG(t,e,n){const i=new k9;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const o=JSON.parse(r);if(t.isVertexAI()){const l=Hq(o);Object.assign(i,l)}else Object.assign(i,o);e(i)}class sG{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new Z8(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,o,l,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let p;const v=this.apiClient.getHeaders();e.config&&e.config.tools&&BD(e.config.tools)&&zD(v);const T=uG(v);if(this.apiClient.isVertexAI())p=`${d}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,p);else{const P=this.apiClient.getApiKey();let U="BidiGenerateContent",L="key";P!=null&&P.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",L="access_token"),p=`${d}/ws/google.ai.generativelanguage.${f}.GenerativeService.${U}?${L}=${P}`}let b=()=>{};const C=new Promise(P=>{b=P}),N=e.callbacks,M=function(){var P;(P=N==null?void 0:N.onopen)===null||P===void 0||P.call(N),b({})},V=this.apiClient,k={onopen:M,onmessage:P=>{rG(V,N.onmessage,P)},onerror:(n=N==null?void 0:N.onerror)!==null&&n!==void 0?n:function(P){},onclose:(i=N==null?void 0:N.onclose)!==null&&i!==void 0?i:function(P){}},F=this.webSocketFactory.create(p,lG(T),k);F.connect(),await C;let G=St(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&G.startsWith("publishers/")){const P=this.apiClient.getProject(),U=this.apiClient.getLocation();G=`projects/${P}/locations/${U}/`+G}let K={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[rm.AUDIO]}:e.config.responseModalities=[rm.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const H=(c=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[],R=[];for(const P of H)if(this.isCallableTool(P)){const U=P;R.push(await U.tool())}else R.push(P);R.length>0&&(e.config.tools=R);const I={model:G,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?K=Uq(this.apiClient,I):K=Oq(this.apiClient,I),delete K.config,F.send(JSON.stringify(K)),new aG(F,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const oG={turnComplete:!0};class aG{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=br(n.turns),e.isVertexAI()||(i=i.map(r=>sg(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(iG)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},oG),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:qq(e)}:n={realtimeInput:zq(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function lG(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function uG(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dI=10;function fI(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const l of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(gu(l)){r=!0;break}if(!r)return!0;const o=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function gu(t){return"callTool"in t&&typeof t.callTool=="function"}function cG(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>gu(r)))!==null&&i!==void 0?i:!1}function hI(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,r)=>{if(gu(i))return;const o=i;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(r)}),n}function pI(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dG extends $s{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,o,l,c;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!cG(n)||fI(n.config))return await this.generateContentInternal(d);const f=hI(n);if(f.length>0){const N=f.map(M=>`tools[${M}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${N}.`)}let p,v;const T=br(d.contents),b=(o=(r=(i=d.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:dI;let C=0;for(;C<b&&(p=await this.generateContentInternal(d),!(!p.functionCalls||p.functionCalls.length===0));){const N=p.candidates[0].content,M=[];for(const V of(c=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[])if(gu(V)){const F=await V.callTool(p.functionCalls);M.push(...F)}C++,v={role:"user",parts:M},d.contents=br(d.contents),d.contents.push(N),d.contents.push(v),pI(d.config)&&(T.push(N),T.push(v))}return pI(d.config)&&(p.automaticFunctionCallingHistory=T),p},this.generateContentStream=async n=>{var i,r,o,l,c;if(this.maybeMoveToResponseJsonSchem(n),fI(n.config)){const v=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(v)}const d=hI(n);if(d.length>0){const v=d.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${v}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const f=(o=(r=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,p=(c=(l=n==null?void 0:n.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||c===void 0?void 0:c.disable;if(f&&!p)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let o;const l=[];if(i!=null&&i.generatedImages)for(const d of i.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((r=d==null?void 0:d.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?o=d==null?void 0:d.safetyAttributes:l.push(d);let c;return o?c={generatedImages:l,positivePromptSafetyAttributes:o,sdkHttpResponse:i.sdkHttpResponse}:c={generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},c}),this.list=async n=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new al(Hs.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(l),l)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var i,r,o,l,c,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((l=(o=n.source)===null||o===void 0?void 0:o.video)===null||l===void 0)&&l.uri&&(!((d=(c=n.source)===null||c===void 0?void 0:c.video)===null||d===void 0)&&d.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const l=await Promise.all(o.map(async d=>gu(d)?await d.tool():d)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(c.config.tools=l,e.config&&e.config.tools&&BD(e.config.tools)){const d=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let f=Object.assign({},d);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),zD(f),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return c}async initAfcToolsMap(e){var n,i,r;const o=new Map;for(const l of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(gu(l)){const c=l,d=await c.tool();for(const f of(r=d.functionDeclarations)!==null&&r!==void 0?r:[]){if(!f.name)throw new Error("Function declaration name is required.");if(o.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);o.set(f.name,c)}}return o}async processAfcStream(e){var n,i,r;const o=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:dI;let l=!1,c=0;const d=await this.initAfcToolsMap(e);return(function(f,p,v){var T,b;return mu(this,arguments,function*(){for(var C,N,M,V;c<o;){l&&(c++,l=!1);const K=yield Kt(f.processParamsMaybeAddMcpUsage(v)),H=yield Kt(f.generateContentStreamInternal(K)),R=[],I=[];try{for(var k=!0,F=(N=void 0,md(H)),G;G=yield Kt(F.next()),C=G.done,!C;k=!0){V=G.value,k=!1;const P=V;if(yield yield Kt(P),P.candidates&&(!((T=P.candidates[0])===null||T===void 0)&&T.content)){I.push(P.candidates[0].content);for(const U of(b=P.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(c<o&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(U.functionCall.name)){const L=yield Kt(p.get(U.functionCall.name).callTool([U.functionCall]));R.push(...L)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(P){N={error:P}}finally{try{!k&&!C&&(M=F.return)&&(yield Kt(M.call(F)))}finally{if(N)throw N.error}}if(R.length>0){l=!0;const P=new qc;P.candidates=[{content:{role:"user",parts:R}}],yield yield Kt(P);const U=[];U.push(...I),U.push({role:"user",parts:R});const L=br(v.contents).concat(U);v.contents=L}else break}})})(this,d,e)}async generateContentInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=oI(this.apiClient,e);return c=ve("{model}:generateContent",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=lI(p),T=new qc;return Object.assign(T,v),T})}else{const f=sI(this.apiClient,e);return c=ve("{model}:generateContent",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=aI(p),T=new qc;return Object.assign(T,v),T})}}async generateContentStreamInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=oI(this.apiClient,e);return c=ve("{model}:streamGenerateContent?alt=sse",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(v){return mu(this,arguments,function*(){var T,b,C,N;try{for(var M=!0,V=md(v),k;k=yield Kt(V.next()),T=k.done,!T;M=!0){N=k.value,M=!1;const F=N,G=lI(yield Kt(F.json()));G.sdkHttpResponse={headers:F.headers};const K=new qc;Object.assign(K,G),yield yield Kt(K)}}catch(F){b={error:F}}finally{try{!M&&!T&&(C=V.return)&&(yield Kt(C.call(V)))}finally{if(b)throw b.error}}})})}else{const f=sI(this.apiClient,e);return c=ve("{model}:streamGenerateContent?alt=sse",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),l.then(function(v){return mu(this,arguments,function*(){var T,b,C,N;try{for(var M=!0,V=md(v),k;k=yield Kt(V.next()),T=k.done,!T;M=!0){N=k.value,M=!1;const F=N,G=aI(yield Kt(F.json()));G.sdkHttpResponse={headers:F.headers};const K=new qc;Object.assign(K,G),yield yield Kt(K)}}catch(F){b={error:F}}finally{try{!M&&!T&&(C=V.return)&&(yield Kt(C.call(V)))}finally{if(b)throw b.error}}})})}}async embedContent(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=_H(this.apiClient,e);return c=ve("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=EH(p),T=new HC;return Object.assign(T,v),T})}else{const f=vH(this.apiClient,e);return c=ve("{model}:batchEmbedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=TH(p),T=new HC;return Object.assign(T,v),T})}}async generateImagesInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=DH(this.apiClient,e);return c=ve("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=kH(p),T=new GC;return Object.assign(T,v),T})}else{const f=PH(this.apiClient,e);return c=ve("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=MH(p),T=new GC;return Object.assign(T,v),T})}}async editImageInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=pH(this.apiClient,e);return o=ve("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const f=mH(d),p=new b9;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=D8(this.apiClient,e);return o=ve("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const f=M8(d),p=new w9;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=h8(this.apiClient,e);return o=ve("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=p8(d),p=new x9;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=T8(this.apiClient,e);return o=ve("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=E8(d),p=new A9;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=QH(this.apiClient,e);return c=ve("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>$0(p))}else{const f=WH(this.apiClient,e);return c=ve("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>j0(p))}}async listInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=o8(this.apiClient,e);return c=ve("{models_url}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=l8(p),T=new jC;return Object.assign(T,v),T})}else{const f=s8(this.apiClient,e);return c=ve("{models_url}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=a8(p),T=new jC;return Object.assign(T,v),T})}}async update(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=N8(this.apiClient,e);return c=ve("{model}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>$0(p))}else{const f=R8(this.apiClient,e);return c=ve("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>j0(p))}}async delete(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=cH(this.apiClient,e);return c=ve("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=fH(p),T=new $C;return Object.assign(T,v),T})}else{const f=uH(this.apiClient,e);return c=ve("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=dH(p),T=new $C;return Object.assign(T,v),T})}}async countTokens(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=oH(this.apiClient,e);return c=ve("{model}:countTokens",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=lH(p),T=new KC;return Object.assign(T,v),T})}else{const f=sH(this.apiClient,e);return c=ve("{model}:countTokens",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=aH(p),T=new KC;return Object.assign(T,v),T})}}async computeTokens(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=Xq(this.apiClient,e);return o=ve("{model}:computeTokens",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const f=Zq(d),p=new C9;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=BH(this.apiClient,e);return c=ve("{model}:predictLongRunning",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>{const v=UH(p),T=new sm;return Object.assign(T,v),T})}else{const f=FH(this.apiClient,e);return c=ve("{model}:predictLongRunning",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>{const v=OH(p),T=new sm;return Object.assign(T,v),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fG extends $s{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=y9(e);return c=ve("{operationName}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l}else{const f=g9(e);return c=ve("{operationName}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l}}async fetchPredictVideosOperationInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=u9(e);return o=ve("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hG(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function pG(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>bG(o))),y(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function mG(t,e,n){const i={},r=m(e,["expireTime"]);n!==void 0&&r!=null&&y(n,["expireTime"],r);const o=m(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&y(n,["newSessionExpireTime"],o);const l=m(e,["uses"]);n!==void 0&&l!=null&&y(n,["uses"],l);const c=m(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&y(n,["bidiGenerateContentSetup"],SG(t,c));const d=m(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&y(n,["fieldMask"],d),i}function gG(t,e){const n={},i=m(e,["config"]);return i!=null&&y(n,["config"],mG(t,i,n)),n}function yG(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function vG(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const i=m(t,["args"]);i!=null&&y(e,["args"],i);const r=m(t,["name"]);if(r!=null&&y(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function _G(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function TG(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function EG(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],i);const r=m(t,["responseModalities"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","responseModalities"],r);const o=m(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const l=m(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=m(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const d=m(t,["maxOutputTokens"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","maxOutputTokens"],d);const f=m(t,["mediaResolution"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","mediaResolution"],f);const p=m(t,["seed"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","seed"],p);const v=m(t,["speechConfig"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","speechConfig"],OT(v));const T=m(t,["thinkingConfig"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","thinkingConfig"],T);const b=m(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],b);const C=m(t,["systemInstruction"]);e!==void 0&&C!=null&&y(e,["setup","systemInstruction"],pG(di(C)));const N=m(t,["tools"]);if(e!==void 0&&N!=null){let H=Bu(N);Array.isArray(H)&&(H=H.map(R=>xG(Fu(R)))),y(e,["setup","tools"],H)}const M=m(t,["sessionResumption"]);e!==void 0&&M!=null&&y(e,["setup","sessionResumption"],wG(M));const V=m(t,["inputAudioTranscription"]);e!==void 0&&V!=null&&y(e,["setup","inputAudioTranscription"],V);const k=m(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&y(e,["setup","outputAudioTranscription"],k);const F=m(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&y(e,["setup","realtimeInputConfig"],F);const G=m(t,["contextWindowCompression"]);e!==void 0&&G!=null&&y(e,["setup","contextWindowCompression"],G);const K=m(t,["proactivity"]);return e!==void 0&&K!=null&&y(e,["setup","proactivity"],K),n}function SG(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["setup","model"],St(t,i));const r=m(e,["config"]);return r!=null&&y(n,["config"],EG(r,n)),n}function bG(t){const e={},n=m(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],yG(o));const l=m(t,["functionCall"]);l!=null&&y(e,["functionCall"],vG(l));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=m(t,["inlineData"]);d!=null&&y(e,["inlineData"],hG(d));const f=m(t,["text"]);f!=null&&y(e,["text"],f);const p=m(t,["thought"]);p!=null&&y(e,["thought"],p);const v=m(t,["thoughtSignature"]);v!=null&&y(e,["thoughtSignature"],v);const T=m(t,["videoMetadata"]);return T!=null&&y(e,["videoMetadata"],T),e}function wG(t){const e={},n=m(t,["handle"]);if(n!=null&&y(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function xG(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(v=>v)),y(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&y(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],_G(c));const d=m(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],TG(d));const f=m(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AG(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(o=>`${n}.${o}`);e.push(...r)}else e.push(n)}return e.join(",")}function CG(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const o=i.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const o=AG(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];r.length>0&&(c=r.map(f=>l.includes(f)?`generationConfig.${f}`:f));const d=[];o&&d.push(o),c.length>0&&d.push(...c),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class IG extends $s{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=gG(this.apiClient,e);o=ve("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const d=CG(c,e.config);return r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RG(t,e){const n={},i=m(t,["displayName"]);return e!==void 0&&i!=null&&y(e,["displayName"],i),n}function NG(t){const e={},n=m(t,["config"]);return n!=null&&RG(n,e),e}function PG(t,e){const n={},i=m(t,["force"]);return e!==void 0&&i!=null&&y(e,["_query","force"],i),n}function DG(t){const e={},n=m(t,["name"]);n!=null&&y(e,["_url","name"],n);const i=m(t,["config"]);return i!=null&&PG(i,e),e}function MG(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","name"],n),e}function kG(t,e){const n={},i=m(t,["customMetadata"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["customMetadata"],o)}const r=m(t,["chunkingConfig"]);return e!==void 0&&r!=null&&y(e,["chunkingConfig"],r),n}function VG(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response"]);return l!=null&&y(e,["response"],OG(l)),e}function LG(t){const e={},n=m(t,["fileSearchStoreName"]);n!=null&&y(e,["_url","file_search_store_name"],n);const i=m(t,["fileName"]);i!=null&&y(e,["fileName"],i);const r=m(t,["config"]);return r!=null&&kG(r,e),e}function OG(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["parent"]);i!=null&&y(e,["parent"],i);const r=m(t,["documentName"]);return r!=null&&y(e,["documentName"],r),e}function UG(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),n}function FG(t){const e={},n=m(t,["config"]);return n!=null&&UG(n,e),e}function BG(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["fileSearchStores"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["fileSearchStores"],o)}return e}function zG(t,e){const n={},i=m(t,["mimeType"]);e!==void 0&&i!=null&&y(e,["mimeType"],i);const r=m(t,["displayName"]);e!==void 0&&r!=null&&y(e,["displayName"],r);const o=m(t,["customMetadata"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>d)),y(e,["customMetadata"],c)}const l=m(t,["chunkingConfig"]);return e!==void 0&&l!=null&&y(e,["chunkingConfig"],l),n}function qG(t){const e={},n=m(t,["fileSearchStoreName"]);n!=null&&y(e,["_url","file_search_store_name"],n);const i=m(t,["config"]);return i!=null&&zG(i,e),e}function HG(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GG(t,e){const n={},i=m(t,["force"]);return e!==void 0&&i!=null&&y(e,["_query","force"],i),n}function jG(t){const e={},n=m(t,["name"]);n!=null&&y(e,["_url","name"],n);const i=m(t,["config"]);return i!=null&&GG(i,e),e}function $G(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","name"],n),e}function KG(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),n}function YG(t){const e={},n=m(t,["parent"]);n!=null&&y(e,["_url","parent"],n);const i=m(t,["config"]);return i!=null&&KG(i,e),e}function JG(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["documents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WG extends $s{constructor(e){super(),this.apiClient=e,this.list=async n=>new al(Hs.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=$G(e);return o=ve("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=jG(e);r=ve("{name}",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=YG(e);return o=ve("{parent}/documents",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=JG(d),p=new I9;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QG extends $s{constructor(e,n=new WG(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new al(Hs.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=NG(e);return o=ve("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async get(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=MG(e);return o=ve("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=DG(e);r=ve("{name}",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=FG(e);return o=ve("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=BG(d),p=new R9;return Object.assign(p,f),p})}}async uploadToFileSearchStoreInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=qG(e);return o=ve("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=HG(d),p=new N9;return Object.assign(p,f),p})}}async importFile(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=LG(e);return o=ve("{file_search_store_name}:importFile",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=VG(d),p=new DT;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XG(t,e){const n={},i=m(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function ZG(t,e){const n={},i=m(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function e7(t,e,n){const i={};if(m(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=m(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&y(e,["displayName"],r),m(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=m(t,["epochCount"]);e!==void 0&&o!=null&&y(e,["tuningTask","hyperparameters","epochCount"],o);const l=m(t,["learningRateMultiplier"]);if(l!=null&&y(i,["tuningTask","hyperparameters","learningRateMultiplier"],l),m(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(m(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(m(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=m(t,["batchSize"]);e!==void 0&&c!=null&&y(e,["tuningTask","hyperparameters","batchSize"],c);const d=m(t,["learningRate"]);if(e!==void 0&&d!=null&&y(e,["tuningTask","hyperparameters","learningRate"],d),m(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(m(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function t7(t,e,n){const i={};let r=m(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const b=m(t,["validationDataset"]);e!==void 0&&b!=null&&y(e,["supervisedTuningSpec"],mI(b))}else if(r==="PREFERENCE_TUNING"){const b=m(t,["validationDataset"]);e!==void 0&&b!=null&&y(e,["preferenceOptimizationSpec"],mI(b))}const o=m(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&y(e,["tunedModelDisplayName"],o);const l=m(t,["description"]);e!==void 0&&l!=null&&y(e,["description"],l);let c=m(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const b=m(t,["epochCount"]);e!==void 0&&b!=null&&y(e,["supervisedTuningSpec","hyperParameters","epochCount"],b)}else if(c==="PREFERENCE_TUNING"){const b=m(t,["epochCount"]);e!==void 0&&b!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],b)}let d=m(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const b=m(t,["learningRateMultiplier"]);e!==void 0&&b!=null&&y(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],b)}else if(d==="PREFERENCE_TUNING"){const b=m(t,["learningRateMultiplier"]);e!==void 0&&b!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],b)}let f=m(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const b=m(t,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&y(e,["supervisedTuningSpec","exportLastCheckpointOnly"],b)}else if(f==="PREFERENCE_TUNING"){const b=m(t,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&y(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],b)}let p=m(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const b=m(t,["adapterSize"]);e!==void 0&&b!=null&&y(e,["supervisedTuningSpec","hyperParameters","adapterSize"],b)}else if(p==="PREFERENCE_TUNING"){const b=m(t,["adapterSize"]);e!==void 0&&b!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],b)}if(m(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(m(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const v=m(t,["labels"]);e!==void 0&&v!=null&&y(e,["labels"],v);const T=m(t,["beta"]);return e!==void 0&&T!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),i}function n7(t,e){const n={},i=m(t,["baseModel"]);i!=null&&y(n,["baseModel"],i);const r=m(t,["preTunedModel"]);r!=null&&y(n,["preTunedModel"],r);const o=m(t,["trainingDataset"]);o!=null&&h7(o);const l=m(t,["config"]);return l!=null&&e7(l,n),n}function i7(t,e){const n={},i=m(t,["baseModel"]);i!=null&&y(n,["baseModel"],i);const r=m(t,["preTunedModel"]);r!=null&&y(n,["preTunedModel"],r);const o=m(t,["trainingDataset"]);o!=null&&p7(o,n,e);const l=m(t,["config"]);return l!=null&&t7(l,n,e),n}function r7(t,e){const n={},i=m(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function s7(t,e){const n={},i=m(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function o7(t,e,n){const i={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const o=m(t,["pageToken"]);e!==void 0&&o!=null&&y(e,["_query","pageToken"],o);const l=m(t,["filter"]);return e!==void 0&&l!=null&&y(e,["_query","filter"],l),i}function a7(t,e,n){const i={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const o=m(t,["pageToken"]);e!==void 0&&o!=null&&y(e,["_query","pageToken"],o);const l=m(t,["filter"]);return e!==void 0&&l!=null&&y(e,["_query","filter"],l),i}function l7(t,e){const n={},i=m(t,["config"]);return i!=null&&o7(i,n),n}function u7(t,e){const n={},i=m(t,["config"]);return i!=null&&a7(i,n),n}function c7(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const r=m(t,["nextPageToken"]);r!=null&&y(n,["nextPageToken"],r);const o=m(t,["tunedModels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>qD(c))),y(n,["tuningJobs"],l)}return n}function d7(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const r=m(t,["nextPageToken"]);r!=null&&y(n,["nextPageToken"],r);const o=m(t,["tuningJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Y0(c))),y(n,["tuningJobs"],l)}return n}function f7(t,e){const n={},i=m(t,["name"]);i!=null&&y(n,["model"],i);const r=m(t,["name"]);return r!=null&&y(n,["endpoint"],r),n}function h7(t,e){const n={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=m(t,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),y(n,["examples","examples"],r)}return n}function p7(t,e,n){const i={};let r=m(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const l=m(t,["gcsUri"]);e!==void 0&&l!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(r==="PREFERENCE_TUNING"){const l=m(t,["gcsUri"]);e!==void 0&&l!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let o=m(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const l=m(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(o==="PREFERENCE_TUNING"){const l=m(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(m(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function qD(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const r=m(t,["name"]);r!=null&&y(n,["name"],r);const o=m(t,["state"]);o!=null&&y(n,["state"],bD(o));const l=m(t,["createTime"]);l!=null&&y(n,["createTime"],l);const c=m(t,["tuningTask","startTime"]);c!=null&&y(n,["startTime"],c);const d=m(t,["tuningTask","completeTime"]);d!=null&&y(n,["endTime"],d);const f=m(t,["updateTime"]);f!=null&&y(n,["updateTime"],f);const p=m(t,["description"]);p!=null&&y(n,["description"],p);const v=m(t,["baseModel"]);v!=null&&y(n,["baseModel"],v);const T=m(t,["_self"]);return T!=null&&y(n,["tunedModel"],f7(T)),n}function Y0(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const r=m(t,["name"]);r!=null&&y(n,["name"],r);const o=m(t,["state"]);o!=null&&y(n,["state"],bD(o));const l=m(t,["createTime"]);l!=null&&y(n,["createTime"],l);const c=m(t,["startTime"]);c!=null&&y(n,["startTime"],c);const d=m(t,["endTime"]);d!=null&&y(n,["endTime"],d);const f=m(t,["updateTime"]);f!=null&&y(n,["updateTime"],f);const p=m(t,["error"]);p!=null&&y(n,["error"],p);const v=m(t,["description"]);v!=null&&y(n,["description"],v);const T=m(t,["baseModel"]);T!=null&&y(n,["baseModel"],T);const b=m(t,["tunedModel"]);b!=null&&y(n,["tunedModel"],b);const C=m(t,["preTunedModel"]);C!=null&&y(n,["preTunedModel"],C);const N=m(t,["supervisedTuningSpec"]);N!=null&&y(n,["supervisedTuningSpec"],N);const M=m(t,["preferenceOptimizationSpec"]);M!=null&&y(n,["preferenceOptimizationSpec"],M);const V=m(t,["tuningDataStats"]);V!=null&&y(n,["tuningDataStats"],V);const k=m(t,["encryptionSpec"]);k!=null&&y(n,["encryptionSpec"],k);const F=m(t,["partnerModelTuningSpec"]);F!=null&&y(n,["partnerModelTuningSpec"],F);const G=m(t,["customBaseModel"]);G!=null&&y(n,["customBaseModel"],G);const K=m(t,["experiment"]);K!=null&&y(n,["experiment"],K);const H=m(t,["labels"]);H!=null&&y(n,["labels"],H);const R=m(t,["outputUri"]);R!=null&&y(n,["outputUri"],R);const I=m(t,["pipelineJob"]);I!=null&&y(n,["pipelineJob"],I);const P=m(t,["serviceAccount"]);P!=null&&y(n,["serviceAccount"],P);const U=m(t,["tunedModelDisplayName"]);U!=null&&y(n,["tunedModelDisplayName"],U);const L=m(t,["veoTuningSpec"]);return L!=null&&y(n,["veoTuningSpec"],L),n}function m7(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const r=m(t,["name"]);r!=null&&y(n,["name"],r);const o=m(t,["metadata"]);o!=null&&y(n,["metadata"],o);const l=m(t,["done"]);l!=null&&y(n,["done"],l);const c=m(t,["error"]);return c!=null&&y(n,["error"],c),n}function mI(t,e){const n={},i=m(t,["gcsUri"]);i!=null&&y(n,["validationDatasetUri"],i);const r=m(t,["vertexDatasetResource"]);return r!=null&&y(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class g7 extends $s{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new al(Hs.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:r});return o.baseModel=void 0,await this.tuneInternal(o)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),o=await this.tuneMldevInternal(r);let l="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?l=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(l=o.name.split("/operations/")[0]),{name:l,state:z0.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=s7(e);return c=ve("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>Y0(p))}else{const f=r7(e);return c=ve("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>qD(p))}}async listInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=u7(e);return c=ve("tuningJobs",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=d7(p),T=new YC;return Object.assign(T,v),T})}else{const f=l7(e);return c=ve("tunedModels",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=c7(p),T=new YC;return Object.assign(T,v),T})}}async cancel(e){var n,i,r,o;let l="",c={};if(this.apiClient.isVertexAI()){const d=ZG(e);l=ve("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=XG(e);l=ve("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async tuneInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=i7(e,e);return o=ve("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>Y0(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=n7(e);return o=ve("tunedModels",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>m7(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class y7{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const v7=1024*1024*8,_7=3,T7=1e3,E7=2,am="x-goog-upload-status";async function S7(t,e,n){var i;const r=await HD(t,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[am])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function b7(t,e,n){var i;const r=await HD(t,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[am])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=yD(o),c=new MT;return Object.assign(c,l),c}async function HD(t,e,n){var i,r;let o=0,l=0,c=new q0(new Response),d="upload";for(o=t.size;l<o;){const f=Math.min(v7,o-l),p=t.slice(l,l+f);l+f>=o&&(d+=", finalize");let v=0,T=T7;for(;v<_7&&(c=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(l),"Content-Length":String(f)}}}),!(!((i=c==null?void 0:c.headers)===null||i===void 0)&&i[am]));)v++,await x7(T),T=T*E7;if(l+=f,((r=c==null?void 0:c.headers)===null||r===void 0?void 0:r[am])!=="active")break;if(o<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function w7(t){return{size:t.size,type:t.type}}function x7(t){return new Promise(e=>setTimeout(e,t))}class A7{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await S7(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await b7(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await w7(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class C7{create(e,n,i){return new I7(e,n,i)}}class I7{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gI="x-goog-api-key";class R7{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(gI)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(gI,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const N7="gl-node/";class P7{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=a9(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const r=new R7(this.apiKey);this.apiClient=new $8({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:N7+"web",uploader:new A7,downloader:new y7}),this.models=new dG(this.apiClient),this.live=new sG(this.apiClient,r,new C7),this.batches=new Lz(this.apiClient),this.chats=new yq(this.models,this.apiClient),this.caches=new pq(this.apiClient),this.files=new Cq(this.apiClient),this.operations=new fG(this.apiClient),this.authTokens=new IG(this.apiClient),this.tunings=new g7(this.apiClient),this.fileSearchStores=new QG(this.apiClient)}}const GD={geminiApiKey:"AIzaSyBAzdNikRnpu5iyeg8VJ03fc0HXVG2B2iY",openWeatherApiKey:"074ebc9404ca1a72d5b0759070161539"},cf=new P7({apiKey:GD.geminiApiKey});function lg(t){try{if(typeof t.text=="function")return t.text();if(t.candidates&&t.candidates.length>0){const e=t.candidates[0];if(e.content&&e.content.parts&&e.content.parts.length>0)return e.content.parts[0].text||"{}"}return"{}"}catch(e){return console.error("Erreur lors de l'extraction du texte Gemini:",e),"{}"}}async function D7(t){const e={text:`Analyse chacune des images de vtements fournies. Pour chaque image, dans l'ordre, extrais les informations suivantes en franais :
    1. Une description concise incluant son type (ex: T-shirt, jean), sa couleur principale, et son style.
    2. Sa catgorie : "Hauts", "Bas", "Chaussures", ou "Accessoires".
    3. Sa couleur principale (ex: "Bleu", "Noir"). Sois concis.
    4. Sa matire principale (ex: "Coton", "Cuir"). Sois concis.
    
    Retourne le rsultat sous la forme d'un objet JSON unique contenant une cl "items", qui est un tableau d'objets.`},n=t.map(r=>({inlineData:{data:r,mimeType:"image/jpeg"}})),i=await cf.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[e,...n]},config:{responseMimeType:"application/json",responseSchema:{type:qe.OBJECT,properties:{items:{type:qe.ARRAY,items:{type:qe.OBJECT,properties:{analysis:{type:qe.STRING},category:{type:qe.STRING,enum:["Hauts","Bas","Chaussures","Accessoires"]},color:{type:qe.STRING},material:{type:qe.STRING}},required:["analysis","category","color","material"]}}},required:["items"]}}});try{const r=lg(i),o=JSON.parse(r),l=["Hauts","Bas","Chaussures","Accessoires"];return o.items?(o.items.forEach(c=>{l.includes(c.category)||(c.category="Accessoires")}),o.items):[]}catch(r){throw console.error("Erreur parsing Gemini:",r),new Error("L'IA a renvoy une rponse malforme.")}}async function M7(t,e,n,i){const r=new Set((e||[]).flatMap(T=>T.itemIds)),l=t.filter(T=>!r.has(T.id)).map(T=>`- ${T.analysis} (ID: ${T.id}, Cat: ${T.category}, Matire: ${T.material})`).join(`
`),c=e.map(T=>`- ${T.name} (Ensemble, ID: ${T.id})`).join(`
`),d=[l,c].filter(Boolean).join(`
`),f=i?`
**RGLE D'ANCRAGE : La tenue DOIT inclure : "${"name"in i?i.name:i.analysis} (ID: ${i.id})".**
`:"",p=`Tu es un styliste expert reconnu pour ton got impeccable. Cre 3 tenues compltes et harmonieuses bases sur le contexte : "${n}".
    
Vtements disponibles :
${d}
${f}

**RGLES CRITIQUES** :

1. **BASE** : Utilise UNIQUEMENT les articles lists. Chaque tenue doit tre complte (Haut + Bas + Chaussures).

2. **ACCESSOIRES** : Chaque tenue DOIT tre accompagne d'une montre (si disponible).

3. **SUPERPOSITION (LAYERING)** :
   - **Pull col V**  OBLIGATOIREMENT avec une chemise en dessous
   - **Pull col camionneur/zipp**  OBLIGATOIREMENT avec un t-shirt ou chemise en dessous
   - **Veste/Blazer**  Peut aller sur t-shirt, chemise, ou pull fin

4. **LOGIQUE THERMIQUE (CRITIQUE)** :
   - Analyse la mto mentionne dans le contexte.
   
   | Temprature | Rgle |
   |-------------|-------|
   | **< 10C (FROID)** | Layering OBLIGATOIRE : T-shirt + Pull + Manteau. JAMAIS une chemise seule sous un manteau. |
   | **10-20C (DOUX)** | Pull, sweat ou veste lgre suffisent. |
   | **> 20C (CHAUD)** | Une seule couche lgre (t-shirt OU chemise). JAMAIS de pull ni veste. |
   | **> 30C (TRS CHAUD)** | Vtements trs lgers uniquement. INTERDITS : jeans pais, matires synthtiques. |

5. **INTERDICTIONS THERMIQUES ABSOLUES** :
   -  Doudoune/veste d'hiver si > 15C
   -  Short si < 12C
   -  Sandales si < 15C
   -  Pull en laine si > 22C

6. **MATIRES ADAPTES** :
   - **Chaud (> 25C)** : Privilgier coton lger, lin, matires respirantes
   - **Froid (< 10C)** : Privilgier laine, polaire, matires chaudes
   
7. **HARMONIE DES COULEURS & MOTIFS** :
   - **Rgle des 3 couleurs** : Maximum 3 couleurs diffrentes par tenue
   - **quilibre motifs** : Si le haut est  motifs  bas UNI. Jamais 2 motifs diffrents ensemble.
   - **Contraste** : viter les tons trop proches (bleu marine + noir) sauf choix dlibr

8. **VARIT** : Les 3 tenues doivent tre VISUELLEMENT diffrentes. vite de rpter le mme pantalon 3 fois.

**SORTIE** : Renvoie l'ID EXACT et la description pour chaque article slectionn.`,v=await cf.models.generateContent({model:"gemini-2.5-flash",contents:p,config:{responseMimeType:"application/json",responseSchema:{type:qe.OBJECT,properties:{tenues:{type:qe.ARRAY,items:{type:qe.OBJECT,properties:{titre:{type:qe.STRING},description:{type:qe.STRING},vetements:{type:qe.ARRAY,items:{type:qe.OBJECT,properties:{id:{type:qe.STRING},description:{type:qe.STRING}},required:["id","description"]}}},required:["titre","description","vetements"]}}},required:["tenues"]}}});try{const T=lg(v);return JSON.parse(T).tenues}catch(T){throw console.error("Erreur parsing Gemini:",T),new Error("Rponse malforme.")}}async function jD(t,e){return t.map(i=>`${i.category}: ${i.analysis}`).join(`
`),await cf.models.generateContent({model:"gemini-2.5-flash",contents:"Analyse cette garde-robe et suggre des achats.",config:{responseMimeType:"application/json"}}),{summary:"Analyse gnre",strengths:[],gaps:[],suggestions:[]}}async function k7(t,e){const n=t.map(l=>`${l.category}: ${l.analysis}`).join(`
`),i=`Analyse cette garde-robe (${t.length} pices) et suggre 3-5 achats stratgiques. Garde-robe : ${n}`,r=await cf.models.generateContent({model:"gemini-2.5-flash",contents:i,config:{responseMimeType:"application/json",responseSchema:{type:qe.OBJECT,properties:{summary:{type:qe.STRING},strengths:{type:qe.ARRAY,items:{type:qe.STRING}},gaps:{type:qe.ARRAY,items:{type:qe.STRING}},suggestions:{type:qe.ARRAY,items:{type:qe.OBJECT,properties:{category:{type:qe.STRING},description:{type:qe.STRING},reason:{type:qe.STRING},priority:{type:qe.STRING,enum:["high","medium","low"]},estimatedPrice:{type:qe.STRING}},required:["category","description","reason","priority","estimatedPrice"]}}},required:["summary","strengths","gaps","suggestions"]}}}),o=lg(r);return JSON.parse(o)}jD=k7;async function V7(t,e,n,i,r){const o=new Set((e||[]).flatMap(C=>C.itemIds)),c=t.filter(C=>!o.has(C.id)).map(C=>`- ${C.analysis} (ID: ${C.id}, Cat: ${C.category}, Couleur: ${C.color}, Matire: ${C.material})`).join(`
`),d=e.map(C=>`- ${C.name} (Ensemble, ID: ${C.id})`).join(`
`),f=[c,d].filter(Boolean).join(`
`),p=r?`
**CONTRAINTE POIDS** : Le poids total NE DOIT PAS dpasser ${r} kg. Estime le poids moyen (t-shirt ~150g, jean ~600g, pull ~400g, chaussures ~800g).`:"",v=`Tu es un expert en prparation de valise. Cre une **CAPSULE WARDROBE** optimise pour ${n} jours.

**DESTINATION & CONTEXTE** : ${i}

**PRINCIPE CAPSULE WARDROBE** : Slectionner peu de pices qui se combinent TOUTES entre elles pour crer un maximum de tenues diffrentes.

**RGLES CRITIQUES** :

1. **LOGIQUE THERMIQUE (PRIORIT ABSOLUE)** :
   
   | Temprature | Vtements adapts |
   |-------------|-------------------|
   | **> 30C (TRS CHAUD)** | T-shirts lgers, shorts, robes, sandales. INTERDITS : jeans, pulls, vestes |
   | **25-30C (CHAUD)** | T-shirts, pantalons lgers, une chemise, baskets lgres |
   | **15-25C (DOUX)** | Mix lger + 1 pull fin ou veste lgre |
   | **10-15C (FRAIS)** | Pulls, pantalons, veste, chaussures fermes |
   | **< 10C (FROID)** | Layering complet : sous-couche + pull + manteau chaud |

2. **INTERDICTIONS ABSOLUES** :
   -  Doudoune/veste ski/polaire paisse si > 20C
   -  Shorts si < 15C
   -  Sandales si < 18C
   -  Pulls en laine si > 25C
   -  Jeans pais si > 32C

3. **MATIRES ADAPTES** :
   - **Climat chaud** : Coton lger, lin, matires respirantes uniquement
   - **Climat froid** : Laine, polaire, matires isolantes
   - **Voyage** : Privilgier matires qui ne se froissent pas

4. **HARMONIE CAPSULE (pour que tout se combine)** :
   - **Palette de couleurs** : Maximum 4-5 couleurs qui vont ensemble (ex: bleu marine, blanc, beige, une couleur d'accent)
   - **Motifs** : Maximum 2 pices  motifs dans toute la valise, le reste UNI
   - **Neutralit** : Au moins 50% de pices en couleurs neutres (noir, blanc, gris, beige, marine)

5. **QUANTITS RECOMMANDES pour ${n} jours** :
   - Hauts : ${Math.min(n+1,7)} pices max (on peut reporter un t-shirt)
   - Bas : ${Math.min(Math.ceil(n/2)+1,4)} pices max
   - Chaussures : 2-3 paires max
   - Accessoires : selon besoin

6. **LAYERING INTELLIGENT (si climat variable)** :
   - Prvoir des couches qui s'empilent : t-shirt  chemise/pull lger  veste
   - Chaque couche doit tre portable seule ET en combinaison

${p}

**VTEMENTS DISPONIBLES** :
${f}

**SORTIE** : 
- Un titre accrocheur pour cette valise
- Un rsum expliquant tes choix (mto, style, combinaisons possibles)
- La liste des articles avec leur ID exact`,T=await cf.models.generateContent({model:"gemini-2.5-flash",contents:v,config:{responseMimeType:"application/json",responseSchema:{type:qe.OBJECT,properties:{titre:{type:qe.STRING},resume:{type:qe.STRING},valise:{type:qe.ARRAY,items:{type:qe.OBJECT,properties:{id:{type:qe.STRING},description:{type:qe.STRING}},required:["id","description"]}}},required:["titre","resume","valise"]}}}),b=lg(T);return JSON.parse(b)}const L7=e9(i9,"generateVisualOutfit");async function O7(t,e){console.log(" Prparation du Virtual Try-On...");const n=t[0];if(!n||!n.imageSrc)throw new Error("Aucun vtement valide trouv pour l'essayage.");try{const r=(await L7({garmentUrl:n.imageSrc,category:n.category,description:n.analysis,humanImageUrl:e})).data;if(!r||!r.imageUrl)throw new Error("Pas d'image retourne par le serveur.");return console.log(" Image reue de Replicate !"),r.imageUrl}catch(i){throw console.error(" Erreur lors de l'appel Cloud Function :",i),i}}const U7=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),F7=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),lm=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),FT=({className:t="h-8 w-8 text-gold"})=>S.jsxs("svg",{className:`animate-spin ${t}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Fd=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{d:"M10 3a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0V7H8a1 1 0 110-2h1V4a1 1 0 011-1zM4 9a1 1 0 011 1v1h1a1 1 0 110 2H5v1a1 1 0 11-2 0v-1H2a1 1 0 110-2h1v-1a1 1 0 011-1zM16 9a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})}),ug=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),yI=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.5 6.6C12.5 5.54903 11.651 4.7 10.6 4.7C9.54903 4.7 8.7 5.54903 8.7 6.6V8.7C8.7 9.36274 9.23726 9.9 9.9 9.9H14.1C14.7627 9.9 15.3 9.36274 15.3 8.7V7.8"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.10879 16.5C4.43285 14.805 5.86246 13.5 7.6 13.5H16.4C18.1375 13.5 19.5672 14.805 19.8912 16.5L20.5 19.5H3.5L4.10879 16.5Z"})]}),$D=()=>S.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4 0 1.132-.497 2.16-1.32 2.874-.823.714-1.823 1.126-2.904 1.126H12v.01M12 17h.01"})}),B7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 4h6l2 5-2 1-3-4-3 4-2-1 2-5z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v10m-3-10v10h6V10"})]}),z7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 4h12v10H6z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 14v6h-2L6 4"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 14v6h2l1-16"})]}),q7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 18h16l-3-6H7L4 18z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 12V7a2 2 0 012-2h0a2 2 0 012 2v5"})]}),H7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 000-18 9 9 0 000 18z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11.5l-3.5 3.5"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.5 8.5l-3.5 3.5"})]}),um=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),BT=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),cg=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),zT=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),G7=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),KD=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[S.jsx("path",{d:"M8 3a1 1 0 000 2h4a1 1 0 100-2H8z"}),S.jsx("path",{fillRule:"evenodd",d:"M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 3a1 1 0 011-1h10a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1V7z",clipRule:"evenodd"})]}),qT=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 016.364 0L12 7.5l1.318-1.182a4.5 4.5 0 116.364 6.364L12 18.75l-7.682-7.682a4.5 4.5 0 010-6.364z"})}),Bd=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),j7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})]}),YD=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),JD=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"})}),$7=({theme:t,toggleTheme:e,children:n,isModalOpen:i=!1})=>S.jsx("header",{className:`bg-snow/80 dark:bg-onyx/80 backdrop-blur-lg border-b border-black/5 dark:border-white/10 sticky top-0 transition-all ${i?"z-10":"z-50"}`,children:S.jsxs("div",{className:"container mx-auto px-4 lg:px-8 h-24 flex justify-between items-center",children:[S.jsxs("h1",{className:"text-4xl font-serif font-bold tracking-wider text-raisin-black dark:text-snow",children:["Dress ",S.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),S.jsxs("div",{className:"flex items-center gap-4",children:[n,S.jsx("button",{onClick:e,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-black/5 dark:hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx transition-colors","aria-label":"Changer le thme",children:t==="light"?S.jsx(F7,{}):S.jsx(U7,{})})]})]})}),K7="DRESSMEUP2025",vI=({user:t})=>{var G,K,H;const[e,n]=B.useState(""),[i,r]=B.useState(""),[o,l]=B.useState(""),[c,d]=B.useState(!1),[f,p]=B.useState(!1),[v,T]=B.useState(null),[b,C]=B.useState(!1),N=B.useRef(null);B.useEffect(()=>{const R=I=>{N.current&&!N.current.contains(I.target)&&p(!1)};return f&&document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},[f]);const M=async R=>{try{return(await _F(Uu(ir,"allowedEmails",R.toLowerCase()))).exists()}catch(I){return console.error("Erreur vrification email:",I),!1}},V=async()=>{C(!0),T(null);try{const I=(await pU(Oa,n9)).user.email;if(!I){await Mv(Oa),T("Impossible de rcuprer l'email du compte Google.");return}if(!await M(I)){await Mv(Oa),T("Dsol, cette application est en beta ferme. Votre email n'est pas autoris.");return}}catch(R){console.error("Erreur de connexion Google:",R),T(R.message||"Erreur de connexion")}finally{C(!1)}},k=async R=>{R.preventDefault(),C(!0),T(null);try{if(c){if(o!==K7){T("Code d'invitation invalide."),C(!1);return}if(!await M(e)){T("Votre email n'est pas dans la liste des beta testeurs."),C(!1);return}await G4(Oa,e,i)}else{if(!await M(e)){T("Votre email n'est pas autoris  accder  la beta."),C(!1);return}await j4(Oa,e,i)}}catch(I){console.error("Erreur d'authentification:",I),I.code==="auth/user-not-found"?T("Aucun compte trouv avec cet email."):I.code==="auth/wrong-password"?T("Mot de passe incorrect."):I.code==="auth/email-already-in-use"?T("Cet email est dj utilis."):I.code==="auth/weak-password"?T("Le mot de passe doit contenir au moins 6 caractres."):T(I.message||"Erreur d'authentification")}finally{C(!1)}},F=async()=>{try{await Mv(Oa)}catch(R){console.error("Erreur de dconnexion:",R)}};return t?S.jsxs("div",{className:"relative",ref:N,children:[S.jsxs("button",{onClick:()=>p(!f),className:"flex items-center gap-3 px-4 py-2 rounded-full bg-gold/10 hover:bg-gold/20 transition-all border border-gold/30",children:[S.jsx("div",{className:"w-8 h-8 rounded-full bg-gold flex items-center justify-center text-onyx font-bold",children:(((G=t.displayName)==null?void 0:G[0])||((K=t.email)==null?void 0:K[0])||"U").toUpperCase()}),S.jsx("span",{className:"hidden md:block text-sm font-medium",children:t.displayName||((H=t.email)==null?void 0:H.split("@")[0])})]}),f&&S.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-raisin-black rounded-xl shadow-2xl border border-black/10 dark:border-white/10 overflow-hidden z-50",children:[S.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[S.jsx("p",{className:"text-sm font-medium",children:t.displayName||"Utilisateur"}),S.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.email}),S.jsx("span",{className:"inline-block mt-2 px-2 py-0.5 bg-gold/20 text-gold text-xs font-semibold rounded-full",children:"Beta Testeur"})]}),S.jsxs("button",{onClick:F,className:"w-full px-4 py-3 text-left text-sm hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors flex items-center gap-2",children:[S.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Dconnexion"]})]})]}):S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl p-8 max-w-md mx-auto border border-black/5 dark:border-white/10",children:[S.jsxs("div",{className:"text-center mb-8",children:[S.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:["Dress ",S.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),S.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:c?"Rejoindre la beta":"Bienvenue"}),S.jsx("div",{className:"mt-3 inline-block px-3 py-1 bg-gold/10 border border-gold/30 rounded-full",children:S.jsx("span",{className:"text-xs font-semibold text-gold",children:" Beta prive"})})]}),v&&S.jsx("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/30 rounded-xl text-red-500 text-sm",children:v}),S.jsx("button",{onClick:V,disabled:b,className:"w-full mb-6 px-6 py-4 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl hover:border-gold hover:shadow-lg hover:shadow-gold/20 transition-all duration-300 flex items-center justify-center gap-3 group disabled:opacity-50 disabled:cursor-not-allowed",children:b?S.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):S.jsxs(S.Fragment,{children:[S.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[S.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),S.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),S.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),S.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),S.jsx("span",{className:"font-semibold group-hover:text-gold transition-colors",children:"Continuer avec Google"})]})}),S.jsxs("div",{className:"relative my-6",children:[S.jsx("div",{className:"absolute inset-0 flex items-center",children:S.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),S.jsx("div",{className:"relative flex justify-center text-sm",children:S.jsx("span",{className:"px-4 bg-white dark:bg-raisin-black text-gray-500",children:"Ou avec email"})})]}),S.jsxs("form",{onSubmit:k,className:"space-y-4",children:[S.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:R=>n(R.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),S.jsx("input",{type:"password",placeholder:"Mot de passe",value:i,onChange:R=>r(R.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),c&&S.jsx("input",{type:"text",placeholder:"Code d'invitation",value:o,onChange:R=>l(R.target.value.toUpperCase()),className:"w-full px-4 py-3 border border-gold/50 dark:border-gold/30 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-gold/5 dark:bg-gold/10 transition-all placeholder:text-gold/50",required:!0}),S.jsx("button",{type:"submit",disabled:b,className:"w-full px-6 py-4 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all duration-300 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:b?S.jsxs("svg",{className:"animate-spin h-5 w-5 mx-auto",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):c?"Rejoindre la beta":"Se connecter"})]}),S.jsx("button",{onClick:()=>{d(!c),T(null)},className:"w-full mt-6 text-sm text-gray-500 hover:text-gold transition-colors",children:c?"Dj un compte ? Se connecter":"Pas encore de compte ? Rejoindre la beta"})]})},HT=B.createContext({});function GT(t){const e=B.useRef(null);return e.current===null&&(e.current=t()),e.current}const dg=B.createContext(null),jT=B.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class Y7 extends B.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function J7({children:t,isPresent:e}){const n=B.useId(),i=B.useRef(null),r=B.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=B.useContext(jT);return B.useInsertionEffect(()=>{const{width:l,height:c,top:d,left:f}=r.current;if(e||!i.current||!l||!c)return;i.current.dataset.motionPopId=n;const p=document.createElement("style");return o&&(p.nonce=o),document.head.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${c}px !important;
            top: ${d}px !important;
            left: ${f}px !important;
          }
        `),()=>{document.head.removeChild(p)}},[e]),S.jsx(Y7,{isPresent:e,childRef:i,sizeRef:r,children:B.cloneElement(t,{ref:i})})}const W7=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:l})=>{const c=GT(Q7),d=B.useId(),f=B.useCallback(v=>{c.set(v,!0);for(const T of c.values())if(!T)return;i&&i()},[c,i]),p=B.useMemo(()=>({id:d,initial:e,isPresent:n,custom:r,onExitComplete:f,register:v=>(c.set(v,!1),()=>c.delete(v))}),o?[Math.random(),f]:[n,f]);return B.useMemo(()=>{c.forEach((v,T)=>c.set(T,!1))},[n]),B.useEffect(()=>{!n&&!c.size&&i&&i()},[n]),l==="popLayout"&&(t=S.jsx(J7,{isPresent:n,children:t})),S.jsx(dg.Provider,{value:p,children:t})};function Q7(){return new Map}function WD(t=!0){const e=B.useContext(dg);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,o=B.useId();B.useEffect(()=>{t&&r(o)},[t]);const l=B.useCallback(()=>t&&i&&i(o),[o,i,t]);return!n&&i?[!1,l]:[!0]}const Kh=t=>t.key||"";function _I(t){const e=[];return B.Children.forEach(t,n=>{B.isValidElement(n)&&e.push(n)}),e}const $T=typeof window<"u",QD=$T?B.useLayoutEffect:B.useEffect,X7=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:o="sync",propagate:l=!1})=>{const[c,d]=WD(l),f=B.useMemo(()=>_I(t),[t]),p=l&&!c?[]:f.map(Kh),v=B.useRef(!0),T=B.useRef(f),b=GT(()=>new Map),[C,N]=B.useState(f),[M,V]=B.useState(f);QD(()=>{v.current=!1,T.current=f;for(let G=0;G<M.length;G++){const K=Kh(M[G]);p.includes(K)?b.delete(K):b.get(K)!==!0&&b.set(K,!1)}},[M,p.length,p.join("-")]);const k=[];if(f!==C){let G=[...f];for(let K=0;K<M.length;K++){const H=M[K],R=Kh(H);p.includes(R)||(G.splice(K,0,H),k.push(H))}o==="wait"&&k.length&&(G=k),V(_I(G)),N(f);return}const{forceRender:F}=B.useContext(HT);return S.jsx(S.Fragment,{children:M.map(G=>{const K=Kh(G),H=l&&!c?!1:f===M||p.includes(K),R=()=>{if(b.has(K))b.set(K,!0);else return;let I=!0;b.forEach(P=>{P||(I=!1)}),I&&(F==null||F(),V(T.current),l&&(d==null||d()),i&&i())};return S.jsx(W7,{isPresent:H,initial:!v.current||n?void 0:!1,custom:H?void 0:e,presenceAffectsLayout:r,mode:o,onExitComplete:H?void 0:R,children:G},K)})})},tr=t=>t;let XD=tr;function KT(t){let e;return()=>(e===void 0&&(e=t()),e)}const Au=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},Ls=t=>t*1e3,Os=t=>t/1e3,Z7={useManualTiming:!1};function ej(t){let e=new Set,n=new Set,i=!1,r=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(f){o.has(f)&&(d.schedule(f),t()),f(l)}const d={schedule:(f,p=!1,v=!1)=>{const b=v&&i?e:n;return p&&o.add(f),b.has(f)||b.add(f),f},cancel:f=>{n.delete(f),o.delete(f)},process:f=>{if(l=f,i){r=!0;return}i=!0,[e,n]=[n,e],e.forEach(c),e.clear(),i=!1,r&&(r=!1,d.process(f))}};return d}const Yh=["read","resolveKeyframes","update","preRender","render","postRender"],tj=40;function ZD(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,l=Yh.reduce((V,k)=>(V[k]=ej(o),V),{}),{read:c,resolveKeyframes:d,update:f,preRender:p,render:v,postRender:T}=l,b=()=>{const V=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(V-r.timestamp,tj),1),r.timestamp=V,r.isProcessing=!0,c.process(r),d.process(r),f.process(r),p.process(r),v.process(r),T.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(b))},C=()=>{n=!0,i=!0,r.isProcessing||t(b)};return{schedule:Yh.reduce((V,k)=>{const F=l[k];return V[k]=(G,K=!1,H=!1)=>(n||C(),F.schedule(G,K,H)),V},{}),cancel:V=>{for(let k=0;k<Yh.length;k++)l[Yh[k]].cancel(V)},state:r,steps:l}}const{schedule:Jt,cancel:ea,state:Zn,steps:zv}=ZD(typeof requestAnimationFrame<"u"?requestAnimationFrame:tr,!0),eM=B.createContext({strict:!1}),TI={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Cu={};for(const t in TI)Cu[t]={isEnabled:e=>TI[t].some(n=>!!e[n])};function nj(t){for(const e in t)Cu[e]={...Cu[e],...t[e]}}const ij=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function cm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||ij.has(t)}let tM=t=>!cm(t);function rj(t){t&&(tM=e=>e.startsWith("on")?!cm(e):t(e))}try{rj(require("@emotion/is-prop-valid").default)}catch{}function sj(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(tM(r)||n===!0&&cm(r)||!e&&!cm(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function oj(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...i)=>t(...i);return new Proxy(n,{get:(i,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}const fg=B.createContext({});function zd(t){return typeof t=="string"||Array.isArray(t)}function hg(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const YT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],JT=["initial",...YT];function pg(t){return hg(t.animate)||JT.some(e=>zd(t[e]))}function nM(t){return!!(pg(t)||t.variants)}function aj(t,e){if(pg(t)){const{initial:n,animate:i}=t;return{initial:n===!1||zd(n)?n:void 0,animate:zd(i)?i:void 0}}return t.inherit!==!1?e:{}}function lj(t){const{initial:e,animate:n}=aj(t,B.useContext(fg));return B.useMemo(()=>({initial:e,animate:n}),[EI(e),EI(n)])}function EI(t){return Array.isArray(t)?t.join(" "):t}const uj=Symbol.for("motionComponentSymbol");function iu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function cj(t,e,n){return B.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):iu(n)&&(n.current=i))},[e])}const WT=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),dj="framerAppearId",iM="data-"+WT(dj),{schedule:QT}=ZD(queueMicrotask,!1),rM=B.createContext({});function fj(t,e,n,i,r){var o,l;const{visualElement:c}=B.useContext(fg),d=B.useContext(eM),f=B.useContext(dg),p=B.useContext(jT).reducedMotion,v=B.useRef(null);i=i||d.renderer,!v.current&&i&&(v.current=i(t,{visualState:e,parent:c,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:p}));const T=v.current,b=B.useContext(rM);T&&!T.projection&&r&&(T.type==="html"||T.type==="svg")&&hj(v.current,n,r,b);const C=B.useRef(!1);B.useInsertionEffect(()=>{T&&C.current&&T.update(n,f)});const N=n[iM],M=B.useRef(!!N&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,N))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,N)));return QD(()=>{T&&(C.current=!0,window.MotionIsMounted=!0,T.updateFeatures(),QT.render(T.render),M.current&&T.animationState&&T.animationState.animateChanges())}),B.useEffect(()=>{T&&(!M.current&&T.animationState&&T.animationState.animateChanges(),M.current&&(queueMicrotask(()=>{var V;(V=window.MotionHandoffMarkAsComplete)===null||V===void 0||V.call(window,N)}),M.current=!1))}),T}function hj(t,e,n,i){const{layoutId:r,layout:o,drag:l,dragConstraints:c,layoutScroll:d,layoutRoot:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:sM(t.parent)),t.projection.setOptions({layoutId:r,layout:o,alwaysMeasureLayout:!!l||c&&iu(c),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,layoutScroll:d,layoutRoot:f})}function sM(t){if(t)return t.options.allowProjection!==!1?t.projection:sM(t.parent)}function pj({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){var o,l;t&&nj(t);function c(f,p){let v;const T={...B.useContext(jT),...f,layoutId:mj(f)},{isStatic:b}=T,C=lj(f),N=i(f,b);if(!b&&$T){gj();const M=yj(T);v=M.MeasureLayout,C.visualElement=fj(r,N,T,e,M.ProjectionNode)}return S.jsxs(fg.Provider,{value:C,children:[v&&C.visualElement?S.jsx(v,{visualElement:C.visualElement,...T}):null,n(r,f,cj(N,C.visualElement,p),N,b,C.visualElement)]})}c.displayName=`motion.${typeof r=="string"?r:`create(${(l=(o=r.displayName)!==null&&o!==void 0?o:r.name)!==null&&l!==void 0?l:""})`}`;const d=B.forwardRef(c);return d[uj]=r,d}function mj({layoutId:t}){const e=B.useContext(HT).id;return e&&t!==void 0?e+"-"+t:t}function gj(t,e){B.useContext(eM).strict}function yj(t){const{drag:e,layout:n}=Cu;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const vj=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function XT(t){return typeof t!="string"||t.includes("-")?!1:!!(vj.indexOf(t)>-1||/[A-Z]/u.test(t))}function SI(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function ZT(t,e,n,i){if(typeof e=="function"){const[r,o]=SI(i);e=e(n!==void 0?n:t.custom,r,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,o]=SI(i);e=e(n!==void 0?n:t.custom,r,o)}return e}const J0=t=>Array.isArray(t),_j=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Tj=t=>J0(t)?t[t.length-1]||0:t,fi=t=>!!(t&&t.getVelocity);function Ap(t){const e=fi(t)?t.get():t;return _j(e)?e.toValue():e}function Ej({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},i,r,o){const l={latestValues:Sj(i,r,o,t),renderState:e()};return n&&(l.onMount=c=>n({props:i,current:c,...l}),l.onUpdate=c=>n(c)),l}const oM=t=>(e,n)=>{const i=B.useContext(fg),r=B.useContext(dg),o=()=>Ej(t,e,i,r);return n?o():GT(o)};function Sj(t,e,n,i){const r={},o=i(t,{});for(const T in o)r[T]=Ap(o[T]);let{initial:l,animate:c}=t;const d=pg(t),f=nM(t);e&&f&&!d&&t.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let p=n?n.initial===!1:!1;p=p||l===!1;const v=p?c:l;if(v&&typeof v!="boolean"&&!hg(v)){const T=Array.isArray(v)?v:[v];for(let b=0;b<T.length;b++){const C=ZT(t,T[b]);if(C){const{transitionEnd:N,transition:M,...V}=C;for(const k in V){let F=V[k];if(Array.isArray(F)){const G=p?F.length-1:0;F=F[G]}F!==null&&(r[k]=F)}for(const k in N)r[k]=N[k]}}}return r}const qu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ll=new Set(qu),aM=t=>e=>typeof e=="string"&&e.startsWith(t),lM=aM("--"),bj=aM("var(--"),eE=t=>bj(t)?wj.test(t.split("/*")[0].trim()):!1,wj=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,uM=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Gs=(t,e,n)=>n>e?e:n<t?t:n,Hu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},qd={...Hu,transform:t=>Gs(0,1,t)},Jh={...Hu,default:1},df=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Po=df("deg"),as=df("%"),Oe=df("px"),xj=df("vh"),Aj=df("vw"),bI={...as,parse:t=>as.parse(t)/100,transform:t=>as.transform(t*100)},Cj={borderWidth:Oe,borderTopWidth:Oe,borderRightWidth:Oe,borderBottomWidth:Oe,borderLeftWidth:Oe,borderRadius:Oe,radius:Oe,borderTopLeftRadius:Oe,borderTopRightRadius:Oe,borderBottomRightRadius:Oe,borderBottomLeftRadius:Oe,width:Oe,maxWidth:Oe,height:Oe,maxHeight:Oe,top:Oe,right:Oe,bottom:Oe,left:Oe,padding:Oe,paddingTop:Oe,paddingRight:Oe,paddingBottom:Oe,paddingLeft:Oe,margin:Oe,marginTop:Oe,marginRight:Oe,marginBottom:Oe,marginLeft:Oe,backgroundPositionX:Oe,backgroundPositionY:Oe},Ij={rotate:Po,rotateX:Po,rotateY:Po,rotateZ:Po,scale:Jh,scaleX:Jh,scaleY:Jh,scaleZ:Jh,skew:Po,skewX:Po,skewY:Po,distance:Oe,translateX:Oe,translateY:Oe,translateZ:Oe,x:Oe,y:Oe,z:Oe,perspective:Oe,transformPerspective:Oe,opacity:qd,originX:bI,originY:bI,originZ:Oe},wI={...Hu,transform:Math.round},tE={...Cj,...Ij,zIndex:wI,size:Oe,fillOpacity:qd,strokeOpacity:qd,numOctaves:wI},Rj={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Nj=qu.length;function Pj(t,e,n){let i="",r=!0;for(let o=0;o<Nj;o++){const l=qu[o],c=t[l];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(l.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||n){const f=uM(c,tE[l]);if(!d){r=!1;const p=Rj[l]||l;i+=`${p}(${f}) `}n&&(e[l]=f)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function nE(t,e,n){const{style:i,vars:r,transformOrigin:o}=t;let l=!1,c=!1;for(const d in e){const f=e[d];if(ll.has(d)){l=!0;continue}else if(lM(d)){r[d]=f;continue}else{const p=uM(f,tE[d]);d.startsWith("origin")?(c=!0,o[d]=p):i[d]=p}}if(e.transform||(l||n?i.transform=Pj(e,t.transform,n):i.transform&&(i.transform="none")),c){const{originX:d="50%",originY:f="50%",originZ:p=0}=o;i.transformOrigin=`${d} ${f} ${p}`}}const Dj={offset:"stroke-dashoffset",array:"stroke-dasharray"},Mj={offset:"strokeDashoffset",array:"strokeDasharray"};function kj(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?Dj:Mj;t[o.offset]=Oe.transform(-i);const l=Oe.transform(e),c=Oe.transform(n);t[o.array]=`${l} ${c}`}function xI(t,e,n){return typeof t=="string"?t:Oe.transform(e+n*t)}function Vj(t,e,n){const i=xI(e,t.x,t.width),r=xI(n,t.y,t.height);return`${i} ${r}`}function iE(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:o,pathLength:l,pathSpacing:c=1,pathOffset:d=0,...f},p,v){if(nE(t,f,v),p){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:T,style:b,dimensions:C}=t;T.transform&&(C&&(b.transform=T.transform),delete T.transform),C&&(r!==void 0||o!==void 0||b.transform)&&(b.transformOrigin=Vj(C,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(T.x=e),n!==void 0&&(T.y=n),i!==void 0&&(T.scale=i),l!==void 0&&kj(T,l,c,d,!1)}const rE=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),cM=()=>({...rE(),attrs:{}}),sE=t=>typeof t=="string"&&t.toLowerCase()==="svg";function dM(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const o in n)t.style.setProperty(o,n[o])}const fM=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function hM(t,e,n,i){dM(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(fM.has(r)?r:WT(r),e.attrs[r])}const dm={};function Lj(t){Object.assign(dm,t)}function pM(t,{layout:e,layoutId:n}){return ll.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!dm[t]||t==="opacity")}function oE(t,e,n){var i;const{style:r}=t,o={};for(const l in r)(fi(r[l])||e.style&&fi(e.style[l])||pM(l,t)||((i=n==null?void 0:n.getValue(l))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(o[l]=r[l]);return o}function mM(t,e,n){const i=oE(t,e,n);for(const r in t)if(fi(t[r])||fi(e[r])){const o=qu.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[o]=t[r]}return i}function Oj(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const AI=["x","y","width","height","cx","cy","r"],Uj={useVisualState:oM({scrapeMotionValuesFromProps:mM,createRenderState:cM,onUpdate:({props:t,prevProps:e,current:n,renderState:i,latestValues:r})=>{if(!n)return;let o=!!t.drag;if(!o){for(const c in r)if(ll.has(c)){o=!0;break}}if(!o)return;let l=!e;if(e)for(let c=0;c<AI.length;c++){const d=AI[c];t[d]!==e[d]&&(l=!0)}l&&Jt.read(()=>{Oj(n,i),Jt.render(()=>{iE(i,r,sE(n.tagName),t.transformTemplate),hM(n,i)})})}})},Fj={useVisualState:oM({scrapeMotionValuesFromProps:oE,createRenderState:rE})};function gM(t,e,n){for(const i in e)!fi(e[i])&&!pM(i,n)&&(t[i]=e[i])}function Bj({transformTemplate:t},e){return B.useMemo(()=>{const n=rE();return nE(n,e,t),Object.assign({},n.vars,n.style)},[e])}function zj(t,e){const n=t.style||{},i={};return gM(i,n,t),Object.assign(i,Bj(t,e)),i}function qj(t,e){const n={},i=zj(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}function Hj(t,e,n,i){const r=B.useMemo(()=>{const o=cM();return iE(o,e,sE(i),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};gM(o,t.style,t),r.style={...o,...r.style}}return r}function Gj(t=!1){return(n,i,r,{latestValues:o},l)=>{const d=(XT(n)?Hj:qj)(i,o,l,n),f=sj(i,typeof n=="string",t),p=n!==B.Fragment?{...f,...d,ref:r}:{},{children:v}=i,T=B.useMemo(()=>fi(v)?v.get():v,[v]);return B.createElement(n,{...p,children:T})}}function jj(t,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const l={...XT(i)?Uj:Fj,preloadedFeatures:t,useRender:Gj(r),createVisualElement:e,Component:i};return pj(l)}}function yM(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function mg(t,e,n){const i=t.getProps();return ZT(i,e,n!==void 0?n:i.custom,t)}const $j=KT(()=>window.ScrollTimeline!==void 0);class Kj{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e,n){const i=this.animations.map(r=>{if($j()&&r.attachTimeline)return r.attachTimeline(e);if(typeof n=="function")return n(r)});return()=>{i.forEach((r,o)=>{r&&r(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Yj extends Kj{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function aE(t,e){return t?t[e]||t.default||t:void 0}const W0=2e4;function vM(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<W0;)e+=n,i=t.next(e);return e>=W0?1/0:e}function lE(t){return typeof t=="function"}function CI(t,e){t.timeline=e,t.onfinish=null}const uE=t=>Array.isArray(t)&&typeof t[0]=="number",Jj={linearEasing:void 0};function Wj(t,e){const n=KT(t);return()=>{var i;return(i=Jj[e])!==null&&i!==void 0?i:n()}}const fm=Wj(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),_M=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let o=0;o<r;o++)i+=t(Au(0,r-1,o))+", ";return`linear(${i.substring(0,i.length-2)})`};function TM(t){return!!(typeof t=="function"&&fm()||!t||typeof t=="string"&&(t in Q0||fm())||uE(t)||Array.isArray(t)&&t.every(TM))}const td=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,Q0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:td([0,.65,.55,1]),circOut:td([.55,0,1,.45]),backIn:td([.31,.01,.66,-.59]),backOut:td([.33,1.53,.69,.99])};function EM(t,e){if(t)return typeof t=="function"&&fm()?_M(t,e):uE(t)?td(t):Array.isArray(t)?t.map(n=>EM(n,e)||Q0.easeOut):Q0[t]}const Mr={x:!1,y:!1};function SM(){return Mr.x||Mr.y}function Qj(t,e,n){var i;if(t instanceof Element)return[t];if(typeof t=="string"){let r=document;const o=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function bM(t,e){const n=Qj(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function II(t){return e=>{e.pointerType==="touch"||SM()||t(e)}}function Xj(t,e,n={}){const[i,r,o]=bM(t,n),l=II(c=>{const{target:d}=c,f=e(c);if(typeof f!="function"||!d)return;const p=II(v=>{f(v),d.removeEventListener("pointerleave",p)});d.addEventListener("pointerleave",p,r)});return i.forEach(c=>{c.addEventListener("pointerenter",l,r)}),o}const wM=(t,e)=>e?t===e?!0:wM(t,e.parentElement):!1,cE=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Zj=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function e$(t){return Zj.has(t.tagName)||t.tabIndex!==-1}const nd=new WeakSet;function RI(t){return e=>{e.key==="Enter"&&t(e)}}function qv(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const t$=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=RI(()=>{if(nd.has(n))return;qv(n,"down");const r=RI(()=>{qv(n,"up")}),o=()=>qv(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function NI(t){return cE(t)&&!SM()}function n$(t,e,n={}){const[i,r,o]=bM(t,n),l=c=>{const d=c.currentTarget;if(!NI(c)||nd.has(d))return;nd.add(d);const f=e(c),p=(b,C)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",T),!(!NI(b)||!nd.has(d))&&(nd.delete(d),typeof f=="function"&&f(b,{success:C}))},v=b=>{p(b,n.useGlobalTarget||wM(d,b.target))},T=b=>{p(b,!1)};window.addEventListener("pointerup",v,r),window.addEventListener("pointercancel",T,r)};return i.forEach(c=>{!e$(c)&&c.getAttribute("tabindex")===null&&(c.tabIndex=0),(n.useGlobalTarget?window:c).addEventListener("pointerdown",l,r),c.addEventListener("focus",f=>t$(f,r),r)}),o}function i$(t){return t==="x"||t==="y"?Mr[t]?null:(Mr[t]=!0,()=>{Mr[t]=!1}):Mr.x||Mr.y?null:(Mr.x=Mr.y=!0,()=>{Mr.x=Mr.y=!1})}const xM=new Set(["width","height","top","left","right","bottom",...qu]);let Cp;function r$(){Cp=void 0}const ls={now:()=>(Cp===void 0&&ls.set(Zn.isProcessing||Z7.useManualTiming?Zn.timestamp:performance.now()),Cp),set:t=>{Cp=t,queueMicrotask(r$)}};function dE(t,e){t.indexOf(e)===-1&&t.push(e)}function fE(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class hE{constructor(){this.subscriptions=[]}add(e){return dE(this.subscriptions,e),()=>fE(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const l=this.subscriptions[o];l&&l(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function AM(t,e){return e?t*(1e3/e):0}const PI=30,s$=t=>!isNaN(parseFloat(t));class o${constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const o=ls.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ls.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=s$(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new hE);const i=this.events[e].add(n);return e==="change"?()=>{i(),Jt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ls.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>PI)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,PI);return AM(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Hd(t,e){return new o$(t,e)}function a$(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Hd(n))}function l$(t,e){const n=mg(t,e);let{transitionEnd:i={},transition:r={},...o}=n||{};o={...o,...i};for(const l in o){const c=Tj(o[l]);a$(t,l,c)}}function u$(t){return!!(fi(t)&&t.add)}function X0(t,e){const n=t.getValue("willChange");if(u$(n))return n.add(e)}function CM(t){return t.props[iM]}const IM=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,c$=1e-7,d$=12;function f$(t,e,n,i,r){let o,l,c=0;do l=e+(n-e)/2,o=IM(l,i,r)-t,o>0?n=l:e=l;while(Math.abs(o)>c$&&++c<d$);return l}function ff(t,e,n,i){if(t===e&&n===i)return tr;const r=o=>f$(o,0,1,t,n);return o=>o===0||o===1?o:IM(r(o),e,i)}const RM=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,NM=t=>e=>1-t(1-e),PM=ff(.33,1.53,.69,.99),pE=NM(PM),DM=RM(pE),MM=t=>(t*=2)<1?.5*pE(t):.5*(2-Math.pow(2,-10*(t-1))),mE=t=>1-Math.sin(Math.acos(t)),kM=NM(mE),VM=RM(mE),LM=t=>/^0[^.\s]+$/u.test(t);function h$(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||LM(t):!0}const gd=t=>Math.round(t*1e5)/1e5,gE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function p$(t){return t==null}const m$=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,yE=(t,e)=>n=>!!(typeof n=="string"&&m$.test(n)&&n.startsWith(t)||e&&!p$(n)&&Object.prototype.hasOwnProperty.call(n,e)),OM=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,o,l,c]=i.match(gE);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},g$=t=>Gs(0,255,t),Hv={...Hu,transform:t=>Math.round(g$(t))},Ha={test:yE("rgb","red"),parse:OM("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Hv.transform(t)+", "+Hv.transform(e)+", "+Hv.transform(n)+", "+gd(qd.transform(i))+")"};function y$(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const Z0={test:yE("#"),parse:y$,transform:Ha.transform},ru={test:yE("hsl","hue"),parse:OM("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+as.transform(gd(e))+", "+as.transform(gd(n))+", "+gd(qd.transform(i))+")"},ai={test:t=>Ha.test(t)||Z0.test(t)||ru.test(t),parse:t=>Ha.test(t)?Ha.parse(t):ru.test(t)?ru.parse(t):Z0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ha.transform(t):ru.transform(t)},v$=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function _$(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(gE))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(v$))===null||n===void 0?void 0:n.length)||0)>0}const UM="number",FM="color",T$="var",E$="var(",DI="${}",S$=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Gd(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let o=0;const c=e.replace(S$,d=>(ai.test(d)?(i.color.push(o),r.push(FM),n.push(ai.parse(d))):d.startsWith(E$)?(i.var.push(o),r.push(T$),n.push(d)):(i.number.push(o),r.push(UM),n.push(parseFloat(d))),++o,DI)).split(DI);return{values:n,split:c,indexes:i,types:r}}function BM(t){return Gd(t).values}function zM(t){const{split:e,types:n}=Gd(t),i=e.length;return r=>{let o="";for(let l=0;l<i;l++)if(o+=e[l],r[l]!==void 0){const c=n[l];c===UM?o+=gd(r[l]):c===FM?o+=ai.transform(r[l]):o+=r[l]}return o}}const b$=t=>typeof t=="number"?0:t;function w$(t){const e=BM(t);return zM(t)(e.map(b$))}const ta={test:_$,parse:BM,createTransformer:zM,getAnimatableNone:w$},x$=new Set(["brightness","contrast","saturate","opacity"]);function A$(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(gE)||[];if(!i)return t;const r=n.replace(i,"");let o=x$.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const C$=/\b([a-z-]*)\(.*?\)/gu,e_={...ta,getAnimatableNone:t=>{const e=t.match(C$);return e?e.map(A$).join(" "):t}},I$={...tE,color:ai,backgroundColor:ai,outlineColor:ai,fill:ai,stroke:ai,borderColor:ai,borderTopColor:ai,borderRightColor:ai,borderBottomColor:ai,borderLeftColor:ai,filter:e_,WebkitFilter:e_},vE=t=>I$[t];function qM(t,e){let n=vE(t);return n!==e_&&(n=ta),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const R$=new Set(["auto","none","0"]);function N$(t,e,n){let i=0,r;for(;i<t.length&&!r;){const o=t[i];typeof o=="string"&&!R$.has(o)&&Gd(o).values.length&&(r=t[i]),i++}if(r&&n)for(const o of e)t[o]=qM(n,r)}const MI=t=>t===Hu||t===Oe,kI=(t,e)=>parseFloat(t.split(", ")[e]),VI=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return kI(r[1],e);{const o=i.match(/^matrix\((.+)\)$/u);return o?kI(o[1],t):0}},P$=new Set(["x","y","z"]),D$=qu.filter(t=>!P$.has(t));function M$(t){const e=[];return D$.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const Iu={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:VI(4,13),y:VI(5,14)};Iu.translateX=Iu.x;Iu.translateY=Iu.y;const $a=new Set;let t_=!1,n_=!1;function HM(){if(n_){const t=Array.from($a).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=M$(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([o,l])=>{var c;(c=i.getValue(o))===null||c===void 0||c.set(l)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}n_=!1,t_=!1,$a.forEach(t=>t.complete()),$a.clear()}function GM(){$a.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(n_=!0)})}function k$(){GM(),HM()}class _E{constructor(e,n,i,r,o,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=o,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?($a.add(this),t_||(t_=!0,Jt.read(GM),Jt.resolveKeyframes(HM))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const l=r==null?void 0:r.get(),c=e[e.length-1];if(l!==void 0)e[0]=l;else if(i&&n){const d=i.readValue(n,c);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=c),r&&l===void 0&&r.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),$a.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,$a.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const jM=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),V$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function L$(t){const e=V$.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function $M(t,e,n=1){const[i,r]=L$(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const l=o.trim();return jM(l)?parseFloat(l):l}return eE(r)?$M(r,e,n+1):r}const KM=t=>e=>e.test(t),O$={test:t=>t==="auto",parse:t=>t},YM=[Hu,Oe,as,Po,Aj,xj,O$],LI=t=>YM.find(KM(t));class JM extends _E{constructor(e,n,i,r,o){super(e,n,i,r,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),eE(f))){const p=$M(f,n.current);p!==void 0&&(e[d]=p),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!xM.has(i)||e.length!==2)return;const[r,o]=e,l=LI(r),c=LI(o);if(l!==c)if(MI(l)&&MI(c))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)h$(e[r])&&i.push(r);i.length&&N$(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Iu[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:n,name:i,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const o=n.getValue(i);o&&o.jump(this.measuredOrigin,!1);const l=r.length-1,c=r[l];r[l]=Iu[i](n.measureViewportBox(),window.getComputedStyle(n.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([d,f])=>{n.getValue(d).set(f)}),this.resolveNoneKeyframes()}}const OI=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ta.test(t)||t==="0")&&!t.startsWith("url("));function U$(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function F$(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],l=OI(r,e),c=OI(o,e);return!l||!c?!1:U$(t)||(n==="spring"||lE(n))&&i}const B$=t=>t!==null;function gg(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(B$),o=e&&n!=="loop"&&e%2===1?0:r.length-1;return!o||i===void 0?r[o]:i}const z$=40;class WM{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:l="loop",...c}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ls.now(),this.options={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:o,repeatType:l,...c},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>z$?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&k$(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=ls.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:o,delay:l,onComplete:c,onUpdate:d,isGenerator:f}=this.options;if(!f&&!F$(e,i,r,o))if(l)this.options.duration=0;else{d&&d(gg(e,this.options,n)),c&&c(),this.resolveFinishedPromise();return}const p=this.initPlayback(e,n);p!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...p},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const tn=(t,e,n)=>t+(e-t)*n;function Gv(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function q$({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,l=0;if(!e)r=o=l=n;else{const c=n<.5?n*(1+e):n+e-n*e,d=2*n-c;r=Gv(d,c,t+1/3),o=Gv(d,c,t),l=Gv(d,c,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:i}}function hm(t,e){return n=>n>0?e:t}const jv=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},H$=[Z0,Ha,ru],G$=t=>H$.find(e=>e.test(t));function UI(t){const e=G$(t);if(!e)return!1;let n=e.parse(t);return e===ru&&(n=q$(n)),n}const FI=(t,e)=>{const n=UI(t),i=UI(e);if(!n||!i)return hm(t,e);const r={...n};return o=>(r.red=jv(n.red,i.red,o),r.green=jv(n.green,i.green,o),r.blue=jv(n.blue,i.blue,o),r.alpha=tn(n.alpha,i.alpha,o),Ha.transform(r))},j$=(t,e)=>n=>e(t(n)),hf=(...t)=>t.reduce(j$),i_=new Set(["none","hidden"]);function $$(t,e){return i_.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function K$(t,e){return n=>tn(t,e,n)}function TE(t){return typeof t=="number"?K$:typeof t=="string"?eE(t)?hm:ai.test(t)?FI:W$:Array.isArray(t)?QM:typeof t=="object"?ai.test(t)?FI:Y$:hm}function QM(t,e){const n=[...t],i=n.length,r=t.map((o,l)=>TE(o)(o,e[l]));return o=>{for(let l=0;l<i;l++)n[l]=r[l](o);return n}}function Y$(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=TE(t[r])(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}}function J$(t,e){var n;const i=[],r={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const l=e.types[o],c=t.indexes[l][r[l]],d=(n=t.values[c])!==null&&n!==void 0?n:0;i[o]=d,r[l]++}return i}const W$=(t,e)=>{const n=ta.createTransformer(e),i=Gd(t),r=Gd(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?i_.has(t)&&!r.values.length||i_.has(e)&&!i.values.length?$$(t,e):hf(QM(J$(i,r),r.values),n):hm(t,e)};function XM(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?tn(t,e,n):TE(t)(t,e)}const Q$=5;function ZM(t,e,n){const i=Math.max(e-Q$,0);return AM(n-t(i),e-i)}const un={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},$v=.001;function X$({duration:t=un.duration,bounce:e=un.bounce,velocity:n=un.velocity,mass:i=un.mass}){let r,o,l=1-e;l=Gs(un.minDamping,un.maxDamping,l),t=Gs(un.minDuration,un.maxDuration,Os(t)),l<1?(r=f=>{const p=f*l,v=p*t,T=p-n,b=r_(f,l),C=Math.exp(-v);return $v-T/b*C},o=f=>{const v=f*l*t,T=v*n+n,b=Math.pow(l,2)*Math.pow(f,2)*t,C=Math.exp(-v),N=r_(Math.pow(f,2),l);return(-r(f)+$v>0?-1:1)*((T-b)*C)/N}):(r=f=>{const p=Math.exp(-f*t),v=(f-n)*t+1;return-$v+p*v},o=f=>{const p=Math.exp(-f*t),v=(n-f)*(t*t);return p*v});const c=5/t,d=eK(r,o,c);if(t=Ls(t),isNaN(d))return{stiffness:un.stiffness,damping:un.damping,duration:t};{const f=Math.pow(d,2)*i;return{stiffness:f,damping:l*2*Math.sqrt(i*f),duration:t}}}const Z$=12;function eK(t,e,n){let i=n;for(let r=1;r<Z$;r++)i=i-t(i)/e(i);return i}function r_(t,e){return t*Math.sqrt(1-e*e)}const tK=["duration","bounce"],nK=["stiffness","damping","mass"];function BI(t,e){return e.some(n=>t[n]!==void 0)}function iK(t){let e={velocity:un.velocity,stiffness:un.stiffness,damping:un.damping,mass:un.mass,isResolvedFromDuration:!1,...t};if(!BI(t,nK)&&BI(t,tK))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,o=2*Gs(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:un.mass,stiffness:r,damping:o}}else{const n=X$(t);e={...e,...n,mass:un.mass},e.isResolvedFromDuration=!0}return e}function e2(t=un.visualDuration,e=un.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const o=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],c={done:!1,value:o},{stiffness:d,damping:f,mass:p,duration:v,velocity:T,isResolvedFromDuration:b}=iK({...n,velocity:-Os(n.velocity||0)}),C=T||0,N=f/(2*Math.sqrt(d*p)),M=l-o,V=Os(Math.sqrt(d/p)),k=Math.abs(M)<5;i||(i=k?un.restSpeed.granular:un.restSpeed.default),r||(r=k?un.restDelta.granular:un.restDelta.default);let F;if(N<1){const K=r_(V,N);F=H=>{const R=Math.exp(-N*V*H);return l-R*((C+N*V*M)/K*Math.sin(K*H)+M*Math.cos(K*H))}}else if(N===1)F=K=>l-Math.exp(-V*K)*(M+(C+V*M)*K);else{const K=V*Math.sqrt(N*N-1);F=H=>{const R=Math.exp(-N*V*H),I=Math.min(K*H,300);return l-R*((C+N*V*M)*Math.sinh(I)+K*M*Math.cosh(I))/K}}const G={calculatedDuration:b&&v||null,next:K=>{const H=F(K);if(b)c.done=K>=v;else{let R=0;N<1&&(R=K===0?Ls(C):ZM(F,K,H));const I=Math.abs(R)<=i,P=Math.abs(l-H)<=r;c.done=I&&P}return c.value=c.done?l:H,c},toString:()=>{const K=Math.min(vM(G),W0),H=_M(R=>G.next(K*R).value,K,30);return K+"ms "+H}};return G}function zI({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:l,min:c,max:d,restDelta:f=.5,restSpeed:p}){const v=t[0],T={done:!1,value:v},b=I=>c!==void 0&&I<c||d!==void 0&&I>d,C=I=>c===void 0?d:d===void 0||Math.abs(c-I)<Math.abs(d-I)?c:d;let N=n*e;const M=v+N,V=l===void 0?M:l(M);V!==M&&(N=V-v);const k=I=>-N*Math.exp(-I/i),F=I=>V+k(I),G=I=>{const P=k(I),U=F(I);T.done=Math.abs(P)<=f,T.value=T.done?V:U};let K,H;const R=I=>{b(T.value)&&(K=I,H=e2({keyframes:[T.value,C(T.value)],velocity:ZM(F,I,T.value),damping:r,stiffness:o,restDelta:f,restSpeed:p}))};return R(0),{calculatedDuration:null,next:I=>{let P=!1;return!H&&K===void 0&&(P=!0,G(I),R(I)),K!==void 0&&I>=K?H.next(I-K):(!P&&G(I),T)}}}const rK=ff(.42,0,1,1),sK=ff(0,0,.58,1),t2=ff(.42,0,.58,1),oK=t=>Array.isArray(t)&&typeof t[0]!="number",aK={linear:tr,easeIn:rK,easeInOut:t2,easeOut:sK,circIn:mE,circInOut:VM,circOut:kM,backIn:pE,backInOut:DM,backOut:PM,anticipate:MM},qI=t=>{if(uE(t)){XD(t.length===4);const[e,n,i,r]=t;return ff(e,n,i,r)}else if(typeof t=="string")return aK[t];return t};function lK(t,e,n){const i=[],r=n||XM,o=t.length-1;for(let l=0;l<o;l++){let c=r(t[l],t[l+1]);if(e){const d=Array.isArray(e)?e[l]||tr:e;c=hf(d,c)}i.push(c)}return i}function uK(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(XD(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=lK(e,i,r),d=c.length,f=p=>{if(l&&p<t[0])return e[0];let v=0;if(d>1)for(;v<t.length-2&&!(p<t[v+1]);v++);const T=Au(t[v],t[v+1],p);return c[v](T)};return n?p=>f(Gs(t[0],t[o-1],p)):f}function cK(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=Au(0,e,i);t.push(tn(n,1,r))}}function dK(t){const e=[0];return cK(e,t.length-1),e}function fK(t,e){return t.map(n=>n*e)}function hK(t,e){return t.map(()=>e||t2).splice(0,t.length-1)}function pm({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=oK(i)?i.map(qI):qI(i),o={done:!1,value:e[0]},l=fK(n&&n.length===e.length?n:dK(e),t),c=uK(l,e,{ease:Array.isArray(r)?r:hK(e,r)});return{calculatedDuration:t,next:d=>(o.value=c(d),o.done=d>=t,o)}}const pK=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Jt.update(e,!0),stop:()=>ea(e),now:()=>Zn.isProcessing?Zn.timestamp:ls.now()}},mK={decay:zI,inertia:zI,tween:pm,keyframes:pm,spring:e2},gK=t=>t/100;class EE extends WM{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:d}=this.options;d&&d()};const{name:n,motionValue:i,element:r,keyframes:o}=this.options,l=(r==null?void 0:r.KeyframeResolver)||_E,c=(d,f)=>this.onKeyframesResolved(d,f);this.resolver=new l(o,c,n,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:o,velocity:l=0}=this.options,c=lE(n)?n:mK[n]||pm;let d,f;c!==pm&&typeof e[0]!="number"&&(d=hf(gK,XM(e[0],e[1])),e=[0,100]);const p=c({...this.options,keyframes:e});o==="mirror"&&(f=c({...this.options,keyframes:[...e].reverse(),velocity:-l})),p.calculatedDuration===null&&(p.calculatedDuration=vM(p));const{calculatedDuration:v}=p,T=v+r,b=T*(i+1)-r;return{generator:p,mirroredGenerator:f,mapPercentToKeyframes:d,calculatedDuration:v,resolvedDuration:T,totalDuration:b}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:i}=this;if(!i){const{keyframes:I}=this.options;return{done:!0,value:I[I.length-1]}}const{finalKeyframe:r,generator:o,mirroredGenerator:l,mapPercentToKeyframes:c,keyframes:d,calculatedDuration:f,totalDuration:p,resolvedDuration:v}=i;if(this.startTime===null)return o.next(0);const{delay:T,repeat:b,repeatType:C,repeatDelay:N,onUpdate:M}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-p/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const V=this.currentTime-T*(this.speed>=0?1:-1),k=this.speed>=0?V<0:V>p;this.currentTime=Math.max(V,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let F=this.currentTime,G=o;if(b){const I=Math.min(this.currentTime,p)/v;let P=Math.floor(I),U=I%1;!U&&I>=1&&(U=1),U===1&&P--,P=Math.min(P,b+1),!!(P%2)&&(C==="reverse"?(U=1-U,N&&(U-=N/v)):C==="mirror"&&(G=l)),F=Gs(0,1,U)*v}const K=k?{done:!1,value:d[0]}:G.next(F);c&&(K.value=c(K.value));let{done:H}=K;!k&&f!==null&&(H=this.speed>=0?this.currentTime>=p:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&H);return R&&r!==void 0&&(K.value=gg(d,this.options,r)),M&&M(K.value),R&&this.finish(),K}get duration(){const{resolved:e}=this;return e?Os(e.calculatedDuration):0}get time(){return Os(this.currentTime)}set time(e){e=Ls(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Os(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=pK,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const yK=new Set(["opacity","clipPath","filter","transform"]);function vK(t,e,n,{delay:i=0,duration:r=300,repeat:o=0,repeatType:l="loop",ease:c="easeInOut",times:d}={}){const f={[e]:n};d&&(f.offset=d);const p=EM(c,r);return Array.isArray(p)&&(f.easing=p),t.animate(f,{delay:i,duration:r,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"})}const _K=KT(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),mm=10,TK=2e4;function EK(t){return lE(t.type)||t.type==="spring"||!TM(t.ease)}function SK(t,e){const n=new EE({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const r=[];let o=0;for(;!i.done&&o<TK;)i=n.sample(o),r.push(i.value),o+=mm;return{times:void 0,keyframes:r,duration:o-mm,ease:"linear"}}const n2={anticipate:MM,backInOut:DM,circInOut:VM};function bK(t){return t in n2}class HI extends WM{constructor(e){super(e);const{name:n,motionValue:i,element:r,keyframes:o}=this.options;this.resolver=new JM(o,(l,c)=>this.onKeyframesResolved(l,c),n,i,r),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:i=300,times:r,ease:o,type:l,motionValue:c,name:d,startTime:f}=this.options;if(!c.owner||!c.owner.current)return!1;if(typeof o=="string"&&fm()&&bK(o)&&(o=n2[o]),EK(this.options)){const{onComplete:v,onUpdate:T,motionValue:b,element:C,...N}=this.options,M=SK(e,N);e=M.keyframes,e.length===1&&(e[1]=e[0]),i=M.duration,r=M.times,o=M.ease,l="keyframes"}const p=vK(c.owner.current,d,e,{...this.options,duration:i,times:r,ease:o});return p.startTime=f??this.calcStartTime(),this.pendingTimeline?(CI(p,this.pendingTimeline),this.pendingTimeline=void 0):p.onfinish=()=>{const{onComplete:v}=this.options;c.set(gg(e,this.options,n)),v&&v(),this.cancel(),this.resolveFinishedPromise()},{animation:p,duration:i,times:r,type:l,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Os(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Os(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=Ls(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return tr;const{animation:i}=n;CI(i,e)}return tr}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:i,duration:r,type:o,ease:l,times:c}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:f,onUpdate:p,onComplete:v,element:T,...b}=this.options,C=new EE({...b,keyframes:i,duration:r,type:o,ease:l,times:c,isGenerator:!0}),N=Ls(this.time);f.setWithVelocity(C.sample(N-mm).value,C.sample(N).value,mm)}const{onStop:d}=this.options;d&&d(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:i,repeatDelay:r,repeatType:o,damping:l,type:c}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=n.owner.getProps();return _K()&&i&&yK.has(i)&&!d&&!f&&!r&&o!=="mirror"&&l!==0&&c!=="inertia"}}const wK={type:"spring",stiffness:500,damping:25,restSpeed:10},xK=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),AK={type:"keyframes",duration:.8},CK={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},IK=(t,{keyframes:e})=>e.length>2?AK:ll.has(t)?t.startsWith("scale")?xK(e[1]):wK:CK;function RK({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:l,repeatDelay:c,from:d,elapsed:f,...p}){return!!Object.keys(p).length}const SE=(t,e,n,i={},r,o)=>l=>{const c=aE(i,t)||{},d=c.delay||i.delay||0;let{elapsed:f=0}=i;f=f-Ls(d);let p={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-f,onUpdate:T=>{e.set(T),c.onUpdate&&c.onUpdate(T)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:o?void 0:r};RK(c)||(p={...p,...IK(t,p)}),p.duration&&(p.duration=Ls(p.duration)),p.repeatDelay&&(p.repeatDelay=Ls(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let v=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(v=!0)),v&&!o&&e.get()!==void 0){const T=gg(p.keyframes,c);if(T!==void 0)return Jt.update(()=>{p.onUpdate(T),p.onComplete()}),new Yj([])}return!o&&HI.supports(p)?new HI(p):new EE(p)};function NK({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function i2(t,e,{delay:n=0,transitionOverride:i,type:r}={}){var o;let{transition:l=t.getDefaultTransition(),transitionEnd:c,...d}=e;i&&(l=i);const f=[],p=r&&t.animationState&&t.animationState.getState()[r];for(const v in d){const T=t.getValue(v,(o=t.latestValues[v])!==null&&o!==void 0?o:null),b=d[v];if(b===void 0||p&&NK(p,v))continue;const C={delay:n,...aE(l||{},v)};let N=!1;if(window.MotionHandoffAnimation){const V=CM(t);if(V){const k=window.MotionHandoffAnimation(V,v,Jt);k!==null&&(C.startTime=k,N=!0)}}X0(t,v),T.start(SE(v,T,b,t.shouldReduceMotion&&xM.has(v)?{type:!1}:C,t,N));const M=T.animation;M&&f.push(M)}return c&&Promise.all(f).then(()=>{Jt.update(()=>{c&&l$(t,c)})}),f}function s_(t,e,n={}){var i;const r=mg(t,e,n.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const l=r?()=>Promise.all(i2(t,r,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:p=0,staggerChildren:v,staggerDirection:T}=o;return PK(t,e,p+f,v,T,n)}:()=>Promise.resolve(),{when:d}=o;if(d){const[f,p]=d==="beforeChildren"?[l,c]:[c,l];return f().then(()=>p())}else return Promise.all([l(),c(n.delay)])}function PK(t,e,n=0,i=0,r=1,o){const l=[],c=(t.variantChildren.size-1)*i,d=r===1?(f=0)=>f*i:(f=0)=>c-f*i;return Array.from(t.variantChildren).sort(DK).forEach((f,p)=>{f.notify("AnimationStart",e),l.push(s_(f,e,{...o,delay:n+d(p)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(l)}function DK(t,e){return t.sortNodePosition(e)}function MK(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>s_(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=s_(t,e,n);else{const r=typeof e=="function"?mg(t,e,n.custom):e;i=Promise.all(i2(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}const kK=JT.length;function r2(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?r2(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<kK;n++){const i=JT[n],r=t.props[i];(zd(r)||r===!1)&&(e[i]=r)}return e}const VK=[...YT].reverse(),LK=YT.length;function OK(t){return e=>Promise.all(e.map(({animation:n,options:i})=>MK(t,n,i)))}function UK(t){let e=OK(t),n=GI(),i=!0;const r=d=>(f,p)=>{var v;const T=mg(t,p,d==="exit"?(v=t.presenceContext)===null||v===void 0?void 0:v.custom:void 0);if(T){const{transition:b,transitionEnd:C,...N}=T;f={...f,...N,...C}}return f};function o(d){e=d(t)}function l(d){const{props:f}=t,p=r2(t.parent)||{},v=[],T=new Set;let b={},C=1/0;for(let M=0;M<LK;M++){const V=VK[M],k=n[V],F=f[V]!==void 0?f[V]:p[V],G=zd(F),K=V===d?k.isActive:null;K===!1&&(C=M);let H=F===p[V]&&F!==f[V]&&G;if(H&&i&&t.manuallyAnimateOnMount&&(H=!1),k.protectedKeys={...b},!k.isActive&&K===null||!F&&!k.prevProp||hg(F)||typeof F=="boolean")continue;const R=FK(k.prevProp,F);let I=R||V===d&&k.isActive&&!H&&G||M>C&&G,P=!1;const U=Array.isArray(F)?F:[F];let L=U.reduce(r(V),{});K===!1&&(L={});const{prevResolvedValues:z={}}=k,q={...z,...L},xe=re=>{I=!0,T.has(re)&&(P=!0,T.delete(re)),k.needsAnimating[re]=!0;const me=t.getValue(re);me&&(me.liveStyle=!1)};for(const re in q){const me=L[re],Te=z[re];if(b.hasOwnProperty(re))continue;let Ae=!1;J0(me)&&J0(Te)?Ae=!yM(me,Te):Ae=me!==Te,Ae?me!=null?xe(re):T.add(re):me!==void 0&&T.has(re)?xe(re):k.protectedKeys[re]=!0}k.prevProp=F,k.prevResolvedValues=L,k.isActive&&(b={...b,...L}),i&&t.blockInitialAnimation&&(I=!1),I&&(!(H&&R)||P)&&v.push(...U.map(re=>({animation:re,options:{type:V}})))}if(T.size){const M={};T.forEach(V=>{const k=t.getBaseTarget(V),F=t.getValue(V);F&&(F.liveStyle=!0),M[V]=k??null}),v.push({animation:M})}let N=!!v.length;return i&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(N=!1),i=!1,N?e(v):Promise.resolve()}function c(d,f){var p;if(n[d].isActive===f)return Promise.resolve();(p=t.variantChildren)===null||p===void 0||p.forEach(T=>{var b;return(b=T.animationState)===null||b===void 0?void 0:b.setActive(d,f)}),n[d].isActive=f;const v=l(d);for(const T in n)n[T].protectedKeys={};return v}return{animateChanges:l,setActive:c,setAnimateFunction:o,getState:()=>n,reset:()=>{n=GI(),i=!0}}}function FK(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!yM(e,t):!1}function ka(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function GI(){return{animate:ka(!0),whileInView:ka(),whileHover:ka(),whileTap:ka(),whileDrag:ka(),whileFocus:ka(),exit:ka()}}class ua{constructor(e){this.isMounted=!1,this.node=e}update(){}}class BK extends ua{constructor(e){super(e),e.animationState||(e.animationState=UK(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();hg(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let zK=0;class qK extends ua{constructor(){super(...arguments),this.id=zK++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const HK={animation:{Feature:BK},exit:{Feature:qK}};function jd(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function pf(t){return{point:{x:t.pageX,y:t.pageY}}}const GK=t=>e=>cE(e)&&t(e,pf(e));function yd(t,e,n,i){return jd(t,e,GK(n),i)}const jI=(t,e)=>Math.abs(t-e);function jK(t,e){const n=jI(t.x,e.x),i=jI(t.y,e.y);return Math.sqrt(n**2+i**2)}class s2{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Yv(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,b=jK(v.offset,{x:0,y:0})>=3;if(!T&&!b)return;const{point:C}=v,{timestamp:N}=Zn;this.history.push({...C,timestamp:N});const{onStart:M,onMove:V}=this.handlers;T||(M&&M(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),V&&V(this.lastMoveEvent,v)},this.handlePointerMove=(v,T)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=Kv(T,this.transformPagePoint),Jt.update(this.updatePoint,!0)},this.handlePointerUp=(v,T)=>{this.end();const{onEnd:b,onSessionEnd:C,resumeAnimation:N}=this.handlers;if(this.dragSnapToOrigin&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=Yv(v.type==="pointercancel"?this.lastMoveEventInfo:Kv(T,this.transformPagePoint),this.history);this.startEvent&&b&&b(v,M),C&&C(v,M)},!cE(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const l=pf(e),c=Kv(l,this.transformPagePoint),{point:d}=c,{timestamp:f}=Zn;this.history=[{...d,timestamp:f}];const{onSessionStart:p}=n;p&&p(e,Yv(c,this.history)),this.removeListeners=hf(yd(this.contextWindow,"pointermove",this.handlePointerMove),yd(this.contextWindow,"pointerup",this.handlePointerUp),yd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ea(this.updatePoint)}}function Kv(t,e){return e?{point:e(t.point)}:t}function $I(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Yv({point:t},e){return{point:t,delta:$I(t,o2(e)),offset:$I(t,$K(e)),velocity:KK(e,.1)}}function $K(t){return t[0]}function o2(t){return t[t.length-1]}function KK(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=o2(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>Ls(e)));)n--;if(!i)return{x:0,y:0};const o=Os(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const l={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}const a2=1e-4,YK=1-a2,JK=1+a2,l2=.01,WK=0-l2,QK=0+l2;function nr(t){return t.max-t.min}function XK(t,e,n){return Math.abs(t-e)<=n}function KI(t,e,n,i=.5){t.origin=i,t.originPoint=tn(e.min,e.max,t.origin),t.scale=nr(n)/nr(e),t.translate=tn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=YK&&t.scale<=JK||isNaN(t.scale))&&(t.scale=1),(t.translate>=WK&&t.translate<=QK||isNaN(t.translate))&&(t.translate=0)}function vd(t,e,n,i){KI(t.x,e.x,n.x,i?i.originX:void 0),KI(t.y,e.y,n.y,i?i.originY:void 0)}function YI(t,e,n){t.min=n.min+e.min,t.max=t.min+nr(e)}function ZK(t,e,n){YI(t.x,e.x,n.x),YI(t.y,e.y,n.y)}function JI(t,e,n){t.min=e.min-n.min,t.max=t.min+nr(e)}function _d(t,e,n){JI(t.x,e.x,n.x),JI(t.y,e.y,n.y)}function eY(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?tn(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?tn(n,t,i.max):Math.min(t,n)),t}function WI(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function tY(t,{top:e,left:n,bottom:i,right:r}){return{x:WI(t.x,n,r),y:WI(t.y,e,i)}}function QI(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function nY(t,e){return{x:QI(t.x,e.x),y:QI(t.y,e.y)}}function iY(t,e){let n=.5;const i=nr(t),r=nr(e);return r>i?n=Au(e.min,e.max-i,t.min):i>r&&(n=Au(t.min,t.max-r,e.min)),Gs(0,1,n)}function rY(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const o_=.35;function sY(t=o_){return t===!1?t=0:t===!0&&(t=o_),{x:XI(t,"left","right"),y:XI(t,"top","bottom")}}function XI(t,e,n){return{min:ZI(t,e),max:ZI(t,n)}}function ZI(t,e){return typeof t=="number"?t:t[e]||0}const eR=()=>({translate:0,scale:1,origin:0,originPoint:0}),su=()=>({x:eR(),y:eR()}),tR=()=>({min:0,max:0}),gn=()=>({x:tR(),y:tR()});function _r(t){return[t("x"),t("y")]}function u2({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function oY({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function aY(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Jv(t){return t===void 0||t===1}function a_({scale:t,scaleX:e,scaleY:n}){return!Jv(t)||!Jv(e)||!Jv(n)}function Ua(t){return a_(t)||c2(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function c2(t){return nR(t.x)||nR(t.y)}function nR(t){return t&&t!=="0%"}function gm(t,e,n){const i=t-n,r=e*i;return n+r}function iR(t,e,n,i,r){return r!==void 0&&(t=gm(t,r,i)),gm(t,n,i)+e}function l_(t,e=0,n=1,i,r){t.min=iR(t.min,e,n,i,r),t.max=iR(t.max,e,n,i,r)}function d2(t,{x:e,y:n}){l_(t.x,e.translate,e.scale,e.originPoint),l_(t.y,n.translate,n.scale,n.originPoint)}const rR=.999999999999,sR=1.0000000000001;function lY(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,l;for(let c=0;c<r;c++){o=n[c],l=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&au(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,d2(t,l)),i&&Ua(o.latestValues)&&au(t,o.latestValues))}e.x<sR&&e.x>rR&&(e.x=1),e.y<sR&&e.y>rR&&(e.y=1)}function ou(t,e){t.min=t.min+e,t.max=t.max+e}function oR(t,e,n,i,r=.5){const o=tn(t.min,t.max,r);l_(t,e,n,o,i)}function au(t,e){oR(t.x,e.x,e.scaleX,e.scale,e.originX),oR(t.y,e.y,e.scaleY,e.scale,e.originY)}function f2(t,e){return u2(aY(t.getBoundingClientRect(),e))}function uY(t,e,n){const i=f2(t,n),{scroll:r}=e;return r&&(ou(i.x,r.offset.x),ou(i.y,r.offset.y)),i}const h2=({current:t})=>t?t.ownerDocument.defaultView:null,cY=new WeakMap;class dY{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=gn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=p=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(pf(p).point)},o=(p,v)=>{const{drag:T,dragPropagation:b,onDragStart:C}=this.getProps();if(T&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=i$(T),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),_r(M=>{let V=this.getAxisMotionValue(M).get()||0;if(as.test(V)){const{projection:k}=this.visualElement;if(k&&k.layout){const F=k.layout.layoutBox[M];F&&(V=nr(F)*(parseFloat(V)/100))}}this.originPoint[M]=V}),C&&Jt.postRender(()=>C(p,v)),X0(this.visualElement,"transform");const{animationState:N}=this.visualElement;N&&N.setActive("whileDrag",!0)},l=(p,v)=>{const{dragPropagation:T,dragDirectionLock:b,onDirectionLock:C,onDrag:N}=this.getProps();if(!T&&!this.openDragLock)return;const{offset:M}=v;if(b&&this.currentDirection===null){this.currentDirection=fY(M),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",v.point,M),this.updateAxis("y",v.point,M),this.visualElement.render(),N&&N(p,v)},c=(p,v)=>this.stop(p,v),d=()=>_r(p=>{var v;return this.getAnimationState(p)==="paused"&&((v=this.getAxisMotionValue(p).animation)===null||v===void 0?void 0:v.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new s2(e,{onSessionStart:r,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:h2(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&Jt.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!Wh(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(l=eY(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&iu(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=tY(r.layoutBox,n):this.constraints=!1,this.elastic=sY(i),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&_r(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=rY(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!iu(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=uY(i,r.root,this.visualElement.getTransformPagePoint());let l=nY(r.layout.layoutBox,o);if(n){const c=n(oY(l));this.hasMutatedConstraints=!!c,c&&(l=u2(c))}return l}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},f=_r(p=>{if(!Wh(p,n,this.currentDirection))return;let v=d&&d[p]||{};l&&(v={min:0,max:0});const T=r?200:1e6,b=r?40:1e7,C={type:"inertia",velocity:i?e[p]:0,bounceStiffness:T,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...o,...v};return this.startAxisValueAnimation(p,C)});return Promise.all(f).then(c)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return X0(this.visualElement,e),i.start(SE(e,i,0,n,this.visualElement,!1))}stopAnimation(){_r(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){_r(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){_r(n=>{const{drag:i}=this.getProps();if(!Wh(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:l,max:c}=r.layout.layoutBox[n];o.set(e[n]-tn(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!iu(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};_r(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const d=c.get();r[l]=iY({min:d,max:d},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),_r(l=>{if(!Wh(l,e,null))return;const c=this.getAxisMotionValue(l),{min:d,max:f}=this.constraints[l];c.set(tn(d,f,r[l]))})}addListeners(){if(!this.visualElement.current)return;cY.set(this.visualElement,this);const e=this.visualElement.current,n=yd(e,"pointerdown",d=>{const{drag:f,dragListener:p=!0}=this.getProps();f&&p&&this.start(d)}),i=()=>{const{dragConstraints:d}=this.getProps();iu(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Jt.read(i);const l=jd(window,"resize",()=>this.scalePositionWithinConstraints()),c=r.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(_r(p=>{const v=this.getAxisMotionValue(p);v&&(this.originPoint[p]+=d[p].translate,v.set(v.get()+d[p].translate))}),this.visualElement.render())}));return()=>{l(),n(),o(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:l=o_,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:l,dragMomentum:c}}}function Wh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function fY(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class hY extends ua{constructor(e){super(e),this.removeGroupControls=tr,this.removeListeners=tr,this.controls=new dY(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||tr}unmount(){this.removeGroupControls(),this.removeListeners()}}const aR=t=>(e,n)=>{t&&Jt.postRender(()=>t(e,n))};class pY extends ua{constructor(){super(...arguments),this.removePointerDownListener=tr}onPointerDown(e){this.session=new s2(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:h2(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:aR(e),onStart:aR(n),onMove:i,onEnd:(o,l)=>{delete this.session,r&&Jt.postRender(()=>r(o,l))}}}mount(){this.removePointerDownListener=yd(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ip={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function lR(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Hc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Oe.test(t))t=parseFloat(t);else return t;const n=lR(t,e.target.x),i=lR(t,e.target.y);return`${n}% ${i}%`}},mY={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=ta.parse(t);if(r.length>5)return i;const o=ta.createTransformer(t),l=typeof r[0]!="number"?1:0,c=n.x.scale*e.x,d=n.y.scale*e.y;r[0+l]/=c,r[1+l]/=d;const f=tn(c,d,.5);return typeof r[2+l]=="number"&&(r[2+l]/=f),typeof r[3+l]=="number"&&(r[3+l]/=f),o(r)}};class gY extends B.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;Lj(yY),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Ip.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,l=i.projection;return l&&(l.isPresent=o,r||e.layoutDependency!==n||n===void 0?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||Jt.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),QT.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function p2(t){const[e,n]=WD(),i=B.useContext(HT);return S.jsx(gY,{...t,layoutGroup:i,switchLayoutGroup:B.useContext(rM),isPresent:e,safeToRemove:n})}const yY={borderRadius:{...Hc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Hc,borderTopRightRadius:Hc,borderBottomLeftRadius:Hc,borderBottomRightRadius:Hc,boxShadow:mY};function vY(t,e,n){const i=fi(t)?t:Hd(t);return i.start(SE("",i,e,n)),i.animation}function _Y(t){return t instanceof SVGElement&&t.tagName!=="svg"}const TY=(t,e)=>t.depth-e.depth;class EY{constructor(){this.children=[],this.isDirty=!1}add(e){dE(this.children,e),this.isDirty=!0}remove(e){fE(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(TY),this.isDirty=!1,this.children.forEach(e)}}function SY(t,e){const n=ls.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(ea(i),t(o-e))};return Jt.read(i,!0),()=>ea(i)}const m2=["TopLeft","TopRight","BottomLeft","BottomRight"],bY=m2.length,uR=t=>typeof t=="string"?parseFloat(t):t,cR=t=>typeof t=="number"||Oe.test(t);function wY(t,e,n,i,r,o){r?(t.opacity=tn(0,n.opacity!==void 0?n.opacity:1,xY(i)),t.opacityExit=tn(e.opacity!==void 0?e.opacity:1,0,AY(i))):o&&(t.opacity=tn(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let l=0;l<bY;l++){const c=`border${m2[l]}Radius`;let d=dR(e,c),f=dR(n,c);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||cR(d)===cR(f)?(t[c]=Math.max(tn(uR(d),uR(f),i),0),(as.test(f)||as.test(d))&&(t[c]+="%")):t[c]=f}(e.rotate||n.rotate)&&(t.rotate=tn(e.rotate||0,n.rotate||0,i))}function dR(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const xY=g2(0,.5,kM),AY=g2(.5,.95,tr);function g2(t,e,n){return i=>i<t?0:i>e?1:n(Au(t,e,i))}function fR(t,e){t.min=e.min,t.max=e.max}function vr(t,e){fR(t.x,e.x),fR(t.y,e.y)}function hR(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function pR(t,e,n,i,r){return t-=e,t=gm(t,1/n,i),r!==void 0&&(t=gm(t,1/r,i)),t}function CY(t,e=0,n=1,i=.5,r,o=t,l=t){if(as.test(e)&&(e=parseFloat(e),e=tn(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=tn(o.min,o.max,i);t===o&&(c-=e),t.min=pR(t.min,e,n,c,r),t.max=pR(t.max,e,n,c,r)}function mR(t,e,[n,i,r],o,l){CY(t,e[n],e[i],e[r],e.scale,o,l)}const IY=["x","scaleX","originX"],RY=["y","scaleY","originY"];function gR(t,e,n,i){mR(t.x,e,IY,n?n.x:void 0,i?i.x:void 0),mR(t.y,e,RY,n?n.y:void 0,i?i.y:void 0)}function yR(t){return t.translate===0&&t.scale===1}function y2(t){return yR(t.x)&&yR(t.y)}function vR(t,e){return t.min===e.min&&t.max===e.max}function NY(t,e){return vR(t.x,e.x)&&vR(t.y,e.y)}function _R(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function v2(t,e){return _R(t.x,e.x)&&_R(t.y,e.y)}function TR(t){return nr(t.x)/nr(t.y)}function ER(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class PY{constructor(){this.members=[]}add(e){dE(this.members,e),e.scheduleRender()}remove(e){if(fE(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function DY(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y,l=(n==null?void 0:n.z)||0;if((r||o||l)&&(i=`translate3d(${r}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:p,rotateX:v,rotateY:T,skewX:b,skewY:C}=n;f&&(i=`perspective(${f}px) ${i}`),p&&(i+=`rotate(${p}deg) `),v&&(i+=`rotateX(${v}deg) `),T&&(i+=`rotateY(${T}deg) `),b&&(i+=`skewX(${b}deg) `),C&&(i+=`skewY(${C}deg) `)}const c=t.x.scale*e.x,d=t.y.scale*e.y;return(c!==1||d!==1)&&(i+=`scale(${c}, ${d})`),i||"none"}const Fa={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},id=typeof window<"u"&&window.MotionDebug!==void 0,Wv=["","X","Y","Z"],MY={visibility:"hidden"},SR=1e3;let kY=0;function Qv(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function _2(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=CM(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Jt,!(r||o))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&_2(i)}function T2({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(l={},c=e==null?void 0:e()){this.id=kY++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,id&&(Fa.totalNodes=Fa.resolvedTargetDeltas=Fa.recalculatedProjection=0),this.nodes.forEach(OY),this.nodes.forEach(qY),this.nodes.forEach(HY),this.nodes.forEach(UY),id&&window.MotionDebug.record(Fa)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new EY)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new hE),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const d=this.eventHandlers.get(l);d&&d.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,c=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=_Y(l),this.instance=l;const{layoutId:d,layout:f,visualElement:p}=this.options;if(p&&!p.current&&p.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),c&&(f||d)&&(this.isLayoutDirty=!0),t){let v;const T=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,v&&v(),v=SY(T,250),Ip.hasAnimatedSinceResize&&(Ip.hasAnimatedSinceResize=!1,this.nodes.forEach(wR))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&p&&(d||f)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:T,hasRelativeTargetChanged:b,layout:C})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||p.getDefaultTransition()||YY,{onLayoutAnimationStart:M,onLayoutAnimationComplete:V}=p.getProps(),k=!this.targetLayout||!v2(this.targetLayout,C)||b,F=!T&&b;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||F||T&&(k||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(v,F);const G={...aE(N,"layout"),onPlay:M,onComplete:V};(p.shouldReduceMotion||this.options.layoutRoot)&&(G.delay=0,G.type=!1),this.startAnimation(G)}else T||wR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=C})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ea(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(GY),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&_2(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const v=this.path[p];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(bR);return}this.isUpdating||this.nodes.forEach(BY),this.isUpdating=!1,this.nodes.forEach(zY),this.nodes.forEach(VY),this.nodes.forEach(LY),this.clearAllSnapshots();const c=ls.now();Zn.delta=Gs(0,1e3/60,c-Zn.timestamp),Zn.timestamp=c,Zn.isProcessing=!0,zv.update.process(Zn),zv.preRender.process(Zn),zv.render.process(Zn),Zn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,QT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(FY),this.sharedNodes.forEach(jY)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Jt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Jt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=gn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c){const d=i(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!r)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!y2(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;l&&(c||Ua(this.latestValues)||p)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return l&&(d=this.removeTransform(d)),JY(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:c}=this.options;if(!c)return gn();const d=c.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(WY))){const{scroll:p}=this.root;p&&(ou(d.x,p.offset.x),ou(d.y,p.offset.y))}return d}removeElementScroll(l){var c;const d=gn();if(vr(d,l),!((c=this.scroll)===null||c===void 0)&&c.wasRoot)return d;for(let f=0;f<this.path.length;f++){const p=this.path[f],{scroll:v,options:T}=p;p!==this.root&&v&&T.layoutScroll&&(v.wasRoot&&vr(d,l),ou(d.x,v.offset.x),ou(d.y,v.offset.y))}return d}applyTransform(l,c=!1){const d=gn();vr(d,l);for(let f=0;f<this.path.length;f++){const p=this.path[f];!c&&p.options.layoutScroll&&p.scroll&&p!==p.root&&au(d,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Ua(p.latestValues)&&au(d,p.latestValues)}return Ua(this.latestValues)&&au(d,this.latestValues),d}removeTransform(l){const c=gn();vr(c,l);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!Ua(f.latestValues))continue;a_(f.latestValues)&&f.updateSnapshot();const p=gn(),v=f.measurePageBox();vr(p,v),gR(c,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return Ua(this.latestValues)&&gR(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Zn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var c;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==d;if(!(l||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:v,layoutId:T}=this.options;if(!(!this.layout||!(v||T))){if(this.resolvedRelativeTargetAt=Zn.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=gn(),this.relativeTargetOrigin=gn(),_d(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),vr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=gn(),this.targetWithTransforms=gn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),ZK(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):vr(this.target,this.layout.layoutBox),d2(this.target,this.targetDelta)):vr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=gn(),this.relativeTargetOrigin=gn(),_d(this.relativeTargetOrigin,this.target,b.target),vr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}id&&Fa.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||a_(this.parent.latestValues)||c2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const c=this.getLead(),d=!!this.resumingFrom||this!==c;let f=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(f=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Zn.timestamp&&(f=!1),f)return;const{layout:p,layoutId:v}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||v))return;vr(this.layoutCorrected,this.layout.layoutBox);const T=this.treeScale.x,b=this.treeScale.y;lY(this.layoutCorrected,this.treeScale,this.path,d),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=gn());const{target:C}=c;if(!C){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(hR(this.prevProjectionDelta.x,this.projectionDelta.x),hR(this.prevProjectionDelta.y,this.projectionDelta.y)),vd(this.projectionDelta,this.layoutCorrected,C,this.latestValues),(this.treeScale.x!==T||this.treeScale.y!==b||!ER(this.projectionDelta.x,this.prevProjectionDelta.x)||!ER(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",C)),id&&Fa.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var c;if((c=this.options.visualElement)===null||c===void 0||c.scheduleRender(),l){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=su(),this.projectionDelta=su(),this.projectionDeltaWithTransform=su()}setAnimationOrigin(l,c=!1){const d=this.snapshot,f=d?d.latestValues:{},p={...this.latestValues},v=su();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const T=gn(),b=d?d.source:void 0,C=this.layout?this.layout.source:void 0,N=b!==C,M=this.getStack(),V=!M||M.members.length<=1,k=!!(N&&!V&&this.options.crossfade===!0&&!this.path.some(KY));this.animationProgress=0;let F;this.mixTargetDelta=G=>{const K=G/1e3;xR(v.x,l.x,K),xR(v.y,l.y,K),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(_d(T,this.layout.layoutBox,this.relativeParent.layout.layoutBox),$Y(this.relativeTarget,this.relativeTargetOrigin,T,K),F&&NY(this.relativeTarget,F)&&(this.isProjectionDirty=!1),F||(F=gn()),vr(F,this.relativeTarget)),N&&(this.animationValues=p,wY(p,f,this.latestValues,K,k,V)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=K},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ea(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Jt.update(()=>{Ip.hasAnimatedSinceResize=!0,this.currentAnimation=vY(0,SR,{...l,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(SR),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:d,layout:f,latestValues:p}=l;if(!(!c||!d||!f)){if(this!==l&&this.layout&&f&&E2(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||gn();const v=nr(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+v;const T=nr(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+T}vr(c,d),au(c,p),vd(this.projectionDeltaWithTransform,this.layoutCorrected,c,p)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new PY),this.sharedNodes.get(l).add(c);const f=c.options.initialPromotionConfig;c.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:c}=this.options;return c?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:c}=this.options;return c?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const f={};d.z&&Qv("z",l,f,this.animationValues);for(let p=0;p<Wv.length;p++)Qv(`rotate${Wv[p]}`,l,f,this.animationValues),Qv(`skew${Wv[p]}`,l,f,this.animationValues);l.render();for(const p in f)l.setStaticValue(p,f[p]),this.animationValues&&(this.animationValues[p]=f[p]);l.scheduleRender()}getProjectionStyles(l){var c,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return MY;const f={visibility:""},p=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=Ap(l==null?void 0:l.pointerEvents)||"",f.transform=p?p(this.latestValues,""):"none",f;const v=this.getLead();if(!this.projectionDelta||!this.layout||!v.target){const N={};return this.options.layoutId&&(N.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,N.pointerEvents=Ap(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Ua(this.latestValues)&&(N.transform=p?p({},""):"none",this.hasProjected=!1),N}const T=v.animationValues||v.latestValues;this.applyTransformsToTarget(),f.transform=DY(this.projectionDeltaWithTransform,this.treeScale,T),p&&(f.transform=p(T,f.transform));const{x:b,y:C}=this.projectionDelta;f.transformOrigin=`${b.origin*100}% ${C.origin*100}% 0`,v.animationValues?f.opacity=v===this?(d=(c=T.opacity)!==null&&c!==void 0?c:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:T.opacityExit:f.opacity=v===this?T.opacity!==void 0?T.opacity:"":T.opacityExit!==void 0?T.opacityExit:0;for(const N in dm){if(T[N]===void 0)continue;const{correct:M,applyTo:V}=dm[N],k=f.transform==="none"?T[N]:M(T[N],v);if(V){const F=V.length;for(let G=0;G<F;G++)f[V[G]]=k}else f[N]=k}return this.options.layoutId&&(f.pointerEvents=v===this?Ap(l==null?void 0:l.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var c;return(c=l.currentAnimation)===null||c===void 0?void 0:c.stop()}),this.root.nodes.forEach(bR),this.root.sharedNodes.clear()}}}function VY(t){t.updateLayout()}function LY(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:o}=t.options,l=n.source!==t.layout.source;o==="size"?_r(v=>{const T=l?n.measuredBox[v]:n.layoutBox[v],b=nr(T);T.min=i[v].min,T.max=T.min+b}):E2(o,n.layoutBox,i)&&_r(v=>{const T=l?n.measuredBox[v]:n.layoutBox[v],b=nr(i[v]);T.max=T.min+b,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[v].max=t.relativeTarget[v].min+b)});const c=su();vd(c,i,n.layoutBox);const d=su();l?vd(d,t.applyTransform(r,!0),n.measuredBox):vd(d,i,n.layoutBox);const f=!y2(c);let p=!1;if(!t.resumeFrom){const v=t.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:T,layout:b}=v;if(T&&b){const C=gn();_d(C,n.layoutBox,T.layoutBox);const N=gn();_d(N,i,b.layoutBox),v2(C,N)||(p=!0),v.options.layoutRoot&&(t.relativeTarget=N,t.relativeTargetOrigin=C,t.relativeParent=v)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:d,layoutDelta:c,hasLayoutChanged:f,hasRelativeTargetChanged:p})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function OY(t){id&&Fa.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function UY(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function FY(t){t.clearSnapshot()}function bR(t){t.clearMeasurements()}function BY(t){t.isLayoutDirty=!1}function zY(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function wR(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function qY(t){t.resolveTargetDelta()}function HY(t){t.calcProjection()}function GY(t){t.resetSkewAndRotation()}function jY(t){t.removeLeadSnapshot()}function xR(t,e,n){t.translate=tn(e.translate,0,n),t.scale=tn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function AR(t,e,n,i){t.min=tn(e.min,n.min,i),t.max=tn(e.max,n.max,i)}function $Y(t,e,n,i){AR(t.x,e.x,n.x,i),AR(t.y,e.y,n.y,i)}function KY(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const YY={duration:.45,ease:[.4,0,.1,1]},CR=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),IR=CR("applewebkit/")&&!CR("chrome/")?Math.round:tr;function RR(t){t.min=IR(t.min),t.max=IR(t.max)}function JY(t){RR(t.x),RR(t.y)}function E2(t,e,n){return t==="position"||t==="preserve-aspect"&&!XK(TR(e),TR(n),.2)}function WY(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const QY=T2({attachResizeListener:(t,e)=>jd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Xv={current:void 0},S2=T2({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Xv.current){const t=new QY({});t.mount(window),t.setOptions({layoutScroll:!0}),Xv.current=t}return Xv.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),XY={pan:{Feature:pY},drag:{Feature:hY,ProjectionNode:S2,MeasureLayout:p2}};function NR(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,o=i[r];o&&Jt.postRender(()=>o(e,pf(e)))}class ZY extends ua{mount(){const{current:e}=this.node;e&&(this.unmount=Xj(e,n=>(NR(this.node,n,"Start"),i=>NR(this.node,i,"End"))))}unmount(){}}class eJ extends ua{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=hf(jd(this.node.current,"focus",()=>this.onFocus()),jd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function PR(t,e,n){const{props:i}=t;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),o=i[r];o&&Jt.postRender(()=>o(e,pf(e)))}class tJ extends ua{mount(){const{current:e}=this.node;e&&(this.unmount=n$(e,n=>(PR(this.node,n,"Start"),(i,{success:r})=>PR(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const u_=new WeakMap,Zv=new WeakMap,nJ=t=>{const e=u_.get(t.target);e&&e(t)},iJ=t=>{t.forEach(nJ)};function rJ({root:t,...e}){const n=t||document;Zv.has(n)||Zv.set(n,{});const i=Zv.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(iJ,{root:t,...e})),i[r]}function sJ(t,e,n){const i=rJ(e);return u_.set(t,n),i.observe(t),()=>{u_.delete(t),i.unobserve(t)}}const oJ={some:0,all:1};class aJ extends ua{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,l={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:oJ[r]},c=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:v}=this.node.getProps(),T=f?p:v;T&&T(d)};return sJ(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(lJ(e,n))&&this.startObserver()}unmount(){}}function lJ({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const uJ={inView:{Feature:aJ},tap:{Feature:tJ},focus:{Feature:eJ},hover:{Feature:ZY}},cJ={layout:{ProjectionNode:S2,MeasureLayout:p2}},c_={current:null},b2={current:!1};function dJ(){if(b2.current=!0,!!$T)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>c_.current=t.matches;t.addListener(e),e()}else c_.current=!1}const fJ=[...YM,ai,ta],hJ=t=>fJ.find(KM(t)),DR=new WeakMap;function pJ(t,e,n){for(const i in e){const r=e[i],o=n[i];if(fi(r))t.addValue(i,r);else if(fi(o))t.addValue(i,Hd(r,{owner:t}));else if(o!==r)if(t.hasValue(i)){const l=t.getValue(i);l.liveStyle===!0?l.jump(r):l.hasAnimated||l.set(r)}else{const l=t.getStaticValue(i);t.addValue(i,Hd(l!==void 0?l:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const MR=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class mJ{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:o,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=_E,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const b=ls.now();this.renderScheduledAt<b&&(this.renderScheduledAt=b,Jt.render(this.render,!1,!0))};const{latestValues:d,renderState:f,onUpdate:p}=l;this.onUpdate=p,this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=pg(n),this.isVariantNode=nM(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:v,...T}=this.scrapeMotionValuesFromProps(n,{},this);for(const b in T){const C=T[b];d[b]!==void 0&&fi(C)&&C.set(d[b],!1)}}mount(e){this.current=e,DR.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),b2.current||dJ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:c_.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){DR.delete(this.current),this.projection&&this.projection.unmount(),ea(this.notifyUpdate),ea(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=ll.has(e),r=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&Jt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),o(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Cu){const n=Cu[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):gn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<MR.length;i++){const r=MR[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o="on"+r,l=e[o];l&&(this.propEventSubscriptions[r]=this.on(r,l))}this.prevMotionValues=pJ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Hd(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(jM(r)||LM(r))?r=parseFloat(r):!hJ(r)&&ta.test(n)&&(r=qM(e,n)),this.setBaseTarget(e,fi(r)?r.get():r)),fi(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const l=ZT(this.props,i,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);l&&(r=l[e])}if(i&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!fi(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new hE),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class w2 extends mJ{constructor(){super(...arguments),this.KeyframeResolver=JM}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;fi(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function gJ(t){return window.getComputedStyle(t)}class yJ extends w2{constructor(){super(...arguments),this.type="html",this.renderInstance=dM}readValueFromInstance(e,n){if(ll.has(n)){const i=vE(n);return i&&i.default||0}else{const i=gJ(e),r=(lM(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return f2(e,n)}build(e,n,i){nE(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return oE(e,n,i)}}class vJ extends w2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=gn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ll.has(n)){const i=vE(n);return i&&i.default||0}return n=fM.has(n)?n:WT(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return mM(e,n,i)}build(e,n,i){iE(e,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,i,r){hM(e,n,i,r)}mount(e){this.isSVGTag=sE(e.tagName),super.mount(e)}}const _J=(t,e)=>XT(t)?new vJ(e):new yJ(e,{allowProjection:t!==B.Fragment}),TJ=jj({...HK,...uJ,...XY,...cJ},_J),Ns=oj(TJ),EJ=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})}),SJ=({onGetStarted:t})=>{const e={initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6}},n={animate:{transition:{staggerChildren:.1}}};return S.jsxs("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow overflow-x-hidden",children:[S.jsxs("nav",{className:"absolute top-0 w-full p-6 flex justify-between items-center z-50",children:[S.jsxs("div",{className:"text-2xl font-serif font-bold",children:["Dress ",S.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),S.jsx("button",{onClick:t,className:"text-sm font-semibold hover:text-gold transition-colors bg-white/10 backdrop-blur-md px-4 py-2 rounded-full border border-white/20",children:"Se connecter"})]}),S.jsxs("section",{className:"relative min-h-screen flex flex-col justify-center items-center text-center px-4 pt-20",children:[S.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[500px] h-[500px] bg-gold/10 rounded-full blur-[100px] pointer-events-none"}),S.jsx("div",{className:"absolute bottom-[-10%] right-[-5%] w-[400px] h-[400px] bg-purple-500/5 rounded-full blur-[100px] pointer-events-none"}),S.jsxs(Ns.div,{initial:"initial",animate:"animate",variants:n,className:"max-w-4xl mx-auto z-10",children:[S.jsxs(Ns.div,{variants:e,className:"mb-6 inline-flex items-center gap-2 px-3 py-1 rounded-full bg-gold/10 border border-gold/20 text-gold text-xs font-bold uppercase tracking-wider",children:[S.jsx(Fd,{}),S.jsx("span",{children:"Assistant Mode IA  Beta Prive"})]}),S.jsxs(Ns.h1,{variants:e,className:"text-5xl md:text-7xl lg:text-8xl font-serif font-bold mb-8 leading-tight",children:["Votre style, ",S.jsx("br",{}),S.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-gold to-yellow-600",children:"rinvent par l'IA."})]}),S.jsxs(Ns.p,{variants:e,className:"text-lg md:text-xl text-gray-500 dark:text-gray-400 mb-10 max-w-2xl mx-auto leading-relaxed",children:[`Fini le "Je n'ai rien  me mettre". `,S.jsx("strong",{children:"Dress Me Up!"})," analyse votre garde-robe, cre des tenues sur-mesure et prpare vos valises en un clic."]}),S.jsxs(Ns.div,{variants:e,className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[S.jsxs("button",{onClick:t,className:"group relative px-8 py-4 bg-gold text-onyx text-lg font-bold rounded-full overflow-hidden shadow-lg shadow-gold/20 hover:shadow-gold/40 transition-all hover:scale-105 active:scale-95",children:[S.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Commencer l'exprience ",S.jsx(EJ,{})]}),S.jsx("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"})]}),S.jsx("p",{className:"text-xs text-gray-400 mt-2 sm:mt-0",children:"*Aucune carte bancaire requise"})]})]}),S.jsx(Ns.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:.8,duration:1},className:"absolute left-4 md:left-20 bottom-20 hidden lg:block",children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black p-4 rounded-xl shadow-2xl border border-white/10 rotate-[-6deg] max-w-xs backdrop-blur-lg bg-opacity-90 dark:bg-opacity-90",children:[S.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[S.jsx("div",{className:"w-8 h-8 bg-gold rounded-full flex items-center justify-center text-onyx",children:""}),S.jsx("div",{className:"text-xs font-medium",children:"Suggestion IA"})]}),S.jsx("p",{className:"text-sm font-serif italic",children:'"Pour ce soir  Rome, opte pour la chemise en lin blanc et le pantalon beige."'})]})}),S.jsx(Ns.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{delay:1,duration:1},className:"absolute right-4 md:right-20 top-40 hidden lg:block",children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black p-3 rounded-xl shadow-2xl border border-white/10 rotate-[6deg] backdrop-blur-lg bg-opacity-90 dark:bg-opacity-90",children:[S.jsx("div",{className:"w-32 h-32 bg-gray-200 dark:bg-gray-700 rounded-lg mb-2 flex items-center justify-center text-4xl",children:""}),S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsx("span",{className:"text-xs font-bold text-gray-500",children:"Manteau Laine"}),S.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"})]})]})})]}),S.jsx("section",{className:"py-24 px-4 bg-white/50 dark:bg-black/20 backdrop-blur-sm",children:S.jsxs("div",{className:"max-w-6xl mx-auto",children:[S.jsxs("div",{className:"text-center mb-16",children:[S.jsx("h2",{className:"text-3xl md:text-4xl font-serif font-bold mb-4",children:"Votre dressing intelligent"}),S.jsx("p",{className:"text-gray-500 max-w-xl mx-auto",children:"Une suite d'outils puissants pour digitaliser et optimiser votre style au quotidien."})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[S.jsx(e0,{icon:S.jsx(lm,{}),title:"Digitalisez en un clair",description:"Prenez une photo, l'IA dtecte automatiquement la catgorie, la couleur et la matire. Votre garde-robe dans votre poche."}),S.jsx(e0,{icon:S.jsx(Fd,{}),title:"Styliste Personnel",description:"Une runion ? Un date ? Demandez  l'IA de crer la tenue parfaite en fonction de la mto et de l'occasion."}),S.jsx(e0,{icon:S.jsx(KD,{}),title:"Valise Optimise",description:"Partez l'esprit lger. Gnrez une liste de vtements optimise pour la dure et la destination de votre voyage."})]})]})}),S.jsx("section",{className:"py-20 px-4 text-center",children:S.jsxs("div",{className:"max-w-3xl mx-auto",children:[S.jsx("h2",{className:"text-3xl md:text-5xl font-serif font-bold mb-8",children:"Prt  upgrader votre style ?"}),S.jsx("button",{onClick:t,className:"px-10 py-4 bg-raisin-black dark:bg-snow text-snow dark:text-onyx font-bold rounded-full text-lg hover:opacity-90 transition-opacity transform hover:scale-105 duration-200",children:"Rejoindre maintenant"}),S.jsx("p",{className:"mt-8 text-sm text-gray-500",children:" 2025 Dress Me Up! - Fait avec  & IA."})]})})]})},e0=({icon:t,title:e,description:n})=>S.jsxs(Ns.div,{whileHover:{y:-5},className:"p-8 rounded-2xl bg-white dark:bg-raisin-black border border-black/5 dark:border-white/5 shadow-xl shadow-black/5 dark:shadow-black/20",children:[S.jsx("div",{className:"w-12 h-12 bg-gold/10 text-gold rounded-xl flex items-center justify-center mb-6",children:S.jsx("div",{className:"w-6 h-6",children:t})}),S.jsx("h3",{className:"text-xl font-bold mb-3",children:e}),S.jsx("p",{className:"text-gray-500 dark:text-gray-400 leading-relaxed",children:n})]}),bJ=({onAnalyze:t,isAnalyzing:e})=>{const n=B.useRef(null),[i,r]=B.useState([]),[o,l]=B.useState(!1),[c,d]=B.useState(!1);B.useEffect(()=>{const k=()=>d(window.innerWidth<1024);return k(),window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]),B.useEffect(()=>()=>{i.forEach(k=>URL.revokeObjectURL(k.preview))},[i]);const f=k=>{const F=k.map(G=>({id:`${G.name}-${G.lastModified}-${Math.random()}`,file:G,preview:URL.createObjectURL(G)}));r(G=>[...G,...F])},p=k=>{k.target.files&&(f(Array.from(k.target.files)),k.target.value="")},v=()=>{var k;e||(k=n.current)==null||k.click()},T=k=>{c||(k.preventDefault(),k.stopPropagation(),l(!0))},b=k=>{c||(k.preventDefault(),k.stopPropagation(),l(!1))},C=k=>{c||(k.preventDefault(),k.stopPropagation())},N=k=>{c||(k.preventDefault(),k.stopPropagation(),l(!1),k.dataTransfer.files&&k.dataTransfer.files.length>0&&(f(Array.from(k.dataTransfer.files)),k.dataTransfer.clearData()))},M=k=>{const F=i.find(G=>G.id===k);F&&URL.revokeObjectURL(F.preview),r(G=>G.filter(K=>K.id!==k))},V=()=>{i.length>0&&!e&&(t(i.map(k=>k.file)),r([]))};return S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",onDragEnter:T,onDragLeave:b,onDragOver:C,onDrop:N,children:[S.jsx("h2",{className:"text-2xl font-serif font-bold mb-6 text-gold",children:"Ajouter  ma garde-robe"}),S.jsxs("div",{onClick:v,className:`relative bg-snow dark:bg-onyx rounded-lg p-12 text-center transition-all duration-300 ring-1 ring-dashed ring-black/20 dark:ring-white/20 ${e?"cursor-default":"cursor-pointer hover:ring-gold dark:hover:ring-gold"}`,children:[S.jsx("input",{type:"file",ref:n,onChange:p,className:"hidden",accept:"image/png, image/jpeg, image/webp",multiple:!0,disabled:e}),S.jsx("div",{className:"flex flex-col items-center justify-center min-h-[8rem]",children:e?S.jsxs(S.Fragment,{children:[S.jsx(FT,{}),S.jsx("p",{className:"mt-4 text-sm font-medium text-gray-500 dark:text-gray-400 tracking-wide",children:"Analyse en cours..."})]}):S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:S.jsx(lm,{})}),S.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:c?"Appuyez pour ajouter des photos":"Glissez-dposez vos photos"}),S.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["ou ",S.jsx("span",{className:"text-gold font-medium",children:"cliquez pour slectionner"})]})]})}),o&&!c&&S.jsxs("div",{className:"absolute inset-0 bg-gold/90 backdrop-blur-sm rounded-lg flex flex-col items-center justify-center transition-opacity",children:[S.jsx("div",{className:"text-black transform-gpu scale-110",children:S.jsx(lm,{})}),S.jsx("p",{className:"mt-2 font-bold text-lg text-black",children:"Dposez pour ajouter"})]})]}),i.length>0&&!e&&S.jsxs("div",{className:"mt-8",children:[S.jsx("h3",{className:"font-semibold mb-4 text-gray-600 dark:text-gray-300",children:"Prts pour l'analyse :"}),S.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 mb-6",children:i.map(k=>S.jsxs("div",{className:"relative group aspect-square",children:[S.jsx("img",{src:k.preview,alt:k.file.name,className:"w-full h-full object-cover rounded-md shadow-md"}),S.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity rounded-md"}),S.jsx("button",{onClick:()=>M(k.id),className:"absolute -top-2 -right-2 p-1 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white opacity-0 group-hover:opacity-100 transition-all hover:bg-red-500 hover:scale-110 focus:opacity-100","aria-label":"Supprimer",children:S.jsx(ug,{})})]},k.id))}),S.jsxs("button",{onClick:V,disabled:e||i.length===0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[S.jsx(Fd,{}),"Analyser les ",i.length," article(s)"]})]})]})},wJ=()=>S.jsx("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-800 rounded-lg aspect-square relative overflow-hidden",children:S.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent skew-x-12 translate-x-[-100%] animate-shimmer"})}),xJ=({imageSrc:t,analysis:e,onClick:n,onRemove:i,isSelected:r,isSet:o,isFavorite:l})=>S.jsxs("div",{onClick:n,className:"group relative aspect-square bg-raisin-black rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 cursor-pointer",children:[S.jsx("img",{src:t,alt:e,loading:"lazy",className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"}),S.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${r?"ring-4 ring-gold":"ring-2 ring-transparent"} rounded-lg`}),S.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),r?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-gold rounded-full text-onyx z-10",children:S.jsx(zT,{})}):l?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-red-500 z-10",children:S.jsx(Bd,{className:"w-4 h-4"})}):o?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:S.jsx(cg,{})}):null,S.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:S.jsx("p",{className:"text-white text-sm font-medium line-clamp-2",children:e})}),S.jsx("button",{onClick:i,className:"absolute top-2 right-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-500 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-red-500","aria-label":"Supprimer",children:S.jsx(ug,{})})]}),AJ={Hauts:{color:"Toutes",material:"Toutes"},Bas:{color:"Toutes",material:"Toutes"},Chaussures:{color:"Toutes",material:"Toutes"},Accessoires:{color:"Toutes",material:"Toutes"}},CJ=({clothingItems:t,isLoading:e,clothingSets:n=[],onItemClick:i,onDeleteItem:r,onCreateSet:o})=>{var Z,he;const[l,c]=B.useState("Hauts"),[d,f]=B.useState(AJ),[p,v]=B.useState(""),[T,b]=B.useState("favorites"),[C,N]=B.useState(!1),[M,V]=B.useState(new Set),k=B.useMemo(()=>n||[],[n]),F=B.useMemo(()=>new Set(k.flatMap(se=>se.itemIds||[])),[k]),G=t.length,K=[{name:"Hauts",icon:S.jsx(B7,{})},{name:"Bas",icon:S.jsx(z7,{})},{name:"Chaussures",icon:S.jsx(q7,{})},{name:"Accessoires",icon:S.jsx(H7,{})}],H=[{value:"favorites",label:"Favoris d'abord"},{value:"newest",label:"Plus rcents"},{value:"oldest",label:"Plus anciens"},{value:"color",label:"Couleur (A-Z)"},{value:"category",label:"Catgorie"}],R=se=>{C?V(fe=>{const Ee=new Set(fe);return Ee.has(se.id)?Ee.delete(se.id):Ee.add(se.id),Ee}):i(se)},I=(se,fe)=>{se.stopPropagation(),M.has(fe)&&V(Ee=>{const ke=new Set(Ee);return ke.delete(fe),ke}),r(fe)},P=se=>[...se].sort((fe,Ee)=>{switch(T){case"favorites":return(Ee.isFavorite?1:0)-(fe.isFavorite?1:0);case"newest":return(Ee.createdAt||0)-(fe.createdAt||0);case"oldest":return(fe.createdAt||0)-(Ee.createdAt||0);case"color":return fe.color.localeCompare(Ee.color);case"category":return fe.category.localeCompare(Ee.category);default:return 0}}),U=B.useMemo(()=>{if(!p.trim())return t;const se=p.toLowerCase();return t.filter(fe=>fe.analysis.toLowerCase().includes(se)||fe.color.toLowerCase().includes(se)||fe.material.toLowerCase().includes(se)||fe.category.toLowerCase().includes(se))},[t,p]),L=B.useMemo(()=>{if(!l)return[];const se=U.filter(Ee=>Ee.category===l),fe=d[l];return fe?se.filter(Ee=>{const ke=fe.color==="Toutes"||Ee.color===fe.color,Ve=fe.material==="Toutes"||Ee.material===fe.material;return ke&&Ve}):se},[U,l,(Z=d[l])==null?void 0:Z.color,(he=d[l])==null?void 0:he.material]),z=B.useMemo(()=>P(L),[L,T]),q=B.useMemo(()=>K.reduce((se,{name:fe})=>(se[fe]=U.filter(Ee=>Ee.category===fe).length,se),{}),[U]),xe=B.useMemo(()=>{if(!l)return[];const se=U.filter(fe=>fe.category===l).map(fe=>fe.color);return["Toutes",...Array.from(new Set(se))]},[U,l]),Ie=B.useMemo(()=>{if(!l)return[];const se=U.filter(fe=>fe.category===l).map(fe=>fe.material);return["Toutes",...Array.from(new Set(se))]},[U,l]),ee=se=>{l&&f(fe=>({...fe,[l]:{...fe[l],color:se}}))},re=se=>{l&&f(fe=>({...fe,[l]:{...fe[l],material:se}}))},me=se=>{c(l===se?null:se)},Te=()=>{N(!C),V(new Set)},Ae=()=>{if(M.size<2){alert("Veuillez slectionner au moins 2 articles pour crer un ensemble.");return}const se=window.prompt("Donnez un nom  cet ensemble :");se&&(o(se,Array.from(M)),Te())},$=()=>{v("")};return e?S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl p-6 lg:p-8",children:[S.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[S.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded-full animate-pulse"}),S.jsx("div",{className:"h-8 w-48 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]}),S.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:[...Array(10)].map((se,fe)=>S.jsx(wJ,{},fe))})]}):G===0?S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-8 text-center",children:[S.jsx(yI,{className:"w-20 h-20 mx-auto text-gray-400 dark:text-gray-600 mb-4"}),S.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-700 dark:text-gray-300",children:"Votre garde-robe est vide"}),S.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Ajoutez vos premiers vtements pour commencer  crer vos tenues !"})]}):S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",children:[S.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-6",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx(yI,{className:"w-8 h-8 text-gold"}),S.jsxs("div",{children:[S.jsxs("h2",{className:"text-3xl font-serif font-bold tracking-tight",children:[S.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),S.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[G," vtement",G>1?"s":""]})]})]}),C?S.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[S.jsx("button",{onClick:Te,className:"flex-shrink-0 px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors text-sm font-medium",children:"Annuler"}),S.jsxs("button",{onClick:Ae,disabled:M.size<2,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 text-sm disabled:opacity-50",children:["Valider (",M.size,")"]})]}):S.jsxs("button",{onClick:Te,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300 text-sm",children:[S.jsx(cg,{}),"Crer un ensemble"]})]}),S.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-6",children:[S.jsxs("div",{className:"relative flex-1",children:[S.jsx(YD,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),S.jsx("input",{type:"text",value:p,onChange:se=>v(se.target.value),placeholder:"Rechercher par description, couleur, matire...",className:"w-full pl-10 pr-10 py-2.5 bg-snow dark:bg-onyx border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-all"}),p&&S.jsx("button",{onClick:$,className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors","aria-label":"Effacer la recherche",children:S.jsx(ug,{})})]}),S.jsxs("div",{className:"relative sm:w-48",children:[S.jsx(JD,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"}),S.jsx("select",{value:T,onChange:se=>b(se.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-snow dark:bg-onyx border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent appearance-none cursor-pointer transition-all",children:H.map(se=>S.jsx("option",{value:se.value,children:se.label},se.value))}),S.jsx(um,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),p&&S.jsxs("div",{className:"mb-4 text-sm text-gray-500 dark:text-gray-400",children:[U.length," rsultat",U.length>1?"s":"",' pour "',p,'"']}),C&&S.jsxs("div",{className:"bg-gold/10 border border-gold/30 text-gold-dark dark:text-gold p-4 rounded-lg mb-6 text-center",children:[S.jsx("p",{className:"font-semibold",children:"Mode Cration d'Ensemble"}),S.jsx("p",{className:"text-sm",children:"Slectionnez les articles que vous souhaitez lier."})]}),S.jsx("div",{className:"space-y-6",children:K.map(({name:se,icon:fe})=>{const Ee=q[se]||0,ke=l===se;return S.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-lg overflow-hidden",children:[S.jsxs("button",{onClick:()=>me(se),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900/50 hover:bg-gray-100 dark:hover:bg-gray-900 transition-colors",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("span",{className:"w-5 h-5 text-gold",children:fe}),S.jsx("span",{className:"font-semibold text-lg",children:se}),S.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",Ee,")"]})]}),S.jsx(um,{className:`w-5 h-5 transition-transform ${ke?"rotate-180":""}`})]}),ke&&S.jsxs("div",{className:"p-6 space-y-6",children:[S.jsxs("div",{className:"flex flex-wrap gap-4",children:[S.jsxs("div",{className:"flex-1 min-w-[150px]",children:[S.jsx("label",{className:"block text-sm font-medium mb-2",children:"Couleur"}),S.jsx("select",{value:d[se].color,onChange:Ve=>ee(Ve.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:xe.map(Ve=>S.jsx("option",{value:Ve,children:Ve},Ve))})]}),S.jsxs("div",{className:"flex-1 min-w-[150px]",children:[S.jsx("label",{className:"block text-sm font-medium mb-2",children:"Matire"}),S.jsx("select",{value:d[se].material,onChange:Ve=>re(Ve.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:Ie.map(Ve=>S.jsx("option",{value:Ve,children:Ve},Ve))})]})]}),z.length>0?S.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:S.jsx(X7,{mode:"popLayout",children:z.map((Ve,yt)=>S.jsx(Ns.div,{layout:!0,initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.5,transition:{duration:.2}},transition:{duration:.4,delay:yt*.05,type:"spring",bounce:.3},children:S.jsx(xJ,{imageSrc:Ve.imageSrc,analysis:Ve.analysis,onClick:()=>R(Ve),onRemove:Rn=>I(Rn,Ve.id),isSelected:M.has(Ve.id),isSet:F.has(Ve.id),isFavorite:Ve.isFavorite})},Ve.id))})}):S.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"Aucun vtement ne correspond aux filtres slectionns."})]})]},se)})})]})},x2=({clothingItems:t,clothingSets:e,onGenerate:n,isGenerating:i,weatherInfo:r,weatherError:o})=>{const[l,c]=kn.useState(""),d=p=>{p.preventDefault(),n(l||"Casual")},f=["Casual","Soire chic","Travail (formel)"];return S.jsxs("div",{children:[S.jsxs("div",{className:"text-center mb-6 p-3 rounded-lg bg-snow dark:bg-onyx border border-black/10 dark:border-white/10",children:[r&&S.jsxs("p",{className:"text-sm font-medium text-blue-500 dark:text-blue-400",children:["Mto : ",r," "]}),o&&S.jsx("p",{className:"text-sm font-medium text-red-500",children:o}),!r&&!o&&S.jsx("p",{className:"text-sm font-medium text-gray-400 animate-pulse",children:"Rcupration de la mto..."})]}),S.jsx("form",{onSubmit:d,children:S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"occasion",className:"block text-sm font-medium text-center text-gray-500 dark:text-gray-400 mb-3",children:"Pour quelle occasion ?"}),S.jsx("div",{className:"flex justify-center gap-2 mb-4",children:f.map(p=>S.jsx("button",{type:"button",onClick:()=>c(p),className:`px-4 py-1.5 rounded-full text-sm font-semibold transition-colors duration-200 ${l===p?"bg-gold text-onyx":"bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 hover:border-gold dark:hover:border-gold text-gray-700 dark:text-gray-300"}`,disabled:i,children:p},p))}),S.jsx("input",{id:"occasion",type:"text",value:l,onChange:p=>c(p.target.value),placeholder:"Ou dcrivez... (ex: Brunch dcontract)",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i})]}),S.jsxs("button",{type:"submit",disabled:i,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[S.jsx(Fd,{}),i?"Gnration...":"Gnrer des Tenues"]})]})})]})},IJ=({outfits:t,allClothingItems:e,allClothingSets:n,favoriteOutfits:i,onToggleFavorite:r,onGenerateVisual:o,generatingVisualFor:l,selectedOutfit:c,onSelectOutfit:d})=>{const[f,p]=B.useState(null);B.useEffect(()=>{if(!f)return;const T=b=>{b.key==="Escape"&&p(null)};return window.addEventListener("keydown",T),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",T),document.body.style.overflow="auto"}},[f]);const v=T=>{const{id:b,description:C}=T,N=b?b.trim():"",M=C?C.trim().toLowerCase():"";let V=e.find(F=>F.id===N);if(V)return V;let k=n.find(F=>F.id===N);if(k)return k;if(N&&(V=e.find(F=>F.analysis.toLowerCase().includes(N.toLowerCase())),V)||M&&(V=e.find(F=>{const G=F.analysis.toLowerCase();return G.includes(M)||M.includes(G)}),V))return V};return S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"mt-10 space-y-8",children:t.map((T,b)=>{const C=i.some(V=>V.titre===T.titre&&V.description===T.description),N=l===T.titre,M=(c==null?void 0:c.titre)===T.titre&&(c==null?void 0:c.description)===T.description;return S.jsxs("div",{className:`bg-snow dark:bg-onyx border-2 rounded-lg p-5 transition-all duration-300 hover:shadow-lg relative ${M?"border-gold shadow-gold/30 shadow-lg":"border-black/10 dark:border-white/10 hover:border-gold/50"}`,children:[M&&S.jsxs("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-gradient-to-r from-gold to-gold-dark text-onyx px-4 py-1 rounded-full text-xs font-bold shadow-lg flex items-center gap-1.5",children:[S.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 20 20",children:S.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Tenue choisie"]}),S.jsxs("div",{className:"flex justify-between items-start",children:[S.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:T.titre}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("button",{onClick:()=>d(T),className:`p-1.5 transition-colors ${M?"text-gold":"text-gray-400 hover:text-gold dark:hover:text-gold"}`,"aria-label":M?"Dslectionner cette tenue":"Choisir cette tenue",title:M?"Dslectionner cette tenue":"Choisir cette tenue",children:S.jsx("svg",{className:"w-6 h-6",fill:M?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),S.jsx("button",{onClick:()=>o(T),disabled:N,className:"p-1.5 text-gray-400 hover:text-gold dark:hover:text-gold transition-colors disabled:cursor-not-allowed","aria-label":"Gnrer un rendu visuel",title:"Gnrer un rendu visuel",children:N?S.jsx(FT,{className:"h-5 w-5"}):S.jsx(j7,{})}),S.jsx("button",{onClick:()=>r(T),className:"p-1.5 text-gray-400 hover:text-gold dark:hover:text-gold transition-colors","aria-label":C?"Retirer des favoris":"Ajouter aux favoris",children:C?S.jsx(Bd,{className:"w-6 h-6 text-gold"}):S.jsx(qT,{className:"w-6 h-6"})})]})]}),S.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:T.description}),S.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:T.vetements.map((V,k)=>{const F=v(V),G=F?F.imageSrc:null;return S.jsx("button",{onClick:()=>G&&p(G),className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden transition-transform duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx disabled:cursor-default disabled:hover:scale-100 relative group",disabled:!G,"aria-label":`Agrandir l'image de : ${V.description}`,title:V.description,children:G?S.jsx("img",{src:G,alt:V.description,className:"w-full h-full object-cover"}):S.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:S.jsx($D,{})})},k)})}),S.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:T.vetements.map((V,k)=>S.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:V.description},k))})]},b)})}),f&&S.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:()=>p(null),role:"dialog","aria-modal":"true",children:S.jsxs("div",{className:"relative",onClick:T=>T.stopPropagation(),children:[S.jsx("img",{src:f,alt:"Vue agrandie",className:"max-w-[90vw] max-h-[85vh] object-contain rounded-lg shadow-2xl"}),S.jsx("button",{onClick:()=>p(null),className:"absolute -top-3 -right-3 p-1.5 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white hover:bg-red-500 hover:scale-110 transition-all focus:outline-none focus:ring-2 focus:ring-gold","aria-label":"Fermer",children:S.jsx(BT,{})})]})})]})},ym=B.memo(IJ),RJ=({item:t,clothingSets:e,onClose:n,onUpdate:i,onGenerateFrom:r,onRemoveSet:o,onDelete:l,getItemWearCount:c})=>{const[d,f]=B.useState({analysis:t.analysis,category:t.category,color:t.color,material:t.material}),[p,v]=B.useState(!1),T=e.find(V=>V.itemIds.includes(t.id));B.useEffect(()=>{f({analysis:t.analysis,category:t.category,color:t.color,material:t.material})},[t]),B.useEffect(()=>{const V=G=>{G.key==="Escape"&&n()};document.body.style.overflow="hidden",window.addEventListener("keydown",V);const k=document.querySelector('[role="dialog"]'),F=k==null?void 0:k.querySelector("button, input, textarea, select");return F==null||F.focus(),()=>{document.body.style.overflow="auto",window.removeEventListener("keydown",V)}},[n]);const b=V=>{const{name:k,value:F}=V.target;f(G=>({...G,[k]:F}))},C=V=>{V.preventDefault(),i({...t,...d}),v(!0),setTimeout(()=>{v(!1)},2e3)},N=()=>{window.confirm("tes-vous sr de vouloir supprimer cet article ? Cette action est irrversible.")&&(l(t.id),n())},M=V=>{V.stopPropagation(),i({...t,isFavorite:!t.isFavorite})};return S.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:n,role:"dialog","aria-modal":"true","aria-labelledby":"clothing-item-title",children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col overflow-hidden",onClick:V=>V.stopPropagation(),children:[S.jsxs("div",{className:"relative",children:[S.jsx("img",{src:t.imageSrc,alt:t.analysis,className:"w-full h-auto max-h-[50vh] object-cover"}),S.jsx("button",{onClick:M,className:"absolute top-3 left-3 p-1.5 bg-black/40 backdrop-blur-sm rounded-full text-white hover:bg-black/60 transition-colors","aria-label":"Ajouter aux favoris",children:t.isFavorite?S.jsx(Bd,{className:"w-6 h-6 text-red-500"}):S.jsx(qT,{className:"w-6 h-6"})}),S.jsx("button",{onClick:n,className:"absolute top-3 right-3 p-1.5 bg-black/40 backdrop-blur-sm rounded-full text-white hover:bg-black/60 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-raisin-black","aria-label":"Fermer la vue dtaille",children:S.jsx(BT,{})})]}),S.jsxs("form",{onSubmit:C,className:"p-6 overflow-y-auto flex-grow flex flex-col",children:[S.jsxs("div",{className:"space-y-4 flex-grow",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"analysis",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Description"}),S.jsx("textarea",{id:"analysis",name:"analysis",value:d.analysis,onChange:b,rows:3,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Catgorie"}),S.jsx("select",{id:"category",name:"category",value:d.category,onChange:b,className:"mt-1 w-full appearance-none px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow",children:["Hauts","Bas","Chaussures","Accessoires"].map(V=>S.jsx("option",{value:V,children:V},V))})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Couleur"}),S.jsx("input",{type:"text",id:"color",name:"color",value:d.color,onChange:b,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"material",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Matire"}),S.jsx("input",{type:"text",id:"material",name:"material",value:d.material,onChange:b,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]})]}),S.jsx("div",{className:"bg-gradient-to-r from-gold/5 to-gold-dark/5 dark:from-gold/10 dark:to-gold-dark/10 p-3 rounded-lg border border-gold/20",children:S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{children:[S.jsx("p",{className:"text-xs font-semibold text-gold dark:text-gold-light uppercase tracking-wider",children:"Statistique"}),S.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 mt-1",children:["Port ",S.jsx("span",{className:"font-bold text-lg text-gold",children:c(t.id)})," fois ces 30 derniers jours"]})]}),S.jsx("div",{className:"text-3xl",children:""})]})}),T&&S.jsxs("div",{className:"bg-gold/10 dark:bg-gold/20 p-3 rounded-lg flex items-center justify-between gap-4",children:[S.jsxs("div",{children:[S.jsx("p",{className:"text-xs font-semibold text-gold uppercase tracking-wider",children:"Fait partie de l'ensemble"}),S.jsx("p",{className:"font-medium text-onyx dark:text-snow truncate",title:T.name,children:T.name})]}),S.jsxs("button",{type:"button",onClick:()=>{o(T.id),n()},className:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white dark:bg-onyx text-rose-500 border border-rose-500/50 rounded-md hover:bg-rose-500 hover:text-white transition-colors",title:"Dissocier l'ensemble",children:[S.jsx(G7,{}),S.jsx("span",{children:"Dissocier"})]})]})]}),S.jsxs("div",{className:"mt-6 pt-4 border-t border-black/10 dark:border-white/10 flex flex-col sm:flex-row gap-3 justify-between",children:[S.jsxs("button",{type:"button",onClick:N,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2.5 bg-red-500/10 text-red-500 font-bold rounded-lg hover:bg-red-500/20 transition-all duration-300",children:[S.jsx(ug,{}),"Supprimer"]}),S.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[S.jsxs("button",{type:"button",onClick:()=>r(t),className:"w-full sm:w-auto flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300",children:[S.jsx(Fd,{}),"Crer une tenue"]}),S.jsx("button",{type:"submit",disabled:p,className:`w-full sm:w-auto px-6 py-2.5 font-bold rounded-lg transition-all duration-300 flex items-center justify-center gap-2 ${p?"bg-green-600 text-white cursor-not-allowed":"bg-gold text-onyx hover:bg-gold-dark"}`,children:p?S.jsxs(S.Fragment,{children:[S.jsx(zT,{}),"Enregistr !"]}):"Enregistrer"})]})]})]})]})})},A2=({clothingItems:t,clothingSets:e,onGeneratePlan:n,isGenerating:i})=>{const[r,o]=B.useState(3),[l,c]=B.useState(""),[d,f]=B.useState(""),p=v=>{v.preventDefault();const T=l||"",b=d?parseFloat(d):void 0;T.trim()&&r>0&&n(r,T,b)};return S.jsxs("form",{onSubmit:p,className:"space-y-6",children:[S.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 items-end",children:[S.jsxs("div",{className:"sm:col-span-1",children:[S.jsx("label",{htmlFor:"days",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Dure (jours)"}),S.jsx("input",{id:"days",type:"number",value:r,onChange:v=>o(parseInt(v.target.value,10)||1),min:"1",max:"30",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i,required:!0})]}),S.jsxs("div",{className:"sm:col-span-1",children:[S.jsx("label",{htmlFor:"weight",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Poids max (kg)"}),S.jsxs("div",{className:"relative",children:[S.jsx("input",{id:"weight",type:"number",value:d,onChange:v=>f(v.target.value),placeholder:"Optionnel",min:"1",max:"50",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i}),S.jsx("span",{className:"absolute right-3 top-3.5 text-gray-400 text-sm",children:"kg"})]})]}),S.jsxs("div",{className:"sm:col-span-2",children:[S.jsx("label",{htmlFor:"vacation-context",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Destination / Mto"}),S.jsx("input",{id:"vacation-context",type:"text",value:l,onChange:v=>c(v.target.value),placeholder:"Ex: Weekend  Rome, temps doux",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center sm:text-left",disabled:i,required:!0})]})]}),S.jsxs("button",{type:"submit",disabled:i||!(l||"").trim()||r<=0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[S.jsx(KD,{}),i?"Analyse du poids...":"Gnrer la valise"]})]})},C2=({plan:t,allClothingItems:e,allClothingSets:n})=>{const i=r=>{const{id:o,description:l}=r;let c=e.find(f=>f.id===o);if(c)return c;let d=n.find(f=>f.id===o);if(d)return d;if(c=e.find(f=>f.analysis===o),c||(c=e.find(f=>f.analysis===l),c))return c};return S.jsx("div",{className:"mt-10",children:S.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5",children:[S.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:t.titre}),S.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:t.resume}),S.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:t.valise.map((r,o)=>{const l=i(r),c=l?l.imageSrc:null;return S.jsxs("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden relative group",title:r.description,children:[c?S.jsx("img",{src:c,alt:r.description,className:"w-full h-full object-cover"}):S.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:S.jsx($D,{})}),S.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center p-2",children:S.jsx("p",{className:"text-white text-xs text-center line-clamp-3",children:r.description})})]},o)})}),S.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:t.valise.map((r,o)=>S.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:r.description},o))})]})})},Ps={light:()=>{"vibrate"in navigator&&navigator.vibrate(10)},medium:()=>{"vibrate"in navigator&&navigator.vibrate(20)},success:()=>{"vibrate"in navigator&&navigator.vibrate([10,50,10])},error:()=>{"vibrate"in navigator&&navigator.vibrate([50,30,50])}},NJ=({onFilesSelected:t,isAnalyzing:e,isOtherModalOpen:n})=>{const[i,r]=B.useState(!1),o=B.useRef(null),l=B.useRef(null),c=v=>{const T=Array.from(v.target.files||[]);T.length>0&&(Ps.success(),t(T),r(!1)),v.target.value=""},d=()=>{Ps.medium(),r(!i)},f=()=>{var v;(v=o.current)==null||v.click()},p=()=>{var v;(v=l.current)==null||v.click()};return n?null:S.jsxs(S.Fragment,{children:[S.jsx("input",{ref:o,type:"file",accept:"image/*",capture:"environment",multiple:!0,onChange:c,className:"hidden"}),S.jsx("input",{ref:l,type:"file",accept:"image/*",multiple:!0,onChange:c,className:"hidden"}),i&&S.jsx("div",{className:"md:hidden fixed inset-0 z-30",onClick:()=>r(!1)}),S.jsxs("div",{className:"md:hidden fixed bottom-24 right-6 z-40",children:[S.jsxs("div",{className:`absolute bottom-20 right-0 transition-all duration-300 origin-bottom-right ${i?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-75 translate-y-4 pointer-events-none"}`,children:[S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl border border-black/10 dark:border-white/10 overflow-hidden w-56",children:[S.jsxs("button",{type:"button",onClick:f,className:"w-full flex items-center gap-3 p-4 hover:bg-gold/10 active:bg-gold/20 transition-colors cursor-pointer border-b border-black/5 dark:border-white/5 text-left",children:[S.jsx("div",{className:"w-10 h-10 bg-gold rounded-full flex items-center justify-center flex-shrink-0",children:S.jsxs("svg",{className:"w-5 h-5 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),S.jsxs("div",{children:[S.jsx("p",{className:"font-semibold text-sm",children:"Appareil Photo"}),S.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Prendre une photo"})]})]}),S.jsxs("button",{type:"button",onClick:p,className:"w-full flex items-center gap-3 p-4 hover:bg-gray-100 dark:hover:bg-gray-800 active:bg-gray-200 dark:active:bg-gray-700 transition-colors cursor-pointer text-left",children:[S.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center flex-shrink-0",children:S.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),S.jsxs("div",{children:[S.jsx("p",{className:"font-semibold text-sm",children:"Galerie"}),S.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Choisir des photos"})]})]})]}),S.jsx("div",{className:"absolute -bottom-2 right-6 w-4 h-4 bg-white dark:bg-raisin-black rotate-45 border-r border-b border-black/10 dark:border-white/10"})]}),S.jsx("button",{onClick:d,disabled:e,className:`
            relative w-16 h-16 
            bg-gradient-to-r from-gold to-gold-dark text-onyx 
            rounded-full shadow-2xl 
            transition-all duration-300 ease-out
            flex items-center justify-center
            disabled:opacity-50 disabled:cursor-not-allowed 
            active:scale-90
            ${i?"rotate-45 shadow-gold/50 ring-4 ring-gold/30":"rotate-0 hover:scale-105 hover:shadow-gold/30"}
          `,"aria-label":i?"Fermer le menu":"Ajouter un vtement",children:e?S.jsxs("svg",{className:"animate-spin h-8 w-8",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):S.jsx("svg",{className:"w-8 h-8 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]})]})},PJ=({onAnalyzeWardrobe:t,onScrollToOutfits:e,onScrollToVacation:n,onStartSetCreation:i,onShowFavorites:r,isAnalyzingWardrobe:o,clothingCount:l,favoriteOutfitCount:c})=>S.jsxs("div",{className:"space-y-4 pb-24",children:[S.jsxs("div",{className:"text-center py-6",children:[S.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:[S.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),S.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[l," vtement",l>1?"s":""," dans votre collection"]})]}),S.jsxs("div",{className:"space-y-3 px-4",children:[l>=3&&S.jsx("button",{onClick:t,disabled:o,className:"w-full bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-2xl p-5 text-left transition-all active:scale-98 disabled:opacity-50",children:S.jsxs("div",{className:"flex items-start gap-4",children:[S.jsx("div",{className:"w-12 h-12 bg-gold rounded-xl flex items-center justify-center flex-shrink-0",children:o?S.jsxs("svg",{className:"animate-spin h-6 w-6 text-onyx",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):S.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),S.jsxs("div",{className:"flex-1",children:[S.jsx("h3",{className:"text-lg font-bold mb-1",children:" Analyser ma garde-robe"}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour plus de polyvalence"})]})]})}),S.jsx("button",{onClick:e,className:"w-full bg-gradient-to-r from-purple-500/10 to-pink-500/10 border-2 border-purple-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:S.jsxs("div",{className:"flex items-start gap-4",children:[S.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center flex-shrink-0",children:S.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),S.jsxs("div",{className:"flex-1",children:[S.jsx("h3",{className:"text-lg font-bold mb-1",children:" Crateur de Tenues"}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Gnrez des looks personnaliss avec l'IA"})]})]})}),S.jsx("button",{onClick:n,className:"w-full bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border-2 border-blue-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:S.jsxs("div",{className:"flex items-start gap-4",children:[S.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center flex-shrink-0",children:S.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),S.jsxs("div",{className:"flex-1",children:[S.jsx("h3",{className:"text-lg font-bold mb-1",children:" Planificateur de Valise"}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Prparez votre valise optimale pour votre voyage"})]})]})})]}),S.jsx("div",{className:"px-4 pt-6",children:S.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-2xl p-4",children:[S.jsx("h4",{className:"font-semibold mb-3 text-sm text-gray-600 dark:text-gray-400",children:"Aperu rapide"}),S.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center",children:[S.jsx("p",{className:"text-2xl font-bold text-gold",children:l}),S.jsx("p",{className:"text-xs text-gray-500",children:"Vtements"})]}),S.jsxs("button",{onClick:i,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[S.jsx("div",{className:"text-green-500",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),S.jsx("p",{className:"text-xs text-gray-500 mt-1.5 font-medium",children:"Crer un ensemble"})]}),S.jsxs("button",{onClick:r,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[S.jsxs("div",{className:"text-red-500",children:[S.jsx(qT,{})," "]}),S.jsx("p",{className:"text-2xl font-bold",children:c}),S.jsx("p",{className:"text-xs text-gray-500 mt-0.5 font-medium",children:"Favorites"})]})]})]})})]}),DJ=({activeTab:t,onTabChange:e,counts:n})=>{const i=[{id:"home",label:"Home",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),count:null},{id:"hauts",label:"Hauts",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),count:n.hauts},{id:"bas",label:"Bas",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),count:n.bas},{id:"chaussures",label:"Chaussures",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5"})}),count:n.chaussures},{id:"accessoires",label:"Accessoires",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),count:n.accessoires}];return S.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-raisin-black border-t border-black/10 dark:border-white/10 z-30 pb-8",children:S.jsx("div",{className:"flex justify-around items-center h-16",children:i.map(r=>{const o=t===r.id;return S.jsxs("button",{onClick:()=>{Ps.light(),e(r.id)},className:`flex flex-col items-center justify-center gap-1 px-3 py-2 transition-all flex-1 ${o?"text-gold":"text-gray-500 dark:text-gray-400"}`,children:[S.jsxs("div",{className:"relative",children:[r.icon,r.count!==null&&r.count>0&&S.jsx("span",{className:`absolute -top-1 -right-1 text-[10px] font-bold px-1.5 py-0.5 rounded-full ${o?"bg-gold text-onyx":"bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300"}`,children:r.count})]}),S.jsx("span",{className:`text-xs font-medium ${o?"font-bold":""}`,children:r.label})]},r.id)})})})},MJ=({analysis:t,onClose:e})=>{if(!t)return null;const n={high:"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20",medium:"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 border-yellow-500/20",low:"bg-green-500/10 text-green-600 dark:text-green-400 border-green-500/20"},i={high:"Priorit haute",medium:"Priorit moyenne",low:"Bonne ide"};return S.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[S.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-gold to-gold-dark p-6 rounded-t-2xl",children:S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsx("h2",{className:"text-2xl font-serif font-bold text-onyx",children:" Suggestions d'Achats"}),S.jsx("button",{onClick:e,className:"p-2 hover:bg-black/10 rounded-full transition",children:S.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),S.jsxs("div",{className:"p-6 space-y-6",children:[S.jsxs("div",{className:"bg-gold/5 border border-gold/20 rounded-xl p-4",children:[S.jsx("h3",{className:"font-semibold text-lg mb-2",children:" Analyse de votre garde-robe"}),S.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:t.summary})]}),S.jsxs("div",{children:[S.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[S.jsx("span",{className:"text-green-500",children:""})," Points forts"]}),S.jsx("div",{className:"grid gap-2",children:t.strengths.map((r,o)=>S.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[S.jsx("span",{className:"text-green-500 mt-0.5",children:""}),S.jsx("span",{children:r})]},o))})]}),S.jsxs("div",{children:[S.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[S.jsx("span",{className:"text-orange-500",children:""})," Opportunits d'amlioration"]}),S.jsx("div",{className:"grid gap-2",children:t.gaps.map((r,o)=>S.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[S.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),S.jsx("span",{children:r})]},o))})]}),S.jsxs("div",{children:[S.jsxs("h3",{className:"font-semibold text-xl mb-4 flex items-center gap-2",children:[S.jsx("span",{children:""})," Pices recommandes"]}),S.jsx("div",{className:"grid gap-4",children:t.suggestions.map((r,o)=>S.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-xl p-5 hover:shadow-lg transition-shadow",children:[S.jsxs("div",{className:"flex justify-between items-start mb-3",children:[S.jsxs("div",{children:[S.jsx("h4",{className:"font-bold text-lg",children:r.description}),S.jsx("p",{className:"text-sm text-gray-500",children:r.category})]}),S.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${n[r.priority]}`,children:i[r.priority]})]}),S.jsxs("p",{className:"text-sm mb-3 text-gray-700 dark:text-gray-300",children:[S.jsx("span",{className:"font-semibold",children:"Pourquoi ?"})," ",r.reason]}),r.estimatedPrice&&S.jsxs("div",{className:"flex items-center gap-2 text-sm text-gold font-semibold",children:[S.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.estimatedPrice]})]},o))})]})]})]})})};var kJ=VJ()?B.useLayoutEffect:B.useEffect;function VJ(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function LJ(){var t=B.useState(Object.create(null)),e=t[1];return B.useCallback(function(){e(Object.create(null))},[])}var OJ=b1(),UJ=function(e){var n=e.children,i=e.type,r=i===void 0?"reach-portal":i,o=B.useRef(null),l=B.useRef(null),c=LJ();return kJ(function(){if(o.current){var d=o.current.ownerDocument;return l.current=d==null?void 0:d.createElement(r),d.body.appendChild(l.current),c(),function(){l.current&&l.current.ownerDocument&&l.current.ownerDocument.body.removeChild(l.current)}}},[r,c]),l.current?OJ.createPortal(n,l.current):B.createElement("span",{ref:o})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ye=function(){return ye=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ye.apply(this,arguments)};function bE(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function ft(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Et(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,o=[],l;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(c){l={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return o}function $t(t,e,n){if(arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))}var Lt;(function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"})(Lt||(Lt={}));var Ru;(function(t){t.Parent="#_parent",t.Internal="#_internal"})(Ru||(Ru={}));var d_=Lt.Start,wE=Lt.Stop,mf=Lt.Raise,yg=Lt.Send,I2=Lt.Cancel,FJ=Lt.NullEvent,xE=Lt.Assign;Lt.After;Lt.DoneState;var R2=Lt.Log,BJ=Lt.Init,f_=Lt.Invoke;Lt.ErrorExecution;var kR=Lt.ErrorPlatform,zJ=Lt.ErrorCustom,N2=Lt.Update,qJ=Lt.Choose,HJ=Lt.Pure,P2=".",VR={},h_="xstate.guard",GJ="",Qh;function AE(t,e,n){n===void 0&&(n=P2);var i=Td(t,n),r=Td(e,n);return Ct(r)?Ct(i)?r===i:!1:Ct(i)?i in r:Object.keys(i).every(function(o){return o in r?AE(i[o],r[o]):!1})}function D2(t){try{return Ct(t)||typeof t=="number"?"".concat(t):t.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function p_(t,e){try{return Gu(t)?t:t.toString().split(e)}catch{throw new Error("'".concat(t,"' is not a valid state path."))}}function jJ(t){return typeof t=="object"&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function Td(t,e){if(jJ(t))return t.value;if(Gu(t))return vm(t);if(typeof t!="string")return t;var n=p_(t,e);return vm(n)}function vm(t){if(t.length===1)return t[0];for(var e={},n=e,i=0;i<t.length-1;i++)i===t.length-2?n[t[i]]=t[i+1]:(n[t[i]]={},n=n[t[i]]);return e}function rd(t,e){for(var n={},i=Object.keys(t),r=0;r<i.length;r++){var o=i[r];n[o]=e(t[o],o,t,r)}return n}function LR(t,e,n){var i,r,o={};try{for(var l=ft(Object.keys(t)),c=l.next();!c.done;c=l.next()){var d=c.value,f=t[d];n(f)&&(o[d]=e(f,d,t))}}catch(p){i={error:p}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}return o}var $J=function(t){return function(e){var n,i,r=e;try{for(var o=ft(t),l=o.next();!l.done;l=o.next()){var c=l.value;r=r[c]}}catch(d){n={error:d}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return r}};function KJ(t,e){return function(n){var i,r,o=n;try{for(var l=ft(t),c=l.next();!c.done;c=l.next()){var d=c.value;o=o[e][d]}}catch(f){i={error:f}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}return o}}function Rp(t){if(!t)return[[]];if(Ct(t))return[[t]];var e=en(Object.keys(t).map(function(n){var i=t[n];return typeof i!="string"&&(!i||!Object.keys(i).length)?[[n]]:Rp(t[n]).map(function(r){return[n].concat(r)})}));return e}function en(t){var e;return(e=[]).concat.apply(e,$t([],Et(t),!1))}function M2(t){return Gu(t)?t:[t]}function kr(t){return t===void 0?[]:M2(t)}function _m(t,e,n){var i,r;if(wt(t))return t(e,n.data);var o={};try{for(var l=ft(Object.keys(t)),c=l.next();!c.done;c=l.next()){var d=c.value,f=t[d];wt(f)?o[d]=f(e,n.data):o[d]=f}}catch(p){i={error:p}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}return o}function YJ(t){return/^(done|error)\./.test(t)}function OR(t){return!!(t instanceof Promise||t!==null&&(wt(t)||typeof t=="object")&&wt(t.then))}function JJ(t){return t!==null&&typeof t=="object"&&"transition"in t&&typeof t.transition=="function"}function WJ(t,e){var n,i,r=Et([[],[]],2),o=r[0],l=r[1];try{for(var c=ft(t),d=c.next();!d.done;d=c.next()){var f=d.value;e(f)?o.push(f):l.push(f)}}catch(p){n={error:p}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return[o,l]}function k2(t,e){return rd(t.states,function(n,i){if(n){var r=(Ct(e)?void 0:e[i])||(n?n.current:void 0);if(r)return{current:r,states:k2(n,r)}}})}function QJ(t,e){return{current:e,states:k2(t,e)}}function UR(t,e,n,i){var r=t&&n.reduce(function(o,l){var c,d,f=l.assignment,p={state:i,action:l,_event:e},v={};if(wt(f))v=f(o,e.data,p);else try{for(var T=ft(Object.keys(f)),b=T.next();!b.done;b=T.next()){var C=b.value,N=f[C];v[C]=wt(N)?N(o,e.data,p):N}}catch(M){c={error:M}}finally{try{b&&!b.done&&(d=T.return)&&d.call(T)}finally{if(c)throw c.error}}return Object.assign({},o,v)},t);return r}var XJ=function(){};function Gu(t){return Array.isArray(t)}function wt(t){return typeof t=="function"}function Ct(t){return typeof t=="string"}function V2(t,e){if(t)return Ct(t)?{type:h_,name:t,predicate:e?e[t]:void 0}:wt(t)?{type:h_,name:t.name,predicate:t}:t}function ZJ(t){try{return"subscribe"in t&&wt(t.subscribe)}catch{return!1}}var Lo=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();Qh={},Qh[Lo]=function(){return this},Qh[Symbol.observable]=function(){return this};function Nu(t){return!!t&&"__xstatenode"in t}function eW(t){return!!t&&typeof t.send=="function"}function vg(t,e){return Ct(t)||typeof t=="number"?ye({type:t},e):t}function Xn(t,e){if(!Ct(t)&&"$$type"in t&&t.$$type==="scxml")return t;var n=vg(t);return ye({name:n.type,data:n,$$type:"scxml",type:"external"},e)}function $l(t,e){var n=M2(e).map(function(i){return typeof i>"u"||typeof i=="string"||Nu(i)?{target:i,event:t}:ye(ye({},i),{event:t})});return n}function tW(t){if(!(t===void 0||t===GJ))return kr(t)}function L2(t,e,n,i,r){var o=t.options.guards,l={state:r,cond:e,_event:i};if(e.type===h_)return((o==null?void 0:o[e.name])||e.predicate)(n,i.data,l);var c=o==null?void 0:o[e.type];if(!c)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return c(n,i.data,l)}function O2(t){return typeof t=="string"?{type:t}:t}function Np(t,e,n){var i=function(){},r=typeof t=="object",o=r?t:null;return{next:((r?t.next:t)||i).bind(o),error:((r?t.error:e)||i).bind(o),complete:((r?t.complete:n)||i).bind(o)}}function Xh(t,e){return"".concat(t,":invocation[").concat(e,"]")}function m_(t){return(t.type===mf||t.type===yg&&t.to===Ru.Internal)&&typeof t.delay!="number"}var yu=Xn({type:BJ});function g_(t,e){return e&&e[t]||void 0}function $d(t,e){var n;if(Ct(t)||typeof t=="number"){var i=g_(t,e);wt(i)?n={type:t,exec:i}:i?n=i:n={type:t,exec:void 0}}else if(wt(t))n={type:t.name||t.toString(),exec:t};else{var i=g_(t.type,e);if(wt(i))n=ye(ye({},t),{exec:i});else if(i){var r=i.type||t.type;n=ye(ye(ye({},i),t),{type:r})}else n=t}return n}var Oo=function(t,e){if(!t)return[];var n=Gu(t)?t:[t];return n.map(function(i){return $d(i,e)})};function CE(t){var e=$d(t);return ye(ye({id:Ct(t)?t:e.id},e),{type:e.type})}function nW(t,e){return{type:mf,event:typeof t=="function"?t:vg(t),delay:e?e.delay:void 0,id:e==null?void 0:e.id}}function iW(t,e,n,i){var r={_event:n},o=Xn(wt(t.event)?t.event(e,n.data,r):t.event),l;if(Ct(t.delay)){var c=i&&i[t.delay];l=wt(c)?c(e,n.data,r):c}else l=wt(t.delay)?t.delay(e,n.data,r):t.delay;return ye(ye({},t),{type:mf,_event:o,delay:l})}function rW(t,e){return{to:e?e.to:void 0,type:yg,event:wt(t)?t:vg(t),delay:e?e.delay:void 0,id:e&&e.id!==void 0?e.id:wt(t)?t.name:D2(t)}}function sW(t,e,n,i){var r={_event:n},o=Xn(wt(t.event)?t.event(e,n.data,r):t.event),l;if(Ct(t.delay)){var c=i&&i[t.delay];l=wt(c)?c(e,n.data,r):c}else l=wt(t.delay)?t.delay(e,n.data,r):t.delay;var d=wt(t.to)?t.to(e,n.data,r):t.to;return ye(ye({},t),{to:d,_event:o,event:o.data,delay:l})}var oW=function(t,e,n){return ye(ye({},t),{value:Ct(t.expr)?t.expr:t.expr(e,n.data,{_event:n})})},aW=function(t){return{type:I2,sendId:t}};function lW(t){var e=CE(t);return{type:Lt.Start,activity:e,exec:void 0}}function uW(t){var e=wt(t)?t:CE(t);return{type:Lt.Stop,activity:e,exec:void 0}}function cW(t,e,n){var i=wt(t.activity)?t.activity(e,n.data):t.activity,r=typeof i=="string"?{id:i}:i,o={type:Lt.Stop,activity:r};return o}var dW=function(t){return{type:xE,assignment:t}};function fW(t,e){var n=e?"#".concat(e):"";return"".concat(Lt.After,"(").concat(t,")").concat(n)}function Zh(t,e){var n="".concat(Lt.DoneState,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}function Pp(t,e){var n="".concat(Lt.DoneInvoke,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}function sd(t,e){var n="".concat(Lt.ErrorPlatform,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}var hW=function(t){var e,n,i=[];try{for(var r=ft(t),o=r.next();!o.done;o=r.next())for(var l=o.value,c=0;c<l.actions.length;){if(l.actions[c].type===xE){i.push(l.actions[c]),l.actions.splice(c,1);continue}c++}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i};function Tm(t,e,n,i,r,o,l){l===void 0&&(l=!1);var c=l?[]:hW(r),d=c.length?UR(n,i,c,e):n,f=l?[n]:void 0,p=[];function v(C,N){var M;switch(N.type){case mf:{var V=iW(N,d,i,t.options.delays);return o&&typeof V.delay=="number"&&o(V,d,i),V}case yg:var k=sW(N,d,i,t.options.delays);return o&&k.to!==Ru.Internal&&(C==="entry"?p.push(k):o(k,d,i)),k;case R2:{var F=oW(N,d,i);return o==null||o(F,d,i),F}case qJ:{var G=N,K=(M=G.conds.find(function(ee){var re=V2(ee.cond,t.options.guards);return!re||L2(t,re,d,i,o?void 0:e)}))===null||M===void 0?void 0:M.actions;if(!K)return[];var H=Et(Tm(t,e,d,i,[{type:C,actions:Oo(kr(K),t.options.actions)}],o,l),2),R=H[0],I=H[1];return d=I,f==null||f.push(d),R}case HJ:{var K=N.get(d,i.data);if(!K)return[];var P=Et(Tm(t,e,d,i,[{type:C,actions:Oo(kr(K),t.options.actions)}],o,l),2),U=P[0],L=P[1];return d=L,f==null||f.push(d),U}case wE:{var F=cW(N,d,i);return o==null||o(F,n,i),F}case xE:{d=UR(d,i,[N],o?void 0:e),f==null||f.push(d);break}default:var z=$d(N,t.options.actions),q=z.exec;if(o)o(z,d,i);else if(q&&f){var xe=f.length-1,Ie=ye(ye({},z),{exec:function(ee){for(var re=[],me=1;me<arguments.length;me++)re[me-1]=arguments[me];q.apply(void 0,$t([f[xe]],Et(re),!1))}});z=Ie}return z}}function T(C){var N,M,V=[];try{for(var k=ft(C.actions),F=k.next();!F.done;F=k.next()){var G=F.value,K=v(C.type,G);K&&(V=V.concat(K))}}catch(H){N={error:H}}finally{try{F&&!F.done&&(M=k.return)&&M.call(k)}finally{if(N)throw N.error}}return p.forEach(function(H){o(H,d,i)}),p.length=0,V}var b=en(r.map(T));return[b,d]}var tu=function(t,e){var n=e(t);return n};function U2(t){var e;return e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}},e[Lo]=function(){return this},e}function pW(t,e,n,i){var r,o=O2(t.src),l=(r=e==null?void 0:e.options.services)===null||r===void 0?void 0:r[o.type],c=t.data?_m(t.data,n,i):void 0,d=l?F2(l,t.id,c):U2(t.id);return d.meta=t,d}function F2(t,e,n){var i=U2(e);if(i.deferred=!0,Nu(t)){var r=i.state=tu(void 0,function(){return(n?t.withContext(n):t).initialState});i.getSnapshot=function(){return r}}return i}function mW(t){try{return typeof t.send=="function"}catch{return!1}}function gW(t){return mW(t)&&"id"in t}function yW(t){var e;return ye((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e[Lo]=function(){return this},e),t)}var Em=function(t){return t.type==="atomic"||t.type==="final"};function B2(t){return Object.keys(t.states).map(function(e){return t.states[e]})}function Kd(t){return B2(t).filter(function(e){return e.type!=="history"})}function z2(t){var e=[t];return Em(t)?e:e.concat(en(Kd(t).map(z2)))}function od(t,e){var n,i,r,o,l,c,d,f,p=new Set(t),v=y_(p),T=new Set(e);try{for(var b=ft(T),C=b.next();!C.done;C=b.next())for(var N=C.value,M=N.parent;M&&!T.has(M);)T.add(M),M=M.parent}catch(P){n={error:P}}finally{try{C&&!C.done&&(i=b.return)&&i.call(b)}finally{if(n)throw n.error}}var V=y_(T);try{for(var k=ft(T),F=k.next();!F.done;F=k.next()){var N=F.value;if(N.type==="compound"&&(!V.get(N)||!V.get(N).length))v.get(N)?v.get(N).forEach(function(U){return T.add(U)}):N.initialStateNodes.forEach(function(U){return T.add(U)});else if(N.type==="parallel")try{for(var G=(l=void 0,ft(Kd(N))),K=G.next();!K.done;K=G.next()){var H=K.value;T.has(H)||(T.add(H),v.get(H)?v.get(H).forEach(function(U){return T.add(U)}):H.initialStateNodes.forEach(function(U){return T.add(U)}))}}catch(U){l={error:U}}finally{try{K&&!K.done&&(c=G.return)&&c.call(G)}finally{if(l)throw l.error}}}}catch(P){r={error:P}}finally{try{F&&!F.done&&(o=k.return)&&o.call(k)}finally{if(r)throw r.error}}try{for(var R=ft(T),I=R.next();!I.done;I=R.next())for(var N=I.value,M=N.parent;M&&!T.has(M);)T.add(M),M=M.parent}catch(P){d={error:P}}finally{try{I&&!I.done&&(f=R.return)&&f.call(R)}finally{if(d)throw d.error}}return T}function q2(t,e){var n=e.get(t);if(!n)return{};if(t.type==="compound"){var i=n[0];if(i){if(Em(i))return i.key}else return{}}var r={};return n.forEach(function(o){r[o.key]=q2(o,e)}),r}function y_(t){var e,n,i=new Map;try{for(var r=ft(t),o=r.next();!o.done;o=r.next()){var l=o.value;i.has(l)||i.set(l,[]),l.parent&&(i.has(l.parent)||i.set(l.parent,[]),i.get(l.parent).push(l))}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i}function vW(t,e){var n=od([t],e);return q2(t,y_(n))}function ad(t,e){return Array.isArray(t)?t.some(function(n){return n===e}):t instanceof Set?t.has(e):!1}function _W(t){return $t([],Et(new Set(en($t([],Et(t.map(function(e){return e.ownEvents})),!1)))),!1)}function Dp(t,e){return e.type==="compound"?Kd(e).some(function(n){return n.type==="final"&&ad(t,n)}):e.type==="parallel"?Kd(e).every(function(n){return Dp(t,n)}):!1}function TW(t){return t===void 0&&(t=[]),t.reduce(function(e,n){return n.meta!==void 0&&(e[n.id]=n.meta),e},{})}function FR(t){return new Set(en(t.map(function(e){return e.tags})))}function H2(t,e){if(t===e)return!0;if(t===void 0||e===void 0)return!1;if(Ct(t)||Ct(e))return t===e;var n=Object.keys(t),i=Object.keys(e);return n.length===i.length&&n.every(function(r){return H2(t[r],e[r])})}function EW(t){return typeof t!="object"||t===null?!1:"value"in t&&"_event"in t}function SW(t,e){var n=t.exec,i=ye(ye({},t),{exec:n!==void 0?function(){return n(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0});return i}var Tr=(function(){function t(e){var n=this,i;this.actions=[],this.activities=VR,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||VR,this.meta=TW(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=(i=Array.isArray(e.tags)?new Set(e.tags):e.tags)!==null&&i!==void 0?i:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return _W(n.configuration)}})}return t.from=function(e,n){if(e instanceof t)return e.context!==n?new t({value:e.value,context:n,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,events:[],configuration:[],transitions:[],children:{}}):e;var i=yu;return new t({value:e,context:n,_event:i,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,n){if(e instanceof t){if(!e.actions.length)return e;var i=yu;return new t({value:e.value,context:n,_event:i,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,n)},t.prototype.toStrings=function(e,n){var i=this;if(e===void 0&&(e=this.value),n===void 0&&(n="."),Ct(e))return[e];var r=Object.keys(e);return r.concat.apply(r,$t([],Et(r.map(function(o){return i.toStrings(e[o],n).map(function(l){return o+n+l})})),!1))},t.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var n=e.tags;e.machine;var i=bE(e,["configuration","transitions","tags","machine"]);return ye(ye({},i),{tags:Array.from(n)})},t.prototype.matches=function(e){return AE(e,this.value)},t.prototype.hasTag=function(e){return this.tags.has(e)},t.prototype.can=function(e){var n;XJ(!!this.machine);var i=(n=this.machine)===null||n===void 0?void 0:n.getTransitionData(this,e);return!!(i!=null&&i.transitions.length)&&i.transitions.some(function(r){return r.target!==void 0||r.actions.length})},t})(),bW={deferEvents:!1},BR=(function(){function t(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=ye(ye({},bW),e)}return t.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents){this.schedule(e);return}this.process(e)}this.flushEvents()},t.prototype.schedule=function(e){if(!this.initialized||this.processingEvent){this.queue.push(e);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},t.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(n){throw this.clear(),n}finally{this.processingEvent=!1}},t})(),t0=new Map,wW=0,Gc={bookId:function(){return"x:".concat(wW++)},register:function(t,e){return t0.set(t,e),t},get:function(t){return t0.get(t)},free:function(t){t0.delete(t)}};function IE(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function xW(){var t=IE();if(t&&"__xstate__"in t)return t.__xstate__}function AW(t){if(IE()){var e=xW();e&&e.register(t)}}function CW(t,e){e===void 0&&(e={});var n=t.initialState,i=new Set,r=[],o=!1,l=function(){if(!o){for(o=!0;r.length>0;){var f=r.shift();n=t.transition(n,f,d),i.forEach(function(p){return p.next(n)})}o=!1}},c=yW({id:e.id,send:function(f){r.push(f),l()},getSnapshot:function(){return n},subscribe:function(f,p,v){var T=Np(f,p,v);return i.add(T),T.next(n),{unsubscribe:function(){i.delete(T)}}}}),d={parent:e.parent,self:c,id:e.id||"anonymous",observers:i};return n=t.start?t.start(d):n,c}var IW={sync:!1,autoForward:!1},Gn;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(Gn||(Gn={}));var RW=(function(){function t(e,n){n===void 0&&(n=t.defaultOptions);var i=this;this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=Gn.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(p,v){if(Gu(p))return i.batch(p),i.state;var T=Xn(vg(p,v));if(i.status===Gn.Stopped)return i.state;if(i.status!==Gn.Running&&!i.options.deferEvents)throw new Error('Event "'.concat(T.name,'" was sent to uninitialized service "').concat(i.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(T.data)));return i.scheduler.schedule(function(){i.forward(T);var b=i._nextState(T);i.update(b,T)}),i._state},this.sendTo=function(p,v,T){var b=i.parent&&(v===Ru.Parent||i.parent.id===v),C=b?i.parent:Ct(v)?v===Ru.Internal?i:i.children.get(v)||Gc.get(v):eW(v)?v:void 0;if(!C){if(!b)throw new Error("Unable to send event to child '".concat(v,"' from service '").concat(i.id,"'."));return}if("machine"in C){if(i.status!==Gn.Stopped||i.parent!==C||i.state.done){var N=ye(ye({},p),{name:p.name===zJ?"".concat(sd(i.id)):p.name,origin:i.sessionId});!T&&i.machine.config.predictableActionArguments?i._outgoingQueue.push([C,N]):C.send(N)}}else!T&&i.machine.config.predictableActionArguments?i._outgoingQueue.push([C,p.data]):C.send(p.data)},this._exec=function(p,v,T,b){b===void 0&&(b=i.machine.options.actions);var C=p.exec||g_(p.type,b),N=wt(C)?C:C?C.exec:p.exec;if(N)try{return N(v,T.data,i.machine.config.predictableActionArguments?{action:p,_event:T}:{action:p,state:i.state,_event:T})}catch(xe){throw i.parent&&i.parent.send({type:"xstate.error",data:xe}),xe}switch(p.type){case mf:{var M=p;i.defer(M);break}case yg:var V=p;if(typeof V.delay=="number"){i.defer(V);return}else V.to?i.sendTo(V._event,V.to,T===yu):i.send(V._event);break;case I2:i.cancel(p.sendId);break;case d_:{if(i.status!==Gn.Running)return;var k=p.activity;if(!i.machine.config.predictableActionArguments&&!i.state.activities[k.id||k.type])break;if(k.type===Lt.Invoke){var F=O2(k.src),G=i.machine.options.services?i.machine.options.services[F.type]:void 0,K=k.id,H=k.data,R="autoForward"in k?k.autoForward:!!k.forward;if(!G)return;var I=H?_m(H,v,T):void 0;if(typeof G=="string")return;var P=wt(G)?G(v,T.data,{data:I,src:F,meta:k.meta}):G;if(!P)return;var U=void 0;Nu(P)&&(P=I?P.withContext(I):P,U={autoForward:R}),i.spawn(P,K,U)}else i.spawnActivity(k);break}case wE:{i.stopChild(p.activity.id);break}case R2:var L=p,z=L.label,q=L.value;z?i.logger(z,q):i.logger(q);break}};var r=ye(ye({},t.defaultOptions),n),o=r.clock,l=r.logger,c=r.parent,d=r.id,f=d!==void 0?d:e.id;this.id=f,this.logger=l,this.clock=o,this.parent=c,this.options=r,this.scheduler=new BR({deferEvents:this.options.deferEvents}),this.sessionId=Gc.bookId()}return Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:tu(this,function(){return e._initialState=e.machine.initialState,e._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(e,n){var i,r;try{for(var o=ft(e.actions),l=o.next();!l.done;l=o.next()){var c=l.value;this.exec(c,e,n)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}},t.prototype.update=function(e,n){var i,r,o,l,c,d,f,p,v=this;if(e._sessionid=this.sessionId,this._state=e,(!this.machine.config.predictableActionArguments||n===yu)&&this.options.execute)this.execute(this.state);else for(var T=void 0;T=this._outgoingQueue.shift();)T[0].send(T[1]);if(this.children.forEach(function(P){v.state.children[P.id]=P}),this.devTools&&this.devTools.send(n.data,e),e.event)try{for(var b=ft(this.eventListeners),C=b.next();!C.done;C=b.next()){var N=C.value;N(e.event)}}catch(P){i={error:P}}finally{try{C&&!C.done&&(r=b.return)&&r.call(b)}finally{if(i)throw i.error}}try{for(var M=ft(this.listeners),V=M.next();!V.done;V=M.next()){var N=V.value;N(e,e.event)}}catch(P){o={error:P}}finally{try{V&&!V.done&&(l=M.return)&&l.call(M)}finally{if(o)throw o.error}}try{for(var k=ft(this.contextListeners),F=k.next();!F.done;F=k.next()){var G=F.value;G(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(P){c={error:P}}finally{try{F&&!F.done&&(d=k.return)&&d.call(k)}finally{if(c)throw c.error}}if(this.state.done){var K=e.configuration.find(function(P){return P.type==="final"&&P.parent===v.machine}),H=K&&K.doneData?_m(K.doneData,e.context,n):void 0;this._doneEvent=Pp(this.id,H);try{for(var R=ft(this.doneListeners),I=R.next();!I.done;I=R.next()){var N=I.value;N(this._doneEvent)}}catch(P){f={error:P}}finally{try{I&&!I.done&&(p=R.return)&&p.call(R)}finally{if(f)throw f.error}}this._stop(),this._stopChildren(),Gc.free(this.sessionId)}},t.prototype.onTransition=function(e){return this.listeners.add(e),this.status===Gn.Running&&e(this.state,this.state.event),this},t.prototype.subscribe=function(e,n,i){var r=this,o=Np(e,n,i);this.listeners.add(o.next),this.status!==Gn.NotStarted&&o.next(this.state);var l=function(){r.doneListeners.delete(l),r.stopListeners.delete(l),o.complete()};return this.status===Gn.Stopped?o.complete():(this.onDone(l),this.onStop(l)),{unsubscribe:function(){r.listeners.delete(o.next),r.doneListeners.delete(l),r.stopListeners.delete(l)}}},t.prototype.onEvent=function(e){return this.eventListeners.add(e),this},t.prototype.onSend=function(e){return this.sendListeners.add(e),this},t.prototype.onChange=function(e){return this.contextListeners.add(e),this},t.prototype.onStop=function(e){return this.stopListeners.add(e),this},t.prototype.onDone=function(e){return this.status===Gn.Stopped&&this._doneEvent?e(this._doneEvent):this.doneListeners.add(e),this},t.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},t.prototype.start=function(e){var n=this;if(this.status===Gn.Running)return this;this.machine._init(),Gc.register(this.sessionId,this),this.initialized=!0,this.status=Gn.Running;var i=e===void 0?this.initialState:tu(this,function(){return EW(e)?n.machine.resolveState(e):n.machine.resolveState(Tr.from(e,n.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){n.update(i,yu)}),this},t.prototype._stopChildren=function(){this.children.forEach(function(e){wt(e.stop)&&e.stop()}),this.children.clear()},t.prototype._stop=function(){var e,n,i,r,o,l,c,d,f,p;try{for(var v=ft(this.listeners),T=v.next();!T.done;T=v.next()){var b=T.value;this.listeners.delete(b)}}catch(R){e={error:R}}finally{try{T&&!T.done&&(n=v.return)&&n.call(v)}finally{if(e)throw e.error}}try{for(var C=ft(this.stopListeners),N=C.next();!N.done;N=C.next()){var b=N.value;b(),this.stopListeners.delete(b)}}catch(R){i={error:R}}finally{try{N&&!N.done&&(r=C.return)&&r.call(C)}finally{if(i)throw i.error}}try{for(var M=ft(this.contextListeners),V=M.next();!V.done;V=M.next()){var b=V.value;this.contextListeners.delete(b)}}catch(R){o={error:R}}finally{try{V&&!V.done&&(l=M.return)&&l.call(M)}finally{if(o)throw o.error}}try{for(var k=ft(this.doneListeners),F=k.next();!F.done;F=k.next()){var b=F.value;this.doneListeners.delete(b)}}catch(R){c={error:R}}finally{try{F&&!F.done&&(d=k.return)&&d.call(k)}finally{if(c)throw c.error}}if(!this.initialized)return this;this.initialized=!1,this.status=Gn.Stopped,this._initialState=void 0;try{for(var G=ft(Object.keys(this.delayedEventsMap)),K=G.next();!K.done;K=G.next()){var H=K.value;this.clock.clearTimeout(this.delayedEventsMap[H])}}catch(R){f={error:R}}finally{try{K&&!K.done&&(p=G.return)&&p.call(G)}finally{if(f)throw f.error}}this.scheduler.clear(),this.scheduler=new BR({deferEvents:this.options.deferEvents})},t.prototype.stop=function(){var e=this,n=this.scheduler;return this._stop(),n.schedule(function(){var i;if(!(!((i=e._state)===null||i===void 0)&&i.done)){var r=Xn({type:"xstate.stop"}),o=tu(e,function(){var l=en($t([],Et(e.state.configuration),!1).sort(function(v,T){return T.order-v.order}).map(function(v){return Oo(v.onExit,e.machine.options.actions)})),c=Et(Tm(e.machine,e.state,e.state.context,r,[{type:"exit",actions:l}],e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),d=c[0],f=c[1],p=new Tr({value:e.state.value,context:f,_event:r,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:d.filter(function(v){return!m_(v)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return p.changed=!0,p});e.update(o,r),e._stopChildren(),Gc.free(e.sessionId)}}),this},t.prototype.batch=function(e){var n=this;if(!(this.status===Gn.NotStarted&&this.options.deferEvents)){if(this.status!==Gn.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'))}if(e.length){var i=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var r,o,l=n.state,c=!1,d=[],f=function(b){var C=Xn(b);n.forward(C),l=tu(n,function(){return n.machine.transition(l,C,void 0,i||void 0)}),d.push.apply(d,$t([],Et(n.machine.config.predictableActionArguments?l.actions:l.actions.map(function(N){return SW(N,l)})),!1)),c=c||!!l.changed};try{for(var p=ft(e),v=p.next();!v.done;v=p.next()){var T=v.value;f(T)}}catch(b){r={error:b}}finally{try{v&&!v.done&&(o=p.return)&&o.call(p)}finally{if(r)throw r.error}}l.changed=c,l.actions=d,n.update(l,Xn(e[e.length-1]))})}},t.prototype.sender=function(e){return this.send.bind(this,e)},t.prototype._nextState=function(e,n){var i=this;n===void 0&&(n=!!this.machine.config.predictableActionArguments&&this._exec);var r=Xn(e);if(r.name.indexOf(kR)===0&&!this.state.nextEvents.some(function(l){return l.indexOf(kR)===0}))throw r.data.data;var o=tu(this,function(){return i.machine.transition(i.state,r,void 0,n||void 0)});return o},t.prototype.nextState=function(e){return this._nextState(e,!1)},t.prototype.forward=function(e){var n,i;try{for(var r=ft(this.forwardTo),o=r.next();!o.done;o=r.next()){var l=o.value,c=this.children.get(l);if(!c)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(l,"'."));c.send(e)}}catch(d){n={error:d}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}},t.prototype.defer=function(e){var n=this,i=this.clock.setTimeout(function(){"to"in e&&e.to?n.sendTo(e._event,e.to,!0):n.send(e._event)},e.delay);e.id&&(this.delayedEventsMap[e.id]=i)},t.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},t.prototype.exec=function(e,n,i){i===void 0&&(i=this.machine.options.actions),this._exec(e,n.context,n._event,i)},t.prototype.removeChild=function(e){var n;this.children.delete(e),this.forwardTo.delete(e),(n=this.state)===null||n===void 0||delete n.children[e]},t.prototype.stopChild=function(e){var n=this.children.get(e);n&&(this.removeChild(e),wt(n.stop)&&n.stop())},t.prototype.spawn=function(e,n,i){if(this.status!==Gn.Running)return F2(e,n);if(OR(e))return this.spawnPromise(Promise.resolve(e),n);if(wt(e))return this.spawnCallback(e,n);if(gW(e))return this.spawnActor(e,n);if(ZJ(e))return this.spawnObservable(e,n);if(Nu(e))return this.spawnMachine(e,ye(ye({},i),{id:n}));if(JJ(e))return this.spawnBehavior(e,n);throw new Error('Unable to spawn entity "'.concat(n,'" of type "').concat(typeof e,'".'))},t.prototype.spawnMachine=function(e,n){var i=this;n===void 0&&(n={});var r=new t(e,ye(ye({},this.options),{parent:this,id:n.id||e.id})),o=ye(ye({},IW),n);o.sync&&r.onTransition(function(c){i.send(N2,{state:c,id:r.id})});var l=r;return this.children.set(r.id,l),o.autoForward&&this.forwardTo.add(r.id),r.onDone(function(c){i.removeChild(r.id),i.send(Xn(c,{origin:r.id}))}).start(),l},t.prototype.spawnBehavior=function(e,n){var i=CW(e,{id:n,parent:this});return this.children.set(n,i),i},t.prototype.spawnPromise=function(e,n){var i,r=this,o=!1,l;e.then(function(d){o||(l=d,r.removeChild(n),r.send(Xn(Pp(n,d),{origin:n})))},function(d){if(!o){r.removeChild(n);var f=sd(n,d);try{r.send(Xn(f,{origin:n}))}catch{r.devTools&&r.devTools.send(f,r.state),r.machine.strict&&r.stop()}}});var c=(i={id:n,send:function(){},subscribe:function(d,f,p){var v=Np(d,f,p),T=!1;return e.then(function(b){T||(v.next(b),!T&&v.complete())},function(b){T||v.error(b)}),{unsubscribe:function(){return T=!0}}},stop:function(){o=!0},toJSON:function(){return{id:n}},getSnapshot:function(){return l}},i[Lo]=function(){return this},i);return this.children.set(n,c),c},t.prototype.spawnCallback=function(e,n){var i,r=this,o=!1,l=new Set,c=new Set,d,f=function(T){d=T,c.forEach(function(b){return b(T)}),!o&&r.send(Xn(T,{origin:n}))},p;try{p=e(f,function(T){l.add(T)})}catch(T){this.send(sd(n,T))}if(OR(p))return this.spawnPromise(p,n);var v=(i={id:n,send:function(T){return l.forEach(function(b){return b(T)})},subscribe:function(T){var b=Np(T);return c.add(b.next),{unsubscribe:function(){c.delete(b.next)}}},stop:function(){o=!0,wt(p)&&p()},toJSON:function(){return{id:n}},getSnapshot:function(){return d}},i[Lo]=function(){return this},i);return this.children.set(n,v),v},t.prototype.spawnObservable=function(e,n){var i,r=this,o,l=e.subscribe(function(d){o=d,r.send(Xn(d,{origin:n}))},function(d){r.removeChild(n),r.send(Xn(sd(n,d),{origin:n}))},function(){r.removeChild(n),r.send(Xn(Pp(n),{origin:n}))}),c=(i={id:n,send:function(){},subscribe:function(d,f,p){return e.subscribe(d,f,p)},stop:function(){return l.unsubscribe()},getSnapshot:function(){return o},toJSON:function(){return{id:n}}},i[Lo]=function(){return this},i);return this.children.set(n,c),c},t.prototype.spawnActor=function(e,n){return this.children.set(n,e),e},t.prototype.spawnActivity=function(e){var n=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(n){var i=n(this.state.context,e);this.spawnEffect(e.id,i)}},t.prototype.spawnEffect=function(e,n){var i;this.children.set(e,(i={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:n||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}},i[Lo]=function(){return this},i))},t.prototype.attachDev=function(){var e=IE();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var n=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(ye(ye({name:this.id,autoPause:!0,stateSanitizer:function(i){return{value:i.value,context:i.context,actions:i.actions}}},n),{features:ye({jump:!1,skip:!1},n?n.features:void 0)}),this.machine),this.devTools.init(this.state)}AW(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[Lo]=function(){return this},t.prototype.getSnapshot=function(){return this.status===Gn.NotStarted?this.initialState:this._state},t.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,n){return setTimeout(e,n)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},t.interpret=G2,t})();function G2(t,e){var n=new RW(t,e);return n}function NW(t){if(typeof t=="string"){var e={type:t};return e.toString=function(){return t},e}return t}function ep(t){return ye(ye({type:f_},t),{toJSON:function(){t.onDone,t.onError;var e=bE(t,["onDone","onError"]);return ye(ye({},e),{type:f_,src:NW(t.src)})}})}var tp="",v_="#",n0="*",Kl={},Yl=function(t){return t[0]===v_},PW=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},DW=(function(){function t(e,n,i,r){i===void 0&&(i="context"in e?e.context:void 0);var o=this,l;this.config=e,this._context=i,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(PW(),n),this.parent=r==null?void 0:r.parent,this.key=this.config.key||(r==null?void 0:r.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:P2),this.id=this.config.id||$t([this.machine.key],Et(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(l=this.config.schema)!==null&&l!==void 0?l:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?rd(this.config.states,function(f,p){var v,T=new t(f,{},void 0,{parent:o,key:p});return Object.assign(o.idMap,ye((v={},v[T.id]=T,v),T.idMap)),T}):Kl;var c=0;function d(f){var p,v;f.order=c++;try{for(var T=ft(B2(f)),b=T.next();!b.done;b=T.next()){var C=b.value;d(C)}}catch(N){p={error:N}}finally{try{b&&!b.done&&(v=T.return)&&v.call(T)}finally{if(p)throw p.error}}}d(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(f){var p=f.event;return p===tp}):tp in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=kr(this.config.entry||this.config.onEntry).map(function(f){return $d(f)}),this.onExit=kr(this.config.exit||this.config.onExit).map(function(f){return $d(f)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=kr(this.config.invoke).map(function(f,p){var v,T;if(Nu(f)){var b=Xh(o.id,p);return o.machine.options.services=ye((v={},v[b]=f,v),o.machine.options.services),ep({src:b,id:b})}else if(Ct(f.src)){var b=f.id||Xh(o.id,p);return ep(ye(ye({},f),{id:b,src:f.src}))}else if(Nu(f.src)||wt(f.src)){var b=f.id||Xh(o.id,p);return o.machine.options.services=ye((T={},T[b]=f.src,T),o.machine.options.services),ep(ye(ye({id:b},f),{src:b}))}else{var C=f.src;return ep(ye(ye({id:Xh(o.id,p)},f),{src:C}))}}),this.activities=kr(this.config.activities).concat(this.invoke).map(function(f){return CE(f)}),this.transition=this.transition.bind(this),this.tags=kr(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||z2(this).forEach(function(e){return e.on})},t.prototype.withConfig=function(e,n){var i=this.options,r=i.actions,o=i.activities,l=i.guards,c=i.services,d=i.delays;return new t(this.config,{actions:ye(ye({},r),e.actions),activities:ye(ye({},o),e.activities),guards:ye(ye({},l),e.guards),services:ye(ye({},c),e.services),delays:ye(ye({},d),e.delays)},n??this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return wt(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:rd(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce(function(n,i){return n[i.eventType]=n[i.eventType]||[],n[i.eventType].push(i),n},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var n=e===tp,i=this.transitions.filter(function(r){var o=r.eventType===e;return n?o:o||r.eventType===n0});return this.__cache.candidates[e]=i,i},t.prototype.getDelayedTransitions=function(){var e=this,n=this.config.after;if(!n)return[];var i=function(o,l){var c=wt(o)?"".concat(e.id,":delay[").concat(l,"]"):o,d=fW(c,e.id);return e.onEntry.push(rW(d,{delay:o})),e.onExit.push(aW(d)),d},r=Gu(n)?n.map(function(o,l){var c=i(o.delay,l);return ye(ye({},o),{event:c})}):en(Object.keys(n).map(function(o,l){var c=n[o],d=Ct(c)?{target:c}:c,f=isNaN(+o)?o:+o,p=i(f,l);return kr(d).map(function(v){return ye(ye({},v),{event:p,delay:f})})}));return r.map(function(o){var l=o.delay;return ye(ye({},e.formatTransition(o)),{delay:l})})},t.prototype.getStateNodes=function(e){var n,i=this;if(!e)return[];var r=e instanceof Tr?e.value:Td(e,this.delimiter);if(Ct(r)){var o=this.getStateNode(r).initial;return o!==void 0?this.getStateNodes((n={},n[r]=o,n)):[this,this.states[r]]}var l=Object.keys(r),c=[this];return c.push.apply(c,$t([],Et(en(l.map(function(d){return i.getStateNode(d).getStateNodes(r[d])}))),!1)),c},t.prototype.handles=function(e){var n=D2(e);return this.events.includes(n)},t.prototype.resolveState=function(e){var n=e instanceof Tr?e:Tr.create(e),i=Array.from(od([],this.getStateNodes(n.value)));return new Tr(ye(ye({},n),{value:this.resolve(n.value),configuration:i,done:Dp(i,this),tags:FR(i),machine:this.machine}))},t.prototype.transitionLeafNode=function(e,n,i){var r=this.getStateNode(e),o=r.next(n,i);return!o||!o.transitions.length?this.next(n,i):o},t.prototype.transitionCompoundNode=function(e,n,i){var r=Object.keys(e),o=this.getStateNode(r[0]),l=o._transition(e[r[0]],n,i);return!l||!l.transitions.length?this.next(n,i):l},t.prototype.transitionParallelNode=function(e,n,i){var r,o,l={};try{for(var c=ft(Object.keys(e)),d=c.next();!d.done;d=c.next()){var f=d.value,p=e[f];if(p){var v=this.getStateNode(f),T=v._transition(p,n,i);T&&(l[f]=T)}}}catch(V){r={error:V}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}var b=Object.keys(l).map(function(V){return l[V]}),C=en(b.map(function(V){return V.transitions})),N=b.some(function(V){return V.transitions.length>0});if(!N)return this.next(n,i);var M=en(Object.keys(l).map(function(V){return l[V].configuration}));return{transitions:C,exitSet:en(b.map(function(V){return V.exitSet})),configuration:M,source:n,actions:en(Object.keys(l).map(function(V){return l[V].actions}))}},t.prototype._transition=function(e,n,i){return Ct(e)?this.transitionLeafNode(e,n,i):Object.keys(e).length===1?this.transitionCompoundNode(e,n,i):this.transitionParallelNode(e,n,i)},t.prototype.getTransitionData=function(e,n){return this._transition(e.value,e,Xn(n))},t.prototype.next=function(e,n){var i,r,o=this,l=n.name,c=[],d=[],f;try{for(var p=ft(this.getCandidates(l)),v=p.next();!v.done;v=p.next()){var T=v.value,b=T.cond,C=T.in,N=e.context,M=C?Ct(C)&&Yl(C)?e.matches(Td(this.getStateNodeById(C).path,this.delimiter)):AE(Td(C,this.delimiter),$J(this.path.slice(0,-2))(e.value)):!0,V=!1;try{V=!b||L2(this.machine,b,N,n,e)}catch(G){throw new Error("Unable to evaluate guard '".concat(b.name||b.type,"' in transition for event '").concat(l,"' in state node '").concat(this.id,`':
`).concat(G.message))}if(V&&M){T.target!==void 0&&(d=T.target),c.push.apply(c,$t([],Et(T.actions),!1)),f=T;break}}}catch(G){i={error:G}}finally{try{v&&!v.done&&(r=p.return)&&r.call(p)}finally{if(i)throw i.error}}if(f){if(!d.length)return{transitions:[f],exitSet:[],configuration:e.value?[this]:[],source:e,actions:c};var k=en(d.map(function(G){return o.getRelativeStateNodes(G,e.historyValue)})),F=!!f.internal;return{transitions:[f],exitSet:F?[]:en(d.map(function(G){return o.getPotentiallyReenteringNodes(G)})),configuration:k,source:e,actions:c}}},t.prototype.getPotentiallyReenteringNodes=function(e){if(this.order<e.order)return[this];for(var n=[],i=this,r=e;i&&i!==r;)n.push(i),i=i.parent;return i!==r?[]:(n.push(r),n)},t.prototype.getActions=function(e,n,i,r,o,l,c){var d,f,p,v,T=this,b=l?od([],this.getStateNodes(l.value)):[],C=new Set;try{for(var N=ft(Array.from(e).sort(function(L,z){return L.order-z.order})),M=N.next();!M.done;M=N.next()){var V=M.value;(!ad(b,V)||ad(i.exitSet,V)||V.parent&&C.has(V.parent))&&C.add(V)}}catch(L){d={error:L}}finally{try{M&&!M.done&&(f=N.return)&&f.call(N)}finally{if(d)throw d.error}}try{for(var k=ft(b),F=k.next();!F.done;F=k.next()){var V=F.value;(!ad(e,V)||ad(i.exitSet,V.parent))&&i.exitSet.push(V)}}catch(L){p={error:L}}finally{try{F&&!F.done&&(v=k.return)&&v.call(k)}finally{if(p)throw p.error}}i.exitSet.sort(function(L,z){return z.order-L.order});var G=Array.from(C).sort(function(L,z){return L.order-z.order}),K=new Set(i.exitSet),H=en(G.map(function(L){var z=[];if(L.type!=="final")return z;var q=L.parent;if(!q.parent)return z;z.push(Zh(L.id,L.doneData),Zh(q.id,L.doneData?_m(L.doneData,r,o):void 0));var xe=q.parent;return xe.type==="parallel"&&Kd(xe).every(function(Ie){return Dp(i.configuration,Ie)})&&z.push(Zh(xe.id)),z})),R=G.map(function(L){var z=L.onEntry,q=L.activities.map(function(xe){return lW(xe)});return{type:"entry",actions:Oo(c?$t($t([],Et(z),!1),Et(q),!1):$t($t([],Et(q),!1),Et(z),!1),T.machine.options.actions)}}).concat({type:"state_done",actions:H.map(function(L){return nW(L)})}),I=Array.from(K).map(function(L){return{type:"exit",actions:Oo($t($t([],Et(L.onExit),!1),Et(L.activities.map(function(z){return uW(z)})),!1),T.machine.options.actions)}}),P=I.concat({type:"transition",actions:Oo(i.actions,this.machine.options.actions)}).concat(R);if(n){var U=Oo(en($t([],Et(e),!1).sort(function(L,z){return z.order-L.order}).map(function(L){return L.onExit})),this.machine.options.actions).filter(function(L){return!m_(L)});return P.concat({type:"stop",actions:U})}return P},t.prototype.transition=function(e,n,i,r){e===void 0&&(e=this.initialState);var o=Xn(n),l;if(e instanceof Tr)l=i===void 0?e:this.resolveState(Tr.from(e,i));else{var c=Ct(e)?this.resolve(vm(this.getResolvedPath(e))):this.resolve(e),d=i??this.machine.context;l=this.resolveState(Tr.from(c,d))}if(this.strict&&!this.events.includes(o.name)&&!YJ(o.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(o.name,"'"));var f=this._transition(l.value,l,o)||{transitions:[],configuration:[],exitSet:[],source:l,actions:[]},p=od([],this.getStateNodes(l.value)),v=f.configuration.length?od(p,f.configuration):p;return f.configuration=$t([],Et(v),!1),this.resolveTransition(f,l,l.context,r,o)},t.prototype.resolveRaisedTransition=function(e,n,i,r){var o,l=e.actions;return e=this.transition(e,n,void 0,r),e._event=i,e.event=i.data,(o=e.actions).unshift.apply(o,$t([],Et(l),!1)),e},t.prototype.resolveTransition=function(e,n,i,r,o){var l,c,d,f,p=this;o===void 0&&(o=yu);var v=e.configuration,T=!n||e.transitions.length>0,b=T?e.configuration:n?n.configuration:[],C=Dp(b,this),N=T?vW(this.machine,v):void 0,M=n?n.historyValue?n.historyValue:e.source?this.machine.historyValue(n.value):void 0:void 0,V=this.getActions(new Set(b),C,e,i,o,n,r),k=n?ye({},n.activities):{};try{for(var F=ft(V),G=F.next();!G.done;G=F.next()){var K=G.value;try{for(var H=(d=void 0,ft(K.actions)),R=H.next();!R.done;R=H.next()){var I=R.value;I.type===d_?k[I.activity.id||I.activity.type]=I:I.type===wE&&(k[I.activity.id||I.activity.type]=!1)}}catch(se){d={error:se}}finally{try{R&&!R.done&&(f=H.return)&&f.call(H)}finally{if(d)throw d.error}}}}catch(se){l={error:se}}finally{try{G&&!G.done&&(c=F.return)&&c.call(F)}finally{if(l)throw l.error}}var P=Et(Tm(this,n,i,o,V,r,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),U=P[0],L=P[1],z=Et(WJ(U,m_),2),q=z[0],xe=z[1],Ie=U.filter(function(se){var fe;return se.type===d_&&((fe=se.activity)===null||fe===void 0?void 0:fe.type)===f_}),ee=Ie.reduce(function(se,fe){return se[fe.activity.id]=pW(fe.activity,p.machine,L,o),se},n?ye({},n.children):{}),re=new Tr({value:N||n.value,context:L,_event:o,_sessionid:n?n._sessionid:null,historyValue:N?M?QJ(M,N):void 0:n?n.historyValue:void 0,history:!N||e.source?n:void 0,actions:N?xe:[],activities:N?k:n?n.activities:{},events:[],configuration:b,transitions:e.transitions,children:ee,done:C,tags:FR(b),machine:this}),me=i!==L;re.changed=o.name===N2||me;var Te=re.history;Te&&delete Te.history;var Ae=!C&&(this._transient||v.some(function(se){return se._transient}));if(!T&&(!Ae||o.name===tp))return re;var $=re;if(!C)for(Ae&&($=this.resolveRaisedTransition($,{type:FJ},o,r));q.length;){var Z=q.shift();$=this.resolveRaisedTransition($,Z._event,o,r)}var he=$.changed||(Te?!!$.actions.length||me||typeof Te.value!=typeof $.value||!H2($.value,Te.value):void 0);return $.changed=he,$.history=Te,$},t.prototype.getStateNode=function(e){if(Yl(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var n=this.states[e];if(!n)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return n},t.prototype.getStateNodeById=function(e){var n=Yl(e)?e.slice(v_.length):e;if(n===this.id)return this;var i=this.machine.idMap[n];if(!i)throw new Error("Child state node '#".concat(n,"' does not exist on machine '").concat(this.id,"'"));return i},t.prototype.getStateNodeByPath=function(e){if(typeof e=="string"&&Yl(e))try{return this.getStateNodeById(e.slice(1))}catch{}for(var n=p_(e,this.delimiter).slice(),i=this;n.length;){var r=n.shift();if(!r.length)break;i=i.getStateNode(r)}return i},t.prototype.resolve=function(e){var n,i=this;if(!e)return this.initialStateValue||Kl;switch(this.type){case"parallel":return rd(this.initialStateValue,function(o,l){return o?i.getStateNode(l).resolve(e[l]||o):Kl});case"compound":if(Ct(e)){var r=this.getStateNode(e);return r.type==="parallel"||r.type==="compound"?(n={},n[e]=r.initialStateValue,n):e}return Object.keys(e).length?rd(e,function(o,l){return o?i.getStateNode(l).resolve(o):Kl}):this.initialStateValue||{};default:return e||Kl}},t.prototype.getResolvedPath=function(e){if(Yl(e)){var n=this.machine.idMap[e.slice(v_.length)];if(!n)throw new Error("Unable to find state node '".concat(e,"'"));return n.path}return p_(e,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var n;if(this.type==="parallel")n=LR(this.states,function(i){return i.initialStateValue||Kl},function(i){return i.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));n=Em(this.states[this.initial])?this.initial:(e={},e[this.initial]=this.states[this.initial].initialStateValue,e)}else n={};return this.__cache.initialStateValue=n,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(e,n){this._init();var i=this.getStateNodes(e);return this.resolveTransition({configuration:i,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,n??this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var e;if(this.type==="history"){var n=this.config;Ct(n.target)?e=Yl(n.target)?vm(this.machine.getStateNodeById(n.target).path.slice(this.path.length-1)):n.target:e=n.target}return e},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(e,n,i){return i===void 0&&(i=!0),i?e.type==="history"?e.resolveHistory(n):e.initialStateNodes:[e]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var e=this;if(Em(this))return[this];if(this.type==="compound"&&!this.initial)return[this];var n=Rp(this.initialStateValue);return en(n.map(function(i){return e.getFromRelativePath(i)}))},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var n=Et(e),i=n[0],r=n.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(i,"' from node with no states"));var o=this.getStateNode(i);if(o.type==="history")return o.resolveHistory();if(!this.states[i])throw new Error("Child state '".concat(i,"' does not exist on '").concat(this.id,"'"));return this.states[i].getFromRelativePath(r)},t.prototype.historyValue=function(e){if(Object.keys(this.states).length)return{current:e||this.initialStateValue,states:LR(this.states,function(n,i){if(!e)return n.historyValue();var r=Ct(e)?void 0:e[i];return n.historyValue(r||n.initialStateValue)},function(n){return!n.history})}},t.prototype.resolveHistory=function(e){var n=this;if(this.type!=="history")return[this];var i=this.parent;if(!e){var r=this.target;return r?en(Rp(r).map(function(l){return i.getFromRelativePath(l)})):i.initialStateNodes}var o=KJ(i.path,"states")(e).current;return Ct(o)?[i.getStateNode(o)]:en(Rp(o).map(function(l){return n.history==="deep"?i.getFromRelativePath(l):[i.states[l[0]]]}))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var e=this,n=en(Object.keys(this.states).map(function(i){return e.states[i].stateIds}));return[this.id].concat(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var e,n,i,r;if(this.__cache.events)return this.__cache.events;var o=this.states,l=new Set(this.ownEvents);if(o)try{for(var c=ft(Object.keys(o)),d=c.next();!d.done;d=c.next()){var f=d.value,p=o[f];if(p.states)try{for(var v=(i=void 0,ft(p.events)),T=v.next();!T.done;T=v.next()){var b=T.value;l.add("".concat(b))}}catch(C){i={error:C}}finally{try{T&&!T.done&&(r=v.return)&&r.call(v)}finally{if(i)throw i.error}}}}catch(C){e={error:C}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(l)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter(function(n){return!(!n.target&&!n.actions.length&&n.internal)}).map(function(n){return n.eventType}));return Array.from(e)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(e){var n=this;if(e!==void 0)return e.map(function(i){if(!Ct(i))return i;var r=i[0]===n.delimiter;if(r&&!n.parent)return n.getStateNodeByPath(i.slice(1));var o=r?n.key+i:i;if(n.parent)try{var l=n.parent.getStateNodeByPath(o);return l}catch(c){throw new Error("Invalid transition definition for state node '".concat(n.id,`':
`).concat(c.message))}else return n.getStateNodeByPath(o)})},t.prototype.formatTransition=function(e){var n=this,i=tW(e.target),r="internal"in e?e.internal:i?i.some(function(d){return Ct(d)&&d[0]===n.delimiter}):!0,o=this.machine.options.guards,l=this.resolveTarget(i),c=ye(ye({},e),{actions:Oo(kr(e.actions)),cond:V2(e.cond,o),target:l,source:this,internal:r,eventType:e.event,toJSON:function(){return ye(ye({},c),{target:c.target?c.target.map(function(d){return"#".concat(d.id)}):void 0,source:"#".concat(n.id)})}});return c},t.prototype.formatTransitions=function(){var e,n,i=this,r;if(!this.config.on)r=[];else if(Array.isArray(this.config.on))r=this.config.on;else{var o=this.config.on,l=n0,c=o[l],d=c===void 0?[]:c,f=bE(o,[typeof l=="symbol"?l:l+""]);r=en(Object.keys(f).map(function(k){var F=$l(k,f[k]);return F}).concat($l(n0,d)))}var p=this.config.always?$l("",this.config.always):[],v=this.config.onDone?$l(String(Zh(this.id)),this.config.onDone):[],T=en(this.invoke.map(function(k){var F=[];return k.onDone&&F.push.apply(F,$t([],Et($l(String(Pp(k.id)),k.onDone)),!1)),k.onError&&F.push.apply(F,$t([],Et($l(String(sd(k.id)),k.onError)),!1)),F})),b=this.after,C=en($t($t($t($t([],Et(v),!1),Et(T),!1),Et(r),!1),Et(p),!1).map(function(k){return kr(k).map(function(F){return i.formatTransition(F)})}));try{for(var N=ft(b),M=N.next();!M.done;M=N.next()){var V=M.value;C.push(V)}}catch(k){e={error:k}}finally{try{M&&!M.done&&(n=N.return)&&n.call(N)}finally{if(e)throw e.error}}return C},t})();function MW(t,e,n){return n===void 0&&(n=t.context),new DW(t,e,n)}var kW=dW,__;(function(t){t[t.Effect=1]="Effect",t[t.LayoutEffect=2]="LayoutEffect"})(__||(__={}));var Ed=B.useLayoutEffect;function zR(t){var e=B.useRef();return e.current||(e.current={v:t()}),e.current.v}var VW=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,o=[],l;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(c){l={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return o},LW=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function OW(t,e){var n,i,r=VW([[],[]],2),o=r[0],l=r[1];try{for(var c=LW(t),d=c.next();!d.done;d=c.next()){var f=d.value;e(f)?o.push(f):l.push(f)}}catch(p){n={error:p}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return[o,l]}var jc=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,o=[],l;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(c){l={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return o},qR=function(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))};function HR(t,e){var n=t.exec,i=n(e.context,e._event.data,{action:t,state:e,_event:e._event});i()}function UW(t){var e=B.useRef([]),n=B.useRef([]);Ed(function(){var i=t.subscribe(function(r){var o,l;if(r.actions.length){var c=r.actions.filter(function(v){return typeof v.exec=="function"&&"__effect"in v.exec}),d=jc(OW(c,function(v){return v.exec.__effect===__.Effect}),2),f=d[0],p=d[1];(o=e.current).push.apply(o,qR([],jc(f.map(function(v){return[v,r]})),!1)),(l=n.current).push.apply(l,qR([],jc(p.map(function(v){return[v,r]})),!1))}});return function(){i.unsubscribe()}},[]),Ed(function(){for(;n.current.length;){var i=jc(n.current.shift(),2),r=i[0],o=i[1];HR(r,o)}}),B.useEffect(function(){for(;e.current.length;){var i=jc(e.current.shift(),2),r=i[0],o=i[1];HR(r,o)}})}var Sd=function(){return Sd=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Sd.apply(this,arguments)},FW=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n};function BW(t,e,n){if(typeof t=="object")return t;var i=function(){};return{next:t,error:e||i,complete:n||i}}function zW(t,e,n){e===void 0&&(e={});var i=zR(function(){return typeof t=="function"?t():t}),r=e.context,o=e.guards,l=e.actions,c=e.activities,d=e.services,f=e.delays,p=e.state,v=FW(e,["context","guards","actions","activities","services","delays","state"]),T=zR(function(){var b={context:r,guards:o,actions:l,activities:c,services:d,delays:f},C=i.withConfig(b,function(){return Sd(Sd({},i.context),r)});return G2(C,Sd({deferEvents:!0},v))});return Ed(function(){var b;return n&&(b=T.subscribe(BW(n))),function(){b==null||b.unsubscribe()}},[n]),Ed(function(){return T.start(p?Tr.create(p):void 0),function(){T.stop()}},[]),Ed(function(){Object.assign(T.machine.options.actions,l),Object.assign(T.machine.options.guards,o),Object.assign(T.machine.options.activities,c),Object.assign(T.machine.options.services,d),Object.assign(T.machine.options.delays,f)},[l,o,c,d,f]),UW(T),T}var qW=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,o=[],l;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(c){l={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return o};function HW(t,e){e===void 0&&(e={});var n=B.useCallback(function(c){var d=c.changed===void 0&&Object.keys(c.children).length;(c.changed||d)&&l(c)},[]),i=zW(t,e,n),r=qW(B.useState(function(){var c=i.machine.initialState;return e.state?Tr.create(e.state):c}),2),o=r[0],l=r[1];return[o,i.send,i]}function ln(){return ln=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ln.apply(null,arguments)}function vu(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}const ot={arr:Array.isArray,obj:t=>Object.prototype.toString.call(t)==="[object Object]",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0,nul:t=>t===null,set:t=>t instanceof Set,map:t=>t instanceof Map,equ(t,e){if(typeof t!=typeof e)return!1;if(ot.str(t)||ot.num(t))return t===e;if(ot.obj(t)&&ot.obj(e)&&Object.keys(t).length+Object.keys(e).length===0)return!0;let n;for(n in t)if(!(n in e))return!1;for(n in e)if(t[n]!==e[n])return!1;return ot.und(n)?t===e:!0}};function GW(t,e){return n=>(ot.arr(n)?n:Object.keys(n)).reduce((i,r)=>{const o=r;return i[o]=t(o),i},t)}function jW(){const t=B.useState(!1),e=t[1];return B.useCallback(()=>e(i=>!i),[])}function Va(t,e){return ot.und(t)||ot.nul(t)?e:t}function np(t){return ot.und(t)?[]:ot.arr(t)?t:[t]}function lu(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return ot.fun(t)?t(...n):t}function $W(t){return t.to,t.from,t.config,t.onStart,t.onRest,t.onFrame,t.children,t.reset,t.reverse,t.force,t.immediate,t.delay,t.attach,t.destroyed,t.interpolateTo,t.ref,t.lazy,vu(t,["to","from","config","onStart","onRest","onFrame","children","reset","reverse","force","immediate","delay","attach","destroyed","interpolateTo","ref","lazy"])}function i0(t){const e=$W(t);if(ot.und(e))return ln({to:e},t);const n=Object.keys(t).reduce((i,r)=>ot.und(e[r])?ln({},i,{[r]:t[r]}):i,{});return ln({to:e},n)}function KW(t,e){return e&&(ot.fun(e)?e(t):ot.obj(e)&&(e.current=t)),t}class Vr{constructor(){this.payload=void 0,this.children=[]}getAnimatedValue(){return this.getValue()}getPayload(){return this.payload||this}attach(){}detach(){}getChildren(){return this.children}addChild(e){this.children.length===0&&this.attach(),this.children.push(e)}removeChild(e){const n=this.children.indexOf(e);this.children.splice(n,1),this.children.length===0&&this.detach()}}class T_ extends Vr{constructor(){super(...arguments),this.payload=[],this.attach=()=>this.payload.forEach(e=>e instanceof Vr&&e.addChild(this)),this.detach=()=>this.payload.forEach(e=>e instanceof Vr&&e.removeChild(this))}}class j2 extends Vr{constructor(){super(...arguments),this.payload={},this.attach=()=>Object.values(this.payload).forEach(e=>e instanceof Vr&&e.addChild(this)),this.detach=()=>Object.values(this.payload).forEach(e=>e instanceof Vr&&e.removeChild(this))}getValue(e){e===void 0&&(e=!1);const n={};for(const i in this.payload){const r=this.payload[i];e&&!(r instanceof Vr)||(n[i]=r instanceof Vr?r[e?"getAnimatedValue":"getValue"]():r)}return n}getAnimatedValue(){return this.getValue(!0)}}let RE;function YW(t,e){RE={fn:t,transform:e}}let $2;function JW(t){$2=t}let K2=t=>typeof window<"u"?window.requestAnimationFrame(t):-1,Sm;function WW(t){Sm=t}let Y2=()=>Date.now(),QW=t=>t.current,J2;function XW(t){J2=t}class ZW extends j2{constructor(e,n){super(),this.update=void 0,this.payload=e.style?ln({},e,{style:J2(e.style)}):e,this.update=n,this.attach()}}const eQ=t=>ot.fun(t)&&!(t.prototype instanceof kn.Component),tQ=t=>B.forwardRef((n,i)=>{const r=jW(),o=B.useRef(!0),l=B.useRef(null),c=B.useRef(null),d=B.useCallback(T=>{const b=l.current,C=()=>{let N=!1;c.current&&(N=RE.fn(c.current,l.current.getAnimatedValue())),(!c.current||N===!1)&&r()};l.current=new ZW(T,C),b&&b.detach()},[]);B.useEffect(()=>()=>{o.current=!1,l.current&&l.current.detach()},[]),B.useImperativeHandle(i,()=>QW(c)),d(n);const f=l.current.getValue();f.scrollTop,f.scrollLeft;const p=vu(f,["scrollTop","scrollLeft"]),v=eQ(t)?void 0:T=>c.current=KW(T,i);return kn.createElement(t,ln({},p,{ref:v}))});let bd=!1;const Ka=new Set,W2=()=>{if(!bd)return!1;let t=Y2();for(let e of Ka){let n=!1;for(let i=0;i<e.configs.length;i++){let r=e.configs[i],o,l;for(let c=0;c<r.animatedValues.length;c++){let d=r.animatedValues[c];if(d.done)continue;let f=r.fromValues[c],p=r.toValues[c],v=d.lastPosition,T=p instanceof Vr,b=Array.isArray(r.initialVelocity)?r.initialVelocity[c]:r.initialVelocity;if(T&&(p=p.getValue()),r.immediate){d.setValue(p),d.done=!0;continue}if(typeof f=="string"||typeof p=="string"){d.setValue(p),d.done=!0;continue}if(r.duration!==void 0)v=f+r.easing((t-d.startTime)/r.duration)*(p-f),o=t>=d.startTime+r.duration;else if(r.decay)v=f+b/(1-.998)*(1-Math.exp(-.0020000000000000018*(t-d.startTime))),o=Math.abs(d.lastPosition-v)<.1,o&&(p=v);else{l=d.lastTime!==void 0?d.lastTime:t,b=d.lastVelocity!==void 0?d.lastVelocity:r.initialVelocity,t>l+64&&(l=t);let C=Math.floor(t-l);for(let k=0;k<C;++k){let F=-r.tension*(v-p),G=-r.friction*b,K=(F+G)/r.mass;b=b+K*1/1e3,v=v+b*1/1e3}let N=r.clamp&&r.tension!==0?f<p?v>p:v<p:!1,M=Math.abs(b)<=r.precision,V=r.tension!==0?Math.abs(p-v)<=r.precision:!0;o=N||M&&V,d.lastVelocity=b,d.lastTime=t}T&&!r.toValues[c].done&&(o=!1),o?(d.value!==p&&(v=p),d.done=!0):n=!0,d.setValue(v),d.lastPosition=v}e.props.onFrame&&(e.values[r.name]=r.interpolation.getValue())}e.props.onFrame&&e.props.onFrame(e.values),n||(Ka.delete(e),e.stop(!0))}return Ka.size?K2(W2):bd=!1,bd},nQ=t=>{Ka.has(t)||Ka.add(t),bd||(bd=!0,K2(W2))},iQ=t=>{Ka.has(t)&&Ka.delete(t)};function bm(t,e,n){if(typeof t=="function")return t;if(Array.isArray(t))return bm({range:t,output:e,extrapolate:n});if(Sm&&typeof t.output[0]=="string")return Sm(t);const i=t,r=i.output,o=i.range||[0,1],l=i.extrapolateLeft||i.extrapolate||"extend",c=i.extrapolateRight||i.extrapolate||"extend",d=i.easing||(f=>f);return f=>{const p=sQ(f,o);return rQ(f,o[p],o[p+1],r[p],r[p+1],d,l,c,i.map)}}function rQ(t,e,n,i,r,o,l,c,d){let f=d?d(t):t;if(f<e){if(l==="identity")return f;l==="clamp"&&(f=e)}if(f>n){if(c==="identity")return f;c==="clamp"&&(f=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?f=-f:n===1/0?f=f-e:f=(f-e)/(n-e),f=o(f),i===-1/0?f=-f:r===1/0?f=f+i:f=f*(r-i)+i,f)}function sQ(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}class Pu extends T_{constructor(e,n,i,r){super(),this.calc=void 0,this.payload=e instanceof T_&&!(e instanceof Pu)?e.getPayload():Array.isArray(e)?e:[e],this.calc=bm(n,i,r)}getValue(){return this.calc(...this.payload.map(e=>e.getValue()))}updateConfig(e,n,i){this.calc=bm(e,n,i)}interpolate(e,n,i){return new Pu(this,e,n,i)}}const Jl=(t,e,n)=>t&&new Pu(t,e,n),oQ={default:{tension:170,friction:26}};function Q2(t,e){"update"in t?e.add(t):t.getChildren().forEach(n=>Q2(n,e))}class E_ extends Vr{constructor(e){var n;super(),n=this,this.animatedStyles=new Set,this.value=void 0,this.startPosition=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.startTime=void 0,this.lastTime=void 0,this.done=!1,this.setValue=function(i,r){r===void 0&&(r=!0),n.value=i,r&&n.flush()},this.value=e,this.startPosition=e,this.lastPosition=e}flush(){this.animatedStyles.size===0&&Q2(this,this.animatedStyles),this.animatedStyles.forEach(e=>e.update())}clearStyles(){this.animatedStyles.clear()}getValue(){return this.value}interpolate(e,n,i){return new Pu(this,e,n,i)}}class aQ extends T_{constructor(e){super(),this.payload=e.map(n=>new E_(n))}setValue(e,n){n===void 0&&(n=!0),Array.isArray(e)?e.length===this.payload.length&&e.forEach((i,r)=>this.payload[r].setValue(i,n)):this.payload.forEach(i=>i.setValue(e,n))}getValue(){return this.payload.map(e=>e.getValue())}interpolate(e,n){return new Pu(this,e,n)}}let lQ=0,uQ=class{constructor(){this.id=void 0,this.idle=!0,this.hasChanged=!1,this.guid=0,this.local=0,this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.listeners=[],this.queue=[],this.localQueue=void 0,this.getValues=()=>this.interpolations,this.id=lQ++}update(e){if(!e)return this;const n=i0(e),i=n.delay,r=i===void 0?0:i,o=n.to,l=vu(n,["delay","to"]);if(ot.arr(o)||ot.fun(o))this.queue.push(ln({},l,{delay:r,to:o}));else if(o){let c={};Object.entries(o).forEach(d=>{let f=d[0],p=d[1];const v=ln({to:{[f]:p},delay:lu(r,f)},l),T=c[v.delay]&&c[v.delay].to;c[v.delay]=ln({},c[v.delay],v,{to:ln({},T,v.to)})}),this.queue=Object.values(c)}return this.queue=this.queue.sort((c,d)=>c.delay-d.delay),this.diff(l),this}start(e){if(this.queue.length){this.idle=!1,this.localQueue&&this.localQueue.forEach(r=>{let o=r.from,l=o===void 0?{}:o,c=r.to,d=c===void 0?{}:c;ot.obj(l)&&(this.merged=ln({},l,this.merged)),ot.obj(d)&&(this.merged=ln({},this.merged,d))});const n=this.local=++this.guid,i=this.localQueue=this.queue;this.queue=[],i.forEach((r,o)=>{let l=r.delay,c=vu(r,["delay"]);const d=p=>{o===i.length-1&&n===this.guid&&p&&(this.idle=!0,this.props.onRest&&this.props.onRest(this.merged)),e&&e()};let f=ot.arr(c.to)||ot.fun(c.to);l?setTimeout(()=>{n===this.guid&&(f?this.runAsync(c,d):this.diff(c).start(d))},l):f?this.runAsync(c,d):this.diff(c).start(d)})}else ot.fun(e)&&this.listeners.push(e),this.props.onStart&&this.props.onStart(),nQ(this);return this}stop(e){return this.listeners.forEach(n=>n(e)),this.listeners=[],this}pause(e){return this.stop(!0),e&&iQ(this),this}runAsync(e,n){var i=this;e.delay;let r=vu(e,["delay"]);const o=this.local;let l=Promise.resolve(void 0);if(ot.arr(r.to))for(let c=0;c<r.to.length;c++){const d=c,f=ln({},r,i0(r.to[d]));ot.arr(f.config)&&(f.config=f.config[d]),l=l.then(()=>{if(o===this.guid)return new Promise(p=>this.diff(f).start(p))})}else if(ot.fun(r.to)){let c=0,d;l=l.then(()=>r.to(f=>{const p=ln({},r,i0(f));if(ot.arr(p.config)&&(p.config=p.config[c]),c++,o===this.guid)return d=new Promise(v=>this.diff(p).start(v))},function(f){return f===void 0&&(f=!0),i.stop(f)}).then(()=>d))}l.then(n)}diff(e){this.props=ln({},this.props,e);let n=this.props,i=n.from,r=i===void 0?{}:i,o=n.to,l=o===void 0?{}:o,c=n.config,d=c===void 0?{}:c,f=n.reverse,p=n.attach,v=n.reset,T=n.immediate;if(f){var b=[l,r];r=b[0],l=b[1]}this.merged=ln({},r,this.merged,l),this.hasChanged=!1;let C=p&&p(this);if(this.animations=Object.entries(this.merged).reduce((N,M)=>{let V=M[0],k=M[1],F=N[V]||{};const G=ot.num(k),K=ot.str(k)&&!k.startsWith("#")&&!/\d/.test(k)&&!$2[k],H=ot.arr(k),R=!G&&!H&&!K;let I=ot.und(r[V])?k:r[V],P=G||H||K?k:1,U=lu(d,V);C&&(P=C.animations[V].parent);let L=F.parent,z=F.interpolation,q=np(C?P.getPayload():P),xe,Ie=k;R&&(Ie=Sm({range:[0,1],output:[k,k]})(1));let ee=z&&z.getValue();const me=!ot.und(L)&&F.animatedValues.some(Z=>!Z.done),Te=!ot.equ(Ie,ee),Ae=!ot.equ(Ie,F.previous),$=!ot.equ(U,F.config);if(v||Ae&&Te||$){if(G||K)L=z=F.parent||new E_(I);else if(H)L=z=F.parent||new aQ(I);else if(R){let Z=F.interpolation&&F.interpolation.calc(F.parent.value);Z=Z!==void 0&&!v?Z:I,F.parent?(L=F.parent,L.setValue(0,!1)):L=new E_(0);const he={output:[Z,k]};F.interpolation?(z=F.interpolation,F.interpolation.updateConfig(he)):z=L.interpolate(he)}return q=np(C?P.getPayload():P),xe=np(L.getPayload()),v&&!R&&L.setValue(I,!1),this.hasChanged=!0,xe.forEach(Z=>{Z.startPosition=Z.value,Z.lastPosition=Z.value,Z.lastVelocity=me?Z.lastVelocity:void 0,Z.lastTime=me?Z.lastTime:void 0,Z.startTime=Y2(),Z.done=!1,Z.animatedStyles.clear()}),lu(T,V)&&L.setValue(R?P:k,!1),ln({},N,{[V]:ln({},F,{name:V,parent:L,interpolation:z,animatedValues:xe,toValues:q,previous:Ie,config:U,fromValues:np(L.getValue()),immediate:lu(T,V),initialVelocity:Va(U.velocity,0),clamp:Va(U.clamp,!1),precision:Va(U.precision,.01),tension:Va(U.tension,170),friction:Va(U.friction,26),mass:Va(U.mass,1),duration:U.duration,easing:Va(U.easing,Z=>Z),decay:U.decay})})}else return Te?N:(R&&(L.setValue(1,!1),z.updateConfig({output:[Ie,Ie]})),L.done=!0,this.hasChanged=!0,ln({},N,{[V]:ln({},N[V],{previous:Ie})}))},this.animations),this.hasChanged){this.configs=Object.values(this.animations),this.values={},this.interpolations={};for(let N in this.animations)this.interpolations[N]=this.animations[N].interpolation,this.values[N]=this.animations[N].interpolation.getValue()}return this}destroy(){this.stop(),this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.local=0}};const cQ=(t,e)=>{const n=B.useRef(!1),i=B.useRef(),r=ot.fun(e),o=B.useMemo(()=>{i.current&&(i.current.map(v=>v.destroy()),i.current=void 0);let p;return[new Array(t).fill().map((v,T)=>{const b=new uQ,C=r?lu(e,T,b):e[T];return T===0&&(p=C.ref),b.update(C),p||b.start(),b}),p]},[t]),l=o[0],c=o[1];i.current=l,B.useImperativeHandle(c,()=>({start:()=>Promise.all(i.current.map(p=>new Promise(v=>p.start(v)))),stop:p=>i.current.forEach(v=>v.stop(p)),get controllers(){return i.current}}));const d=B.useMemo(()=>p=>i.current.map((v,T)=>{v.update(r?lu(p,T,v):p[T]),c||v.start()}),[t]);B.useEffect(()=>{n.current?r||d(e):c||i.current.forEach(p=>p.start())}),B.useEffect(()=>(n.current=!0,()=>i.current.forEach(p=>p.destroy())),[]);const f=i.current.map(p=>p.getValues());return r?[f,d,p=>i.current.forEach(v=>v.pause(p))]:f},dQ=t=>{const e=ot.fun(t),n=cQ(1,e?t:[t]),i=n[0],r=n[1],o=n[2];return e?[i[0],r,o]:i};class fQ extends j2{constructor(e){e===void 0&&(e={}),super(),e.transform&&!(e.transform instanceof Vr)&&(e=RE.transform(e)),this.payload=e}}const wm={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Ur="[-+]?\\d*\\.?\\d+",xm=Ur+"%";function _g(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}const hQ=new RegExp("rgb"+_g(Ur,Ur,Ur)),pQ=new RegExp("rgba"+_g(Ur,Ur,Ur,Ur)),mQ=new RegExp("hsl"+_g(Ur,xm,xm)),gQ=new RegExp("hsla"+_g(Ur,xm,xm,Ur)),yQ=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,vQ=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,_Q=/^#([0-9a-fA-F]{6})$/,TQ=/^#([0-9a-fA-F]{8})$/;function EQ(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=_Q.exec(t))?parseInt(e[1]+"ff",16)>>>0:wm.hasOwnProperty(t)?wm[t]:(e=hQ.exec(t))?(Wl(e[1])<<24|Wl(e[2])<<16|Wl(e[3])<<8|255)>>>0:(e=pQ.exec(t))?(Wl(e[1])<<24|Wl(e[2])<<16|Wl(e[3])<<8|$R(e[4]))>>>0:(e=yQ.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=TQ.exec(t))?parseInt(e[1],16)>>>0:(e=vQ.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=mQ.exec(t))?(GR(jR(e[1]),ip(e[2]),ip(e[3]))|255)>>>0:(e=gQ.exec(t))?(GR(jR(e[1]),ip(e[2]),ip(e[3]))|$R(e[4]))>>>0:null}function r0(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function GR(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,o=r0(r,i,t+1/3),l=r0(r,i,t),c=r0(r,i,t-1/3);return Math.round(o*255)<<24|Math.round(l*255)<<16|Math.round(c*255)<<8}function Wl(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function jR(t){return(parseFloat(t)%360+360)%360/360}function $R(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function ip(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function KR(t){let e=EQ(t);if(e===null)return t;e=e||0;let n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,o=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${o})`}const rp=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,SQ=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,bQ=new RegExp(`(${Object.keys(wm).join("|")})`,"g"),wQ=t=>{const e=t.output.map(r=>r.replace(SQ,KR)).map(r=>r.replace(bQ,KR)),n=e[0].match(rp).map(()=>[]);e.forEach(r=>{r.match(rp).forEach((o,l)=>n[l].push(+o))});const i=e[0].match(rp).map((r,o)=>bm(ln({},t,{output:n[o]})));return r=>{let o=0;return e[0].replace(rp,()=>i[o++](r)).replace(/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,(l,c,d,f,p)=>`rgba(${Math.round(c)}, ${Math.round(d)}, ${Math.round(f)}, ${p})`)}};let wd={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};const xQ=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),AQ=["Webkit","Ms","Moz","O"];wd=Object.keys(wd).reduce((t,e)=>(AQ.forEach(n=>t[xQ(n,e)]=t[e]),t),wd);function CQ(t,e,n){return e==null||typeof e=="boolean"||e===""?"":!n&&typeof e=="number"&&e!==0&&!(wd.hasOwnProperty(t)&&wd[t])?e+"px":(""+e).trim()}const YR={};XW(t=>new fQ(t));WW(wQ);JW(wm);YW((t,e)=>{if(t.nodeType&&t.setAttribute!==void 0){const r=e.style,o=e.children,l=e.scrollTop,c=e.scrollLeft,d=vu(e,["style","children","scrollTop","scrollLeft"]),f=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter";l!==void 0&&(t.scrollTop=l),c!==void 0&&(t.scrollLeft=c),o!==void 0&&(t.textContent=o);for(let p in r)if(r.hasOwnProperty(p)){var n=p.indexOf("--")===0,i=CQ(p,r[p],n);p==="float"&&(p="cssFloat"),n?t.style.setProperty(p,i):t.style[p]=i}for(let p in d){const v=f?p:YR[p]||(YR[p]=p.replace(/([A-Z])/g,T=>"-"+T.toLowerCase()));typeof t.getAttribute(v)<"u"&&t.setAttribute(v,d[p])}return}else return!1},t=>t);const IQ=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],RQ=GW(tQ),NQ=RQ(IQ);function JR(t,e){return t.map(function(n,i){return n+e[i]})}function X2(t,e){return t.map(function(n,i){return n-e[i]})}function S_(t){return Math.hypot.apply(Math,t)}function PQ(t,e,n){var i=S_(e),r=i===0?0:1/i,o=n===0?0:1/n,l=o*i,c=e.map(function(p){return o*p}),d=e.map(function(p){return r*p}),f=S_(t);return{velocities:c,velocity:l,distance:f,direction:d}}function b_(t){return Math.sign?Math.sign(t):+(t>0)-+(t<0)||+t}function DQ(t,e,n){return Math.max(e,Math.min(t,n))}function MQ(t,e){return Math.pow(t,e*5)}function WR(t,e,n){return e===0||Math.abs(e)===1/0?MQ(t,n):t*e*n/(e+n*t)}function xd(t,e,n,i){return i===void 0&&(i=.15),i===0?DQ(t,e,n):t<e?-WR(e-t,n-e,i)+e:t>n?+WR(t-n,n-e,i)+n:t}function kQ(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function VQ(t,e,n){return e&&kQ(t.prototype,e),t}function xi(){return xi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},xi.apply(this,arguments)}function Z2(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function LQ(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function sp(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function OQ(t,e){if(t){if(typeof t=="string")return QR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QR(t,e)}}function QR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Tg(t,e){var n;if(typeof Symbol>"u"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=OQ(t))||e){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return n=t[Symbol.iterator](),n.next.bind(n)}function ek(){}function tk(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?ek:e.length===1?e[0]:function(){for(var i,r=Tg(e),o;!(o=r()).done;){var l=o.value;i=l.apply(this,arguments)||i}return i}}function Uo(t,e){if(t===void 0){if(e===void 0)throw new Error("Must define fallback value if undefined is expected");t=e}return Array.isArray(t)?t:[t,t]}function op(t){if(typeof t=="function"){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return t.apply(void 0,n)}else return t}function NE(t,e){t===void 0&&(t={});for(var n={},i=0,r=Object.entries(e);i<r.length;i++){var o=r[i],l=o[0],c=o[1];switch(typeof c){case"function":n[l]=c.call(n,t[l],l,t);break;case"object":n[l]=NE(t[l],c);break;case"boolean":c&&(n[l]=t[l]);break}}return n}var UQ=180,FQ=.15,BQ=.5,zQ=60,qQ={threshold:function(e){return e===void 0&&(e=0),Uo(e)},rubberband:function(e){switch(e===void 0&&(e=0),e){case!0:return Uo(FQ);case!1:return Uo(0);default:return Uo(e)}},enabled:function(e){return e===void 0&&(e=!0),e},triggerAllEvents:function(e){return e===void 0&&(e=!1),e},initial:function(e){return e===void 0&&(e=0),typeof e=="function"?e:Uo(e)}},nk=xi({},qQ,{axis:!0,lockDirection:function(e){return e===void 0&&(e=!1),e},bounds:function(e){if(e===void 0&&(e={}),typeof e=="function")return function(v){return nk.bounds(e(v))};var n=e,i=n.left,r=i===void 0?-1/0:i,o=n.right,l=o===void 0?1/0:o,c=n.top,d=c===void 0?-1/0:c,f=n.bottom,p=f===void 0?1/0:f;return[[r,l],[d,p]]}}),HQ=typeof window<"u"&&window.document&&window.document.createElement,GQ={enabled:function(e){return e===void 0&&(e=!0),e},domTarget:!0,window:(function(t){function e(n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e})(function(t){return t===void 0&&(t=HQ?window:void 0),t}),eventOptions:function(e){var n=e===void 0?{}:e,i=n.passive,r=i===void 0?!0:i,o=n.capture,l=o===void 0?!1:o;return{passive:r,capture:l}}},jQ=xi({},nk,{threshold:function(e,n,i){var r=i.filterTaps,o=r===void 0?!1:r,l=i.lockDirection,c=l===void 0?!1:l,d=i.axis,f=d===void 0?void 0:d,p=Uo(e,o?3:c||f?1:0);return this.filterTaps=o||p[0]+p[1]>0,p},swipeVelocity:function(e){return e===void 0&&(e=BQ),Uo(e)},swipeDistance:function(e){return e===void 0&&(e=zQ),Uo(e)},delay:function(e){switch(e===void 0&&(e=0),e){case!0:return UQ;case!1:return 0;default:return e}}});function $Q(t){return t===void 0&&(t={}),NE(t,GQ)}function KQ(t){return t===void 0&&(t={}),NE(t,jQ)}function YQ(t){var e=t.domTarget,n=t.eventOptions,i=t.window,r=t.enabled,o=LQ(t,["domTarget","eventOptions","window","enabled"]),l=$Q({domTarget:e,eventOptions:n,window:i,enabled:r});return l.drag=KQ(o),l}function $c(t){return xi({_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_lastEventType:void 0,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:ek,canceled:!1,memo:void 0,args:void 0},t)}function ik(){var t={hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1},e=$c({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,_isTap:!0,_delayedEvent:!1,_pointerId:void 0,tap:!1,swipe:[0,0]}),n=$c({da:[0,0],vdva:[0,0],origin:void 0,turns:0}),i=$c({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),r=$c({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),o=$c({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0});return{shared:t,drag:e,pinch:n,wheel:i,move:r,scroll:o}}var Ba=new Map,JQ=(function(){function t(n,i){var r=this;i===void 0&&(i=[]),this.controller=n,this.args=i,this.debounced=!0,this.setTimeout=function(o,l){var c;l===void 0&&(l=140),clearTimeout(r.controller.timeouts[r.stateKey]);for(var d=arguments.length,f=new Array(d>2?d-2:0),p=2;p<d;p++)f[p-2]=arguments[p];r.controller.timeouts[r.stateKey]=(c=window).setTimeout.apply(c,[o,l].concat(f))},this.clearTimeout=function(){clearTimeout(r.controller.timeouts[r.stateKey])},this.fireGestureHandler=function(o){if(o===void 0&&(o=!1),r.state._blocked)return r.debounced||(r.state._active=!1,r.clean()),null;if(!o&&!r.state.intentional&&!r.config.triggerAllEvents)return null;if(r.state.intentional){var l=r.state.active,c=r.state._active;r.state.active=c,r.state.first=c&&!l,r.state.last=l&&!c,r.controller.state.shared[r.ingKey]=c}var d=xi({},r.controller.state.shared,r.state,r.mapStateValues(r.state)),f=r.handler(d);return r.state.memo=f!==void 0?f:r.state.memo,r.state._active||r.clean(),d}}var e=t.prototype;return e.updateSharedState=function(i){Object.assign(this.controller.state.shared,i)},e.updateGestureState=function(i){Object.assign(this.state,i)},e.checkIntentionality=function(i,r){return{_intentional:i,_blocked:!1}},e.getMovement=function(i){var r=this.config,o=r.initial,l=r.bounds,c=r.rubberband,d=r.threshold,f=this.state,p=f._bounds,v=f._initial,T=f._active,b=f._intentional,C=f.lastOffset,N=f.movement,M=this.getInternalMovement(i,this.state),V=b[0]===!1?XR(M[0],d[0]):b[0],k=b[1]===!1?XR(M[1],d[1]):b[1],F=this.checkIntentionality([V,k],M);if(F._blocked)return xi({},F,{_movement:M,delta:[0,0]});var G=F._intentional,K=M,H,R;if(G[0]!==!1&&b[0]===!1&&(R=op(o,this.state),H=op(l,this.state),v[0]=R[0],p[0]=H[0]),G[1]!==!1&&b[1]===!1){var I,P;R=(I=R)!=null?I:op(o,this.state),H=(P=H)!=null?P:op(l,this.state),v[1]=R[1],p[1]=H[1]}var U=[G[0]!==!1?M[0]-G[0]:v[0],G[1]!==!1?M[1]-G[1]:v[1]],L=JR(U,C),z=T?c:[0,0];return U=ZR(p,JR(U,v),z),xi({},F,{intentional:G[0]!==!1||G[1]!==!1,_initial:v,_movement:K,movement:U,values:i,offset:ZR(p,L,z),delta:X2(U,N)})},e.clean=function(){this.clearTimeout()},VQ(t,[{key:"config",get:function(){return this.controller.config[this.stateKey]}},{key:"enabled",get:function(){return this.controller.config.enabled&&this.config.enabled}},{key:"state",get:function(){return this.controller.state[this.stateKey]}},{key:"handler",get:function(){return this.controller.handlers[this.stateKey]}}]),t})();function XR(t,e){return Math.abs(t)>=e?b_(t)*e:!1}function ZR(t,e,n){var i=e[0],r=e[1],o=n[0],l=n[1],c=t[0],d=c[0],f=c[1],p=t[1],v=p[0],T=p[1];return[xd(i,d,f,o),xd(r,v,T,l)]}function s0(t,e,n){var i=t.state,r=t.args,o=e.timeStamp,l=e.type,c=i.values,d=n?0:o-i.startTime;return{_lastEventType:l,event:e,timeStamp:o,elapsedTime:d,args:r,previous:c}}function WQ(t,e,n){var i=t.state.offset,r=n.timeStamp;return xi({},ik()[t.stateKey],{_active:!0,values:e,initial:e,offset:i,lastOffset:i,startTime:r})}function QQ(t,e){return function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return t.call.apply(t,[this,xi({},e,{event:n})].concat(r))}}var XQ=function(e){var n=this;this.classes=e,this.bind=function(){for(var i={},r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];for(var c=Tg(n.classes),d;!(d=c()).done;){var f=d.value;new f(n,o).addBindings(i)}for(var p=0,v=Object.entries(n.nativeRefs);p<v.length;p++){var T=v[p],b=T[0],C=T[1];w_(i,b,QQ(C,xi({},n.state.shared,{args:o})))}return n.config.domTarget?nX(n,i):iX(n,i)},this.effect=function(){return n.config.domTarget&&n.bind(),n.clean},this.clean=function(){var i=sk(n.config),r=n.config.eventOptions;i&&gf(i,rk(n.domListeners),r),Object.values(n.timeouts).forEach(clearTimeout),ZQ(n)},this.state=ik(),this.timeouts={},this.domListeners=[],this.windowListeners={}};function ZQ(t){var e=t.config,n=e.window,i=e.eventOptions,r=t.windowListeners;if(n){for(var o in r){var l=r[o];gf(n,l,i)}t.windowListeners={}}}function eX(t,e){var n=t.config,i=t.windowListeners;n.window&&(gf(n.window,i[e],n.eventOptions),delete i[e])}function tX(t,e,n){var i=t.config,r=t.windowListeners;n===void 0&&(n=[]),i.window&&(gf(i.window,r[e],i.eventOptions),ok(i.window,r[e]=n,i.eventOptions))}function nX(t,e){var n=t.config,i=t.domListeners,r=sk(n);if(!r)throw new Error("domTarget must be defined");var o=n.eventOptions;gf(r,rk(i),o);for(var l=0,c=Object.entries(e);l<c.length;l++){var d=c[l],f=d[0],p=d[1],v=f.slice(2).toLowerCase();i.push([v,tk.apply(void 0,p)])}ok(r,i,o)}function iX(t,e){for(var n=t.config,i={},r=n.eventOptions.capture?"Capture":"",o=0,l=Object.entries(e);o<l.length;o++){var c=l[o],d=c[0],f=c[1],p=Array.isArray(f)?f:[f],v=d+r;i[v]=tk.apply(void 0,p)}return i}function rk(t){return t===void 0&&(t=[]),t.splice(0,t.length)}function sk(t){var e=t.domTarget;return e&&"current"in e?e.current:e}function w_(t,e,n){t[e]||(t[e]=[]),t[e].push(n)}function ok(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var i=Tg(e),r;!(r=i()).done;){var o=r.value,l=o[0],c=o[1];t.addEventListener(l,c,n)}}function gf(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var i=Tg(e),r;!(r=i()).done;){var o=r.value,l=o[0],c=o[1];t.removeEventListener(l,c,n)}}function rX(t,e,n){n===void 0&&(n={});var i=oX(t),r=kn.useMemo(function(){return new XQ(i)},[]);return r.config=e,r.handlers=t,r.nativeRefs=n,kn.useEffect(r.effect,[]),r.config.domTarget?sX:r.bind}function sX(){}function oX(t){var e=new Set;return t.drag&&e.add(Ba.get("drag")),t.wheel&&e.add(Ba.get("wheel")),t.scroll&&e.add(Ba.get("scroll")),t.move&&e.add(Ba.get("move")),t.pinch&&e.add(Ba.get("pinch")),t.hover&&e.add(Ba.get("hover")),e}var aX=(function(t){Z2(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.getInternalMovement=function(r,o){return X2(r,o.initial)},n.checkIntentionality=function(r,o){if(r[0]===!1&&r[1]===!1)return{_intentional:r,axis:this.state.axis};var l=o.map(Math.abs),c=l[0],d=l[1],f=this.state.axis||(c>d?"x":c<d?"y":void 0);return!this.config.axis&&!this.config.lockDirection?{_intentional:r,_blocked:!1,axis:f}:f?this.config.axis&&f!==this.config.axis?{_intentional:r,_blocked:!0,axis:f}:(r[f==="x"?1:0]=!1,{_intentional:r,_blocked:!1,axis:f}):{_intentional:[!1,!1],_blocked:!1,axis:f}},n.getKinematics=function(r,o){var l=this.getMovement(r);if(!l._blocked){var c=o.timeStamp-this.state.timeStamp;Object.assign(l,PQ(l.movement,l.delta,c))}return l},n.mapStateValues=function(r){return{xy:r.values,vxvy:r.velocities}},e})(JQ);function ak(t){if("touches"in t){var e=t.targetTouches,n=t.changedTouches;return e.length>0?e:n}return null}function e1(t){var e="buttons"in t?t.buttons:0,n=ak(t),i=n&&n.length||0,r=i>0||e>0,o=t.shiftKey,l=t.altKey,c=t.metaKey,d=t.ctrlKey;return{touches:i,down:r,buttons:e,shiftKey:o,altKey:l,metaKey:c,ctrlKey:d}}function t1(t){var e=ak(t),n=e?e[0]:t,i=n.clientX,r=n.clientY;return[i,r]}var lX=3,uX=220,cX=(function(t){Z2(e,t);function e(){var i;return i=t.apply(this,arguments)||this,i.ingKey="dragging",i.stateKey="drag",i.onDragStart=function(r){!i.enabled||i.state._active||(tX(i.controller,i.stateKey,[["pointermove",i.onDragChange],["pointerup",i.onDragEnd],["pointercancel",i.onDragEnd]]),i.updateGestureState({_pointerId:r.pointerId}),i.config.delay>0?(i.state._delayedEvent=!0,"persist"in r&&typeof r.persist=="function"&&r.persist(),i.setTimeout(i.startDrag.bind(sp(i)),i.config.delay,r)):i.startDrag(r))},i.onDragChange=function(r){if(!i.state.canceled&&r.pointerId===i.state._pointerId){if(!i.state._active){i.state._delayedEvent&&(i.clearTimeout(),i.startDrag(r));return}var o=e1(r);if(!o.down){i.onDragEnd(r);return}i.updateSharedState(o);var l=t1(r),c=i.getKinematics(l,r),d=s0(sp(i),r),f=i.state._isTap,p=S_(c._movement);f&&p>=lX&&(f=!1),i.updateGestureState(xi({},d,c,{_isTap:f})),i.fireGestureHandler()}},i.onDragEnd=function(r){if(r.pointerId===i.state._pointerId){i.state._active=!1,i.updateSharedState({down:!1,buttons:0,touches:0});var o=i.state._isTap,l=i.state.velocities,c=l[0],d=l[1],f=i.state.movement,p=f[0],v=f[1],T=i.state._intentional,b=T[0],C=T[1],N=i.config.swipeVelocity,M=N[0],V=N[1],k=i.config.swipeDistance,F=k[0],G=k[1],K=xi({},s0(sp(i),r),i.getMovement(i.state.values)),H=[0,0];K.elapsedTime<uX&&(b!==!1&&Math.abs(c)>M&&Math.abs(p)>F&&(H[0]=b_(c)),C!==!1&&Math.abs(d)>V&&Math.abs(v)>G&&(H[1]=b_(d))),i.updateGestureState(xi({},K,{tap:o,swipe:H})),i.fireGestureHandler(o===!0)}},i.clean=function(){t.prototype.clean.call(sp(i)),i.state._delayedEvent=!1,eX(i.controller,i.stateKey)},i.onCancel=function(){i.state.canceled||(i.updateGestureState({canceled:!0}),i.state._active=!1,i.updateSharedState({down:!1,buttons:0,touches:0}),requestAnimationFrame(function(){return i.fireGestureHandler()}))},i.onClick=function(r){i.state._isTap||r.stopPropagation()},i}var n=e.prototype;return n.startDrag=function(r){var o=t1(r);this.updateSharedState(e1(r)),this.updateGestureState(xi({},WQ(this,o,r),s0(this,r,!0),{_pointerId:r.pointerId,cancel:this.onCancel})),this.updateGestureState(this.getMovement(o)),this.fireGestureHandler()},n.addBindings=function(r){if(w_(r,"onPointerDown",this.onDragStart),this.config.filterTaps){var o=this.controller.config.eventOptions.capture?"onClick":"onClickCapture";w_(r,o,this.onClick)}},e})(aX);function dX(t,e){var n,i=[],r,o=!1;function l(){for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];return o&&n===this&&e(d,i)||(r=t.apply(this,d),o=!0,n=this,i=d),r}return l}function Mp(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,i,r;if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!Mp(t[i],e[i]))return!1;return!0}var o;if(typeof Map=="function"&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(o=t.entries();!(i=o.next()).done;)if(!e.has(i.value[0]))return!1;for(o=t.entries();!(i=o.next()).done;)if(!Mp(i.value[1],e.get(i.value[0])))return!1;return!0}if(typeof Set=="function"&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(o=t.entries();!(i=o.next()).done;)if(!e.has(i.value[0]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,r[i]))return!1;if(typeof Element<"u"&&t instanceof Element)return!1;for(i=n;i--!==0;)if(!(r[i]==="_owner"&&t.$$typeof)&&!Mp(t[r[i]],e[r[i]]))return!1;return!0}return t!==t&&e!==e}function fX(t,e){try{return Mp(t,e)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}function hX(t,e){e===void 0&&(e={}),Ba.set("drag",cX);var n=B.useRef();return n.current||(n.current=dX(YQ,fX)),rX({drag:t},n.current(e))}/*!
* tabbable 5.3.3
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var lk=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],Am=lk.join(","),uk=typeof Element>"u",il=uk?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,x_=!uk&&Element.prototype.getRootNode?function(t){return t.getRootNode()}:function(t){return t.ownerDocument},ck=function(e,n,i){var r=Array.prototype.slice.apply(e.querySelectorAll(Am));return n&&il.call(e,Am)&&r.unshift(e),r=r.filter(i),r},dk=function t(e,n,i){for(var r=[],o=Array.from(e);o.length;){var l=o.shift();if(l.tagName==="SLOT"){var c=l.assignedElements(),d=c.length?c:l.children,f=t(d,!0,i);i.flatten?r.push.apply(r,f):r.push({scope:l,candidates:f})}else{var p=il.call(l,Am);p&&i.filter(l)&&(n||!e.includes(l))&&r.push(l);var v=l.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(l),T=!i.shadowRootFilter||i.shadowRootFilter(l);if(v&&T){var b=t(v===!0?l.children:v.children,!0,i);i.flatten?r.push.apply(r,b):r.push({scope:l,candidates:b})}else o.unshift.apply(o,l.children)}}return r},fk=function(e,n){return e.tabIndex<0&&(n||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||e.isContentEditable)&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},pX=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},hk=function(e){return e.tagName==="INPUT"},mX=function(e){return hk(e)&&e.type==="hidden"},gX=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(i){return i.tagName==="SUMMARY"});return n},yX=function(e,n){for(var i=0;i<e.length;i++)if(e[i].checked&&e[i].form===n)return e[i]},vX=function(e){if(!e.name)return!0;var n=e.form||x_(e),i=function(c){return n.querySelectorAll('input[type="radio"][name="'+c+'"]')},r;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")r=i(window.CSS.escape(e.name));else try{r=i(e.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var o=yX(r,e.form);return!o||o===e},_X=function(e){return hk(e)&&e.type==="radio"},TX=function(e){return _X(e)&&!vX(e)},n1=function(e){var n=e.getBoundingClientRect(),i=n.width,r=n.height;return i===0&&r===0},EX=function(e,n){var i=n.displayCheck,r=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var o=il.call(e,"details>summary:first-of-type"),l=o?e.parentElement:e;if(il.call(l,"details:not([open]) *"))return!0;var c=x_(e).host,d=(c==null?void 0:c.ownerDocument.contains(c))||e.ownerDocument.contains(e);if(!i||i==="full"){if(typeof r=="function"){for(var f=e;e;){var p=e.parentElement,v=x_(e);if(p&&!p.shadowRoot&&r(p)===!0)return n1(e);e.assignedSlot?e=e.assignedSlot:!p&&v!==e.ownerDocument?e=v.host:e=p}e=f}if(d)return!e.getClientRects().length}else if(i==="non-zero-area")return n1(e);return!1},SX=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var i=0;i<n.children.length;i++){var r=n.children.item(i);if(r.tagName==="LEGEND")return il.call(n,"fieldset[disabled] *")?!0:!r.contains(e)}return!0}n=n.parentElement}return!1},Cm=function(e,n){return!(n.disabled||mX(n)||EX(n,e)||gX(n)||SX(n))},A_=function(e,n){return!(TX(n)||fk(n)<0||!Cm(e,n))},bX=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},wX=function t(e){var n=[],i=[];return e.forEach(function(r,o){var l=!!r.scope,c=l?r.scope:r,d=fk(c,l),f=l?t(r.candidates):c;d===0?l?n.push.apply(n,f):n.push(c):i.push({documentOrder:o,tabIndex:d,item:r,isScope:l,content:f})}),i.sort(pX).reduce(function(r,o){return o.isScope?r.push.apply(r,o.content):r.push(o.content),r},[]).concat(n)},xX=function(e,n){n=n||{};var i;return n.getShadowRoot?i=dk([e],n.includeContainer,{filter:A_.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:bX}):i=ck(e,n.includeContainer,A_.bind(null,n)),wX(i)},AX=function(e,n){n=n||{};var i;return n.getShadowRoot?i=dk([e],n.includeContainer,{filter:Cm.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):i=ck(e,n.includeContainer,Cm.bind(null,n)),i},ap=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return il.call(e,Am)===!1?!1:A_(n,e)},CX=lk.concat("iframe").join(","),o0=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return il.call(e,CX)===!1?!1:Cm(n,e)};/*!
* focus-trap 6.9.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function i1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function r1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i1(Object(n),!0).forEach(function(i){IX(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i1(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function IX(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s1=(function(){var t=[];return{activateTrap:function(n){if(t.length>0){var i=t[t.length-1];i!==n&&i.pause()}var r=t.indexOf(n);r===-1||t.splice(r,1),t.push(n)},deactivateTrap:function(n){var i=t.indexOf(n);i!==-1&&t.splice(i,1),t.length>0&&t[t.length-1].unpause()}}})(),RX=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},NX=function(e){return e.key==="Escape"||e.key==="Esc"||e.keyCode===27},PX=function(e){return e.key==="Tab"||e.keyCode===9},o1=function(e){return setTimeout(e,0)},a1=function(e,n){var i=-1;return e.every(function(r,o){return n(r)?(i=o,!1):!0}),i},Kc=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return typeof e=="function"?e.apply(void 0,i):e},lp=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},DX=function(e,n){var i=(n==null?void 0:n.document)||document,r=r1({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},n),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},l,c=function(H,R,I){return H&&H[R]!==void 0?H[R]:r[I||R]},d=function(H){return o.containerGroups.findIndex(function(R){var I=R.container,P=R.tabbableNodes;return I.contains(H)||P.find(function(U){return U===H})})},f=function(H){var R=r[H];if(typeof R=="function"){for(var I=arguments.length,P=new Array(I>1?I-1:0),U=1;U<I;U++)P[U-1]=arguments[U];R=R.apply(void 0,P)}if(R===!0&&(R=void 0),!R){if(R===void 0||R===!1)return R;throw new Error("`".concat(H,"` was specified but was not a node, or did not return a node"))}var L=R;if(typeof R=="string"&&(L=i.querySelector(R),!L))throw new Error("`".concat(H,"` as selector refers to no known node"));return L},p=function(){var H=f("initialFocus");if(H===!1)return!1;if(H===void 0)if(d(i.activeElement)>=0)H=i.activeElement;else{var R=o.tabbableGroups[0],I=R&&R.firstTabbableNode;H=I||f("fallbackFocus")}if(!H)throw new Error("Your focus-trap needs to have at least one focusable element");return H},v=function(){if(o.containerGroups=o.containers.map(function(H){var R=xX(H,r.tabbableOptions),I=AX(H,r.tabbableOptions);return{container:H,tabbableNodes:R,focusableNodes:I,firstTabbableNode:R.length>0?R[0]:null,lastTabbableNode:R.length>0?R[R.length-1]:null,nextTabbableNode:function(U){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,z=I.findIndex(function(q){return q===U});if(!(z<0))return L?I.slice(z+1).find(function(q){return ap(q,r.tabbableOptions)}):I.slice(0,z).reverse().find(function(q){return ap(q,r.tabbableOptions)})}}}),o.tabbableGroups=o.containerGroups.filter(function(H){return H.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!f("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},T=function K(H){if(H!==!1&&H!==i.activeElement){if(!H||!H.focus){K(p());return}H.focus({preventScroll:!!r.preventScroll}),o.mostRecentlyFocusedNode=H,RX(H)&&H.select()}},b=function(H){var R=f("setReturnFocus",H);return R||(R===!1?!1:H)},C=function(H){var R=lp(H);if(!(d(R)>=0)){if(Kc(r.clickOutsideDeactivates,H)){l.deactivate({returnFocus:r.returnFocusOnDeactivate&&!o0(R,r.tabbableOptions)});return}Kc(r.allowOutsideClick,H)||H.preventDefault()}},N=function(H){var R=lp(H),I=d(R)>=0;I||R instanceof Document?I&&(o.mostRecentlyFocusedNode=R):(H.stopImmediatePropagation(),T(o.mostRecentlyFocusedNode||p()))},M=function(H){var R=lp(H);v();var I=null;if(o.tabbableGroups.length>0){var P=d(R),U=P>=0?o.containerGroups[P]:void 0;if(P<0)H.shiftKey?I=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:I=o.tabbableGroups[0].firstTabbableNode;else if(H.shiftKey){var L=a1(o.tabbableGroups,function(re){var me=re.firstTabbableNode;return R===me});if(L<0&&(U.container===R||o0(R,r.tabbableOptions)&&!ap(R,r.tabbableOptions)&&!U.nextTabbableNode(R,!1))&&(L=P),L>=0){var z=L===0?o.tabbableGroups.length-1:L-1,q=o.tabbableGroups[z];I=q.lastTabbableNode}}else{var xe=a1(o.tabbableGroups,function(re){var me=re.lastTabbableNode;return R===me});if(xe<0&&(U.container===R||o0(R,r.tabbableOptions)&&!ap(R,r.tabbableOptions)&&!U.nextTabbableNode(R))&&(xe=P),xe>=0){var Ie=xe===o.tabbableGroups.length-1?0:xe+1,ee=o.tabbableGroups[Ie];I=ee.firstTabbableNode}}}else I=f("fallbackFocus");I&&(H.preventDefault(),T(I))},V=function(H){if(NX(H)&&Kc(r.escapeDeactivates,H)!==!1){H.preventDefault(),l.deactivate();return}if(PX(H)){M(H);return}},k=function(H){var R=lp(H);d(R)>=0||Kc(r.clickOutsideDeactivates,H)||Kc(r.allowOutsideClick,H)||(H.preventDefault(),H.stopImmediatePropagation())},F=function(){if(o.active)return s1.activateTrap(l),o.delayInitialFocusTimer=r.delayInitialFocus?o1(function(){T(p())}):T(p()),i.addEventListener("focusin",N,!0),i.addEventListener("mousedown",C,{capture:!0,passive:!1}),i.addEventListener("touchstart",C,{capture:!0,passive:!1}),i.addEventListener("click",k,{capture:!0,passive:!1}),i.addEventListener("keydown",V,{capture:!0,passive:!1}),l},G=function(){if(o.active)return i.removeEventListener("focusin",N,!0),i.removeEventListener("mousedown",C,!0),i.removeEventListener("touchstart",C,!0),i.removeEventListener("click",k,!0),i.removeEventListener("keydown",V,!0),l};return l={get active(){return o.active},get paused(){return o.paused},activate:function(H){if(o.active)return this;var R=c(H,"onActivate"),I=c(H,"onPostActivate"),P=c(H,"checkCanFocusTrap");P||v(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=i.activeElement,R&&R();var U=function(){P&&v(),F(),I&&I()};return P?(P(o.containers.concat()).then(U,U),this):(U(),this)},deactivate:function(H){if(!o.active)return this;var R=r1({onDeactivate:r.onDeactivate,onPostDeactivate:r.onPostDeactivate,checkCanReturnFocus:r.checkCanReturnFocus},H);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,G(),o.active=!1,o.paused=!1,s1.deactivateTrap(l);var I=c(R,"onDeactivate"),P=c(R,"onPostDeactivate"),U=c(R,"checkCanReturnFocus"),L=c(R,"returnFocus","returnFocusOnDeactivate");I&&I();var z=function(){o1(function(){L&&T(b(o.nodeFocusedBeforeActivation)),P&&P()})};return L&&U?(U(b(o.nodeFocusedBeforeActivation)).then(z,z),this):(z(),this)},pause:function(){return o.paused||!o.active?this:(o.paused=!0,G(),this)},unpause:function(){return!o.paused||!o.active?this:(o.paused=!1,v(),F(),this)},updateContainerElements:function(H){var R=[].concat(H).filter(Boolean);return o.containers=R.map(function(I){return typeof I=="string"?i.querySelector(I):I}),o.active&&v(),this}},l.updateContainerElements(e),l};function MX(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}else return Array.from(t)}var PE=!1;if(typeof window<"u"){var l1={get passive(){PE=!0}};window.addEventListener("testPassive",null,l1),window.removeEventListener("testPassive",null,l1)}var pk=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),Bo=[],Im=!1,mk=-1,Ad=void 0,Cd=void 0,gk=function(e){return Bo.some(function(n){return!!(n.options.allowTouchMove&&n.options.allowTouchMove(e))})},Rm=function(e){var n=e||window.event;return gk(n.target)||n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)},kX=function(e){if(Cd===void 0){var n=!!e&&e.reserveScrollBarGap===!0,i=window.innerWidth-document.documentElement.clientWidth;n&&i>0&&(Cd=document.body.style.paddingRight,document.body.style.paddingRight=i+"px")}Ad===void 0&&(Ad=document.body.style.overflow,document.body.style.overflow="hidden")},VX=function(){Cd!==void 0&&(document.body.style.paddingRight=Cd,Cd=void 0),Ad!==void 0&&(document.body.style.overflow=Ad,Ad=void 0)},LX=function(e){return e?e.scrollHeight-e.scrollTop<=e.clientHeight:!1},OX=function(e,n){var i=e.targetTouches[0].clientY-mk;return gk(e.target)?!1:n&&n.scrollTop===0&&i>0||LX(n)&&i<0?Rm(e):(e.stopPropagation(),!0)},UX=function(e,n){if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!Bo.some(function(r){return r.targetElement===e})){var i={targetElement:e,options:n||{}};Bo=[].concat(MX(Bo),[i]),pk?(e.ontouchstart=function(r){r.targetTouches.length===1&&(mk=r.targetTouches[0].clientY)},e.ontouchmove=function(r){r.targetTouches.length===1&&OX(r,e)},Im||(document.addEventListener("touchmove",Rm,PE?{passive:!1}:void 0),Im=!0)):kX(n)}},FX=function(e){if(!e){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}Bo=Bo.filter(function(n){return n.targetElement!==e}),pk?(e.ontouchstart=null,e.ontouchmove=null,Im&&Bo.length===0&&(document.removeEventListener("touchmove",Rm,PE?{passive:!1}:void 0),Im=!1)):Bo.length||VX()},Ya=[],BX=function(){return Ya.some(function(t){return t.activeTargets.length>0})},zX=function(){return Ya.some(function(t){return t.skippedTargets.length>0})},u1="ResizeObserver loop completed with undelivered notifications.",qX=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:u1}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=u1),window.dispatchEvent(t)},Yd;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Yd||(Yd={}));var Ja=function(t){return Object.freeze(t)},HX=(function(){function t(e,n){this.inlineSize=e,this.blockSize=n,Ja(this)}return t})(),yk=(function(){function t(e,n,i,r){return this.x=e,this.y=n,this.width=i,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Ja(this)}return t.prototype.toJSON=function(){var e=this,n=e.x,i=e.y,r=e.top,o=e.right,l=e.bottom,c=e.left,d=e.width,f=e.height;return{x:n,y:i,top:r,right:o,bottom:l,left:c,width:d,height:f}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t})(),DE=function(t){return t instanceof SVGElement&&"getBBox"in t},vk=function(t){if(DE(t)){var e=t.getBBox(),n=e.width,i=e.height;return!n&&!i}var r=t,o=r.offsetWidth,l=r.offsetHeight;return!(o||l||t.getClientRects().length)},c1=function(t){var e;if(t instanceof Element)return!0;var n=(e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(n&&t instanceof n.Element)},GX=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Id=typeof window<"u"?window:{},up=new WeakMap,d1=/auto|scroll/,jX=/^tb|vertical/,$X=/msie|trident/i.test(Id.navigator&&Id.navigator.userAgent),Zr=function(t){return parseFloat(t||"0")},_u=function(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=!1),new HX((n?e:t)||0,(n?t:e)||0)},f1=Ja({devicePixelContentBoxSize:_u(),borderBoxSize:_u(),contentBoxSize:_u(),contentRect:new yk(0,0,0,0)}),_k=function(t,e){if(e===void 0&&(e=!1),up.has(t)&&!e)return up.get(t);if(vk(t))return up.set(t,f1),f1;var n=getComputedStyle(t),i=DE(t)&&t.ownerSVGElement&&t.getBBox(),r=!$X&&n.boxSizing==="border-box",o=jX.test(n.writingMode||""),l=!i&&d1.test(n.overflowY||""),c=!i&&d1.test(n.overflowX||""),d=i?0:Zr(n.paddingTop),f=i?0:Zr(n.paddingRight),p=i?0:Zr(n.paddingBottom),v=i?0:Zr(n.paddingLeft),T=i?0:Zr(n.borderTopWidth),b=i?0:Zr(n.borderRightWidth),C=i?0:Zr(n.borderBottomWidth),N=i?0:Zr(n.borderLeftWidth),M=v+f,V=d+p,k=N+b,F=T+C,G=c?t.offsetHeight-F-t.clientHeight:0,K=l?t.offsetWidth-k-t.clientWidth:0,H=r?M+k:0,R=r?V+F:0,I=i?i.width:Zr(n.width)-H-K,P=i?i.height:Zr(n.height)-R-G,U=I+M+K+k,L=P+V+G+F,z=Ja({devicePixelContentBoxSize:_u(Math.round(I*devicePixelRatio),Math.round(P*devicePixelRatio),o),borderBoxSize:_u(U,L,o),contentBoxSize:_u(I,P,o),contentRect:new yk(v,d,I,P)});return up.set(t,z),z},Tk=function(t,e,n){var i=_k(t,n),r=i.borderBoxSize,o=i.contentBoxSize,l=i.devicePixelContentBoxSize;switch(e){case Yd.DEVICE_PIXEL_CONTENT_BOX:return l;case Yd.BORDER_BOX:return r;default:return o}},KX=(function(){function t(e){var n=_k(e);this.target=e,this.contentRect=n.contentRect,this.borderBoxSize=Ja([n.borderBoxSize]),this.contentBoxSize=Ja([n.contentBoxSize]),this.devicePixelContentBoxSize=Ja([n.devicePixelContentBoxSize])}return t})(),Ek=function(t){if(vk(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},YX=function(){var t=1/0,e=[];Ya.forEach(function(l){if(l.activeTargets.length!==0){var c=[];l.activeTargets.forEach(function(f){var p=new KX(f.target),v=Ek(f.target);c.push(p),f.lastReportedSize=Tk(f.target,f.observedBox),v<t&&(t=v)}),e.push(function(){l.callback.call(l.observer,c,l.observer)}),l.activeTargets.splice(0,l.activeTargets.length)}});for(var n=0,i=e;n<i.length;n++){var r=i[n];r()}return t},h1=function(t){Ya.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(r){r.isActive()&&(Ek(r.target)>t?n.activeTargets.push(r):n.skippedTargets.push(r))})})},JX=function(){var t=0;for(h1(t);BX();)t=YX(),h1(t);return zX()&&qX(),t>0},a0,Sk=[],WX=function(){return Sk.splice(0).forEach(function(t){return t()})},QX=function(t){if(!a0){var e=0,n=document.createTextNode(""),i={characterData:!0};new MutationObserver(function(){return WX()}).observe(n,i),a0=function(){n.textContent="".concat(e?e--:e++)}}Sk.push(t),a0()},XX=function(t){QX(function(){requestAnimationFrame(t)})},kp=0,ZX=function(){return!!kp},eZ=250,tZ={attributes:!0,characterData:!0,childList:!0,subtree:!0},p1=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],m1=function(t){return t===void 0&&(t=0),Date.now()+t},l0=!1,nZ=(function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var n=this;if(e===void 0&&(e=eZ),!l0){l0=!0;var i=m1(e);XX(function(){var r=!1;try{r=JX()}finally{if(l0=!1,e=i-m1(),!ZX())return;r?n.run(1e3):e>0?n.run(e):n.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,n=function(){return e.observer&&e.observer.observe(document.body,tZ)};document.body?n():Id.addEventListener("DOMContentLoaded",n)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),p1.forEach(function(n){return Id.addEventListener(n,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),p1.forEach(function(n){return Id.removeEventListener(n,e.listener,!0)}),this.stopped=!0)},t})(),C_=new nZ,g1=function(t){!kp&&t>0&&C_.start(),kp+=t,!kp&&C_.stop()},iZ=function(t){return!DE(t)&&!GX(t)&&getComputedStyle(t).display==="inline"},rZ=(function(){function t(e,n){this.target=e,this.observedBox=n||Yd.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=Tk(this.target,this.observedBox,!0);return iZ(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t})(),sZ=(function(){function t(e,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=n}return t})(),cp=new WeakMap,y1=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},dp=(function(){function t(){}return t.connect=function(e,n){var i=new sZ(e,n);cp.set(e,i)},t.observe=function(e,n,i){var r=cp.get(e),o=r.observationTargets.length===0;y1(r.observationTargets,n)<0&&(o&&Ya.push(r),r.observationTargets.push(new rZ(n,i&&i.box)),g1(1),C_.schedule())},t.unobserve=function(e,n){var i=cp.get(e),r=y1(i.observationTargets,n),o=i.observationTargets.length===1;r>=0&&(o&&Ya.splice(Ya.indexOf(i),1),i.observationTargets.splice(r,1),g1(-1))},t.disconnect=function(e){var n=this,i=cp.get(e);i.observationTargets.slice().forEach(function(r){return n.unobserve(e,r.target)}),i.activeTargets.splice(0,i.activeTargets.length)},t})(),oZ=(function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");dp.connect(this,e)}return t.prototype.observe=function(e,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!c1(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");dp.observe(this,e,n)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!c1(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");dp.unobserve(this,e)},t.prototype.disconnect=function(){dp.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t})();function li(){return li=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},li.apply(this,arguments)}function Vp(t,e){if(t==null)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)e.indexOf(n=o[i])>=0||(r[n]=t[n]);return r}var Rd=typeof window<"u"?B.useLayoutEffect:B.useEffect;function Yc(t,e,n){return e=(e=+e)==e?e:0,n=(n=+n)==n?n:0,(t=+t)==t&&(t=(t=t<=n?t:n)>=e?t:e),t}function fp(t){var e=Math.round(t);if(Number.isNaN(t))throw new TypeError("Found a NaN! Check your snapPoints / defaultSnap / snapTo ");return e}var aZ={box:"border-box"};function u0(t,e){var n=e.label,i=e.enabled,r=e.resizeSourceRef,o=B.useState(0),l=o[0],c=o[1];B.useDebugValue(n+": "+l);var d=B.useCallback(function(f){c(f[0].borderBoxSize[0].blockSize),r.current="element"},[r]);return Rd(function(){if(t.current&&i){var f=new oZ(d);return f.observe(t.current,aZ),function(){f.disconnect()}}},[t,d,i]),i?l:0}function oi(t){return t===void 0&&(t=1e3),new Promise(function(e){return setTimeout(e,t)})}var v1={DRAG:{target:"#overlay.dragging",actions:"onOpenEnd"}},_1={RESIZE:{target:"#overlay.resizing",actions:"onOpenEnd"}},lZ=MW({id:"overlay",initial:"closed",context:{initialState:"CLOSED"},states:{closed:{on:{OPEN:"opening",CLOSE:void 0}},opening:{initial:"start",states:{start:{invoke:{src:"onOpenStart",onDone:"transition"}},transition:{always:[{target:"immediately",cond:"initiallyOpen"},{target:"smoothly",cond:"initiallyClosed"}]},immediately:{initial:"open",states:{open:{invoke:{src:"openImmediately",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"#overlay.opening.end"},on:li({},v1,_1)}}},smoothly:{initial:"visuallyHidden",states:{visuallyHidden:{invoke:{src:"renderVisuallyHidden",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"open"}},open:{invoke:{src:"openSmoothly",onDone:"#overlay.opening.end"},on:li({},v1,_1)}}},end:{invoke:{src:"onOpenEnd",onDone:"done"},on:{CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:li({},{CLOSE:{target:"#overlay.closing",actions:"onOpenCancel"}}),onDone:"open"},open:{on:{DRAG:"#overlay.dragging",SNAP:"snapping",RESIZE:"resizing"}},dragging:{on:{SNAP:"snapping"}},snapping:{initial:"start",states:{start:{invoke:{src:"onSnapStart",onDone:"snappingSmoothly"},entry:[kW({y:function(t,e){return e.payload.y},velocity:function(t,e){return e.payload.velocity},snapSource:function(t,e){var n=e.payload.source;return n===void 0?"custom":n}})]},snappingSmoothly:{invoke:{src:"snapSmoothly",onDone:"end"}},end:{invoke:{src:"onSnapEnd",onDone:"done"},on:{RESIZE:"#overlay.resizing",SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{SNAP:{target:"snapping",actions:"onSnapEnd"},RESIZE:{target:"#overlay.resizing",actions:"onSnapCancel"},DRAG:{target:"#overlay.dragging",actions:"onSnapCancel"},CLOSE:{target:"#overlay.closing",actions:"onSnapCancel"}},onDone:"open"},resizing:{initial:"start",states:{start:{invoke:{src:"onResizeStart",onDone:"resizingSmoothly"}},resizingSmoothly:{invoke:{src:"resizeSmoothly",onDone:"end"}},end:{invoke:{src:"onResizeEnd",onDone:"done"},on:{SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{RESIZE:{target:"resizing",actions:"onResizeEnd"},SNAP:{target:"snapping",actions:"onResizeCancel"},DRAG:{target:"#overlay.dragging",actions:"onResizeCancel"},CLOSE:{target:"#overlay.closing",actions:"onResizeCancel"}},onDone:"open"},closing:{initial:"start",states:{start:{invoke:{src:"onCloseStart",onDone:"deactivating"},on:{OPEN:{target:"#overlay.open",actions:"onCloseCancel"}}},deactivating:{invoke:{src:"deactivate",onDone:"closingSmoothly"}},closingSmoothly:{invoke:{src:"closeSmoothly",onDone:"end"}},end:{invoke:{src:"onCloseEnd",onDone:"done"},on:{OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}}},done:{type:"final"}},on:{CLOSE:void 0,OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}},onDone:"closed"}},on:{CLOSE:"closing"}},{actions:{onOpenCancel:function(t,e){},onSnapCancel:function(t,e){},onResizeCancel:function(t,e){},onCloseCancel:function(t,e){},onOpenEnd:function(t,e){},onSnapEnd:function(t,e){},onRezizeEnd:function(t,e){}},services:{onSnapStart:function(){try{return Promise.resolve(oi()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenStart:function(){try{return Promise.resolve(oi()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseStart:function(){try{return Promise.resolve(oi()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeStart:function(){try{return Promise.resolve(oi()).then(function(){})}catch(t){return Promise.reject(t)}},onSnapEnd:function(){try{return Promise.resolve(oi()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenEnd:function(){try{return Promise.resolve(oi()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseEnd:function(){try{return Promise.resolve(oi()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeEnd:function(){try{return Promise.resolve(oi()).then(function(){})}catch(t){return Promise.reject(t)}},renderVisuallyHidden:function(t,e){try{return Promise.resolve(oi()).then(function(){})}catch(n){return Promise.reject(n)}},activate:function(t,e){try{return Promise.resolve(oi()).then(function(){})}catch(n){return Promise.reject(n)}},deactivate:function(t,e){try{return Promise.resolve(oi()).then(function(){})}catch(n){return Promise.reject(n)}},openSmoothly:function(t,e){try{return Promise.resolve(oi()).then(function(){})}catch(n){return Promise.reject(n)}},openImmediately:function(t,e){try{return Promise.resolve(oi()).then(function(){})}catch(n){return Promise.reject(n)}},snapSmoothly:function(t,e){try{return Promise.resolve(oi()).then(function(){})}catch(n){return Promise.reject(n)}},resizeSmoothly:function(t,e){try{return Promise.resolve(oi()).then(function(){})}catch(n){return Promise.reject(n)}},closeSmoothly:function(t,e){try{return Promise.resolve(oi()).then(function(){})}catch(n){return Promise.reject(n)}}},guards:{initiallyClosed:function(t){return t.initialState==="CLOSED"},initiallyOpen:function(t){return t.initialState==="OPEN"}}}),uZ=["children","sibling","className","footer","header","open","initialState","lastSnapRef","initialFocusRef","onDismiss","maxHeight","defaultSnap","snapPoints","blocking","scrollLocking","style","onSpringStart","onSpringCancel","onSpringEnd","reserveScrollBarGap","expandOnContentDrag"],cZ=["velocity"],dZ=["onRest","config"],bk=oQ.default,fZ=bk.tension,hp=bk.friction,hZ=kn.forwardRef(function(t,e){var n=t.children,i=t.sibling,r=t.className,o=t.footer,l=t.header,c=t.open,d=t.initialState,f=t.lastSnapRef,p=t.initialFocusRef,v=t.onDismiss,T=t.maxHeight,b=t.defaultSnap,C=b===void 0?mZ:b,N=t.snapPoints,M=N===void 0?gZ:N,V=t.blocking,k=V===void 0||V,F=t.scrollLocking,G=F===void 0||F,K=t.style,H=t.onSpringStart,R=t.onSpringCancel,I=t.onSpringEnd,P=t.reserveScrollBarGap,U=P===void 0?k:P,L=t.expandOnContentDrag,z=L!==void 0&&L,q=Vp(t,uZ),xe=(function(){var ce=B.useState(!1),be=ce[0],we=ce[1],je=B.useState({}),ht=je[0],Je=je[1],Qe=B.useCallback(function(nt){return Je(function(it){var Me;return li({},it,((Me={})[nt]=!1,Me))}),function(){Je(function(it){var Me;return li({},it,((Me={})[nt]=!0,Me))})}},[]);return B.useEffect(function(){var nt=Object.values(ht);nt.length!==0&&nt.every(Boolean)&&we(!0)},[ht]),{ready:be,registerReady:Qe}})(),Ie=xe.ready,ee=xe.registerReady,re=B.useRef(!1),me=B.useRef(H),Te=B.useRef(R),Ae=B.useRef(I);B.useEffect(function(){me.current=H,Te.current=R,Ae.current=I},[R,H,I]);var $,Z,he=dQ(function(){return{y:0,ready:0,maxHeight:0,minSnap:0,maxSnap:0}}),se=he[0],fe=he[1],Ee=B.useRef(null),ke=B.useRef(null),Ve=B.useRef(null),yt=B.useRef(null),Rn=B.useRef(null),Ai=B.useRef(null),Nn=B.useRef(0),pi=B.useRef(),Ln=B.useRef(!1),Pn=($=B.useMemo(function(){return typeof window<"u"?window.matchMedia("(prefers-reduced-motion: reduce)"):null},[]),Z=B.useRef($==null?void 0:$.matches),B.useDebugValue(Z.current?"reduce":"no-preference"),B.useEffect(function(){var ce=function(be){Z.current=be.matches};return $==null||$.addListener(ce),function(){return $==null?void 0:$.removeListener(ce)}},[$]),Z),On=(function(ce){var be=ce.targetRef,we=ce.enabled,je=ce.reserveScrollBarGap,ht=B.useRef({activate:function(){throw new TypeError("Tried to activate scroll lock too early")},deactivate:function(){}});return B.useDebugValue(we?"Enabled":"Disabled"),B.useEffect(function(){if(!we)return ht.current.deactivate(),void(ht.current={activate:function(){},deactivate:function(){}});var Je=be.current,Qe=!1;ht.current={activate:function(){Qe||(Qe=!0,UX(Je,{allowTouchMove:function(nt){return nt.closest("[data-body-scroll-lock-ignore]")},reserveScrollBarGap:je}))},deactivate:function(){Qe&&(Qe=!1,FX(Je))}}},[we,be,je]),ht})({targetRef:ke,enabled:Ie&&G,reserveScrollBarGap:U}),Fi=(function(ce){var be=ce.targetRef,we=ce.enabled,je=B.useRef({activate:function(){throw new TypeError("Tried to activate aria hider too early")},deactivate:function(){}});return B.useDebugValue(we?"Enabled":"Disabled"),B.useEffect(function(){if(!we)return je.current.deactivate(),void(je.current={activate:function(){},deactivate:function(){}});var ht=be.current,Je=!1,Qe=[],nt=[];je.current={activate:function(){if(!Je){Je=!0;var it=ht.parentNode;document.querySelectorAll("body > *").forEach(function(Me){if(Me!==it){var Ke=Me.getAttribute("aria-hidden");Ke!==null&&Ke!=="false"||(Qe.push(Ke),nt.push(Me),Me.setAttribute("aria-hidden","true"))}})}},deactivate:function(){Je&&(Je=!1,nt.forEach(function(it,Me){var Ke=Qe[Me];Ke===null?it.removeAttribute("aria-hidden"):it.setAttribute("aria-hidden",Ke)}),Qe=[],nt=[])}}},[be,we]),je})({targetRef:Ee,enabled:Ie&&k}),Bi=(function(ce){var be=ce.targetRef,we=ce.fallbackRef,je=ce.initialFocusRef,ht=ce.enabled,Je=B.useRef({activate:function(){throw new TypeError("Tried to activate focus trap too early")},deactivate:function(){}});return B.useDebugValue(ht?"Enabled":"Disabled"),B.useEffect(function(){if(!ht)return Je.current.deactivate(),void(Je.current={activate:function(){},deactivate:function(){}});var Qe=we.current,nt=DX(be.current,{onActivate:void 0,initialFocus:je?function(){return(je==null?void 0:je.current)||Qe}:void 0,fallbackFocus:Qe,escapeDeactivates:!1,clickOutsideDeactivates:!1}),it=!1;Je.current={activate:function(){try{return it?Promise.resolve():(it=!0,Promise.resolve(nt.activate()).then(function(){return Promise.resolve(new Promise(function(Me){return setTimeout(function(){return Me(void 0)},0)})).then(function(){})}))}catch(Me){return Promise.reject(Me)}},deactivate:function(){it&&(it=!1,nt.deactivate())}}},[ht,we,je,be]),Je})({targetRef:Ee,fallbackRef:Ai,initialFocusRef:p||void 0,enabled:Ie&&k&&p!==!1}),Ci=(function(ce){var be=ce.getSnapPoints,we=ce.heightRef,je=ce.lastSnapRef,ht=ce.ready,Je=(function(Dt){var pt=Dt.contentRef,Dn=Dt.controlledMaxHeight,pe=Dt.footerEnabled,Re=Dt.footerRef,tt=Dt.headerEnabled,mt=Dt.headerRef,Tn=Dt.registerReady,xr=Dt.resizeSourceRef,Kn=B.useMemo(function(){return Tn("contentHeight")},[Tn]),Rt=(function(Ar,sr,or){var Ii=B.useMemo(function(){return sr("maxHeight")},[sr]),ar=B.useState(function(){return fp(Ar)||typeof window<"u"?window.innerHeight:0}),Gr=ar[0],yi=ar[1],Wt=Gr>0,Cr=B.useRef(0);return B.useDebugValue(Ar?"controlled":"auto"),B.useEffect(function(){Wt&&Ii()},[Wt,Ii]),Rd(function(){if(Ar)return yi(fp(Ar)),void(or.current="maxheightprop");var Ir=function(){Cr.current||(Cr.current=requestAnimationFrame(function(){yi(window.innerHeight),or.current="window",Cr.current=0}))};return window.addEventListener("resize",Ir),yi(window.innerHeight),or.current="window",Ii(),function(){window.removeEventListener("resize",Ir),cancelAnimationFrame(Cr.current)}},[Ar,Ii,or]),Gr})(Dn,Tn,xr),Zt=u0(mt,{label:"headerHeight",enabled:tt,resizeSourceRef:xr}),qi=u0(pt,{label:"contentHeight",enabled:!0,resizeSourceRef:xr}),rr=u0(Re,{label:"footerHeight",enabled:pe,resizeSourceRef:xr}),Hi=Math.min(Rt-Zt-rr,qi)+Zt+rr;B.useDebugValue("minHeight: "+Hi);var ca=qi>0;return B.useEffect(function(){ca&&Kn()},[ca,Kn]),{maxHeight:Rt,minHeight:Hi,headerHeight:Zt,footerHeight:rr}})({contentRef:ce.contentRef,controlledMaxHeight:ce.controlledMaxHeight,footerEnabled:ce.footerEnabled,footerRef:ce.footerRef,headerEnabled:ce.headerEnabled,headerRef:ce.headerRef,registerReady:ce.registerReady,resizeSourceRef:ce.resizeSourceRef}),Qe=Je.maxHeight,nt=Je.minHeight,it=Je.headerHeight,Me=Je.footerHeight,Ke=(function(Dt,pt){var Dn=[].concat(Dt).map(fp).reduce(function(mt,Tn){return mt.add(Yc(Tn,0,pt)),mt},new Set),pe=Array.from(Dn),Re=Math.min.apply(Math,pe);if(Number.isNaN(Re))throw new TypeError("minSnap is NaN");var tt=Math.max.apply(Math,pe);if(Number.isNaN(tt))throw new TypeError("maxSnap is NaN");return{snapPoints:pe,minSnap:Re,maxSnap:tt}})(ht?be({height:we.current,footerHeight:Me,headerHeight:it,minHeight:nt,maxHeight:Qe}):[0],Qe),hn=Ke.snapPoints,$n=Ke.minSnap,Xt=Ke.maxSnap;return B.useDebugValue("minSnap: "+$n+", maxSnap:"+Xt),{minSnap:$n,maxSnap:Xt,findSnap:function(Dt){var pt=fp(typeof Dt=="function"?Dt({footerHeight:Me,headerHeight:it,height:we.current,minHeight:nt,maxHeight:Qe,snapPoints:hn,lastSnap:je.current}):Dt);return hn.reduce(function(Dn,pe){return Math.abs(pe-pt)<Math.abs(Dn-pt)?pe:Dn},$n)},maxHeight:Qe}})({contentRef:Ve,controlledMaxHeight:T,footerEnabled:!!o,footerRef:Rn,getSnapPoints:M,headerEnabled:l!==!1,headerRef:yt,heightRef:Nn,lastSnapRef:f,ready:Ie,registerReady:ee,resizeSourceRef:pi}),mi=Ci.minSnap,gi=Ci.maxSnap,_n=Ci.maxHeight,zi=Ci.findSnap,xt=B.useRef(_n),zt=B.useRef(mi),Ge=B.useRef(gi),qt=B.useRef(zi),rn=B.useRef(0);Rd(function(){xt.current=_n,Ge.current=gi,zt.current=mi,qt.current=zi,rn.current=zi(C)},[zi,C,_n,gi,mi]);var Ot=B.useCallback(function(ce){var be=ce.onRest,we=ce.config,je=(we=we===void 0?{}:we).velocity,ht=je===void 0?1:je,Je=Vp(we,cZ),Qe=Vp(ce,dZ);return new Promise(function(nt){return fe(li({},Qe,{config:li({velocity:ht},Je,{mass:1,tension:fZ,friction:Math.max(hp,hp+(hp-hp*ht))}),onRest:function(){var it=[].slice.call(arguments);nt.apply(void 0,it),be==null||be.apply(void 0,it)}}))})},[fe]),Un=HW(lZ,{devTools:!1,actions:{onOpenCancel:B.useCallback(function(){return Te.current==null?void 0:Te.current({type:"OPEN"})},[]),onSnapCancel:B.useCallback(function(ce){return Te.current==null?void 0:Te.current({type:"SNAP",source:ce.snapSource})},[]),onCloseCancel:B.useCallback(function(){return Te.current==null?void 0:Te.current({type:"CLOSE"})},[]),onResizeCancel:B.useCallback(function(){return Te.current==null?void 0:Te.current({type:"RESIZE",source:pi.current})},[]),onOpenEnd:B.useCallback(function(){return Ae.current==null?void 0:Ae.current({type:"OPEN"})},[]),onSnapEnd:B.useCallback(function(ce,be){return Ae.current==null?void 0:Ae.current({type:"SNAP",source:ce.snapSource})},[]),onResizeEnd:B.useCallback(function(){return Ae.current==null?void 0:Ae.current({type:"RESIZE",source:pi.current})},[])},context:{initialState:d},services:{onSnapStart:B.useCallback(function(ce,be){try{return Promise.resolve(me.current==null?void 0:me.current({type:"SNAP",source:be.payload.source||"custom"}))}catch(we){return Promise.reject(we)}},[]),onOpenStart:B.useCallback(function(){try{return Promise.resolve(me.current==null?void 0:me.current({type:"OPEN"}))}catch(ce){return Promise.reject(ce)}},[]),onCloseStart:B.useCallback(function(){try{return Promise.resolve(me.current==null?void 0:me.current({type:"CLOSE"}))}catch(ce){return Promise.reject(ce)}},[]),onResizeStart:B.useCallback(function(){try{return Promise.resolve(me.current==null?void 0:me.current({type:"RESIZE",source:pi.current}))}catch(ce){return Promise.reject(ce)}},[]),onSnapEnd:B.useCallback(function(ce,be){try{return Promise.resolve(Ae.current==null?void 0:Ae.current({type:"SNAP",source:ce.snapSource}))}catch(we){return Promise.reject(we)}},[]),onOpenEnd:B.useCallback(function(){try{return Promise.resolve(Ae.current==null?void 0:Ae.current({type:"OPEN"}))}catch(ce){return Promise.reject(ce)}},[]),onCloseEnd:B.useCallback(function(){try{return Promise.resolve(Ae.current==null?void 0:Ae.current({type:"CLOSE"}))}catch(ce){return Promise.reject(ce)}},[]),onResizeEnd:B.useCallback(function(){try{return Promise.resolve(Ae.current==null?void 0:Ae.current({type:"RESIZE",source:pi.current}))}catch(ce){return Promise.reject(ce)}},[]),renderVisuallyHidden:B.useCallback(function(ce,be){try{return Promise.resolve(Ot({y:rn.current,ready:0,maxHeight:xt.current,maxSnap:Ge.current,minSnap:rn.current,immediate:!0})).then(function(){})}catch(we){return Promise.reject(we)}},[Ot]),activate:B.useCallback(function(ce,be){try{return re.current=!0,Promise.resolve(Promise.all([On.current.activate(),Bi.current.activate(),Fi.current.activate()])).then(function(){})}catch(we){return Promise.reject(we)}},[Fi,Bi,On]),deactivate:B.useCallback(function(){try{return On.current.deactivate(),Bi.current.deactivate(),Fi.current.deactivate(),re.current=!1,Promise.resolve()}catch(ce){return Promise.reject(ce)}},[Fi,Bi,On]),openImmediately:B.useCallback(function(){try{return Nn.current=rn.current,Promise.resolve(Ot({y:rn.current,ready:1,maxHeight:xt.current,maxSnap:Ge.current,minSnap:rn.current,immediate:!0})).then(function(){})}catch(ce){return Promise.reject(ce)}},[Ot]),openSmoothly:B.useCallback(function(){try{return Promise.resolve(Ot({y:0,ready:1,maxHeight:xt.current,maxSnap:Ge.current,minSnap:rn.current,immediate:!0})).then(function(){return Nn.current=rn.current,Promise.resolve(Ot({y:rn.current,ready:1,maxHeight:xt.current,maxSnap:Ge.current,minSnap:rn.current,immediate:Pn.current})).then(function(){})})}catch(ce){return Promise.reject(ce)}},[Ot,Pn]),snapSmoothly:B.useCallback(function(ce,be){try{var we=qt.current(ce.y);return Nn.current=we,f.current=we,Promise.resolve(Ot({y:we,ready:1,maxHeight:xt.current,maxSnap:Ge.current,minSnap:zt.current,immediate:Pn.current,config:{velocity:ce.velocity}})).then(function(){})}catch(je){return Promise.reject(je)}},[Ot,f,Pn]),resizeSmoothly:B.useCallback(function(){try{var ce=qt.current(Nn.current);return Nn.current=ce,f.current=ce,Promise.resolve(Ot({y:ce,ready:1,maxHeight:xt.current,maxSnap:Ge.current,minSnap:zt.current,immediate:pi.current!=="element"||Pn.current})).then(function(){})}catch(be){return Promise.reject(be)}},[Ot,f,Pn]),closeSmoothly:B.useCallback(function(ce,be){try{return Ot({minSnap:Nn.current,immediate:!0}),Nn.current=0,Promise.resolve(Ot({y:0,maxHeight:xt.current,maxSnap:Ge.current,immediate:Pn.current})).then(function(){return Promise.resolve(Ot({ready:0,immediate:!0})).then(function(){})})}catch(we){return Promise.reject(we)}},[Ot,Pn])}}),We=Un[0],fn=Un[1];B.useEffect(function(){Ie&&fn(c?"OPEN":"CLOSE")},[c,fn,Ie]),Rd(function(){(_n||gi||mi)&&fn("RESIZE")},[_n,gi,mi,fn]),B.useEffect(function(){return function(){On.current.deactivate(),Bi.current.deactivate(),Fi.current.deactivate()}},[Fi,Bi,On]),B.useImperativeHandle(e,function(){return{snapTo:function(ce,be){var we=be===void 0?{}:be,je=we.velocity,ht=je===void 0?1:je,Je=we.source,Qe=Je===void 0?"custom":Je;fn("SNAP",{payload:{y:qt.current(ce),velocity:ht,source:Qe}})},get height(){return Nn.current}}},[fn]),B.useEffect(function(){var ce=ke.current,be=function(je){Ln.current&&je.preventDefault()},we=function(je){ce.scrollTop<0&&(requestAnimationFrame(function(){ce.style.overflow="hidden",ce.scrollTop=0,ce.style.removeProperty("overflow")}),je.preventDefault())};return z&&(ce.addEventListener("scroll",be),ce.addEventListener("touchmove",be),ce.addEventListener("touchstart",we)),function(){ce.removeEventListener("scroll",be),ce.removeEventListener("touchmove",be),ce.removeEventListener("touchstart",we)}},[z,ke]);var Fn=hX(function(ce){var be=ce.args,we=(be=be===void 0?[]:be)[0],je=(we=we===void 0?{}:we).closeOnTap,ht=je!==void 0&&je,Je=we.isContentDragging,Qe=Je!==void 0&&Je,nt=ce.cancel,it=ce.direction[1],Me=ce.down,Ke=ce.first,hn=ce.last,$n=ce.memo,Xt=$n===void 0?se.y.getValue():$n,Dt=ce.tap,pt=ce.velocity,Dn=-1*ce.movement[1];if(!re.current)return nt(),Xt;if(v&&ht&&Dt)return nt(),setTimeout(function(){return v()},0),Xt;if(Dt)return Xt;var pe=Xt+Dn,Re=Dn*pt,tt=Math.max(zt.current,Math.min(Ge.current,pe+2*Re));if(!Me&&v&&it>0&&pe+Re<zt.current/2)return nt(),v(),Xt;var mt=Me?v||zt.current!==Ge.current?xd(pe,v?0:zt.current,Ge.current,.55):pe<zt.current?xd(pe,zt.current,2*Ge.current,.55):xd(pe,zt.current/2,Ge.current,.55):tt;return z&&Qe?(mt>=Ge.current&&(mt=Ge.current),Xt===Ge.current&&ke.current.scrollTop>0&&(mt=Ge.current),Ln.current=mt<Ge.current):Ln.current=!1,Ke&&fn("DRAG"),hn?(fn("SNAP",{payload:{y:mt,velocity:pt>.05?pt:1,source:"dragging"}}),Xt):(fe({y:mt,ready:1,maxHeight:xt.current,maxSnap:Ge.current,minSnap:zt.current,immediate:!0,config:{velocity:pt}}),Xt)},{filterTaps:!0});if(Number.isNaN(Ge.current))throw new TypeError("maxSnapRef is NaN!!");if(Number.isNaN(zt.current))throw new TypeError("minSnapRef is NaN!!");var et=(function(ce){var be,we=ce.spring,je=Jl([we.y,we.maxHeight],function(Me,Ke){return Math.round(Yc(Ke-Me,0,16))+"px"}),ht=Jl([we.y,we.minSnap,we.maxSnap],function(Me,Ke,hn){return Yc(Me,Ke,hn)+"px"}),Je=Jl([we.y,we.minSnap,we.maxSnap],function(Me,Ke,hn){return Me<Ke?Ke-Me+"px":Me>hn?hn-Me+"px":"0px"}),Qe=Jl([we.y,we.maxSnap],function(Me,Ke){return Me>=Ke?Math.ceil(Me-Ke):0}),nt=Jl([we.y,we.minSnap],function(Me,Ke){if(!Ke)return 0;var hn=Math.max(Ke/2-45,0);return Yc((Me-hn)*(1/(Math.min(Ke/2+45,Ke)-hn)+0),0,1)}),it=Jl([we.y,we.minSnap],function(Me,Ke){return Ke?Yc(Me/Ke,0,1):0});return(be={})["--rsbs-content-opacity"]=nt,be["--rsbs-backdrop-opacity"]=it,be["--rsbs-antigap-scale-y"]=Qe,be["--rsbs-overlay-translate-y"]=Je,be["--rsbs-overlay-rounded"]=je,be["--rsbs-overlay-h"]=ht,be})({spring:se});return kn.createElement(NQ.div,li({},q,{"data-rsbs-root":!0,"data-rsbs-state":pZ.find(We.matches),"data-rsbs-is-blocking":k,"data-rsbs-is-dismissable":!!v,"data-rsbs-has-header":!!l,"data-rsbs-has-footer":!!o,className:r,ref:Ee,style:li({},et,K,{opacity:se.ready})}),i,k&&kn.createElement("div",li({key:"backdrop","data-rsbs-backdrop":!0},Fn({closeOnTap:!0}))),kn.createElement("div",{key:"overlay","aria-modal":"true",role:"dialog","data-rsbs-overlay":!0,tabIndex:-1,ref:Ai,onKeyDown:function(ce){ce.key==="Escape"&&(ce.stopPropagation(),v&&v())}},l!==!1&&kn.createElement("div",li({key:"header","data-rsbs-header":!0,ref:yt},Fn()),l),kn.createElement("div",li({key:"scroll","data-rsbs-scroll":!0,ref:ke},z?Fn({isContentDragging:!0}):{}),kn.createElement("div",{"data-rsbs-content":!0,ref:Ve},n)),o&&kn.createElement("div",li({key:"footer",ref:Rn,"data-rsbs-footer":!0},Fn()),o)))}),pZ=["closed","opening","open","closing","dragging","snapping","resizing"];function mZ(t){var e=t.lastSnap;return e??Math.min.apply(Math,t.snapPoints)}function gZ(t){return t.minHeight}var yZ=["onSpringStart","onSpringEnd","skipInitialTransition"],Eg=B.forwardRef(function(t,e){var n=t.onSpringStart,i=t.onSpringEnd,r=t.skipInitialTransition,o=Vp(t,yZ),l=B.useState(!1),c=l[0],d=l[1],f=B.useRef(),p=B.useRef(null),v=B.useRef(r&&o.open?"OPEN":"CLOSED");Rd(function(){if(o.open)return cancelAnimationFrame(f.current),d(!0),function(){v.current="CLOSED"}},[o.open]);var T=B.useCallback(function(C){return Promise.resolve(n==null?void 0:n(C)).then(function(){C.type==="OPEN"&&cancelAnimationFrame(f.current)})},[n]),b=B.useCallback(function(C){return Promise.resolve(i==null?void 0:i(C)).then(function(){C.type==="CLOSE"&&(f.current=requestAnimationFrame(function(){return d(!1)}))})},[i]);return c?kn.createElement(UJ,{"data-rsbs-portal":!0},kn.createElement(hZ,li({},o,{lastSnapRef:p,ref:e,initialState:v.current,onSpringStart:T,onSpringEnd:b}))):null});const vZ=({open:t,clothingItems:e,clothingSets:n,onGenerate:i,isGenerating:r,suggestedOutfits:o,onClose:l,weatherInfo:c,weatherError:d,favoriteOutfits:f,onToggleFavorite:p,onGenerateVisual:v,generatingVisualFor:T,selectedOutfit:b,onSelectOutfit:C})=>{const N=document.documentElement.classList.contains("dark"),M=B.useRef(null);return B.useEffect(()=>{!r&&o.length>0&&M.current&&M.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[r,o.length]),S.jsx(Eg,{open:t,onDismiss:l,className:N?"dark":"",header:S.jsxs("div",{className:"flex items-center justify-between w-full",children:[S.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Crateur de Tenues"}),S.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:V})=>V*.65,snapPoints:({minHeight:V,maxHeight:k})=>[V,k*.65,k*.85],children:S.jsxs("div",{className:"p-6 space-y-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[S.jsx(x2,{clothingItems:e,clothingSets:n,onGenerate:i,isGenerating:r,weatherInfo:c,weatherError:d}),r&&S.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[S.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),S.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"L'IA compose vos tenues..."})]}),S.jsx("div",{ref:M,children:o.length>0&&S.jsx(ym,{outfits:o,allClothingItems:e,allClothingSets:n,favoriteOutfits:f,onToggleFavorite:p,onGenerateVisual:v,generatingVisualFor:T,selectedOutfit:b,onSelectOutfit:C})})]})})},_Z=({open:t,clothingItems:e,clothingSets:n,onGeneratePlan:i,isGenerating:r,vacationPlan:o,onCreateSet:l,onClose:c})=>{const d=document.documentElement.classList.contains("dark");return S.jsx(Eg,{open:t,onDismiss:c,className:d?"dark":"",header:S.jsxs("div",{className:"flex items-center justify-between w-full",children:[S.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Planificateur de Valise"}),S.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:f})=>f*.6,snapPoints:({maxHeight:f})=>[f*.55,f*.85],children:S.jsxs("div",{className:"p-6 space-y-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow min-h-[45vh]",children:[S.jsx(A2,{clothingItems:e,clothingSets:n,onGeneratePlan:i,isGenerating:r}),r&&S.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[S.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),S.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"Prparation de votre valise..."})]}),o&&S.jsx(C2,{plan:o,allClothingItems:e,allClothingSets:n,onCreateSet:l})]})})},TZ=({open:t,clothingItems:e,clothingSets:n,onClose:i,onCreateSet:r})=>{const[o,l]=B.useState(new Set),c=new Set(n.flatMap(b=>b.itemIds)),f=e.filter(b=>!c.has(b.id)).reduce((b,C)=>(b[C.category]||(b[C.category]=[]),b[C.category].push(C),b),{}),p=b=>{l(C=>{const N=new Set(C);return N.has(b)?N.delete(b):N.add(b),N})},v=()=>{if(o.size<2){alert("Veuillez slectionner au moins 2 articles.");return}const b=window.prompt("Donnez un nom  cet ensemble :");b&&r(b,Array.from(o))},T=document.documentElement.classList.contains("dark");return S.jsx(Eg,{open:t,onDismiss:i,className:T?"dark":"",header:S.jsxs("div",{className:"flex items-center justify-between w-full",children:[S.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Crer un ensemble"}),S.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),footer:o.size>0&&S.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 bg-white dark:bg-raisin-black",children:S.jsxs("button",{onClick:v,disabled:o.size<2,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600",children:[S.jsx(cg,{}),"Lier ",o.size," article",o.size>1?"s":""]})}),defaultSnap:({maxHeight:b})=>b*.6,snapPoints:({maxHeight:b})=>[b*.6,b*.85],children:S.jsxs("div",{className:"p-4 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[S.jsx("p",{className:"text-sm text-center text-gray-500 dark:text-gray-400 mb-4",children:"Slectionnez les articles que vous souhaitez lier (ex: une veste et son pantalon)."}),S.jsx("div",{className:"space-y-4",children:Object.keys(f).map(b=>f[b].length>0&&S.jsxs("div",{children:[S.jsx("h3",{className:"font-semibold text-lg mb-2",children:b}),S.jsx("div",{className:"grid grid-cols-3 gap-3",children:f[b].map(C=>{const N=o.has(C.id);return S.jsxs("button",{onClick:()=>p(C.id),className:"relative rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform border-2",style:{borderColor:N?"#D4AF37":"transparent"},children:[N&&S.jsx("div",{className:"absolute top-1 right-1 p-0.5 bg-gold rounded-full text-onyx z-10",children:S.jsx(zT,{})}),S.jsx("div",{className:"aspect-square",children:S.jsx("img",{src:C.imageSrc,alt:C.analysis,className:"w-full h-full object-cover"})}),S.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),S.jsx("p",{className:"absolute bottom-1 left-1 right-1 text-white text-xs font-medium line-clamp-2 p-1",children:C.analysis})]},C.id)})})]},b))})]})})},EZ=(t,e)=>{const n=aa(ir,"users",t,"items"),i=Zm(n);return ng(i,o=>{const l=o.docs.map(c=>({id:c.id,...c.data()}));e(l)},o=>{console.error("Erreur (items listener):",o)})},SZ=async(t,e)=>{try{const n=aa(ir,"users",t,"items");return(await tg(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'un vtement:",n),n}},T1=async(t,e,n)=>{try{const i=Uu(ir,"users",t,"items",e);await TF(i,n)}catch(i){throw console.error("Erreur lors de la mise  jour d'un vtement:",i),i}},E1=async(t,e)=>{try{const n=Uu(ir,"users",t,"items",e);await bT(n)}catch(n){throw console.error("Erreur lors de la suppression d'un vtement:",n),n}},bZ=(t,e)=>{const n=aa(ir,"users",t,"favoriteOutfits"),i=Zm(n);return ng(i,o=>{const l=o.docs.map(c=>({id:c.id,...c.data()}));e(l)},o=>{console.error("Erreur (favoriteOutfits listener):",o)})},wZ=async(t,e)=>{try{const n=aa(ir,"users",t,"favoriteOutfits");return(await tg(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'une tenue favorite:",n),n}},xZ=async(t,e)=>{try{const n=Uu(ir,"users",t,"favoriteOutfits",e);await bT(n)}catch(n){throw console.error("Erreur lors de la suppression d'une tenue favorite:",n),n}},AZ=(t,e)=>{const n=aa(ir,"users",t,"sets"),i=Zm(n);return ng(i,o=>{const l=o.docs.map(c=>({id:c.id,...c.data()}));e(l)},o=>{console.error("Erreur (sets listener):",o)})},CZ=async(t,e)=>{try{const n=aa(ir,"users",t,"sets");return(await tg(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'un ensemble:",n),n}},IZ=async(t,e)=>{try{const n=Uu(ir,"users",t,"sets",e);await bT(n)}catch(n){throw console.error("Erreur lors de la suppression d'un ensemble:",n),n}},RZ=async(t,e,n,i)=>{try{const r=aa(ir,"users",t,"wearHistory");return(await tg(r,{outfitTitle:e,outfitDescription:n,itemIds:i,wornAt:Date.now()})).id}catch(r){throw console.error("Erreur lors de l'ajout de l'historique de port:",r),r}},NZ=(t,e)=>{const n=aa(ir,"users",t,"wearHistory"),i=Date.now()-720*60*60*1e3,r=Zm(n,mF("wornAt",">=",i));return ng(r,l=>{const c=l.docs.map(d=>({id:d.id,...d.data()}));e(c)},l=>{console.error("Erreur (wearHistory listener):",l)})},PZ=async(t,e,n)=>{try{const i=hD(gD,`users/${t}/clothing/${n}.jpg`);return await IB(i,e,"data_url"),await fD(i)}catch(i){throw console.error("Erreur upload vtement:",i),i}},DZ=async(t,e)=>{try{const n=await MZ(e,1024),i=hD(gD,`users/${t}/profile/model_photo.jpg`);return await CB(i,n),await fD(i)}catch(n){throw console.error("Erreur upload photo profil:",n),n}},MZ=(t,e)=>new Promise((n,i)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=o=>{var c;const l=new Image;l.src=(c=o.target)==null?void 0:c.result,l.onload=()=>{const d=e/l.width,f=document.createElement("canvas");f.width=e,f.height=l.height*d;const p=f.getContext("2d");p?(p.drawImage(l,0,0,f.width,f.height),f.toBlob(v=>{v?n(v):i(new Error("Blob creation failed"))},"image/jpeg",.85)):i(new Error("Canvas error"))}},r.onerror=o=>i(o)}),wk=B.createContext(void 0),kZ=t=>new Promise((e,n)=>{const i=new FileReader;i.readAsDataURL(t),i.onload=r=>{var l;const o=new Image;o.src=(l=r.target)==null?void 0:l.result,o.onload=()=>{const c=document.createElement("canvas"),d=800,f=d/o.width;c.width=d,c.height=o.height*f;const p=c.getContext("2d");p?(p.drawImage(o,0,0,c.width,c.height),e(c.toDataURL("image/jpeg",.7))):n(new Error("Canvas context error"))},o.onerror=c=>n(c)},i.onerror=r=>n(r)}),VZ=({children:t,user:e})=>{const[n,i]=B.useState([]),[r,o]=B.useState([]),[l,c]=B.useState([]),[d,f]=B.useState([]),[p,v]=B.useState(localStorage.getItem("dressmup_user_model_url")),[T,b]=B.useState(!1),[C,N]=B.useState(!0);B.useEffect(()=>{p&&localStorage.setItem("dressmup_user_model_url",p)},[p]),B.useEffect(()=>{if(e){const L=EZ(e.uid,Ie=>{i(Ie),N(!1)}),z=AZ(e.uid,Ie=>{o(Ie)}),q=bZ(e.uid,Ie=>{c(Ie)}),xe=NZ(e.uid,Ie=>{f(Ie)});return()=>{L(),z(),q(),xe()}}else i([]),o([]),c([]),f([]),N(!1)},[e]);const M=B.useCallback(async L=>{if(e)try{const z=await DZ(e.uid,L);v(z)}catch(z){throw console.error("Erreur mise  jour photo modle:",z),z}},[e]),V=B.useCallback(async L=>{if(!(L.length===0||!e)){b(!0);try{const z=L.map(re=>kZ(re)),q=await Promise.all(z),xe=q.map(re=>re.split(",")[1]),Ie=await D7(xe),ee=Math.min(Ie.length,L.length);for(let re=0;re<ee;re++){const me=Ie[re];let Te="";try{Te=await SZ(e.uid,{...me,createdAt:Date.now()});const Ae=await PZ(e.uid,q[re],Te);await T1(e.uid,Te,{imageSrc:Ae})}catch(Ae){console.error(`chec pour ${L[re].name}.`,Ae),Te&&await E1(e.uid,Te)}}}catch(z){console.error("Erreur lot:",z)}finally{b(!1)}}},[e]),k=B.useCallback(async L=>{e&&await E1(e.uid,L)},[e]),F=B.useCallback(async L=>{e&&await T1(e.uid,L.id,L)},[e]),G=B.useCallback(async L=>{if(!e)return;const{id:z,...q}=L;await wZ(e.uid,q)},[e]),K=B.useCallback(async L=>{e&&await xZ(e.uid,L)},[e]),H=B.useCallback(async(L,z)=>{var Ie;if(!e)return;const q=((Ie=n.find(ee=>ee.id===z[0]))==null?void 0:Ie.imageSrc)||"",xe={name:L,itemIds:z,imageSrc:q};await CZ(e.uid,xe)},[e,n]),R=B.useCallback(async L=>{e&&await IZ(e.uid,L)},[e]),I=B.useCallback(async(L,z,q)=>{e&&await RZ(e.uid,L,z,q)},[e]),P=B.useCallback(L=>d.filter(z=>z.itemIds.includes(L)).length,[d]),U={clothingItems:n,clothingSets:r,favoriteOutfits:l,wearHistory:d,userModelImage:p,setUserModelImage:v,updateUserModelPhoto:M,isAnalyzing:T,analyzeClothingItems:V,deleteClothingItem:k,updateClothingItem:F,createClothingSet:H,deleteClothingSet:R,addFavoriteOutfit:G,deleteFavoriteOutfit:K,recordOutfitWear:I,getItemWearCount:P,loading:C};return S.jsx(wk.Provider,{value:U,children:t})},xk=()=>{const t=B.useContext(wk);if(t===void 0)throw new Error("useWardrobe doit tre utilis  l'intrieur d'un WardrobeProvider");return t},LZ=({onClose:t})=>{const{userModelImage:e,updateUserModelPhoto:n}=xk(),i=B.useRef(null),[r,o]=B.useState(!1),[l,c]=B.useState(e),d=async f=>{var T;const p=(T=f.target.files)==null?void 0:T[0];if(!p)return;const v=URL.createObjectURL(p);c(v),o(!0);try{await n(p)}catch{alert("Erreur lors de l'envoi de la photo.")}finally{o(!1)}};return S.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[100] p-4",onClick:t,children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-md w-full p-6",onClick:f=>f.stopPropagation(),children:[S.jsx("h2",{className:"text-2xl font-serif font-bold text-center mb-2 text-gold",children:"Mon Mannequin Virtuel"}),S.jsx("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400 mb-6",children:"Ajoutez une photo de vous (de plain-pied idalement) pour essayer vos tenues virtuellement."}),S.jsxs("div",{onClick:()=>{var f;return!r&&((f=i.current)==null?void 0:f.click())},className:"relative aspect-[3/4] bg-gray-100 dark:bg-onyx rounded-xl overflow-hidden cursor-pointer border-2 border-dashed border-gray-300 dark:border-gray-700 hover:border-gold transition-colors group",children:[S.jsx("input",{ref:i,type:"file",accept:"image/*",className:"hidden",onChange:d,disabled:r}),l?S.jsx("img",{src:l,alt:"Mon mannequin",className:"w-full h-full object-cover"}):S.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-400",children:[S.jsx(lm,{}),S.jsx("span",{className:"mt-2 text-sm font-medium",children:"Ajouter une photo"})]}),r&&S.jsxs("div",{className:"absolute inset-0 bg-black/50 flex flex-col items-center justify-center text-white",children:[S.jsx(FT,{className:"h-8 w-8 text-white mb-2"}),S.jsx("span",{className:"text-sm font-medium",children:"Envoi en cours..."})]}),!r&&S.jsx("div",{className:"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:S.jsx("span",{className:"bg-white/90 text-onyx px-4 py-2 rounded-full text-sm font-bold shadow-lg",children:"Changer la photo"})})]}),S.jsx("div",{className:"mt-6 flex justify-end",children:S.jsx("button",{onClick:t,className:"px-6 py-2 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-colors",children:"Termin"})})]})})},OZ=({open:t,onClose:e,allClothingItems:n,allClothingSets:i,favoriteOutfits:r,onToggleFavorite:o,onGenerateVisual:l,generatingVisualFor:c,selectedOutfit:d,onSelectOutfit:f})=>{const p=document.documentElement.classList.contains("dark");return S.jsx(Eg,{open:t,onDismiss:e,className:p?"dark":"",header:S.jsxs("div",{className:"flex items-center justify-between w-full",children:[S.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Tenues Favorites"}),S.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:v})=>v*.65,snapPoints:({maxHeight:v})=>[v*.65,v*.85],children:S.jsx("div",{className:"p-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:r.length>0?S.jsx(ym,{outfits:r,allClothingItems:n,allClothingSets:i,favoriteOutfits:r,onToggleFavorite:o,onGenerateVisual:l,generatingVisualFor:c,selectedOutfit:d,onSelectOutfit:f}):S.jsxs("div",{className:"text-center py-12",children:[S.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas encore de tenues favorites."}),S.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Cliquez sur le cur  sur une tenue gnre pour l'ajouter."})]})})})},UZ=({imageUrl:t,onClose:e})=>(B.useEffect(()=>{const n=i=>{i.key==="Escape"&&e()};return window.addEventListener("keydown",n),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",n),document.body.style.overflow="auto"}},[e]),S.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{zIndex:999999},onClick:e,role:"dialog","aria-modal":"true",children:[S.jsx("div",{className:"absolute inset-0 bg-onyx/80 backdrop-blur-md",style:{zIndex:999999}}),S.jsxs("div",{className:"relative bg-white dark:bg-raisin-black rounded-lg shadow-2xl p-4",style:{zIndex:1e6},onClick:n=>n.stopPropagation(),children:[S.jsx("img",{src:t,alt:"Rendu visuel de la tenue",className:"max-w-[85vw] max-h-[75vh] object-contain rounded-lg"}),S.jsx("p",{className:"text-xs text-center text-gray-500 dark:text-gray-400 mt-3",children:"Rendu gnr par IA (image factice)."}),S.jsx("button",{onClick:n=>{n.stopPropagation(),e()},onTouchEnd:n=>{n.stopPropagation(),e()},className:"absolute -top-3 -right-3 p-3 bg-red-500 border-4 border-white rounded-full text-white shadow-2xl hover:bg-red-600 active:scale-95 touch-none",style:{zIndex:1000001},"aria-label":"Fermer",children:S.jsx(BT,{})})]})]})),No=t=>{const e=t instanceof Error?t.message:String(t);return e.includes("API_KEY_HTTP_REFERRER_BLOCKED")||e.includes("403")?" Accs refus par Google : Domaine non autoris. Vrifiez la console Google Cloud.":e.includes("429")||e.includes("payment method")||e.includes("throttled")?" Limite de gnration atteinte. Veuillez attendre quelques secondes ou ajouter un moyen de paiement sur Replicate.":e.includes("prediction")?" Erreur lors de la gnration visuelle. Le service est peut-tre surcharg.":e.includes("404")?" Modle introuvable. Veuillez ressayer plus tard.":e.includes("API_KEY_INVALID")?" Cl API invalide. Vrifiez votre configuration.":e},FZ=()=>{const[t,e]=B.useState(null),[n,i]=B.useState(null),[r,o]=B.useState([]),[l,c]=B.useState(null),[d,f]=B.useState(!1),[p,v]=B.useState(null),[T,b]=B.useState(!1),[C,N]=B.useState(null),[M,V]=B.useState(!1),[k,F]=B.useState("home"),[G,K]=B.useState(!1),[H,R]=B.useState(!1),[I,P]=B.useState(!1),[U,L]=B.useState(!1),[z,q]=B.useState(!1),[xe,Ie]=B.useState(null),[ee,re]=B.useState(null),[me,Te]=B.useState(!1),[Ae,$]=B.useState(0),[Z,he]=B.useState(null),[se,fe]=B.useState(null),[Ee,ke]=B.useState(!1),[Ve,yt]=B.useState(""),[Rn,Ai]=B.useState("favorites");B.useEffect(()=>{if(n){const pe=n.includes("Accs refus")?1e4:5e3,Re=setTimeout(()=>i(null),pe);return()=>clearTimeout(Re)}},[n]);const[Nn,pi]=B.useState(()=>!localStorage.getItem("dressmup_onboarding_complete")),{clothingItems:Ln,clothingSets:Pn,isAnalyzing:On,analyzeClothingItems:Fi,deleteClothingItem:Bi,createClothingSet:Ci,updateClothingItem:mi,deleteClothingSet:gi,favoriteOutfits:_n,addFavoriteOutfit:zi,deleteFavoriteOutfit:xt,userModelImage:zt,recordOutfitWear:Ge,getItemWearCount:qt,loading:rn}=xk(),[Ot,Un]=B.useState(null),We=kn.useMemo(()=>(Ln||[]).sort((Re,tt)=>(tt.isFavorite?1:0)-(Re.isFavorite?1:0)),[Ln]),fn=B.useCallback(pe=>{const Re=_n.find(tt=>tt.titre===pe.titre&&tt.description===pe.description);Re?(xt(Re.id),Un("Retir des favoris"),Ps.light()):(zi(pe),Un("Ajout aux favoris "),Ps.success()),setTimeout(()=>Un(null),2e3)},[_n,zi,xt]),Fn=B.useCallback(pe=>{if((l==null?void 0:l.titre)===pe.titre&&(l==null?void 0:l.description)===pe.description)c(null),Un("Slection annule"),Ps.light();else{c(pe),Un("Tenue choisie "),Ps.success();const tt=pe.vetements.map(mt=>mt.id);Ge(pe.titre,pe.description,tt)}setTimeout(()=>Un(null),2e3)},[l,Ge]),et=kn.useMemo(()=>Pn||[],[Pn]),ce=kn.useMemo(()=>new Set(et.flatMap(pe=>pe.itemIds||[])),[et]);B.useEffect(()=>{const pe=async Re=>{const tt=Re.coords.latitude,mt=Re.coords.longitude,Tn=GD.openWeatherApiKey,xr=`https://api.openweathermap.org/data/2.5/weather?lat=${tt}&lon=${mt}&appid=${Tn}&units=metric&lang=fr`;try{const Kn=await fetch(xr);if(!Kn.ok)throw new Error("Impossible de rcuprer la mto.");const Rt=await Kn.json(),Zt=`${Math.round(Rt.main.temp)}C, ${Rt.weather[0].description},  ${Rt.name}`;Ie(Zt),re(null)}catch{re("Mto indisponible.")}};navigator.geolocation?navigator.geolocation.getCurrentPosition(pe,()=>re("Activez la golocalisation pour la mto.")):re("Golocalisation non supporte.")},[]);const be=B.useCallback(async(pe,Re)=>{if(We.length===0){i("Veuillez d'abord ajouter des vtements.");return}f(!0),i(null);const tt=xe?`Mto actuelle : ${xe}. Occasion : ${pe}`:`Occasion : ${pe}`;try{const mt=await M7(We,et,tt,Re);o(mt)}catch(mt){i(No(mt))}finally{f(!1)}},[We,et,xe]),we=B.useCallback(async(pe,Re,tt)=>{if(We.length===0){i("Veuillez d'abord ajouter des vtements.");return}b(!0),i(null);try{const mt=await V7(We,et,pe,Re,tt);v(mt)}catch(mt){i(No(mt))}finally{b(!1)}},[We,et]),je=B.useCallback(async()=>{if(We.length<3){i("Ajoutez au moins 3 vtements pour une analyse.");return}V(!0),i(null);try{const pe=await jD(We,et);N(pe)}catch(pe){i(No(pe))}finally{V(!1)}},[We,et]),ht=B.useCallback(async pe=>{if(he(pe.titre),i(null),!zt){he(null),q(!0),Un("Ajoutez une photo de vous pour l'essayage ");return}try{const Re=pe.vetements.map(mt=>We.find(Tn=>Tn.id===mt.id||Tn.analysis===mt.description)).filter(mt=>!!mt);if(Re.length===0)throw new Error("Impossible de retrouver les articles originaux pour le rendu.");const tt=await O7(Re,zt);fe(tt)}catch(Re){i(No(Re))}finally{he(null)}},[We,zt]),Je=B.useCallback(()=>K(!0),[]),Qe=B.useCallback(()=>R(!0),[]),nt=pe=>e(pe),it=()=>e(null),Me=pe=>{Bi(pe).catch(Re=>i(No(Re))),e(null)},Ke=pe=>{mi(pe).catch(Re=>i(No(Re))),e(pe)},hn=pe=>{const Re=`Focus sur l'article : ${pe.analysis}`;be(Re,pe),e(null),window.innerWidth<768&&K(!0)},$n=B.useCallback((pe,Re)=>{Ci(pe,Re).catch(tt=>i(No(tt)))},[Ci]),Xt=B.useCallback(pe=>{gi(pe).catch(Re=>i(No(Re)))},[gi]);B.useCallback(async()=>{Te(!0),Ps.medium(),await new Promise(pe=>setTimeout(pe,1e3)),Te(!1),Ps.success()},[]);const Dt={hauts:We.filter(pe=>pe.category==="Hauts").length,bas:We.filter(pe=>pe.category==="Bas").length,chaussures:We.filter(pe=>pe.category==="Chaussures").length,accessoires:We.filter(pe=>pe.category==="Accessoires").length},pt=B.useMemo(()=>{if(k==="home")return[];let pe=We.filter(Re=>k==="hauts"?Re.category==="Hauts":k==="bas"?Re.category==="Bas":k==="chaussures"?Re.category==="Chaussures":k==="accessoires"?Re.category==="Accessoires":!1);if(Ve.trim()){const Re=Ve.toLowerCase();pe=pe.filter(tt=>tt.analysis.toLowerCase().includes(Re)||tt.color.toLowerCase().includes(Re)||tt.material.toLowerCase().includes(Re))}return[...pe].sort((Re,tt)=>{switch(Rn){case"favorites":return(tt.isFavorite?1:0)-(Re.isFavorite?1:0);case"newest":return(tt.createdAt||0)-(Re.createdAt||0);case"oldest":return(Re.createdAt||0)-(tt.createdAt||0);case"color":return Re.color.localeCompare(tt.color);default:return 0}})},[k,We,Ve,Rn]),Dn=G||H||I||!!t||!!C||!!se||z;return B.useEffect(()=>{const pe=document.querySelector("header");pe&&(pe.style.zIndex=Dn?"10":"50")},[Dn]),B.useEffect(()=>{if(!On&&We.length>Ae&&Ae>0){const pe=We.length-Ae;Un(`${pe} vtement${pe>1?"s":""} ajout${pe>1?"s":""} `),setTimeout(()=>Un(null),2e3)}$(We.length)},[On,We.length]),S.jsxs("main",{className:"container mx-auto px-4 lg:px-8 py-10",children:[S.jsx("button",{onClick:()=>q(!0),className:"fixed top-24 right-4 z-40 bg-white dark:bg-onyx p-2 rounded-full shadow-lg border border-gold/30 md:hidden",title:"Mon mannequin",children:zt?S.jsx("img",{src:zt,alt:"Profil",className:"w-8 h-8 rounded-full object-cover"}):S.jsx("div",{className:"w-8 h-8 bg-gold/20 rounded-full flex items-center justify-center text-xs",children:""})}),n&&S.jsxs("div",{className:"bg-red-500/20 border border-red-500 text-red-700 dark:text-red-300 px-4 py-3 rounded-lg relative mb-8 flex items-center justify-between shadow-sm animate-pulse",role:"alert",children:[S.jsxs("div",{className:"flex-1 mr-2",children:[S.jsx("strong",{className:"font-bold block mb-1",children:"Attention :"}),S.jsx("span",{className:"block text-sm leading-relaxed",children:n})]}),S.jsx("button",{onClick:()=>i(null),className:"p-1.5 hover:bg-red-500/30 rounded-full transition-colors flex-shrink-0","aria-label":"Fermer",children:S.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[S.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[S.jsx("div",{className:"hidden md:flex justify-end mb-4",children:S.jsxs("button",{onClick:()=>q(!0),className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-onyx border border-gray-200 dark:border-gray-700 rounded-lg hover:border-gold transition-colors",children:[zt?S.jsx("img",{src:zt,alt:"Profil",className:"w-8 h-8 rounded-full object-cover"}):S.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full"}),S.jsx("span",{className:"text-sm font-medium",children:"Mon Mannequin Virtuel"})]})}),We.length>=3&&S.jsxs("div",{className:"hidden md:block bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-xl p-4 md:p-6 flex flex-col md:flex-row items-start md:items-center gap-4 md:justify-between",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-bold mb-2",children:" Besoin d'inspiration ?"}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour rendre votre garde-robe plus polyvalente"})]}),S.jsx("button",{onClick:je,disabled:M,className:"px-4 md:px-6 py-3 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm md:text-base flex-shrink-0",children:M?"Analyse...":"Analyser ma garde-robe"})]}),S.jsx("div",{className:"hidden md:block",children:S.jsx(bJ,{onAnalyze:Fi,isAnalyzing:On})}),S.jsx("div",{className:"hidden md:block",children:S.jsx(CJ,{clothingItems:We,clothingSets:et,onItemClick:nt,onDeleteItem:Me,onCreateSet:$n,isLoading:rn})}),S.jsxs("div",{className:"md:hidden",children:[k==="home"&&S.jsx(PJ,{onAnalyzeWardrobe:je,onScrollToOutfits:Je,onScrollToVacation:Qe,onStartSetCreation:()=>P(!0),onShowFavorites:()=>L(!0),isAnalyzingWardrobe:M,clothingCount:We.length,favoriteOutfitCount:_n.length}),k!=="home"&&S.jsxs("div",{className:"pb-24",children:[me&&S.jsx("div",{className:"flex justify-center py-4",children:S.jsxs("svg",{className:"animate-spin h-6 w-6 text-gold",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),S.jsxs("div",{className:"text-center py-4 px-4",children:[S.jsx("h2",{className:"text-2xl font-bold mb-1 capitalize",children:k}),S.jsxs("p",{className:"text-sm text-gray-500",children:[pt.length," vtement",pt.length>1?"s":""]})]}),S.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[S.jsxs("div",{className:"relative",children:[S.jsx(YD,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),S.jsx("input",{type:"text",value:Ve,onChange:pe=>yt(pe.target.value),placeholder:"Rechercher...",className:"w-full pl-10 pr-10 py-2.5 bg-white dark:bg-raisin-black border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-all"}),Ve&&S.jsx("button",{onClick:()=>yt(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors","aria-label":"Effacer",children:S.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),S.jsxs("div",{className:"relative",children:[S.jsx(JD,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"}),S.jsxs("select",{value:Rn,onChange:pe=>Ai(pe.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white dark:bg-raisin-black border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent appearance-none cursor-pointer transition-all",children:[S.jsx("option",{value:"favorites",children:"Favoris d'abord"}),S.jsx("option",{value:"newest",children:"Plus rcents"}),S.jsx("option",{value:"oldest",children:"Plus anciens"}),S.jsx("option",{value:"color",children:"Couleur (A-Z)"})]}),S.jsx(um,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),pt.length>0?S.jsx("div",{className:"grid grid-cols-2 gap-3 px-4",children:pt.map(pe=>S.jsxs("div",{onClick:()=>nt(pe),className:"relative bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform",children:[pe.isFavorite?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-red-500 z-10",children:S.jsx(Bd,{className:"w-4 h-4"})}):ce.has(pe.id)?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:S.jsx(cg,{})}):null,S.jsx("div",{className:"aspect-square",children:S.jsx("img",{src:pe.imageSrc,alt:pe.analysis,loading:"lazy",className:"w-full h-full object-cover"})}),S.jsxs("div",{className:"p-3",children:[S.jsx("p",{className:"text-sm font-medium line-clamp-2",children:pe.analysis}),S.jsx("p",{className:"text-xs text-gray-500 mt-1",children:pe.color})]})]},pe.id))}):S.jsx("div",{className:"text-center py-12 px-4",children:Ve?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"text-6xl mb-4",children:""}),S.jsxs("p",{className:"text-gray-500 font-medium",children:['Aucun rsultat pour "',Ve,'"']}),S.jsx("button",{onClick:()=>yt(""),className:"mt-3 text-gold font-medium",children:"Effacer la recherche"})]}):S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"text-6xl mb-4",children:""}),S.jsx("p",{className:"text-gray-500 font-medium",children:"Aucun vtement dans cette catgorie"}),S.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Appuyez sur + pour en ajouter"})]})})]})]})]}),S.jsxs("div",{className:"lg:col-span-1 space-y-10 lg:sticky lg:top-40 hidden md:block",children:[S.jsx("div",{id:"outfit-generator",children:S.jsx(x2,{clothingItems:We,clothingSets:et,onGenerate:be,isGenerating:d,weatherInfo:xe,weatherError:ee})}),r.length>0&&S.jsx(ym,{outfits:r,allClothingItems:We,allClothingSets:et,favoriteOutfits:_n,onToggleFavorite:fn,onGenerateVisual:ht,generatingVisualFor:Z,selectedOutfit:l,onSelectOutfit:Fn}),_n.length>0&&S.jsxs("div",{className:"mt-10 border border-black/10 dark:border-white/10 rounded-xl overflow-hidden bg-white dark:bg-raisin-black shadow-sm",children:[S.jsxs("button",{onClick:()=>ke(!Ee),className:"w-full flex items-center justify-between p-5 hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(Bd,{className:"text-gold w-5 h-5"}),S.jsxs("h2",{className:"text-xl font-serif font-bold text-raisin-black dark:text-snow",children:["Mes Favoris ",S.jsxs("span",{className:"text-sm font-sans font-normal text-gray-500",children:["(",_n.length,")"]})]})]}),S.jsx("div",{className:`transition-transform duration-300 ${Ee?"rotate-180":""} text-gray-400`,children:S.jsx(um,{})})]}),Ee&&S.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 bg-snow dark:bg-onyx/50 max-h-[600px] overflow-y-auto custom-scrollbar",children:S.jsx(ym,{outfits:_n,allClothingItems:We,allClothingSets:et,favoriteOutfits:_n,onToggleFavorite:fn,onGenerateVisual:ht,generatingVisualFor:Z,selectedOutfit:l,onSelectOutfit:Fn})})]}),S.jsx("div",{id:"vacation-planner",children:S.jsx(A2,{clothingItems:We,clothingSets:et,onGeneratePlan:we,isGenerating:T})}),p&&S.jsx(C2,{plan:p,allClothingItems:We,allClothingSets:et,onCreateSet:$n})]})]}),t&&S.jsx(RJ,{item:t,clothingSets:et,onClose:it,onUpdate:Ke,onGenerateFrom:hn,onRemoveSet:Xt,onDelete:Me,getItemWearCount:qt}),C&&S.jsx(MJ,{analysis:C,onClose:()=>N(null)}),se&&S.jsx(UZ,{imageUrl:se,onClose:()=>fe(null)}),S.jsx(NJ,{onFilesSelected:Fi,isAnalyzing:On,isOtherModalOpen:Dn}),S.jsx(DJ,{activeTab:k,onTabChange:F,counts:Dt}),S.jsx(vZ,{open:G,clothingItems:We,clothingSets:et,onGenerate:be,isGenerating:d,suggestedOutfits:r,onClose:()=>K(!1),weatherInfo:xe,weatherError:ee,favoriteOutfits:_n,onToggleFavorite:fn,onGenerateVisual:ht,generatingVisualFor:Z,selectedOutfit:l,onSelectOutfit:Fn}),S.jsx(_Z,{open:H,clothingItems:We,clothingSets:et,onGeneratePlan:we,isGenerating:T,vacationPlan:p,onCreateSet:$n,onClose:()=>R(!1)}),S.jsx(TZ,{open:I,clothingItems:We,clothingSets:et,onClose:()=>P(!1),onCreateSet:(pe,Re)=>{$n(pe,Re),P(!1)}}),S.jsx(OZ,{open:U,onClose:()=>L(!1),allClothingItems:We,allClothingSets:et,favoriteOutfits:_n,onToggleFavorite:fn,onGenerateVisual:ht,generatingVisualFor:Z,selectedOutfit:l,onSelectOutfit:Fn}),z&&S.jsx(LZ,{onClose:()=>q(!1)}),Nn&&S.jsx(cL,{onComplete:()=>pi(!1)}),Ot&&S.jsx("div",{className:"fixed bottom-32 md:bottom-8 left-1/2 -translate-x-1/2 z-[100]",children:S.jsxs("div",{className:"bg-raisin-black dark:bg-white text-white dark:text-raisin-black px-6 py-3 rounded-full shadow-2xl font-medium flex items-center gap-2 animate-slide-up",children:[Ot.includes("")&&S.jsx("span",{className:"animate-pulse",children:""}),Ot.includes("Retir")&&S.jsx("span",{children:""}),Ot.includes("ajout")&&!Ot.includes("")&&S.jsx("span",{children:""}),S.jsx("span",{children:Ot.replace("","").trim()})]})})]})},BZ=()=>{const[t,e]=B.useState(null),[n,i]=B.useState("dark"),[r,o]=B.useState(!1);B.useEffect(()=>{const c=Y4(Oa,d=>{e(d),d&&o(!1)});return()=>c()},[]),B.useEffect(()=>{n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[n]);const l=()=>{i(c=>c==="light"?"dark":"light")};return S.jsx("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow transition-colors duration-300",children:t?S.jsxs(S.Fragment,{children:[S.jsx($7,{theme:n,toggleTheme:l,children:S.jsx(vI,{user:t})}),S.jsx(VZ,{user:t,children:S.jsx(FZ,{})})]}):r?S.jsx("div",{className:"flex items-center justify-center min-h-screen p-4 animate-slide-up",children:S.jsxs("div",{className:"w-full max-w-md",children:[S.jsx("button",{onClick:()=>o(!1),className:"mb-4 flex items-center gap-2 text-gray-500 hover:text-gold transition-colors text-sm font-medium",children:" Retour"}),S.jsx(vI,{user:t})]})}):S.jsx(SJ,{onGetStarted:()=>o(!0)})})},Ak=document.getElementById("root");if(!Ak)throw new Error("L'lment root est introuvable dans le DOM");const zZ=uL.createRoot(Ak);zZ.render(S.jsx(kn.StrictMode,{children:S.jsx(BZ,{})}));
