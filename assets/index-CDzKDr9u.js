(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function nC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qv={exports:{}},Cc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tw;function aD(){if(tw)return Cc;tw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,o){var u=null;if(o!==void 0&&(u=""+o),s.key!==void 0&&(u=""+s.key),"key"in s){o={};for(var d in s)d!=="key"&&(o[d]=s[d])}else o=s;return s=o.ref,{$$typeof:t,type:r,key:u,ref:s!==void 0?s:null,props:o}}return Cc.Fragment=e,Cc.jsx=n,Cc.jsxs=n,Cc}var nw;function oD(){return nw||(nw=1,qv.exports=aD()),qv.exports}var g=oD(),Hv={exports:{}},He={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rw;function lD(){if(rw)return He;rw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),x=Symbol.iterator;function _(z){return z===null||typeof z!="object"?null:(z=x&&z[x]||z["@@iterator"],typeof z=="function"?z:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,M={};function U(z,J,de){this.props=z,this.context=J,this.refs=M,this.updater=de||A}U.prototype.isReactComponent={},U.prototype.setState=function(z,J){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,J,"setState")},U.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function O(){}O.prototype=U.prototype;function B(z,J,de){this.props=z,this.context=J,this.refs=M,this.updater=de||A}var H=B.prototype=new O;H.constructor=B,R(H,U.prototype),H.isPureReactComponent=!0;var G=Array.isArray;function q(){}var C={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function N(z,J,de){var fe=de.ref;return{$$typeof:t,type:z,key:J,ref:fe!==void 0?fe:null,props:de}}function P(z,J){return N(z.type,J,z.props)}function V(z){return typeof z=="object"&&z!==null&&z.$$typeof===t}function L(z){var J={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(de){return J[de]})}var D=/\/+/g;function pe(z,J){return typeof z=="object"&&z!==null&&z.key!=null?L(""+z.key):J.toString(36)}function Ie(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(q,q):(z.status="pending",z.then(function(J){z.status==="pending"&&(z.status="fulfilled",z.value=J)},function(J){z.status==="pending"&&(z.status="rejected",z.reason=J)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function X(z,J,de,fe,we){var je=typeof z;(je==="undefined"||je==="boolean")&&(z=null);var qe=!1;if(z===null)qe=!0;else switch(je){case"bigint":case"string":case"number":qe=!0;break;case"object":switch(z.$$typeof){case t:case e:qe=!0;break;case v:return qe=z._init,X(qe(z._payload),J,de,fe,we)}}if(qe)return we=we(z),qe=fe===""?"."+pe(z,0):fe,G(we)?(de="",qe!=null&&(de=qe.replace(D,"$&/")+"/"),X(we,J,de,"",function(Mn){return Mn})):we!=null&&(V(we)&&(we=P(we,de+(we.key==null||z&&z.key===we.key?"":(""+we.key).replace(D,"$&/")+"/")+qe)),J.push(we)),1;qe=0;var Zt=fe===""?".":fe+":";if(G(z))for(var At=0;At<z.length;At++)fe=z[At],je=Zt+pe(fe,At),qe+=X(fe,J,de,je,we);else if(At=_(z),typeof At=="function")for(z=At.call(z),At=0;!(fe=z.next()).done;)fe=fe.value,je=Zt+pe(fe,At++),qe+=X(fe,J,de,je,we);else if(je==="object"){if(typeof z.then=="function")return X(Ie(z),J,de,fe,we);throw J=String(z),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return qe}function ie(z,J,de){if(z==null)return z;var fe=[],we=0;return X(z,fe,"","",function(je){return J.call(de,je,we++)}),fe}function ce(z){if(z._status===-1){var J=z._result;J=J(),J.then(function(de){(z._status===0||z._status===-1)&&(z._status=1,z._result=de)},function(de){(z._status===0||z._status===-1)&&(z._status=2,z._result=de)}),z._status===-1&&(z._status=0,z._result=J)}if(z._status===1)return z._result.default;throw z._result}var Ae=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},_e={map:ie,forEach:function(z,J,de){ie(z,function(){J.apply(this,arguments)},de)},count:function(z){var J=0;return ie(z,function(){J++}),J},toArray:function(z){return ie(z,function(J){return J})||[]},only:function(z){if(!V(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return He.Activity=b,He.Children=_e,He.Component=U,He.Fragment=n,He.Profiler=s,He.PureComponent=B,He.StrictMode=r,He.Suspense=h,He.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,He.__COMPILER_RUNTIME={__proto__:null,c:function(z){return C.H.useMemoCache(z)}},He.cache=function(z){return function(){return z.apply(null,arguments)}},He.cacheSignal=function(){return null},He.cloneElement=function(z,J,de){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var fe=R({},z.props),we=z.key;if(J!=null)for(je in J.key!==void 0&&(we=""+J.key),J)!S.call(J,je)||je==="key"||je==="__self"||je==="__source"||je==="ref"&&J.ref===void 0||(fe[je]=J[je]);var je=arguments.length-2;if(je===1)fe.children=de;else if(1<je){for(var qe=Array(je),Zt=0;Zt<je;Zt++)qe[Zt]=arguments[Zt+2];fe.children=qe}return N(z.type,we,fe)},He.createContext=function(z){return z={$$typeof:u,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:o,_context:z},z},He.createElement=function(z,J,de){var fe,we={},je=null;if(J!=null)for(fe in J.key!==void 0&&(je=""+J.key),J)S.call(J,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(we[fe]=J[fe]);var qe=arguments.length-2;if(qe===1)we.children=de;else if(1<qe){for(var Zt=Array(qe),At=0;At<qe;At++)Zt[At]=arguments[At+2];we.children=Zt}if(z&&z.defaultProps)for(fe in qe=z.defaultProps,qe)we[fe]===void 0&&(we[fe]=qe[fe]);return N(z,je,we)},He.createRef=function(){return{current:null}},He.forwardRef=function(z){return{$$typeof:d,render:z}},He.isValidElement=V,He.lazy=function(z){return{$$typeof:v,_payload:{_status:-1,_result:z},_init:ce}},He.memo=function(z,J){return{$$typeof:f,type:z,compare:J===void 0?null:J}},He.startTransition=function(z){var J=C.T,de={};C.T=de;try{var fe=z(),we=C.S;we!==null&&we(de,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(q,Ae)}catch(je){Ae(je)}finally{J!==null&&de.types!==null&&(J.types=de.types),C.T=J}},He.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},He.use=function(z){return C.H.use(z)},He.useActionState=function(z,J,de){return C.H.useActionState(z,J,de)},He.useCallback=function(z,J){return C.H.useCallback(z,J)},He.useContext=function(z){return C.H.useContext(z)},He.useDebugValue=function(){},He.useDeferredValue=function(z,J){return C.H.useDeferredValue(z,J)},He.useEffect=function(z,J){return C.H.useEffect(z,J)},He.useEffectEvent=function(z){return C.H.useEffectEvent(z)},He.useId=function(){return C.H.useId()},He.useImperativeHandle=function(z,J,de){return C.H.useImperativeHandle(z,J,de)},He.useInsertionEffect=function(z,J){return C.H.useInsertionEffect(z,J)},He.useLayoutEffect=function(z,J){return C.H.useLayoutEffect(z,J)},He.useMemo=function(z,J){return C.H.useMemo(z,J)},He.useOptimistic=function(z,J){return C.H.useOptimistic(z,J)},He.useReducer=function(z,J,de){return C.H.useReducer(z,J,de)},He.useRef=function(z){return C.H.useRef(z)},He.useState=function(z){return C.H.useState(z)},He.useSyncExternalStore=function(z,J,de){return C.H.useSyncExternalStore(z,J,de)},He.useTransition=function(){return C.H.useTransition()},He.version="19.2.4",He}var iw;function q0(){return iw||(iw=1,Hv.exports=lD()),Hv.exports}var k=q0();const Ln=nC(k);var Gv={exports:{}},Rc={},$v={exports:{}},Kv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sw;function uD(){return sw||(sw=1,(function(t){function e(X,ie){var ce=X.length;X.push(ie);e:for(;0<ce;){var Ae=ce-1>>>1,_e=X[Ae];if(0<s(_e,ie))X[Ae]=ie,X[ce]=_e,ce=Ae;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var ie=X[0],ce=X.pop();if(ce!==ie){X[0]=ce;e:for(var Ae=0,_e=X.length,z=_e>>>1;Ae<z;){var J=2*(Ae+1)-1,de=X[J],fe=J+1,we=X[fe];if(0>s(de,ce))fe<_e&&0>s(we,de)?(X[Ae]=we,X[fe]=ce,Ae=fe):(X[Ae]=de,X[J]=ce,Ae=J);else if(fe<_e&&0>s(we,ce))X[Ae]=we,X[fe]=ce,Ae=fe;else break e}}return ie}function s(X,ie){var ce=X.sortIndex-ie.sortIndex;return ce!==0?ce:X.id-ie.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,d=u.now();t.unstable_now=function(){return u.now()-d}}var h=[],f=[],v=1,b=null,x=3,_=!1,A=!1,R=!1,M=!1,U=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function H(X){for(var ie=n(f);ie!==null;){if(ie.callback===null)r(f);else if(ie.startTime<=X)r(f),ie.sortIndex=ie.expirationTime,e(h,ie);else break;ie=n(f)}}function G(X){if(R=!1,H(X),!A)if(n(h)!==null)A=!0,q||(q=!0,L());else{var ie=n(f);ie!==null&&Ie(G,ie.startTime-X)}}var q=!1,C=-1,S=5,N=-1;function P(){return M?!0:!(t.unstable_now()-N<S)}function V(){if(M=!1,q){var X=t.unstable_now();N=X;var ie=!0;try{e:{A=!1,R&&(R=!1,O(C),C=-1),_=!0;var ce=x;try{t:{for(H(X),b=n(h);b!==null&&!(b.expirationTime>X&&P());){var Ae=b.callback;if(typeof Ae=="function"){b.callback=null,x=b.priorityLevel;var _e=Ae(b.expirationTime<=X);if(X=t.unstable_now(),typeof _e=="function"){b.callback=_e,H(X),ie=!0;break t}b===n(h)&&r(h),H(X)}else r(h);b=n(h)}if(b!==null)ie=!0;else{var z=n(f);z!==null&&Ie(G,z.startTime-X),ie=!1}}break e}finally{b=null,x=ce,_=!1}ie=void 0}}finally{ie?L():q=!1}}}var L;if(typeof B=="function")L=function(){B(V)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,pe=D.port2;D.port1.onmessage=V,L=function(){pe.postMessage(null)}}else L=function(){U(V,0)};function Ie(X,ie){C=U(function(){X(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(X){switch(x){case 1:case 2:case 3:var ie=3;break;default:ie=x}var ce=x;x=ie;try{return X()}finally{x=ce}},t.unstable_requestPaint=function(){M=!0},t.unstable_runWithPriority=function(X,ie){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ce=x;x=X;try{return ie()}finally{x=ce}},t.unstable_scheduleCallback=function(X,ie,ce){var Ae=t.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?Ae+ce:Ae):ce=Ae,X){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=ce+_e,X={id:v++,callback:ie,priorityLevel:X,startTime:ce,expirationTime:_e,sortIndex:-1},ce>Ae?(X.sortIndex=ce,e(f,X),n(h)===null&&X===n(f)&&(R?(O(C),C=-1):R=!0,Ie(G,ce-Ae))):(X.sortIndex=_e,e(h,X),A||_||(A=!0,q||(q=!0,L()))),X},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(X){var ie=x;return function(){var ce=x;x=ie;try{return X.apply(this,arguments)}finally{x=ce}}}})(Kv)),Kv}var aw;function cD(){return aw||(aw=1,$v.exports=uD()),$v.exports}var Yv={exports:{}},mr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ow;function dD(){if(ow)return mr;ow=1;var t=q0();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)f+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(h,f,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:b==null?null:""+b,children:h,containerInfo:f,implementation:v}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return mr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,mr.createPortal=function(h,f){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(h,f,null,v)},mr.flushSync=function(h){var f=u.T,v=r.p;try{if(u.T=null,r.p=2,h)return h()}finally{u.T=f,r.p=v,r.d.f()}},mr.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(h,f))},mr.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},mr.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var v=f.as,b=d(v,f.crossOrigin),x=typeof f.integrity=="string"?f.integrity:void 0,_=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;v==="style"?r.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:b,integrity:x,fetchPriority:_}):v==="script"&&r.d.X(h,{crossOrigin:b,integrity:x,fetchPriority:_,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},mr.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var v=d(f.as,f.crossOrigin);r.d.M(h,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(h)},mr.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var v=f.as,b=d(v,f.crossOrigin);r.d.L(h,v,{crossOrigin:b,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},mr.preloadModule=function(h,f){if(typeof h=="string")if(f){var v=d(f.as,f.crossOrigin);r.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(h)},mr.requestFormReset=function(h){r.d.r(h)},mr.unstable_batchedUpdates=function(h,f){return h(f)},mr.useFormState=function(h,f,v){return u.H.useFormState(h,f,v)},mr.useFormStatus=function(){return u.H.useHostTransitionStatus()},mr.version="19.2.4",mr}var lw;function rC(){if(lw)return Yv.exports;lw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Yv.exports=dD(),Yv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uw;function hD(){if(uw)return Rc;uw=1;var t=cD(),e=q0(),n=rC();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function u(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function d(i){if(i.tag===31){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function h(i){if(o(i)!==i)throw Error(r(188))}function f(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(r(188));return a!==i?null:i}for(var l=i,c=a;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(c=p.return,c!==null){l=c;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return h(p),i;if(y===c)return h(p),a;y=y.sibling}throw Error(r(188))}if(l.return!==c.return)l=p,c=y;else{for(var T=!1,I=p.child;I;){if(I===l){T=!0,l=p,c=y;break}if(I===c){T=!0,c=p,l=y;break}I=I.sibling}if(!T){for(I=y.child;I;){if(I===l){T=!0,l=y,c=p;break}if(I===c){T=!0,c=y,l=p;break}I=I.sibling}if(!T)throw Error(r(189))}}if(l.alternate!==c)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?i:a}function v(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=v(i),a!==null)return a;i=i.sibling}return null}var b=Object.assign,x=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),B=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function L(i){return i===null||typeof i!="object"?null:(i=V&&i[V]||i["@@iterator"],typeof i=="function"?i:null)}var D=Symbol.for("react.client.reference");function pe(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===D?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case R:return"Fragment";case U:return"Profiler";case M:return"StrictMode";case G:return"Suspense";case q:return"SuspenseList";case N:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case A:return"Portal";case B:return i.displayName||"Context";case O:return(i._context.displayName||"Context")+".Consumer";case H:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case C:return a=i.displayName||null,a!==null?a:pe(i.type)||"Memo";case S:a=i._payload,i=i._init;try{return pe(i(a))}catch{}}return null}var Ie=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},Ae=[],_e=-1;function z(i){return{current:i}}function J(i){0>_e||(i.current=Ae[_e],Ae[_e]=null,_e--)}function de(i,a){_e++,Ae[_e]=i.current,i.current=a}var fe=z(null),we=z(null),je=z(null),qe=z(null);function Zt(i,a){switch(de(je,a),de(we,i),de(fe,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?wT(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=wT(a),i=ST(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}J(fe),de(fe,i)}function At(){J(fe),J(we),J(je)}function Mn(i){i.memoizedState!==null&&de(qe,i);var a=fe.current,l=ST(a,i.type);a!==l&&(de(we,i),de(fe,l))}function Bn(i){we.current===i&&(J(fe),J(we)),qe.current===i&&(J(qe),Tc._currentValue=ce)}var en,zn;function Ut(i){if(en===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);en=a&&a[1]||"",zn=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+en+i+zn}var he=!1;function ve(i,a){if(!i||he)return"";he=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(a){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(ee){var Z=ee}Reflect.construct(i,[],oe)}else{try{oe.call()}catch(ee){Z=ee}i.call(oe.prototype)}}else{try{throw Error()}catch(ee){Z=ee}(oe=i())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(ee){if(ee&&Z&&typeof ee.stack=="string")return[ee.stack,Z.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=c.DetermineComponentFrameRoot(),T=y[0],I=y[1];if(T&&I){var F=T.split(`
`),W=I.split(`
`);for(p=c=0;c<F.length&&!F[c].includes("DetermineComponentFrameRoot");)c++;for(;p<W.length&&!W[p].includes("DetermineComponentFrameRoot");)p++;if(c===F.length||p===W.length)for(c=F.length-1,p=W.length-1;1<=c&&0<=p&&F[c]!==W[p];)p--;for(;1<=c&&0<=p;c--,p--)if(F[c]!==W[p]){if(c!==1||p!==1)do if(c--,p--,0>p||F[c]!==W[p]){var ne=`
`+F[c].replace(" at new "," at ");return i.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",i.displayName)),ne}while(1<=c&&0<=p);break}}}finally{he=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?Ut(l):""}function nt(i,a){switch(i.tag){case 26:case 27:case 5:return Ut(i.type);case 16:return Ut("Lazy");case 13:return i.child!==a&&a!==null?Ut("Suspense Fallback"):Ut("Suspense");case 19:return Ut("SuspenseList");case 0:case 15:return ve(i.type,!1);case 11:return ve(i.type.render,!1);case 1:return ve(i.type,!0);case 31:return Ut("Activity");default:return""}}function an(i){try{var a="",l=null;do a+=nt(i,l),l=i,i=i.return;while(i);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var ze=Object.prototype.hasOwnProperty,Ht=t.unstable_scheduleCallback,Tr=t.unstable_cancelCallback,Dr=t.unstable_shouldYield,Qr=t.unstable_requestPaint,vt=t.unstable_now,on=t.unstable_getCurrentPriorityLevel,$e=t.unstable_ImmediatePriority,Bt=t.unstable_UserBlockingPriority,Gt=t.unstable_NormalPriority,dn=t.unstable_LowPriority,Gi=t.unstable_IdlePriority,$s=t.log,Fn=t.unstable_setDisableYieldValue,Jn=null,hn=null;function ae(i){if(typeof $s=="function"&&Fn(i),hn&&typeof hn.setStrictMode=="function")try{hn.setStrictMode(Jn,i)}catch{}}var xe=Math.clz32?Math.clz32:yt,Te=Math.log,Ke=Math.LN2;function yt(i){return i>>>=0,i===0?32:31-(Te(i)/Ke|0)|0}var We=256,Ye=262144,rt=4194304;function it(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function De(i,a,l){var c=i.pendingLanes;if(c===0)return 0;var p=0,y=i.suspendedLanes,T=i.pingedLanes;i=i.warmLanes;var I=c&134217727;return I!==0?(c=I&~y,c!==0?p=it(c):(T&=I,T!==0?p=it(T):l||(l=I&~i,l!==0&&(p=it(l))))):(I=c&~y,I!==0?p=it(I):T!==0?p=it(T):l||(l=c&~i,l!==0&&(p=it(l)))),p===0?0:a!==0&&a!==p&&(a&y)===0&&(y=p&-p,l=a&-a,y>=l||y===32&&(l&4194048)!==0)?a:p}function Xe(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function fn(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $t(){var i=rt;return rt<<=1,(rt&62914560)===0&&(rt=4194304),i}function tn(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function Nt(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Tt(i,a,l,c,p,y){var T=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var I=i.entanglements,F=i.expirationTimes,W=i.hiddenUpdates;for(l=T&~l;0<l;){var ne=31-xe(l),oe=1<<ne;I[ne]=0,F[ne]=-1;var Z=W[ne];if(Z!==null)for(W[ne]=null,ne=0;ne<Z.length;ne++){var ee=Z[ne];ee!==null&&(ee.lane&=-536870913)}l&=~oe}c!==0&&qn(i,c,0),y!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=y&~(T&~a))}function qn(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var c=31-xe(a);i.entangledLanes|=a,i.entanglements[c]=i.entanglements[c]|1073741824|l&261930}function zt(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var c=31-xe(l),p=1<<c;p&a|i[c]&a&&(i[c]|=a),l&=~p}}function Pn(i,a){var l=a&-a;return l=(l&42)!==0?1:jr(l),(l&(i.suspendedLanes|a))!==0?0:l}function jr(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function nn(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function rn(){var i=ie.p;return i!==0?i:(i=window.event,i===void 0?32:YT(i.type))}function Ne(i,a){var l=ie.p;try{return ie.p=i,a()}finally{ie.p=l}}var Sn=Math.random().toString(36).slice(2),bt="__reactFiber$"+Sn,Me="__reactProps$"+Sn,wr="__reactContainer$"+Sn,An="__reactEvents$"+Sn,hr="__reactListeners$"+Sn,Mr="__reactHandles$"+Sn,Hn="__reactResources$"+Sn,Pr="__reactMarker$"+Sn;function Sr(i){delete i[bt],delete i[Me],delete i[An],delete i[hr],delete i[Mr]}function Zn(i){var a=i[bt];if(a)return a;for(var l=i.parentNode;l;){if(a=l[wr]||l[bt]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=OT(i);i!==null;){if(l=i[bt])return l;i=OT(i)}return a}i=l,l=i.parentNode}return null}function Ar(i){if(i=i[bt]||i[wr]){var a=i.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return i}return null}function er(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function tr(i){var a=i[Hn];return a||(a=i[Hn]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Ft(i){i[Pr]=!0}var Vr=new Set,Wr={};function Gn(i,a){hi(i,a),hi(i+"Capture",a)}function hi(i,a){for(Wr[i]=a,i=0;i<a.length;i++)Vr.add(a[i])}var Pu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$i={},Ks={};function al(i){return ze.call(Ks,i)?!0:ze.call($i,i)?!1:Pu.test(i)?Ks[i]=!0:($i[i]=!0,!1)}function Xr(i,a,l){if(al(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var c=a.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function Ki(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function Lr(i,a,l,c){if(c===null)i.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+c)}}function nr(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ys(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function re(i,a,l){var c=Object.getOwnPropertyDescriptor(i.constructor.prototype,a);if(!i.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,y=c.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return p.call(this)},set:function(T){l=""+T,y.call(this,T)}}),Object.defineProperty(i,a,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(T){l=""+T},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function ye(i){if(!i._valueTracker){var a=Ys(i)?"checked":"value";i._valueTracker=re(i,a,""+i[a])}}function Re(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),c="";return i&&(c=Ys(i)?i.checked?"true":"false":i.value),i=c,i!==l?(a.setValue(i),!0):!1}function Je(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var pt=/[\n"\\]/g;function Be(i){return i.replace(pt,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function fi(i,a,l,c,p,y,T,I){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),a!=null?T==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+nr(a)):i.value!==""+nr(a)&&(i.value=""+nr(a)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),a!=null?Yi(i,T,nr(a)):l!=null?Yi(i,T,nr(l)):c!=null&&i.removeAttribute("value"),p==null&&y!=null&&(i.defaultChecked=!!y),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?i.name=""+nr(I):i.removeAttribute("name")}function Ni(i,a,l,c,p,y,T,I){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),a!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||a!=null)){ye(i);return}l=l!=null?""+nr(l):"",a=a!=null?""+nr(a):l,I||a===i.value||(i.value=a),i.defaultValue=a}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=I?i.checked:!!c,i.defaultChecked=!!c,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T),ye(i)}function Yi(i,a,l){a==="number"&&Je(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function ht(i,a,l,c){if(i=i.options,a){a={};for(var p=0;p<l.length;p++)a["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=a.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&c&&(i[l].defaultSelected=!0)}else{for(l=""+nr(l),a=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,c&&(i[p].defaultSelected=!0);return}a!==null||i[p].disabled||(a=i[p])}a!==null&&(a.selected=!0)}}function oo(i,a,l){if(a!=null&&(a=""+nr(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+nr(l):""}function Qs(i,a,l,c){if(a==null){if(c!=null){if(l!=null)throw Error(r(92));if(Ie(c)){if(1<c.length)throw Error(r(93));c=c[0]}l=c}l==null&&(l=""),a=l}l=nr(a),i.defaultValue=l,c=i.textContent,c===l&&c!==""&&c!==null&&(i.value=c),ye(i)}function mi(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var $p=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vu(i,a,l){var c=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":c?i.setProperty(a,l):typeof l!="number"||l===0||$p.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function nh(i,a,l){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||a!=null&&a.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var p in a)c=a[p],a.hasOwnProperty(p)&&l[p]!==c&&Vu(i,p,c)}else for(var y in a)a.hasOwnProperty(y)&&Vu(i,y,a[y])}function Lu(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qi(i){return Yp.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function $n(){}var ol=null;function ll(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var fs=null,Jr=null;function rh(i){var a=Ar(i);if(a&&(i=a.stateNode)){var l=i[Me]||null;e:switch(i=a.stateNode,a.type){case"input":if(fi(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Be(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var c=l[a];if(c!==i&&c.form===i.form){var p=c[Me]||null;if(!p)throw Error(r(90));fi(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<l.length;a++)c=l[a],c.form===i.form&&Re(c)}break e;case"textarea":oo(i,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&ht(i,!!l.multiple,a,!1)}}}var Uu=!1;function ih(i,a,l){if(Uu)return i(a,l);Uu=!0;try{var c=i(a);return c}finally{if(Uu=!1,(fs!==null||Jr!==null)&&(ef(),fs&&(a=fs,i=Jr,Jr=fs=null,rh(a),i)))for(a=0;a<i.length;a++)rh(i[a])}}function Ur(i,a){var l=i.stateNode;if(l===null)return null;var c=l[Me]||null;if(c===null)return null;l=c[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(r(231,a,typeof l));return l}var ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bu=!1;if(ki)try{var Wi={};Object.defineProperty(Wi,"passive",{get:function(){Bu=!0}}),window.addEventListener("test",Wi,Wi),window.removeEventListener("test",Wi,Wi)}catch{Bu=!1}var Zr=null,ul=null,Xi=null;function Ws(){if(Xi)return Xi;var i,a=ul,l=a.length,c,p="value"in Zr?Zr.value:Zr.textContent,y=p.length;for(i=0;i<l&&a[i]===p[i];i++);var T=l-i;for(c=1;c<=T&&a[l-c]===p[y-c];c++);return Xi=p.slice(i,1<c?1-c:void 0)}function lo(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Xs(){return!0}function Kt(){return!1}function fr(i){function a(l,c,p,y,T){this._reactName=l,this._targetInst=p,this.type=c,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var I in i)i.hasOwnProperty(I)&&(l=i[I],this[I]=l?l(y):y[I]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Xs:Kt,this.isPropagationStopped=Kt,this}return b(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Xs)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Xs)},persist:function(){},isPersistent:Xs}),a}var ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uo=fr(ms),Js=b({},ms,{view:0,detail:0}),sh=fr(Js),Zs,cl,Cr,co=b({},Js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ta,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Cr&&(Cr&&i.type==="mousemove"?(Zs=i.screenX-Cr.screenX,cl=i.screenY-Cr.screenY):cl=Zs=0,Cr=i),Zs)},movementY:function(i){return"movementY"in i?i.movementY:cl}}),ah=fr(co),ho=b({},co,{dataTransfer:0}),oh=fr(ho),zu=b({},Js,{relatedTarget:0}),ea=fr(zu),lh=b({},ms,{animationName:0,elapsedTime:0,pseudoElement:0}),dl=fr(lh),Qp=b({},ms,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),uh=fr(Qp),fo=b({},ms,{data:0}),Fu=fr(fo),ch={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dh(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Hu[i])?!!a[i]:!1}function ta(){return dh}var hh=b({},Js,{key:function(i){if(i.key){var a=ch[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=lo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?qu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ta,charCode:function(i){return i.type==="keypress"?lo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?lo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),fh=fr(hh),ps=b({},co,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gu=fr(ps),mh=b({},Js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ta}),ph=fr(mh),gh=b({},ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),hl=fr(gh),Rr=b({},co,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),vh=fr(Rr),yh=b({},ms,{newState:0,oldState:0}),na=fr(yh),m=[9,13,27,32],E=ki&&"CompositionEvent"in window,w=null;ki&&"documentMode"in document&&(w=document.documentMode);var j=ki&&"TextEvent"in window&&!w,Y=ki&&(!E||w&&8<w&&11>=w),te=" ",me=!1;function Ct(i,a){switch(i){case"keyup":return m.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cn(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var et=!1;function Kn(i,a){switch(i){case"compositionend":return Cn(a);case"keypress":return a.which!==32?null:(me=!0,te);case"textInput":return i=a.data,i===te&&me?null:i;default:return null}}function Yn(i,a){if(et)return i==="compositionend"||!E&&Ct(i,a)?(i=Ws(),Xi=ul=Zr=null,et=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Y&&a.locale!=="ko"?null:a.data;default:return null}}var ra={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Br(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!ra[i.type]:a==="textarea"}function mo(i,a,l,c){fs?Jr?Jr.push(c):Jr=[c]:fs=c,a=lf(a,"onChange"),0<a.length&&(l=new uo("onChange","change",null,l,c),i.push({event:l,listeners:a}))}var gs=null,$u=null;function Dk(i){yT(i,0)}function bh(i){var a=er(i);if(Re(a))return i}function Vx(i,a){if(i==="change")return a}var Lx=!1;if(ki){var Wp;if(ki){var Xp="oninput"in document;if(!Xp){var Ux=document.createElement("div");Ux.setAttribute("oninput","return;"),Xp=typeof Ux.oninput=="function"}Wp=Xp}else Wp=!1;Lx=Wp&&(!document.documentMode||9<document.documentMode)}function Bx(){gs&&(gs.detachEvent("onpropertychange",zx),$u=gs=null)}function zx(i){if(i.propertyName==="value"&&bh($u)){var a=[];mo(a,$u,i,ll(i)),ih(Dk,a)}}function jk(i,a,l){i==="focusin"?(Bx(),gs=a,$u=l,gs.attachEvent("onpropertychange",zx)):i==="focusout"&&Bx()}function Mk(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return bh($u)}function Pk(i,a){if(i==="click")return bh(a)}function Vk(i,a){if(i==="input"||i==="change")return bh(a)}function Lk(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var ei=typeof Object.is=="function"?Object.is:Lk;function Ku(i,a){if(ei(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),c=Object.keys(a);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var p=l[c];if(!ze.call(a,p)||!ei(i[p],a[p]))return!1}return!0}function Fx(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function qx(i,a){var l=Fx(i);i=0;for(var c;l;){if(l.nodeType===3){if(c=i+l.textContent.length,i<=a&&c>=a)return{node:l,offset:a-i};i=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Fx(l)}}function Hx(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?Hx(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Gx(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=Je(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=Je(i.document)}return a}function Jp(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var Uk=ki&&"documentMode"in document&&11>=document.documentMode,fl=null,Zp=null,Yu=null,eg=!1;function $x(i,a,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;eg||fl==null||fl!==Je(c)||(c=fl,"selectionStart"in c&&Jp(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Yu&&Ku(Yu,c)||(Yu=c,c=lf(Zp,"onSelect"),0<c.length&&(a=new uo("onSelect","select",null,a,l),i.push({event:a,listeners:c}),a.target=fl)))}function po(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var ml={animationend:po("Animation","AnimationEnd"),animationiteration:po("Animation","AnimationIteration"),animationstart:po("Animation","AnimationStart"),transitionrun:po("Transition","TransitionRun"),transitionstart:po("Transition","TransitionStart"),transitioncancel:po("Transition","TransitionCancel"),transitionend:po("Transition","TransitionEnd")},tg={},Kx={};ki&&(Kx=document.createElement("div").style,"AnimationEvent"in window||(delete ml.animationend.animation,delete ml.animationiteration.animation,delete ml.animationstart.animation),"TransitionEvent"in window||delete ml.transitionend.transition);function go(i){if(tg[i])return tg[i];if(!ml[i])return i;var a=ml[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in Kx)return tg[i]=a[l];return i}var Yx=go("animationend"),Qx=go("animationiteration"),Wx=go("animationstart"),Bk=go("transitionrun"),zk=go("transitionstart"),Fk=go("transitioncancel"),Xx=go("transitionend"),Jx=new Map,ng="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ng.push("scrollEnd");function Oi(i,a){Jx.set(i,a),Gn(a,[i])}var xh=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},pi=[],pl=0,rg=0;function Eh(){for(var i=pl,a=rg=pl=0;a<i;){var l=pi[a];pi[a++]=null;var c=pi[a];pi[a++]=null;var p=pi[a];pi[a++]=null;var y=pi[a];if(pi[a++]=null,c!==null&&p!==null){var T=c.pending;T===null?p.next=p:(p.next=T.next,T.next=p),c.pending=p}y!==0&&Zx(l,p,y)}}function _h(i,a,l,c){pi[pl++]=i,pi[pl++]=a,pi[pl++]=l,pi[pl++]=c,rg|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function ig(i,a,l,c){return _h(i,a,l,c),Th(i)}function vo(i,a){return _h(i,null,null,a),Th(i)}function Zx(i,a,l){i.lanes|=l;var c=i.alternate;c!==null&&(c.lanes|=l);for(var p=!1,y=i.return;y!==null;)y.childLanes|=l,c=y.alternate,c!==null&&(c.childLanes|=l),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(p=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,p&&a!==null&&(p=31-xe(l),i=y.hiddenUpdates,c=i[p],c===null?i[p]=[a]:c.push(a),a.lane=l|536870912),y):null}function Th(i){if(50<gc)throw gc=0,fv=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var gl={};function qk(i,a,l,c){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ti(i,a,l,c){return new qk(i,a,l,c)}function sg(i){return i=i.prototype,!(!i||!i.isReactComponent)}function vs(i,a){var l=i.alternate;return l===null?(l=ti(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function eE(i,a){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function wh(i,a,l,c,p,y){var T=0;if(c=i,typeof i=="function")sg(i)&&(T=1);else if(typeof i=="string")T=YO(i,l,fe.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case N:return i=ti(31,l,a,p),i.elementType=N,i.lanes=y,i;case R:return yo(l.children,p,y,a);case M:T=8,p|=24;break;case U:return i=ti(12,l,a,p|2),i.elementType=U,i.lanes=y,i;case G:return i=ti(13,l,a,p),i.elementType=G,i.lanes=y,i;case q:return i=ti(19,l,a,p),i.elementType=q,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case B:T=10;break e;case O:T=9;break e;case H:T=11;break e;case C:T=14;break e;case S:T=16,c=null;break e}T=29,l=Error(r(130,i===null?"null":typeof i,"")),c=null}return a=ti(T,l,a,p),a.elementType=i,a.type=c,a.lanes=y,a}function yo(i,a,l,c){return i=ti(7,i,c,a),i.lanes=l,i}function ag(i,a,l){return i=ti(6,i,null,a),i.lanes=l,i}function tE(i){var a=ti(18,null,null,0);return a.stateNode=i,a}function og(i,a,l){return a=ti(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var nE=new WeakMap;function gi(i,a){if(typeof i=="object"&&i!==null){var l=nE.get(i);return l!==void 0?l:(a={value:i,source:a,stack:an(a)},nE.set(i,a),a)}return{value:i,source:a,stack:an(a)}}var vl=[],yl=0,Sh=null,Qu=0,vi=[],yi=0,ia=null,Ji=1,Zi="";function ys(i,a){vl[yl++]=Qu,vl[yl++]=Sh,Sh=i,Qu=a}function rE(i,a,l){vi[yi++]=Ji,vi[yi++]=Zi,vi[yi++]=ia,ia=i;var c=Ji;i=Zi;var p=32-xe(c)-1;c&=~(1<<p),l+=1;var y=32-xe(a)+p;if(30<y){var T=p-p%5;y=(c&(1<<T)-1).toString(32),c>>=T,p-=T,Ji=1<<32-xe(a)+p|l<<p|c,Zi=y+i}else Ji=1<<y|l<<p|c,Zi=i}function lg(i){i.return!==null&&(ys(i,1),rE(i,1,0))}function ug(i){for(;i===Sh;)Sh=vl[--yl],vl[yl]=null,Qu=vl[--yl],vl[yl]=null;for(;i===ia;)ia=vi[--yi],vi[yi]=null,Zi=vi[--yi],vi[yi]=null,Ji=vi[--yi],vi[yi]=null}function iE(i,a){vi[yi++]=Ji,vi[yi++]=Zi,vi[yi++]=ia,Ji=a.id,Zi=a.overflow,ia=i}var rr=null,Yt=null,ft=!1,sa=null,bi=!1,cg=Error(r(519));function aa(i){var a=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Wu(gi(a,i)),cg}function sE(i){var a=i.stateNode,l=i.type,c=i.memoizedProps;switch(a[bt]=i,a[Me]=c,l){case"dialog":at("cancel",a),at("close",a);break;case"iframe":case"object":case"embed":at("load",a);break;case"video":case"audio":for(l=0;l<yc.length;l++)at(yc[l],a);break;case"source":at("error",a);break;case"img":case"image":case"link":at("error",a),at("load",a);break;case"details":at("toggle",a);break;case"input":at("invalid",a),Ni(a,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":at("invalid",a);break;case"textarea":at("invalid",a),Qs(a,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||c.suppressHydrationWarning===!0||_T(a.textContent,l)?(c.popover!=null&&(at("beforetoggle",a),at("toggle",a)),c.onScroll!=null&&at("scroll",a),c.onScrollEnd!=null&&at("scrollend",a),c.onClick!=null&&(a.onclick=$n),a=!0):a=!1,a||aa(i,!0)}function aE(i){for(rr=i.return;rr;)switch(rr.tag){case 5:case 31:case 13:bi=!1;return;case 27:case 3:bi=!0;return;default:rr=rr.return}}function bl(i){if(i!==rr)return!1;if(!ft)return aE(i),ft=!0,!1;var a=i.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||Rv(i.type,i.memoizedProps)),l=!l),l&&Yt&&aa(i),aE(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));Yt=kT(i)}else if(a===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));Yt=kT(i)}else a===27?(a=Yt,xa(i.type)?(i=Dv,Dv=null,Yt=i):Yt=a):Yt=rr?Ei(i.stateNode.nextSibling):null;return!0}function bo(){Yt=rr=null,ft=!1}function dg(){var i=sa;return i!==null&&(Hr===null?Hr=i:Hr.push.apply(Hr,i),sa=null),i}function Wu(i){sa===null?sa=[i]:sa.push(i)}var hg=z(null),xo=null,bs=null;function oa(i,a,l){de(hg,a._currentValue),a._currentValue=l}function xs(i){i._currentValue=hg.current,J(hg)}function fg(i,a,l){for(;i!==null;){var c=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),i===l)break;i=i.return}}function mg(i,a,l,c){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var y=p.dependencies;if(y!==null){var T=p.child;y=y.firstContext;e:for(;y!==null;){var I=y;y=p;for(var F=0;F<a.length;F++)if(I.context===a[F]){y.lanes|=l,I=y.alternate,I!==null&&(I.lanes|=l),fg(y.return,l,i),c||(T=null);break e}y=I.next}}else if(p.tag===18){if(T=p.return,T===null)throw Error(r(341));T.lanes|=l,y=T.alternate,y!==null&&(y.lanes|=l),fg(T,l,i),T=null}else T=p.child;if(T!==null)T.return=p;else for(T=p;T!==null;){if(T===i){T=null;break}if(p=T.sibling,p!==null){p.return=T.return,T=p;break}T=T.return}p=T}}function xl(i,a,l,c){i=null;for(var p=a,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var T=p.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var I=p.type;ei(p.pendingProps.value,T.value)||(i!==null?i.push(I):i=[I])}}else if(p===qe.current){if(T=p.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(Tc):i=[Tc])}p=p.return}i!==null&&mg(a,i,l,c),a.flags|=262144}function Ah(i){for(i=i.firstContext;i!==null;){if(!ei(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Eo(i){xo=i,bs=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function ir(i){return oE(xo,i)}function Ch(i,a){return xo===null&&Eo(i),oE(i,a)}function oE(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},bs===null){if(i===null)throw Error(r(308));bs=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else bs=bs.next=a;return l}var Hk=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,c){i.push(c)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},Gk=t.unstable_scheduleCallback,$k=t.unstable_NormalPriority,Rn={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pg(){return{controller:new Hk,data:new Map,refCount:0}}function Xu(i){i.refCount--,i.refCount===0&&Gk($k,function(){i.controller.abort()})}var Ju=null,gg=0,El=0,_l=null;function Kk(i,a){if(Ju===null){var l=Ju=[];gg=0,El=bv(),_l={status:"pending",value:void 0,then:function(c){l.push(c)}}}return gg++,a.then(lE,lE),a}function lE(){if(--gg===0&&Ju!==null){_l!==null&&(_l.status="fulfilled");var i=Ju;Ju=null,El=0,_l=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function Yk(i,a){var l=[],c={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return i.then(function(){c.status="fulfilled",c.value=a;for(var p=0;p<l.length;p++)(0,l[p])(a)},function(p){for(c.status="rejected",c.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),c}var uE=X.S;X.S=function(i,a){$_=vt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&Kk(i,a),uE!==null&&uE(i,a)};var _o=z(null);function vg(){var i=_o.current;return i!==null?i:Vt.pooledCache}function Rh(i,a){a===null?de(_o,_o.current):de(_o,a.pool)}function cE(){var i=vg();return i===null?null:{parent:Rn._currentValue,pool:i}}var Tl=Error(r(460)),yg=Error(r(474)),Ih=Error(r(542)),Nh={then:function(){}};function dE(i){return i=i.status,i==="fulfilled"||i==="rejected"}function hE(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then($n,$n),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,mE(i),i;default:if(typeof a.status=="string")a.then($n,$n);else{if(i=Vt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(c){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=c}},function(c){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=c}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,mE(i),i}throw wo=a,Tl}}function To(i){try{var a=i._init;return a(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(wo=l,Tl):l}}var wo=null;function fE(){if(wo===null)throw Error(r(459));var i=wo;return wo=null,i}function mE(i){if(i===Tl||i===Ih)throw Error(r(483))}var wl=null,Zu=0;function kh(i){var a=Zu;return Zu+=1,wl===null&&(wl=[]),hE(wl,i,a)}function ec(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function Oh(i,a){throw a.$$typeof===x?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function pE(i){function a(K,$){if(i){var Q=K.deletions;Q===null?(K.deletions=[$],K.flags|=16):Q.push($)}}function l(K,$){if(!i)return null;for(;$!==null;)a(K,$),$=$.sibling;return null}function c(K){for(var $=new Map;K!==null;)K.key!==null?$.set(K.key,K):$.set(K.index,K),K=K.sibling;return $}function p(K,$){return K=vs(K,$),K.index=0,K.sibling=null,K}function y(K,$,Q){return K.index=Q,i?(Q=K.alternate,Q!==null?(Q=Q.index,Q<$?(K.flags|=67108866,$):Q):(K.flags|=67108866,$)):(K.flags|=1048576,$)}function T(K){return i&&K.alternate===null&&(K.flags|=67108866),K}function I(K,$,Q,se){return $===null||$.tag!==6?($=ag(Q,K.mode,se),$.return=K,$):($=p($,Q),$.return=K,$)}function F(K,$,Q,se){var ke=Q.type;return ke===R?ne(K,$,Q.props.children,se,Q.key):$!==null&&($.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===S&&To(ke)===$.type)?($=p($,Q.props),ec($,Q),$.return=K,$):($=wh(Q.type,Q.key,Q.props,null,K.mode,se),ec($,Q),$.return=K,$)}function W(K,$,Q,se){return $===null||$.tag!==4||$.stateNode.containerInfo!==Q.containerInfo||$.stateNode.implementation!==Q.implementation?($=og(Q,K.mode,se),$.return=K,$):($=p($,Q.children||[]),$.return=K,$)}function ne(K,$,Q,se,ke){return $===null||$.tag!==7?($=yo(Q,K.mode,se,ke),$.return=K,$):($=p($,Q),$.return=K,$)}function oe(K,$,Q){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=ag(""+$,K.mode,Q),$.return=K,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case _:return Q=wh($.type,$.key,$.props,null,K.mode,Q),ec(Q,$),Q.return=K,Q;case A:return $=og($,K.mode,Q),$.return=K,$;case S:return $=To($),oe(K,$,Q)}if(Ie($)||L($))return $=yo($,K.mode,Q,null),$.return=K,$;if(typeof $.then=="function")return oe(K,kh($),Q);if($.$$typeof===B)return oe(K,Ch(K,$),Q);Oh(K,$)}return null}function Z(K,$,Q,se){var ke=$!==null?$.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return ke!==null?null:I(K,$,""+Q,se);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case _:return Q.key===ke?F(K,$,Q,se):null;case A:return Q.key===ke?W(K,$,Q,se):null;case S:return Q=To(Q),Z(K,$,Q,se)}if(Ie(Q)||L(Q))return ke!==null?null:ne(K,$,Q,se,null);if(typeof Q.then=="function")return Z(K,$,kh(Q),se);if(Q.$$typeof===B)return Z(K,$,Ch(K,Q),se);Oh(K,Q)}return null}function ee(K,$,Q,se,ke){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return K=K.get(Q)||null,I($,K,""+se,ke);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case _:return K=K.get(se.key===null?Q:se.key)||null,F($,K,se,ke);case A:return K=K.get(se.key===null?Q:se.key)||null,W($,K,se,ke);case S:return se=To(se),ee(K,$,Q,se,ke)}if(Ie(se)||L(se))return K=K.get(Q)||null,ne($,K,se,ke,null);if(typeof se.then=="function")return ee(K,$,Q,kh(se),ke);if(se.$$typeof===B)return ee(K,$,Q,Ch($,se),ke);Oh($,se)}return null}function Se(K,$,Q,se){for(var ke=null,xt=null,Ce=$,Ze=$=0,ut=null;Ce!==null&&Ze<Q.length;Ze++){Ce.index>Ze?(ut=Ce,Ce=null):ut=Ce.sibling;var Et=Z(K,Ce,Q[Ze],se);if(Et===null){Ce===null&&(Ce=ut);break}i&&Ce&&Et.alternate===null&&a(K,Ce),$=y(Et,$,Ze),xt===null?ke=Et:xt.sibling=Et,xt=Et,Ce=ut}if(Ze===Q.length)return l(K,Ce),ft&&ys(K,Ze),ke;if(Ce===null){for(;Ze<Q.length;Ze++)Ce=oe(K,Q[Ze],se),Ce!==null&&($=y(Ce,$,Ze),xt===null?ke=Ce:xt.sibling=Ce,xt=Ce);return ft&&ys(K,Ze),ke}for(Ce=c(Ce);Ze<Q.length;Ze++)ut=ee(Ce,K,Ze,Q[Ze],se),ut!==null&&(i&&ut.alternate!==null&&Ce.delete(ut.key===null?Ze:ut.key),$=y(ut,$,Ze),xt===null?ke=ut:xt.sibling=ut,xt=ut);return i&&Ce.forEach(function(Sa){return a(K,Sa)}),ft&&ys(K,Ze),ke}function Pe(K,$,Q,se){if(Q==null)throw Error(r(151));for(var ke=null,xt=null,Ce=$,Ze=$=0,ut=null,Et=Q.next();Ce!==null&&!Et.done;Ze++,Et=Q.next()){Ce.index>Ze?(ut=Ce,Ce=null):ut=Ce.sibling;var Sa=Z(K,Ce,Et.value,se);if(Sa===null){Ce===null&&(Ce=ut);break}i&&Ce&&Sa.alternate===null&&a(K,Ce),$=y(Sa,$,Ze),xt===null?ke=Sa:xt.sibling=Sa,xt=Sa,Ce=ut}if(Et.done)return l(K,Ce),ft&&ys(K,Ze),ke;if(Ce===null){for(;!Et.done;Ze++,Et=Q.next())Et=oe(K,Et.value,se),Et!==null&&($=y(Et,$,Ze),xt===null?ke=Et:xt.sibling=Et,xt=Et);return ft&&ys(K,Ze),ke}for(Ce=c(Ce);!Et.done;Ze++,Et=Q.next())Et=ee(Ce,K,Ze,Et.value,se),Et!==null&&(i&&Et.alternate!==null&&Ce.delete(Et.key===null?Ze:Et.key),$=y(Et,$,Ze),xt===null?ke=Et:xt.sibling=Et,xt=Et);return i&&Ce.forEach(function(sD){return a(K,sD)}),ft&&ys(K,Ze),ke}function Mt(K,$,Q,se){if(typeof Q=="object"&&Q!==null&&Q.type===R&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case _:e:{for(var ke=Q.key;$!==null;){if($.key===ke){if(ke=Q.type,ke===R){if($.tag===7){l(K,$.sibling),se=p($,Q.props.children),se.return=K,K=se;break e}}else if($.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===S&&To(ke)===$.type){l(K,$.sibling),se=p($,Q.props),ec(se,Q),se.return=K,K=se;break e}l(K,$);break}else a(K,$);$=$.sibling}Q.type===R?(se=yo(Q.props.children,K.mode,se,Q.key),se.return=K,K=se):(se=wh(Q.type,Q.key,Q.props,null,K.mode,se),ec(se,Q),se.return=K,K=se)}return T(K);case A:e:{for(ke=Q.key;$!==null;){if($.key===ke)if($.tag===4&&$.stateNode.containerInfo===Q.containerInfo&&$.stateNode.implementation===Q.implementation){l(K,$.sibling),se=p($,Q.children||[]),se.return=K,K=se;break e}else{l(K,$);break}else a(K,$);$=$.sibling}se=og(Q,K.mode,se),se.return=K,K=se}return T(K);case S:return Q=To(Q),Mt(K,$,Q,se)}if(Ie(Q))return Se(K,$,Q,se);if(L(Q)){if(ke=L(Q),typeof ke!="function")throw Error(r(150));return Q=ke.call(Q),Pe(K,$,Q,se)}if(typeof Q.then=="function")return Mt(K,$,kh(Q),se);if(Q.$$typeof===B)return Mt(K,$,Ch(K,Q),se);Oh(K,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,$!==null&&$.tag===6?(l(K,$.sibling),se=p($,Q),se.return=K,K=se):(l(K,$),se=ag(Q,K.mode,se),se.return=K,K=se),T(K)):l(K,$)}return function(K,$,Q,se){try{Zu=0;var ke=Mt(K,$,Q,se);return wl=null,ke}catch(Ce){if(Ce===Tl||Ce===Ih)throw Ce;var xt=ti(29,Ce,null,K.mode);return xt.lanes=se,xt.return=K,xt}finally{}}}var So=pE(!0),gE=pE(!1),la=!1;function bg(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xg(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ua(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ca(i,a,l){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(wt&2)!==0){var p=c.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),c.pending=a,a=Th(i),Zx(i,null,l),a}return _h(i,c,a,l),Th(i)}function tc(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var c=a.lanes;c&=i.pendingLanes,l|=c,a.lanes=l,zt(i,l)}}function Eg(i,a){var l=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?p=y=T:y=y.next=T,l=l.next}while(l!==null);y===null?p=y=a:y=y.next=a}else p=y=a;l={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:c.shared,callbacks:c.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var _g=!1;function nc(){if(_g){var i=_l;if(i!==null)throw i}}function rc(i,a,l,c){_g=!1;var p=i.updateQueue;la=!1;var y=p.firstBaseUpdate,T=p.lastBaseUpdate,I=p.shared.pending;if(I!==null){p.shared.pending=null;var F=I,W=F.next;F.next=null,T===null?y=W:T.next=W,T=F;var ne=i.alternate;ne!==null&&(ne=ne.updateQueue,I=ne.lastBaseUpdate,I!==T&&(I===null?ne.firstBaseUpdate=W:I.next=W,ne.lastBaseUpdate=F))}if(y!==null){var oe=p.baseState;T=0,ne=W=F=null,I=y;do{var Z=I.lane&-536870913,ee=Z!==I.lane;if(ee?(lt&Z)===Z:(c&Z)===Z){Z!==0&&Z===El&&(_g=!0),ne!==null&&(ne=ne.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var Se=i,Pe=I;Z=a;var Mt=l;switch(Pe.tag){case 1:if(Se=Pe.payload,typeof Se=="function"){oe=Se.call(Mt,oe,Z);break e}oe=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Pe.payload,Z=typeof Se=="function"?Se.call(Mt,oe,Z):Se,Z==null)break e;oe=b({},oe,Z);break e;case 2:la=!0}}Z=I.callback,Z!==null&&(i.flags|=64,ee&&(i.flags|=8192),ee=p.callbacks,ee===null?p.callbacks=[Z]:ee.push(Z))}else ee={lane:Z,tag:I.tag,payload:I.payload,callback:I.callback,next:null},ne===null?(W=ne=ee,F=oe):ne=ne.next=ee,T|=Z;if(I=I.next,I===null){if(I=p.shared.pending,I===null)break;ee=I,I=ee.next,ee.next=null,p.lastBaseUpdate=ee,p.shared.pending=null}}while(!0);ne===null&&(F=oe),p.baseState=F,p.firstBaseUpdate=W,p.lastBaseUpdate=ne,y===null&&(p.shared.lanes=0),pa|=T,i.lanes=T,i.memoizedState=oe}}function vE(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function yE(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)vE(l[i],a)}var Sl=z(null),Dh=z(0);function bE(i,a){i=Is,de(Dh,i),de(Sl,a),Is=i|a.baseLanes}function Tg(){de(Dh,Is),de(Sl,Sl.current)}function wg(){Is=Dh.current,J(Sl),J(Dh)}var ni=z(null),xi=null;function da(i){var a=i.alternate;de(xn,xn.current&1),de(ni,i),xi===null&&(a===null||Sl.current!==null||a.memoizedState!==null)&&(xi=i)}function Sg(i){de(xn,xn.current),de(ni,i),xi===null&&(xi=i)}function xE(i){i.tag===22?(de(xn,xn.current),de(ni,i),xi===null&&(xi=i)):ha()}function ha(){de(xn,xn.current),de(ni,ni.current)}function ri(i){J(ni),xi===i&&(xi=null),J(xn)}var xn=z(0);function jh(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||kv(l)||Ov(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Es=0,Qe=null,Dt=null,In=null,Mh=!1,Al=!1,Ao=!1,Ph=0,ic=0,Cl=null,Qk=0;function mn(){throw Error(r(321))}function Ag(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!ei(i[l],a[l]))return!1;return!0}function Cg(i,a,l,c,p,y){return Es=y,Qe=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,X.H=i===null||i.memoizedState===null?r_:Fg,Ao=!1,y=l(c,p),Ao=!1,Al&&(y=_E(a,l,c,p)),EE(i),y}function EE(i){X.H=oc;var a=Dt!==null&&Dt.next!==null;if(Es=0,In=Dt=Qe=null,Mh=!1,ic=0,Cl=null,a)throw Error(r(300));i===null||Nn||(i=i.dependencies,i!==null&&Ah(i)&&(Nn=!0))}function _E(i,a,l,c){Qe=i;var p=0;do{if(Al&&(Cl=null),ic=0,Al=!1,25<=p)throw Error(r(301));if(p+=1,In=Dt=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}X.H=i_,y=a(l,c)}while(Al);return y}function Wk(){var i=X.H,a=i.useState()[0];return a=typeof a.then=="function"?sc(a):a,i=i.useState()[0],(Dt!==null?Dt.memoizedState:null)!==i&&(Qe.flags|=1024),a}function Rg(){var i=Ph!==0;return Ph=0,i}function Ig(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function Ng(i){if(Mh){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Mh=!1}Es=0,In=Dt=Qe=null,Al=!1,ic=Ph=0,Cl=null}function Ir(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return In===null?Qe.memoizedState=In=i:In=In.next=i,In}function En(){if(Dt===null){var i=Qe.alternate;i=i!==null?i.memoizedState:null}else i=Dt.next;var a=In===null?Qe.memoizedState:In.next;if(a!==null)In=a,Dt=i;else{if(i===null)throw Qe.alternate===null?Error(r(467)):Error(r(310));Dt=i,i={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},In===null?Qe.memoizedState=In=i:In=In.next=i}return In}function Vh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function sc(i){var a=ic;return ic+=1,Cl===null&&(Cl=[]),i=hE(Cl,i,a),a=Qe,(In===null?a.memoizedState:In.next)===null&&(a=a.alternate,X.H=a===null||a.memoizedState===null?r_:Fg),i}function Lh(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return sc(i);if(i.$$typeof===B)return ir(i)}throw Error(r(438,String(i)))}function kg(i){var a=null,l=Qe.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var c=Qe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(a={data:c.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Vh(),Qe.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),c=0;c<i;c++)l[c]=P;return a.index++,l}function _s(i,a){return typeof a=="function"?a(i):a}function Uh(i){var a=En();return Og(a,Dt,i)}function Og(i,a,l){var c=i.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=l;var p=i.baseQueue,y=c.pending;if(y!==null){if(p!==null){var T=p.next;p.next=y.next,y.next=T}a.baseQueue=p=y,c.pending=null}if(y=i.baseState,p===null)i.memoizedState=y;else{a=p.next;var I=T=null,F=null,W=a,ne=!1;do{var oe=W.lane&-536870913;if(oe!==W.lane?(lt&oe)===oe:(Es&oe)===oe){var Z=W.revertLane;if(Z===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),oe===El&&(ne=!0);else if((Es&Z)===Z){W=W.next,Z===El&&(ne=!0);continue}else oe={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},F===null?(I=F=oe,T=y):F=F.next=oe,Qe.lanes|=Z,pa|=Z;oe=W.action,Ao&&l(y,oe),y=W.hasEagerState?W.eagerState:l(y,oe)}else Z={lane:oe,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},F===null?(I=F=Z,T=y):F=F.next=Z,Qe.lanes|=oe,pa|=oe;W=W.next}while(W!==null&&W!==a);if(F===null?T=y:F.next=I,!ei(y,i.memoizedState)&&(Nn=!0,ne&&(l=_l,l!==null)))throw l;i.memoizedState=y,i.baseState=T,i.baseQueue=F,c.lastRenderedState=y}return p===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function Dg(i){var a=En(),l=a.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var c=l.dispatch,p=l.pending,y=a.memoizedState;if(p!==null){l.pending=null;var T=p=p.next;do y=i(y,T.action),T=T.next;while(T!==p);ei(y,a.memoizedState)||(Nn=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),l.lastRenderedState=y}return[y,c]}function TE(i,a,l){var c=Qe,p=En(),y=ft;if(y){if(l===void 0)throw Error(r(407));l=l()}else l=a();var T=!ei((Dt||p).memoizedState,l);if(T&&(p.memoizedState=l,Nn=!0),p=p.queue,Pg(AE.bind(null,c,p,i),[i]),p.getSnapshot!==a||T||In!==null&&In.memoizedState.tag&1){if(c.flags|=2048,Rl(9,{destroy:void 0},SE.bind(null,c,p,l,a),null),Vt===null)throw Error(r(349));y||(Es&127)!==0||wE(c,a,l)}return l}function wE(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=Qe.updateQueue,a===null?(a=Vh(),Qe.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function SE(i,a,l,c){a.value=l,a.getSnapshot=c,CE(a)&&RE(i)}function AE(i,a,l){return l(function(){CE(a)&&RE(i)})}function CE(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!ei(i,l)}catch{return!0}}function RE(i){var a=vo(i,2);a!==null&&Gr(a,i,2)}function jg(i){var a=Ir();if(typeof i=="function"){var l=i;if(i=l(),Ao){ae(!0);try{l()}finally{ae(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:i},a}function IE(i,a,l,c){return i.baseState=l,Og(i,Dt,typeof c=="function"?c:_s)}function Xk(i,a,l,c,p){if(Fh(i))throw Error(r(485));if(i=a.action,i!==null){var y={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};X.T!==null?l(!0):y.isTransition=!1,c(y),l=a.pending,l===null?(y.next=a.pending=y,NE(a,y)):(y.next=l.next,a.pending=l.next=y)}}function NE(i,a){var l=a.action,c=a.payload,p=i.state;if(a.isTransition){var y=X.T,T={};X.T=T;try{var I=l(p,c),F=X.S;F!==null&&F(T,I),kE(i,a,I)}catch(W){Mg(i,a,W)}finally{y!==null&&T.types!==null&&(y.types=T.types),X.T=y}}else try{y=l(p,c),kE(i,a,y)}catch(W){Mg(i,a,W)}}function kE(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){OE(i,a,c)},function(c){return Mg(i,a,c)}):OE(i,a,l)}function OE(i,a,l){a.status="fulfilled",a.value=l,DE(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,NE(i,l)))}function Mg(i,a,l){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do a.status="rejected",a.reason=l,DE(a),a=a.next;while(a!==c)}i.action=null}function DE(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function jE(i,a){return a}function ME(i,a){if(ft){var l=Vt.formState;if(l!==null){e:{var c=Qe;if(ft){if(Yt){t:{for(var p=Yt,y=bi;p.nodeType!==8;){if(!y){p=null;break t}if(p=Ei(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){Yt=Ei(p.nextSibling),c=p.data==="F!";break e}}aa(c)}c=!1}c&&(a=l[0])}}return l=Ir(),l.memoizedState=l.baseState=a,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jE,lastRenderedState:a},l.queue=c,l=e_.bind(null,Qe,c),c.dispatch=l,c=jg(!1),y=zg.bind(null,Qe,!1,c.queue),c=Ir(),p={state:a,dispatch:null,action:i,pending:null},c.queue=p,l=Xk.bind(null,Qe,p,y,l),p.dispatch=l,c.memoizedState=i,[a,l,!1]}function PE(i){var a=En();return VE(a,Dt,i)}function VE(i,a,l){if(a=Og(i,a,jE)[0],i=Uh(_s)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var c=sc(a)}catch(T){throw T===Tl?Ih:T}else c=a;a=En();var p=a.queue,y=p.dispatch;return l!==a.memoizedState&&(Qe.flags|=2048,Rl(9,{destroy:void 0},Jk.bind(null,p,l),null)),[c,y,i]}function Jk(i,a){i.action=a}function LE(i){var a=En(),l=Dt;if(l!==null)return VE(a,l,i);En(),a=a.memoizedState,l=En();var c=l.queue.dispatch;return l.memoizedState=i,[a,c,!1]}function Rl(i,a,l,c){return i={tag:i,create:l,deps:c,inst:a,next:null},a=Qe.updateQueue,a===null&&(a=Vh(),Qe.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(c=l.next,l.next=i,i.next=c,a.lastEffect=i),i}function UE(){return En().memoizedState}function Bh(i,a,l,c){var p=Ir();Qe.flags|=i,p.memoizedState=Rl(1|a,{destroy:void 0},l,c===void 0?null:c)}function zh(i,a,l,c){var p=En();c=c===void 0?null:c;var y=p.memoizedState.inst;Dt!==null&&c!==null&&Ag(c,Dt.memoizedState.deps)?p.memoizedState=Rl(a,y,l,c):(Qe.flags|=i,p.memoizedState=Rl(1|a,y,l,c))}function BE(i,a){Bh(8390656,8,i,a)}function Pg(i,a){zh(2048,8,i,a)}function Zk(i){Qe.flags|=4;var a=Qe.updateQueue;if(a===null)a=Vh(),Qe.updateQueue=a,a.events=[i];else{var l=a.events;l===null?a.events=[i]:l.push(i)}}function zE(i){var a=En().memoizedState;return Zk({ref:a,nextImpl:i}),function(){if((wt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}function FE(i,a){return zh(4,2,i,a)}function qE(i,a){return zh(4,4,i,a)}function HE(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function GE(i,a,l){l=l!=null?l.concat([i]):null,zh(4,4,HE.bind(null,a,i),l)}function Vg(){}function $E(i,a){var l=En();a=a===void 0?null:a;var c=l.memoizedState;return a!==null&&Ag(a,c[1])?c[0]:(l.memoizedState=[i,a],i)}function KE(i,a){var l=En();a=a===void 0?null:a;var c=l.memoizedState;if(a!==null&&Ag(a,c[1]))return c[0];if(c=i(),Ao){ae(!0);try{i()}finally{ae(!1)}}return l.memoizedState=[c,a],c}function Lg(i,a,l){return l===void 0||(Es&1073741824)!==0&&(lt&261930)===0?i.memoizedState=a:(i.memoizedState=l,i=Y_(),Qe.lanes|=i,pa|=i,l)}function YE(i,a,l,c){return ei(l,a)?l:Sl.current!==null?(i=Lg(i,l,c),ei(i,a)||(Nn=!0),i):(Es&42)===0||(Es&1073741824)!==0&&(lt&261930)===0?(Nn=!0,i.memoizedState=l):(i=Y_(),Qe.lanes|=i,pa|=i,a)}function QE(i,a,l,c,p){var y=ie.p;ie.p=y!==0&&8>y?y:8;var T=X.T,I={};X.T=I,zg(i,!1,a,l);try{var F=p(),W=X.S;if(W!==null&&W(I,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var ne=Yk(F,c);ac(i,a,ne,ai(i))}else ac(i,a,c,ai(i))}catch(oe){ac(i,a,{then:function(){},status:"rejected",reason:oe},ai())}finally{ie.p=y,T!==null&&I.types!==null&&(T.types=I.types),X.T=T}}function eO(){}function Ug(i,a,l,c){if(i.tag!==5)throw Error(r(476));var p=WE(i).queue;QE(i,p,a,ce,l===null?eO:function(){return XE(i),l(c)})}function WE(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:ce},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function XE(i){var a=WE(i);a.next===null&&(a=i.alternate.memoizedState),ac(i,a.next.queue,{},ai())}function Bg(){return ir(Tc)}function JE(){return En().memoizedState}function ZE(){return En().memoizedState}function tO(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=ai();i=ua(l);var c=ca(a,i,l);c!==null&&(Gr(c,a,l),tc(c,a,l)),a={cache:pg()},i.payload=a;return}a=a.return}}function nO(i,a,l){var c=ai();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Fh(i)?t_(a,l):(l=ig(i,a,l,c),l!==null&&(Gr(l,i,c),n_(l,a,c)))}function e_(i,a,l){var c=ai();ac(i,a,l,c)}function ac(i,a,l,c){var p={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Fh(i))t_(a,p);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var T=a.lastRenderedState,I=y(T,l);if(p.hasEagerState=!0,p.eagerState=I,ei(I,T))return _h(i,a,p,0),Vt===null&&Eh(),!1}catch{}finally{}if(l=ig(i,a,p,c),l!==null)return Gr(l,i,c),n_(l,a,c),!0}return!1}function zg(i,a,l,c){if(c={lane:2,revertLane:bv(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Fh(i)){if(a)throw Error(r(479))}else a=ig(i,l,c,2),a!==null&&Gr(a,i,2)}function Fh(i){var a=i.alternate;return i===Qe||a!==null&&a===Qe}function t_(i,a){Al=Mh=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function n_(i,a,l){if((l&4194048)!==0){var c=a.lanes;c&=i.pendingLanes,l|=c,a.lanes=l,zt(i,l)}}var oc={readContext:ir,use:Lh,useCallback:mn,useContext:mn,useEffect:mn,useImperativeHandle:mn,useLayoutEffect:mn,useInsertionEffect:mn,useMemo:mn,useReducer:mn,useRef:mn,useState:mn,useDebugValue:mn,useDeferredValue:mn,useTransition:mn,useSyncExternalStore:mn,useId:mn,useHostTransitionStatus:mn,useFormState:mn,useActionState:mn,useOptimistic:mn,useMemoCache:mn,useCacheRefresh:mn};oc.useEffectEvent=mn;var r_={readContext:ir,use:Lh,useCallback:function(i,a){return Ir().memoizedState=[i,a===void 0?null:a],i},useContext:ir,useEffect:BE,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,Bh(4194308,4,HE.bind(null,a,i),l)},useLayoutEffect:function(i,a){return Bh(4194308,4,i,a)},useInsertionEffect:function(i,a){Bh(4,2,i,a)},useMemo:function(i,a){var l=Ir();a=a===void 0?null:a;var c=i();if(Ao){ae(!0);try{i()}finally{ae(!1)}}return l.memoizedState=[c,a],c},useReducer:function(i,a,l){var c=Ir();if(l!==void 0){var p=l(a);if(Ao){ae(!0);try{l(a)}finally{ae(!1)}}}else p=a;return c.memoizedState=c.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},c.queue=i,i=i.dispatch=nO.bind(null,Qe,i),[c.memoizedState,i]},useRef:function(i){var a=Ir();return i={current:i},a.memoizedState=i},useState:function(i){i=jg(i);var a=i.queue,l=e_.bind(null,Qe,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:Vg,useDeferredValue:function(i,a){var l=Ir();return Lg(l,i,a)},useTransition:function(){var i=jg(!1);return i=QE.bind(null,Qe,i.queue,!0,!1),Ir().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var c=Qe,p=Ir();if(ft){if(l===void 0)throw Error(r(407));l=l()}else{if(l=a(),Vt===null)throw Error(r(349));(lt&127)!==0||wE(c,a,l)}p.memoizedState=l;var y={value:l,getSnapshot:a};return p.queue=y,BE(AE.bind(null,c,y,i),[i]),c.flags|=2048,Rl(9,{destroy:void 0},SE.bind(null,c,y,l,a),null),l},useId:function(){var i=Ir(),a=Vt.identifierPrefix;if(ft){var l=Zi,c=Ji;l=(c&~(1<<32-xe(c)-1)).toString(32)+l,a="_"+a+"R_"+l,l=Ph++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=Qk++,a="_"+a+"r_"+l.toString(32)+"_";return i.memoizedState=a},useHostTransitionStatus:Bg,useFormState:ME,useActionState:ME,useOptimistic:function(i){var a=Ir();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=zg.bind(null,Qe,!0,l),l.dispatch=a,[i,a]},useMemoCache:kg,useCacheRefresh:function(){return Ir().memoizedState=tO.bind(null,Qe)},useEffectEvent:function(i){var a=Ir(),l={impl:i};return a.memoizedState=l,function(){if((wt&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}},Fg={readContext:ir,use:Lh,useCallback:$E,useContext:ir,useEffect:Pg,useImperativeHandle:GE,useInsertionEffect:FE,useLayoutEffect:qE,useMemo:KE,useReducer:Uh,useRef:UE,useState:function(){return Uh(_s)},useDebugValue:Vg,useDeferredValue:function(i,a){var l=En();return YE(l,Dt.memoizedState,i,a)},useTransition:function(){var i=Uh(_s)[0],a=En().memoizedState;return[typeof i=="boolean"?i:sc(i),a]},useSyncExternalStore:TE,useId:JE,useHostTransitionStatus:Bg,useFormState:PE,useActionState:PE,useOptimistic:function(i,a){var l=En();return IE(l,Dt,i,a)},useMemoCache:kg,useCacheRefresh:ZE};Fg.useEffectEvent=zE;var i_={readContext:ir,use:Lh,useCallback:$E,useContext:ir,useEffect:Pg,useImperativeHandle:GE,useInsertionEffect:FE,useLayoutEffect:qE,useMemo:KE,useReducer:Dg,useRef:UE,useState:function(){return Dg(_s)},useDebugValue:Vg,useDeferredValue:function(i,a){var l=En();return Dt===null?Lg(l,i,a):YE(l,Dt.memoizedState,i,a)},useTransition:function(){var i=Dg(_s)[0],a=En().memoizedState;return[typeof i=="boolean"?i:sc(i),a]},useSyncExternalStore:TE,useId:JE,useHostTransitionStatus:Bg,useFormState:LE,useActionState:LE,useOptimistic:function(i,a){var l=En();return Dt!==null?IE(l,Dt,i,a):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:kg,useCacheRefresh:ZE};i_.useEffectEvent=zE;function qg(i,a,l,c){a=i.memoizedState,l=l(c,a),l=l==null?a:b({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Hg={enqueueSetState:function(i,a,l){i=i._reactInternals;var c=ai(),p=ua(c);p.payload=a,l!=null&&(p.callback=l),a=ca(i,p,c),a!==null&&(Gr(a,i,c),tc(a,i,c))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var c=ai(),p=ua(c);p.tag=1,p.payload=a,l!=null&&(p.callback=l),a=ca(i,p,c),a!==null&&(Gr(a,i,c),tc(a,i,c))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=ai(),c=ua(l);c.tag=2,a!=null&&(c.callback=a),a=ca(i,c,l),a!==null&&(Gr(a,i,l),tc(a,i,l))}};function s_(i,a,l,c,p,y,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,y,T):a.prototype&&a.prototype.isPureReactComponent?!Ku(l,c)||!Ku(p,y):!0}function a_(i,a,l,c){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,c),a.state!==i&&Hg.enqueueReplaceState(a,a.state,null)}function Co(i,a){var l=a;if("ref"in a){l={};for(var c in a)c!=="ref"&&(l[c]=a[c])}if(i=i.defaultProps){l===a&&(l=b({},l));for(var p in i)l[p]===void 0&&(l[p]=i[p])}return l}function o_(i){xh(i)}function l_(i){console.error(i)}function u_(i){xh(i)}function qh(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(c){setTimeout(function(){throw c})}}function c_(i,a,l){try{var c=i.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Gg(i,a,l){return l=ua(l),l.tag=3,l.payload={element:null},l.callback=function(){qh(i,a)},l}function d_(i){return i=ua(i),i.tag=3,i}function h_(i,a,l,c){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var y=c.value;i.payload=function(){return p(y)},i.callback=function(){c_(a,l,c)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){c_(a,l,c),typeof p!="function"&&(ga===null?ga=new Set([this]):ga.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})})}function rO(i,a,l,c,p){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(a=l.alternate,a!==null&&xl(a,l,p,!0),l=ni.current,l!==null){switch(l.tag){case 31:case 13:return xi===null?tf():l.alternate===null&&pn===0&&(pn=3),l.flags&=-257,l.flags|=65536,l.lanes=p,c===Nh?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([c]):a.add(c),gv(i,c,p)),!1;case 22:return l.flags|=65536,c===Nh?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([c]):l.add(c)),gv(i,c,p)),!1}throw Error(r(435,l.tag))}return gv(i,c,p),tf(),!1}if(ft)return a=ni.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,c!==cg&&(i=Error(r(422),{cause:c}),Wu(gi(i,l)))):(c!==cg&&(a=Error(r(423),{cause:c}),Wu(gi(a,l))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,c=gi(c,l),p=Gg(i.stateNode,c,p),Eg(i,p),pn!==4&&(pn=2)),!1;var y=Error(r(520),{cause:c});if(y=gi(y,l),pc===null?pc=[y]:pc.push(y),pn!==4&&(pn=2),a===null)return!0;c=gi(c,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=p&-p,l.lanes|=i,i=Gg(l.stateNode,c,i),Eg(l,i),!1;case 1:if(a=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ga===null||!ga.has(y))))return l.flags|=65536,p&=-p,l.lanes|=p,p=d_(p),h_(p,i,l,c),Eg(l,p),!1}l=l.return}while(l!==null);return!1}var $g=Error(r(461)),Nn=!1;function sr(i,a,l,c){a.child=i===null?gE(a,null,l,c):So(a,i.child,l,c)}function f_(i,a,l,c,p){l=l.render;var y=a.ref;if("ref"in c){var T={};for(var I in c)I!=="ref"&&(T[I]=c[I])}else T=c;return Eo(a),c=Cg(i,a,l,T,y,p),I=Rg(),i!==null&&!Nn?(Ig(i,a,p),Ts(i,a,p)):(ft&&I&&lg(a),a.flags|=1,sr(i,a,c,p),a.child)}function m_(i,a,l,c,p){if(i===null){var y=l.type;return typeof y=="function"&&!sg(y)&&y.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=y,p_(i,a,y,c,p)):(i=wh(l.type,null,c,a,a.mode,p),i.ref=a.ref,i.return=a,a.child=i)}if(y=i.child,!ev(i,p)){var T=y.memoizedProps;if(l=l.compare,l=l!==null?l:Ku,l(T,c)&&i.ref===a.ref)return Ts(i,a,p)}return a.flags|=1,i=vs(y,c),i.ref=a.ref,i.return=a,a.child=i}function p_(i,a,l,c,p){if(i!==null){var y=i.memoizedProps;if(Ku(y,c)&&i.ref===a.ref)if(Nn=!1,a.pendingProps=c=y,ev(i,p))(i.flags&131072)!==0&&(Nn=!0);else return a.lanes=i.lanes,Ts(i,a,p)}return Kg(i,a,l,c,p)}function g_(i,a,l,c){var p=c.children,y=i!==null?i.memoizedState:null;if(i===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((a.flags&128)!==0){if(y=y!==null?y.baseLanes|l:l,i!==null){for(c=a.child=i.child,p=0;c!==null;)p=p|c.lanes|c.childLanes,c=c.sibling;c=p&~y}else c=0,a.child=null;return v_(i,a,y,l,c)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Rh(a,y!==null?y.cachePool:null),y!==null?bE(a,y):Tg(),xE(a);else return c=a.lanes=536870912,v_(i,a,y!==null?y.baseLanes|l:l,l,c)}else y!==null?(Rh(a,y.cachePool),bE(a,y),ha(),a.memoizedState=null):(i!==null&&Rh(a,null),Tg(),ha());return sr(i,a,p,l),a.child}function lc(i,a){return i!==null&&i.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function v_(i,a,l,c,p){var y=vg();return y=y===null?null:{parent:Rn._currentValue,pool:y},a.memoizedState={baseLanes:l,cachePool:y},i!==null&&Rh(a,null),Tg(),xE(a),i!==null&&xl(i,a,c,!0),a.childLanes=p,null}function Hh(i,a){return a=$h({mode:a.mode,children:a.children},i.mode),a.ref=i.ref,i.child=a,a.return=i,a}function y_(i,a,l){return So(a,i.child,null,l),i=Hh(a,a.pendingProps),i.flags|=2,ri(a),a.memoizedState=null,i}function iO(i,a,l){var c=a.pendingProps,p=(a.flags&128)!==0;if(a.flags&=-129,i===null){if(ft){if(c.mode==="hidden")return i=Hh(a,c),a.lanes=536870912,lc(null,i);if(Sg(a),(i=Yt)?(i=NT(i,bi),i=i!==null&&i.data==="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:ia!==null?{id:Ji,overflow:Zi}:null,retryLane:536870912,hydrationErrors:null},l=tE(i),l.return=a,a.child=l,rr=a,Yt=null)):i=null,i===null)throw aa(a);return a.lanes=536870912,null}return Hh(a,c)}var y=i.memoizedState;if(y!==null){var T=y.dehydrated;if(Sg(a),p)if(a.flags&256)a.flags&=-257,a=y_(i,a,l);else if(a.memoizedState!==null)a.child=i.child,a.flags|=128,a=null;else throw Error(r(558));else if(Nn||xl(i,a,l,!1),p=(l&i.childLanes)!==0,Nn||p){if(c=Vt,c!==null&&(T=Pn(c,l),T!==0&&T!==y.retryLane))throw y.retryLane=T,vo(i,T),Gr(c,i,T),$g;tf(),a=y_(i,a,l)}else i=y.treeContext,Yt=Ei(T.nextSibling),rr=a,ft=!0,sa=null,bi=!1,i!==null&&iE(a,i),a=Hh(a,c),a.flags|=4096;return a}return i=vs(i.child,{mode:c.mode,children:c.children}),i.ref=a.ref,a.child=i,i.return=a,i}function Gh(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(i===null||i.ref!==l)&&(a.flags|=4194816)}}function Kg(i,a,l,c,p){return Eo(a),l=Cg(i,a,l,c,void 0,p),c=Rg(),i!==null&&!Nn?(Ig(i,a,p),Ts(i,a,p)):(ft&&c&&lg(a),a.flags|=1,sr(i,a,l,p),a.child)}function b_(i,a,l,c,p,y){return Eo(a),a.updateQueue=null,l=_E(a,c,l,p),EE(i),c=Rg(),i!==null&&!Nn?(Ig(i,a,y),Ts(i,a,y)):(ft&&c&&lg(a),a.flags|=1,sr(i,a,l,y),a.child)}function x_(i,a,l,c,p){if(Eo(a),a.stateNode===null){var y=gl,T=l.contextType;typeof T=="object"&&T!==null&&(y=ir(T)),y=new l(c,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Hg,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=c,y.state=a.memoizedState,y.refs={},bg(a),T=l.contextType,y.context=typeof T=="object"&&T!==null?ir(T):gl,y.state=a.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(qg(a,l,T,c),y.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&Hg.enqueueReplaceState(y,y.state,null),rc(a,c,y,p),nc(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),c=!0}else if(i===null){y=a.stateNode;var I=a.memoizedProps,F=Co(l,I);y.props=F;var W=y.context,ne=l.contextType;T=gl,typeof ne=="object"&&ne!==null&&(T=ir(ne));var oe=l.getDerivedStateFromProps;ne=typeof oe=="function"||typeof y.getSnapshotBeforeUpdate=="function",I=a.pendingProps!==I,ne||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(I||W!==T)&&a_(a,y,c,T),la=!1;var Z=a.memoizedState;y.state=Z,rc(a,c,y,p),nc(),W=a.memoizedState,I||Z!==W||la?(typeof oe=="function"&&(qg(a,l,oe,c),W=a.memoizedState),(F=la||s_(a,l,F,c,Z,W,T))?(ne||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=W),y.props=c,y.state=W,y.context=T,c=F):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{y=a.stateNode,xg(i,a),T=a.memoizedProps,ne=Co(l,T),y.props=ne,oe=a.pendingProps,Z=y.context,W=l.contextType,F=gl,typeof W=="object"&&W!==null&&(F=ir(W)),I=l.getDerivedStateFromProps,(W=typeof I=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==oe||Z!==F)&&a_(a,y,c,F),la=!1,Z=a.memoizedState,y.state=Z,rc(a,c,y,p),nc();var ee=a.memoizedState;T!==oe||Z!==ee||la||i!==null&&i.dependencies!==null&&Ah(i.dependencies)?(typeof I=="function"&&(qg(a,l,I,c),ee=a.memoizedState),(ne=la||s_(a,l,ne,c,Z,ee,F)||i!==null&&i.dependencies!==null&&Ah(i.dependencies))?(W||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(c,ee,F),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(c,ee,F)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===i.memoizedProps&&Z===i.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&Z===i.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=ee),y.props=c,y.state=ee,y.context=F,c=ne):(typeof y.componentDidUpdate!="function"||T===i.memoizedProps&&Z===i.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&Z===i.memoizedState||(a.flags|=1024),c=!1)}return y=c,Gh(i,a),c=(a.flags&128)!==0,y||c?(y=a.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,i!==null&&c?(a.child=So(a,i.child,null,p),a.child=So(a,null,l,p)):sr(i,a,l,p),a.memoizedState=y.state,i=a.child):i=Ts(i,a,p),i}function E_(i,a,l,c){return bo(),a.flags|=256,sr(i,a,l,c),a.child}var Yg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qg(i){return{baseLanes:i,cachePool:cE()}}function Wg(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=si),i}function __(i,a,l){var c=a.pendingProps,p=!1,y=(a.flags&128)!==0,T;if((T=y)||(T=i!==null&&i.memoizedState===null?!1:(xn.current&2)!==0),T&&(p=!0,a.flags&=-129),T=(a.flags&32)!==0,a.flags&=-33,i===null){if(ft){if(p?da(a):ha(),(i=Yt)?(i=NT(i,bi),i=i!==null&&i.data!=="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:ia!==null?{id:Ji,overflow:Zi}:null,retryLane:536870912,hydrationErrors:null},l=tE(i),l.return=a,a.child=l,rr=a,Yt=null)):i=null,i===null)throw aa(a);return Ov(i)?a.lanes=32:a.lanes=536870912,null}var I=c.children;return c=c.fallback,p?(ha(),p=a.mode,I=$h({mode:"hidden",children:I},p),c=yo(c,p,l,null),I.return=a,c.return=a,I.sibling=c,a.child=I,c=a.child,c.memoizedState=Qg(l),c.childLanes=Wg(i,T,l),a.memoizedState=Yg,lc(null,c)):(da(a),Xg(a,I))}var F=i.memoizedState;if(F!==null&&(I=F.dehydrated,I!==null)){if(y)a.flags&256?(da(a),a.flags&=-257,a=Jg(i,a,l)):a.memoizedState!==null?(ha(),a.child=i.child,a.flags|=128,a=null):(ha(),I=c.fallback,p=a.mode,c=$h({mode:"visible",children:c.children},p),I=yo(I,p,l,null),I.flags|=2,c.return=a,I.return=a,c.sibling=I,a.child=c,So(a,i.child,null,l),c=a.child,c.memoizedState=Qg(l),c.childLanes=Wg(i,T,l),a.memoizedState=Yg,a=lc(null,c));else if(da(a),Ov(I)){if(T=I.nextSibling&&I.nextSibling.dataset,T)var W=T.dgst;T=W,c=Error(r(419)),c.stack="",c.digest=T,Wu({value:c,source:null,stack:null}),a=Jg(i,a,l)}else if(Nn||xl(i,a,l,!1),T=(l&i.childLanes)!==0,Nn||T){if(T=Vt,T!==null&&(c=Pn(T,l),c!==0&&c!==F.retryLane))throw F.retryLane=c,vo(i,c),Gr(T,i,c),$g;kv(I)||tf(),a=Jg(i,a,l)}else kv(I)?(a.flags|=192,a.child=i.child,a=null):(i=F.treeContext,Yt=Ei(I.nextSibling),rr=a,ft=!0,sa=null,bi=!1,i!==null&&iE(a,i),a=Xg(a,c.children),a.flags|=4096);return a}return p?(ha(),I=c.fallback,p=a.mode,F=i.child,W=F.sibling,c=vs(F,{mode:"hidden",children:c.children}),c.subtreeFlags=F.subtreeFlags&65011712,W!==null?I=vs(W,I):(I=yo(I,p,l,null),I.flags|=2),I.return=a,c.return=a,c.sibling=I,a.child=c,lc(null,c),c=a.child,I=i.child.memoizedState,I===null?I=Qg(l):(p=I.cachePool,p!==null?(F=Rn._currentValue,p=p.parent!==F?{parent:F,pool:F}:p):p=cE(),I={baseLanes:I.baseLanes|l,cachePool:p}),c.memoizedState=I,c.childLanes=Wg(i,T,l),a.memoizedState=Yg,lc(i.child,c)):(da(a),l=i.child,i=l.sibling,l=vs(l,{mode:"visible",children:c.children}),l.return=a,l.sibling=null,i!==null&&(T=a.deletions,T===null?(a.deletions=[i],a.flags|=16):T.push(i)),a.child=l,a.memoizedState=null,l)}function Xg(i,a){return a=$h({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function $h(i,a){return i=ti(22,i,null,a),i.lanes=0,i}function Jg(i,a,l){return So(a,i.child,null,l),i=Xg(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function T_(i,a,l){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a),fg(i.return,a,l)}function Zg(i,a,l,c,p,y){var T=i.memoizedState;T===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:p,treeForkCount:y}:(T.isBackwards=a,T.rendering=null,T.renderingStartTime=0,T.last=c,T.tail=l,T.tailMode=p,T.treeForkCount=y)}function w_(i,a,l){var c=a.pendingProps,p=c.revealOrder,y=c.tail;c=c.children;var T=xn.current,I=(T&2)!==0;if(I?(T=T&1|2,a.flags|=128):T&=1,de(xn,T),sr(i,a,c,l),c=ft?Qu:0,!I&&i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&T_(i,l,a);else if(i.tag===19)T_(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(p){case"forwards":for(l=a.child,p=null;l!==null;)i=l.alternate,i!==null&&jh(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=a.child,a.child=null):(p=l.sibling,l.sibling=null),Zg(a,!1,p,l,y,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,p=a.child,a.child=null;p!==null;){if(i=p.alternate,i!==null&&jh(i)===null){a.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}Zg(a,!0,l,null,y,c);break;case"together":Zg(a,!1,null,null,void 0,c);break;default:a.memoizedState=null}return a.child}function Ts(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),pa|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(xl(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,l=vs(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=vs(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function ev(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&Ah(i)))}function sO(i,a,l){switch(a.tag){case 3:Zt(a,a.stateNode.containerInfo),oa(a,Rn,i.memoizedState.cache),bo();break;case 27:case 5:Mn(a);break;case 4:Zt(a,a.stateNode.containerInfo);break;case 10:oa(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Sg(a),null;break;case 13:var c=a.memoizedState;if(c!==null)return c.dehydrated!==null?(da(a),a.flags|=128,null):(l&a.child.childLanes)!==0?__(i,a,l):(da(a),i=Ts(i,a,l),i!==null?i.sibling:null);da(a);break;case 19:var p=(i.flags&128)!==0;if(c=(l&a.childLanes)!==0,c||(xl(i,a,l,!1),c=(l&a.childLanes)!==0),p){if(c)return w_(i,a,l);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),de(xn,xn.current),c)break;return null;case 22:return a.lanes=0,g_(i,a,l,a.pendingProps);case 24:oa(a,Rn,i.memoizedState.cache)}return Ts(i,a,l)}function S_(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)Nn=!0;else{if(!ev(i,l)&&(a.flags&128)===0)return Nn=!1,sO(i,a,l);Nn=(i.flags&131072)!==0}else Nn=!1,ft&&(a.flags&1048576)!==0&&rE(a,Qu,a.index);switch(a.lanes=0,a.tag){case 16:e:{var c=a.pendingProps;if(i=To(a.elementType),a.type=i,typeof i=="function")sg(i)?(c=Co(i,c),a.tag=1,a=x_(null,a,i,c,l)):(a.tag=0,a=Kg(null,a,i,c,l));else{if(i!=null){var p=i.$$typeof;if(p===H){a.tag=11,a=f_(null,a,i,c,l);break e}else if(p===C){a.tag=14,a=m_(null,a,i,c,l);break e}}throw a=pe(i)||i,Error(r(306,a,""))}}return a;case 0:return Kg(i,a,a.type,a.pendingProps,l);case 1:return c=a.type,p=Co(c,a.pendingProps),x_(i,a,c,p,l);case 3:e:{if(Zt(a,a.stateNode.containerInfo),i===null)throw Error(r(387));c=a.pendingProps;var y=a.memoizedState;p=y.element,xg(i,a),rc(a,c,null,l);var T=a.memoizedState;if(c=T.cache,oa(a,Rn,c),c!==y.cache&&mg(a,[Rn],l,!0),nc(),c=T.element,y.isDehydrated)if(y={element:c,isDehydrated:!1,cache:T.cache},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){a=E_(i,a,c,l);break e}else if(c!==p){p=gi(Error(r(424)),a),Wu(p),a=E_(i,a,c,l);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Yt=Ei(i.firstChild),rr=a,ft=!0,sa=null,bi=!0,l=gE(a,null,c,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(bo(),c===p){a=Ts(i,a,l);break e}sr(i,a,c,l)}a=a.child}return a;case 26:return Gh(i,a),i===null?(l=PT(a.type,null,a.pendingProps,null))?a.memoizedState=l:ft||(l=a.type,i=a.pendingProps,c=uf(je.current).createElement(l),c[bt]=a,c[Me]=i,ar(c,l,i),Ft(c),a.stateNode=c):a.memoizedState=PT(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return Mn(a),i===null&&ft&&(c=a.stateNode=DT(a.type,a.pendingProps,je.current),rr=a,bi=!0,p=Yt,xa(a.type)?(Dv=p,Yt=Ei(c.firstChild)):Yt=p),sr(i,a,a.pendingProps.children,l),Gh(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&ft&&((p=c=Yt)&&(c=MO(c,a.type,a.pendingProps,bi),c!==null?(a.stateNode=c,rr=a,Yt=Ei(c.firstChild),bi=!1,p=!0):p=!1),p||aa(a)),Mn(a),p=a.type,y=a.pendingProps,T=i!==null?i.memoizedProps:null,c=y.children,Rv(p,y)?c=null:T!==null&&Rv(p,T)&&(a.flags|=32),a.memoizedState!==null&&(p=Cg(i,a,Wk,null,null,l),Tc._currentValue=p),Gh(i,a),sr(i,a,c,l),a.child;case 6:return i===null&&ft&&((i=l=Yt)&&(l=PO(l,a.pendingProps,bi),l!==null?(a.stateNode=l,rr=a,Yt=null,i=!0):i=!1),i||aa(a)),null;case 13:return __(i,a,l);case 4:return Zt(a,a.stateNode.containerInfo),c=a.pendingProps,i===null?a.child=So(a,null,c,l):sr(i,a,c,l),a.child;case 11:return f_(i,a,a.type,a.pendingProps,l);case 7:return sr(i,a,a.pendingProps,l),a.child;case 8:return sr(i,a,a.pendingProps.children,l),a.child;case 12:return sr(i,a,a.pendingProps.children,l),a.child;case 10:return c=a.pendingProps,oa(a,a.type,c.value),sr(i,a,c.children,l),a.child;case 9:return p=a.type._context,c=a.pendingProps.children,Eo(a),p=ir(p),c=c(p),a.flags|=1,sr(i,a,c,l),a.child;case 14:return m_(i,a,a.type,a.pendingProps,l);case 15:return p_(i,a,a.type,a.pendingProps,l);case 19:return w_(i,a,l);case 31:return iO(i,a,l);case 22:return g_(i,a,l,a.pendingProps);case 24:return Eo(a),c=ir(Rn),i===null?(p=vg(),p===null&&(p=Vt,y=pg(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=l),p=y),a.memoizedState={parent:c,cache:p},bg(a),oa(a,Rn,p)):((i.lanes&l)!==0&&(xg(i,a),rc(a,null,null,l),nc()),p=i.memoizedState,y=a.memoizedState,p.parent!==c?(p={parent:c,cache:c},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),oa(a,Rn,c)):(c=y.cache,oa(a,Rn,c),c!==p.cache&&mg(a,[Rn],l,!0))),sr(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function ws(i){i.flags|=4}function tv(i,a,l,c,p){if((a=(i.mode&32)!==0)&&(a=!1),a){if(i.flags|=16777216,(p&335544128)===p)if(i.stateNode.complete)i.flags|=8192;else if(J_())i.flags|=8192;else throw wo=Nh,yg}else i.flags&=-16777217}function A_(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!zT(a))if(J_())i.flags|=8192;else throw wo=Nh,yg}function Kh(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?$t():536870912,i.lanes|=a,Ol|=a)}function uc(i,a){if(!ft)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function Qt(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,c=0;if(a)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,c|=p.subtreeFlags&65011712,c|=p.flags&65011712,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=c,i.childLanes=l,a}function aO(i,a,l){var c=a.pendingProps;switch(ug(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(a),null;case 1:return Qt(a),null;case 3:return l=a.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),xs(Rn),At(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(bl(a)?ws(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,dg())),Qt(a),null;case 26:var p=a.type,y=a.memoizedState;return i===null?(ws(a),y!==null?(Qt(a),A_(a,y)):(Qt(a),tv(a,p,null,c,l))):y?y!==i.memoizedState?(ws(a),Qt(a),A_(a,y)):(Qt(a),a.flags&=-16777217):(i=i.memoizedProps,i!==c&&ws(a),Qt(a),tv(a,p,i,c,l)),null;case 27:if(Bn(a),l=je.current,p=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==c&&ws(a);else{if(!c){if(a.stateNode===null)throw Error(r(166));return Qt(a),null}i=fe.current,bl(a)?sE(a):(i=DT(p,c,l),a.stateNode=i,ws(a))}return Qt(a),null;case 5:if(Bn(a),p=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==c&&ws(a);else{if(!c){if(a.stateNode===null)throw Error(r(166));return Qt(a),null}if(y=fe.current,bl(a))sE(a);else{var T=uf(je.current);switch(y){case 1:y=T.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:y=T.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":y=T.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":y=T.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":y=T.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof c.is=="string"?T.createElement("select",{is:c.is}):T.createElement("select"),c.multiple?y.multiple=!0:c.size&&(y.size=c.size);break;default:y=typeof c.is=="string"?T.createElement(p,{is:c.is}):T.createElement(p)}}y[bt]=a,y[Me]=c;e:for(T=a.child;T!==null;){if(T.tag===5||T.tag===6)y.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===a)break e;for(;T.sibling===null;){if(T.return===null||T.return===a)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}a.stateNode=y;e:switch(ar(y,p,c),p){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ws(a)}}return Qt(a),tv(a,a.type,i===null?null:i.memoizedProps,a.pendingProps,l),null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==c&&ws(a);else{if(typeof c!="string"&&a.stateNode===null)throw Error(r(166));if(i=je.current,bl(a)){if(i=a.stateNode,l=a.memoizedProps,c=null,p=rr,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}i[bt]=a,i=!!(i.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||_T(i.nodeValue,l)),i||aa(a,!0)}else i=uf(i).createTextNode(c),i[bt]=a,a.stateNode=i}return Qt(a),null;case 31:if(l=a.memoizedState,i===null||i.memoizedState!==null){if(c=bl(a),l!==null){if(i===null){if(!c)throw Error(r(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[bt]=a}else bo(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Qt(a),i=!1}else l=dg(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return a.flags&256?(ri(a),a):(ri(a),null);if((a.flags&128)!==0)throw Error(r(558))}return Qt(a),null;case 13:if(c=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=bl(a),c!==null&&c.dehydrated!==null){if(i===null){if(!p)throw Error(r(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[bt]=a}else bo(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Qt(a),p=!1}else p=dg(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(ri(a),a):(ri(a),null)}return ri(a),(a.flags&128)!==0?(a.lanes=l,a):(l=c!==null,i=i!==null&&i.memoizedState!==null,l&&(c=a.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==p&&(c.flags|=2048)),l!==i&&l&&(a.child.flags|=8192),Kh(a,a.updateQueue),Qt(a),null);case 4:return At(),i===null&&Tv(a.stateNode.containerInfo),Qt(a),null;case 10:return xs(a.type),Qt(a),null;case 19:if(J(xn),c=a.memoizedState,c===null)return Qt(a),null;if(p=(a.flags&128)!==0,y=c.rendering,y===null)if(p)uc(c,!1);else{if(pn!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(y=jh(i),y!==null){for(a.flags|=128,uc(c,!1),i=y.updateQueue,a.updateQueue=i,Kh(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)eE(l,i),l=l.sibling;return de(xn,xn.current&1|2),ft&&ys(a,c.treeForkCount),a.child}i=i.sibling}c.tail!==null&&vt()>Jh&&(a.flags|=128,p=!0,uc(c,!1),a.lanes=4194304)}else{if(!p)if(i=jh(y),i!==null){if(a.flags|=128,p=!0,i=i.updateQueue,a.updateQueue=i,Kh(a,i),uc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!y.alternate&&!ft)return Qt(a),null}else 2*vt()-c.renderingStartTime>Jh&&l!==536870912&&(a.flags|=128,p=!0,uc(c,!1),a.lanes=4194304);c.isBackwards?(y.sibling=a.child,a.child=y):(i=c.last,i!==null?i.sibling=y:a.child=y,c.last=y)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=vt(),i.sibling=null,l=xn.current,de(xn,p?l&1|2:l&1),ft&&ys(a,c.treeForkCount),i):(Qt(a),null);case 22:case 23:return ri(a),wg(),c=a.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(a.flags|=8192):c&&(a.flags|=8192),c?(l&536870912)!==0&&(a.flags&128)===0&&(Qt(a),a.subtreeFlags&6&&(a.flags|=8192)):Qt(a),l=a.updateQueue,l!==null&&Kh(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==l&&(a.flags|=2048),i!==null&&J(_o),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),xs(Rn),Qt(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function oO(i,a){switch(ug(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return xs(Rn),At(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return Bn(a),null;case 31:if(a.memoizedState!==null){if(ri(a),a.alternate===null)throw Error(r(340));bo()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 13:if(ri(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));bo()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return J(xn),null;case 4:return At(),null;case 10:return xs(a.type),null;case 22:case 23:return ri(a),wg(),i!==null&&J(_o),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return xs(Rn),null;case 25:return null;default:return null}}function C_(i,a){switch(ug(a),a.tag){case 3:xs(Rn),At();break;case 26:case 27:case 5:Bn(a);break;case 4:At();break;case 31:a.memoizedState!==null&&ri(a);break;case 13:ri(a);break;case 19:J(xn);break;case 10:xs(a.type);break;case 22:case 23:ri(a),wg(),i!==null&&J(_o);break;case 24:xs(Rn)}}function cc(i,a){try{var l=a.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var p=c.next;l=p;do{if((l.tag&i)===i){c=void 0;var y=l.create,T=l.inst;c=y(),T.destroy=c}l=l.next}while(l!==p)}}catch(I){Ot(a,a.return,I)}}function fa(i,a,l){try{var c=a.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var y=p.next;c=y;do{if((c.tag&i)===i){var T=c.inst,I=T.destroy;if(I!==void 0){T.destroy=void 0,p=a;var F=l,W=I;try{W()}catch(ne){Ot(p,F,ne)}}}c=c.next}while(c!==y)}}catch(ne){Ot(a,a.return,ne)}}function R_(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{yE(a,l)}catch(c){Ot(i,i.return,c)}}}function I_(i,a,l){l.props=Co(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(c){Ot(i,a,c)}}function dc(i,a){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof l=="function"?i.refCleanup=l(c):l.current=c}}catch(p){Ot(i,a,p)}}function es(i,a){var l=i.ref,c=i.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(p){Ot(i,a,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){Ot(i,a,p)}else l.current=null}function N_(i){var a=i.type,l=i.memoizedProps,c=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(p){Ot(i,i.return,p)}}function nv(i,a,l){try{var c=i.stateNode;IO(c,i.type,l,a),c[Me]=a}catch(p){Ot(i,i.return,p)}}function k_(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&xa(i.type)||i.tag===4}function rv(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||k_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&xa(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function iv(i,a,l){var c=i.tag;if(c===5||c===6)i=i.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(i),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=$n));else if(c!==4&&(c===27&&xa(i.type)&&(l=i.stateNode,a=null),i=i.child,i!==null))for(iv(i,a,l),i=i.sibling;i!==null;)iv(i,a,l),i=i.sibling}function Yh(i,a,l){var c=i.tag;if(c===5||c===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(c!==4&&(c===27&&xa(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(Yh(i,a,l),i=i.sibling;i!==null;)Yh(i,a,l),i=i.sibling}function O_(i){var a=i.stateNode,l=i.memoizedProps;try{for(var c=i.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);ar(a,c,l),a[bt]=i,a[Me]=l}catch(y){Ot(i,i.return,y)}}var Ss=!1,kn=!1,sv=!1,D_=typeof WeakSet=="function"?WeakSet:Set,Qn=null;function lO(i,a){if(i=i.containerInfo,Av=gf,i=Gx(i),Jp(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var p=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var T=0,I=-1,F=-1,W=0,ne=0,oe=i,Z=null;t:for(;;){for(var ee;oe!==l||p!==0&&oe.nodeType!==3||(I=T+p),oe!==y||c!==0&&oe.nodeType!==3||(F=T+c),oe.nodeType===3&&(T+=oe.nodeValue.length),(ee=oe.firstChild)!==null;)Z=oe,oe=ee;for(;;){if(oe===i)break t;if(Z===l&&++W===p&&(I=T),Z===y&&++ne===c&&(F=T),(ee=oe.nextSibling)!==null)break;oe=Z,Z=oe.parentNode}oe=ee}l=I===-1||F===-1?null:{start:I,end:F}}else l=null}l=l||{start:0,end:0}}else l=null;for(Cv={focusedElem:i,selectionRange:l},gf=!1,Qn=a;Qn!==null;)if(a=Qn,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,Qn=i;else for(;Qn!==null;){switch(a=Qn,y=a.alternate,i=a.flags,a.tag){case 0:if((i&4)!==0&&(i=a.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)p=i[l],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,l=a,p=y.memoizedProps,y=y.memoizedState,c=l.stateNode;try{var Se=Co(l.type,p);i=c.getSnapshotBeforeUpdate(Se,y),c.__reactInternalSnapshotBeforeUpdate=i}catch(Pe){Ot(l,l.return,Pe)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)Nv(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Nv(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,Qn=i;break}Qn=a.return}}function j_(i,a,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:Cs(i,l),c&4&&cc(5,l);break;case 1:if(Cs(i,l),c&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(T){Ot(l,l.return,T)}else{var p=Co(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(p,a,i.__reactInternalSnapshotBeforeUpdate)}catch(T){Ot(l,l.return,T)}}c&64&&R_(l),c&512&&dc(l,l.return);break;case 3:if(Cs(i,l),c&64&&(i=l.updateQueue,i!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{yE(i,a)}catch(T){Ot(l,l.return,T)}}break;case 27:a===null&&c&4&&O_(l);case 26:case 5:Cs(i,l),a===null&&c&4&&N_(l),c&512&&dc(l,l.return);break;case 12:Cs(i,l);break;case 31:Cs(i,l),c&4&&V_(i,l);break;case 13:Cs(i,l),c&4&&L_(i,l),c&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=vO.bind(null,l),VO(i,l))));break;case 22:if(c=l.memoizedState!==null||Ss,!c){a=a!==null&&a.memoizedState!==null||kn,p=Ss;var y=kn;Ss=c,(kn=a)&&!y?Rs(i,l,(l.subtreeFlags&8772)!==0):Cs(i,l),Ss=p,kn=y}break;case 30:break;default:Cs(i,l)}}function M_(i){var a=i.alternate;a!==null&&(i.alternate=null,M_(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Sr(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var sn=null,zr=!1;function As(i,a,l){for(l=l.child;l!==null;)P_(i,a,l),l=l.sibling}function P_(i,a,l){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(Jn,l)}catch{}switch(l.tag){case 26:kn||es(l,a),As(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:kn||es(l,a);var c=sn,p=zr;xa(l.type)&&(sn=l.stateNode,zr=!1),As(i,a,l),xc(l.stateNode),sn=c,zr=p;break;case 5:kn||es(l,a);case 6:if(c=sn,p=zr,sn=null,As(i,a,l),sn=c,zr=p,sn!==null)if(zr)try{(sn.nodeType===9?sn.body:sn.nodeName==="HTML"?sn.ownerDocument.body:sn).removeChild(l.stateNode)}catch(y){Ot(l,a,y)}else try{sn.removeChild(l.stateNode)}catch(y){Ot(l,a,y)}break;case 18:sn!==null&&(zr?(i=sn,RT(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Bl(i)):RT(sn,l.stateNode));break;case 4:c=sn,p=zr,sn=l.stateNode.containerInfo,zr=!0,As(i,a,l),sn=c,zr=p;break;case 0:case 11:case 14:case 15:fa(2,l,a),kn||fa(4,l,a),As(i,a,l);break;case 1:kn||(es(l,a),c=l.stateNode,typeof c.componentWillUnmount=="function"&&I_(l,a,c)),As(i,a,l);break;case 21:As(i,a,l);break;case 22:kn=(c=kn)||l.memoizedState!==null,As(i,a,l),kn=c;break;default:As(i,a,l)}}function V_(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Bl(i)}catch(l){Ot(a,a.return,l)}}}function L_(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Bl(i)}catch(l){Ot(a,a.return,l)}}function uO(i){switch(i.tag){case 31:case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new D_),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new D_),a;default:throw Error(r(435,i.tag))}}function Qh(i,a){var l=uO(i);a.forEach(function(c){if(!l.has(c)){l.add(c);var p=yO.bind(null,i,c);c.then(p,p)}})}function Fr(i,a){var l=a.deletions;if(l!==null)for(var c=0;c<l.length;c++){var p=l[c],y=i,T=a,I=T;e:for(;I!==null;){switch(I.tag){case 27:if(xa(I.type)){sn=I.stateNode,zr=!1;break e}break;case 5:sn=I.stateNode,zr=!1;break e;case 3:case 4:sn=I.stateNode.containerInfo,zr=!0;break e}I=I.return}if(sn===null)throw Error(r(160));P_(y,T,p),sn=null,zr=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)U_(a,i),a=a.sibling}var Di=null;function U_(i,a){var l=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Fr(a,i),qr(i),c&4&&(fa(3,i,i.return),cc(3,i),fa(5,i,i.return));break;case 1:Fr(a,i),qr(i),c&512&&(kn||l===null||es(l,l.return)),c&64&&Ss&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var p=Di;if(Fr(a,i),qr(i),c&512&&(kn||l===null||es(l,l.return)),c&4){var y=l!==null?l.memoizedState:null;if(c=i.memoizedState,l===null)if(c===null)if(i.stateNode===null){e:{c=i.type,l=i.memoizedProps,p=p.ownerDocument||p;t:switch(c){case"title":y=p.getElementsByTagName("title")[0],(!y||y[Pr]||y[bt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(c),p.head.insertBefore(y,p.querySelector("head > title"))),ar(y,c,l),y[bt]=i,Ft(y),c=y;break e;case"link":var T=UT("link","href",p).get(c+(l.href||""));if(T){for(var I=0;I<T.length;I++)if(y=T[I],y.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(I,1);break t}}y=p.createElement(c),ar(y,c,l),p.head.appendChild(y);break;case"meta":if(T=UT("meta","content",p).get(c+(l.content||""))){for(I=0;I<T.length;I++)if(y=T[I],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(I,1);break t}}y=p.createElement(c),ar(y,c,l),p.head.appendChild(y);break;default:throw Error(r(468,c))}y[bt]=i,Ft(y),c=y}i.stateNode=c}else BT(p,i.type,i.stateNode);else i.stateNode=LT(p,c,i.memoizedProps);else y!==c?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,c===null?BT(p,i.type,i.stateNode):LT(p,c,i.memoizedProps)):c===null&&i.stateNode!==null&&nv(i,i.memoizedProps,l.memoizedProps)}break;case 27:Fr(a,i),qr(i),c&512&&(kn||l===null||es(l,l.return)),l!==null&&c&4&&nv(i,i.memoizedProps,l.memoizedProps);break;case 5:if(Fr(a,i),qr(i),c&512&&(kn||l===null||es(l,l.return)),i.flags&32){p=i.stateNode;try{mi(p,"")}catch(Se){Ot(i,i.return,Se)}}c&4&&i.stateNode!=null&&(p=i.memoizedProps,nv(i,p,l!==null?l.memoizedProps:p)),c&1024&&(sv=!0);break;case 6:if(Fr(a,i),qr(i),c&4){if(i.stateNode===null)throw Error(r(162));c=i.memoizedProps,l=i.stateNode;try{l.nodeValue=c}catch(Se){Ot(i,i.return,Se)}}break;case 3:if(hf=null,p=Di,Di=cf(a.containerInfo),Fr(a,i),Di=p,qr(i),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Bl(a.containerInfo)}catch(Se){Ot(i,i.return,Se)}sv&&(sv=!1,B_(i));break;case 4:c=Di,Di=cf(i.stateNode.containerInfo),Fr(a,i),qr(i),Di=c;break;case 12:Fr(a,i),qr(i);break;case 31:Fr(a,i),qr(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Qh(i,c)));break;case 13:Fr(a,i),qr(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Xh=vt()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Qh(i,c)));break;case 22:p=i.memoizedState!==null;var F=l!==null&&l.memoizedState!==null,W=Ss,ne=kn;if(Ss=W||p,kn=ne||F,Fr(a,i),kn=ne,Ss=W,qr(i),c&8192)e:for(a=i.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(l===null||F||Ss||kn||Ro(i)),l=null,a=i;;){if(a.tag===5||a.tag===26){if(l===null){F=l=a;try{if(y=F.stateNode,p)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{I=F.stateNode;var oe=F.memoizedProps.style,Z=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;I.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(Se){Ot(F,F.return,Se)}}}else if(a.tag===6){if(l===null){F=a;try{F.stateNode.nodeValue=p?"":F.memoizedProps}catch(Se){Ot(F,F.return,Se)}}}else if(a.tag===18){if(l===null){F=a;try{var ee=F.stateNode;p?IT(ee,!0):IT(F.stateNode,!1)}catch(Se){Ot(F,F.return,Se)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}c&4&&(c=i.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Qh(i,l))));break;case 19:Fr(a,i),qr(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Qh(i,c)));break;case 30:break;case 21:break;default:Fr(a,i),qr(i)}}function qr(i){var a=i.flags;if(a&2){try{for(var l,c=i.return;c!==null;){if(k_(c)){l=c;break}c=c.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var p=l.stateNode,y=rv(i);Yh(i,y,p);break;case 5:var T=l.stateNode;l.flags&32&&(mi(T,""),l.flags&=-33);var I=rv(i);Yh(i,I,T);break;case 3:case 4:var F=l.stateNode.containerInfo,W=rv(i);iv(i,W,F);break;default:throw Error(r(161))}}catch(ne){Ot(i,i.return,ne)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function B_(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;B_(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function Cs(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)j_(i,a.alternate,a),a=a.sibling}function Ro(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:fa(4,a,a.return),Ro(a);break;case 1:es(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&I_(a,a.return,l),Ro(a);break;case 27:xc(a.stateNode);case 26:case 5:es(a,a.return),Ro(a);break;case 22:a.memoizedState===null&&Ro(a);break;case 30:Ro(a);break;default:Ro(a)}i=i.sibling}}function Rs(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var c=a.alternate,p=i,y=a,T=y.flags;switch(y.tag){case 0:case 11:case 15:Rs(p,y,l),cc(4,y);break;case 1:if(Rs(p,y,l),c=y,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(W){Ot(c,c.return,W)}if(c=y,p=c.updateQueue,p!==null){var I=c.stateNode;try{var F=p.shared.hiddenCallbacks;if(F!==null)for(p.shared.hiddenCallbacks=null,p=0;p<F.length;p++)vE(F[p],I)}catch(W){Ot(c,c.return,W)}}l&&T&64&&R_(y),dc(y,y.return);break;case 27:O_(y);case 26:case 5:Rs(p,y,l),l&&c===null&&T&4&&N_(y),dc(y,y.return);break;case 12:Rs(p,y,l);break;case 31:Rs(p,y,l),l&&T&4&&V_(p,y);break;case 13:Rs(p,y,l),l&&T&4&&L_(p,y);break;case 22:y.memoizedState===null&&Rs(p,y,l),dc(y,y.return);break;case 30:break;default:Rs(p,y,l)}a=a.sibling}}function av(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&Xu(l))}function ov(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Xu(i))}function ji(i,a,l,c){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)z_(i,a,l,c),a=a.sibling}function z_(i,a,l,c){var p=a.flags;switch(a.tag){case 0:case 11:case 15:ji(i,a,l,c),p&2048&&cc(9,a);break;case 1:ji(i,a,l,c);break;case 3:ji(i,a,l,c),p&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Xu(i)));break;case 12:if(p&2048){ji(i,a,l,c),i=a.stateNode;try{var y=a.memoizedProps,T=y.id,I=y.onPostCommit;typeof I=="function"&&I(T,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(F){Ot(a,a.return,F)}}else ji(i,a,l,c);break;case 31:ji(i,a,l,c);break;case 13:ji(i,a,l,c);break;case 23:break;case 22:y=a.stateNode,T=a.alternate,a.memoizedState!==null?y._visibility&2?ji(i,a,l,c):hc(i,a):y._visibility&2?ji(i,a,l,c):(y._visibility|=2,Il(i,a,l,c,(a.subtreeFlags&10256)!==0||!1)),p&2048&&av(T,a);break;case 24:ji(i,a,l,c),p&2048&&ov(a.alternate,a);break;default:ji(i,a,l,c)}}function Il(i,a,l,c,p){for(p=p&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var y=i,T=a,I=l,F=c,W=T.flags;switch(T.tag){case 0:case 11:case 15:Il(y,T,I,F,p),cc(8,T);break;case 23:break;case 22:var ne=T.stateNode;T.memoizedState!==null?ne._visibility&2?Il(y,T,I,F,p):hc(y,T):(ne._visibility|=2,Il(y,T,I,F,p)),p&&W&2048&&av(T.alternate,T);break;case 24:Il(y,T,I,F,p),p&&W&2048&&ov(T.alternate,T);break;default:Il(y,T,I,F,p)}a=a.sibling}}function hc(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,c=a,p=c.flags;switch(c.tag){case 22:hc(l,c),p&2048&&av(c.alternate,c);break;case 24:hc(l,c),p&2048&&ov(c.alternate,c);break;default:hc(l,c)}a=a.sibling}}var fc=8192;function Nl(i,a,l){if(i.subtreeFlags&fc)for(i=i.child;i!==null;)F_(i,a,l),i=i.sibling}function F_(i,a,l){switch(i.tag){case 26:Nl(i,a,l),i.flags&fc&&i.memoizedState!==null&&QO(l,Di,i.memoizedState,i.memoizedProps);break;case 5:Nl(i,a,l);break;case 3:case 4:var c=Di;Di=cf(i.stateNode.containerInfo),Nl(i,a,l),Di=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=fc,fc=16777216,Nl(i,a,l),fc=c):Nl(i,a,l));break;default:Nl(i,a,l)}}function q_(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function mc(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];Qn=c,G_(c,i)}q_(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)H_(i),i=i.sibling}function H_(i){switch(i.tag){case 0:case 11:case 15:mc(i),i.flags&2048&&fa(9,i,i.return);break;case 3:mc(i);break;case 12:mc(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,Wh(i)):mc(i);break;default:mc(i)}}function Wh(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];Qn=c,G_(c,i)}q_(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:fa(8,a,a.return),Wh(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,Wh(a));break;default:Wh(a)}i=i.sibling}}function G_(i,a){for(;Qn!==null;){var l=Qn;switch(l.tag){case 0:case 11:case 15:fa(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Xu(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Qn=c;else e:for(l=i;Qn!==null;){c=Qn;var p=c.sibling,y=c.return;if(M_(c),c===l){Qn=null;break e}if(p!==null){p.return=y,Qn=p;break e}Qn=y}}}var cO={getCacheForType:function(i){var a=ir(Rn),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l},cacheSignal:function(){return ir(Rn).controller.signal}},dO=typeof WeakMap=="function"?WeakMap:Map,wt=0,Vt=null,st=null,lt=0,kt=0,ii=null,ma=!1,kl=!1,lv=!1,Is=0,pn=0,pa=0,Io=0,uv=0,si=0,Ol=0,pc=null,Hr=null,cv=!1,Xh=0,$_=0,Jh=1/0,Zh=null,ga=null,Vn=0,va=null,Dl=null,Ns=0,dv=0,hv=null,K_=null,gc=0,fv=null;function ai(){return(wt&2)!==0&&lt!==0?lt&-lt:X.T!==null?bv():rn()}function Y_(){if(si===0)if((lt&536870912)===0||ft){var i=Ye;Ye<<=1,(Ye&3932160)===0&&(Ye=262144),si=i}else si=536870912;return i=ni.current,i!==null&&(i.flags|=32),si}function Gr(i,a,l){(i===Vt&&(kt===2||kt===9)||i.cancelPendingCommit!==null)&&(jl(i,0),ya(i,lt,si,!1)),Nt(i,l),((wt&2)===0||i!==Vt)&&(i===Vt&&((wt&2)===0&&(Io|=l),pn===4&&ya(i,lt,si,!1)),ts(i))}function Q_(i,a,l){if((wt&6)!==0)throw Error(r(327));var c=!l&&(a&127)===0&&(a&i.expiredLanes)===0||Xe(i,a),p=c?mO(i,a):pv(i,a,!0),y=c;do{if(p===0){kl&&!c&&ya(i,a,0,!1);break}else{if(l=i.current.alternate,y&&!hO(l)){p=pv(i,a,!1),y=!1;continue}if(p===2){if(y=a,i.errorRecoveryDisabledLanes&y)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){a=T;e:{var I=i;p=pc;var F=I.current.memoizedState.isDehydrated;if(F&&(jl(I,T).flags|=256),T=pv(I,T,!1),T!==2){if(lv&&!F){I.errorRecoveryDisabledLanes|=y,Io|=y,p=4;break e}y=Hr,Hr=p,y!==null&&(Hr===null?Hr=y:Hr.push.apply(Hr,y))}p=T}if(y=!1,p!==2)continue}}if(p===1){jl(i,0),ya(i,a,0,!0);break}e:{switch(c=i,y=p,y){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:ya(c,a,si,!ma);break e;case 2:Hr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(p=Xh+300-vt(),10<p)){if(ya(c,a,si,!ma),De(c,0,!0)!==0)break e;Ns=a,c.timeoutHandle=AT(W_.bind(null,c,l,Hr,Zh,cv,a,si,Io,Ol,ma,y,"Throttled",-0,0),p);break e}W_(c,l,Hr,Zh,cv,a,si,Io,Ol,ma,y,null,-0,0)}}break}while(!0);ts(i)}function W_(i,a,l,c,p,y,T,I,F,W,ne,oe,Z,ee){if(i.timeoutHandle=-1,oe=a.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:$n},F_(a,y,oe);var Se=(y&62914560)===y?Xh-vt():(y&4194048)===y?$_-vt():0;if(Se=WO(oe,Se),Se!==null){Ns=y,i.cancelPendingCommit=Se(iT.bind(null,i,a,y,l,c,p,T,I,F,ne,oe,null,Z,ee)),ya(i,y,T,!W);return}}iT(i,a,y,l,c,p,T,I,F)}function hO(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var p=l[c],y=p.getSnapshot;p=p.value;try{if(!ei(y(),p))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ya(i,a,l,c){a&=~uv,a&=~Io,i.suspendedLanes|=a,i.pingedLanes&=~a,c&&(i.warmLanes|=a),c=i.expirationTimes;for(var p=a;0<p;){var y=31-xe(p),T=1<<y;c[y]=-1,p&=~T}l!==0&&qn(i,l,a)}function ef(){return(wt&6)===0?(vc(0),!1):!0}function mv(){if(st!==null){if(kt===0)var i=st.return;else i=st,bs=xo=null,Ng(i),wl=null,Zu=0,i=st;for(;i!==null;)C_(i.alternate,i),i=i.return;st=null}}function jl(i,a){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,OO(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),Ns=0,mv(),Vt=i,st=l=vs(i.current,null),lt=a,kt=0,ii=null,ma=!1,kl=Xe(i,a),lv=!1,Ol=si=uv=Io=pa=pn=0,Hr=pc=null,cv=!1,(a&8)!==0&&(a|=a&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=a;0<c;){var p=31-xe(c),y=1<<p;a|=i[p],c&=~y}return Is=a,Eh(),l}function X_(i,a){Qe=null,X.H=oc,a===Tl||a===Ih?(a=fE(),kt=3):a===yg?(a=fE(),kt=4):kt=a===$g?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ii=a,st===null&&(pn=1,qh(i,gi(a,i.current)))}function J_(){var i=ni.current;return i===null?!0:(lt&4194048)===lt?xi===null:(lt&62914560)===lt||(lt&536870912)!==0?i===xi:!1}function Z_(){var i=X.H;return X.H=oc,i===null?oc:i}function eT(){var i=X.A;return X.A=cO,i}function tf(){pn=4,ma||(lt&4194048)!==lt&&ni.current!==null||(kl=!0),(pa&134217727)===0&&(Io&134217727)===0||Vt===null||ya(Vt,lt,si,!1)}function pv(i,a,l){var c=wt;wt|=2;var p=Z_(),y=eT();(Vt!==i||lt!==a)&&(Zh=null,jl(i,a)),a=!1;var T=pn;e:do try{if(kt!==0&&st!==null){var I=st,F=ii;switch(kt){case 8:mv(),T=6;break e;case 3:case 2:case 9:case 6:ni.current===null&&(a=!0);var W=kt;if(kt=0,ii=null,Ml(i,I,F,W),l&&kl){T=0;break e}break;default:W=kt,kt=0,ii=null,Ml(i,I,F,W)}}fO(),T=pn;break}catch(ne){X_(i,ne)}while(!0);return a&&i.shellSuspendCounter++,bs=xo=null,wt=c,X.H=p,X.A=y,st===null&&(Vt=null,lt=0,Eh()),T}function fO(){for(;st!==null;)tT(st)}function mO(i,a){var l=wt;wt|=2;var c=Z_(),p=eT();Vt!==i||lt!==a?(Zh=null,Jh=vt()+500,jl(i,a)):kl=Xe(i,a);e:do try{if(kt!==0&&st!==null){a=st;var y=ii;t:switch(kt){case 1:kt=0,ii=null,Ml(i,a,y,1);break;case 2:case 9:if(dE(y)){kt=0,ii=null,nT(a);break}a=function(){kt!==2&&kt!==9||Vt!==i||(kt=7),ts(i)},y.then(a,a);break e;case 3:kt=7;break e;case 4:kt=5;break e;case 7:dE(y)?(kt=0,ii=null,nT(a)):(kt=0,ii=null,Ml(i,a,y,7));break;case 5:var T=null;switch(st.tag){case 26:T=st.memoizedState;case 5:case 27:var I=st;if(T?zT(T):I.stateNode.complete){kt=0,ii=null;var F=I.sibling;if(F!==null)st=F;else{var W=I.return;W!==null?(st=W,nf(W)):st=null}break t}}kt=0,ii=null,Ml(i,a,y,5);break;case 6:kt=0,ii=null,Ml(i,a,y,6);break;case 8:mv(),pn=6;break e;default:throw Error(r(462))}}pO();break}catch(ne){X_(i,ne)}while(!0);return bs=xo=null,X.H=c,X.A=p,wt=l,st!==null?0:(Vt=null,lt=0,Eh(),pn)}function pO(){for(;st!==null&&!Dr();)tT(st)}function tT(i){var a=S_(i.alternate,i,Is);i.memoizedProps=i.pendingProps,a===null?nf(i):st=a}function nT(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=b_(l,a,a.pendingProps,a.type,void 0,lt);break;case 11:a=b_(l,a,a.pendingProps,a.type.render,a.ref,lt);break;case 5:Ng(a);default:C_(l,a),a=st=eE(a,Is),a=S_(l,a,Is)}i.memoizedProps=i.pendingProps,a===null?nf(i):st=a}function Ml(i,a,l,c){bs=xo=null,Ng(a),wl=null,Zu=0;var p=a.return;try{if(rO(i,p,a,l,lt)){pn=1,qh(i,gi(l,i.current)),st=null;return}}catch(y){if(p!==null)throw st=p,y;pn=1,qh(i,gi(l,i.current)),st=null;return}a.flags&32768?(ft||c===1?i=!0:kl||(lt&536870912)!==0?i=!1:(ma=i=!0,(c===2||c===9||c===3||c===6)&&(c=ni.current,c!==null&&c.tag===13&&(c.flags|=16384))),rT(a,i)):nf(a)}function nf(i){var a=i;do{if((a.flags&32768)!==0){rT(a,ma);return}i=a.return;var l=aO(a.alternate,a,Is);if(l!==null){st=l;return}if(a=a.sibling,a!==null){st=a;return}st=a=i}while(a!==null);pn===0&&(pn=5)}function rT(i,a){do{var l=oO(i.alternate,i);if(l!==null){l.flags&=32767,st=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){st=i;return}st=i=l}while(i!==null);pn=6,st=null}function iT(i,a,l,c,p,y,T,I,F){i.cancelPendingCommit=null;do rf();while(Vn!==0);if((wt&6)!==0)throw Error(r(327));if(a!==null){if(a===i.current)throw Error(r(177));if(y=a.lanes|a.childLanes,y|=rg,Tt(i,l,y,T,I,F),i===Vt&&(st=Vt=null,lt=0),Dl=a,va=i,Ns=l,dv=y,hv=p,K_=c,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,bO(Gt,function(){return uT(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||c){c=X.T,X.T=null,p=ie.p,ie.p=2,T=wt,wt|=4;try{lO(i,a,l)}finally{wt=T,ie.p=p,X.T=c}}Vn=1,sT(),aT(),oT()}}function sT(){if(Vn===1){Vn=0;var i=va,a=Dl,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=X.T,X.T=null;var c=ie.p;ie.p=2;var p=wt;wt|=4;try{U_(a,i);var y=Cv,T=Gx(i.containerInfo),I=y.focusedElem,F=y.selectionRange;if(T!==I&&I&&I.ownerDocument&&Hx(I.ownerDocument.documentElement,I)){if(F!==null&&Jp(I)){var W=F.start,ne=F.end;if(ne===void 0&&(ne=W),"selectionStart"in I)I.selectionStart=W,I.selectionEnd=Math.min(ne,I.value.length);else{var oe=I.ownerDocument||document,Z=oe&&oe.defaultView||window;if(Z.getSelection){var ee=Z.getSelection(),Se=I.textContent.length,Pe=Math.min(F.start,Se),Mt=F.end===void 0?Pe:Math.min(F.end,Se);!ee.extend&&Pe>Mt&&(T=Mt,Mt=Pe,Pe=T);var K=qx(I,Pe),$=qx(I,Mt);if(K&&$&&(ee.rangeCount!==1||ee.anchorNode!==K.node||ee.anchorOffset!==K.offset||ee.focusNode!==$.node||ee.focusOffset!==$.offset)){var Q=oe.createRange();Q.setStart(K.node,K.offset),ee.removeAllRanges(),Pe>Mt?(ee.addRange(Q),ee.extend($.node,$.offset)):(Q.setEnd($.node,$.offset),ee.addRange(Q))}}}}for(oe=[],ee=I;ee=ee.parentNode;)ee.nodeType===1&&oe.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<oe.length;I++){var se=oe[I];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}gf=!!Av,Cv=Av=null}finally{wt=p,ie.p=c,X.T=l}}i.current=a,Vn=2}}function aT(){if(Vn===2){Vn=0;var i=va,a=Dl,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=X.T,X.T=null;var c=ie.p;ie.p=2;var p=wt;wt|=4;try{j_(i,a.alternate,a)}finally{wt=p,ie.p=c,X.T=l}}Vn=3}}function oT(){if(Vn===4||Vn===3){Vn=0,Qr();var i=va,a=Dl,l=Ns,c=K_;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Vn=5:(Vn=0,Dl=va=null,lT(i,i.pendingLanes));var p=i.pendingLanes;if(p===0&&(ga=null),nn(l),a=a.stateNode,hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(Jn,a,void 0,(a.current.flags&128)===128)}catch{}if(c!==null){a=X.T,p=ie.p,ie.p=2,X.T=null;try{for(var y=i.onRecoverableError,T=0;T<c.length;T++){var I=c[T];y(I.value,{componentStack:I.stack})}}finally{X.T=a,ie.p=p}}(Ns&3)!==0&&rf(),ts(i),p=i.pendingLanes,(l&261930)!==0&&(p&42)!==0?i===fv?gc++:(gc=0,fv=i):gc=0,vc(0)}}function lT(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,Xu(a)))}function rf(){return sT(),aT(),oT(),uT()}function uT(){if(Vn!==5)return!1;var i=va,a=dv;dv=0;var l=nn(Ns),c=X.T,p=ie.p;try{ie.p=32>l?32:l,X.T=null,l=hv,hv=null;var y=va,T=Ns;if(Vn=0,Dl=va=null,Ns=0,(wt&6)!==0)throw Error(r(331));var I=wt;if(wt|=4,H_(y.current),z_(y,y.current,T,l),wt=I,vc(0,!1),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(Jn,y)}catch{}return!0}finally{ie.p=p,X.T=c,lT(i,a)}}function cT(i,a,l){a=gi(l,a),a=Gg(i.stateNode,a,2),i=ca(i,a,2),i!==null&&(Nt(i,2),ts(i))}function Ot(i,a,l){if(i.tag===3)cT(i,i,l);else for(;a!==null;){if(a.tag===3){cT(a,i,l);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ga===null||!ga.has(c))){i=gi(l,i),l=d_(2),c=ca(a,l,2),c!==null&&(h_(l,c,a,i),Nt(c,2),ts(c));break}}a=a.return}}function gv(i,a,l){var c=i.pingCache;if(c===null){c=i.pingCache=new dO;var p=new Set;c.set(a,p)}else p=c.get(a),p===void 0&&(p=new Set,c.set(a,p));p.has(l)||(lv=!0,p.add(l),i=gO.bind(null,i,a,l),a.then(i,i))}function gO(i,a,l){var c=i.pingCache;c!==null&&c.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,Vt===i&&(lt&l)===l&&(pn===4||pn===3&&(lt&62914560)===lt&&300>vt()-Xh?(wt&2)===0&&jl(i,0):uv|=l,Ol===lt&&(Ol=0)),ts(i)}function dT(i,a){a===0&&(a=$t()),i=vo(i,a),i!==null&&(Nt(i,a),ts(i))}function vO(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),dT(i,l)}function yO(i,a){var l=0;switch(i.tag){case 31:case 13:var c=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(a),dT(i,l)}function bO(i,a){return Ht(i,a)}var sf=null,Pl=null,vv=!1,af=!1,yv=!1,ba=0;function ts(i){i!==Pl&&i.next===null&&(Pl===null?sf=Pl=i:Pl=Pl.next=i),af=!0,vv||(vv=!0,EO())}function vc(i,a){if(!yv&&af){yv=!0;do for(var l=!1,c=sf;c!==null;){if(i!==0){var p=c.pendingLanes;if(p===0)var y=0;else{var T=c.suspendedLanes,I=c.pingedLanes;y=(1<<31-xe(42|i)+1)-1,y&=p&~(T&~I),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(l=!0,pT(c,y))}else y=lt,y=De(c,c===Vt?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(y&3)===0||Xe(c,y)||(l=!0,pT(c,y));c=c.next}while(l);yv=!1}}function xO(){hT()}function hT(){af=vv=!1;var i=0;ba!==0&&kO()&&(i=ba);for(var a=vt(),l=null,c=sf;c!==null;){var p=c.next,y=fT(c,a);y===0?(c.next=null,l===null?sf=p:l.next=p,p===null&&(Pl=l)):(l=c,(i!==0||(y&3)!==0)&&(af=!0)),c=p}Vn!==0&&Vn!==5||vc(i),ba!==0&&(ba=0)}function fT(i,a){for(var l=i.suspendedLanes,c=i.pingedLanes,p=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var T=31-xe(y),I=1<<T,F=p[T];F===-1?((I&l)===0||(I&c)!==0)&&(p[T]=fn(I,a)):F<=a&&(i.expiredLanes|=I),y&=~I}if(a=Vt,l=lt,l=De(i,i===a?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,l===0||i===a&&(kt===2||kt===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&Tr(c),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||Xe(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(c!==null&&Tr(c),nn(l)){case 2:case 8:l=Bt;break;case 32:l=Gt;break;case 268435456:l=Gi;break;default:l=Gt}return c=mT.bind(null,i),l=Ht(l,c),i.callbackPriority=a,i.callbackNode=l,a}return c!==null&&c!==null&&Tr(c),i.callbackPriority=2,i.callbackNode=null,2}function mT(i,a){if(Vn!==0&&Vn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(rf()&&i.callbackNode!==l)return null;var c=lt;return c=De(i,i===Vt?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(Q_(i,c,a),fT(i,vt()),i.callbackNode!=null&&i.callbackNode===l?mT.bind(null,i):null)}function pT(i,a){if(rf())return null;Q_(i,a,!0)}function EO(){DO(function(){(wt&6)!==0?Ht($e,xO):hT()})}function bv(){if(ba===0){var i=El;i===0&&(i=We,We<<=1,(We&261888)===0&&(We=256)),ba=i}return ba}function gT(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Qi(""+i)}function vT(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function _O(i,a,l,c,p){if(a==="submit"&&l&&l.stateNode===p){var y=gT((p[Me]||null).action),T=c.submitter;T&&(a=(a=T[Me]||null)?gT(a.formAction):T.getAttribute("formAction"),a!==null&&(y=a,T=null));var I=new uo("action","action",null,c,p);i.push({event:I,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(ba!==0){var F=T?vT(p,T):new FormData(p);Ug(l,{pending:!0,data:F,method:p.method,action:y},null,F)}}else typeof y=="function"&&(I.preventDefault(),F=T?vT(p,T):new FormData(p),Ug(l,{pending:!0,data:F,method:p.method,action:y},y,F))},currentTarget:p}]})}}for(var xv=0;xv<ng.length;xv++){var Ev=ng[xv],TO=Ev.toLowerCase(),wO=Ev[0].toUpperCase()+Ev.slice(1);Oi(TO,"on"+wO)}Oi(Yx,"onAnimationEnd"),Oi(Qx,"onAnimationIteration"),Oi(Wx,"onAnimationStart"),Oi("dblclick","onDoubleClick"),Oi("focusin","onFocus"),Oi("focusout","onBlur"),Oi(Bk,"onTransitionRun"),Oi(zk,"onTransitionStart"),Oi(Fk,"onTransitionCancel"),Oi(Xx,"onTransitionEnd"),hi("onMouseEnter",["mouseout","mouseover"]),hi("onMouseLeave",["mouseout","mouseover"]),hi("onPointerEnter",["pointerout","pointerover"]),hi("onPointerLeave",["pointerout","pointerover"]),Gn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yc));function yT(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var c=i[l],p=c.event;c=c.listeners;e:{var y=void 0;if(a)for(var T=c.length-1;0<=T;T--){var I=c[T],F=I.instance,W=I.currentTarget;if(I=I.listener,F!==y&&p.isPropagationStopped())break e;y=I,p.currentTarget=W;try{y(p)}catch(ne){xh(ne)}p.currentTarget=null,y=F}else for(T=0;T<c.length;T++){if(I=c[T],F=I.instance,W=I.currentTarget,I=I.listener,F!==y&&p.isPropagationStopped())break e;y=I,p.currentTarget=W;try{y(p)}catch(ne){xh(ne)}p.currentTarget=null,y=F}}}}function at(i,a){var l=a[An];l===void 0&&(l=a[An]=new Set);var c=i+"__bubble";l.has(c)||(bT(a,i,2,!1),l.add(c))}function _v(i,a,l){var c=0;a&&(c|=4),bT(l,i,c,a)}var of="_reactListening"+Math.random().toString(36).slice(2);function Tv(i){if(!i[of]){i[of]=!0,Vr.forEach(function(l){l!=="selectionchange"&&(SO.has(l)||_v(l,!1,i),_v(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[of]||(a[of]=!0,_v("selectionchange",!1,a))}}function bT(i,a,l,c){switch(YT(a)){case 2:var p=ZO;break;case 8:p=eD;break;default:p=Lv}l=p.bind(null,a,l,i),p=void 0,!Bu||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),c?p!==void 0?i.addEventListener(a,l,{capture:!0,passive:p}):i.addEventListener(a,l,!0):p!==void 0?i.addEventListener(a,l,{passive:p}):i.addEventListener(a,l,!1)}function wv(i,a,l,c,p){var y=c;if((a&1)===0&&(a&2)===0&&c!==null)e:for(;;){if(c===null)return;var T=c.tag;if(T===3||T===4){var I=c.stateNode.containerInfo;if(I===p)break;if(T===4)for(T=c.return;T!==null;){var F=T.tag;if((F===3||F===4)&&T.stateNode.containerInfo===p)return;T=T.return}for(;I!==null;){if(T=Zn(I),T===null)return;if(F=T.tag,F===5||F===6||F===26||F===27){c=y=T;continue e}I=I.parentNode}}c=c.return}ih(function(){var W=y,ne=ll(l),oe=[];e:{var Z=Jx.get(i);if(Z!==void 0){var ee=uo,Se=i;switch(i){case"keypress":if(lo(l)===0)break e;case"keydown":case"keyup":ee=fh;break;case"focusin":Se="focus",ee=ea;break;case"focusout":Se="blur",ee=ea;break;case"beforeblur":case"afterblur":ee=ea;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=ah;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=oh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=ph;break;case Yx:case Qx:case Wx:ee=dl;break;case Xx:ee=hl;break;case"scroll":case"scrollend":ee=sh;break;case"wheel":ee=vh;break;case"copy":case"cut":case"paste":ee=uh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Gu;break;case"toggle":case"beforetoggle":ee=na}var Pe=(a&4)!==0,Mt=!Pe&&(i==="scroll"||i==="scrollend"),K=Pe?Z!==null?Z+"Capture":null:Z;Pe=[];for(var $=W,Q;$!==null;){var se=$;if(Q=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||Q===null||K===null||(se=Ur($,K),se!=null&&Pe.push(bc($,se,Q))),Mt)break;$=$.return}0<Pe.length&&(Z=new ee(Z,Se,null,l,ne),oe.push({event:Z,listeners:Pe}))}}if((a&7)===0){e:{if(Z=i==="mouseover"||i==="pointerover",ee=i==="mouseout"||i==="pointerout",Z&&l!==ol&&(Se=l.relatedTarget||l.fromElement)&&(Zn(Se)||Se[wr]))break e;if((ee||Z)&&(Z=ne.window===ne?ne:(Z=ne.ownerDocument)?Z.defaultView||Z.parentWindow:window,ee?(Se=l.relatedTarget||l.toElement,ee=W,Se=Se?Zn(Se):null,Se!==null&&(Mt=o(Se),Pe=Se.tag,Se!==Mt||Pe!==5&&Pe!==27&&Pe!==6)&&(Se=null)):(ee=null,Se=W),ee!==Se)){if(Pe=ah,se="onMouseLeave",K="onMouseEnter",$="mouse",(i==="pointerout"||i==="pointerover")&&(Pe=Gu,se="onPointerLeave",K="onPointerEnter",$="pointer"),Mt=ee==null?Z:er(ee),Q=Se==null?Z:er(Se),Z=new Pe(se,$+"leave",ee,l,ne),Z.target=Mt,Z.relatedTarget=Q,se=null,Zn(ne)===W&&(Pe=new Pe(K,$+"enter",Se,l,ne),Pe.target=Q,Pe.relatedTarget=Mt,se=Pe),Mt=se,ee&&Se)t:{for(Pe=AO,K=ee,$=Se,Q=0,se=K;se;se=Pe(se))Q++;se=0;for(var ke=$;ke;ke=Pe(ke))se++;for(;0<Q-se;)K=Pe(K),Q--;for(;0<se-Q;)$=Pe($),se--;for(;Q--;){if(K===$||$!==null&&K===$.alternate){Pe=K;break t}K=Pe(K),$=Pe($)}Pe=null}else Pe=null;ee!==null&&xT(oe,Z,ee,Pe,!1),Se!==null&&Mt!==null&&xT(oe,Mt,Se,Pe,!0)}}e:{if(Z=W?er(W):window,ee=Z.nodeName&&Z.nodeName.toLowerCase(),ee==="select"||ee==="input"&&Z.type==="file")var xt=Vx;else if(Br(Z))if(Lx)xt=Vk;else{xt=Mk;var Ce=jk}else ee=Z.nodeName,!ee||ee.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?W&&Lu(W.elementType)&&(xt=Vx):xt=Pk;if(xt&&(xt=xt(i,W))){mo(oe,xt,l,ne);break e}Ce&&Ce(i,Z,W),i==="focusout"&&W&&Z.type==="number"&&W.memoizedProps.value!=null&&Yi(Z,"number",Z.value)}switch(Ce=W?er(W):window,i){case"focusin":(Br(Ce)||Ce.contentEditable==="true")&&(fl=Ce,Zp=W,Yu=null);break;case"focusout":Yu=Zp=fl=null;break;case"mousedown":eg=!0;break;case"contextmenu":case"mouseup":case"dragend":eg=!1,$x(oe,l,ne);break;case"selectionchange":if(Uk)break;case"keydown":case"keyup":$x(oe,l,ne)}var Ze;if(E)e:{switch(i){case"compositionstart":var ut="onCompositionStart";break e;case"compositionend":ut="onCompositionEnd";break e;case"compositionupdate":ut="onCompositionUpdate";break e}ut=void 0}else et?Ct(i,l)&&(ut="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(ut="onCompositionStart");ut&&(Y&&l.locale!=="ko"&&(et||ut!=="onCompositionStart"?ut==="onCompositionEnd"&&et&&(Ze=Ws()):(Zr=ne,ul="value"in Zr?Zr.value:Zr.textContent,et=!0)),Ce=lf(W,ut),0<Ce.length&&(ut=new Fu(ut,i,null,l,ne),oe.push({event:ut,listeners:Ce}),Ze?ut.data=Ze:(Ze=Cn(l),Ze!==null&&(ut.data=Ze)))),(Ze=j?Kn(i,l):Yn(i,l))&&(ut=lf(W,"onBeforeInput"),0<ut.length&&(Ce=new Fu("onBeforeInput","beforeinput",null,l,ne),oe.push({event:Ce,listeners:ut}),Ce.data=Ze)),_O(oe,i,W,l,ne)}yT(oe,a)})}function bc(i,a,l){return{instance:i,listener:a,currentTarget:l}}function lf(i,a){for(var l=a+"Capture",c=[];i!==null;){var p=i,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=Ur(i,l),p!=null&&c.unshift(bc(i,p,y)),p=Ur(i,a),p!=null&&c.push(bc(i,p,y))),i.tag===3)return c;i=i.return}return[]}function AO(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function xT(i,a,l,c,p){for(var y=a._reactName,T=[];l!==null&&l!==c;){var I=l,F=I.alternate,W=I.stateNode;if(I=I.tag,F!==null&&F===c)break;I!==5&&I!==26&&I!==27||W===null||(F=W,p?(W=Ur(l,y),W!=null&&T.unshift(bc(l,W,F))):p||(W=Ur(l,y),W!=null&&T.push(bc(l,W,F)))),l=l.return}T.length!==0&&i.push({event:a,listeners:T})}var CO=/\r\n?/g,RO=/\u0000|\uFFFD/g;function ET(i){return(typeof i=="string"?i:""+i).replace(CO,`
`).replace(RO,"")}function _T(i,a){return a=ET(a),ET(i)===a}function jt(i,a,l,c,p,y){switch(l){case"children":typeof c=="string"?a==="body"||a==="textarea"&&c===""||mi(i,c):(typeof c=="number"||typeof c=="bigint")&&a!=="body"&&mi(i,""+c);break;case"className":Ki(i,"class",c);break;case"tabIndex":Ki(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Ki(i,l,c);break;case"style":nh(i,c,y);break;case"data":if(a!=="object"){Ki(i,"data",c);break}case"src":case"href":if(c===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(l);break}c=Qi(""+c),i.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(a!=="input"&&jt(i,a,"name",p.name,p,null),jt(i,a,"formEncType",p.formEncType,p,null),jt(i,a,"formMethod",p.formMethod,p,null),jt(i,a,"formTarget",p.formTarget,p,null)):(jt(i,a,"encType",p.encType,p,null),jt(i,a,"method",p.method,p,null),jt(i,a,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(l);break}c=Qi(""+c),i.setAttribute(l,c);break;case"onClick":c!=null&&(i.onclick=$n);break;case"onScroll":c!=null&&at("scroll",i);break;case"onScrollEnd":c!=null&&at("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(l=c.__html,l!=null){if(p.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}l=Qi(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,""+c):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":c===!0?i.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,c):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(l,c):i.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(l):i.setAttribute(l,c);break;case"popover":at("beforetoggle",i),at("toggle",i),Xr(i,"popover",c);break;case"xlinkActuate":Lr(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Lr(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Lr(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Lr(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Lr(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Lr(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Lr(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Lr(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Lr(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Xr(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Kp.get(l)||l,Xr(i,l,c))}}function Sv(i,a,l,c,p,y){switch(l){case"style":nh(i,c,y);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(l=c.__html,l!=null){if(p.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"children":typeof c=="string"?mi(i,c):(typeof c=="number"||typeof c=="bigint")&&mi(i,""+c);break;case"onScroll":c!=null&&at("scroll",i);break;case"onScrollEnd":c!=null&&at("scrollend",i);break;case"onClick":c!=null&&(i.onclick=$n);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wr.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),a=l.slice(2,p?l.length-7:void 0),y=i[Me]||null,y=y!=null?y[l]:null,typeof y=="function"&&i.removeEventListener(a,y,p),typeof c=="function")){typeof y!="function"&&y!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,c,p);break e}l in i?i[l]=c:c===!0?i.setAttribute(l,""):Xr(i,l,c)}}}function ar(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":at("error",i),at("load",i);var c=!1,p=!1,y;for(y in l)if(l.hasOwnProperty(y)){var T=l[y];if(T!=null)switch(y){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:jt(i,a,y,T,l,null)}}p&&jt(i,a,"srcSet",l.srcSet,l,null),c&&jt(i,a,"src",l.src,l,null);return;case"input":at("invalid",i);var I=y=T=p=null,F=null,W=null;for(c in l)if(l.hasOwnProperty(c)){var ne=l[c];if(ne!=null)switch(c){case"name":p=ne;break;case"type":T=ne;break;case"checked":F=ne;break;case"defaultChecked":W=ne;break;case"value":y=ne;break;case"defaultValue":I=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,a));break;default:jt(i,a,c,ne,l,null)}}Ni(i,y,I,F,W,T,p,!1);return;case"select":at("invalid",i),c=T=y=null;for(p in l)if(l.hasOwnProperty(p)&&(I=l[p],I!=null))switch(p){case"value":y=I;break;case"defaultValue":T=I;break;case"multiple":c=I;default:jt(i,a,p,I,l,null)}a=y,l=T,i.multiple=!!c,a!=null?ht(i,!!c,a,!1):l!=null&&ht(i,!!c,l,!0);return;case"textarea":at("invalid",i),y=p=c=null;for(T in l)if(l.hasOwnProperty(T)&&(I=l[T],I!=null))switch(T){case"value":c=I;break;case"defaultValue":p=I;break;case"children":y=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(91));break;default:jt(i,a,T,I,l,null)}Qs(i,c,p,y);return;case"option":for(F in l)if(l.hasOwnProperty(F)&&(c=l[F],c!=null))switch(F){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:jt(i,a,F,c,l,null)}return;case"dialog":at("beforetoggle",i),at("toggle",i),at("cancel",i),at("close",i);break;case"iframe":case"object":at("load",i);break;case"video":case"audio":for(c=0;c<yc.length;c++)at(yc[c],i);break;case"image":at("error",i),at("load",i);break;case"details":at("toggle",i);break;case"embed":case"source":case"link":at("error",i),at("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in l)if(l.hasOwnProperty(W)&&(c=l[W],c!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:jt(i,a,W,c,l,null)}return;default:if(Lu(a)){for(ne in l)l.hasOwnProperty(ne)&&(c=l[ne],c!==void 0&&Sv(i,a,ne,c,l,void 0));return}}for(I in l)l.hasOwnProperty(I)&&(c=l[I],c!=null&&jt(i,a,I,c,l,null))}function IO(i,a,l,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,T=null,I=null,F=null,W=null,ne=null;for(ee in l){var oe=l[ee];if(l.hasOwnProperty(ee)&&oe!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":F=oe;default:c.hasOwnProperty(ee)||jt(i,a,ee,null,c,oe)}}for(var Z in c){var ee=c[Z];if(oe=l[Z],c.hasOwnProperty(Z)&&(ee!=null||oe!=null))switch(Z){case"type":y=ee;break;case"name":p=ee;break;case"checked":W=ee;break;case"defaultChecked":ne=ee;break;case"value":T=ee;break;case"defaultValue":I=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,a));break;default:ee!==oe&&jt(i,a,Z,ee,c,oe)}}fi(i,T,I,F,W,ne,y,p);return;case"select":ee=T=I=Z=null;for(y in l)if(F=l[y],l.hasOwnProperty(y)&&F!=null)switch(y){case"value":break;case"multiple":ee=F;default:c.hasOwnProperty(y)||jt(i,a,y,null,c,F)}for(p in c)if(y=c[p],F=l[p],c.hasOwnProperty(p)&&(y!=null||F!=null))switch(p){case"value":Z=y;break;case"defaultValue":I=y;break;case"multiple":T=y;default:y!==F&&jt(i,a,p,y,c,F)}a=I,l=T,c=ee,Z!=null?ht(i,!!l,Z,!1):!!c!=!!l&&(a!=null?ht(i,!!l,a,!0):ht(i,!!l,l?[]:"",!1));return;case"textarea":ee=Z=null;for(I in l)if(p=l[I],l.hasOwnProperty(I)&&p!=null&&!c.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:jt(i,a,I,null,c,p)}for(T in c)if(p=c[T],y=l[T],c.hasOwnProperty(T)&&(p!=null||y!=null))switch(T){case"value":Z=p;break;case"defaultValue":ee=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:p!==y&&jt(i,a,T,p,c,y)}oo(i,Z,ee);return;case"option":for(var Se in l)if(Z=l[Se],l.hasOwnProperty(Se)&&Z!=null&&!c.hasOwnProperty(Se))switch(Se){case"selected":i.selected=!1;break;default:jt(i,a,Se,null,c,Z)}for(F in c)if(Z=c[F],ee=l[F],c.hasOwnProperty(F)&&Z!==ee&&(Z!=null||ee!=null))switch(F){case"selected":i.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:jt(i,a,F,Z,c,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pe in l)Z=l[Pe],l.hasOwnProperty(Pe)&&Z!=null&&!c.hasOwnProperty(Pe)&&jt(i,a,Pe,null,c,Z);for(W in c)if(Z=c[W],ee=l[W],c.hasOwnProperty(W)&&Z!==ee&&(Z!=null||ee!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,a));break;default:jt(i,a,W,Z,c,ee)}return;default:if(Lu(a)){for(var Mt in l)Z=l[Mt],l.hasOwnProperty(Mt)&&Z!==void 0&&!c.hasOwnProperty(Mt)&&Sv(i,a,Mt,void 0,c,Z);for(ne in c)Z=c[ne],ee=l[ne],!c.hasOwnProperty(ne)||Z===ee||Z===void 0&&ee===void 0||Sv(i,a,ne,Z,c,ee);return}}for(var K in l)Z=l[K],l.hasOwnProperty(K)&&Z!=null&&!c.hasOwnProperty(K)&&jt(i,a,K,null,c,Z);for(oe in c)Z=c[oe],ee=l[oe],!c.hasOwnProperty(oe)||Z===ee||Z==null&&ee==null||jt(i,a,oe,Z,c,ee)}function TT(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function NO(){if(typeof performance.getEntriesByType=="function"){for(var i=0,a=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var p=l[c],y=p.transferSize,T=p.initiatorType,I=p.duration;if(y&&I&&TT(T)){for(T=0,I=p.responseEnd,c+=1;c<l.length;c++){var F=l[c],W=F.startTime;if(W>I)break;var ne=F.transferSize,oe=F.initiatorType;ne&&TT(oe)&&(F=F.responseEnd,T+=ne*(F<I?1:(I-W)/(F-W)))}if(--c,a+=8*(y+T)/(p.duration/1e3),i++,10<i)break}}if(0<i)return a/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Av=null,Cv=null;function uf(i){return i.nodeType===9?i:i.ownerDocument}function wT(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ST(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function Rv(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Iv=null;function kO(){var i=window.event;return i&&i.type==="popstate"?i===Iv?!1:(Iv=i,!0):(Iv=null,!1)}var AT=typeof setTimeout=="function"?setTimeout:void 0,OO=typeof clearTimeout=="function"?clearTimeout:void 0,CT=typeof Promise=="function"?Promise:void 0,DO=typeof queueMicrotask=="function"?queueMicrotask:typeof CT<"u"?function(i){return CT.resolve(null).then(i).catch(jO)}:AT;function jO(i){setTimeout(function(){throw i})}function xa(i){return i==="head"}function RT(i,a){var l=a,c=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"||l==="/&"){if(c===0){i.removeChild(p),Bl(a);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")xc(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,xc(l);for(var y=l.firstChild;y;){var T=y.nextSibling,I=y.nodeName;y[Pr]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&y.rel.toLowerCase()==="stylesheet"||l.removeChild(y),y=T}}else l==="body"&&xc(i.ownerDocument.body);l=p}while(l);Bl(a)}function IT(i,a){var l=i;i=0;do{var c=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=c}while(l)}function Nv(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Nv(l),Sr(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function MO(i,a,l,c){for(;i.nodeType===1;){var p=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[Pr])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==p.rel||i.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=Ei(i.nextSibling),i===null)break}return null}function PO(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Ei(i.nextSibling),i===null))return null;return i}function NT(i,a){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Ei(i.nextSibling),i===null))return null;return i}function kv(i){return i.data==="$?"||i.data==="$~"}function Ov(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function VO(i,a){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=a;else if(i.data!=="$?"||l.readyState!=="loading")a();else{var c=function(){a(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function Ei(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return i}var Dv=null;function kT(i){i=i.nextSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(a===0)return Ei(i.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}i=i.nextSibling}return null}function OT(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return i;a--}else l!=="/$"&&l!=="/&"||a++}i=i.previousSibling}return null}function DT(i,a,l){switch(a=uf(l),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function xc(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);Sr(i)}var _i=new Map,jT=new Set;function cf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ks=ie.d;ie.d={f:LO,r:UO,D:BO,C:zO,L:FO,m:qO,X:GO,S:HO,M:$O};function LO(){var i=ks.f(),a=ef();return i||a}function UO(i){var a=Ar(i);a!==null&&a.tag===5&&a.type==="form"?XE(a):ks.r(i)}var Vl=typeof document>"u"?null:document;function MT(i,a,l){var c=Vl;if(c&&typeof a=="string"&&a){var p=Be(a);p='link[rel="'+i+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),jT.has(p)||(jT.add(p),i={rel:i,crossOrigin:l,href:a},c.querySelector(p)===null&&(a=c.createElement("link"),ar(a,"link",i),Ft(a),c.head.appendChild(a)))}}function BO(i){ks.D(i),MT("dns-prefetch",i,null)}function zO(i,a){ks.C(i,a),MT("preconnect",i,a)}function FO(i,a,l){ks.L(i,a,l);var c=Vl;if(c&&i&&a){var p='link[rel="preload"][as="'+Be(a)+'"]';a==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+Be(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+Be(l.imageSizes)+'"]')):p+='[href="'+Be(i)+'"]';var y=p;switch(a){case"style":y=Ll(i);break;case"script":y=Ul(i)}_i.has(y)||(i=b({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),_i.set(y,i),c.querySelector(p)!==null||a==="style"&&c.querySelector(Ec(y))||a==="script"&&c.querySelector(_c(y))||(a=c.createElement("link"),ar(a,"link",i),Ft(a),c.head.appendChild(a)))}}function qO(i,a){ks.m(i,a);var l=Vl;if(l&&i){var c=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+Be(c)+'"][href="'+Be(i)+'"]',y=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Ul(i)}if(!_i.has(y)&&(i=b({rel:"modulepreload",href:i},a),_i.set(y,i),l.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(_c(y)))return}c=l.createElement("link"),ar(c,"link",i),Ft(c),l.head.appendChild(c)}}}function HO(i,a,l){ks.S(i,a,l);var c=Vl;if(c&&i){var p=tr(c).hoistableStyles,y=Ll(i);a=a||"default";var T=p.get(y);if(!T){var I={loading:0,preload:null};if(T=c.querySelector(Ec(y)))I.loading=5;else{i=b({rel:"stylesheet",href:i,"data-precedence":a},l),(l=_i.get(y))&&jv(i,l);var F=T=c.createElement("link");Ft(F),ar(F,"link",i),F._p=new Promise(function(W,ne){F.onload=W,F.onerror=ne}),F.addEventListener("load",function(){I.loading|=1}),F.addEventListener("error",function(){I.loading|=2}),I.loading|=4,df(T,a,c)}T={type:"stylesheet",instance:T,count:1,state:I},p.set(y,T)}}}function GO(i,a){ks.X(i,a);var l=Vl;if(l&&i){var c=tr(l).hoistableScripts,p=Ul(i),y=c.get(p);y||(y=l.querySelector(_c(p)),y||(i=b({src:i,async:!0},a),(a=_i.get(p))&&Mv(i,a),y=l.createElement("script"),Ft(y),ar(y,"link",i),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(p,y))}}function $O(i,a){ks.M(i,a);var l=Vl;if(l&&i){var c=tr(l).hoistableScripts,p=Ul(i),y=c.get(p);y||(y=l.querySelector(_c(p)),y||(i=b({src:i,async:!0,type:"module"},a),(a=_i.get(p))&&Mv(i,a),y=l.createElement("script"),Ft(y),ar(y,"link",i),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(p,y))}}function PT(i,a,l,c){var p=(p=je.current)?cf(p):null;if(!p)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Ll(l.href),l=tr(p).hoistableStyles,c=l.get(a),c||(c={type:"style",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Ll(l.href);var y=tr(p).hoistableStyles,T=y.get(i);if(T||(p=p.ownerDocument||p,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,T),(y=p.querySelector(Ec(i)))&&!y._p&&(T.instance=y,T.state.loading=5),_i.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},_i.set(i,l),y||KO(p,i,l,T.state))),a&&c===null)throw Error(r(528,""));return T}if(a&&c!==null)throw Error(r(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ul(l),l=tr(p).hoistableScripts,c=l.get(a),c||(c={type:"script",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Ll(i){return'href="'+Be(i)+'"'}function Ec(i){return'link[rel="stylesheet"]['+i+"]"}function VT(i){return b({},i,{"data-precedence":i.precedence,precedence:null})}function KO(i,a,l,c){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?c.loading=1:(a=i.createElement("link"),c.preload=a,a.addEventListener("load",function(){return c.loading|=1}),a.addEventListener("error",function(){return c.loading|=2}),ar(a,"link",l),Ft(a),i.head.appendChild(a))}function Ul(i){return'[src="'+Be(i)+'"]'}function _c(i){return"script[async]"+i}function LT(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var c=i.querySelector('style[data-href~="'+Be(l.href)+'"]');if(c)return a.instance=c,Ft(c),c;var p=b({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),Ft(c),ar(c,"style",p),df(c,l.precedence,i),a.instance=c;case"stylesheet":p=Ll(l.href);var y=i.querySelector(Ec(p));if(y)return a.state.loading|=4,a.instance=y,Ft(y),y;c=VT(l),(p=_i.get(p))&&jv(c,p),y=(i.ownerDocument||i).createElement("link"),Ft(y);var T=y;return T._p=new Promise(function(I,F){T.onload=I,T.onerror=F}),ar(y,"link",c),a.state.loading|=4,df(y,l.precedence,i),a.instance=y;case"script":return y=Ul(l.src),(p=i.querySelector(_c(y)))?(a.instance=p,Ft(p),p):(c=l,(p=_i.get(y))&&(c=b({},l),Mv(c,p)),i=i.ownerDocument||i,p=i.createElement("script"),Ft(p),ar(p,"link",c),i.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(c=a.instance,a.state.loading|=4,df(c,l.precedence,i));return a.instance}function df(i,a,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,y=p,T=0;T<c.length;T++){var I=c[T];if(I.dataset.precedence===a)y=I;else if(y!==p)break}y?y.parentNode.insertBefore(i,y.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function jv(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function Mv(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var hf=null;function UT(i,a,l){if(hf===null){var c=new Map,p=hf=new Map;p.set(l,c)}else p=hf,c=p.get(l),c||(c=new Map,p.set(l,c));if(c.has(i))return c;for(c.set(i,null),l=l.getElementsByTagName(i),p=0;p<l.length;p++){var y=l[p];if(!(y[Pr]||y[bt]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(a)||"";T=i+T;var I=c.get(T);I?I.push(y):c.set(T,[y])}}return c}function BT(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function YO(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function zT(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function QO(i,a,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=Ll(c.href),y=a.querySelector(Ec(p));if(y){a=y._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(i.count++,i=ff.bind(i),a.then(i,i)),l.state.loading|=4,l.instance=y,Ft(y);return}y=a.ownerDocument||a,c=VT(c),(p=_i.get(p))&&jv(c,p),y=y.createElement("link"),Ft(y);var T=y;T._p=new Promise(function(I,F){T.onload=I,T.onerror=F}),ar(y,"link",c),l.instance=y}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=ff.bind(i),a.addEventListener("load",l),a.addEventListener("error",l))}}var Pv=0;function WO(i,a){return i.stylesheets&&i.count===0&&pf(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var c=setTimeout(function(){if(i.stylesheets&&pf(i,i.stylesheets),i.unsuspend){var y=i.unsuspend;i.unsuspend=null,y()}},6e4+a);0<i.imgBytes&&Pv===0&&(Pv=62500*NO());var p=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&pf(i,i.stylesheets),i.unsuspend)){var y=i.unsuspend;i.unsuspend=null,y()}},(i.imgBytes>Pv?50:800)+a);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(c),clearTimeout(p)}}:null}function ff(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)pf(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var mf=null;function pf(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,mf=new Map,a.forEach(XO,i),mf=null,ff.call(i))}function XO(i,a){if(!(a.state.loading&4)){var l=mf.get(i);if(l)var c=l.get(null);else{l=new Map,mf.set(i,l);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var T=p[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),c=T)}c&&l.set(null,c)}p=a.instance,T=p.getAttribute("data-precedence"),y=l.get(T)||c,y===c&&l.set(null,p),l.set(T,p),this.count++,c=ff.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),y?y.parentNode.insertBefore(p,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),a.state.loading|=4}}var Tc={$$typeof:B,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function JO(i,a,l,c,p,y,T,I,F){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=tn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tn(0),this.hiddenUpdates=tn(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function FT(i,a,l,c,p,y,T,I,F,W,ne,oe){return i=new JO(i,a,l,T,F,W,ne,oe,I),a=1,y===!0&&(a|=24),y=ti(3,null,null,a),i.current=y,y.stateNode=i,a=pg(),a.refCount++,i.pooledCache=a,a.refCount++,y.memoizedState={element:c,isDehydrated:l,cache:a},bg(y),i}function qT(i){return i?(i=gl,i):gl}function HT(i,a,l,c,p,y){p=qT(p),c.context===null?c.context=p:c.pendingContext=p,c=ua(a),c.payload={element:l},y=y===void 0?null:y,y!==null&&(c.callback=y),l=ca(i,c,a),l!==null&&(Gr(l,i,a),tc(l,i,a))}function GT(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function Vv(i,a){GT(i,a),(i=i.alternate)&&GT(i,a)}function $T(i){if(i.tag===13||i.tag===31){var a=vo(i,67108864);a!==null&&Gr(a,i,67108864),Vv(i,67108864)}}function KT(i){if(i.tag===13||i.tag===31){var a=ai();a=jr(a);var l=vo(i,a);l!==null&&Gr(l,i,a),Vv(i,a)}}var gf=!0;function ZO(i,a,l,c){var p=X.T;X.T=null;var y=ie.p;try{ie.p=2,Lv(i,a,l,c)}finally{ie.p=y,X.T=p}}function eD(i,a,l,c){var p=X.T;X.T=null;var y=ie.p;try{ie.p=8,Lv(i,a,l,c)}finally{ie.p=y,X.T=p}}function Lv(i,a,l,c){if(gf){var p=Uv(c);if(p===null)wv(i,a,c,vf,l),QT(i,c);else if(nD(p,i,a,l,c))c.stopPropagation();else if(QT(i,c),a&4&&-1<tD.indexOf(i)){for(;p!==null;){var y=Ar(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=it(y.pendingLanes);if(T!==0){var I=y;for(I.pendingLanes|=2,I.entangledLanes|=2;T;){var F=1<<31-xe(T);I.entanglements[1]|=F,T&=~F}ts(y),(wt&6)===0&&(Jh=vt()+500,vc(0))}}break;case 31:case 13:I=vo(y,2),I!==null&&Gr(I,y,2),ef(),Vv(y,2)}if(y=Uv(c),y===null&&wv(i,a,c,vf,l),y===p)break;p=y}p!==null&&c.stopPropagation()}else wv(i,a,c,null,l)}}function Uv(i){return i=ll(i),Bv(i)}var vf=null;function Bv(i){if(vf=null,i=Zn(i),i!==null){var a=o(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=u(a),i!==null)return i;i=null}else if(l===31){if(i=d(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return vf=i,null}function YT(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(on()){case $e:return 2;case Bt:return 8;case Gt:case dn:return 32;case Gi:return 268435456;default:return 32}default:return 32}}var zv=!1,Ea=null,_a=null,Ta=null,wc=new Map,Sc=new Map,wa=[],tD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function QT(i,a){switch(i){case"focusin":case"focusout":Ea=null;break;case"dragenter":case"dragleave":_a=null;break;case"mouseover":case"mouseout":Ta=null;break;case"pointerover":case"pointerout":wc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sc.delete(a.pointerId)}}function Ac(i,a,l,c,p,y){return i===null||i.nativeEvent!==y?(i={blockedOn:a,domEventName:l,eventSystemFlags:c,nativeEvent:y,targetContainers:[p]},a!==null&&(a=Ar(a),a!==null&&$T(a)),i):(i.eventSystemFlags|=c,a=i.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),i)}function nD(i,a,l,c,p){switch(a){case"focusin":return Ea=Ac(Ea,i,a,l,c,p),!0;case"dragenter":return _a=Ac(_a,i,a,l,c,p),!0;case"mouseover":return Ta=Ac(Ta,i,a,l,c,p),!0;case"pointerover":var y=p.pointerId;return wc.set(y,Ac(wc.get(y)||null,i,a,l,c,p)),!0;case"gotpointercapture":return y=p.pointerId,Sc.set(y,Ac(Sc.get(y)||null,i,a,l,c,p)),!0}return!1}function WT(i){var a=Zn(i.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=u(l),a!==null){i.blockedOn=a,Ne(i.priority,function(){KT(l)});return}}else if(a===31){if(a=d(l),a!==null){i.blockedOn=a,Ne(i.priority,function(){KT(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function yf(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=Uv(i.nativeEvent);if(l===null){l=i.nativeEvent;var c=new l.constructor(l.type,l);ol=c,l.target.dispatchEvent(c),ol=null}else return a=Ar(l),a!==null&&$T(a),i.blockedOn=l,!1;a.shift()}return!0}function XT(i,a,l){yf(i)&&l.delete(a)}function rD(){zv=!1,Ea!==null&&yf(Ea)&&(Ea=null),_a!==null&&yf(_a)&&(_a=null),Ta!==null&&yf(Ta)&&(Ta=null),wc.forEach(XT),Sc.forEach(XT)}function bf(i,a){i.blockedOn===a&&(i.blockedOn=null,zv||(zv=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,rD)))}var xf=null;function JT(i){xf!==i&&(xf=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){xf===i&&(xf=null);for(var a=0;a<i.length;a+=3){var l=i[a],c=i[a+1],p=i[a+2];if(typeof c!="function"){if(Bv(c||l)===null)continue;break}var y=Ar(l);y!==null&&(i.splice(a,3),a-=3,Ug(y,{pending:!0,data:p,method:l.method,action:c},c,p))}}))}function Bl(i){function a(F){return bf(F,i)}Ea!==null&&bf(Ea,i),_a!==null&&bf(_a,i),Ta!==null&&bf(Ta,i),wc.forEach(a),Sc.forEach(a);for(var l=0;l<wa.length;l++){var c=wa[l];c.blockedOn===i&&(c.blockedOn=null)}for(;0<wa.length&&(l=wa[0],l.blockedOn===null);)WT(l),l.blockedOn===null&&wa.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var p=l[c],y=l[c+1],T=p[Me]||null;if(typeof y=="function")T||JT(l);else if(T){var I=null;if(y&&y.hasAttribute("formAction")){if(p=y,T=y[Me]||null)I=T.formAction;else if(Bv(p)!==null)continue}else I=T.action;typeof I=="function"?l[c+1]=I:(l.splice(c,3),c-=3),JT(l)}}}function ZT(){function i(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(T){return p=T})},focusReset:"manual",scroll:"manual"})}function a(){p!==null&&(p(),p=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,p=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),p!==null&&(p(),p=null)}}}function Fv(i){this._internalRoot=i}Ef.prototype.render=Fv.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var l=a.current,c=ai();HT(l,c,i,a,null,null)},Ef.prototype.unmount=Fv.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;HT(i.current,2,null,i,null,null),ef(),a[wr]=null}};function Ef(i){this._internalRoot=i}Ef.prototype.unstable_scheduleHydration=function(i){if(i){var a=rn();i={blockedOn:null,target:i,priority:a};for(var l=0;l<wa.length&&a!==0&&a<wa[l].priority;l++);wa.splice(l,0,i),l===0&&WT(i)}};var ew=e.version;if(ew!=="19.2.4")throw Error(r(527,ew,"19.2.4"));ie.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=f(a),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var iD={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_f.isDisabled&&_f.supportsFiber)try{Jn=_f.inject(iD),hn=_f}catch{}}return Rc.createRoot=function(i,a){if(!s(i))throw Error(r(299));var l=!1,c="",p=o_,y=l_,T=u_;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError)),a=FT(i,1,!1,null,null,l,c,null,p,y,T,ZT),i[wr]=a.current,Tv(i),new Fv(a)},Rc.hydrateRoot=function(i,a,l){if(!s(i))throw Error(r(299));var c=!1,p="",y=o_,T=l_,I=u_,F=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(I=l.onRecoverableError),l.formState!==void 0&&(F=l.formState)),a=FT(i,1,!0,a,l??null,c,p,F,y,T,I,ZT),a.context=qT(null),l=a.current,c=ai(),c=jr(c),p=ua(c),p.callback=null,ca(l,p,c),l=c,a.current.lanes=l,Nt(a,l),ts(a),i[wr]=a.current,Tv(i),new Ef(a)},Rc.version="19.2.4",Rc}var cw;function fD(){if(cw)return Gv.exports;cw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Gv.exports=hD(),Gv.exports}var mD=fD();const pD=nC(mD),Ic=[{emoji:"",title:"Bienvenue dans Dress Me Up!",description:"Votre assistant mode personnel propuls par l'IA. Dcouvrons ensemble comment a marche."},{emoji:"",title:"Ajoutez vos vtements",description:"Prenez en photo vos vtements. L'IA analysera automatiquement la couleur, la matire et le type."},{emoji:"",title:"Gnrez des tenues",description:"Dcrivez une occasion et l'IA crera des combinaisons parfaites  partir de votre garde-robe."},{emoji:"",title:"Planifiez vos valises",description:"Partez en voyage ? L'IA optimise votre valise selon la dure et la destination."}],gD=({onComplete:t})=>{const[e,n]=k.useState(0),r=()=>{e<Ic.length-1?n(e+1):(localStorage.setItem("dressmup_onboarding_complete","true"),t())},s=()=>{localStorage.setItem("dressmup_onboarding_complete","true"),t()},o=Ic[e];return g.jsx("div",{className:"fixed inset-0 bg-onyx/90 backdrop-blur-md flex items-center justify-center z-[200] p-4",children:g.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-md w-full overflow-hidden",children:[g.jsx("div",{className:"h-1 bg-gray-200 dark:bg-gray-700",children:g.jsx("div",{className:"h-full bg-gold transition-all duration-300",style:{width:`${(e+1)/Ic.length*100}%`}})}),g.jsxs("div",{className:"p-8 text-center",children:[g.jsx("div",{className:"text-6xl mb-6",children:o.emoji}),g.jsx("h2",{className:"text-2xl font-serif font-bold mb-4",children:o.title}),g.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:o.description}),g.jsx("div",{className:"flex justify-center gap-2 mb-8",children:Ic.map((u,d)=>g.jsx("div",{className:`w-2 h-2 rounded-full transition-all ${d===e?"bg-gold w-6":"bg-gray-300 dark:bg-gray-600"}`},d))}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{onClick:s,className:"flex-1 px-4 py-3 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 font-medium transition-colors",children:"Passer"}),g.jsx("button",{onClick:r,className:"flex-1 px-4 py-3 bg-gold text-onyx font-bold rounded-xl hover:bg-gold-dark transition-all",children:e<Ic.length-1?"Suivant":"Commencer"})]})]})]})})},vD=()=>{};var dw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},yD=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],u=t[n++],d=t[n++],h=((s&7)<<18|(o&63)<<12|(u&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],u=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|u&63)}}return e.join("")},sC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],u=s+1<t.length,d=u?t[s+1]:0,h=s+2<t.length,f=h?t[s+2]:0,v=o>>2,b=(o&3)<<4|d>>4;let x=(d&15)<<2|f>>6,_=f&63;h||(_=64,u||(x=64)),r.push(n[v],n[b],n[x],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(iC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],d=s<t.length?n[t.charAt(s)]:0;++s;const f=s<t.length?n[t.charAt(s)]:64;++s;const b=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||d==null||f==null||b==null)throw new bD;const x=o<<2|d>>4;if(r.push(x),f!==64){const _=d<<4&240|f>>2;if(r.push(_),b!==64){const A=f<<6&192|b;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class bD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xD=function(t){const e=iC(t);return sC.encodeByteArray(e,!0)},bm=function(t){return xD(t).replace(/\./g,"")},aC=function(t){try{return sC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D=()=>ED().__FIREBASE_DEFAULTS__,TD=()=>{if(typeof process>"u"||typeof dw>"u")return;const t=dw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},wD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&aC(t[1]);return e&&JSON.parse(e)},lp=()=>{try{return vD()||_D()||TD()||wD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},oC=t=>{var e,n;return(n=(e=lp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},H0=t=>{const e=oC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},lC=()=>{var t;return(t=lp())===null||t===void 0?void 0:t.config},uC=t=>{var e;return(e=lp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function up(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[bm(JSON.stringify(n)),bm(JSON.stringify(u)),""].join(".")}const Wc={};function AD(){const t={prod:[],emulator:[]};for(const e of Object.keys(Wc))Wc[e]?t.emulator.push(e):t.prod.push(e);return t}function CD(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let hw=!1;function cp(t,e){if(typeof window>"u"||typeof document>"u"||!Gs(window.location.host)||Wc[t]===e||Wc[t]||hw)return;Wc[t]=e;function n(x){return`__firebase__banner__${x}`}const r="__firebase__banner",o=AD().prod.length>0;function u(){const x=document.getElementById(r);x&&x.remove()}function d(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function h(x,_){x.setAttribute("width","24"),x.setAttribute("id",_),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function f(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{hw=!0,u()},x}function v(x,_){x.setAttribute("id",_),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function b(){const x=CD(r),_=n("text"),A=document.getElementById(_)||document.createElement("span"),R=n("learnmore"),M=document.getElementById(R)||document.createElement("a"),U=n("preprendIcon"),O=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const B=x.element;d(B),v(M,R);const H=f();h(O,U),B.append(O,A,M,H),document.body.appendChild(B)}o?(A.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_r())}function ID(){var t;const e=(t=lp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ND(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function kD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function OD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function DD(){const t=_r();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function jD(){return!ID()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function MD(){try{return typeof indexedDB=="object"}catch{return!1}}function PD(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD="FirebaseError";class Hi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=VD,Object.setPrototypeOf(this,Hi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pd.prototype.create)}}class Pd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],u=o?LD(o,r):"Error",d=`${this.serviceName}: ${u} (${s}).`;return new Hi(s,d,r)}}function LD(t,e){return t.replace(UD,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const UD=/\{\$([^}]+)}/g;function BD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $o(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],u=e[s];if(fw(o)&&fw(u)){if(!$o(o,u))return!1}else if(o!==u)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function fw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Vc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Lc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function zD(t,e){const n=new FD(t,e);return n.subscribe.bind(n)}class FD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");qD(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Qv),s.error===void 0&&(s.error=Qv),s.complete===void 0&&(s.complete=Qv);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Qv(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t){return t&&t._delegate?t._delegate:t}class Us{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new SD;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($D(e))try{this.getOrInitializeService({instanceIdentifier:Oo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=Oo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Oo){return this.instances.has(e)}getOptions(e=Oo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(o);r===d&&u.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:GD(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Oo){return this.component?this.component.multipleInstances?e:Oo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function GD(t){return t===Oo?void 0:t}function $D(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new HD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ct||(ct={}));const YD={debug:ct.DEBUG,verbose:ct.VERBOSE,info:ct.INFO,warn:ct.WARN,error:ct.ERROR,silent:ct.SILENT},QD=ct.INFO,WD={[ct.DEBUG]:"log",[ct.VERBOSE]:"log",[ct.INFO]:"info",[ct.WARN]:"warn",[ct.ERROR]:"error"},XD=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=WD[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class G0{constructor(e){this.name=e,this._logLevel=QD,this._logHandler=XD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ct.DEBUG,...e),this._logHandler(this,ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ct.VERBOSE,...e),this._logHandler(this,ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ct.INFO,...e),this._logHandler(this,ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ct.WARN,...e),this._logHandler(this,ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ct.ERROR,...e),this._logHandler(this,ct.ERROR,...e)}}const JD=(t,e)=>e.some(n=>t instanceof n);let mw,pw;function ZD(){return mw||(mw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ej(){return pw||(pw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dC=new WeakMap,Oy=new WeakMap,hC=new WeakMap,Wv=new WeakMap,$0=new WeakMap;function tj(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",u)},o=()=>{n(La(t.result)),s()},u=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&dC.set(n,t)}).catch(()=>{}),$0.set(e,t),e}function nj(t){if(Oy.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",u),t.removeEventListener("abort",u)},o=()=>{n(),s()},u=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",u),t.addEventListener("abort",u)});Oy.set(t,e)}let Dy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Oy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||hC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return La(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function rj(t){Dy=t(Dy)}function ij(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Xv(this),e,...n);return hC.set(r,e.sort?e.sort():[e]),La(r)}:ej().includes(t)?function(...e){return t.apply(Xv(this),e),La(dC.get(this))}:function(...e){return La(t.apply(Xv(this),e))}}function sj(t){return typeof t=="function"?ij(t):(t instanceof IDBTransaction&&nj(t),JD(t,ZD())?new Proxy(t,Dy):t)}function La(t){if(t instanceof IDBRequest)return tj(t);if(Wv.has(t))return Wv.get(t);const e=sj(t);return e!==t&&(Wv.set(t,e),$0.set(e,t)),e}const Xv=t=>$0.get(t);function aj(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const u=indexedDB.open(t,e),d=La(u);return r&&u.addEventListener("upgradeneeded",h=>{r(La(u.result),h.oldVersion,h.newVersion,La(u.transaction),h)}),n&&u.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),d.then(h=>{o&&h.addEventListener("close",()=>o()),s&&h.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),d}const oj=["get","getKey","getAll","getAllKeys","count"],lj=["put","add","delete","clear"],Jv=new Map;function gw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Jv.get(e))return Jv.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=lj.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||oj.includes(n)))return;const o=async function(u,...d){const h=this.transaction(u,s?"readwrite":"readonly");let f=h.store;return r&&(f=f.index(d.shift())),(await Promise.all([f[n](...d),s&&h.done]))[0]};return Jv.set(e,o),o}rj(t=>({...t,get:(e,n,r)=>gw(e,n)||t.get(e,n,r),has:(e,n)=>!!gw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(cj(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function cj(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const jy="@firebase/app",vw="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs=new G0("@firebase/app"),dj="@firebase/app-compat",hj="@firebase/analytics-compat",fj="@firebase/analytics",mj="@firebase/app-check-compat",pj="@firebase/app-check",gj="@firebase/auth",vj="@firebase/auth-compat",yj="@firebase/database",bj="@firebase/data-connect",xj="@firebase/database-compat",Ej="@firebase/functions",_j="@firebase/functions-compat",Tj="@firebase/installations",wj="@firebase/installations-compat",Sj="@firebase/messaging",Aj="@firebase/messaging-compat",Cj="@firebase/performance",Rj="@firebase/performance-compat",Ij="@firebase/remote-config",Nj="@firebase/remote-config-compat",kj="@firebase/storage",Oj="@firebase/storage-compat",Dj="@firebase/firestore",jj="@firebase/ai",Mj="@firebase/firestore-compat",Pj="firebase",Vj="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My="[DEFAULT]",Lj={[jy]:"fire-core",[dj]:"fire-core-compat",[fj]:"fire-analytics",[hj]:"fire-analytics-compat",[pj]:"fire-app-check",[mj]:"fire-app-check-compat",[gj]:"fire-auth",[vj]:"fire-auth-compat",[yj]:"fire-rtdb",[bj]:"fire-data-connect",[xj]:"fire-rtdb-compat",[Ej]:"fire-fn",[_j]:"fire-fn-compat",[Tj]:"fire-iid",[wj]:"fire-iid-compat",[Sj]:"fire-fcm",[Aj]:"fire-fcm-compat",[Cj]:"fire-perf",[Rj]:"fire-perf-compat",[Ij]:"fire-rc",[Nj]:"fire-rc-compat",[kj]:"fire-gcs",[Oj]:"fire-gcs-compat",[Dj]:"fire-fst",[Mj]:"fire-fst-compat",[jj]:"fire-vertex","fire-js":"fire-js",[Pj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm=new Map,Uj=new Map,Py=new Map;function yw(t,e){try{t.container.addComponent(e)}catch(n){Bs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qa(t){const e=t.name;if(Py.has(e))return Bs.debug(`There were multiple attempts to register component ${e}.`),!1;Py.set(e,t);for(const n of xm.values())yw(n,t);for(const n of Uj.values())yw(n,t);return!0}function Ld(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function kr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ua=new Pd("app","Firebase",Bj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Us("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ua.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=Vj;function fC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:My,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Ua.create("bad-app-name",{appName:String(s)});if(n||(n=lC()),!n)throw Ua.create("no-options");const o=xm.get(s);if(o){if($o(n,o.options)&&$o(r,o.config))return o;throw Ua.create("duplicate-app",{appName:s})}const u=new KD(s);for(const h of Py.values())u.addComponent(h);const d=new zj(n,r,u);return xm.set(s,d),d}function dp(t=My){const e=xm.get(t);if(!e&&t===My&&lC())return fC();if(!e)throw Ua.create("no-app",{appName:t});return e}function Ri(t,e,n){var r;let s=(r=Lj[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${s}" with version "${e}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bs.warn(d.join(" "));return}qa(new Us(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj="firebase-heartbeat-database",qj=1,yd="firebase-heartbeat-store";let Zv=null;function mC(){return Zv||(Zv=aj(Fj,qj,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(yd)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ua.create("idb-open",{originalErrorMessage:t.message})})),Zv}async function Hj(t){try{const n=(await mC()).transaction(yd),r=await n.objectStore(yd).get(pC(t));return await n.done,r}catch(e){if(e instanceof Hi)Bs.warn(e.message);else{const n=Ua.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Bs.warn(n.message)}}}async function bw(t,e){try{const r=(await mC()).transaction(yd,"readwrite");await r.objectStore(yd).put(e,pC(t)),await r.done}catch(n){if(n instanceof Hi)Bs.warn(n.message);else{const r=Ua.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Bs.warn(r.message)}}}function pC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=1024,$j=30;class Kj{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Qj(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=xw();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(u=>u.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>$j){const u=Wj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Bs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=xw(),{heartbeatsToSend:r,unsentEntries:s}=Yj(this._heartbeatsCache.heartbeats),o=bm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Bs.warn(n),""}}}function xw(){return new Date().toISOString().substring(0,10)}function Yj(t,e=Gj){const n=[];let r=t.slice();for(const s of t){const o=n.find(u=>u.agent===s.agent);if(o){if(o.dates.push(s.date),Ew(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ew(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Qj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return MD()?PD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Hj(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return bw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return bw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ew(t){return bm(JSON.stringify({version:2,heartbeats:t})).length}function Wj(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xj(t){qa(new Us("platform-logger",e=>new uj(e),"PRIVATE")),qa(new Us("heartbeat",e=>new Kj(e),"PRIVATE")),Ri(jy,vw,t),Ri(jy,vw,"esm2017"),Ri("fire-js","")}Xj("");function K0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function gC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Jj=gC,vC=new Pd("auth","Firebase",gC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em=new G0("@firebase/auth");function Zj(t,...e){Em.logLevel<=ct.WARN&&Em.warn(`Auth (${el}): ${t}`,...e)}function Zf(t,...e){Em.logLevel<=ct.ERROR&&Em.error(`Auth (${el}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(t,...e){throw Q0(t,...e)}function zi(t,...e){return Q0(t,...e)}function Y0(t,e,n){const r=Object.assign(Object.assign({},Jj()),{[e]:n});return new Pd("auth","Firebase",r).create(e,{appName:t.name})}function Ps(t){return Y0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function eM(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ii(t,"argument-error"),Y0(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Q0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return vC.create(t,...e)}function Le(t,e,...n){if(!t)throw Q0(e,...n)}function js(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Zf(e),new Error(e)}function zs(t,e){t||js(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function tM(){return _w()==="http:"||_w()==="https:"}function _w(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tM()||kD()||"connection"in navigator)?navigator.onLine:!0}function rM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,n){this.shortDelay=e,this.longDelay=n,zs(n>e,"Short delay should be less than long delay!"),this.isMobile=RD()||OD()}get(){return nM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(t,e){zs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;js("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;js("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;js("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],aM=new Ud(3e4,6e4);function Za(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function eo(t,e,n,r,s={}){return bC(t,s,async()=>{let o={},u={};r&&(e==="GET"?u=r:o={body:JSON.stringify(r)});const d=Vd(Object.assign({key:t.config.apiKey},u)).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:h},o);return ND()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Gs(t.emulatorConfig.host)&&(f.credentials="include"),yC.fetch()(await xC(t,t.config.apiHost,n,d),f)})}async function bC(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},iM),e);try{const s=new lM(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw Tf(t,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const d=o.ok?u.errorMessage:u.error.message,[h,f]=d.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tf(t,"credential-already-in-use",u);if(h==="EMAIL_EXISTS")throw Tf(t,"email-already-in-use",u);if(h==="USER_DISABLED")throw Tf(t,"user-disabled",u);const v=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw Y0(t,v,f);Ii(t,v)}}catch(s){if(s instanceof Hi)throw s;Ii(t,"network-request-failed",{message:String(s)})}}async function Bd(t,e,n,r,s={}){const o=await eo(t,e,n,r,s);return"mfaPendingCredential"in o&&Ii(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function xC(t,e,n,r){const s=`${e}${n}?${r}`,o=t,u=o.config.emulator?W0(t.config,s):`${t.config.apiScheme}://${s}`;return sM.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(u).toString():u}function oM(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(zi(this.auth,"network-request-failed")),aM.get())})}}function Tf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=zi(t,e,r);return s.customData._tokenResponse=n,s}function Tw(t){return t!==void 0&&t.enterprise!==void 0}class uM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return oM(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function cM(t,e){return eo(t,"GET","/v2/recaptchaConfig",Za(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dM(t,e){return eo(t,"POST","/v1/accounts:delete",e)}async function _m(t,e){return eo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hM(t,e=!1){const n=Lt(t),r=await n.getIdToken(e),s=X0(r);Le(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,u=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:Xc(ey(s.auth_time)),issuedAtTime:Xc(ey(s.iat)),expirationTime:Xc(ey(s.exp)),signInProvider:u||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function ey(t){return Number(t)*1e3}function X0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Zf("JWT malformed, contained fewer than 3 sections"),null;try{const s=aC(n);return s?JSON.parse(s):(Zf("Failed to decode base64 JWT payload"),null)}catch(s){return Zf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function ww(t){const e=X0(t);return Le(e,"internal-error"),Le(typeof e.exp<"u","internal-error"),Le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Hi&&fM(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function fM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xc(this.lastLoginAt),this.creationTime=Xc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tm(t){var e;const n=t.auth,r=await t.getIdToken(),s=await bd(t,_m(n,{idToken:r}));Le(s==null?void 0:s.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const u=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?EC(o.providerUserInfo):[],d=gM(t.providerData,u),h=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!(d!=null&&d.length),v=h?f:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Ly(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(t,b)}async function pM(t){const e=Lt(t);await Tm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gM(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function EC(t){return t.map(e=>{var{providerId:n}=e,r=K0(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vM(t,e){const n=await bC(t,{},async()=>{const r=Vd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,u=await xC(t,s,"/v1/token",`key=${o}`),d=await t._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:d,body:r};return t.emulatorConfig&&Gs(t.emulatorConfig.host)&&(h.credentials="include"),yC.fetch()(u,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yM(t,e){return eo(t,"POST","/v2/accounts:revokeToken",Za(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Le(e.idToken,"internal-error"),Le(typeof e.idToken<"u","internal-error"),Le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ww(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Le(e.length!==0,"internal-error");const n=ww(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await vM(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,u=new ru;return r&&(Le(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(Le(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),o&&(Le(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ru,this.toJSON())}_performRefresh(){return js("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aa(t,e){Le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Li{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,o=K0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ly(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await bd(this,this.stsTokenManager.getToken(this.auth,e));return Le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return hM(this,e)}reload(){return pM(this)}_assign(e){this!==e&&(Le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Li(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Tm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kr(this.auth.app))return Promise.reject(Ps(this.auth));const e=await this.getIdToken();return await bd(this,dM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,o,u,d,h,f,v;const b=(r=n.displayName)!==null&&r!==void 0?r:void 0,x=(s=n.email)!==null&&s!==void 0?s:void 0,_=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,A=(u=n.photoURL)!==null&&u!==void 0?u:void 0,R=(d=n.tenantId)!==null&&d!==void 0?d:void 0,M=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,U=(f=n.createdAt)!==null&&f!==void 0?f:void 0,O=(v=n.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:B,emailVerified:H,isAnonymous:G,providerData:q,stsTokenManager:C}=n;Le(B&&C,e,"internal-error");const S=ru.fromJSON(this.name,C);Le(typeof B=="string",e,"internal-error"),Aa(b,e.name),Aa(x,e.name),Le(typeof H=="boolean",e,"internal-error"),Le(typeof G=="boolean",e,"internal-error"),Aa(_,e.name),Aa(A,e.name),Aa(R,e.name),Aa(M,e.name),Aa(U,e.name),Aa(O,e.name);const N=new Li({uid:B,auth:e,email:x,emailVerified:H,displayName:b,isAnonymous:G,photoURL:A,phoneNumber:_,tenantId:R,stsTokenManager:S,createdAt:U,lastLoginAt:O});return q&&Array.isArray(q)&&(N.providerData=q.map(P=>Object.assign({},P))),M&&(N._redirectEventId=M),N}static async _fromIdTokenResponse(e,n,r=!1){const s=new ru;s.updateFromServerResponse(n);const o=new Li({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Tm(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Le(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?EC(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),d=new ru;d.updateFromIdToken(r);const h=new Li({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:u}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Ly(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=new Map;function Ms(t){zs(t instanceof Function,"Expected a class definition");let e=Sw.get(t);return e?(zs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Sw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}_C.type="NONE";const Aw=_C;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(t,e,n){return`firebase:${t}:${e}:${n}`}class iu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=em(this.userKey,s.apiKey,o),this.fullPersistenceKey=em("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await _m(this.auth,{idToken:e}).catch(()=>{});return n?Li._fromGetAccountInfoResponse(this.auth,n,e):null}return Li._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new iu(Ms(Aw),e,r);const s=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||Ms(Aw);const u=em(r,e.config.apiKey,e.name);let d=null;for(const f of n)try{const v=await f._get(u);if(v){let b;if(typeof v=="string"){const x=await _m(e,{idToken:v}).catch(()=>{});if(!x)break;b=await Li._fromGetAccountInfoResponse(e,x,v)}else b=Li._fromJSON(e,v);f!==o&&(d=b),o=f;break}}catch{}const h=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new iu(o,e,r):(o=h[0],d&&await o._set(u,d.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(u)}catch{}})),new iu(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(AC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(TC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RC(e))return"Blackberry";if(IC(e))return"Webos";if(wC(e))return"Safari";if((e.includes("chrome/")||SC(e))&&!e.includes("edge/"))return"Chrome";if(CC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function TC(t=_r()){return/firefox\//i.test(t)}function wC(t=_r()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function SC(t=_r()){return/crios\//i.test(t)}function AC(t=_r()){return/iemobile/i.test(t)}function CC(t=_r()){return/android/i.test(t)}function RC(t=_r()){return/blackberry/i.test(t)}function IC(t=_r()){return/webos/i.test(t)}function J0(t=_r()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function bM(t=_r()){var e;return J0(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function xM(){return DD()&&document.documentMode===10}function NC(t=_r()){return J0(t)||CC(t)||IC(t)||RC(t)||/windows phone/i.test(t)||AC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(t,e=[]){let n;switch(t){case"Browser":n=Cw(_r());break;case"Worker":n=`${Cw(_r())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${el}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((u,d)=>{try{const h=e(o);u(h)}catch(h){d(h)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _M(t,e={}){return eo(t,"GET","/v2/passwordPolicy",Za(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM=6;class wM{constructor(e){var n,r,s,o;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=u.minPasswordLength)!==null&&n!==void 0?n:TM,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,o,u,d;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(n=h.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(s=h.containsLowercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(o=h.containsUppercaseLetter)!==null&&o!==void 0?o:!0),h.isValid&&(h.isValid=(u=h.containsNumericCharacter)!==null&&u!==void 0?u:!0),h.isValid&&(h.isValid=(d=h.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),h}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Rw(this),this.idTokenSubscription=new Rw(this),this.beforeStateQueue=new EM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ms(n)),this._initializationPromise=this.queue(async()=>{var r,s,o;if(!this._deleted&&(this.persistenceManager=await iu.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await _m(this,{idToken:e}),r=await Li._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(kr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=s==null?void 0:s._redirectEventId,h=await this.tryRedirectSignIn(e);(!u||u===d)&&(h!=null&&h.user)&&(s=h.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Tm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kr(this.app))return Promise.reject(Ps(this));const n=e?Lt(e):null;return n&&Le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kr(this.app)?Promise.reject(Ps(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kr(this.app)?Promise.reject(Ps(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ms(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _M(this),n=new wM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Pd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await yM(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ms(e)||this._popupRedirectResolver;Le(n,this,"argument-error"),this.redirectPersistenceManager=await iu.create(this,[Ms(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Le(d,this,"internal-error"),d.then(()=>{u||o(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,r,s);return()=>{u=!0,h()}}else{const h=e.addObserver(n);return()=>{u=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(kr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Zj(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function to(t){return Lt(t)}class Rw{constructor(e){this.auth=e,this.observer=null,this.addObserver=zD(n=>this.observer=n)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function AM(t){hp=t}function OC(t){return hp.loadJS(t)}function CM(){return hp.recaptchaEnterpriseScript}function RM(){return hp.gapiScript}function IM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class NM{constructor(){this.enterprise=new kM}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class kM{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const OM="recaptcha-enterprise",DC="NO_RECAPTCHA";class DM{constructor(e){this.type=OM,this.auth=to(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(u,d)=>{cM(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const f=new uM(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,u(f.siteKey)}}).catch(h=>{d(h)})})}function s(o,u,d){const h=window.grecaptcha;Tw(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{u(f)}).catch(()=>{u(DC)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new NM().execute("siteKey",{action:"verify"}):new Promise((o,u)=>{r(this.auth).then(d=>{if(!n&&Tw(window.grecaptcha))s(d,o,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let h=CM();h.length!==0&&(h+=d),OC(h).then(()=>{s(d,o,u)}).catch(f=>{u(f)})}}).catch(d=>{u(d)})})}}async function Iw(t,e,n,r=!1,s=!1){const o=new DM(t);let u;if(s)u=DC;else try{u=await o.verify(n)}catch{u=await o.verify(n,!0)}const d=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const h=d.phoneEnrollmentInfo.phoneNumber,f=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const h=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Uy(t,e,n,r,s){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Iw(t,e,n,n==="getOobCode");return r(t,u)}else return r(t,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Iw(t,e,n,n==="getOobCode");return r(t,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jM(t,e){const n=Ld(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if($o(o,e??{}))return s;Ii(s,"already-initialized")}return n.initialize({options:e})}function MM(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ms);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function PM(t,e,n){const r=to(t);Le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=jC(e),{host:u,port:d}=VM(e),h=d===null?"":`:${d}`,f={url:`${o}//${u}${h}/`},v=Object.freeze({host:u,port:d,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Le(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Le($o(f,r.config.emulator)&&$o(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,Gs(u)?(up(`${o}//${u}${h}`),cp("Auth",!0)):LM()}function jC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function VM(t){const e=jC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:Nw(r.substr(o.length+1))}}else{const[o,u]=r.split(":");return{host:o,port:Nw(u)}}}function Nw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function LM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return js("not implemented")}_getIdTokenResponse(e){return js("not implemented")}_linkToIdToken(e,n){return js("not implemented")}_getReauthenticationResolver(e){return js("not implemented")}}async function UM(t,e){return eo(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BM(t,e){return Bd(t,"POST","/v1/accounts:signInWithPassword",Za(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zM(t,e){return Bd(t,"POST","/v1/accounts:signInWithEmailLink",Za(t,e))}async function FM(t,e){return Bd(t,"POST","/v1/accounts:signInWithEmailLink",Za(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd extends Z0{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new xd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new xd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uy(e,n,"signInWithPassword",BM);case"emailLink":return zM(e,{email:this._email,oobCode:this._password});default:Ii(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uy(e,r,"signUpPassword",UM);case"emailLink":return FM(e,{idToken:n,email:this._email,oobCode:this._password});default:Ii(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function su(t,e){return Bd(t,"POST","/v1/accounts:signInWithIdp",Za(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM="http://localhost";class Ko extends Z0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ko(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ii("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,o=K0(n,["providerId","signInMethod"]);if(!r||!s)return null;const u=new Ko(r,s);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return su(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,su(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,su(e,n)}buildRequest(){const e={requestUri:qM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Vd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function GM(t){const e=Vc(Lc(t)).link,n=e?Vc(Lc(e)).deep_link_id:null,r=Vc(Lc(t)).deep_link_id;return(r?Vc(Lc(r)).link:null)||r||n||e||t}class eb{constructor(e){var n,r,s,o,u,d;const h=Vc(Lc(e)),f=(n=h.apiKey)!==null&&n!==void 0?n:null,v=(r=h.oobCode)!==null&&r!==void 0?r:null,b=HM((s=h.mode)!==null&&s!==void 0?s:null);Le(f&&v&&b,"argument-error"),this.apiKey=f,this.operation=b,this.code=v,this.continueUrl=(o=h.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(u=h.lang)!==null&&u!==void 0?u:null,this.tenantId=(d=h.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const n=GM(e);try{return new eb(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(){this.providerId=Su.PROVIDER_ID}static credential(e,n){return xd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=eb.parseLink(n);return Le(r,"argument-error"),xd._fromEmailAndCode(e,r.code,r.tenantId)}}Su.PROVIDER_ID="password";Su.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Su.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd extends tb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra extends zd{constructor(){super("facebook.com")}static credential(e){return Ko._fromParams({providerId:Ra.PROVIDER_ID,signInMethod:Ra.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ra.credentialFromTaggedObject(e)}static credentialFromError(e){return Ra.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ra.credential(e.oauthAccessToken)}catch{return null}}}Ra.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ra.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds extends zd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ko._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ds.credentialFromTaggedObject(e)}static credentialFromError(e){return Ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ds.credential(n,r)}catch{return null}}}Ds.GOOGLE_SIGN_IN_METHOD="google.com";Ds.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia extends zd{constructor(){super("github.com")}static credential(e){return Ko._fromParams({providerId:Ia.PROVIDER_ID,signInMethod:Ia.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ia.credentialFromTaggedObject(e)}static credentialFromError(e){return Ia.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ia.credential(e.oauthAccessToken)}catch{return null}}}Ia.GITHUB_SIGN_IN_METHOD="github.com";Ia.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na extends zd{constructor(){super("twitter.com")}static credential(e,n){return Ko._fromParams({providerId:Na.PROVIDER_ID,signInMethod:Na.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Na.credentialFromTaggedObject(e)}static credentialFromError(e){return Na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Na.credential(n,r)}catch{return null}}}Na.TWITTER_SIGN_IN_METHOD="twitter.com";Na.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $M(t,e){return Bd(t,"POST","/v1/accounts:signUp",Za(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await Li._fromIdTokenResponse(e,r,s),u=kw(r);return new Yo({user:o,providerId:u,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=kw(r);return new Yo({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function kw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm extends Hi{constructor(e,n,r,s){var o;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,wm.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new wm(e,n,r,s)}}function MC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?wm._fromErrorAndOperation(t,o,e,r):o})}async function KM(t,e,n=!1){const r=await bd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Yo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YM(t,e,n=!1){const{auth:r}=t;if(kr(r.app))return Promise.reject(Ps(r));const s="reauthenticate";try{const o=await bd(t,MC(r,s,e,t),n);Le(o.idToken,r,"internal-error");const u=X0(o.idToken);Le(u,r,"internal-error");const{sub:d}=u;return Le(t.uid===d,r,"user-mismatch"),Yo._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Ii(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PC(t,e,n=!1){if(kr(t.app))return Promise.reject(Ps(t));const r="signIn",s=await MC(t,r,e),o=await Yo._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}async function QM(t,e){return PC(to(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VC(t){const e=to(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function WM(t,e,n){if(kr(t.app))return Promise.reject(Ps(t));const r=to(t),u=await Uy(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$M).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&VC(t),h}),d=await Yo._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(d.user),d}function XM(t,e,n){return kr(t.app)?Promise.reject(Ps(t)):QM(Lt(t),Su.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&VC(t),r})}function JM(t,e,n,r){return Lt(t).onIdTokenChanged(e,n,r)}function ZM(t,e,n){return Lt(t).beforeAuthStateChanged(e,n)}function e4(t,e,n,r){return Lt(t).onAuthStateChanged(e,n,r)}function ty(t){return Lt(t).signOut()}const Sm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Sm,"1"),this.storage.removeItem(Sm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4=1e3,n4=10;class UC extends LC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=NC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,d,h)=>{this.notifyListeners(u,h)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!n&&this.localCache[r]===u||this.notifyListeners(r,u)},o=this.storage.getItem(r);xM()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,n4):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},t4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}UC.type="LOCAL";const r4=UC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC extends LC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}BC.type="SESSION";const zC=BC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new fp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,u=this.handlersMap[s];if(!(u!=null&&u.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const d=Array.from(u).map(async f=>f(n.origin,o)),h=await i4(d);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}fp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,u;return new Promise((d,h)=>{const f=nb("",20);s.port1.start();const v=setTimeout(()=>{h(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(b){const x=b;if(x.data.eventId===f)switch(x.data.status){case"ack":clearTimeout(v),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),d(x.data.response);break;default:clearTimeout(v),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(){return window}function a4(t){is().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(){return typeof is().WorkerGlobalScope<"u"&&typeof is().importScripts=="function"}async function o4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function l4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function u4(){return FC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC="firebaseLocalStorageDb",c4=1,Am="firebaseLocalStorage",HC="fbase_key";class Fd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function mp(t,e){return t.transaction([Am],e?"readwrite":"readonly").objectStore(Am)}function d4(){const t=indexedDB.deleteDatabase(qC);return new Fd(t).toPromise()}function By(){const t=indexedDB.open(qC,c4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Am,{keyPath:HC})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Am)?e(r):(r.close(),await d4(),e(await By()))})})}async function Ow(t,e,n){const r=mp(t,!0).put({[HC]:e,value:n});return new Fd(r).toPromise()}async function h4(t,e){const n=mp(t,!1).get(e),r=await new Fd(n).toPromise();return r===void 0?null:r.value}function Dw(t,e){const n=mp(t,!0).delete(e);return new Fd(n).toPromise()}const f4=800,m4=3;class GC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await By(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>m4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fp._getInstance(u4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await o4(),!this.activeServiceWorker)return;this.sender=new s4(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||l4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await By();return await Ow(e,Sm,"1"),await Dw(e,Sm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ow(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>h4(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Dw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=mp(s,!1).getAll();return new Fd(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),f4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GC.type="LOCAL";const p4=GC;new Ud(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(t,e){return e?Ms(e):(Le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb extends Z0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return su(e,this._buildIdpRequest())}_linkToIdToken(e,n){return su(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return su(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function g4(t){return PC(t.auth,new rb(t),t.bypassAuthState)}function v4(t){const{auth:e,user:n}=t;return Le(n,e,"internal-error"),YM(n,new rb(t),t.bypassAuthState)}async function y4(t){const{auth:e,user:n}=t;return Le(n,e,"internal-error"),KM(n,new rb(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:u,type:d}=e;if(u){this.reject(u);return}const h={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return g4;case"linkViaPopup":case"linkViaRedirect":return y4;case"reauthViaPopup":case"reauthViaRedirect":return v4;default:Ii(this.auth,"internal-error")}}resolve(e){zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=new Ud(2e3,1e4);async function x4(t,e,n){if(kr(t.app))return Promise.reject(zi(t,"operation-not-supported-in-this-environment"));const r=to(t);eM(t,e,tb);const s=$C(r,n);return new Vo(r,"signInViaPopup",e,s).executeNotNull()}class Vo extends KC{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,Vo.currentPopupAction&&Vo.currentPopupAction.cancel(),Vo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Le(e,this.auth,"internal-error"),e}async onExecution(){zs(this.filter.length===1,"Popup operations only handle one event");const e=nb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(zi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(zi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,b4.get())};e()}}Vo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4="pendingRedirect",tm=new Map;class _4 extends KC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=tm.get(this.auth._key());if(!e){try{const r=await T4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}tm.set(this.auth._key(),e)}return this.bypassAuthState||tm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function T4(t,e){const n=A4(e),r=S4(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function w4(t,e){tm.set(t._key(),e)}function S4(t){return Ms(t._redirectPersistence)}function A4(t){return em(E4,t.config.apiKey,t.name)}async function C4(t,e,n=!1){if(kr(t.app))return Promise.reject(Ps(t));const r=to(t),s=$C(r,e),u=await new _4(r,s,n).execute();return u&&!n&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4=600*1e3;class I4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!N4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!YC(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(zi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=R4&&this.cachedEventUids.clear(),this.cachedEventUids.has(jw(e))}saveEventToCache(e){this.cachedEventUids.add(jw(e)),this.lastProcessedEventTime=Date.now()}}function jw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function YC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function N4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return YC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k4(t,e={}){return eo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,D4=/^https?/;async function j4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await k4(t);for(const n of e)try{if(M4(n))return}catch{}Ii(t,"unauthorized-domain")}function M4(t){const e=Vy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===r}if(!D4.test(n))return!1;if(O4.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4=new Ud(3e4,6e4);function Mw(){const t=is().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function V4(t){return new Promise((e,n)=>{var r,s,o;function u(){Mw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Mw(),n(zi(t,"network-request-failed"))},timeout:P4.get()})}if(!((s=(r=is().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=is().gapi)===null||o===void 0)&&o.load)u();else{const d=IM("iframefcb");return is()[d]=()=>{gapi.load?u():n(zi(t,"network-request-failed"))},OC(`${RM()}?onload=${d}`).catch(h=>n(h))}}).catch(e=>{throw nm=null,e})}let nm=null;function L4(t){return nm=nm||V4(t),nm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4=new Ud(5e3,15e3),B4="__/auth/iframe",z4="emulator/auth/iframe",F4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},q4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function H4(t){const e=t.config;Le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?W0(e,z4):`https://${t.config.authDomain}/${B4}`,r={apiKey:e.apiKey,appName:t.name,v:el},s=q4.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Vd(r).slice(1)}`}async function G4(t){const e=await L4(t),n=is().gapi;return Le(n,t,"internal-error"),e.open({where:document.body,url:H4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:F4,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const u=zi(t,"network-request-failed"),d=is().setTimeout(()=>{o(u)},U4.get());function h(){is().clearTimeout(d),s(r)}r.ping(h).then(h,()=>{o(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},K4=500,Y4=600,Q4="_blank",W4="http://localhost";class Pw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function X4(t,e,n,r=K4,s=Y4){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const h=Object.assign(Object.assign({},$4),{width:r.toString(),height:s.toString(),top:o,left:u}),f=_r().toLowerCase();n&&(d=SC(f)?Q4:n),TC(f)&&(e=e||W4,h.scrollbars="yes");const v=Object.entries(h).reduce((x,[_,A])=>`${x}${_}=${A},`,"");if(bM(f)&&d!=="_self")return J4(e||"",d),new Pw(null);const b=window.open(e||"",d,v);Le(b,t,"popup-blocked");try{b.focus()}catch{}return new Pw(b)}function J4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4="__/auth/handler",eP="emulator/auth/handler",tP=encodeURIComponent("fac");async function Vw(t,e,n,r,s,o){Le(t.config.authDomain,t,"auth-domain-config-required"),Le(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:el,eventId:s};if(e instanceof tb){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",BD(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,b]of Object.entries({}))u[v]=b}if(e instanceof zd){const v=e.getScopes().filter(b=>b!=="");v.length>0&&(u.scopes=v.join(","))}t.tenantId&&(u.tid=t.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const h=await t._getAppCheckToken(),f=h?`#${tP}=${encodeURIComponent(h)}`:"";return`${nP(t)}?${Vd(d).slice(1)}${f}`}function nP({config:t}){return t.emulator?W0(t,eP):`https://${t.authDomain}/${Z4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny="webStorageSupport";class rP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zC,this._completeRedirectFn=C4,this._overrideRedirectResult=w4}async _openPopup(e,n,r,s){var o;zs((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const u=await Vw(e,n,r,Vy(),s);return X4(e,u,nb())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await Vw(e,n,r,Vy(),s);return a4(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(zs(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await G4(e),r=new I4(e);return n.register("authEvent",s=>(Le(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ny,{type:ny},s=>{var o;const u=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[ny];u!==void 0&&n(!!u),Ii(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=j4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return NC()||wC()||J0()}}const iP=rP;var Lw="@firebase/auth",Uw="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oP(t){qa(new Us("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=r.options;Le(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:u,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kC(t)},f=new SM(r,s,o,h);return MM(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),qa(new Us("auth-internal",e=>{const n=to(e.getProvider("auth").getImmediate());return(r=>new sP(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ri(Lw,Uw,aP(t)),Ri(Lw,Uw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP=300,uP=uC("authIdTokenMaxAge")||lP;let Bw=null;const cP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>uP)return;const s=n==null?void 0:n.token;Bw!==s&&(Bw=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function dP(t=dp()){const e=Ld(t,"auth");if(e.isInitialized())return e.getImmediate();const n=jM(t,{popupRedirectResolver:iP,persistence:[p4,r4,zC]}),r=uC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const u=cP(o.toString());ZM(n,u,()=>u(n.currentUser)),JM(n,d=>u(d))}}const s=oC("auth");return s&&PM(n,`http://${s}`),n}function hP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}AM({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=zi("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",hP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oP("Browser");var fP="firebase",mP="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ri(fP,mP,"app");var zw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ba,QC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,S){function N(){}N.prototype=S.prototype,C.D=S.prototype,C.prototype=new N,C.prototype.constructor=C,C.C=function(P,V,L){for(var D=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)D[pe-2]=arguments[pe];return S.prototype[V].apply(P,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,S,N){N||(N=0);var P=Array(16);if(typeof S=="string")for(var V=0;16>V;++V)P[V]=S.charCodeAt(N++)|S.charCodeAt(N++)<<8|S.charCodeAt(N++)<<16|S.charCodeAt(N++)<<24;else for(V=0;16>V;++V)P[V]=S[N++]|S[N++]<<8|S[N++]<<16|S[N++]<<24;S=C.g[0],N=C.g[1],V=C.g[2];var L=C.g[3],D=S+(L^N&(V^L))+P[0]+3614090360&4294967295;S=N+(D<<7&4294967295|D>>>25),D=L+(V^S&(N^V))+P[1]+3905402710&4294967295,L=S+(D<<12&4294967295|D>>>20),D=V+(N^L&(S^N))+P[2]+606105819&4294967295,V=L+(D<<17&4294967295|D>>>15),D=N+(S^V&(L^S))+P[3]+3250441966&4294967295,N=V+(D<<22&4294967295|D>>>10),D=S+(L^N&(V^L))+P[4]+4118548399&4294967295,S=N+(D<<7&4294967295|D>>>25),D=L+(V^S&(N^V))+P[5]+1200080426&4294967295,L=S+(D<<12&4294967295|D>>>20),D=V+(N^L&(S^N))+P[6]+2821735955&4294967295,V=L+(D<<17&4294967295|D>>>15),D=N+(S^V&(L^S))+P[7]+4249261313&4294967295,N=V+(D<<22&4294967295|D>>>10),D=S+(L^N&(V^L))+P[8]+1770035416&4294967295,S=N+(D<<7&4294967295|D>>>25),D=L+(V^S&(N^V))+P[9]+2336552879&4294967295,L=S+(D<<12&4294967295|D>>>20),D=V+(N^L&(S^N))+P[10]+4294925233&4294967295,V=L+(D<<17&4294967295|D>>>15),D=N+(S^V&(L^S))+P[11]+2304563134&4294967295,N=V+(D<<22&4294967295|D>>>10),D=S+(L^N&(V^L))+P[12]+1804603682&4294967295,S=N+(D<<7&4294967295|D>>>25),D=L+(V^S&(N^V))+P[13]+4254626195&4294967295,L=S+(D<<12&4294967295|D>>>20),D=V+(N^L&(S^N))+P[14]+2792965006&4294967295,V=L+(D<<17&4294967295|D>>>15),D=N+(S^V&(L^S))+P[15]+1236535329&4294967295,N=V+(D<<22&4294967295|D>>>10),D=S+(V^L&(N^V))+P[1]+4129170786&4294967295,S=N+(D<<5&4294967295|D>>>27),D=L+(N^V&(S^N))+P[6]+3225465664&4294967295,L=S+(D<<9&4294967295|D>>>23),D=V+(S^N&(L^S))+P[11]+643717713&4294967295,V=L+(D<<14&4294967295|D>>>18),D=N+(L^S&(V^L))+P[0]+3921069994&4294967295,N=V+(D<<20&4294967295|D>>>12),D=S+(V^L&(N^V))+P[5]+3593408605&4294967295,S=N+(D<<5&4294967295|D>>>27),D=L+(N^V&(S^N))+P[10]+38016083&4294967295,L=S+(D<<9&4294967295|D>>>23),D=V+(S^N&(L^S))+P[15]+3634488961&4294967295,V=L+(D<<14&4294967295|D>>>18),D=N+(L^S&(V^L))+P[4]+3889429448&4294967295,N=V+(D<<20&4294967295|D>>>12),D=S+(V^L&(N^V))+P[9]+568446438&4294967295,S=N+(D<<5&4294967295|D>>>27),D=L+(N^V&(S^N))+P[14]+3275163606&4294967295,L=S+(D<<9&4294967295|D>>>23),D=V+(S^N&(L^S))+P[3]+4107603335&4294967295,V=L+(D<<14&4294967295|D>>>18),D=N+(L^S&(V^L))+P[8]+1163531501&4294967295,N=V+(D<<20&4294967295|D>>>12),D=S+(V^L&(N^V))+P[13]+2850285829&4294967295,S=N+(D<<5&4294967295|D>>>27),D=L+(N^V&(S^N))+P[2]+4243563512&4294967295,L=S+(D<<9&4294967295|D>>>23),D=V+(S^N&(L^S))+P[7]+1735328473&4294967295,V=L+(D<<14&4294967295|D>>>18),D=N+(L^S&(V^L))+P[12]+2368359562&4294967295,N=V+(D<<20&4294967295|D>>>12),D=S+(N^V^L)+P[5]+4294588738&4294967295,S=N+(D<<4&4294967295|D>>>28),D=L+(S^N^V)+P[8]+2272392833&4294967295,L=S+(D<<11&4294967295|D>>>21),D=V+(L^S^N)+P[11]+1839030562&4294967295,V=L+(D<<16&4294967295|D>>>16),D=N+(V^L^S)+P[14]+4259657740&4294967295,N=V+(D<<23&4294967295|D>>>9),D=S+(N^V^L)+P[1]+2763975236&4294967295,S=N+(D<<4&4294967295|D>>>28),D=L+(S^N^V)+P[4]+1272893353&4294967295,L=S+(D<<11&4294967295|D>>>21),D=V+(L^S^N)+P[7]+4139469664&4294967295,V=L+(D<<16&4294967295|D>>>16),D=N+(V^L^S)+P[10]+3200236656&4294967295,N=V+(D<<23&4294967295|D>>>9),D=S+(N^V^L)+P[13]+681279174&4294967295,S=N+(D<<4&4294967295|D>>>28),D=L+(S^N^V)+P[0]+3936430074&4294967295,L=S+(D<<11&4294967295|D>>>21),D=V+(L^S^N)+P[3]+3572445317&4294967295,V=L+(D<<16&4294967295|D>>>16),D=N+(V^L^S)+P[6]+76029189&4294967295,N=V+(D<<23&4294967295|D>>>9),D=S+(N^V^L)+P[9]+3654602809&4294967295,S=N+(D<<4&4294967295|D>>>28),D=L+(S^N^V)+P[12]+3873151461&4294967295,L=S+(D<<11&4294967295|D>>>21),D=V+(L^S^N)+P[15]+530742520&4294967295,V=L+(D<<16&4294967295|D>>>16),D=N+(V^L^S)+P[2]+3299628645&4294967295,N=V+(D<<23&4294967295|D>>>9),D=S+(V^(N|~L))+P[0]+4096336452&4294967295,S=N+(D<<6&4294967295|D>>>26),D=L+(N^(S|~V))+P[7]+1126891415&4294967295,L=S+(D<<10&4294967295|D>>>22),D=V+(S^(L|~N))+P[14]+2878612391&4294967295,V=L+(D<<15&4294967295|D>>>17),D=N+(L^(V|~S))+P[5]+4237533241&4294967295,N=V+(D<<21&4294967295|D>>>11),D=S+(V^(N|~L))+P[12]+1700485571&4294967295,S=N+(D<<6&4294967295|D>>>26),D=L+(N^(S|~V))+P[3]+2399980690&4294967295,L=S+(D<<10&4294967295|D>>>22),D=V+(S^(L|~N))+P[10]+4293915773&4294967295,V=L+(D<<15&4294967295|D>>>17),D=N+(L^(V|~S))+P[1]+2240044497&4294967295,N=V+(D<<21&4294967295|D>>>11),D=S+(V^(N|~L))+P[8]+1873313359&4294967295,S=N+(D<<6&4294967295|D>>>26),D=L+(N^(S|~V))+P[15]+4264355552&4294967295,L=S+(D<<10&4294967295|D>>>22),D=V+(S^(L|~N))+P[6]+2734768916&4294967295,V=L+(D<<15&4294967295|D>>>17),D=N+(L^(V|~S))+P[13]+1309151649&4294967295,N=V+(D<<21&4294967295|D>>>11),D=S+(V^(N|~L))+P[4]+4149444226&4294967295,S=N+(D<<6&4294967295|D>>>26),D=L+(N^(S|~V))+P[11]+3174756917&4294967295,L=S+(D<<10&4294967295|D>>>22),D=V+(S^(L|~N))+P[2]+718787259&4294967295,V=L+(D<<15&4294967295|D>>>17),D=N+(L^(V|~S))+P[9]+3951481745&4294967295,C.g[0]=C.g[0]+S&4294967295,C.g[1]=C.g[1]+(V+(D<<21&4294967295|D>>>11))&4294967295,C.g[2]=C.g[2]+V&4294967295,C.g[3]=C.g[3]+L&4294967295}r.prototype.u=function(C,S){S===void 0&&(S=C.length);for(var N=S-this.blockSize,P=this.B,V=this.h,L=0;L<S;){if(V==0)for(;L<=N;)s(this,C,L),L+=this.blockSize;if(typeof C=="string"){for(;L<S;)if(P[V++]=C.charCodeAt(L++),V==this.blockSize){s(this,P),V=0;break}}else for(;L<S;)if(P[V++]=C[L++],V==this.blockSize){s(this,P),V=0;break}}this.h=V,this.o+=S},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var S=1;S<C.length-8;++S)C[S]=0;var N=8*this.o;for(S=C.length-8;S<C.length;++S)C[S]=N&255,N/=256;for(this.u(C),C=Array(16),S=N=0;4>S;++S)for(var P=0;32>P;P+=8)C[N++]=this.g[S]>>>P&255;return C};function o(C,S){var N=d;return Object.prototype.hasOwnProperty.call(N,C)?N[C]:N[C]=S(C)}function u(C,S){this.h=S;for(var N=[],P=!0,V=C.length-1;0<=V;V--){var L=C[V]|0;P&&L==S||(N[V]=L,P=!1)}this.g=N}var d={};function h(C){return-128<=C&&128>C?o(C,function(S){return new u([S|0],0>S?-1:0)}):new u([C|0],0>C?-1:0)}function f(C){if(isNaN(C)||!isFinite(C))return b;if(0>C)return M(f(-C));for(var S=[],N=1,P=0;C>=N;P++)S[P]=C/N|0,N*=4294967296;return new u(S,0)}function v(C,S){if(C.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(C.charAt(0)=="-")return M(v(C.substring(1),S));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=f(Math.pow(S,8)),P=b,V=0;V<C.length;V+=8){var L=Math.min(8,C.length-V),D=parseInt(C.substring(V,V+L),S);8>L?(L=f(Math.pow(S,L)),P=P.j(L).add(f(D))):(P=P.j(N),P=P.add(f(D)))}return P}var b=h(0),x=h(1),_=h(16777216);t=u.prototype,t.m=function(){if(R(this))return-M(this).m();for(var C=0,S=1,N=0;N<this.g.length;N++){var P=this.i(N);C+=(0<=P?P:4294967296+P)*S,S*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(A(this))return"0";if(R(this))return"-"+M(this).toString(C);for(var S=f(Math.pow(C,6)),N=this,P="";;){var V=H(N,S).g;N=U(N,V.j(S));var L=((0<N.g.length?N.g[0]:N.h)>>>0).toString(C);if(N=V,A(N))return L+P;for(;6>L.length;)L="0"+L;P=L+P}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function A(C){if(C.h!=0)return!1;for(var S=0;S<C.g.length;S++)if(C.g[S]!=0)return!1;return!0}function R(C){return C.h==-1}t.l=function(C){return C=U(this,C),R(C)?-1:A(C)?0:1};function M(C){for(var S=C.g.length,N=[],P=0;P<S;P++)N[P]=~C.g[P];return new u(N,~C.h).add(x)}t.abs=function(){return R(this)?M(this):this},t.add=function(C){for(var S=Math.max(this.g.length,C.g.length),N=[],P=0,V=0;V<=S;V++){var L=P+(this.i(V)&65535)+(C.i(V)&65535),D=(L>>>16)+(this.i(V)>>>16)+(C.i(V)>>>16);P=D>>>16,L&=65535,D&=65535,N[V]=D<<16|L}return new u(N,N[N.length-1]&-2147483648?-1:0)};function U(C,S){return C.add(M(S))}t.j=function(C){if(A(this)||A(C))return b;if(R(this))return R(C)?M(this).j(M(C)):M(M(this).j(C));if(R(C))return M(this.j(M(C)));if(0>this.l(_)&&0>C.l(_))return f(this.m()*C.m());for(var S=this.g.length+C.g.length,N=[],P=0;P<2*S;P++)N[P]=0;for(P=0;P<this.g.length;P++)for(var V=0;V<C.g.length;V++){var L=this.i(P)>>>16,D=this.i(P)&65535,pe=C.i(V)>>>16,Ie=C.i(V)&65535;N[2*P+2*V]+=D*Ie,O(N,2*P+2*V),N[2*P+2*V+1]+=L*Ie,O(N,2*P+2*V+1),N[2*P+2*V+1]+=D*pe,O(N,2*P+2*V+1),N[2*P+2*V+2]+=L*pe,O(N,2*P+2*V+2)}for(P=0;P<S;P++)N[P]=N[2*P+1]<<16|N[2*P];for(P=S;P<2*S;P++)N[P]=0;return new u(N,0)};function O(C,S){for(;(C[S]&65535)!=C[S];)C[S+1]+=C[S]>>>16,C[S]&=65535,S++}function B(C,S){this.g=C,this.h=S}function H(C,S){if(A(S))throw Error("division by zero");if(A(C))return new B(b,b);if(R(C))return S=H(M(C),S),new B(M(S.g),M(S.h));if(R(S))return S=H(C,M(S)),new B(M(S.g),S.h);if(30<C.g.length){if(R(C)||R(S))throw Error("slowDivide_ only works with positive integers.");for(var N=x,P=S;0>=P.l(C);)N=G(N),P=G(P);var V=q(N,1),L=q(P,1);for(P=q(P,2),N=q(N,2);!A(P);){var D=L.add(P);0>=D.l(C)&&(V=V.add(N),L=D),P=q(P,1),N=q(N,1)}return S=U(C,V.j(S)),new B(V,S)}for(V=b;0<=C.l(S);){for(N=Math.max(1,Math.floor(C.m()/S.m())),P=Math.ceil(Math.log(N)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),L=f(N),D=L.j(S);R(D)||0<D.l(C);)N-=P,L=f(N),D=L.j(S);A(L)&&(L=x),V=V.add(L),C=U(C,D)}return new B(V,C)}t.A=function(C){return H(this,C).h},t.and=function(C){for(var S=Math.max(this.g.length,C.g.length),N=[],P=0;P<S;P++)N[P]=this.i(P)&C.i(P);return new u(N,this.h&C.h)},t.or=function(C){for(var S=Math.max(this.g.length,C.g.length),N=[],P=0;P<S;P++)N[P]=this.i(P)|C.i(P);return new u(N,this.h|C.h)},t.xor=function(C){for(var S=Math.max(this.g.length,C.g.length),N=[],P=0;P<S;P++)N[P]=this.i(P)^C.i(P);return new u(N,this.h^C.h)};function G(C){for(var S=C.g.length+1,N=[],P=0;P<S;P++)N[P]=C.i(P)<<1|C.i(P-1)>>>31;return new u(N,C.h)}function q(C,S){var N=S>>5;S%=32;for(var P=C.g.length-N,V=[],L=0;L<P;L++)V[L]=0<S?C.i(L+N)>>>S|C.i(L+N+1)<<32-S:C.i(L+N);return new u(V,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,QC=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=f,u.fromString=v,Ba=u}).apply(typeof zw<"u"?zw:typeof self<"u"?self:typeof window<"u"?window:{});var wf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var WC,Uc,XC,rm,zy,JC,ZC,e2;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,E,w){return m==Array.prototype||m==Object.prototype||(m[E]=w.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof wf=="object"&&wf];for(var E=0;E<m.length;++E){var w=m[E];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=n(this);function s(m,E){if(E)e:{var w=r;m=m.split(".");for(var j=0;j<m.length-1;j++){var Y=m[j];if(!(Y in w))break e;w=w[Y]}m=m[m.length-1],j=w[m],E=E(j),E!=j&&E!=null&&e(w,m,{configurable:!0,writable:!0,value:E})}}function o(m,E){m instanceof String&&(m+="");var w=0,j=!1,Y={next:function(){if(!j&&w<m.length){var te=w++;return{value:E(te,m[te]),done:!1}}return j=!0,{done:!0,value:void 0}}};return Y[Symbol.iterator]=function(){return Y},Y}s("Array.prototype.values",function(m){return m||function(){return o(this,function(E,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function h(m){var E=typeof m;return E=E!="object"?E:m?Array.isArray(m)?"array":E:"null",E=="array"||E=="object"&&typeof m.length=="number"}function f(m){var E=typeof m;return E=="object"&&m!=null||E=="function"}function v(m,E,w){return m.call.apply(m.bind,arguments)}function b(m,E,w){if(!m)throw Error();if(2<arguments.length){var j=Array.prototype.slice.call(arguments,2);return function(){var Y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Y,j),m.apply(E,Y)}}return function(){return m.apply(E,arguments)}}function x(m,E,w){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:b,x.apply(null,arguments)}function _(m,E){var w=Array.prototype.slice.call(arguments,1);return function(){var j=w.slice();return j.push.apply(j,arguments),m.apply(this,j)}}function A(m,E){function w(){}w.prototype=E.prototype,m.aa=E.prototype,m.prototype=new w,m.prototype.constructor=m,m.Qb=function(j,Y,te){for(var me=Array(arguments.length-2),Ct=2;Ct<arguments.length;Ct++)me[Ct-2]=arguments[Ct];return E.prototype[Y].apply(j,me)}}function R(m){const E=m.length;if(0<E){const w=Array(E);for(let j=0;j<E;j++)w[j]=m[j];return w}return[]}function M(m,E){for(let w=1;w<arguments.length;w++){const j=arguments[w];if(h(j)){const Y=m.length||0,te=j.length||0;m.length=Y+te;for(let me=0;me<te;me++)m[Y+me]=j[me]}else m.push(j)}}class U{constructor(E,w){this.i=E,this.j=w,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function O(m){return/^[\s\xa0]*$/.test(m)}function B(){var m=d.navigator;return m&&(m=m.userAgent)?m:""}function H(m){return H[" "](m),m}H[" "]=function(){};var G=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function q(m,E,w){for(const j in m)E.call(w,m[j],j,m)}function C(m,E){for(const w in m)E.call(void 0,m[w],w,m)}function S(m){const E={};for(const w in m)E[w]=m[w];return E}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(m,E){let w,j;for(let Y=1;Y<arguments.length;Y++){j=arguments[Y];for(w in j)m[w]=j[w];for(let te=0;te<N.length;te++)w=N[te],Object.prototype.hasOwnProperty.call(j,w)&&(m[w]=j[w])}}function V(m){var E=1;m=m.split(":");const w=[];for(;0<E&&m.length;)w.push(m.shift()),E--;return m.length&&w.push(m.join(":")),w}function L(m){d.setTimeout(()=>{throw m},0)}function D(){var m=Ae;let E=null;return m.g&&(E=m.g,m.g=m.g.next,m.g||(m.h=null),E.next=null),E}class pe{constructor(){this.h=this.g=null}add(E,w){const j=Ie.get();j.set(E,w),this.h?this.h.next=j:this.g=j,this.h=j}}var Ie=new U(()=>new X,m=>m.reset());class X{constructor(){this.next=this.g=this.h=null}set(E,w){this.h=E,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,ce=!1,Ae=new pe,_e=()=>{const m=d.Promise.resolve(void 0);ie=()=>{m.then(z)}};var z=()=>{for(var m;m=D();){try{m.h.call(m.g)}catch(w){L(w)}var E=Ie;E.j(m),100>E.h&&(E.h++,m.next=E.g,E.g=m)}ce=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(m,E){this.type=m,this.g=this.target=E,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var fe=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var m=!1,E=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const w=()=>{};d.addEventListener("test",w,E),d.removeEventListener("test",w,E)}catch{}return m})();function we(m,E){if(de.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var w=this.type=m.type,j=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=E,E=m.relatedTarget){if(G){e:{try{H(E.nodeName);var Y=!0;break e}catch{}Y=!1}Y||(E=null)}}else w=="mouseover"?E=m.fromElement:w=="mouseout"&&(E=m.toElement);this.relatedTarget=E,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:je[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&we.aa.h.call(this)}}A(we,de);var je={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var qe="closure_listenable_"+(1e6*Math.random()|0),Zt=0;function At(m,E,w,j,Y){this.listener=m,this.proxy=null,this.src=E,this.type=w,this.capture=!!j,this.ha=Y,this.key=++Zt,this.da=this.fa=!1}function Mn(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Bn(m){this.src=m,this.g={},this.h=0}Bn.prototype.add=function(m,E,w,j,Y){var te=m.toString();m=this.g[te],m||(m=this.g[te]=[],this.h++);var me=zn(m,E,j,Y);return-1<me?(E=m[me],w||(E.fa=!1)):(E=new At(E,this.src,te,!!j,Y),E.fa=w,m.push(E)),E};function en(m,E){var w=E.type;if(w in m.g){var j=m.g[w],Y=Array.prototype.indexOf.call(j,E,void 0),te;(te=0<=Y)&&Array.prototype.splice.call(j,Y,1),te&&(Mn(E),m.g[w].length==0&&(delete m.g[w],m.h--))}}function zn(m,E,w,j){for(var Y=0;Y<m.length;++Y){var te=m[Y];if(!te.da&&te.listener==E&&te.capture==!!w&&te.ha==j)return Y}return-1}var Ut="closure_lm_"+(1e6*Math.random()|0),he={};function ve(m,E,w,j,Y){if(Array.isArray(E)){for(var te=0;te<E.length;te++)ve(m,E[te],w,j,Y);return null}return w=on(w),m&&m[qe]?m.K(E,w,f(j)?!!j.capture:!1,Y):nt(m,E,w,!1,j,Y)}function nt(m,E,w,j,Y,te){if(!E)throw Error("Invalid event type");var me=f(Y)?!!Y.capture:!!Y,Ct=Qr(m);if(Ct||(m[Ut]=Ct=new Bn(m)),w=Ct.add(E,w,j,me,te),w.proxy)return w;if(j=an(),w.proxy=j,j.src=m,j.listener=w,m.addEventListener)fe||(Y=me),Y===void 0&&(Y=!1),m.addEventListener(E.toString(),j,Y);else if(m.attachEvent)m.attachEvent(Tr(E.toString()),j);else if(m.addListener&&m.removeListener)m.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return w}function an(){function m(w){return E.call(m.src,m.listener,w)}const E=Dr;return m}function ze(m,E,w,j,Y){if(Array.isArray(E))for(var te=0;te<E.length;te++)ze(m,E[te],w,j,Y);else j=f(j)?!!j.capture:!!j,w=on(w),m&&m[qe]?(m=m.i,E=String(E).toString(),E in m.g&&(te=m.g[E],w=zn(te,w,j,Y),-1<w&&(Mn(te[w]),Array.prototype.splice.call(te,w,1),te.length==0&&(delete m.g[E],m.h--)))):m&&(m=Qr(m))&&(E=m.g[E.toString()],m=-1,E&&(m=zn(E,w,j,Y)),(w=-1<m?E[m]:null)&&Ht(w))}function Ht(m){if(typeof m!="number"&&m&&!m.da){var E=m.src;if(E&&E[qe])en(E.i,m);else{var w=m.type,j=m.proxy;E.removeEventListener?E.removeEventListener(w,j,m.capture):E.detachEvent?E.detachEvent(Tr(w),j):E.addListener&&E.removeListener&&E.removeListener(j),(w=Qr(E))?(en(w,m),w.h==0&&(w.src=null,E[Ut]=null)):Mn(m)}}}function Tr(m){return m in he?he[m]:he[m]="on"+m}function Dr(m,E){if(m.da)m=!0;else{E=new we(E,this);var w=m.listener,j=m.ha||m.src;m.fa&&Ht(m),m=w.call(j,E)}return m}function Qr(m){return m=m[Ut],m instanceof Bn?m:null}var vt="__closure_events_fn_"+(1e9*Math.random()>>>0);function on(m){return typeof m=="function"?m:(m[vt]||(m[vt]=function(E){return m.handleEvent(E)}),m[vt])}function $e(){J.call(this),this.i=new Bn(this),this.M=this,this.F=null}A($e,J),$e.prototype[qe]=!0,$e.prototype.removeEventListener=function(m,E,w,j){ze(this,m,E,w,j)};function Bt(m,E){var w,j=m.F;if(j)for(w=[];j;j=j.F)w.push(j);if(m=m.M,j=E.type||E,typeof E=="string")E=new de(E,m);else if(E instanceof de)E.target=E.target||m;else{var Y=E;E=new de(j,m),P(E,Y)}if(Y=!0,w)for(var te=w.length-1;0<=te;te--){var me=E.g=w[te];Y=Gt(me,j,!0,E)&&Y}if(me=E.g=m,Y=Gt(me,j,!0,E)&&Y,Y=Gt(me,j,!1,E)&&Y,w)for(te=0;te<w.length;te++)me=E.g=w[te],Y=Gt(me,j,!1,E)&&Y}$e.prototype.N=function(){if($e.aa.N.call(this),this.i){var m=this.i,E;for(E in m.g){for(var w=m.g[E],j=0;j<w.length;j++)Mn(w[j]);delete m.g[E],m.h--}}this.F=null},$e.prototype.K=function(m,E,w,j){return this.i.add(String(m),E,!1,w,j)},$e.prototype.L=function(m,E,w,j){return this.i.add(String(m),E,!0,w,j)};function Gt(m,E,w,j){if(E=m.i.g[String(E)],!E)return!0;E=E.concat();for(var Y=!0,te=0;te<E.length;++te){var me=E[te];if(me&&!me.da&&me.capture==w){var Ct=me.listener,Cn=me.ha||me.src;me.fa&&en(m.i,me),Y=Ct.call(Cn,j)!==!1&&Y}}return Y&&!j.defaultPrevented}function dn(m,E,w){if(typeof m=="function")w&&(m=x(m,w));else if(m&&typeof m.handleEvent=="function")m=x(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:d.setTimeout(m,E||0)}function Gi(m){m.g=dn(()=>{m.g=null,m.i&&(m.i=!1,Gi(m))},m.l);const E=m.h;m.h=null,m.m.apply(null,E)}class $s extends J{constructor(E,w){super(),this.m=E,this.l=w,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Gi(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fn(m){J.call(this),this.h=m,this.g={}}A(Fn,J);var Jn=[];function hn(m){q(m.g,function(E,w){this.g.hasOwnProperty(w)&&Ht(E)},m),m.g={}}Fn.prototype.N=function(){Fn.aa.N.call(this),hn(this)},Fn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ae=d.JSON.stringify,xe=d.JSON.parse,Te=class{stringify(m){return d.JSON.stringify(m,void 0)}parse(m){return d.JSON.parse(m,void 0)}};function Ke(){}Ke.prototype.h=null;function yt(m){return m.h||(m.h=m.i())}function We(){}var Ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rt(){de.call(this,"d")}A(rt,de);function it(){de.call(this,"c")}A(it,de);var De={},Xe=null;function fn(){return Xe=Xe||new $e}De.La="serverreachability";function $t(m){de.call(this,De.La,m)}A($t,de);function tn(m){const E=fn();Bt(E,new $t(E))}De.STAT_EVENT="statevent";function Nt(m,E){de.call(this,De.STAT_EVENT,m),this.stat=E}A(Nt,de);function Tt(m){const E=fn();Bt(E,new Nt(E,m))}De.Ma="timingevent";function qn(m,E){de.call(this,De.Ma,m),this.size=E}A(qn,de);function zt(m,E){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){m()},E)}function Pn(){this.g=!0}Pn.prototype.xa=function(){this.g=!1};function jr(m,E,w,j,Y,te){m.info(function(){if(m.g)if(te)for(var me="",Ct=te.split("&"),Cn=0;Cn<Ct.length;Cn++){var et=Ct[Cn].split("=");if(1<et.length){var Kn=et[0];et=et[1];var Yn=Kn.split("_");me=2<=Yn.length&&Yn[1]=="type"?me+(Kn+"="+et+"&"):me+(Kn+"=redacted&")}}else me=null;else me=te;return"XMLHTTP REQ ("+j+") [attempt "+Y+"]: "+E+`
`+w+`
`+me})}function nn(m,E,w,j,Y,te,me){m.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+Y+"]: "+E+`
`+w+`
`+te+" "+me})}function rn(m,E,w,j){m.info(function(){return"XMLHTTP TEXT ("+E+"): "+Sn(m,w)+(j?" "+j:"")})}function Ne(m,E){m.info(function(){return"TIMEOUT: "+E})}Pn.prototype.info=function(){};function Sn(m,E){if(!m.g)return E;if(!E)return null;try{var w=JSON.parse(E);if(w){for(m=0;m<w.length;m++)if(Array.isArray(w[m])){var j=w[m];if(!(2>j.length)){var Y=j[1];if(Array.isArray(Y)&&!(1>Y.length)){var te=Y[0];if(te!="noop"&&te!="stop"&&te!="close")for(var me=1;me<Y.length;me++)Y[me]=""}}}}return ae(w)}catch{return E}}var bt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Me={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wr;function An(){}A(An,Ke),An.prototype.g=function(){return new XMLHttpRequest},An.prototype.i=function(){return{}},wr=new An;function hr(m,E,w,j){this.j=m,this.i=E,this.l=w,this.R=j||1,this.U=new Fn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Mr}function Mr(){this.i=null,this.g="",this.h=!1}var Hn={},Pr={};function Sr(m,E,w){m.L=1,m.v=oo(Be(E)),m.m=w,m.P=!0,Zn(m,null)}function Zn(m,E){m.F=Date.now(),tr(m),m.A=Be(m.v);var w=m.A,j=m.R;Array.isArray(j)||(j=[String(j)]),fs(w.i,"t",j),m.C=0,w=m.j.J,m.h=new Mr,m.g=ph(m.j,w?E:null,!m.m),0<m.O&&(m.M=new $s(x(m.Y,m,m.g),m.O)),E=m.U,w=m.g,j=m.ca;var Y="readystatechange";Array.isArray(Y)||(Y&&(Jn[0]=Y.toString()),Y=Jn);for(var te=0;te<Y.length;te++){var me=ve(w,Y[te],j||E.handleEvent,!1,E.h||E);if(!me)break;E.g[me.key]=me}E=m.H?S(m.H):{},m.m?(m.u||(m.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,E)):(m.u="GET",m.g.ea(m.A,m.u,null,E)),tn(),jr(m.i,m.u,m.A,m.l,m.R,m.m)}hr.prototype.ca=function(m){m=m.target;const E=this.M;E&&Cr(m)==3?E.j():this.Y(m)},hr.prototype.Y=function(m){try{if(m==this.g)e:{const Yn=Cr(this.g);var E=this.g.Ba();const ra=this.g.Z();if(!(3>Yn)&&(Yn!=3||this.g&&(this.h.h||this.g.oa()||co(this.g)))){this.J||Yn!=4||E==7||(E==8||0>=ra?tn(3):tn(2)),Vr(this);var w=this.g.Z();this.X=w;t:if(Ar(this)){var j=co(this.g);m="";var Y=j.length,te=Cr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gn(this),Wr(this);var me="";break t}this.h.i=new d.TextDecoder}for(E=0;E<Y;E++)this.h.h=!0,m+=this.h.i.decode(j[E],{stream:!(te&&E==Y-1)});j.length=0,this.h.g+=m,this.C=0,me=this.h.g}else me=this.g.oa();if(this.o=w==200,nn(this.i,this.u,this.A,this.l,this.R,Yn,w),this.o){if(this.T&&!this.K){t:{if(this.g){var Ct,Cn=this.g;if((Ct=Cn.g?Cn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(Ct)){var et=Ct;break t}}et=null}if(w=et)rn(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hi(this,w);else{this.o=!1,this.s=3,Tt(12),Gn(this),Wr(this);break e}}if(this.P){w=!0;let Br;for(;!this.J&&this.C<me.length;)if(Br=er(this,me),Br==Pr){Yn==4&&(this.s=4,Tt(14),w=!1),rn(this.i,this.l,null,"[Incomplete Response]");break}else if(Br==Hn){this.s=4,Tt(15),rn(this.i,this.l,me,"[Invalid Chunk]"),w=!1;break}else rn(this.i,this.l,Br,null),hi(this,Br);if(Ar(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Yn!=4||me.length!=0||this.h.h||(this.s=1,Tt(16),w=!1),this.o=this.o&&w,!w)rn(this.i,this.l,me,"[Invalid Chunked Response]"),Gn(this),Wr(this);else if(0<me.length&&!this.W){this.W=!0;var Kn=this.j;Kn.g==this&&Kn.ba&&!Kn.M&&(Kn.j.info("Great, no buffering proxy detected. Bytes received: "+me.length),Hu(Kn),Kn.M=!0,Tt(11))}}else rn(this.i,this.l,me,null),hi(this,me);Yn==4&&Gn(this),this.o&&!this.J&&(Yn==4?hh(this.j,this):(this.o=!1,tr(this)))}else ah(this.g),w==400&&0<me.indexOf("Unknown SID")?(this.s=3,Tt(12)):(this.s=0,Tt(13)),Gn(this),Wr(this)}}}catch{}finally{}};function Ar(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function er(m,E){var w=m.C,j=E.indexOf(`
`,w);return j==-1?Pr:(w=Number(E.substring(w,j)),isNaN(w)?Hn:(j+=1,j+w>E.length?Pr:(E=E.slice(j,j+w),m.C=j+w,E)))}hr.prototype.cancel=function(){this.J=!0,Gn(this)};function tr(m){m.S=Date.now()+m.I,Ft(m,m.I)}function Ft(m,E){if(m.B!=null)throw Error("WatchDog timer not null");m.B=zt(x(m.ba,m),E)}function Vr(m){m.B&&(d.clearTimeout(m.B),m.B=null)}hr.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(Ne(this.i,this.A),this.L!=2&&(tn(),Tt(17)),Gn(this),this.s=2,Wr(this)):Ft(this,this.S-m)};function Wr(m){m.j.G==0||m.J||hh(m.j,m)}function Gn(m){Vr(m);var E=m.M;E&&typeof E.ma=="function"&&E.ma(),m.M=null,hn(m.U),m.g&&(E=m.g,m.g=null,E.abort(),E.ma())}function hi(m,E){try{var w=m.j;if(w.G!=0&&(w.g==m||Xr(w.h,m))){if(!m.K&&Xr(w.h,m)&&w.G==3){try{var j=w.Da.g.parse(E)}catch{j=null}if(Array.isArray(j)&&j.length==3){var Y=j;if(Y[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<m.F)ta(w),ea(w);else break e;qu(w),Tt(18)}}else w.za=Y[1],0<w.za-w.T&&37500>Y[2]&&w.F&&w.v==0&&!w.C&&(w.C=zt(x(w.Za,w),6e3));if(1>=al(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else ps(w,11)}else if((m.K||w.g==m)&&ta(w),!O(E))for(Y=w.Da.g.parse(E),E=0;E<Y.length;E++){let et=Y[E];if(w.T=et[0],et=et[1],w.G==2)if(et[0]=="c"){w.K=et[1],w.ia=et[2];const Kn=et[3];Kn!=null&&(w.la=Kn,w.j.info("VER="+w.la));const Yn=et[4];Yn!=null&&(w.Aa=Yn,w.j.info("SVER="+w.Aa));const ra=et[5];ra!=null&&typeof ra=="number"&&0<ra&&(j=1.5*ra,w.L=j,w.j.info("backChannelRequestTimeoutMs_="+j)),j=w;const Br=m.g;if(Br){const mo=Br.g?Br.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(mo){var te=j.h;te.g||mo.indexOf("spdy")==-1&&mo.indexOf("quic")==-1&&mo.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(Ki(te,te.h),te.h=null))}if(j.D){const gs=Br.g?Br.g.getResponseHeader("X-HTTP-Session-Id"):null;gs&&(j.ya=gs,ht(j.I,j.D,gs))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-m.F,w.j.info("Handshake RTT: "+w.R+"ms")),j=w;var me=m;if(j.qa=mh(j,j.J?j.ia:null,j.W),me.K){Lr(j.h,me);var Ct=me,Cn=j.L;Cn&&(Ct.I=Cn),Ct.B&&(Vr(Ct),tr(Ct)),j.g=me}else ch(j);0<w.i.length&&dl(w)}else et[0]!="stop"&&et[0]!="close"||ps(w,7);else w.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?ps(w,7):zu(w):et[0]!="noop"&&w.l&&w.l.ta(et),w.v=0)}}tn(4)}catch{}}var Pu=class{constructor(m,E){this.g=m,this.map=E}};function $i(m){this.l=m||10,d.PerformanceNavigationTiming?(m=d.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ks(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function al(m){return m.h?1:m.g?m.g.size:0}function Xr(m,E){return m.h?m.h==E:m.g?m.g.has(E):!1}function Ki(m,E){m.g?m.g.add(E):m.h=E}function Lr(m,E){m.h&&m.h==E?m.h=null:m.g&&m.g.has(E)&&m.g.delete(E)}$i.prototype.cancel=function(){if(this.i=nr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function nr(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let E=m.i;for(const w of m.g.values())E=E.concat(w.D);return E}return R(m.i)}function Ys(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(h(m)){for(var E=[],w=m.length,j=0;j<w;j++)E.push(m[j]);return E}E=[],w=0;for(j in m)E[w++]=m[j];return E}function re(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(h(m)||typeof m=="string"){var E=[];m=m.length;for(var w=0;w<m;w++)E.push(w);return E}E=[],w=0;for(const j in m)E[w++]=j;return E}}}function ye(m,E){if(m.forEach&&typeof m.forEach=="function")m.forEach(E,void 0);else if(h(m)||typeof m=="string")Array.prototype.forEach.call(m,E,void 0);else for(var w=re(m),j=Ys(m),Y=j.length,te=0;te<Y;te++)E.call(void 0,j[te],w&&w[te],m)}var Re=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Je(m,E){if(m){m=m.split("&");for(var w=0;w<m.length;w++){var j=m[w].indexOf("="),Y=null;if(0<=j){var te=m[w].substring(0,j);Y=m[w].substring(j+1)}else te=m[w];E(te,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function pt(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof pt){this.h=m.h,fi(this,m.j),this.o=m.o,this.g=m.g,Ni(this,m.s),this.l=m.l;var E=m.i,w=new Qi;w.i=E.i,E.g&&(w.g=new Map(E.g),w.h=E.h),Yi(this,w),this.m=m.m}else m&&(E=String(m).match(Re))?(this.h=!1,fi(this,E[1]||"",!0),this.o=Qs(E[2]||""),this.g=Qs(E[3]||"",!0),Ni(this,E[4]),this.l=Qs(E[5]||"",!0),Yi(this,E[6]||"",!0),this.m=Qs(E[7]||"")):(this.h=!1,this.i=new Qi(null,this.h))}pt.prototype.toString=function(){var m=[],E=this.j;E&&m.push(mi(E,Vu,!0),":");var w=this.g;return(w||E=="file")&&(m.push("//"),(E=this.o)&&m.push(mi(E,Vu,!0),"@"),m.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&m.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&m.push("/"),m.push(mi(w,w.charAt(0)=="/"?Lu:nh,!0))),(w=this.i.toString())&&m.push("?",w),(w=this.m)&&m.push("#",mi(w,Yp)),m.join("")};function Be(m){return new pt(m)}function fi(m,E,w){m.j=w?Qs(E,!0):E,m.j&&(m.j=m.j.replace(/:$/,""))}function Ni(m,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);m.s=E}else m.s=null}function Yi(m,E,w){E instanceof Qi?(m.i=E,rh(m.i,m.h)):(w||(E=mi(E,Kp)),m.i=new Qi(E,m.h))}function ht(m,E,w){m.i.set(E,w)}function oo(m){return ht(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Qs(m,E){return m?E?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function mi(m,E,w){return typeof m=="string"?(m=encodeURI(m).replace(E,$p),w&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function $p(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Vu=/[#\/\?@]/g,nh=/[#\?:]/g,Lu=/[#\?]/g,Kp=/[#\?@]/g,Yp=/#/g;function Qi(m,E){this.h=this.g=null,this.i=m||null,this.j=!!E}function $n(m){m.g||(m.g=new Map,m.h=0,m.i&&Je(m.i,function(E,w){m.add(decodeURIComponent(E.replace(/\+/g," ")),w)}))}t=Qi.prototype,t.add=function(m,E){$n(this),this.i=null,m=Jr(this,m);var w=this.g.get(m);return w||this.g.set(m,w=[]),w.push(E),this.h+=1,this};function ol(m,E){$n(m),E=Jr(m,E),m.g.has(E)&&(m.i=null,m.h-=m.g.get(E).length,m.g.delete(E))}function ll(m,E){return $n(m),E=Jr(m,E),m.g.has(E)}t.forEach=function(m,E){$n(this),this.g.forEach(function(w,j){w.forEach(function(Y){m.call(E,Y,j,this)},this)},this)},t.na=function(){$n(this);const m=Array.from(this.g.values()),E=Array.from(this.g.keys()),w=[];for(let j=0;j<E.length;j++){const Y=m[j];for(let te=0;te<Y.length;te++)w.push(E[j])}return w},t.V=function(m){$n(this);let E=[];if(typeof m=="string")ll(this,m)&&(E=E.concat(this.g.get(Jr(this,m))));else{m=Array.from(this.g.values());for(let w=0;w<m.length;w++)E=E.concat(m[w])}return E},t.set=function(m,E){return $n(this),this.i=null,m=Jr(this,m),ll(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[E]),this.h+=1,this},t.get=function(m,E){return m?(m=this.V(m),0<m.length?String(m[0]):E):E};function fs(m,E,w){ol(m,E),0<w.length&&(m.i=null,m.g.set(Jr(m,E),R(w)),m.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],E=Array.from(this.g.keys());for(var w=0;w<E.length;w++){var j=E[w];const te=encodeURIComponent(String(j)),me=this.V(j);for(j=0;j<me.length;j++){var Y=te;me[j]!==""&&(Y+="="+encodeURIComponent(String(me[j]))),m.push(Y)}}return this.i=m.join("&")};function Jr(m,E){return E=String(E),m.j&&(E=E.toLowerCase()),E}function rh(m,E){E&&!m.j&&($n(m),m.i=null,m.g.forEach(function(w,j){var Y=j.toLowerCase();j!=Y&&(ol(this,j),fs(this,Y,w))},m)),m.j=E}function Uu(m,E){const w=new Pn;if(d.Image){const j=new Image;j.onload=_(Ur,w,"TestLoadImage: loaded",!0,E,j),j.onerror=_(Ur,w,"TestLoadImage: error",!1,E,j),j.onabort=_(Ur,w,"TestLoadImage: abort",!1,E,j),j.ontimeout=_(Ur,w,"TestLoadImage: timeout",!1,E,j),d.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=m}else E(!1)}function ih(m,E){const w=new Pn,j=new AbortController,Y=setTimeout(()=>{j.abort(),Ur(w,"TestPingServer: timeout",!1,E)},1e4);fetch(m,{signal:j.signal}).then(te=>{clearTimeout(Y),te.ok?Ur(w,"TestPingServer: ok",!0,E):Ur(w,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(Y),Ur(w,"TestPingServer: error",!1,E)})}function Ur(m,E,w,j,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),j(w)}catch{}}function ki(){this.g=new Te}function Bu(m,E,w){const j=w||"";try{ye(m,function(Y,te){let me=Y;f(Y)&&(me=ae(Y)),E.push(j+te+"="+encodeURIComponent(me))})}catch(Y){throw E.push(j+"type="+encodeURIComponent("_badmap")),Y}}function Wi(m){this.l=m.Ub||null,this.j=m.eb||!1}A(Wi,Ke),Wi.prototype.g=function(){return new Zr(this.l,this.j)},Wi.prototype.i=(function(m){return function(){return m}})({});function Zr(m,E){$e.call(this),this.D=m,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Zr,$e),t=Zr.prototype,t.open=function(m,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=E,this.readyState=1,Ws(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(E.body=m),(this.D||d).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xi(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Ws(this)),this.g&&(this.readyState=3,Ws(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ul(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function ul(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var E=m.value?m.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!m.done}))&&(this.response=this.responseText+=E)}m.done?Xi(this):Ws(this),this.readyState==3&&ul(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,Xi(this))},t.Qa=function(m){this.g&&(this.response=m,Xi(this))},t.ga=function(){this.g&&Xi(this)};function Xi(m){m.readyState=4,m.l=null,m.j=null,m.v=null,Ws(m)}t.setRequestHeader=function(m,E){this.u.append(m,E)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],E=this.h.entries();for(var w=E.next();!w.done;)w=w.value,m.push(w[0]+": "+w[1]),w=E.next();return m.join(`\r
`)};function Ws(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Zr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function lo(m){let E="";return q(m,function(w,j){E+=j,E+=":",E+=w,E+=`\r
`}),E}function Xs(m,E,w){e:{for(j in w){var j=!1;break e}j=!0}j||(w=lo(w),typeof m=="string"?w!=null&&encodeURIComponent(String(w)):ht(m,E,w))}function Kt(m){$e.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Kt,$e);var fr=/^https?$/i,ms=["POST","PUT"];t=Kt.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,E,w,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);E=E?E.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wr.g(),this.v=this.o?yt(this.o):yt(wr),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(E,String(m),!0),this.B=!1}catch(te){uo(this,te);return}if(m=w||"",w=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var Y in j)w.set(Y,j[Y]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const te of j.keys())w.set(te,j.get(te));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(w.keys()).find(te=>te.toLowerCase()=="content-type"),Y=d.FormData&&m instanceof d.FormData,!(0<=Array.prototype.indexOf.call(ms,E,void 0))||j||Y||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,me]of w)this.g.setRequestHeader(te,me);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{cl(this),this.u=!0,this.g.send(m),this.u=!1}catch(te){uo(this,te)}};function uo(m,E){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=E,m.m=5,Js(m),Zs(m)}function Js(m){m.A||(m.A=!0,Bt(m,"complete"),Bt(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Bt(this,"complete"),Bt(this,"abort"),Zs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zs(this,!0)),Kt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?sh(this):this.bb())},t.bb=function(){sh(this)};function sh(m){if(m.h&&typeof u<"u"&&(!m.v[1]||Cr(m)!=4||m.Z()!=2)){if(m.u&&Cr(m)==4)dn(m.Ea,0,m);else if(Bt(m,"readystatechange"),Cr(m)==4){m.h=!1;try{const me=m.Z();e:switch(me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var w;if(!(w=E)){var j;if(j=me===0){var Y=String(m.D).match(Re)[1]||null;!Y&&d.self&&d.self.location&&(Y=d.self.location.protocol.slice(0,-1)),j=!fr.test(Y?Y.toLowerCase():"")}w=j}if(w)Bt(m,"complete"),Bt(m,"success");else{m.m=6;try{var te=2<Cr(m)?m.g.statusText:""}catch{te=""}m.l=te+" ["+m.Z()+"]",Js(m)}}finally{Zs(m)}}}}function Zs(m,E){if(m.g){cl(m);const w=m.g,j=m.v[0]?()=>{}:null;m.g=null,m.v=null,E||Bt(m,"ready");try{w.onreadystatechange=j}catch{}}}function cl(m){m.I&&(d.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function Cr(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<Cr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var E=this.g.responseText;return m&&E.indexOf(m)==0&&(E=E.substring(m.length)),xe(E)}};function co(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function ah(m){const E={};m=(m.g&&2<=Cr(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<m.length;j++){if(O(m[j]))continue;var w=V(m[j]);const Y=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const te=E[Y]||[];E[Y]=te,te.push(w)}C(E,function(j){return j.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ho(m,E,w){return w&&w.internalChannelParams&&w.internalChannelParams[m]||E}function oh(m){this.Aa=0,this.i=[],this.j=new Pn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ho("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ho("baseRetryDelayMs",5e3,m),this.cb=ho("retryDelaySeedMs",1e4,m),this.Wa=ho("forwardChannelMaxRetries",2,m),this.wa=ho("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new $i(m&&m.concurrentRequestLimit),this.Da=new ki,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=oh.prototype,t.la=8,t.G=1,t.connect=function(m,E,w,j){Tt(0),this.W=m,this.H=E||{},w&&j!==void 0&&(this.H.OSID=w,this.H.OAID=j),this.F=this.X,this.I=mh(this,null,this.W),dl(this)};function zu(m){if(lh(m),m.G==3){var E=m.U++,w=Be(m.I);if(ht(w,"SID",m.K),ht(w,"RID",E),ht(w,"TYPE","terminate"),fo(m,w),E=new hr(m,m.j,E),E.L=2,E.v=oo(Be(w)),w=!1,d.navigator&&d.navigator.sendBeacon)try{w=d.navigator.sendBeacon(E.v.toString(),"")}catch{}!w&&d.Image&&(new Image().src=E.v,w=!0),w||(E.g=ph(E.j,null),E.g.ea(E.v)),E.F=Date.now(),tr(E)}Gu(m)}function ea(m){m.g&&(Hu(m),m.g.cancel(),m.g=null)}function lh(m){ea(m),m.u&&(d.clearTimeout(m.u),m.u=null),ta(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&d.clearTimeout(m.s),m.s=null)}function dl(m){if(!Ks(m.h)&&!m.s){m.s=!0;var E=m.Ga;ie||_e(),ce||(ie(),ce=!0),Ae.add(E,m),m.B=0}}function Qp(m,E){return al(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=E.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=zt(x(m.Ga,m,E),fh(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const Y=new hr(this,this.j,m);let te=this.o;if(this.S&&(te?(te=S(te),P(te,this.S)):te=this.S),this.m!==null||this.O||(Y.H=te,te=null),this.P)e:{for(var E=0,w=0;w<this.i.length;w++){t:{var j=this.i[w];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(E+=j,4096<E){E=w;break e}if(E===4096||w===this.i.length-1){E=w+1;break e}}E=1e3}else E=1e3;E=Fu(this,Y,E),w=Be(this.I),ht(w,"RID",m),ht(w,"CVER",22),this.D&&ht(w,"X-HTTP-Session-Id",this.D),fo(this,w),te&&(this.O?E="headers="+encodeURIComponent(String(lo(te)))+"&"+E:this.m&&Xs(w,this.m,te)),Ki(this.h,Y),this.Ua&&ht(w,"TYPE","init"),this.P?(ht(w,"$req",E),ht(w,"SID","null"),Y.T=!0,Sr(Y,w,null)):Sr(Y,w,E),this.G=2}}else this.G==3&&(m?uh(this,m):this.i.length==0||Ks(this.h)||uh(this))};function uh(m,E){var w;E?w=E.l:w=m.U++;const j=Be(m.I);ht(j,"SID",m.K),ht(j,"RID",w),ht(j,"AID",m.T),fo(m,j),m.m&&m.o&&Xs(j,m.m,m.o),w=new hr(m,m.j,w,m.B+1),m.m===null&&(w.H=m.o),E&&(m.i=E.D.concat(m.i)),E=Fu(m,w,1e3),w.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),Ki(m.h,w),Sr(w,j,E)}function fo(m,E){m.H&&q(m.H,function(w,j){ht(E,j,w)}),m.l&&ye({},function(w,j){ht(E,j,w)})}function Fu(m,E,w){w=Math.min(m.i.length,w);var j=m.l?x(m.l.Na,m.l,m):null;e:{var Y=m.i;let te=-1;for(;;){const me=["count="+w];te==-1?0<w?(te=Y[0].g,me.push("ofs="+te)):te=0:me.push("ofs="+te);let Ct=!0;for(let Cn=0;Cn<w;Cn++){let et=Y[Cn].g;const Kn=Y[Cn].map;if(et-=te,0>et)te=Math.max(0,Y[Cn].g-100),Ct=!1;else try{Bu(Kn,me,"req"+et+"_")}catch{j&&j(Kn)}}if(Ct){j=me.join("&");break e}}}return m=m.i.splice(0,w),E.D=m,j}function ch(m){if(!m.g&&!m.u){m.Y=1;var E=m.Fa;ie||_e(),ce||(ie(),ce=!0),Ae.add(E,m),m.v=0}}function qu(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=zt(x(m.Fa,m),fh(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,dh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=zt(x(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Tt(10),ea(this),dh(this))};function Hu(m){m.A!=null&&(d.clearTimeout(m.A),m.A=null)}function dh(m){m.g=new hr(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var E=Be(m.qa);ht(E,"RID","rpc"),ht(E,"SID",m.K),ht(E,"AID",m.T),ht(E,"CI",m.F?"0":"1"),!m.F&&m.ja&&ht(E,"TO",m.ja),ht(E,"TYPE","xmlhttp"),fo(m,E),m.m&&m.o&&Xs(E,m.m,m.o),m.L&&(m.g.I=m.L);var w=m.g;m=m.ia,w.L=1,w.v=oo(Be(E)),w.m=null,w.P=!0,Zn(w,m)}t.Za=function(){this.C!=null&&(this.C=null,ea(this),qu(this),Tt(19))};function ta(m){m.C!=null&&(d.clearTimeout(m.C),m.C=null)}function hh(m,E){var w=null;if(m.g==E){ta(m),Hu(m),m.g=null;var j=2}else if(Xr(m.h,E))w=E.D,Lr(m.h,E),j=1;else return;if(m.G!=0){if(E.o)if(j==1){w=E.m?E.m.length:0,E=Date.now()-E.F;var Y=m.B;j=fn(),Bt(j,new qn(j,w)),dl(m)}else ch(m);else if(Y=E.s,Y==3||Y==0&&0<E.X||!(j==1&&Qp(m,E)||j==2&&qu(m)))switch(w&&0<w.length&&(E=m.h,E.i=E.i.concat(w)),Y){case 1:ps(m,5);break;case 4:ps(m,10);break;case 3:ps(m,6);break;default:ps(m,2)}}}function fh(m,E){let w=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(w*=2),w*E}function ps(m,E){if(m.j.info("Error code "+E),E==2){var w=x(m.fb,m),j=m.Xa;const Y=!j;j=new pt(j||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||fi(j,"https"),oo(j),Y?Uu(j.toString(),w):ih(j.toString(),w)}else Tt(2);m.G=0,m.l&&m.l.sa(E),Gu(m),lh(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function Gu(m){if(m.G=0,m.ka=[],m.l){const E=nr(m.h);(E.length!=0||m.i.length!=0)&&(M(m.ka,E),M(m.ka,m.i),m.h.i.length=0,R(m.i),m.i.length=0),m.l.ra()}}function mh(m,E,w){var j=w instanceof pt?Be(w):new pt(w);if(j.g!="")E&&(j.g=E+"."+j.g),Ni(j,j.s);else{var Y=d.location;j=Y.protocol,E=E?E+"."+Y.hostname:Y.hostname,Y=+Y.port;var te=new pt(null);j&&fi(te,j),E&&(te.g=E),Y&&Ni(te,Y),w&&(te.l=w),j=te}return w=m.D,E=m.ya,w&&E&&ht(j,w,E),ht(j,"VER",m.la),fo(m,j),j}function ph(m,E,w){if(E&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=m.Ca&&!m.pa?new Kt(new Wi({eb:w})):new Kt(m.pa),E.Ha(m.J),E}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function gh(){}t=gh.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function hl(){}hl.prototype.g=function(m,E){return new Rr(m,E)};function Rr(m,E){$e.call(this),this.g=new oh(E),this.l=m,this.h=E&&E.messageUrlParams||null,m=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(m?m["X-WebChannel-Content-Type"]=E.messageContentType:m={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(m?m["X-WebChannel-Client-Profile"]=E.va:m={"X-WebChannel-Client-Profile":E.va}),this.g.S=m,(m=E&&E.Sb)&&!O(m)&&(this.g.m=m),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!O(E)&&(this.g.D=E,m=this.h,m!==null&&E in m&&(m=this.h,E in m&&delete m[E])),this.j=new na(this)}A(Rr,$e),Rr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rr.prototype.close=function(){zu(this.g)},Rr.prototype.o=function(m){var E=this.g;if(typeof m=="string"){var w={};w.__data__=m,m=w}else this.u&&(w={},w.__data__=ae(m),m=w);E.i.push(new Pu(E.Ya++,m)),E.G==3&&dl(E)},Rr.prototype.N=function(){this.g.l=null,delete this.j,zu(this.g),delete this.g,Rr.aa.N.call(this)};function vh(m){rt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var E=m.__sm__;if(E){e:{for(const w in E){m=w;break e}m=void 0}(this.i=m)&&(m=this.i,E=E!==null&&m in E?E[m]:void 0),this.data=E}else this.data=m}A(vh,rt);function yh(){it.call(this),this.status=1}A(yh,it);function na(m){this.g=m}A(na,gh),na.prototype.ua=function(){Bt(this.g,"a")},na.prototype.ta=function(m){Bt(this.g,new vh(m))},na.prototype.sa=function(m){Bt(this.g,new yh)},na.prototype.ra=function(){Bt(this.g,"b")},hl.prototype.createWebChannel=hl.prototype.g,Rr.prototype.send=Rr.prototype.o,Rr.prototype.open=Rr.prototype.m,Rr.prototype.close=Rr.prototype.close,e2=function(){return new hl},ZC=function(){return fn()},JC=De,zy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},bt.NO_ERROR=0,bt.TIMEOUT=8,bt.HTTP_ERROR=6,rm=bt,Me.COMPLETE="complete",XC=Me,We.EventType=Ye,Ye.OPEN="a",Ye.CLOSE="b",Ye.ERROR="c",Ye.MESSAGE="d",$e.prototype.listen=$e.prototype.K,Uc=We,Kt.prototype.listenOnce=Kt.prototype.L,Kt.prototype.getLastError=Kt.prototype.Ka,Kt.prototype.getLastErrorCode=Kt.prototype.Ba,Kt.prototype.getStatus=Kt.prototype.Z,Kt.prototype.getResponseJson=Kt.prototype.Oa,Kt.prototype.getResponseText=Kt.prototype.oa,Kt.prototype.send=Kt.prototype.ea,Kt.prototype.setWithCredentials=Kt.prototype.Ha,WC=Kt}).apply(typeof wf<"u"?wf:typeof self<"u"?self:typeof window<"u"?window:{});const Fw="@firebase/firestore",qw="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}br.UNAUTHENTICATED=new br(null),br.GOOGLE_CREDENTIALS=new br("google-credentials-uid"),br.FIRST_PARTY=new br("first-party-uid"),br.MOCK_USER=new br("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Au="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=new G0("@firebase/firestore");function $l(){return Qo.logLevel}function Ee(t,...e){if(Qo.logLevel<=ct.DEBUG){const n=e.map(ib);Qo.debug(`Firestore (${Au}): ${t}`,...n)}}function Fs(t,...e){if(Qo.logLevel<=ct.ERROR){const n=e.map(ib);Qo.error(`Firestore (${Au}): ${t}`,...n)}}function Ha(t,...e){if(Qo.logLevel<=ct.WARN){const n=e.map(ib);Qo.warn(`Firestore (${Au}): ${t}`,...n)}}function ib(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,t2(t,r,n)}function t2(t,e,n){let r=`FIRESTORE (${Au}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Fs(r),new Error(r)}function It(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||t2(e,s,r)}function Ge(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends Hi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(br.UNAUTHENTICATED)))}shutdown(){}}class gP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class vP{constructor(e){this.t=e,this.currentUser=br.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){It(this.o===void 0,42304);let r=this.i;const s=h=>this.i!==r?(r=this.i,n(h)):Promise.resolve();let o=new za;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new za,e.enqueueRetryable((()=>s(this.currentUser)))};const u=()=>{const h=o;e.enqueueRetryable((async()=>{await h.promise,await s(this.currentUser)}))},d=h=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((h=>d(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?d(h):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new za)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(It(typeof r.accessToken=="string",31837,{l:r}),new n2(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return It(e===null||typeof e=="string",2055,{h:e}),new br(e)}}class yP{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=br.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class bP{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new yP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(br.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Hw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,kr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){It(this.o===void 0,3512);const r=o=>{o.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.m;return this.m=o.token,Ee("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const s=o=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Hw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(It(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Hw(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=EP(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%62))}return r}}function tt(t,e){return t<e?-1:t>e?1:0}function Fy(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return tt(r,s);{const o=r2(),u=_P(o.encode(Gw(t,n)),o.encode(Gw(e,n)));return u!==0?u:tt(r,s)}}n+=r>65535?2:1}return tt(t.length,e.length)}function Gw(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function _P(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return tt(t[n],e[n]);return tt(t.length,e.length)}function hu(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w="__name__";class rs{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ue(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ue(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return rs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof rs?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=rs.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return tt(e.length,n.length)}static compareSegments(e,n){const r=rs.isNumericId(e),s=rs.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?rs.extractNumericId(e).compare(rs.extractNumericId(n)):Fy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ba.fromString(e.substring(4,e.length-2))}}class qt extends rs{construct(e,n,r){return new qt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new be(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new qt(n)}static emptyPath(){return new qt([])}}const TP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cr extends rs{construct(e,n,r){return new cr(e,n,r)}static isValidIdentifier(e){return TP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$w}static keyField(){return new cr([$w])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new be(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let u=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new be(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new be(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,s+=2}else d==="`"?(u=!u,s++):d!=="."||u?(r+=d,s++):(o(),s++)}if(o(),u)throw new be(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cr(n)}static emptyPath(){return new cr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.path=e}static fromPath(e){return new Oe(qt.fromString(e))}static fromName(e){return new Oe(qt.fromString(e).popFirst(5))}static empty(){return new Oe(qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return qt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Oe(new qt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(t,e,n){if(!n)throw new be(le.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function wP(t,e,n,r){if(e===!0&&r===!0)throw new be(le.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Kw(t){if(!Oe.isDocumentKey(t))throw new be(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Yw(t){if(Oe.isDocumentKey(t))throw new be(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function s2(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function pp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ue(12329,{type:typeof t})}function ss(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new be(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pp(t);throw new be(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(t,e){const n={typeString:t};return e&&(n.value=e),n}function qd(t,e){if(!s2(t))throw new be(le.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const u=t[r];if(s&&typeof u!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&u!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new be(le.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw=-62135596800,Ww=1e6;class Xt{static now(){return Xt.fromMillis(Date.now())}static fromDate(e){return Xt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Ww);return new Xt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new be(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new be(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Qw)throw new be(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ww}_compareTo(e){return this.seconds===e.seconds?tt(this.nanoseconds,e.nanoseconds):tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(qd(e,Xt._jsonSchema))return new Xt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Qw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xt._jsonSchemaVersion="firestore/timestamp/1.0",Xt._jsonSchema={type:jn("string",Xt._jsonSchemaVersion),seconds:jn("number"),nanoseconds:jn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new Xt(0,0))}static max(){return new Fe(new Xt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed=-1;function SP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Fe.fromTimestamp(r===1e9?new Xt(n+1,0):new Xt(n,r));return new Ga(s,Oe.empty(),e)}function AP(t){return new Ga(t.readTime,t.key,Ed)}class Ga{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ga(Fe.min(),Oe.empty(),Ed)}static max(){return new Ga(Fe.max(),Oe.empty(),Ed)}}function CP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Oe.comparator(t.documentKey,e.documentKey),n!==0?n:tt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cu(t){if(t.code!==le.FAILED_PRECONDITION||t.message!==RP)throw t;Ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ue(((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ue?n:ue.resolve(n)}catch(n){return ue.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.reject(n)}static resolve(e){return new ue(((n,r)=>{n(e)}))}static reject(e){return new ue(((n,r)=>{r(e)}))}static waitFor(e){return new ue(((n,r)=>{let s=0,o=0,u=!1;e.forEach((d=>{++s,d.next((()=>{++o,u&&o===s&&n()}),(h=>r(h)))})),u=!0,o===s&&n()}))}static or(e){let n=ue.resolve(!1);for(const r of e)n=n.next((s=>s?ue.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,o)=>{r.push(n.call(this,s,o))})),this.waitFor(r)}static mapArray(e,n){return new ue(((r,s)=>{const o=e.length,u=new Array(o);let d=0;for(let h=0;h<o;h++){const f=h;n(e[f]).next((v=>{u[f]=v,++d,d===o&&r(u)}),(v=>s(v)))}}))}static doWhile(e,n){return new ue(((r,s)=>{const o=()=>{e()===!0?n().next((()=>{o()}),s):r()};o()}))}}function NP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ru(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}gp.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab=-1;function vp(t){return t==null}function Cm(t){return t===0&&1/t==-1/0}function kP(t){return typeof t=="number"&&Number.isInteger(t)&&!Cm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2="";function OP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Xw(e)),e=DP(t.get(n),e);return Xw(e)}function DP(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case a2:n+="";break;default:n+=o}}return n}function Xw(t){return t+a2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function no(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function o2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,n){this.comparator=e,this.root=n||ur.EMPTY}insert(e,n){return new cn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ur.BLACK,null,null))}remove(e){return new cn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ur.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sf(this.root,e,this.comparator,!0)}}class Sf{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ur{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??ur.RED,this.left=s??ur.EMPTY,this.right=o??ur.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new ur(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ur.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ur.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ur.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ur.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ue(27949);return e+(this.isRed()?0:1)}}ur.EMPTY=null,ur.RED=!0,ur.BLACK=!1;ur.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue(57766)}get value(){throw Ue(16141)}get color(){throw Ue(16727)}get left(){throw Ue(29726)}get right(){throw Ue(36894)}copy(e,n,r,s,o){return this}insert(e,n,r){return new ur(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.comparator=e,this.data=new cn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Zw(this.data.getIterator())}getIteratorFrom(e){return new Zw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Un)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Un(this.comparator);return n.data=e,n}}class Zw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.fields=e,e.sort(cr.comparator)}static empty(){return new oi([])}unionWith(e){let n=new Un(cr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new oi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return hu(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new l2("Invalid base64 string: "+o):o}})(e);return new dr(n)}static fromUint8Array(e){const n=(function(s){let o="";for(let u=0;u<s.length;++u)o+=String.fromCharCode(s[u]);return o})(e);return new dr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dr.EMPTY_BYTE_STRING=new dr("");const jP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $a(t){if(It(!!t,39018),typeof t=="string"){let e=0;const n=jP.exec(t);if(It(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tn(t.seconds),nanos:Tn(t.nanos)}}function Tn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ka(t){return typeof t=="string"?dr.fromBase64String(t):dr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2="server_timestamp",c2="__type__",d2="__previous_value__",h2="__local_write_time__";function ob(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[c2])===null||n===void 0?void 0:n.stringValue)===u2}function yp(t){const e=t.mapValue.fields[d2];return ob(e)?yp(e):e}function _d(t){const e=$a(t.mapValue.fields[h2].timestampValue);return new Xt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e,n,r,s,o,u,d,h,f,v){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=v}}const Rm="(default)";class Td{constructor(e,n){this.projectId=e,this.database=n||Rm}static empty(){return new Td("","")}get isDefaultDatabase(){return this.database===Rm}isEqual(e){return e instanceof Td&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2="__type__",PP="__max__",Af={mapValue:{}},m2="__vector__",Im="value";function Ya(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ob(t)?4:LP(t)?9007199254740991:VP(t)?10:11:Ue(28295,{value:t})}function hs(t,e){if(t===e)return!0;const n=Ya(t);if(n!==Ya(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return _d(t).isEqual(_d(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const u=$a(s.timestampValue),d=$a(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,o){return Ka(s.bytesValue).isEqual(Ka(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,o){return Tn(s.geoPointValue.latitude)===Tn(o.geoPointValue.latitude)&&Tn(s.geoPointValue.longitude)===Tn(o.geoPointValue.longitude)})(t,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return Tn(s.integerValue)===Tn(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const u=Tn(s.doubleValue),d=Tn(o.doubleValue);return u===d?Cm(u)===Cm(d):isNaN(u)&&isNaN(d)}return!1})(t,e);case 9:return hu(t.arrayValue.values||[],e.arrayValue.values||[],hs);case 10:case 11:return(function(s,o){const u=s.mapValue.fields||{},d=o.mapValue.fields||{};if(Jw(u)!==Jw(d))return!1;for(const h in u)if(u.hasOwnProperty(h)&&(d[h]===void 0||!hs(u[h],d[h])))return!1;return!0})(t,e);default:return Ue(52216,{left:t})}}function wd(t,e){return(t.values||[]).find((n=>hs(n,e)))!==void 0}function fu(t,e){if(t===e)return 0;const n=Ya(t),r=Ya(e);if(n!==r)return tt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return tt(t.booleanValue,e.booleanValue);case 2:return(function(o,u){const d=Tn(o.integerValue||o.doubleValue),h=Tn(u.integerValue||u.doubleValue);return d<h?-1:d>h?1:d===h?0:isNaN(d)?isNaN(h)?0:-1:1})(t,e);case 3:return eS(t.timestampValue,e.timestampValue);case 4:return eS(_d(t),_d(e));case 5:return Fy(t.stringValue,e.stringValue);case 6:return(function(o,u){const d=Ka(o),h=Ka(u);return d.compareTo(h)})(t.bytesValue,e.bytesValue);case 7:return(function(o,u){const d=o.split("/"),h=u.split("/");for(let f=0;f<d.length&&f<h.length;f++){const v=tt(d[f],h[f]);if(v!==0)return v}return tt(d.length,h.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,u){const d=tt(Tn(o.latitude),Tn(u.latitude));return d!==0?d:tt(Tn(o.longitude),Tn(u.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return tS(t.arrayValue,e.arrayValue);case 10:return(function(o,u){var d,h,f,v;const b=o.fields||{},x=u.fields||{},_=(d=b[Im])===null||d===void 0?void 0:d.arrayValue,A=(h=x[Im])===null||h===void 0?void 0:h.arrayValue,R=tt(((f=_==null?void 0:_.values)===null||f===void 0?void 0:f.length)||0,((v=A==null?void 0:A.values)===null||v===void 0?void 0:v.length)||0);return R!==0?R:tS(_,A)})(t.mapValue,e.mapValue);case 11:return(function(o,u){if(o===Af.mapValue&&u===Af.mapValue)return 0;if(o===Af.mapValue)return 1;if(u===Af.mapValue)return-1;const d=o.fields||{},h=Object.keys(d),f=u.fields||{},v=Object.keys(f);h.sort(),v.sort();for(let b=0;b<h.length&&b<v.length;++b){const x=Fy(h[b],v[b]);if(x!==0)return x;const _=fu(d[h[b]],f[v[b]]);if(_!==0)return _}return tt(h.length,v.length)})(t.mapValue,e.mapValue);default:throw Ue(23264,{le:n})}}function eS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return tt(t,e);const n=$a(t),r=$a(e),s=tt(n.seconds,r.seconds);return s!==0?s:tt(n.nanos,r.nanos)}function tS(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=fu(n[s],r[s]);if(o)return o}return tt(n.length,r.length)}function mu(t){return qy(t)}function qy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=$a(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Ka(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Oe.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=qy(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const u of r)o?o=!1:s+=",",s+=`${u}:${qy(n.fields[u])}`;return s+"}"})(t.mapValue):Ue(61005,{value:t})}function im(t){switch(Ya(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=yp(t);return e?16+im(e):16;case 5:return 2*t.stringValue.length;case 6:return Ka(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,o)=>s+im(o)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return no(r.fields,((o,u)=>{s+=o.length+im(u)})),s})(t.mapValue);default:throw Ue(13486,{value:t})}}function nS(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Hy(t){return!!t&&"integerValue"in t}function lb(t){return!!t&&"arrayValue"in t}function rS(t){return!!t&&"nullValue"in t}function iS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function sm(t){return!!t&&"mapValue"in t}function VP(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[f2])===null||n===void 0?void 0:n.stringValue)===m2}function Jc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return no(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Jc(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Jc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function LP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===PP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this.value=e}static empty(){return new Kr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!sm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jc(n)}setAll(e){let n=cr.emptyPath(),r={},s=[];e.forEach(((u,d)=>{if(!n.isImmediateParentOf(d)){const h=this.getFieldsMap(n);this.applyChanges(h,r,s),r={},s=[],n=d.popLast()}u?r[d.lastSegment()]=Jc(u):s.push(d.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());sm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return hs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];sm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){no(n,((s,o)=>e[s]=o));for(const s of r)delete e[s]}clone(){return new Kr(Jc(this.value))}}function p2(t){const e=[];return no(t.fields,((n,r)=>{const s=new cr([n]);if(sm(r)){const o=p2(r.mapValue).fields;if(o.length===0)e.push(s);else for(const u of o)e.push(s.child(u))}else e.push(s)})),new oi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,n,r,s,o,u,d){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new xr(e,0,Fe.min(),Fe.min(),Fe.min(),Kr.empty(),0)}static newFoundDocument(e,n,r,s){return new xr(e,1,n,Fe.min(),r,s,0)}static newNoDocument(e,n){return new xr(e,2,n,Fe.min(),Fe.min(),Kr.empty(),0)}static newUnknownDocument(e,n){return new xr(e,3,n,Fe.min(),Fe.min(),Kr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,n){this.position=e,this.inclusive=n}}function sS(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],u=t.position[s];if(o.field.isKeyField()?r=Oe.comparator(Oe.fromName(u.referenceValue),n.key):r=fu(u,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function aS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!hs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,n="asc"){this.field=e,this.dir=n}}function UP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{}class Dn extends g2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new zP(e,n,r):n==="array-contains"?new HP(e,r):n==="in"?new GP(e,r):n==="not-in"?new $P(e,r):n==="array-contains-any"?new KP(e,r):new Dn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new FP(e,r):new qP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(fu(n,this.value)):n!==null&&Ya(this.value)===Ya(n)&&this.matchesComparison(fu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qi extends g2{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new qi(e,n)}matches(e){return v2(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function v2(t){return t.op==="and"}function y2(t){return BP(t)&&v2(t)}function BP(t){for(const e of t.filters)if(e instanceof qi)return!1;return!0}function Gy(t){if(t instanceof Dn)return t.field.canonicalString()+t.op.toString()+mu(t.value);if(y2(t))return t.filters.map((e=>Gy(e))).join(",");{const e=t.filters.map((n=>Gy(n))).join(",");return`${t.op}(${e})`}}function b2(t,e){return t instanceof Dn?(function(r,s){return s instanceof Dn&&r.op===s.op&&r.field.isEqual(s.field)&&hs(r.value,s.value)})(t,e):t instanceof qi?(function(r,s){return s instanceof qi&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((o,u,d)=>o&&b2(u,s.filters[d])),!0):!1})(t,e):void Ue(19439)}function x2(t){return t instanceof Dn?(function(n){return`${n.field.canonicalString()} ${n.op} ${mu(n.value)}`})(t):t instanceof qi?(function(n){return n.op.toString()+" {"+n.getFilters().map(x2).join(" ,")+"}"})(t):"Filter"}class zP extends Dn{constructor(e,n,r){super(e,n,r),this.key=Oe.fromName(r.referenceValue)}matches(e){const n=Oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class FP extends Dn{constructor(e,n){super(e,"in",n),this.keys=E2("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class qP extends Dn{constructor(e,n){super(e,"not-in",n),this.keys=E2("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function E2(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((r=>Oe.fromName(r.referenceValue)))}class HP extends Dn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lb(n)&&wd(n.arrayValue,this.value)}}class GP extends Dn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&wd(this.value.arrayValue,n)}}class $P extends Dn{constructor(e,n){super(e,"not-in",n)}matches(e){if(wd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!wd(this.value.arrayValue,n)}}class KP extends Dn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lb(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>wd(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e,n=null,r=[],s=[],o=null,u=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=u,this.endAt=d,this.Pe=null}}function oS(t,e=null,n=[],r=[],s=null,o=null,u=null){return new YP(t,e,n,r,s,o,u)}function ub(t){const e=Ge(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Gy(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),vp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>mu(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>mu(r))).join(",")),e.Pe=n}return e.Pe}function cb(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!UP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!b2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!aS(t.startAt,e.startAt)&&aS(t.endAt,e.endAt)}function $y(t){return Oe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,n=null,r=[],s=[],o=null,u="F",d=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=u,this.startAt=d,this.endAt=h,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function QP(t,e,n,r,s,o,u,d){return new Hd(t,e,n,r,s,o,u,d)}function bp(t){return new Hd(t)}function lS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _2(t){return t.collectionGroup!==null}function Zc(t){const e=Ge(t);if(e.Te===null){e.Te=[];const n=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Un(cr.comparator);return u.filters.forEach((h=>{h.getFlattenedFilters().forEach((f=>{f.isInequality()&&(d=d.add(f.field))}))})),d})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new km(o,r))})),n.has(cr.keyField().canonicalString())||e.Te.push(new km(cr.keyField(),r))}return e.Te}function as(t){const e=Ge(t);return e.Ie||(e.Ie=WP(e,Zc(t))),e.Ie}function WP(t,e){if(t.limitType==="F")return oS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new km(s.field,o)}));const n=t.endAt?new Nm(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Nm(t.startAt.position,t.startAt.inclusive):null;return oS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ky(t,e){const n=t.filters.concat([e]);return new Hd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Yy(t,e,n){return new Hd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function xp(t,e){return cb(as(t),as(e))&&t.limitType===e.limitType}function T2(t){return`${ub(as(t))}|lt:${t.limitType}`}function Kl(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>x2(s))).join(", ")}]`),vp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>mu(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>mu(s))).join(",")),`Target(${r})`})(as(t))}; limitType=${t.limitType})`}function Ep(t,e){return e.isFoundDocument()&&(function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Oe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,s){for(const o of Zc(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(u,d,h){const f=sS(u,d,h);return u.inclusive?f<=0:f<0})(r.startAt,Zc(r),s)||r.endAt&&!(function(u,d,h){const f=sS(u,d,h);return u.inclusive?f>=0:f>0})(r.endAt,Zc(r),s))})(t,e)}function XP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function w2(t){return(e,n)=>{let r=!1;for(const s of Zc(t)){const o=JP(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function JP(t,e,n){const r=t.field.isKeyField()?Oe.comparator(e.key,n.key):(function(o,u,d){const h=u.data.field(o),f=d.data.field(o);return h!==null&&f!==null?fu(h,f):Ue(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ue(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){no(this.inner,((n,r)=>{for(const[s,o]of r)e(s,o)}))}isEmpty(){return o2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP=new cn(Oe.comparator);function qs(){return ZP}const S2=new cn(Oe.comparator);function Bc(...t){let e=S2;for(const n of t)e=e.insert(n.key,n);return e}function A2(t){let e=S2;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Lo(){return ed()}function C2(){return ed()}function ed(){return new tl((t=>t.toString()),((t,e)=>t.isEqual(e)))}const eV=new cn(Oe.comparator),tV=new Un(Oe.comparator);function dt(...t){let e=tV;for(const n of t)e=e.add(n);return e}const nV=new Un(tt);function rV(){return nV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cm(e)?"-0":e}}function R2(t){return{integerValue:""+t}}function iV(t,e){return kP(e)?R2(e):db(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(){this._=void 0}}function sV(t,e,n){return t instanceof Om?(function(s,o){const u={fields:{[c2]:{stringValue:u2},[h2]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&ob(o)&&(o=yp(o)),o&&(u.fields[d2]=o),{mapValue:u}})(n,e):t instanceof Sd?N2(t,e):t instanceof Ad?k2(t,e):(function(s,o){const u=I2(s,o),d=uS(u)+uS(s.Ee);return Hy(u)&&Hy(s.Ee)?R2(d):db(s.serializer,d)})(t,e)}function aV(t,e,n){return t instanceof Sd?N2(t,e):t instanceof Ad?k2(t,e):n}function I2(t,e){return t instanceof Dm?(function(r){return Hy(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class Om extends _p{}class Sd extends _p{constructor(e){super(),this.elements=e}}function N2(t,e){const n=O2(e);for(const r of t.elements)n.some((s=>hs(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Ad extends _p{constructor(e){super(),this.elements=e}}function k2(t,e){let n=O2(e);for(const r of t.elements)n=n.filter((s=>!hs(s,r)));return{arrayValue:{values:n}}}class Dm extends _p{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function uS(t){return Tn(t.integerValue||t.doubleValue)}function O2(t){return lb(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function oV(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof Sd&&s instanceof Sd||r instanceof Ad&&s instanceof Ad?hu(r.elements,s.elements,hs):r instanceof Dm&&s instanceof Dm?hs(r.Ee,s.Ee):r instanceof Om&&s instanceof Om})(t.transform,e.transform)}class lV{constructor(e,n){this.version=e,this.transformResults=n}}class Fi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Fi}static exists(e){return new Fi(void 0,e)}static updateTime(e){return new Fi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function am(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Tp{}function D2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new hb(t.key,Fi.none()):new Gd(t.key,t.data,Fi.none());{const n=t.data,r=Kr.empty();let s=new Un(cr.comparator);for(let o of e.fields)if(!s.has(o)){let u=n.field(o);u===null&&o.length>1&&(o=o.popLast(),u=n.field(o)),u===null?r.delete(o):r.set(o,u),s=s.add(o)}return new ro(t.key,r,new oi(s.toArray()),Fi.none())}}function uV(t,e,n){t instanceof Gd?(function(s,o,u){const d=s.value.clone(),h=dS(s.fieldTransforms,o,u.transformResults);d.setAll(h),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(t,e,n):t instanceof ro?(function(s,o,u){if(!am(s.precondition,o))return void o.convertToUnknownDocument(u.version);const d=dS(s.fieldTransforms,o,u.transformResults),h=o.data;h.setAll(j2(s)),h.setAll(d),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(t,e,n):(function(s,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function td(t,e,n,r){return t instanceof Gd?(function(o,u,d,h){if(!am(o.precondition,u))return d;const f=o.value.clone(),v=hS(o.fieldTransforms,h,u);return f.setAll(v),u.convertToFoundDocument(u.version,f).setHasLocalMutations(),null})(t,e,n,r):t instanceof ro?(function(o,u,d,h){if(!am(o.precondition,u))return d;const f=hS(o.fieldTransforms,h,u),v=u.data;return v.setAll(j2(o)),v.setAll(f),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((b=>b.field)))})(t,e,n,r):(function(o,u,d){return am(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(t,e,n)}function cV(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=I2(r.transform,s||null);o!=null&&(n===null&&(n=Kr.empty()),n.set(r.field,o))}return n||null}function cS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&hu(r,s,((o,u)=>oV(o,u)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Gd extends Tp{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ro extends Tp{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function j2(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function dS(t,e,n){const r=new Map;It(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const o=t[s],u=o.transform,d=e.data.field(o.field);r.set(o.field,aV(u,d,n[s]))}return r}function hS(t,e,n){const r=new Map;for(const s of t){const o=s.transform,u=n.data.field(s.field);r.set(s.field,sV(o,u,e))}return r}class hb extends Tp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dV extends Tp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&uV(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=td(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=td(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=C2();return this.mutations.forEach((s=>{const o=e.get(s.key),u=o.overlayedDocument;let d=this.applyToLocalView(u,o.mutatedFields);d=n.has(s.key)?null:d;const h=D2(u,d);h!==null&&r.set(s.key,h),u.isValidDocument()||u.convertToNoDocument(Fe.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),dt())}isEqual(e){return this.batchId===e.batchId&&hu(this.mutations,e.mutations,((n,r)=>cS(n,r)))&&hu(this.baseMutations,e.baseMutations,((n,r)=>cS(n,r)))}}class fb{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){It(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=(function(){return eV})();const o=e.mutations;for(let u=0;u<o.length;u++)s=s.insert(o[u].key,r[u].version);return new fb(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var On,gt;function pV(t){switch(t){case le.OK:return Ue(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return Ue(15467,{code:t})}}function M2(t){if(t===void 0)return Fs("GRPC error has no .code"),le.UNKNOWN;switch(t){case On.OK:return le.OK;case On.CANCELLED:return le.CANCELLED;case On.UNKNOWN:return le.UNKNOWN;case On.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case On.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case On.INTERNAL:return le.INTERNAL;case On.UNAVAILABLE:return le.UNAVAILABLE;case On.UNAUTHENTICATED:return le.UNAUTHENTICATED;case On.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case On.NOT_FOUND:return le.NOT_FOUND;case On.ALREADY_EXISTS:return le.ALREADY_EXISTS;case On.PERMISSION_DENIED:return le.PERMISSION_DENIED;case On.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case On.ABORTED:return le.ABORTED;case On.OUT_OF_RANGE:return le.OUT_OF_RANGE;case On.UNIMPLEMENTED:return le.UNIMPLEMENTED;case On.DATA_LOSS:return le.DATA_LOSS;default:return Ue(39323,{code:t})}}(gt=On||(On={}))[gt.OK=0]="OK",gt[gt.CANCELLED=1]="CANCELLED",gt[gt.UNKNOWN=2]="UNKNOWN",gt[gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt[gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt[gt.NOT_FOUND=5]="NOT_FOUND",gt[gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt[gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt[gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt[gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt[gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt[gt.ABORTED=10]="ABORTED",gt[gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt[gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt[gt.INTERNAL=13]="INTERNAL",gt[gt.UNAVAILABLE=14]="UNAVAILABLE",gt[gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV=new Ba([4294967295,4294967295],0);function fS(t){const e=r2().encode(t),n=new QC;return n.update(e),new Uint8Array(n.digest())}function mS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ba([n,r],0),new Ba([s,o],0)]}class mb{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new zc(`Invalid padding: ${n}`);if(r<0)throw new zc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new zc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new zc(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Ba.fromNumber(this.fe)}pe(e,n,r){let s=e.add(n.multiply(Ba.fromNumber(r)));return s.compare(gV)===1&&(s=new Ba([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=fS(e),[r,s]=mS(n);for(let o=0;o<this.hashCount;o++){const u=this.pe(r,s,o);if(!this.ye(u))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new mb(o,s,n);return r.forEach((d=>u.insert(d))),u}insert(e){if(this.fe===0)return;const n=fS(e),[r,s]=mS(n);for(let o=0;o<this.hashCount;o++){const u=this.pe(r,s,o);this.we(u)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class zc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,$d.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new wp(Fe.min(),s,new cn(tt),qs(),dt())}}class $d{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new $d(r,n,dt(),dt(),dt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=s}}class P2{constructor(e,n){this.targetId=e,this.De=n}}class V2{constructor(e,n,r=dr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class pS{constructor(){this.ve=0,this.Ce=gS(),this.Fe=dr.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=dt(),n=dt(),r=dt();return this.Ce.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ue(38017,{changeType:o})}})),new $d(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=gS()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,It(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class vV{constructor(e){this.We=e,this.Ge=new Map,this.ze=qs(),this.je=Cf(),this.Je=Cf(),this.He=new cn(tt)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,(n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:Ue(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach(((r,s)=>{this.nt(s)&&n(s)}))}it(e){const n=e.targetId,r=e.De.count,s=this.st(n);if(s){const o=s.target;if($y(o))if(r===0){const u=new Oe(o.path);this.Xe(n,u,xr.newNoDocument(u,Fe.min()))}else It(r===1,20013,{expectedCount:r});else{const u=this.ot(n);if(u!==r){const d=this._t(e),h=d?this.ut(d,e,u):1;if(h!==0){this.rt(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,f)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let u,d;try{u=Ka(r).toUint8Array()}catch(h){if(h instanceof l2)return Ha("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{d=new mb(u,s,o)}catch(h){return Ha(h instanceof zc?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return d.fe===0?null:d}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach((o=>{const u=this.We.lt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(d)||(this.Xe(n,o,null),s++)})),s}Pt(e){const n=new Map;this.Ge.forEach(((o,u)=>{const d=this.st(u);if(d){if(o.current&&$y(d.target)){const h=new Oe(d.target.path);this.Tt(h).has(u)||this.It(u,h)||this.Xe(u,h,xr.newNoDocument(h,e))}o.Ne&&(n.set(u,o.Le()),o.ke())}}));let r=dt();this.Je.forEach(((o,u)=>{let d=!0;u.forEachWhile((h=>{const f=this.st(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(o))})),this.ze.forEach(((o,u)=>u.setReadTime(e)));const s=new wp(e,n,this.He,this.ze,r);return this.ze=qs(),this.je=Cf(),this.Je=Cf(),this.He=new cn(tt),s}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new pS,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Un(tt),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Un(tt),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||Ee("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new pS),this.We.getRemoteKeysForTarget(e).forEach((n=>{this.Xe(e,n,null)}))}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Cf(){return new cn(Oe.comparator)}function gS(){return new cn(Oe.comparator)}const yV={asc:"ASCENDING",desc:"DESCENDING"},bV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xV={and:"AND",or:"OR"};class EV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Qy(t,e){return t.useProto3Json||vp(e)?e:{value:e}}function jm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function L2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function _V(t,e){return jm(t,e.toTimestamp())}function os(t){return It(!!t,49232),Fe.fromTimestamp((function(n){const r=$a(n);return new Xt(r.seconds,r.nanos)})(t))}function pb(t,e){return Wy(t,e).canonicalString()}function Wy(t,e){const n=(function(s){return new qt(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function U2(t){const e=qt.fromString(t);return It(H2(e),10190,{key:e.toString()}),e}function Xy(t,e){return pb(t.databaseId,e.path)}function ry(t,e){const n=U2(e);if(n.get(1)!==t.databaseId.projectId)throw new be(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new be(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Oe(z2(n))}function B2(t,e){return pb(t.databaseId,e)}function TV(t){const e=U2(t);return e.length===4?qt.emptyPath():z2(e)}function Jy(t){return new qt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function z2(t){return It(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function vS(t,e,n){return{name:Xy(t,e),fields:n.value.mapValue.fields}}function wV(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ue(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(f,v){return f.useProto3Json?(It(v===void 0||typeof v=="string",58123),dr.fromBase64String(v||"")):(It(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),dr.fromUint8Array(v||new Uint8Array))})(t,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(f){const v=f.code===void 0?le.UNKNOWN:M2(f.code);return new be(v,f.message||"")})(u);n=new V2(r,s,o,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ry(t,r.document.name),o=os(r.document.updateTime),u=r.document.createTime?os(r.document.createTime):Fe.min(),d=new Kr({mapValue:{fields:r.document.fields}}),h=xr.newFoundDocument(s,o,u,d),f=r.targetIds||[],v=r.removedTargetIds||[];n=new om(f,v,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ry(t,r.document),o=r.readTime?os(r.readTime):Fe.min(),u=xr.newNoDocument(s,o),d=r.removedTargetIds||[];n=new om([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ry(t,r.document),o=r.removedTargetIds||[];n=new om([],o,s,null)}else{if(!("filter"in e))return Ue(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,u=new mV(s,o),d=r.targetId;n=new P2(d,u)}}return n}function SV(t,e){let n;if(e instanceof Gd)n={update:vS(t,e.key,e.value)};else if(e instanceof hb)n={delete:Xy(t,e.key)};else if(e instanceof ro)n={update:vS(t,e.key,e.data),updateMask:jV(e.fieldMask)};else{if(!(e instanceof dV))return Ue(16599,{Rt:e.type});n={verify:Xy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(o,u){const d=u.transform;if(d instanceof Om)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Sd)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ad)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Dm)return{fieldPath:u.field.canonicalString(),increment:d.Ee};throw Ue(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:_V(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ue(27497)})(t,e.precondition)),n}function AV(t,e){return t&&t.length>0?(It(e!==void 0,14353),t.map((n=>(function(s,o){let u=s.updateTime?os(s.updateTime):os(o);return u.isEqual(Fe.min())&&(u=os(o)),new lV(u,s.transformResults||[])})(n,e)))):[]}function CV(t,e){return{documents:[B2(t,e.path)]}}function RV(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=B2(t,s);const o=(function(f){if(f.length!==0)return q2(qi.create(f,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const u=(function(f){if(f.length!==0)return f.map((v=>(function(x){return{field:Yl(x.field),direction:kV(x.dir)}})(v)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const d=Qy(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{Vt:n,parent:s}}function IV(t){let e=TV(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){It(r===1,65062);const v=n.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let o=[];n.where&&(o=(function(b){const x=F2(b);return x instanceof qi&&y2(x)?x.getFilters():[x]})(n.where));let u=[];n.orderBy&&(u=(function(b){return b.map((x=>(function(A){return new km(Ql(A.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(x)))})(n.orderBy));let d=null;n.limit&&(d=(function(b){let x;return x=typeof b=="object"?b.value:b,vp(x)?null:x})(n.limit));let h=null;n.startAt&&(h=(function(b){const x=!!b.before,_=b.values||[];return new Nm(_,x)})(n.startAt));let f=null;return n.endAt&&(f=(function(b){const x=!b.before,_=b.values||[];return new Nm(_,x)})(n.endAt)),QP(e,s,u,o,d,"F",h,f)}function NV(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ue(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function F2(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ql(n.unaryFilter.field);return Dn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ql(n.unaryFilter.field);return Dn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ql(n.unaryFilter.field);return Dn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Ql(n.unaryFilter.field);return Dn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ue(61313);default:return Ue(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Dn.create(Ql(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ue(58110);default:return Ue(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return qi.create(n.compositeFilter.filters.map((r=>F2(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ue(1026)}})(n.compositeFilter.op))})(t):Ue(30097,{filter:t})}function kV(t){return yV[t]}function OV(t){return bV[t]}function DV(t){return xV[t]}function Yl(t){return{fieldPath:t.canonicalString()}}function Ql(t){return cr.fromServerFormat(t.fieldPath)}function q2(t){return t instanceof Dn?(function(n){if(n.op==="=="){if(iS(n.value))return{unaryFilter:{field:Yl(n.field),op:"IS_NAN"}};if(rS(n.value))return{unaryFilter:{field:Yl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(iS(n.value))return{unaryFilter:{field:Yl(n.field),op:"IS_NOT_NAN"}};if(rS(n.value))return{unaryFilter:{field:Yl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yl(n.field),op:OV(n.op),value:n.value}}})(t):t instanceof qi?(function(n){const r=n.getFilters().map((s=>q2(s)));return r.length===1?r[0]:{compositeFilter:{op:DV(n.op),filters:r}}})(t):Ue(54877,{filter:t})}function jV(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function H2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,n,r,s,o=Fe.min(),u=Fe.min(),d=dr.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=h}withSequenceNumber(e){return new Pa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Pa(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e){this.gt=e}}function PV(t){const e=IV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Yy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(){this.Dn=new LV}addToCollectionParentIndex(e,n){return this.Dn.add(n),ue.resolve()}getCollectionParents(e,n){return ue.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return ue.resolve()}deleteFieldIndex(e,n){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,n){return ue.resolve()}getDocumentsMatchingTarget(e,n){return ue.resolve(null)}getIndexType(e,n){return ue.resolve(0)}getFieldIndexes(e,n){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,n){return ue.resolve(Ga.min())}getMinOffsetFromCollectionGroup(e,n){return ue.resolve(Ga.min())}updateCollectionGroup(e,n,r){return ue.resolve()}updateIndexEntries(e,n){return ue.resolve()}}class LV{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Un(qt.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Un(qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},G2=41943040;class $r{static withCacheSize(e){return new $r(e,$r.DEFAULT_COLLECTION_PERCENTILE,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$r.DEFAULT_COLLECTION_PERCENTILE=10,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$r.DEFAULT=new $r(G2,$r.DEFAULT_COLLECTION_PERCENTILE,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$r.DISABLED=new $r(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new pu(0)}static ur(){return new pu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS="LruGarbageCollector",UV=1048576;function xS([t,e],[n,r]){const s=tt(t,n);return s===0?tt(e,r):s}class BV{constructor(e){this.Tr=e,this.buffer=new Un(xS),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();xS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class zV{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Ee(bS,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ru(n)?Ee(bS,"Ignoring IndexedDB error during garbage collection: ",n):await Cu(n)}await this.Rr(3e5)}))}}class FV{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return ue.resolve(gp.ue);const r=new BV(n);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.gr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(yS)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yS):this.pr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,s,o,u,d,h,f;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),s=this.params.maximumSequenceNumbersToCollect):s=b,u=Date.now(),this.nthSequenceNumber(e,s)))).next((b=>(r=b,d=Date.now(),this.removeTargets(e,r,n)))).next((b=>(o=b,h=Date.now(),this.removeOrphanedDocuments(e,r)))).next((b=>(f=Date.now(),$l()<=ct.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${s} in `+(d-u)+`ms
	Removed ${o} targets in `+(h-d)+`ms
	Removed ${b} documents in `+(f-h)+`ms
Total Duration: ${f-v}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:b}))))}}function qV(t,e){return new FV(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(){this.changes=new tl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ue.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&td(r.mutation,s,oi.empty(),Xt.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,dt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=dt()){const s=Lo();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((o=>{let u=Bc();return o.forEach(((d,h)=>{u=u.insert(d,h.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const r=Lo();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,dt())))}populateOverlays(e,n,r){const s=[];return r.forEach((o=>{n.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((u,d)=>{n.set(u,d)}))}))}computeViews(e,n,r,s){let o=qs();const u=ed(),d=(function(){return ed()})();return n.forEach(((h,f)=>{const v=r.get(f.key);s.has(f.key)&&(v===void 0||v.mutation instanceof ro)?o=o.insert(f.key,f):v!==void 0?(u.set(f.key,v.mutation.getFieldMask()),td(v.mutation,f,v.mutation.getFieldMask(),Xt.now())):u.set(f.key,oi.empty())})),this.recalculateAndSaveOverlays(e,o).next((h=>(h.forEach(((f,v)=>u.set(f,v))),n.forEach(((f,v)=>{var b;return d.set(f,new GV(v,(b=u.get(f))!==null&&b!==void 0?b:null))})),d)))}recalculateAndSaveOverlays(e,n){const r=ed();let s=new cn(((u,d)=>u-d)),o=dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const d of u)d.keys().forEach((h=>{const f=n.get(h);if(f===null)return;let v=r.get(h)||oi.empty();v=d.applyToLocalView(f,v),r.set(h,v);const b=(s.get(d.batchId)||dt()).add(h);s=s.insert(d.batchId,b)}))})).next((()=>{const u=[],d=s.getReverseIterator();for(;d.hasNext();){const h=d.getNext(),f=h.key,v=h.value,b=C2();v.forEach((x=>{if(!o.has(x)){const _=D2(n.get(x),r.get(x));_!==null&&b.set(x,_),o=o.add(x)}})),u.push(this.documentOverlayCache.saveOverlays(e,f,b))}return ue.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(u){return Oe.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((o=>{const u=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):ue.resolve(Lo());let d=Ed,h=o;return u.next((f=>ue.forEach(f,((v,b)=>(d<b.largestBatchId&&(d=b.largestBatchId),o.get(v)?ue.resolve():this.remoteDocumentCache.getEntry(e,v).next((x=>{h=h.insert(v,x)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,h,f,dt()))).next((v=>({batchId:d,changes:A2(v)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Oe(n)).next((r=>{let s=Bc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let u=Bc();return this.indexManager.getCollectionParents(e,o).next((d=>ue.forEach(d,(h=>{const f=(function(b,x){return new Hd(x,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(n,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,s).next((v=>{v.forEach(((b,x)=>{u=u.insert(b,x)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s)))).next((u=>{o.forEach(((h,f)=>{const v=f.getKey();u.get(v)===null&&(u=u.insert(v,xr.newInvalidDocument(v)))}));let d=Bc();return u.forEach(((h,f)=>{const v=o.get(h);v!==void 0&&td(v.mutation,f,oi.empty(),Xt.now()),Ep(n,f)&&(d=d.insert(h,f))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return ue.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:os(s.createTime)}})(n)),ue.resolve()}getNamedQuery(e,n){return ue.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(s){return{name:s.name,query:PV(s.bundledQuery),readTime:os(s.readTime)}})(n)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(){this.overlays=new cn(Oe.comparator),this.kr=new Map}getOverlay(e,n){return ue.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Lo();return ue.forEach(n,(s=>this.getOverlay(e,s).next((o=>{o!==null&&r.set(s,o)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,o)=>{this.wt(e,n,o)})),ue.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.kr.delete(r)),ue.resolve()}getOverlaysForCollection(e,n,r){const s=Lo(),o=n.length+1,u=new Oe(n.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const h=d.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>r&&s.set(h.getKey(),h)}return ue.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new cn(((f,v)=>f-v));const u=this.overlays.getIterator();for(;u.hasNext();){const f=u.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let v=o.get(f.largestBatchId);v===null&&(v=Lo(),o=o.insert(f.largestBatchId,v)),v.set(f.getKey(),f)}}const d=Lo(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((f,v)=>d.set(f,v))),!(d.size()>=s)););return ue.resolve(d)}wt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new fV(n,r));let o=this.kr.get(n);o===void 0&&(o=dt(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(){this.sessionToken=dr.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(){this.qr=new Un(Xn.Qr),this.$r=new Un(Xn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Xn(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new Xn(e,n))}Gr(e,n){e.forEach((r=>this.removeReference(r,n)))}zr(e){const n=new Oe(new qt([])),r=new Xn(n,e),s=new Xn(n,e+1),o=[];return this.$r.forEachInRange([r,s],(u=>{this.Wr(u),o.push(u.key)})),o}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Oe(new qt([])),r=new Xn(n,e),s=new Xn(n,e+1);let o=dt();return this.$r.forEachInRange([r,s],(u=>{o=o.add(u.key)})),o}containsKey(e){const n=new Xn(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Xn{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Oe.comparator(e.key,n.key)||tt(e.Hr,n.Hr)}static Ur(e,n){return tt(e.Hr,n.Hr)||Oe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Un(Xn.Qr)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new hV(o,n,r,s);this.mutationQueue.push(u);for(const d of s)this.Yr=this.Yr.add(new Xn(d.key,o)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ue.resolve(u)}lookupMutationBatch(e,n){return ue.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),o=s<0?0:s;return ue.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?ab:this.er-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Xn(n,0),s=new Xn(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,s],(u=>{const d=this.Zr(u.Hr);o.push(d)})),ue.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Un(tt);return n.forEach((s=>{const o=new Xn(s,0),u=new Xn(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,u],(d=>{r=r.add(d.Hr)}))})),ue.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;Oe.isDocumentKey(o)||(o=o.child(""));const u=new Xn(new Oe(o),0);let d=new Un(tt);return this.Yr.forEachWhile((h=>{const f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(d=d.add(h.Hr)),!0)}),u),ue.resolve(this.ei(d))}ei(e){const n=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){It(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return ue.forEach(n.mutations,(s=>{const o=new Xn(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Yr=r}))}rr(e){}containsKey(e,n){const r=new Xn(n,0),s=this.Yr.firstAfterOrEqual(r);return ue.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e){this.ni=e,this.docs=(function(){return new cn(Oe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,u=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ue.resolve(r?r.document.mutableCopy():xr.newInvalidDocument(n))}getEntries(e,n){let r=qs();return n.forEach((s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():xr.newInvalidDocument(s))})),ue.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=qs();const u=n.path,d=new Oe(u.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(d);for(;h.hasNext();){const{key:f,value:{document:v}}=h.getNext();if(!u.isPrefixOf(f.path))break;f.path.length>u.length+1||CP(AP(v),r)<=0||(s.has(v.key)||Ep(n,v))&&(o=o.insert(v.key,v.mutableCopy()))}return ue.resolve(o)}getAllFromCollectionGroup(e,n,r,s){Ue(9500)}ri(e,n){return ue.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new JV(this)}getSize(e){return ue.resolve(this.size)}}class JV extends HV{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)})),ue.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e){this.persistence=e,this.ii=new tl((n=>ub(n)),cb),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.si=0,this.oi=new gb,this.targetCount=0,this._i=pu.ar()}forEachTarget(e,n){return this.ii.forEach(((r,s)=>n(s))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),ue.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new pu(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,ue.resolve()}updateTargetData(e,n){return this.hr(n),ue.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.ii.forEach(((u,d)=>{d.sequenceNumber<=n&&r.get(d.targetId)===null&&(this.ii.delete(u),o.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),ue.waitFor(o).next((()=>s))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return ue.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),ue.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach((u=>{o.push(s.markPotentiallyOrphaned(e,u))})),ue.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),ue.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return ue.resolve(r)}containsKey(e,n){return ue.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,n){this.ai={},this.overlays={},this.ui=new gp(0),this.ci=!1,this.ci=!0,this.li=new QV,this.referenceDelegate=e(this),this.hi=new ZV(this),this.indexManager=new VV,this.remoteDocumentCache=(function(s){return new XV(s)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new MV(n),this.Ti=new KV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new YV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new WV(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){Ee("MemoryPersistence","Starting transaction:",e);const s=new eL(this.ui.next());return this.referenceDelegate.Ii(),r(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ei(e,n){return ue.or(Object.values(this.ai).map((r=>()=>r.containsKey(e,n))))}}class eL extends IP{constructor(e){super(),this.currentSequenceNumber=e}}class vb{constructor(e){this.persistence=e,this.Ai=new gb,this.Ri=null}static Vi(e){return new vb(e)}get mi(){if(this.Ri)return this.Ri;throw Ue(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),ue.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),ue.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach((s=>this.mi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((o=>this.mi.add(o.toString())))})).next((()=>r.removeTargetData(e,n)))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.mi,(r=>{const s=Oe.fromPath(r);return this.fi(e,s).next((o=>{o||n.removeEntry(s,Fe.min())}))})).next((()=>(this.Ri=null,n.apply(e))))}updateLimboDocument(e,n){return this.fi(e,n).next((r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(e){return 0}fi(e,n){return ue.or([()=>ue.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Mm{constructor(e,n){this.persistence=e,this.gi=new tl((r=>OP(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=qV(this,n)}static Vi(e,n){return new Mm(e,n)}Ii(){}di(e){return ue.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}yr(e){let n=0;return this.gr(e,(r=>{n++})).next((()=>n))}gr(e,n){return ue.forEach(this.gi,((r,s)=>this.Sr(e,r,s).next((o=>o?ue.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ri(e,(u=>this.Sr(e,u,n).next((d=>{d||(r++,o.removeEntry(u,Fe.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),ue.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),ue.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),ue.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=im(e.data.value)),n}Sr(e,n,r){return ue.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return ue.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=s}static Es(e,n){let r=dt(),s=dt();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new yb(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return jD()?8:NP(_r())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.ps(e,n).next((u=>{o.result=u})).next((()=>{if(!o.result)return this.ys(e,n,s,r).next((u=>{o.result=u}))})).next((()=>{if(o.result)return;const u=new tL;return this.ws(e,n,u).next((d=>{if(o.result=d,this.Rs)return this.Ss(e,n,u,d.size)}))})).next((()=>o.result))}Ss(e,n,r,s){return r.documentReadCount<this.Vs?($l()<=ct.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",Kl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ue.resolve()):($l()<=ct.DEBUG&&Ee("QueryEngine","Query:",Kl(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?($l()<=ct.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",Kl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,as(n))):ue.resolve())}ps(e,n){if(lS(n))return ue.resolve(null);let r=as(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Yy(n,null,"F"),r=as(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const u=dt(...o);return this.gs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,r).next((h=>{const f=this.bs(n,d);return this.Ds(n,f,u,h.readTime)?this.ps(e,Yy(n,null,"F")):this.vs(e,f,n,h)}))))})))))}ys(e,n,r,s){return lS(n)||s.isEqual(Fe.min())?ue.resolve(null):this.gs.getDocuments(e,r).next((o=>{const u=this.bs(n,o);return this.Ds(n,u,r,s)?ue.resolve(null):($l()<=ct.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Kl(n)),this.vs(e,u,n,SP(s,Ed)).next((d=>d)))}))}bs(e,n){let r=new Un(w2(e));return n.forEach(((s,o)=>{Ep(e,o)&&(r=r.add(o))})),r}Ds(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}ws(e,n,r){return $l()<=ct.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",Kl(n)),this.gs.getDocumentsMatchingQuery(e,n,Ga.min(),r)}vs(e,n,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next((o=>(n.forEach((u=>{o=o.insert(u.key,u)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb="LocalStore",rL=3e8;class iL{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new cn(tt),this.Ms=new tl((o=>ub(o)),cb),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $V(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Fs)))}}function sL(t,e,n,r){return new iL(t,e,n,r)}async function K2(t,e){const n=Ge(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((o=>(s=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r)))).next((o=>{const u=[],d=[];let h=dt();for(const f of s){u.push(f.batchId);for(const v of f.mutations)h=h.add(v.key)}for(const f of o){d.push(f.batchId);for(const v of f.mutations)h=h.add(v.key)}return n.localDocuments.getDocuments(r,h).next((f=>({Bs:f,removedBatchIds:u,addedBatchIds:d})))}))}))}function aL(t,e){const n=Ge(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(d,h,f,v){const b=f.batch,x=b.keys();let _=ue.resolve();return x.forEach((A=>{_=_.next((()=>v.getEntry(h,A))).next((R=>{const M=f.docVersions.get(A);It(M!==null,48541),R.version.compareTo(M)<0&&(b.applyToRemoteDocument(R,f),R.isValidDocument()&&(R.setReadTime(f.commitVersion),v.addEntry(R)))}))})),_.next((()=>d.mutationQueue.removeMutationBatch(h,b)))})(n,r,e,o).next((()=>o.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let h=dt();for(let f=0;f<d.mutationResults.length;++f)d.mutationResults[f].transformResults.length>0&&(h=h.add(d.batch.mutations[f].key));return h})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function Y2(t){const e=Ge(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.hi.getLastRemoteSnapshotVersion(n)))}function oL(t,e){const n=Ge(t),r=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const u=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const d=[];e.targetChanges.forEach(((v,b)=>{const x=s.get(b);if(!x)return;d.push(n.hi.removeMatchingKeys(o,v.removedDocuments,b).next((()=>n.hi.addMatchingKeys(o,v.addedDocuments,b))));let _=x.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(b)!==null?_=_.withResumeToken(dr.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):v.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(v.resumeToken,r)),s=s.insert(b,_),(function(R,M,U){return R.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=rL?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(x,_,v)&&d.push(n.hi.updateTargetData(o,_))}));let h=qs(),f=dt();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(o,v))})),d.push(lL(o,u,e.documentUpdates).next((v=>{h=v.Ls,f=v.ks}))),!r.isEqual(Fe.min())){const v=n.hi.getLastRemoteSnapshotVersion(o).next((b=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r)));d.push(v)}return ue.waitFor(d).next((()=>u.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,h,f))).next((()=>h))})).then((o=>(n.Fs=s,o)))}function lL(t,e,n){let r=dt(),s=dt();return n.forEach((o=>r=r.add(o))),e.getEntries(t,r).next((o=>{let u=qs();return n.forEach(((d,h)=>{const f=o.get(d);h.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(d)),h.isNoDocument()&&h.version.isEqual(Fe.min())?(e.removeEntry(d,h.readTime),u=u.insert(d,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),u=u.insert(d,h)):Ee(bb,"Ignoring outdated watch update for ",d,". Current version:",f.version," Watch version:",h.version)})),{Ls:u,ks:s}}))}function uL(t,e){const n=Ge(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=ab),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function cL(t,e){const n=Ge(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.hi.getTargetData(r,e).next((o=>o?(s=o,ue.resolve(s)):n.hi.allocateTargetId(r).next((u=>(s=new Pa(e,u,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r}))}async function Zy(t,e,n){const r=Ge(t),s=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(u=>r.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!Ru(u))throw u;Ee(bb,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function ES(t,e,n){const r=Ge(t);let s=Fe.min(),o=dt();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(h,f,v){const b=Ge(h),x=b.Ms.get(v);return x!==void 0?ue.resolve(b.Fs.get(x)):b.hi.getTargetData(f,v)})(r,u,as(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(u,d.targetId).next((h=>{o=h}))})).next((()=>r.Cs.getDocumentsMatchingQuery(u,e,n?s:Fe.min(),n?o:dt()))).next((d=>(dL(r,XP(e),d),{documents:d,qs:o})))))}function dL(t,e,n){let r=t.xs.get(e)||Fe.min();n.forEach(((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),t.xs.set(e,r)}class _S{constructor(){this.activeTargetIds=rV()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hL{constructor(){this.Fo=new _S,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new _S,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS="ConnectivityMonitor";class wS{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Ee(TS,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Ee(TS,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rf=null;function e0(){return Rf===null?Rf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Rf++,"0x"+Rf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy="RestConnection",mL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pL{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Rm?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,o){const u=e0(),d=this.Go(e,n.toUriEncodedString());Ee(iy,`Sending RPC '${e}' ${u}:`,d,r);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(h,s,o);const{host:f}=new URL(d),v=Gs(f);return this.jo(e,d,h,r,v).then((b=>(Ee(iy,`Received RPC '${e}' ${u}: `,b),b)),(b=>{throw Ha(iy,`RPC '${e}' ${u} failed with error: `,b,"url: ",d,"request:",r),b}))}Jo(e,n,r,s,o,u){return this.Wo(e,n,r,s,o)}zo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Au})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,o)=>e[o]=s)),r&&r.headers.forEach(((s,o)=>e[o]=s))}Go(e,n){const r=mL[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr="WebChannelConnection";class vL extends pL{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,s,o){const u=e0();return new Promise(((d,h)=>{const f=new WC;f.setWithCredentials(!0),f.listenOnce(XC.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case rm.NO_ERROR:const b=f.getResponseJson();Ee(pr,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(b)),d(b);break;case rm.TIMEOUT:Ee(pr,`RPC '${e}' ${u} timed out`),h(new be(le.DEADLINE_EXCEEDED,"Request time out"));break;case rm.HTTP_ERROR:const x=f.getStatus();if(Ee(pr,`RPC '${e}' ${u} failed with status:`,x,"response text:",f.getResponseText()),x>0){let _=f.getResponseJson();Array.isArray(_)&&(_=_[0]);const A=_==null?void 0:_.error;if(A&&A.status&&A.message){const R=(function(U){const O=U.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(O)>=0?O:le.UNKNOWN})(A.status);h(new be(R,A.message))}else h(new be(le.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new be(le.UNAVAILABLE,"Connection failed."));break;default:Ue(9055,{c_:e,streamId:u,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{Ee(pr,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(s);Ee(pr,`RPC '${e}' ${u} sending request:`,s),f.send(n,"POST",v,r,15)}))}P_(e,n,r){const s=e0(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=e2(),d=ZC(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.zo(h.initMessageHeaders,n,r),h.encodeInitMessageHeaders=!0;const v=o.join("");Ee(pr,`Creating RPC '${e}' stream ${s}: ${v}`,h);const b=u.createWebChannel(v,h);this.T_(b);let x=!1,_=!1;const A=new gL({Ho:M=>{_?Ee(pr,`Not sending because RPC '${e}' stream ${s} is closed:`,M):(x||(Ee(pr,`Opening RPC '${e}' stream ${s} transport.`),b.open(),x=!0),Ee(pr,`RPC '${e}' stream ${s} sending:`,M),b.send(M))},Yo:()=>b.close()}),R=(M,U,O)=>{M.listen(U,(B=>{try{O(B)}catch(H){setTimeout((()=>{throw H}),0)}}))};return R(b,Uc.EventType.OPEN,(()=>{_||(Ee(pr,`RPC '${e}' stream ${s} transport opened.`),A.s_())})),R(b,Uc.EventType.CLOSE,(()=>{_||(_=!0,Ee(pr,`RPC '${e}' stream ${s} transport closed`),A.__(),this.I_(b))})),R(b,Uc.EventType.ERROR,(M=>{_||(_=!0,Ha(pr,`RPC '${e}' stream ${s} transport errored. Name:`,M.name,"Message:",M.message),A.__(new be(le.UNAVAILABLE,"The operation could not be completed")))})),R(b,Uc.EventType.MESSAGE,(M=>{var U;if(!_){const O=M.data[0];It(!!O,16349);const B=O,H=(B==null?void 0:B.error)||((U=B[0])===null||U===void 0?void 0:U.error);if(H){Ee(pr,`RPC '${e}' stream ${s} received error:`,H);const G=H.status;let q=(function(N){const P=On[N];if(P!==void 0)return M2(P)})(G),C=H.message;q===void 0&&(q=le.INTERNAL,C="Unknown error status: "+G+" with message "+H.message),_=!0,A.__(new be(q,C)),b.close()}else Ee(pr,`RPC '${e}' stream ${s} received:`,O),A.a_(O)}})),R(d,JC.STAT_EVENT,(M=>{M.stat===zy.PROXY?Ee(pr,`RPC '${e}' stream ${s} detected buffering proxy`):M.stat===zy.NOPROXY&&Ee(pr,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{A.o_()}),0),A}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((n=>n===e))}}function sy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(t){return new EV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e,n,r=1e3,s=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=s,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&Ee("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="PersistentStream";class W2{constructor(e,n,r,s,o,u,d,h){this.Fi=e,this.w_=r,this.S_=s,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=h,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Q2(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===le.RESOURCE_EXHAUSTED?(Fs(n.toString()),Fs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.b_===n&&this.W_(r,s)}),(r=>{e((()=>{const s=new be(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)}))}))}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((s=>{r((()=>this.G_(s)))})),this.stream.onMessage((s=>{r((()=>++this.C_==1?this.j_(s):this.onNext(s)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return Ee(SS,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget((()=>this.b_===e?n():(Ee(SS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class yL extends W2{constructor(e,n,r,s,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,u),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=wV(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Fe.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Fe.min():u.readTime?os(u.readTime):Fe.min()})(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=Jy(this.serializer),n.addTarget=(function(o,u){let d;const h=u.target;if(d=$y(h)?{documents:CV(o,h)}:{query:RV(o,h).Vt},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=L2(o,u.resumeToken);const f=Qy(o,u.expectedCount);f!==null&&(d.expectedCount=f)}else if(u.snapshotVersion.compareTo(Fe.min())>0){d.readTime=jm(o,u.snapshotVersion.toTimestamp());const f=Qy(o,u.expectedCount);f!==null&&(d.expectedCount=f)}return d})(this.serializer,e);const r=NV(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=Jy(this.serializer),n.removeTarget=e,this.k_(n)}}class bL extends W2{constructor(e,n,r,s,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,u),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return It(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,It(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){It(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=AV(e.writeResults,e.commitTime),r=os(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=Jy(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>SV(this.serializer,r)))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{}class EL extends xL{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new be(le.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,u])=>this.connection.Wo(e,Wy(n,r),s,o,u))).catch((o=>{throw o.name==="FirebaseError"?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new be(le.UNKNOWN,o.toString())}))}Jo(e,n,r,s,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Jo(e,Wy(n,r),s,u,d,o))).catch((u=>{throw u.name==="FirebaseError"?(u.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new be(le.UNKNOWN,u.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class _L{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Fs(n),this._a=!1):Ee("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo="RemoteStore";class TL{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo((u=>{r.enqueueAndForget((async()=>{nl(this)&&(Ee(Wo,"Restarting streams for network reachability change."),await(async function(h){const f=Ge(h);f.Ia.add(4),await Kd(f),f.Aa.set("Unknown"),f.Ia.delete(4),await Ap(f)})(this))}))})),this.Aa=new _L(r,s)}}async function Ap(t){if(nl(t))for(const e of t.da)await e(!0)}async function Kd(t){for(const e of t.da)await e(!1)}function X2(t,e){const n=Ge(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Tb(n)?_b(n):Iu(n).x_()&&Eb(n,e))}function xb(t,e){const n=Ge(t),r=Iu(n);n.Ta.delete(e),r.x_()&&J2(n,e),n.Ta.size===0&&(r.x_()?r.B_():nl(n)&&n.Aa.set("Unknown"))}function Eb(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Iu(t).H_(e)}function J2(t,e){t.Ra.$e(e),Iu(t).Y_(e)}function _b(t){t.Ra=new vV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Iu(t).start(),t.Aa.aa()}function Tb(t){return nl(t)&&!Iu(t).M_()&&t.Ta.size>0}function nl(t){return Ge(t).Ia.size===0}function Z2(t){t.Ra=void 0}async function wL(t){t.Aa.set("Online")}async function SL(t){t.Ta.forEach(((e,n)=>{Eb(t,e)}))}async function AL(t,e){Z2(t),Tb(t)?(t.Aa.la(e),_b(t)):t.Aa.set("Unknown")}async function CL(t,e,n){if(t.Aa.set("Online"),e instanceof V2&&e.state===2&&e.cause)try{await(async function(s,o){const u=o.cause;for(const d of o.targetIds)s.Ta.has(d)&&(await s.remoteSyncer.rejectListen(d,u),s.Ta.delete(d),s.Ra.removeTarget(d))})(t,e)}catch(r){Ee(Wo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Pm(t,r)}else if(e instanceof om?t.Ra.Ye(e):e instanceof P2?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Fe.min()))try{const r=await Y2(t.localStore);n.compareTo(r)>=0&&await(function(o,u){const d=o.Ra.Pt(u);return d.targetChanges.forEach(((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const v=o.Ta.get(f);v&&o.Ta.set(f,v.withResumeToken(h.resumeToken,u))}})),d.targetMismatches.forEach(((h,f)=>{const v=o.Ta.get(h);if(!v)return;o.Ta.set(h,v.withResumeToken(dr.EMPTY_BYTE_STRING,v.snapshotVersion)),J2(o,h);const b=new Pa(v.target,h,f,v.sequenceNumber);Eb(o,b)})),o.remoteSyncer.applyRemoteEvent(d)})(t,n)}catch(r){Ee(Wo,"Failed to raise snapshot:",r),await Pm(t,r)}}async function Pm(t,e,n){if(!Ru(e))throw e;t.Ia.add(1),await Kd(t),t.Aa.set("Offline"),n||(n=()=>Y2(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Ee(Wo,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Ap(t)}))}function eR(t,e){return e().catch((n=>Pm(t,n,e)))}async function Cp(t){const e=Ge(t),n=Qa(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:ab;for(;RL(e);)try{const s=await uL(e.localStore,r);if(s===null){e.Pa.length===0&&n.B_();break}r=s.batchId,IL(e,s)}catch(s){await Pm(e,s)}tR(e)&&nR(e)}function RL(t){return nl(t)&&t.Pa.length<10}function IL(t,e){t.Pa.push(e);const n=Qa(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function tR(t){return nl(t)&&!Qa(t).M_()&&t.Pa.length>0}function nR(t){Qa(t).start()}async function NL(t){Qa(t).na()}async function kL(t){const e=Qa(t);for(const n of t.Pa)e.X_(n.mutations)}async function OL(t,e,n){const r=t.Pa.shift(),s=fb.from(r,e,n);await eR(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await Cp(t)}async function DL(t,e){e&&Qa(t).Z_&&await(async function(r,s){if((function(u){return pV(u)&&u!==le.ABORTED})(s.code)){const o=r.Pa.shift();Qa(r).N_(),await eR(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s))),await Cp(r)}})(t,e),tR(t)&&nR(t)}async function AS(t,e){const n=Ge(t);n.asyncQueue.verifyOperationInProgress(),Ee(Wo,"RemoteStore received new credentials");const r=nl(n);n.Ia.add(3),await Kd(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Ap(n)}async function jL(t,e){const n=Ge(t);e?(n.Ia.delete(2),await Ap(n)):e||(n.Ia.add(2),await Kd(n),n.Aa.set("Unknown"))}function Iu(t){return t.Va||(t.Va=(function(n,r,s){const o=Ge(n);return o.ia(),new yL(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(t.datastore,t.asyncQueue,{Zo:wL.bind(null,t),e_:SL.bind(null,t),n_:AL.bind(null,t),J_:CL.bind(null,t)}),t.da.push((async e=>{e?(t.Va.N_(),Tb(t)?_b(t):t.Aa.set("Unknown")):(await t.Va.stop(),Z2(t))}))),t.Va}function Qa(t){return t.ma||(t.ma=(function(n,r,s){const o=Ge(n);return o.ia(),new bL(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:NL.bind(null,t),n_:DL.bind(null,t),ea:kL.bind(null,t),ta:OL.bind(null,t)}),t.da.push((async e=>{e?(t.ma.N_(),await Cp(t)):(await t.ma.stop(),t.Pa.length>0&&(Ee(Wo,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new za,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const u=Date.now()+r,d=new wb(e,n,u,s,o);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sb(t,e){if(Fs("AsyncQueue",`${e}: ${t}`),Ru(t))return new be(le.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{static emptySet(e){return new au(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Oe.comparator(n.key,r.key):(n,r)=>Oe.comparator(n.key,r.key),this.keyedMap=Bc(),this.sortedSet=new cn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof au)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new au;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(){this.fa=new cn(Oe.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Ue(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal(((n,r)=>{e.push(r)})),e}}class gu{constructor(e,n,r,s,o,u,d,h,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,s,o){const u=[];return n.forEach((d=>{u.push({type:0,doc:d})})),new gu(e,n,au.emptySet(n),u,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class PL{constructor(){this.queries=RS(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=Ge(n),o=s.queries;s.queries=RS(),o.forEach(((u,d)=>{for(const h of d.wa)h.onError(r)}))})(this,new be(le.ABORTED,"Firestore shutting down"))}}function RS(){return new tl((t=>T2(t)),xp)}async function rR(t,e){const n=Ge(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.Sa()&&e.ba()&&(r=2):(o=new ML,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await n.onListen(s,!0);break;case 1:o.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(u){const d=Sb(u,`Initialization of query '${Kl(e.query)}' failed`);return void e.onError(d)}n.queries.set(s,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&Ab(n)}async function iR(t,e){const n=Ge(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const u=o.wa.indexOf(e);u>=0&&(o.wa.splice(u,1),o.wa.length===0?s=e.ba()?0:1:!o.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function VL(t,e){const n=Ge(t);let r=!1;for(const s of e){const o=s.query,u=n.queries.get(o);if(u){for(const d of u.wa)d.Ca(s)&&(r=!0);u.ya=s}}r&&Ab(n)}function LL(t,e,n){const r=Ge(t),s=r.queries.get(e);if(s)for(const o of s.wa)o.onError(n);r.queries.delete(e)}function Ab(t){t.Da.forEach((e=>{e.next()}))}var t0,IS;(IS=t0||(t0={})).Fa="default",IS.Cache="cache";class sR{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new gu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=gu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==t0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e){this.key=e}}class oR{constructor(e){this.key=e}}class UL{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=dt(),this.mutatedKeys=dt(),this.Xa=w2(e),this.eu=new au(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new CS,s=n?n.eu:this.eu;let o=n?n.mutatedKeys:this.mutatedKeys,u=s,d=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((v,b)=>{const x=s.get(v),_=Ep(this.query,b)?b:null,A=!!x&&this.mutatedKeys.has(x.key),R=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let M=!1;x&&_?x.data.isEqual(_.data)?A!==R&&(r.track({type:3,doc:_}),M=!0):this.iu(x,_)||(r.track({type:2,doc:_}),M=!0,(h&&this.Xa(_,h)>0||f&&this.Xa(_,f)<0)&&(d=!0)):!x&&_?(r.track({type:0,doc:_}),M=!0):x&&!_&&(r.track({type:1,doc:x}),M=!0,(h||f)&&(d=!0)),M&&(_?(u=u.add(_),o=R?o.add(v):o.delete(v)):(u=u.delete(v),o=o.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),o=o.delete(v.key),r.track({type:1,doc:v})}return{eu:u,ru:r,Ds:d,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort(((v,b)=>(function(_,A){const R=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue(20277,{At:M})}};return R(_)-R(A)})(v.type,b.type)||this.Xa(v.doc,b.doc))),this.su(r),s=s!=null&&s;const d=n&&!s?this.ou():[],h=this.Za.size===0&&this.current&&!s?1:0,f=h!==this.Ya;return this.Ya=h,u.length!==0||f?{snapshot:new gu(this.query,e.eu,o,u,e.mutatedKeys,h===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new CS,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=dt(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const n=[];return e.forEach((r=>{this.Za.has(r)||n.push(new oR(r))})),this.Za.forEach((r=>{e.has(r)||n.push(new aR(r))})),n}uu(e){this.Ha=e.qs,this.Za=dt();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return gu.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Cb="SyncEngine";class BL{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class zL{constructor(e){this.key=e,this.lu=!1}}class FL{constructor(e,n,r,s,o,u){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new tl((d=>T2(d)),xp),this.Tu=new Map,this.Iu=new Set,this.du=new cn(Oe.comparator),this.Eu=new Map,this.Au=new gb,this.Ru={},this.Vu=new Map,this.mu=pu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function qL(t,e,n=!0){const r=fR(t);let s;const o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.cu()):s=await lR(r,e,n,!0),s}async function HL(t,e){const n=fR(t);await lR(n,e,!0,!1)}async function lR(t,e,n,r){const s=await cL(t.localStore,as(e)),o=s.targetId,u=t.sharedClientState.addLocalQueryTarget(o,n);let d;return r&&(d=await GL(t,e,o,u==="current",s.resumeToken)),t.isPrimaryClient&&n&&X2(t.remoteStore,s),d}async function GL(t,e,n,r,s){t.gu=(b,x,_)=>(async function(R,M,U,O){let B=M.view.nu(U);B.Ds&&(B=await ES(R.localStore,M.query,!1).then((({documents:C})=>M.view.nu(C,B))));const H=O&&O.targetChanges.get(M.targetId),G=O&&O.targetMismatches.get(M.targetId)!=null,q=M.view.applyChanges(B,R.isPrimaryClient,H,G);return kS(R,M.targetId,q._u),q.snapshot})(t,b,x,_);const o=await ES(t.localStore,e,!0),u=new UL(e,o.qs),d=u.nu(o.documents),h=$d.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),f=u.applyChanges(d,t.isPrimaryClient,h);kS(t,n,f._u);const v=new BL(e,n,u);return t.Pu.set(e,v),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),f.snapshot}async function $L(t,e,n){const r=Ge(t),s=r.Pu.get(e),o=r.Tu.get(s.targetId);if(o.length>1)return r.Tu.set(s.targetId,o.filter((u=>!xp(u,e)))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Zy(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&xb(r.remoteStore,s.targetId),n0(r,s.targetId)})).catch(Cu)):(n0(r,s.targetId),await Zy(r.localStore,s.targetId,!0))}async function KL(t,e){const n=Ge(t),r=n.Pu.get(e),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),xb(n.remoteStore,r.targetId))}async function YL(t,e,n){const r=t3(t);try{const s=await(function(u,d){const h=Ge(u),f=Xt.now(),v=d.reduce(((_,A)=>_.add(A.key)),dt());let b,x;return h.persistence.runTransaction("Locally write mutations","readwrite",(_=>{let A=qs(),R=dt();return h.Os.getEntries(_,v).next((M=>{A=M,A.forEach(((U,O)=>{O.isValidDocument()||(R=R.add(U))}))})).next((()=>h.localDocuments.getOverlayedDocuments(_,A))).next((M=>{b=M;const U=[];for(const O of d){const B=cV(O,b.get(O.key).overlayedDocument);B!=null&&U.push(new ro(O.key,B,p2(B.value.mapValue),Fi.exists(!0)))}return h.mutationQueue.addMutationBatch(_,f,U,d)})).next((M=>{x=M;const U=M.applyToLocalDocumentSet(b,R);return h.documentOverlayCache.saveOverlays(_,M.batchId,U)}))})).then((()=>({batchId:x.batchId,changes:A2(b)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(u,d,h){let f=u.Ru[u.currentUser.toKey()];f||(f=new cn(tt)),f=f.insert(d,h),u.Ru[u.currentUser.toKey()]=f})(r,s.batchId,n),await Yd(r,s.changes),await Cp(r.remoteStore)}catch(s){const o=Sb(s,"Failed to persist write");n.reject(o)}}async function uR(t,e){const n=Ge(t);try{const r=await oL(n.localStore,e);e.targetChanges.forEach(((s,o)=>{const u=n.Eu.get(o);u&&(It(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.lu=!0:s.modifiedDocuments.size>0?It(u.lu,14607):s.removedDocuments.size>0&&(It(u.lu,42227),u.lu=!1))})),await Yd(n,r,e)}catch(r){await Cu(r)}}function NS(t,e,n){const r=Ge(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach(((o,u)=>{const d=u.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(u,d){const h=Ge(u);h.onlineState=d;let f=!1;h.queries.forEach(((v,b)=>{for(const x of b.wa)x.va(d)&&(f=!0)})),f&&Ab(h)})(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function QL(t,e,n){const r=Ge(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),o=s&&s.key;if(o){let u=new cn(Oe.comparator);u=u.insert(o,xr.newNoDocument(o,Fe.min()));const d=dt().add(o),h=new wp(Fe.min(),new Map,new cn(tt),u,d);await uR(r,h),r.du=r.du.remove(o),r.Eu.delete(e),Rb(r)}else await Zy(r.localStore,e,!1).then((()=>n0(r,e,n))).catch(Cu)}async function WL(t,e){const n=Ge(t),r=e.batch.batchId;try{const s=await aL(n.localStore,e);dR(n,r,null),cR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Yd(n,s)}catch(s){await Cu(s)}}async function XL(t,e,n){const r=Ge(t);try{const s=await(function(u,d){const h=Ge(u);return h.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let v;return h.mutationQueue.lookupMutationBatch(f,d).next((b=>(It(b!==null,37113),v=b.keys(),h.mutationQueue.removeMutationBatch(f,b)))).next((()=>h.mutationQueue.performConsistencyCheck(f))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(f,v,d))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,v))).next((()=>h.localDocuments.getDocuments(f,v)))}))})(r.localStore,e);dR(r,e,n),cR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Yd(r,s)}catch(s){await Cu(s)}}function cR(t,e){(t.Vu.get(e)||[]).forEach((n=>{n.resolve()})),t.Vu.delete(e)}function dR(t,e,n){const r=Ge(t);let s=r.Ru[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function n0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach((r=>{t.Au.containsKey(r)||hR(t,r)}))}function hR(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(xb(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Rb(t))}function kS(t,e,n){for(const r of n)r instanceof aR?(t.Au.addReference(r.key,e),JL(t,r)):r instanceof oR?(Ee(Cb,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||hR(t,r.key)):Ue(19791,{yu:r})}function JL(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(Ee(Cb,"New document in limbo: "+n),t.Iu.add(r),Rb(t))}function Rb(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new Oe(qt.fromString(e)),r=t.mu.next();t.Eu.set(r,new zL(n)),t.du=t.du.insert(n,r),X2(t.remoteStore,new Pa(as(bp(n.path)),r,"TargetPurposeLimboResolution",gp.ue))}}async function Yd(t,e,n){const r=Ge(t),s=[],o=[],u=[];r.Pu.isEmpty()||(r.Pu.forEach(((d,h)=>{u.push(r.gu(h,e,n).then((f=>{var v;if((f||n)&&r.isPrimaryClient){const b=f?!f.fromCache:(v=n==null?void 0:n.targetChanges.get(h.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(h.targetId,b?"current":"not-current")}if(f){s.push(f);const b=yb.Es(h.targetId,f);o.push(b)}})))})),await Promise.all(u),r.hu.J_(s),await(async function(h,f){const v=Ge(h);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>ue.forEach(f,(x=>ue.forEach(x.Is,(_=>v.persistence.referenceDelegate.addReference(b,x.targetId,_))).next((()=>ue.forEach(x.ds,(_=>v.persistence.referenceDelegate.removeReference(b,x.targetId,_)))))))))}catch(b){if(!Ru(b))throw b;Ee(bb,"Failed to update sequence numbers: "+b)}for(const b of f){const x=b.targetId;if(!b.fromCache){const _=v.Fs.get(x),A=_.snapshotVersion,R=_.withLastLimboFreeSnapshotVersion(A);v.Fs=v.Fs.insert(x,R)}}})(r.localStore,o))}async function ZL(t,e){const n=Ge(t);if(!n.currentUser.isEqual(e)){Ee(Cb,"User change. New user:",e.toKey());const r=await K2(n.localStore,e);n.currentUser=e,(function(o,u){o.Vu.forEach((d=>{d.forEach((h=>{h.reject(new be(le.CANCELLED,u))}))})),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Yd(n,r.Bs)}}function e3(t,e){const n=Ge(t),r=n.Eu.get(e);if(r&&r.lu)return dt().add(r.key);{let s=dt();const o=n.Tu.get(e);if(!o)return s;for(const u of o){const d=n.Pu.get(u);s=s.unionWith(d.view.tu)}return s}}function fR(t){const e=Ge(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=uR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=e3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QL.bind(null,e),e.hu.J_=VL.bind(null,e.eventManager),e.hu.pu=LL.bind(null,e.eventManager),e}function t3(t){const e=Ge(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=XL.bind(null,e),e}class Vm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sp(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return sL(this.persistence,new nL,e.initialUser,this.serializer)}Du(e){return new $2(vb.Vi,this.serializer)}bu(e){return new hL}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vm.provider={build:()=>new Vm};class n3 extends Vm{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){It(this.persistence.referenceDelegate instanceof Mm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new zV(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?$r.withCacheSize(this.cacheSizeBytes):$r.DEFAULT;return new $2((r=>Mm.Vi(r,n)),this.serializer)}}class r0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>NS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZL.bind(null,this.syncEngine),await jL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new PL})()}createDatastore(e){const n=Sp(e.databaseInfo.databaseId),r=(function(o){return new vL(o)})(e.databaseInfo);return(function(o,u,d,h){return new EL(o,u,d,h)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,o,u,d){return new TL(r,s,o,u,d)})(this.localStore,this.datastore,e.asyncQueue,(n=>NS(this.syncEngine,n,0)),(function(){return wS.C()?new wS:new fL})())}createSyncEngine(e,n){return(function(s,o,u,d,h,f,v){const b=new FL(s,o,u,d,h,f);return v&&(b.fu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(s){const o=Ge(s);Ee(Wo,"RemoteStore shutting down."),o.Ia.add(5),await Kd(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}r0.provider={build:()=>new r0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Fs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa="FirestoreClient";class r3{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=br.UNAUTHENTICATED,this.clientId=sb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async u=>{Ee(Wa,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(Ee(Wa,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new za;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Sb(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function ay(t,e){t.asyncQueue.verifyOperationInProgress(),Ee(Wa,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await K2(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>{Ha("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then((()=>{Ee("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((s=>{Ha("Terminating Firestore due to IndexedDb database deletion failed",s)}))})),t._offlineComponents=e}async function OS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await i3(t);Ee(Wa,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>AS(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>AS(e.remoteStore,s))),t._onlineComponents=e}async function i3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ee(Wa,"Using user provided OfflineComponentProvider");try{await ay(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===le.FAILED_PRECONDITION||s.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Ha("Error using user provided cache. Falling back to memory cache: "+n),await ay(t,new Vm)}}else Ee(Wa,"Using default OfflineComponentProvider"),await ay(t,new n3(void 0));return t._offlineComponents}async function pR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ee(Wa,"Using user provided OnlineComponentProvider"),await OS(t,t._uninitializedComponentsProvider._online)):(Ee(Wa,"Using default OnlineComponentProvider"),await OS(t,new r0))),t._onlineComponents}function s3(t){return pR(t).then((e=>e.syncEngine))}async function i0(t){const e=await pR(t),n=e.eventManager;return n.onListen=qL.bind(null,e.syncEngine),n.onUnlisten=$L.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=HL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=KL.bind(null,e.syncEngine),n}function a3(t,e,n={}){const r=new za;return t.asyncQueue.enqueueAndForget((async()=>(function(o,u,d,h,f){const v=new mR({next:x=>{v.Ou(),u.enqueueAndForget((()=>iR(o,b)));const _=x.docs.has(d);!_&&x.fromCache?f.reject(new be(le.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&x.fromCache&&h&&h.source==="server"?f.reject(new be(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(x)},error:x=>f.reject(x)}),b=new sR(bp(d.path),v,{includeMetadataChanges:!0,ka:!0});return rR(o,b)})(await i0(t),t.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR="firestore.googleapis.com",jS=!0;class MS{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new be(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vR,this.ssl=jS}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:jS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=G2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<UV)throw new be(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new be(le.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new be(le.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new be(le.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rp{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new MS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new MS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new pP;switch(r.type){case"firstParty":return new bP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new be(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=DS.get(n);r&&(Ee("ComponentProvider","Removing Datastore"),DS.delete(n),r.terminate())})(this),Promise.resolve()}}function o3(t,e,n,r={}){var s;t=ss(t,Rp);const o=Gs(e),u=t._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:t._getEmulatorOptions()}),h=`${e}:${n}`;o&&(up(`https://${h}`),cp("Firestore",!0)),u.host!==vR&&u.host!==h&&Ha("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},u),{host:h,ssl:o,emulatorOptions:r});if(!$o(f,d)&&(t._setSettings(f),r.mockUserToken)){let v,b;if(typeof r.mockUserToken=="string")v=r.mockUserToken,b=br.MOCK_USER;else{v=cC(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new be(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new br(x)}t._authCredentials=new gP(new n2(v,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Nu(this.firestore,e,this._query)}}class wn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wn(this.firestore,e,this._key)}toJSON(){return{type:wn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(qd(n,wn._jsonSchema))return new wn(e,r||null,new Oe(qt.fromString(n.referencePath)))}}wn._jsonSchemaVersion="firestore/documentReference/1.0",wn._jsonSchema={type:jn("string",wn._jsonSchemaVersion),referencePath:jn("string")};class Fa extends Nu{constructor(e,n,r){super(e,n,bp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wn(this.firestore,null,new Oe(e))}withConverter(e){return new Fa(this.firestore,e,this._path)}}function io(t,e,...n){if(t=Lt(t),i2("collection","path",e),t instanceof Rp){const r=qt.fromString(e,...n);return Yw(r),new Fa(t,null,r)}{if(!(t instanceof wn||t instanceof Fa))throw new be(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(qt.fromString(e,...n));return Yw(r),new Fa(t.firestore,null,r)}}function ku(t,e,...n){if(t=Lt(t),arguments.length===1&&(e=sb.newId()),i2("doc","path",e),t instanceof Rp){const r=qt.fromString(e,...n);return Kw(r),new wn(t,null,new Oe(r))}{if(!(t instanceof wn||t instanceof Fa))throw new be(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(qt.fromString(e,...n));return Kw(r),new wn(t.firestore,t instanceof Fa?t.converter:null,new Oe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS="AsyncQueue";class VS{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Q2(this,"async_queue_retry"),this.oc=()=>{const r=sy();r&&Ee(PS,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=sy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=sy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new za;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ru(e))throw e;Ee(PS,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const n=this._c.then((()=>(this.nc=!0,e().catch((r=>{throw this.tc=r,this.nc=!1,Fs("INTERNAL UNHANDLED ERROR: ",LS(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=wb.createAndSchedule(this,e,n,r,(o=>this.lc(o)));return this.ec.push(s),s}ac(){this.tc&&Ue(47125,{hc:LS(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function LS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const o of r)if(o in s&&typeof s[o]=="function")return!0;return!1})(t,["next","error","complete"])}class Xo extends Rp{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new VS,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new VS(e),this._firestoreClient=void 0,await e}}}function l3(t,e){const n=typeof t=="object"?t:dp(),r=typeof t=="string"?t:Rm,s=Ld(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=H0("firestore");o&&o3(s,...o)}return s}function Ib(t){if(t._terminated)throw new be(le.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||u3(t),t._firestoreClient}function u3(t){var e,n,r;const s=t._freezeSettings(),o=(function(d,h,f,v){return new MP(d,h,f,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,gR(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new r3(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(d){const h=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(h),_online:h}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ci(dr.fromBase64String(e))}catch(n){throw new be(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ci(dr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ci._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(qd(e,Ci._jsonSchema))return Ci.fromBase64String(e.bytes)}}Ci._jsonSchemaVersion="firestore/bytes/1.0",Ci._jsonSchema={type:jn("string",Ci._jsonSchemaVersion),bytes:jn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new be(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new be(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new be(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return tt(this._lat,e._lat)||tt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ls._jsonSchemaVersion}}static fromJSON(e){if(qd(e,ls._jsonSchema))return new ls(e.latitude,e.longitude)}}ls._jsonSchemaVersion="firestore/geoPoint/1.0",ls._jsonSchema={type:jn("string",ls._jsonSchemaVersion),latitude:jn("number"),longitude:jn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:us._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(qd(e,us._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new us(e.vectorValues);throw new be(le.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}us._jsonSchemaVersion="firestore/vectorValue/1.0",us._jsonSchema={type:jn("string",us._jsonSchemaVersion),vectorValues:jn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c3=/^__.*__$/;class d3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ro(e,this.data,this.fieldMask,n,this.fieldTransforms):new Gd(e,this.data,n,this.fieldTransforms)}}class yR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ro(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function bR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue(40011,{Ec:t})}}class kb{constructor(e,n,r,s,o,u){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new kb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Lm(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(bR(this.Ec)&&c3.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class h3{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Sp(e)}Dc(e,n,r,s=!1){return new kb({Ec:e,methodName:n,bc:r,path:cr.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ob(t){const e=t._freezeSettings(),n=Sp(t._databaseId);return new h3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function f3(t,e,n,r,s,o={}){const u=t.Dc(o.merge||o.mergeFields?2:0,e,n,s);Db("Data must be an object, but it was:",u,r);const d=xR(r,u);let h,f;if(o.merge)h=new oi(u.fieldMask),f=u.fieldTransforms;else if(o.mergeFields){const v=[];for(const b of o.mergeFields){const x=s0(e,b,n);if(!u.contains(x))throw new be(le.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);_R(v,x)||v.push(x)}h=new oi(v),f=u.fieldTransforms.filter((b=>h.covers(b.field)))}else h=null,f=u.fieldTransforms;return new d3(new Kr(d),h,f)}class Np extends Nb{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Np}}function m3(t,e,n,r){const s=t.Dc(1,e,n);Db("Data must be an object, but it was:",s,r);const o=[],u=Kr.empty();no(r,((h,f)=>{const v=jb(e,h,n);f=Lt(f);const b=s.gc(v);if(f instanceof Np)o.push(v);else{const x=Qd(f,b);x!=null&&(o.push(v),u.set(v,x))}}));const d=new oi(o);return new yR(u,d,s.fieldTransforms)}function p3(t,e,n,r,s,o){const u=t.Dc(1,e,n),d=[s0(e,r,n)],h=[s];if(o.length%2!=0)throw new be(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<o.length;x+=2)d.push(s0(e,o[x])),h.push(o[x+1]);const f=[],v=Kr.empty();for(let x=d.length-1;x>=0;--x)if(!_R(f,d[x])){const _=d[x];let A=h[x];A=Lt(A);const R=u.gc(_);if(A instanceof Np)f.push(_);else{const M=Qd(A,R);M!=null&&(f.push(_),v.set(_,M))}}const b=new oi(f);return new yR(v,b,u.fieldTransforms)}function g3(t,e,n,r=!1){return Qd(n,t.Dc(r?4:3,e))}function Qd(t,e){if(ER(t=Lt(t)))return Db("Unsupported field value:",e,t),xR(t,e);if(t instanceof Nb)return(function(r,s){if(!bR(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,s){const o=[];let u=0;for(const d of r){let h=Qd(d,s.yc(u));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),u++}return{arrayValue:{values:o}}})(t,e)}return(function(r,s){if((r=Lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return iV(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Xt.fromDate(r);return{timestampValue:jm(s.serializer,o)}}if(r instanceof Xt){const o=new Xt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jm(s.serializer,o)}}if(r instanceof ls)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ci)return{bytesValue:L2(s.serializer,r._byteString)};if(r instanceof wn){const o=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(o))throw s.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:pb(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof us)return(function(u,d){return{mapValue:{fields:{[f2]:{stringValue:m2},[Im]:{arrayValue:{values:u.toArray().map((f=>{if(typeof f!="number")throw d.wc("VectorValues must only contain numeric values.");return db(d.serializer,f)}))}}}}}})(r,s);throw s.wc(`Unsupported field value: ${pp(r)}`)})(t,e)}function xR(t,e){const n={};return o2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):no(t,((r,s)=>{const o=Qd(s,e.Vc(r));o!=null&&(n[r]=o)})),{mapValue:{fields:n}}}function ER(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xt||t instanceof ls||t instanceof Ci||t instanceof wn||t instanceof Nb||t instanceof us)}function Db(t,e,n){if(!ER(n)||!s2(n)){const r=pp(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function s0(t,e,n){if((e=Lt(e))instanceof Ip)return e._internalPath;if(typeof e=="string")return jb(t,e);throw Lm("Field path arguments must be of type string or ",t,!1,void 0,n)}const v3=new RegExp("[~\\*/\\[\\]]");function jb(t,e,n){if(e.search(v3)>=0)throw Lm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ip(...e.split("."))._internalPath}catch{throw Lm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Lm(t,e,n,r,s){const o=r&&!r.isEmpty(),u=s!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let h="";return(o||u)&&(h+=" (found",o&&(h+=` in field ${r}`),u&&(h+=` in document ${s}`),h+=")"),new be(le.INVALID_ARGUMENT,d+t+h)}function _R(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new y3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Mb("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class y3 extends TR{data(){return super.data()}}function Mb(t,e){return typeof e=="string"?jb(t,e):e instanceof Ip?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new be(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Pb{}class x3 extends Pb{}function kp(t,e,...n){let r=[];e instanceof Pb&&r.push(e),r=r.concat(n),(function(o){const u=o.filter((h=>h instanceof Vb)).length,d=o.filter((h=>h instanceof Op)).length;if(u>1||u>0&&d>0)throw new be(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class Op extends x3{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Op(e,n,r)}_apply(e){const n=this._parse(e);return wR(e._query,n),new Nu(e.firestore,e.converter,Ky(e._query,n))}_parse(e){const n=Ob(e.firestore);return(function(o,u,d,h,f,v,b){let x;if(f.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new be(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){zS(b,v);const A=[];for(const R of b)A.push(BS(h,o,R));x={arrayValue:{values:A}}}else x=BS(h,o,b)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||zS(b,v),x=g3(d,u,b,v==="in"||v==="not-in");return Dn.create(f,v,x)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function E3(t,e,n){const r=e,s=Mb("where",t);return Op._create(s,r,n)}class Vb extends Pb{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Vb(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:qi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,o){let u=s;const d=o.getFlattenedFilters();for(const h of d)wR(u,h),u=Ky(u,h)})(e._query,n),new Nu(e.firestore,e.converter,Ky(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function BS(t,e,n){if(typeof(n=Lt(n))=="string"){if(n==="")throw new be(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_2(e)&&n.indexOf("/")!==-1)throw new be(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(qt.fromString(n));if(!Oe.isDocumentKey(r))throw new be(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return nS(t,new Oe(r))}if(n instanceof wn)return nS(t,n._key);throw new be(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pp(n)}.`)}function zS(t,e){if(!Array.isArray(t)||t.length===0)throw new be(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wR(t,e){const n=(function(s,o){for(const u of s)for(const d of u.getFlattenedFilters())if(o.indexOf(d.op)>=0)return d.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new be(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new be(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class _3{convertValue(e,n="none"){switch(Ya(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ka(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ue(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return no(e,((s,o)=>{r[s]=this.convertValue(o,n)})),r}convertVectorValue(e){var n,r,s;const o=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Im].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((u=>Tn(u.doubleValue)));return new us(o)}convertGeoPoint(e){return new ls(Tn(e.latitude),Tn(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=yp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(_d(e));default:return null}}convertTimestamp(e){const n=$a(e);return new Xt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=qt.fromString(e);It(H2(r),9688,{name:e});const s=new Td(r.get(1),r.get(3)),o=new Oe(r.popFirst(5));return s.isEqual(n)||Fs(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T3(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Fc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bo extends TR{constructor(e,n,r,s,o,u){super(e,n,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new lm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Mb("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new be(le.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Bo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Bo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Bo._jsonSchema={type:jn("string",Bo._jsonSchemaVersion),bundleSource:jn("string","DocumentSnapshot"),bundleName:jn("string"),bundle:jn("string")};class lm extends Bo{data(e={}){return super.data(e)}}class ou{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Fc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new lm(this._firestore,this._userDataWriter,r.key,r,new Fc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new be(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map((d=>{const h=new lm(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Fc(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:h,oldIndex:-1,newIndex:u++}}))}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>o||d.type!==3)).map((d=>{const h=new lm(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Fc(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,v=-1;return d.type!==0&&(f=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:w3(d.type),doc:h,oldIndex:f,newIndex:v}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new be(le.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ou._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=sb.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function w3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ue(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S3(t){t=ss(t,wn);const e=ss(t.firestore,Xo);return a3(Ib(e),t._key).then((n=>AR(e,t,n)))}ou._jsonSchemaVersion="firestore/querySnapshot/1.0",ou._jsonSchema={type:jn("string",ou._jsonSchemaVersion),bundleSource:jn("string","QuerySnapshot"),bundleName:jn("string"),bundle:jn("string")};class SR extends _3{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ci(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,n)}}function A3(t,e,n,...r){t=ss(t,wn);const s=ss(t.firestore,Xo),o=Ob(s);let u;return u=typeof(e=Lt(e))=="string"||e instanceof Ip?p3(o,"updateDoc",t._key,e,n,r):m3(o,"updateDoc",t._key,e),Ub(s,[u.toMutation(t._key,Fi.exists(!0))])}function Lb(t){return Ub(ss(t.firestore,Xo),[new hb(t._key,Fi.none())])}function Dp(t,e){const n=ss(t.firestore,Xo),r=ku(t),s=T3(t.converter,e);return Ub(n,[f3(Ob(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Fi.exists(!1))]).then((()=>r))}function jp(t,...e){var n,r,s;t=Lt(t);let o={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||US(e[u])||(o=e[u++]);const d={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(US(e[u])){const b=e[u];e[u]=(n=b.next)===null||n===void 0?void 0:n.bind(b),e[u+1]=(r=b.error)===null||r===void 0?void 0:r.bind(b),e[u+2]=(s=b.complete)===null||s===void 0?void 0:s.bind(b)}let h,f,v;if(t instanceof wn)f=ss(t.firestore,Xo),v=bp(t._key.path),h={next:b=>{e[u]&&e[u](AR(f,t,b))},error:e[u+1],complete:e[u+2]};else{const b=ss(t,Nu);f=ss(b.firestore,Xo),v=b._query;const x=new SR(f);h={next:_=>{e[u]&&e[u](new ou(f,x,b,_))},error:e[u+1],complete:e[u+2]},b3(t._query)}return(function(x,_,A,R){const M=new mR(R),U=new sR(_,M,A);return x.asyncQueue.enqueueAndForget((async()=>rR(await i0(x),U))),()=>{M.Ou(),x.asyncQueue.enqueueAndForget((async()=>iR(await i0(x),U)))}})(Ib(f),v,d,h)}function Ub(t,e){return(function(r,s){const o=new za;return r.asyncQueue.enqueueAndForget((async()=>YL(await s3(r),s,o))),o.promise})(Ib(t),e)}function AR(t,e,n){const r=n.docs.get(e._key),s=new SR(t);return new Bo(t,s,e._key,r,new Fc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Au=s})(el),qa(new Us("firestore",((r,{instanceIdentifier:s,options:o})=>{const u=r.getProvider("app").getImmediate(),d=new Xo(new vP(r.getProvider("auth-internal")),new xP(u,r.getProvider("app-check-internal")),(function(f,v){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new be(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Td(f.options.projectId,v)})(u,s),u);return o=Object.assign({useFetchStreams:n},o),d._setSettings(o),d}),"PUBLIC").setMultipleInstances(!0)),Ri(Fw,qw,e),Ri(Fw,qw,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR="firebasestorage.googleapis.com",RR="storageBucket",C3=120*1e3,R3=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn extends Hi{constructor(e,n,r=0){super(oy(e),`Firebase Storage: ${n} (${oy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,bn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return oy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var yn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(yn||(yn={}));function oy(t){return"storage/"+t}function Bb(){const t="An unknown error occurred, please check the error payload for server response.";return new bn(yn.UNKNOWN,t)}function I3(t){return new bn(yn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function N3(t){return new bn(yn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function k3(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new bn(yn.UNAUTHENTICATED,t)}function O3(){return new bn(yn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function D3(t){return new bn(yn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function j3(){return new bn(yn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function M3(){return new bn(yn.CANCELED,"User canceled the upload/download.")}function P3(t){return new bn(yn.INVALID_URL,"Invalid URL '"+t+"'.")}function V3(t){return new bn(yn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function L3(){return new bn(yn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+RR+"' property when initializing the app?")}function U3(){return new bn(yn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function B3(){return new bn(yn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function z3(t){return new bn(yn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function a0(t){return new bn(yn.INVALID_ARGUMENT,t)}function IR(){return new bn(yn.APP_DELETED,"The Firebase app was deleted.")}function F3(t){return new bn(yn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function nd(t,e){return new bn(yn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Nc(t){throw new bn(yn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=li.makeFromUrl(e,n)}catch{return new li(e,"")}if(r.path==="")return r;throw V3(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+s+u,"i"),h={bucket:1,path:3};function f(H){H.path_=decodeURIComponent(H.path)}const v="v[A-Za-z0-9_]+",b=n.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",_=new RegExp(`^https?://${b}/${v}/b/${s}/o${x}`,"i"),A={bucket:1,path:3},R=n===CR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,M="([^?#]*)",U=new RegExp(`^https?://${R}/${s}/${M}`,"i"),B=[{regex:d,indices:h,postModify:o},{regex:_,indices:A,postModify:f},{regex:U,indices:{bucket:1,path:2},postModify:f}];for(let H=0;H<B.length;H++){const G=B[H],q=G.regex.exec(e);if(q){const C=q[G.indices.bucket];let S=q[G.indices.path];S||(S=""),r=new li(C,S),G.postModify(r);break}}if(r==null)throw P3(e);return r}}class q3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H3(t,e,n){let r=1,s=null,o=null,u=!1,d=0;function h(){return d===2}let f=!1;function v(...M){f||(f=!0,e.apply(null,M))}function b(M){s=setTimeout(()=>{s=null,t(_,h())},M)}function x(){o&&clearTimeout(o)}function _(M,...U){if(f){x();return}if(M){x(),v.call(null,M,...U);return}if(h()||u){x(),v.call(null,M,...U);return}r<64&&(r*=2);let B;d===1?(d=2,B=0):B=(r+Math.random())*1e3,b(B)}let A=!1;function R(M){A||(A=!0,x(),!f&&(s!==null?(M||(d=2),clearTimeout(s),b(0)):M||(d=1)))}return b(0),o=setTimeout(()=>{u=!0,R(!0)},n),R}function G3(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $3(t){return t!==void 0}function K3(t){return typeof t=="object"&&!Array.isArray(t)}function zb(t){return typeof t=="string"||t instanceof String}function FS(t){return Fb()&&t instanceof Blob}function Fb(){return typeof Blob<"u"}function qS(t,e,n,r){if(r<e)throw a0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw a0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function NR(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var zo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(zo||(zo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y3(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e,n,r,s,o,u,d,h,f,v,b,x=!0,_=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=v,this.connectionFactory_=b,this.retry=x,this.isUsingEmulator=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,R)=>{this.resolve_=A,this.reject_=R,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new If(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const u=d=>{const h=d.loaded,f=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&o.addUploadProgressListener(u),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(u),this.pendingConnection_=null;const d=o.getErrorCode()===zo.NO_ERROR,h=o.getStatus();if(!d||Y3(h,this.additionalRetryCodes_)&&this.retry){const v=o.getErrorCode()===zo.ABORT;r(!1,new If(!1,null,v));return}const f=this.successCodes_.indexOf(h)!==-1;r(!0,new If(f,o))})},n=(r,s)=>{const o=this.resolve_,u=this.reject_,d=s.connection;if(s.wasSuccessCode)try{const h=this.callback_(d,d.getResponse());$3(h)?o(h):o()}catch(h){u(h)}else if(d!==null){const h=Bb();h.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,h)):u(h)}else if(s.canceled){const h=this.appDelete_?IR():M3();u(h)}else{const h=j3();u(h)}};this.canceled_?n(!1,new If(!1,null,!0)):this.backoffId_=H3(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&G3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class If{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function W3(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function X3(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function J3(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Z3(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function e5(t,e,n,r,s,o,u=!0,d=!1){const h=NR(t.urlParams),f=t.url+h,v=Object.assign({},t.headers);return J3(v,e),W3(v,n),X3(v,o),Z3(v,r),new Q3(f,t.method,v,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,u,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t5(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function n5(...t){const e=t5();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Fb())return new Blob(t);throw new bn(yn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function r5(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i5(t){if(typeof atob>"u")throw z3("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ly{constructor(e,n){this.data=e,this.contentType=n||null}}function kR(t,e){switch(t){case Ui.RAW:return new ly(OR(e));case Ui.BASE64:case Ui.BASE64URL:return new ly(DR(t,e));case Ui.DATA_URL:return new ly(a5(e),o5(e))}throw Bb()}function OR(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,u=t.charCodeAt(++n);r=65536|(o&1023)<<10|u&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function s5(t){let e;try{e=decodeURIComponent(t)}catch{throw nd(Ui.DATA_URL,"Malformed data URL.")}return OR(e)}function DR(t,e){switch(t){case Ui.BASE64:{const s=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(s||o)throw nd(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ui.BASE64URL:{const s=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(s||o)throw nd(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=i5(e)}catch(s){throw s.message.includes("polyfill")?s:nd(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class jR{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw nd(Ui.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=l5(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function a5(t){const e=new jR(t);return e.base64?DR(Ui.BASE64,e.rest):s5(e.rest)}function o5(t){return new jR(t).contentType}function l5(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n){let r=0,s="";FS(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(FS(this.data_)){const r=this.data_,s=r5(r,e,n);return s===null?null:new ka(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ka(r,!0)}}static getBlob(...e){if(Fb()){const n=e.map(r=>r instanceof ka?r.data_:r);return new ka(n5.apply(null,n))}else{const n=e.map(u=>zb(u)?kR(Ui.RAW,u).data:u.data_);let r=0;n.forEach(u=>{r+=u.byteLength});const s=new Uint8Array(r);let o=0;return n.forEach(u=>{for(let d=0;d<u.length;d++)s[o++]=u[d]}),new ka(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(t){let e;try{e=JSON.parse(t)}catch{return null}return K3(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u5(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function c5(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function PR(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d5(t,e){return e}class Nr{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||d5}}let Nf=null;function h5(t){return!zb(t)||t.length<2?t:PR(t)}function VR(){if(Nf)return Nf;const t=[];t.push(new Nr("bucket")),t.push(new Nr("generation")),t.push(new Nr("metageneration")),t.push(new Nr("name","fullPath",!0));function e(o,u){return h5(u)}const n=new Nr("name");n.xform=e,t.push(n);function r(o,u){return u!==void 0?Number(u):u}const s=new Nr("size");return s.xform=r,t.push(s),t.push(new Nr("timeCreated")),t.push(new Nr("updated")),t.push(new Nr("md5Hash",null,!0)),t.push(new Nr("cacheControl",null,!0)),t.push(new Nr("contentDisposition",null,!0)),t.push(new Nr("contentEncoding",null,!0)),t.push(new Nr("contentLanguage",null,!0)),t.push(new Nr("contentType",null,!0)),t.push(new Nr("metadata","customMetadata",!0)),Nf=t,Nf}function f5(t,e){function n(){const r=t.bucket,s=t.fullPath,o=new li(r,s);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function m5(t,e,n){const r={};r.type="file";const s=n.length;for(let o=0;o<s;o++){const u=n[o];r[u.local]=u.xform(r,e[u.server])}return f5(r,t),r}function LR(t,e,n){const r=MR(e);return r===null?null:m5(t,r,n)}function p5(t,e,n,r){const s=MR(e);if(s===null||!zb(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const u=encodeURIComponent;return o.split(",").map(f=>{const v=t.bucket,b=t.fullPath,x="/b/"+u(v)+"/o/"+u(b),_=qb(x,n,r),A=NR({alt:"media",token:f});return _+A})[0]}function g5(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const o=e[s];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class UR{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(t){if(!t)throw Bb()}function v5(t,e){function n(r,s){const o=LR(t,s,e);return BR(o!==null),o}return n}function y5(t,e){function n(r,s){const o=LR(t,s,e);return BR(o!==null),p5(o,s,t.host,t._protocol)}return n}function zR(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=O3():s=k3():n.getStatus()===402?s=N3(t.bucket):n.getStatus()===403?s=D3(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function b5(t){const e=zR(t);function n(r,s){let o=e(r,s);return r.getStatus()===404&&(o=I3(t.path)),o.serverResponse=s.serverResponse,o}return n}function x5(t,e,n){const r=e.fullServerUrl(),s=qb(r,t.host,t._protocol),o="GET",u=t.maxOperationRetryTime,d=new UR(s,o,y5(t,n),u);return d.errorHandler=b5(e),d}function E5(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function _5(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=E5(null,e)),r}function T5(t,e,n,r,s){const o=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function d(){let B="";for(let H=0;H<2;H++)B=B+Math.random().toString().slice(2);return B}const h=d();u["Content-Type"]="multipart/related; boundary="+h;const f=_5(e,r,s),v=g5(f,n),b="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+h+`\r
Content-Type: `+f.contentType+`\r
\r
`,x=`\r
--`+h+"--",_=ka.getBlob(b,r,x);if(_===null)throw U3();const A={name:f.fullPath},R=qb(o,t.host,t._protocol),M="POST",U=t.maxUploadRetryTime,O=new UR(R,M,v5(t,n),U);return O.urlParams=A,O.headers=u,O.body=_.uploadData(),O.errorHandler=zR(e),O}class w5{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=zo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=zo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=zo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,o){if(this.sent_)throw Nc("cannot .send() more than once");if(Gs(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const u in o)o.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,o[u].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Nc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Nc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Nc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Nc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class S5 extends w5{initXhr(){this.xhr_.responseType="text"}}function FR(){return new S5}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,n){this._service=e,n instanceof li?this._location=n:this._location=li.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Jo(e,n)}get root(){const e=new li(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return PR(this._location.path)}get storage(){return this._service}get parent(){const e=u5(this._location.path);if(e===null)return null;const n=new li(this._location.bucket,e);return new Jo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw F3(e)}}function qR(t,e,n){t._throwIfRoot("uploadBytes");const r=T5(t.storage,t._location,VR(),new ka(e,!0),n);return t.storage.makeRequestWithTokens(r,FR).then(s=>({metadata:s,ref:t}))}function A5(t,e,n=Ui.RAW,r){t._throwIfRoot("uploadString");const s=kR(n,e),o=Object.assign({},r);return o.contentType==null&&s.contentType!=null&&(o.contentType=s.contentType),qR(t,s.data,o)}function C5(t){t._throwIfRoot("getDownloadURL");const e=x5(t.storage,t._location,VR());return t.storage.makeRequestWithTokens(e,FR).then(n=>{if(n===null)throw B3();return n})}function R5(t,e){const n=c5(t._location.path,e),r=new li(t._location.bucket,n);return new Jo(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5(t){return/^[A-Za-z]+:\/\//.test(t)}function N5(t,e){return new Jo(t,e)}function HR(t,e){if(t instanceof Hb){const n=t;if(n._bucket==null)throw L3();const r=new Jo(n,n._bucket);return e!=null?HR(r,e):r}else return e!==void 0?R5(t,e):t}function k5(t,e){if(e&&I5(e)){if(t instanceof Hb)return N5(t,e);throw a0("To use ref(service, url), the first argument must be a Storage instance.")}else return HR(t,e)}function HS(t,e){const n=e==null?void 0:e[RR];return n==null?null:li.makeFromBucketSpec(n,t)}function O5(t,e,n,r={}){t.host=`${e}:${n}`;const s=Gs(e);s&&(up(`https://${t.host}/b`),cp("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:o}=r;o&&(t._overrideAuthToken=typeof o=="string"?o:cC(o,t.app.options.projectId))}class Hb{constructor(e,n,r,s,o,u=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=u,this._bucket=null,this._host=CR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=C3,this._maxUploadRetryTime=R3,this._requests=new Set,s!=null?this._bucket=li.makeFromBucketSpec(s,this._host):this._bucket=HS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=li.makeFromBucketSpec(this._url,e):this._bucket=HS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){qS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){qS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(kr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Jo(this,e)}_makeRequest(e,n,r,s,o=!0){if(this._deleted)return new q3(IR());{const u=e5(e,this._appId,r,s,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const GS="@firebase/storage",$S="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR="storage";function D5(t,e,n){return t=Lt(t),qR(t,e,n)}function j5(t,e,n,r){return t=Lt(t),A5(t,e,n,r)}function $R(t){return t=Lt(t),C5(t)}function KR(t,e){return t=Lt(t),k5(t,e)}function M5(t=dp(),e){t=Lt(t);const r=Ld(t,GR).getImmediate({identifier:e}),s=H0("storage");return s&&P5(r,...s),r}function P5(t,e,n,r={}){O5(t,e,n,r)}function V5(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Hb(n,r,s,e,el)}function L5(){qa(new Us(GR,V5,"PUBLIC").setMultipleInstances(!0)),Ri(GS,$S,""),Ri(GS,$S,"esm2017")}L5();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U5="type.googleapis.com/google.protobuf.Int64Value",B5="type.googleapis.com/google.protobuf.UInt64Value";function YR(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Um(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Um(e));if(typeof t=="function"||typeof t=="object")return YR(t,e=>Um(e));throw new Error("Data cannot be encoded in JSON: "+t)}function vu(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case U5:case B5:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>vu(e)):typeof t=="function"||typeof t=="object"?YR(t,e=>vu(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Yr extends Hi{constructor(e,n,r){super(`${Gb}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Yr.prototype)}}function z5(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Bm(t,e){let n=z5(t),r=n,s;try{const o=e&&e.error;if(o){const u=o.status;if(typeof u=="string"){if(!KS[u])return new Yr("internal","internal");n=KS[u],r=u}const d=o.message;typeof d=="string"&&(r=d),s=o.details,s!==void 0&&(s=vu(s))}}catch{}return n==="ok"?null:new Yr(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,kr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(o=>this.auth=o,()=>{}),this.messaging||r.get().then(o=>this.messaging=o,()=>{}),this.appCheck||s==null||s.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0="us-central1",q5=/^data: (.*?)(?:\n|$)/;function H5(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Yr("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class G5{constructor(e,n,r,s,o=o0,u=(...d)=>fetch(...d)){this.app=e,this.fetchImpl=u,this.emulatorOrigin=null,this.contextProvider=new F5(e,n,r,s),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(o);this.customDomain=d.origin+(d.pathname==="/"?"":d.pathname),this.region=o0}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function $5(t,e,n){const r=Gs(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(up(t.emulatorOrigin),cp("Functions",!0))}function K5(t,e,n){const r=s=>Q5(t,e,s,{});return r.stream=(s,o)=>X5(t,e,s,o),r}async function Y5(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let o=null;try{o=await s.json()}catch{}return{status:s.status,json:o}}async function QR(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function Q5(t,e,n,r){const s=t._url(e);return W5(t,s,n,r)}async function W5(t,e,n,r){n=Um(n);const s={data:n},o=await QR(t,r),u=r.timeout||7e4,d=H5(u),h=await Promise.race([Y5(e,s,o,t.fetchImpl),d.promise,t.cancelAllRequests]);if(d.cancel(),!h)throw new Yr("cancelled","Firebase Functions instance was deleted.");const f=Bm(h.status,h.json);if(f)throw f;if(!h.json)throw new Yr("internal","Response is not valid JSON object.");let v=h.json.data;if(typeof v>"u"&&(v=h.json.result),typeof v>"u")throw new Yr("internal","Response is missing data field.");return{data:vu(v)}}function X5(t,e,n,r){const s=t._url(e);return J5(t,s,n,r||{})}async function J5(t,e,n,r){var s;n=Um(n);const o={data:n},u=await QR(t,r);u["Content-Type"]="application/json",u.Accept="text/event-stream";let d;try{d=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:u,signal:r==null?void 0:r.signal})}catch(_){if(_ instanceof Error&&_.name==="AbortError"){const R=new Yr("cancelled","Request was cancelled.");return{data:Promise.reject(R),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(R)}}}}}}const A=Bm(0,null);return{data:Promise.reject(A),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(A)}}}}}}let h,f;const v=new Promise((_,A)=>{h=_,f=A});(s=r==null?void 0:r.signal)===null||s===void 0||s.addEventListener("abort",()=>{const _=new Yr("cancelled","Request was cancelled.");f(_)});const b=d.body.getReader(),x=Z5(b,h,f,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const _=x.getReader();return{async next(){const{value:A,done:R}=await _.read();return{value:A,done:R}},async return(){return await _.cancel(),{done:!0,value:void 0}}}}},data:v}}function Z5(t,e,n,r){const s=(u,d)=>{const h=u.match(q5);if(!h)return;const f=h[1];try{const v=JSON.parse(f);if("result"in v){e(vu(v.result));return}if("message"in v){d.enqueue(vu(v.message));return}if("error"in v){const b=Bm(0,v);d.error(b),n(b);return}}catch(v){if(v instanceof Yr){d.error(v),n(v);return}}},o=new TextDecoder;return new ReadableStream({start(u){let d="";return h();async function h(){if(r!=null&&r.aborted){const f=new Yr("cancelled","Request was cancelled");return u.error(f),n(f),Promise.resolve()}try{const{value:f,done:v}=await t.read();if(v){d.trim()&&s(d.trim(),u),u.close();return}if(r!=null&&r.aborted){const x=new Yr("cancelled","Request was cancelled");u.error(x),n(x),await t.cancel();return}d+=o.decode(f,{stream:!0});const b=d.split(`
`);d=b.pop()||"";for(const x of b)x.trim()&&s(x.trim(),u);return h()}catch(f){const v=f instanceof Yr?f:Bm(0,null);u.error(v),n(v)}}},cancel(){return t.cancel()}})}const YS="@firebase/functions",QS="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6="auth-internal",t6="app-check-internal",n6="messaging-internal";function r6(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),o=n.getProvider(e6),u=n.getProvider(n6),d=n.getProvider(t6);return new G5(s,o,u,d,r)};qa(new Us(Gb,e,"PUBLIC").setMultipleInstances(!0)),Ri(YS,QS,t),Ri(YS,QS,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i6(t=dp(),e=o0){const r=Ld(Lt(t),Gb).getImmediate({identifier:e}),s=H0("functions");return s&&s6(r,...s),r}function s6(t,e,n){$5(Lt(t),e,n)}function rl(t,e,n){return K5(Lt(t),e)}r6();const a6={apiKey:"AIzaSyAoMQ8oVPP5oFjw8YzgF0H1Dy4DAJmNaKM",authDomain:"dresscode-ai-32c50.firebaseapp.com",projectId:"dresscode-ai-32c50",storageBucket:"dresscode-ai-32c50.firebasestorage.app",messagingSenderId:"215593114437",appId:"1:215593114437:web:5d9c1f3161182802f37c2c"},Mp=fC(a6),Do=dP(Mp),o6=new Ds,di=l3(Mp),WR=M5(Mp),il=i6(Mp,"us-central1"),l6=rl(il,"analyzeClothingImages");async function u6(t){try{return(await l6({base64Images:t})).data.items||[]}catch(e){throw console.error("Erreur lors de l'analyse des vtements:",e),new Error("Erreur lors de l'analyse des vtements.")}}const c6=rl(il,"generateOutfitsFunction"),d6=rl(il,"generateOutfitsFunction"),h6=rl(il,"generateChatResponseFunction");async function f6(t,e,n,r,s){const o=new Set((e||[]).flatMap(_=>_.itemIds)),u=t.filter(_=>!o.has(_.id)&&!_.isExcluded),d=u.map(_=>`- ${_.analysis} (ID: ${_.id}, Cat: ${_.category}, Matire: ${_.material})`).join(`
`),h=e.map(_=>{const A=_.itemIds.map(R=>{const M=t.find(U=>U.id===R);return M?`${M.analysis} (Cat: ${M.category}, Matire: ${M.material})`:""}).filter(Boolean).join(" + ");return`- ${_.name} [Contient: ${A}] (Ensemble, ID: ${_.id})`}).join(`
`),f=[d,h].filter(Boolean).join(`
`);let v="";if(s&&s.length>0){const A=Date.now()-10080*60*1e3,R=new Set;s.forEach(U=>{U.wornAt>=A&&U.itemIds.forEach(O=>R.add(O))});const M=[];t.forEach(U=>{U.category==="Hauts"&&R.has(U.id)&&M.push(`${U.analysis} (ID: ${U.id})`)}),M.length>0&&(v=`

 VARIT DES HAUTS


 **Hauts ports dans les 7 derniers jours** (si possible, privilgie d'autres options) :
${M.map(U=>`- ${U}`).join(`
`)}

 **NOTE IMPORTANTE** :
- Essaie de varier les hauts pour viter la monotonie
- MAIS cette rgle est flexible : si aucune autre option ne convient au style/mto/occasion, tu peux utiliser un de ces hauts
- **PRIORIT ABSOLUE** : Cohrence stylistique + Respect des rgles thermiques > Varit des hauts


`)}const b=r?`

 PRIORIT 0 - ARTICLE OBLIGATOIRE (RGLE ABSOLUE)


 **CONTRAINTE NON NGOCIABLE** :
CHACUNE DES 3 TENUES DOIT ABSOLUMENT INCLURE :
 "${"name"in r?r.name:r.analysis}" (ID: ${r.id})

Cette pice doit apparatre dans TOUTES les tenues gnres sans exception.
Si une tenue n'inclut pas cet article, elle est INVALIDE.


`:"",x=`Tu es un styliste expert. Cre 3 tenues compltes et harmonieuses pour : "${n}".
${b}${v}
Vtements disponibles :
${f}

 **NOTE IMPORTANTE SUR LES ENSEMBLES** :
Les articles marqus "(Ensemble)" avec "[Contient: ...]" sont des tenues pr-composes dont les pices doivent tre utilises ENSEMBLE (jamais sparment).
Avant de slectionner un ensemble, vrifie que TOUTES ses pices respectent les rgles de temprature. Si un ensemble contient un short et qu'il fait < 22C, cet ensemble est INTERDIT.


 INSTRUCTION CRITIQUE : EXPLORATION DE LA GARDE-ROBE


 **RGLE FONDAMENTALE** :
L'utilisateur possde une garde-robe COMPLTE avec de nombreuses pices diffrentes.
Tu DOIS explorer et utiliser la DIVERSIT de sa garde-robe, pas toujours les mmes basiques !

 **ERREUR  VITER** :
Ne te limite PAS aux pices "safe" videntes (t-shirt blanc, chemise blanche, jean bleu basique).
L'utilisateur veut voir TOUTES ses pices utilises, pas seulement les plus neutres.

 **APPROCHE CORRECTE** :
- Lis attentivement TOUTE la liste des vtements disponibles
- Utilise des pices VARIES : couleurs diffrentes, styles diffrents, matires diffrentes
- Explore les hauts colors,  motifs, originaux (pas uniquement les neutres)
- Chaque tenue doit mettre en valeur une combinaison UNIQUE de la garde-robe


 PRIORIT 1 - TEMPRATURE (RGLE ABSOLUE)


Analyse la mto dans le contexte et applique :

| Temprature | Rgle stricte |
|-------------|---------------|
| **< 15C** | Layering OBLIGATOIRE : Base (t-shirt/chemise) + Pull/Sweat + Manteau |
| **15-20C** | Pull, sweat, ou veste lgre suffisent |
| **20-25C** | 1 seule couche (t-shirt OU chemise lgre) |
| **> 25C** | Vtements TRS lgers uniquement. INTERDITS : jeans pais, pulls, vestes |

 **INTERDICTIONS THERMIQUES** :
- Doudoune/manteau si > 15C
- Short si < 22C
- Pull laine si > 15C
- Sandales si < 25C


 PRIORIT 2 - LAYERING (SUPERPOSITION)


**RGLES DE SUPERPOSITION VALIDES** :

 **Pull col V**  TOUJOURS avec chemise dessous (sinon nglig)
 **Pull col zipp/camionneur**  TOUJOURS avec t-shirt ou chemise dessous
 **Pull col rond (classique)**  UNIQUEMENT avec t-shirt uni dessous, JAMAIS avec chemise
 **Sweat/Pull sportif**  UNIQUEMENT avec t-shirt, JAMAIS avec chemise
 **Veste/Blazer**  Sur t-shirt, chemise, pull fin, ou col roul
 **Manteau**  Sur pull, sweat, ou veste (si trs froid)
 **Col roul**  JAMAIS avec chemise !

 **INTERDICTIONS ABSOLUES DE LAYERING** :
- JAMAIS chemise avec col roul (aberration stylistique)
- JAMAIS chemise avec pull col rond/ras-du-cou (trop formel + trop casual = clash)
- JAMAIS chemise avec sweat ou pull sportif (incompatibilit de style totale)
- JAMAIS col V sans rien dessous en contexte formel
- JAMAIS pull pais sous veste ajuste (volume excessif)
- JAMAIS 2 cols montants ensemble (col roul + col montant)


 PRIORIT 3 - COHRENCE & HARMONIE


**STRUCTURE** : Chaque tenue = Haut + Bas + Chaussures (minimum)

**COHRENCE DE STYLE (CRUCIAL)** :
-  JAMAIS mlanger sportif et formel (ex: sweat dlav + chemise = NON)
-  JAMAIS associer streetwear et business (ex: jogger + chemise = NON)
-  Style cohrent : tout casual OU tout formel OU smart-casual quilibr
-  Chemise = TOUJOURS avec pices au moins smart-casual (chino, jean brut, blazer)
-  Pull sportif/sweat = TOUJOURS avec pices casual (jean dlav, jogger, sneakers)

**COULEURS & HARMONIES (RGLES STRICTES)** :

 **RGLE FONDAMENTALE** : Une tenue = 1 couleur neutre dominante + 1-2 couleurs d'accent MAXIMUM

 **COULEURS NEUTRES SAFE (Base de toute tenue)** :
- Noir, Blanc, Gris (clair/moyen/fonc), Beige, Camel, Marine, Kaki
- Ces couleurs vont entre elles ET avec toutes les autres

 **ASSOCIATIONS EXCELLENTES** (Utiliser prioritairement) :
- Noir + Blanc (classique intemporel)
- Marine + Blanc (lgant et frais)
- Marine + Beige/Camel (chic et raffin)
- Gris + Blanc (sobre et moderne)
- Gris + Marine (professionnel)
- Noir/Gris/Blanc + n'importe quelle couleur vive (la couleur vive devient l'accent)
- Beige + Marron (tons terreux naturels)
- Kaki + Blanc/Beige (style casual naturel)
- Denim bleu + Blanc/Beige/Marron (combinaison casual parfaite)

 **ASSOCIATIONS ACCEPTABLES** (OK mais prudence) :
- Bleu clair + Marine (OK si tons suffisamment diffrents)
- Marron + Marine (OK mais viter si trop similaires en luminosit)
- Vert olive + Marine/Noir (style militaire, fonctionne)
- Bordeaux/Burgundy + Noir/Gris (lgant si bien dos)

 **ASSOCIATIONS  VITER** (Fautes de got classiques) :
- Noir + Marine (trop proches, confusion visuelle)
- Noir + Marron (incompatibilit classique du stylisme)
- Marine + Marron fonc (confusion des tons sombres)
- Bleu royal vif + Noir (contraste trop brutal)
- Plus de 1 couleur vive par tenue (surcharge visuelle)
- Denim bleu moyen + Pull/Veste bleu similaire (effet total-look rat)

 **RGLES CRITIQUES PAR PICE** :

**CHAUSSURES avec BAS** (CRUCIAL - source principale des fautes) :
-  Chaussures NOIRES : Excellent avec pantalon noir, gris fonc, jean noir/brut fonc, chino anthracite
-  Chaussures NOIRES : ACCEPTABLE avec jean bleu fonc/brut (si jean trs fonc)
-  Chaussures NOIRES : VITER avec jean bleu clair/moyen, chino beige clair (prfrer marron/beige/blanc)
-  Chaussures MARRON/BEIGES : Parfait avec jean bleu (toutes nuances), chino beige/kaki/camel, pantalon marron/terre
-  Chaussures MARRON : JAMAIS avec pantalon noir (faute majeure de stylisme)
-  Chaussures BLANCHES/CLAIRES : Universal casual, vont avec tout sauf tenues trs formelles
-  Chaussures MARINES : Excellent avec jean bleu, chino beige, pantalon gris

**HAUTS avec BAS** :
- Jean BLEU : Privilgier hauts blancs, gris, noirs, beiges, couleurs vives. viter autres bleus de nuance similaire
- Pantalon NOIR : Toutes couleurs acceptes, c'est la base la plus versatile
- Pantalon BEIGE/CHINO : Excellents avec marine, blanc, bleu ciel, vert olive, bordeaux
- Pantalon GRIS : Trs polyvalent, accepte presque toutes couleurs

 **STRATGIE GAGNANTE** :
1. Choisir d'abord le BAS (pantalon) en couleur neutre
2. Assortir les CHAUSSURES selon les rgles strictes ci-dessus
3. Choisir le HAUT dans une couleur compatible avec le bas
4. Si ajout veste/accessoire : rester dans les neutres OU reprendre une couleur dj prsente

**MOTIFS & PATTERNS** :
- Maximum 1 motif visible par tenue
- Si haut  motifs  bas UNI obligatoire
- Si bas  motifs  haut UNI obligatoire
- Rayures fines discrtes = considr comme uni

**VARIT & DIVERSIFICATION (RGLE CRITIQUE)** :

 **PRIORIT ABSOLUE : VARIER LES HAUTS**
L'utilisateur possde de nombreux hauts diffrents. Tu DOIS explorer toute la garde-robe !

 **INTERDICTIONS STRICTES** :
-  JAMAIS utiliser 2 fois le mme haut dans les 3 tenues
-  JAMAIS se limiter aux basiques "safe" (t-shirt blanc, chemise blanche, etc.)
-  JAMAIS rpter la mme couleur de haut 3 fois
-  JAMAIS rpter le mme style de haut 3 fois (ex: 3 t-shirts unis)

 **OBLIGATION DE DIVERSIT** :
- Chaque tenue DOIT avoir un haut DIFFRENT (nom, couleur, style)
- Varier les TYPES de hauts : Mix t-shirt + chemise + pull, ou t-shirt + sweat + polo, etc.
- Varier les COULEURS de hauts : Si tenue 1 = haut blanc, alors tenue 2 et 3 = autres couleurs
- Varier les STYLES : Alterner entre casual (t-shirt, sweat) et smart-casual (chemise, pull structur)
- Utiliser des pices MOINS VIDENTES : Explorer les hauts colors,  motifs, originaux (pas toujours les neutres basiques)

 **STRATGIE DE SLECTION DES HAUTS** :
1. **Tenue 1** : Choisir un haut (ex: chemise bleue)
2. **Tenue 2** : Choisir un haut COMPLTEMENT diffrent en type ET couleur (ex: t-shirt noir)
3. **Tenue 3** : Choisir encore un autre haut, diffrent des 2 premiers (ex: pull beige)

 **PANTALONS** :
- Si l'utilisateur a peu de pantalons (2-3), c'est NORMAL de les rpter
- Focus la varit sur les HAUTS et CHAUSSURES
- Si possible, ne pas utiliser 3 fois le mme pantalon, mais c'est acceptable si contraintes de couleur/mto


 ACCESSOIRES & SLECTION INTELLIGENTE


 **RGLE ABSOLUE : UNE MONTRE PAR TENUE**
Si l'utilisateur possde des montres dans sa garde-robe, tu DOIS en inclure UNE dans chaque tenue.
La montre n'est PAS optionnelle si disponible !

 **SLECTION INTELLIGENTE DES MONTRES** (CRUCIAL - Ne pas choisir au hasard !)

**RGLES PAR TYPE DE MONTRE** :

 **Montres connectes/sportives** (Apple Watch, Samsung Galaxy Watch, montres sport) :
-  Parfaites avec : tenues casual, sportswear, streetwear, tenues dcontractes weekend
-  Look moderne et tech-friendly
-  VITER avec : tenues formelles (costume, chemise habille), occasions lgantes
- Exemples : t-shirt + jean + sneakers, sweat + jogger, polo + chino casual

 **Montres classiques bracelet CUIR MARRON/CAMEL** :
-  Parfaites avec : tenues smart-casual, chinos beiges/kaki, chaussures marron/beige
-  Style lgant dcontract, chaleureux
-  JAMAIS avec : chaussures noires (clash de tons chauds/froids)
-  VITER avec : tenues trs sportives ou streetwear
- Exemples : chemise + chino beige + mocassins marron, pull + jean + boots marron

 **Montres classiques bracelet CUIR NOIR** :
-  Parfaites avec : tenues formelles, business, smart-casual lgant, chaussures noires
-  Style sophistiqu et professionnel
-  JAMAIS avec : chaussures marron (incompatibilit marron/noir)
- Exemples : chemise + pantalon noir + chaussures noires, look monochromatique noir/gris

 **Montres bracelet MTAL/ACIER** :
-  Trs polyvalentes, fonctionnent avec presque tout
-  Style moderne, pur, urbain
-  Compatibles avec : casual chic, smart-casual, mme formel selon le modle
-  Vont avec toutes couleurs de chaussures
- Exemples : chemise + jean + baskets blanches, t-shirt + chino + sneakers

 **Montres DORES/Or** :
-  Pour tenues lgantes, soires, occasions spciales
-  Style statement,  utiliser avec intention
-  Fonctionnent bien avec : tons chauds (beige, camel, marron), blanc, noir
-  VITER avec : tenues trs casual/sportives (effet too much)

 **Montres  bracelet COULEUR/TISSU** (NATO, toile, silicone color) :
-  Casual et fun, parfaites pour tenues dcontractes
-  Adapter la couleur du bracelet aux couleurs de la tenue
-  VITER avec : tenues formelles ou lgantes

 **STRATGIE DE SLECTION** :
1. Identifier le niveau de formalit de la tenue (sportif  casual  smart-casual  formel)
2. Regarder la couleur des chaussures (noir  montre cuir noir ou acier, marron  montre cuir marron ou acier)
3. Choisir la montre qui correspond au style ET aux couleurs de la tenue
4. En cas de doute : montre acier = safe choice polyvalente

 **ERREURS  VITER** :
-  Montre connecte sportive avec costume/tenue formelle
-  Montre cuir marron avec chaussures noires
-  Montre cuir noir avec chaussures marron
-  Montre dore lgante avec sweat + jogger
-  Choisir toujours la mme montre pour les 3 tenues (sauf si une seule disponible)

 **VARIT DES MONTRES** :
Si l'utilisateur possde plusieurs montres, VARIE les montres entre les 3 tenues selon les styles !

 **AUTRES ACCESSOIRES** :

**Bracelets** :
- Peuvent tre ajouts EN PLUS de la montre (au poignet oppos)
- Style casual/dcontract uniquement
- viter avec tenues trs formelles

**Ceinture** :
- OBLIGATOIRE avec pantalons classiques  passants (chino, pantalon habill)
- Coordonner avec les chaussures : chaussures marron  ceinture marron, chaussures noires  ceinture noire
- PAS ncessaire avec jeans  taille lastique ou joggers

**charpe** :
- Si temprature < 10C
- Coordonner avec la palette de couleurs de la tenue

**Casquette/Chapeau** :
- Selon le style et l'occasion
- Casual/streetwear : casquette snapback, dad cap
- lgant : chapeau feutre, panama (selon saison)


 RGLE CRITIQUE - UTILISATION DES IDs (NON NGOCIABLE)


 **INTERDICTION ABSOLUE** :
-  JAMAIS inventer ou modifier un ID
-  JAMAIS utiliser un ID qui n'est pas dans la liste ci-dessus
-  JAMAIS tronquer, raccourcir ou modifier un ID

 **OBLIGATION** :
- Tu DOIS copier-coller les IDs EXACTEMENT comme fournis
- Chaque ID est unique et doit tre utilis TEL QUEL (avec tirets, chiffres, lettres)
- Si un ID ressemble  "abc-123-def-456", tu DOIS utiliser "abc-123-def-456"

 **EXEMPLE DE FORMAT ATTENDU** :
Si la liste contient : "Pull bleu marine col V (ID: a1b2c3d4-e5f6-7890)"
Dans ta rponse JSON, tu DOIS mettre :
{
  "id": "a1b2c3d4-e5f6-7890",
  "description": "Pull bleu marine col V"
}

 **VRIFICATION AVANT ENVOI** :
Avant de finaliser ta rponse, vrifie que CHAQUE ID dans ta rponse JSON existe EXACTEMENT dans la liste des vtements disponibles ci-dessus.


${r?`

 RAPPEL FINAL - ARTICLE OBLIGATOIRE

VRIFIE que CHACUNE des 3 tenues inclut bien :
 "${"name"in r?r.name:r.analysis}" (ID: ${r.id})
Et que tu utilises EXACTEMENT cet ID : ${r.id}
`:""}`;try{const A=(await c6({prompt:x})).data;return XR(A.tenues,u,e)}catch(_){throw console.error("Erreur gnration tenues:",_),new Error("Erreur lors de la gnration des tenues.")}}function XR(t,e,n){const r=new Set([...e.map(o=>o.id),...n.map(o=>o.id)]),s=[...e,...n];return t.map(o=>({...o,vetements:o.vetements.map(u=>{const d=u.id.trim();if(r.has(d))return u;console.warn(` ID invalide dtect: "${d}" pour "${u.description}"`);let h=s.find(f=>("name"in f?f.name:f.analysis).toLowerCase()===u.description.toLowerCase());return h||(h=s.find(f=>{const v="name"in f?f.name:f.analysis,b=u.description.toLowerCase();return v.toLowerCase().includes(b)||b.includes(v.toLowerCase())})),h?(console.log(` ID corrig: "${d}"  "${h.id}" pour "${u.description}"`),{...u,id:h.id}):(console.error(` Aucun match trouv pour: "${u.description}" (ID: ${d})`),u)})}))}function m6(t,e,n){const r=new Set([...e.map(d=>d.id),...n.map(d=>d.id)]),s=[...e,...n],o=new Map;n.forEach(d=>{d.itemIds.forEach(h=>{o.set(h,d.id)})});const u=new Set;return{...t,valise:t.valise.map(d=>{const h=d.id.trim();if(o.has(h)){const v=o.get(h),b=n.find(x=>x.id===v);return u.has(v)?(console.warn(` [VALISE] Item "${d.description}" fait partie du set "${b.name}" dj inclus, ignor`),null):(u.add(v),console.warn(` [VALISE] Item individuel "${d.description}" (${h}) fait partie du set "${b.name}"`),console.log(` [VALISE] Remplacement par l'ensemble complet (ID: ${v})`),{id:v,description:b.name})}if(r.has(h))return n.some(v=>v.id===h)&&u.add(h),d;console.warn(` [VALISE] ID invalide dtect: "${h}" pour "${d.description}"`);let f=s.find(v=>("name"in v?v.name:v.analysis).toLowerCase()===d.description.toLowerCase());if(f||(f=s.find(v=>{const b="name"in v?v.name:v.analysis,x=d.description.toLowerCase();return b.toLowerCase().includes(x)||x.includes(b.toLowerCase())})),f){if("analysis"in f&&o.has(f.id)){const v=o.get(f.id),b=n.find(x=>x.id===v);return u.has(v)?null:(u.add(v),console.log(` [VALISE] ID corrig: "${h}"  Ensemble "${b.name}" (${v})`),{id:v,description:b.name})}return console.log(` [VALISE] ID corrig: "${h}"  "${f.id}" pour "${d.description}"`),{...d,id:f.id}}return console.error(` [VALISE] Aucun match trouv pour: "${d.description}" (ID: ${h})`),d}).filter(d=>d!==null)}}async function p6(t,e,n,r,s){const o=new Set((e||[]).flatMap(_=>_.itemIds)),u=t.filter(_=>!o.has(_.id)&&!_.isExcluded),h=u.map(_=>`- ${_.analysis} (ID: ${_.id}, Cat: ${_.category}, Matire: ${_.material})`).join(`
`),v=r.vetements.filter(_=>_.id!==s.id).map(_=>`   GARDER : "${_.description}" (ID: ${_.id})`).join(`
`),b=`   REMPLACER : "${s.description}" (ID: ${s.id})`,x=`Tu es un styliste expert. L'utilisateur aime cette tenue mais veut remplacer UNE SEULE pice.

**TENUE ACTUELLE** : "${r.titre}"
${r.description}

**INSTRUCTIONS DE MODIFICATION** :
${v}
${b}

 **RGLE ABSOLUE** : Tu DOIS inclure EXACTEMENT les mmes articles marqus " GARDER" avec leurs IDs exacts dans chacune des 3 tenues.
Tu dois UNIQUEMENT remplacer l'article marqu " REMPLACER" par une alternative diffrente parmi les vtements disponibles.
Tu ne peux remplacer qu'avec une PICE INDIVIDUELLE (pas un ensemble/set). Choisis uniquement parmi les articles lists ci-dessous.

**CONTEXTE** : ${n}

Vtements disponibles (pices individuelles uniquement) :
${h}


 PRIORIT 1 - TEMPRATURE (RGLE ABSOLUE)


Analyse la mto dans le contexte et applique :

| Temprature | Rgle stricte |
|-------------|---------------|
| **< 15C** | Layering OBLIGATOIRE : Base (t-shirt/chemise) + Pull/Sweat + Manteau |
| **15-20C** | Pull, sweat, ou veste lgre suffisent |
| **20-25C** | 1 seule couche (t-shirt OU chemise lgre) |
| **> 25C** | Vtements TRS lgers uniquement. INTERDITS : jeans pais, pulls, vestes |

 **INTERDICTIONS THERMIQUES** :
- Doudoune/manteau si > 15C
- Short si < 22C
- Pull laine si > 15C
- Sandales si < 25C


 PRIORIT 2 - LAYERING (SUPERPOSITION)


**RGLES DE SUPERPOSITION VALIDES** :

 **Pull col V**  TOUJOURS avec chemise dessous (sinon nglig)
 **Pull col zipp/camionneur**  TOUJOURS avec t-shirt ou chemise dessous
 **Pull col rond (classique)**  UNIQUEMENT avec t-shirt uni dessous, JAMAIS avec chemise
 **Sweat/Pull sportif**  UNIQUEMENT avec t-shirt, JAMAIS avec chemise
 **Veste/Blazer**  Sur t-shirt, chemise, pull fin, ou col roul
 **Manteau**  Sur pull, sweat, ou veste (si trs froid)
 **Col roul**  JAMAIS avec chemise !

 **INTERDICTIONS ABSOLUES DE LAYERING** :
- JAMAIS chemise avec col roul (aberration stylistique)
- JAMAIS chemise avec pull col rond/ras-du-cou (trop formel + trop casual = clash)
- JAMAIS chemise avec sweat ou pull sportif (incompatibilit de style totale)
- JAMAIS col V sans rien dessous en contexte formel
- JAMAIS pull pais sous veste ajuste (volume excessif)
- JAMAIS 2 cols montants ensemble (col roul + col montant)


 PRIORIT 3 - COHRENCE & HARMONIE


**STRUCTURE** : Chaque tenue = Haut + Bas + Chaussures (minimum)

**COHRENCE DE STYLE (CRUCIAL)** :
-  JAMAIS mlanger sportif et formel (ex: sweat dlav + chemise = NON)
-  JAMAIS associer streetwear et business (ex: jogger + chemise = NON)
-  Style cohrent : tout casual OU tout formel OU smart-casual quilibr
-  Chemise = TOUJOURS avec pices au moins smart-casual (chino, jean brut, blazer)
-  Pull sportif/sweat = TOUJOURS avec pices casual (jean dlav, jogger, sneakers)

**COULEURS & HARMONIES (RGLES STRICTES)** :

 **RGLE FONDAMENTALE** : Une tenue = 1 couleur neutre dominante + 1-2 couleurs d'accent MAXIMUM

 **COULEURS NEUTRES SAFE (Base de toute tenue)** :
- Noir, Blanc, Gris (clair/moyen/fonc), Beige, Camel, Marine, Kaki
- Ces couleurs vont entre elles ET avec toutes les autres

 **ASSOCIATIONS EXCELLENTES** (Utiliser prioritairement) :
- Noir + Blanc (classique intemporel)
- Marine + Blanc (lgant et frais)
- Marine + Beige/Camel (chic et raffin)
- Gris + Blanc (sobre et moderne)
- Gris + Marine (professionnel)
- Noir/Gris/Blanc + n'importe quelle couleur vive (la couleur vive devient l'accent)
- Beige + Marron (tons terreux naturels)
- Kaki + Blanc/Beige (style casual naturel)
- Denim bleu + Blanc/Beige/Marron (combinaison casual parfaite)

 **ASSOCIATIONS ACCEPTABLES** (OK mais prudence) :
- Bleu clair + Marine (OK si tons suffisamment diffrents)
- Marron + Marine (OK mais viter si trop similaires en luminosit)
- Vert olive + Marine/Noir (style militaire, fonctionne)
- Bordeaux/Burgundy + Noir/Gris (lgant si bien dos)

 **ASSOCIATIONS  VITER** (Fautes de got classiques) :
- Noir + Marine (trop proches, confusion visuelle)
- Noir + Marron (incompatibilit classique du stylisme)
- Marine + Marron fonc (confusion des tons sombres)
- Bleu royal vif + Noir (contraste trop brutal)
- Plus de 1 couleur vive par tenue (surcharge visuelle)
- Denim bleu moyen + Pull/Veste bleu similaire (effet total-look rat)

 **RGLES CRITIQUES PAR PICE** :

**CHAUSSURES avec BAS** (CRUCIAL - source principale des fautes) :
-  Chaussures NOIRES : Excellent avec pantalon noir, gris fonc, jean noir/brut fonc, chino anthracite
-  Chaussures NOIRES : ACCEPTABLE avec jean bleu fonc/brut (si jean trs fonc)
-  Chaussures NOIRES : VITER avec jean bleu clair/moyen, chino beige clair (prfrer marron/beige/blanc)
-  Chaussures MARRON/BEIGES : Parfait avec jean bleu (toutes nuances), chino beige/kaki/camel, pantalon marron/terre
-  Chaussures MARRON : JAMAIS avec pantalon noir (faute majeure de stylisme)
-  Chaussures BLANCHES/CLAIRES : Universal casual, vont avec tout sauf tenues trs formelles
-  Chaussures MARINES : Excellent avec jean bleu, chino beige, pantalon gris

**HAUTS avec BAS** :
- Jean BLEU : Privilgier hauts blancs, gris, noirs, beiges, couleurs vives. viter autres bleus de nuance similaire
- Pantalon NOIR : Toutes couleurs acceptes, c'est la base la plus versatile
- Pantalon BEIGE/CHINO : Excellents avec marine, blanc, bleu ciel, vert olive, bordeaux
- Pantalon GRIS : Trs polyvalent, accepte presque toutes couleurs

 **STRATGIE GAGNANTE** :
1. Choisir d'abord le BAS (pantalon) en couleur neutre
2. Assortir les CHAUSSURES selon les rgles strictes ci-dessus
3. Choisir le HAUT dans une couleur compatible avec le bas
4. Si ajout veste/accessoire : rester dans les neutres OU reprendre une couleur dj prsente

**MOTIFS & PATTERNS** :
- Maximum 1 motif visible par tenue
- Si haut  motifs  bas UNI obligatoire
- Si bas  motifs  haut UNI obligatoire
- Rayures fines discrtes = considr comme uni

**VARIT & DIVERSIFICATION DES ALTERNATIVES** :

 **OBLIGATION : 3 ALTERNATIVES VRAIMENT DIFFRENTES**

 **SI REMPLACEMENT D'UN HAUT** :
-  JAMAIS proposer 3 hauts de la mme couleur
-  JAMAIS proposer 3 hauts du mme type (ex: 3 t-shirts, 3 chemises)
-  VARIER les couleurs : Alternative 1 = blanc, Alternative 2 = noir, Alternative 3 = couleur vive
-  VARIER les styles : Mix t-shirt + chemise + pull, ou casual + smart-casual + formel
-  Explorer des options MOINS VIDENTES (pas toujours les basiques neutres)

 **SI REMPLACEMENT D'UN BAS** :
- Varier les couleurs/nuances si plusieurs options disponibles
- Alterner entre casual et formel si la garde-robe le permet

 **SI REMPLACEMENT DE CHAUSSURES** :
- Proposer diffrents styles : sneakers, boots, mocassins, etc.
- Varier les couleurs selon compatibilit avec le pantalon conserv

 **HARMONIE** :
- Chaque alternative DOIT respecter les rgles de couleurs avec les pices conserves
- Maintenir la cohrence de style (ne pas passer de formel  streetwear)


 ACCESSOIRES & SLECTION INTELLIGENTE


 **RGLE ABSOLUE : UNE MONTRE PAR TENUE**
Si l'utilisateur possde des montres dans sa garde-robe, tu DOIS en inclure UNE dans chaque tenue.
La montre n'est PAS optionnelle si disponible !

 **SLECTION INTELLIGENTE DES MONTRES** (CRUCIAL - Ne pas choisir au hasard !)

**RGLES PAR TYPE DE MONTRE** :

 **Montres connectes/sportives** (Apple Watch, Samsung Galaxy Watch, montres sport) :
-  Parfaites avec : tenues casual, sportswear, streetwear, tenues dcontractes weekend
-  Look moderne et tech-friendly
-  VITER avec : tenues formelles (costume, chemise habille), occasions lgantes
- Exemples : t-shirt + jean + sneakers, sweat + jogger, polo + chino casual

 **Montres classiques bracelet CUIR MARRON/CAMEL** :
-  Parfaites avec : tenues smart-casual, chinos beiges/kaki, chaussures marron/beige
-  Style lgant dcontract, chaleureux
-  JAMAIS avec : chaussures noires (clash de tons chauds/froids)
-  VITER avec : tenues trs sportives ou streetwear
- Exemples : chemise + chino beige + mocassins marron, pull + jean + boots marron

 **Montres classiques bracelet CUIR NOIR** :
-  Parfaites avec : tenues formelles, business, smart-casual lgant, chaussures noires
-  Style sophistiqu et professionnel
-  JAMAIS avec : chaussures marron (incompatibilit marron/noir)
- Exemples : chemise + pantalon noir + chaussures noires, look monochromatique noir/gris

 **Montres bracelet MTAL/ACIER** :
-  Trs polyvalentes, fonctionnent avec presque tout
-  Style moderne, pur, urbain
-  Compatibles avec : casual chic, smart-casual, mme formel selon le modle
-  Vont avec toutes couleurs de chaussures
- Exemples : chemise + jean + baskets blanches, t-shirt + chino + sneakers

 **Montres DORES/Or** :
-  Pour tenues lgantes, soires, occasions spciales
-  Style statement,  utiliser avec intention
-  Fonctionnent bien avec : tons chauds (beige, camel, marron), blanc, noir
-  VITER avec : tenues trs casual/sportives (effet too much)

 **Montres  bracelet COULEUR/TISSU** (NATO, toile, silicone color) :
-  Casual et fun, parfaites pour tenues dcontractes
-  Adapter la couleur du bracelet aux couleurs de la tenue
-  VITER avec : tenues formelles ou lgantes

 **STRATGIE DE SLECTION** :
1. Identifier le niveau de formalit de la tenue (sportif  casual  smart-casual  formel)
2. Regarder la couleur des chaussures (noir  montre cuir noir ou acier, marron  montre cuir marron ou acier)
3. Choisir la montre qui correspond au style ET aux couleurs de la tenue
4. En cas de doute : montre acier = safe choice polyvalente

 **ERREURS  VITER** :
-  Montre connecte sportive avec costume/tenue formelle
-  Montre cuir marron avec chaussures noires
-  Montre cuir noir avec chaussures marron
-  Montre dore lgante avec sweat + jogger
-  Choisir toujours la mme montre pour les 3 tenues (sauf si une seule disponible)

 **VARIT DES MONTRES** :
Si l'utilisateur possde plusieurs montres, VARIE les montres entre les 3 tenues selon les styles !

 **AUTRES ACCESSOIRES** :

**Bracelets** :
- Peuvent tre ajouts EN PLUS de la montre (au poignet oppos)
- Style casual/dcontract uniquement
- viter avec tenues trs formelles

**Ceinture** :
- OBLIGATOIRE avec pantalons classiques  passants (chino, pantalon habill)
- Coordonner avec les chaussures : chaussures marron  ceinture marron, chaussures noires  ceinture noire
- PAS ncessaire avec jeans  taille lastique ou joggers

**charpe** :
- Si temprature < 10C
- Coordonner avec la palette de couleurs de la tenue

**Casquette/Chapeau** :
- Selon le style et l'occasion
- Casual/streetwear : casquette snapback, dad cap
- lgant : chapeau feutre, panama (selon saison)


 RGLE CRITIQUE - UTILISATION DES IDs (NON NGOCIABLE)


 **INTERDICTION ABSOLUE** :
-  JAMAIS inventer ou modifier un ID
-  JAMAIS utiliser un ID qui n'est pas dans la liste ci-dessus
-  JAMAIS tronquer, raccourcir ou modifier un ID

 **OBLIGATION** :
- Tu DOIS copier-coller les IDs EXACTEMENT comme fournis
- Pour les articles  GARDER (), tu DOIS utiliser EXACTEMENT les mmes IDs
- Chaque ID est unique et doit tre utilis TEL QUEL (avec tirets, chiffres, lettres)

 **EXEMPLE DE FORMAT ATTENDU** :
Si un article  garder a l'ID "a1b2c3d4-e5f6-7890", dans ta rponse JSON tu DOIS mettre :
{
  "id": "a1b2c3d4-e5f6-7890",
  "description": "Description de l'article"
}

 **VRIFICATION AVANT ENVOI** :
1. Vrifie que les articles marqus " GARDER" ont EXACTEMENT les mmes IDs
2. Vrifie que l'article de remplacement a un ID qui existe dans la liste disponible



Gnre 3 variantes qui respectent TOUTES les rgles ci-dessus.`;try{const A=(await d6({prompt:x})).data;return XR(A.tenues,u,[])}catch(_){throw console.error("Erreur gnration variantes:",_),new Error("Erreur lors de la gnration des variantes.")}}async function g6(t,e,n,r,s){const o=new Set((s||[]).flatMap(_=>_.itemIds)),u=r.filter(_=>!o.has(_.id)&&!_.isExcluded),d={Hauts:u.filter(_=>_.category==="Hauts"),Bas:u.filter(_=>_.category==="Bas"),Chaussures:u.filter(_=>_.category==="Chaussures"),Accessoires:u.filter(_=>_.category==="Accessoires")},h=Object.entries(d).map(([_,A])=>{if(A.length===0)return"";const R=A.map(M=>`  - ${M.analysis} (ID: ${M.id}, Matire: ${M.material})`).join(`
`);return`**${_}** (${A.length}) :
${R}`}).filter(Boolean).join(`

`),f=s.length>0?`
**Ensembles** (${s.length}) :
${s.map(_=>`  - ${_.name} (ID: ${_.id})`).join(`
`)}`:"",v=n.map(_=>`${_.role==="user"?"User":"Assistant"}: ${_.content}`).join(`
`),b=t.vetements.map(_=>`  - ${_.description} (ID: ${_.id})`).join(`
`),x=`Tu es un ASSISTANT STYLISTE SPCIALIS pour l'application DressCode.

 **RGLES ABSOLUES** :
1. Tu REFUSES CATGORIQUEMENT toute question hors mode/style/vtements
2. Si demande hors-sujet  Rponds: "Je suis ton styliste IA  Je ne peux parler que de mode, tenues et style. Comment puis-je t'aider avec tes vtements ?"
3. PAS de recettes, code, math, histoire, etc.
4. UNIQUEMENT : conseils de style, tenues, accessoires, couleurs, matires

 **RGLE CRITIQUE - SUGGESTIONS UNIQUEMENT DEPUIS LA GARDE-ROBE** :

 TU DOIS :
- TOUJOURS suggrer des pices qui existent dans sa garde-robe
- Dcrire les items de manire naturelle SANS mentionner leur ID (ex: "Ta veste bomber noire Burberry" au lieu de "ID: 12345")
- Expliquer POURQUOI cette pice spcifique irait mieux
- Si aucune alternative n'existe, le dire clairement

 TU NE DOIS JAMAIS :
- Suggrer d'acheter quoi que ce soit
- Inventer des pices qu'il ne possde pas
- Donner des conseils gnriques sans rfrencer ses items rels
- Afficher les IDs techniques dans tes rponses (ils sont moches et inutiles pour l'utilisateur)



 **TENUE ACTUELLE** : "${t.titre}"
${t.description}

Pices composant cette tenue :
${b}



 **GARDE-ROBE COMPLTE DE L'UTILISATEUR** :

${h}${f}



 **HISTORIQUE DE CONVERSATION** :
${v||"(Pas d'historique)"}



 **NOUVEAU MESSAGE** :
${e}



 **INSTRUCTIONS DE RPONSE** :
- Rponds en franais, de manire concise et amicale (2-4 phrases max)
- Si tu suggres une alternative, dcris-la naturellement (sans ID) et explique pourquoi
- Si l'utilisateur n'a pas d'alternative, sois honnte
- Reste focus sur cette tenue spcifique
- Pas d'actions (gnration) pour le moment, uniquement des conseils

 **FORMAT DE RPONSE JSON** :
{
  "message": "Ta rponse textuelle ici",
  "isRejected": true/false
}

 Mets "isRejected": true UNIQUEMENT si la question est TOTALEMENT hors-sujet mode/style (recette, code, math, histoire, etc.)
 Mets "isRejected": false pour toute question lie  la mode, mme vaguement`;try{const A=(await h6({prompt:x})).data;return{message:A.message,isRejected:A.isRejected}}catch(_){throw console.error("Erreur gnration chat:",_),new Error("Erreur lors de la gnration de la rponse.")}}const v6=rl(il,"analyzeWardrobeGapsFunction");async function y6(t,e,n){if(n!=null&&n.aborted)throw new DOMException("Analyse annule","AbortError");const r={Hauts:t.filter(h=>h.category==="Hauts"),Bas:t.filter(h=>h.category==="Bas"),Chaussures:t.filter(h=>h.category==="Chaussures"),Accessoires:t.filter(h=>h.category==="Accessoires")},s=Object.entries(r).map(([h,f])=>`**${h}** (${f.length}) :
${f.map(v=>`  - ${v.analysis} (${v.color}, ${v.material})`).join(`
`)}`).join(`

`),o=t.length,u=e.length>0,d=`Tu es un expert styliste et conseiller en garde-robe avec 20 ans d'exprience. Ta mission : analyser cette garde-robe et suggrer des achats stratgiques pour maximiser la polyvalence.

 **INVENTAIRE ACTUEL** (${o} pices${u?`, ${e.length} ensembles`:""}) :

${s}

---

 **OBJECTIF DE L'ANALYSE** :
Identifier les **pices manquantes cls** qui permettront de crer le maximum de tenues diffrentes avec l'existant.

 **MTHODOLOGIE** :

1. **ANALYSE STRATGIQUE** :
   - quilibre entre catgories (ratio Hauts/Bas/Chaussures)
   - Diversit des couleurs (neutres vs. vives)
   - Polyvalence des pices existantes
   - Occasions couvertes (casual, formel, sport, etc.)
   - Saisons couvertes

2. **IDENTIFICATION DES GAPS CRITIQUES** :
   - Pices basiques manquantes (ex: chemise blanche, jean brut)
   - Couleurs absentes pour complter les palettes
   - Styles/occasions non couverts
   - Opportunits de layering (superposition)

3. **PRIORISATION** :
   - **HIGH** : Pice essentielle manquante qui dbloque 5+ nouvelles tenues
   - **MEDIUM** : Pice utile qui ajoute de la varit (3-5 tenues)
   - **LOW** : Pice "nice-to-have" pour occasions spcifiques

4. **SUGGESTIONS D'ACHATS** (4-6 pices maximum) :
   - Focus sur la **POLYVALENCE** : chaque suggestion doit se marier avec plusieurs pices existantes
   - Inclure des **pices basiques intemporelles** avant les tendances
   - quilibrer les priorits (au moins 1-2 high priority)
   - Pour chaque suggestion, fournis :
     * Une description prcise (ex: "Chemise oxford bleu clair en coton")
     * La raison stratgique (ex: "Se marie avec vos 3 pantalons et cre une base smart-casual")
     * Un prix estim raliste en 
     * Une requte de recherche optimise (mots-cls pour Zalando/autres boutiques)

---

 **RGLES CRITIQUES** :

- NE suggre PAS de pices similaires  l'existant
- Favorise les neutres (blanc, noir, beige, navy) pour maximiser les combinaisons
- vite les pices trs spcifiques/occasionnelles (sauf si totalement absentes)
- Sois concis mais prcis dans les descriptions
- Le champ \`searchQuery\` doit contenir des mots-cls optimiss pour recherche en ligne (ex: "chemise oxford homme coton bleu clair" ou "pull col V mrinos noir homme")

Retourne ton analyse au format JSON.`;try{const h=await v6({prompt:d});if(n!=null&&n.aborted)throw new DOMException("Analyse annule","AbortError");return h.data}catch(h){throw h instanceof DOMException&&h.name==="AbortError"?h:(console.error("Erreur analyse garde-robe:",h),new Error("Erreur lors de l'analyse de la garde-robe."))}}const b6=rl(il,"generateVacationPlanFunction");async function x6(t,e,n,r,s){const o=new Set((e||[]).flatMap(x=>x.itemIds)),d=t.filter(x=>!o.has(x.id)&&!x.isExcluded).map(x=>`- ${x.analysis} (ID: ${x.id}, Cat: ${x.category}, Couleur: ${x.color}, Matire: ${x.material})`).join(`
`),h=e.map(x=>{const A=x.itemIds.map(R=>t.find(M=>M.id===R)).filter(R=>R!==void 0).map(R=>`     ${R.analysis} (Cat: ${R.category}, Couleur: ${R.color}, Matire: ${R.material})`).join(`
`);return`- **ENSEMBLE "${x.name}"** (ID Ensemble: ${x.id}) -  INDIVISIBLE (utiliser tous les items ou aucun) :
${A}`}).join(`

`),f=[d,h].filter(Boolean).join(`

`),v=s?`
**CONTRAINTE POIDS** : Le poids total DOIT tre proche de ${s} kg (marge : ${s-.5} - ${s} kg). Utilise bien la capacit disponible !

**Poids de rfrence ralistes** :
- T-shirt : ~150g
- Chemise : ~200g
- Jean/Denim : ~650g
- Pantalon coton/chino : ~500g
- Jogging/Pantalon lger : ~350g
- Pull laine : ~350g
- Sweat : ~400g
- Veste lgre : ~500g
- Manteau/Doudoune : ~1kg
- Chaussures (par paire) : ~1kg
- Baskets (par paire) : ~1kg
- Chaussures de ville cuir : ~1,2kg
- Sous-vtements : ~50g
- Chaussettes : ~50g
- Accessoires (lunettes, casquette, etc.) : ~100g`:"",b=`Tu es un expert en prparation de valise. Cre une **CAPSULE WARDROBE** optimise pour ${n} jours.

**DESTINATION & CONTEXTE** : ${r}

**PRINCIPE CAPSULE WARDROBE** : Slectionner des pices polyvalentes qui se combinent entre elles pour crer un maximum de tenues diffrentes.

**RGLES CRITIQUES** :

1. **LOGIQUE THERMIQUE (PRIORIT ABSOLUE)** :

   | Temprature | Vtements adapts |
   |-------------|-------------------|
   | **> 30C (TRS CHAUD)** | T-shirts lgers, shorts, robes, sandales. INTERDITS : jeans, pulls, vestes |
   | **25-30C (CHAUD)** | T-shirts, pantalons lgers, une chemise, baskets lgres |
   | **15-25C (DOUX)** | Mix lger + 1 pull fin ou veste lgre |
   | **10-15C (FRAIS)** | Pulls, pantalons, veste, chaussures fermes |
   | **< 10C (FROID)** | Layering complet : sous-couche + pull + manteau chaud |

2. **INTERDICTIONS ABSOLUES** (NON NGOCIABLE) :
   -  **TOUTE veste/blouson/manteau si > 25C** (veste lgre, sude, cuir, toile - TOUTES interdites)
   -  Doudoune/veste ski/polaire si > 20C
   -  Shorts si < 15C
   -  Sandales si < 18C
   -  Pulls en laine si > 25C
   -  Jeans pais si > 32C

   **EXEMPLES D'INTERDICTIONS** :
   - Destination : Espagne 35C  INTERDIT : veste sude, veste lgre, blouson, pull, jean pais
   - Destination : Ski -5C  INTERDIT : shorts, t-shirts seuls, sandales

3. **MATIRES ADAPTES** :
   - **Climat chaud** : Coton lger, lin, matires respirantes uniquement
   - **Climat froid** : Laine, polaire, matires isolantes
   - **Voyage** : Privilgier matires qui ne se froissent pas

4. **HARMONIE CAPSULE (pour que tout se combine)** :
   - **Palette de couleurs** : Maximum 4-5 couleurs qui vont ensemble (ex: bleu marine, blanc, beige, une couleur d'accent)
   - **Motifs** : Maximum 2 pices  motifs dans toute la valise, le reste UNI
   - **Neutralit** : Au moins 50% de pices en couleurs neutres (noir, blanc, gris, beige, marine)

5. **QUANTITS ADAPTES pour ${n} jours** :
   - **Hauts** : ${Math.max(Math.ceil(n/2),5)}-${Math.max(Math.ceil(n/1.5),8)} pices (mix t-shirts/chemises)
   - **Bas** : ${Math.max(Math.ceil(n/3),3)}-${Math.max(Math.ceil(n/2.5),5)} pices
   - **Chaussures** : 2-3 paires (confort + sport/ville + option soire)
   - **Sous-vtements** : ${Math.min(n+2,10)} pices minimum
   - **Chaussettes** : ${Math.min(n+2,10)} paires minimum
   ${n>7?`   - Pour un sjour de ${n} jours, prvoir SUFFISAMMENT de vtements pour viter les lessives frquentes`:""}

6. **ACCESSOIRES ESSENTIELS** (OBLIGATOIRE) :
   - **Soleil/Chaleur** (si > 25C ou destination ensoleille) : Lunettes de soleil, casquette/chapeau
   - **Froid** (si < 15C) : charpe, bonnet, gants
   - **Voyage** : Ceinture si pantalons formels
   - Privilgier les accessoires disponibles dans la garde-robe

7. **LAYERING INTELLIGENT (si climat variable)** :
   - Prvoir des couches qui s'empilent : t-shirt  chemise/pull lger  veste
   - Chaque couche doit tre portable seule ET en combinaison

8. ** RGLE CRITIQUE SUR LES ENSEMBLES** :
   - Les ENSEMBLES sont INDIVISIBLES : tu DOIS inclure TOUS les items d'un ensemble ou AUCUN
   -  INTERDIT : Prendre seulement le t-shirt d'un ensemble sans son short
   -  CORRECT : Prendre l'ensemble complet OU ne pas le prendre du tout
   - Dans ta rponse JSON, utilise l'ID de l'ENSEMBLE (pas les IDs individuels des items)
   - Si un ensemble ne respecte pas le climat, NE PAS le prendre du tout

${v}

**VTEMENTS DISPONIBLES** :
${f}


 RGLE CRITIQUE - UTILISATION DES IDs (NON NGOCIABLE)


 **INTERDICTION ABSOLUE** :
-  JAMAIS inventer ou modifier un ID
-  JAMAIS utiliser un ID qui n'est pas dans la liste ci-dessus
-  JAMAIS tronquer, raccourcir ou modifier un ID

 **OBLIGATION** :
- Tu DOIS copier-coller les IDs EXACTEMENT comme fournis dans la liste
- Chaque article de la valise DOIT avoir un ID prsent dans "VTEMENTS DISPONIBLES"

 **EXEMPLE DE FORMAT ATTENDU** :
Si la liste contient : "T-shirt blanc en coton (ID: a1b2c3d4-e5f6-7890)"
Dans ta rponse JSON, tu DOIS mettre :
{
  "id": "a1b2c3d4-e5f6-7890",
  "description": "T-shirt blanc en coton"
}



**INSTRUCTIONS FINALES** :
- Cre une valise COMPLTE et PERTINENTE pour ${n} jours
- Si contrainte de poids : MAXIMISE l'utilisation (proche de ${s}kg)
- N'oublie PAS les accessoires essentiels selon le climat
- Pour les longs sjours (> 14 jours), prvoir PLUS de vtements

**SORTIE** :
- Un titre accrocheur pour cette valise
- Un rsum expliquant tes choix (mto, style, combinaisons possibles)
- La liste COMPLTE des articles avec leur ID EXACT copi-coll`;try{const _=(await b6({prompt:b})).data;return m6(_,t,e)}catch(x){throw console.error("Erreur gnration plan vacances:",x),new Error("Erreur lors de la gnration du plan vacances.")}}rl(il,"generateVisualOutfit");console.log(" subcategoryClassifier.ts loaded - VERSION 2.0");const Oa={Hauts:["T-shirts","Chemises","Pulls","Vestes"],Bas:["Pantalons","Shorts","Shorts sportifs"],Chaussures:["Sneakers","Classiques","Bottines"],Accessoires:["Ceintures","Chapeaux","charpes & Foulards","Lunettes","Montres & Bijoux","Sacs"]};console.log(" SUBCATEGORIES loaded:",{keys:Object.keys(Oa),Hauts:Oa.Hauts,Bas:Oa.Bas,Chaussures:Oa.Chaussures,Accessoires:Oa.Accessoires});const E6={"T-shirts":["t-shirt","tee-shirt","tshirt","dbardeur","tank top","maillot","polo","top"],Chemises:["chemise","shirt","blouse","tunique","chemisier"],Pulls:["pull","sweater","sweat","hoodie","gilet","cardigan","tricot","col roul","col v"],Vestes:["veste","blouson","manteau","parka","doudoune","blazer","jacket","coat","trench","bomber","perfecto","teddy"],Pantalons:["pantalon","jean","chino","trouser","cargo","jogging","survtement","slim","regular","straight"],Shorts:["short","bermuda"],"Shorts sportifs":["short sport","short jogging","short running","short gym","short fitness"],Sneakers:["sneaker","basket","tennis","running","sport","air force","dunk","jordan","stan smith","adidas","nike"],Classiques:["derby","richelieu","mocassin","loafer","oxford","chaussure de ville","escarpin","talon","cuir ville"],Bottines:["bottine","boot","chelsea","timberland","ranger","boots"],Ceintures:["ceinture","belt"],Chapeaux:["chapeau","casquette","bonnet","bob","bret","cap","hat"],"charpes & Foulards":["charpe","foulard","scarf","cheche","chle"],Lunettes:["lunettes","glasses","soleil"],"Montres & Bijoux":["montre","bracelet","collier","bague","boucle","watch","jewelry","bijou"],Sacs:["sac","bag","besace","cartable","pochette","bandoulire"]};function _6(t,e){const n=t.toLowerCase(),r=Oa[e];if(r)for(const s of r){const o=E6[s];if(o){for(const u of o)if(n.includes(u))return s}}}function T6(t){let e=0,n=0,r=0;const s=t.map(o=>{if(o.subcategory)return n++,o;const u=_6(o.analysis,o.category);return u?(e++,{...o,subcategory:u}):(r++,o)});return console.log(` Classification: ${e} nouveaux, ${n} existants, ${r} non classifis`),s}const w6=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),S6=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),l0=()=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),A6=({className:t="h-8 w-8 text-gold"})=>g.jsxs("svg",{className:`animate-spin ${t}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Cd=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{d:"M10 3a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0V7H8a1 1 0 110-2h1V4a1 1 0 011-1zM4 9a1 1 0 011 1v1h1a1 1 0 110 2H5v1a1 1 0 11-2 0v-1H2a1 1 0 110-2h1v-1a1 1 0 011-1zM16 9a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})}),zm=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),WS=()=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.5 6.6C12.5 5.54903 11.651 4.7 10.6 4.7C9.54903 4.7 8.7 5.54903 8.7 6.6V8.7C8.7 9.36274 9.23726 9.9 9.9 9.9H14.1C14.7627 9.9 15.3 9.36274 15.3 8.7V7.8"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.10879 16.5C4.43285 14.805 5.86246 13.5 7.6 13.5H16.4C18.1375 13.5 19.5672 14.805 19.8912 16.5L20.5 19.5H3.5L4.10879 16.5Z"})]}),JR=()=>g.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4 0 1.132-.497 2.16-1.32 2.874-.823.714-1.823 1.126-2.904 1.126H12v.01M12 17h.01"})}),C6=()=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 4h6l2 5-2 1-3-4-3 4-2-1 2-5z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v10m-3-10v10h6V10"})]}),R6=()=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 4h12v10H6z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 14v6h-2L6 4"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 14v6h2l1-16"})]}),I6=()=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 18h16l-3-6H7L4 18z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 12V7a2 2 0 012-2h0a2 2 0 012 2v5"})]}),N6=()=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 000-18 9 9 0 000 18z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11.5l-3.5 3.5"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.5 8.5l-3.5 3.5"})]}),rd=({className:t="h-5 w-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),k6=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Ou=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),$b=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),O6=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),ZR=()=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[g.jsx("path",{d:"M8 3a1 1 0 000 2h4a1 1 0 100-2H8z"}),g.jsx("path",{fillRule:"evenodd",d:"M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 3a1 1 0 011-1h10a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1V7z",clipRule:"evenodd"})]}),Fm=({className:t="h-5 w-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 016.364 0L12 7.5l1.318-1.182a4.5 4.5 0 116.364 6.364L12 18.75l-7.682-7.682a4.5 4.5 0 010-6.364z"})}),yu=({className:t="h-5 w-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),u0=({className:t="h-5 w-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"})}),eI=({className:t="h-5 w-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),tI=({className:t="h-5 w-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"})}),D6=({theme:t,toggleTheme:e,children:n,isModalOpen:r=!1})=>g.jsx("header",{className:`bg-snow/80 dark:bg-onyx/80 backdrop-blur-lg border-b border-black/5 dark:border-white/10 sticky top-0 transition-all ${r?"z-10":"z-50"}`,children:g.jsxs("div",{className:"container mx-auto px-4 lg:px-8 h-24 flex justify-between items-center",children:[g.jsxs("h1",{className:"text-4xl font-serif font-bold tracking-wider text-raisin-black dark:text-snow",children:["Dress ",g.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),g.jsxs("div",{className:"flex items-center gap-4",children:[n,g.jsx("button",{onClick:e,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-black/5 dark:hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx transition-colors","aria-label":"Changer le thme",children:t==="light"?g.jsx(S6,{}):g.jsx(w6,{})})]})]})}),j6="DRESSMEUP2025",XS=({user:t})=>{var H,G,q;const[e,n]=k.useState(""),[r,s]=k.useState(""),[o,u]=k.useState(""),[d,h]=k.useState(!1),[f,v]=k.useState(!1),[b,x]=k.useState(null),[_,A]=k.useState(!1),R=k.useRef(null);k.useEffect(()=>{const C=S=>{R.current&&!R.current.contains(S.target)&&v(!1)};return f&&document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[f]);const M=async C=>{try{return(await S3(ku(di,"allowedEmails",C.toLowerCase()))).exists()}catch(S){return console.error("Erreur vrification email:",S),!1}},U=async()=>{A(!0),x(null);try{const S=(await x4(Do,o6)).user.email;if(!S){await ty(Do),x("Impossible de rcuprer l'email du compte Google.");return}if(!await M(S)){await ty(Do),x("Dsol, cette application est en beta ferme. Votre email n'est pas autoris.");return}}catch(C){console.error("Erreur de connexion Google:",C),x(C.message||"Erreur de connexion")}finally{A(!1)}},O=async C=>{C.preventDefault(),A(!0),x(null);try{if(d){if(o!==j6){x("Code d'invitation invalide."),A(!1);return}if(!await M(e)){x("Votre email n'est pas dans la liste des beta testeurs."),A(!1);return}await WM(Do,e,r)}else{if(!await M(e)){x("Votre email n'est pas autoris  accder  la beta."),A(!1);return}await XM(Do,e,r)}}catch(S){console.error("Erreur d'authentification:",S),S.code==="auth/user-not-found"?x("Aucun compte trouv avec cet email."):S.code==="auth/wrong-password"?x("Mot de passe incorrect."):S.code==="auth/email-already-in-use"?x("Cet email est dj utilis."):S.code==="auth/weak-password"?x("Le mot de passe doit contenir au moins 6 caractres."):x(S.message||"Erreur d'authentification")}finally{A(!1)}},B=async()=>{try{await ty(Do)}catch(C){console.error("Erreur de dconnexion:",C)}};return t?g.jsxs("div",{className:"relative",ref:R,children:[g.jsxs("button",{onClick:()=>v(!f),className:"flex items-center gap-3 px-4 py-2 rounded-full bg-gold/10 hover:bg-gold/20 transition-all border border-gold/30",children:[g.jsx("div",{className:"w-8 h-8 rounded-full bg-gold flex items-center justify-center text-onyx font-bold",children:(((H=t.displayName)==null?void 0:H[0])||((G=t.email)==null?void 0:G[0])||"U").toUpperCase()}),g.jsx("span",{className:"hidden md:block text-sm font-medium",children:t.displayName||((q=t.email)==null?void 0:q.split("@")[0])})]}),f&&g.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-raisin-black rounded-xl shadow-2xl border border-black/10 dark:border-white/10 overflow-hidden z-50",children:[g.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[g.jsx("p",{className:"text-sm font-medium",children:t.displayName||"Utilisateur"}),g.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.email}),g.jsx("span",{className:"inline-block mt-2 px-2 py-0.5 bg-gold/20 text-gold text-xs font-semibold rounded-full",children:"Beta Testeur"})]}),g.jsxs("button",{onClick:B,className:"w-full px-4 py-3 text-left text-sm hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors flex items-center gap-2",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Dconnexion"]})]})]}):g.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl p-8 max-w-md mx-auto border border-black/5 dark:border-white/10",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:["Dress ",g.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),g.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:d?"Rejoindre la beta":"Bienvenue"}),g.jsx("div",{className:"mt-3 inline-block px-3 py-1 bg-gold/10 border border-gold/30 rounded-full",children:g.jsx("span",{className:"text-xs font-semibold text-gold",children:" Beta prive"})})]}),b&&g.jsx("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/30 rounded-xl text-red-500 text-sm",children:b}),g.jsx("button",{onClick:U,disabled:_,className:"w-full mb-6 px-6 py-4 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl hover:border-gold hover:shadow-lg hover:shadow-gold/20 transition-all duration-300 flex items-center justify-center gap-3 group disabled:opacity-50 disabled:cursor-not-allowed",children:_?g.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):g.jsxs(g.Fragment,{children:[g.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[g.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),g.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),g.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),g.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),g.jsx("span",{className:"font-semibold group-hover:text-gold transition-colors",children:"Continuer avec Google"})]})}),g.jsxs("div",{className:"relative my-6",children:[g.jsx("div",{className:"absolute inset-0 flex items-center",children:g.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),g.jsx("div",{className:"relative flex justify-center text-sm",children:g.jsx("span",{className:"px-4 bg-white dark:bg-raisin-black text-gray-500",children:"Ou avec email"})})]}),g.jsxs("form",{onSubmit:O,className:"space-y-4",children:[g.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:C=>n(C.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),g.jsx("input",{type:"password",placeholder:"Mot de passe",value:r,onChange:C=>s(C.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),d&&g.jsx("input",{type:"text",placeholder:"Code d'invitation",value:o,onChange:C=>u(C.target.value.toUpperCase()),className:"w-full px-4 py-3 border border-gold/50 dark:border-gold/30 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-gold/5 dark:bg-gold/10 transition-all placeholder:text-gold/50",required:!0}),g.jsx("button",{type:"submit",disabled:_,className:"w-full px-6 py-4 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all duration-300 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:_?g.jsxs("svg",{className:"animate-spin h-5 w-5 mx-auto",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):d?"Rejoindre la beta":"Se connecter"})]}),g.jsx("button",{onClick:()=>{h(!d),x(null)},className:"w-full mt-6 text-sm text-gray-500 hover:text-gold transition-colors",children:d?"Dj un compte ? Se connecter":"Pas encore de compte ? Rejoindre la beta"})]})},Kb=k.createContext({});function Yb(t){const e=k.useRef(null);return e.current===null&&(e.current=t()),e.current}const Pp=k.createContext(null),Qb=k.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class M6 extends k.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function P6({children:t,isPresent:e}){const n=k.useId(),r=k.useRef(null),s=k.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=k.useContext(Qb);return k.useInsertionEffect(()=>{const{width:u,height:d,top:h,left:f}=s.current;if(e||!r.current||!u||!d)return;r.current.dataset.motionPopId=n;const v=document.createElement("style");return o&&(v.nonce=o),document.head.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            top: ${h}px !important;
            left: ${f}px !important;
          }
        `),()=>{document.head.removeChild(v)}},[e]),g.jsx(M6,{isPresent:e,childRef:r,sizeRef:s,children:k.cloneElement(t,{ref:r})})}const V6=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:o,mode:u})=>{const d=Yb(L6),h=k.useId(),f=k.useCallback(b=>{d.set(b,!0);for(const x of d.values())if(!x)return;r&&r()},[d,r]),v=k.useMemo(()=>({id:h,initial:e,isPresent:n,custom:s,onExitComplete:f,register:b=>(d.set(b,!1),()=>d.delete(b))}),o?[Math.random(),f]:[n,f]);return k.useMemo(()=>{d.forEach((b,x)=>d.set(x,!1))},[n]),k.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),u==="popLayout"&&(t=g.jsx(P6,{isPresent:n,children:t})),g.jsx(Pp.Provider,{value:v,children:t})};function L6(){return new Map}function nI(t=!0){const e=k.useContext(Pp);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,o=k.useId();k.useEffect(()=>{t&&s(o)},[t]);const u=k.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,u]:[!0]}const kf=t=>t.key||"";function JS(t){const e=[];return k.Children.forEach(t,n=>{k.isValidElement(n)&&e.push(n)}),e}const Wb=typeof window<"u",rI=Wb?k.useLayoutEffect:k.useEffect,ZS=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:o="sync",propagate:u=!1})=>{const[d,h]=nI(u),f=k.useMemo(()=>JS(t),[t]),v=u&&!d?[]:f.map(kf),b=k.useRef(!0),x=k.useRef(f),_=Yb(()=>new Map),[A,R]=k.useState(f),[M,U]=k.useState(f);rI(()=>{b.current=!1,x.current=f;for(let H=0;H<M.length;H++){const G=kf(M[H]);v.includes(G)?_.delete(G):_.get(G)!==!0&&_.set(G,!1)}},[M,v.length,v.join("-")]);const O=[];if(f!==A){let H=[...f];for(let G=0;G<M.length;G++){const q=M[G],C=kf(q);v.includes(C)||(H.splice(G,0,q),O.push(q))}o==="wait"&&O.length&&(H=O),U(JS(H)),R(f);return}const{forceRender:B}=k.useContext(Kb);return g.jsx(g.Fragment,{children:M.map(H=>{const G=kf(H),q=u&&!d?!1:f===M||v.includes(G),C=()=>{if(_.has(G))_.set(G,!0);else return;let S=!0;_.forEach(N=>{N||(S=!1)}),S&&(B==null||B(),U(x.current),u&&(h==null||h()),r&&r())};return g.jsx(V6,{isPresent:q,initial:!b.current||n?void 0:!1,custom:q?void 0:e,presenceAffectsLayout:s,mode:o,onExitComplete:q?void 0:C,children:H},G)})})},ui=t=>t;let iI=ui;function Xb(t){let e;return()=>(e===void 0&&(e=t()),e)}const bu=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Vs=t=>t*1e3,Ls=t=>t/1e3,U6={useManualTiming:!1};function B6(t){let e=new Set,n=new Set,r=!1,s=!1;const o=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function d(f){o.has(f)&&(h.schedule(f),t()),f(u)}const h={schedule:(f,v=!1,b=!1)=>{const _=b&&r?e:n;return v&&o.add(f),_.has(f)||_.add(f),f},cancel:f=>{n.delete(f),o.delete(f)},process:f=>{if(u=f,r){s=!0;return}r=!0,[e,n]=[n,e],e.forEach(d),e.clear(),r=!1,s&&(s=!1,h.process(f))}};return h}const Of=["read","resolveKeyframes","update","preRender","render","postRender"],z6=40;function sI(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,u=Of.reduce((U,O)=>(U[O]=B6(o),U),{}),{read:d,resolveKeyframes:h,update:f,preRender:v,render:b,postRender:x}=u,_=()=>{const U=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(U-s.timestamp,z6),1),s.timestamp=U,s.isProcessing=!0,d.process(s),h.process(s),f.process(s),v.process(s),b.process(s),x.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(_))},A=()=>{n=!0,r=!0,s.isProcessing||t(_)};return{schedule:Of.reduce((U,O)=>{const B=u[O];return U[O]=(H,G=!1,q=!1)=>(n||A(),B.schedule(H,G,q)),U},{}),cancel:U=>{for(let O=0;O<Of.length;O++)u[Of[O]].cancel(U)},state:s,steps:u}}const{schedule:Jt,cancel:Xa,state:lr,steps:uy}=sI(typeof requestAnimationFrame<"u"?requestAnimationFrame:ui,!0),aI=k.createContext({strict:!1}),e1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},xu={};for(const t in e1)xu[t]={isEnabled:e=>e1[t].some(n=>!!e[n])};function F6(t){for(const e in t)xu[e]={...xu[e],...t[e]}}const q6=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function qm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||q6.has(t)}let oI=t=>!qm(t);function H6(t){t&&(oI=e=>e.startsWith("on")?!qm(e):t(e))}try{H6(require("@emotion/is-prop-valid").default)}catch{}function G6(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(oI(s)||n===!0&&qm(s)||!e&&!qm(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function $6(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const Vp=k.createContext({});function Rd(t){return typeof t=="string"||Array.isArray(t)}function Lp(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Jb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Zb=["initial",...Jb];function Up(t){return Lp(t.animate)||Zb.some(e=>Rd(t[e]))}function lI(t){return!!(Up(t)||t.variants)}function K6(t,e){if(Up(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Rd(n)?n:void 0,animate:Rd(r)?r:void 0}}return t.inherit!==!1?e:{}}function Y6(t){const{initial:e,animate:n}=K6(t,k.useContext(Vp));return k.useMemo(()=>({initial:e,animate:n}),[t1(e),t1(n)])}function t1(t){return Array.isArray(t)?t.join(" "):t}const Q6=Symbol.for("motionComponentSymbol");function Xl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function W6(t,e,n){return k.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Xl(n)&&(n.current=r))},[e])}const ex=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),X6="framerAppearId",uI="data-"+ex(X6),{schedule:tx}=sI(queueMicrotask,!1),cI=k.createContext({});function J6(t,e,n,r,s){var o,u;const{visualElement:d}=k.useContext(Vp),h=k.useContext(aI),f=k.useContext(Pp),v=k.useContext(Qb).reducedMotion,b=k.useRef(null);r=r||h.renderer,!b.current&&r&&(b.current=r(t,{visualState:e,parent:d,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:v}));const x=b.current,_=k.useContext(cI);x&&!x.projection&&s&&(x.type==="html"||x.type==="svg")&&Z6(b.current,n,s,_);const A=k.useRef(!1);k.useInsertionEffect(()=>{x&&A.current&&x.update(n,f)});const R=n[uI],M=k.useRef(!!R&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,R))&&((u=window.MotionHasOptimisedAnimation)===null||u===void 0?void 0:u.call(window,R)));return rI(()=>{x&&(A.current=!0,window.MotionIsMounted=!0,x.updateFeatures(),tx.render(x.render),M.current&&x.animationState&&x.animationState.animateChanges())}),k.useEffect(()=>{x&&(!M.current&&x.animationState&&x.animationState.animateChanges(),M.current&&(queueMicrotask(()=>{var U;(U=window.MotionHandoffMarkAsComplete)===null||U===void 0||U.call(window,R)}),M.current=!1))}),x}function Z6(t,e,n,r){const{layoutId:s,layout:o,drag:u,dragConstraints:d,layoutScroll:h,layoutRoot:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:dI(t.parent)),t.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!u||d&&Xl(d),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,layoutScroll:h,layoutRoot:f})}function dI(t){if(t)return t.options.allowProjection!==!1?t.projection:dI(t.parent)}function eU({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){var o,u;t&&F6(t);function d(f,v){let b;const x={...k.useContext(Qb),...f,layoutId:tU(f)},{isStatic:_}=x,A=Y6(f),R=r(f,_);if(!_&&Wb){nU();const M=rU(x);b=M.MeasureLayout,A.visualElement=J6(s,R,x,e,M.ProjectionNode)}return g.jsxs(Vp.Provider,{value:A,children:[b&&A.visualElement?g.jsx(b,{visualElement:A.visualElement,...x}):null,n(s,f,W6(R,A.visualElement,v),R,_,A.visualElement)]})}d.displayName=`motion.${typeof s=="string"?s:`create(${(u=(o=s.displayName)!==null&&o!==void 0?o:s.name)!==null&&u!==void 0?u:""})`}`;const h=k.forwardRef(d);return h[Q6]=s,h}function tU({layoutId:t}){const e=k.useContext(Kb).id;return e&&t!==void 0?e+"-"+t:t}function nU(t,e){k.useContext(aI).strict}function rU(t){const{drag:e,layout:n}=xu;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const iU=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function nx(t){return typeof t!="string"||t.includes("-")?!1:!!(iU.indexOf(t)>-1||/[A-Z]/u.test(t))}function n1(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function rx(t,e,n,r){if(typeof e=="function"){const[s,o]=n1(r);e=e(n!==void 0?n:t.custom,s,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,o]=n1(r);e=e(n!==void 0?n:t.custom,s,o)}return e}const c0=t=>Array.isArray(t),sU=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),aU=t=>c0(t)?t[t.length-1]||0:t,Er=t=>!!(t&&t.getVelocity);function um(t){const e=Er(t)?t.get():t;return sU(e)?e.toValue():e}function oU({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,s,o){const u={latestValues:lU(r,s,o,t),renderState:e()};return n&&(u.onMount=d=>n({props:r,current:d,...u}),u.onUpdate=d=>n(d)),u}const hI=t=>(e,n)=>{const r=k.useContext(Vp),s=k.useContext(Pp),o=()=>oU(t,e,r,s);return n?o():Yb(o)};function lU(t,e,n,r){const s={},o=r(t,{});for(const x in o)s[x]=um(o[x]);let{initial:u,animate:d}=t;const h=Up(t),f=lI(t);e&&f&&!h&&t.inherit!==!1&&(u===void 0&&(u=e.initial),d===void 0&&(d=e.animate));let v=n?n.initial===!1:!1;v=v||u===!1;const b=v?d:u;if(b&&typeof b!="boolean"&&!Lp(b)){const x=Array.isArray(b)?b:[b];for(let _=0;_<x.length;_++){const A=rx(t,x[_]);if(A){const{transitionEnd:R,transition:M,...U}=A;for(const O in U){let B=U[O];if(Array.isArray(B)){const H=v?B.length-1:0;B=B[H]}B!==null&&(s[O]=B)}for(const O in R)s[O]=R[O]}}}return s}const Du=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],sl=new Set(Du),fI=t=>e=>typeof e=="string"&&e.startsWith(t),mI=fI("--"),uU=fI("var(--"),ix=t=>uU(t)?cU.test(t.split("/*")[0].trim()):!1,cU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,pI=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Hs=(t,e,n)=>n>e?e:n<t?t:n,ju={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Id={...ju,transform:t=>Hs(0,1,t)},Df={...ju,default:1},Wd=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ca=Wd("deg"),cs=Wd("%"),Ve=Wd("px"),dU=Wd("vh"),hU=Wd("vw"),r1={...cs,parse:t=>cs.parse(t)/100,transform:t=>cs.transform(t*100)},fU={borderWidth:Ve,borderTopWidth:Ve,borderRightWidth:Ve,borderBottomWidth:Ve,borderLeftWidth:Ve,borderRadius:Ve,radius:Ve,borderTopLeftRadius:Ve,borderTopRightRadius:Ve,borderBottomRightRadius:Ve,borderBottomLeftRadius:Ve,width:Ve,maxWidth:Ve,height:Ve,maxHeight:Ve,top:Ve,right:Ve,bottom:Ve,left:Ve,padding:Ve,paddingTop:Ve,paddingRight:Ve,paddingBottom:Ve,paddingLeft:Ve,margin:Ve,marginTop:Ve,marginRight:Ve,marginBottom:Ve,marginLeft:Ve,backgroundPositionX:Ve,backgroundPositionY:Ve},mU={rotate:Ca,rotateX:Ca,rotateY:Ca,rotateZ:Ca,scale:Df,scaleX:Df,scaleY:Df,scaleZ:Df,skew:Ca,skewX:Ca,skewY:Ca,distance:Ve,translateX:Ve,translateY:Ve,translateZ:Ve,x:Ve,y:Ve,z:Ve,perspective:Ve,transformPerspective:Ve,opacity:Id,originX:r1,originY:r1,originZ:Ve},i1={...ju,transform:Math.round},sx={...fU,...mU,zIndex:i1,size:Ve,fillOpacity:Id,strokeOpacity:Id,numOctaves:i1},pU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},gU=Du.length;function vU(t,e,n){let r="",s=!0;for(let o=0;o<gU;o++){const u=Du[o],d=t[u];if(d===void 0)continue;let h=!0;if(typeof d=="number"?h=d===(u.startsWith("scale")?1:0):h=parseFloat(d)===0,!h||n){const f=pI(d,sx[u]);if(!h){s=!1;const v=pU[u]||u;r+=`${v}(${f}) `}n&&(e[u]=f)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function ax(t,e,n){const{style:r,vars:s,transformOrigin:o}=t;let u=!1,d=!1;for(const h in e){const f=e[h];if(sl.has(h)){u=!0;continue}else if(mI(h)){s[h]=f;continue}else{const v=pI(f,sx[h]);h.startsWith("origin")?(d=!0,o[h]=v):r[h]=v}}if(e.transform||(u||n?r.transform=vU(e,t.transform,n):r.transform&&(r.transform="none")),d){const{originX:h="50%",originY:f="50%",originZ:v=0}=o;r.transformOrigin=`${h} ${f} ${v}`}}const yU={offset:"stroke-dashoffset",array:"stroke-dasharray"},bU={offset:"strokeDashoffset",array:"strokeDasharray"};function xU(t,e,n=1,r=0,s=!0){t.pathLength=1;const o=s?yU:bU;t[o.offset]=Ve.transform(-r);const u=Ve.transform(e),d=Ve.transform(n);t[o.array]=`${u} ${d}`}function s1(t,e,n){return typeof t=="string"?t:Ve.transform(e+n*t)}function EU(t,e,n){const r=s1(e,t.x,t.width),s=s1(n,t.y,t.height);return`${r} ${s}`}function ox(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:o,pathLength:u,pathSpacing:d=1,pathOffset:h=0,...f},v,b){if(ax(t,f,b),v){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:x,style:_,dimensions:A}=t;x.transform&&(A&&(_.transform=x.transform),delete x.transform),A&&(s!==void 0||o!==void 0||_.transform)&&(_.transformOrigin=EU(A,s!==void 0?s:.5,o!==void 0?o:.5)),e!==void 0&&(x.x=e),n!==void 0&&(x.y=n),r!==void 0&&(x.scale=r),u!==void 0&&xU(x,u,d,h,!1)}const lx=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),gI=()=>({...lx(),attrs:{}}),ux=t=>typeof t=="string"&&t.toLowerCase()==="svg";function vI(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const o in n)t.style.setProperty(o,n[o])}const yI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function bI(t,e,n,r){vI(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(yI.has(s)?s:ex(s),e.attrs[s])}const Hm={};function _U(t){Object.assign(Hm,t)}function xI(t,{layout:e,layoutId:n}){return sl.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Hm[t]||t==="opacity")}function cx(t,e,n){var r;const{style:s}=t,o={};for(const u in s)(Er(s[u])||e.style&&Er(e.style[u])||xI(u,t)||((r=n==null?void 0:n.getValue(u))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(o[u]=s[u]);return o}function EI(t,e,n){const r=cx(t,e,n);for(const s in t)if(Er(t[s])||Er(e[s])){const o=Du.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[o]=t[s]}return r}function TU(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const a1=["x","y","width","height","cx","cy","r"],wU={useVisualState:hI({scrapeMotionValuesFromProps:EI,createRenderState:gI,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:s})=>{if(!n)return;let o=!!t.drag;if(!o){for(const d in s)if(sl.has(d)){o=!0;break}}if(!o)return;let u=!e;if(e)for(let d=0;d<a1.length;d++){const h=a1[d];t[h]!==e[h]&&(u=!0)}u&&Jt.read(()=>{TU(n,r),Jt.render(()=>{ox(r,s,ux(n.tagName),t.transformTemplate),bI(n,r)})})}})},SU={useVisualState:hI({scrapeMotionValuesFromProps:cx,createRenderState:lx})};function _I(t,e,n){for(const r in e)!Er(e[r])&&!xI(r,n)&&(t[r]=e[r])}function AU({transformTemplate:t},e){return k.useMemo(()=>{const n=lx();return ax(n,e,t),Object.assign({},n.vars,n.style)},[e])}function CU(t,e){const n=t.style||{},r={};return _I(r,n,t),Object.assign(r,AU(t,e)),r}function RU(t,e){const n={},r=CU(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function IU(t,e,n,r){const s=k.useMemo(()=>{const o=gI();return ox(o,e,ux(r),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};_I(o,t.style,t),s.style={...o,...s.style}}return s}function NU(t=!1){return(n,r,s,{latestValues:o},u)=>{const h=(nx(n)?IU:RU)(r,o,u,n),f=G6(r,typeof n=="string",t),v=n!==k.Fragment?{...f,...h,ref:s}:{},{children:b}=r,x=k.useMemo(()=>Er(b)?b.get():b,[b]);return k.createElement(n,{...v,children:x})}}function kU(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const u={...nx(r)?wU:SU,preloadedFeatures:t,useRender:NU(s),createVisualElement:e,Component:r};return eU(u)}}function TI(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Bp(t,e,n){const r=t.getProps();return rx(r,e,n!==void 0?n:r.custom,t)}const OU=Xb(()=>window.ScrollTimeline!==void 0);class DU{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(s=>{if(OU()&&s.attachTimeline)return s.attachTimeline(e);if(typeof n=="function")return n(s)});return()=>{r.forEach((s,o)=>{s&&s(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class jU extends DU{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function dx(t,e){return t?t[e]||t.default||t:void 0}const d0=2e4;function wI(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<d0;)e+=n,r=t.next(e);return e>=d0?1/0:e}function hx(t){return typeof t=="function"}function o1(t,e){t.timeline=e,t.onfinish=null}const fx=t=>Array.isArray(t)&&typeof t[0]=="number",MU={linearEasing:void 0};function PU(t,e){const n=Xb(t);return()=>{var r;return(r=MU[e])!==null&&r!==void 0?r:n()}}const Gm=PU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),SI=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let o=0;o<s;o++)r+=t(bu(0,s-1,o))+", ";return`linear(${r.substring(0,r.length-2)})`};function AI(t){return!!(typeof t=="function"&&Gm()||!t||typeof t=="string"&&(t in h0||Gm())||fx(t)||Array.isArray(t)&&t.every(AI))}const qc=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,h0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:qc([0,.65,.55,1]),circOut:qc([.55,0,1,.45]),backIn:qc([.31,.01,.66,-.59]),backOut:qc([.33,1.53,.69,.99])};function CI(t,e){if(t)return typeof t=="function"&&Gm()?SI(t,e):fx(t)?qc(t):Array.isArray(t)?t.map(n=>CI(n,e)||h0.easeOut):h0[t]}const Mi={x:!1,y:!1};function RI(){return Mi.x||Mi.y}function VU(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let s=document;const o=(r=void 0)!==null&&r!==void 0?r:s.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function II(t,e){const n=VU(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function l1(t){return e=>{e.pointerType==="touch"||RI()||t(e)}}function LU(t,e,n={}){const[r,s,o]=II(t,n),u=l1(d=>{const{target:h}=d,f=e(d);if(typeof f!="function"||!h)return;const v=l1(b=>{f(b),h.removeEventListener("pointerleave",v)});h.addEventListener("pointerleave",v,s)});return r.forEach(d=>{d.addEventListener("pointerenter",u,s)}),o}const NI=(t,e)=>e?t===e?!0:NI(t,e.parentElement):!1,mx=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,UU=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function BU(t){return UU.has(t.tagName)||t.tabIndex!==-1}const Hc=new WeakSet;function u1(t){return e=>{e.key==="Enter"&&t(e)}}function cy(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const zU=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=u1(()=>{if(Hc.has(n))return;cy(n,"down");const s=u1(()=>{cy(n,"up")}),o=()=>cy(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function c1(t){return mx(t)&&!RI()}function FU(t,e,n={}){const[r,s,o]=II(t,n),u=d=>{const h=d.currentTarget;if(!c1(d)||Hc.has(h))return;Hc.add(h);const f=e(d),v=(_,A)=>{window.removeEventListener("pointerup",b),window.removeEventListener("pointercancel",x),!(!c1(_)||!Hc.has(h))&&(Hc.delete(h),typeof f=="function"&&f(_,{success:A}))},b=_=>{v(_,n.useGlobalTarget||NI(h,_.target))},x=_=>{v(_,!1)};window.addEventListener("pointerup",b,s),window.addEventListener("pointercancel",x,s)};return r.forEach(d=>{!BU(d)&&d.getAttribute("tabindex")===null&&(d.tabIndex=0),(n.useGlobalTarget?window:d).addEventListener("pointerdown",u,s),d.addEventListener("focus",f=>zU(f,s),s)}),o}function qU(t){return t==="x"||t==="y"?Mi[t]?null:(Mi[t]=!0,()=>{Mi[t]=!1}):Mi.x||Mi.y?null:(Mi.x=Mi.y=!0,()=>{Mi.x=Mi.y=!1})}const kI=new Set(["width","height","top","left","right","bottom",...Du]);let cm;function HU(){cm=void 0}const ds={now:()=>(cm===void 0&&ds.set(lr.isProcessing||U6.useManualTiming?lr.timestamp:performance.now()),cm),set:t=>{cm=t,queueMicrotask(HU)}};function px(t,e){t.indexOf(e)===-1&&t.push(e)}function gx(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class vx{constructor(){this.subscriptions=[]}add(e){return px(this.subscriptions,e),()=>gx(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let o=0;o<s;o++){const u=this.subscriptions[o];u&&u(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function OI(t,e){return e?t*(1e3/e):0}const d1=30,GU=t=>!isNaN(parseFloat(t));class $U{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const o=ds.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ds.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=GU(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new vx);const r=this.events[e].add(n);return e==="change"?()=>{r(),Jt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ds.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>d1)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,d1);return OI(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Nd(t,e){return new $U(t,e)}function KU(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Nd(n))}function YU(t,e){const n=Bp(t,e);let{transitionEnd:r={},transition:s={},...o}=n||{};o={...o,...r};for(const u in o){const d=aU(o[u]);KU(t,u,d)}}function QU(t){return!!(Er(t)&&t.add)}function f0(t,e){const n=t.getValue("willChange");if(QU(n))return n.add(e)}function DI(t){return t.props[uI]}const jI=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,WU=1e-7,XU=12;function JU(t,e,n,r,s){let o,u,d=0;do u=e+(n-e)/2,o=jI(u,r,s)-t,o>0?n=u:e=u;while(Math.abs(o)>WU&&++d<XU);return u}function Xd(t,e,n,r){if(t===e&&n===r)return ui;const s=o=>JU(o,0,1,t,n);return o=>o===0||o===1?o:jI(s(o),e,r)}const MI=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,PI=t=>e=>1-t(1-e),VI=Xd(.33,1.53,.69,.99),yx=PI(VI),LI=MI(yx),UI=t=>(t*=2)<1?.5*yx(t):.5*(2-Math.pow(2,-10*(t-1))),bx=t=>1-Math.sin(Math.acos(t)),BI=PI(bx),zI=MI(bx),FI=t=>/^0[^.\s]+$/u.test(t);function ZU(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||FI(t):!0}const id=t=>Math.round(t*1e5)/1e5,xx=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function e9(t){return t==null}const t9=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ex=(t,e)=>n=>!!(typeof n=="string"&&t9.test(n)&&n.startsWith(t)||e&&!e9(n)&&Object.prototype.hasOwnProperty.call(n,e)),qI=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,o,u,d]=r.match(xx);return{[t]:parseFloat(s),[e]:parseFloat(o),[n]:parseFloat(u),alpha:d!==void 0?parseFloat(d):1}},n9=t=>Hs(0,255,t),dy={...ju,transform:t=>Math.round(n9(t))},Uo={test:Ex("rgb","red"),parse:qI("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+dy.transform(t)+", "+dy.transform(e)+", "+dy.transform(n)+", "+id(Id.transform(r))+")"};function r9(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const m0={test:Ex("#"),parse:r9,transform:Uo.transform},Jl={test:Ex("hsl","hue"),parse:qI("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+cs.transform(id(e))+", "+cs.transform(id(n))+", "+id(Id.transform(r))+")"},vr={test:t=>Uo.test(t)||m0.test(t)||Jl.test(t),parse:t=>Uo.test(t)?Uo.parse(t):Jl.test(t)?Jl.parse(t):m0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Uo.transform(t):Jl.transform(t)},i9=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function s9(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(xx))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(i9))===null||n===void 0?void 0:n.length)||0)>0}const HI="number",GI="color",a9="var",o9="var(",h1="${}",l9=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function kd(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let o=0;const d=e.replace(l9,h=>(vr.test(h)?(r.color.push(o),s.push(GI),n.push(vr.parse(h))):h.startsWith(o9)?(r.var.push(o),s.push(a9),n.push(h)):(r.number.push(o),s.push(HI),n.push(parseFloat(h))),++o,h1)).split(h1);return{values:n,split:d,indexes:r,types:s}}function $I(t){return kd(t).values}function KI(t){const{split:e,types:n}=kd(t),r=e.length;return s=>{let o="";for(let u=0;u<r;u++)if(o+=e[u],s[u]!==void 0){const d=n[u];d===HI?o+=id(s[u]):d===GI?o+=vr.transform(s[u]):o+=s[u]}return o}}const u9=t=>typeof t=="number"?0:t;function c9(t){const e=$I(t);return KI(t)(e.map(u9))}const Ja={test:s9,parse:$I,createTransformer:KI,getAnimatableNone:c9},d9=new Set(["brightness","contrast","saturate","opacity"]);function h9(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(xx)||[];if(!r)return t;const s=n.replace(r,"");let o=d9.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+s+")"}const f9=/\b([a-z-]*)\(.*?\)/gu,p0={...Ja,getAnimatableNone:t=>{const e=t.match(f9);return e?e.map(h9).join(" "):t}},m9={...sx,color:vr,backgroundColor:vr,outlineColor:vr,fill:vr,stroke:vr,borderColor:vr,borderTopColor:vr,borderRightColor:vr,borderBottomColor:vr,borderLeftColor:vr,filter:p0,WebkitFilter:p0},_x=t=>m9[t];function YI(t,e){let n=_x(t);return n!==p0&&(n=Ja),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const p9=new Set(["auto","none","0"]);function g9(t,e,n){let r=0,s;for(;r<t.length&&!s;){const o=t[r];typeof o=="string"&&!p9.has(o)&&kd(o).values.length&&(s=t[r]),r++}if(s&&n)for(const o of e)t[o]=YI(n,s)}const f1=t=>t===ju||t===Ve,m1=(t,e)=>parseFloat(t.split(", ")[e]),p1=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return m1(s[1],e);{const o=r.match(/^matrix\((.+)\)$/u);return o?m1(o[1],t):0}},v9=new Set(["x","y","z"]),y9=Du.filter(t=>!v9.has(t));function b9(t){const e=[];return y9.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Eu={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:p1(4,13),y:p1(5,14)};Eu.translateX=Eu.x;Eu.translateY=Eu.y;const Fo=new Set;let g0=!1,v0=!1;function QI(){if(v0){const t=Array.from(Fo).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=b9(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([o,u])=>{var d;(d=r.getValue(o))===null||d===void 0||d.set(u)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}v0=!1,g0=!1,Fo.forEach(t=>t.complete()),Fo.clear()}function WI(){Fo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(v0=!0)})}function x9(){WI(),QI()}class Tx{constructor(e,n,r,s,o,u=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=o,this.isAsync=u}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Fo.add(this),g0||(g0=!0,Jt.read(WI),Jt.resolveKeyframes(QI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const u=s==null?void 0:s.get(),d=e[e.length-1];if(u!==void 0)e[0]=u;else if(r&&n){const h=r.readValue(n,d);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=d),s&&u===void 0&&s.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Fo.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Fo.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const XI=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),E9=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function _9(t){const e=E9.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function JI(t,e,n=1){const[r,s]=_9(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const u=o.trim();return XI(u)?parseFloat(u):u}return ix(s)?JI(s,e,n+1):s}const ZI=t=>e=>e.test(t),T9={test:t=>t==="auto",parse:t=>t},eN=[ju,Ve,cs,Ca,hU,dU,T9],g1=t=>eN.find(ZI(t));class tN extends Tx{constructor(e,n,r,s,o){super(e,n,r,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let f=e[h];if(typeof f=="string"&&(f=f.trim(),ix(f))){const v=JI(f,n.current);v!==void 0&&(e[h]=v),h===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!kI.has(r)||e.length!==2)return;const[s,o]=e,u=g1(s),d=g1(o);if(u!==d)if(f1(u)&&f1(d))for(let h=0;h<e.length;h++){const f=e[h];typeof f=="string"&&(e[h]=parseFloat(f))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)ZU(e[s])&&r.push(s);r.length&&g9(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Eu[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const o=n.getValue(r);o&&o.jump(this.measuredOrigin,!1);const u=s.length-1,d=s[u];s[u]=Eu[r](n.measureViewportBox(),window.getComputedStyle(n.current)),d!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=d),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([h,f])=>{n.getValue(h).set(f)}),this.resolveNoneKeyframes()}}const v1=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ja.test(t)||t==="0")&&!t.startsWith("url("));function w9(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function S9(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],u=v1(s,e),d=v1(o,e);return!u||!d?!1:w9(t)||(n==="spring"||hx(n))&&r}const A9=t=>t!==null;function zp(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(A9),o=e&&n!=="loop"&&e%2===1?0:s.length-1;return!o||r===void 0?s[o]:r}const C9=40;class nN{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:u="loop",...d}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ds.now(),this.options={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:o,repeatType:u,...d},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>C9?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&x9(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=ds.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:o,delay:u,onComplete:d,onUpdate:h,isGenerator:f}=this.options;if(!f&&!S9(e,r,s,o))if(u)this.options.duration=0;else{h&&h(zp(e,this.options,n)),d&&d(),this.resolveFinishedPromise();return}const v=this.initPlayback(e,n);v!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...v},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const un=(t,e,n)=>t+(e-t)*n;function hy(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function R9({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,o=0,u=0;if(!e)s=o=u=n;else{const d=n<.5?n*(1+e):n+e-n*e,h=2*n-d;s=hy(h,d,t+1/3),o=hy(h,d,t),u=hy(h,d,t-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(u*255),alpha:r}}function $m(t,e){return n=>n>0?e:t}const fy=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},I9=[m0,Uo,Jl],N9=t=>I9.find(e=>e.test(t));function y1(t){const e=N9(t);if(!e)return!1;let n=e.parse(t);return e===Jl&&(n=R9(n)),n}const b1=(t,e)=>{const n=y1(t),r=y1(e);if(!n||!r)return $m(t,e);const s={...n};return o=>(s.red=fy(n.red,r.red,o),s.green=fy(n.green,r.green,o),s.blue=fy(n.blue,r.blue,o),s.alpha=un(n.alpha,r.alpha,o),Uo.transform(s))},k9=(t,e)=>n=>e(t(n)),Jd=(...t)=>t.reduce(k9),y0=new Set(["none","hidden"]);function O9(t,e){return y0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function D9(t,e){return n=>un(t,e,n)}function wx(t){return typeof t=="number"?D9:typeof t=="string"?ix(t)?$m:vr.test(t)?b1:P9:Array.isArray(t)?rN:typeof t=="object"?vr.test(t)?b1:j9:$m}function rN(t,e){const n=[...t],r=n.length,s=t.map((o,u)=>wx(o)(o,e[u]));return o=>{for(let u=0;u<r;u++)n[u]=s[u](o);return n}}function j9(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=wx(t[s])(t[s],e[s]));return s=>{for(const o in r)n[o]=r[o](s);return n}}function M9(t,e){var n;const r=[],s={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const u=e.types[o],d=t.indexes[u][s[u]],h=(n=t.values[d])!==null&&n!==void 0?n:0;r[o]=h,s[u]++}return r}const P9=(t,e)=>{const n=Ja.createTransformer(e),r=kd(t),s=kd(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?y0.has(t)&&!s.values.length||y0.has(e)&&!r.values.length?O9(t,e):Jd(rN(M9(r,s),s.values),n):$m(t,e)};function iN(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?un(t,e,n):wx(t)(t,e)}const V9=5;function sN(t,e,n){const r=Math.max(e-V9,0);return OI(n-t(r),e-r)}const vn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},my=.001;function L9({duration:t=vn.duration,bounce:e=vn.bounce,velocity:n=vn.velocity,mass:r=vn.mass}){let s,o,u=1-e;u=Hs(vn.minDamping,vn.maxDamping,u),t=Hs(vn.minDuration,vn.maxDuration,Ls(t)),u<1?(s=f=>{const v=f*u,b=v*t,x=v-n,_=b0(f,u),A=Math.exp(-b);return my-x/_*A},o=f=>{const b=f*u*t,x=b*n+n,_=Math.pow(u,2)*Math.pow(f,2)*t,A=Math.exp(-b),R=b0(Math.pow(f,2),u);return(-s(f)+my>0?-1:1)*((x-_)*A)/R}):(s=f=>{const v=Math.exp(-f*t),b=(f-n)*t+1;return-my+v*b},o=f=>{const v=Math.exp(-f*t),b=(n-f)*(t*t);return v*b});const d=5/t,h=B9(s,o,d);if(t=Vs(t),isNaN(h))return{stiffness:vn.stiffness,damping:vn.damping,duration:t};{const f=Math.pow(h,2)*r;return{stiffness:f,damping:u*2*Math.sqrt(r*f),duration:t}}}const U9=12;function B9(t,e,n){let r=n;for(let s=1;s<U9;s++)r=r-t(r)/e(r);return r}function b0(t,e){return t*Math.sqrt(1-e*e)}const z9=["duration","bounce"],F9=["stiffness","damping","mass"];function x1(t,e){return e.some(n=>t[n]!==void 0)}function q9(t){let e={velocity:vn.velocity,stiffness:vn.stiffness,damping:vn.damping,mass:vn.mass,isResolvedFromDuration:!1,...t};if(!x1(t,F9)&&x1(t,z9))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,o=2*Hs(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:vn.mass,stiffness:s,damping:o}}else{const n=L9(t);e={...e,...n,mass:vn.mass},e.isResolvedFromDuration=!0}return e}function aN(t=vn.visualDuration,e=vn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const o=n.keyframes[0],u=n.keyframes[n.keyframes.length-1],d={done:!1,value:o},{stiffness:h,damping:f,mass:v,duration:b,velocity:x,isResolvedFromDuration:_}=q9({...n,velocity:-Ls(n.velocity||0)}),A=x||0,R=f/(2*Math.sqrt(h*v)),M=u-o,U=Ls(Math.sqrt(h/v)),O=Math.abs(M)<5;r||(r=O?vn.restSpeed.granular:vn.restSpeed.default),s||(s=O?vn.restDelta.granular:vn.restDelta.default);let B;if(R<1){const G=b0(U,R);B=q=>{const C=Math.exp(-R*U*q);return u-C*((A+R*U*M)/G*Math.sin(G*q)+M*Math.cos(G*q))}}else if(R===1)B=G=>u-Math.exp(-U*G)*(M+(A+U*M)*G);else{const G=U*Math.sqrt(R*R-1);B=q=>{const C=Math.exp(-R*U*q),S=Math.min(G*q,300);return u-C*((A+R*U*M)*Math.sinh(S)+G*M*Math.cosh(S))/G}}const H={calculatedDuration:_&&b||null,next:G=>{const q=B(G);if(_)d.done=G>=b;else{let C=0;R<1&&(C=G===0?Vs(A):sN(B,G,q));const S=Math.abs(C)<=r,N=Math.abs(u-q)<=s;d.done=S&&N}return d.value=d.done?u:q,d},toString:()=>{const G=Math.min(wI(H),d0),q=SI(C=>H.next(G*C).value,G,30);return G+"ms "+q}};return H}function E1({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:u,min:d,max:h,restDelta:f=.5,restSpeed:v}){const b=t[0],x={done:!1,value:b},_=S=>d!==void 0&&S<d||h!==void 0&&S>h,A=S=>d===void 0?h:h===void 0||Math.abs(d-S)<Math.abs(h-S)?d:h;let R=n*e;const M=b+R,U=u===void 0?M:u(M);U!==M&&(R=U-b);const O=S=>-R*Math.exp(-S/r),B=S=>U+O(S),H=S=>{const N=O(S),P=B(S);x.done=Math.abs(N)<=f,x.value=x.done?U:P};let G,q;const C=S=>{_(x.value)&&(G=S,q=aN({keyframes:[x.value,A(x.value)],velocity:sN(B,S,x.value),damping:s,stiffness:o,restDelta:f,restSpeed:v}))};return C(0),{calculatedDuration:null,next:S=>{let N=!1;return!q&&G===void 0&&(N=!0,H(S),C(S)),G!==void 0&&S>=G?q.next(S-G):(!N&&H(S),x)}}}const H9=Xd(.42,0,1,1),G9=Xd(0,0,.58,1),oN=Xd(.42,0,.58,1),$9=t=>Array.isArray(t)&&typeof t[0]!="number",K9={linear:ui,easeIn:H9,easeInOut:oN,easeOut:G9,circIn:bx,circInOut:zI,circOut:BI,backIn:yx,backInOut:LI,backOut:VI,anticipate:UI},_1=t=>{if(fx(t)){iI(t.length===4);const[e,n,r,s]=t;return Xd(e,n,r,s)}else if(typeof t=="string")return K9[t];return t};function Y9(t,e,n){const r=[],s=n||iN,o=t.length-1;for(let u=0;u<o;u++){let d=s(t[u],t[u+1]);if(e){const h=Array.isArray(e)?e[u]||ui:e;d=Jd(h,d)}r.push(d)}return r}function Q9(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const o=t.length;if(iI(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const u=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const d=Y9(e,r,s),h=d.length,f=v=>{if(u&&v<t[0])return e[0];let b=0;if(h>1)for(;b<t.length-2&&!(v<t[b+1]);b++);const x=bu(t[b],t[b+1],v);return d[b](x)};return n?v=>f(Hs(t[0],t[o-1],v)):f}function W9(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=bu(0,e,r);t.push(un(n,1,s))}}function X9(t){const e=[0];return W9(e,t.length-1),e}function J9(t,e){return t.map(n=>n*e)}function Z9(t,e){return t.map(()=>e||oN).splice(0,t.length-1)}function Km({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=$9(r)?r.map(_1):_1(r),o={done:!1,value:e[0]},u=J9(n&&n.length===e.length?n:X9(e),t),d=Q9(u,e,{ease:Array.isArray(s)?s:Z9(e,s)});return{calculatedDuration:t,next:h=>(o.value=d(h),o.done=h>=t,o)}}const e8=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Jt.update(e,!0),stop:()=>Xa(e),now:()=>lr.isProcessing?lr.timestamp:ds.now()}},t8={decay:E1,inertia:E1,tween:Km,keyframes:Km,spring:aN},n8=t=>t/100;class Sx extends nN{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:h}=this.options;h&&h()};const{name:n,motionValue:r,element:s,keyframes:o}=this.options,u=(s==null?void 0:s.KeyframeResolver)||Tx,d=(h,f)=>this.onKeyframesResolved(h,f);this.resolver=new u(o,d,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o,velocity:u=0}=this.options,d=hx(n)?n:t8[n]||Km;let h,f;d!==Km&&typeof e[0]!="number"&&(h=Jd(n8,iN(e[0],e[1])),e=[0,100]);const v=d({...this.options,keyframes:e});o==="mirror"&&(f=d({...this.options,keyframes:[...e].reverse(),velocity:-u})),v.calculatedDuration===null&&(v.calculatedDuration=wI(v));const{calculatedDuration:b}=v,x=b+s,_=x*(r+1)-s;return{generator:v,mirroredGenerator:f,mapPercentToKeyframes:h,calculatedDuration:b,resolvedDuration:x,totalDuration:_}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:S}=this.options;return{done:!0,value:S[S.length-1]}}const{finalKeyframe:s,generator:o,mirroredGenerator:u,mapPercentToKeyframes:d,keyframes:h,calculatedDuration:f,totalDuration:v,resolvedDuration:b}=r;if(this.startTime===null)return o.next(0);const{delay:x,repeat:_,repeatType:A,repeatDelay:R,onUpdate:M}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-v/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const U=this.currentTime-x*(this.speed>=0?1:-1),O=this.speed>=0?U<0:U>v;this.currentTime=Math.max(U,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=v);let B=this.currentTime,H=o;if(_){const S=Math.min(this.currentTime,v)/b;let N=Math.floor(S),P=S%1;!P&&S>=1&&(P=1),P===1&&N--,N=Math.min(N,_+1),!!(N%2)&&(A==="reverse"?(P=1-P,R&&(P-=R/b)):A==="mirror"&&(H=u)),B=Hs(0,1,P)*b}const G=O?{done:!1,value:h[0]}:H.next(B);d&&(G.value=d(G.value));let{done:q}=G;!O&&f!==null&&(q=this.speed>=0?this.currentTime>=v:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&q);return C&&s!==void 0&&(G.value=zp(h,this.options,s)),M&&M(G.value),C&&this.finish(),G}get duration(){const{resolved:e}=this;return e?Ls(e.calculatedDuration):0}get time(){return Ls(this.currentTime)}set time(e){e=Vs(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ls(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=e8,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const r8=new Set(["opacity","clipPath","filter","transform"]);function i8(t,e,n,{delay:r=0,duration:s=300,repeat:o=0,repeatType:u="loop",ease:d="easeInOut",times:h}={}){const f={[e]:n};h&&(f.offset=h);const v=CI(d,s);return Array.isArray(v)&&(f.easing=v),t.animate(f,{delay:r,duration:s,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:o+1,direction:u==="reverse"?"alternate":"normal"})}const s8=Xb(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Ym=10,a8=2e4;function o8(t){return hx(t.type)||t.type==="spring"||!AI(t.ease)}function l8(t,e){const n=new Sx({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const s=[];let o=0;for(;!r.done&&o<a8;)r=n.sample(o),s.push(r.value),o+=Ym;return{times:void 0,keyframes:s,duration:o-Ym,ease:"linear"}}const lN={anticipate:UI,backInOut:LI,circInOut:zI};function u8(t){return t in lN}class T1 extends nN{constructor(e){super(e);const{name:n,motionValue:r,element:s,keyframes:o}=this.options;this.resolver=new tN(o,(u,d)=>this.onKeyframesResolved(u,d),n,r,s),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:s,ease:o,type:u,motionValue:d,name:h,startTime:f}=this.options;if(!d.owner||!d.owner.current)return!1;if(typeof o=="string"&&Gm()&&u8(o)&&(o=lN[o]),o8(this.options)){const{onComplete:b,onUpdate:x,motionValue:_,element:A,...R}=this.options,M=l8(e,R);e=M.keyframes,e.length===1&&(e[1]=e[0]),r=M.duration,s=M.times,o=M.ease,u="keyframes"}const v=i8(d.owner.current,h,e,{...this.options,duration:r,times:s,ease:o});return v.startTime=f??this.calcStartTime(),this.pendingTimeline?(o1(v,this.pendingTimeline),this.pendingTimeline=void 0):v.onfinish=()=>{const{onComplete:b}=this.options;d.set(zp(e,this.options,n)),b&&b(),this.cancel(),this.resolveFinishedPromise()},{animation:v,duration:r,times:s,type:u,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Ls(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Ls(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Vs(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return ui;const{animation:r}=n;o1(r,e)}return ui}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:s,type:o,ease:u,times:d}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:f,onUpdate:v,onComplete:b,element:x,..._}=this.options,A=new Sx({..._,keyframes:r,duration:s,type:o,ease:u,times:d,isGenerator:!0}),R=Vs(this.time);f.setWithVelocity(A.sample(R-Ym).value,A.sample(R).value,Ym)}const{onStop:h}=this.options;h&&h(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:s,repeatType:o,damping:u,type:d}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:f}=n.owner.getProps();return s8()&&r&&r8.has(r)&&!h&&!f&&!s&&o!=="mirror"&&u!==0&&d!=="inertia"}}const c8={type:"spring",stiffness:500,damping:25,restSpeed:10},d8=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),h8={type:"keyframes",duration:.8},f8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},m8=(t,{keyframes:e})=>e.length>2?h8:sl.has(t)?t.startsWith("scale")?d8(e[1]):c8:f8;function p8({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:u,repeatDelay:d,from:h,elapsed:f,...v}){return!!Object.keys(v).length}const Ax=(t,e,n,r={},s,o)=>u=>{const d=dx(r,t)||{},h=d.delay||r.delay||0;let{elapsed:f=0}=r;f=f-Vs(h);let v={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-f,onUpdate:x=>{e.set(x),d.onUpdate&&d.onUpdate(x)},onComplete:()=>{u(),d.onComplete&&d.onComplete()},name:t,motionValue:e,element:o?void 0:s};p8(d)||(v={...v,...m8(t,v)}),v.duration&&(v.duration=Vs(v.duration)),v.repeatDelay&&(v.repeatDelay=Vs(v.repeatDelay)),v.from!==void 0&&(v.keyframes[0]=v.from);let b=!1;if((v.type===!1||v.duration===0&&!v.repeatDelay)&&(v.duration=0,v.delay===0&&(b=!0)),b&&!o&&e.get()!==void 0){const x=zp(v.keyframes,d);if(x!==void 0)return Jt.update(()=>{v.onUpdate(x),v.onComplete()}),new jU([])}return!o&&T1.supports(v)?new T1(v):new Sx(v)};function g8({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function uN(t,e,{delay:n=0,transitionOverride:r,type:s}={}){var o;let{transition:u=t.getDefaultTransition(),transitionEnd:d,...h}=e;r&&(u=r);const f=[],v=s&&t.animationState&&t.animationState.getState()[s];for(const b in h){const x=t.getValue(b,(o=t.latestValues[b])!==null&&o!==void 0?o:null),_=h[b];if(_===void 0||v&&g8(v,b))continue;const A={delay:n,...dx(u||{},b)};let R=!1;if(window.MotionHandoffAnimation){const U=DI(t);if(U){const O=window.MotionHandoffAnimation(U,b,Jt);O!==null&&(A.startTime=O,R=!0)}}f0(t,b),x.start(Ax(b,x,_,t.shouldReduceMotion&&kI.has(b)?{type:!1}:A,t,R));const M=x.animation;M&&f.push(M)}return d&&Promise.all(f).then(()=>{Jt.update(()=>{d&&YU(t,d)})}),f}function x0(t,e,n={}){var r;const s=Bp(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(o=n.transitionOverride);const u=s?()=>Promise.all(uN(t,s,n)):()=>Promise.resolve(),d=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:v=0,staggerChildren:b,staggerDirection:x}=o;return v8(t,e,v+f,b,x,n)}:()=>Promise.resolve(),{when:h}=o;if(h){const[f,v]=h==="beforeChildren"?[u,d]:[d,u];return f().then(()=>v())}else return Promise.all([u(),d(n.delay)])}function v8(t,e,n=0,r=0,s=1,o){const u=[],d=(t.variantChildren.size-1)*r,h=s===1?(f=0)=>f*r:(f=0)=>d-f*r;return Array.from(t.variantChildren).sort(y8).forEach((f,v)=>{f.notify("AnimationStart",e),u.push(x0(f,e,{...o,delay:n+h(v)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(u)}function y8(t,e){return t.sortNodePosition(e)}function b8(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(o=>x0(t,o,n));r=Promise.all(s)}else if(typeof e=="string")r=x0(t,e,n);else{const s=typeof e=="function"?Bp(t,e,n.custom):e;r=Promise.all(uN(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const x8=Zb.length;function cN(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?cN(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<x8;n++){const r=Zb[n],s=t.props[r];(Rd(s)||s===!1)&&(e[r]=s)}return e}const E8=[...Jb].reverse(),_8=Jb.length;function T8(t){return e=>Promise.all(e.map(({animation:n,options:r})=>b8(t,n,r)))}function w8(t){let e=T8(t),n=w1(),r=!0;const s=h=>(f,v)=>{var b;const x=Bp(t,v,h==="exit"?(b=t.presenceContext)===null||b===void 0?void 0:b.custom:void 0);if(x){const{transition:_,transitionEnd:A,...R}=x;f={...f,...R,...A}}return f};function o(h){e=h(t)}function u(h){const{props:f}=t,v=cN(t.parent)||{},b=[],x=new Set;let _={},A=1/0;for(let M=0;M<_8;M++){const U=E8[M],O=n[U],B=f[U]!==void 0?f[U]:v[U],H=Rd(B),G=U===h?O.isActive:null;G===!1&&(A=M);let q=B===v[U]&&B!==f[U]&&H;if(q&&r&&t.manuallyAnimateOnMount&&(q=!1),O.protectedKeys={..._},!O.isActive&&G===null||!B&&!O.prevProp||Lp(B)||typeof B=="boolean")continue;const C=S8(O.prevProp,B);let S=C||U===h&&O.isActive&&!q&&H||M>A&&H,N=!1;const P=Array.isArray(B)?B:[B];let V=P.reduce(s(U),{});G===!1&&(V={});const{prevResolvedValues:L={}}=O,D={...L,...V},pe=ie=>{S=!0,x.has(ie)&&(N=!0,x.delete(ie)),O.needsAnimating[ie]=!0;const ce=t.getValue(ie);ce&&(ce.liveStyle=!1)};for(const ie in D){const ce=V[ie],Ae=L[ie];if(_.hasOwnProperty(ie))continue;let _e=!1;c0(ce)&&c0(Ae)?_e=!TI(ce,Ae):_e=ce!==Ae,_e?ce!=null?pe(ie):x.add(ie):ce!==void 0&&x.has(ie)?pe(ie):O.protectedKeys[ie]=!0}O.prevProp=B,O.prevResolvedValues=V,O.isActive&&(_={..._,...V}),r&&t.blockInitialAnimation&&(S=!1),S&&(!(q&&C)||N)&&b.push(...P.map(ie=>({animation:ie,options:{type:U}})))}if(x.size){const M={};x.forEach(U=>{const O=t.getBaseTarget(U),B=t.getValue(U);B&&(B.liveStyle=!0),M[U]=O??null}),b.push({animation:M})}let R=!!b.length;return r&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(R=!1),r=!1,R?e(b):Promise.resolve()}function d(h,f){var v;if(n[h].isActive===f)return Promise.resolve();(v=t.variantChildren)===null||v===void 0||v.forEach(x=>{var _;return(_=x.animationState)===null||_===void 0?void 0:_.setActive(h,f)}),n[h].isActive=f;const b=u(h);for(const x in n)n[x].protectedKeys={};return b}return{animateChanges:u,setActive:d,setAnimateFunction:o,getState:()=>n,reset:()=>{n=w1(),r=!0}}}function S8(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!TI(e,t):!1}function No(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function w1(){return{animate:No(!0),whileInView:No(),whileHover:No(),whileTap:No(),whileDrag:No(),whileFocus:No(),exit:No()}}class so{constructor(e){this.isMounted=!1,this.node=e}update(){}}class A8 extends so{constructor(e){super(e),e.animationState||(e.animationState=w8(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Lp(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let C8=0;class R8 extends so{constructor(){super(...arguments),this.id=C8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const I8={animation:{Feature:A8},exit:{Feature:R8}};function Od(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Zd(t){return{point:{x:t.pageX,y:t.pageY}}}const N8=t=>e=>mx(e)&&t(e,Zd(e));function sd(t,e,n,r){return Od(t,e,N8(n),r)}const S1=(t,e)=>Math.abs(t-e);function k8(t,e){const n=S1(t.x,e.x),r=S1(t.y,e.y);return Math.sqrt(n**2+r**2)}class dN{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=gy(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,_=k8(b.offset,{x:0,y:0})>=3;if(!x&&!_)return;const{point:A}=b,{timestamp:R}=lr;this.history.push({...A,timestamp:R});const{onStart:M,onMove:U}=this.handlers;x||(M&&M(this.lastMoveEvent,b),this.startEvent=this.lastMoveEvent),U&&U(this.lastMoveEvent,b)},this.handlePointerMove=(b,x)=>{this.lastMoveEvent=b,this.lastMoveEventInfo=py(x,this.transformPagePoint),Jt.update(this.updatePoint,!0)},this.handlePointerUp=(b,x)=>{this.end();const{onEnd:_,onSessionEnd:A,resumeAnimation:R}=this.handlers;if(this.dragSnapToOrigin&&R&&R(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=gy(b.type==="pointercancel"?this.lastMoveEventInfo:py(x,this.transformPagePoint),this.history);this.startEvent&&_&&_(b,M),A&&A(b,M)},!mx(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const u=Zd(e),d=py(u,this.transformPagePoint),{point:h}=d,{timestamp:f}=lr;this.history=[{...h,timestamp:f}];const{onSessionStart:v}=n;v&&v(e,gy(d,this.history)),this.removeListeners=Jd(sd(this.contextWindow,"pointermove",this.handlePointerMove),sd(this.contextWindow,"pointerup",this.handlePointerUp),sd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Xa(this.updatePoint)}}function py(t,e){return e?{point:e(t.point)}:t}function A1(t,e){return{x:t.x-e.x,y:t.y-e.y}}function gy({point:t},e){return{point:t,delta:A1(t,hN(e)),offset:A1(t,O8(e)),velocity:D8(e,.1)}}function O8(t){return t[0]}function hN(t){return t[t.length-1]}function D8(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=hN(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Vs(e)));)n--;if(!r)return{x:0,y:0};const o=Ls(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const u={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}const fN=1e-4,j8=1-fN,M8=1+fN,mN=.01,P8=0-mN,V8=0+mN;function ci(t){return t.max-t.min}function L8(t,e,n){return Math.abs(t-e)<=n}function C1(t,e,n,r=.5){t.origin=r,t.originPoint=un(e.min,e.max,t.origin),t.scale=ci(n)/ci(e),t.translate=un(n.min,n.max,t.origin)-t.originPoint,(t.scale>=j8&&t.scale<=M8||isNaN(t.scale))&&(t.scale=1),(t.translate>=P8&&t.translate<=V8||isNaN(t.translate))&&(t.translate=0)}function ad(t,e,n,r){C1(t.x,e.x,n.x,r?r.originX:void 0),C1(t.y,e.y,n.y,r?r.originY:void 0)}function R1(t,e,n){t.min=n.min+e.min,t.max=t.min+ci(e)}function U8(t,e,n){R1(t.x,e.x,n.x),R1(t.y,e.y,n.y)}function I1(t,e,n){t.min=e.min-n.min,t.max=t.min+ci(e)}function od(t,e,n){I1(t.x,e.x,n.x),I1(t.y,e.y,n.y)}function B8(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?un(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?un(n,t,r.max):Math.min(t,n)),t}function N1(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function z8(t,{top:e,left:n,bottom:r,right:s}){return{x:N1(t.x,n,s),y:N1(t.y,e,r)}}function k1(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function F8(t,e){return{x:k1(t.x,e.x),y:k1(t.y,e.y)}}function q8(t,e){let n=.5;const r=ci(t),s=ci(e);return s>r?n=bu(e.min,e.max-r,t.min):r>s&&(n=bu(t.min,t.max-s,e.min)),Hs(0,1,n)}function H8(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const E0=.35;function G8(t=E0){return t===!1?t=0:t===!0&&(t=E0),{x:O1(t,"left","right"),y:O1(t,"top","bottom")}}function O1(t,e,n){return{min:D1(t,e),max:D1(t,n)}}function D1(t,e){return typeof t=="number"?t:t[e]||0}const j1=()=>({translate:0,scale:1,origin:0,originPoint:0}),Zl=()=>({x:j1(),y:j1()}),M1=()=>({min:0,max:0}),_n=()=>({x:M1(),y:M1()});function wi(t){return[t("x"),t("y")]}function pN({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function $8({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function K8(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function vy(t){return t===void 0||t===1}function _0({scale:t,scaleX:e,scaleY:n}){return!vy(t)||!vy(e)||!vy(n)}function jo(t){return _0(t)||gN(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function gN(t){return P1(t.x)||P1(t.y)}function P1(t){return t&&t!=="0%"}function Qm(t,e,n){const r=t-n,s=e*r;return n+s}function V1(t,e,n,r,s){return s!==void 0&&(t=Qm(t,s,r)),Qm(t,n,r)+e}function T0(t,e=0,n=1,r,s){t.min=V1(t.min,e,n,r,s),t.max=V1(t.max,e,n,r,s)}function vN(t,{x:e,y:n}){T0(t.x,e.translate,e.scale,e.originPoint),T0(t.y,n.translate,n.scale,n.originPoint)}const L1=.999999999999,U1=1.0000000000001;function Y8(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let o,u;for(let d=0;d<s;d++){o=n[d],u=o.projectionDelta;const{visualElement:h}=o.options;h&&h.props.style&&h.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&tu(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,vN(t,u)),r&&jo(o.latestValues)&&tu(t,o.latestValues))}e.x<U1&&e.x>L1&&(e.x=1),e.y<U1&&e.y>L1&&(e.y=1)}function eu(t,e){t.min=t.min+e,t.max=t.max+e}function B1(t,e,n,r,s=.5){const o=un(t.min,t.max,s);T0(t,e,n,o,r)}function tu(t,e){B1(t.x,e.x,e.scaleX,e.scale,e.originX),B1(t.y,e.y,e.scaleY,e.scale,e.originY)}function yN(t,e){return pN(K8(t.getBoundingClientRect(),e))}function Q8(t,e,n){const r=yN(t,n),{scroll:s}=e;return s&&(eu(r.x,s.offset.x),eu(r.y,s.offset.y)),r}const bN=({current:t})=>t?t.ownerDocument.defaultView:null,W8=new WeakMap;class X8{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=_n(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=v=>{const{dragSnapToOrigin:b}=this.getProps();b?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Zd(v).point)},o=(v,b)=>{const{drag:x,dragPropagation:_,onDragStart:A}=this.getProps();if(x&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=qU(x),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),wi(M=>{let U=this.getAxisMotionValue(M).get()||0;if(cs.test(U)){const{projection:O}=this.visualElement;if(O&&O.layout){const B=O.layout.layoutBox[M];B&&(U=ci(B)*(parseFloat(U)/100))}}this.originPoint[M]=U}),A&&Jt.postRender(()=>A(v,b)),f0(this.visualElement,"transform");const{animationState:R}=this.visualElement;R&&R.setActive("whileDrag",!0)},u=(v,b)=>{const{dragPropagation:x,dragDirectionLock:_,onDirectionLock:A,onDrag:R}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:M}=b;if(_&&this.currentDirection===null){this.currentDirection=J8(M),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",b.point,M),this.updateAxis("y",b.point,M),this.visualElement.render(),R&&R(v,b)},d=(v,b)=>this.stop(v,b),h=()=>wi(v=>{var b;return this.getAnimationState(v)==="paused"&&((b=this.getAxisMotionValue(v).animation)===null||b===void 0?void 0:b.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new dN(e,{onSessionStart:s,onStart:o,onMove:u,onSessionEnd:d,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:bN(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&Jt.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!jf(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let u=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(u=B8(u,this.constraints[e],this.elastic[e])),o.set(u)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&Xl(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=z8(s.layoutBox,n):this.constraints=!1,this.elastic=G8(r),o!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&wi(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=H8(s.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Xl(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=Q8(r,s.root,this.visualElement.getTransformPagePoint());let u=F8(s.layout.layoutBox,o);if(n){const d=n($8(u));this.hasMutatedConstraints=!!d,d&&(u=pN(d))}return u}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:u,onDragTransitionEnd:d}=this.getProps(),h=this.constraints||{},f=wi(v=>{if(!jf(v,n,this.currentDirection))return;let b=h&&h[v]||{};u&&(b={min:0,max:0});const x=s?200:1e6,_=s?40:1e7,A={type:"inertia",velocity:r?e[v]:0,bounceStiffness:x,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...o,...b};return this.startAxisValueAnimation(v,A)});return Promise.all(f).then(d)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return f0(this.visualElement,e),r.start(Ax(e,r,0,n,this.visualElement,!1))}stopAnimation(){wi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){wi(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){wi(n=>{const{drag:r}=this.getProps();if(!jf(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:u,max:d}=s.layout.layoutBox[n];o.set(e[n]-un(u,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Xl(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};wi(u=>{const d=this.getAxisMotionValue(u);if(d&&this.constraints!==!1){const h=d.get();s[u]=q8({min:h,max:h},this.constraints[u])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),wi(u=>{if(!jf(u,e,null))return;const d=this.getAxisMotionValue(u),{min:h,max:f}=this.constraints[u];d.set(un(h,f,s[u]))})}addListeners(){if(!this.visualElement.current)return;W8.set(this.visualElement,this);const e=this.visualElement.current,n=sd(e,"pointerdown",h=>{const{drag:f,dragListener:v=!0}=this.getProps();f&&v&&this.start(h)}),r=()=>{const{dragConstraints:h}=this.getProps();Xl(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Jt.read(r);const u=Od(window,"resize",()=>this.scalePositionWithinConstraints()),d=s.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(wi(v=>{const b=this.getAxisMotionValue(v);b&&(this.originPoint[v]+=h[v].translate,b.set(b.get()+h[v].translate))}),this.visualElement.render())}));return()=>{u(),n(),o(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:u=E0,dragMomentum:d=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:u,dragMomentum:d}}}function jf(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function J8(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Z8 extends so{constructor(e){super(e),this.removeGroupControls=ui,this.removeListeners=ui,this.controls=new X8(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ui}unmount(){this.removeGroupControls(),this.removeListeners()}}const z1=t=>(e,n)=>{t&&Jt.postRender(()=>t(e,n))};class eB extends so{constructor(){super(...arguments),this.removePointerDownListener=ui}onPointerDown(e){this.session=new dN(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:bN(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:z1(e),onStart:z1(n),onMove:r,onEnd:(o,u)=>{delete this.session,s&&Jt.postRender(()=>s(o,u))}}}mount(){this.removePointerDownListener=sd(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const dm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function F1(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const kc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ve.test(t))t=parseFloat(t);else return t;const n=F1(t,e.target.x),r=F1(t,e.target.y);return`${n}% ${r}%`}},tB={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Ja.parse(t);if(s.length>5)return r;const o=Ja.createTransformer(t),u=typeof s[0]!="number"?1:0,d=n.x.scale*e.x,h=n.y.scale*e.y;s[0+u]/=d,s[1+u]/=h;const f=un(d,h,.5);return typeof s[2+u]=="number"&&(s[2+u]/=f),typeof s[3+u]=="number"&&(s[3+u]/=f),o(s)}};class nB extends k.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=e;_U(rB),o&&(n.group&&n.group.add(o),r&&r.register&&s&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),dm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:o}=this.props,u=r.projection;return u&&(u.isPresent=o,s||e.layoutDependency!==n||n===void 0?u.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?u.promote():u.relegate()||Jt.postRender(()=>{const d=u.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),tx.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function xN(t){const[e,n]=nI(),r=k.useContext(Kb);return g.jsx(nB,{...t,layoutGroup:r,switchLayoutGroup:k.useContext(cI),isPresent:e,safeToRemove:n})}const rB={borderRadius:{...kc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:kc,borderTopRightRadius:kc,borderBottomLeftRadius:kc,borderBottomRightRadius:kc,boxShadow:tB};function iB(t,e,n){const r=Er(t)?t:Nd(t);return r.start(Ax("",r,e,n)),r.animation}function sB(t){return t instanceof SVGElement&&t.tagName!=="svg"}const aB=(t,e)=>t.depth-e.depth;class oB{constructor(){this.children=[],this.isDirty=!1}add(e){px(this.children,e),this.isDirty=!0}remove(e){gx(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(aB),this.isDirty=!1,this.children.forEach(e)}}function lB(t,e){const n=ds.now(),r=({timestamp:s})=>{const o=s-n;o>=e&&(Xa(r),t(o-e))};return Jt.read(r,!0),()=>Xa(r)}const EN=["TopLeft","TopRight","BottomLeft","BottomRight"],uB=EN.length,q1=t=>typeof t=="string"?parseFloat(t):t,H1=t=>typeof t=="number"||Ve.test(t);function cB(t,e,n,r,s,o){s?(t.opacity=un(0,n.opacity!==void 0?n.opacity:1,dB(r)),t.opacityExit=un(e.opacity!==void 0?e.opacity:1,0,hB(r))):o&&(t.opacity=un(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let u=0;u<uB;u++){const d=`border${EN[u]}Radius`;let h=G1(e,d),f=G1(n,d);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||H1(h)===H1(f)?(t[d]=Math.max(un(q1(h),q1(f),r),0),(cs.test(f)||cs.test(h))&&(t[d]+="%")):t[d]=f}(e.rotate||n.rotate)&&(t.rotate=un(e.rotate||0,n.rotate||0,r))}function G1(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const dB=_N(0,.5,BI),hB=_N(.5,.95,ui);function _N(t,e,n){return r=>r<t?0:r>e?1:n(bu(t,e,r))}function $1(t,e){t.min=e.min,t.max=e.max}function Ti(t,e){$1(t.x,e.x),$1(t.y,e.y)}function K1(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Y1(t,e,n,r,s){return t-=e,t=Qm(t,1/n,r),s!==void 0&&(t=Qm(t,1/s,r)),t}function fB(t,e=0,n=1,r=.5,s,o=t,u=t){if(cs.test(e)&&(e=parseFloat(e),e=un(u.min,u.max,e/100)-u.min),typeof e!="number")return;let d=un(o.min,o.max,r);t===o&&(d-=e),t.min=Y1(t.min,e,n,d,s),t.max=Y1(t.max,e,n,d,s)}function Q1(t,e,[n,r,s],o,u){fB(t,e[n],e[r],e[s],e.scale,o,u)}const mB=["x","scaleX","originX"],pB=["y","scaleY","originY"];function W1(t,e,n,r){Q1(t.x,e,mB,n?n.x:void 0,r?r.x:void 0),Q1(t.y,e,pB,n?n.y:void 0,r?r.y:void 0)}function X1(t){return t.translate===0&&t.scale===1}function TN(t){return X1(t.x)&&X1(t.y)}function J1(t,e){return t.min===e.min&&t.max===e.max}function gB(t,e){return J1(t.x,e.x)&&J1(t.y,e.y)}function Z1(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function wN(t,e){return Z1(t.x,e.x)&&Z1(t.y,e.y)}function eA(t){return ci(t.x)/ci(t.y)}function tA(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class vB{constructor(){this.members=[]}add(e){px(this.members,e),e.scheduleRender()}remove(e){if(gx(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function yB(t,e,n){let r="";const s=t.x.translate/e.x,o=t.y.translate/e.y,u=(n==null?void 0:n.z)||0;if((s||o||u)&&(r=`translate3d(${s}px, ${o}px, ${u}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:v,rotateX:b,rotateY:x,skewX:_,skewY:A}=n;f&&(r=`perspective(${f}px) ${r}`),v&&(r+=`rotate(${v}deg) `),b&&(r+=`rotateX(${b}deg) `),x&&(r+=`rotateY(${x}deg) `),_&&(r+=`skewX(${_}deg) `),A&&(r+=`skewY(${A}deg) `)}const d=t.x.scale*e.x,h=t.y.scale*e.y;return(d!==1||h!==1)&&(r+=`scale(${d}, ${h})`),r||"none"}const Mo={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Gc=typeof window<"u"&&window.MotionDebug!==void 0,yy=["","X","Y","Z"],bB={visibility:"hidden"},nA=1e3;let xB=0;function by(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function SN(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=DI(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Jt,!(s||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&SN(r)}function AN({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(u={},d=e==null?void 0:e()){this.id=xB++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Gc&&(Mo.totalNodes=Mo.resolvedTargetDeltas=Mo.recalculatedProjection=0),this.nodes.forEach(TB),this.nodes.forEach(RB),this.nodes.forEach(IB),this.nodes.forEach(wB),Gc&&window.MotionDebug.record(Mo)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new oB)}addEventListener(u,d){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new vx),this.eventHandlers.get(u).add(d)}notifyListeners(u,...d){const h=this.eventHandlers.get(u);h&&h.notify(...d)}hasListeners(u){return this.eventHandlers.has(u)}mount(u,d=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=sB(u),this.instance=u;const{layoutId:h,layout:f,visualElement:v}=this.options;if(v&&!v.current&&v.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),d&&(f||h)&&(this.isLayoutDirty=!0),t){let b;const x=()=>this.root.updateBlockedByResize=!1;t(u,()=>{this.root.updateBlockedByResize=!0,b&&b(),b=lB(x,250),dm.hasAnimatedSinceResize&&(dm.hasAnimatedSinceResize=!1,this.nodes.forEach(iA))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&v&&(h||f)&&this.addEventListener("didUpdate",({delta:b,hasLayoutChanged:x,hasRelativeTargetChanged:_,layout:A})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const R=this.options.transition||v.getDefaultTransition()||jB,{onLayoutAnimationStart:M,onLayoutAnimationComplete:U}=v.getProps(),O=!this.targetLayout||!wN(this.targetLayout,A)||_,B=!x&&_;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||B||x&&(O||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(b,B);const H={...dx(R,"layout"),onPlay:M,onComplete:U};(v.shouldReduceMotion||this.options.layoutRoot)&&(H.delay=0,H.type=!1),this.startAnimation(H)}else x||iA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=A})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Xa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(NB),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&SN(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let v=0;v<this.path.length;v++){const b=this.path[v];b.shouldResetTransform=!0,b.updateScroll("snapshot"),b.options.layoutRoot&&b.willUpdate(!1)}const{layoutId:d,layout:h}=this.options;if(d===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(rA);return}this.isUpdating||this.nodes.forEach(AB),this.isUpdating=!1,this.nodes.forEach(CB),this.nodes.forEach(EB),this.nodes.forEach(_B),this.clearAllSnapshots();const d=ds.now();lr.delta=Hs(0,1e3/60,d-lr.timestamp),lr.timestamp=d,lr.isProcessing=!0,uy.update.process(lr),uy.preRender.process(lr),uy.render.process(lr),lr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,tx.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(SB),this.sharedNodes.forEach(kB)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Jt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Jt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=_n(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(d=!1),d){const h=r(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:h,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!s)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!TN(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,v=f!==this.prevTransformTemplateValue;u&&(d||jo(this.latestValues)||v)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const d=this.measurePageBox();let h=this.removeElementScroll(d);return u&&(h=this.removeTransform(h)),MB(h),{animationId:this.root.animationId,measuredBox:d,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:d}=this.options;if(!d)return _n();const h=d.measureViewportBox();if(!(((u=this.scroll)===null||u===void 0?void 0:u.wasRoot)||this.path.some(PB))){const{scroll:v}=this.root;v&&(eu(h.x,v.offset.x),eu(h.y,v.offset.y))}return h}removeElementScroll(u){var d;const h=_n();if(Ti(h,u),!((d=this.scroll)===null||d===void 0)&&d.wasRoot)return h;for(let f=0;f<this.path.length;f++){const v=this.path[f],{scroll:b,options:x}=v;v!==this.root&&b&&x.layoutScroll&&(b.wasRoot&&Ti(h,u),eu(h.x,b.offset.x),eu(h.y,b.offset.y))}return h}applyTransform(u,d=!1){const h=_n();Ti(h,u);for(let f=0;f<this.path.length;f++){const v=this.path[f];!d&&v.options.layoutScroll&&v.scroll&&v!==v.root&&tu(h,{x:-v.scroll.offset.x,y:-v.scroll.offset.y}),jo(v.latestValues)&&tu(h,v.latestValues)}return jo(this.latestValues)&&tu(h,this.latestValues),h}removeTransform(u){const d=_n();Ti(d,u);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!jo(f.latestValues))continue;_0(f.latestValues)&&f.updateSnapshot();const v=_n(),b=f.measurePageBox();Ti(v,b),W1(d,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,v)}return jo(this.latestValues)&&W1(d,this.latestValues),d}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==lr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var d;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(u||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((d=this.parent)===null||d===void 0)&&d.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:b,layoutId:x}=this.options;if(!(!this.layout||!(b||x))){if(this.resolvedRelativeTargetAt=lr.timestamp,!this.targetDelta&&!this.relativeTarget){const _=this.getClosestProjectingParent();_&&_.layout&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_n(),this.relativeTargetOrigin=_n(),od(this.relativeTargetOrigin,this.layout.layoutBox,_.layout.layoutBox),Ti(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=_n(),this.targetWithTransforms=_n()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),U8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ti(this.target,this.layout.layoutBox),vN(this.target,this.targetDelta)):Ti(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const _=this.getClosestProjectingParent();_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_n(),this.relativeTargetOrigin=_n(),od(this.relativeTargetOrigin,this.target,_.target),Ti(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Gc&&Mo.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||_0(this.parent.latestValues)||gN(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var u;const d=this.getLead(),h=!!this.resumingFrom||this!==d;let f=!0;if((this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===lr.timestamp&&(f=!1),f)return;const{layout:v,layoutId:b}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(v||b))return;Ti(this.layoutCorrected,this.layout.layoutBox);const x=this.treeScale.x,_=this.treeScale.y;Y8(this.layoutCorrected,this.treeScale,this.path,h),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox,d.targetWithTransforms=_n());const{target:A}=d;if(!A){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(K1(this.prevProjectionDelta.x,this.projectionDelta.x),K1(this.prevProjectionDelta.y,this.projectionDelta.y)),ad(this.projectionDelta,this.layoutCorrected,A,this.latestValues),(this.treeScale.x!==x||this.treeScale.y!==_||!tA(this.projectionDelta.x,this.prevProjectionDelta.x)||!tA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",A)),Gc&&Mo.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var d;if((d=this.options.visualElement)===null||d===void 0||d.scheduleRender(),u){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Zl(),this.projectionDelta=Zl(),this.projectionDeltaWithTransform=Zl()}setAnimationOrigin(u,d=!1){const h=this.snapshot,f=h?h.latestValues:{},v={...this.latestValues},b=Zl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const x=_n(),_=h?h.source:void 0,A=this.layout?this.layout.source:void 0,R=_!==A,M=this.getStack(),U=!M||M.members.length<=1,O=!!(R&&!U&&this.options.crossfade===!0&&!this.path.some(DB));this.animationProgress=0;let B;this.mixTargetDelta=H=>{const G=H/1e3;sA(b.x,u.x,G),sA(b.y,u.y,G),this.setTargetDelta(b),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(od(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),OB(this.relativeTarget,this.relativeTargetOrigin,x,G),B&&gB(this.relativeTarget,B)&&(this.isProjectionDirty=!1),B||(B=_n()),Ti(B,this.relativeTarget)),R&&(this.animationValues=v,cB(v,f,this.latestValues,G,O,U)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=G},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Xa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Jt.update(()=>{dm.hasAnimatedSinceResize=!0,this.currentAnimation=iB(0,nA,{...u,onUpdate:d=>{this.mixTargetDelta(d),u.onUpdate&&u.onUpdate(d)},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(nA),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:d,target:h,layout:f,latestValues:v}=u;if(!(!d||!h||!f)){if(this!==u&&this.layout&&f&&CN(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||_n();const b=ci(this.layout.layoutBox.x);h.x.min=u.target.x.min,h.x.max=h.x.min+b;const x=ci(this.layout.layoutBox.y);h.y.min=u.target.y.min,h.y.max=h.y.min+x}Ti(d,h),tu(d,v),ad(this.projectionDeltaWithTransform,this.layoutCorrected,d,v)}}registerSharedNode(u,d){this.sharedNodes.has(u)||this.sharedNodes.set(u,new vB),this.sharedNodes.get(u).add(d);const f=d.options.initialPromotionConfig;d.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(d):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var u;const{layoutId:d}=this.options;return d?((u=this.getStack())===null||u===void 0?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:d}=this.options;return d?(u=this.getStack())===null||u===void 0?void 0:u.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:d,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),u&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let d=!1;const{latestValues:h}=u;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(d=!0),!d)return;const f={};h.z&&by("z",u,f,this.animationValues);for(let v=0;v<yy.length;v++)by(`rotate${yy[v]}`,u,f,this.animationValues),by(`skew${yy[v]}`,u,f,this.animationValues);u.render();for(const v in f)u.setStaticValue(v,f[v]),this.animationValues&&(this.animationValues[v]=f[v]);u.scheduleRender()}getProjectionStyles(u){var d,h;if(!this.instance||this.isSVG)return;if(!this.isVisible)return bB;const f={visibility:""},v=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=um(u==null?void 0:u.pointerEvents)||"",f.transform=v?v(this.latestValues,""):"none",f;const b=this.getLead();if(!this.projectionDelta||!this.layout||!b.target){const R={};return this.options.layoutId&&(R.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,R.pointerEvents=um(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!jo(this.latestValues)&&(R.transform=v?v({},""):"none",this.hasProjected=!1),R}const x=b.animationValues||b.latestValues;this.applyTransformsToTarget(),f.transform=yB(this.projectionDeltaWithTransform,this.treeScale,x),v&&(f.transform=v(x,f.transform));const{x:_,y:A}=this.projectionDelta;f.transformOrigin=`${_.origin*100}% ${A.origin*100}% 0`,b.animationValues?f.opacity=b===this?(h=(d=x.opacity)!==null&&d!==void 0?d:this.latestValues.opacity)!==null&&h!==void 0?h:1:this.preserveOpacity?this.latestValues.opacity:x.opacityExit:f.opacity=b===this?x.opacity!==void 0?x.opacity:"":x.opacityExit!==void 0?x.opacityExit:0;for(const R in Hm){if(x[R]===void 0)continue;const{correct:M,applyTo:U}=Hm[R],O=f.transform==="none"?x[R]:M(x[R],b);if(U){const B=U.length;for(let H=0;H<B;H++)f[U[H]]=O}else f[R]=O}return this.options.layoutId&&(f.pointerEvents=b===this?um(u==null?void 0:u.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var d;return(d=u.currentAnimation)===null||d===void 0?void 0:d.stop()}),this.root.nodes.forEach(rA),this.root.sharedNodes.clear()}}}function EB(t){t.updateLayout()}function _B(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:o}=t.options,u=n.source!==t.layout.source;o==="size"?wi(b=>{const x=u?n.measuredBox[b]:n.layoutBox[b],_=ci(x);x.min=r[b].min,x.max=x.min+_}):CN(o,n.layoutBox,r)&&wi(b=>{const x=u?n.measuredBox[b]:n.layoutBox[b],_=ci(r[b]);x.max=x.min+_,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[b].max=t.relativeTarget[b].min+_)});const d=Zl();ad(d,r,n.layoutBox);const h=Zl();u?ad(h,t.applyTransform(s,!0),n.measuredBox):ad(h,r,n.layoutBox);const f=!TN(d);let v=!1;if(!t.resumeFrom){const b=t.getClosestProjectingParent();if(b&&!b.resumeFrom){const{snapshot:x,layout:_}=b;if(x&&_){const A=_n();od(A,n.layoutBox,x.layoutBox);const R=_n();od(R,r,_.layoutBox),wN(A,R)||(v=!0),b.options.layoutRoot&&(t.relativeTarget=R,t.relativeTargetOrigin=A,t.relativeParent=b)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:h,layoutDelta:d,hasLayoutChanged:f,hasRelativeTargetChanged:v})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function TB(t){Gc&&Mo.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function wB(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function SB(t){t.clearSnapshot()}function rA(t){t.clearMeasurements()}function AB(t){t.isLayoutDirty=!1}function CB(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function iA(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function RB(t){t.resolveTargetDelta()}function IB(t){t.calcProjection()}function NB(t){t.resetSkewAndRotation()}function kB(t){t.removeLeadSnapshot()}function sA(t,e,n){t.translate=un(e.translate,0,n),t.scale=un(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function aA(t,e,n,r){t.min=un(e.min,n.min,r),t.max=un(e.max,n.max,r)}function OB(t,e,n,r){aA(t.x,e.x,n.x,r),aA(t.y,e.y,n.y,r)}function DB(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const jB={duration:.45,ease:[.4,0,.1,1]},oA=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),lA=oA("applewebkit/")&&!oA("chrome/")?Math.round:ui;function uA(t){t.min=lA(t.min),t.max=lA(t.max)}function MB(t){uA(t.x),uA(t.y)}function CN(t,e,n){return t==="position"||t==="preserve-aspect"&&!L8(eA(e),eA(n),.2)}function PB(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const VB=AN({attachResizeListener:(t,e)=>Od(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),xy={current:void 0},RN=AN({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!xy.current){const t=new VB({});t.mount(window),t.setOptions({layoutScroll:!0}),xy.current=t}return xy.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),LB={pan:{Feature:eB},drag:{Feature:Z8,ProjectionNode:RN,MeasureLayout:xN}};function cA(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,o=r[s];o&&Jt.postRender(()=>o(e,Zd(e)))}class UB extends so{mount(){const{current:e}=this.node;e&&(this.unmount=LU(e,n=>(cA(this.node,n,"Start"),r=>cA(this.node,r,"End"))))}unmount(){}}class BB extends so{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Jd(Od(this.node.current,"focus",()=>this.onFocus()),Od(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function dA(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),o=r[s];o&&Jt.postRender(()=>o(e,Zd(e)))}class zB extends so{mount(){const{current:e}=this.node;e&&(this.unmount=FU(e,n=>(dA(this.node,n,"Start"),(r,{success:s})=>dA(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const w0=new WeakMap,Ey=new WeakMap,FB=t=>{const e=w0.get(t.target);e&&e(t)},qB=t=>{t.forEach(FB)};function HB({root:t,...e}){const n=t||document;Ey.has(n)||Ey.set(n,{});const r=Ey.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(qB,{root:t,...e})),r[s]}function GB(t,e,n){const r=HB(e);return w0.set(t,n),r.observe(t),()=>{w0.delete(t),r.unobserve(t)}}const $B={some:0,all:1};class KB extends so{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:o}=e,u={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:$B[s]},d=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:v,onViewportLeave:b}=this.node.getProps(),x=f?v:b;x&&x(h)};return GB(this.node.current,u,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(YB(e,n))&&this.startObserver()}unmount(){}}function YB({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const QB={inView:{Feature:KB},tap:{Feature:zB},focus:{Feature:BB},hover:{Feature:UB}},WB={layout:{ProjectionNode:RN,MeasureLayout:xN}},S0={current:null},IN={current:!1};function XB(){if(IN.current=!0,!!Wb)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>S0.current=t.matches;t.addListener(e),e()}else S0.current=!1}const JB=[...eN,vr,Ja],ZB=t=>JB.find(ZI(t)),hA=new WeakMap;function ez(t,e,n){for(const r in e){const s=e[r],o=n[r];if(Er(s))t.addValue(r,s);else if(Er(o))t.addValue(r,Nd(s,{owner:t}));else if(o!==s)if(t.hasValue(r)){const u=t.getValue(r);u.liveStyle===!0?u.jump(s):u.hasAnimated||u.set(s)}else{const u=t.getStaticValue(r);t.addValue(r,Nd(u!==void 0?u:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const fA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class tz{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:o,visualState:u},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Tx,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=ds.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,Jt.render(this.render,!1,!0))};const{latestValues:h,renderState:f,onUpdate:v}=u;this.onUpdate=v,this.latestValues=h,this.baseTarget={...h},this.initialValues=n.initial?{...h}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=d,this.blockInitialAnimation=!!o,this.isControllingVariants=Up(n),this.isVariantNode=lI(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:b,...x}=this.scrapeMotionValuesFromProps(n,{},this);for(const _ in x){const A=x[_];h[_]!==void 0&&Er(A)&&A.set(h[_],!1)}}mount(e){this.current=e,hA.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),IN.current||XB(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:S0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){hA.delete(this.current),this.projection&&this.projection.unmount(),Xa(this.notifyUpdate),Xa(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=sl.has(e),s=n.on("change",d=>{this.latestValues[e]=d,this.props.onUpdate&&Jt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),o(),u&&u(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in xu){const n=xu[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):_n()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<fA.length;r++){const s=fA[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,u=e[o];u&&(this.propEventSubscriptions[s]=this.on(s,u))}this.prevMotionValues=ez(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Nd(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(XI(s)||FI(s))?s=parseFloat(s):!ZB(s)&&Ja.test(n)&&(s=YI(e,n)),this.setBaseTarget(e,Er(s)?s.get():s)),Er(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const u=rx(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);u&&(s=u[e])}if(r&&s!==void 0)return s;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!Er(o)?o:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new vx),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class NN extends tz{constructor(){super(...arguments),this.KeyframeResolver=tN}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Er(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function nz(t){return window.getComputedStyle(t)}class rz extends NN{constructor(){super(...arguments),this.type="html",this.renderInstance=vI}readValueFromInstance(e,n){if(sl.has(n)){const r=_x(n);return r&&r.default||0}else{const r=nz(e),s=(mI(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return yN(e,n)}build(e,n,r){ax(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return cx(e,n,r)}}class iz extends NN{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=_n}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(sl.has(n)){const r=_x(n);return r&&r.default||0}return n=yI.has(n)?n:ex(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return EI(e,n,r)}build(e,n,r){ox(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,s){bI(e,n,r,s)}mount(e){this.isSVGTag=ux(e.tagName),super.mount(e)}}const sz=(t,e)=>nx(t)?new iz(e):new rz(e,{allowProjection:t!==k.Fragment}),az=kU({...I8,...QB,...LB,...WB},sz),Si=$6(az),oz=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})}),lz=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),uz=({onGetStarted:t})=>{const e={initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6}},n={animate:{transition:{staggerChildren:.1}}};return g.jsxs("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow overflow-x-hidden",children:[g.jsxs("nav",{className:"absolute top-0 w-full p-6 flex justify-between items-center z-50",children:[g.jsxs("div",{className:"text-2xl font-serif font-bold",children:["Dress ",g.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),g.jsx("button",{onClick:t,className:"text-sm font-semibold hover:text-gold transition-colors bg-white/10 backdrop-blur-md px-4 py-2 rounded-full border border-white/20",children:"Se connecter"})]}),g.jsxs("section",{className:"relative min-h-screen flex flex-col justify-center items-center text-center px-4 pt-20",children:[g.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[500px] h-[500px] bg-gold/10 rounded-full blur-[100px] pointer-events-none"}),g.jsx("div",{className:"absolute bottom-[-10%] right-[-5%] w-[400px] h-[400px] bg-purple-500/5 rounded-full blur-[100px] pointer-events-none"}),g.jsxs(Si.div,{initial:"initial",animate:"animate",variants:n,className:"max-w-4xl mx-auto z-10",children:[g.jsxs(Si.div,{variants:e,className:"mb-6 inline-flex items-center gap-2 px-3 py-1 rounded-full bg-gold/10 border border-gold/20 text-gold text-xs font-bold uppercase tracking-wider",children:[g.jsx(Cd,{}),g.jsx("span",{children:"Assistant Mode IA  Beta Prive"})]}),g.jsxs(Si.h1,{variants:e,className:"text-5xl md:text-7xl lg:text-8xl font-serif font-bold mb-8 leading-tight",children:["Votre style, ",g.jsx("br",{}),g.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-gold to-yellow-600",children:"rinvent par l'IA."})]}),g.jsxs(Si.p,{variants:e,className:"text-lg md:text-xl text-gray-500 dark:text-gray-400 mb-10 max-w-2xl mx-auto leading-relaxed",children:[`Fini le "Je n'ai rien  me mettre". `,g.jsx("strong",{children:"Dress Me Up!"})," analyse votre garde-robe, cre des tenues sur-mesure et prpare vos valises en un clic."]}),g.jsx(Si.div,{variants:e,className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:g.jsxs("button",{onClick:t,className:"group relative px-8 py-4 bg-gold text-onyx text-lg font-bold rounded-full overflow-hidden shadow-lg shadow-gold/20 hover:shadow-gold/40 transition-all hover:scale-105 active:scale-95",children:[g.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Commencer l'exprience ",g.jsx(oz,{})]}),g.jsx("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"})]})})]}),g.jsx(Si.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:.8,duration:1},className:"absolute left-4 md:left-20 bottom-20 hidden lg:block",children:g.jsxs("div",{className:"bg-white dark:bg-raisin-black p-4 rounded-xl shadow-2xl border border-white/10 rotate-[-6deg] max-w-xs backdrop-blur-lg bg-opacity-90 dark:bg-opacity-90",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[g.jsx("div",{className:"w-8 h-8 bg-gold rounded-full flex items-center justify-center text-onyx",children:""}),g.jsx("div",{className:"text-xs font-medium",children:"Suggestion IA"})]}),g.jsx("p",{className:"text-sm font-serif italic",children:'"Pour ce soir  Rome, opte pour la chemise en lin blanc et le pantalon beige."'})]})}),g.jsx(Si.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{delay:1,duration:1},className:"absolute right-4 md:right-20 top-40 hidden lg:block",children:g.jsxs("div",{className:"bg-white dark:bg-raisin-black p-3 rounded-xl shadow-2xl border border-white/10 rotate-[6deg] backdrop-blur-lg bg-opacity-90 dark:bg-opacity-90",children:[g.jsx("div",{className:"w-32 h-32 bg-gray-200 dark:bg-gray-700 rounded-lg mb-2 flex items-center justify-center text-4xl",children:""}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-xs font-bold text-gray-500",children:"Manteau Laine"}),g.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"})]})]})}),g.jsxs(Si.div,{initial:{opacity:0},animate:{opacity:1,y:[0,10,0]},transition:{opacity:{delay:1.5,duration:.6},y:{repeat:1/0,duration:1.5,ease:"easeInOut"}},className:"absolute bottom-8 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2 cursor-pointer",onClick:()=>{window.scrollTo({top:window.innerHeight,behavior:"smooth"})},children:[g.jsx("span",{className:"text-xs text-gray-400 font-medium uppercase tracking-wider",children:"Dcouvrir"}),g.jsx("div",{className:"text-gold",children:g.jsx(lz,{})})]})]}),g.jsx("section",{className:"py-24 px-4 bg-white/50 dark:bg-black/20 backdrop-blur-sm",children:g.jsxs("div",{className:"max-w-6xl mx-auto",children:[g.jsxs("div",{className:"text-center mb-16",children:[g.jsx("h2",{className:"text-3xl md:text-4xl font-serif font-bold mb-4",children:"Votre dressing intelligent"}),g.jsx("p",{className:"text-gray-500 max-w-xl mx-auto",children:"Une suite d'outils puissants pour digitaliser et optimiser votre style au quotidien."})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[g.jsx(_y,{icon:g.jsx(l0,{}),title:"Digitalisez en un clair",description:"Prenez une photo, l'IA dtecte automatiquement la catgorie, la couleur et la matire. Votre garde-robe dans votre poche."}),g.jsx(_y,{icon:g.jsx(Cd,{}),title:"Styliste Personnel",description:"Une runion ? Un date ? Demandez  l'IA de crer la tenue parfaite en fonction de la mto et de l'occasion."}),g.jsx(_y,{icon:g.jsx(ZR,{}),title:"Valise Optimise",description:"Partez l'esprit lger. Gnrez une liste de vtements optimise pour la dure et la destination de votre voyage."})]})]})}),g.jsx("section",{className:"py-20 px-4 text-center",children:g.jsxs("div",{className:"max-w-3xl mx-auto",children:[g.jsx("h2",{className:"text-3xl md:text-5xl font-serif font-bold mb-8",children:"Prt  upgrader votre style ?"}),g.jsx("button",{onClick:t,className:"px-10 py-4 bg-raisin-black dark:bg-snow text-snow dark:text-onyx font-bold rounded-full text-lg hover:opacity-90 transition-opacity transform hover:scale-105 duration-200",children:"Rejoindre maintenant"}),g.jsx("p",{className:"mt-8 text-sm text-gray-500",children:" 2025 Dress Me Up! - Fait avec  & IA."})]})})]})},_y=({icon:t,title:e,description:n})=>g.jsxs(Si.div,{whileHover:{y:-5},className:"p-8 rounded-2xl bg-white dark:bg-raisin-black border border-black/5 dark:border-white/5 shadow-xl shadow-black/5 dark:shadow-black/20",children:[g.jsx("div",{className:"w-12 h-12 bg-gold/10 text-gold rounded-xl flex items-center justify-center mb-6",children:g.jsx("div",{className:"w-6 h-6",children:t})}),g.jsx("h3",{className:"text-xl font-bold mb-3",children:e}),g.jsx("p",{className:"text-gray-500 dark:text-gray-400 leading-relaxed",children:n})]}),cz=({onAnalyze:t,isAnalyzing:e})=>{const n=k.useRef(null),[r,s]=k.useState([]),[o,u]=k.useState(!1),[d,h]=k.useState(!1);k.useEffect(()=>{const O=()=>h(window.innerWidth<1024);return O(),window.addEventListener("resize",O),()=>window.removeEventListener("resize",O)},[]),k.useEffect(()=>()=>{r.forEach(O=>URL.revokeObjectURL(O.preview))},[r]);const f=O=>{const B=O.map(H=>({id:`${H.name}-${H.lastModified}-${Math.random()}`,file:H,preview:URL.createObjectURL(H)}));s(H=>[...H,...B])},v=O=>{O.target.files&&(f(Array.from(O.target.files)),O.target.value="")},b=()=>{var O;e||(O=n.current)==null||O.click()},x=O=>{d||(O.preventDefault(),O.stopPropagation(),u(!0))},_=O=>{d||(O.preventDefault(),O.stopPropagation(),u(!1))},A=O=>{d||(O.preventDefault(),O.stopPropagation())},R=O=>{d||(O.preventDefault(),O.stopPropagation(),u(!1),O.dataTransfer.files&&O.dataTransfer.files.length>0&&(f(Array.from(O.dataTransfer.files)),O.dataTransfer.clearData()))},M=O=>{const B=r.find(H=>H.id===O);B&&URL.revokeObjectURL(B.preview),s(H=>H.filter(G=>G.id!==O))},U=()=>{r.length>0&&!e&&(t(r.map(O=>O.file)),s([]))};return g.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",onDragEnter:x,onDragLeave:_,onDragOver:A,onDrop:R,children:[g.jsx("h2",{className:"text-2xl font-serif font-bold mb-6 text-gold",children:"Ajouter  ma garde-robe"}),g.jsxs("div",{onClick:b,className:`relative bg-snow dark:bg-onyx rounded-lg p-12 text-center transition-all duration-300 ring-1 ring-dashed ring-black/20 dark:ring-white/20 ${e?"cursor-default":"cursor-pointer hover:ring-gold dark:hover:ring-gold"}`,children:[g.jsx("input",{type:"file",ref:n,onChange:v,className:"hidden",accept:"image/png, image/jpeg, image/webp",multiple:!0,disabled:e}),g.jsx("div",{className:"flex flex-col items-center justify-center min-h-[8rem]",children:e?g.jsxs(g.Fragment,{children:[g.jsx(A6,{}),g.jsx("p",{className:"mt-4 text-sm font-medium text-gray-500 dark:text-gray-400 tracking-wide",children:"Analyse en cours..."})]}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:g.jsx(l0,{})}),g.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:d?"Appuyez pour ajouter des photos":"Glissez-dposez vos photos"}),g.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["ou ",g.jsx("span",{className:"text-gold font-medium",children:"cliquez pour slectionner"})]})]})}),o&&!d&&g.jsxs("div",{className:"absolute inset-0 bg-gold/90 backdrop-blur-sm rounded-lg flex flex-col items-center justify-center transition-opacity",children:[g.jsx("div",{className:"text-black transform-gpu scale-110",children:g.jsx(l0,{})}),g.jsx("p",{className:"mt-2 font-bold text-lg text-black",children:"Dposez pour ajouter"})]})]}),r.length>0&&!e&&g.jsxs("div",{className:"mt-8",children:[g.jsx("h3",{className:"font-semibold mb-4 text-gray-600 dark:text-gray-300",children:"Prts pour l'analyse :"}),g.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 mb-6",children:r.map(O=>g.jsxs("div",{className:"relative group aspect-square",children:[g.jsx("img",{src:O.preview,alt:O.file.name,className:"w-full h-full object-cover rounded-md shadow-md"}),g.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity rounded-md"}),g.jsx("button",{onClick:()=>M(O.id),className:"absolute -top-2 -right-2 p-1 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white opacity-0 group-hover:opacity-100 transition-all hover:bg-red-500 hover:scale-110 focus:opacity-100","aria-label":"Supprimer",children:g.jsx(zm,{})})]},O.id))}),g.jsxs("button",{onClick:U,disabled:e||r.length===0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[g.jsx(Cd,{}),"Analyser les ",r.length," article(s)"]})]})]})},dz=()=>g.jsx("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-800 rounded-lg aspect-square relative overflow-hidden",children:g.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent skew-x-12 translate-x-[-100%] animate-shimmer"})}),hz=({imageSrc:t,analysis:e,onClick:n,onPreview:r,onCancelPreview:s,isSelected:o,isSet:u,isFavorite:d,isExcluded:h})=>{const f=k.useRef(null),[v,b]=k.useState(!1),x=()=>{f.current=setTimeout(()=>{b(!0),r&&r(t,e)},500)},_=()=>{f.current&&clearTimeout(f.current),v||n(),b(!1)},A=()=>{r&&window.innerWidth>=1024&&r(t,e)},R=()=>{s&&window.innerWidth>=1024&&s()};return g.jsxs("div",{onClick:n,onTouchStart:x,onTouchEnd:_,onMouseEnter:A,onMouseLeave:R,className:"group relative aspect-square bg-raisin-black rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 cursor-pointer",children:[g.jsx("img",{src:t,alt:e,loading:"lazy",className:`w-full h-full object-cover transition-transform duration-300 group-hover:scale-110 ${h?"opacity-40":""}`}),g.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${o?"ring-4 ring-gold":"ring-2 ring-transparent"} rounded-lg`}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),h&&g.jsx("div",{className:"absolute inset-0 bg-gray-500/30 backdrop-blur-[1px] flex items-center justify-center z-5",children:g.jsx("div",{className:"bg-gray-800/80 backdrop-blur-sm rounded-full p-3",children:g.jsx(u0,{className:"w-8 h-8 text-gray-300"})})}),o?g.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-gold rounded-full text-onyx z-10",children:g.jsx($b,{})}):d?g.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-red-500 z-10",children:g.jsx(yu,{className:"w-4 h-4"})}):u?g.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:g.jsx(Ou,{})}):null,g.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:g.jsx("p",{className:"text-white text-sm font-medium line-clamp-2",children:e})})]})},fz={Hauts:{color:"Toutes",material:"Toutes",subcategory:"Toutes"},Bas:{color:"Toutes",material:"Toutes",subcategory:"Toutes"},Chaussures:{color:"Toutes",material:"Toutes",subcategory:"Toutes"},Accessoires:{color:"Toutes",material:"Toutes",subcategory:"Toutes"}},mz=({clothingItems:t,isLoading:e,clothingSets:n=[],onItemClick:r,onDeleteItem:s,onCreateSet:o})=>{var en,zn,Ut;const[u,d]=k.useState("Hauts"),[h,f]=k.useState(fz),[v,b]=k.useState(""),[x,_]=k.useState("favorites"),[A,R]=k.useState(!1),[M,U]=k.useState(new Set),[O,B]=k.useState(null),H=k.useRef(null),G=k.useRef(null),q=k.useMemo(()=>T6(t),[t]),C=k.useMemo(()=>n||[],[n]),S=k.useMemo(()=>new Set(C.flatMap(he=>he.itemIds||[])),[C]),N=q.length,P=[{name:"Hauts",icon:g.jsx(C6,{})},{name:"Bas",icon:g.jsx(R6,{})},{name:"Chaussures",icon:g.jsx(I6,{})},{name:"Accessoires",icon:g.jsx(N6,{})}],V=[{value:"favorites",label:"Favoris d'abord"},{value:"newest",label:"Plus rcents"},{value:"oldest",label:"Plus anciens"},{value:"color",label:"Couleur (A-Z)"},{value:"category",label:"Catgorie"}],L=he=>{A?U(ve=>{const nt=new Set(ve);return nt.has(he.id)?nt.delete(he.id):nt.add(he.id),nt}):r(he)},D=he=>[...he].sort((ve,nt)=>{const an=ve.subcategory||"zzz",ze=nt.subcategory||"zzz",Ht=an.localeCompare(ze);if(Ht!==0)return Ht;switch(x){case"favorites":return(nt.isFavorite?1:0)-(ve.isFavorite?1:0);case"newest":return!ve.createdAt&&!nt.createdAt?0:ve.createdAt?nt.createdAt?nt.createdAt-ve.createdAt:-1:1;case"oldest":return!ve.createdAt&&!nt.createdAt?0:ve.createdAt?nt.createdAt?ve.createdAt-nt.createdAt:-1:1;case"color":return ve.color.localeCompare(nt.color);case"category":return ve.category.localeCompare(nt.category);default:return 0}}),pe=k.useMemo(()=>{if(!v.trim())return q;const he=v.toLowerCase();return q.filter(ve=>ve.analysis.toLowerCase().includes(he)||ve.color.toLowerCase().includes(he)||ve.material.toLowerCase().includes(he)||ve.category.toLowerCase().includes(he)||ve.subcategory&&ve.subcategory.toLowerCase().includes(he))},[q,v]),Ie=k.useMemo(()=>{if(!u)return[];const he=pe.filter(nt=>nt.category===u),ve=h[u];return ve?he.filter(nt=>{const an=ve.color==="Toutes"||nt.color===ve.color,ze=ve.material==="Toutes"||nt.material===ve.material,Ht=!ve.subcategory||ve.subcategory==="Toutes"||nt.subcategory===ve.subcategory;return an&&ze&&Ht}):he},[pe,u,(en=h[u])==null?void 0:en.color,(zn=h[u])==null?void 0:zn.material,(Ut=h[u])==null?void 0:Ut.subcategory]),X=k.useMemo(()=>D(Ie),[Ie,x,u]),ie=k.useMemo(()=>P.reduce((he,{name:ve})=>(he[ve]=pe.filter(nt=>nt.category===ve).length,he),{}),[pe]),ce=k.useMemo(()=>{if(!u)return[];const he=pe.filter(ve=>ve.category===u).map(ve=>ve.color);return["Toutes",...Array.from(new Set(he))]},[pe,u]),Ae=k.useMemo(()=>{if(!u)return[];const he=pe.filter(ve=>ve.category===u).map(ve=>ve.material);return["Toutes",...Array.from(new Set(he))]},[pe,u]),_e=k.useMemo(()=>{if(!u)return["Toutes"];const he=Oa[u];return!he||he.length===0?["Toutes"]:["Toutes",...he]},[u]),z=he=>{u&&f(ve=>({...ve,[u]:{...ve[u],color:he}}))},J=he=>{u&&f(ve=>({...ve,[u]:{...ve[u],material:he}}))},de=he=>{u&&f(ve=>({...ve,[u]:{...ve[u],subcategory:he}}))},fe=he=>{d(u===he?null:he)},we=()=>{R(!A),U(new Set)},je=()=>{if(M.size<2){alert("Veuillez slectionner au moins 2 articles pour crer un ensemble.");return}const he=window.prompt("Donnez un nom  cet ensemble :");he&&(o(he,Array.from(M)),we())},qe=()=>{b("")},Zt=(he,ve)=>{H.current&&clearTimeout(H.current),G.current&&clearTimeout(G.current),window.innerWidth>=1024?H.current=setTimeout(()=>{B({src:he,description:ve})},300):B({src:he,description:ve})},At=()=>{H.current&&clearTimeout(H.current),G.current=setTimeout(()=>{B(null)},150)},Mn=()=>{G.current&&clearTimeout(G.current)},Bn=()=>{H.current&&clearTimeout(H.current),G.current&&clearTimeout(G.current),B(null)};return k.useEffect(()=>{const he=ve=>{ve.key==="Escape"&&O&&Bn()};return window.addEventListener("keydown",he),()=>window.removeEventListener("keydown",he)},[O]),k.useEffect(()=>()=>{H.current&&clearTimeout(H.current),G.current&&clearTimeout(G.current)},[]),e?g.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl p-6 lg:p-8",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[g.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded-full animate-pulse"}),g.jsx("div",{className:"h-8 w-48 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]}),g.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:[...Array(10)].map((he,ve)=>g.jsx(dz,{},ve))})]}):N===0?g.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-8 text-center",children:[g.jsx(WS,{className:"w-20 h-20 mx-auto text-gray-400 dark:text-gray-600 mb-4"}),g.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-700 dark:text-gray-300",children:"Votre garde-robe est vide"}),g.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Ajoutez vos premiers vtements pour commencer  crer vos tenues !"})]}):g.jsxs(g.Fragment,{children:[g.jsx(ZS,{children:O&&g.jsx(Si.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},onClick:Bn,className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm cursor-pointer p-4",children:g.jsxs(Si.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.15},onMouseEnter:Mn,onMouseLeave:At,className:"relative max-w-2xl max-h-[80vh] rounded-xl overflow-hidden shadow-2xl",onClick:he=>he.stopPropagation(),children:[g.jsx("img",{src:O.src,alt:O.description,className:"w-full h-full object-contain"}),g.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 to-transparent p-4",children:g.jsx("p",{className:"text-white text-sm font-medium",children:O.description})}),g.jsx("button",{onClick:Bn,className:"absolute top-4 right-4 p-2 bg-black/50 hover:bg-black/70 backdrop-blur-sm rounded-full text-white transition-colors","aria-label":"Fermer la preview",children:g.jsx(zm,{})})]})})}),g.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",children:[g.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-6",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(WS,{className:"w-8 h-8 text-gold"}),g.jsxs("div",{children:[g.jsxs("h2",{className:"text-3xl font-serif font-bold tracking-tight",children:[g.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),g.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[N," vtement",N>1?"s":""]})]})]}),A?g.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[g.jsx("button",{onClick:we,className:"flex-shrink-0 px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors text-sm font-medium",children:"Annuler"}),g.jsxs("button",{onClick:je,disabled:M.size<2,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 text-sm disabled:opacity-50",children:["Valider (",M.size,")"]})]}):g.jsxs("button",{onClick:we,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300 text-sm",children:[g.jsx(Ou,{}),"Crer un ensemble"]})]}),g.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-6",children:[g.jsxs("div",{className:"relative flex-1",children:[g.jsx(eI,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),g.jsx("input",{type:"text",value:v,onChange:he=>b(he.target.value),placeholder:"Rechercher par description, couleur, matire...",className:"w-full pl-10 pr-10 py-2.5 bg-snow dark:bg-onyx border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-all"}),v&&g.jsx("button",{onClick:qe,className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors","aria-label":"Effacer la recherche",children:g.jsx(zm,{})})]}),g.jsxs("div",{className:"relative sm:w-48",children:[g.jsx(tI,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"}),g.jsx("select",{value:x,onChange:he=>_(he.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-snow dark:bg-onyx border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent appearance-none cursor-pointer transition-all",children:V.map(he=>g.jsx("option",{value:he.value,children:he.label},he.value))}),g.jsx(rd,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),v&&g.jsxs("div",{className:"mb-4 text-sm text-gray-500 dark:text-gray-400",children:[pe.length," rsultat",pe.length>1?"s":"",' pour "',v,'"']}),A&&g.jsxs("div",{className:"bg-gold/10 border border-gold/30 text-gold-dark dark:text-gold p-4 rounded-lg mb-6 text-center",children:[g.jsx("p",{className:"font-semibold",children:"Mode Cration d'Ensemble"}),g.jsx("p",{className:"text-sm",children:"Slectionnez les articles que vous souhaitez lier."})]}),g.jsx("div",{className:"space-y-6",children:P.map(({name:he,icon:ve})=>{const nt=ie[he]||0,an=u===he;return g.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-lg overflow-hidden",children:[g.jsxs("button",{onClick:()=>fe(he),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900/50 hover:bg-gray-100 dark:hover:bg-gray-900 transition-colors",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("span",{className:"w-5 h-5 text-gold",children:ve}),g.jsx("span",{className:"font-semibold text-lg",children:he}),g.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",nt,")"]})]}),g.jsx(rd,{className:`w-5 h-5 transition-transform ${an?"rotate-180":""}`})]}),an&&g.jsxs("div",{className:"p-6 space-y-6",children:[g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium mb-2",children:"Type"}),g.jsx("select",{value:h[he].subcategory||"Toutes",onChange:ze=>de(ze.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:_e.map(ze=>g.jsx("option",{value:ze,children:ze},ze))})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium mb-2",children:"Couleur"}),g.jsx("select",{value:h[he].color,onChange:ze=>z(ze.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:ce.map(ze=>g.jsx("option",{value:ze,children:ze},ze))})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium mb-2",children:"Matire"}),g.jsx("select",{value:h[he].material,onChange:ze=>J(ze.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:Ae.map(ze=>g.jsx("option",{value:ze,children:ze},ze))})]})]}),X.length>0?g.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:g.jsx(ZS,{mode:"popLayout",children:X.map((ze,Ht)=>g.jsx(Si.div,{layout:!0,initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.5,transition:{duration:.2}},transition:{duration:.4,delay:Ht*.05,type:"spring",bounce:.3},children:g.jsx(hz,{imageSrc:ze.imageSrc,analysis:ze.analysis,onClick:()=>L(ze),onPreview:Zt,onCancelPreview:At,isSelected:M.has(ze.id),isSet:S.has(ze.id),isFavorite:ze.isFavorite,isExcluded:ze.isExcluded})},ze.id))})}):g.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"Aucun vtement ne correspond aux filtres slectionns."})]})]},he)})})]})]})},kN=({clothingItems:t,clothingSets:e,onGenerate:n,isGenerating:r,weatherInfo:s,weatherError:o,anchorItem:u,onClearAnchor:d})=>{const[h,f]=Ln.useState(""),v=u?"name"in u?u.name:u.analysis:null,b=_=>{_.preventDefault(),n(h||"Casual")},x=["Casual","Soire chic","Travail (formel)"];return g.jsxs("div",{children:[v&&g.jsxs("div",{className:"mb-4 p-3 rounded-lg bg-gold/10 border border-gold/30 relative",children:[g.jsxs("p",{className:"text-sm font-semibold text-gold-dark dark:text-gold text-center pr-8",children:[" Crer une tenue avec : ",g.jsx("span",{className:"font-bold",children:v})]}),d&&g.jsx("button",{type:"button",onClick:d,className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 hover:bg-gold/20 rounded-full transition-colors","aria-label":"Supprimer l'ancre",title:"Gnrer sans cet article",children:g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),g.jsxs("div",{className:"text-center mb-6 p-3 rounded-lg bg-snow dark:bg-onyx border border-black/10 dark:border-white/10",children:[s&&g.jsxs("p",{className:"text-sm font-medium text-blue-500 dark:text-blue-400",children:["Mto : ",s," "]}),o&&g.jsx("p",{className:"text-sm font-medium text-red-500",children:o}),!s&&!o&&g.jsx("p",{className:"text-sm font-medium text-gray-400 animate-pulse",children:"Rcupration de la mto..."})]}),g.jsx("form",{onSubmit:b,children:g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"occasion",className:"block text-sm font-medium text-center text-gray-500 dark:text-gray-400 mb-3",children:"Pour quelle occasion ?"}),g.jsx("div",{className:"flex justify-center gap-2 mb-4",children:x.map(_=>g.jsx("button",{type:"button",onClick:()=>f(_),className:`px-4 py-1.5 rounded-full text-sm font-semibold transition-colors duration-200 ${h===_?"bg-gold text-onyx":"bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 hover:border-gold dark:hover:border-gold text-gray-700 dark:text-gray-300"}`,disabled:r,children:_},_))}),g.jsx("input",{id:"occasion",type:"text",value:h,onChange:_=>f(_.target.value),placeholder:"Ou dcrivez... (ex: Brunch dcontract)",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:r})]}),g.jsxs("button",{type:"submit",disabled:r,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[g.jsx(Cd,{}),r?"Gnration...":"Gnrer des Tenues"]}),g.jsx("div",{className:"text-center mt-2",children:g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:" Gnration : 30-60 secondes (selon la taille de votre garde-robe)"})})]})})]})},pz=!1,gz=({outfits:t,allClothingItems:e,allClothingSets:n,favoriteOutfits:r,onToggleFavorite:s,onGenerateVisual:o,generatingVisualFor:u,selectedOutfit:d,onSelectOutfit:h,onGenerateVariants:f,isGenerating:v,onOpenChat:b})=>{const[x,_]=k.useState(null),[A,R]=k.useState(null),M=k.useRef(null);k.useEffect(()=>{v&&M.current&&M.current.scrollIntoView({behavior:"smooth",block:"center"})},[v]),k.useEffect(()=>{if(!x)return;const O=B=>{B.key==="Escape"&&_(null)};return window.addEventListener("keydown",O),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",O),document.body.style.overflow="auto"}},[x]);const U=O=>{const{id:B,description:H}=O,G=B?B.trim():"",q=H?H.trim().toLowerCase():"";let C=e.find(N=>N.id===G);if(C)return C;let S=n.find(N=>N.id===G);if(S)return S;if(G&&(C=e.find(N=>N.analysis.toLowerCase().includes(G.toLowerCase())),C)||q&&(C=e.find(N=>{const P=N.analysis.toLowerCase();return P.includes(q)||q.includes(P)}),C))return C};return g.jsxs(g.Fragment,{children:[v&&g.jsxs("div",{ref:M,className:"mt-10 flex flex-col items-center justify-center py-12 px-6 bg-gradient-to-br from-gold/5 to-gold/10 dark:from-gold/10 dark:to-gold/5 rounded-xl border-2 border-dashed border-gold/30",children:[g.jsxs("svg",{className:"animate-spin h-12 w-12 text-gold mb-4",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),g.jsx("p",{className:"text-lg font-medium text-gold-dark dark:text-gold mb-1",children:"Gnration de variantes..."}),g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"L'IA cre 3 nouvelles tenues adaptes"})]}),g.jsx("div",{className:"mt-10 space-y-8",children:t.map((O,B)=>{const H=r.some(q=>q.titre===O.titre&&q.description===O.description);O.titre;const G=(d==null?void 0:d.titre)===O.titre&&(d==null?void 0:d.description)===O.description;return g.jsxs("div",{className:`bg-snow dark:bg-onyx border-2 rounded-lg p-5 transition-all duration-300 hover:shadow-lg relative ${G?"border-gold shadow-gold/30 shadow-lg":"border-black/10 dark:border-white/10 hover:border-gold/50"}`,children:[G&&g.jsxs("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-gradient-to-r from-gold to-gold-dark text-onyx px-4 py-1 rounded-full text-xs font-bold shadow-lg flex items-center gap-1.5",children:[g.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 20 20",children:g.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Tenue choisie"]}),g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:O.titre}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:()=>h(O),className:`p-1.5 transition-colors ${G?"text-gold":"text-gray-400 hover:text-gold dark:hover:text-gold"}`,"aria-label":G?"Dslectionner cette tenue":"Choisir cette tenue",title:G?"Dslectionner cette tenue":"Choisir cette tenue",children:g.jsx("svg",{className:"w-6 h-6",fill:G?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),b&&g.jsx("button",{onClick:()=>b(O),className:"p-1.5 text-gray-400 hover:text-gold dark:hover:text-gold transition-colors","aria-label":"Demander conseil",title:"Demander conseil sur cette tenue",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),g.jsx("button",{onClick:()=>R(A===B?null:B),disabled:v,className:`p-1.5 transition-colors ${A===B?"text-gold":"text-gray-400 hover:text-gold dark:hover:text-gold"} disabled:opacity-50 disabled:cursor-not-allowed`,"aria-label":A===B?"Annuler la modification":"Modifier cette tenue",title:A===B?"Annuler la modification":"Modifier cette tenue",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),pz,g.jsx("button",{onClick:()=>s(O),className:"p-1.5 text-gray-400 hover:text-gold dark:hover:text-gold transition-colors","aria-label":H?"Retirer des favoris":"Ajouter aux favoris",children:H?g.jsx(yu,{className:"w-6 h-6 text-gold"}):g.jsx(Fm,{className:"w-6 h-6"})})]})]}),g.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-3",children:O.description}),A===B&&g.jsx("div",{className:"mb-4 p-3 bg-gold/10 border border-gold/30 rounded-lg",children:g.jsxs("p",{className:"text-sm text-gold-dark dark:text-gold font-medium flex items-center gap-2",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Cliquez sur une pice pour la remplacer"]})}),g.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:O.vetements.map((q,C)=>{const S=U(q),N=S?S.imageSrc:null,P=A===B;return g.jsxs("div",{className:"relative",children:[g.jsx("button",{onClick:()=>N&&!P&&_(N),className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden transition-transform duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx disabled:cursor-default disabled:hover:scale-100 relative group",disabled:!N||P,"aria-label":`Agrandir l'image de : ${q.description}`,title:q.description,children:N?g.jsx("img",{src:N,alt:q.description,className:"w-full h-full object-cover"}):g.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:g.jsx(JR,{})})}),P&&N&&g.jsx("button",{onClick:()=>{f(O,q),R(null)},disabled:v,className:"absolute inset-0 flex items-center justify-center bg-onyx/80 backdrop-blur-sm rounded-md transition-all hover:bg-gold/90 disabled:opacity-50 disabled:cursor-not-allowed group","aria-label":`Remplacer ${q.description}`,title:`Remplacer ${q.description}`,children:g.jsx("svg",{className:"w-8 h-8 text-white group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]},C)})}),g.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:O.vetements.map((q,C)=>g.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:q.description},C))})]},B)})}),x&&g.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:()=>_(null),role:"dialog","aria-modal":"true",children:g.jsxs("div",{className:"relative",onClick:O=>O.stopPropagation(),children:[g.jsx("img",{src:x,alt:"Vue agrandie",className:"max-w-[90vw] max-h-[85vh] object-contain rounded-lg shadow-2xl"}),g.jsx("button",{onClick:()=>_(null),className:"absolute top-2 right-2 p-2 bg-raisin-black/90 border-2 border-white/50 rounded-full text-white hover:bg-red-500 hover:border-white hover:scale-110 transition-all focus:outline-none focus:ring-2 focus:ring-gold shadow-lg","aria-label":"Fermer",children:g.jsx(k6,{})})]})})]})},lu=k.memo(gz);var ON=rC(),vz=yz()?k.useLayoutEffect:k.useEffect;function yz(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function bz(){var t=k.useState(Object.create(null)),e=t[1];return k.useCallback(function(){e(Object.create(null))},[])}var xz=function(e){var n=e.children,r=e.type,s=r===void 0?"reach-portal":r,o=k.useRef(null),u=k.useRef(null),d=bz();return vz(function(){if(o.current){var h=o.current.ownerDocument;return u.current=h==null?void 0:h.createElement(s),h.body.appendChild(u.current),d(),function(){u.current&&u.current.ownerDocument&&u.current.ownerDocument.body.removeChild(u.current)}}},[s,d]),u.current?ON.createPortal(n,u.current):k.createElement("span",{ref:o})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ge=function(){return ge=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ge.apply(this,arguments)};function Cx(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function mt(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _t(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,o=[],u;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(d){u={error:d}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return o}function Wt(t,e,n){if(arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var Pt;(function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"})(Pt||(Pt={}));var _u;(function(t){t.Parent="#_parent",t.Internal="#_internal"})(_u||(_u={}));var A0=Pt.Start,Rx=Pt.Stop,eh=Pt.Raise,Fp=Pt.Send,DN=Pt.Cancel,Ez=Pt.NullEvent,Ix=Pt.Assign;Pt.After;Pt.DoneState;var jN=Pt.Log,_z=Pt.Init,C0=Pt.Invoke;Pt.ErrorExecution;var mA=Pt.ErrorPlatform,Tz=Pt.ErrorCustom,MN=Pt.Update,wz=Pt.Choose,Sz=Pt.Pure,PN=".",pA={},R0="xstate.guard",Az="",Mf;function Nx(t,e,n){n===void 0&&(n=PN);var r=ld(t,n),s=ld(e,n);return Rt(s)?Rt(r)?s===r:!1:Rt(r)?r in s:Object.keys(r).every(function(o){return o in s?Nx(r[o],s[o]):!1})}function VN(t){try{return Rt(t)||typeof t=="number"?"".concat(t):t.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function I0(t,e){try{return Mu(t)?t:t.toString().split(e)}catch{throw new Error("'".concat(t,"' is not a valid state path."))}}function Cz(t){return typeof t=="object"&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function ld(t,e){if(Cz(t))return t.value;if(Mu(t))return Wm(t);if(typeof t!="string")return t;var n=I0(t,e);return Wm(n)}function Wm(t){if(t.length===1)return t[0];for(var e={},n=e,r=0;r<t.length-1;r++)r===t.length-2?n[t[r]]=t[r+1]:(n[t[r]]={},n=n[t[r]]);return e}function $c(t,e){for(var n={},r=Object.keys(t),s=0;s<r.length;s++){var o=r[s];n[o]=e(t[o],o,t,s)}return n}function gA(t,e,n){var r,s,o={};try{for(var u=mt(Object.keys(t)),d=u.next();!d.done;d=u.next()){var h=d.value,f=t[h];n(f)&&(o[h]=e(f,h,t))}}catch(v){r={error:v}}finally{try{d&&!d.done&&(s=u.return)&&s.call(u)}finally{if(r)throw r.error}}return o}var Rz=function(t){return function(e){var n,r,s=e;try{for(var o=mt(t),u=o.next();!u.done;u=o.next()){var d=u.value;s=s[d]}}catch(h){n={error:h}}finally{try{u&&!u.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s}};function Iz(t,e){return function(n){var r,s,o=n;try{for(var u=mt(t),d=u.next();!d.done;d=u.next()){var h=d.value;o=o[e][h]}}catch(f){r={error:f}}finally{try{d&&!d.done&&(s=u.return)&&s.call(u)}finally{if(r)throw r.error}}return o}}function hm(t){if(!t)return[[]];if(Rt(t))return[[t]];var e=ln(Object.keys(t).map(function(n){var r=t[n];return typeof r!="string"&&(!r||!Object.keys(r).length)?[[n]]:hm(t[n]).map(function(s){return[n].concat(s)})}));return e}function ln(t){var e;return(e=[]).concat.apply(e,Wt([],_t(t),!1))}function LN(t){return Mu(t)?t:[t]}function Pi(t){return t===void 0?[]:LN(t)}function Xm(t,e,n){var r,s;if(St(t))return t(e,n.data);var o={};try{for(var u=mt(Object.keys(t)),d=u.next();!d.done;d=u.next()){var h=d.value,f=t[h];St(f)?o[h]=f(e,n.data):o[h]=f}}catch(v){r={error:v}}finally{try{d&&!d.done&&(s=u.return)&&s.call(u)}finally{if(r)throw r.error}}return o}function Nz(t){return/^(done|error)\./.test(t)}function vA(t){return!!(t instanceof Promise||t!==null&&(St(t)||typeof t=="object")&&St(t.then))}function kz(t){return t!==null&&typeof t=="object"&&"transition"in t&&typeof t.transition=="function"}function Oz(t,e){var n,r,s=_t([[],[]],2),o=s[0],u=s[1];try{for(var d=mt(t),h=d.next();!h.done;h=d.next()){var f=h.value;e(f)?o.push(f):u.push(f)}}catch(v){n={error:v}}finally{try{h&&!h.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}return[o,u]}function UN(t,e){return $c(t.states,function(n,r){if(n){var s=(Rt(e)?void 0:e[r])||(n?n.current:void 0);if(s)return{current:s,states:UN(n,s)}}})}function Dz(t,e){return{current:e,states:UN(t,e)}}function yA(t,e,n,r){var s=t&&n.reduce(function(o,u){var d,h,f=u.assignment,v={state:r,action:u,_event:e},b={};if(St(f))b=f(o,e.data,v);else try{for(var x=mt(Object.keys(f)),_=x.next();!_.done;_=x.next()){var A=_.value,R=f[A];b[A]=St(R)?R(o,e.data,v):R}}catch(M){d={error:M}}finally{try{_&&!_.done&&(h=x.return)&&h.call(x)}finally{if(d)throw d.error}}return Object.assign({},o,b)},t);return s}var jz=function(){};function Mu(t){return Array.isArray(t)}function St(t){return typeof t=="function"}function Rt(t){return typeof t=="string"}function BN(t,e){if(t)return Rt(t)?{type:R0,name:t,predicate:e?e[t]:void 0}:St(t)?{type:R0,name:t.name,predicate:t}:t}function Mz(t){try{return"subscribe"in t&&St(t.subscribe)}catch{return!1}}var Da=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();Mf={},Mf[Da]=function(){return this},Mf[Symbol.observable]=function(){return this};function Tu(t){return!!t&&"__xstatenode"in t}function Pz(t){return!!t&&typeof t.send=="function"}function qp(t,e){return Rt(t)||typeof t=="number"?ge({type:t},e):t}function or(t,e){if(!Rt(t)&&"$$type"in t&&t.$$type==="scxml")return t;var n=qp(t);return ge({name:n.type,data:n,$$type:"scxml",type:"external"},e)}function zl(t,e){var n=LN(e).map(function(r){return typeof r>"u"||typeof r=="string"||Tu(r)?{target:r,event:t}:ge(ge({},r),{event:t})});return n}function Vz(t){if(!(t===void 0||t===Az))return Pi(t)}function zN(t,e,n,r,s){var o=t.options.guards,u={state:s,cond:e,_event:r};if(e.type===R0)return((o==null?void 0:o[e.name])||e.predicate)(n,r.data,u);var d=o==null?void 0:o[e.type];if(!d)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return d(n,r.data,u)}function FN(t){return typeof t=="string"?{type:t}:t}function fm(t,e,n){var r=function(){},s=typeof t=="object",o=s?t:null;return{next:((s?t.next:t)||r).bind(o),error:((s?t.error:e)||r).bind(o),complete:((s?t.complete:n)||r).bind(o)}}function Pf(t,e){return"".concat(t,":invocation[").concat(e,"]")}function N0(t){return(t.type===eh||t.type===Fp&&t.to===_u.Internal)&&typeof t.delay!="number"}var uu=or({type:_z});function k0(t,e){return e&&e[t]||void 0}function Dd(t,e){var n;if(Rt(t)||typeof t=="number"){var r=k0(t,e);St(r)?n={type:t,exec:r}:r?n=r:n={type:t,exec:void 0}}else if(St(t))n={type:t.name||t.toString(),exec:t};else{var r=k0(t.type,e);if(St(r))n=ge(ge({},t),{exec:r});else if(r){var s=r.type||t.type;n=ge(ge(ge({},r),t),{type:s})}else n=t}return n}var ja=function(t,e){if(!t)return[];var n=Mu(t)?t:[t];return n.map(function(r){return Dd(r,e)})};function kx(t){var e=Dd(t);return ge(ge({id:Rt(t)?t:e.id},e),{type:e.type})}function Lz(t,e){return{type:eh,event:typeof t=="function"?t:qp(t),delay:e?e.delay:void 0,id:e==null?void 0:e.id}}function Uz(t,e,n,r){var s={_event:n},o=or(St(t.event)?t.event(e,n.data,s):t.event),u;if(Rt(t.delay)){var d=r&&r[t.delay];u=St(d)?d(e,n.data,s):d}else u=St(t.delay)?t.delay(e,n.data,s):t.delay;return ge(ge({},t),{type:eh,_event:o,delay:u})}function Bz(t,e){return{to:e?e.to:void 0,type:Fp,event:St(t)?t:qp(t),delay:e?e.delay:void 0,id:e&&e.id!==void 0?e.id:St(t)?t.name:VN(t)}}function zz(t,e,n,r){var s={_event:n},o=or(St(t.event)?t.event(e,n.data,s):t.event),u;if(Rt(t.delay)){var d=r&&r[t.delay];u=St(d)?d(e,n.data,s):d}else u=St(t.delay)?t.delay(e,n.data,s):t.delay;var h=St(t.to)?t.to(e,n.data,s):t.to;return ge(ge({},t),{to:h,_event:o,event:o.data,delay:u})}var Fz=function(t,e,n){return ge(ge({},t),{value:Rt(t.expr)?t.expr:t.expr(e,n.data,{_event:n})})},qz=function(t){return{type:DN,sendId:t}};function Hz(t){var e=kx(t);return{type:Pt.Start,activity:e,exec:void 0}}function Gz(t){var e=St(t)?t:kx(t);return{type:Pt.Stop,activity:e,exec:void 0}}function $z(t,e,n){var r=St(t.activity)?t.activity(e,n.data):t.activity,s=typeof r=="string"?{id:r}:r,o={type:Pt.Stop,activity:s};return o}var Kz=function(t){return{type:Ix,assignment:t}};function Yz(t,e){var n=e?"#".concat(e):"";return"".concat(Pt.After,"(").concat(t,")").concat(n)}function Vf(t,e){var n="".concat(Pt.DoneState,".").concat(t),r={type:n,data:e};return r.toString=function(){return n},r}function mm(t,e){var n="".concat(Pt.DoneInvoke,".").concat(t),r={type:n,data:e};return r.toString=function(){return n},r}function Kc(t,e){var n="".concat(Pt.ErrorPlatform,".").concat(t),r={type:n,data:e};return r.toString=function(){return n},r}var Qz=function(t){var e,n,r=[];try{for(var s=mt(t),o=s.next();!o.done;o=s.next())for(var u=o.value,d=0;d<u.actions.length;){if(u.actions[d].type===Ix){r.push(u.actions[d]),u.actions.splice(d,1);continue}d++}}catch(h){e={error:h}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return r};function Jm(t,e,n,r,s,o,u){u===void 0&&(u=!1);var d=u?[]:Qz(s),h=d.length?yA(n,r,d,e):n,f=u?[n]:void 0,v=[];function b(A,R){var M;switch(R.type){case eh:{var U=Uz(R,h,r,t.options.delays);return o&&typeof U.delay=="number"&&o(U,h,r),U}case Fp:var O=zz(R,h,r,t.options.delays);return o&&O.to!==_u.Internal&&(A==="entry"?v.push(O):o(O,h,r)),O;case jN:{var B=Fz(R,h,r);return o==null||o(B,h,r),B}case wz:{var H=R,G=(M=H.conds.find(function(X){var ie=BN(X.cond,t.options.guards);return!ie||zN(t,ie,h,r,o?void 0:e)}))===null||M===void 0?void 0:M.actions;if(!G)return[];var q=_t(Jm(t,e,h,r,[{type:A,actions:ja(Pi(G),t.options.actions)}],o,u),2),C=q[0],S=q[1];return h=S,f==null||f.push(h),C}case Sz:{var G=R.get(h,r.data);if(!G)return[];var N=_t(Jm(t,e,h,r,[{type:A,actions:ja(Pi(G),t.options.actions)}],o,u),2),P=N[0],V=N[1];return h=V,f==null||f.push(h),P}case Rx:{var B=$z(R,h,r);return o==null||o(B,n,r),B}case Ix:{h=yA(h,r,[R],o?void 0:e),f==null||f.push(h);break}default:var L=Dd(R,t.options.actions),D=L.exec;if(o)o(L,h,r);else if(D&&f){var pe=f.length-1,Ie=ge(ge({},L),{exec:function(X){for(var ie=[],ce=1;ce<arguments.length;ce++)ie[ce-1]=arguments[ce];D.apply(void 0,Wt([f[pe]],_t(ie),!1))}});L=Ie}return L}}function x(A){var R,M,U=[];try{for(var O=mt(A.actions),B=O.next();!B.done;B=O.next()){var H=B.value,G=b(A.type,H);G&&(U=U.concat(G))}}catch(q){R={error:q}}finally{try{B&&!B.done&&(M=O.return)&&M.call(O)}finally{if(R)throw R.error}}return v.forEach(function(q){o(q,h,r)}),v.length=0,U}var _=ln(s.map(x));return[_,h]}var Wl=function(t,e){var n=e(t);return n};function qN(t){var e;return e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}},e[Da]=function(){return this},e}function Wz(t,e,n,r){var s,o=FN(t.src),u=(s=e==null?void 0:e.options.services)===null||s===void 0?void 0:s[o.type],d=t.data?Xm(t.data,n,r):void 0,h=u?HN(u,t.id,d):qN(t.id);return h.meta=t,h}function HN(t,e,n){var r=qN(e);if(r.deferred=!0,Tu(t)){var s=r.state=Wl(void 0,function(){return(n?t.withContext(n):t).initialState});r.getSnapshot=function(){return s}}return r}function Xz(t){try{return typeof t.send=="function"}catch{return!1}}function Jz(t){return Xz(t)&&"id"in t}function Zz(t){var e;return ge((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e[Da]=function(){return this},e),t)}var Zm=function(t){return t.type==="atomic"||t.type==="final"};function GN(t){return Object.keys(t.states).map(function(e){return t.states[e]})}function jd(t){return GN(t).filter(function(e){return e.type!=="history"})}function $N(t){var e=[t];return Zm(t)?e:e.concat(ln(jd(t).map($N)))}function Yc(t,e){var n,r,s,o,u,d,h,f,v=new Set(t),b=O0(v),x=new Set(e);try{for(var _=mt(x),A=_.next();!A.done;A=_.next())for(var R=A.value,M=R.parent;M&&!x.has(M);)x.add(M),M=M.parent}catch(N){n={error:N}}finally{try{A&&!A.done&&(r=_.return)&&r.call(_)}finally{if(n)throw n.error}}var U=O0(x);try{for(var O=mt(x),B=O.next();!B.done;B=O.next()){var R=B.value;if(R.type==="compound"&&(!U.get(R)||!U.get(R).length))b.get(R)?b.get(R).forEach(function(P){return x.add(P)}):R.initialStateNodes.forEach(function(P){return x.add(P)});else if(R.type==="parallel")try{for(var H=(u=void 0,mt(jd(R))),G=H.next();!G.done;G=H.next()){var q=G.value;x.has(q)||(x.add(q),b.get(q)?b.get(q).forEach(function(P){return x.add(P)}):q.initialStateNodes.forEach(function(P){return x.add(P)}))}}catch(P){u={error:P}}finally{try{G&&!G.done&&(d=H.return)&&d.call(H)}finally{if(u)throw u.error}}}}catch(N){s={error:N}}finally{try{B&&!B.done&&(o=O.return)&&o.call(O)}finally{if(s)throw s.error}}try{for(var C=mt(x),S=C.next();!S.done;S=C.next())for(var R=S.value,M=R.parent;M&&!x.has(M);)x.add(M),M=M.parent}catch(N){h={error:N}}finally{try{S&&!S.done&&(f=C.return)&&f.call(C)}finally{if(h)throw h.error}}return x}function KN(t,e){var n=e.get(t);if(!n)return{};if(t.type==="compound"){var r=n[0];if(r){if(Zm(r))return r.key}else return{}}var s={};return n.forEach(function(o){s[o.key]=KN(o,e)}),s}function O0(t){var e,n,r=new Map;try{for(var s=mt(t),o=s.next();!o.done;o=s.next()){var u=o.value;r.has(u)||r.set(u,[]),u.parent&&(r.has(u.parent)||r.set(u.parent,[]),r.get(u.parent).push(u))}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return r}function e7(t,e){var n=Yc([t],e);return KN(t,O0(n))}function Qc(t,e){return Array.isArray(t)?t.some(function(n){return n===e}):t instanceof Set?t.has(e):!1}function t7(t){return Wt([],_t(new Set(ln(Wt([],_t(t.map(function(e){return e.ownEvents})),!1)))),!1)}function pm(t,e){return e.type==="compound"?jd(e).some(function(n){return n.type==="final"&&Qc(t,n)}):e.type==="parallel"?jd(e).every(function(n){return pm(t,n)}):!1}function n7(t){return t===void 0&&(t=[]),t.reduce(function(e,n){return n.meta!==void 0&&(e[n.id]=n.meta),e},{})}function bA(t){return new Set(ln(t.map(function(e){return e.tags})))}function YN(t,e){if(t===e)return!0;if(t===void 0||e===void 0)return!1;if(Rt(t)||Rt(e))return t===e;var n=Object.keys(t),r=Object.keys(e);return n.length===r.length&&n.every(function(s){return YN(t[s],e[s])})}function r7(t){return typeof t!="object"||t===null?!1:"value"in t&&"_event"in t}function i7(t,e){var n=t.exec,r=ge(ge({},t),{exec:n!==void 0?function(){return n(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0});return r}var Ai=(function(){function t(e){var n=this,r;this.actions=[],this.activities=pA,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||pA,this.meta=n7(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=(r=Array.isArray(e.tags)?new Set(e.tags):e.tags)!==null&&r!==void 0?r:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return t7(n.configuration)}})}return t.from=function(e,n){if(e instanceof t)return e.context!==n?new t({value:e.value,context:n,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,events:[],configuration:[],transitions:[],children:{}}):e;var r=uu;return new t({value:e,context:n,_event:r,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,n){if(e instanceof t){if(!e.actions.length)return e;var r=uu;return new t({value:e.value,context:n,_event:r,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,n)},t.prototype.toStrings=function(e,n){var r=this;if(e===void 0&&(e=this.value),n===void 0&&(n="."),Rt(e))return[e];var s=Object.keys(e);return s.concat.apply(s,Wt([],_t(s.map(function(o){return r.toStrings(e[o],n).map(function(u){return o+n+u})})),!1))},t.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var n=e.tags;e.machine;var r=Cx(e,["configuration","transitions","tags","machine"]);return ge(ge({},r),{tags:Array.from(n)})},t.prototype.matches=function(e){return Nx(e,this.value)},t.prototype.hasTag=function(e){return this.tags.has(e)},t.prototype.can=function(e){var n;jz(!!this.machine);var r=(n=this.machine)===null||n===void 0?void 0:n.getTransitionData(this,e);return!!(r!=null&&r.transitions.length)&&r.transitions.some(function(s){return s.target!==void 0||s.actions.length})},t})(),s7={deferEvents:!1},xA=(function(){function t(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=ge(ge({},s7),e)}return t.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents){this.schedule(e);return}this.process(e)}this.flushEvents()},t.prototype.schedule=function(e){if(!this.initialized||this.processingEvent){this.queue.push(e);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},t.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(n){throw this.clear(),n}finally{this.processingEvent=!1}},t})(),Ty=new Map,a7=0,Oc={bookId:function(){return"x:".concat(a7++)},register:function(t,e){return Ty.set(t,e),t},get:function(t){return Ty.get(t)},free:function(t){Ty.delete(t)}};function Ox(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function o7(){var t=Ox();if(t&&"__xstate__"in t)return t.__xstate__}function l7(t){if(Ox()){var e=o7();e&&e.register(t)}}function u7(t,e){e===void 0&&(e={});var n=t.initialState,r=new Set,s=[],o=!1,u=function(){if(!o){for(o=!0;s.length>0;){var f=s.shift();n=t.transition(n,f,h),r.forEach(function(v){return v.next(n)})}o=!1}},d=Zz({id:e.id,send:function(f){s.push(f),u()},getSnapshot:function(){return n},subscribe:function(f,v,b){var x=fm(f,v,b);return r.add(x),x.next(n),{unsubscribe:function(){r.delete(x)}}}}),h={parent:e.parent,self:d,id:e.id||"anonymous",observers:r};return n=t.start?t.start(h):n,d}var c7={sync:!1,autoForward:!1},Wn;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(Wn||(Wn={}));var d7=(function(){function t(e,n){n===void 0&&(n=t.defaultOptions);var r=this;this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=Wn.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(v,b){if(Mu(v))return r.batch(v),r.state;var x=or(qp(v,b));if(r.status===Wn.Stopped)return r.state;if(r.status!==Wn.Running&&!r.options.deferEvents)throw new Error('Event "'.concat(x.name,'" was sent to uninitialized service "').concat(r.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(x.data)));return r.scheduler.schedule(function(){r.forward(x);var _=r._nextState(x);r.update(_,x)}),r._state},this.sendTo=function(v,b,x){var _=r.parent&&(b===_u.Parent||r.parent.id===b),A=_?r.parent:Rt(b)?b===_u.Internal?r:r.children.get(b)||Oc.get(b):Pz(b)?b:void 0;if(!A){if(!_)throw new Error("Unable to send event to child '".concat(b,"' from service '").concat(r.id,"'."));return}if("machine"in A){if(r.status!==Wn.Stopped||r.parent!==A||r.state.done){var R=ge(ge({},v),{name:v.name===Tz?"".concat(Kc(r.id)):v.name,origin:r.sessionId});!x&&r.machine.config.predictableActionArguments?r._outgoingQueue.push([A,R]):A.send(R)}}else!x&&r.machine.config.predictableActionArguments?r._outgoingQueue.push([A,v.data]):A.send(v.data)},this._exec=function(v,b,x,_){_===void 0&&(_=r.machine.options.actions);var A=v.exec||k0(v.type,_),R=St(A)?A:A?A.exec:v.exec;if(R)try{return R(b,x.data,r.machine.config.predictableActionArguments?{action:v,_event:x}:{action:v,state:r.state,_event:x})}catch(pe){throw r.parent&&r.parent.send({type:"xstate.error",data:pe}),pe}switch(v.type){case eh:{var M=v;r.defer(M);break}case Fp:var U=v;if(typeof U.delay=="number"){r.defer(U);return}else U.to?r.sendTo(U._event,U.to,x===uu):r.send(U._event);break;case DN:r.cancel(v.sendId);break;case A0:{if(r.status!==Wn.Running)return;var O=v.activity;if(!r.machine.config.predictableActionArguments&&!r.state.activities[O.id||O.type])break;if(O.type===Pt.Invoke){var B=FN(O.src),H=r.machine.options.services?r.machine.options.services[B.type]:void 0,G=O.id,q=O.data,C="autoForward"in O?O.autoForward:!!O.forward;if(!H)return;var S=q?Xm(q,b,x):void 0;if(typeof H=="string")return;var N=St(H)?H(b,x.data,{data:S,src:B,meta:O.meta}):H;if(!N)return;var P=void 0;Tu(N)&&(N=S?N.withContext(S):N,P={autoForward:C}),r.spawn(N,G,P)}else r.spawnActivity(O);break}case Rx:{r.stopChild(v.activity.id);break}case jN:var V=v,L=V.label,D=V.value;L?r.logger(L,D):r.logger(D);break}};var s=ge(ge({},t.defaultOptions),n),o=s.clock,u=s.logger,d=s.parent,h=s.id,f=h!==void 0?h:e.id;this.id=f,this.logger=u,this.clock=o,this.parent=d,this.options=s,this.scheduler=new xA({deferEvents:this.options.deferEvents}),this.sessionId=Oc.bookId()}return Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:Wl(this,function(){return e._initialState=e.machine.initialState,e._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(e,n){var r,s;try{for(var o=mt(e.actions),u=o.next();!u.done;u=o.next()){var d=u.value;this.exec(d,e,n)}}catch(h){r={error:h}}finally{try{u&&!u.done&&(s=o.return)&&s.call(o)}finally{if(r)throw r.error}}},t.prototype.update=function(e,n){var r,s,o,u,d,h,f,v,b=this;if(e._sessionid=this.sessionId,this._state=e,(!this.machine.config.predictableActionArguments||n===uu)&&this.options.execute)this.execute(this.state);else for(var x=void 0;x=this._outgoingQueue.shift();)x[0].send(x[1]);if(this.children.forEach(function(N){b.state.children[N.id]=N}),this.devTools&&this.devTools.send(n.data,e),e.event)try{for(var _=mt(this.eventListeners),A=_.next();!A.done;A=_.next()){var R=A.value;R(e.event)}}catch(N){r={error:N}}finally{try{A&&!A.done&&(s=_.return)&&s.call(_)}finally{if(r)throw r.error}}try{for(var M=mt(this.listeners),U=M.next();!U.done;U=M.next()){var R=U.value;R(e,e.event)}}catch(N){o={error:N}}finally{try{U&&!U.done&&(u=M.return)&&u.call(M)}finally{if(o)throw o.error}}try{for(var O=mt(this.contextListeners),B=O.next();!B.done;B=O.next()){var H=B.value;H(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(N){d={error:N}}finally{try{B&&!B.done&&(h=O.return)&&h.call(O)}finally{if(d)throw d.error}}if(this.state.done){var G=e.configuration.find(function(N){return N.type==="final"&&N.parent===b.machine}),q=G&&G.doneData?Xm(G.doneData,e.context,n):void 0;this._doneEvent=mm(this.id,q);try{for(var C=mt(this.doneListeners),S=C.next();!S.done;S=C.next()){var R=S.value;R(this._doneEvent)}}catch(N){f={error:N}}finally{try{S&&!S.done&&(v=C.return)&&v.call(C)}finally{if(f)throw f.error}}this._stop(),this._stopChildren(),Oc.free(this.sessionId)}},t.prototype.onTransition=function(e){return this.listeners.add(e),this.status===Wn.Running&&e(this.state,this.state.event),this},t.prototype.subscribe=function(e,n,r){var s=this,o=fm(e,n,r);this.listeners.add(o.next),this.status!==Wn.NotStarted&&o.next(this.state);var u=function(){s.doneListeners.delete(u),s.stopListeners.delete(u),o.complete()};return this.status===Wn.Stopped?o.complete():(this.onDone(u),this.onStop(u)),{unsubscribe:function(){s.listeners.delete(o.next),s.doneListeners.delete(u),s.stopListeners.delete(u)}}},t.prototype.onEvent=function(e){return this.eventListeners.add(e),this},t.prototype.onSend=function(e){return this.sendListeners.add(e),this},t.prototype.onChange=function(e){return this.contextListeners.add(e),this},t.prototype.onStop=function(e){return this.stopListeners.add(e),this},t.prototype.onDone=function(e){return this.status===Wn.Stopped&&this._doneEvent?e(this._doneEvent):this.doneListeners.add(e),this},t.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},t.prototype.start=function(e){var n=this;if(this.status===Wn.Running)return this;this.machine._init(),Oc.register(this.sessionId,this),this.initialized=!0,this.status=Wn.Running;var r=e===void 0?this.initialState:Wl(this,function(){return r7(e)?n.machine.resolveState(e):n.machine.resolveState(Ai.from(e,n.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){n.update(r,uu)}),this},t.prototype._stopChildren=function(){this.children.forEach(function(e){St(e.stop)&&e.stop()}),this.children.clear()},t.prototype._stop=function(){var e,n,r,s,o,u,d,h,f,v;try{for(var b=mt(this.listeners),x=b.next();!x.done;x=b.next()){var _=x.value;this.listeners.delete(_)}}catch(C){e={error:C}}finally{try{x&&!x.done&&(n=b.return)&&n.call(b)}finally{if(e)throw e.error}}try{for(var A=mt(this.stopListeners),R=A.next();!R.done;R=A.next()){var _=R.value;_(),this.stopListeners.delete(_)}}catch(C){r={error:C}}finally{try{R&&!R.done&&(s=A.return)&&s.call(A)}finally{if(r)throw r.error}}try{for(var M=mt(this.contextListeners),U=M.next();!U.done;U=M.next()){var _=U.value;this.contextListeners.delete(_)}}catch(C){o={error:C}}finally{try{U&&!U.done&&(u=M.return)&&u.call(M)}finally{if(o)throw o.error}}try{for(var O=mt(this.doneListeners),B=O.next();!B.done;B=O.next()){var _=B.value;this.doneListeners.delete(_)}}catch(C){d={error:C}}finally{try{B&&!B.done&&(h=O.return)&&h.call(O)}finally{if(d)throw d.error}}if(!this.initialized)return this;this.initialized=!1,this.status=Wn.Stopped,this._initialState=void 0;try{for(var H=mt(Object.keys(this.delayedEventsMap)),G=H.next();!G.done;G=H.next()){var q=G.value;this.clock.clearTimeout(this.delayedEventsMap[q])}}catch(C){f={error:C}}finally{try{G&&!G.done&&(v=H.return)&&v.call(H)}finally{if(f)throw f.error}}this.scheduler.clear(),this.scheduler=new xA({deferEvents:this.options.deferEvents})},t.prototype.stop=function(){var e=this,n=this.scheduler;return this._stop(),n.schedule(function(){var r;if(!(!((r=e._state)===null||r===void 0)&&r.done)){var s=or({type:"xstate.stop"}),o=Wl(e,function(){var u=ln(Wt([],_t(e.state.configuration),!1).sort(function(b,x){return x.order-b.order}).map(function(b){return ja(b.onExit,e.machine.options.actions)})),d=_t(Jm(e.machine,e.state,e.state.context,s,[{type:"exit",actions:u}],e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),h=d[0],f=d[1],v=new Ai({value:e.state.value,context:f,_event:s,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:h.filter(function(b){return!N0(b)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return v.changed=!0,v});e.update(o,s),e._stopChildren(),Oc.free(e.sessionId)}}),this},t.prototype.batch=function(e){var n=this;if(!(this.status===Wn.NotStarted&&this.options.deferEvents)){if(this.status!==Wn.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'))}if(e.length){var r=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var s,o,u=n.state,d=!1,h=[],f=function(_){var A=or(_);n.forward(A),u=Wl(n,function(){return n.machine.transition(u,A,void 0,r||void 0)}),h.push.apply(h,Wt([],_t(n.machine.config.predictableActionArguments?u.actions:u.actions.map(function(R){return i7(R,u)})),!1)),d=d||!!u.changed};try{for(var v=mt(e),b=v.next();!b.done;b=v.next()){var x=b.value;f(x)}}catch(_){s={error:_}}finally{try{b&&!b.done&&(o=v.return)&&o.call(v)}finally{if(s)throw s.error}}u.changed=d,u.actions=h,n.update(u,or(e[e.length-1]))})}},t.prototype.sender=function(e){return this.send.bind(this,e)},t.prototype._nextState=function(e,n){var r=this;n===void 0&&(n=!!this.machine.config.predictableActionArguments&&this._exec);var s=or(e);if(s.name.indexOf(mA)===0&&!this.state.nextEvents.some(function(u){return u.indexOf(mA)===0}))throw s.data.data;var o=Wl(this,function(){return r.machine.transition(r.state,s,void 0,n||void 0)});return o},t.prototype.nextState=function(e){return this._nextState(e,!1)},t.prototype.forward=function(e){var n,r;try{for(var s=mt(this.forwardTo),o=s.next();!o.done;o=s.next()){var u=o.value,d=this.children.get(u);if(!d)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(u,"'."));d.send(e)}}catch(h){n={error:h}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},t.prototype.defer=function(e){var n=this,r=this.clock.setTimeout(function(){"to"in e&&e.to?n.sendTo(e._event,e.to,!0):n.send(e._event)},e.delay);e.id&&(this.delayedEventsMap[e.id]=r)},t.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},t.prototype.exec=function(e,n,r){r===void 0&&(r=this.machine.options.actions),this._exec(e,n.context,n._event,r)},t.prototype.removeChild=function(e){var n;this.children.delete(e),this.forwardTo.delete(e),(n=this.state)===null||n===void 0||delete n.children[e]},t.prototype.stopChild=function(e){var n=this.children.get(e);n&&(this.removeChild(e),St(n.stop)&&n.stop())},t.prototype.spawn=function(e,n,r){if(this.status!==Wn.Running)return HN(e,n);if(vA(e))return this.spawnPromise(Promise.resolve(e),n);if(St(e))return this.spawnCallback(e,n);if(Jz(e))return this.spawnActor(e,n);if(Mz(e))return this.spawnObservable(e,n);if(Tu(e))return this.spawnMachine(e,ge(ge({},r),{id:n}));if(kz(e))return this.spawnBehavior(e,n);throw new Error('Unable to spawn entity "'.concat(n,'" of type "').concat(typeof e,'".'))},t.prototype.spawnMachine=function(e,n){var r=this;n===void 0&&(n={});var s=new t(e,ge(ge({},this.options),{parent:this,id:n.id||e.id})),o=ge(ge({},c7),n);o.sync&&s.onTransition(function(d){r.send(MN,{state:d,id:s.id})});var u=s;return this.children.set(s.id,u),o.autoForward&&this.forwardTo.add(s.id),s.onDone(function(d){r.removeChild(s.id),r.send(or(d,{origin:s.id}))}).start(),u},t.prototype.spawnBehavior=function(e,n){var r=u7(e,{id:n,parent:this});return this.children.set(n,r),r},t.prototype.spawnPromise=function(e,n){var r,s=this,o=!1,u;e.then(function(h){o||(u=h,s.removeChild(n),s.send(or(mm(n,h),{origin:n})))},function(h){if(!o){s.removeChild(n);var f=Kc(n,h);try{s.send(or(f,{origin:n}))}catch{s.devTools&&s.devTools.send(f,s.state),s.machine.strict&&s.stop()}}});var d=(r={id:n,send:function(){},subscribe:function(h,f,v){var b=fm(h,f,v),x=!1;return e.then(function(_){x||(b.next(_),!x&&b.complete())},function(_){x||b.error(_)}),{unsubscribe:function(){return x=!0}}},stop:function(){o=!0},toJSON:function(){return{id:n}},getSnapshot:function(){return u}},r[Da]=function(){return this},r);return this.children.set(n,d),d},t.prototype.spawnCallback=function(e,n){var r,s=this,o=!1,u=new Set,d=new Set,h,f=function(x){h=x,d.forEach(function(_){return _(x)}),!o&&s.send(or(x,{origin:n}))},v;try{v=e(f,function(x){u.add(x)})}catch(x){this.send(Kc(n,x))}if(vA(v))return this.spawnPromise(v,n);var b=(r={id:n,send:function(x){return u.forEach(function(_){return _(x)})},subscribe:function(x){var _=fm(x);return d.add(_.next),{unsubscribe:function(){d.delete(_.next)}}},stop:function(){o=!0,St(v)&&v()},toJSON:function(){return{id:n}},getSnapshot:function(){return h}},r[Da]=function(){return this},r);return this.children.set(n,b),b},t.prototype.spawnObservable=function(e,n){var r,s=this,o,u=e.subscribe(function(h){o=h,s.send(or(h,{origin:n}))},function(h){s.removeChild(n),s.send(or(Kc(n,h),{origin:n}))},function(){s.removeChild(n),s.send(or(mm(n),{origin:n}))}),d=(r={id:n,send:function(){},subscribe:function(h,f,v){return e.subscribe(h,f,v)},stop:function(){return u.unsubscribe()},getSnapshot:function(){return o},toJSON:function(){return{id:n}}},r[Da]=function(){return this},r);return this.children.set(n,d),d},t.prototype.spawnActor=function(e,n){return this.children.set(n,e),e},t.prototype.spawnActivity=function(e){var n=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(n){var r=n(this.state.context,e);this.spawnEffect(e.id,r)}},t.prototype.spawnEffect=function(e,n){var r;this.children.set(e,(r={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:n||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}},r[Da]=function(){return this},r))},t.prototype.attachDev=function(){var e=Ox();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var n=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(ge(ge({name:this.id,autoPause:!0,stateSanitizer:function(r){return{value:r.value,context:r.context,actions:r.actions}}},n),{features:ge({jump:!1,skip:!1},n?n.features:void 0)}),this.machine),this.devTools.init(this.state)}l7(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[Da]=function(){return this},t.prototype.getSnapshot=function(){return this.status===Wn.NotStarted?this.initialState:this._state},t.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,n){return setTimeout(e,n)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},t.interpret=QN,t})();function QN(t,e){var n=new d7(t,e);return n}function h7(t){if(typeof t=="string"){var e={type:t};return e.toString=function(){return t},e}return t}function Lf(t){return ge(ge({type:C0},t),{toJSON:function(){t.onDone,t.onError;var e=Cx(t,["onDone","onError"]);return ge(ge({},e),{type:C0,src:h7(t.src)})}})}var Uf="",D0="#",wy="*",Fl={},ql=function(t){return t[0]===D0},f7=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},m7=(function(){function t(e,n,r,s){r===void 0&&(r="context"in e?e.context:void 0);var o=this,u;this.config=e,this._context=r,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(f7(),n),this.parent=s==null?void 0:s.parent,this.key=this.config.key||(s==null?void 0:s.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:PN),this.id=this.config.id||Wt([this.machine.key],_t(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(u=this.config.schema)!==null&&u!==void 0?u:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?$c(this.config.states,function(f,v){var b,x=new t(f,{},void 0,{parent:o,key:v});return Object.assign(o.idMap,ge((b={},b[x.id]=x,b),x.idMap)),x}):Fl;var d=0;function h(f){var v,b;f.order=d++;try{for(var x=mt(GN(f)),_=x.next();!_.done;_=x.next()){var A=_.value;h(A)}}catch(R){v={error:R}}finally{try{_&&!_.done&&(b=x.return)&&b.call(x)}finally{if(v)throw v.error}}}h(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(f){var v=f.event;return v===Uf}):Uf in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=Pi(this.config.entry||this.config.onEntry).map(function(f){return Dd(f)}),this.onExit=Pi(this.config.exit||this.config.onExit).map(function(f){return Dd(f)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=Pi(this.config.invoke).map(function(f,v){var b,x;if(Tu(f)){var _=Pf(o.id,v);return o.machine.options.services=ge((b={},b[_]=f,b),o.machine.options.services),Lf({src:_,id:_})}else if(Rt(f.src)){var _=f.id||Pf(o.id,v);return Lf(ge(ge({},f),{id:_,src:f.src}))}else if(Tu(f.src)||St(f.src)){var _=f.id||Pf(o.id,v);return o.machine.options.services=ge((x={},x[_]=f.src,x),o.machine.options.services),Lf(ge(ge({id:_},f),{src:_}))}else{var A=f.src;return Lf(ge(ge({id:Pf(o.id,v)},f),{src:A}))}}),this.activities=Pi(this.config.activities).concat(this.invoke).map(function(f){return kx(f)}),this.transition=this.transition.bind(this),this.tags=Pi(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||$N(this).forEach(function(e){return e.on})},t.prototype.withConfig=function(e,n){var r=this.options,s=r.actions,o=r.activities,u=r.guards,d=r.services,h=r.delays;return new t(this.config,{actions:ge(ge({},s),e.actions),activities:ge(ge({},o),e.activities),guards:ge(ge({},u),e.guards),services:ge(ge({},d),e.services),delays:ge(ge({},h),e.delays)},n??this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return St(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:$c(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce(function(n,r){return n[r.eventType]=n[r.eventType]||[],n[r.eventType].push(r),n},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var n=e===Uf,r=this.transitions.filter(function(s){var o=s.eventType===e;return n?o:o||s.eventType===wy});return this.__cache.candidates[e]=r,r},t.prototype.getDelayedTransitions=function(){var e=this,n=this.config.after;if(!n)return[];var r=function(o,u){var d=St(o)?"".concat(e.id,":delay[").concat(u,"]"):o,h=Yz(d,e.id);return e.onEntry.push(Bz(h,{delay:o})),e.onExit.push(qz(h)),h},s=Mu(n)?n.map(function(o,u){var d=r(o.delay,u);return ge(ge({},o),{event:d})}):ln(Object.keys(n).map(function(o,u){var d=n[o],h=Rt(d)?{target:d}:d,f=isNaN(+o)?o:+o,v=r(f,u);return Pi(h).map(function(b){return ge(ge({},b),{event:v,delay:f})})}));return s.map(function(o){var u=o.delay;return ge(ge({},e.formatTransition(o)),{delay:u})})},t.prototype.getStateNodes=function(e){var n,r=this;if(!e)return[];var s=e instanceof Ai?e.value:ld(e,this.delimiter);if(Rt(s)){var o=this.getStateNode(s).initial;return o!==void 0?this.getStateNodes((n={},n[s]=o,n)):[this,this.states[s]]}var u=Object.keys(s),d=[this];return d.push.apply(d,Wt([],_t(ln(u.map(function(h){return r.getStateNode(h).getStateNodes(s[h])}))),!1)),d},t.prototype.handles=function(e){var n=VN(e);return this.events.includes(n)},t.prototype.resolveState=function(e){var n=e instanceof Ai?e:Ai.create(e),r=Array.from(Yc([],this.getStateNodes(n.value)));return new Ai(ge(ge({},n),{value:this.resolve(n.value),configuration:r,done:pm(r,this),tags:bA(r),machine:this.machine}))},t.prototype.transitionLeafNode=function(e,n,r){var s=this.getStateNode(e),o=s.next(n,r);return!o||!o.transitions.length?this.next(n,r):o},t.prototype.transitionCompoundNode=function(e,n,r){var s=Object.keys(e),o=this.getStateNode(s[0]),u=o._transition(e[s[0]],n,r);return!u||!u.transitions.length?this.next(n,r):u},t.prototype.transitionParallelNode=function(e,n,r){var s,o,u={};try{for(var d=mt(Object.keys(e)),h=d.next();!h.done;h=d.next()){var f=h.value,v=e[f];if(v){var b=this.getStateNode(f),x=b._transition(v,n,r);x&&(u[f]=x)}}}catch(U){s={error:U}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(s)throw s.error}}var _=Object.keys(u).map(function(U){return u[U]}),A=ln(_.map(function(U){return U.transitions})),R=_.some(function(U){return U.transitions.length>0});if(!R)return this.next(n,r);var M=ln(Object.keys(u).map(function(U){return u[U].configuration}));return{transitions:A,exitSet:ln(_.map(function(U){return U.exitSet})),configuration:M,source:n,actions:ln(Object.keys(u).map(function(U){return u[U].actions}))}},t.prototype._transition=function(e,n,r){return Rt(e)?this.transitionLeafNode(e,n,r):Object.keys(e).length===1?this.transitionCompoundNode(e,n,r):this.transitionParallelNode(e,n,r)},t.prototype.getTransitionData=function(e,n){return this._transition(e.value,e,or(n))},t.prototype.next=function(e,n){var r,s,o=this,u=n.name,d=[],h=[],f;try{for(var v=mt(this.getCandidates(u)),b=v.next();!b.done;b=v.next()){var x=b.value,_=x.cond,A=x.in,R=e.context,M=A?Rt(A)&&ql(A)?e.matches(ld(this.getStateNodeById(A).path,this.delimiter)):Nx(ld(A,this.delimiter),Rz(this.path.slice(0,-2))(e.value)):!0,U=!1;try{U=!_||zN(this.machine,_,R,n,e)}catch(H){throw new Error("Unable to evaluate guard '".concat(_.name||_.type,"' in transition for event '").concat(u,"' in state node '").concat(this.id,`':
`).concat(H.message))}if(U&&M){x.target!==void 0&&(h=x.target),d.push.apply(d,Wt([],_t(x.actions),!1)),f=x;break}}}catch(H){r={error:H}}finally{try{b&&!b.done&&(s=v.return)&&s.call(v)}finally{if(r)throw r.error}}if(f){if(!h.length)return{transitions:[f],exitSet:[],configuration:e.value?[this]:[],source:e,actions:d};var O=ln(h.map(function(H){return o.getRelativeStateNodes(H,e.historyValue)})),B=!!f.internal;return{transitions:[f],exitSet:B?[]:ln(h.map(function(H){return o.getPotentiallyReenteringNodes(H)})),configuration:O,source:e,actions:d}}},t.prototype.getPotentiallyReenteringNodes=function(e){if(this.order<e.order)return[this];for(var n=[],r=this,s=e;r&&r!==s;)n.push(r),r=r.parent;return r!==s?[]:(n.push(s),n)},t.prototype.getActions=function(e,n,r,s,o,u,d){var h,f,v,b,x=this,_=u?Yc([],this.getStateNodes(u.value)):[],A=new Set;try{for(var R=mt(Array.from(e).sort(function(V,L){return V.order-L.order})),M=R.next();!M.done;M=R.next()){var U=M.value;(!Qc(_,U)||Qc(r.exitSet,U)||U.parent&&A.has(U.parent))&&A.add(U)}}catch(V){h={error:V}}finally{try{M&&!M.done&&(f=R.return)&&f.call(R)}finally{if(h)throw h.error}}try{for(var O=mt(_),B=O.next();!B.done;B=O.next()){var U=B.value;(!Qc(e,U)||Qc(r.exitSet,U.parent))&&r.exitSet.push(U)}}catch(V){v={error:V}}finally{try{B&&!B.done&&(b=O.return)&&b.call(O)}finally{if(v)throw v.error}}r.exitSet.sort(function(V,L){return L.order-V.order});var H=Array.from(A).sort(function(V,L){return V.order-L.order}),G=new Set(r.exitSet),q=ln(H.map(function(V){var L=[];if(V.type!=="final")return L;var D=V.parent;if(!D.parent)return L;L.push(Vf(V.id,V.doneData),Vf(D.id,V.doneData?Xm(V.doneData,s,o):void 0));var pe=D.parent;return pe.type==="parallel"&&jd(pe).every(function(Ie){return pm(r.configuration,Ie)})&&L.push(Vf(pe.id)),L})),C=H.map(function(V){var L=V.onEntry,D=V.activities.map(function(pe){return Hz(pe)});return{type:"entry",actions:ja(d?Wt(Wt([],_t(L),!1),_t(D),!1):Wt(Wt([],_t(D),!1),_t(L),!1),x.machine.options.actions)}}).concat({type:"state_done",actions:q.map(function(V){return Lz(V)})}),S=Array.from(G).map(function(V){return{type:"exit",actions:ja(Wt(Wt([],_t(V.onExit),!1),_t(V.activities.map(function(L){return Gz(L)})),!1),x.machine.options.actions)}}),N=S.concat({type:"transition",actions:ja(r.actions,this.machine.options.actions)}).concat(C);if(n){var P=ja(ln(Wt([],_t(e),!1).sort(function(V,L){return L.order-V.order}).map(function(V){return V.onExit})),this.machine.options.actions).filter(function(V){return!N0(V)});return N.concat({type:"stop",actions:P})}return N},t.prototype.transition=function(e,n,r,s){e===void 0&&(e=this.initialState);var o=or(n),u;if(e instanceof Ai)u=r===void 0?e:this.resolveState(Ai.from(e,r));else{var d=Rt(e)?this.resolve(Wm(this.getResolvedPath(e))):this.resolve(e),h=r??this.machine.context;u=this.resolveState(Ai.from(d,h))}if(this.strict&&!this.events.includes(o.name)&&!Nz(o.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(o.name,"'"));var f=this._transition(u.value,u,o)||{transitions:[],configuration:[],exitSet:[],source:u,actions:[]},v=Yc([],this.getStateNodes(u.value)),b=f.configuration.length?Yc(v,f.configuration):v;return f.configuration=Wt([],_t(b),!1),this.resolveTransition(f,u,u.context,s,o)},t.prototype.resolveRaisedTransition=function(e,n,r,s){var o,u=e.actions;return e=this.transition(e,n,void 0,s),e._event=r,e.event=r.data,(o=e.actions).unshift.apply(o,Wt([],_t(u),!1)),e},t.prototype.resolveTransition=function(e,n,r,s,o){var u,d,h,f,v=this;o===void 0&&(o=uu);var b=e.configuration,x=!n||e.transitions.length>0,_=x?e.configuration:n?n.configuration:[],A=pm(_,this),R=x?e7(this.machine,b):void 0,M=n?n.historyValue?n.historyValue:e.source?this.machine.historyValue(n.value):void 0:void 0,U=this.getActions(new Set(_),A,e,r,o,n,s),O=n?ge({},n.activities):{};try{for(var B=mt(U),H=B.next();!H.done;H=B.next()){var G=H.value;try{for(var q=(h=void 0,mt(G.actions)),C=q.next();!C.done;C=q.next()){var S=C.value;S.type===A0?O[S.activity.id||S.activity.type]=S:S.type===Rx&&(O[S.activity.id||S.activity.type]=!1)}}catch(fe){h={error:fe}}finally{try{C&&!C.done&&(f=q.return)&&f.call(q)}finally{if(h)throw h.error}}}}catch(fe){u={error:fe}}finally{try{H&&!H.done&&(d=B.return)&&d.call(B)}finally{if(u)throw u.error}}var N=_t(Jm(this,n,r,o,U,s,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),P=N[0],V=N[1],L=_t(Oz(P,N0),2),D=L[0],pe=L[1],Ie=P.filter(function(fe){var we;return fe.type===A0&&((we=fe.activity)===null||we===void 0?void 0:we.type)===C0}),X=Ie.reduce(function(fe,we){return fe[we.activity.id]=Wz(we.activity,v.machine,V,o),fe},n?ge({},n.children):{}),ie=new Ai({value:R||n.value,context:V,_event:o,_sessionid:n?n._sessionid:null,historyValue:R?M?Dz(M,R):void 0:n?n.historyValue:void 0,history:!R||e.source?n:void 0,actions:R?pe:[],activities:R?O:n?n.activities:{},events:[],configuration:_,transitions:e.transitions,children:X,done:A,tags:bA(_),machine:this}),ce=r!==V;ie.changed=o.name===MN||ce;var Ae=ie.history;Ae&&delete Ae.history;var _e=!A&&(this._transient||b.some(function(fe){return fe._transient}));if(!x&&(!_e||o.name===Uf))return ie;var z=ie;if(!A)for(_e&&(z=this.resolveRaisedTransition(z,{type:Ez},o,s));D.length;){var J=D.shift();z=this.resolveRaisedTransition(z,J._event,o,s)}var de=z.changed||(Ae?!!z.actions.length||ce||typeof Ae.value!=typeof z.value||!YN(z.value,Ae.value):void 0);return z.changed=de,z.history=Ae,z},t.prototype.getStateNode=function(e){if(ql(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var n=this.states[e];if(!n)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return n},t.prototype.getStateNodeById=function(e){var n=ql(e)?e.slice(D0.length):e;if(n===this.id)return this;var r=this.machine.idMap[n];if(!r)throw new Error("Child state node '#".concat(n,"' does not exist on machine '").concat(this.id,"'"));return r},t.prototype.getStateNodeByPath=function(e){if(typeof e=="string"&&ql(e))try{return this.getStateNodeById(e.slice(1))}catch{}for(var n=I0(e,this.delimiter).slice(),r=this;n.length;){var s=n.shift();if(!s.length)break;r=r.getStateNode(s)}return r},t.prototype.resolve=function(e){var n,r=this;if(!e)return this.initialStateValue||Fl;switch(this.type){case"parallel":return $c(this.initialStateValue,function(o,u){return o?r.getStateNode(u).resolve(e[u]||o):Fl});case"compound":if(Rt(e)){var s=this.getStateNode(e);return s.type==="parallel"||s.type==="compound"?(n={},n[e]=s.initialStateValue,n):e}return Object.keys(e).length?$c(e,function(o,u){return o?r.getStateNode(u).resolve(o):Fl}):this.initialStateValue||{};default:return e||Fl}},t.prototype.getResolvedPath=function(e){if(ql(e)){var n=this.machine.idMap[e.slice(D0.length)];if(!n)throw new Error("Unable to find state node '".concat(e,"'"));return n.path}return I0(e,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var n;if(this.type==="parallel")n=gA(this.states,function(r){return r.initialStateValue||Fl},function(r){return r.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));n=Zm(this.states[this.initial])?this.initial:(e={},e[this.initial]=this.states[this.initial].initialStateValue,e)}else n={};return this.__cache.initialStateValue=n,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(e,n){this._init();var r=this.getStateNodes(e);return this.resolveTransition({configuration:r,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,n??this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var e;if(this.type==="history"){var n=this.config;Rt(n.target)?e=ql(n.target)?Wm(this.machine.getStateNodeById(n.target).path.slice(this.path.length-1)):n.target:e=n.target}return e},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(e,n,r){return r===void 0&&(r=!0),r?e.type==="history"?e.resolveHistory(n):e.initialStateNodes:[e]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var e=this;if(Zm(this))return[this];if(this.type==="compound"&&!this.initial)return[this];var n=hm(this.initialStateValue);return ln(n.map(function(r){return e.getFromRelativePath(r)}))},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var n=_t(e),r=n[0],s=n.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(r,"' from node with no states"));var o=this.getStateNode(r);if(o.type==="history")return o.resolveHistory();if(!this.states[r])throw new Error("Child state '".concat(r,"' does not exist on '").concat(this.id,"'"));return this.states[r].getFromRelativePath(s)},t.prototype.historyValue=function(e){if(Object.keys(this.states).length)return{current:e||this.initialStateValue,states:gA(this.states,function(n,r){if(!e)return n.historyValue();var s=Rt(e)?void 0:e[r];return n.historyValue(s||n.initialStateValue)},function(n){return!n.history})}},t.prototype.resolveHistory=function(e){var n=this;if(this.type!=="history")return[this];var r=this.parent;if(!e){var s=this.target;return s?ln(hm(s).map(function(u){return r.getFromRelativePath(u)})):r.initialStateNodes}var o=Iz(r.path,"states")(e).current;return Rt(o)?[r.getStateNode(o)]:ln(hm(o).map(function(u){return n.history==="deep"?r.getFromRelativePath(u):[r.states[u[0]]]}))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var e=this,n=ln(Object.keys(this.states).map(function(r){return e.states[r].stateIds}));return[this.id].concat(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var e,n,r,s;if(this.__cache.events)return this.__cache.events;var o=this.states,u=new Set(this.ownEvents);if(o)try{for(var d=mt(Object.keys(o)),h=d.next();!h.done;h=d.next()){var f=h.value,v=o[f];if(v.states)try{for(var b=(r=void 0,mt(v.events)),x=b.next();!x.done;x=b.next()){var _=x.value;u.add("".concat(_))}}catch(A){r={error:A}}finally{try{x&&!x.done&&(s=b.return)&&s.call(b)}finally{if(r)throw r.error}}}}catch(A){e={error:A}}finally{try{h&&!h.done&&(n=d.return)&&n.call(d)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(u)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter(function(n){return!(!n.target&&!n.actions.length&&n.internal)}).map(function(n){return n.eventType}));return Array.from(e)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(e){var n=this;if(e!==void 0)return e.map(function(r){if(!Rt(r))return r;var s=r[0]===n.delimiter;if(s&&!n.parent)return n.getStateNodeByPath(r.slice(1));var o=s?n.key+r:r;if(n.parent)try{var u=n.parent.getStateNodeByPath(o);return u}catch(d){throw new Error("Invalid transition definition for state node '".concat(n.id,`':
`).concat(d.message))}else return n.getStateNodeByPath(o)})},t.prototype.formatTransition=function(e){var n=this,r=Vz(e.target),s="internal"in e?e.internal:r?r.some(function(h){return Rt(h)&&h[0]===n.delimiter}):!0,o=this.machine.options.guards,u=this.resolveTarget(r),d=ge(ge({},e),{actions:ja(Pi(e.actions)),cond:BN(e.cond,o),target:u,source:this,internal:s,eventType:e.event,toJSON:function(){return ge(ge({},d),{target:d.target?d.target.map(function(h){return"#".concat(h.id)}):void 0,source:"#".concat(n.id)})}});return d},t.prototype.formatTransitions=function(){var e,n,r=this,s;if(!this.config.on)s=[];else if(Array.isArray(this.config.on))s=this.config.on;else{var o=this.config.on,u=wy,d=o[u],h=d===void 0?[]:d,f=Cx(o,[typeof u=="symbol"?u:u+""]);s=ln(Object.keys(f).map(function(O){var B=zl(O,f[O]);return B}).concat(zl(wy,h)))}var v=this.config.always?zl("",this.config.always):[],b=this.config.onDone?zl(String(Vf(this.id)),this.config.onDone):[],x=ln(this.invoke.map(function(O){var B=[];return O.onDone&&B.push.apply(B,Wt([],_t(zl(String(mm(O.id)),O.onDone)),!1)),O.onError&&B.push.apply(B,Wt([],_t(zl(String(Kc(O.id)),O.onError)),!1)),B})),_=this.after,A=ln(Wt(Wt(Wt(Wt([],_t(b),!1),_t(x),!1),_t(s),!1),_t(v),!1).map(function(O){return Pi(O).map(function(B){return r.formatTransition(B)})}));try{for(var R=mt(_),M=R.next();!M.done;M=R.next()){var U=M.value;A.push(U)}}catch(O){e={error:O}}finally{try{M&&!M.done&&(n=R.return)&&n.call(R)}finally{if(e)throw e.error}}return A},t})();function p7(t,e,n){return n===void 0&&(n=t.context),new m7(t,e,n)}var g7=Kz,j0;(function(t){t[t.Effect=1]="Effect",t[t.LayoutEffect=2]="LayoutEffect"})(j0||(j0={}));var ud=k.useLayoutEffect;function EA(t){var e=k.useRef();return e.current||(e.current={v:t()}),e.current.v}var v7=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,o=[],u;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(d){u={error:d}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return o},y7=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function b7(t,e){var n,r,s=v7([[],[]],2),o=s[0],u=s[1];try{for(var d=y7(t),h=d.next();!h.done;h=d.next()){var f=h.value;e(f)?o.push(f):u.push(f)}}catch(v){n={error:v}}finally{try{h&&!h.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}return[o,u]}var Dc=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,o=[],u;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(d){u={error:d}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return o},_A=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};function TA(t,e){var n=t.exec,r=n(e.context,e._event.data,{action:t,state:e,_event:e._event});r()}function x7(t){var e=k.useRef([]),n=k.useRef([]);ud(function(){var r=t.subscribe(function(s){var o,u;if(s.actions.length){var d=s.actions.filter(function(b){return typeof b.exec=="function"&&"__effect"in b.exec}),h=Dc(b7(d,function(b){return b.exec.__effect===j0.Effect}),2),f=h[0],v=h[1];(o=e.current).push.apply(o,_A([],Dc(f.map(function(b){return[b,s]})),!1)),(u=n.current).push.apply(u,_A([],Dc(v.map(function(b){return[b,s]})),!1))}});return function(){r.unsubscribe()}},[]),ud(function(){for(;n.current.length;){var r=Dc(n.current.shift(),2),s=r[0],o=r[1];TA(s,o)}}),k.useEffect(function(){for(;e.current.length;){var r=Dc(e.current.shift(),2),s=r[0],o=r[1];TA(s,o)}})}var cd=function(){return cd=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},cd.apply(this,arguments)},E7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};function _7(t,e,n){if(typeof t=="object")return t;var r=function(){};return{next:t,error:e||r,complete:n||r}}function T7(t,e,n){e===void 0&&(e={});var r=EA(function(){return typeof t=="function"?t():t}),s=e.context,o=e.guards,u=e.actions,d=e.activities,h=e.services,f=e.delays,v=e.state,b=E7(e,["context","guards","actions","activities","services","delays","state"]),x=EA(function(){var _={context:s,guards:o,actions:u,activities:d,services:h,delays:f},A=r.withConfig(_,function(){return cd(cd({},r.context),s)});return QN(A,cd({deferEvents:!0},b))});return ud(function(){var _;return n&&(_=x.subscribe(_7(n))),function(){_==null||_.unsubscribe()}},[n]),ud(function(){return x.start(v?Ai.create(v):void 0),function(){x.stop()}},[]),ud(function(){Object.assign(x.machine.options.actions,u),Object.assign(x.machine.options.guards,o),Object.assign(x.machine.options.activities,d),Object.assign(x.machine.options.services,h),Object.assign(x.machine.options.delays,f)},[u,o,d,h,f]),x7(x),x}var w7=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,o=[],u;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(d){u={error:d}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return o};function S7(t,e){e===void 0&&(e={});var n=k.useCallback(function(d){var h=d.changed===void 0&&Object.keys(d.children).length;(d.changed||h)&&u(d)},[]),r=T7(t,e,n),s=w7(k.useState(function(){var d=r.machine.initialState;return e.state?Ai.create(e.state):d}),2),o=s[0],u=s[1];return[o,r.send,r]}function gn(){return gn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gn.apply(null,arguments)}function cu(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}const ot={arr:Array.isArray,obj:t=>Object.prototype.toString.call(t)==="[object Object]",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0,nul:t=>t===null,set:t=>t instanceof Set,map:t=>t instanceof Map,equ(t,e){if(typeof t!=typeof e)return!1;if(ot.str(t)||ot.num(t))return t===e;if(ot.obj(t)&&ot.obj(e)&&Object.keys(t).length+Object.keys(e).length===0)return!0;let n;for(n in t)if(!(n in e))return!1;for(n in e)if(t[n]!==e[n])return!1;return ot.und(n)?t===e:!0}};function A7(t,e){return n=>(ot.arr(n)?n:Object.keys(n)).reduce((r,s)=>{const o=s;return r[o]=t(o),r},t)}function C7(){const t=k.useState(!1),e=t[1];return k.useCallback(()=>e(r=>!r),[])}function ko(t,e){return ot.und(t)||ot.nul(t)?e:t}function Bf(t){return ot.und(t)?[]:ot.arr(t)?t:[t]}function nu(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return ot.fun(t)?t(...n):t}function R7(t){return t.to,t.from,t.config,t.onStart,t.onRest,t.onFrame,t.children,t.reset,t.reverse,t.force,t.immediate,t.delay,t.attach,t.destroyed,t.interpolateTo,t.ref,t.lazy,cu(t,["to","from","config","onStart","onRest","onFrame","children","reset","reverse","force","immediate","delay","attach","destroyed","interpolateTo","ref","lazy"])}function Sy(t){const e=R7(t);if(ot.und(e))return gn({to:e},t);const n=Object.keys(t).reduce((r,s)=>ot.und(e[s])?gn({},r,{[s]:t[s]}):r,{});return gn({to:e},n)}function I7(t,e){return e&&(ot.fun(e)?e(t):ot.obj(e)&&(e.current=t)),t}class Vi{constructor(){this.payload=void 0,this.children=[]}getAnimatedValue(){return this.getValue()}getPayload(){return this.payload||this}attach(){}detach(){}getChildren(){return this.children}addChild(e){this.children.length===0&&this.attach(),this.children.push(e)}removeChild(e){const n=this.children.indexOf(e);this.children.splice(n,1),this.children.length===0&&this.detach()}}class M0 extends Vi{constructor(){super(...arguments),this.payload=[],this.attach=()=>this.payload.forEach(e=>e instanceof Vi&&e.addChild(this)),this.detach=()=>this.payload.forEach(e=>e instanceof Vi&&e.removeChild(this))}}class WN extends Vi{constructor(){super(...arguments),this.payload={},this.attach=()=>Object.values(this.payload).forEach(e=>e instanceof Vi&&e.addChild(this)),this.detach=()=>Object.values(this.payload).forEach(e=>e instanceof Vi&&e.removeChild(this))}getValue(e){e===void 0&&(e=!1);const n={};for(const r in this.payload){const s=this.payload[r];e&&!(s instanceof Vi)||(n[r]=s instanceof Vi?s[e?"getAnimatedValue":"getValue"]():s)}return n}getAnimatedValue(){return this.getValue(!0)}}let Dx;function N7(t,e){Dx={fn:t,transform:e}}let XN;function k7(t){XN=t}let JN=t=>typeof window<"u"?window.requestAnimationFrame(t):-1,ep;function O7(t){ep=t}let ZN=()=>Date.now(),D7=t=>t.current,ek;function j7(t){ek=t}class M7 extends WN{constructor(e,n){super(),this.update=void 0,this.payload=e.style?gn({},e,{style:ek(e.style)}):e,this.update=n,this.attach()}}const P7=t=>ot.fun(t)&&!(t.prototype instanceof Ln.Component),V7=t=>k.forwardRef((n,r)=>{const s=C7(),o=k.useRef(!0),u=k.useRef(null),d=k.useRef(null),h=k.useCallback(x=>{const _=u.current,A=()=>{let R=!1;d.current&&(R=Dx.fn(d.current,u.current.getAnimatedValue())),(!d.current||R===!1)&&s()};u.current=new M7(x,A),_&&_.detach()},[]);k.useEffect(()=>()=>{o.current=!1,u.current&&u.current.detach()},[]),k.useImperativeHandle(r,()=>D7(d)),h(n);const f=u.current.getValue();f.scrollTop,f.scrollLeft;const v=cu(f,["scrollTop","scrollLeft"]),b=P7(t)?void 0:x=>d.current=I7(x,r);return Ln.createElement(t,gn({},v,{ref:b}))});let dd=!1;const qo=new Set,tk=()=>{if(!dd)return!1;let t=ZN();for(let e of qo){let n=!1;for(let r=0;r<e.configs.length;r++){let s=e.configs[r],o,u;for(let d=0;d<s.animatedValues.length;d++){let h=s.animatedValues[d];if(h.done)continue;let f=s.fromValues[d],v=s.toValues[d],b=h.lastPosition,x=v instanceof Vi,_=Array.isArray(s.initialVelocity)?s.initialVelocity[d]:s.initialVelocity;if(x&&(v=v.getValue()),s.immediate){h.setValue(v),h.done=!0;continue}if(typeof f=="string"||typeof v=="string"){h.setValue(v),h.done=!0;continue}if(s.duration!==void 0)b=f+s.easing((t-h.startTime)/s.duration)*(v-f),o=t>=h.startTime+s.duration;else if(s.decay)b=f+_/(1-.998)*(1-Math.exp(-.0020000000000000018*(t-h.startTime))),o=Math.abs(h.lastPosition-b)<.1,o&&(v=b);else{u=h.lastTime!==void 0?h.lastTime:t,_=h.lastVelocity!==void 0?h.lastVelocity:s.initialVelocity,t>u+64&&(u=t);let A=Math.floor(t-u);for(let O=0;O<A;++O){let B=-s.tension*(b-v),H=-s.friction*_,G=(B+H)/s.mass;_=_+G*1/1e3,b=b+_*1/1e3}let R=s.clamp&&s.tension!==0?f<v?b>v:b<v:!1,M=Math.abs(_)<=s.precision,U=s.tension!==0?Math.abs(v-b)<=s.precision:!0;o=R||M&&U,h.lastVelocity=_,h.lastTime=t}x&&!s.toValues[d].done&&(o=!1),o?(h.value!==v&&(b=v),h.done=!0):n=!0,h.setValue(b),h.lastPosition=b}e.props.onFrame&&(e.values[s.name]=s.interpolation.getValue())}e.props.onFrame&&e.props.onFrame(e.values),n||(qo.delete(e),e.stop(!0))}return qo.size?JN(tk):dd=!1,dd},L7=t=>{qo.has(t)||qo.add(t),dd||(dd=!0,JN(tk))},U7=t=>{qo.has(t)&&qo.delete(t)};function tp(t,e,n){if(typeof t=="function")return t;if(Array.isArray(t))return tp({range:t,output:e,extrapolate:n});if(ep&&typeof t.output[0]=="string")return ep(t);const r=t,s=r.output,o=r.range||[0,1],u=r.extrapolateLeft||r.extrapolate||"extend",d=r.extrapolateRight||r.extrapolate||"extend",h=r.easing||(f=>f);return f=>{const v=z7(f,o);return B7(f,o[v],o[v+1],s[v],s[v+1],h,u,d,r.map)}}function B7(t,e,n,r,s,o,u,d,h){let f=h?h(t):t;if(f<e){if(u==="identity")return f;u==="clamp"&&(f=e)}if(f>n){if(d==="identity")return f;d==="clamp"&&(f=n)}return r===s?r:e===n?t<=e?r:s:(e===-1/0?f=-f:n===1/0?f=f-e:f=(f-e)/(n-e),f=o(f),r===-1/0?f=-f:s===1/0?f=f+r:f=f*(s-r)+r,f)}function z7(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}class wu extends M0{constructor(e,n,r,s){super(),this.calc=void 0,this.payload=e instanceof M0&&!(e instanceof wu)?e.getPayload():Array.isArray(e)?e:[e],this.calc=tp(n,r,s)}getValue(){return this.calc(...this.payload.map(e=>e.getValue()))}updateConfig(e,n,r){this.calc=tp(e,n,r)}interpolate(e,n,r){return new wu(this,e,n,r)}}const Hl=(t,e,n)=>t&&new wu(t,e,n),F7={default:{tension:170,friction:26}};function nk(t,e){"update"in t?e.add(t):t.getChildren().forEach(n=>nk(n,e))}class P0 extends Vi{constructor(e){var n;super(),n=this,this.animatedStyles=new Set,this.value=void 0,this.startPosition=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.startTime=void 0,this.lastTime=void 0,this.done=!1,this.setValue=function(r,s){s===void 0&&(s=!0),n.value=r,s&&n.flush()},this.value=e,this.startPosition=e,this.lastPosition=e}flush(){this.animatedStyles.size===0&&nk(this,this.animatedStyles),this.animatedStyles.forEach(e=>e.update())}clearStyles(){this.animatedStyles.clear()}getValue(){return this.value}interpolate(e,n,r){return new wu(this,e,n,r)}}class q7 extends M0{constructor(e){super(),this.payload=e.map(n=>new P0(n))}setValue(e,n){n===void 0&&(n=!0),Array.isArray(e)?e.length===this.payload.length&&e.forEach((r,s)=>this.payload[s].setValue(r,n)):this.payload.forEach(r=>r.setValue(e,n))}getValue(){return this.payload.map(e=>e.getValue())}interpolate(e,n){return new wu(this,e,n)}}let H7=0,G7=class{constructor(){this.id=void 0,this.idle=!0,this.hasChanged=!1,this.guid=0,this.local=0,this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.listeners=[],this.queue=[],this.localQueue=void 0,this.getValues=()=>this.interpolations,this.id=H7++}update(e){if(!e)return this;const n=Sy(e),r=n.delay,s=r===void 0?0:r,o=n.to,u=cu(n,["delay","to"]);if(ot.arr(o)||ot.fun(o))this.queue.push(gn({},u,{delay:s,to:o}));else if(o){let d={};Object.entries(o).forEach(h=>{let f=h[0],v=h[1];const b=gn({to:{[f]:v},delay:nu(s,f)},u),x=d[b.delay]&&d[b.delay].to;d[b.delay]=gn({},d[b.delay],b,{to:gn({},x,b.to)})}),this.queue=Object.values(d)}return this.queue=this.queue.sort((d,h)=>d.delay-h.delay),this.diff(u),this}start(e){if(this.queue.length){this.idle=!1,this.localQueue&&this.localQueue.forEach(s=>{let o=s.from,u=o===void 0?{}:o,d=s.to,h=d===void 0?{}:d;ot.obj(u)&&(this.merged=gn({},u,this.merged)),ot.obj(h)&&(this.merged=gn({},this.merged,h))});const n=this.local=++this.guid,r=this.localQueue=this.queue;this.queue=[],r.forEach((s,o)=>{let u=s.delay,d=cu(s,["delay"]);const h=v=>{o===r.length-1&&n===this.guid&&v&&(this.idle=!0,this.props.onRest&&this.props.onRest(this.merged)),e&&e()};let f=ot.arr(d.to)||ot.fun(d.to);u?setTimeout(()=>{n===this.guid&&(f?this.runAsync(d,h):this.diff(d).start(h))},u):f?this.runAsync(d,h):this.diff(d).start(h)})}else ot.fun(e)&&this.listeners.push(e),this.props.onStart&&this.props.onStart(),L7(this);return this}stop(e){return this.listeners.forEach(n=>n(e)),this.listeners=[],this}pause(e){return this.stop(!0),e&&U7(this),this}runAsync(e,n){var r=this;e.delay;let s=cu(e,["delay"]);const o=this.local;let u=Promise.resolve(void 0);if(ot.arr(s.to))for(let d=0;d<s.to.length;d++){const h=d,f=gn({},s,Sy(s.to[h]));ot.arr(f.config)&&(f.config=f.config[h]),u=u.then(()=>{if(o===this.guid)return new Promise(v=>this.diff(f).start(v))})}else if(ot.fun(s.to)){let d=0,h;u=u.then(()=>s.to(f=>{const v=gn({},s,Sy(f));if(ot.arr(v.config)&&(v.config=v.config[d]),d++,o===this.guid)return h=new Promise(b=>this.diff(v).start(b))},function(f){return f===void 0&&(f=!0),r.stop(f)}).then(()=>h))}u.then(n)}diff(e){this.props=gn({},this.props,e);let n=this.props,r=n.from,s=r===void 0?{}:r,o=n.to,u=o===void 0?{}:o,d=n.config,h=d===void 0?{}:d,f=n.reverse,v=n.attach,b=n.reset,x=n.immediate;if(f){var _=[u,s];s=_[0],u=_[1]}this.merged=gn({},s,this.merged,u),this.hasChanged=!1;let A=v&&v(this);if(this.animations=Object.entries(this.merged).reduce((R,M)=>{let U=M[0],O=M[1],B=R[U]||{};const H=ot.num(O),G=ot.str(O)&&!O.startsWith("#")&&!/\d/.test(O)&&!XN[O],q=ot.arr(O),C=!H&&!q&&!G;let S=ot.und(s[U])?O:s[U],N=H||q||G?O:1,P=nu(h,U);A&&(N=A.animations[U].parent);let V=B.parent,L=B.interpolation,D=Bf(A?N.getPayload():N),pe,Ie=O;C&&(Ie=ep({range:[0,1],output:[O,O]})(1));let X=L&&L.getValue();const ce=!ot.und(V)&&B.animatedValues.some(J=>!J.done),Ae=!ot.equ(Ie,X),_e=!ot.equ(Ie,B.previous),z=!ot.equ(P,B.config);if(b||_e&&Ae||z){if(H||G)V=L=B.parent||new P0(S);else if(q)V=L=B.parent||new q7(S);else if(C){let J=B.interpolation&&B.interpolation.calc(B.parent.value);J=J!==void 0&&!b?J:S,B.parent?(V=B.parent,V.setValue(0,!1)):V=new P0(0);const de={output:[J,O]};B.interpolation?(L=B.interpolation,B.interpolation.updateConfig(de)):L=V.interpolate(de)}return D=Bf(A?N.getPayload():N),pe=Bf(V.getPayload()),b&&!C&&V.setValue(S,!1),this.hasChanged=!0,pe.forEach(J=>{J.startPosition=J.value,J.lastPosition=J.value,J.lastVelocity=ce?J.lastVelocity:void 0,J.lastTime=ce?J.lastTime:void 0,J.startTime=ZN(),J.done=!1,J.animatedStyles.clear()}),nu(x,U)&&V.setValue(C?N:O,!1),gn({},R,{[U]:gn({},B,{name:U,parent:V,interpolation:L,animatedValues:pe,toValues:D,previous:Ie,config:P,fromValues:Bf(V.getValue()),immediate:nu(x,U),initialVelocity:ko(P.velocity,0),clamp:ko(P.clamp,!1),precision:ko(P.precision,.01),tension:ko(P.tension,170),friction:ko(P.friction,26),mass:ko(P.mass,1),duration:P.duration,easing:ko(P.easing,J=>J),decay:P.decay})})}else return Ae?R:(C&&(V.setValue(1,!1),L.updateConfig({output:[Ie,Ie]})),V.done=!0,this.hasChanged=!0,gn({},R,{[U]:gn({},R[U],{previous:Ie})}))},this.animations),this.hasChanged){this.configs=Object.values(this.animations),this.values={},this.interpolations={};for(let R in this.animations)this.interpolations[R]=this.animations[R].interpolation,this.values[R]=this.animations[R].interpolation.getValue()}return this}destroy(){this.stop(),this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.local=0}};const $7=(t,e)=>{const n=k.useRef(!1),r=k.useRef(),s=ot.fun(e),o=k.useMemo(()=>{r.current&&(r.current.map(b=>b.destroy()),r.current=void 0);let v;return[new Array(t).fill().map((b,x)=>{const _=new G7,A=s?nu(e,x,_):e[x];return x===0&&(v=A.ref),_.update(A),v||_.start(),_}),v]},[t]),u=o[0],d=o[1];r.current=u,k.useImperativeHandle(d,()=>({start:()=>Promise.all(r.current.map(v=>new Promise(b=>v.start(b)))),stop:v=>r.current.forEach(b=>b.stop(v)),get controllers(){return r.current}}));const h=k.useMemo(()=>v=>r.current.map((b,x)=>{b.update(s?nu(v,x,b):v[x]),d||b.start()}),[t]);k.useEffect(()=>{n.current?s||h(e):d||r.current.forEach(v=>v.start())}),k.useEffect(()=>(n.current=!0,()=>r.current.forEach(v=>v.destroy())),[]);const f=r.current.map(v=>v.getValues());return s?[f,h,v=>r.current.forEach(b=>b.pause(v))]:f},K7=t=>{const e=ot.fun(t),n=$7(1,e?t:[t]),r=n[0],s=n[1],o=n[2];return e?[r[0],s,o]:r};class Y7 extends WN{constructor(e){e===void 0&&(e={}),super(),e.transform&&!(e.transform instanceof Vi)&&(e=Dx.transform(e)),this.payload=e}}const np={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Bi="[-+]?\\d*\\.?\\d+",rp=Bi+"%";function Hp(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}const Q7=new RegExp("rgb"+Hp(Bi,Bi,Bi)),W7=new RegExp("rgba"+Hp(Bi,Bi,Bi,Bi)),X7=new RegExp("hsl"+Hp(Bi,rp,rp)),J7=new RegExp("hsla"+Hp(Bi,rp,rp,Bi)),Z7=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,eF=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,tF=/^#([0-9a-fA-F]{6})$/,nF=/^#([0-9a-fA-F]{8})$/;function rF(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=tF.exec(t))?parseInt(e[1]+"ff",16)>>>0:np.hasOwnProperty(t)?np[t]:(e=Q7.exec(t))?(Gl(e[1])<<24|Gl(e[2])<<16|Gl(e[3])<<8|255)>>>0:(e=W7.exec(t))?(Gl(e[1])<<24|Gl(e[2])<<16|Gl(e[3])<<8|AA(e[4]))>>>0:(e=Z7.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=nF.exec(t))?parseInt(e[1],16)>>>0:(e=eF.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=X7.exec(t))?(wA(SA(e[1]),zf(e[2]),zf(e[3]))|255)>>>0:(e=J7.exec(t))?(wA(SA(e[1]),zf(e[2]),zf(e[3]))|AA(e[4]))>>>0:null}function Ay(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function wA(t,e,n){const r=n<.5?n*(1+e):n+e-n*e,s=2*n-r,o=Ay(s,r,t+1/3),u=Ay(s,r,t),d=Ay(s,r,t-1/3);return Math.round(o*255)<<24|Math.round(u*255)<<16|Math.round(d*255)<<8}function Gl(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function SA(t){return(parseFloat(t)%360+360)%360/360}function AA(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function zf(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function CA(t){let e=rF(t);if(e===null)return t;e=e||0;let n=(e&4278190080)>>>24,r=(e&16711680)>>>16,s=(e&65280)>>>8,o=(e&255)/255;return`rgba(${n}, ${r}, ${s}, ${o})`}const Ff=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,iF=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,sF=new RegExp(`(${Object.keys(np).join("|")})`,"g"),aF=t=>{const e=t.output.map(s=>s.replace(iF,CA)).map(s=>s.replace(sF,CA)),n=e[0].match(Ff).map(()=>[]);e.forEach(s=>{s.match(Ff).forEach((o,u)=>n[u].push(+o))});const r=e[0].match(Ff).map((s,o)=>tp(gn({},t,{output:n[o]})));return s=>{let o=0;return e[0].replace(Ff,()=>r[o++](s)).replace(/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,(u,d,h,f,v)=>`rgba(${Math.round(d)}, ${Math.round(h)}, ${Math.round(f)}, ${v})`)}};let hd={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};const oF=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),lF=["Webkit","Ms","Moz","O"];hd=Object.keys(hd).reduce((t,e)=>(lF.forEach(n=>t[oF(n,e)]=t[e]),t),hd);function uF(t,e,n){return e==null||typeof e=="boolean"||e===""?"":!n&&typeof e=="number"&&e!==0&&!(hd.hasOwnProperty(t)&&hd[t])?e+"px":(""+e).trim()}const RA={};j7(t=>new Y7(t));O7(aF);k7(np);N7((t,e)=>{if(t.nodeType&&t.setAttribute!==void 0){const s=e.style,o=e.children,u=e.scrollTop,d=e.scrollLeft,h=cu(e,["style","children","scrollTop","scrollLeft"]),f=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter";u!==void 0&&(t.scrollTop=u),d!==void 0&&(t.scrollLeft=d),o!==void 0&&(t.textContent=o);for(let v in s)if(s.hasOwnProperty(v)){var n=v.indexOf("--")===0,r=uF(v,s[v],n);v==="float"&&(v="cssFloat"),n?t.style.setProperty(v,r):t.style[v]=r}for(let v in h){const b=f?v:RA[v]||(RA[v]=v.replace(/([A-Z])/g,x=>"-"+x.toLowerCase()));typeof t.getAttribute(b)<"u"&&t.setAttribute(b,h[v])}return}else return!1},t=>t);const cF=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],dF=A7(V7),hF=dF(cF);function IA(t,e){return t.map(function(n,r){return n+e[r]})}function rk(t,e){return t.map(function(n,r){return n-e[r]})}function V0(t){return Math.hypot.apply(Math,t)}function fF(t,e,n){var r=V0(e),s=r===0?0:1/r,o=n===0?0:1/n,u=o*r,d=e.map(function(v){return o*v}),h=e.map(function(v){return s*v}),f=V0(t);return{velocities:d,velocity:u,distance:f,direction:h}}function L0(t){return Math.sign?Math.sign(t):+(t>0)-+(t<0)||+t}function mF(t,e,n){return Math.max(e,Math.min(t,n))}function pF(t,e){return Math.pow(t,e*5)}function NA(t,e,n){return e===0||Math.abs(e)===1/0?pF(t,n):t*e*n/(e+n*t)}function fd(t,e,n,r){return r===void 0&&(r=.15),r===0?mF(t,e,n):t<e?-NA(e-t,n-e,r)+e:t>n?+NA(t-n,n-e,r)+n:t}function gF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vF(t,e,n){return e&&gF(t.prototype,e),t}function Or(){return Or=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Or.apply(this,arguments)}function ik(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function yF(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function qf(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bF(t,e){if(t){if(typeof t=="string")return kA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kA(t,e)}}function kA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Gp(t,e){var n;if(typeof Symbol>"u"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=bF(t))||e){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return n=t[Symbol.iterator](),n.next.bind(n)}function sk(){}function ak(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?sk:e.length===1?e[0]:function(){for(var r,s=Gp(e),o;!(o=s()).done;){var u=o.value;r=u.apply(this,arguments)||r}return r}}function Ma(t,e){if(t===void 0){if(e===void 0)throw new Error("Must define fallback value if undefined is expected");t=e}return Array.isArray(t)?t:[t,t]}function Hf(t){if(typeof t=="function"){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.apply(void 0,n)}else return t}function jx(t,e){t===void 0&&(t={});for(var n={},r=0,s=Object.entries(e);r<s.length;r++){var o=s[r],u=o[0],d=o[1];switch(typeof d){case"function":n[u]=d.call(n,t[u],u,t);break;case"object":n[u]=jx(t[u],d);break;case"boolean":d&&(n[u]=t[u]);break}}return n}var xF=180,EF=.15,_F=.5,TF=60,wF={threshold:function(e){return e===void 0&&(e=0),Ma(e)},rubberband:function(e){switch(e===void 0&&(e=0),e){case!0:return Ma(EF);case!1:return Ma(0);default:return Ma(e)}},enabled:function(e){return e===void 0&&(e=!0),e},triggerAllEvents:function(e){return e===void 0&&(e=!1),e},initial:function(e){return e===void 0&&(e=0),typeof e=="function"?e:Ma(e)}},ok=Or({},wF,{axis:!0,lockDirection:function(e){return e===void 0&&(e=!1),e},bounds:function(e){if(e===void 0&&(e={}),typeof e=="function")return function(b){return ok.bounds(e(b))};var n=e,r=n.left,s=r===void 0?-1/0:r,o=n.right,u=o===void 0?1/0:o,d=n.top,h=d===void 0?-1/0:d,f=n.bottom,v=f===void 0?1/0:f;return[[s,u],[h,v]]}}),SF=typeof window<"u"&&window.document&&window.document.createElement,AF={enabled:function(e){return e===void 0&&(e=!0),e},domTarget:!0,window:(function(t){function e(n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e})(function(t){return t===void 0&&(t=SF?window:void 0),t}),eventOptions:function(e){var n=e===void 0?{}:e,r=n.passive,s=r===void 0?!0:r,o=n.capture,u=o===void 0?!1:o;return{passive:s,capture:u}}},CF=Or({},ok,{threshold:function(e,n,r){var s=r.filterTaps,o=s===void 0?!1:s,u=r.lockDirection,d=u===void 0?!1:u,h=r.axis,f=h===void 0?void 0:h,v=Ma(e,o?3:d||f?1:0);return this.filterTaps=o||v[0]+v[1]>0,v},swipeVelocity:function(e){return e===void 0&&(e=_F),Ma(e)},swipeDistance:function(e){return e===void 0&&(e=TF),Ma(e)},delay:function(e){switch(e===void 0&&(e=0),e){case!0:return xF;case!1:return 0;default:return e}}});function RF(t){return t===void 0&&(t={}),jx(t,AF)}function IF(t){return t===void 0&&(t={}),jx(t,CF)}function NF(t){var e=t.domTarget,n=t.eventOptions,r=t.window,s=t.enabled,o=yF(t,["domTarget","eventOptions","window","enabled"]),u=RF({domTarget:e,eventOptions:n,window:r,enabled:s});return u.drag=IF(o),u}function jc(t){return Or({_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_lastEventType:void 0,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:sk,canceled:!1,memo:void 0,args:void 0},t)}function lk(){var t={hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1},e=jc({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,_isTap:!0,_delayedEvent:!1,_pointerId:void 0,tap:!1,swipe:[0,0]}),n=jc({da:[0,0],vdva:[0,0],origin:void 0,turns:0}),r=jc({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),s=jc({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),o=jc({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0});return{shared:t,drag:e,pinch:n,wheel:r,move:s,scroll:o}}var Po=new Map,kF=(function(){function t(n,r){var s=this;r===void 0&&(r=[]),this.controller=n,this.args=r,this.debounced=!0,this.setTimeout=function(o,u){var d;u===void 0&&(u=140),clearTimeout(s.controller.timeouts[s.stateKey]);for(var h=arguments.length,f=new Array(h>2?h-2:0),v=2;v<h;v++)f[v-2]=arguments[v];s.controller.timeouts[s.stateKey]=(d=window).setTimeout.apply(d,[o,u].concat(f))},this.clearTimeout=function(){clearTimeout(s.controller.timeouts[s.stateKey])},this.fireGestureHandler=function(o){if(o===void 0&&(o=!1),s.state._blocked)return s.debounced||(s.state._active=!1,s.clean()),null;if(!o&&!s.state.intentional&&!s.config.triggerAllEvents)return null;if(s.state.intentional){var u=s.state.active,d=s.state._active;s.state.active=d,s.state.first=d&&!u,s.state.last=u&&!d,s.controller.state.shared[s.ingKey]=d}var h=Or({},s.controller.state.shared,s.state,s.mapStateValues(s.state)),f=s.handler(h);return s.state.memo=f!==void 0?f:s.state.memo,s.state._active||s.clean(),h}}var e=t.prototype;return e.updateSharedState=function(r){Object.assign(this.controller.state.shared,r)},e.updateGestureState=function(r){Object.assign(this.state,r)},e.checkIntentionality=function(r,s){return{_intentional:r,_blocked:!1}},e.getMovement=function(r){var s=this.config,o=s.initial,u=s.bounds,d=s.rubberband,h=s.threshold,f=this.state,v=f._bounds,b=f._initial,x=f._active,_=f._intentional,A=f.lastOffset,R=f.movement,M=this.getInternalMovement(r,this.state),U=_[0]===!1?OA(M[0],h[0]):_[0],O=_[1]===!1?OA(M[1],h[1]):_[1],B=this.checkIntentionality([U,O],M);if(B._blocked)return Or({},B,{_movement:M,delta:[0,0]});var H=B._intentional,G=M,q,C;if(H[0]!==!1&&_[0]===!1&&(C=Hf(o,this.state),q=Hf(u,this.state),b[0]=C[0],v[0]=q[0]),H[1]!==!1&&_[1]===!1){var S,N;C=(S=C)!=null?S:Hf(o,this.state),q=(N=q)!=null?N:Hf(u,this.state),b[1]=C[1],v[1]=q[1]}var P=[H[0]!==!1?M[0]-H[0]:b[0],H[1]!==!1?M[1]-H[1]:b[1]],V=IA(P,A),L=x?d:[0,0];return P=DA(v,IA(P,b),L),Or({},B,{intentional:H[0]!==!1||H[1]!==!1,_initial:b,_movement:G,movement:P,values:r,offset:DA(v,V,L),delta:rk(P,R)})},e.clean=function(){this.clearTimeout()},vF(t,[{key:"config",get:function(){return this.controller.config[this.stateKey]}},{key:"enabled",get:function(){return this.controller.config.enabled&&this.config.enabled}},{key:"state",get:function(){return this.controller.state[this.stateKey]}},{key:"handler",get:function(){return this.controller.handlers[this.stateKey]}}]),t})();function OA(t,e){return Math.abs(t)>=e?L0(t)*e:!1}function DA(t,e,n){var r=e[0],s=e[1],o=n[0],u=n[1],d=t[0],h=d[0],f=d[1],v=t[1],b=v[0],x=v[1];return[fd(r,h,f,o),fd(s,b,x,u)]}function Cy(t,e,n){var r=t.state,s=t.args,o=e.timeStamp,u=e.type,d=r.values,h=n?0:o-r.startTime;return{_lastEventType:u,event:e,timeStamp:o,elapsedTime:h,args:s,previous:d}}function OF(t,e,n){var r=t.state.offset,s=n.timeStamp;return Or({},lk()[t.stateKey],{_active:!0,values:e,initial:e,offset:r,lastOffset:r,startTime:s})}function DF(t,e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return t.call.apply(t,[this,Or({},e,{event:n})].concat(s))}}var jF=function(e){var n=this;this.classes=e,this.bind=function(){for(var r={},s=arguments.length,o=new Array(s),u=0;u<s;u++)o[u]=arguments[u];for(var d=Gp(n.classes),h;!(h=d()).done;){var f=h.value;new f(n,o).addBindings(r)}for(var v=0,b=Object.entries(n.nativeRefs);v<b.length;v++){var x=b[v],_=x[0],A=x[1];U0(r,_,DF(A,Or({},n.state.shared,{args:o})))}return n.config.domTarget?LF(n,r):UF(n,r)},this.effect=function(){return n.config.domTarget&&n.bind(),n.clean},this.clean=function(){var r=ck(n.config),s=n.config.eventOptions;r&&th(r,uk(n.domListeners),s),Object.values(n.timeouts).forEach(clearTimeout),MF(n)},this.state=lk(),this.timeouts={},this.domListeners=[],this.windowListeners={}};function MF(t){var e=t.config,n=e.window,r=e.eventOptions,s=t.windowListeners;if(n){for(var o in s){var u=s[o];th(n,u,r)}t.windowListeners={}}}function PF(t,e){var n=t.config,r=t.windowListeners;n.window&&(th(n.window,r[e],n.eventOptions),delete r[e])}function VF(t,e,n){var r=t.config,s=t.windowListeners;n===void 0&&(n=[]),r.window&&(th(r.window,s[e],r.eventOptions),dk(r.window,s[e]=n,r.eventOptions))}function LF(t,e){var n=t.config,r=t.domListeners,s=ck(n);if(!s)throw new Error("domTarget must be defined");var o=n.eventOptions;th(s,uk(r),o);for(var u=0,d=Object.entries(e);u<d.length;u++){var h=d[u],f=h[0],v=h[1],b=f.slice(2).toLowerCase();r.push([b,ak.apply(void 0,v)])}dk(s,r,o)}function UF(t,e){for(var n=t.config,r={},s=n.eventOptions.capture?"Capture":"",o=0,u=Object.entries(e);o<u.length;o++){var d=u[o],h=d[0],f=d[1],v=Array.isArray(f)?f:[f],b=h+s;r[b]=ak.apply(void 0,v)}return r}function uk(t){return t===void 0&&(t=[]),t.splice(0,t.length)}function ck(t){var e=t.domTarget;return e&&"current"in e?e.current:e}function U0(t,e,n){t[e]||(t[e]=[]),t[e].push(n)}function dk(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var r=Gp(e),s;!(s=r()).done;){var o=s.value,u=o[0],d=o[1];t.addEventListener(u,d,n)}}function th(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var r=Gp(e),s;!(s=r()).done;){var o=s.value,u=o[0],d=o[1];t.removeEventListener(u,d,n)}}function BF(t,e,n){n===void 0&&(n={});var r=FF(t),s=Ln.useMemo(function(){return new jF(r)},[]);return s.config=e,s.handlers=t,s.nativeRefs=n,Ln.useEffect(s.effect,[]),s.config.domTarget?zF:s.bind}function zF(){}function FF(t){var e=new Set;return t.drag&&e.add(Po.get("drag")),t.wheel&&e.add(Po.get("wheel")),t.scroll&&e.add(Po.get("scroll")),t.move&&e.add(Po.get("move")),t.pinch&&e.add(Po.get("pinch")),t.hover&&e.add(Po.get("hover")),e}var qF=(function(t){ik(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.getInternalMovement=function(s,o){return rk(s,o.initial)},n.checkIntentionality=function(s,o){if(s[0]===!1&&s[1]===!1)return{_intentional:s,axis:this.state.axis};var u=o.map(Math.abs),d=u[0],h=u[1],f=this.state.axis||(d>h?"x":d<h?"y":void 0);return!this.config.axis&&!this.config.lockDirection?{_intentional:s,_blocked:!1,axis:f}:f?this.config.axis&&f!==this.config.axis?{_intentional:s,_blocked:!0,axis:f}:(s[f==="x"?1:0]=!1,{_intentional:s,_blocked:!1,axis:f}):{_intentional:[!1,!1],_blocked:!1,axis:f}},n.getKinematics=function(s,o){var u=this.getMovement(s);if(!u._blocked){var d=o.timeStamp-this.state.timeStamp;Object.assign(u,fF(u.movement,u.delta,d))}return u},n.mapStateValues=function(s){return{xy:s.values,vxvy:s.velocities}},e})(kF);function hk(t){if("touches"in t){var e=t.targetTouches,n=t.changedTouches;return e.length>0?e:n}return null}function jA(t){var e="buttons"in t?t.buttons:0,n=hk(t),r=n&&n.length||0,s=r>0||e>0,o=t.shiftKey,u=t.altKey,d=t.metaKey,h=t.ctrlKey;return{touches:r,down:s,buttons:e,shiftKey:o,altKey:u,metaKey:d,ctrlKey:h}}function MA(t){var e=hk(t),n=e?e[0]:t,r=n.clientX,s=n.clientY;return[r,s]}var HF=3,GF=220,$F=(function(t){ik(e,t);function e(){var r;return r=t.apply(this,arguments)||this,r.ingKey="dragging",r.stateKey="drag",r.onDragStart=function(s){!r.enabled||r.state._active||(VF(r.controller,r.stateKey,[["pointermove",r.onDragChange],["pointerup",r.onDragEnd],["pointercancel",r.onDragEnd]]),r.updateGestureState({_pointerId:s.pointerId}),r.config.delay>0?(r.state._delayedEvent=!0,"persist"in s&&typeof s.persist=="function"&&s.persist(),r.setTimeout(r.startDrag.bind(qf(r)),r.config.delay,s)):r.startDrag(s))},r.onDragChange=function(s){if(!r.state.canceled&&s.pointerId===r.state._pointerId){if(!r.state._active){r.state._delayedEvent&&(r.clearTimeout(),r.startDrag(s));return}var o=jA(s);if(!o.down){r.onDragEnd(s);return}r.updateSharedState(o);var u=MA(s),d=r.getKinematics(u,s),h=Cy(qf(r),s),f=r.state._isTap,v=V0(d._movement);f&&v>=HF&&(f=!1),r.updateGestureState(Or({},h,d,{_isTap:f})),r.fireGestureHandler()}},r.onDragEnd=function(s){if(s.pointerId===r.state._pointerId){r.state._active=!1,r.updateSharedState({down:!1,buttons:0,touches:0});var o=r.state._isTap,u=r.state.velocities,d=u[0],h=u[1],f=r.state.movement,v=f[0],b=f[1],x=r.state._intentional,_=x[0],A=x[1],R=r.config.swipeVelocity,M=R[0],U=R[1],O=r.config.swipeDistance,B=O[0],H=O[1],G=Or({},Cy(qf(r),s),r.getMovement(r.state.values)),q=[0,0];G.elapsedTime<GF&&(_!==!1&&Math.abs(d)>M&&Math.abs(v)>B&&(q[0]=L0(d)),A!==!1&&Math.abs(h)>U&&Math.abs(b)>H&&(q[1]=L0(h))),r.updateGestureState(Or({},G,{tap:o,swipe:q})),r.fireGestureHandler(o===!0)}},r.clean=function(){t.prototype.clean.call(qf(r)),r.state._delayedEvent=!1,PF(r.controller,r.stateKey)},r.onCancel=function(){r.state.canceled||(r.updateGestureState({canceled:!0}),r.state._active=!1,r.updateSharedState({down:!1,buttons:0,touches:0}),requestAnimationFrame(function(){return r.fireGestureHandler()}))},r.onClick=function(s){r.state._isTap||s.stopPropagation()},r}var n=e.prototype;return n.startDrag=function(s){var o=MA(s);this.updateSharedState(jA(s)),this.updateGestureState(Or({},OF(this,o,s),Cy(this,s,!0),{_pointerId:s.pointerId,cancel:this.onCancel})),this.updateGestureState(this.getMovement(o)),this.fireGestureHandler()},n.addBindings=function(s){if(U0(s,"onPointerDown",this.onDragStart),this.config.filterTaps){var o=this.controller.config.eventOptions.capture?"onClick":"onClickCapture";U0(s,o,this.onClick)}},e})(qF);function KF(t,e){var n,r=[],s,o=!1;function u(){for(var d=arguments.length,h=new Array(d),f=0;f<d;f++)h[f]=arguments[f];return o&&n===this&&e(h,r)||(s=t.apply(this,h),o=!0,n=this,r=h),s}return u}function gm(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,s;if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!gm(t[r],e[r]))return!1;return!0}var o;if(typeof Map=="function"&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(o=t.entries();!(r=o.next()).done;)if(!e.has(r.value[0]))return!1;for(o=t.entries();!(r=o.next()).done;)if(!gm(r.value[1],e.get(r.value[0])))return!1;return!0}if(typeof Set=="function"&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(o=t.entries();!(r=o.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;if(typeof Element<"u"&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!(s[r]==="_owner"&&t.$$typeof)&&!gm(t[s[r]],e[s[r]]))return!1;return!0}return t!==t&&e!==e}function YF(t,e){try{return gm(t,e)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}function QF(t,e){e===void 0&&(e={}),Po.set("drag",$F);var n=k.useRef();return n.current||(n.current=KF(NF,YF)),BF({drag:t},n.current(e))}/*!
* tabbable 5.3.3
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var fk=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],ip=fk.join(","),mk=typeof Element>"u",Zo=mk?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,B0=!mk&&Element.prototype.getRootNode?function(t){return t.getRootNode()}:function(t){return t.ownerDocument},pk=function(e,n,r){var s=Array.prototype.slice.apply(e.querySelectorAll(ip));return n&&Zo.call(e,ip)&&s.unshift(e),s=s.filter(r),s},gk=function t(e,n,r){for(var s=[],o=Array.from(e);o.length;){var u=o.shift();if(u.tagName==="SLOT"){var d=u.assignedElements(),h=d.length?d:u.children,f=t(h,!0,r);r.flatten?s.push.apply(s,f):s.push({scope:u,candidates:f})}else{var v=Zo.call(u,ip);v&&r.filter(u)&&(n||!e.includes(u))&&s.push(u);var b=u.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(u),x=!r.shadowRootFilter||r.shadowRootFilter(u);if(b&&x){var _=t(b===!0?u.children:b.children,!0,r);r.flatten?s.push.apply(s,_):s.push({scope:u,candidates:_})}else o.unshift.apply(o,u.children)}}return s},vk=function(e,n){return e.tabIndex<0&&(n||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||e.isContentEditable)&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},WF=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},yk=function(e){return e.tagName==="INPUT"},XF=function(e){return yk(e)&&e.type==="hidden"},JF=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},ZF=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},eq=function(e){if(!e.name)return!0;var n=e.form||B0(e),r=function(d){return n.querySelectorAll('input[type="radio"][name="'+d+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(e.name));else try{s=r(e.name)}catch(u){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",u.message),!1}var o=ZF(s,e.form);return!o||o===e},tq=function(e){return yk(e)&&e.type==="radio"},nq=function(e){return tq(e)&&!eq(e)},PA=function(e){var n=e.getBoundingClientRect(),r=n.width,s=n.height;return r===0&&s===0},rq=function(e,n){var r=n.displayCheck,s=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var o=Zo.call(e,"details>summary:first-of-type"),u=o?e.parentElement:e;if(Zo.call(u,"details:not([open]) *"))return!0;var d=B0(e).host,h=(d==null?void 0:d.ownerDocument.contains(d))||e.ownerDocument.contains(e);if(!r||r==="full"){if(typeof s=="function"){for(var f=e;e;){var v=e.parentElement,b=B0(e);if(v&&!v.shadowRoot&&s(v)===!0)return PA(e);e.assignedSlot?e=e.assignedSlot:!v&&b!==e.ownerDocument?e=b.host:e=v}e=f}if(h)return!e.getClientRects().length}else if(r==="non-zero-area")return PA(e);return!1},iq=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var s=n.children.item(r);if(s.tagName==="LEGEND")return Zo.call(n,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}n=n.parentElement}return!1},sp=function(e,n){return!(n.disabled||XF(n)||rq(n,e)||JF(n)||iq(n))},z0=function(e,n){return!(nq(n)||vk(n)<0||!sp(e,n))},sq=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},aq=function t(e){var n=[],r=[];return e.forEach(function(s,o){var u=!!s.scope,d=u?s.scope:s,h=vk(d,u),f=u?t(s.candidates):d;h===0?u?n.push.apply(n,f):n.push(d):r.push({documentOrder:o,tabIndex:h,item:s,isScope:u,content:f})}),r.sort(WF).reduce(function(s,o){return o.isScope?s.push.apply(s,o.content):s.push(o.content),s},[]).concat(n)},oq=function(e,n){n=n||{};var r;return n.getShadowRoot?r=gk([e],n.includeContainer,{filter:z0.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:sq}):r=pk(e,n.includeContainer,z0.bind(null,n)),aq(r)},lq=function(e,n){n=n||{};var r;return n.getShadowRoot?r=gk([e],n.includeContainer,{filter:sp.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):r=pk(e,n.includeContainer,sp.bind(null,n)),r},Gf=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return Zo.call(e,ip)===!1?!1:z0(n,e)},uq=fk.concat("iframe").join(","),Ry=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return Zo.call(e,uq)===!1?!1:sp(n,e)};/*!
* focus-trap 6.9.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function VA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function LA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VA(Object(n),!0).forEach(function(r){cq(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cq(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var UA=(function(){var t=[];return{activateTrap:function(n){if(t.length>0){var r=t[t.length-1];r!==n&&r.pause()}var s=t.indexOf(n);s===-1||t.splice(s,1),t.push(n)},deactivateTrap:function(n){var r=t.indexOf(n);r!==-1&&t.splice(r,1),t.length>0&&t[t.length-1].unpause()}}})(),dq=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},hq=function(e){return e.key==="Escape"||e.key==="Esc"||e.keyCode===27},fq=function(e){return e.key==="Tab"||e.keyCode===9},BA=function(e){return setTimeout(e,0)},zA=function(e,n){var r=-1;return e.every(function(s,o){return n(s)?(r=o,!1):!0}),r},Mc=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return typeof e=="function"?e.apply(void 0,r):e},$f=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},mq=function(e,n){var r=(n==null?void 0:n.document)||document,s=LA({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},n),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},u,d=function(q,C,S){return q&&q[C]!==void 0?q[C]:s[S||C]},h=function(q){return o.containerGroups.findIndex(function(C){var S=C.container,N=C.tabbableNodes;return S.contains(q)||N.find(function(P){return P===q})})},f=function(q){var C=s[q];if(typeof C=="function"){for(var S=arguments.length,N=new Array(S>1?S-1:0),P=1;P<S;P++)N[P-1]=arguments[P];C=C.apply(void 0,N)}if(C===!0&&(C=void 0),!C){if(C===void 0||C===!1)return C;throw new Error("`".concat(q,"` was specified but was not a node, or did not return a node"))}var V=C;if(typeof C=="string"&&(V=r.querySelector(C),!V))throw new Error("`".concat(q,"` as selector refers to no known node"));return V},v=function(){var q=f("initialFocus");if(q===!1)return!1;if(q===void 0)if(h(r.activeElement)>=0)q=r.activeElement;else{var C=o.tabbableGroups[0],S=C&&C.firstTabbableNode;q=S||f("fallbackFocus")}if(!q)throw new Error("Your focus-trap needs to have at least one focusable element");return q},b=function(){if(o.containerGroups=o.containers.map(function(q){var C=oq(q,s.tabbableOptions),S=lq(q,s.tabbableOptions);return{container:q,tabbableNodes:C,focusableNodes:S,firstTabbableNode:C.length>0?C[0]:null,lastTabbableNode:C.length>0?C[C.length-1]:null,nextTabbableNode:function(P){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,L=S.findIndex(function(D){return D===P});if(!(L<0))return V?S.slice(L+1).find(function(D){return Gf(D,s.tabbableOptions)}):S.slice(0,L).reverse().find(function(D){return Gf(D,s.tabbableOptions)})}}}),o.tabbableGroups=o.containerGroups.filter(function(q){return q.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!f("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},x=function G(q){if(q!==!1&&q!==r.activeElement){if(!q||!q.focus){G(v());return}q.focus({preventScroll:!!s.preventScroll}),o.mostRecentlyFocusedNode=q,dq(q)&&q.select()}},_=function(q){var C=f("setReturnFocus",q);return C||(C===!1?!1:q)},A=function(q){var C=$f(q);if(!(h(C)>=0)){if(Mc(s.clickOutsideDeactivates,q)){u.deactivate({returnFocus:s.returnFocusOnDeactivate&&!Ry(C,s.tabbableOptions)});return}Mc(s.allowOutsideClick,q)||q.preventDefault()}},R=function(q){var C=$f(q),S=h(C)>=0;S||C instanceof Document?S&&(o.mostRecentlyFocusedNode=C):(q.stopImmediatePropagation(),x(o.mostRecentlyFocusedNode||v()))},M=function(q){var C=$f(q);b();var S=null;if(o.tabbableGroups.length>0){var N=h(C),P=N>=0?o.containerGroups[N]:void 0;if(N<0)q.shiftKey?S=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:S=o.tabbableGroups[0].firstTabbableNode;else if(q.shiftKey){var V=zA(o.tabbableGroups,function(ie){var ce=ie.firstTabbableNode;return C===ce});if(V<0&&(P.container===C||Ry(C,s.tabbableOptions)&&!Gf(C,s.tabbableOptions)&&!P.nextTabbableNode(C,!1))&&(V=N),V>=0){var L=V===0?o.tabbableGroups.length-1:V-1,D=o.tabbableGroups[L];S=D.lastTabbableNode}}else{var pe=zA(o.tabbableGroups,function(ie){var ce=ie.lastTabbableNode;return C===ce});if(pe<0&&(P.container===C||Ry(C,s.tabbableOptions)&&!Gf(C,s.tabbableOptions)&&!P.nextTabbableNode(C))&&(pe=N),pe>=0){var Ie=pe===o.tabbableGroups.length-1?0:pe+1,X=o.tabbableGroups[Ie];S=X.firstTabbableNode}}}else S=f("fallbackFocus");S&&(q.preventDefault(),x(S))},U=function(q){if(hq(q)&&Mc(s.escapeDeactivates,q)!==!1){q.preventDefault(),u.deactivate();return}if(fq(q)){M(q);return}},O=function(q){var C=$f(q);h(C)>=0||Mc(s.clickOutsideDeactivates,q)||Mc(s.allowOutsideClick,q)||(q.preventDefault(),q.stopImmediatePropagation())},B=function(){if(o.active)return UA.activateTrap(u),o.delayInitialFocusTimer=s.delayInitialFocus?BA(function(){x(v())}):x(v()),r.addEventListener("focusin",R,!0),r.addEventListener("mousedown",A,{capture:!0,passive:!1}),r.addEventListener("touchstart",A,{capture:!0,passive:!1}),r.addEventListener("click",O,{capture:!0,passive:!1}),r.addEventListener("keydown",U,{capture:!0,passive:!1}),u},H=function(){if(o.active)return r.removeEventListener("focusin",R,!0),r.removeEventListener("mousedown",A,!0),r.removeEventListener("touchstart",A,!0),r.removeEventListener("click",O,!0),r.removeEventListener("keydown",U,!0),u};return u={get active(){return o.active},get paused(){return o.paused},activate:function(q){if(o.active)return this;var C=d(q,"onActivate"),S=d(q,"onPostActivate"),N=d(q,"checkCanFocusTrap");N||b(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=r.activeElement,C&&C();var P=function(){N&&b(),B(),S&&S()};return N?(N(o.containers.concat()).then(P,P),this):(P(),this)},deactivate:function(q){if(!o.active)return this;var C=LA({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},q);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,H(),o.active=!1,o.paused=!1,UA.deactivateTrap(u);var S=d(C,"onDeactivate"),N=d(C,"onPostDeactivate"),P=d(C,"checkCanReturnFocus"),V=d(C,"returnFocus","returnFocusOnDeactivate");S&&S();var L=function(){BA(function(){V&&x(_(o.nodeFocusedBeforeActivation)),N&&N()})};return V&&P?(P(_(o.nodeFocusedBeforeActivation)).then(L,L),this):(L(),this)},pause:function(){return o.paused||!o.active?this:(o.paused=!0,H(),this)},unpause:function(){return!o.paused||!o.active?this:(o.paused=!1,b(),B(),this)},updateContainerElements:function(q){var C=[].concat(q).filter(Boolean);return o.containers=C.map(function(S){return typeof S=="string"?r.querySelector(S):S}),o.active&&b(),this}},u.updateContainerElements(e),u};function pq(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}else return Array.from(t)}var Mx=!1;if(typeof window<"u"){var FA={get passive(){Mx=!0}};window.addEventListener("testPassive",null,FA),window.removeEventListener("testPassive",null,FA)}var bk=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),Va=[],ap=!1,xk=-1,md=void 0,pd=void 0,Ek=function(e){return Va.some(function(n){return!!(n.options.allowTouchMove&&n.options.allowTouchMove(e))})},op=function(e){var n=e||window.event;return Ek(n.target)||n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)},gq=function(e){if(pd===void 0){var n=!!e&&e.reserveScrollBarGap===!0,r=window.innerWidth-document.documentElement.clientWidth;n&&r>0&&(pd=document.body.style.paddingRight,document.body.style.paddingRight=r+"px")}md===void 0&&(md=document.body.style.overflow,document.body.style.overflow="hidden")},vq=function(){pd!==void 0&&(document.body.style.paddingRight=pd,pd=void 0),md!==void 0&&(document.body.style.overflow=md,md=void 0)},yq=function(e){return e?e.scrollHeight-e.scrollTop<=e.clientHeight:!1},bq=function(e,n){var r=e.targetTouches[0].clientY-xk;return Ek(e.target)?!1:n&&n.scrollTop===0&&r>0||yq(n)&&r<0?op(e):(e.stopPropagation(),!0)},xq=function(e,n){if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!Va.some(function(s){return s.targetElement===e})){var r={targetElement:e,options:n||{}};Va=[].concat(pq(Va),[r]),bk?(e.ontouchstart=function(s){s.targetTouches.length===1&&(xk=s.targetTouches[0].clientY)},e.ontouchmove=function(s){s.targetTouches.length===1&&bq(s,e)},ap||(document.addEventListener("touchmove",op,Mx?{passive:!1}:void 0),ap=!0)):gq(n)}},Eq=function(e){if(!e){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}Va=Va.filter(function(n){return n.targetElement!==e}),bk?(e.ontouchstart=null,e.ontouchmove=null,ap&&Va.length===0&&(document.removeEventListener("touchmove",op,Mx?{passive:!1}:void 0),ap=!1)):Va.length||vq()},Ho=[],_q=function(){return Ho.some(function(t){return t.activeTargets.length>0})},Tq=function(){return Ho.some(function(t){return t.skippedTargets.length>0})},qA="ResizeObserver loop completed with undelivered notifications.",wq=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:qA}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=qA),window.dispatchEvent(t)},Md;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Md||(Md={}));var Go=function(t){return Object.freeze(t)},Sq=(function(){function t(e,n){this.inlineSize=e,this.blockSize=n,Go(this)}return t})(),_k=(function(){function t(e,n,r,s){return this.x=e,this.y=n,this.width=r,this.height=s,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Go(this)}return t.prototype.toJSON=function(){var e=this,n=e.x,r=e.y,s=e.top,o=e.right,u=e.bottom,d=e.left,h=e.width,f=e.height;return{x:n,y:r,top:s,right:o,bottom:u,left:d,width:h,height:f}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t})(),Px=function(t){return t instanceof SVGElement&&"getBBox"in t},Tk=function(t){if(Px(t)){var e=t.getBBox(),n=e.width,r=e.height;return!n&&!r}var s=t,o=s.offsetWidth,u=s.offsetHeight;return!(o||u||t.getClientRects().length)},HA=function(t){var e;if(t instanceof Element)return!0;var n=(e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(n&&t instanceof n.Element)},Aq=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},gd=typeof window<"u"?window:{},Kf=new WeakMap,GA=/auto|scroll/,Cq=/^tb|vertical/,Rq=/msie|trident/i.test(gd.navigator&&gd.navigator.userAgent),ns=function(t){return parseFloat(t||"0")},du=function(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=!1),new Sq((n?e:t)||0,(n?t:e)||0)},$A=Go({devicePixelContentBoxSize:du(),borderBoxSize:du(),contentBoxSize:du(),contentRect:new _k(0,0,0,0)}),wk=function(t,e){if(e===void 0&&(e=!1),Kf.has(t)&&!e)return Kf.get(t);if(Tk(t))return Kf.set(t,$A),$A;var n=getComputedStyle(t),r=Px(t)&&t.ownerSVGElement&&t.getBBox(),s=!Rq&&n.boxSizing==="border-box",o=Cq.test(n.writingMode||""),u=!r&&GA.test(n.overflowY||""),d=!r&&GA.test(n.overflowX||""),h=r?0:ns(n.paddingTop),f=r?0:ns(n.paddingRight),v=r?0:ns(n.paddingBottom),b=r?0:ns(n.paddingLeft),x=r?0:ns(n.borderTopWidth),_=r?0:ns(n.borderRightWidth),A=r?0:ns(n.borderBottomWidth),R=r?0:ns(n.borderLeftWidth),M=b+f,U=h+v,O=R+_,B=x+A,H=d?t.offsetHeight-B-t.clientHeight:0,G=u?t.offsetWidth-O-t.clientWidth:0,q=s?M+O:0,C=s?U+B:0,S=r?r.width:ns(n.width)-q-G,N=r?r.height:ns(n.height)-C-H,P=S+M+G+O,V=N+U+H+B,L=Go({devicePixelContentBoxSize:du(Math.round(S*devicePixelRatio),Math.round(N*devicePixelRatio),o),borderBoxSize:du(P,V,o),contentBoxSize:du(S,N,o),contentRect:new _k(b,h,S,N)});return Kf.set(t,L),L},Sk=function(t,e,n){var r=wk(t,n),s=r.borderBoxSize,o=r.contentBoxSize,u=r.devicePixelContentBoxSize;switch(e){case Md.DEVICE_PIXEL_CONTENT_BOX:return u;case Md.BORDER_BOX:return s;default:return o}},Iq=(function(){function t(e){var n=wk(e);this.target=e,this.contentRect=n.contentRect,this.borderBoxSize=Go([n.borderBoxSize]),this.contentBoxSize=Go([n.contentBoxSize]),this.devicePixelContentBoxSize=Go([n.devicePixelContentBoxSize])}return t})(),Ak=function(t){if(Tk(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},Nq=function(){var t=1/0,e=[];Ho.forEach(function(u){if(u.activeTargets.length!==0){var d=[];u.activeTargets.forEach(function(f){var v=new Iq(f.target),b=Ak(f.target);d.push(v),f.lastReportedSize=Sk(f.target,f.observedBox),b<t&&(t=b)}),e.push(function(){u.callback.call(u.observer,d,u.observer)}),u.activeTargets.splice(0,u.activeTargets.length)}});for(var n=0,r=e;n<r.length;n++){var s=r[n];s()}return t},KA=function(t){Ho.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(s){s.isActive()&&(Ak(s.target)>t?n.activeTargets.push(s):n.skippedTargets.push(s))})})},kq=function(){var t=0;for(KA(t);_q();)t=Nq(),KA(t);return Tq()&&wq(),t>0},Iy,Ck=[],Oq=function(){return Ck.splice(0).forEach(function(t){return t()})},Dq=function(t){if(!Iy){var e=0,n=document.createTextNode(""),r={characterData:!0};new MutationObserver(function(){return Oq()}).observe(n,r),Iy=function(){n.textContent="".concat(e?e--:e++)}}Ck.push(t),Iy()},jq=function(t){Dq(function(){requestAnimationFrame(t)})},vm=0,Mq=function(){return!!vm},Pq=250,Vq={attributes:!0,characterData:!0,childList:!0,subtree:!0},YA=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],QA=function(t){return t===void 0&&(t=0),Date.now()+t},Ny=!1,Lq=(function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var n=this;if(e===void 0&&(e=Pq),!Ny){Ny=!0;var r=QA(e);jq(function(){var s=!1;try{s=kq()}finally{if(Ny=!1,e=r-QA(),!Mq())return;s?n.run(1e3):e>0?n.run(e):n.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,n=function(){return e.observer&&e.observer.observe(document.body,Vq)};document.body?n():gd.addEventListener("DOMContentLoaded",n)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),YA.forEach(function(n){return gd.addEventListener(n,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),YA.forEach(function(n){return gd.removeEventListener(n,e.listener,!0)}),this.stopped=!0)},t})(),F0=new Lq,WA=function(t){!vm&&t>0&&F0.start(),vm+=t,!vm&&F0.stop()},Uq=function(t){return!Px(t)&&!Aq(t)&&getComputedStyle(t).display==="inline"},Bq=(function(){function t(e,n){this.target=e,this.observedBox=n||Md.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=Sk(this.target,this.observedBox,!0);return Uq(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t})(),zq=(function(){function t(e,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=n}return t})(),Yf=new WeakMap,XA=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},Qf=(function(){function t(){}return t.connect=function(e,n){var r=new zq(e,n);Yf.set(e,r)},t.observe=function(e,n,r){var s=Yf.get(e),o=s.observationTargets.length===0;XA(s.observationTargets,n)<0&&(o&&Ho.push(s),s.observationTargets.push(new Bq(n,r&&r.box)),WA(1),F0.schedule())},t.unobserve=function(e,n){var r=Yf.get(e),s=XA(r.observationTargets,n),o=r.observationTargets.length===1;s>=0&&(o&&Ho.splice(Ho.indexOf(r),1),r.observationTargets.splice(s,1),WA(-1))},t.disconnect=function(e){var n=this,r=Yf.get(e);r.observationTargets.slice().forEach(function(s){return n.unobserve(e,s.target)}),r.activeTargets.splice(0,r.activeTargets.length)},t})(),Fq=(function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Qf.connect(this,e)}return t.prototype.observe=function(e,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!HA(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Qf.observe(this,e,n)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!HA(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Qf.unobserve(this,e)},t.prototype.disconnect=function(){Qf.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t})();function yr(){return yr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yr.apply(this,arguments)}function ym(t,e){if(t==null)return{};var n,r,s={},o=Object.keys(t);for(r=0;r<o.length;r++)e.indexOf(n=o[r])>=0||(s[n]=t[n]);return s}var vd=typeof window<"u"?k.useLayoutEffect:k.useEffect;function Pc(t,e,n){return e=(e=+e)==e?e:0,n=(n=+n)==n?n:0,(t=+t)==t&&(t=(t=t<=n?t:n)>=e?t:e),t}function Wf(t){var e=Math.round(t);if(Number.isNaN(t))throw new TypeError("Found a NaN! Check your snapPoints / defaultSnap / snapTo ");return e}var qq={box:"border-box"};function ky(t,e){var n=e.label,r=e.enabled,s=e.resizeSourceRef,o=k.useState(0),u=o[0],d=o[1];k.useDebugValue(n+": "+u);var h=k.useCallback(function(f){d(f[0].borderBoxSize[0].blockSize),s.current="element"},[s]);return vd(function(){if(t.current&&r){var f=new Fq(h);return f.observe(t.current,qq),function(){f.disconnect()}}},[t,h,r]),r?u:0}function gr(t){return t===void 0&&(t=1e3),new Promise(function(e){return setTimeout(e,t)})}var JA={DRAG:{target:"#overlay.dragging",actions:"onOpenEnd"}},ZA={RESIZE:{target:"#overlay.resizing",actions:"onOpenEnd"}},Hq=p7({id:"overlay",initial:"closed",context:{initialState:"CLOSED"},states:{closed:{on:{OPEN:"opening",CLOSE:void 0}},opening:{initial:"start",states:{start:{invoke:{src:"onOpenStart",onDone:"transition"}},transition:{always:[{target:"immediately",cond:"initiallyOpen"},{target:"smoothly",cond:"initiallyClosed"}]},immediately:{initial:"open",states:{open:{invoke:{src:"openImmediately",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"#overlay.opening.end"},on:yr({},JA,ZA)}}},smoothly:{initial:"visuallyHidden",states:{visuallyHidden:{invoke:{src:"renderVisuallyHidden",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"open"}},open:{invoke:{src:"openSmoothly",onDone:"#overlay.opening.end"},on:yr({},JA,ZA)}}},end:{invoke:{src:"onOpenEnd",onDone:"done"},on:{CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:yr({},{CLOSE:{target:"#overlay.closing",actions:"onOpenCancel"}}),onDone:"open"},open:{on:{DRAG:"#overlay.dragging",SNAP:"snapping",RESIZE:"resizing"}},dragging:{on:{SNAP:"snapping"}},snapping:{initial:"start",states:{start:{invoke:{src:"onSnapStart",onDone:"snappingSmoothly"},entry:[g7({y:function(t,e){return e.payload.y},velocity:function(t,e){return e.payload.velocity},snapSource:function(t,e){var n=e.payload.source;return n===void 0?"custom":n}})]},snappingSmoothly:{invoke:{src:"snapSmoothly",onDone:"end"}},end:{invoke:{src:"onSnapEnd",onDone:"done"},on:{RESIZE:"#overlay.resizing",SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{SNAP:{target:"snapping",actions:"onSnapEnd"},RESIZE:{target:"#overlay.resizing",actions:"onSnapCancel"},DRAG:{target:"#overlay.dragging",actions:"onSnapCancel"},CLOSE:{target:"#overlay.closing",actions:"onSnapCancel"}},onDone:"open"},resizing:{initial:"start",states:{start:{invoke:{src:"onResizeStart",onDone:"resizingSmoothly"}},resizingSmoothly:{invoke:{src:"resizeSmoothly",onDone:"end"}},end:{invoke:{src:"onResizeEnd",onDone:"done"},on:{SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{RESIZE:{target:"resizing",actions:"onResizeEnd"},SNAP:{target:"snapping",actions:"onResizeCancel"},DRAG:{target:"#overlay.dragging",actions:"onResizeCancel"},CLOSE:{target:"#overlay.closing",actions:"onResizeCancel"}},onDone:"open"},closing:{initial:"start",states:{start:{invoke:{src:"onCloseStart",onDone:"deactivating"},on:{OPEN:{target:"#overlay.open",actions:"onCloseCancel"}}},deactivating:{invoke:{src:"deactivate",onDone:"closingSmoothly"}},closingSmoothly:{invoke:{src:"closeSmoothly",onDone:"end"}},end:{invoke:{src:"onCloseEnd",onDone:"done"},on:{OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}}},done:{type:"final"}},on:{CLOSE:void 0,OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}},onDone:"closed"}},on:{CLOSE:"closing"}},{actions:{onOpenCancel:function(t,e){},onSnapCancel:function(t,e){},onResizeCancel:function(t,e){},onCloseCancel:function(t,e){},onOpenEnd:function(t,e){},onSnapEnd:function(t,e){},onRezizeEnd:function(t,e){}},services:{onSnapStart:function(){try{return Promise.resolve(gr()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenStart:function(){try{return Promise.resolve(gr()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseStart:function(){try{return Promise.resolve(gr()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeStart:function(){try{return Promise.resolve(gr()).then(function(){})}catch(t){return Promise.reject(t)}},onSnapEnd:function(){try{return Promise.resolve(gr()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenEnd:function(){try{return Promise.resolve(gr()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseEnd:function(){try{return Promise.resolve(gr()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeEnd:function(){try{return Promise.resolve(gr()).then(function(){})}catch(t){return Promise.reject(t)}},renderVisuallyHidden:function(t,e){try{return Promise.resolve(gr()).then(function(){})}catch(n){return Promise.reject(n)}},activate:function(t,e){try{return Promise.resolve(gr()).then(function(){})}catch(n){return Promise.reject(n)}},deactivate:function(t,e){try{return Promise.resolve(gr()).then(function(){})}catch(n){return Promise.reject(n)}},openSmoothly:function(t,e){try{return Promise.resolve(gr()).then(function(){})}catch(n){return Promise.reject(n)}},openImmediately:function(t,e){try{return Promise.resolve(gr()).then(function(){})}catch(n){return Promise.reject(n)}},snapSmoothly:function(t,e){try{return Promise.resolve(gr()).then(function(){})}catch(n){return Promise.reject(n)}},resizeSmoothly:function(t,e){try{return Promise.resolve(gr()).then(function(){})}catch(n){return Promise.reject(n)}},closeSmoothly:function(t,e){try{return Promise.resolve(gr()).then(function(){})}catch(n){return Promise.reject(n)}}},guards:{initiallyClosed:function(t){return t.initialState==="CLOSED"},initiallyOpen:function(t){return t.initialState==="OPEN"}}}),Gq=["children","sibling","className","footer","header","open","initialState","lastSnapRef","initialFocusRef","onDismiss","maxHeight","defaultSnap","snapPoints","blocking","scrollLocking","style","onSpringStart","onSpringCancel","onSpringEnd","reserveScrollBarGap","expandOnContentDrag"],$q=["velocity"],Kq=["onRest","config"],Rk=F7.default,Yq=Rk.tension,Xf=Rk.friction,Qq=Ln.forwardRef(function(t,e){var n=t.children,r=t.sibling,s=t.className,o=t.footer,u=t.header,d=t.open,h=t.initialState,f=t.lastSnapRef,v=t.initialFocusRef,b=t.onDismiss,x=t.maxHeight,_=t.defaultSnap,A=_===void 0?Xq:_,R=t.snapPoints,M=R===void 0?Jq:R,U=t.blocking,O=U===void 0||U,B=t.scrollLocking,H=B===void 0||B,G=t.style,q=t.onSpringStart,C=t.onSpringCancel,S=t.onSpringEnd,N=t.reserveScrollBarGap,P=N===void 0?O:N,V=t.expandOnContentDrag,L=V!==void 0&&V,D=ym(t,Gq),pe=(function(){var ae=k.useState(!1),xe=ae[0],Te=ae[1],Ke=k.useState({}),yt=Ke[0],We=Ke[1],Ye=k.useCallback(function(rt){return We(function(it){var De;return yr({},it,((De={})[rt]=!1,De))}),function(){We(function(it){var De;return yr({},it,((De={})[rt]=!0,De))})}},[]);return k.useEffect(function(){var rt=Object.values(yt);rt.length!==0&&rt.every(Boolean)&&Te(!0)},[yt]),{ready:xe,registerReady:Ye}})(),Ie=pe.ready,X=pe.registerReady,ie=k.useRef(!1),ce=k.useRef(q),Ae=k.useRef(C),_e=k.useRef(S);k.useEffect(function(){ce.current=q,Ae.current=C,_e.current=S},[C,q,S]);var z,J,de=K7(function(){return{y:0,ready:0,maxHeight:0,minSnap:0,maxSnap:0}}),fe=de[0],we=de[1],je=k.useRef(null),qe=k.useRef(null),Zt=k.useRef(null),At=k.useRef(null),Mn=k.useRef(null),Bn=k.useRef(null),en=k.useRef(0),zn=k.useRef(),Ut=k.useRef(!1),he=(z=k.useMemo(function(){return typeof window<"u"?window.matchMedia("(prefers-reduced-motion: reduce)"):null},[]),J=k.useRef(z==null?void 0:z.matches),k.useDebugValue(J.current?"reduce":"no-preference"),k.useEffect(function(){var ae=function(xe){J.current=xe.matches};return z==null||z.addListener(ae),function(){return z==null?void 0:z.removeListener(ae)}},[z]),J),ve=(function(ae){var xe=ae.targetRef,Te=ae.enabled,Ke=ae.reserveScrollBarGap,yt=k.useRef({activate:function(){throw new TypeError("Tried to activate scroll lock too early")},deactivate:function(){}});return k.useDebugValue(Te?"Enabled":"Disabled"),k.useEffect(function(){if(!Te)return yt.current.deactivate(),void(yt.current={activate:function(){},deactivate:function(){}});var We=xe.current,Ye=!1;yt.current={activate:function(){Ye||(Ye=!0,xq(We,{allowTouchMove:function(rt){return rt.closest("[data-body-scroll-lock-ignore]")},reserveScrollBarGap:Ke}))},deactivate:function(){Ye&&(Ye=!1,Eq(We))}}},[Te,xe,Ke]),yt})({targetRef:qe,enabled:Ie&&H,reserveScrollBarGap:P}),nt=(function(ae){var xe=ae.targetRef,Te=ae.enabled,Ke=k.useRef({activate:function(){throw new TypeError("Tried to activate aria hider too early")},deactivate:function(){}});return k.useDebugValue(Te?"Enabled":"Disabled"),k.useEffect(function(){if(!Te)return Ke.current.deactivate(),void(Ke.current={activate:function(){},deactivate:function(){}});var yt=xe.current,We=!1,Ye=[],rt=[];Ke.current={activate:function(){if(!We){We=!0;var it=yt.parentNode;document.querySelectorAll("body > *").forEach(function(De){if(De!==it){var Xe=De.getAttribute("aria-hidden");Xe!==null&&Xe!=="false"||(Ye.push(Xe),rt.push(De),De.setAttribute("aria-hidden","true"))}})}},deactivate:function(){We&&(We=!1,rt.forEach(function(it,De){var Xe=Ye[De];Xe===null?it.removeAttribute("aria-hidden"):it.setAttribute("aria-hidden",Xe)}),Ye=[],rt=[])}}},[xe,Te]),Ke})({targetRef:je,enabled:Ie&&O}),an=(function(ae){var xe=ae.targetRef,Te=ae.fallbackRef,Ke=ae.initialFocusRef,yt=ae.enabled,We=k.useRef({activate:function(){throw new TypeError("Tried to activate focus trap too early")},deactivate:function(){}});return k.useDebugValue(yt?"Enabled":"Disabled"),k.useEffect(function(){if(!yt)return We.current.deactivate(),void(We.current={activate:function(){},deactivate:function(){}});var Ye=Te.current,rt=mq(xe.current,{onActivate:void 0,initialFocus:Ke?function(){return(Ke==null?void 0:Ke.current)||Ye}:void 0,fallbackFocus:Ye,escapeDeactivates:!1,clickOutsideDeactivates:!1}),it=!1;We.current={activate:function(){try{return it?Promise.resolve():(it=!0,Promise.resolve(rt.activate()).then(function(){return Promise.resolve(new Promise(function(De){return setTimeout(function(){return De(void 0)},0)})).then(function(){})}))}catch(De){return Promise.reject(De)}},deactivate:function(){it&&(it=!1,rt.deactivate())}}},[yt,Te,Ke,xe]),We})({targetRef:je,fallbackRef:Bn,initialFocusRef:v||void 0,enabled:Ie&&O&&v!==!1}),ze=(function(ae){var xe=ae.getSnapPoints,Te=ae.heightRef,Ke=ae.lastSnapRef,yt=ae.ready,We=(function(Nt){var Tt=Nt.contentRef,qn=Nt.controlledMaxHeight,zt=Nt.footerEnabled,Pn=Nt.footerRef,jr=Nt.headerEnabled,nn=Nt.headerRef,rn=Nt.registerReady,Ne=Nt.resizeSourceRef,Sn=k.useMemo(function(){return rn("contentHeight")},[rn]),bt=(function(Hn,Pr,Sr){var Zn=k.useMemo(function(){return Pr("maxHeight")},[Pr]),Ar=k.useState(function(){return Wf(Hn)||typeof window<"u"?window.innerHeight:0}),er=Ar[0],tr=Ar[1],Ft=er>0,Vr=k.useRef(0);return k.useDebugValue(Hn?"controlled":"auto"),k.useEffect(function(){Ft&&Zn()},[Ft,Zn]),vd(function(){if(Hn)return tr(Wf(Hn)),void(Sr.current="maxheightprop");var Wr=function(){Vr.current||(Vr.current=requestAnimationFrame(function(){tr(window.innerHeight),Sr.current="window",Vr.current=0}))};return window.addEventListener("resize",Wr),tr(window.innerHeight),Sr.current="window",Zn(),function(){window.removeEventListener("resize",Wr),cancelAnimationFrame(Vr.current)}},[Hn,Zn,Sr]),er})(qn,rn,Ne),Me=ky(nn,{label:"headerHeight",enabled:jr,resizeSourceRef:Ne}),wr=ky(Tt,{label:"contentHeight",enabled:!0,resizeSourceRef:Ne}),An=ky(Pn,{label:"footerHeight",enabled:zt,resizeSourceRef:Ne}),hr=Math.min(bt-Me-An,wr)+Me+An;k.useDebugValue("minHeight: "+hr);var Mr=wr>0;return k.useEffect(function(){Mr&&Sn()},[Mr,Sn]),{maxHeight:bt,minHeight:hr,headerHeight:Me,footerHeight:An}})({contentRef:ae.contentRef,controlledMaxHeight:ae.controlledMaxHeight,footerEnabled:ae.footerEnabled,footerRef:ae.footerRef,headerEnabled:ae.headerEnabled,headerRef:ae.headerRef,registerReady:ae.registerReady,resizeSourceRef:ae.resizeSourceRef}),Ye=We.maxHeight,rt=We.minHeight,it=We.headerHeight,De=We.footerHeight,Xe=(function(Nt,Tt){var qn=[].concat(Nt).map(Wf).reduce(function(nn,rn){return nn.add(Pc(rn,0,Tt)),nn},new Set),zt=Array.from(qn),Pn=Math.min.apply(Math,zt);if(Number.isNaN(Pn))throw new TypeError("minSnap is NaN");var jr=Math.max.apply(Math,zt);if(Number.isNaN(jr))throw new TypeError("maxSnap is NaN");return{snapPoints:zt,minSnap:Pn,maxSnap:jr}})(yt?xe({height:Te.current,footerHeight:De,headerHeight:it,minHeight:rt,maxHeight:Ye}):[0],Ye),fn=Xe.snapPoints,$t=Xe.minSnap,tn=Xe.maxSnap;return k.useDebugValue("minSnap: "+$t+", maxSnap:"+tn),{minSnap:$t,maxSnap:tn,findSnap:function(Nt){var Tt=Wf(typeof Nt=="function"?Nt({footerHeight:De,headerHeight:it,height:Te.current,minHeight:rt,maxHeight:Ye,snapPoints:fn,lastSnap:Ke.current}):Nt);return fn.reduce(function(qn,zt){return Math.abs(zt-Tt)<Math.abs(qn-Tt)?zt:qn},$t)},maxHeight:Ye}})({contentRef:Zt,controlledMaxHeight:x,footerEnabled:!!o,footerRef:Mn,getSnapPoints:M,headerEnabled:u!==!1,headerRef:At,heightRef:en,lastSnapRef:f,ready:Ie,registerReady:X,resizeSourceRef:zn}),Ht=ze.minSnap,Tr=ze.maxSnap,Dr=ze.maxHeight,Qr=ze.findSnap,vt=k.useRef(Dr),on=k.useRef(Ht),$e=k.useRef(Tr),Bt=k.useRef(Qr),Gt=k.useRef(0);vd(function(){vt.current=Dr,$e.current=Tr,on.current=Ht,Bt.current=Qr,Gt.current=Qr(A)},[Qr,A,Dr,Tr,Ht]);var dn=k.useCallback(function(ae){var xe=ae.onRest,Te=ae.config,Ke=(Te=Te===void 0?{}:Te).velocity,yt=Ke===void 0?1:Ke,We=ym(Te,$q),Ye=ym(ae,Kq);return new Promise(function(rt){return we(yr({},Ye,{config:yr({velocity:yt},We,{mass:1,tension:Yq,friction:Math.max(Xf,Xf+(Xf-Xf*yt))}),onRest:function(){var it=[].slice.call(arguments);rt.apply(void 0,it),xe==null||xe.apply(void 0,it)}}))})},[we]),Gi=S7(Hq,{devTools:!1,actions:{onOpenCancel:k.useCallback(function(){return Ae.current==null?void 0:Ae.current({type:"OPEN"})},[]),onSnapCancel:k.useCallback(function(ae){return Ae.current==null?void 0:Ae.current({type:"SNAP",source:ae.snapSource})},[]),onCloseCancel:k.useCallback(function(){return Ae.current==null?void 0:Ae.current({type:"CLOSE"})},[]),onResizeCancel:k.useCallback(function(){return Ae.current==null?void 0:Ae.current({type:"RESIZE",source:zn.current})},[]),onOpenEnd:k.useCallback(function(){return _e.current==null?void 0:_e.current({type:"OPEN"})},[]),onSnapEnd:k.useCallback(function(ae,xe){return _e.current==null?void 0:_e.current({type:"SNAP",source:ae.snapSource})},[]),onResizeEnd:k.useCallback(function(){return _e.current==null?void 0:_e.current({type:"RESIZE",source:zn.current})},[])},context:{initialState:h},services:{onSnapStart:k.useCallback(function(ae,xe){try{return Promise.resolve(ce.current==null?void 0:ce.current({type:"SNAP",source:xe.payload.source||"custom"}))}catch(Te){return Promise.reject(Te)}},[]),onOpenStart:k.useCallback(function(){try{return Promise.resolve(ce.current==null?void 0:ce.current({type:"OPEN"}))}catch(ae){return Promise.reject(ae)}},[]),onCloseStart:k.useCallback(function(){try{return Promise.resolve(ce.current==null?void 0:ce.current({type:"CLOSE"}))}catch(ae){return Promise.reject(ae)}},[]),onResizeStart:k.useCallback(function(){try{return Promise.resolve(ce.current==null?void 0:ce.current({type:"RESIZE",source:zn.current}))}catch(ae){return Promise.reject(ae)}},[]),onSnapEnd:k.useCallback(function(ae,xe){try{return Promise.resolve(_e.current==null?void 0:_e.current({type:"SNAP",source:ae.snapSource}))}catch(Te){return Promise.reject(Te)}},[]),onOpenEnd:k.useCallback(function(){try{return Promise.resolve(_e.current==null?void 0:_e.current({type:"OPEN"}))}catch(ae){return Promise.reject(ae)}},[]),onCloseEnd:k.useCallback(function(){try{return Promise.resolve(_e.current==null?void 0:_e.current({type:"CLOSE"}))}catch(ae){return Promise.reject(ae)}},[]),onResizeEnd:k.useCallback(function(){try{return Promise.resolve(_e.current==null?void 0:_e.current({type:"RESIZE",source:zn.current}))}catch(ae){return Promise.reject(ae)}},[]),renderVisuallyHidden:k.useCallback(function(ae,xe){try{return Promise.resolve(dn({y:Gt.current,ready:0,maxHeight:vt.current,maxSnap:$e.current,minSnap:Gt.current,immediate:!0})).then(function(){})}catch(Te){return Promise.reject(Te)}},[dn]),activate:k.useCallback(function(ae,xe){try{return ie.current=!0,Promise.resolve(Promise.all([ve.current.activate(),an.current.activate(),nt.current.activate()])).then(function(){})}catch(Te){return Promise.reject(Te)}},[nt,an,ve]),deactivate:k.useCallback(function(){try{return ve.current.deactivate(),an.current.deactivate(),nt.current.deactivate(),ie.current=!1,Promise.resolve()}catch(ae){return Promise.reject(ae)}},[nt,an,ve]),openImmediately:k.useCallback(function(){try{return en.current=Gt.current,Promise.resolve(dn({y:Gt.current,ready:1,maxHeight:vt.current,maxSnap:$e.current,minSnap:Gt.current,immediate:!0})).then(function(){})}catch(ae){return Promise.reject(ae)}},[dn]),openSmoothly:k.useCallback(function(){try{return Promise.resolve(dn({y:0,ready:1,maxHeight:vt.current,maxSnap:$e.current,minSnap:Gt.current,immediate:!0})).then(function(){return en.current=Gt.current,Promise.resolve(dn({y:Gt.current,ready:1,maxHeight:vt.current,maxSnap:$e.current,minSnap:Gt.current,immediate:he.current})).then(function(){})})}catch(ae){return Promise.reject(ae)}},[dn,he]),snapSmoothly:k.useCallback(function(ae,xe){try{var Te=Bt.current(ae.y);return en.current=Te,f.current=Te,Promise.resolve(dn({y:Te,ready:1,maxHeight:vt.current,maxSnap:$e.current,minSnap:on.current,immediate:he.current,config:{velocity:ae.velocity}})).then(function(){})}catch(Ke){return Promise.reject(Ke)}},[dn,f,he]),resizeSmoothly:k.useCallback(function(){try{var ae=Bt.current(en.current);return en.current=ae,f.current=ae,Promise.resolve(dn({y:ae,ready:1,maxHeight:vt.current,maxSnap:$e.current,minSnap:on.current,immediate:zn.current!=="element"||he.current})).then(function(){})}catch(xe){return Promise.reject(xe)}},[dn,f,he]),closeSmoothly:k.useCallback(function(ae,xe){try{return dn({minSnap:en.current,immediate:!0}),en.current=0,Promise.resolve(dn({y:0,maxHeight:vt.current,maxSnap:$e.current,immediate:he.current})).then(function(){return Promise.resolve(dn({ready:0,immediate:!0})).then(function(){})})}catch(Te){return Promise.reject(Te)}},[dn,he])}}),$s=Gi[0],Fn=Gi[1];k.useEffect(function(){Ie&&Fn(d?"OPEN":"CLOSE")},[d,Fn,Ie]),vd(function(){(Dr||Tr||Ht)&&Fn("RESIZE")},[Dr,Tr,Ht,Fn]),k.useEffect(function(){return function(){ve.current.deactivate(),an.current.deactivate(),nt.current.deactivate()}},[nt,an,ve]),k.useImperativeHandle(e,function(){return{snapTo:function(ae,xe){var Te=xe===void 0?{}:xe,Ke=Te.velocity,yt=Ke===void 0?1:Ke,We=Te.source,Ye=We===void 0?"custom":We;Fn("SNAP",{payload:{y:Bt.current(ae),velocity:yt,source:Ye}})},get height(){return en.current}}},[Fn]),k.useEffect(function(){var ae=qe.current,xe=function(Ke){Ut.current&&Ke.preventDefault()},Te=function(Ke){ae.scrollTop<0&&(requestAnimationFrame(function(){ae.style.overflow="hidden",ae.scrollTop=0,ae.style.removeProperty("overflow")}),Ke.preventDefault())};return L&&(ae.addEventListener("scroll",xe),ae.addEventListener("touchmove",xe),ae.addEventListener("touchstart",Te)),function(){ae.removeEventListener("scroll",xe),ae.removeEventListener("touchmove",xe),ae.removeEventListener("touchstart",Te)}},[L,qe]);var Jn=QF(function(ae){var xe=ae.args,Te=(xe=xe===void 0?[]:xe)[0],Ke=(Te=Te===void 0?{}:Te).closeOnTap,yt=Ke!==void 0&&Ke,We=Te.isContentDragging,Ye=We!==void 0&&We,rt=ae.cancel,it=ae.direction[1],De=ae.down,Xe=ae.first,fn=ae.last,$t=ae.memo,tn=$t===void 0?fe.y.getValue():$t,Nt=ae.tap,Tt=ae.velocity,qn=-1*ae.movement[1];if(!ie.current)return rt(),tn;if(b&&yt&&Nt)return rt(),setTimeout(function(){return b()},0),tn;if(Nt)return tn;var zt=tn+qn,Pn=qn*Tt,jr=Math.max(on.current,Math.min($e.current,zt+2*Pn));if(!De&&b&&it>0&&zt+Pn<on.current/2)return rt(),b(),tn;var nn=De?b||on.current!==$e.current?fd(zt,b?0:on.current,$e.current,.55):zt<on.current?fd(zt,on.current,2*$e.current,.55):fd(zt,on.current/2,$e.current,.55):jr;return L&&Ye?(nn>=$e.current&&(nn=$e.current),tn===$e.current&&qe.current.scrollTop>0&&(nn=$e.current),Ut.current=nn<$e.current):Ut.current=!1,Xe&&Fn("DRAG"),fn?(Fn("SNAP",{payload:{y:nn,velocity:Tt>.05?Tt:1,source:"dragging"}}),tn):(we({y:nn,ready:1,maxHeight:vt.current,maxSnap:$e.current,minSnap:on.current,immediate:!0,config:{velocity:Tt}}),tn)},{filterTaps:!0});if(Number.isNaN($e.current))throw new TypeError("maxSnapRef is NaN!!");if(Number.isNaN(on.current))throw new TypeError("minSnapRef is NaN!!");var hn=(function(ae){var xe,Te=ae.spring,Ke=Hl([Te.y,Te.maxHeight],function(De,Xe){return Math.round(Pc(Xe-De,0,16))+"px"}),yt=Hl([Te.y,Te.minSnap,Te.maxSnap],function(De,Xe,fn){return Pc(De,Xe,fn)+"px"}),We=Hl([Te.y,Te.minSnap,Te.maxSnap],function(De,Xe,fn){return De<Xe?Xe-De+"px":De>fn?fn-De+"px":"0px"}),Ye=Hl([Te.y,Te.maxSnap],function(De,Xe){return De>=Xe?Math.ceil(De-Xe):0}),rt=Hl([Te.y,Te.minSnap],function(De,Xe){if(!Xe)return 0;var fn=Math.max(Xe/2-45,0);return Pc((De-fn)*(1/(Math.min(Xe/2+45,Xe)-fn)+0),0,1)}),it=Hl([Te.y,Te.minSnap],function(De,Xe){return Xe?Pc(De/Xe,0,1):0});return(xe={})["--rsbs-content-opacity"]=rt,xe["--rsbs-backdrop-opacity"]=it,xe["--rsbs-antigap-scale-y"]=Ye,xe["--rsbs-overlay-translate-y"]=We,xe["--rsbs-overlay-rounded"]=Ke,xe["--rsbs-overlay-h"]=yt,xe})({spring:fe});return Ln.createElement(hF.div,yr({},D,{"data-rsbs-root":!0,"data-rsbs-state":Wq.find($s.matches),"data-rsbs-is-blocking":O,"data-rsbs-is-dismissable":!!b,"data-rsbs-has-header":!!u,"data-rsbs-has-footer":!!o,className:s,ref:je,style:yr({},hn,G,{opacity:fe.ready})}),r,O&&Ln.createElement("div",yr({key:"backdrop","data-rsbs-backdrop":!0},Jn({closeOnTap:!0}))),Ln.createElement("div",{key:"overlay","aria-modal":"true",role:"dialog","data-rsbs-overlay":!0,tabIndex:-1,ref:Bn,onKeyDown:function(ae){ae.key==="Escape"&&(ae.stopPropagation(),b&&b())}},u!==!1&&Ln.createElement("div",yr({key:"header","data-rsbs-header":!0,ref:At},Jn()),u),Ln.createElement("div",yr({key:"scroll","data-rsbs-scroll":!0,ref:qe},L?Jn({isContentDragging:!0}):{}),Ln.createElement("div",{"data-rsbs-content":!0,ref:Zt},n)),o&&Ln.createElement("div",yr({key:"footer",ref:Mn,"data-rsbs-footer":!0},Jn()),o)))}),Wq=["closed","opening","open","closing","dragging","snapping","resizing"];function Xq(t){var e=t.lastSnap;return e??Math.min.apply(Math,t.snapPoints)}function Jq(t){return t.minHeight}var Zq=["onSpringStart","onSpringEnd","skipInitialTransition"],ao=k.forwardRef(function(t,e){var n=t.onSpringStart,r=t.onSpringEnd,s=t.skipInitialTransition,o=ym(t,Zq),u=k.useState(!1),d=u[0],h=u[1],f=k.useRef(),v=k.useRef(null),b=k.useRef(s&&o.open?"OPEN":"CLOSED");vd(function(){if(o.open)return cancelAnimationFrame(f.current),h(!0),function(){b.current="CLOSED"}},[o.open]);var x=k.useCallback(function(A){return Promise.resolve(n==null?void 0:n(A)).then(function(){A.type==="OPEN"&&cancelAnimationFrame(f.current)})},[n]),_=k.useCallback(function(A){return Promise.resolve(r==null?void 0:r(A)).then(function(){A.type==="CLOSE"&&(f.current=requestAnimationFrame(function(){return h(!1)}))})},[r]);return d?Ln.createElement(xz,{"data-rsbs-portal":!0},Ln.createElement(Qq,yr({},o,{lastSnapRef:v,ref:e,initialState:b.current,onSpringStart:x,onSpringEnd:_}))):null});const eH=({item:t,clothingSets:e,onClose:n,onUpdate:r,onGenerateFrom:s,onRemoveSet:o,onDelete:u,getItemWearCount:d})=>{const[h,f]=k.useState({analysis:t.analysis,category:t.category,subcategory:t.subcategory,color:t.color,material:t.material}),[v,b]=k.useState(!1),[x,_]=k.useState(window.innerWidth<768),[A,R]=k.useState(!1),[M,U]=k.useState(!1),O=document.documentElement.classList.contains("dark"),B=e.find(D=>D.itemIds.includes(t.id));k.useEffect(()=>{f({analysis:t.analysis,category:t.category,subcategory:t.subcategory,color:t.color,material:t.material}),R(!1),requestAnimationFrame(()=>{requestAnimationFrame(()=>{R(!0)})})},[t]),k.useEffect(()=>{const D=()=>_(window.innerWidth<768);return window.addEventListener("resize",D),()=>window.removeEventListener("resize",D)},[]),k.useEffect(()=>{if(!x){const D=pe=>{pe.key==="Escape"&&n()};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)}},[x,n]);const H=D=>{const{name:pe,value:Ie}=D.target;f(X=>({...X,[pe]:Ie}))},G=D=>{D.preventDefault(),r({...t,...h}),b(!0),setTimeout(()=>{b(!1)},2e3)},q=()=>{U(!0)},C=()=>{u(t.id),U(!1),n()},S=()=>{U(!1)},N=D=>{D.stopPropagation(),r({...t,isFavorite:!t.isFavorite})},P=D=>{D.stopPropagation(),r({...t,isExcluded:!t.isExcluded})},V=g.jsxs("div",{className:"bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[g.jsx("div",{className:"relative px-4 pt-2 pb-4",children:g.jsx("img",{src:t.imageSrc,alt:t.analysis,className:"w-full h-auto max-h-[40vh] object-contain rounded-lg"})}),g.jsxs("form",{onSubmit:G,className:"p-6",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"analysis",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Description"}),g.jsx("textarea",{id:"analysis",name:"analysis",value:h.analysis,onChange:H,rows:3,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Catgorie"}),g.jsx("select",{id:"category",name:"category",value:h.category,onChange:H,className:"mt-1 w-full appearance-none px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow",children:["Hauts","Bas","Chaussures","Accessoires"].map(D=>g.jsx("option",{value:D,children:D},D))})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Couleur"}),g.jsx("input",{type:"text",id:"color",name:"color",value:h.color,onChange:H,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"material",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Matire"}),g.jsx("input",{type:"text",id:"material",name:"material",value:h.material,onChange:H,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]})]}),g.jsxs("div",{children:[g.jsxs("label",{htmlFor:"subcategory",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:["Type de ",h.category==="Hauts"?"haut":h.category==="Bas"?"bas":h.category==="Chaussures"?"chaussure":"accessoire"]}),g.jsxs("select",{id:"subcategory",name:"subcategory",value:h.subcategory||"",onChange:H,className:"mt-1 w-full appearance-none px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow",children:[g.jsx("option",{value:"",children:"-- Slectionner --"}),h.category==="Hauts"&&g.jsxs(g.Fragment,{children:[g.jsx("option",{value:"T-shirts",children:"T-shirts"}),g.jsx("option",{value:"Chemises",children:"Chemises"}),g.jsx("option",{value:"Pulls",children:"Pulls"}),g.jsx("option",{value:"Vestes",children:"Vestes"})]}),h.category==="Bas"&&g.jsxs(g.Fragment,{children:[g.jsx("option",{value:"Pantalons",children:"Pantalons"}),g.jsx("option",{value:"Shorts",children:"Shorts"}),g.jsx("option",{value:"Shorts sportifs",children:"Shorts sportifs"})]}),h.category==="Chaussures"&&g.jsxs(g.Fragment,{children:[g.jsx("option",{value:"Sneakers",children:"Sneakers"}),g.jsx("option",{value:"Classiques",children:"Classiques"}),g.jsx("option",{value:"Bottines",children:"Bottines"})]}),h.category==="Accessoires"&&g.jsxs(g.Fragment,{children:[g.jsx("option",{value:"Montres & Bijoux",children:"Montres & Bijoux"}),g.jsx("option",{value:"charpes & Foulards",children:"charpes & Foulards"}),g.jsx("option",{value:"Ceintures",children:"Ceintures"}),g.jsx("option",{value:"Lunettes",children:"Lunettes"}),g.jsx("option",{value:"Chapeaux",children:"Chapeaux"}),g.jsx("option",{value:"Sacs",children:"Sacs"})]})]})]}),g.jsx("div",{className:"bg-gradient-to-r from-gold/5 to-gold-dark/5 dark:from-gold/10 dark:to-gold-dark/10 p-3 rounded-lg border border-gold/20",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-xs font-semibold text-gold dark:text-gold-light uppercase tracking-wider",children:"Statistique"}),g.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 mt-1",children:["Port ",g.jsx("span",{className:"font-bold text-lg text-gold",children:d(t.id)})," fois ces 30 derniers jours"]})]}),g.jsx("div",{className:"text-3xl",children:""})]})}),B&&g.jsxs("div",{className:"bg-gold/10 dark:bg-gold/20 p-3 rounded-lg flex items-center justify-between gap-4",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-xs font-semibold text-gold uppercase tracking-wider",children:"Fait partie de l'ensemble"}),g.jsx("p",{className:"font-medium text-onyx dark:text-snow truncate",title:B.name,children:B.name})]}),g.jsxs("button",{type:"button",onClick:()=>{o(B.id),n()},className:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white dark:bg-onyx text-rose-500 border border-rose-500/50 rounded-md hover:bg-rose-500 hover:text-white transition-colors",title:"Dissocier l'ensemble",children:[g.jsx(O6,{}),g.jsx("span",{children:"Dissocier"})]})]})]}),g.jsxs("div",{className:"mt-6 pt-4 border-t border-black/10 dark:border-white/10 flex flex-col sm:flex-row gap-3 justify-between",children:[g.jsxs("button",{type:"button",onClick:q,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2.5 bg-red-500/10 text-red-500 font-bold rounded-lg hover:bg-red-500/20 transition-all duration-300",children:[g.jsx(zm,{}),"Supprimer"]}),g.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[g.jsxs("button",{type:"button",onClick:()=>s(t),className:"w-full sm:w-auto flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300",children:[g.jsx(Cd,{}),"Crer une tenue"]}),g.jsx("button",{type:"submit",disabled:v,className:`w-full sm:w-auto px-6 py-2.5 font-bold rounded-lg transition-all duration-300 flex items-center justify-center gap-2 ${v?"bg-green-600 text-white cursor-not-allowed":"bg-gold text-onyx hover:bg-gold-dark"}`,children:v?g.jsxs(g.Fragment,{children:[g.jsx($b,{}),"Enregistr !"]}):"Enregistrer"})]})]})]})]}),L=M?ON.createPortal(g.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center p-4 transition-opacity duration-200",style:{zIndex:999999,pointerEvents:"auto"},onClick:S,children:g.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-md w-full p-6 transform transition-all duration-200 scale-100",onClick:D=>D.stopPropagation(),children:[g.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[g.jsx("img",{src:t.imageSrc,alt:t.analysis,className:"w-20 h-20 object-cover rounded-lg flex-shrink-0"}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("h3",{className:"text-lg font-bold text-raisin-black dark:text-snow mb-1",children:"Supprimer cet article ?"}),g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:t.analysis})]})]}),g.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:g.jsxs("div",{className:"flex items-start gap-3",children:[g.jsx("svg",{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),g.jsxs("div",{className:"flex-1",children:[g.jsx("p",{className:"text-sm font-semibold text-red-800 dark:text-red-300 mb-1",children:"Cette action est irrversible"}),g.jsx("p",{className:"text-xs text-red-700 dark:text-red-400",children:"L'article sera dfinitivement supprim de votre garde-robe et ne pourra pas tre rcupr."})]})]})}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{onClick:D=>{D.stopPropagation(),S()},className:"flex-1 px-4 py-2.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 font-semibold rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:"Annuler"}),g.jsx("button",{onClick:D=>{D.stopPropagation(),C()},className:"flex-1 px-4 py-2.5 bg-red-600 text-white font-bold rounded-lg hover:bg-red-700 transition-colors shadow-lg shadow-red-500/30",children:"Supprimer"})]})]})}),document.body):null;return x?g.jsxs(g.Fragment,{children:[g.jsx(ao,{open:!!t&&!M,onDismiss:n,className:O?"dark":"",header:g.jsxs("div",{className:"flex items-center justify-between w-full px-4 py-2",children:[g.jsx("h2",{className:"text-lg font-bold text-raisin-black dark:text-snow",children:"Dtails de l'article"}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("button",{onClick:P,className:`p-1.5 rounded-full transition-colors ${t.isExcluded?"bg-gray-500/20 text-gray-700 dark:text-gray-300":"hover:bg-gray-100 dark:hover:bg-gray-800"}`,"aria-label":t.isExcluded?"Inclure dans les suggestions":"Exclure des suggestions",title:t.isExcluded?"Inclure dans les suggestions":"Ne pas suggrer cet article",children:g.jsx(u0,{className:"w-6 h-6"})}),g.jsx("button",{onClick:N,className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors","aria-label":"Ajouter aux favoris",children:t.isFavorite?g.jsx(yu,{className:"w-6 h-6 text-red-500"}):g.jsx(Fm,{className:"w-6 h-6"})})]})]}),defaultSnap:({maxHeight:D})=>D*.85,snapPoints:({maxHeight:D})=>[D*.5,D*.85,D*.95],children:V}),L]}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:`fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 transition-opacity duration-200 ${A?"opacity-100":"opacity-0"}`,style:M?{pointerEvents:"none"}:void 0,onClick:n,children:g.jsxs("div",{className:`relative bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto transition-all duration-200 ${A?"opacity-100 scale-100":"opacity-0 scale-95"}`,style:M?{pointerEvents:"none"}:void 0,onClick:D=>D.stopPropagation(),children:[g.jsxs("div",{className:"sticky top-0 bg-white dark:bg-raisin-black border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between z-10",children:[g.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:"Dtails de l'article"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:P,className:`p-2 rounded-full transition-colors ${t.isExcluded?"bg-gray-500/20 text-gray-700 dark:text-gray-300":"hover:bg-gray-100 dark:hover:bg-gray-800"}`,"aria-label":t.isExcluded?"Inclure dans les suggestions":"Exclure des suggestions",title:t.isExcluded?"Inclure dans les suggestions":"Ne pas suggrer cet article",children:g.jsx(u0,{className:"w-6 h-6"})}),g.jsx("button",{onClick:N,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors","aria-label":"Ajouter aux favoris",children:t.isFavorite?g.jsx(yu,{className:"w-6 h-6 text-red-500"}):g.jsx(Fm,{className:"w-6 h-6"})}),g.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors","aria-label":"Fermer",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),V]})}),L]})},Ik=({clothingItems:t,clothingSets:e,onGeneratePlan:n,isGenerating:r})=>{const[s,o]=k.useState(3),[u,d]=k.useState(""),[h,f]=k.useState(""),v=b=>{b.preventDefault();const x=u||"",_=h?parseFloat(h):void 0;x.trim()&&s>0&&n(s,x,_)};return g.jsxs("form",{onSubmit:v,className:"space-y-6",children:[g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 items-end",children:[g.jsxs("div",{className:"sm:col-span-1",children:[g.jsx("label",{htmlFor:"days",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Dure (jours)"}),g.jsx("input",{id:"days",type:"number",value:s,onChange:b=>o(parseInt(b.target.value,10)||1),min:"1",max:"30",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:r,required:!0})]}),g.jsxs("div",{className:"sm:col-span-1",children:[g.jsx("label",{htmlFor:"weight",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Poids max (kg)"}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{id:"weight",type:"number",value:h,onChange:b=>f(b.target.value),placeholder:"Optionnel",min:"1",max:"50",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:r}),g.jsx("span",{className:"absolute right-3 top-3.5 text-gray-400 text-sm",children:"kg"})]})]}),g.jsxs("div",{className:"sm:col-span-2",children:[g.jsx("label",{htmlFor:"vacation-context",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Destination / Mto"}),g.jsx("input",{id:"vacation-context",type:"text",value:u,onChange:b=>d(b.target.value),placeholder:"Ex: Weekend  Rome, temps doux",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center sm:text-left",disabled:r,required:!0})]})]}),g.jsxs("button",{type:"submit",disabled:r||!(u||"").trim()||s<=0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[g.jsx(ZR,{}),r?"Analyse du poids...":"Gnrer la valise"]}),g.jsx("div",{className:"text-center mt-2",children:g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:" Gnration : 30-60 secondes (selon la taille de votre garde-robe)"})})]})},Nk=({plan:t,allClothingItems:e,allClothingSets:n})=>{const r=s=>{const{id:o,description:u}=s;let d=e.find(f=>f.id===o);if(d)return d;let h=n.find(f=>f.id===o);if(h)return h;if(d=e.find(f=>f.analysis===o),d||(d=e.find(f=>f.analysis===u),d))return d};return g.jsx("div",{className:"mt-10",children:g.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5",children:[g.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:t.titre}),g.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:t.resume}),g.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:t.valise.map((s,o)=>{const u=r(s),d=u?u.imageSrc:null;return g.jsxs("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden relative group",title:s.description,children:[d?g.jsx("img",{src:d,alt:s.description,className:"w-full h-full object-cover"}):g.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:g.jsx(JR,{})}),g.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center p-2",children:g.jsx("p",{className:"text-white text-xs text-center line-clamp-3",children:s.description})})]},o)})}),g.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:t.valise.map((s,o)=>g.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:s.description},o))})]})})},tH=({onFilesSelected:t,isAnalyzing:e,isOtherModalOpen:n})=>{const[r,s]=k.useState(!1),o=k.useRef(null),u=k.useRef(null),d=b=>{const x=Array.from(b.target.files||[]);x.length>0&&(t(x),s(!1)),b.target.value=""},h=()=>{s(!r)},f=()=>{var b;(b=o.current)==null||b.click()},v=()=>{var b;(b=u.current)==null||b.click()};return n?null:g.jsxs(g.Fragment,{children:[g.jsx("input",{ref:o,type:"file",accept:"image/*",capture:"environment",multiple:!0,onChange:d,className:"hidden"}),g.jsx("input",{ref:u,type:"file",accept:"image/*",multiple:!0,onChange:d,className:"hidden"}),r&&g.jsx("div",{className:"md:hidden fixed inset-0 z-30",onClick:()=>s(!1)}),g.jsxs("div",{className:"md:hidden fixed bottom-24 right-6 z-40",children:[g.jsxs("div",{className:`absolute bottom-20 right-0 transition-all duration-300 origin-bottom-right ${r?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-75 translate-y-4 pointer-events-none"}`,children:[g.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl border border-black/10 dark:border-white/10 overflow-hidden w-56",children:[g.jsxs("button",{type:"button",onClick:f,className:"w-full flex items-center gap-3 p-4 hover:bg-gold/10 active:bg-gold/20 transition-colors cursor-pointer border-b border-black/5 dark:border-white/5 text-left",children:[g.jsx("div",{className:"w-10 h-10 bg-gold rounded-full flex items-center justify-center flex-shrink-0",children:g.jsxs("svg",{className:"w-5 h-5 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),g.jsxs("div",{children:[g.jsx("p",{className:"font-semibold text-sm",children:"Appareil Photo"}),g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Prendre une photo"})]})]}),g.jsxs("button",{type:"button",onClick:v,className:"w-full flex items-center gap-3 p-4 hover:bg-gray-100 dark:hover:bg-gray-800 active:bg-gray-200 dark:active:bg-gray-700 transition-colors cursor-pointer text-left",children:[g.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center flex-shrink-0",children:g.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),g.jsxs("div",{children:[g.jsx("p",{className:"font-semibold text-sm",children:"Galerie"}),g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Choisir des photos"})]})]})]}),g.jsx("div",{className:"absolute -bottom-2 right-6 w-4 h-4 bg-white dark:bg-raisin-black rotate-45 border-r border-b border-black/10 dark:border-white/10"})]}),g.jsx("button",{onClick:h,disabled:e,className:`
            relative w-16 h-16 
            bg-gradient-to-r from-gold to-gold-dark text-onyx 
            rounded-full shadow-2xl 
            transition-all duration-300 ease-out
            flex items-center justify-center
            disabled:opacity-50 disabled:cursor-not-allowed 
            active:scale-90
            ${r?"rotate-45 shadow-gold/50 ring-4 ring-gold/30":"rotate-0 hover:scale-105 hover:shadow-gold/30"}
          `,"aria-label":r?"Fermer le menu":"Ajouter un vtement",children:e?g.jsxs("svg",{className:"animate-spin h-8 w-8",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):g.jsx("svg",{className:"w-8 h-8 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]})]})},nH=({onAnalyzeWardrobe:t,onCancelWardrobeAnalysis:e,onScrollToOutfits:n,onScrollToVacation:r,onShowSets:s,onShowFavorites:o,onShowWornOutfits:u,isAnalyzingWardrobe:d,clothingCount:h,favoriteOutfitCount:f,wornOutfitCount:v,setsCount:b})=>g.jsxs("div",{className:"space-y-4 pb-24",children:[g.jsxs("div",{className:"text-center py-6",children:[g.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:[g.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),g.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[h," vtement",h>1?"s":""," dans votre collection"]})]}),g.jsxs("div",{className:"space-y-3 px-4",children:[h>=3&&g.jsxs("div",{className:"w-full bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-2xl p-5 transition-all",children:[g.jsx("button",{onClick:t,disabled:d,className:"w-full text-left disabled:opacity-70",children:g.jsxs("div",{className:"flex items-start gap-4",children:[g.jsx("div",{className:"w-12 h-12 bg-gold rounded-xl flex items-center justify-center flex-shrink-0",children:d?g.jsxs("svg",{className:"animate-spin h-6 w-6 text-onyx",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):g.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h3",{className:"text-lg font-bold mb-1",children:" Analyser ma garde-robe"}),g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:d?"Analyse en cours...":"Dcouvrez quelles pices acheter pour plus de polyvalence"}),!d&&g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:" ~30 secondes"})]})]})}),d&&g.jsx("button",{onClick:e,className:"mt-3 w-full py-2 px-4 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-red-100 hover:text-red-600 dark:hover:bg-red-900/30 dark:hover:text-red-400 transition-all text-sm font-medium",children:"Annuler l'analyse"})]}),g.jsx("button",{onClick:n,className:"w-full bg-gradient-to-r from-purple-500/10 to-pink-500/10 border-2 border-purple-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:g.jsxs("div",{className:"flex items-start gap-4",children:[g.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center flex-shrink-0",children:g.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h3",{className:"text-lg font-bold mb-1",children:" Crateur de Tenues"}),g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Gnrez des looks personnaliss avec l'IA"}),g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:" 30-60 secondes"})]})]})}),g.jsx("button",{onClick:r,className:"w-full bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border-2 border-blue-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:g.jsxs("div",{className:"flex items-start gap-4",children:[g.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center flex-shrink-0",children:g.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h3",{className:"text-lg font-bold mb-1",children:" Planificateur de Valise"}),g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Prparez votre valise optimale pour votre voyage"}),g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:" 30-60 secondes"})]})]})})]}),g.jsx("div",{className:"px-4 pt-6",children:g.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-2xl p-4",children:[g.jsx("h4",{className:"font-semibold mb-3 text-sm text-gray-600 dark:text-gray-400",children:"Aperu rapide"}),g.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[g.jsxs("button",{onClick:u,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[g.jsx("div",{className:"text-blue-500",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),g.jsx("p",{className:"text-2xl font-bold",children:v}),g.jsx("p",{className:"text-xs text-gray-500 mt-0.5 font-medium",children:"Portes (7j)"})]}),g.jsxs("button",{onClick:s,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[g.jsx("div",{className:"text-green-500",children:g.jsx(Ou,{})}),g.jsx("p",{className:"text-2xl font-bold",children:b}),g.jsx("p",{className:"text-xs text-gray-500 mt-0.5 font-medium",children:"Ensembles"})]}),g.jsxs("button",{onClick:o,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[g.jsx("div",{className:"text-red-500",children:g.jsx(Fm,{})}),g.jsx("p",{className:"text-2xl font-bold",children:f}),g.jsx("p",{className:"text-xs text-gray-500 mt-0.5 font-medium",children:"Favorites"})]})]})]})})]}),rH=({activeTab:t,onTabChange:e,counts:n})=>{const r=[{id:"home",label:"Home",icon:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),count:null},{id:"hauts",label:"Hauts",icon:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),count:n.hauts},{id:"bas",label:"Bas",icon:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),count:n.bas},{id:"chaussures",label:"Chaussures",icon:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5"})}),count:n.chaussures},{id:"accessoires",label:"Accessoires",icon:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),count:n.accessoires}];return g.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-raisin-black border-t border-black/10 dark:border-white/10 z-30 pb-8",children:g.jsx("div",{className:"flex justify-around items-center h-16",children:r.map(s=>{const o=t===s.id;return g.jsxs("button",{onClick:()=>e(s.id),className:`flex flex-col items-center justify-center gap-1 px-3 py-2 transition-all flex-1 ${o?"text-gold":"text-gray-500 dark:text-gray-400"}`,children:[g.jsxs("div",{className:"relative",children:[s.icon,s.count!==null&&s.count>0&&g.jsx("span",{className:`absolute -top-1 -right-1 text-[10px] font-bold px-1.5 py-0.5 rounded-full ${o?"bg-gold text-onyx":"bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300"}`,children:s.count})]}),g.jsx("span",{className:`text-xs font-medium ${o?"font-bold":""}`,children:s.label})]},s.id)})})})},iH=({analysis:t,onClose:e})=>{if(!t)return null;const n={high:"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20",medium:"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 border-yellow-500/20",low:"bg-green-500/10 text-green-600 dark:text-green-400 border-green-500/20"},r={high:"Priorit haute",medium:"Priorit moyenne",low:"Bonne ide"};return g.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:g.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[g.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-gold to-gold-dark p-6 rounded-t-2xl",children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("h2",{className:"text-2xl font-serif font-bold text-onyx",children:" Suggestions d'Achats"}),g.jsx("button",{onClick:e,className:"p-2 hover:bg-black/10 rounded-full transition",children:g.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),g.jsxs("div",{className:"p-6 space-y-6",children:[g.jsxs("div",{className:"bg-gold/5 border border-gold/20 rounded-xl p-4",children:[g.jsx("h3",{className:"font-semibold text-lg mb-2",children:" Analyse de votre garde-robe"}),g.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:t.summary})]}),g.jsxs("div",{children:[g.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[g.jsx("span",{className:"text-green-500",children:""})," Points forts"]}),g.jsx("div",{className:"grid gap-2",children:t.strengths.map((s,o)=>g.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[g.jsx("span",{className:"text-green-500 mt-0.5",children:""}),g.jsx("span",{children:s})]},o))})]}),g.jsxs("div",{children:[g.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[g.jsx("span",{className:"text-orange-500",children:""})," Opportunits d'amlioration"]}),g.jsx("div",{className:"grid gap-2",children:t.gaps.map((s,o)=>g.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[g.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),g.jsx("span",{children:s})]},o))})]}),g.jsxs("div",{children:[g.jsxs("h3",{className:"font-semibold text-xl mb-4 flex items-center gap-2",children:[g.jsx("span",{children:""})," Pices recommandes"]}),g.jsx("div",{className:"grid gap-4",children:t.suggestions.map((s,o)=>g.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-xl p-5 hover:shadow-lg transition-shadow",children:[g.jsxs("div",{className:"flex justify-between items-start mb-3",children:[g.jsxs("div",{children:[g.jsx("h4",{className:"font-bold text-lg",children:s.description}),g.jsx("p",{className:"text-sm text-gray-500",children:s.category})]}),g.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${n[s.priority]}`,children:r[s.priority]})]}),g.jsxs("p",{className:"text-sm mb-3 text-gray-700 dark:text-gray-300",children:[g.jsx("span",{className:"font-semibold",children:"Pourquoi ?"})," ",s.reason]}),g.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.estimatedPrice&&g.jsxs("div",{className:"flex items-center gap-2 text-sm text-gold font-semibold",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.estimatedPrice]}),g.jsxs("a",{href:`https://www.google.com/search?q=${encodeURIComponent(s.searchQuery+" achat en ligne")}&tbm=shop`,target:"_blank",rel:"noopener noreferrer",className:"ml-auto inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white text-sm font-semibold rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all shadow-sm hover:shadow-md",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Rechercher en ligne"]})]})]},o))})]})]})]})})},sH=({open:t,clothingItems:e,clothingSets:n,onGenerate:r,isGenerating:s,suggestedOutfits:o,onClose:u,weatherInfo:d,weatherError:h,favoriteOutfits:f,onToggleFavorite:v,onGenerateVisual:b,generatingVisualFor:x,selectedOutfit:_,onSelectOutfit:A,anchorItem:R,onClearAnchor:M,onGenerateVariants:U,onOpenChat:O})=>{const B=document.documentElement.classList.contains("dark"),H=k.useRef(null);return k.useEffect(()=>{!s&&o.length>0&&H.current&&H.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[s,o.length]),g.jsx(ao,{open:t,onDismiss:u,className:B?"dark":"",header:g.jsxs("div",{className:"flex items-center justify-between w-full",children:[g.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Crateur de Tenues"}),g.jsx("button",{onClick:u,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:G})=>G*.75,snapPoints:({minHeight:G,maxHeight:q})=>[G,q*.75,q*.9],children:g.jsxs("div",{className:"p-6 space-y-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[g.jsx(kN,{clothingItems:e,clothingSets:n,onGenerate:r,isGenerating:s,weatherInfo:d,weatherError:h,anchorItem:R,onClearAnchor:M}),s&&g.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[g.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),g.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"L'IA compose vos tenues..."})]}),g.jsx("div",{ref:H,children:o.length>0&&g.jsx(lu,{outfits:o,allClothingItems:e,allClothingSets:n,favoriteOutfits:f,onToggleFavorite:v,onGenerateVisual:b,generatingVisualFor:x,selectedOutfit:_,onSelectOutfit:A,onGenerateVariants:U,isGenerating:s,onOpenChat:O})})]})})},aH=({open:t,clothingItems:e,clothingSets:n,onGeneratePlan:r,isGenerating:s,vacationPlan:o,onCreateSet:u,onClose:d})=>{const h=document.documentElement.classList.contains("dark");return g.jsx(ao,{open:t,onDismiss:d,className:h?"dark":"",header:g.jsxs("div",{className:"flex items-center justify-between w-full",children:[g.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Planificateur de Valise"}),g.jsx("button",{onClick:d,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:f})=>f*.7,snapPoints:({maxHeight:f})=>[f*.7,f*.9],children:g.jsxs("div",{className:"p-6 space-y-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow min-h-[45vh]",children:[g.jsx(Ik,{clothingItems:e,clothingSets:n,onGeneratePlan:r,isGenerating:s}),s&&g.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[g.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),g.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"Prparation de votre valise..."})]}),o&&g.jsx(Nk,{plan:o,allClothingItems:e,allClothingSets:n,onCreateSet:u})]})})},oH=({open:t,clothingItems:e,clothingSets:n,onClose:r,onCreateSet:s})=>{const[o,u]=k.useState(new Set),d=new Set(n.flatMap(_=>_.itemIds)),f=e.filter(_=>!d.has(_.id)).reduce((_,A)=>(_[A.category]||(_[A.category]=[]),_[A.category].push(A),_),{}),v=_=>{u(A=>{const R=new Set(A);return R.has(_)?R.delete(_):R.add(_),R})},b=()=>{if(o.size<2){alert("Veuillez slectionner au moins 2 articles.");return}const _=window.prompt("Donnez un nom  cet ensemble :");_&&s(_,Array.from(o))},x=document.documentElement.classList.contains("dark");return g.jsx(ao,{open:t,onDismiss:r,className:x?"dark":"",header:g.jsxs("div",{className:"flex items-center justify-between w-full",children:[g.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Crer un ensemble"}),g.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),footer:o.size>0&&g.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 bg-white dark:bg-raisin-black",children:g.jsxs("button",{onClick:b,disabled:o.size<2,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600",children:[g.jsx(Ou,{}),"Lier ",o.size," article",o.size>1?"s":""]})}),defaultSnap:({maxHeight:_})=>_*.6,snapPoints:({maxHeight:_})=>[_*.6,_*.85],children:g.jsxs("div",{className:"p-4 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[g.jsx("p",{className:"text-sm text-center text-gray-500 dark:text-gray-400 mb-4",children:"Slectionnez les articles que vous souhaitez lier (ex: une veste et son pantalon)."}),g.jsx("div",{className:"space-y-4",children:Object.keys(f).map(_=>f[_].length>0&&g.jsxs("div",{children:[g.jsx("h3",{className:"font-semibold text-lg mb-2",children:_}),g.jsx("div",{className:"grid grid-cols-3 gap-3",children:f[_].map(A=>{const R=o.has(A.id);return g.jsxs("button",{onClick:()=>v(A.id),className:"relative rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform border-2",style:{borderColor:R?"#D4AF37":"transparent"},children:[R&&g.jsx("div",{className:"absolute top-1 right-1 p-0.5 bg-gold rounded-full text-onyx z-10",children:g.jsx($b,{})}),g.jsx("div",{className:"aspect-square",children:g.jsx("img",{src:A.imageSrc,alt:A.analysis,className:"w-full h-full object-cover"})}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),g.jsx("p",{className:"absolute bottom-1 left-1 right-1 text-white text-xs font-medium line-clamp-2 p-1",children:A.analysis})]},A.id)})})]},_))})]})})},lH=({open:t,onClose:e,clothingSets:n,clothingItems:r,onCreateNewSet:s,onDeleteSet:o})=>{const u=document.documentElement.classList.contains("dark"),[d,h]=k.useState(null),f=x=>r.find(_=>_.id===x),v=x=>x.itemIds.map(_=>f(_)).filter(_=>_!==void 0),b=x=>{window.confirm("Voulez-vous vraiment supprimer cet ensemble ?")&&o&&o(x)};return g.jsx(ao,{open:t,onDismiss:e,className:u?"dark":"",header:g.jsxs("div",{className:"flex items-center justify-between w-full",children:[g.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Mes Ensembles"}),g.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:x})=>x*.65,snapPoints:({maxHeight:x})=>[x*.65,x*.85],children:g.jsxs("div",{className:"p-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[g.jsxs("button",{onClick:()=>{e(),s()},className:"w-full mb-6 flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-xl hover:bg-gold-dark transition-all duration-300 active:scale-98",children:[g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Crer un nouvel ensemble"]}),n.length>0?g.jsxs("div",{className:"space-y-4",children:[g.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:["Vos ensembles enregistrs (",n.length,")"]}),n.map(x=>{const _=v(x);return x.id,g.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[g.jsxs("div",{className:"flex items-center justify-between mb-3",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Ou,{className:"w-5 h-5 text-gold"}),g.jsx("h3",{className:"font-bold text-lg",children:x.name}),g.jsxs("span",{className:"text-xs bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded-full",children:[_.length," article",_.length>1?"s":""]})]}),o&&g.jsx("button",{onClick:()=>b(x.id),className:"p-2 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition-colors text-red-500","aria-label":"Supprimer l'ensemble",children:g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),g.jsx("div",{className:"grid grid-cols-3 gap-2",children:_.map(A=>g.jsxs("div",{className:"relative aspect-square rounded-lg overflow-hidden shadow-md",children:[g.jsx("img",{src:A.imageSrc,alt:A.analysis,className:"w-full h-full object-cover"}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),g.jsx("p",{className:"absolute bottom-1 left-1 right-1 text-white text-xs font-medium line-clamp-2",children:A.analysis})]},A.id))})]},x.id)})]}):g.jsxs("div",{className:"text-center py-12",children:[g.jsx("div",{className:"text-6xl mb-4",children:""}),g.jsx("p",{className:"text-gray-500 font-medium",children:"Vous n'avez pas encore cr d'ensemble."}),g.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Crez des ensembles pour lier des articles qui vont ensemble"})]})]})})},uH=(t,e)=>{const n=io(di,"users",t,"items"),r=kp(n);return jp(r,o=>{const u=o.docs.map(d=>({id:d.id,...d.data()}));e(u)},o=>{console.error("Erreur (items listener):",o)})},cH=async(t,e)=>{try{const n=io(di,"users",t,"items");return(await Dp(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'un vtement:",n),n}},eC=async(t,e,n)=>{try{const r=ku(di,"users",t,"items",e);await A3(r,n)}catch(r){throw console.error("Erreur lors de la mise  jour d'un vtement:",r),r}},tC=async(t,e)=>{try{const n=ku(di,"users",t,"items",e);await Lb(n)}catch(n){throw console.error("Erreur lors de la suppression d'un vtement:",n),n}},dH=(t,e)=>{const n=io(di,"users",t,"favoriteOutfits"),r=kp(n);return jp(r,o=>{const u=o.docs.map(d=>({id:d.id,...d.data()}));e(u)},o=>{console.error("Erreur (favoriteOutfits listener):",o)})},hH=async(t,e)=>{try{const n=io(di,"users",t,"favoriteOutfits");return(await Dp(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'une tenue favorite:",n),n}},fH=async(t,e)=>{try{const n=ku(di,"users",t,"favoriteOutfits",e);await Lb(n)}catch(n){throw console.error("Erreur lors de la suppression d'une tenue favorite:",n),n}},mH=(t,e)=>{const n=io(di,"users",t,"sets"),r=kp(n);return jp(r,o=>{const u=o.docs.map(d=>({id:d.id,...d.data()}));e(u)},o=>{console.error("Erreur (sets listener):",o)})},pH=async(t,e)=>{try{const n=io(di,"users",t,"sets");return(await Dp(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'un ensemble:",n),n}},gH=async(t,e)=>{try{const n=ku(di,"users",t,"sets",e);await Lb(n)}catch(n){throw console.error("Erreur lors de la suppression d'un ensemble:",n),n}},vH=async(t,e,n,r)=>{try{const s=io(di,"users",t,"wearHistory");return(await Dp(s,{outfitTitle:e,outfitDescription:n,itemIds:r,wornAt:Date.now()})).id}catch(s){throw console.error("Erreur lors de l'ajout de l'historique de port:",s),s}},yH=(t,e)=>{const n=io(di,"users",t,"wearHistory"),r=Date.now()-720*60*60*1e3,s=kp(n,E3("wornAt",">=",r));return jp(s,u=>{const d=u.docs.map(h=>({id:h.id,...h.data()}));e(d)},u=>{console.error("Erreur (wearHistory listener):",u)})},bH=async(t,e,n)=>{try{const r=KR(WR,`users/${t}/clothing/${n}.jpg`);return await j5(r,e,"data_url"),await $R(r)}catch(r){throw console.error("Erreur upload vtement:",r),r}},xH=async(t,e)=>{try{const n=await EH(e,1024),r=KR(WR,`users/${t}/profile/model_photo.jpg`);return await D5(r,n),await $R(r)}catch(n){throw console.error("Erreur upload photo profil:",n),n}},EH=(t,e)=>new Promise((n,r)=>{const s=new FileReader;s.readAsDataURL(t),s.onload=o=>{var d;const u=new Image;u.src=(d=o.target)==null?void 0:d.result,u.onload=()=>{const h=e/u.width,f=document.createElement("canvas");f.width=e,f.height=u.height*h;const v=f.getContext("2d");v?(v.drawImage(u,0,0,f.width,f.height),f.toBlob(b=>{b?n(b):r(new Error("Blob creation failed"))},"image/jpeg",.85)):r(new Error("Canvas error"))}},s.onerror=o=>r(o)}),kk=k.createContext(void 0),_H=t=>new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=s=>{var u;const o=new Image;o.src=(u=s.target)==null?void 0:u.result,o.onload=()=>{const d=document.createElement("canvas"),h=800,f=h/o.width;d.width=h,d.height=o.height*f;const v=d.getContext("2d");v?(v.drawImage(o,0,0,d.width,d.height),e(d.toDataURL("image/jpeg",.7))):n(new Error("Canvas context error"))},o.onerror=d=>n(d)},r.onerror=s=>n(s)}),TH=({children:t,user:e})=>{const[n,r]=k.useState([]),[s,o]=k.useState([]),[u,d]=k.useState([]),[h,f]=k.useState([]),[v,b]=k.useState(localStorage.getItem("dressmup_user_model_url")),[x,_]=k.useState(!1),[A,R]=k.useState(!0);k.useEffect(()=>{v&&localStorage.setItem("dressmup_user_model_url",v)},[v]),k.useEffect(()=>{if(e){const L=uH(e.uid,X=>{r(X),R(!1)}),D=mH(e.uid,X=>{o(X)}),pe=dH(e.uid,X=>{d(X)}),Ie=yH(e.uid,X=>{f(X)});return()=>{L(),D(),pe(),Ie()}}else r([]),o([]),d([]),f([]),R(!1)},[e]);const M=k.useCallback(async L=>{if(e)try{const D=await xH(e.uid,L);b(D)}catch(D){throw console.error("Erreur mise  jour photo modle:",D),D}},[e]),U=k.useCallback(async L=>{if(!(L.length===0||!e)){_(!0);try{const D=L.map(ce=>_H(ce)),pe=await Promise.all(D),Ie=pe.map(ce=>ce.split(",")[1]),X=await u6(Ie),ie=Math.min(X.length,L.length);for(let ce=0;ce<ie;ce++){const Ae=X[ce];let _e="";try{_e=await cH(e.uid,{...Ae,createdAt:Date.now()});const z=await bH(e.uid,pe[ce],_e);await eC(e.uid,_e,{imageSrc:z})}catch(z){console.error(`chec pour ${L[ce].name}.`,z),_e&&await tC(e.uid,_e)}}}catch(D){console.error("Erreur lot:",D)}finally{_(!1)}}},[e]),O=k.useCallback(async L=>{e&&await tC(e.uid,L)},[e]),B=k.useCallback(async L=>{e&&await eC(e.uid,L.id,L)},[e]),H=k.useCallback(async L=>{if(!e)return;const{id:D,...pe}=L;await hH(e.uid,pe)},[e]),G=k.useCallback(async L=>{e&&await fH(e.uid,L)},[e]),q=k.useCallback(async(L,D)=>{var X;if(!e)return;const pe=((X=n.find(ie=>ie.id===D[0]))==null?void 0:X.imageSrc)||"",Ie={name:L,itemIds:D,imageSrc:pe};await pH(e.uid,Ie)},[e,n]),C=k.useCallback(async L=>{e&&await gH(e.uid,L)},[e]),S=k.useCallback(async(L,D,pe)=>{e&&await vH(e.uid,L,D,pe)},[e]),N=k.useCallback(L=>h.filter(D=>D.itemIds.includes(L)).length,[h]),P=k.useCallback(()=>{const L=Date.now()-6048e5;return h.filter(D=>D.wornAt>=L).sort((D,pe)=>pe.wornAt-D.wornAt)},[h]),V={clothingItems:n,clothingSets:s,favoriteOutfits:u,wearHistory:h,userModelImage:v,setUserModelImage:b,updateUserModelPhoto:M,isAnalyzing:x,analyzeClothingItems:U,deleteClothingItem:O,updateClothingItem:B,createClothingSet:q,deleteClothingSet:C,addFavoriteOutfit:H,deleteFavoriteOutfit:G,recordOutfitWear:S,getItemWearCount:N,getWornOutfitsLast7Days:P,loading:A};return g.jsx(kk.Provider,{value:V,children:t})},wH=()=>{const t=k.useContext(kk);if(t===void 0)throw new Error("useWardrobe doit tre utilis  l'intrieur d'un WardrobeProvider");return t},SH=({open:t,outfit:e,onClose:n,onSendMessage:r,isGenerating:s,messages:o})=>{const[u,d]=k.useState(""),h=k.useRef(null),[f,v]=k.useState(window.innerWidth<768),b=document.documentElement.classList.contains("dark");k.useEffect(()=>{const R=()=>v(window.innerWidth<768);return window.addEventListener("resize",R),()=>window.removeEventListener("resize",R)},[]);const x=()=>{var R;(R=h.current)==null||R.scrollIntoView({behavior:"smooth"})};k.useEffect(()=>{x()},[o]);const _=async R=>{if(R.preventDefault(),!u.trim()||s)return;const M={role:"user",content:u.trim(),timestamp:Date.now()};d("");try{await r(u.trim(),[...o,M])}catch(U){console.error("Error sending message:",U)}};if(!e)return null;const A=g.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-raisin-black",children:[g.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[o.length===0&&g.jsxs("div",{className:"text-center py-8",children:[g.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gold/10 mb-4",children:g.jsx("svg",{className:"w-8 h-8 text-gold",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})}),g.jsx("h3",{className:"font-bold text-raisin-black dark:text-snow mb-2",children:"Posez-moi une question"}),g.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 max-w-sm mx-auto",children:"Je peux vous conseiller sur cette tenue, suggrer des alternatives de votre garde-robe, ou rpondre  vos questions de style."})]}),o.map((R,M)=>g.jsx("div",{className:`flex ${R.role==="user"?"justify-end":"justify-start"}`,children:g.jsx("div",{className:`max-w-[80%] rounded-2xl px-4 py-2 ${R.role==="user"?"bg-gold text-raisin-black":"bg-gray-100 dark:bg-gray-800 text-raisin-black dark:text-snow"}`,children:g.jsx("p",{className:"text-sm whitespace-pre-wrap",children:R.content})})},M)),s&&g.jsx("div",{className:"flex justify-start",children:g.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-2xl px-4 py-3",children:g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsxs("div",{className:"flex space-x-1",children:[g.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),g.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),g.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),g.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Rflexion en cours..."})]})})}),g.jsx("div",{ref:h})]}),g.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4",children:g.jsxs("form",{onSubmit:_,className:"flex gap-2",children:[g.jsx("input",{type:"text",value:u,onChange:R=>d(R.target.value),placeholder:"Posez votre question...",disabled:s,className:"flex-1 px-4 py-2 rounded-full border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-raisin-black dark:text-snow focus:outline-none focus:ring-2 focus:ring-gold disabled:opacity-50"}),g.jsx("button",{type:"submit",disabled:!u.trim()||s,className:"px-6 py-2 bg-gold text-raisin-black rounded-full font-medium hover:bg-gold-dark transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Envoyer"})]})})]});return f?g.jsx(ao,{open:t,onDismiss:n,className:b?"dark":"",header:g.jsxs("div",{className:"flex items-center justify-between w-full",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Conseils Styliste"}),g.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.titre})]}),g.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:R})=>R*.7,snapPoints:({minHeight:R,maxHeight:M})=>[R,M*.7,M*.95],children:A}):g.jsx("div",{className:`fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 transition-opacity duration-200 ${t?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:n,children:g.jsxs("div",{className:`relative bg-white dark:bg-raisin-black rounded-2xl shadow-2xl w-full max-w-2xl h-[85vh] flex flex-col transition-all duration-200 ${t?"opacity-100 scale-100":"opacity-0 scale-95"}`,onClick:R=>R.stopPropagation(),children:[g.jsxs("div",{className:"sticky top-0 bg-white dark:bg-raisin-black border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between z-10 rounded-t-2xl",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Conseils Styliste"}),g.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.titre})]}),g.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors","aria-label":"Fermer",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),A]})})},AH={openWeatherApiKey:"074ebc9404ca1a72d5b0759070161539"},CH=({open:t,onClose:e,allClothingItems:n,allClothingSets:r,favoriteOutfits:s,onToggleFavorite:o,onGenerateVisual:u,generatingVisualFor:d,selectedOutfit:h,onSelectOutfit:f,onGenerateVariants:v,isGenerating:b,onOpenChat:x})=>{const _=document.documentElement.classList.contains("dark");return g.jsx(ao,{open:t,onDismiss:e,className:_?"dark":"",header:g.jsxs("div",{className:"flex items-center justify-between w-full",children:[g.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Tenues Favorites"}),g.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:A})=>A*.65,snapPoints:({maxHeight:A})=>[A*.65,A*.85],children:g.jsx("div",{className:"p-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:s.length>0?g.jsx(lu,{outfits:s,allClothingItems:n,allClothingSets:r,favoriteOutfits:s,onToggleFavorite:o,onGenerateVisual:u,generatingVisualFor:d,selectedOutfit:h,onSelectOutfit:f,onGenerateVariants:v,isGenerating:b,onOpenChat:x}):g.jsxs("div",{className:"text-center py-12",children:[g.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas encore de tenues favorites."}),g.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Cliquez sur le cur  sur une tenue gnre pour l'ajouter."})]})})})},RH=({open:t,onClose:e,allClothingItems:n,allClothingSets:r,wornOutfits:s,favoriteOutfits:o,onToggleFavorite:u,onGenerateVisual:d,generatingVisualFor:h,selectedOutfit:f,onSelectOutfit:v,onGenerateVariants:b,isGenerating:x,onOpenChat:_})=>{const A=document.documentElement.classList.contains("dark"),R=U=>{const O=U?U.trim():"";let B=n.find(G=>G.id===O);if(B)return B;let H=r.find(G=>G.id===O);if(H)return H;if(B=n.find(G=>G.id.trim()===O),B)return B;if(H=r.find(G=>G.id.trim()===O),H)return H;for(const G of r)if(G.itemIds&&G.itemIds.includes(O))return G},M=k.useMemo(()=>s.map(U=>{const O=U.itemIds.map(B=>{const H=R(B);return H?{id:H.id,description:"name"in H?H.name:H.analysis}:{id:B,description:"Article supprim"}});return{titre:U.outfitTitle,description:U.outfitDescription,vetements:O}}),[s,n,r]);return g.jsx(ao,{open:t,onDismiss:e,className:A?"dark":"",header:g.jsxs("div",{className:"flex items-center justify-between w-full",children:[g.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Tenues Portes"}),g.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:U})=>U*.65,snapPoints:({maxHeight:U})=>[U*.65,U*.85],children:g.jsx("div",{className:"p-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:M.length>0?g.jsxs(g.Fragment,{children:[g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Vos tenues portes ces 7 derniers jours"}),g.jsx(lu,{outfits:M,allClothingItems:n,allClothingSets:r,favoriteOutfits:o,onToggleFavorite:u,onGenerateVisual:d,generatingVisualFor:h,selectedOutfit:f,onSelectOutfit:v,onGenerateVariants:b,isGenerating:x,onOpenChat:_})]}):g.jsxs("div",{className:"text-center py-12",children:[g.jsx("div",{className:"text-6xl mb-4",children:""}),g.jsx("p",{className:"text-gray-500 font-medium",children:"Vous n'avez pas encore port de tenue cette semaine."}),g.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Slectionnez une tenue en cliquant sur  pour l'ajouter  votre historique"})]})})})},Jf=!1,Os=t=>{const e=t instanceof Error?t.message:String(t);return e.includes("API_KEY_HTTP_REFERRER_BLOCKED")||e.includes("403")?" Accs refus par Google : Domaine non autoris. Vrifiez la console Google Cloud.":e.includes("429")||e.includes("payment method")||e.includes("throttled")?" Limite de gnration atteinte. Veuillez attendre quelques secondes ou ajouter un moyen de paiement sur Replicate.":e.includes("prediction")?" Erreur lors de la gnration visuelle. Le service est peut-tre surcharg.":e.includes("404")?" Modle introuvable. Veuillez ressayer plus tard.":e.includes("API_KEY_INVALID")?" Cl API invalide. Vrifiez votre configuration.":e},IH=()=>{const[t,e]=k.useState(null),[n,r]=k.useState(null),[s,o]=k.useState([]),[u,d]=k.useState(null),[h,f]=k.useState(!1),[v,b]=k.useState(null),[x,_]=k.useState(!1),[A,R]=k.useState(null),[M,U]=k.useState(!1),[O,B]=k.useState("home"),[H,G]=k.useState(!1),[q,C]=k.useState(!1),[S,N]=k.useState(!1),[P,V]=k.useState(!1),[L,D]=k.useState(!1),[pe,Ie]=k.useState(!1),[X,ie]=k.useState(!1),[ce,Ae]=k.useState(null),[_e,z]=k.useState(null),[J,de]=k.useState(!1),[fe,we]=k.useState(0),[je,qe]=k.useState(null),[Zt,At]=k.useState(null),[Mn,Bn]=k.useState(!1),[en,zn]=k.useState(!1),[Ut,he]=k.useState(""),[ve,nt]=k.useState("favorites"),[an,ze]=k.useState("Toutes"),[Ht,Tr]=k.useState("Toutes"),[Dr,Qr]=k.useState("Toutes"),[vt,on]=k.useState(null),[$e,Bt]=k.useState(!1),[Gt,dn]=k.useState(null),[Gi,$s]=k.useState(!1),[Fn,Jn]=k.useState([]),[hn,ae]=k.useState(null),xe=k.useRef(null);k.useEffect(()=>{if(n){const re=n.includes("Accs refus")?1e4:5e3,ye=setTimeout(()=>r(null),re);return()=>clearTimeout(ye)}},[n]),k.useEffect(()=>{ze("Toutes"),Tr("Toutes"),Qr("Toutes"),he("")},[O]);const[Te,Ke]=k.useState(()=>!localStorage.getItem("dressmup_onboarding_complete")),{clothingItems:yt,clothingSets:We,isAnalyzing:Ye,analyzeClothingItems:rt,deleteClothingItem:it,createClothingSet:De,updateClothingItem:Xe,deleteClothingSet:fn,favoriteOutfits:$t,addFavoriteOutfit:tn,deleteFavoriteOutfit:Nt,userModelImage:Tt,recordOutfitWear:qn,getItemWearCount:zt,getWornOutfitsLast7Days:Pn,loading:jr}=wH(),[nn,rn]=k.useState(null),Ne=Ln.useMemo(()=>(yt||[]).sort((ye,Re)=>(Re.isFavorite?1:0)-(ye.isFavorite?1:0)),[yt]),Sn=k.useCallback(re=>{const ye=$t.find(Re=>Re.titre===re.titre&&Re.description===re.description);ye?(Nt(ye.id),rn("Retir des favoris")):(tn(re),rn("Ajout aux favoris ")),setTimeout(()=>rn(null),2e3)},[$t,tn,Nt]),bt=k.useCallback(re=>{if((u==null?void 0:u.titre)===re.titre&&(u==null?void 0:u.description)===re.description)d(null),rn("Slection annule");else{d(re),rn("Tenue choisie ");const Re=re.vetements.map(Je=>Je.id);qn(re.titre,re.description,Re)}setTimeout(()=>rn(null),2e3)},[u,qn]),Me=Ln.useMemo(()=>We||[],[We]),wr=Ln.useMemo(()=>new Set(Me.flatMap(re=>re.itemIds||[])),[Me]),An=k.useMemo(()=>Pn(),[Pn]);k.useEffect(()=>{const re=async(Je,pt)=>{const Be=AH.openWeatherApiKey,fi=`https://api.openweathermap.org/data/2.5/weather?lat=${Je}&lon=${pt}&appid=${Be}&units=metric&lang=fr`;try{const Ni=await fetch(fi);if(!Ni.ok)throw new Error("Impossible de rcuprer la mto.");const Yi=await Ni.json(),ht=`${Math.round(Yi.main.temp)}C, ${Yi.weather[0].description},  ${Yi.name}`;Ae(ht),z(null),localStorage.setItem("cachedWeather",JSON.stringify({weather:ht,timestamp:Date.now()}))}catch{z("Mto indisponible.")}},ye=localStorage.getItem("cachedWeather");if(ye)try{const{weather:Je,timestamp:pt}=JSON.parse(ye),Be=1800*1e3;if(Date.now()-pt<Be){Ae(Je),z(null);return}}catch{}const Re=localStorage.getItem("cachedPosition");if(Re)try{const{lat:Je,lon:pt,timestamp:Be}=JSON.parse(Re),fi=1800*1e3;if(Date.now()-Be<fi){re(Je,pt);return}}catch{}navigator.geolocation?navigator.geolocation.getCurrentPosition(Je=>{const pt=Je.coords.latitude,Be=Je.coords.longitude;localStorage.setItem("cachedPosition",JSON.stringify({lat:pt,lon:Be,timestamp:Date.now()})),re(pt,Be)},()=>z("Activez la golocalisation pour la mto.")):z("Golocalisation non supporte.")},[]);const hr=k.useCallback(async(re,ye)=>{if(Ne.length===0){r("Veuillez d'abord ajouter des vtements.");return}f(!0),r(null);const Re=ye||vt,Je=ce?`Mto actuelle : ${ce}. Occasion : ${re}`:`Occasion : ${re}`;try{const pt=await f6(Ne,Me,Je,Re||void 0,An);o(pt),on(null)}catch(pt){r(Os(pt))}finally{f(!1)}},[Ne,Me,ce,vt,An]),Mr=k.useCallback(async(re,ye)=>{if(Ne.length===0){r("Veuillez d'abord ajouter des vtements.");return}f(!0),r(null);const Re=ce?`Mto actuelle : ${ce}. Contexte original : ${re.description}`:`Contexte original : ${re.description}`;try{const Je=await p6(Ne,Me,Re,re,ye);o(Je)}catch(Je){r(Os(Je))}finally{f(!1)}},[Ne,Me,ce]),Hn=k.useCallback(re=>{dn(re),Jn([]),H?ae("outfit"):L?ae("favorites"):pe&&ae("worn"),G(!1),D(!1),Ie(!1),Bt(!0)},[H,L,pe]),Pr=k.useCallback(async(re,ye)=>{if(Gt){Jn(ye),$s(!0);try{const Je={role:"assistant",content:(await g6(Gt,re,ye,Ne,Me)).message,timestamp:Date.now()};Jn(pt=>[...pt,Je])}catch(Re){r(Os(Re))}finally{$s(!1)}}},[Gt,Ne,Me]),Sr=k.useCallback(async(re,ye,Re)=>{if(Ne.length===0){r("Veuillez d'abord ajouter des vtements.");return}_(!0),r(null);try{const Je=await x6(Ne,Me,re,ye,Re);b(Je)}catch(Je){r(Os(Je))}finally{_(!1)}},[Ne,Me]),Zn=k.useCallback(async()=>{if(Ne.length<3){r("Ajoutez au moins 3 vtements pour une analyse.");return}xe.current=new AbortController,U(!0),r(null);try{const re=await y6(Ne,Me,xe.current.signal);R(re)}catch(re){if(re instanceof DOMException&&re.name==="AbortError")return;r(Os(re))}finally{U(!1),xe.current=null}},[Ne,Me]),Ar=k.useCallback(()=>{xe.current&&xe.current.abort()},[]),er=k.useCallback(async re=>{},[Ne,Tt]),tr=k.useCallback(()=>G(!0),[]),Ft=k.useCallback(()=>C(!0),[]),Vr=re=>e(re),Wr=()=>e(null),Gn=re=>{it(re).catch(ye=>r(Os(ye))),e(null)},hi=re=>{Xe(re).catch(ye=>r(Os(ye))),e(re)},Pu=re=>{on(re),e(null),G(!0)},$i=k.useCallback((re,ye)=>{De(re,ye).catch(Re=>r(Os(Re)))},[De]),Ks=k.useCallback(re=>{fn(re).catch(ye=>r(Os(ye)))},[fn]);k.useCallback(async()=>{de(!0),await new Promise(re=>setTimeout(re,1e3)),de(!1)},[]);const al={hauts:Ne.filter(re=>re.category==="Hauts").length,bas:Ne.filter(re=>re.category==="Bas").length,chaussures:Ne.filter(re=>re.category==="Chaussures").length,accessoires:Ne.filter(re=>re.category==="Accessoires").length},Xr=k.useMemo(()=>{if(O==="home")return[];let re=Ne.filter(ye=>O==="hauts"?ye.category==="Hauts":O==="bas"?ye.category==="Bas":O==="chaussures"?ye.category==="Chaussures":O==="accessoires"?ye.category==="Accessoires":!1);if(Ut.trim()){const ye=Ut.toLowerCase();re=re.filter(Re=>Re.analysis.toLowerCase().includes(ye)||Re.color.toLowerCase().includes(ye)||Re.material.toLowerCase().includes(ye))}return an!=="Toutes"&&(re=re.filter(ye=>ye.color===an)),Ht!=="Toutes"&&(re=re.filter(ye=>ye.material===Ht)),Dr!=="Toutes"&&(re=re.filter(ye=>ye.subcategory===Dr)),[...re].sort((ye,Re)=>{const Je=ye.subcategory||"zzz",pt=Re.subcategory||"zzz",Be=Je.localeCompare(pt);if(Be!==0)return Be;switch(ve){case"favorites":return(Re.isFavorite?1:0)-(ye.isFavorite?1:0);case"newest":return(Re.createdAt||0)-(ye.createdAt||0);case"oldest":return(ye.createdAt||0)-(Re.createdAt||0);case"color":return ye.color.localeCompare(Re.color);default:return 0}})},[O,Ne,Ut,ve,an,Ht,Dr]),Ki=k.useMemo(()=>{if(O==="home")return[];const ye=Ne.filter(Re=>O==="hauts"?Re.category==="Hauts":O==="bas"?Re.category==="Bas":O==="chaussures"?Re.category==="Chaussures":O==="accessoires"?Re.category==="Accessoires":!1).map(Re=>Re.color);return["Toutes",...Array.from(new Set(ye))]},[O,Ne]),Lr=k.useMemo(()=>{if(O==="home")return[];const ye=Ne.filter(Re=>O==="hauts"?Re.category==="Hauts":O==="bas"?Re.category==="Bas":O==="chaussures"?Re.category==="Chaussures":O==="accessoires"?Re.category==="Accessoires":!1).map(Re=>Re.material);return["Toutes",...Array.from(new Set(ye))]},[O,Ne]),nr=k.useMemo(()=>{const ye={hauts:"Hauts",bas:"Bas",chaussures:"Chaussures",accessoires:"Accessoires"}[O];if(!ye)return["Toutes"];const Re=Oa[ye];return!Re||Re.length===0?["Toutes"]:["Toutes",...Re]},[O]),Ys=H||q||S||P||!!t||!!A||!!Zt||X;return k.useEffect(()=>{const re=document.querySelector("header");re&&(re.style.zIndex=Ys?"10":"50")},[Ys]),k.useEffect(()=>{if(!Ye&&Ne.length>fe&&fe>0){const re=Ne.length-fe;rn(`${re} vtement${re>1?"s":""} ajout${re>1?"s":""} `),setTimeout(()=>rn(null),2e3)}we(Ne.length)},[Ye,Ne.length]),g.jsxs("main",{className:"container mx-auto px-4 lg:px-8 py-10",children:[Jf,n&&g.jsxs("div",{className:"bg-red-500/20 border border-red-500 text-red-700 dark:text-red-300 px-4 py-3 rounded-lg relative mb-8 flex items-center justify-between shadow-sm animate-pulse",role:"alert",children:[g.jsxs("div",{className:"flex-1 mr-2",children:[g.jsx("strong",{className:"font-bold block mb-1",children:"Attention :"}),g.jsx("span",{className:"block text-sm leading-relaxed",children:n})]}),g.jsx("button",{onClick:()=>r(null),className:"p-1.5 hover:bg-red-500/30 rounded-full transition-colors flex-shrink-0","aria-label":"Fermer",children:g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[g.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[Jf,Ne.length>=3&&g.jsxs("div",{className:"hidden md:block bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-xl p-4 md:p-6 flex flex-col md:flex-row items-start md:items-center gap-4 md:justify-between",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-xl font-bold mb-2",children:" Besoin d'inspiration ?"}),g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour rendre votre garde-robe plus polyvalente"}),g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:" Analyse : ~30 secondes"})]}),g.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[g.jsxs("button",{onClick:Zn,disabled:M,className:"px-4 md:px-6 py-3 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm md:text-base",children:[M&&g.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),M?"Analyse...":"Analyser ma garde-robe"]}),M&&g.jsx("button",{onClick:Ar,className:"px-3 py-3 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-red-100 hover:text-red-600 dark:hover:bg-red-900/30 dark:hover:text-red-400 transition-all text-sm font-medium",title:"Annuler l'analyse",children:"Annuler"})]})]}),g.jsx("div",{className:"hidden md:block",children:g.jsx(cz,{onAnalyze:rt,isAnalyzing:Ye})}),g.jsx("div",{className:"hidden md:block",children:g.jsx(mz,{clothingItems:Ne,clothingSets:Me,onItemClick:Vr,onDeleteItem:Gn,onCreateSet:$i,isLoading:jr})}),g.jsxs("div",{className:"md:hidden",children:[O==="home"&&g.jsx(nH,{onAnalyzeWardrobe:Zn,onCancelWardrobeAnalysis:Ar,onScrollToOutfits:tr,onScrollToVacation:Ft,onShowSets:()=>V(!0),onShowFavorites:()=>D(!0),onShowWornOutfits:()=>Ie(!0),isAnalyzingWardrobe:M,clothingCount:Ne.length,favoriteOutfitCount:$t.length,wornOutfitCount:An.length,setsCount:Me.length}),O!=="home"&&g.jsxs("div",{className:"pb-24",children:[J&&g.jsx("div",{className:"flex justify-center py-4",children:g.jsxs("svg",{className:"animate-spin h-6 w-6 text-gold",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),g.jsxs("div",{className:"text-center py-4 px-4",children:[g.jsx("h2",{className:"text-2xl font-bold mb-1 capitalize",children:O}),g.jsxs("p",{className:"text-sm text-gray-500",children:[Xr.length," vtement",Xr.length>1?"s":""]})]}),g.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[g.jsxs("div",{className:"relative",children:[g.jsx(eI,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),g.jsx("input",{type:"text",value:Ut,onChange:re=>he(re.target.value),placeholder:"Rechercher...",className:"w-full pl-10 pr-10 py-2.5 bg-white dark:bg-raisin-black border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-all"}),Ut&&g.jsx("button",{onClick:()=>he(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors","aria-label":"Effacer",children:g.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),g.jsxs("div",{className:"relative",children:[g.jsx(tI,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"}),g.jsxs("select",{value:ve,onChange:re=>nt(re.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white dark:bg-raisin-black border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent appearance-none cursor-pointer transition-all",children:[g.jsx("option",{value:"favorites",children:"Favoris d'abord"}),g.jsx("option",{value:"newest",children:"Plus rcents"}),g.jsx("option",{value:"oldest",children:"Plus anciens"}),g.jsx("option",{value:"color",children:"Couleur (A-Z)"})]}),g.jsx(rd,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1.5",children:"Type"}),g.jsx("select",{value:Dr,onChange:re=>Qr(re.target.value),className:"w-full px-3 py-2 bg-white dark:bg-raisin-black border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent appearance-none cursor-pointer transition-all text-sm",children:nr.map(re=>g.jsx("option",{value:re,children:re},re))})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1.5",children:"Couleur"}),g.jsx("select",{value:an,onChange:re=>ze(re.target.value),className:"w-full px-3 py-2 bg-white dark:bg-raisin-black border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent appearance-none cursor-pointer transition-all text-sm",children:Ki.map(re=>g.jsx("option",{value:re,children:re},re))})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1.5",children:"Matire"}),g.jsx("select",{value:Ht,onChange:re=>Tr(re.target.value),className:"w-full px-3 py-2 bg-white dark:bg-raisin-black border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent appearance-none cursor-pointer transition-all text-sm",children:Lr.map(re=>g.jsx("option",{value:re,children:re},re))})]})]})]})]}),Xr.length>0?g.jsx("div",{className:"grid grid-cols-2 gap-3 px-4",children:Xr.map(re=>g.jsxs("div",{onClick:()=>Vr(re),className:"relative bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform",children:[re.isFavorite?g.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-red-500 z-10",children:g.jsx(yu,{className:"w-4 h-4"})}):wr.has(re.id)?g.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:g.jsx(Ou,{})}):null,g.jsx("div",{className:"aspect-square",children:g.jsx("img",{src:re.imageSrc,alt:re.analysis,loading:"lazy",className:"w-full h-full object-cover"})}),g.jsxs("div",{className:"p-3",children:[g.jsx("p",{className:"text-sm font-medium line-clamp-2",children:re.analysis}),g.jsx("p",{className:"text-xs text-gray-500 mt-1",children:re.color})]})]},re.id))}):g.jsx("div",{className:"text-center py-12 px-4",children:Ut?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"text-6xl mb-4",children:""}),g.jsxs("p",{className:"text-gray-500 font-medium",children:['Aucun rsultat pour "',Ut,'"']}),g.jsx("button",{onClick:()=>he(""),className:"mt-3 text-gold font-medium",children:"Effacer la recherche"})]}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"text-6xl mb-4",children:""}),g.jsx("p",{className:"text-gray-500 font-medium",children:"Aucun vtement dans cette catgorie"}),g.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Appuyez sur + pour en ajouter"})]})})]})]})]}),g.jsxs("div",{className:"lg:col-span-1 space-y-10 lg:sticky lg:top-40 hidden md:block",children:[g.jsx("div",{id:"outfit-generator",children:g.jsx(kN,{clothingItems:Ne,clothingSets:Me,onGenerate:hr,isGenerating:h,weatherInfo:ce,weatherError:_e,anchorItem:vt,onClearAnchor:()=>on(null)})}),s.length>0&&g.jsx(lu,{outfits:s,allClothingItems:Ne,allClothingSets:Me,favoriteOutfits:$t,onToggleFavorite:Sn,onGenerateVisual:er,generatingVisualFor:je,selectedOutfit:u,onSelectOutfit:bt,onGenerateVariants:Mr,isGenerating:h,onOpenChat:Hn}),$t.length>0&&g.jsxs("div",{className:"mt-10 border border-black/10 dark:border-white/10 rounded-xl overflow-hidden bg-white dark:bg-raisin-black shadow-sm",children:[g.jsxs("button",{onClick:()=>Bn(!Mn),className:"w-full flex items-center justify-between p-5 hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(yu,{className:"text-gold w-5 h-5"}),g.jsxs("h2",{className:"text-xl font-serif font-bold text-raisin-black dark:text-snow",children:["Mes Favoris ",g.jsxs("span",{className:"text-sm font-sans font-normal text-gray-500",children:["(",$t.length,")"]})]})]}),g.jsx("div",{className:`transition-transform duration-300 ${Mn?"rotate-180":""} text-gray-400`,children:g.jsx(rd,{})})]}),Mn&&g.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 bg-snow dark:bg-onyx/50 max-h-[600px] overflow-y-auto custom-scrollbar",children:g.jsx(lu,{outfits:$t,allClothingItems:Ne,allClothingSets:Me,favoriteOutfits:$t,onToggleFavorite:Sn,onGenerateVisual:er,generatingVisualFor:je,selectedOutfit:u,onSelectOutfit:bt,onGenerateVariants:Mr,isGenerating:h,onOpenChat:Hn})})]}),An.length>0&&g.jsxs("div",{className:"mt-10 border border-black/10 dark:border-white/10 rounded-xl overflow-hidden bg-white dark:bg-raisin-black shadow-sm",children:[g.jsxs("button",{onClick:()=>zn(!en),className:"w-full flex items-center justify-between p-5 hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),g.jsxs("h2",{className:"text-xl font-serif font-bold text-raisin-black dark:text-snow",children:["Tenues Portes ",g.jsxs("span",{className:"text-sm font-sans font-normal text-gray-500",children:["(7 derniers jours - ",An.length,")"]})]})]}),g.jsx("div",{className:`transition-transform duration-300 ${en?"rotate-180":""} text-gray-400`,children:g.jsx(rd,{})})]}),en&&g.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 bg-snow dark:bg-onyx/50 max-h-[600px] overflow-y-auto custom-scrollbar",children:g.jsx(lu,{outfits:An.map(re=>({titre:re.outfitTitle,description:re.outfitDescription,vetements:re.itemIds.map(ye=>{const Re=ye?ye.trim():"";let Je=Ne.find(Be=>Be.id===Re);if(Je)return{id:Je.id,description:Je.analysis};let pt=Me.find(Be=>Be.id===Re);if(pt)return{id:pt.id,description:pt.name};if(Je=Ne.find(Be=>Be.id.trim()===Re),Je)return{id:Je.id,description:Je.analysis};if(pt=Me.find(Be=>Be.id.trim()===Re),pt)return{id:pt.id,description:pt.name};for(const Be of Me)if(Be.itemIds&&Be.itemIds.includes(Re))return{id:Be.id,description:Be.name};return{id:ye,description:"Article supprim"}})})),allClothingItems:Ne,allClothingSets:Me,favoriteOutfits:$t,onToggleFavorite:Sn,onGenerateVisual:er,generatingVisualFor:je,selectedOutfit:u,onSelectOutfit:bt,onGenerateVariants:Mr,isGenerating:h,onOpenChat:Hn})})]}),g.jsx("div",{id:"vacation-planner",children:g.jsx(Ik,{clothingItems:Ne,clothingSets:Me,onGeneratePlan:Sr,isGenerating:x})}),v&&g.jsx(Nk,{plan:v,allClothingItems:Ne,allClothingSets:Me,onCreateSet:$i})]})]}),t&&g.jsx(eH,{item:t,clothingSets:Me,onClose:Wr,onUpdate:hi,onGenerateFrom:Pu,onRemoveSet:Ks,onDelete:Gn,getItemWearCount:zt}),A&&g.jsx(iH,{analysis:A,onClose:()=>R(null)}),Jf,g.jsx(tH,{onFilesSelected:rt,isAnalyzing:Ye,isOtherModalOpen:Ys}),g.jsx(rH,{activeTab:O,onTabChange:B,counts:al}),g.jsx(sH,{open:H,clothingItems:Ne,clothingSets:Me,onGenerate:hr,isGenerating:h,suggestedOutfits:s,onClose:()=>{G(!1),on(null)},weatherInfo:ce,weatherError:_e,favoriteOutfits:$t,onToggleFavorite:Sn,onGenerateVisual:er,generatingVisualFor:je,selectedOutfit:u,onSelectOutfit:bt,anchorItem:vt,onClearAnchor:()=>on(null),onGenerateVariants:Mr,onOpenChat:Hn}),g.jsx(aH,{open:q,clothingItems:Ne,clothingSets:Me,onGeneratePlan:Sr,isGenerating:x,vacationPlan:v,onCreateSet:$i,onClose:()=>C(!1)}),g.jsx(SH,{open:$e,outfit:Gt,onClose:()=>{Bt(!1),hn==="outfit"?G(!0):hn==="favorites"?D(!0):hn==="worn"&&Ie(!0),ae(null)},onSendMessage:async(re,ye)=>{await Pr(re,ye)},isGenerating:Gi,messages:Fn}),g.jsx(oH,{open:S,clothingItems:Ne,clothingSets:Me,onClose:()=>N(!1),onCreateSet:(re,ye)=>{$i(re,ye),N(!1)}}),g.jsx(lH,{open:P,onClose:()=>V(!1),clothingSets:Me,clothingItems:Ne,onCreateNewSet:()=>{V(!1),N(!0)},onDeleteSet:Ks}),g.jsx(CH,{open:L,onClose:()=>D(!1),allClothingItems:Ne,allClothingSets:Me,favoriteOutfits:$t,onToggleFavorite:Sn,onGenerateVisual:er,generatingVisualFor:je,selectedOutfit:u,onSelectOutfit:bt,onGenerateVariants:Mr,isGenerating:h,onOpenChat:Hn}),g.jsx(RH,{open:pe,onClose:()=>Ie(!1),allClothingItems:Ne,allClothingSets:Me,wornOutfits:An,favoriteOutfits:$t,onToggleFavorite:Sn,onGenerateVisual:er,generatingVisualFor:je,selectedOutfit:u,onSelectOutfit:bt,onGenerateVariants:Mr,isGenerating:h,onOpenChat:Hn}),Jf,Te&&g.jsx(gD,{onComplete:()=>Ke(!1)}),nn&&g.jsx("div",{className:"fixed bottom-32 md:bottom-8 left-1/2 -translate-x-1/2 z-[100]",children:g.jsxs("div",{className:"bg-raisin-black dark:bg-white text-white dark:text-raisin-black px-6 py-3 rounded-full shadow-2xl font-medium flex items-center gap-2 animate-slide-up",children:[nn.includes("")&&g.jsx("span",{className:"animate-pulse",children:""}),nn.includes("Retir")&&g.jsx("span",{children:""}),nn.includes("ajout")&&!nn.includes("")&&g.jsx("span",{children:""}),g.jsx("span",{children:nn.replace("","").trim()})]})})]})},NH=()=>{const[t,e]=k.useState(null),[n,r]=k.useState("dark"),[s,o]=k.useState(!1);k.useEffect(()=>{const d=e4(Do,h=>{e(h),h&&o(!1)});return()=>d()},[]),k.useEffect(()=>{n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[n]);const u=()=>{r(d=>d==="light"?"dark":"light")};return g.jsx("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow transition-colors duration-300",children:t?g.jsxs(g.Fragment,{children:[g.jsx(D6,{theme:n,toggleTheme:u,children:g.jsx(XS,{user:t})}),g.jsx(TH,{user:t,children:g.jsx(IH,{})})]}):s?g.jsx("div",{className:"flex items-center justify-center min-h-screen p-4 animate-slide-up",children:g.jsxs("div",{className:"w-full max-w-md",children:[g.jsx("button",{onClick:()=>o(!1),className:"mb-4 flex items-center gap-2 text-gray-500 hover:text-gold transition-colors text-sm font-medium",children:" Retour"}),g.jsx(XS,{user:t})]})}):g.jsx(uz,{onGetStarted:()=>o(!0)})})},Ok=document.getElementById("root");if(!Ok)throw new Error("L'lment root est introuvable dans le DOM");const kH=pD.createRoot(Ok);kH.render(g.jsx(Ln.StrictMode,{children:g.jsx(NH,{})}));
