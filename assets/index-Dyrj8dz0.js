(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function FE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var rp={exports:{}},Hl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wv;function Ew(){if(wv)return Hl;wv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,l){var u=null;if(l!==void 0&&(u=""+l),o.key!==void 0&&(u=""+o.key),"key"in o){l={};for(var d in o)d!=="key"&&(l[d]=o[d])}else l=o;return o=l.ref,{$$typeof:n,type:s,key:u,ref:o!==void 0?o:null,props:l}}return Hl.Fragment=e,Hl.jsx=t,Hl.jsxs=t,Hl}var Rv;function Sw(){return Rv||(Rv=1,rp.exports=Ew()),rp.exports}var A=Sw(),op={exports:{}},we={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bv;function Aw(){if(bv)return we;bv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function R(V){return V===null||typeof V!="object"?null:(V=S&&V[S]||V["@@iterator"],typeof V=="function"?V:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,F={};function ne(V,Z,re){this.props=V,this.context=Z,this.refs=F,this.updater=re||q}ne.prototype.isReactComponent={},ne.prototype.setState=function(V,Z){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,Z,"setState")},ne.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function K(){}K.prototype=ne.prototype;function W(V,Z,re){this.props=V,this.context=Z,this.refs=F,this.updater=re||q}var ie=W.prototype=new K;ie.constructor=W,z(ie,ne.prototype),ie.isPureReactComponent=!0;var de=Array.isArray;function le(){}var D={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function x(V,Z,re){var he=re.ref;return{$$typeof:n,type:V,key:Z,ref:he!==void 0?he:null,props:re}}function L(V,Z){return x(V.type,Z,V.props)}function P(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function k(V){var Z={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(re){return Z[re]})}var M=/\/+/g;function Qe(V,Z){return typeof V=="object"&&V!==null&&V.key!=null?k(""+V.key):Z.toString(36)}function Ie(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(le,le):(V.status="pending",V.then(function(Z){V.status==="pending"&&(V.status="fulfilled",V.value=Z)},function(Z){V.status==="pending"&&(V.status="rejected",V.reason=Z)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function $(V,Z,re,he,Se){var xe=typeof V;(xe==="undefined"||xe==="boolean")&&(V=null);var ke=!1;if(V===null)ke=!0;else switch(xe){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(V.$$typeof){case n:case e:ke=!0;break;case v:return ke=V._init,$(ke(V._payload),Z,re,he,Se)}}if(ke)return Se=Se(V),ke=he===""?"."+Qe(V,0):he,de(Se)?(re="",ke!=null&&(re=ke.replace(M,"$&/")+"/"),$(Se,Z,re,"",function(Fn){return Fn})):Se!=null&&(P(Se)&&(Se=L(Se,re+(Se.key==null||V&&V.key===Se.key?"":(""+Se.key).replace(M,"$&/")+"/")+ke)),Z.push(Se)),1;ke=0;var Mt=he===""?".":he+":";if(de(V))for(var ft=0;ft<V.length;ft++)he=V[ft],xe=Mt+Qe(he,ft),ke+=$(he,Z,re,xe,Se);else if(ft=R(V),typeof ft=="function")for(V=ft.call(V),ft=0;!(he=V.next()).done;)he=he.value,xe=Mt+Qe(he,ft++),ke+=$(he,Z,re,xe,Se);else if(xe==="object"){if(typeof V.then=="function")return $(Ie(V),Z,re,he,Se);throw Z=String(V),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return ke}function oe(V,Z,re){if(V==null)return V;var he=[],Se=0;return $(V,he,"","",function(xe){return Z.call(re,xe,Se++)}),he}function _e(V){if(V._status===-1){var Z=V._result;Z=Z(),Z.then(function(re){(V._status===0||V._status===-1)&&(V._status=1,V._result=re)},function(re){(V._status===0||V._status===-1)&&(V._status=2,V._result=re)}),V._status===-1&&(V._status=0,V._result=Z)}if(V._status===1)return V._result.default;throw V._result}var ze=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},Ge={map:oe,forEach:function(V,Z,re){oe(V,function(){Z.apply(this,arguments)},re)},count:function(V){var Z=0;return oe(V,function(){Z++}),Z},toArray:function(V){return oe(V,function(Z){return Z})||[]},only:function(V){if(!P(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return we.Activity=T,we.Children=Ge,we.Component=ne,we.Fragment=t,we.Profiler=o,we.PureComponent=W,we.StrictMode=s,we.Suspense=p,we.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,we.__COMPILER_RUNTIME={__proto__:null,c:function(V){return D.H.useMemoCache(V)}},we.cache=function(V){return function(){return V.apply(null,arguments)}},we.cacheSignal=function(){return null},we.cloneElement=function(V,Z,re){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var he=z({},V.props),Se=V.key;if(Z!=null)for(xe in Z.key!==void 0&&(Se=""+Z.key),Z)!N.call(Z,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&Z.ref===void 0||(he[xe]=Z[xe]);var xe=arguments.length-2;if(xe===1)he.children=re;else if(1<xe){for(var ke=Array(xe),Mt=0;Mt<xe;Mt++)ke[Mt]=arguments[Mt+2];he.children=ke}return x(V.type,Se,he)},we.createContext=function(V){return V={$$typeof:u,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:l,_context:V},V},we.createElement=function(V,Z,re){var he,Se={},xe=null;if(Z!=null)for(he in Z.key!==void 0&&(xe=""+Z.key),Z)N.call(Z,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(Se[he]=Z[he]);var ke=arguments.length-2;if(ke===1)Se.children=re;else if(1<ke){for(var Mt=Array(ke),ft=0;ft<ke;ft++)Mt[ft]=arguments[ft+2];Se.children=Mt}if(V&&V.defaultProps)for(he in ke=V.defaultProps,ke)Se[he]===void 0&&(Se[he]=ke[he]);return x(V,xe,Se)},we.createRef=function(){return{current:null}},we.forwardRef=function(V){return{$$typeof:d,render:V}},we.isValidElement=P,we.lazy=function(V){return{$$typeof:v,_payload:{_status:-1,_result:V},_init:_e}},we.memo=function(V,Z){return{$$typeof:g,type:V,compare:Z===void 0?null:Z}},we.startTransition=function(V){var Z=D.T,re={};D.T=re;try{var he=V(),Se=D.S;Se!==null&&Se(re,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(le,ze)}catch(xe){ze(xe)}finally{Z!==null&&re.types!==null&&(Z.types=re.types),D.T=Z}},we.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},we.use=function(V){return D.H.use(V)},we.useActionState=function(V,Z,re){return D.H.useActionState(V,Z,re)},we.useCallback=function(V,Z){return D.H.useCallback(V,Z)},we.useContext=function(V){return D.H.useContext(V)},we.useDebugValue=function(){},we.useDeferredValue=function(V,Z){return D.H.useDeferredValue(V,Z)},we.useEffect=function(V,Z){return D.H.useEffect(V,Z)},we.useEffectEvent=function(V){return D.H.useEffectEvent(V)},we.useId=function(){return D.H.useId()},we.useImperativeHandle=function(V,Z,re){return D.H.useImperativeHandle(V,Z,re)},we.useInsertionEffect=function(V,Z){return D.H.useInsertionEffect(V,Z)},we.useLayoutEffect=function(V,Z){return D.H.useLayoutEffect(V,Z)},we.useMemo=function(V,Z){return D.H.useMemo(V,Z)},we.useOptimistic=function(V,Z){return D.H.useOptimistic(V,Z)},we.useReducer=function(V,Z,re){return D.H.useReducer(V,Z,re)},we.useRef=function(V){return D.H.useRef(V)},we.useState=function(V){return D.H.useState(V)},we.useSyncExternalStore=function(V,Z,re){return D.H.useSyncExternalStore(V,Z,re)},we.useTransition=function(){return D.H.useTransition()},we.version="19.2.0",we}var xv;function um(){return xv||(xv=1,op.exports=Aw()),op.exports}var ge=um();const jl=FE(ge);var ap={exports:{}},zl={},lp={exports:{}},up={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nv;function Cw(){return Nv||(Nv=1,(function(n){function e($,oe){var _e=$.length;$.push(oe);e:for(;0<_e;){var ze=_e-1>>>1,Ge=$[ze];if(0<o(Ge,oe))$[ze]=oe,$[_e]=Ge,_e=ze;else break e}}function t($){return $.length===0?null:$[0]}function s($){if($.length===0)return null;var oe=$[0],_e=$.pop();if(_e!==oe){$[0]=_e;e:for(var ze=0,Ge=$.length,V=Ge>>>1;ze<V;){var Z=2*(ze+1)-1,re=$[Z],he=Z+1,Se=$[he];if(0>o(re,_e))he<Ge&&0>o(Se,re)?($[ze]=Se,$[he]=_e,ze=he):($[ze]=re,$[Z]=_e,ze=Z);else if(he<Ge&&0>o(Se,_e))$[ze]=Se,$[he]=_e,ze=he;else break e}}return oe}function o($,oe){var _e=$.sortIndex-oe.sortIndex;return _e!==0?_e:$.id-oe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var p=[],g=[],v=1,T=null,S=3,R=!1,q=!1,z=!1,F=!1,ne=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function ie($){for(var oe=t(g);oe!==null;){if(oe.callback===null)s(g);else if(oe.startTime<=$)s(g),oe.sortIndex=oe.expirationTime,e(p,oe);else break;oe=t(g)}}function de($){if(z=!1,ie($),!q)if(t(p)!==null)q=!0,le||(le=!0,k());else{var oe=t(g);oe!==null&&Ie(de,oe.startTime-$)}}var le=!1,D=-1,N=5,x=-1;function L(){return F?!0:!(n.unstable_now()-x<N)}function P(){if(F=!1,le){var $=n.unstable_now();x=$;var oe=!0;try{e:{q=!1,z&&(z=!1,K(D),D=-1),R=!0;var _e=S;try{t:{for(ie($),T=t(p);T!==null&&!(T.expirationTime>$&&L());){var ze=T.callback;if(typeof ze=="function"){T.callback=null,S=T.priorityLevel;var Ge=ze(T.expirationTime<=$);if($=n.unstable_now(),typeof Ge=="function"){T.callback=Ge,ie($),oe=!0;break t}T===t(p)&&s(p),ie($)}else s(p);T=t(p)}if(T!==null)oe=!0;else{var V=t(g);V!==null&&Ie(de,V.startTime-$),oe=!1}}break e}finally{T=null,S=_e,R=!1}oe=void 0}}finally{oe?k():le=!1}}}var k;if(typeof W=="function")k=function(){W(P)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,Qe=M.port2;M.port1.onmessage=P,k=function(){Qe.postMessage(null)}}else k=function(){ne(P,0)};function Ie($,oe){D=ne(function(){$(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function($){switch(S){case 1:case 2:case 3:var oe=3;break;default:oe=S}var _e=S;S=oe;try{return $()}finally{S=_e}},n.unstable_requestPaint=function(){F=!0},n.unstable_runWithPriority=function($,oe){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var _e=S;S=$;try{return oe()}finally{S=_e}},n.unstable_scheduleCallback=function($,oe,_e){var ze=n.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?ze+_e:ze):_e=ze,$){case 1:var Ge=-1;break;case 2:Ge=250;break;case 5:Ge=1073741823;break;case 4:Ge=1e4;break;default:Ge=5e3}return Ge=_e+Ge,$={id:v++,callback:oe,priorityLevel:$,startTime:_e,expirationTime:Ge,sortIndex:-1},_e>ze?($.sortIndex=_e,e(g,$),t(p)===null&&$===t(g)&&(z?(K(D),D=-1):z=!0,Ie(de,_e-ze))):($.sortIndex=Ge,e(p,$),q||R||(q=!0,le||(le=!0,k()))),$},n.unstable_shouldYield=L,n.unstable_wrapCallback=function($){var oe=S;return function(){var _e=S;S=oe;try{return $.apply(this,arguments)}finally{S=_e}}}})(up)),up}var Mv;function Iw(){return Mv||(Mv=1,lp.exports=Cw()),lp.exports}var cp={exports:{}},rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dv;function ww(){if(Dv)return rn;Dv=1;var n=um();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(p,g,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:p,containerInfo:g,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,rn.createPortal=function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,v)},rn.flushSync=function(p){var g=u.T,v=s.p;try{if(u.T=null,s.p=2,p)return p()}finally{u.T=g,s.p=v,s.d.f()}},rn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},rn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},rn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var v=g.as,T=d(v,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,R=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:R}):v==="script"&&s.d.X(p,{crossOrigin:T,integrity:S,fetchPriority:R,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},rn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=d(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},rn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,T=d(v,g.crossOrigin);s.d.L(p,v,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},rn.preloadModule=function(p,g){if(typeof p=="string")if(g){var v=d(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},rn.requestFormReset=function(p){s.d.r(p)},rn.unstable_batchedUpdates=function(p,g){return p(g)},rn.useFormState=function(p,g,v){return u.H.useFormState(p,g,v)},rn.useFormStatus=function(){return u.H.useHostTransitionStatus()},rn.version="19.2.0",rn}var kv;function Rw(){if(kv)return cp.exports;kv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),cp.exports=ww(),cp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pv;function bw(){if(Pv)return zl;Pv=1;var n=Iw(),e=um(),t=Rw();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,a=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(a=r.return),i=r.return;while(i)}return r.tag===3?a:null}function u(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function p(i){if(l(i)!==i)throw Error(s(188))}function g(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(s(188));return r!==i?null:i}for(var a=i,c=r;;){var y=a.return;if(y===null)break;var _=y.alternate;if(_===null){if(c=y.return,c!==null){a=c;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===a)return p(y),i;if(_===c)return p(y),r;_=_.sibling}throw Error(s(188))}if(a.return!==c.return)a=y,c=_;else{for(var C=!1,w=y.child;w;){if(w===a){C=!0,a=y,c=_;break}if(w===c){C=!0,c=y,a=_;break}w=w.sibling}if(!C){for(w=_.child;w;){if(w===a){C=!0,a=_,c=y;break}if(w===c){C=!0,c=_,a=y;break}w=w.sibling}if(!C)throw Error(s(189))}}if(a.alternate!==c)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:r}function v(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=v(i),r!==null)return r;i=i.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),W=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function k(i){return i===null||typeof i!="object"?null:(i=P&&i[P]||i["@@iterator"],typeof i=="function"?i:null)}var M=Symbol.for("react.client.reference");function Qe(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===M?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case z:return"Fragment";case ne:return"Profiler";case F:return"StrictMode";case de:return"Suspense";case le:return"SuspenseList";case x:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case q:return"Portal";case W:return i.displayName||"Context";case K:return(i._context.displayName||"Context")+".Consumer";case ie:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return r=i.displayName||null,r!==null?r:Qe(i.type)||"Memo";case N:r=i._payload,i=i._init;try{return Qe(i(r))}catch{}}return null}var Ie=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},ze=[],Ge=-1;function V(i){return{current:i}}function Z(i){0>Ge||(i.current=ze[Ge],ze[Ge]=null,Ge--)}function re(i,r){Ge++,ze[Ge]=i.current,i.current=r}var he=V(null),Se=V(null),xe=V(null),ke=V(null);function Mt(i,r){switch(re(xe,r),re(Se,i),re(he,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?Q_(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=Q_(r),i=X_(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Z(he),re(he,i)}function ft(){Z(he),Z(Se),Z(xe)}function Fn(i){i.memoizedState!==null&&re(ke,i);var r=he.current,a=X_(r,i.type);r!==a&&(re(Se,i),re(he,a))}function si(i){Se.current===i&&(Z(he),Z(Se)),ke.current===i&&(Z(ke),Ol._currentValue=_e)}var yi,Ss;function Nn(i){if(yi===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);yi=r&&r[1]||"",Ss=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+yi+i+Ss}var Bi=!1;function As(i,r){if(!i||Bi)return"";Bi=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(Q){var Y=Q}Reflect.construct(i,[],te)}else{try{te.call()}catch(Q){Y=Q}i.call(te.prototype)}}else{try{throw Error()}catch(Q){Y=Q}(te=i())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(Q){if(Q&&Y&&typeof Q.stack=="string")return[Q.stack,Y.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),C=_[0],w=_[1];if(C&&w){var U=C.split(`
`),J=w.split(`
`);for(y=c=0;c<U.length&&!U[c].includes("DetermineComponentFrameRoot");)c++;for(;y<J.length&&!J[y].includes("DetermineComponentFrameRoot");)y++;if(c===U.length||y===J.length)for(c=U.length-1,y=J.length-1;1<=c&&0<=y&&U[c]!==J[y];)y--;for(;1<=c&&0<=y;c--,y--)if(U[c]!==J[y]){if(c!==1||y!==1)do if(c--,y--,0>y||U[c]!==J[y]){var j=`
`+U[c].replace(" at new "," at ");return i.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",i.displayName)),j}while(1<=c&&0<=y);break}}}finally{Bi=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?Nn(a):""}function Or(i,r){switch(i.tag){case 26:case 27:case 5:return Nn(i.type);case 16:return Nn("Lazy");case 13:return i.child!==r&&r!==null?Nn("Suspense Fallback"):Nn("Suspense");case 19:return Nn("SuspenseList");case 0:case 15:return As(i.type,!1);case 11:return As(i.type.render,!1);case 1:return As(i.type,!0);case 31:return Nn("Activity");default:return""}}function bo(i){try{var r="",a=null;do r+=Or(i,a),a=i,i=i.return;while(i);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Cs=Object.prototype.hasOwnProperty,Hn=n.unstable_scheduleCallback,ce=n.unstable_cancelCallback,Ue=n.unstable_shouldYield,Je=n.unstable_requestPaint,Xe=n.unstable_now,vn=n.unstable_getCurrentPriorityLevel,lt=n.unstable_ImmediatePriority,ut=n.unstable_UserBlockingPriority,ct=n.unstable_NormalPriority,ri=n.unstable_LowPriority,oi=n.unstable_IdlePriority,_i=n.log,qr=n.unstable_setDisableYieldValue,Is=null,nn=null;function zn(i){if(typeof _i=="function"&&qr(i),nn&&typeof nn.setStrictMode=="function")try{nn.setStrictMode(Is,i)}catch{}}var dn=Math.clz32?Math.clz32:Iu,rf=Math.log,za=Math.LN2;function Iu(i){return i>>>=0,i===0?32:31-(rf(i)/za|0)|0}var Br=256,vi=262144,ws=4194304;function ai(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Gn(i,r,a){var c=i.pendingLanes;if(c===0)return 0;var y=0,_=i.suspendedLanes,C=i.pingedLanes;i=i.warmLanes;var w=c&134217727;return w!==0?(c=w&~_,c!==0?y=ai(c):(C&=w,C!==0?y=ai(C):a||(a=w&~i,a!==0&&(y=ai(a))))):(w=c&~_,w!==0?y=ai(w):C!==0?y=ai(C):a||(a=c&~i,a!==0&&(y=ai(a)))),y===0?0:r!==0&&r!==y&&(r&_)===0&&(_=y&-y,a=r&-r,_>=a||_===32&&(a&4194048)!==0)?r:y}function Rs(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function xo(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ga(){var i=ws;return ws<<=1,(ws&62914560)===0&&(ws=4194304),i}function Fi(i){for(var r=[],a=0;31>a;a++)r.push(i);return r}function bs(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function $t(i,r,a,c,y,_){var C=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var w=i.entanglements,U=i.expirationTimes,J=i.hiddenUpdates;for(a=C&~a;0<a;){var j=31-dn(a),te=1<<j;w[j]=0,U[j]=-1;var Y=J[j];if(Y!==null)for(J[j]=null,j=0;j<Y.length;j++){var Q=Y[j];Q!==null&&(Q.lane&=-536870913)}a&=~te}c!==0&&Ja(i,c,0),_!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=_&~(C&~r))}function Ja(i,r,a){i.pendingLanes|=r,i.suspendedLanes&=~r;var c=31-dn(r);i.entangledLanes|=r,i.entanglements[c]=i.entanglements[c]|1073741824|a&261930}function xs(i,r){var a=i.entangledLanes|=r;for(i=i.entanglements;a;){var c=31-dn(a),y=1<<c;y&r|i[c]&r&&(i[c]|=r),a&=~y}}function Ns(i,r){var a=r&-r;return a=(a&42)!==0?1:Ya(a),(a&(i.suspendedLanes|r))!==0?0:a}function Ya(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ka(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Hi(){var i=oe.p;return i!==0?i:(i=window.event,i===void 0?32:vv(i.type))}function wu(i,r){var a=oe.p;try{return oe.p=i,r()}finally{oe.p=a}}var Ti=Math.random().toString(36).slice(2),Tt="__reactFiber$"+Ti,Qt="__reactProps$"+Ti,Ei="__reactContainer$"+Ti,Ms="__reactEvents$"+Ti,Si="__reactListeners$"+Ti,Ru="__reactHandles$"+Ti,$a="__reactResources$"+Ti,zi="__reactMarker$"+Ti;function Fr(i){delete i[Tt],delete i[Qt],delete i[Ms],delete i[Si],delete i[Ru]}function Gi(i){var r=i[Tt];if(r)return r;for(var a=i.parentNode;a;){if(r=a[Ei]||a[Tt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(i=iv(i);i!==null;){if(a=i[Tt])return a;i=iv(i)}return r}i=a,a=i.parentNode}return null}function Ji(i){if(i=i[Tt]||i[Ei]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function Hr(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function li(i){var r=i[$a];return r||(r=i[$a]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function wt(i){i[zi]=!0}var No=new Set,Ds={};function fn(i,r){Ai(i,r),Ai(i+"Capture",r)}function Ai(i,r){for(Ds[i]=r,i=0;i<r.length;i++)No.add(r[i])}var of=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qa={},Xa={};function bu(i){return Cs.call(Xa,i)?!0:Cs.call(Qa,i)?!1:of.test(i)?Xa[i]=!0:(Qa[i]=!0,!1)}function ks(i,r,a){if(bu(r))if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+a)}}function Ps(i,r,a){if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+a)}}function Jn(i,r,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(r,a,""+c)}}function hn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function xu(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function af(i,r,a){var c=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,_=c.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return y.call(this)},set:function(C){a=""+C,_.call(this,C)}}),Object.defineProperty(i,r,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(C){a=""+C},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function Mo(i){if(!i._valueTracker){var r=xu(i)?"checked":"value";i._valueTracker=af(i,r,""+i[r])}}function Wa(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return i&&(c=xu(i)?i.checked?"true":"false":i.value),i=c,i!==a?(r.setValue(i),!0):!1}function Do(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Yi=/[\n"\\]/g;function Et(i){return i.replace(Yi,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Ls(i,r,a,c,y,_,C,w){i.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.type=C:i.removeAttribute("type"),r!=null?C==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+hn(r)):i.value!==""+hn(r)&&(i.value=""+hn(r)):C!=="submit"&&C!=="reset"||i.removeAttribute("value"),r!=null?ko(i,C,hn(r)):a!=null?ko(i,C,hn(a)):c!=null&&i.removeAttribute("value"),y==null&&_!=null&&(i.defaultChecked=!!_),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.name=""+hn(w):i.removeAttribute("name")}function zr(i,r,a,c,y,_,C,w){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),r!=null||a!=null){if(!(_!=="submit"&&_!=="reset"||r!=null)){Mo(i);return}a=a!=null?""+hn(a):"",r=r!=null?""+hn(r):a,w||r===i.value||(i.value=r),i.defaultValue=r}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=w?i.checked:!!c,i.defaultChecked=!!c,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(i.name=C),Mo(i)}function ko(i,r,a){r==="number"&&Do(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function We(i,r,a,c){if(i=i.options,r){r={};for(var y=0;y<a.length;y++)r["$"+a[y]]=!0;for(a=0;a<i.length;a++)y=r.hasOwnProperty("$"+i[a].value),i[a].selected!==y&&(i[a].selected=y),y&&c&&(i[a].defaultSelected=!0)}else{for(a=""+hn(a),r=null,y=0;y<i.length;y++){if(i[y].value===a){i[y].selected=!0,c&&(i[y].defaultSelected=!0);return}r!==null||i[y].disabled||(r=i[y])}r!==null&&(r.selected=!0)}}function Gr(i,r,a){if(r!=null&&(r=""+hn(r),r!==i.value&&(i.value=r),a==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=a!=null?""+hn(a):""}function Us(i,r,a,c){if(r==null){if(c!=null){if(a!=null)throw Error(s(92));if(Ie(c)){if(1<c.length)throw Error(s(93));c=c[0]}a=c}a==null&&(a=""),r=a}a=hn(r),i.defaultValue=a,c=i.textContent,c===a&&c!==""&&c!==null&&(i.value=c),Mo(i)}function Yn(i,r){if(r){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=r;return}}i.textContent=r}var lf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ja(i,r,a){var c=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":c?i.setProperty(r,a):typeof a!="number"||a===0||lf.has(r)?r==="float"?i.cssFloat=a:i[r]=(""+a).trim():i[r]=a+"px"}function Nu(i,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var y in r)c=r[y],r.hasOwnProperty(y)&&a[y]!==c&&ja(i,y,c)}else for(var _ in r)r.hasOwnProperty(_)&&ja(i,_,r[_])}function Za(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ci(i){return cf.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function zt(){}var Po=null;function Lo(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ki=null,Mn=null;function Mu(i){var r=Ji(i);if(r&&(i=r.stateNode)){var a=i[Qt]||null;e:switch(i=r.stateNode,r.type){case"input":if(Ls(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Et(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==i&&c.form===i.form){var y=c[Qt]||null;if(!y)throw Error(s(90));Ls(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<a.length;r++)c=a[r],c.form===i.form&&Wa(c)}break e;case"textarea":Gr(i,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&We(i,!!a.multiple,r,!1)}}}var el=!1;function Du(i,r,a){if(el)return i(r,a);el=!0;try{var c=i(r);return c}finally{if(el=!1,(Ki!==null||Mn!==null)&&(bc(),Ki&&(r=Ki,i=Mn,Mn=Ki=null,Mu(r),i)))for(r=0;r<i.length;r++)Mu(i[r])}}function Tn(i,r){var a=i.stateNode;if(a===null)return null;var c=a[Qt]||null;if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var ui=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tl=!1;if(ui)try{var Ii={};Object.defineProperty(Ii,"passive",{get:function(){tl=!0}}),window.addEventListener("test",Ii,Ii),window.removeEventListener("test",Ii,Ii)}catch{tl=!1}var Dn=null,Uo=null,wi=null;function Vs(){if(wi)return wi;var i,r=Uo,a=r.length,c,y="value"in Dn?Dn.value:Dn.textContent,_=y.length;for(i=0;i<a&&r[i]===y[i];i++);var C=a-i;for(c=1;c<=C&&r[a-c]===y[_-c];c++);return wi=y.slice(i,1<c?1-c:void 0)}function Jr(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function Os(){return!0}function ht(){return!1}function sn(i){function r(a,c,y,_,C){this._reactName=a,this._targetInst=y,this.type=c,this.nativeEvent=_,this.target=C,this.currentTarget=null;for(var w in i)i.hasOwnProperty(w)&&(a=i[w],this[w]=a?a(_):_[w]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Os:ht,this.isPropagationStopped=ht,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Os)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Os)},persist:function(){},isPersistent:Os}),r}var $i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yr=sn($i),qs=T({},$i,{view:0,detail:0}),ku=sn(qs),Bs,Vo,pn,Kr=T({},qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hs,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==pn&&(pn&&i.type==="mousemove"?(Bs=i.screenX-pn.screenX,Vo=i.screenY-pn.screenY):Vo=Bs=0,pn=i),Bs)},movementY:function(i){return"movementY"in i?i.movementY:Vo}}),Pu=sn(Kr),$r=T({},Kr,{dataTransfer:0}),Lu=sn($r),nl=T({},qs,{relatedTarget:0}),Fs=sn(nl),Uu=T({},$i,{animationName:0,elapsedTime:0,pseudoElement:0}),Oo=sn(Uu),df=T({},$i,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Vu=sn(df),Qr=T({},$i,{data:0}),il=sn(Qr),Ou={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qu(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=rl[i])?!!r[i]:!1}function Hs(){return qu}var Bu=T({},qs,{key:function(i){if(i.key){var r=Ou[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Jr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?sl[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hs,charCode:function(i){return i.type==="keypress"?Jr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Jr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Fu=sn(Bu),Qi=T({},Kr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ol=sn(Qi),Hu=T({},qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hs}),zu=sn(Hu),Gu=T({},$i,{propertyName:0,elapsedTime:0,pseudoElement:0}),qo=sn(Gu),mn=T({},Kr,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Ju=sn(mn),Yu=T({},$i,{newState:0,oldState:0}),zs=sn(Yu),h=[9,13,27,32],E=ui&&"CompositionEvent"in window,I=null;ui&&"documentMode"in document&&(I=document.documentMode);var b=ui&&"TextEvent"in window&&!I,H=ui&&(!E||I&&8<I&&11>=I),X=" ",ae=!1;function nt(i,r){switch(i){case"keyup":return h.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dt(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Pe=!1;function Gt(i,r){switch(i){case"compositionend":return Dt(r);case"keypress":return r.which!==32?null:(ae=!0,X);case"textInput":return i=r.data,i===X&&ae?null:i;default:return null}}function Jt(i,r){if(Pe)return i==="compositionend"||!E&&nt(i,r)?(i=Vs(),wi=Uo=Dn=null,Pe=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return H&&r.locale!=="ko"?null:r.data;default:return null}}var Gs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function En(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!Gs[i.type]:r==="textarea"}function Xr(i,r,a,c){Ki?Mn?Mn.push(c):Mn=[c]:Ki=c,r=Lc(r,"onChange"),0<r.length&&(a=new Yr("onChange","change",null,a,c),i.push({event:a,listeners:r}))}var Xi=null,al=null;function $C(i){z_(i,0)}function Ku(i){var r=Hr(i);if(Wa(r))return i}function lg(i,r){if(i==="change")return r}var ug=!1;if(ui){var ff;if(ui){var hf="oninput"in document;if(!hf){var cg=document.createElement("div");cg.setAttribute("oninput","return;"),hf=typeof cg.oninput=="function"}ff=hf}else ff=!1;ug=ff&&(!document.documentMode||9<document.documentMode)}function dg(){Xi&&(Xi.detachEvent("onpropertychange",fg),al=Xi=null)}function fg(i){if(i.propertyName==="value"&&Ku(al)){var r=[];Xr(r,al,i,Lo(i)),Du($C,r)}}function QC(i,r,a){i==="focusin"?(dg(),Xi=r,al=a,Xi.attachEvent("onpropertychange",fg)):i==="focusout"&&dg()}function XC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ku(al)}function WC(i,r){if(i==="click")return Ku(r)}function jC(i,r){if(i==="input"||i==="change")return Ku(r)}function ZC(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var kn=typeof Object.is=="function"?Object.is:ZC;function ll(i,r){if(kn(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var a=Object.keys(i),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var y=a[c];if(!Cs.call(r,y)||!kn(i[y],r[y]))return!1}return!0}function hg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function pg(i,r){var a=hg(i);i=0;for(var c;a;){if(a.nodeType===3){if(c=i+a.textContent.length,i<=r&&c>=r)return{node:a,offset:r-i};i=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=hg(a)}}function mg(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?mg(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function gg(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=Do(i.document);r instanceof i.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)i=r.contentWindow;else break;r=Do(i.document)}return r}function pf(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var eI=ui&&"documentMode"in document&&11>=document.documentMode,Bo=null,mf=null,ul=null,gf=!1;function yg(i,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;gf||Bo==null||Bo!==Do(c)||(c=Bo,"selectionStart"in c&&pf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ul&&ll(ul,c)||(ul=c,c=Lc(mf,"onSelect"),0<c.length&&(r=new Yr("onSelect","select",null,r,a),i.push({event:r,listeners:c}),r.target=Bo)))}function Wr(i,r){var a={};return a[i.toLowerCase()]=r.toLowerCase(),a["Webkit"+i]="webkit"+r,a["Moz"+i]="moz"+r,a}var Fo={animationend:Wr("Animation","AnimationEnd"),animationiteration:Wr("Animation","AnimationIteration"),animationstart:Wr("Animation","AnimationStart"),transitionrun:Wr("Transition","TransitionRun"),transitionstart:Wr("Transition","TransitionStart"),transitioncancel:Wr("Transition","TransitionCancel"),transitionend:Wr("Transition","TransitionEnd")},yf={},_g={};ui&&(_g=document.createElement("div").style,"AnimationEvent"in window||(delete Fo.animationend.animation,delete Fo.animationiteration.animation,delete Fo.animationstart.animation),"TransitionEvent"in window||delete Fo.transitionend.transition);function jr(i){if(yf[i])return yf[i];if(!Fo[i])return i;var r=Fo[i],a;for(a in r)if(r.hasOwnProperty(a)&&a in _g)return yf[i]=r[a];return i}var vg=jr("animationend"),Tg=jr("animationiteration"),Eg=jr("animationstart"),tI=jr("transitionrun"),nI=jr("transitionstart"),iI=jr("transitioncancel"),Sg=jr("transitionend"),Ag=new Map,_f="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_f.push("scrollEnd");function ci(i,r){Ag.set(i,r),fn(r,[i])}var $u=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Kn=[],Ho=0,vf=0;function Qu(){for(var i=Ho,r=vf=Ho=0;r<i;){var a=Kn[r];Kn[r++]=null;var c=Kn[r];Kn[r++]=null;var y=Kn[r];Kn[r++]=null;var _=Kn[r];if(Kn[r++]=null,c!==null&&y!==null){var C=c.pending;C===null?y.next=y:(y.next=C.next,C.next=y),c.pending=y}_!==0&&Cg(a,y,_)}}function Xu(i,r,a,c){Kn[Ho++]=i,Kn[Ho++]=r,Kn[Ho++]=a,Kn[Ho++]=c,vf|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function Tf(i,r,a,c){return Xu(i,r,a,c),Wu(i)}function Zr(i,r){return Xu(i,null,null,r),Wu(i)}function Cg(i,r,a){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a);for(var y=!1,_=i.return;_!==null;)_.childLanes|=a,c=_.alternate,c!==null&&(c.childLanes|=a),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(y=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,y&&r!==null&&(y=31-dn(a),i=_.hiddenUpdates,c=i[y],c===null?i[y]=[r]:c.push(r),r.lane=a|536870912),_):null}function Wu(i){if(50<Ml)throw Ml=0,xh=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var zo={};function sI(i,r,a,c){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(i,r,a,c){return new sI(i,r,a,c)}function Ef(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Wi(i,r){var a=i.alternate;return a===null?(a=Pn(i.tag,r,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=r,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,r=i.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function Ig(i,r){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,r=a.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function ju(i,r,a,c,y,_){var C=0;if(c=i,typeof i=="function")Ef(i)&&(C=1);else if(typeof i=="string")C=uw(i,a,he.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case x:return i=Pn(31,a,r,y),i.elementType=x,i.lanes=_,i;case z:return eo(a.children,y,_,r);case F:C=8,y|=24;break;case ne:return i=Pn(12,a,r,y|2),i.elementType=ne,i.lanes=_,i;case de:return i=Pn(13,a,r,y),i.elementType=de,i.lanes=_,i;case le:return i=Pn(19,a,r,y),i.elementType=le,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case W:C=10;break e;case K:C=9;break e;case ie:C=11;break e;case D:C=14;break e;case N:C=16,c=null;break e}C=29,a=Error(s(130,i===null?"null":typeof i,"")),c=null}return r=Pn(C,a,r,y),r.elementType=i,r.type=c,r.lanes=_,r}function eo(i,r,a,c){return i=Pn(7,i,c,r),i.lanes=a,i}function Sf(i,r,a){return i=Pn(6,i,null,r),i.lanes=a,i}function wg(i){var r=Pn(18,null,null,0);return r.stateNode=i,r}function Af(i,r,a){return r=Pn(4,i.children!==null?i.children:[],i.key,r),r.lanes=a,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var Rg=new WeakMap;function $n(i,r){if(typeof i=="object"&&i!==null){var a=Rg.get(i);return a!==void 0?a:(r={value:i,source:r,stack:bo(r)},Rg.set(i,r),r)}return{value:i,source:r,stack:bo(r)}}var Go=[],Jo=0,Zu=null,cl=0,Qn=[],Xn=0,Js=null,Ri=1,bi="";function ji(i,r){Go[Jo++]=cl,Go[Jo++]=Zu,Zu=i,cl=r}function bg(i,r,a){Qn[Xn++]=Ri,Qn[Xn++]=bi,Qn[Xn++]=Js,Js=i;var c=Ri;i=bi;var y=32-dn(c)-1;c&=~(1<<y),a+=1;var _=32-dn(r)+y;if(30<_){var C=y-y%5;_=(c&(1<<C)-1).toString(32),c>>=C,y-=C,Ri=1<<32-dn(r)+y|a<<y|c,bi=_+i}else Ri=1<<_|a<<y|c,bi=i}function Cf(i){i.return!==null&&(ji(i,1),bg(i,1,0))}function If(i){for(;i===Zu;)Zu=Go[--Jo],Go[Jo]=null,cl=Go[--Jo],Go[Jo]=null;for(;i===Js;)Js=Qn[--Xn],Qn[Xn]=null,bi=Qn[--Xn],Qn[Xn]=null,Ri=Qn[--Xn],Qn[Xn]=null}function xg(i,r){Qn[Xn++]=Ri,Qn[Xn++]=bi,Qn[Xn++]=Js,Ri=r.id,bi=r.overflow,Js=i}var Xt=null,pt=null,He=!1,Ys=null,Wn=!1,wf=Error(s(519));function Ks(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw dl($n(r,i)),wf}function Ng(i){var r=i.stateNode,a=i.type,c=i.memoizedProps;switch(r[Tt]=i,r[Qt]=c,a){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(a=0;a<kl.length;a++)Oe(kl[a],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":Oe("invalid",r),zr(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Oe("invalid",r);break;case"textarea":Oe("invalid",r),Us(r,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||c.suppressHydrationWarning===!0||K_(r.textContent,a)?(c.popover!=null&&(Oe("beforetoggle",r),Oe("toggle",r)),c.onScroll!=null&&Oe("scroll",r),c.onScrollEnd!=null&&Oe("scrollend",r),c.onClick!=null&&(r.onclick=zt),r=!0):r=!1,r||Ks(i,!0)}function Mg(i){for(Xt=i.return;Xt;)switch(Xt.tag){case 5:case 31:case 13:Wn=!1;return;case 27:case 3:Wn=!0;return;default:Xt=Xt.return}}function Yo(i){if(i!==Xt)return!1;if(!He)return Mg(i),He=!0,!1;var r=i.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||Gh(i.type,i.memoizedProps)),a=!a),a&&pt&&Ks(i),Mg(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));pt=nv(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));pt=nv(i)}else r===27?(r=pt,ar(i.type)?(i=Qh,Qh=null,pt=i):pt=r):pt=Xt?Zn(i.stateNode.nextSibling):null;return!0}function to(){pt=Xt=null,He=!1}function Rf(){var i=Ys;return i!==null&&(In===null?In=i:In.push.apply(In,i),Ys=null),i}function dl(i){Ys===null?Ys=[i]:Ys.push(i)}var bf=V(null),no=null,Zi=null;function $s(i,r,a){re(bf,r._currentValue),r._currentValue=a}function es(i){i._currentValue=bf.current,Z(bf)}function xf(i,r,a){for(;i!==null;){var c=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),i===a)break;i=i.return}}function Nf(i,r,a,c){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var _=y.dependencies;if(_!==null){var C=y.child;_=_.firstContext;e:for(;_!==null;){var w=_;_=y;for(var U=0;U<r.length;U++)if(w.context===r[U]){_.lanes|=a,w=_.alternate,w!==null&&(w.lanes|=a),xf(_.return,a,i),c||(C=null);break e}_=w.next}}else if(y.tag===18){if(C=y.return,C===null)throw Error(s(341));C.lanes|=a,_=C.alternate,_!==null&&(_.lanes|=a),xf(C,a,i),C=null}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===i){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}}function Ko(i,r,a,c){i=null;for(var y=r,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var C=y.alternate;if(C===null)throw Error(s(387));if(C=C.memoizedProps,C!==null){var w=y.type;kn(y.pendingProps.value,C.value)||(i!==null?i.push(w):i=[w])}}else if(y===ke.current){if(C=y.alternate,C===null)throw Error(s(387));C.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(Ol):i=[Ol])}y=y.return}i!==null&&Nf(r,i,a,c),r.flags|=262144}function ec(i){for(i=i.firstContext;i!==null;){if(!kn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function io(i){no=i,Zi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Wt(i){return Dg(no,i)}function tc(i,r){return no===null&&io(i),Dg(i,r)}function Dg(i,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Zi===null){if(i===null)throw Error(s(308));Zi=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else Zi=Zi.next=r;return a}var rI=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(a,c){i.push(c)}};this.abort=function(){r.aborted=!0,i.forEach(function(a){return a()})}},oI=n.unstable_scheduleCallback,aI=n.unstable_NormalPriority,kt={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mf(){return{controller:new rI,data:new Map,refCount:0}}function fl(i){i.refCount--,i.refCount===0&&oI(aI,function(){i.controller.abort()})}var hl=null,Df=0,$o=0,Qo=null;function lI(i,r){if(hl===null){var a=hl=[];Df=0,$o=Lh(),Qo={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Df++,r.then(kg,kg),r}function kg(){if(--Df===0&&hl!==null){Qo!==null&&(Qo.status="fulfilled");var i=hl;hl=null,$o=0,Qo=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function uI(i,r){var a=[],c={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return i.then(function(){c.status="fulfilled",c.value=r;for(var y=0;y<a.length;y++)(0,a[y])(r)},function(y){for(c.status="rejected",c.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),c}var Pg=$.S;$.S=function(i,r){y_=Xe(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&lI(i,r),Pg!==null&&Pg(i,r)};var so=V(null);function kf(){var i=so.current;return i!==null?i:dt.pooledCache}function nc(i,r){r===null?re(so,so.current):re(so,r.pool)}function Lg(){var i=kf();return i===null?null:{parent:kt._currentValue,pool:i}}var Xo=Error(s(460)),Pf=Error(s(474)),ic=Error(s(542)),sc={then:function(){}};function Ug(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Vg(i,r,a){switch(a=i[a],a===void 0?i.push(r):a!==r&&(r.then(zt,zt),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,qg(i),i;default:if(typeof r.status=="string")r.then(zt,zt);else{if(i=dt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(c){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=c}},function(c){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,qg(i),i}throw oo=r,Xo}}function ro(i){try{var r=i._init;return r(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(oo=a,Xo):a}}var oo=null;function Og(){if(oo===null)throw Error(s(459));var i=oo;return oo=null,i}function qg(i){if(i===Xo||i===ic)throw Error(s(483))}var Wo=null,pl=0;function rc(i){var r=pl;return pl+=1,Wo===null&&(Wo=[]),Vg(Wo,i,r)}function ml(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function oc(i,r){throw r.$$typeof===S?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function Bg(i){function r(B,O){if(i){var G=B.deletions;G===null?(B.deletions=[O],B.flags|=16):G.push(O)}}function a(B,O){if(!i)return null;for(;O!==null;)r(B,O),O=O.sibling;return null}function c(B){for(var O=new Map;B!==null;)B.key!==null?O.set(B.key,B):O.set(B.index,B),B=B.sibling;return O}function y(B,O){return B=Wi(B,O),B.index=0,B.sibling=null,B}function _(B,O,G){return B.index=G,i?(G=B.alternate,G!==null?(G=G.index,G<O?(B.flags|=67108866,O):G):(B.flags|=67108866,O)):(B.flags|=1048576,O)}function C(B){return i&&B.alternate===null&&(B.flags|=67108866),B}function w(B,O,G,ee){return O===null||O.tag!==6?(O=Sf(G,B.mode,ee),O.return=B,O):(O=y(O,G),O.return=B,O)}function U(B,O,G,ee){var ve=G.type;return ve===z?j(B,O,G.props.children,ee,G.key):O!==null&&(O.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===N&&ro(ve)===O.type)?(O=y(O,G.props),ml(O,G),O.return=B,O):(O=ju(G.type,G.key,G.props,null,B.mode,ee),ml(O,G),O.return=B,O)}function J(B,O,G,ee){return O===null||O.tag!==4||O.stateNode.containerInfo!==G.containerInfo||O.stateNode.implementation!==G.implementation?(O=Af(G,B.mode,ee),O.return=B,O):(O=y(O,G.children||[]),O.return=B,O)}function j(B,O,G,ee,ve){return O===null||O.tag!==7?(O=eo(G,B.mode,ee,ve),O.return=B,O):(O=y(O,G),O.return=B,O)}function te(B,O,G){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Sf(""+O,B.mode,G),O.return=B,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case R:return G=ju(O.type,O.key,O.props,null,B.mode,G),ml(G,O),G.return=B,G;case q:return O=Af(O,B.mode,G),O.return=B,O;case N:return O=ro(O),te(B,O,G)}if(Ie(O)||k(O))return O=eo(O,B.mode,G,null),O.return=B,O;if(typeof O.then=="function")return te(B,rc(O),G);if(O.$$typeof===W)return te(B,tc(B,O),G);oc(B,O)}return null}function Y(B,O,G,ee){var ve=O!==null?O.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return ve!==null?null:w(B,O,""+G,ee);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case R:return G.key===ve?U(B,O,G,ee):null;case q:return G.key===ve?J(B,O,G,ee):null;case N:return G=ro(G),Y(B,O,G,ee)}if(Ie(G)||k(G))return ve!==null?null:j(B,O,G,ee,null);if(typeof G.then=="function")return Y(B,O,rc(G),ee);if(G.$$typeof===W)return Y(B,O,tc(B,G),ee);oc(B,G)}return null}function Q(B,O,G,ee,ve){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return B=B.get(G)||null,w(O,B,""+ee,ve);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case R:return B=B.get(ee.key===null?G:ee.key)||null,U(O,B,ee,ve);case q:return B=B.get(ee.key===null?G:ee.key)||null,J(O,B,ee,ve);case N:return ee=ro(ee),Q(B,O,G,ee,ve)}if(Ie(ee)||k(ee))return B=B.get(G)||null,j(O,B,ee,ve,null);if(typeof ee.then=="function")return Q(B,O,G,rc(ee),ve);if(ee.$$typeof===W)return Q(B,O,G,tc(O,ee),ve);oc(O,ee)}return null}function me(B,O,G,ee){for(var ve=null,je=null,ye=O,Me=O=0,Be=null;ye!==null&&Me<G.length;Me++){ye.index>Me?(Be=ye,ye=null):Be=ye.sibling;var Ze=Y(B,ye,G[Me],ee);if(Ze===null){ye===null&&(ye=Be);break}i&&ye&&Ze.alternate===null&&r(B,ye),O=_(Ze,O,Me),je===null?ve=Ze:je.sibling=Ze,je=Ze,ye=Be}if(Me===G.length)return a(B,ye),He&&ji(B,Me),ve;if(ye===null){for(;Me<G.length;Me++)ye=te(B,G[Me],ee),ye!==null&&(O=_(ye,O,Me),je===null?ve=ye:je.sibling=ye,je=ye);return He&&ji(B,Me),ve}for(ye=c(ye);Me<G.length;Me++)Be=Q(ye,B,Me,G[Me],ee),Be!==null&&(i&&Be.alternate!==null&&ye.delete(Be.key===null?Me:Be.key),O=_(Be,O,Me),je===null?ve=Be:je.sibling=Be,je=Be);return i&&ye.forEach(function(fr){return r(B,fr)}),He&&ji(B,Me),ve}function Ee(B,O,G,ee){if(G==null)throw Error(s(151));for(var ve=null,je=null,ye=O,Me=O=0,Be=null,Ze=G.next();ye!==null&&!Ze.done;Me++,Ze=G.next()){ye.index>Me?(Be=ye,ye=null):Be=ye.sibling;var fr=Y(B,ye,Ze.value,ee);if(fr===null){ye===null&&(ye=Be);break}i&&ye&&fr.alternate===null&&r(B,ye),O=_(fr,O,Me),je===null?ve=fr:je.sibling=fr,je=fr,ye=Be}if(Ze.done)return a(B,ye),He&&ji(B,Me),ve;if(ye===null){for(;!Ze.done;Me++,Ze=G.next())Ze=te(B,Ze.value,ee),Ze!==null&&(O=_(Ze,O,Me),je===null?ve=Ze:je.sibling=Ze,je=Ze);return He&&ji(B,Me),ve}for(ye=c(ye);!Ze.done;Me++,Ze=G.next())Ze=Q(ye,B,Me,Ze.value,ee),Ze!==null&&(i&&Ze.alternate!==null&&ye.delete(Ze.key===null?Me:Ze.key),O=_(Ze,O,Me),je===null?ve=Ze:je.sibling=Ze,je=Ze);return i&&ye.forEach(function(Tw){return r(B,Tw)}),He&&ji(B,Me),ve}function at(B,O,G,ee){if(typeof G=="object"&&G!==null&&G.type===z&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case R:e:{for(var ve=G.key;O!==null;){if(O.key===ve){if(ve=G.type,ve===z){if(O.tag===7){a(B,O.sibling),ee=y(O,G.props.children),ee.return=B,B=ee;break e}}else if(O.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===N&&ro(ve)===O.type){a(B,O.sibling),ee=y(O,G.props),ml(ee,G),ee.return=B,B=ee;break e}a(B,O);break}else r(B,O);O=O.sibling}G.type===z?(ee=eo(G.props.children,B.mode,ee,G.key),ee.return=B,B=ee):(ee=ju(G.type,G.key,G.props,null,B.mode,ee),ml(ee,G),ee.return=B,B=ee)}return C(B);case q:e:{for(ve=G.key;O!==null;){if(O.key===ve)if(O.tag===4&&O.stateNode.containerInfo===G.containerInfo&&O.stateNode.implementation===G.implementation){a(B,O.sibling),ee=y(O,G.children||[]),ee.return=B,B=ee;break e}else{a(B,O);break}else r(B,O);O=O.sibling}ee=Af(G,B.mode,ee),ee.return=B,B=ee}return C(B);case N:return G=ro(G),at(B,O,G,ee)}if(Ie(G))return me(B,O,G,ee);if(k(G)){if(ve=k(G),typeof ve!="function")throw Error(s(150));return G=ve.call(G),Ee(B,O,G,ee)}if(typeof G.then=="function")return at(B,O,rc(G),ee);if(G.$$typeof===W)return at(B,O,tc(B,G),ee);oc(B,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,O!==null&&O.tag===6?(a(B,O.sibling),ee=y(O,G),ee.return=B,B=ee):(a(B,O),ee=Sf(G,B.mode,ee),ee.return=B,B=ee),C(B)):a(B,O)}return function(B,O,G,ee){try{pl=0;var ve=at(B,O,G,ee);return Wo=null,ve}catch(ye){if(ye===Xo||ye===ic)throw ye;var je=Pn(29,ye,null,B.mode);return je.lanes=ee,je.return=B,je}finally{}}}var ao=Bg(!0),Fg=Bg(!1),Qs=!1;function Lf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Uf(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Xs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ws(i,r,a){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(tt&2)!==0){var y=c.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),c.pending=r,r=Wu(i),Cg(i,null,a),r}return Xu(i,c,r,a),Wu(i)}function gl(i,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var c=r.lanes;c&=i.pendingLanes,a|=c,r.lanes=a,xs(i,a)}}function Vf(i,r){var a=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var y=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var C={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};_===null?y=_=C:_=_.next=C,a=a.next}while(a!==null);_===null?y=_=r:_=_.next=r}else y=_=r;a={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=r:i.next=r,a.lastBaseUpdate=r}var Of=!1;function yl(){if(Of){var i=Qo;if(i!==null)throw i}}function _l(i,r,a,c){Of=!1;var y=i.updateQueue;Qs=!1;var _=y.firstBaseUpdate,C=y.lastBaseUpdate,w=y.shared.pending;if(w!==null){y.shared.pending=null;var U=w,J=U.next;U.next=null,C===null?_=J:C.next=J,C=U;var j=i.alternate;j!==null&&(j=j.updateQueue,w=j.lastBaseUpdate,w!==C&&(w===null?j.firstBaseUpdate=J:w.next=J,j.lastBaseUpdate=U))}if(_!==null){var te=y.baseState;C=0,j=J=U=null,w=_;do{var Y=w.lane&-536870913,Q=Y!==w.lane;if(Q?(qe&Y)===Y:(c&Y)===Y){Y!==0&&Y===$o&&(Of=!0),j!==null&&(j=j.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var me=i,Ee=w;Y=r;var at=a;switch(Ee.tag){case 1:if(me=Ee.payload,typeof me=="function"){te=me.call(at,te,Y);break e}te=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=Ee.payload,Y=typeof me=="function"?me.call(at,te,Y):me,Y==null)break e;te=T({},te,Y);break e;case 2:Qs=!0}}Y=w.callback,Y!==null&&(i.flags|=64,Q&&(i.flags|=8192),Q=y.callbacks,Q===null?y.callbacks=[Y]:Q.push(Y))}else Q={lane:Y,tag:w.tag,payload:w.payload,callback:w.callback,next:null},j===null?(J=j=Q,U=te):j=j.next=Q,C|=Y;if(w=w.next,w===null){if(w=y.shared.pending,w===null)break;Q=w,w=Q.next,Q.next=null,y.lastBaseUpdate=Q,y.shared.pending=null}}while(!0);j===null&&(U=te),y.baseState=U,y.firstBaseUpdate=J,y.lastBaseUpdate=j,_===null&&(y.shared.lanes=0),nr|=C,i.lanes=C,i.memoizedState=te}}function Hg(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function zg(i,r){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)Hg(a[i],r)}var jo=V(null),ac=V(0);function Gg(i,r){i=us,re(ac,i),re(jo,r),us=i|r.baseLanes}function qf(){re(ac,us),re(jo,jo.current)}function Bf(){us=ac.current,Z(jo),Z(ac)}var Ln=V(null),jn=null;function js(i){var r=i.alternate;re(Rt,Rt.current&1),re(Ln,i),jn===null&&(r===null||jo.current!==null||r.memoizedState!==null)&&(jn=i)}function Ff(i){re(Rt,Rt.current),re(Ln,i),jn===null&&(jn=i)}function Jg(i){i.tag===22?(re(Rt,Rt.current),re(Ln,i),jn===null&&(jn=i)):Zs()}function Zs(){re(Rt,Rt.current),re(Ln,Ln.current)}function Un(i){Z(Ln),jn===i&&(jn=null),Z(Rt)}var Rt=V(0);function lc(i){for(var r=i;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Kh(a)||$h(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ts=0,Ne=null,rt=null,Pt=null,uc=!1,Zo=!1,lo=!1,cc=0,vl=0,ea=null,cI=0;function St(){throw Error(s(321))}function Hf(i,r){if(r===null)return!1;for(var a=0;a<r.length&&a<i.length;a++)if(!kn(i[a],r[a]))return!1;return!0}function zf(i,r,a,c,y,_){return ts=_,Ne=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,$.H=i===null||i.memoizedState===null?by:sh,lo=!1,_=a(c,y),lo=!1,Zo&&(_=Kg(r,a,c,y)),Yg(i),_}function Yg(i){$.H=Sl;var r=rt!==null&&rt.next!==null;if(ts=0,Pt=rt=Ne=null,uc=!1,vl=0,ea=null,r)throw Error(s(300));i===null||Lt||(i=i.dependencies,i!==null&&ec(i)&&(Lt=!0))}function Kg(i,r,a,c){Ne=i;var y=0;do{if(Zo&&(ea=null),vl=0,Zo=!1,25<=y)throw Error(s(301));if(y+=1,Pt=rt=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}$.H=xy,_=r(a,c)}while(Zo);return _}function dI(){var i=$.H,r=i.useState()[0];return r=typeof r.then=="function"?Tl(r):r,i=i.useState()[0],(rt!==null?rt.memoizedState:null)!==i&&(Ne.flags|=1024),r}function Gf(){var i=cc!==0;return cc=0,i}function Jf(i,r,a){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~a}function Yf(i){if(uc){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}uc=!1}ts=0,Pt=rt=Ne=null,Zo=!1,vl=cc=0,ea=null}function gn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?Ne.memoizedState=Pt=i:Pt=Pt.next=i,Pt}function bt(){if(rt===null){var i=Ne.alternate;i=i!==null?i.memoizedState:null}else i=rt.next;var r=Pt===null?Ne.memoizedState:Pt.next;if(r!==null)Pt=r,rt=i;else{if(i===null)throw Ne.alternate===null?Error(s(467)):Error(s(310));rt=i,i={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},Pt===null?Ne.memoizedState=Pt=i:Pt=Pt.next=i}return Pt}function dc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tl(i){var r=vl;return vl+=1,ea===null&&(ea=[]),i=Vg(ea,i,r),r=Ne,(Pt===null?r.memoizedState:Pt.next)===null&&(r=r.alternate,$.H=r===null||r.memoizedState===null?by:sh),i}function fc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Tl(i);if(i.$$typeof===W)return Wt(i)}throw Error(s(438,String(i)))}function Kf(i){var r=null,a=Ne.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var c=Ne.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=dc(),Ne.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(i),c=0;c<i;c++)a[c]=L;return r.index++,a}function ns(i,r){return typeof r=="function"?r(i):r}function hc(i){var r=bt();return $f(r,rt,i)}function $f(i,r,a){var c=i.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=a;var y=i.baseQueue,_=c.pending;if(_!==null){if(y!==null){var C=y.next;y.next=_.next,_.next=C}r.baseQueue=y=_,c.pending=null}if(_=i.baseState,y===null)i.memoizedState=_;else{r=y.next;var w=C=null,U=null,J=r,j=!1;do{var te=J.lane&-536870913;if(te!==J.lane?(qe&te)===te:(ts&te)===te){var Y=J.revertLane;if(Y===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),te===$o&&(j=!0);else if((ts&Y)===Y){J=J.next,Y===$o&&(j=!0);continue}else te={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},U===null?(w=U=te,C=_):U=U.next=te,Ne.lanes|=Y,nr|=Y;te=J.action,lo&&a(_,te),_=J.hasEagerState?J.eagerState:a(_,te)}else Y={lane:te,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},U===null?(w=U=Y,C=_):U=U.next=Y,Ne.lanes|=te,nr|=te;J=J.next}while(J!==null&&J!==r);if(U===null?C=_:U.next=w,!kn(_,i.memoizedState)&&(Lt=!0,j&&(a=Qo,a!==null)))throw a;i.memoizedState=_,i.baseState=C,i.baseQueue=U,c.lastRenderedState=_}return y===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function Qf(i){var r=bt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var c=a.dispatch,y=a.pending,_=r.memoizedState;if(y!==null){a.pending=null;var C=y=y.next;do _=i(_,C.action),C=C.next;while(C!==y);kn(_,r.memoizedState)||(Lt=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),a.lastRenderedState=_}return[_,c]}function $g(i,r,a){var c=Ne,y=bt(),_=He;if(_){if(a===void 0)throw Error(s(407));a=a()}else a=r();var C=!kn((rt||y).memoizedState,a);if(C&&(y.memoizedState=a,Lt=!0),y=y.queue,jf(Wg.bind(null,c,y,i),[i]),y.getSnapshot!==r||C||Pt!==null&&Pt.memoizedState.tag&1){if(c.flags|=2048,ta(9,{destroy:void 0},Xg.bind(null,c,y,a,r),null),dt===null)throw Error(s(349));_||(ts&127)!==0||Qg(c,r,a)}return a}function Qg(i,r,a){i.flags|=16384,i={getSnapshot:r,value:a},r=Ne.updateQueue,r===null?(r=dc(),Ne.updateQueue=r,r.stores=[i]):(a=r.stores,a===null?r.stores=[i]:a.push(i))}function Xg(i,r,a,c){r.value=a,r.getSnapshot=c,jg(r)&&Zg(i)}function Wg(i,r,a){return a(function(){jg(r)&&Zg(i)})}function jg(i){var r=i.getSnapshot;i=i.value;try{var a=r();return!kn(i,a)}catch{return!0}}function Zg(i){var r=Zr(i,2);r!==null&&wn(r,i,2)}function Xf(i){var r=gn();if(typeof i=="function"){var a=i;if(i=a(),lo){zn(!0);try{a()}finally{zn(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:i},r}function ey(i,r,a,c){return i.baseState=a,$f(i,rt,typeof c=="function"?c:ns)}function fI(i,r,a,c,y){if(gc(i))throw Error(s(485));if(i=r.action,i!==null){var _={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){_.listeners.push(C)}};$.T!==null?a(!0):_.isTransition=!1,c(_),a=r.pending,a===null?(_.next=r.pending=_,ty(r,_)):(_.next=a.next,r.pending=a.next=_)}}function ty(i,r){var a=r.action,c=r.payload,y=i.state;if(r.isTransition){var _=$.T,C={};$.T=C;try{var w=a(y,c),U=$.S;U!==null&&U(C,w),ny(i,r,w)}catch(J){Wf(i,r,J)}finally{_!==null&&C.types!==null&&(_.types=C.types),$.T=_}}else try{_=a(y,c),ny(i,r,_)}catch(J){Wf(i,r,J)}}function ny(i,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){iy(i,r,c)},function(c){return Wf(i,r,c)}):iy(i,r,a)}function iy(i,r,a){r.status="fulfilled",r.value=a,sy(r),i.state=a,r=i.pending,r!==null&&(a=r.next,a===r?i.pending=null:(a=a.next,r.next=a,ty(i,a)))}function Wf(i,r,a){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=a,sy(r),r=r.next;while(r!==c)}i.action=null}function sy(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function ry(i,r){return r}function oy(i,r){if(He){var a=dt.formState;if(a!==null){e:{var c=Ne;if(He){if(pt){t:{for(var y=pt,_=Wn;y.nodeType!==8;){if(!_){y=null;break t}if(y=Zn(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){pt=Zn(y.nextSibling),c=y.data==="F!";break e}}Ks(c)}c=!1}c&&(r=a[0])}}return a=gn(),a.memoizedState=a.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ry,lastRenderedState:r},a.queue=c,a=Iy.bind(null,Ne,c),c.dispatch=a,c=Xf(!1),_=ih.bind(null,Ne,!1,c.queue),c=gn(),y={state:r,dispatch:null,action:i,pending:null},c.queue=y,a=fI.bind(null,Ne,y,_,a),y.dispatch=a,c.memoizedState=i,[r,a,!1]}function ay(i){var r=bt();return ly(r,rt,i)}function ly(i,r,a){if(r=$f(i,r,ry)[0],i=hc(ns)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=Tl(r)}catch(C){throw C===Xo?ic:C}else c=r;r=bt();var y=r.queue,_=y.dispatch;return a!==r.memoizedState&&(Ne.flags|=2048,ta(9,{destroy:void 0},hI.bind(null,y,a),null)),[c,_,i]}function hI(i,r){i.action=r}function uy(i){var r=bt(),a=rt;if(a!==null)return ly(r,a,i);bt(),r=r.memoizedState,a=bt();var c=a.queue.dispatch;return a.memoizedState=i,[r,c,!1]}function ta(i,r,a,c){return i={tag:i,create:a,deps:c,inst:r,next:null},r=Ne.updateQueue,r===null&&(r=dc(),Ne.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=i.next=i:(c=a.next,a.next=i,i.next=c,r.lastEffect=i),i}function cy(){return bt().memoizedState}function pc(i,r,a,c){var y=gn();Ne.flags|=i,y.memoizedState=ta(1|r,{destroy:void 0},a,c===void 0?null:c)}function mc(i,r,a,c){var y=bt();c=c===void 0?null:c;var _=y.memoizedState.inst;rt!==null&&c!==null&&Hf(c,rt.memoizedState.deps)?y.memoizedState=ta(r,_,a,c):(Ne.flags|=i,y.memoizedState=ta(1|r,_,a,c))}function dy(i,r){pc(8390656,8,i,r)}function jf(i,r){mc(2048,8,i,r)}function pI(i){Ne.flags|=4;var r=Ne.updateQueue;if(r===null)r=dc(),Ne.updateQueue=r,r.events=[i];else{var a=r.events;a===null?r.events=[i]:a.push(i)}}function fy(i){var r=bt().memoizedState;return pI({ref:r,nextImpl:i}),function(){if((tt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function hy(i,r){return mc(4,2,i,r)}function py(i,r){return mc(4,4,i,r)}function my(i,r){if(typeof r=="function"){i=i();var a=r(i);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function gy(i,r,a){a=a!=null?a.concat([i]):null,mc(4,4,my.bind(null,r,i),a)}function Zf(){}function yy(i,r){var a=bt();r=r===void 0?null:r;var c=a.memoizedState;return r!==null&&Hf(r,c[1])?c[0]:(a.memoizedState=[i,r],i)}function _y(i,r){var a=bt();r=r===void 0?null:r;var c=a.memoizedState;if(r!==null&&Hf(r,c[1]))return c[0];if(c=i(),lo){zn(!0);try{i()}finally{zn(!1)}}return a.memoizedState=[c,r],c}function eh(i,r,a){return a===void 0||(ts&1073741824)!==0&&(qe&261930)===0?i.memoizedState=r:(i.memoizedState=a,i=v_(),Ne.lanes|=i,nr|=i,a)}function vy(i,r,a,c){return kn(a,r)?a:jo.current!==null?(i=eh(i,a,c),kn(i,r)||(Lt=!0),i):(ts&42)===0||(ts&1073741824)!==0&&(qe&261930)===0?(Lt=!0,i.memoizedState=a):(i=v_(),Ne.lanes|=i,nr|=i,r)}function Ty(i,r,a,c,y){var _=oe.p;oe.p=_!==0&&8>_?_:8;var C=$.T,w={};$.T=w,ih(i,!1,r,a);try{var U=y(),J=$.S;if(J!==null&&J(w,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var j=uI(U,c);El(i,r,j,qn(i))}else El(i,r,c,qn(i))}catch(te){El(i,r,{then:function(){},status:"rejected",reason:te},qn())}finally{oe.p=_,C!==null&&w.types!==null&&(C.types=w.types),$.T=C}}function mI(){}function th(i,r,a,c){if(i.tag!==5)throw Error(s(476));var y=Ey(i).queue;Ty(i,y,r,_e,a===null?mI:function(){return Sy(i),a(c)})}function Ey(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:_e},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:a},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function Sy(i){var r=Ey(i);r.next===null&&(r=i.alternate.memoizedState),El(i,r.next.queue,{},qn())}function nh(){return Wt(Ol)}function Ay(){return bt().memoizedState}function Cy(){return bt().memoizedState}function gI(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var a=qn();i=Xs(a);var c=Ws(r,i,a);c!==null&&(wn(c,r,a),gl(c,r,a)),r={cache:Mf()},i.payload=r;return}r=r.return}}function yI(i,r,a){var c=qn();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},gc(i)?wy(r,a):(a=Tf(i,r,a,c),a!==null&&(wn(a,i,c),Ry(a,r,c)))}function Iy(i,r,a){var c=qn();El(i,r,a,c)}function El(i,r,a,c){var y={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(gc(i))wy(r,y);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var C=r.lastRenderedState,w=_(C,a);if(y.hasEagerState=!0,y.eagerState=w,kn(w,C))return Xu(i,r,y,0),dt===null&&Qu(),!1}catch{}finally{}if(a=Tf(i,r,y,c),a!==null)return wn(a,i,c),Ry(a,r,c),!0}return!1}function ih(i,r,a,c){if(c={lane:2,revertLane:Lh(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},gc(i)){if(r)throw Error(s(479))}else r=Tf(i,a,c,2),r!==null&&wn(r,i,2)}function gc(i){var r=i.alternate;return i===Ne||r!==null&&r===Ne}function wy(i,r){Zo=uc=!0;var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}function Ry(i,r,a){if((a&4194048)!==0){var c=r.lanes;c&=i.pendingLanes,a|=c,r.lanes=a,xs(i,a)}}var Sl={readContext:Wt,use:fc,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St};Sl.useEffectEvent=St;var by={readContext:Wt,use:fc,useCallback:function(i,r){return gn().memoizedState=[i,r===void 0?null:r],i},useContext:Wt,useEffect:dy,useImperativeHandle:function(i,r,a){a=a!=null?a.concat([i]):null,pc(4194308,4,my.bind(null,r,i),a)},useLayoutEffect:function(i,r){return pc(4194308,4,i,r)},useInsertionEffect:function(i,r){pc(4,2,i,r)},useMemo:function(i,r){var a=gn();r=r===void 0?null:r;var c=i();if(lo){zn(!0);try{i()}finally{zn(!1)}}return a.memoizedState=[c,r],c},useReducer:function(i,r,a){var c=gn();if(a!==void 0){var y=a(r);if(lo){zn(!0);try{a(r)}finally{zn(!1)}}}else y=r;return c.memoizedState=c.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},c.queue=i,i=i.dispatch=yI.bind(null,Ne,i),[c.memoizedState,i]},useRef:function(i){var r=gn();return i={current:i},r.memoizedState=i},useState:function(i){i=Xf(i);var r=i.queue,a=Iy.bind(null,Ne,r);return r.dispatch=a,[i.memoizedState,a]},useDebugValue:Zf,useDeferredValue:function(i,r){var a=gn();return eh(a,i,r)},useTransition:function(){var i=Xf(!1);return i=Ty.bind(null,Ne,i.queue,!0,!1),gn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,a){var c=Ne,y=gn();if(He){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),dt===null)throw Error(s(349));(qe&127)!==0||Qg(c,r,a)}y.memoizedState=a;var _={value:a,getSnapshot:r};return y.queue=_,dy(Wg.bind(null,c,_,i),[i]),c.flags|=2048,ta(9,{destroy:void 0},Xg.bind(null,c,_,a,r),null),a},useId:function(){var i=gn(),r=dt.identifierPrefix;if(He){var a=bi,c=Ri;a=(c&~(1<<32-dn(c)-1)).toString(32)+a,r="_"+r+"R_"+a,a=cc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=cI++,r="_"+r+"r_"+a.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:nh,useFormState:oy,useActionState:oy,useOptimistic:function(i){var r=gn();r.memoizedState=r.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=ih.bind(null,Ne,!0,a),a.dispatch=r,[i,r]},useMemoCache:Kf,useCacheRefresh:function(){return gn().memoizedState=gI.bind(null,Ne)},useEffectEvent:function(i){var r=gn(),a={impl:i};return r.memoizedState=a,function(){if((tt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},sh={readContext:Wt,use:fc,useCallback:yy,useContext:Wt,useEffect:jf,useImperativeHandle:gy,useInsertionEffect:hy,useLayoutEffect:py,useMemo:_y,useReducer:hc,useRef:cy,useState:function(){return hc(ns)},useDebugValue:Zf,useDeferredValue:function(i,r){var a=bt();return vy(a,rt.memoizedState,i,r)},useTransition:function(){var i=hc(ns)[0],r=bt().memoizedState;return[typeof i=="boolean"?i:Tl(i),r]},useSyncExternalStore:$g,useId:Ay,useHostTransitionStatus:nh,useFormState:ay,useActionState:ay,useOptimistic:function(i,r){var a=bt();return ey(a,rt,i,r)},useMemoCache:Kf,useCacheRefresh:Cy};sh.useEffectEvent=fy;var xy={readContext:Wt,use:fc,useCallback:yy,useContext:Wt,useEffect:jf,useImperativeHandle:gy,useInsertionEffect:hy,useLayoutEffect:py,useMemo:_y,useReducer:Qf,useRef:cy,useState:function(){return Qf(ns)},useDebugValue:Zf,useDeferredValue:function(i,r){var a=bt();return rt===null?eh(a,i,r):vy(a,rt.memoizedState,i,r)},useTransition:function(){var i=Qf(ns)[0],r=bt().memoizedState;return[typeof i=="boolean"?i:Tl(i),r]},useSyncExternalStore:$g,useId:Ay,useHostTransitionStatus:nh,useFormState:uy,useActionState:uy,useOptimistic:function(i,r){var a=bt();return rt!==null?ey(a,rt,i,r):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:Kf,useCacheRefresh:Cy};xy.useEffectEvent=fy;function rh(i,r,a,c){r=i.memoizedState,a=a(c,r),a=a==null?r:T({},r,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var oh={enqueueSetState:function(i,r,a){i=i._reactInternals;var c=qn(),y=Xs(c);y.payload=r,a!=null&&(y.callback=a),r=Ws(i,y,c),r!==null&&(wn(r,i,c),gl(r,i,c))},enqueueReplaceState:function(i,r,a){i=i._reactInternals;var c=qn(),y=Xs(c);y.tag=1,y.payload=r,a!=null&&(y.callback=a),r=Ws(i,y,c),r!==null&&(wn(r,i,c),gl(r,i,c))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var a=qn(),c=Xs(a);c.tag=2,r!=null&&(c.callback=r),r=Ws(i,c,a),r!==null&&(wn(r,i,a),gl(r,i,a))}};function Ny(i,r,a,c,y,_,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,_,C):r.prototype&&r.prototype.isPureReactComponent?!ll(a,c)||!ll(y,_):!0}function My(i,r,a,c){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==i&&oh.enqueueReplaceState(r,r.state,null)}function uo(i,r){var a=r;if("ref"in r){a={};for(var c in r)c!=="ref"&&(a[c]=r[c])}if(i=i.defaultProps){a===r&&(a=T({},a));for(var y in i)a[y]===void 0&&(a[y]=i[y])}return a}function Dy(i){$u(i)}function ky(i){console.error(i)}function Py(i){$u(i)}function yc(i,r){try{var a=i.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function Ly(i,r,a){try{var c=i.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function ah(i,r,a){return a=Xs(a),a.tag=3,a.payload={element:null},a.callback=function(){yc(i,r)},a}function Uy(i){return i=Xs(i),i.tag=3,i}function Vy(i,r,a,c){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var _=c.value;i.payload=function(){return y(_)},i.callback=function(){Ly(r,a,c)}}var C=a.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(i.callback=function(){Ly(r,a,c),typeof y!="function"&&(ir===null?ir=new Set([this]):ir.add(this));var w=c.stack;this.componentDidCatch(c.value,{componentStack:w!==null?w:""})})}function _I(i,r,a,c,y){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=a.alternate,r!==null&&Ko(r,a,y,!0),a=Ln.current,a!==null){switch(a.tag){case 31:case 13:return jn===null?xc():a.alternate===null&&At===0&&(At=3),a.flags&=-257,a.flags|=65536,a.lanes=y,c===sc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([c]):r.add(c),Dh(i,c,y)),!1;case 22:return a.flags|=65536,c===sc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([c]):a.add(c)),Dh(i,c,y)),!1}throw Error(s(435,a.tag))}return Dh(i,c,y),xc(),!1}if(He)return r=Ln.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,c!==wf&&(i=Error(s(422),{cause:c}),dl($n(i,a)))):(c!==wf&&(r=Error(s(423),{cause:c}),dl($n(r,a))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,c=$n(c,a),y=ah(i.stateNode,c,y),Vf(i,y),At!==4&&(At=2)),!1;var _=Error(s(520),{cause:c});if(_=$n(_,a),Nl===null?Nl=[_]:Nl.push(_),At!==4&&(At=2),r===null)return!0;c=$n(c,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,i=y&-y,a.lanes|=i,i=ah(a.stateNode,c,i),Vf(a,i),!1;case 1:if(r=a.type,_=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ir===null||!ir.has(_))))return a.flags|=65536,y&=-y,a.lanes|=y,y=Uy(y),Vy(y,i,a,c),Vf(a,y),!1}a=a.return}while(a!==null);return!1}var lh=Error(s(461)),Lt=!1;function jt(i,r,a,c){r.child=i===null?Fg(r,null,a,c):ao(r,i.child,a,c)}function Oy(i,r,a,c,y){a=a.render;var _=r.ref;if("ref"in c){var C={};for(var w in c)w!=="ref"&&(C[w]=c[w])}else C=c;return io(r),c=zf(i,r,a,C,_,y),w=Gf(),i!==null&&!Lt?(Jf(i,r,y),is(i,r,y)):(He&&w&&Cf(r),r.flags|=1,jt(i,r,c,y),r.child)}function qy(i,r,a,c,y){if(i===null){var _=a.type;return typeof _=="function"&&!Ef(_)&&_.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=_,By(i,r,_,c,y)):(i=ju(a.type,null,c,r,r.mode,y),i.ref=r.ref,i.return=r,r.child=i)}if(_=i.child,!gh(i,y)){var C=_.memoizedProps;if(a=a.compare,a=a!==null?a:ll,a(C,c)&&i.ref===r.ref)return is(i,r,y)}return r.flags|=1,i=Wi(_,c),i.ref=r.ref,i.return=r,r.child=i}function By(i,r,a,c,y){if(i!==null){var _=i.memoizedProps;if(ll(_,c)&&i.ref===r.ref)if(Lt=!1,r.pendingProps=c=_,gh(i,y))(i.flags&131072)!==0&&(Lt=!0);else return r.lanes=i.lanes,is(i,r,y)}return uh(i,r,a,c,y)}function Fy(i,r,a,c){var y=c.children,_=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(_=_!==null?_.baseLanes|a:a,i!==null){for(c=r.child=i.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~_}else c=0,r.child=null;return Hy(i,r,_,a,c)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&nc(r,_!==null?_.cachePool:null),_!==null?Gg(r,_):qf(),Jg(r);else return c=r.lanes=536870912,Hy(i,r,_!==null?_.baseLanes|a:a,a,c)}else _!==null?(nc(r,_.cachePool),Gg(r,_),Zs(),r.memoizedState=null):(i!==null&&nc(r,null),qf(),Zs());return jt(i,r,y,a),r.child}function Al(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Hy(i,r,a,c,y){var _=kf();return _=_===null?null:{parent:kt._currentValue,pool:_},r.memoizedState={baseLanes:a,cachePool:_},i!==null&&nc(r,null),qf(),Jg(r),i!==null&&Ko(i,r,c,!0),r.childLanes=y,null}function _c(i,r){return r=Tc({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function zy(i,r,a){return ao(r,i.child,null,a),i=_c(r,r.pendingProps),i.flags|=2,Un(r),r.memoizedState=null,i}function vI(i,r,a){var c=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(He){if(c.mode==="hidden")return i=_c(r,c),r.lanes=536870912,Al(null,i);if(Ff(r),(i=pt)?(i=tv(i,Wn),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Js!==null?{id:Ri,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},a=wg(i),a.return=r,r.child=a,Xt=r,pt=null)):i=null,i===null)throw Ks(r);return r.lanes=536870912,null}return _c(r,c)}var _=i.memoizedState;if(_!==null){var C=_.dehydrated;if(Ff(r),y)if(r.flags&256)r.flags&=-257,r=zy(i,r,a);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(Lt||Ko(i,r,a,!1),y=(a&i.childLanes)!==0,Lt||y){if(c=dt,c!==null&&(C=Ns(c,a),C!==0&&C!==_.retryLane))throw _.retryLane=C,Zr(i,C),wn(c,i,C),lh;xc(),r=zy(i,r,a)}else i=_.treeContext,pt=Zn(C.nextSibling),Xt=r,He=!0,Ys=null,Wn=!1,i!==null&&xg(r,i),r=_c(r,c),r.flags|=4096;return r}return i=Wi(i.child,{mode:c.mode,children:c.children}),i.ref=r.ref,r.child=i,i.return=r,i}function vc(i,r){var a=r.ref;if(a===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(r.flags|=4194816)}}function uh(i,r,a,c,y){return io(r),a=zf(i,r,a,c,void 0,y),c=Gf(),i!==null&&!Lt?(Jf(i,r,y),is(i,r,y)):(He&&c&&Cf(r),r.flags|=1,jt(i,r,a,y),r.child)}function Gy(i,r,a,c,y,_){return io(r),r.updateQueue=null,a=Kg(r,c,a,y),Yg(i),c=Gf(),i!==null&&!Lt?(Jf(i,r,_),is(i,r,_)):(He&&c&&Cf(r),r.flags|=1,jt(i,r,a,_),r.child)}function Jy(i,r,a,c,y){if(io(r),r.stateNode===null){var _=zo,C=a.contextType;typeof C=="object"&&C!==null&&(_=Wt(C)),_=new a(c,_),r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=oh,r.stateNode=_,_._reactInternals=r,_=r.stateNode,_.props=c,_.state=r.memoizedState,_.refs={},Lf(r),C=a.contextType,_.context=typeof C=="object"&&C!==null?Wt(C):zo,_.state=r.memoizedState,C=a.getDerivedStateFromProps,typeof C=="function"&&(rh(r,a,C,c),_.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(C=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),C!==_.state&&oh.enqueueReplaceState(_,_.state,null),_l(r,c,_,y),yl(),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(i===null){_=r.stateNode;var w=r.memoizedProps,U=uo(a,w);_.props=U;var J=_.context,j=a.contextType;C=zo,typeof j=="object"&&j!==null&&(C=Wt(j));var te=a.getDerivedStateFromProps;j=typeof te=="function"||typeof _.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,j||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(w||J!==C)&&My(r,_,c,C),Qs=!1;var Y=r.memoizedState;_.state=Y,_l(r,c,_,y),yl(),J=r.memoizedState,w||Y!==J||Qs?(typeof te=="function"&&(rh(r,a,te,c),J=r.memoizedState),(U=Qs||Ny(r,a,U,c,Y,J,C))?(j||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=J),_.props=c,_.state=J,_.context=C,c=U):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{_=r.stateNode,Uf(i,r),C=r.memoizedProps,j=uo(a,C),_.props=j,te=r.pendingProps,Y=_.context,J=a.contextType,U=zo,typeof J=="object"&&J!==null&&(U=Wt(J)),w=a.getDerivedStateFromProps,(J=typeof w=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C!==te||Y!==U)&&My(r,_,c,U),Qs=!1,Y=r.memoizedState,_.state=Y,_l(r,c,_,y),yl();var Q=r.memoizedState;C!==te||Y!==Q||Qs||i!==null&&i.dependencies!==null&&ec(i.dependencies)?(typeof w=="function"&&(rh(r,a,w,c),Q=r.memoizedState),(j=Qs||Ny(r,a,j,c,Y,Q,U)||i!==null&&i.dependencies!==null&&ec(i.dependencies))?(J||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,Q,U),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,Q,U)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||C===i.memoizedProps&&Y===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&Y===i.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=Q),_.props=c,_.state=Q,_.context=U,c=j):(typeof _.componentDidUpdate!="function"||C===i.memoizedProps&&Y===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&Y===i.memoizedState||(r.flags|=1024),c=!1)}return _=c,vc(i,r),c=(r.flags&128)!==0,_||c?(_=r.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:_.render(),r.flags|=1,i!==null&&c?(r.child=ao(r,i.child,null,y),r.child=ao(r,null,a,y)):jt(i,r,a,y),r.memoizedState=_.state,i=r.child):i=is(i,r,y),i}function Yy(i,r,a,c){return to(),r.flags|=256,jt(i,r,a,c),r.child}var ch={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dh(i){return{baseLanes:i,cachePool:Lg()}}function fh(i,r,a){return i=i!==null?i.childLanes&~a:0,r&&(i|=On),i}function Ky(i,r,a){var c=r.pendingProps,y=!1,_=(r.flags&128)!==0,C;if((C=_)||(C=i!==null&&i.memoizedState===null?!1:(Rt.current&2)!==0),C&&(y=!0,r.flags&=-129),C=(r.flags&32)!==0,r.flags&=-33,i===null){if(He){if(y?js(r):Zs(),(i=pt)?(i=tv(i,Wn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Js!==null?{id:Ri,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},a=wg(i),a.return=r,r.child=a,Xt=r,pt=null)):i=null,i===null)throw Ks(r);return $h(i)?r.lanes=32:r.lanes=536870912,null}var w=c.children;return c=c.fallback,y?(Zs(),y=r.mode,w=Tc({mode:"hidden",children:w},y),c=eo(c,y,a,null),w.return=r,c.return=r,w.sibling=c,r.child=w,c=r.child,c.memoizedState=dh(a),c.childLanes=fh(i,C,a),r.memoizedState=ch,Al(null,c)):(js(r),hh(r,w))}var U=i.memoizedState;if(U!==null&&(w=U.dehydrated,w!==null)){if(_)r.flags&256?(js(r),r.flags&=-257,r=ph(i,r,a)):r.memoizedState!==null?(Zs(),r.child=i.child,r.flags|=128,r=null):(Zs(),w=c.fallback,y=r.mode,c=Tc({mode:"visible",children:c.children},y),w=eo(w,y,a,null),w.flags|=2,c.return=r,w.return=r,c.sibling=w,r.child=c,ao(r,i.child,null,a),c=r.child,c.memoizedState=dh(a),c.childLanes=fh(i,C,a),r.memoizedState=ch,r=Al(null,c));else if(js(r),$h(w)){if(C=w.nextSibling&&w.nextSibling.dataset,C)var J=C.dgst;C=J,c=Error(s(419)),c.stack="",c.digest=C,dl({value:c,source:null,stack:null}),r=ph(i,r,a)}else if(Lt||Ko(i,r,a,!1),C=(a&i.childLanes)!==0,Lt||C){if(C=dt,C!==null&&(c=Ns(C,a),c!==0&&c!==U.retryLane))throw U.retryLane=c,Zr(i,c),wn(C,i,c),lh;Kh(w)||xc(),r=ph(i,r,a)}else Kh(w)?(r.flags|=192,r.child=i.child,r=null):(i=U.treeContext,pt=Zn(w.nextSibling),Xt=r,He=!0,Ys=null,Wn=!1,i!==null&&xg(r,i),r=hh(r,c.children),r.flags|=4096);return r}return y?(Zs(),w=c.fallback,y=r.mode,U=i.child,J=U.sibling,c=Wi(U,{mode:"hidden",children:c.children}),c.subtreeFlags=U.subtreeFlags&65011712,J!==null?w=Wi(J,w):(w=eo(w,y,a,null),w.flags|=2),w.return=r,c.return=r,c.sibling=w,r.child=c,Al(null,c),c=r.child,w=i.child.memoizedState,w===null?w=dh(a):(y=w.cachePool,y!==null?(U=kt._currentValue,y=y.parent!==U?{parent:U,pool:U}:y):y=Lg(),w={baseLanes:w.baseLanes|a,cachePool:y}),c.memoizedState=w,c.childLanes=fh(i,C,a),r.memoizedState=ch,Al(i.child,c)):(js(r),a=i.child,i=a.sibling,a=Wi(a,{mode:"visible",children:c.children}),a.return=r,a.sibling=null,i!==null&&(C=r.deletions,C===null?(r.deletions=[i],r.flags|=16):C.push(i)),r.child=a,r.memoizedState=null,a)}function hh(i,r){return r=Tc({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function Tc(i,r){return i=Pn(22,i,null,r),i.lanes=0,i}function ph(i,r,a){return ao(r,i.child,null,a),i=hh(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function $y(i,r,a){i.lanes|=r;var c=i.alternate;c!==null&&(c.lanes|=r),xf(i.return,r,a)}function mh(i,r,a,c,y,_){var C=i.memoizedState;C===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:y,treeForkCount:_}:(C.isBackwards=r,C.rendering=null,C.renderingStartTime=0,C.last=c,C.tail=a,C.tailMode=y,C.treeForkCount=_)}function Qy(i,r,a){var c=r.pendingProps,y=c.revealOrder,_=c.tail;c=c.children;var C=Rt.current,w=(C&2)!==0;if(w?(C=C&1|2,r.flags|=128):C&=1,re(Rt,C),jt(i,r,c,a),c=He?cl:0,!w&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&$y(i,a,r);else if(i.tag===19)$y(i,a,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(a=r.child,y=null;a!==null;)i=a.alternate,i!==null&&lc(i)===null&&(y=a),a=a.sibling;a=y,a===null?(y=r.child,r.child=null):(y=a.sibling,a.sibling=null),mh(r,!1,y,a,_,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=r.child,r.child=null;y!==null;){if(i=y.alternate,i!==null&&lc(i)===null){r.child=y;break}i=y.sibling,y.sibling=a,a=y,y=i}mh(r,!0,a,null,_,c);break;case"together":mh(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function is(i,r,a){if(i!==null&&(r.dependencies=i.dependencies),nr|=r.lanes,(a&r.childLanes)===0)if(i!==null){if(Ko(i,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,a=Wi(i,i.pendingProps),r.child=a,a.return=r;i.sibling!==null;)i=i.sibling,a=a.sibling=Wi(i,i.pendingProps),a.return=r;a.sibling=null}return r.child}function gh(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&ec(i)))}function TI(i,r,a){switch(r.tag){case 3:Mt(r,r.stateNode.containerInfo),$s(r,kt,i.memoizedState.cache),to();break;case 27:case 5:Fn(r);break;case 4:Mt(r,r.stateNode.containerInfo);break;case 10:$s(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Ff(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(js(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Ky(i,r,a):(js(r),i=is(i,r,a),i!==null?i.sibling:null);js(r);break;case 19:var y=(i.flags&128)!==0;if(c=(a&r.childLanes)!==0,c||(Ko(i,r,a,!1),c=(a&r.childLanes)!==0),y){if(c)return Qy(i,r,a);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),re(Rt,Rt.current),c)break;return null;case 22:return r.lanes=0,Fy(i,r,a,r.pendingProps);case 24:$s(r,kt,i.memoizedState.cache)}return is(i,r,a)}function Xy(i,r,a){if(i!==null)if(i.memoizedProps!==r.pendingProps)Lt=!0;else{if(!gh(i,a)&&(r.flags&128)===0)return Lt=!1,TI(i,r,a);Lt=(i.flags&131072)!==0}else Lt=!1,He&&(r.flags&1048576)!==0&&bg(r,cl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(i=ro(r.elementType),r.type=i,typeof i=="function")Ef(i)?(c=uo(i,c),r.tag=1,r=Jy(null,r,i,c,a)):(r.tag=0,r=uh(null,r,i,c,a));else{if(i!=null){var y=i.$$typeof;if(y===ie){r.tag=11,r=Oy(null,r,i,c,a);break e}else if(y===D){r.tag=14,r=qy(null,r,i,c,a);break e}}throw r=Qe(i)||i,Error(s(306,r,""))}}return r;case 0:return uh(i,r,r.type,r.pendingProps,a);case 1:return c=r.type,y=uo(c,r.pendingProps),Jy(i,r,c,y,a);case 3:e:{if(Mt(r,r.stateNode.containerInfo),i===null)throw Error(s(387));c=r.pendingProps;var _=r.memoizedState;y=_.element,Uf(i,r),_l(r,c,null,a);var C=r.memoizedState;if(c=C.cache,$s(r,kt,c),c!==_.cache&&Nf(r,[kt],a,!0),yl(),c=C.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:C.cache},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){r=Yy(i,r,c,a);break e}else if(c!==y){y=$n(Error(s(424)),r),dl(y),r=Yy(i,r,c,a);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(pt=Zn(i.firstChild),Xt=r,He=!0,Ys=null,Wn=!0,a=Fg(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(to(),c===y){r=is(i,r,a);break e}jt(i,r,c,a)}r=r.child}return r;case 26:return vc(i,r),i===null?(a=av(r.type,null,r.pendingProps,null))?r.memoizedState=a:He||(a=r.type,i=r.pendingProps,c=Uc(xe.current).createElement(a),c[Tt]=r,c[Qt]=i,Zt(c,a,i),wt(c),r.stateNode=c):r.memoizedState=av(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return Fn(r),i===null&&He&&(c=r.stateNode=sv(r.type,r.pendingProps,xe.current),Xt=r,Wn=!0,y=pt,ar(r.type)?(Qh=y,pt=Zn(c.firstChild)):pt=y),jt(i,r,r.pendingProps.children,a),vc(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&He&&((y=c=pt)&&(c=XI(c,r.type,r.pendingProps,Wn),c!==null?(r.stateNode=c,Xt=r,pt=Zn(c.firstChild),Wn=!1,y=!0):y=!1),y||Ks(r)),Fn(r),y=r.type,_=r.pendingProps,C=i!==null?i.memoizedProps:null,c=_.children,Gh(y,_)?c=null:C!==null&&Gh(y,C)&&(r.flags|=32),r.memoizedState!==null&&(y=zf(i,r,dI,null,null,a),Ol._currentValue=y),vc(i,r),jt(i,r,c,a),r.child;case 6:return i===null&&He&&((i=a=pt)&&(a=WI(a,r.pendingProps,Wn),a!==null?(r.stateNode=a,Xt=r,pt=null,i=!0):i=!1),i||Ks(r)),null;case 13:return Ky(i,r,a);case 4:return Mt(r,r.stateNode.containerInfo),c=r.pendingProps,i===null?r.child=ao(r,null,c,a):jt(i,r,c,a),r.child;case 11:return Oy(i,r,r.type,r.pendingProps,a);case 7:return jt(i,r,r.pendingProps,a),r.child;case 8:return jt(i,r,r.pendingProps.children,a),r.child;case 12:return jt(i,r,r.pendingProps.children,a),r.child;case 10:return c=r.pendingProps,$s(r,r.type,c.value),jt(i,r,c.children,a),r.child;case 9:return y=r.type._context,c=r.pendingProps.children,io(r),y=Wt(y),c=c(y),r.flags|=1,jt(i,r,c,a),r.child;case 14:return qy(i,r,r.type,r.pendingProps,a);case 15:return By(i,r,r.type,r.pendingProps,a);case 19:return Qy(i,r,a);case 31:return vI(i,r,a);case 22:return Fy(i,r,a,r.pendingProps);case 24:return io(r),c=Wt(kt),i===null?(y=kf(),y===null&&(y=dt,_=Mf(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=a),y=_),r.memoizedState={parent:c,cache:y},Lf(r),$s(r,kt,y)):((i.lanes&a)!==0&&(Uf(i,r),_l(r,null,null,a),yl()),y=i.memoizedState,_=r.memoizedState,y.parent!==c?(y={parent:c,cache:c},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),$s(r,kt,c)):(c=_.cache,$s(r,kt,c),c!==y.cache&&Nf(r,[kt],a,!0))),jt(i,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function ss(i){i.flags|=4}function yh(i,r,a,c,y){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(A_())i.flags|=8192;else throw oo=sc,Pf}else i.flags&=-16777217}function Wy(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!fv(r))if(A_())i.flags|=8192;else throw oo=sc,Pf}function Ec(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Ga():536870912,i.lanes|=r,ra|=r)}function Cl(i,r){if(!He)switch(i.tailMode){case"hidden":r=i.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function mt(i){var r=i.alternate!==null&&i.alternate.child===i.child,a=0,c=0;if(r)for(var y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=c,i.childLanes=a,r}function EI(i,r,a){var c=r.pendingProps;switch(If(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(r),null;case 1:return mt(r),null;case 3:return a=r.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),es(kt),ft(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(Yo(r)?ss(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Rf())),mt(r),null;case 26:var y=r.type,_=r.memoizedState;return i===null?(ss(r),_!==null?(mt(r),Wy(r,_)):(mt(r),yh(r,y,null,c,a))):_?_!==i.memoizedState?(ss(r),mt(r),Wy(r,_)):(mt(r),r.flags&=-16777217):(i=i.memoizedProps,i!==c&&ss(r),mt(r),yh(r,y,i,c,a)),null;case 27:if(si(r),a=xe.current,y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==c&&ss(r);else{if(!c){if(r.stateNode===null)throw Error(s(166));return mt(r),null}i=he.current,Yo(r)?Ng(r):(i=sv(y,c,a),r.stateNode=i,ss(r))}return mt(r),null;case 5:if(si(r),y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==c&&ss(r);else{if(!c){if(r.stateNode===null)throw Error(s(166));return mt(r),null}if(_=he.current,Yo(r))Ng(r);else{var C=Uc(xe.current);switch(_){case 1:_=C.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=C.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=C.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof c.is=="string"?C.createElement("select",{is:c.is}):C.createElement("select"),c.multiple?_.multiple=!0:c.size&&(_.size=c.size);break;default:_=typeof c.is=="string"?C.createElement(y,{is:c.is}):C.createElement(y)}}_[Tt]=r,_[Qt]=c;e:for(C=r.child;C!==null;){if(C.tag===5||C.tag===6)_.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===r)break e;for(;C.sibling===null;){if(C.return===null||C.return===r)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}r.stateNode=_;e:switch(Zt(_,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ss(r)}}return mt(r),yh(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,a),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==c&&ss(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(s(166));if(i=xe.current,Yo(r)){if(i=r.stateNode,a=r.memoizedProps,c=null,y=Xt,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}i[Tt]=r,i=!!(i.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||K_(i.nodeValue,a)),i||Ks(r,!0)}else i=Uc(i).createTextNode(c),i[Tt]=r,r.stateNode=i}return mt(r),null;case 31:if(a=r.memoizedState,i===null||i.memoizedState!==null){if(c=Yo(r),a!==null){if(i===null){if(!c)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[Tt]=r}else to(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;mt(r),i=!1}else a=Rf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return r.flags&256?(Un(r),r):(Un(r),null);if((r.flags&128)!==0)throw Error(s(558))}return mt(r),null;case 13:if(c=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=Yo(r),c!==null&&c.dehydrated!==null){if(i===null){if(!y)throw Error(s(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[Tt]=r}else to(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;mt(r),y=!1}else y=Rf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(Un(r),r):(Un(r),null)}return Un(r),(r.flags&128)!==0?(r.lanes=a,r):(a=c!==null,i=i!==null&&i.memoizedState!==null,a&&(c=r.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),_=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==y&&(c.flags|=2048)),a!==i&&a&&(r.child.flags|=8192),Ec(r,r.updateQueue),mt(r),null);case 4:return ft(),i===null&&qh(r.stateNode.containerInfo),mt(r),null;case 10:return es(r.type),mt(r),null;case 19:if(Z(Rt),c=r.memoizedState,c===null)return mt(r),null;if(y=(r.flags&128)!==0,_=c.rendering,_===null)if(y)Cl(c,!1);else{if(At!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(_=lc(i),_!==null){for(r.flags|=128,Cl(c,!1),i=_.updateQueue,r.updateQueue=i,Ec(r,i),r.subtreeFlags=0,i=a,a=r.child;a!==null;)Ig(a,i),a=a.sibling;return re(Rt,Rt.current&1|2),He&&ji(r,c.treeForkCount),r.child}i=i.sibling}c.tail!==null&&Xe()>wc&&(r.flags|=128,y=!0,Cl(c,!1),r.lanes=4194304)}else{if(!y)if(i=lc(_),i!==null){if(r.flags|=128,y=!0,i=i.updateQueue,r.updateQueue=i,Ec(r,i),Cl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!_.alternate&&!He)return mt(r),null}else 2*Xe()-c.renderingStartTime>wc&&a!==536870912&&(r.flags|=128,y=!0,Cl(c,!1),r.lanes=4194304);c.isBackwards?(_.sibling=r.child,r.child=_):(i=c.last,i!==null?i.sibling=_:r.child=_,c.last=_)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=Xe(),i.sibling=null,a=Rt.current,re(Rt,y?a&1|2:a&1),He&&ji(r,c.treeForkCount),i):(mt(r),null);case 22:case 23:return Un(r),Bf(),c=r.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(a&536870912)!==0&&(r.flags&128)===0&&(mt(r),r.subtreeFlags&6&&(r.flags|=8192)):mt(r),a=r.updateQueue,a!==null&&Ec(r,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==a&&(r.flags|=2048),i!==null&&Z(so),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),es(kt),mt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function SI(i,r){switch(If(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return es(kt),ft(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return si(r),null;case 31:if(r.memoizedState!==null){if(Un(r),r.alternate===null)throw Error(s(340));to()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(Un(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));to()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return Z(Rt),null;case 4:return ft(),null;case 10:return es(r.type),null;case 22:case 23:return Un(r),Bf(),i!==null&&Z(so),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return es(kt),null;case 25:return null;default:return null}}function jy(i,r){switch(If(r),r.tag){case 3:es(kt),ft();break;case 26:case 27:case 5:si(r);break;case 4:ft();break;case 31:r.memoizedState!==null&&Un(r);break;case 13:Un(r);break;case 19:Z(Rt);break;case 10:es(r.type);break;case 22:case 23:Un(r),Bf(),i!==null&&Z(so);break;case 24:es(kt)}}function Il(i,r){try{var a=r.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var y=c.next;a=y;do{if((a.tag&i)===i){c=void 0;var _=a.create,C=a.inst;c=_(),C.destroy=c}a=a.next}while(a!==y)}}catch(w){st(r,r.return,w)}}function er(i,r,a){try{var c=r.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var _=y.next;c=_;do{if((c.tag&i)===i){var C=c.inst,w=C.destroy;if(w!==void 0){C.destroy=void 0,y=r;var U=a,J=w;try{J()}catch(j){st(y,U,j)}}}c=c.next}while(c!==_)}}catch(j){st(r,r.return,j)}}function Zy(i){var r=i.updateQueue;if(r!==null){var a=i.stateNode;try{zg(r,a)}catch(c){st(i,i.return,c)}}}function e_(i,r,a){a.props=uo(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(c){st(i,r,c)}}function wl(i,r){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof a=="function"?i.refCleanup=a(c):a.current=c}}catch(y){st(i,r,y)}}function xi(i,r){var a=i.ref,c=i.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(y){st(i,r,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){st(i,r,y)}else a.current=null}function t_(i){var r=i.type,a=i.memoizedProps,c=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(y){st(i,i.return,y)}}function _h(i,r,a){try{var c=i.stateNode;GI(c,i.type,a,r),c[Qt]=r}catch(y){st(i,i.return,y)}}function n_(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ar(i.type)||i.tag===4}function vh(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||n_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ar(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Th(i,r,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(i),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=zt));else if(c!==4&&(c===27&&ar(i.type)&&(a=i.stateNode,r=null),i=i.child,i!==null))for(Th(i,r,a),i=i.sibling;i!==null;)Th(i,r,a),i=i.sibling}function Sc(i,r,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?a.insertBefore(i,r):a.appendChild(i);else if(c!==4&&(c===27&&ar(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(Sc(i,r,a),i=i.sibling;i!==null;)Sc(i,r,a),i=i.sibling}function i_(i){var r=i.stateNode,a=i.memoizedProps;try{for(var c=i.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);Zt(r,c,a),r[Tt]=i,r[Qt]=a}catch(_){st(i,i.return,_)}}var rs=!1,Ut=!1,Eh=!1,s_=typeof WeakSet=="function"?WeakSet:Set,Yt=null;function AI(i,r){if(i=i.containerInfo,Hh=zc,i=gg(i),pf(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var y=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break e}var C=0,w=-1,U=-1,J=0,j=0,te=i,Y=null;t:for(;;){for(var Q;te!==a||y!==0&&te.nodeType!==3||(w=C+y),te!==_||c!==0&&te.nodeType!==3||(U=C+c),te.nodeType===3&&(C+=te.nodeValue.length),(Q=te.firstChild)!==null;)Y=te,te=Q;for(;;){if(te===i)break t;if(Y===a&&++J===y&&(w=C),Y===_&&++j===c&&(U=C),(Q=te.nextSibling)!==null)break;te=Y,Y=te.parentNode}te=Q}a=w===-1||U===-1?null:{start:w,end:U}}else a=null}a=a||{start:0,end:0}}else a=null;for(zh={focusedElem:i,selectionRange:a},zc=!1,Yt=r;Yt!==null;)if(r=Yt,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,Yt=i;else for(;Yt!==null;){switch(r=Yt,_=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)y=i[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,a=r,y=_.memoizedProps,_=_.memoizedState,c=a.stateNode;try{var me=uo(a.type,y);i=c.getSnapshotBeforeUpdate(me,_),c.__reactInternalSnapshotBeforeUpdate=i}catch(Ee){st(a,a.return,Ee)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,a=i.nodeType,a===9)Yh(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Yh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Yt=i;break}Yt=r.return}}function r_(i,r,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:as(i,a),c&4&&Il(5,a);break;case 1:if(as(i,a),c&4)if(i=a.stateNode,r===null)try{i.componentDidMount()}catch(C){st(a,a.return,C)}else{var y=uo(a.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(y,r,i.__reactInternalSnapshotBeforeUpdate)}catch(C){st(a,a.return,C)}}c&64&&Zy(a),c&512&&wl(a,a.return);break;case 3:if(as(i,a),c&64&&(i=a.updateQueue,i!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{zg(i,r)}catch(C){st(a,a.return,C)}}break;case 27:r===null&&c&4&&i_(a);case 26:case 5:as(i,a),r===null&&c&4&&t_(a),c&512&&wl(a,a.return);break;case 12:as(i,a);break;case 31:as(i,a),c&4&&l_(i,a);break;case 13:as(i,a),c&4&&u_(i,a),c&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=DI.bind(null,a),jI(i,a))));break;case 22:if(c=a.memoizedState!==null||rs,!c){r=r!==null&&r.memoizedState!==null||Ut,y=rs;var _=Ut;rs=c,(Ut=r)&&!_?ls(i,a,(a.subtreeFlags&8772)!==0):as(i,a),rs=y,Ut=_}break;case 30:break;default:as(i,a)}}function o_(i){var r=i.alternate;r!==null&&(i.alternate=null,o_(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&Fr(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var yt=null,Sn=!1;function os(i,r,a){for(a=a.child;a!==null;)a_(i,r,a),a=a.sibling}function a_(i,r,a){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(Is,a)}catch{}switch(a.tag){case 26:Ut||xi(a,r),os(i,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ut||xi(a,r);var c=yt,y=Sn;ar(a.type)&&(yt=a.stateNode,Sn=!1),os(i,r,a),Ll(a.stateNode),yt=c,Sn=y;break;case 5:Ut||xi(a,r);case 6:if(c=yt,y=Sn,yt=null,os(i,r,a),yt=c,Sn=y,yt!==null)if(Sn)try{(yt.nodeType===9?yt.body:yt.nodeName==="HTML"?yt.ownerDocument.body:yt).removeChild(a.stateNode)}catch(_){st(a,r,_)}else try{yt.removeChild(a.stateNode)}catch(_){st(a,r,_)}break;case 18:yt!==null&&(Sn?(i=yt,Z_(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),ha(i)):Z_(yt,a.stateNode));break;case 4:c=yt,y=Sn,yt=a.stateNode.containerInfo,Sn=!0,os(i,r,a),yt=c,Sn=y;break;case 0:case 11:case 14:case 15:er(2,a,r),Ut||er(4,a,r),os(i,r,a);break;case 1:Ut||(xi(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"&&e_(a,r,c)),os(i,r,a);break;case 21:os(i,r,a);break;case 22:Ut=(c=Ut)||a.memoizedState!==null,os(i,r,a),Ut=c;break;default:os(i,r,a)}}function l_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{ha(i)}catch(a){st(r,r.return,a)}}}function u_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{ha(i)}catch(a){st(r,r.return,a)}}function CI(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new s_),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new s_),r;default:throw Error(s(435,i.tag))}}function Ac(i,r){var a=CI(i);r.forEach(function(c){if(!a.has(c)){a.add(c);var y=kI.bind(null,i,c);c.then(y,y)}})}function An(i,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var y=a[c],_=i,C=r,w=C;e:for(;w!==null;){switch(w.tag){case 27:if(ar(w.type)){yt=w.stateNode,Sn=!1;break e}break;case 5:yt=w.stateNode,Sn=!1;break e;case 3:case 4:yt=w.stateNode.containerInfo,Sn=!0;break e}w=w.return}if(yt===null)throw Error(s(160));a_(_,C,y),yt=null,Sn=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)c_(r,i),r=r.sibling}var di=null;function c_(i,r){var a=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:An(r,i),Cn(i),c&4&&(er(3,i,i.return),Il(3,i),er(5,i,i.return));break;case 1:An(r,i),Cn(i),c&512&&(Ut||a===null||xi(a,a.return)),c&64&&rs&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var y=di;if(An(r,i),Cn(i),c&512&&(Ut||a===null||xi(a,a.return)),c&4){var _=a!==null?a.memoizedState:null;if(c=i.memoizedState,a===null)if(c===null)if(i.stateNode===null){e:{c=i.type,a=i.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":_=y.getElementsByTagName("title")[0],(!_||_[zi]||_[Tt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(c),y.head.insertBefore(_,y.querySelector("head > title"))),Zt(_,c,a),_[Tt]=i,wt(_),c=_;break e;case"link":var C=cv("link","href",y).get(c+(a.href||""));if(C){for(var w=0;w<C.length;w++)if(_=C[w],_.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&_.getAttribute("rel")===(a.rel==null?null:a.rel)&&_.getAttribute("title")===(a.title==null?null:a.title)&&_.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){C.splice(w,1);break t}}_=y.createElement(c),Zt(_,c,a),y.head.appendChild(_);break;case"meta":if(C=cv("meta","content",y).get(c+(a.content||""))){for(w=0;w<C.length;w++)if(_=C[w],_.getAttribute("content")===(a.content==null?null:""+a.content)&&_.getAttribute("name")===(a.name==null?null:a.name)&&_.getAttribute("property")===(a.property==null?null:a.property)&&_.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&_.getAttribute("charset")===(a.charSet==null?null:a.charSet)){C.splice(w,1);break t}}_=y.createElement(c),Zt(_,c,a),y.head.appendChild(_);break;default:throw Error(s(468,c))}_[Tt]=i,wt(_),c=_}i.stateNode=c}else dv(y,i.type,i.stateNode);else i.stateNode=uv(y,c,i.memoizedProps);else _!==c?(_===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):_.count--,c===null?dv(y,i.type,i.stateNode):uv(y,c,i.memoizedProps)):c===null&&i.stateNode!==null&&_h(i,i.memoizedProps,a.memoizedProps)}break;case 27:An(r,i),Cn(i),c&512&&(Ut||a===null||xi(a,a.return)),a!==null&&c&4&&_h(i,i.memoizedProps,a.memoizedProps);break;case 5:if(An(r,i),Cn(i),c&512&&(Ut||a===null||xi(a,a.return)),i.flags&32){y=i.stateNode;try{Yn(y,"")}catch(me){st(i,i.return,me)}}c&4&&i.stateNode!=null&&(y=i.memoizedProps,_h(i,y,a!==null?a.memoizedProps:y)),c&1024&&(Eh=!0);break;case 6:if(An(r,i),Cn(i),c&4){if(i.stateNode===null)throw Error(s(162));c=i.memoizedProps,a=i.stateNode;try{a.nodeValue=c}catch(me){st(i,i.return,me)}}break;case 3:if(qc=null,y=di,di=Vc(r.containerInfo),An(r,i),di=y,Cn(i),c&4&&a!==null&&a.memoizedState.isDehydrated)try{ha(r.containerInfo)}catch(me){st(i,i.return,me)}Eh&&(Eh=!1,d_(i));break;case 4:c=di,di=Vc(i.stateNode.containerInfo),An(r,i),Cn(i),di=c;break;case 12:An(r,i),Cn(i);break;case 31:An(r,i),Cn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Ac(i,c)));break;case 13:An(r,i),Cn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ic=Xe()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Ac(i,c)));break;case 22:y=i.memoizedState!==null;var U=a!==null&&a.memoizedState!==null,J=rs,j=Ut;if(rs=J||y,Ut=j||U,An(r,i),Ut=j,rs=J,Cn(i),c&8192)e:for(r=i.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(a===null||U||rs||Ut||co(i)),a=null,r=i;;){if(r.tag===5||r.tag===26){if(a===null){U=a=r;try{if(_=U.stateNode,y)C=_.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{w=U.stateNode;var te=U.memoizedProps.style,Y=te!=null&&te.hasOwnProperty("display")?te.display:null;w.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(me){st(U,U.return,me)}}}else if(r.tag===6){if(a===null){U=r;try{U.stateNode.nodeValue=y?"":U.memoizedProps}catch(me){st(U,U.return,me)}}}else if(r.tag===18){if(a===null){U=r;try{var Q=U.stateNode;y?ev(Q,!0):ev(U.stateNode,!1)}catch(me){st(U,U.return,me)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=i.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,Ac(i,a))));break;case 19:An(r,i),Cn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Ac(i,c)));break;case 30:break;case 21:break;default:An(r,i),Cn(i)}}function Cn(i){var r=i.flags;if(r&2){try{for(var a,c=i.return;c!==null;){if(n_(c)){a=c;break}c=c.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var y=a.stateNode,_=vh(i);Sc(i,_,y);break;case 5:var C=a.stateNode;a.flags&32&&(Yn(C,""),a.flags&=-33);var w=vh(i);Sc(i,w,C);break;case 3:case 4:var U=a.stateNode.containerInfo,J=vh(i);Th(i,J,U);break;default:throw Error(s(161))}}catch(j){st(i,i.return,j)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function d_(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;d_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function as(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)r_(i,r.alternate,r),r=r.sibling}function co(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:er(4,r,r.return),co(r);break;case 1:xi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&e_(r,r.return,a),co(r);break;case 27:Ll(r.stateNode);case 26:case 5:xi(r,r.return),co(r);break;case 22:r.memoizedState===null&&co(r);break;case 30:co(r);break;default:co(r)}i=i.sibling}}function ls(i,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,y=i,_=r,C=_.flags;switch(_.tag){case 0:case 11:case 15:ls(y,_,a),Il(4,_);break;case 1:if(ls(y,_,a),c=_,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(J){st(c,c.return,J)}if(c=_,y=c.updateQueue,y!==null){var w=c.stateNode;try{var U=y.shared.hiddenCallbacks;if(U!==null)for(y.shared.hiddenCallbacks=null,y=0;y<U.length;y++)Hg(U[y],w)}catch(J){st(c,c.return,J)}}a&&C&64&&Zy(_),wl(_,_.return);break;case 27:i_(_);case 26:case 5:ls(y,_,a),a&&c===null&&C&4&&t_(_),wl(_,_.return);break;case 12:ls(y,_,a);break;case 31:ls(y,_,a),a&&C&4&&l_(y,_);break;case 13:ls(y,_,a),a&&C&4&&u_(y,_);break;case 22:_.memoizedState===null&&ls(y,_,a),wl(_,_.return);break;case 30:break;default:ls(y,_,a)}r=r.sibling}}function Sh(i,r){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&fl(a))}function Ah(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&fl(i))}function fi(i,r,a,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)f_(i,r,a,c),r=r.sibling}function f_(i,r,a,c){var y=r.flags;switch(r.tag){case 0:case 11:case 15:fi(i,r,a,c),y&2048&&Il(9,r);break;case 1:fi(i,r,a,c);break;case 3:fi(i,r,a,c),y&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&fl(i)));break;case 12:if(y&2048){fi(i,r,a,c),i=r.stateNode;try{var _=r.memoizedProps,C=_.id,w=_.onPostCommit;typeof w=="function"&&w(C,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(U){st(r,r.return,U)}}else fi(i,r,a,c);break;case 31:fi(i,r,a,c);break;case 13:fi(i,r,a,c);break;case 23:break;case 22:_=r.stateNode,C=r.alternate,r.memoizedState!==null?_._visibility&2?fi(i,r,a,c):Rl(i,r):_._visibility&2?fi(i,r,a,c):(_._visibility|=2,na(i,r,a,c,(r.subtreeFlags&10256)!==0||!1)),y&2048&&Sh(C,r);break;case 24:fi(i,r,a,c),y&2048&&Ah(r.alternate,r);break;default:fi(i,r,a,c)}}function na(i,r,a,c,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var _=i,C=r,w=a,U=c,J=C.flags;switch(C.tag){case 0:case 11:case 15:na(_,C,w,U,y),Il(8,C);break;case 23:break;case 22:var j=C.stateNode;C.memoizedState!==null?j._visibility&2?na(_,C,w,U,y):Rl(_,C):(j._visibility|=2,na(_,C,w,U,y)),y&&J&2048&&Sh(C.alternate,C);break;case 24:na(_,C,w,U,y),y&&J&2048&&Ah(C.alternate,C);break;default:na(_,C,w,U,y)}r=r.sibling}}function Rl(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=i,c=r,y=c.flags;switch(c.tag){case 22:Rl(a,c),y&2048&&Sh(c.alternate,c);break;case 24:Rl(a,c),y&2048&&Ah(c.alternate,c);break;default:Rl(a,c)}r=r.sibling}}var bl=8192;function ia(i,r,a){if(i.subtreeFlags&bl)for(i=i.child;i!==null;)h_(i,r,a),i=i.sibling}function h_(i,r,a){switch(i.tag){case 26:ia(i,r,a),i.flags&bl&&i.memoizedState!==null&&cw(a,di,i.memoizedState,i.memoizedProps);break;case 5:ia(i,r,a);break;case 3:case 4:var c=di;di=Vc(i.stateNode.containerInfo),ia(i,r,a),di=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=bl,bl=16777216,ia(i,r,a),bl=c):ia(i,r,a));break;default:ia(i,r,a)}}function p_(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function xl(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Yt=c,g_(c,i)}p_(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)m_(i),i=i.sibling}function m_(i){switch(i.tag){case 0:case 11:case 15:xl(i),i.flags&2048&&er(9,i,i.return);break;case 3:xl(i);break;case 12:xl(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,Cc(i)):xl(i);break;default:xl(i)}}function Cc(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Yt=c,g_(c,i)}p_(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:er(8,r,r.return),Cc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Cc(r));break;default:Cc(r)}i=i.sibling}}function g_(i,r){for(;Yt!==null;){var a=Yt;switch(a.tag){case 0:case 11:case 15:er(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:fl(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,Yt=c;else e:for(a=i;Yt!==null;){c=Yt;var y=c.sibling,_=c.return;if(o_(c),c===a){Yt=null;break e}if(y!==null){y.return=_,Yt=y;break e}Yt=_}}}var II={getCacheForType:function(i){var r=Wt(kt),a=r.data.get(i);return a===void 0&&(a=i(),r.data.set(i,a)),a},cacheSignal:function(){return Wt(kt).controller.signal}},wI=typeof WeakMap=="function"?WeakMap:Map,tt=0,dt=null,Ve=null,qe=0,it=0,Vn=null,tr=!1,sa=!1,Ch=!1,us=0,At=0,nr=0,fo=0,Ih=0,On=0,ra=0,Nl=null,In=null,wh=!1,Ic=0,y_=0,wc=1/0,Rc=null,ir=null,Bt=0,sr=null,oa=null,cs=0,Rh=0,bh=null,__=null,Ml=0,xh=null;function qn(){return(tt&2)!==0&&qe!==0?qe&-qe:$.T!==null?Lh():Hi()}function v_(){if(On===0)if((qe&536870912)===0||He){var i=vi;vi<<=1,(vi&3932160)===0&&(vi=262144),On=i}else On=536870912;return i=Ln.current,i!==null&&(i.flags|=32),On}function wn(i,r,a){(i===dt&&(it===2||it===9)||i.cancelPendingCommit!==null)&&(aa(i,0),rr(i,qe,On,!1)),bs(i,a),((tt&2)===0||i!==dt)&&(i===dt&&((tt&2)===0&&(fo|=a),At===4&&rr(i,qe,On,!1)),Ni(i))}function T_(i,r,a){if((tt&6)!==0)throw Error(s(327));var c=!a&&(r&127)===0&&(r&i.expiredLanes)===0||Rs(i,r),y=c?xI(i,r):Mh(i,r,!0),_=c;do{if(y===0){sa&&!c&&rr(i,r,0,!1);break}else{if(a=i.current.alternate,_&&!RI(a)){y=Mh(i,r,!1),_=!1;continue}if(y===2){if(_=r,i.errorRecoveryDisabledLanes&_)var C=0;else C=i.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){r=C;e:{var w=i;y=Nl;var U=w.current.memoizedState.isDehydrated;if(U&&(aa(w,C).flags|=256),C=Mh(w,C,!1),C!==2){if(Ch&&!U){w.errorRecoveryDisabledLanes|=_,fo|=_,y=4;break e}_=In,In=y,_!==null&&(In===null?In=_:In.push.apply(In,_))}y=C}if(_=!1,y!==2)continue}}if(y===1){aa(i,0),rr(i,r,0,!0);break}e:{switch(c=i,_=y,_){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:rr(c,r,On,!tr);break e;case 2:In=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(y=Ic+300-Xe(),10<y)){if(rr(c,r,On,!tr),Gn(c,0,!0)!==0)break e;cs=r,c.timeoutHandle=W_(E_.bind(null,c,a,In,Rc,wh,r,On,fo,ra,tr,_,"Throttled",-0,0),y);break e}E_(c,a,In,Rc,wh,r,On,fo,ra,tr,_,null,-0,0)}}break}while(!0);Ni(i)}function E_(i,r,a,c,y,_,C,w,U,J,j,te,Y,Q){if(i.timeoutHandle=-1,te=r.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:zt},h_(r,_,te);var me=(_&62914560)===_?Ic-Xe():(_&4194048)===_?y_-Xe():0;if(me=dw(te,me),me!==null){cs=_,i.cancelPendingCommit=me(x_.bind(null,i,r,_,a,c,y,C,w,U,j,te,null,Y,Q)),rr(i,_,C,!J);return}}x_(i,r,_,a,c,y,C,w,U)}function RI(i){for(var r=i;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var y=a[c],_=y.getSnapshot;y=y.value;try{if(!kn(_(),y))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function rr(i,r,a,c){r&=~Ih,r&=~fo,i.suspendedLanes|=r,i.pingedLanes&=~r,c&&(i.warmLanes|=r),c=i.expirationTimes;for(var y=r;0<y;){var _=31-dn(y),C=1<<_;c[_]=-1,y&=~C}a!==0&&Ja(i,a,r)}function bc(){return(tt&6)===0?(Dl(0),!1):!0}function Nh(){if(Ve!==null){if(it===0)var i=Ve.return;else i=Ve,Zi=no=null,Yf(i),Wo=null,pl=0,i=Ve;for(;i!==null;)jy(i.alternate,i),i=i.return;Ve=null}}function aa(i,r){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,KI(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),cs=0,Nh(),dt=i,Ve=a=Wi(i.current,null),qe=r,it=0,Vn=null,tr=!1,sa=Rs(i,r),Ch=!1,ra=On=Ih=fo=nr=At=0,In=Nl=null,wh=!1,(r&8)!==0&&(r|=r&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=r;0<c;){var y=31-dn(c),_=1<<y;r|=i[y],c&=~_}return us=r,Qu(),a}function S_(i,r){Ne=null,$.H=Sl,r===Xo||r===ic?(r=Og(),it=3):r===Pf?(r=Og(),it=4):it=r===lh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Vn=r,Ve===null&&(At=1,yc(i,$n(r,i.current)))}function A_(){var i=Ln.current;return i===null?!0:(qe&4194048)===qe?jn===null:(qe&62914560)===qe||(qe&536870912)!==0?i===jn:!1}function C_(){var i=$.H;return $.H=Sl,i===null?Sl:i}function I_(){var i=$.A;return $.A=II,i}function xc(){At=4,tr||(qe&4194048)!==qe&&Ln.current!==null||(sa=!0),(nr&134217727)===0&&(fo&134217727)===0||dt===null||rr(dt,qe,On,!1)}function Mh(i,r,a){var c=tt;tt|=2;var y=C_(),_=I_();(dt!==i||qe!==r)&&(Rc=null,aa(i,r)),r=!1;var C=At;e:do try{if(it!==0&&Ve!==null){var w=Ve,U=Vn;switch(it){case 8:Nh(),C=6;break e;case 3:case 2:case 9:case 6:Ln.current===null&&(r=!0);var J=it;if(it=0,Vn=null,la(i,w,U,J),a&&sa){C=0;break e}break;default:J=it,it=0,Vn=null,la(i,w,U,J)}}bI(),C=At;break}catch(j){S_(i,j)}while(!0);return r&&i.shellSuspendCounter++,Zi=no=null,tt=c,$.H=y,$.A=_,Ve===null&&(dt=null,qe=0,Qu()),C}function bI(){for(;Ve!==null;)w_(Ve)}function xI(i,r){var a=tt;tt|=2;var c=C_(),y=I_();dt!==i||qe!==r?(Rc=null,wc=Xe()+500,aa(i,r)):sa=Rs(i,r);e:do try{if(it!==0&&Ve!==null){r=Ve;var _=Vn;t:switch(it){case 1:it=0,Vn=null,la(i,r,_,1);break;case 2:case 9:if(Ug(_)){it=0,Vn=null,R_(r);break}r=function(){it!==2&&it!==9||dt!==i||(it=7),Ni(i)},_.then(r,r);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:Ug(_)?(it=0,Vn=null,R_(r)):(it=0,Vn=null,la(i,r,_,7));break;case 5:var C=null;switch(Ve.tag){case 26:C=Ve.memoizedState;case 5:case 27:var w=Ve;if(C?fv(C):w.stateNode.complete){it=0,Vn=null;var U=w.sibling;if(U!==null)Ve=U;else{var J=w.return;J!==null?(Ve=J,Nc(J)):Ve=null}break t}}it=0,Vn=null,la(i,r,_,5);break;case 6:it=0,Vn=null,la(i,r,_,6);break;case 8:Nh(),At=6;break e;default:throw Error(s(462))}}NI();break}catch(j){S_(i,j)}while(!0);return Zi=no=null,$.H=c,$.A=y,tt=a,Ve!==null?0:(dt=null,qe=0,Qu(),At)}function NI(){for(;Ve!==null&&!Ue();)w_(Ve)}function w_(i){var r=Xy(i.alternate,i,us);i.memoizedProps=i.pendingProps,r===null?Nc(i):Ve=r}function R_(i){var r=i,a=r.alternate;switch(r.tag){case 15:case 0:r=Gy(a,r,r.pendingProps,r.type,void 0,qe);break;case 11:r=Gy(a,r,r.pendingProps,r.type.render,r.ref,qe);break;case 5:Yf(r);default:jy(a,r),r=Ve=Ig(r,us),r=Xy(a,r,us)}i.memoizedProps=i.pendingProps,r===null?Nc(i):Ve=r}function la(i,r,a,c){Zi=no=null,Yf(r),Wo=null,pl=0;var y=r.return;try{if(_I(i,y,r,a,qe)){At=1,yc(i,$n(a,i.current)),Ve=null;return}}catch(_){if(y!==null)throw Ve=y,_;At=1,yc(i,$n(a,i.current)),Ve=null;return}r.flags&32768?(He||c===1?i=!0:sa||(qe&536870912)!==0?i=!1:(tr=i=!0,(c===2||c===9||c===3||c===6)&&(c=Ln.current,c!==null&&c.tag===13&&(c.flags|=16384))),b_(r,i)):Nc(r)}function Nc(i){var r=i;do{if((r.flags&32768)!==0){b_(r,tr);return}i=r.return;var a=EI(r.alternate,r,us);if(a!==null){Ve=a;return}if(r=r.sibling,r!==null){Ve=r;return}Ve=r=i}while(r!==null);At===0&&(At=5)}function b_(i,r){do{var a=SI(i.alternate,i);if(a!==null){a.flags&=32767,Ve=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(i=i.sibling,i!==null)){Ve=i;return}Ve=i=a}while(i!==null);At=6,Ve=null}function x_(i,r,a,c,y,_,C,w,U){i.cancelPendingCommit=null;do Mc();while(Bt!==0);if((tt&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(_=r.lanes|r.childLanes,_|=vf,$t(i,a,_,C,w,U),i===dt&&(Ve=dt=null,qe=0),oa=r,sr=i,cs=a,Rh=_,bh=y,__=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,PI(ct,function(){return P_(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=$.T,$.T=null,y=oe.p,oe.p=2,C=tt,tt|=4;try{AI(i,r,a)}finally{tt=C,oe.p=y,$.T=c}}Bt=1,N_(),M_(),D_()}}function N_(){if(Bt===1){Bt=0;var i=sr,r=oa,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=$.T,$.T=null;var c=oe.p;oe.p=2;var y=tt;tt|=4;try{c_(r,i);var _=zh,C=gg(i.containerInfo),w=_.focusedElem,U=_.selectionRange;if(C!==w&&w&&w.ownerDocument&&mg(w.ownerDocument.documentElement,w)){if(U!==null&&pf(w)){var J=U.start,j=U.end;if(j===void 0&&(j=J),"selectionStart"in w)w.selectionStart=J,w.selectionEnd=Math.min(j,w.value.length);else{var te=w.ownerDocument||document,Y=te&&te.defaultView||window;if(Y.getSelection){var Q=Y.getSelection(),me=w.textContent.length,Ee=Math.min(U.start,me),at=U.end===void 0?Ee:Math.min(U.end,me);!Q.extend&&Ee>at&&(C=at,at=Ee,Ee=C);var B=pg(w,Ee),O=pg(w,at);if(B&&O&&(Q.rangeCount!==1||Q.anchorNode!==B.node||Q.anchorOffset!==B.offset||Q.focusNode!==O.node||Q.focusOffset!==O.offset)){var G=te.createRange();G.setStart(B.node,B.offset),Q.removeAllRanges(),Ee>at?(Q.addRange(G),Q.extend(O.node,O.offset)):(G.setEnd(O.node,O.offset),Q.addRange(G))}}}}for(te=[],Q=w;Q=Q.parentNode;)Q.nodeType===1&&te.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<te.length;w++){var ee=te[w];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}zc=!!Hh,zh=Hh=null}finally{tt=y,oe.p=c,$.T=a}}i.current=r,Bt=2}}function M_(){if(Bt===2){Bt=0;var i=sr,r=oa,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=$.T,$.T=null;var c=oe.p;oe.p=2;var y=tt;tt|=4;try{r_(i,r.alternate,r)}finally{tt=y,oe.p=c,$.T=a}}Bt=3}}function D_(){if(Bt===4||Bt===3){Bt=0,Je();var i=sr,r=oa,a=cs,c=__;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Bt=5:(Bt=0,oa=sr=null,k_(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(ir=null),Ka(a),r=r.stateNode,nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(Is,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=$.T,y=oe.p,oe.p=2,$.T=null;try{for(var _=i.onRecoverableError,C=0;C<c.length;C++){var w=c[C];_(w.value,{componentStack:w.stack})}}finally{$.T=r,oe.p=y}}(cs&3)!==0&&Mc(),Ni(i),y=i.pendingLanes,(a&261930)!==0&&(y&42)!==0?i===xh?Ml++:(Ml=0,xh=i):Ml=0,Dl(0)}}function k_(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,fl(r)))}function Mc(){return N_(),M_(),D_(),P_()}function P_(){if(Bt!==5)return!1;var i=sr,r=Rh;Rh=0;var a=Ka(cs),c=$.T,y=oe.p;try{oe.p=32>a?32:a,$.T=null,a=bh,bh=null;var _=sr,C=cs;if(Bt=0,oa=sr=null,cs=0,(tt&6)!==0)throw Error(s(331));var w=tt;if(tt|=4,m_(_.current),f_(_,_.current,C,a),tt=w,Dl(0,!1),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(Is,_)}catch{}return!0}finally{oe.p=y,$.T=c,k_(i,r)}}function L_(i,r,a){r=$n(a,r),r=ah(i.stateNode,r,2),i=Ws(i,r,2),i!==null&&(bs(i,2),Ni(i))}function st(i,r,a){if(i.tag===3)L_(i,i,a);else for(;r!==null;){if(r.tag===3){L_(r,i,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ir===null||!ir.has(c))){i=$n(a,i),a=Uy(2),c=Ws(r,a,2),c!==null&&(Vy(a,c,r,i),bs(c,2),Ni(c));break}}r=r.return}}function Dh(i,r,a){var c=i.pingCache;if(c===null){c=i.pingCache=new wI;var y=new Set;c.set(r,y)}else y=c.get(r),y===void 0&&(y=new Set,c.set(r,y));y.has(a)||(Ch=!0,y.add(a),i=MI.bind(null,i,r,a),r.then(i,i))}function MI(i,r,a){var c=i.pingCache;c!==null&&c.delete(r),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,dt===i&&(qe&a)===a&&(At===4||At===3&&(qe&62914560)===qe&&300>Xe()-Ic?(tt&2)===0&&aa(i,0):Ih|=a,ra===qe&&(ra=0)),Ni(i)}function U_(i,r){r===0&&(r=Ga()),i=Zr(i,r),i!==null&&(bs(i,r),Ni(i))}function DI(i){var r=i.memoizedState,a=0;r!==null&&(a=r.retryLane),U_(i,a)}function kI(i,r){var a=0;switch(i.tag){case 31:case 13:var c=i.stateNode,y=i.memoizedState;y!==null&&(a=y.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(r),U_(i,a)}function PI(i,r){return Hn(i,r)}var Dc=null,ua=null,kh=!1,kc=!1,Ph=!1,or=0;function Ni(i){i!==ua&&i.next===null&&(ua===null?Dc=ua=i:ua=ua.next=i),kc=!0,kh||(kh=!0,UI())}function Dl(i,r){if(!Ph&&kc){Ph=!0;do for(var a=!1,c=Dc;c!==null;){if(i!==0){var y=c.pendingLanes;if(y===0)var _=0;else{var C=c.suspendedLanes,w=c.pingedLanes;_=(1<<31-dn(42|i)+1)-1,_&=y&~(C&~w),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(a=!0,B_(c,_))}else _=qe,_=Gn(c,c===dt?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(_&3)===0||Rs(c,_)||(a=!0,B_(c,_));c=c.next}while(a);Ph=!1}}function LI(){V_()}function V_(){kc=kh=!1;var i=0;or!==0&&YI()&&(i=or);for(var r=Xe(),a=null,c=Dc;c!==null;){var y=c.next,_=O_(c,r);_===0?(c.next=null,a===null?Dc=y:a.next=y,y===null&&(ua=a)):(a=c,(i!==0||(_&3)!==0)&&(kc=!0)),c=y}Bt!==0&&Bt!==5||Dl(i),or!==0&&(or=0)}function O_(i,r){for(var a=i.suspendedLanes,c=i.pingedLanes,y=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var C=31-dn(_),w=1<<C,U=y[C];U===-1?((w&a)===0||(w&c)!==0)&&(y[C]=xo(w,r)):U<=r&&(i.expiredLanes|=w),_&=~w}if(r=dt,a=qe,a=Gn(i,i===r?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,a===0||i===r&&(it===2||it===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&ce(c),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||Rs(i,a)){if(r=a&-a,r===i.callbackPriority)return r;switch(c!==null&&ce(c),Ka(a)){case 2:case 8:a=ut;break;case 32:a=ct;break;case 268435456:a=oi;break;default:a=ct}return c=q_.bind(null,i),a=Hn(a,c),i.callbackPriority=r,i.callbackNode=a,r}return c!==null&&c!==null&&ce(c),i.callbackPriority=2,i.callbackNode=null,2}function q_(i,r){if(Bt!==0&&Bt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(Mc()&&i.callbackNode!==a)return null;var c=qe;return c=Gn(i,i===dt?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(T_(i,c,r),O_(i,Xe()),i.callbackNode!=null&&i.callbackNode===a?q_.bind(null,i):null)}function B_(i,r){if(Mc())return null;T_(i,r,!0)}function UI(){$I(function(){(tt&6)!==0?Hn(lt,LI):V_()})}function Lh(){if(or===0){var i=$o;i===0&&(i=Br,Br<<=1,(Br&261888)===0&&(Br=256)),or=i}return or}function F_(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ci(""+i)}function H_(i,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,i.id&&a.setAttribute("form",i.id),r.parentNode.insertBefore(a,r),i=new FormData(i),a.parentNode.removeChild(a),i}function VI(i,r,a,c,y){if(r==="submit"&&a&&a.stateNode===y){var _=F_((y[Qt]||null).action),C=c.submitter;C&&(r=(r=C[Qt]||null)?F_(r.formAction):C.getAttribute("formAction"),r!==null&&(_=r,C=null));var w=new Yr("action","action",null,c,y);i.push({event:w,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(or!==0){var U=C?H_(y,C):new FormData(y);th(a,{pending:!0,data:U,method:y.method,action:_},null,U)}}else typeof _=="function"&&(w.preventDefault(),U=C?H_(y,C):new FormData(y),th(a,{pending:!0,data:U,method:y.method,action:_},_,U))},currentTarget:y}]})}}for(var Uh=0;Uh<_f.length;Uh++){var Vh=_f[Uh],OI=Vh.toLowerCase(),qI=Vh[0].toUpperCase()+Vh.slice(1);ci(OI,"on"+qI)}ci(vg,"onAnimationEnd"),ci(Tg,"onAnimationIteration"),ci(Eg,"onAnimationStart"),ci("dblclick","onDoubleClick"),ci("focusin","onFocus"),ci("focusout","onBlur"),ci(tI,"onTransitionRun"),ci(nI,"onTransitionStart"),ci(iI,"onTransitionCancel"),ci(Sg,"onTransitionEnd"),Ai("onMouseEnter",["mouseout","mouseover"]),Ai("onMouseLeave",["mouseout","mouseover"]),Ai("onPointerEnter",["pointerout","pointerover"]),Ai("onPointerLeave",["pointerout","pointerover"]),fn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fn("onBeforeInput",["compositionend","keypress","textInput","paste"]),fn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(kl));function z_(i,r){r=(r&4)!==0;for(var a=0;a<i.length;a++){var c=i[a],y=c.event;c=c.listeners;e:{var _=void 0;if(r)for(var C=c.length-1;0<=C;C--){var w=c[C],U=w.instance,J=w.currentTarget;if(w=w.listener,U!==_&&y.isPropagationStopped())break e;_=w,y.currentTarget=J;try{_(y)}catch(j){$u(j)}y.currentTarget=null,_=U}else for(C=0;C<c.length;C++){if(w=c[C],U=w.instance,J=w.currentTarget,w=w.listener,U!==_&&y.isPropagationStopped())break e;_=w,y.currentTarget=J;try{_(y)}catch(j){$u(j)}y.currentTarget=null,_=U}}}}function Oe(i,r){var a=r[Ms];a===void 0&&(a=r[Ms]=new Set);var c=i+"__bubble";a.has(c)||(G_(r,i,2,!1),a.add(c))}function Oh(i,r,a){var c=0;r&&(c|=4),G_(a,i,c,r)}var Pc="_reactListening"+Math.random().toString(36).slice(2);function qh(i){if(!i[Pc]){i[Pc]=!0,No.forEach(function(a){a!=="selectionchange"&&(BI.has(a)||Oh(a,!1,i),Oh(a,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Pc]||(r[Pc]=!0,Oh("selectionchange",!1,r))}}function G_(i,r,a,c){switch(vv(r)){case 2:var y=pw;break;case 8:y=mw;break;default:y=ep}a=y.bind(null,r,a,i),y=void 0,!tl||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),c?y!==void 0?i.addEventListener(r,a,{capture:!0,passive:y}):i.addEventListener(r,a,!0):y!==void 0?i.addEventListener(r,a,{passive:y}):i.addEventListener(r,a,!1)}function Bh(i,r,a,c,y){var _=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var C=c.tag;if(C===3||C===4){var w=c.stateNode.containerInfo;if(w===y)break;if(C===4)for(C=c.return;C!==null;){var U=C.tag;if((U===3||U===4)&&C.stateNode.containerInfo===y)return;C=C.return}for(;w!==null;){if(C=Gi(w),C===null)return;if(U=C.tag,U===5||U===6||U===26||U===27){c=_=C;continue e}w=w.parentNode}}c=c.return}Du(function(){var J=_,j=Lo(a),te=[];e:{var Y=Ag.get(i);if(Y!==void 0){var Q=Yr,me=i;switch(i){case"keypress":if(Jr(a)===0)break e;case"keydown":case"keyup":Q=Fu;break;case"focusin":me="focus",Q=Fs;break;case"focusout":me="blur",Q=Fs;break;case"beforeblur":case"afterblur":Q=Fs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Pu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Lu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=zu;break;case vg:case Tg:case Eg:Q=Oo;break;case Sg:Q=qo;break;case"scroll":case"scrollend":Q=ku;break;case"wheel":Q=Ju;break;case"copy":case"cut":case"paste":Q=Vu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=ol;break;case"toggle":case"beforetoggle":Q=zs}var Ee=(r&4)!==0,at=!Ee&&(i==="scroll"||i==="scrollend"),B=Ee?Y!==null?Y+"Capture":null:Y;Ee=[];for(var O=J,G;O!==null;){var ee=O;if(G=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||G===null||B===null||(ee=Tn(O,B),ee!=null&&Ee.push(Pl(O,ee,G))),at)break;O=O.return}0<Ee.length&&(Y=new Q(Y,me,null,a,j),te.push({event:Y,listeners:Ee}))}}if((r&7)===0){e:{if(Y=i==="mouseover"||i==="pointerover",Q=i==="mouseout"||i==="pointerout",Y&&a!==Po&&(me=a.relatedTarget||a.fromElement)&&(Gi(me)||me[Ei]))break e;if((Q||Y)&&(Y=j.window===j?j:(Y=j.ownerDocument)?Y.defaultView||Y.parentWindow:window,Q?(me=a.relatedTarget||a.toElement,Q=J,me=me?Gi(me):null,me!==null&&(at=l(me),Ee=me.tag,me!==at||Ee!==5&&Ee!==27&&Ee!==6)&&(me=null)):(Q=null,me=J),Q!==me)){if(Ee=Pu,ee="onMouseLeave",B="onMouseEnter",O="mouse",(i==="pointerout"||i==="pointerover")&&(Ee=ol,ee="onPointerLeave",B="onPointerEnter",O="pointer"),at=Q==null?Y:Hr(Q),G=me==null?Y:Hr(me),Y=new Ee(ee,O+"leave",Q,a,j),Y.target=at,Y.relatedTarget=G,ee=null,Gi(j)===J&&(Ee=new Ee(B,O+"enter",me,a,j),Ee.target=G,Ee.relatedTarget=at,ee=Ee),at=ee,Q&&me)t:{for(Ee=FI,B=Q,O=me,G=0,ee=B;ee;ee=Ee(ee))G++;ee=0;for(var ve=O;ve;ve=Ee(ve))ee++;for(;0<G-ee;)B=Ee(B),G--;for(;0<ee-G;)O=Ee(O),ee--;for(;G--;){if(B===O||O!==null&&B===O.alternate){Ee=B;break t}B=Ee(B),O=Ee(O)}Ee=null}else Ee=null;Q!==null&&J_(te,Y,Q,Ee,!1),me!==null&&at!==null&&J_(te,at,me,Ee,!0)}}e:{if(Y=J?Hr(J):window,Q=Y.nodeName&&Y.nodeName.toLowerCase(),Q==="select"||Q==="input"&&Y.type==="file")var je=lg;else if(En(Y))if(ug)je=jC;else{je=XC;var ye=QC}else Q=Y.nodeName,!Q||Q.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?J&&Za(J.elementType)&&(je=lg):je=WC;if(je&&(je=je(i,J))){Xr(te,je,a,j);break e}ye&&ye(i,Y,J),i==="focusout"&&J&&Y.type==="number"&&J.memoizedProps.value!=null&&ko(Y,"number",Y.value)}switch(ye=J?Hr(J):window,i){case"focusin":(En(ye)||ye.contentEditable==="true")&&(Bo=ye,mf=J,ul=null);break;case"focusout":ul=mf=Bo=null;break;case"mousedown":gf=!0;break;case"contextmenu":case"mouseup":case"dragend":gf=!1,yg(te,a,j);break;case"selectionchange":if(eI)break;case"keydown":case"keyup":yg(te,a,j)}var Me;if(E)e:{switch(i){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else Pe?nt(i,a)&&(Be="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Be="onCompositionStart");Be&&(H&&a.locale!=="ko"&&(Pe||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&Pe&&(Me=Vs()):(Dn=j,Uo="value"in Dn?Dn.value:Dn.textContent,Pe=!0)),ye=Lc(J,Be),0<ye.length&&(Be=new il(Be,i,null,a,j),te.push({event:Be,listeners:ye}),Me?Be.data=Me:(Me=Dt(a),Me!==null&&(Be.data=Me)))),(Me=b?Gt(i,a):Jt(i,a))&&(Be=Lc(J,"onBeforeInput"),0<Be.length&&(ye=new il("onBeforeInput","beforeinput",null,a,j),te.push({event:ye,listeners:Be}),ye.data=Me)),VI(te,i,J,a,j)}z_(te,r)})}function Pl(i,r,a){return{instance:i,listener:r,currentTarget:a}}function Lc(i,r){for(var a=r+"Capture",c=[];i!==null;){var y=i,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=Tn(i,a),y!=null&&c.unshift(Pl(i,y,_)),y=Tn(i,r),y!=null&&c.push(Pl(i,y,_))),i.tag===3)return c;i=i.return}return[]}function FI(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function J_(i,r,a,c,y){for(var _=r._reactName,C=[];a!==null&&a!==c;){var w=a,U=w.alternate,J=w.stateNode;if(w=w.tag,U!==null&&U===c)break;w!==5&&w!==26&&w!==27||J===null||(U=J,y?(J=Tn(a,_),J!=null&&C.unshift(Pl(a,J,U))):y||(J=Tn(a,_),J!=null&&C.push(Pl(a,J,U)))),a=a.return}C.length!==0&&i.push({event:r,listeners:C})}var HI=/\r\n?/g,zI=/\u0000|\uFFFD/g;function Y_(i){return(typeof i=="string"?i:""+i).replace(HI,`
`).replace(zI,"")}function K_(i,r){return r=Y_(r),Y_(i)===r}function ot(i,r,a,c,y,_){switch(a){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||Yn(i,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&Yn(i,""+c);break;case"className":Ps(i,"class",c);break;case"tabIndex":Ps(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Ps(i,a,c);break;case"style":Nu(i,c,_);break;case"data":if(r!=="object"){Ps(i,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||a!=="href")){i.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Ci(""+c),i.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(a==="formAction"?(r!=="input"&&ot(i,r,"name",y.name,y,null),ot(i,r,"formEncType",y.formEncType,y,null),ot(i,r,"formMethod",y.formMethod,y,null),ot(i,r,"formTarget",y.formTarget,y,null)):(ot(i,r,"encType",y.encType,y,null),ot(i,r,"method",y.method,y,null),ot(i,r,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Ci(""+c),i.setAttribute(a,c);break;case"onClick":c!=null&&(i.onclick=zt);break;case"onScroll":c!=null&&Oe("scroll",i);break;case"onScrollEnd":c!=null&&Oe("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}a=Ci(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""+c):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":c===!0?i.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,c):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(a,c):i.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(a):i.setAttribute(a,c);break;case"popover":Oe("beforetoggle",i),Oe("toggle",i),ks(i,"popover",c);break;case"xlinkActuate":Jn(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Jn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Jn(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Jn(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Jn(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Jn(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Jn(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Jn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Jn(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":ks(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=uf.get(a)||a,ks(i,a,c))}}function Fh(i,r,a,c,y,_){switch(a){case"style":Nu(i,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof c=="string"?Yn(i,c):(typeof c=="number"||typeof c=="bigint")&&Yn(i,""+c);break;case"onScroll":c!=null&&Oe("scroll",i);break;case"onScrollEnd":c!=null&&Oe("scrollend",i);break;case"onClick":c!=null&&(i.onclick=zt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ds.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),r=a.slice(2,y?a.length-7:void 0),_=i[Qt]||null,_=_!=null?_[a]:null,typeof _=="function"&&i.removeEventListener(r,_,y),typeof c=="function")){typeof _!="function"&&_!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(r,c,y);break e}a in i?i[a]=c:c===!0?i.setAttribute(a,""):ks(i,a,c)}}}function Zt(i,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",i),Oe("load",i);var c=!1,y=!1,_;for(_ in a)if(a.hasOwnProperty(_)){var C=a[_];if(C!=null)switch(_){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:ot(i,r,_,C,a,null)}}y&&ot(i,r,"srcSet",a.srcSet,a,null),c&&ot(i,r,"src",a.src,a,null);return;case"input":Oe("invalid",i);var w=_=C=y=null,U=null,J=null;for(c in a)if(a.hasOwnProperty(c)){var j=a[c];if(j!=null)switch(c){case"name":y=j;break;case"type":C=j;break;case"checked":U=j;break;case"defaultChecked":J=j;break;case"value":_=j;break;case"defaultValue":w=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(137,r));break;default:ot(i,r,c,j,a,null)}}zr(i,_,w,U,J,C,y,!1);return;case"select":Oe("invalid",i),c=C=_=null;for(y in a)if(a.hasOwnProperty(y)&&(w=a[y],w!=null))switch(y){case"value":_=w;break;case"defaultValue":C=w;break;case"multiple":c=w;default:ot(i,r,y,w,a,null)}r=_,a=C,i.multiple=!!c,r!=null?We(i,!!c,r,!1):a!=null&&We(i,!!c,a,!0);return;case"textarea":Oe("invalid",i),_=y=c=null;for(C in a)if(a.hasOwnProperty(C)&&(w=a[C],w!=null))switch(C){case"value":c=w;break;case"defaultValue":y=w;break;case"children":_=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:ot(i,r,C,w,a,null)}Us(i,c,y,_);return;case"option":for(U in a)if(a.hasOwnProperty(U)&&(c=a[U],c!=null))switch(U){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ot(i,r,U,c,a,null)}return;case"dialog":Oe("beforetoggle",i),Oe("toggle",i),Oe("cancel",i),Oe("close",i);break;case"iframe":case"object":Oe("load",i);break;case"video":case"audio":for(c=0;c<kl.length;c++)Oe(kl[c],i);break;case"image":Oe("error",i),Oe("load",i);break;case"details":Oe("toggle",i);break;case"embed":case"source":case"link":Oe("error",i),Oe("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in a)if(a.hasOwnProperty(J)&&(c=a[J],c!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:ot(i,r,J,c,a,null)}return;default:if(Za(r)){for(j in a)a.hasOwnProperty(j)&&(c=a[j],c!==void 0&&Fh(i,r,j,c,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(c=a[w],c!=null&&ot(i,r,w,c,a,null))}function GI(i,r,a,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,C=null,w=null,U=null,J=null,j=null;for(Q in a){var te=a[Q];if(a.hasOwnProperty(Q)&&te!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":U=te;default:c.hasOwnProperty(Q)||ot(i,r,Q,null,c,te)}}for(var Y in c){var Q=c[Y];if(te=a[Y],c.hasOwnProperty(Y)&&(Q!=null||te!=null))switch(Y){case"type":_=Q;break;case"name":y=Q;break;case"checked":J=Q;break;case"defaultChecked":j=Q;break;case"value":C=Q;break;case"defaultValue":w=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,r));break;default:Q!==te&&ot(i,r,Y,Q,c,te)}}Ls(i,C,w,U,J,j,_,y);return;case"select":Q=C=w=Y=null;for(_ in a)if(U=a[_],a.hasOwnProperty(_)&&U!=null)switch(_){case"value":break;case"multiple":Q=U;default:c.hasOwnProperty(_)||ot(i,r,_,null,c,U)}for(y in c)if(_=c[y],U=a[y],c.hasOwnProperty(y)&&(_!=null||U!=null))switch(y){case"value":Y=_;break;case"defaultValue":w=_;break;case"multiple":C=_;default:_!==U&&ot(i,r,y,_,c,U)}r=w,a=C,c=Q,Y!=null?We(i,!!a,Y,!1):!!c!=!!a&&(r!=null?We(i,!!a,r,!0):We(i,!!a,a?[]:"",!1));return;case"textarea":Q=Y=null;for(w in a)if(y=a[w],a.hasOwnProperty(w)&&y!=null&&!c.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:ot(i,r,w,null,c,y)}for(C in c)if(y=c[C],_=a[C],c.hasOwnProperty(C)&&(y!=null||_!=null))switch(C){case"value":Y=y;break;case"defaultValue":Q=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:y!==_&&ot(i,r,C,y,c,_)}Gr(i,Y,Q);return;case"option":for(var me in a)if(Y=a[me],a.hasOwnProperty(me)&&Y!=null&&!c.hasOwnProperty(me))switch(me){case"selected":i.selected=!1;break;default:ot(i,r,me,null,c,Y)}for(U in c)if(Y=c[U],Q=a[U],c.hasOwnProperty(U)&&Y!==Q&&(Y!=null||Q!=null))switch(U){case"selected":i.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:ot(i,r,U,Y,c,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in a)Y=a[Ee],a.hasOwnProperty(Ee)&&Y!=null&&!c.hasOwnProperty(Ee)&&ot(i,r,Ee,null,c,Y);for(J in c)if(Y=c[J],Q=a[J],c.hasOwnProperty(J)&&Y!==Q&&(Y!=null||Q!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,r));break;default:ot(i,r,J,Y,c,Q)}return;default:if(Za(r)){for(var at in a)Y=a[at],a.hasOwnProperty(at)&&Y!==void 0&&!c.hasOwnProperty(at)&&Fh(i,r,at,void 0,c,Y);for(j in c)Y=c[j],Q=a[j],!c.hasOwnProperty(j)||Y===Q||Y===void 0&&Q===void 0||Fh(i,r,j,Y,c,Q);return}}for(var B in a)Y=a[B],a.hasOwnProperty(B)&&Y!=null&&!c.hasOwnProperty(B)&&ot(i,r,B,null,c,Y);for(te in c)Y=c[te],Q=a[te],!c.hasOwnProperty(te)||Y===Q||Y==null&&Q==null||ot(i,r,te,Y,c,Q)}function $_(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function JI(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var y=a[c],_=y.transferSize,C=y.initiatorType,w=y.duration;if(_&&w&&$_(C)){for(C=0,w=y.responseEnd,c+=1;c<a.length;c++){var U=a[c],J=U.startTime;if(J>w)break;var j=U.transferSize,te=U.initiatorType;j&&$_(te)&&(U=U.responseEnd,C+=j*(U<w?1:(w-J)/(U-J)))}if(--c,r+=8*(_+C)/(y.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Hh=null,zh=null;function Uc(i){return i.nodeType===9?i:i.ownerDocument}function Q_(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function X_(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function Gh(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Jh=null;function YI(){var i=window.event;return i&&i.type==="popstate"?i===Jh?!1:(Jh=i,!0):(Jh=null,!1)}var W_=typeof setTimeout=="function"?setTimeout:void 0,KI=typeof clearTimeout=="function"?clearTimeout:void 0,j_=typeof Promise=="function"?Promise:void 0,$I=typeof queueMicrotask=="function"?queueMicrotask:typeof j_<"u"?function(i){return j_.resolve(null).then(i).catch(QI)}:W_;function QI(i){setTimeout(function(){throw i})}function ar(i){return i==="head"}function Z_(i,r){var a=r,c=0;do{var y=a.nextSibling;if(i.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(c===0){i.removeChild(y),ha(r);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")Ll(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,Ll(a);for(var _=a.firstChild;_;){var C=_.nextSibling,w=_.nodeName;_[zi]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=C}}else a==="body"&&Ll(i.ownerDocument.body);a=y}while(a);ha(r)}function ev(i,r){var a=i;i=0;do{var c=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=c}while(a)}function Yh(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Yh(a),Fr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function XI(i,r,a,c){for(;i.nodeType===1;){var y=a;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[zi])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=Zn(i.nextSibling),i===null)break}return null}function WI(i,r,a){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Zn(i.nextSibling),i===null))return null;return i}function tv(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=Zn(i.nextSibling),i===null))return null;return i}function Kh(i){return i.data==="$?"||i.data==="$~"}function $h(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function jI(i,r){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||a.readyState!=="loading")r();else{var c=function(){r(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function Zn(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var Qh=null;function nv(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(r===0)return Zn(i.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}i=i.nextSibling}return null}function iv(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return i;r--}else a!=="/$"&&a!=="/&"||r++}i=i.previousSibling}return null}function sv(i,r,a){switch(r=Uc(a),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Ll(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);Fr(i)}var ei=new Map,rv=new Set;function Vc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ds=oe.d;oe.d={f:ZI,r:ew,D:tw,C:nw,L:iw,m:sw,X:ow,S:rw,M:aw};function ZI(){var i=ds.f(),r=bc();return i||r}function ew(i){var r=Ji(i);r!==null&&r.tag===5&&r.type==="form"?Sy(r):ds.r(i)}var ca=typeof document>"u"?null:document;function ov(i,r,a){var c=ca;if(c&&typeof r=="string"&&r){var y=Et(r);y='link[rel="'+i+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),rv.has(y)||(rv.add(y),i={rel:i,crossOrigin:a,href:r},c.querySelector(y)===null&&(r=c.createElement("link"),Zt(r,"link",i),wt(r),c.head.appendChild(r)))}}function tw(i){ds.D(i),ov("dns-prefetch",i,null)}function nw(i,r){ds.C(i,r),ov("preconnect",i,r)}function iw(i,r,a){ds.L(i,r,a);var c=ca;if(c&&i&&r){var y='link[rel="preload"][as="'+Et(r)+'"]';r==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+Et(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+Et(a.imageSizes)+'"]')):y+='[href="'+Et(i)+'"]';var _=y;switch(r){case"style":_=da(i);break;case"script":_=fa(i)}ei.has(_)||(i=T({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:i,as:r},a),ei.set(_,i),c.querySelector(y)!==null||r==="style"&&c.querySelector(Ul(_))||r==="script"&&c.querySelector(Vl(_))||(r=c.createElement("link"),Zt(r,"link",i),wt(r),c.head.appendChild(r)))}}function sw(i,r){ds.m(i,r);var a=ca;if(a&&i){var c=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+Et(c)+'"][href="'+Et(i)+'"]',_=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=fa(i)}if(!ei.has(_)&&(i=T({rel:"modulepreload",href:i},r),ei.set(_,i),a.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Vl(_)))return}c=a.createElement("link"),Zt(c,"link",i),wt(c),a.head.appendChild(c)}}}function rw(i,r,a){ds.S(i,r,a);var c=ca;if(c&&i){var y=li(c).hoistableStyles,_=da(i);r=r||"default";var C=y.get(_);if(!C){var w={loading:0,preload:null};if(C=c.querySelector(Ul(_)))w.loading=5;else{i=T({rel:"stylesheet",href:i,"data-precedence":r},a),(a=ei.get(_))&&Xh(i,a);var U=C=c.createElement("link");wt(U),Zt(U,"link",i),U._p=new Promise(function(J,j){U.onload=J,U.onerror=j}),U.addEventListener("load",function(){w.loading|=1}),U.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Oc(C,r,c)}C={type:"stylesheet",instance:C,count:1,state:w},y.set(_,C)}}}function ow(i,r){ds.X(i,r);var a=ca;if(a&&i){var c=li(a).hoistableScripts,y=fa(i),_=c.get(y);_||(_=a.querySelector(Vl(y)),_||(i=T({src:i,async:!0},r),(r=ei.get(y))&&Wh(i,r),_=a.createElement("script"),wt(_),Zt(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function aw(i,r){ds.M(i,r);var a=ca;if(a&&i){var c=li(a).hoistableScripts,y=fa(i),_=c.get(y);_||(_=a.querySelector(Vl(y)),_||(i=T({src:i,async:!0,type:"module"},r),(r=ei.get(y))&&Wh(i,r),_=a.createElement("script"),wt(_),Zt(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function av(i,r,a,c){var y=(y=xe.current)?Vc(y):null;if(!y)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=da(a.href),a=li(y).hoistableStyles,c=a.get(r),c||(c={type:"style",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=da(a.href);var _=li(y).hoistableStyles,C=_.get(i);if(C||(y=y.ownerDocument||y,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,C),(_=y.querySelector(Ul(i)))&&!_._p&&(C.instance=_,C.state.loading=5),ei.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ei.set(i,a),_||lw(y,i,a,C.state))),r&&c===null)throw Error(s(528,""));return C}if(r&&c!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=fa(a),a=li(y).hoistableScripts,c=a.get(r),c||(c={type:"script",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function da(i){return'href="'+Et(i)+'"'}function Ul(i){return'link[rel="stylesheet"]['+i+"]"}function lv(i){return T({},i,{"data-precedence":i.precedence,precedence:null})}function lw(i,r,a,c){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=i.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),Zt(r,"link",a),wt(r),i.head.appendChild(r))}function fa(i){return'[src="'+Et(i)+'"]'}function Vl(i){return"script[async]"+i}function uv(i,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var c=i.querySelector('style[data-href~="'+Et(a.href)+'"]');if(c)return r.instance=c,wt(c),c;var y=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),wt(c),Zt(c,"style",y),Oc(c,a.precedence,i),r.instance=c;case"stylesheet":y=da(a.href);var _=i.querySelector(Ul(y));if(_)return r.state.loading|=4,r.instance=_,wt(_),_;c=lv(a),(y=ei.get(y))&&Xh(c,y),_=(i.ownerDocument||i).createElement("link"),wt(_);var C=_;return C._p=new Promise(function(w,U){C.onload=w,C.onerror=U}),Zt(_,"link",c),r.state.loading|=4,Oc(_,a.precedence,i),r.instance=_;case"script":return _=fa(a.src),(y=i.querySelector(Vl(_)))?(r.instance=y,wt(y),y):(c=a,(y=ei.get(_))&&(c=T({},a),Wh(c,y)),i=i.ownerDocument||i,y=i.createElement("script"),wt(y),Zt(y,"link",c),i.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Oc(c,a.precedence,i));return r.instance}function Oc(i,r,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,_=y,C=0;C<c.length;C++){var w=c[C];if(w.dataset.precedence===r)_=w;else if(_!==y)break}_?_.parentNode.insertBefore(i,_.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(i,r.firstChild))}function Xh(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function Wh(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var qc=null;function cv(i,r,a){if(qc===null){var c=new Map,y=qc=new Map;y.set(a,c)}else y=qc,c=y.get(a),c||(c=new Map,y.set(a,c));if(c.has(i))return c;for(c.set(i,null),a=a.getElementsByTagName(i),y=0;y<a.length;y++){var _=a[y];if(!(_[zi]||_[Tt]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var C=_.getAttribute(r)||"";C=i+C;var w=c.get(C);w?w.push(_):c.set(C,[_])}}return c}function dv(i,r,a){i=i.ownerDocument||i,i.head.insertBefore(a,r==="title"?i.querySelector("head > title"):null)}function uw(i,r,a){if(a===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function fv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function cw(i,r,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=da(c.href),_=r.querySelector(Ul(y));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=Bc.bind(i),r.then(i,i)),a.state.loading|=4,a.instance=_,wt(_);return}_=r.ownerDocument||r,c=lv(c),(y=ei.get(y))&&Xh(c,y),_=_.createElement("link"),wt(_);var C=_;C._p=new Promise(function(w,U){C.onload=w,C.onerror=U}),Zt(_,"link",c),a.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=Bc.bind(i),r.addEventListener("load",a),r.addEventListener("error",a))}}var jh=0;function dw(i,r){return i.stylesheets&&i.count===0&&Hc(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var c=setTimeout(function(){if(i.stylesheets&&Hc(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+r);0<i.imgBytes&&jh===0&&(jh=62500*JI());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Hc(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>jh?50:800)+r);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function Bc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Hc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Fc=null;function Hc(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Fc=new Map,r.forEach(fw,i),Fc=null,Bc.call(i))}function fw(i,r){if(!(r.state.loading&4)){var a=Fc.get(i);if(a)var c=a.get(null);else{a=new Map,Fc.set(i,a);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var C=y[_];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(a.set(C.dataset.precedence,C),c=C)}c&&a.set(null,c)}y=r.instance,C=y.getAttribute("data-precedence"),_=a.get(C)||c,_===c&&a.set(null,y),a.set(C,y),this.count++,c=Bc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),_?_.parentNode.insertBefore(y,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),r.state.loading|=4}}var Ol={$$typeof:W,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function hw(i,r,a,c,y,_,C,w,U){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fi(0),this.hiddenUpdates=Fi(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function hv(i,r,a,c,y,_,C,w,U,J,j,te){return i=new hw(i,r,a,C,U,J,j,te,w),r=1,_===!0&&(r|=24),_=Pn(3,null,null,r),i.current=_,_.stateNode=i,r=Mf(),r.refCount++,i.pooledCache=r,r.refCount++,_.memoizedState={element:c,isDehydrated:a,cache:r},Lf(_),i}function pv(i){return i?(i=zo,i):zo}function mv(i,r,a,c,y,_){y=pv(y),c.context===null?c.context=y:c.pendingContext=y,c=Xs(r),c.payload={element:a},_=_===void 0?null:_,_!==null&&(c.callback=_),a=Ws(i,c,r),a!==null&&(wn(a,i,r),gl(a,i,r))}function gv(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<r?a:r}}function Zh(i,r){gv(i,r),(i=i.alternate)&&gv(i,r)}function yv(i){if(i.tag===13||i.tag===31){var r=Zr(i,67108864);r!==null&&wn(r,i,67108864),Zh(i,67108864)}}function _v(i){if(i.tag===13||i.tag===31){var r=qn();r=Ya(r);var a=Zr(i,r);a!==null&&wn(a,i,r),Zh(i,r)}}var zc=!0;function pw(i,r,a,c){var y=$.T;$.T=null;var _=oe.p;try{oe.p=2,ep(i,r,a,c)}finally{oe.p=_,$.T=y}}function mw(i,r,a,c){var y=$.T;$.T=null;var _=oe.p;try{oe.p=8,ep(i,r,a,c)}finally{oe.p=_,$.T=y}}function ep(i,r,a,c){if(zc){var y=tp(c);if(y===null)Bh(i,r,c,Gc,a),Tv(i,c);else if(yw(y,i,r,a,c))c.stopPropagation();else if(Tv(i,c),r&4&&-1<gw.indexOf(i)){for(;y!==null;){var _=Ji(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var C=ai(_.pendingLanes);if(C!==0){var w=_;for(w.pendingLanes|=2,w.entangledLanes|=2;C;){var U=1<<31-dn(C);w.entanglements[1]|=U,C&=~U}Ni(_),(tt&6)===0&&(wc=Xe()+500,Dl(0))}}break;case 31:case 13:w=Zr(_,2),w!==null&&wn(w,_,2),bc(),Zh(_,2)}if(_=tp(c),_===null&&Bh(i,r,c,Gc,a),_===y)break;y=_}y!==null&&c.stopPropagation()}else Bh(i,r,c,null,a)}}function tp(i){return i=Lo(i),np(i)}var Gc=null;function np(i){if(Gc=null,i=Gi(i),i!==null){var r=l(i);if(r===null)i=null;else{var a=r.tag;if(a===13){if(i=u(r),i!==null)return i;i=null}else if(a===31){if(i=d(r),i!==null)return i;i=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Gc=i,null}function vv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vn()){case lt:return 2;case ut:return 8;case ct:case ri:return 32;case oi:return 268435456;default:return 32}default:return 32}}var ip=!1,lr=null,ur=null,cr=null,ql=new Map,Bl=new Map,dr=[],gw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Tv(i,r){switch(i){case"focusin":case"focusout":lr=null;break;case"dragenter":case"dragleave":ur=null;break;case"mouseover":case"mouseout":cr=null;break;case"pointerover":case"pointerout":ql.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bl.delete(r.pointerId)}}function Fl(i,r,a,c,y,_){return i===null||i.nativeEvent!==_?(i={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:_,targetContainers:[y]},r!==null&&(r=Ji(r),r!==null&&yv(r)),i):(i.eventSystemFlags|=c,r=i.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),i)}function yw(i,r,a,c,y){switch(r){case"focusin":return lr=Fl(lr,i,r,a,c,y),!0;case"dragenter":return ur=Fl(ur,i,r,a,c,y),!0;case"mouseover":return cr=Fl(cr,i,r,a,c,y),!0;case"pointerover":var _=y.pointerId;return ql.set(_,Fl(ql.get(_)||null,i,r,a,c,y)),!0;case"gotpointercapture":return _=y.pointerId,Bl.set(_,Fl(Bl.get(_)||null,i,r,a,c,y)),!0}return!1}function Ev(i){var r=Gi(i.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=u(a),r!==null){i.blockedOn=r,wu(i.priority,function(){_v(a)});return}}else if(r===31){if(r=d(a),r!==null){i.blockedOn=r,wu(i.priority,function(){_v(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Jc(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var a=tp(i.nativeEvent);if(a===null){a=i.nativeEvent;var c=new a.constructor(a.type,a);Po=c,a.target.dispatchEvent(c),Po=null}else return r=Ji(a),r!==null&&yv(r),i.blockedOn=a,!1;r.shift()}return!0}function Sv(i,r,a){Jc(i)&&a.delete(r)}function _w(){ip=!1,lr!==null&&Jc(lr)&&(lr=null),ur!==null&&Jc(ur)&&(ur=null),cr!==null&&Jc(cr)&&(cr=null),ql.forEach(Sv),Bl.forEach(Sv)}function Yc(i,r){i.blockedOn===r&&(i.blockedOn=null,ip||(ip=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,_w)))}var Kc=null;function Av(i){Kc!==i&&(Kc=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Kc===i&&(Kc=null);for(var r=0;r<i.length;r+=3){var a=i[r],c=i[r+1],y=i[r+2];if(typeof c!="function"){if(np(c||a)===null)continue;break}var _=Ji(a);_!==null&&(i.splice(r,3),r-=3,th(_,{pending:!0,data:y,method:a.method,action:c},c,y))}}))}function ha(i){function r(U){return Yc(U,i)}lr!==null&&Yc(lr,i),ur!==null&&Yc(ur,i),cr!==null&&Yc(cr,i),ql.forEach(r),Bl.forEach(r);for(var a=0;a<dr.length;a++){var c=dr[a];c.blockedOn===i&&(c.blockedOn=null)}for(;0<dr.length&&(a=dr[0],a.blockedOn===null);)Ev(a),a.blockedOn===null&&dr.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var y=a[c],_=a[c+1],C=y[Qt]||null;if(typeof _=="function")C||Av(a);else if(C){var w=null;if(_&&_.hasAttribute("formAction")){if(y=_,C=_[Qt]||null)w=C.formAction;else if(np(y)!==null)continue}else w=C.action;typeof w=="function"?a[c+1]=w:(a.splice(c,3),c-=3),Av(a)}}}function Cv(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(C){return y=C})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function sp(i){this._internalRoot=i}$c.prototype.render=sp.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,c=qn();mv(a,c,i,r,null,null)},$c.prototype.unmount=sp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;mv(i.current,2,null,i,null,null),bc(),r[Ei]=null}};function $c(i){this._internalRoot=i}$c.prototype.unstable_scheduleHydration=function(i){if(i){var r=Hi();i={blockedOn:null,target:i,priority:r};for(var a=0;a<dr.length&&r!==0&&r<dr[a].priority;a++);dr.splice(a,0,i),a===0&&Ev(i)}};var Iv=e.version;if(Iv!=="19.2.0")throw Error(s(527,Iv,"19.2.0"));oe.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=g(r),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var vw={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qc.isDisabled&&Qc.supportsFiber)try{Is=Qc.inject(vw),nn=Qc}catch{}}return zl.createRoot=function(i,r){if(!o(i))throw Error(s(299));var a=!1,c="",y=Dy,_=ky,C=Py;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(C=r.onRecoverableError)),r=hv(i,1,!1,null,null,a,c,null,y,_,C,Cv),i[Ei]=r.current,qh(i),new sp(r)},zl.hydrateRoot=function(i,r,a){if(!o(i))throw Error(s(299));var c=!1,y="",_=Dy,C=ky,w=Py,U=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(C=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(U=a.formState)),r=hv(i,1,!0,r,a??null,c,y,U,_,C,w,Cv),r.context=pv(null),a=r.current,c=qn(),c=Ya(c),y=Xs(c),y.callback=null,Ws(a,y,c),a=c,r.current.lanes=a,bs(r,a),Ni(r),i[Ei]=r.current,qh(i),new $c(r)},zl.version="19.2.0",zl}var Lv;function xw(){if(Lv)return ap.exports;Lv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ap.exports=bw(),ap.exports}var Nw=xw();const Mw=FE(Nw),Dw=()=>{};var Uv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},kw=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],u=n[t++],d=n[t++],p=((o&7)<<18|(l&63)<<12|(u&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],u=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|u&63)}}return e.join("")},zE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const l=n[o],u=o+1<n.length,d=u?n[o+1]:0,p=o+2<n.length,g=p?n[o+2]:0,v=l>>2,T=(l&3)<<4|d>>4;let S=(d&15)<<2|g>>6,R=g&63;p||(R=64,u||(S=64)),s.push(t[v],t[T],t[S],t[R])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(HE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):kw(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const g=o<n.length?t[n.charAt(o)]:64;++o;const T=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||d==null||g==null||T==null)throw new Pw;const S=l<<2|d>>4;if(s.push(S),g!==64){const R=d<<4&240|g>>2;if(s.push(R),T!==64){const q=g<<6&192|T;s.push(q)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Pw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Lw=function(n){const e=HE(n);return zE.encodeByteArray(e,!0)},gd=function(n){return Lw(n).replace(/\./g,"")},GE=function(n){try{return zE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw=()=>Uw().__FIREBASE_DEFAULTS__,Ow=()=>{if(typeof process>"u"||typeof Uv>"u")return;const n=Uv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},qw=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&GE(n[1]);return e&&JSON.parse(e)},Ld=()=>{try{return Dw()||Vw()||Ow()||qw()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},JE=n=>{var e,t;return(t=(e=Ld())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},YE=n=>{const e=JE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},KE=()=>{var n;return(n=Ld())===null||n===void 0?void 0:n.config},$E=n=>{var e;return(e=Ld())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function cm(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[gd(JSON.stringify(t)),gd(JSON.stringify(u)),""].join(".")}const Zl={};function Fw(){const n={prod:[],emulator:[]};for(const e of Object.keys(Zl))Zl[e]?n.emulator.push(e):n.prod.push(e);return n}function Hw(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Vv=!1;function dm(n,e){if(typeof window>"u"||typeof document>"u"||!kr(window.location.host)||Zl[n]===e||Zl[n]||Vv)return;Zl[n]=e;function t(S){return`__firebase__banner__${S}`}const s="__firebase__banner",l=Fw().prod.length>0;function u(){const S=document.getElementById(s);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,R){S.setAttribute("width","24"),S.setAttribute("id",R),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Vv=!0,u()},S}function v(S,R){S.setAttribute("id",R),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=Hw(s),R=t("text"),q=document.getElementById(R)||document.createElement("span"),z=t("learnmore"),F=document.getElementById(z)||document.createElement("a"),ne=t("preprendIcon"),K=document.getElementById(ne)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const W=S.element;d(W),v(F,z);const ie=g();p(K,ne),W.append(K,q,F,ie),document.body.appendChild(W)}l?(q.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function Gw(){var n;const e=(n=Ld())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Jw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Yw(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Kw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $w(){const n=cn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Qw(){return!Gw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xw(){try{return typeof indexedDB=="object"}catch{return!1}}function Ww(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw="FirebaseError";class qi extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=jw,Object.setPrototypeOf(this,qi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pu.prototype.create)}}class pu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],u=l?Zw(l,s):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new qi(o,d,s)}}function Zw(n,e){return n.replace(e1,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const e1=/\{\$([^}]+)}/g;function t1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function vo(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=n[o],u=e[o];if(Ov(l)&&Ov(u)){if(!vo(l,u))return!1}else if(l!==u)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Ov(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Yl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Kl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function n1(n,e){const t=new i1(n,e);return t.subscribe.bind(t)}class i1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");s1(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=dp),o.error===void 0&&(o.error=dp),o.complete===void 0&&(o.complete=dp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function s1(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function dp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(n){return n&&n._delegate?n._delegate:n}class Ir{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new Bw;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(a1(e))try{this.getOrInitializeService({instanceIdentifier:ho})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=ho){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ho){return this.instances.has(e)}getOptions(e=ho){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);s===d&&u.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),l=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(o,l);const u=this.instances.get(o);return u&&e(u,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:o1(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ho){return this.component?this.component.multipleInstances?e:ho:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function o1(n){return n===ho?void 0:n}function a1(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new r1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Fe||(Fe={}));const u1={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},c1=Fe.INFO,d1={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},f1=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=d1[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class fm{constructor(e){this.name=e,this._logLevel=c1,this._logHandler=f1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?u1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const h1=(n,e)=>e.some(t=>n instanceof t);let qv,Bv;function p1(){return qv||(qv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function m1(){return Bv||(Bv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const XE=new WeakMap,Ip=new WeakMap,WE=new WeakMap,fp=new WeakMap,hm=new WeakMap;function g1(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(Tr(n.result)),o()},u=()=>{s(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&XE.set(t,n)}).catch(()=>{}),hm.set(e,n),e}function y1(n){if(Ip.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),o()},u=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});Ip.set(n,e)}let wp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ip.get(n);if(e==="objectStoreNames")return n.objectStoreNames||WE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Tr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function _1(n){wp=n(wp)}function v1(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(hp(this),e,...t);return WE.set(s,e.sort?e.sort():[e]),Tr(s)}:m1().includes(n)?function(...e){return n.apply(hp(this),e),Tr(XE.get(this))}:function(...e){return Tr(n.apply(hp(this),e))}}function T1(n){return typeof n=="function"?v1(n):(n instanceof IDBTransaction&&y1(n),h1(n,p1())?new Proxy(n,wp):n)}function Tr(n){if(n instanceof IDBRequest)return g1(n);if(fp.has(n))return fp.get(n);const e=T1(n);return e!==n&&(fp.set(n,e),hm.set(e,n)),e}const hp=n=>hm.get(n);function E1(n,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const u=indexedDB.open(n,e),d=Tr(u);return s&&u.addEventListener("upgradeneeded",p=>{s(Tr(u.result),p.oldVersion,p.newVersion,Tr(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const S1=["get","getKey","getAll","getAllKeys","count"],A1=["put","add","delete","clear"],pp=new Map;function Fv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(pp.get(e))return pp.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=A1.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||S1.includes(t)))return;const l=async function(u,...d){const p=this.transaction(u,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),o&&p.done]))[0]};return pp.set(e,l),l}_1(n=>({...n,get:(e,t,s)=>Fv(e,t)||n.get(e,t,s),has:(e,t)=>!!Fv(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(I1(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function I1(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Rp="@firebase/app",Hv="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=new fm("@firebase/app"),w1="@firebase/app-compat",R1="@firebase/analytics-compat",b1="@firebase/analytics",x1="@firebase/app-check-compat",N1="@firebase/app-check",M1="@firebase/auth",D1="@firebase/auth-compat",k1="@firebase/database",P1="@firebase/data-connect",L1="@firebase/database-compat",U1="@firebase/functions",V1="@firebase/functions-compat",O1="@firebase/installations",q1="@firebase/installations-compat",B1="@firebase/messaging",F1="@firebase/messaging-compat",H1="@firebase/performance",z1="@firebase/performance-compat",G1="@firebase/remote-config",J1="@firebase/remote-config-compat",Y1="@firebase/storage",K1="@firebase/storage-compat",$1="@firebase/firestore",Q1="@firebase/ai",X1="@firebase/firestore-compat",W1="firebase",j1="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp="[DEFAULT]",Z1={[Rp]:"fire-core",[w1]:"fire-core-compat",[b1]:"fire-analytics",[R1]:"fire-analytics-compat",[N1]:"fire-app-check",[x1]:"fire-app-check-compat",[M1]:"fire-auth",[D1]:"fire-auth-compat",[k1]:"fire-rtdb",[P1]:"fire-data-connect",[L1]:"fire-rtdb-compat",[U1]:"fire-fn",[V1]:"fire-fn-compat",[O1]:"fire-iid",[q1]:"fire-iid-compat",[B1]:"fire-fcm",[F1]:"fire-fcm-compat",[H1]:"fire-perf",[z1]:"fire-perf-compat",[G1]:"fire-rc",[J1]:"fire-rc-compat",[Y1]:"fire-gcs",[K1]:"fire-gcs-compat",[$1]:"fire-fst",[X1]:"fire-fst-compat",[Q1]:"fire-vertex","fire-js":"fire-js",[W1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=new Map,eR=new Map,xp=new Map;function zv(n,e){try{n.container.addComponent(e)}catch(t){gs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function To(n){const e=n.name;if(xp.has(e))return gs.debug(`There were multiple attempts to register component ${e}.`),!1;xp.set(e,n);for(const t of yd.values())zv(t,n);for(const t of eR.values())zv(t,n);return!0}function Ud(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function bn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Er=new pu("app","Firebase",tR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ir("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Er.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io=j1;function jE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s=Object.assign({name:bp,automaticDataCollectionEnabled:!0},e),o=s.name;if(typeof o!="string"||!o)throw Er.create("bad-app-name",{appName:String(o)});if(t||(t=KE()),!t)throw Er.create("no-options");const l=yd.get(o);if(l){if(vo(t,l.options)&&vo(s,l.config))return l;throw Er.create("duplicate-app",{appName:o})}const u=new l1(o);for(const p of xp.values())u.addComponent(p);const d=new nR(t,s,u);return yd.set(o,d),d}function pm(n=bp){const e=yd.get(n);if(!e&&n===bp&&KE())return jE();if(!e)throw Er.create("no-app",{appName:n});return e}function Pi(n,e,t){var s;let o=(s=Z1[n])!==null&&s!==void 0?s:n;t&&(o+=`-${t}`);const l=o.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const d=[`Unable to register library "${o}" with version "${e}":`];l&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gs.warn(d.join(" "));return}To(new Ir(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR="firebase-heartbeat-database",sR=1,au="firebase-heartbeat-store";let mp=null;function ZE(){return mp||(mp=E1(iR,sR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(au)}catch(t){console.warn(t)}}}}).catch(n=>{throw Er.create("idb-open",{originalErrorMessage:n.message})})),mp}async function rR(n){try{const t=(await ZE()).transaction(au),s=await t.objectStore(au).get(eS(n));return await t.done,s}catch(e){if(e instanceof qi)gs.warn(e.message);else{const t=Er.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gs.warn(t.message)}}}async function Gv(n,e){try{const s=(await ZE()).transaction(au,"readwrite");await s.objectStore(au).put(e,eS(n)),await s.done}catch(t){if(t instanceof qi)gs.warn(t.message);else{const s=Er.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});gs.warn(s.message)}}}function eS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=1024,aR=30;class lR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new cR(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Jv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>aR){const u=dR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){gs.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Jv(),{heartbeatsToSend:s,unsentEntries:o}=uR(this._heartbeatsCache.heartbeats),l=gd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return gs.warn(t),""}}}function Jv(){return new Date().toISOString().substring(0,10)}function uR(n,e=oR){const t=[];let s=n.slice();for(const o of n){const l=t.find(u=>u.agent===o.agent);if(l){if(l.dates.push(o.date),Yv(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Yv(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class cR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Xw()?Ww().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await rR(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Gv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Gv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Yv(n){return gd(JSON.stringify({version:2,heartbeats:n})).length}function dR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(n){To(new Ir("platform-logger",e=>new C1(e),"PRIVATE")),To(new Ir("heartbeat",e=>new lR(e),"PRIVATE")),Pi(Rp,Hv,n),Pi(Rp,Hv,"esm2017"),Pi("fire-js","")}fR("");function mm(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(n);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(n,s[o])&&(t[s[o]]=n[s[o]]);return t}function tS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hR=tS,nS=new pu("auth","Firebase",tS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d=new fm("@firebase/auth");function pR(n,...e){_d.logLevel<=Fe.WARN&&_d.warn(`Auth (${Io}): ${n}`,...e)}function rd(n,...e){_d.logLevel<=Fe.ERROR&&_d.error(`Auth (${Io}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(n,...e){throw ym(n,...e)}function mi(n,...e){return ym(n,...e)}function gm(n,e,t){const s=Object.assign(Object.assign({},hR()),{[e]:t});return new pu("auth","Firebase",s).create(e,{appName:n.name})}function ms(n){return gm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mR(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&ii(n,"argument-error"),gm(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ym(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return nS.create(n,...e)}function Ae(n,e,...t){if(!n)throw ym(e,...t)}function hs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw rd(e),new Error(e)}function ys(n,e){n||hs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function gR(){return Kv()==="http:"||Kv()==="https:"}function Kv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(gR()||Yw()||"connection"in navigator)?navigator.onLine:!0}function _R(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,t){this.shortDelay=e,this.longDelay=t,ys(t>e,"Short delay should be less than long delay!"),this.isMobile=zw()||Kw()}get(){return yR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(n,e){ys(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ER=new gu(3e4,6e4);function Pr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Lr(n,e,t,s,o={}){return sS(n,o,async()=>{let l={},u={};s&&(e==="GET"?u=s:l={body:JSON.stringify(s)});const d=mu(Object.assign({key:n.config.apiKey},u)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const g=Object.assign({method:e,headers:p},l);return Jw()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&kr(n.emulatorConfig.host)&&(g.credentials="include"),iS.fetch()(await rS(n,n.config.apiHost,t,d),g)})}async function sS(n,e,t){n._canInitEmulator=!1;const s=Object.assign(Object.assign({},vR),e);try{const o=new AR(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw Xc(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const d=l.ok?u.errorMessage:u.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xc(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw Xc(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw Xc(n,"user-disabled",u);const v=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw gm(n,v,g);ii(n,v)}}catch(o){if(o instanceof qi)throw o;ii(n,"network-request-failed",{message:String(o)})}}async function yu(n,e,t,s,o={}){const l=await Lr(n,e,t,s,o);return"mfaPendingCredential"in l&&ii(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function rS(n,e,t,s){const o=`${e}${t}?${s}`,l=n,u=l.config.emulator?_m(n.config,o):`${n.config.apiScheme}://${o}`;return TR.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function SR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class AR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(mi(this.auth,"network-request-failed")),ER.get())})}}function Xc(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=mi(n,e,s);return o.customData._tokenResponse=t,o}function $v(n){return n!==void 0&&n.enterprise!==void 0}class CR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return SR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function IR(n,e){return Lr(n,"GET","/v2/recaptchaConfig",Pr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wR(n,e){return Lr(n,"POST","/v1/accounts:delete",e)}async function vd(n,e){return Lr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function RR(n,e=!1){const t=xn(n),s=await t.getIdToken(e),o=vm(s);Ae(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:eu(gp(o.auth_time)),issuedAtTime:eu(gp(o.iat)),expirationTime:eu(gp(o.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function gp(n){return Number(n)*1e3}function vm(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return rd("JWT malformed, contained fewer than 3 sections"),null;try{const o=GE(t);return o?JSON.parse(o):(rd("Failed to decode base64 JWT payload"),null)}catch(o){return rd("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Qv(n){const e=vm(n);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lu(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof qi&&bR(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function bR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=eu(this.lastLoginAt),this.creationTime=eu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Td(n){var e;const t=n.auth,s=await n.getIdToken(),o=await lu(n,vd(t,{idToken:s}));Ae(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];n._notifyReloadListener(l);const u=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?oS(l.providerUserInfo):[],d=MR(n.providerData,u),p=n.isAnonymous,g=!(n.email&&l.passwordHash)&&!(d!=null&&d.length),v=p?g:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Mp(l.createdAt,l.lastLoginAt),isAnonymous:v};Object.assign(n,T)}async function NR(n){const e=xn(n);await Td(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function MR(n,e){return[...n.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function oS(n){return n.map(e=>{var{providerId:t}=e,s=mm(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DR(n,e){const t=await sS(n,{},async()=>{const s=mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,u=await rS(n,o,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:s};return n.emulatorConfig&&kr(n.emulatorConfig.host)&&(p.credentials="include"),iS.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function kR(n,e){return Lr(n,"POST","/v2/accounts:revokeToken",Pr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Qv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const t=Qv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await DR(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,u=new va;return s&&(Ae(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),o&&(Ae(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),l&&(Ae(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new va,this.toJSON())}_performRefresh(){return hs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(n,e){Ae(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class hi{constructor(e){var{uid:t,auth:s,stsTokenManager:o}=e,l=mm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Mp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await lu(this,this.stsTokenManager.getToken(this.auth,e));return Ae(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return RR(this,e)}reload(){return NR(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new hi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Td(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bn(this.auth.app))return Promise.reject(ms(this.auth));const e=await this.getIdToken();return await lu(this,wR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,o,l,u,d,p,g,v;const T=(s=t.displayName)!==null&&s!==void 0?s:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,R=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,q=(u=t.photoURL)!==null&&u!==void 0?u:void 0,z=(d=t.tenantId)!==null&&d!==void 0?d:void 0,F=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,ne=(g=t.createdAt)!==null&&g!==void 0?g:void 0,K=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:W,emailVerified:ie,isAnonymous:de,providerData:le,stsTokenManager:D}=t;Ae(W&&D,e,"internal-error");const N=va.fromJSON(this.name,D);Ae(typeof W=="string",e,"internal-error"),hr(T,e.name),hr(S,e.name),Ae(typeof ie=="boolean",e,"internal-error"),Ae(typeof de=="boolean",e,"internal-error"),hr(R,e.name),hr(q,e.name),hr(z,e.name),hr(F,e.name),hr(ne,e.name),hr(K,e.name);const x=new hi({uid:W,auth:e,email:S,emailVerified:ie,displayName:T,isAnonymous:de,photoURL:q,phoneNumber:R,tenantId:z,stsTokenManager:N,createdAt:ne,lastLoginAt:K});return le&&Array.isArray(le)&&(x.providerData=le.map(L=>Object.assign({},L))),F&&(x._redirectEventId=F),x}static async _fromIdTokenResponse(e,t,s=!1){const o=new va;o.updateFromServerResponse(t);const l=new hi({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Td(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Ae(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?oS(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),d=new va;d.updateFromIdToken(s);const p=new hi({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Mp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv=new Map;function ps(n){ys(n instanceof Function,"Expected a class definition");let e=Xv.get(n);return e?(ys(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Xv.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}aS.type="NONE";const Wv=aS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(n,e,t){return`firebase:${n}:${e}:${t}`}class Ta{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=od(this.userKey,o.apiKey,l),this.fullPersistenceKey=od("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await vd(this.auth,{idToken:e}).catch(()=>{});return t?hi._fromGetAccountInfoResponse(this.auth,t,e):null}return hi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Ta(ps(Wv),e,s);const o=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=o[0]||ps(Wv);const u=od(s,e.config.apiKey,e.name);let d=null;for(const g of t)try{const v=await g._get(u);if(v){let T;if(typeof v=="string"){const S=await vd(e,{idToken:v}).catch(()=>{});if(!S)break;T=await hi._fromGetAccountInfoResponse(e,S,v)}else T=hi._fromJSON(e,v);g!==l&&(d=T),l=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Ta(l,e,s):(l=p[0],d&&await l._set(u,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(u)}catch{}})),new Ta(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hS(e))return"Blackberry";if(pS(e))return"Webos";if(uS(e))return"Safari";if((e.includes("chrome/")||cS(e))&&!e.includes("edge/"))return"Chrome";if(fS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function lS(n=cn()){return/firefox\//i.test(n)}function uS(n=cn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cS(n=cn()){return/crios\//i.test(n)}function dS(n=cn()){return/iemobile/i.test(n)}function fS(n=cn()){return/android/i.test(n)}function hS(n=cn()){return/blackberry/i.test(n)}function pS(n=cn()){return/webos/i.test(n)}function Tm(n=cn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function PR(n=cn()){var e;return Tm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function LR(){return $w()&&document.documentMode===10}function mS(n=cn()){return Tm(n)||fS(n)||pS(n)||hS(n)||/windows phone/i.test(n)||dS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(n,e=[]){let t;switch(n){case"Browser":t=jv(cn());break;case"Worker":t=`${jv(cn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Io}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((u,d)=>{try{const p=e(l);u(p)}catch(p){d(p)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(n,e={}){return Lr(n,"GET","/v2/passwordPolicy",Pr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR=6;class qR{constructor(e){var t,s,o,l;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:OR,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,o,l,u,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(u=p.containsNumericCharacter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zv(this),this.idTokenSubscription=new Zv(this),this.beforeStateQueue=new UR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ps(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await Ta.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await vd(this,{idToken:e}),s=await hi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(bn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&(p!=null&&p.user)&&(o=p.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(u){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Td(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_R()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bn(this.app))return Promise.reject(ms(this));const t=e?xn(e):null;return t&&Ae(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bn(this.app)?Promise.reject(ms(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bn(this.app)?Promise.reject(ms(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ps(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await VR(this),t=new qR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new pu("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await kR(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ps(e)||this._popupRedirectResolver;Ae(t,this,"argument-error"),this.redirectPersistenceManager=await Ta.create(this,[ps(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(d,this,"internal-error"),d.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,o);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&pR(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ur(n){return xn(n)}class Zv{constructor(e){this.auth=e,this.observer=null,this.addObserver=n1(t=>this.observer=t)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FR(n){Vd=n}function yS(n){return Vd.loadJS(n)}function HR(){return Vd.recaptchaEnterpriseScript}function zR(){return Vd.gapiScript}function GR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class JR{constructor(){this.enterprise=new YR}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class YR{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const KR="recaptcha-enterprise",_S="NO_RECAPTCHA";class $R{constructor(e){this.type=KR,this.auth=Ur(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,d)=>{IR(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new CR(p);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,u(g.siteKey)}}).catch(p=>{d(p)})})}function o(l,u,d){const p=window.grecaptcha;$v(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(g=>{u(g)}).catch(()=>{u(_S)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new JR().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{s(this.auth).then(d=>{if(!t&&$v(window.grecaptcha))o(d,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=HR();p.length!==0&&(p+=d),yS(p).then(()=>{o(d,l,u)}).catch(g=>{u(g)})}}).catch(d=>{u(d)})})}}async function e0(n,e,t,s=!1,o=!1){const l=new $R(n);let u;if(o)u=_S;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,g=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return s?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Dp(n,e,t,s,o){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await e0(n,e,t,t==="getOobCode");return s(n,u)}else return s(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await e0(n,e,t,t==="getOobCode");return s(n,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(n,e){const t=Ud(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(vo(l,e??{}))return o;ii(o,"already-initialized")}return t.initialize({options:e})}function XR(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(ps);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function WR(n,e,t){const s=Ur(n);Ae(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=vS(e),{host:u,port:d}=jR(e),p=d===null?"":`:${d}`,g={url:`${l}//${u}${p}/`},v=Object.freeze({host:u,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ae(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ae(vo(g,s.config.emulator)&&vo(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,kr(u)?(cm(`${l}//${u}${p}`),dm("Auth",!0)):ZR()}function vS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function jR(n){const e=vS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:t0(s.substr(l.length+1))}}else{const[l,u]=s.split(":");return{host:l,port:t0(u)}}}function t0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function ZR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return hs("not implemented")}_getIdTokenResponse(e){return hs("not implemented")}_linkToIdToken(e,t){return hs("not implemented")}_getReauthenticationResolver(e){return hs("not implemented")}}async function eb(n,e){return Lr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tb(n,e){return yu(n,"POST","/v1/accounts:signInWithPassword",Pr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nb(n,e){return yu(n,"POST","/v1/accounts:signInWithEmailLink",Pr(n,e))}async function ib(n,e){return yu(n,"POST","/v1/accounts:signInWithEmailLink",Pr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu extends Em{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new uu(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new uu(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Dp(e,t,"signInWithPassword",tb);case"emailLink":return nb(e,{email:this._email,oobCode:this._password});default:ii(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Dp(e,s,"signUpPassword",eb);case"emailLink":return ib(e,{idToken:t,email:this._email,oobCode:this._password});default:ii(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ea(n,e){return yu(n,"POST","/v1/accounts:signInWithIdp",Pr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="http://localhost";class Eo extends Em{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Eo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ii("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=t,l=mm(t,["providerId","signInMethod"]);if(!s||!o)return null;const u=new Eo(s,o);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Ea(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Ea(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ea(e,t)}buildRequest(){const e={requestUri:sb,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=mu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ob(n){const e=Yl(Kl(n)).link,t=e?Yl(Kl(e)).deep_link_id:null,s=Yl(Kl(n)).deep_link_id;return(s?Yl(Kl(s)).link:null)||s||t||e||n}class Sm{constructor(e){var t,s,o,l,u,d;const p=Yl(Kl(e)),g=(t=p.apiKey)!==null&&t!==void 0?t:null,v=(s=p.oobCode)!==null&&s!==void 0?s:null,T=rb((o=p.mode)!==null&&o!==void 0?o:null);Ae(g&&v&&T,"argument-error"),this.apiKey=g,this.operation=T,this.code=v,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(u=p.lang)!==null&&u!==void 0?u:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=ob(e);try{return new Sm(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(){this.providerId=Ua.PROVIDER_ID}static credential(e,t){return uu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Sm.parseLink(t);return Ae(s,"argument-error"),uu._fromEmailAndCode(e,s.code,s.tenantId)}}Ua.PROVIDER_ID="password";Ua.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ua.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u extends Am{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends _u{constructor(){super("facebook.com")}static credential(e){return Eo._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pr.credential(e.oauthAccessToken)}catch{return null}}}pr.FACEBOOK_SIGN_IN_METHOD="facebook.com";pr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends _u{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Eo._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return fs.credential(t,s)}catch{return null}}}fs.GOOGLE_SIGN_IN_METHOD="google.com";fs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends _u{constructor(){super("github.com")}static credential(e){return Eo._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mr.credential(e.oauthAccessToken)}catch{return null}}}mr.GITHUB_SIGN_IN_METHOD="github.com";mr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends _u{constructor(){super("twitter.com")}static credential(e,t){return Eo._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return gr.credential(t,s)}catch{return null}}}gr.TWITTER_SIGN_IN_METHOD="twitter.com";gr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ab(n,e){return yu(n,"POST","/v1/accounts:signUp",Pr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await hi._fromIdTokenResponse(e,s,o),u=n0(s);return new So({user:l,providerId:u,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=n0(s);return new So({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function n0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed extends qi{constructor(e,t,s,o){var l;super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Ed.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Ed(e,t,s,o)}}function TS(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Ed._fromErrorAndOperation(n,l,e,s):l})}async function lb(n,e,t=!1){const s=await lu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return So._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ub(n,e,t=!1){const{auth:s}=n;if(bn(s.app))return Promise.reject(ms(s));const o="reauthenticate";try{const l=await lu(n,TS(s,o,e,n),t);Ae(l.idToken,s,"internal-error");const u=vm(l.idToken);Ae(u,s,"internal-error");const{sub:d}=u;return Ae(n.uid===d,s,"user-mismatch"),So._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&ii(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ES(n,e,t=!1){if(bn(n.app))return Promise.reject(ms(n));const s="signIn",o=await TS(n,s,e),l=await So._fromIdTokenResponse(n,s,o);return t||await n._updateCurrentUser(l.user),l}async function cb(n,e){return ES(Ur(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SS(n){const e=Ur(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function db(n,e,t){if(bn(n.app))return Promise.reject(ms(n));const s=Ur(n),u=await Dp(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ab).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&SS(n),p}),d=await So._fromIdTokenResponse(s,"signIn",u);return await s._updateCurrentUser(d.user),d}function fb(n,e,t){return bn(n.app)?Promise.reject(ms(n)):cb(xn(n),Ua.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&SS(n),s})}function hb(n,e,t,s){return xn(n).onIdTokenChanged(e,t,s)}function pb(n,e,t){return xn(n).beforeAuthStateChanged(e,t)}function mb(n,e,t,s){return xn(n).onAuthStateChanged(e,t,s)}function gb(n){return xn(n).signOut()}const Sd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Sd,"1"),this.storage.removeItem(Sd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb=1e3,_b=10;class CS extends AS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,p)=>{this.notifyListeners(u,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(s);!t&&this.localCache[s]===u||this.notifyListeners(s,u)},l=this.storage.getItem(s);LR()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,_b):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},yb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}CS.type="LOCAL";const vb=CS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS extends AS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}IS.type="SESSION";const wS=IS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Od(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const d=Array.from(u).map(async g=>g(t.origin,l)),p=await Tb(d);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Od.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,u;return new Promise((d,p)=>{const g=Cm("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},s);u={messageChannel:o,onMessage(T){const S=T;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(S.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(){return window}function Sb(n){Li().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(){return typeof Li().WorkerGlobalScope<"u"&&typeof Li().importScripts=="function"}async function Ab(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Cb(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Ib(){return RS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS="firebaseLocalStorageDb",wb=1,Ad="firebaseLocalStorage",xS="fbase_key";class vu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function qd(n,e){return n.transaction([Ad],e?"readwrite":"readonly").objectStore(Ad)}function Rb(){const n=indexedDB.deleteDatabase(bS);return new vu(n).toPromise()}function kp(){const n=indexedDB.open(bS,wb);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Ad,{keyPath:xS})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Ad)?e(s):(s.close(),await Rb(),e(await kp()))})})}async function i0(n,e,t){const s=qd(n,!0).put({[xS]:e,value:t});return new vu(s).toPromise()}async function bb(n,e){const t=qd(n,!1).get(e),s=await new vu(t).toPromise();return s===void 0?null:s.value}function s0(n,e){const t=qd(n,!0).delete(e);return new vu(t).toPromise()}const xb=800,Nb=3;class NS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>Nb)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return RS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Od._getInstance(Ib()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Ab(),!this.activeServiceWorker)return;this.sender=new Eb(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Cb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kp();return await i0(e,Sd,"1"),await s0(e,Sd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>i0(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>bb(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>s0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=qd(o,!1).getAll();return new vu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}NS.type="LOCAL";const Mb=NS;new gu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(n,e){return e?ps(e):(Ae(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im extends Em{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ea(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ea(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ea(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Db(n){return ES(n.auth,new Im(n),n.bypassAuthState)}function kb(n){const{auth:e,user:t}=n;return Ae(t,e,"internal-error"),ub(t,new Im(n),n.bypassAuthState)}async function Pb(n){const{auth:e,user:t}=n;return Ae(t,e,"internal-error"),lb(t,new Im(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:u,type:d}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Db;case"linkViaPopup":case"linkViaRedirect":return Pb;case"reauthViaPopup":case"reauthViaRedirect":return kb;default:ii(this.auth,"internal-error")}}resolve(e){ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb=new gu(2e3,1e4);async function Ub(n,e,t){if(bn(n.app))return Promise.reject(mi(n,"operation-not-supported-in-this-environment"));const s=Ur(n);mR(n,e,Am);const o=MS(s,t);return new po(s,"signInViaPopup",e,o).executeNotNull()}class po extends DS{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,po.currentPopupAction&&po.currentPopupAction.cancel(),po.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){ys(this.filter.length===1,"Popup operations only handle one event");const e=Cm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(mi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(mi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,po.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Lb.get())};e()}}po.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb="pendingRedirect",ad=new Map;class Ob extends DS{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=ad.get(this.auth._key());if(!e){try{const s=await qb(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}ad.set(this.auth._key(),e)}return this.bypassAuthState||ad.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function qb(n,e){const t=Hb(e),s=Fb(n);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function Bb(n,e){ad.set(n._key(),e)}function Fb(n){return ps(n._redirectPersistence)}function Hb(n){return od(Vb,n.config.apiKey,n.name)}async function zb(n,e,t=!1){if(bn(n.app))return Promise.reject(ms(n));const s=Ur(n),o=MS(s,e),u=await new Ob(s,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb=600*1e3;class Jb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Yb(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!kS(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(mi(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Gb&&this.cachedEventUids.clear(),this.cachedEventUids.has(r0(e))}saveEventToCache(e){this.cachedEventUids.add(r0(e)),this.lastProcessedEventTime=Date.now()}}function r0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function kS({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Yb(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kb(n,e={}){return Lr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Qb=/^https?/;async function Xb(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Kb(n);for(const t of e)try{if(Wb(t))return}catch{}ii(n,"unauthorized-domain")}function Wb(n){const e=Np(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===s}if(!Qb.test(t))return!1;if($b.test(n))return s===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb=new gu(3e4,6e4);function o0(){const n=Li().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Zb(n){return new Promise((e,t)=>{var s,o,l;function u(){o0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{o0(),t(mi(n,"network-request-failed"))},timeout:jb.get()})}if(!((o=(s=Li().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=Li().gapi)===null||l===void 0)&&l.load)u();else{const d=GR("iframefcb");return Li()[d]=()=>{gapi.load?u():t(mi(n,"network-request-failed"))},yS(`${zR()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw ld=null,e})}let ld=null;function ex(n){return ld=ld||Zb(n),ld}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=new gu(5e3,15e3),nx="__/auth/iframe",ix="emulator/auth/iframe",sx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ox(n){const e=n.config;Ae(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?_m(e,ix):`https://${n.config.authDomain}/${nx}`,s={apiKey:e.apiKey,appName:n.name,v:Io},o=rx.get(n.config.apiHost);o&&(s.eid=o);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${mu(s).slice(1)}`}async function ax(n){const e=await ex(n),t=Li().gapi;return Ae(t,n,"internal-error"),e.open({where:document.body,url:ox(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sx,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const u=mi(n,"network-request-failed"),d=Li().setTimeout(()=>{l(u)},tx.get());function p(){Li().clearTimeout(d),o(s)}s.ping(p).then(p,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ux=500,cx=600,dx="_blank",fx="http://localhost";class a0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hx(n,e,t,s=ux,o=cx){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let d="";const p=Object.assign(Object.assign({},lx),{width:s.toString(),height:o.toString(),top:l,left:u}),g=cn().toLowerCase();t&&(d=cS(g)?dx:t),lS(g)&&(e=e||fx,p.scrollbars="yes");const v=Object.entries(p).reduce((S,[R,q])=>`${S}${R}=${q},`,"");if(PR(g)&&d!=="_self")return px(e||"",d),new a0(null);const T=window.open(e||"",d,v);Ae(T,n,"popup-blocked");try{T.focus()}catch{}return new a0(T)}function px(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="__/auth/handler",gx="emulator/auth/handler",yx=encodeURIComponent("fac");async function l0(n,e,t,s,o,l){Ae(n.config.authDomain,n,"auth-domain-config-required"),Ae(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Io,eventId:o};if(e instanceof Am){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",t1(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,T]of Object.entries({}))u[v]=T}if(e instanceof _u){const v=e.getScopes().filter(T=>T!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const p=await n._getAppCheckToken(),g=p?`#${yx}=${encodeURIComponent(p)}`:"";return`${_x(n)}?${mu(d).slice(1)}${g}`}function _x({config:n}){return n.emulator?_m(n,gx):`https://${n.authDomain}/${mx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp="webStorageSupport";class vx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wS,this._completeRedirectFn=zb,this._overrideRedirectResult=Bb}async _openPopup(e,t,s,o){var l;ys((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const u=await l0(e,t,s,Np(),o);return hx(e,u,Cm())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await l0(e,t,s,Np(),o);return Sb(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(ys(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await ax(e),s=new Jb(e);return t.register("authEvent",o=>(Ae(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(yp,{type:yp},o=>{var l;const u=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[yp];u!==void 0&&t(!!u),ii(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Xb(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return mS()||uS()||Tm()}}const Tx=vx;var u0="@firebase/auth",c0="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ax(n){To(new Ir("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=s.options;Ae(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gS(n)},g=new BR(s,o,l,p);return XR(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),To(new Ir("auth-internal",e=>{const t=Ur(e.getProvider("auth").getImmediate());return(s=>new Ex(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pi(u0,c0,Sx(n)),Pi(u0,c0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx=300,Ix=$E("authIdTokenMaxAge")||Cx;let d0=null;const wx=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>Ix)return;const o=t==null?void 0:t.token;d0!==o&&(d0=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Rx(n=pm()){const e=Ud(n,"auth");if(e.isInitialized())return e.getImmediate();const t=QR(n,{popupRedirectResolver:Tx,persistence:[Mb,vb,wS]}),s=$E("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const u=wx(l.toString());pb(t,u,()=>u(t.currentUser)),hb(t,d=>u(d))}}const o=JE("auth");return o&&WR(t,`http://${o}`),t}function bx(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}FR({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=o=>{const l=mi("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",bx().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ax("Browser");var xx="firebase",Nx="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pi(xx,Nx,"app");var f0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Sr,PS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,N){function x(){}x.prototype=N.prototype,D.D=N.prototype,D.prototype=new x,D.prototype.constructor=D,D.C=function(L,P,k){for(var M=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)M[Qe-2]=arguments[Qe];return N.prototype[P].apply(L,M)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,N,x){x||(x=0);var L=Array(16);if(typeof N=="string")for(var P=0;16>P;++P)L[P]=N.charCodeAt(x++)|N.charCodeAt(x++)<<8|N.charCodeAt(x++)<<16|N.charCodeAt(x++)<<24;else for(P=0;16>P;++P)L[P]=N[x++]|N[x++]<<8|N[x++]<<16|N[x++]<<24;N=D.g[0],x=D.g[1],P=D.g[2];var k=D.g[3],M=N+(k^x&(P^k))+L[0]+3614090360&4294967295;N=x+(M<<7&4294967295|M>>>25),M=k+(P^N&(x^P))+L[1]+3905402710&4294967295,k=N+(M<<12&4294967295|M>>>20),M=P+(x^k&(N^x))+L[2]+606105819&4294967295,P=k+(M<<17&4294967295|M>>>15),M=x+(N^P&(k^N))+L[3]+3250441966&4294967295,x=P+(M<<22&4294967295|M>>>10),M=N+(k^x&(P^k))+L[4]+4118548399&4294967295,N=x+(M<<7&4294967295|M>>>25),M=k+(P^N&(x^P))+L[5]+1200080426&4294967295,k=N+(M<<12&4294967295|M>>>20),M=P+(x^k&(N^x))+L[6]+2821735955&4294967295,P=k+(M<<17&4294967295|M>>>15),M=x+(N^P&(k^N))+L[7]+4249261313&4294967295,x=P+(M<<22&4294967295|M>>>10),M=N+(k^x&(P^k))+L[8]+1770035416&4294967295,N=x+(M<<7&4294967295|M>>>25),M=k+(P^N&(x^P))+L[9]+2336552879&4294967295,k=N+(M<<12&4294967295|M>>>20),M=P+(x^k&(N^x))+L[10]+4294925233&4294967295,P=k+(M<<17&4294967295|M>>>15),M=x+(N^P&(k^N))+L[11]+2304563134&4294967295,x=P+(M<<22&4294967295|M>>>10),M=N+(k^x&(P^k))+L[12]+1804603682&4294967295,N=x+(M<<7&4294967295|M>>>25),M=k+(P^N&(x^P))+L[13]+4254626195&4294967295,k=N+(M<<12&4294967295|M>>>20),M=P+(x^k&(N^x))+L[14]+2792965006&4294967295,P=k+(M<<17&4294967295|M>>>15),M=x+(N^P&(k^N))+L[15]+1236535329&4294967295,x=P+(M<<22&4294967295|M>>>10),M=N+(P^k&(x^P))+L[1]+4129170786&4294967295,N=x+(M<<5&4294967295|M>>>27),M=k+(x^P&(N^x))+L[6]+3225465664&4294967295,k=N+(M<<9&4294967295|M>>>23),M=P+(N^x&(k^N))+L[11]+643717713&4294967295,P=k+(M<<14&4294967295|M>>>18),M=x+(k^N&(P^k))+L[0]+3921069994&4294967295,x=P+(M<<20&4294967295|M>>>12),M=N+(P^k&(x^P))+L[5]+3593408605&4294967295,N=x+(M<<5&4294967295|M>>>27),M=k+(x^P&(N^x))+L[10]+38016083&4294967295,k=N+(M<<9&4294967295|M>>>23),M=P+(N^x&(k^N))+L[15]+3634488961&4294967295,P=k+(M<<14&4294967295|M>>>18),M=x+(k^N&(P^k))+L[4]+3889429448&4294967295,x=P+(M<<20&4294967295|M>>>12),M=N+(P^k&(x^P))+L[9]+568446438&4294967295,N=x+(M<<5&4294967295|M>>>27),M=k+(x^P&(N^x))+L[14]+3275163606&4294967295,k=N+(M<<9&4294967295|M>>>23),M=P+(N^x&(k^N))+L[3]+4107603335&4294967295,P=k+(M<<14&4294967295|M>>>18),M=x+(k^N&(P^k))+L[8]+1163531501&4294967295,x=P+(M<<20&4294967295|M>>>12),M=N+(P^k&(x^P))+L[13]+2850285829&4294967295,N=x+(M<<5&4294967295|M>>>27),M=k+(x^P&(N^x))+L[2]+4243563512&4294967295,k=N+(M<<9&4294967295|M>>>23),M=P+(N^x&(k^N))+L[7]+1735328473&4294967295,P=k+(M<<14&4294967295|M>>>18),M=x+(k^N&(P^k))+L[12]+2368359562&4294967295,x=P+(M<<20&4294967295|M>>>12),M=N+(x^P^k)+L[5]+4294588738&4294967295,N=x+(M<<4&4294967295|M>>>28),M=k+(N^x^P)+L[8]+2272392833&4294967295,k=N+(M<<11&4294967295|M>>>21),M=P+(k^N^x)+L[11]+1839030562&4294967295,P=k+(M<<16&4294967295|M>>>16),M=x+(P^k^N)+L[14]+4259657740&4294967295,x=P+(M<<23&4294967295|M>>>9),M=N+(x^P^k)+L[1]+2763975236&4294967295,N=x+(M<<4&4294967295|M>>>28),M=k+(N^x^P)+L[4]+1272893353&4294967295,k=N+(M<<11&4294967295|M>>>21),M=P+(k^N^x)+L[7]+4139469664&4294967295,P=k+(M<<16&4294967295|M>>>16),M=x+(P^k^N)+L[10]+3200236656&4294967295,x=P+(M<<23&4294967295|M>>>9),M=N+(x^P^k)+L[13]+681279174&4294967295,N=x+(M<<4&4294967295|M>>>28),M=k+(N^x^P)+L[0]+3936430074&4294967295,k=N+(M<<11&4294967295|M>>>21),M=P+(k^N^x)+L[3]+3572445317&4294967295,P=k+(M<<16&4294967295|M>>>16),M=x+(P^k^N)+L[6]+76029189&4294967295,x=P+(M<<23&4294967295|M>>>9),M=N+(x^P^k)+L[9]+3654602809&4294967295,N=x+(M<<4&4294967295|M>>>28),M=k+(N^x^P)+L[12]+3873151461&4294967295,k=N+(M<<11&4294967295|M>>>21),M=P+(k^N^x)+L[15]+530742520&4294967295,P=k+(M<<16&4294967295|M>>>16),M=x+(P^k^N)+L[2]+3299628645&4294967295,x=P+(M<<23&4294967295|M>>>9),M=N+(P^(x|~k))+L[0]+4096336452&4294967295,N=x+(M<<6&4294967295|M>>>26),M=k+(x^(N|~P))+L[7]+1126891415&4294967295,k=N+(M<<10&4294967295|M>>>22),M=P+(N^(k|~x))+L[14]+2878612391&4294967295,P=k+(M<<15&4294967295|M>>>17),M=x+(k^(P|~N))+L[5]+4237533241&4294967295,x=P+(M<<21&4294967295|M>>>11),M=N+(P^(x|~k))+L[12]+1700485571&4294967295,N=x+(M<<6&4294967295|M>>>26),M=k+(x^(N|~P))+L[3]+2399980690&4294967295,k=N+(M<<10&4294967295|M>>>22),M=P+(N^(k|~x))+L[10]+4293915773&4294967295,P=k+(M<<15&4294967295|M>>>17),M=x+(k^(P|~N))+L[1]+2240044497&4294967295,x=P+(M<<21&4294967295|M>>>11),M=N+(P^(x|~k))+L[8]+1873313359&4294967295,N=x+(M<<6&4294967295|M>>>26),M=k+(x^(N|~P))+L[15]+4264355552&4294967295,k=N+(M<<10&4294967295|M>>>22),M=P+(N^(k|~x))+L[6]+2734768916&4294967295,P=k+(M<<15&4294967295|M>>>17),M=x+(k^(P|~N))+L[13]+1309151649&4294967295,x=P+(M<<21&4294967295|M>>>11),M=N+(P^(x|~k))+L[4]+4149444226&4294967295,N=x+(M<<6&4294967295|M>>>26),M=k+(x^(N|~P))+L[11]+3174756917&4294967295,k=N+(M<<10&4294967295|M>>>22),M=P+(N^(k|~x))+L[2]+718787259&4294967295,P=k+(M<<15&4294967295|M>>>17),M=x+(k^(P|~N))+L[9]+3951481745&4294967295,D.g[0]=D.g[0]+N&4294967295,D.g[1]=D.g[1]+(P+(M<<21&4294967295|M>>>11))&4294967295,D.g[2]=D.g[2]+P&4294967295,D.g[3]=D.g[3]+k&4294967295}s.prototype.u=function(D,N){N===void 0&&(N=D.length);for(var x=N-this.blockSize,L=this.B,P=this.h,k=0;k<N;){if(P==0)for(;k<=x;)o(this,D,k),k+=this.blockSize;if(typeof D=="string"){for(;k<N;)if(L[P++]=D.charCodeAt(k++),P==this.blockSize){o(this,L),P=0;break}}else for(;k<N;)if(L[P++]=D[k++],P==this.blockSize){o(this,L),P=0;break}}this.h=P,this.o+=N},s.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var N=1;N<D.length-8;++N)D[N]=0;var x=8*this.o;for(N=D.length-8;N<D.length;++N)D[N]=x&255,x/=256;for(this.u(D),D=Array(16),N=x=0;4>N;++N)for(var L=0;32>L;L+=8)D[x++]=this.g[N]>>>L&255;return D};function l(D,N){var x=d;return Object.prototype.hasOwnProperty.call(x,D)?x[D]:x[D]=N(D)}function u(D,N){this.h=N;for(var x=[],L=!0,P=D.length-1;0<=P;P--){var k=D[P]|0;L&&k==N||(x[P]=k,L=!1)}this.g=x}var d={};function p(D){return-128<=D&&128>D?l(D,function(N){return new u([N|0],0>N?-1:0)}):new u([D|0],0>D?-1:0)}function g(D){if(isNaN(D)||!isFinite(D))return T;if(0>D)return F(g(-D));for(var N=[],x=1,L=0;D>=x;L++)N[L]=D/x|0,x*=4294967296;return new u(N,0)}function v(D,N){if(D.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(D.charAt(0)=="-")return F(v(D.substring(1),N));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=g(Math.pow(N,8)),L=T,P=0;P<D.length;P+=8){var k=Math.min(8,D.length-P),M=parseInt(D.substring(P,P+k),N);8>k?(k=g(Math.pow(N,k)),L=L.j(k).add(g(M))):(L=L.j(x),L=L.add(g(M)))}return L}var T=p(0),S=p(1),R=p(16777216);n=u.prototype,n.m=function(){if(z(this))return-F(this).m();for(var D=0,N=1,x=0;x<this.g.length;x++){var L=this.i(x);D+=(0<=L?L:4294967296+L)*N,N*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(q(this))return"0";if(z(this))return"-"+F(this).toString(D);for(var N=g(Math.pow(D,6)),x=this,L="";;){var P=ie(x,N).g;x=ne(x,P.j(N));var k=((0<x.g.length?x.g[0]:x.h)>>>0).toString(D);if(x=P,q(x))return k+L;for(;6>k.length;)k="0"+k;L=k+L}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function q(D){if(D.h!=0)return!1;for(var N=0;N<D.g.length;N++)if(D.g[N]!=0)return!1;return!0}function z(D){return D.h==-1}n.l=function(D){return D=ne(this,D),z(D)?-1:q(D)?0:1};function F(D){for(var N=D.g.length,x=[],L=0;L<N;L++)x[L]=~D.g[L];return new u(x,~D.h).add(S)}n.abs=function(){return z(this)?F(this):this},n.add=function(D){for(var N=Math.max(this.g.length,D.g.length),x=[],L=0,P=0;P<=N;P++){var k=L+(this.i(P)&65535)+(D.i(P)&65535),M=(k>>>16)+(this.i(P)>>>16)+(D.i(P)>>>16);L=M>>>16,k&=65535,M&=65535,x[P]=M<<16|k}return new u(x,x[x.length-1]&-2147483648?-1:0)};function ne(D,N){return D.add(F(N))}n.j=function(D){if(q(this)||q(D))return T;if(z(this))return z(D)?F(this).j(F(D)):F(F(this).j(D));if(z(D))return F(this.j(F(D)));if(0>this.l(R)&&0>D.l(R))return g(this.m()*D.m());for(var N=this.g.length+D.g.length,x=[],L=0;L<2*N;L++)x[L]=0;for(L=0;L<this.g.length;L++)for(var P=0;P<D.g.length;P++){var k=this.i(L)>>>16,M=this.i(L)&65535,Qe=D.i(P)>>>16,Ie=D.i(P)&65535;x[2*L+2*P]+=M*Ie,K(x,2*L+2*P),x[2*L+2*P+1]+=k*Ie,K(x,2*L+2*P+1),x[2*L+2*P+1]+=M*Qe,K(x,2*L+2*P+1),x[2*L+2*P+2]+=k*Qe,K(x,2*L+2*P+2)}for(L=0;L<N;L++)x[L]=x[2*L+1]<<16|x[2*L];for(L=N;L<2*N;L++)x[L]=0;return new u(x,0)};function K(D,N){for(;(D[N]&65535)!=D[N];)D[N+1]+=D[N]>>>16,D[N]&=65535,N++}function W(D,N){this.g=D,this.h=N}function ie(D,N){if(q(N))throw Error("division by zero");if(q(D))return new W(T,T);if(z(D))return N=ie(F(D),N),new W(F(N.g),F(N.h));if(z(N))return N=ie(D,F(N)),new W(F(N.g),N.h);if(30<D.g.length){if(z(D)||z(N))throw Error("slowDivide_ only works with positive integers.");for(var x=S,L=N;0>=L.l(D);)x=de(x),L=de(L);var P=le(x,1),k=le(L,1);for(L=le(L,2),x=le(x,2);!q(L);){var M=k.add(L);0>=M.l(D)&&(P=P.add(x),k=M),L=le(L,1),x=le(x,1)}return N=ne(D,P.j(N)),new W(P,N)}for(P=T;0<=D.l(N);){for(x=Math.max(1,Math.floor(D.m()/N.m())),L=Math.ceil(Math.log(x)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),k=g(x),M=k.j(N);z(M)||0<M.l(D);)x-=L,k=g(x),M=k.j(N);q(k)&&(k=S),P=P.add(k),D=ne(D,M)}return new W(P,D)}n.A=function(D){return ie(this,D).h},n.and=function(D){for(var N=Math.max(this.g.length,D.g.length),x=[],L=0;L<N;L++)x[L]=this.i(L)&D.i(L);return new u(x,this.h&D.h)},n.or=function(D){for(var N=Math.max(this.g.length,D.g.length),x=[],L=0;L<N;L++)x[L]=this.i(L)|D.i(L);return new u(x,this.h|D.h)},n.xor=function(D){for(var N=Math.max(this.g.length,D.g.length),x=[],L=0;L<N;L++)x[L]=this.i(L)^D.i(L);return new u(x,this.h^D.h)};function de(D){for(var N=D.g.length+1,x=[],L=0;L<N;L++)x[L]=D.i(L)<<1|D.i(L-1)>>>31;return new u(x,D.h)}function le(D,N){var x=N>>5;N%=32;for(var L=D.g.length-x,P=[],k=0;k<L;k++)P[k]=0<N?D.i(k+x)>>>N|D.i(k+x+1)<<32-N:D.i(k+x);return new u(P,D.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,PS=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=g,u.fromString=v,Sr=u}).apply(typeof f0<"u"?f0:typeof self<"u"?self:typeof window<"u"?window:{});var Wc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var LS,$l,US,ud,Pp,VS,OS,qS;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,E,I){return h==Array.prototype||h==Object.prototype||(h[E]=I.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wc=="object"&&Wc];for(var E=0;E<h.length;++E){var I=h[E];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var s=t(this);function o(h,E){if(E)e:{var I=s;h=h.split(".");for(var b=0;b<h.length-1;b++){var H=h[b];if(!(H in I))break e;I=I[H]}h=h[h.length-1],b=I[h],E=E(b),E!=b&&E!=null&&e(I,h,{configurable:!0,writable:!0,value:E})}}function l(h,E){h instanceof String&&(h+="");var I=0,b=!1,H={next:function(){if(!b&&I<h.length){var X=I++;return{value:E(X,h[X]),done:!1}}return b=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}o("Array.prototype.values",function(h){return h||function(){return l(this,function(E,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function p(h){var E=typeof h;return E=E!="object"?E:h?Array.isArray(h)?"array":E:"null",E=="array"||E=="object"&&typeof h.length=="number"}function g(h){var E=typeof h;return E=="object"&&h!=null||E=="function"}function v(h,E,I){return h.call.apply(h.bind,arguments)}function T(h,E,I){if(!h)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,b),h.apply(E,H)}}return function(){return h.apply(E,arguments)}}function S(h,E,I){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:T,S.apply(null,arguments)}function R(h,E){var I=Array.prototype.slice.call(arguments,1);return function(){var b=I.slice();return b.push.apply(b,arguments),h.apply(this,b)}}function q(h,E){function I(){}I.prototype=E.prototype,h.aa=E.prototype,h.prototype=new I,h.prototype.constructor=h,h.Qb=function(b,H,X){for(var ae=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)ae[nt-2]=arguments[nt];return E.prototype[H].apply(b,ae)}}function z(h){const E=h.length;if(0<E){const I=Array(E);for(let b=0;b<E;b++)I[b]=h[b];return I}return[]}function F(h,E){for(let I=1;I<arguments.length;I++){const b=arguments[I];if(p(b)){const H=h.length||0,X=b.length||0;h.length=H+X;for(let ae=0;ae<X;ae++)h[H+ae]=b[ae]}else h.push(b)}}class ne{constructor(E,I){this.i=E,this.j=I,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function K(h){return/^[\s\xa0]*$/.test(h)}function W(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function ie(h){return ie[" "](h),h}ie[" "]=function(){};var de=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function le(h,E,I){for(const b in h)E.call(I,h[b],b,h)}function D(h,E){for(const I in h)E.call(void 0,h[I],I,h)}function N(h){const E={};for(const I in h)E[I]=h[I];return E}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(h,E){let I,b;for(let H=1;H<arguments.length;H++){b=arguments[H];for(I in b)h[I]=b[I];for(let X=0;X<x.length;X++)I=x[X],Object.prototype.hasOwnProperty.call(b,I)&&(h[I]=b[I])}}function P(h){var E=1;h=h.split(":");const I=[];for(;0<E&&h.length;)I.push(h.shift()),E--;return h.length&&I.push(h.join(":")),I}function k(h){d.setTimeout(()=>{throw h},0)}function M(){var h=ze;let E=null;return h.g&&(E=h.g,h.g=h.g.next,h.g||(h.h=null),E.next=null),E}class Qe{constructor(){this.h=this.g=null}add(E,I){const b=Ie.get();b.set(E,I),this.h?this.h.next=b:this.g=b,this.h=b}}var Ie=new ne(()=>new $,h=>h.reset());class ${constructor(){this.next=this.g=this.h=null}set(E,I){this.h=E,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,_e=!1,ze=new Qe,Ge=()=>{const h=d.Promise.resolve(void 0);oe=()=>{h.then(V)}};var V=()=>{for(var h;h=M();){try{h.h.call(h.g)}catch(I){k(I)}var E=Ie;E.j(h),100>E.h&&(E.h++,h.next=E.g,E.g=h)}_e=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(h,E){this.type=h,this.g=this.target=E,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var he=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,E=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const I=()=>{};d.addEventListener("test",I,E),d.removeEventListener("test",I,E)}catch{}return h})();function Se(h,E){if(re.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var I=this.type=h.type,b=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=E,E=h.relatedTarget){if(de){e:{try{ie(E.nodeName);var H=!0;break e}catch{}H=!1}H||(E=null)}}else I=="mouseover"?E=h.fromElement:I=="mouseout"&&(E=h.toElement);this.relatedTarget=E,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:xe[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Se.aa.h.call(this)}}q(Se,re);var xe={2:"touch",3:"pen",4:"mouse"};Se.prototype.h=function(){Se.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ke="closure_listenable_"+(1e6*Math.random()|0),Mt=0;function ft(h,E,I,b,H){this.listener=h,this.proxy=null,this.src=E,this.type=I,this.capture=!!b,this.ha=H,this.key=++Mt,this.da=this.fa=!1}function Fn(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function si(h){this.src=h,this.g={},this.h=0}si.prototype.add=function(h,E,I,b,H){var X=h.toString();h=this.g[X],h||(h=this.g[X]=[],this.h++);var ae=Ss(h,E,b,H);return-1<ae?(E=h[ae],I||(E.fa=!1)):(E=new ft(E,this.src,X,!!b,H),E.fa=I,h.push(E)),E};function yi(h,E){var I=E.type;if(I in h.g){var b=h.g[I],H=Array.prototype.indexOf.call(b,E,void 0),X;(X=0<=H)&&Array.prototype.splice.call(b,H,1),X&&(Fn(E),h.g[I].length==0&&(delete h.g[I],h.h--))}}function Ss(h,E,I,b){for(var H=0;H<h.length;++H){var X=h[H];if(!X.da&&X.listener==E&&X.capture==!!I&&X.ha==b)return H}return-1}var Nn="closure_lm_"+(1e6*Math.random()|0),Bi={};function As(h,E,I,b,H){if(Array.isArray(E)){for(var X=0;X<E.length;X++)As(h,E[X],I,b,H);return null}return I=vn(I),h&&h[ke]?h.K(E,I,g(b)?!!b.capture:!1,H):Or(h,E,I,!1,b,H)}function Or(h,E,I,b,H,X){if(!E)throw Error("Invalid event type");var ae=g(H)?!!H.capture:!!H,nt=Je(h);if(nt||(h[Nn]=nt=new si(h)),I=nt.add(E,I,b,ae,X),I.proxy)return I;if(b=bo(),I.proxy=b,b.src=h,b.listener=I,h.addEventListener)he||(H=ae),H===void 0&&(H=!1),h.addEventListener(E.toString(),b,H);else if(h.attachEvent)h.attachEvent(ce(E.toString()),b);else if(h.addListener&&h.removeListener)h.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return I}function bo(){function h(I){return E.call(h.src,h.listener,I)}const E=Ue;return h}function Cs(h,E,I,b,H){if(Array.isArray(E))for(var X=0;X<E.length;X++)Cs(h,E[X],I,b,H);else b=g(b)?!!b.capture:!!b,I=vn(I),h&&h[ke]?(h=h.i,E=String(E).toString(),E in h.g&&(X=h.g[E],I=Ss(X,I,b,H),-1<I&&(Fn(X[I]),Array.prototype.splice.call(X,I,1),X.length==0&&(delete h.g[E],h.h--)))):h&&(h=Je(h))&&(E=h.g[E.toString()],h=-1,E&&(h=Ss(E,I,b,H)),(I=-1<h?E[h]:null)&&Hn(I))}function Hn(h){if(typeof h!="number"&&h&&!h.da){var E=h.src;if(E&&E[ke])yi(E.i,h);else{var I=h.type,b=h.proxy;E.removeEventListener?E.removeEventListener(I,b,h.capture):E.detachEvent?E.detachEvent(ce(I),b):E.addListener&&E.removeListener&&E.removeListener(b),(I=Je(E))?(yi(I,h),I.h==0&&(I.src=null,E[Nn]=null)):Fn(h)}}}function ce(h){return h in Bi?Bi[h]:Bi[h]="on"+h}function Ue(h,E){if(h.da)h=!0;else{E=new Se(E,this);var I=h.listener,b=h.ha||h.src;h.fa&&Hn(h),h=I.call(b,E)}return h}function Je(h){return h=h[Nn],h instanceof si?h:null}var Xe="__closure_events_fn_"+(1e9*Math.random()>>>0);function vn(h){return typeof h=="function"?h:(h[Xe]||(h[Xe]=function(E){return h.handleEvent(E)}),h[Xe])}function lt(){Z.call(this),this.i=new si(this),this.M=this,this.F=null}q(lt,Z),lt.prototype[ke]=!0,lt.prototype.removeEventListener=function(h,E,I,b){Cs(this,h,E,I,b)};function ut(h,E){var I,b=h.F;if(b)for(I=[];b;b=b.F)I.push(b);if(h=h.M,b=E.type||E,typeof E=="string")E=new re(E,h);else if(E instanceof re)E.target=E.target||h;else{var H=E;E=new re(b,h),L(E,H)}if(H=!0,I)for(var X=I.length-1;0<=X;X--){var ae=E.g=I[X];H=ct(ae,b,!0,E)&&H}if(ae=E.g=h,H=ct(ae,b,!0,E)&&H,H=ct(ae,b,!1,E)&&H,I)for(X=0;X<I.length;X++)ae=E.g=I[X],H=ct(ae,b,!1,E)&&H}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var h=this.i,E;for(E in h.g){for(var I=h.g[E],b=0;b<I.length;b++)Fn(I[b]);delete h.g[E],h.h--}}this.F=null},lt.prototype.K=function(h,E,I,b){return this.i.add(String(h),E,!1,I,b)},lt.prototype.L=function(h,E,I,b){return this.i.add(String(h),E,!0,I,b)};function ct(h,E,I,b){if(E=h.i.g[String(E)],!E)return!0;E=E.concat();for(var H=!0,X=0;X<E.length;++X){var ae=E[X];if(ae&&!ae.da&&ae.capture==I){var nt=ae.listener,Dt=ae.ha||ae.src;ae.fa&&yi(h.i,ae),H=nt.call(Dt,b)!==!1&&H}}return H&&!b.defaultPrevented}function ri(h,E,I){if(typeof h=="function")I&&(h=S(h,I));else if(h&&typeof h.handleEvent=="function")h=S(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:d.setTimeout(h,E||0)}function oi(h){h.g=ri(()=>{h.g=null,h.i&&(h.i=!1,oi(h))},h.l);const E=h.h;h.h=null,h.m.apply(null,E)}class _i extends Z{constructor(E,I){super(),this.m=E,this.l=I,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:oi(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qr(h){Z.call(this),this.h=h,this.g={}}q(qr,Z);var Is=[];function nn(h){le(h.g,function(E,I){this.g.hasOwnProperty(I)&&Hn(E)},h),h.g={}}qr.prototype.N=function(){qr.aa.N.call(this),nn(this)},qr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zn=d.JSON.stringify,dn=d.JSON.parse,rf=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function za(){}za.prototype.h=null;function Iu(h){return h.h||(h.h=h.i())}function Br(){}var vi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ws(){re.call(this,"d")}q(ws,re);function ai(){re.call(this,"c")}q(ai,re);var Gn={},Rs=null;function xo(){return Rs=Rs||new lt}Gn.La="serverreachability";function Ga(h){re.call(this,Gn.La,h)}q(Ga,re);function Fi(h){const E=xo();ut(E,new Ga(E))}Gn.STAT_EVENT="statevent";function bs(h,E){re.call(this,Gn.STAT_EVENT,h),this.stat=E}q(bs,re);function $t(h){const E=xo();ut(E,new bs(E,h))}Gn.Ma="timingevent";function Ja(h,E){re.call(this,Gn.Ma,h),this.size=E}q(Ja,re);function xs(h,E){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},E)}function Ns(){this.g=!0}Ns.prototype.xa=function(){this.g=!1};function Ya(h,E,I,b,H,X){h.info(function(){if(h.g)if(X)for(var ae="",nt=X.split("&"),Dt=0;Dt<nt.length;Dt++){var Pe=nt[Dt].split("=");if(1<Pe.length){var Gt=Pe[0];Pe=Pe[1];var Jt=Gt.split("_");ae=2<=Jt.length&&Jt[1]=="type"?ae+(Gt+"="+Pe+"&"):ae+(Gt+"=redacted&")}}else ae=null;else ae=X;return"XMLHTTP REQ ("+b+") [attempt "+H+"]: "+E+`
`+I+`
`+ae})}function Ka(h,E,I,b,H,X,ae){h.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+H+"]: "+E+`
`+I+`
`+X+" "+ae})}function Hi(h,E,I,b){h.info(function(){return"XMLHTTP TEXT ("+E+"): "+Ti(h,I)+(b?" "+b:"")})}function wu(h,E){h.info(function(){return"TIMEOUT: "+E})}Ns.prototype.info=function(){};function Ti(h,E){if(!h.g)return E;if(!E)return null;try{var I=JSON.parse(E);if(I){for(h=0;h<I.length;h++)if(Array.isArray(I[h])){var b=I[h];if(!(2>b.length)){var H=b[1];if(Array.isArray(H)&&!(1>H.length)){var X=H[0];if(X!="noop"&&X!="stop"&&X!="close")for(var ae=1;ae<H.length;ae++)H[ae]=""}}}}return zn(I)}catch{return E}}var Tt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ei;function Ms(){}q(Ms,za),Ms.prototype.g=function(){return new XMLHttpRequest},Ms.prototype.i=function(){return{}},Ei=new Ms;function Si(h,E,I,b){this.j=h,this.i=E,this.l=I,this.R=b||1,this.U=new qr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ru}function Ru(){this.i=null,this.g="",this.h=!1}var $a={},zi={};function Fr(h,E,I){h.L=1,h.v=Gr(Et(E)),h.m=I,h.P=!0,Gi(h,null)}function Gi(h,E){h.F=Date.now(),li(h),h.A=Et(h.v);var I=h.A,b=h.R;Array.isArray(b)||(b=[String(b)]),Ki(I.i,"t",b),h.C=0,I=h.j.J,h.h=new Ru,h.g=zu(h.j,I?E:null,!h.m),0<h.O&&(h.M=new _i(S(h.Y,h,h.g),h.O)),E=h.U,I=h.g,b=h.ca;var H="readystatechange";Array.isArray(H)||(H&&(Is[0]=H.toString()),H=Is);for(var X=0;X<H.length;X++){var ae=As(I,H[X],b||E.handleEvent,!1,E.h||E);if(!ae)break;E.g[ae.key]=ae}E=h.H?N(h.H):{},h.m?(h.u||(h.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,E)):(h.u="GET",h.g.ea(h.A,h.u,null,E)),Fi(),Ya(h.i,h.u,h.A,h.l,h.R,h.m)}Si.prototype.ca=function(h){h=h.target;const E=this.M;E&&pn(h)==3?E.j():this.Y(h)},Si.prototype.Y=function(h){try{if(h==this.g)e:{const Jt=pn(this.g);var E=this.g.Ba();const Gs=this.g.Z();if(!(3>Jt)&&(Jt!=3||this.g&&(this.h.h||this.g.oa()||Kr(this.g)))){this.J||Jt!=4||E==7||(E==8||0>=Gs?Fi(3):Fi(2)),No(this);var I=this.g.Z();this.X=I;t:if(Ji(this)){var b=Kr(this.g);h="";var H=b.length,X=pn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fn(this),Ds(this);var ae="";break t}this.h.i=new d.TextDecoder}for(E=0;E<H;E++)this.h.h=!0,h+=this.h.i.decode(b[E],{stream:!(X&&E==H-1)});b.length=0,this.h.g+=h,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=I==200,Ka(this.i,this.u,this.A,this.l,this.R,Jt,I),this.o){if(this.T&&!this.K){t:{if(this.g){var nt,Dt=this.g;if((nt=Dt.g?Dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(nt)){var Pe=nt;break t}}Pe=null}if(I=Pe)Hi(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ai(this,I);else{this.o=!1,this.s=3,$t(12),fn(this),Ds(this);break e}}if(this.P){I=!0;let En;for(;!this.J&&this.C<ae.length;)if(En=Hr(this,ae),En==zi){Jt==4&&(this.s=4,$t(14),I=!1),Hi(this.i,this.l,null,"[Incomplete Response]");break}else if(En==$a){this.s=4,$t(15),Hi(this.i,this.l,ae,"[Invalid Chunk]"),I=!1;break}else Hi(this.i,this.l,En,null),Ai(this,En);if(Ji(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jt!=4||ae.length!=0||this.h.h||(this.s=1,$t(16),I=!1),this.o=this.o&&I,!I)Hi(this.i,this.l,ae,"[Invalid Chunked Response]"),fn(this),Ds(this);else if(0<ae.length&&!this.W){this.W=!0;var Gt=this.j;Gt.g==this&&Gt.ba&&!Gt.M&&(Gt.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),rl(Gt),Gt.M=!0,$t(11))}}else Hi(this.i,this.l,ae,null),Ai(this,ae);Jt==4&&fn(this),this.o&&!this.J&&(Jt==4?Bu(this.j,this):(this.o=!1,li(this)))}else Pu(this.g),I==400&&0<ae.indexOf("Unknown SID")?(this.s=3,$t(12)):(this.s=0,$t(13)),fn(this),Ds(this)}}}catch{}finally{}};function Ji(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Hr(h,E){var I=h.C,b=E.indexOf(`
`,I);return b==-1?zi:(I=Number(E.substring(I,b)),isNaN(I)?$a:(b+=1,b+I>E.length?zi:(E=E.slice(b,b+I),h.C=b+I,E)))}Si.prototype.cancel=function(){this.J=!0,fn(this)};function li(h){h.S=Date.now()+h.I,wt(h,h.I)}function wt(h,E){if(h.B!=null)throw Error("WatchDog timer not null");h.B=xs(S(h.ba,h),E)}function No(h){h.B&&(d.clearTimeout(h.B),h.B=null)}Si.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(wu(this.i,this.A),this.L!=2&&(Fi(),$t(17)),fn(this),this.s=2,Ds(this)):wt(this,this.S-h)};function Ds(h){h.j.G==0||h.J||Bu(h.j,h)}function fn(h){No(h);var E=h.M;E&&typeof E.ma=="function"&&E.ma(),h.M=null,nn(h.U),h.g&&(E=h.g,h.g=null,E.abort(),E.ma())}function Ai(h,E){try{var I=h.j;if(I.G!=0&&(I.g==h||ks(I.h,h))){if(!h.K&&ks(I.h,h)&&I.G==3){try{var b=I.Da.g.parse(E)}catch{b=null}if(Array.isArray(b)&&b.length==3){var H=b;if(H[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<h.F)Hs(I),Fs(I);else break e;sl(I),$t(18)}}else I.za=H[1],0<I.za-I.T&&37500>H[2]&&I.F&&I.v==0&&!I.C&&(I.C=xs(S(I.Za,I),6e3));if(1>=bu(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else Qi(I,11)}else if((h.K||I.g==h)&&Hs(I),!K(E))for(H=I.Da.g.parse(E),E=0;E<H.length;E++){let Pe=H[E];if(I.T=Pe[0],Pe=Pe[1],I.G==2)if(Pe[0]=="c"){I.K=Pe[1],I.ia=Pe[2];const Gt=Pe[3];Gt!=null&&(I.la=Gt,I.j.info("VER="+I.la));const Jt=Pe[4];Jt!=null&&(I.Aa=Jt,I.j.info("SVER="+I.Aa));const Gs=Pe[5];Gs!=null&&typeof Gs=="number"&&0<Gs&&(b=1.5*Gs,I.L=b,I.j.info("backChannelRequestTimeoutMs_="+b)),b=I;const En=h.g;if(En){const Xr=En.g?En.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xr){var X=b.h;X.g||Xr.indexOf("spdy")==-1&&Xr.indexOf("quic")==-1&&Xr.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Ps(X,X.h),X.h=null))}if(b.D){const Xi=En.g?En.g.getResponseHeader("X-HTTP-Session-Id"):null;Xi&&(b.ya=Xi,We(b.I,b.D,Xi))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-h.F,I.j.info("Handshake RTT: "+I.R+"ms")),b=I;var ae=h;if(b.qa=Hu(b,b.J?b.ia:null,b.W),ae.K){Jn(b.h,ae);var nt=ae,Dt=b.L;Dt&&(nt.I=Dt),nt.B&&(No(nt),li(nt)),b.g=ae}else Ou(b);0<I.i.length&&Oo(I)}else Pe[0]!="stop"&&Pe[0]!="close"||Qi(I,7);else I.G==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?Qi(I,7):nl(I):Pe[0]!="noop"&&I.l&&I.l.ta(Pe),I.v=0)}}Fi(4)}catch{}}var of=class{constructor(h,E){this.g=h,this.map=E}};function Qa(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xa(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function bu(h){return h.h?1:h.g?h.g.size:0}function ks(h,E){return h.h?h.h==E:h.g?h.g.has(E):!1}function Ps(h,E){h.g?h.g.add(E):h.h=E}function Jn(h,E){h.h&&h.h==E?h.h=null:h.g&&h.g.has(E)&&h.g.delete(E)}Qa.prototype.cancel=function(){if(this.i=hn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function hn(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let E=h.i;for(const I of h.g.values())E=E.concat(I.D);return E}return z(h.i)}function xu(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(p(h)){for(var E=[],I=h.length,b=0;b<I;b++)E.push(h[b]);return E}E=[],I=0;for(b in h)E[I++]=h[b];return E}function af(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(p(h)||typeof h=="string"){var E=[];h=h.length;for(var I=0;I<h;I++)E.push(I);return E}E=[],I=0;for(const b in h)E[I++]=b;return E}}}function Mo(h,E){if(h.forEach&&typeof h.forEach=="function")h.forEach(E,void 0);else if(p(h)||typeof h=="string")Array.prototype.forEach.call(h,E,void 0);else for(var I=af(h),b=xu(h),H=b.length,X=0;X<H;X++)E.call(void 0,b[X],I&&I[X],h)}var Wa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Do(h,E){if(h){h=h.split("&");for(var I=0;I<h.length;I++){var b=h[I].indexOf("="),H=null;if(0<=b){var X=h[I].substring(0,b);H=h[I].substring(b+1)}else X=h[I];E(X,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Yi(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Yi){this.h=h.h,Ls(this,h.j),this.o=h.o,this.g=h.g,zr(this,h.s),this.l=h.l;var E=h.i,I=new Ci;I.i=E.i,E.g&&(I.g=new Map(E.g),I.h=E.h),ko(this,I),this.m=h.m}else h&&(E=String(h).match(Wa))?(this.h=!1,Ls(this,E[1]||"",!0),this.o=Us(E[2]||""),this.g=Us(E[3]||"",!0),zr(this,E[4]),this.l=Us(E[5]||"",!0),ko(this,E[6]||"",!0),this.m=Us(E[7]||"")):(this.h=!1,this.i=new Ci(null,this.h))}Yi.prototype.toString=function(){var h=[],E=this.j;E&&h.push(Yn(E,ja,!0),":");var I=this.g;return(I||E=="file")&&(h.push("//"),(E=this.o)&&h.push(Yn(E,ja,!0),"@"),h.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&h.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&h.push("/"),h.push(Yn(I,I.charAt(0)=="/"?Za:Nu,!0))),(I=this.i.toString())&&h.push("?",I),(I=this.m)&&h.push("#",Yn(I,cf)),h.join("")};function Et(h){return new Yi(h)}function Ls(h,E,I){h.j=I?Us(E,!0):E,h.j&&(h.j=h.j.replace(/:$/,""))}function zr(h,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);h.s=E}else h.s=null}function ko(h,E,I){E instanceof Ci?(h.i=E,Mu(h.i,h.h)):(I||(E=Yn(E,uf)),h.i=new Ci(E,h.h))}function We(h,E,I){h.i.set(E,I)}function Gr(h){return We(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Us(h,E){return h?E?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Yn(h,E,I){return typeof h=="string"?(h=encodeURI(h).replace(E,lf),I&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function lf(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var ja=/[#\/\?@]/g,Nu=/[#\?:]/g,Za=/[#\?]/g,uf=/[#\?@]/g,cf=/#/g;function Ci(h,E){this.h=this.g=null,this.i=h||null,this.j=!!E}function zt(h){h.g||(h.g=new Map,h.h=0,h.i&&Do(h.i,function(E,I){h.add(decodeURIComponent(E.replace(/\+/g," ")),I)}))}n=Ci.prototype,n.add=function(h,E){zt(this),this.i=null,h=Mn(this,h);var I=this.g.get(h);return I||this.g.set(h,I=[]),I.push(E),this.h+=1,this};function Po(h,E){zt(h),E=Mn(h,E),h.g.has(E)&&(h.i=null,h.h-=h.g.get(E).length,h.g.delete(E))}function Lo(h,E){return zt(h),E=Mn(h,E),h.g.has(E)}n.forEach=function(h,E){zt(this),this.g.forEach(function(I,b){I.forEach(function(H){h.call(E,H,b,this)},this)},this)},n.na=function(){zt(this);const h=Array.from(this.g.values()),E=Array.from(this.g.keys()),I=[];for(let b=0;b<E.length;b++){const H=h[b];for(let X=0;X<H.length;X++)I.push(E[b])}return I},n.V=function(h){zt(this);let E=[];if(typeof h=="string")Lo(this,h)&&(E=E.concat(this.g.get(Mn(this,h))));else{h=Array.from(this.g.values());for(let I=0;I<h.length;I++)E=E.concat(h[I])}return E},n.set=function(h,E){return zt(this),this.i=null,h=Mn(this,h),Lo(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[E]),this.h+=1,this},n.get=function(h,E){return h?(h=this.V(h),0<h.length?String(h[0]):E):E};function Ki(h,E,I){Po(h,E),0<I.length&&(h.i=null,h.g.set(Mn(h,E),z(I)),h.h+=I.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],E=Array.from(this.g.keys());for(var I=0;I<E.length;I++){var b=E[I];const X=encodeURIComponent(String(b)),ae=this.V(b);for(b=0;b<ae.length;b++){var H=X;ae[b]!==""&&(H+="="+encodeURIComponent(String(ae[b]))),h.push(H)}}return this.i=h.join("&")};function Mn(h,E){return E=String(E),h.j&&(E=E.toLowerCase()),E}function Mu(h,E){E&&!h.j&&(zt(h),h.i=null,h.g.forEach(function(I,b){var H=b.toLowerCase();b!=H&&(Po(this,b),Ki(this,H,I))},h)),h.j=E}function el(h,E){const I=new Ns;if(d.Image){const b=new Image;b.onload=R(Tn,I,"TestLoadImage: loaded",!0,E,b),b.onerror=R(Tn,I,"TestLoadImage: error",!1,E,b),b.onabort=R(Tn,I,"TestLoadImage: abort",!1,E,b),b.ontimeout=R(Tn,I,"TestLoadImage: timeout",!1,E,b),d.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=h}else E(!1)}function Du(h,E){const I=new Ns,b=new AbortController,H=setTimeout(()=>{b.abort(),Tn(I,"TestPingServer: timeout",!1,E)},1e4);fetch(h,{signal:b.signal}).then(X=>{clearTimeout(H),X.ok?Tn(I,"TestPingServer: ok",!0,E):Tn(I,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(H),Tn(I,"TestPingServer: error",!1,E)})}function Tn(h,E,I,b,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),b(I)}catch{}}function ui(){this.g=new rf}function tl(h,E,I){const b=I||"";try{Mo(h,function(H,X){let ae=H;g(H)&&(ae=zn(H)),E.push(b+X+"="+encodeURIComponent(ae))})}catch(H){throw E.push(b+"type="+encodeURIComponent("_badmap")),H}}function Ii(h){this.l=h.Ub||null,this.j=h.eb||!1}q(Ii,za),Ii.prototype.g=function(){return new Dn(this.l,this.j)},Ii.prototype.i=(function(h){return function(){return h}})({});function Dn(h,E){lt.call(this),this.D=h,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}q(Dn,lt),n=Dn.prototype,n.open=function(h,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=E,this.readyState=1,Vs(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(E.body=h),(this.D||d).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,wi(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Vs(this)),this.g&&(this.readyState=3,Vs(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Uo(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Uo(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var E=h.value?h.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!h.done}))&&(this.response=this.responseText+=E)}h.done?wi(this):Vs(this),this.readyState==3&&Uo(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,wi(this))},n.Qa=function(h){this.g&&(this.response=h,wi(this))},n.ga=function(){this.g&&wi(this)};function wi(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Vs(h)}n.setRequestHeader=function(h,E){this.u.append(h,E)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],E=this.h.entries();for(var I=E.next();!I.done;)I=I.value,h.push(I[0]+": "+I[1]),I=E.next();return h.join(`\r
`)};function Vs(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Dn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Jr(h){let E="";return le(h,function(I,b){E+=b,E+=":",E+=I,E+=`\r
`}),E}function Os(h,E,I){e:{for(b in I){var b=!1;break e}b=!0}b||(I=Jr(I),typeof h=="string"?I!=null&&encodeURIComponent(String(I)):We(h,E,I))}function ht(h){lt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}q(ht,lt);var sn=/^https?$/i,$i=["POST","PUT"];n=ht.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,E,I,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);E=E?E.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ei.g(),this.v=this.o?Iu(this.o):Iu(Ei),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(E,String(h),!0),this.B=!1}catch(X){Yr(this,X);return}if(h=I||"",I=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var H in b)I.set(H,b[H]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const X of b.keys())I.set(X,b.get(X));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(I.keys()).find(X=>X.toLowerCase()=="content-type"),H=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call($i,E,void 0))||b||H||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ae]of I)this.g.setRequestHeader(X,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vo(this),this.u=!0,this.g.send(h),this.u=!1}catch(X){Yr(this,X)}};function Yr(h,E){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=E,h.m=5,qs(h),Bs(h)}function qs(h){h.A||(h.A=!0,ut(h,"complete"),ut(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,ut(this,"complete"),ut(this,"abort"),Bs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bs(this,!0)),ht.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ku(this):this.bb())},n.bb=function(){ku(this)};function ku(h){if(h.h&&typeof u<"u"&&(!h.v[1]||pn(h)!=4||h.Z()!=2)){if(h.u&&pn(h)==4)ri(h.Ea,0,h);else if(ut(h,"readystatechange"),pn(h)==4){h.h=!1;try{const ae=h.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var I;if(!(I=E)){var b;if(b=ae===0){var H=String(h.D).match(Wa)[1]||null;!H&&d.self&&d.self.location&&(H=d.self.location.protocol.slice(0,-1)),b=!sn.test(H?H.toLowerCase():"")}I=b}if(I)ut(h,"complete"),ut(h,"success");else{h.m=6;try{var X=2<pn(h)?h.g.statusText:""}catch{X=""}h.l=X+" ["+h.Z()+"]",qs(h)}}finally{Bs(h)}}}}function Bs(h,E){if(h.g){Vo(h);const I=h.g,b=h.v[0]?()=>{}:null;h.g=null,h.v=null,E||ut(h,"ready");try{I.onreadystatechange=b}catch{}}}function Vo(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function pn(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<pn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var E=this.g.responseText;return h&&E.indexOf(h)==0&&(E=E.substring(h.length)),dn(E)}};function Kr(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Pu(h){const E={};h=(h.g&&2<=pn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<h.length;b++){if(K(h[b]))continue;var I=P(h[b]);const H=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const X=E[H]||[];E[H]=X,X.push(I)}D(E,function(b){return b.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $r(h,E,I){return I&&I.internalChannelParams&&I.internalChannelParams[h]||E}function Lu(h){this.Aa=0,this.i=[],this.j=new Ns,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$r("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$r("baseRetryDelayMs",5e3,h),this.cb=$r("retryDelaySeedMs",1e4,h),this.Wa=$r("forwardChannelMaxRetries",2,h),this.wa=$r("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Qa(h&&h.concurrentRequestLimit),this.Da=new ui,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Lu.prototype,n.la=8,n.G=1,n.connect=function(h,E,I,b){$t(0),this.W=h,this.H=E||{},I&&b!==void 0&&(this.H.OSID=I,this.H.OAID=b),this.F=this.X,this.I=Hu(this,null,this.W),Oo(this)};function nl(h){if(Uu(h),h.G==3){var E=h.U++,I=Et(h.I);if(We(I,"SID",h.K),We(I,"RID",E),We(I,"TYPE","terminate"),Qr(h,I),E=new Si(h,h.j,E),E.L=2,E.v=Gr(Et(I)),I=!1,d.navigator&&d.navigator.sendBeacon)try{I=d.navigator.sendBeacon(E.v.toString(),"")}catch{}!I&&d.Image&&(new Image().src=E.v,I=!0),I||(E.g=zu(E.j,null),E.g.ea(E.v)),E.F=Date.now(),li(E)}ol(h)}function Fs(h){h.g&&(rl(h),h.g.cancel(),h.g=null)}function Uu(h){Fs(h),h.u&&(d.clearTimeout(h.u),h.u=null),Hs(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function Oo(h){if(!Xa(h.h)&&!h.s){h.s=!0;var E=h.Ga;oe||Ge(),_e||(oe(),_e=!0),ze.add(E,h),h.B=0}}function df(h,E){return bu(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=E.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=xs(S(h.Ga,h,E),Fu(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const H=new Si(this,this.j,h);let X=this.o;if(this.S&&(X?(X=N(X),L(X,this.S)):X=this.S),this.m!==null||this.O||(H.H=X,X=null),this.P)e:{for(var E=0,I=0;I<this.i.length;I++){t:{var b=this.i[I];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(E+=b,4096<E){E=I;break e}if(E===4096||I===this.i.length-1){E=I+1;break e}}E=1e3}else E=1e3;E=il(this,H,E),I=Et(this.I),We(I,"RID",h),We(I,"CVER",22),this.D&&We(I,"X-HTTP-Session-Id",this.D),Qr(this,I),X&&(this.O?E="headers="+encodeURIComponent(String(Jr(X)))+"&"+E:this.m&&Os(I,this.m,X)),Ps(this.h,H),this.Ua&&We(I,"TYPE","init"),this.P?(We(I,"$req",E),We(I,"SID","null"),H.T=!0,Fr(H,I,null)):Fr(H,I,E),this.G=2}}else this.G==3&&(h?Vu(this,h):this.i.length==0||Xa(this.h)||Vu(this))};function Vu(h,E){var I;E?I=E.l:I=h.U++;const b=Et(h.I);We(b,"SID",h.K),We(b,"RID",I),We(b,"AID",h.T),Qr(h,b),h.m&&h.o&&Os(b,h.m,h.o),I=new Si(h,h.j,I,h.B+1),h.m===null&&(I.H=h.o),E&&(h.i=E.D.concat(h.i)),E=il(h,I,1e3),I.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ps(h.h,I),Fr(I,b,E)}function Qr(h,E){h.H&&le(h.H,function(I,b){We(E,b,I)}),h.l&&Mo({},function(I,b){We(E,b,I)})}function il(h,E,I){I=Math.min(h.i.length,I);var b=h.l?S(h.l.Na,h.l,h):null;e:{var H=h.i;let X=-1;for(;;){const ae=["count="+I];X==-1?0<I?(X=H[0].g,ae.push("ofs="+X)):X=0:ae.push("ofs="+X);let nt=!0;for(let Dt=0;Dt<I;Dt++){let Pe=H[Dt].g;const Gt=H[Dt].map;if(Pe-=X,0>Pe)X=Math.max(0,H[Dt].g-100),nt=!1;else try{tl(Gt,ae,"req"+Pe+"_")}catch{b&&b(Gt)}}if(nt){b=ae.join("&");break e}}}return h=h.i.splice(0,I),E.D=h,b}function Ou(h){if(!h.g&&!h.u){h.Y=1;var E=h.Fa;oe||Ge(),_e||(oe(),_e=!0),ze.add(E,h),h.v=0}}function sl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=xs(S(h.Fa,h),Fu(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,qu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=xs(S(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$t(10),Fs(this),qu(this))};function rl(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function qu(h){h.g=new Si(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var E=Et(h.qa);We(E,"RID","rpc"),We(E,"SID",h.K),We(E,"AID",h.T),We(E,"CI",h.F?"0":"1"),!h.F&&h.ja&&We(E,"TO",h.ja),We(E,"TYPE","xmlhttp"),Qr(h,E),h.m&&h.o&&Os(E,h.m,h.o),h.L&&(h.g.I=h.L);var I=h.g;h=h.ia,I.L=1,I.v=Gr(Et(E)),I.m=null,I.P=!0,Gi(I,h)}n.Za=function(){this.C!=null&&(this.C=null,Fs(this),sl(this),$t(19))};function Hs(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Bu(h,E){var I=null;if(h.g==E){Hs(h),rl(h),h.g=null;var b=2}else if(ks(h.h,E))I=E.D,Jn(h.h,E),b=1;else return;if(h.G!=0){if(E.o)if(b==1){I=E.m?E.m.length:0,E=Date.now()-E.F;var H=h.B;b=xo(),ut(b,new Ja(b,I)),Oo(h)}else Ou(h);else if(H=E.s,H==3||H==0&&0<E.X||!(b==1&&df(h,E)||b==2&&sl(h)))switch(I&&0<I.length&&(E=h.h,E.i=E.i.concat(I)),H){case 1:Qi(h,5);break;case 4:Qi(h,10);break;case 3:Qi(h,6);break;default:Qi(h,2)}}}function Fu(h,E){let I=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(I*=2),I*E}function Qi(h,E){if(h.j.info("Error code "+E),E==2){var I=S(h.fb,h),b=h.Xa;const H=!b;b=new Yi(b||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Ls(b,"https"),Gr(b),H?el(b.toString(),I):Du(b.toString(),I)}else $t(2);h.G=0,h.l&&h.l.sa(E),ol(h),Uu(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function ol(h){if(h.G=0,h.ka=[],h.l){const E=hn(h.h);(E.length!=0||h.i.length!=0)&&(F(h.ka,E),F(h.ka,h.i),h.h.i.length=0,z(h.i),h.i.length=0),h.l.ra()}}function Hu(h,E,I){var b=I instanceof Yi?Et(I):new Yi(I);if(b.g!="")E&&(b.g=E+"."+b.g),zr(b,b.s);else{var H=d.location;b=H.protocol,E=E?E+"."+H.hostname:H.hostname,H=+H.port;var X=new Yi(null);b&&Ls(X,b),E&&(X.g=E),H&&zr(X,H),I&&(X.l=I),b=X}return I=h.D,E=h.ya,I&&E&&We(b,I,E),We(b,"VER",h.la),Qr(h,b),b}function zu(h,E,I){if(E&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=h.Ca&&!h.pa?new ht(new Ii({eb:I})):new ht(h.pa),E.Ha(h.J),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gu(){}n=Gu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function qo(){}qo.prototype.g=function(h,E){return new mn(h,E)};function mn(h,E){lt.call(this),this.g=new Lu(E),this.l=h,this.h=E&&E.messageUrlParams||null,h=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(h?h["X-WebChannel-Content-Type"]=E.messageContentType:h={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(h?h["X-WebChannel-Client-Profile"]=E.va:h={"X-WebChannel-Client-Profile":E.va}),this.g.S=h,(h=E&&E.Sb)&&!K(h)&&(this.g.m=h),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!K(E)&&(this.g.D=E,h=this.h,h!==null&&E in h&&(h=this.h,E in h&&delete h[E])),this.j=new zs(this)}q(mn,lt),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){nl(this.g)},mn.prototype.o=function(h){var E=this.g;if(typeof h=="string"){var I={};I.__data__=h,h=I}else this.u&&(I={},I.__data__=zn(h),h=I);E.i.push(new of(E.Ya++,h)),E.G==3&&Oo(E)},mn.prototype.N=function(){this.g.l=null,delete this.j,nl(this.g),delete this.g,mn.aa.N.call(this)};function Ju(h){ws.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var E=h.__sm__;if(E){e:{for(const I in E){h=I;break e}h=void 0}(this.i=h)&&(h=this.i,E=E!==null&&h in E?E[h]:void 0),this.data=E}else this.data=h}q(Ju,ws);function Yu(){ai.call(this),this.status=1}q(Yu,ai);function zs(h){this.g=h}q(zs,Gu),zs.prototype.ua=function(){ut(this.g,"a")},zs.prototype.ta=function(h){ut(this.g,new Ju(h))},zs.prototype.sa=function(h){ut(this.g,new Yu)},zs.prototype.ra=function(){ut(this.g,"b")},qo.prototype.createWebChannel=qo.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,qS=function(){return new qo},OS=function(){return xo()},VS=Gn,Pp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Tt.NO_ERROR=0,Tt.TIMEOUT=8,Tt.HTTP_ERROR=6,ud=Tt,Qt.COMPLETE="complete",US=Qt,Br.EventType=vi,vi.OPEN="a",vi.CLOSE="b",vi.ERROR="c",vi.MESSAGE="d",lt.prototype.listen=lt.prototype.K,$l=Br,ht.prototype.listenOnce=ht.prototype.L,ht.prototype.getLastError=ht.prototype.Ka,ht.prototype.getLastErrorCode=ht.prototype.Ba,ht.prototype.getStatus=ht.prototype.Z,ht.prototype.getResponseJson=ht.prototype.Oa,ht.prototype.getResponseText=ht.prototype.oa,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Ha,LS=ht}).apply(typeof Wc<"u"?Wc:typeof self<"u"?self:typeof window<"u"?window:{});const h0="@firebase/firestore",p0="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}an.UNAUTHENTICATED=new an(null),an.GOOGLE_CREDENTIALS=new an("google-credentials-uid"),an.FIRST_PARTY=new an("first-party-uid"),an.MOCK_USER=new an("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Va="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=new fm("@firebase/firestore");function pa(){return Ao.logLevel}function pe(n,...e){if(Ao.logLevel<=Fe.DEBUG){const t=e.map(wm);Ao.debug(`Firestore (${Va}): ${n}`,...t)}}function _s(n,...e){if(Ao.logLevel<=Fe.ERROR){const t=e.map(wm);Ao.error(`Firestore (${Va}): ${n}`,...t)}}function wr(n,...e){if(Ao.logLevel<=Fe.WARN){const t=e.map(wm);Ao.warn(`Firestore (${Va}): ${n}`,...t)}}function wm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,BS(n,s,t)}function BS(n,e,t){let s=`FIRESTORE (${Va}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw _s(s),new Error(s)}function vt(n,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,n||BS(e,o,s)}function Ke(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends qi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Mx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(an.UNAUTHENTICATED)))}shutdown(){}}class Dx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class kx{constructor(e){this.t=e,this.currentUser=an.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){vt(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new go;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new go,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},d=p=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new go)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(vt(typeof s.accessToken=="string",31837,{l:s}),new FS(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return vt(e===null||typeof e=="string",2055,{h:e}),new an(e)}}class Px{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=an.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Lx{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new Px(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(an.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class m0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ux{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){vt(this.o===void 0,3512);const s=l=>{l.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,pe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new m0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(vt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new m0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=Vx(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Le(n,e){return n<e?-1:n>e?1:0}function Lp(n,e){let t=0;for(;t<n.length&&t<e.length;){const s=n.codePointAt(t),o=e.codePointAt(t);if(s!==o){if(s<128&&o<128)return Le(s,o);{const l=HS(),u=Ox(l.encode(g0(n,t)),l.encode(g0(e,t)));return u!==0?u:Le(s,o)}}t+=s>65535?2:1}return Le(n.length,e.length)}function g0(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function Ox(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Le(n[t],e[t]);return Le(n.length,e.length)}function Na(n,e,t){return n.length===e.length&&n.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0="__name__";class Mi{constructor(e,t,s){t===void 0?t=0:t>e.length&&be(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&be(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Mi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Mi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=Mi.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Le(e.length,t.length)}static compareSegments(e,t){const s=Mi.isNumericId(e),o=Mi.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Mi.extractNumericId(e).compare(Mi.extractNumericId(t)):Lp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Sr.fromString(e.substring(4,e.length-2))}}class _t extends Mi{construct(e,t,s){return new _t(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Te(ue.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new _t(t)}static emptyPath(){return new _t([])}}const qx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _n extends Mi{construct(e,t,s){return new _n(e,t,s)}static isValidIdentifier(e){return qx.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_n.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===y0}static keyField(){return new _n([y0])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new Te(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new Te(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Te(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(s+=d,o++):(l(),o++)}if(l(),u)throw new Te(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _n(t)}static emptyPath(){return new _n([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(_t.fromString(e))}static fromName(e){return new Ce(_t.fromString(e).popFirst(5))}static empty(){return new Ce(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return _t.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new _t(e.slice()))}}function Bx(n,e,t,s){if(e===!0&&s===!0)throw new Te(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function _0(n){if(Ce.isDocumentKey(n))throw new Te(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Fx(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Hx(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":be(12329,{type:typeof n})}function Up(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Te(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Hx(n);throw new Te(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Tu(n,e){if(!Fx(n))throw new Te(ue.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const u=n[s];if(o&&typeof u!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new Te(ue.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0=-62135596800,T0=1e6;class Ot{static now(){return Ot.fromMillis(Date.now())}static fromDate(e){return Ot.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*T0);return new Ot(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<v0)throw new Te(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/T0}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ot._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Tu(e,Ot._jsonSchema))return new Ot(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-v0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ot._jsonSchemaVersion="firestore/timestamp/1.0",Ot._jsonSchema={type:qt("string",Ot._jsonSchemaVersion),seconds:qt("number"),nanoseconds:qt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new Ot(0,0))}static max(){return new Re(new Ot(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu=-1;function zx(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(s===1e9?new Ot(t+1,0):new Ot(t,s));return new Rr(o,Ce.empty(),e)}function Gx(n){return new Rr(n.readTime,n.key,cu)}class Rr{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Rr(Re.min(),Ce.empty(),cu)}static max(){return new Rr(Re.max(),Ce.empty(),cu)}}function Jx(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ce.comparator(n.documentKey,e.documentKey),t!==0?t:Le(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Kx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bd(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==Yx)throw n;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,s)=>{t(e)}))}static reject(e){return new se(((t,s)=>{s(e)}))}static waitFor(e){return new se(((t,s)=>{let o=0,l=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++l,u&&l===o&&t()}),(p=>s(p)))})),u=!0,l===o&&t()}))}static or(e){let t=se.resolve(!1);for(const s of e)t=t.next((o=>o?se.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new se(((s,o)=>{const l=e.length,u=new Array(l);let d=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((v=>{u[g]=v,++d,d===l&&s(u)}),(v=>o(v)))}}))}static doWhile(e,t){return new se(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function $x(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Oa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this._e(s),this.ae=s=>t.writeSequenceNumber(s))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Fd.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx=-1;function Hd(n){return n==null}function Vp(n){return n===0&&1/n==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="";function Xx(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=E0(e)),e=Wx(n.get(t),e);return E0(e)}function Wx(n,e){let t=e;const s=n.length;for(let o=0;o<s;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case GS:t+="";break;default:t+=l}}return t}function E0(n){return n+GS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Eu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jx(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,t){this.comparator=e,this.root=t||en.EMPTY}insert(e,t){return new Nt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new Nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jc(this.root,e,this.comparator,!1)}getReverseIterator(){return new jc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jc(this.root,e,this.comparator,!0)}}class jc{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??en.RED,this.left=o??en.EMPTY,this.right=l??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new en(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return en.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw be(27949);return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw be(57766)}get value(){throw be(16141)}get color(){throw be(16727)}get left(){throw be(29726)}get right(){throw be(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new en(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.comparator=e,this.data=new Nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new A0(this.data.getIterator())}getIteratorFrom(e){return new A0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Ht)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ht(this.comparator);return t.data=e,t}}class A0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.fields=e,e.sort(_n.comparator)}static empty(){return new _r([])}unionWith(e){let t=new Ht(_n.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new _r(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Na(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new JS("Invalid base64 string: "+l):l}})(e);return new tn(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let u=0;u<o.length;++u)l+=String.fromCharCode(o[u]);return l})(e);return new tn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const Zx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function br(n){if(vt(!!n,39018),typeof n=="string"){let e=0;const t=Zx.exec(n);if(vt(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:xt(n.seconds),nanos:xt(n.nanos)}}function xt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function xr(n){return typeof n=="string"?tn.fromBase64String(n):tn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS="server_timestamp",KS="__type__",$S="__previous_value__",QS="__local_write_time__";function Rm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[KS])===null||t===void 0?void 0:t.stringValue)===YS}function zd(n){const e=n.mapValue.fields[$S];return Rm(e)?zd(e):e}function du(n){const e=br(n.mapValue.fields[QS].timestampValue);return new Ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e,t,s,o,l,u,d,p,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=v}}const Cd="(default)";class fu{constructor(e,t){this.projectId=e,this.database=t||Cd}static empty(){return new fu("","")}get isDefaultDatabase(){return this.database===Cd}isEqual(e){return e instanceof fu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN="__type__",nN="__max__",Zc={mapValue:{}},iN="__vector__",Op="value";function Nr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Rm(n)?4:rN(n)?9007199254740991:sN(n)?10:11:be(28295,{value:n})}function Vi(n,e){if(n===e)return!0;const t=Nr(n);if(t!==Nr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return du(n).isEqual(du(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const u=br(o.timestampValue),d=br(l.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return xr(o.bytesValue).isEqual(xr(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return xt(o.geoPointValue.latitude)===xt(l.geoPointValue.latitude)&&xt(o.geoPointValue.longitude)===xt(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return xt(o.integerValue)===xt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const u=xt(o.doubleValue),d=xt(l.doubleValue);return u===d?Vp(u)===Vp(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return Na(n.arrayValue.values||[],e.arrayValue.values||[],Vi);case 10:case 11:return(function(o,l){const u=o.mapValue.fields||{},d=l.mapValue.fields||{};if(S0(u)!==S0(d))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(d[p]===void 0||!Vi(u[p],d[p])))return!1;return!0})(n,e);default:return be(52216,{left:n})}}function hu(n,e){return(n.values||[]).find((t=>Vi(t,e)))!==void 0}function Ma(n,e){if(n===e)return 0;const t=Nr(n),s=Nr(e);if(t!==s)return Le(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const d=xt(l.integerValue||l.doubleValue),p=xt(u.integerValue||u.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return C0(n.timestampValue,e.timestampValue);case 4:return C0(du(n),du(e));case 5:return Lp(n.stringValue,e.stringValue);case 6:return(function(l,u){const d=xr(l),p=xr(u);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const d=l.split("/"),p=u.split("/");for(let g=0;g<d.length&&g<p.length;g++){const v=Le(d[g],p[g]);if(v!==0)return v}return Le(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const d=Le(xt(l.latitude),xt(u.latitude));return d!==0?d:Le(xt(l.longitude),xt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return I0(n.arrayValue,e.arrayValue);case 10:return(function(l,u){var d,p,g,v;const T=l.fields||{},S=u.fields||{},R=(d=T[Op])===null||d===void 0?void 0:d.arrayValue,q=(p=S[Op])===null||p===void 0?void 0:p.arrayValue,z=Le(((g=R==null?void 0:R.values)===null||g===void 0?void 0:g.length)||0,((v=q==null?void 0:q.values)===null||v===void 0?void 0:v.length)||0);return z!==0?z:I0(R,q)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===Zc.mapValue&&u===Zc.mapValue)return 0;if(l===Zc.mapValue)return 1;if(u===Zc.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),g=u.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let T=0;T<p.length&&T<v.length;++T){const S=Lp(p[T],v[T]);if(S!==0)return S;const R=Ma(d[p[T]],g[v[T]]);if(R!==0)return R}return Le(p.length,v.length)})(n.mapValue,e.mapValue);default:throw be(23264,{le:t})}}function C0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Le(n,e);const t=br(n),s=br(e),o=Le(t.seconds,s.seconds);return o!==0?o:Le(t.nanos,s.nanos)}function I0(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=Ma(t[o],s[o]);if(l)return l}return Le(t.length,s.length)}function Da(n){return qp(n)}function qp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=br(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return xr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ce.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=qp(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const u of s)l?l=!1:o+=",",o+=`${u}:${qp(t.fields[u])}`;return o+"}"})(n.mapValue):be(61005,{value:n})}function cd(n){switch(Nr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=zd(n);return e?16+cd(e):16;case 5:return 2*n.stringValue.length;case 6:return xr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+cd(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let o=0;return Eu(s.fields,((l,u)=>{o+=l.length+cd(u)})),o})(n.mapValue);default:throw be(13486,{value:n})}}function Bp(n){return!!n&&"integerValue"in n}function bm(n){return!!n&&"arrayValue"in n}function w0(n){return!!n&&"nullValue"in n}function R0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function _p(n){return!!n&&"mapValue"in n}function sN(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[tN])===null||t===void 0?void 0:t.stringValue)===iN}function tu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Eu(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=tu(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=tu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function rN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===nN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this.value=e}static empty(){return new Di({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!_p(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tu(t)}setAll(e){let t=_n.emptyPath(),s={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,s,o),s={},o=[],t=d.popLast()}u?s[d.lastSegment()]=tu(u):o.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());_p(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];_p(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Eu(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new Di(tu(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,t,s,o,l,u,d){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=u,this.documentState=d}static newInvalidDocument(e){return new ln(e,0,Re.min(),Re.min(),Re.min(),Di.empty(),0)}static newFoundDocument(e,t,s,o){return new ln(e,1,t,Re.min(),s,o,0)}static newNoDocument(e,t){return new ln(e,2,t,Re.min(),Re.min(),Di.empty(),0)}static newUnknownDocument(e,t){return new ln(e,3,t,Re.min(),Re.min(),Di.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Di.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Di.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,t){this.position=e,this.inclusive=t}}function b0(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const l=e[o],u=n.position[o];if(l.field.isKeyField()?s=Ce.comparator(Ce.fromName(u.referenceValue),t.key):s=Ma(u,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function x0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,t="asc"){this.field=e,this.dir=t}}function oN(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{}class Ft extends XS{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new lN(e,t,s):t==="array-contains"?new dN(e,s):t==="in"?new fN(e,s):t==="not-in"?new hN(e,s):t==="array-contains-any"?new pN(e,s):new Ft(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new uN(e,s):new cN(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ma(t,this.value)):t!==null&&Nr(this.value)===Nr(t)&&this.matchesComparison(Ma(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Oi extends XS{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Oi(e,t)}matches(e){return WS(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function WS(n){return n.op==="and"}function jS(n){return aN(n)&&WS(n)}function aN(n){for(const e of n.filters)if(e instanceof Oi)return!1;return!0}function Fp(n){if(n instanceof Ft)return n.field.canonicalString()+n.op.toString()+Da(n.value);if(jS(n))return n.filters.map((e=>Fp(e))).join(",");{const e=n.filters.map((t=>Fp(t))).join(",");return`${n.op}(${e})`}}function ZS(n,e){return n instanceof Ft?(function(s,o){return o instanceof Ft&&s.op===o.op&&s.field.isEqual(o.field)&&Vi(s.value,o.value)})(n,e):n instanceof Oi?(function(s,o){return o instanceof Oi&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,u,d)=>l&&ZS(u,o.filters[d])),!0):!1})(n,e):void be(19439)}function eA(n){return n instanceof Ft?(function(t){return`${t.field.canonicalString()} ${t.op} ${Da(t.value)}`})(n):n instanceof Oi?(function(t){return t.op.toString()+" {"+t.getFilters().map(eA).join(" ,")+"}"})(n):"Filter"}class lN extends Ft{constructor(e,t,s){super(e,t,s),this.key=Ce.fromName(s.referenceValue)}matches(e){const t=Ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class uN extends Ft{constructor(e,t){super(e,"in",t),this.keys=tA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class cN extends Ft{constructor(e,t){super(e,"not-in",t),this.keys=tA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function tA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((s=>Ce.fromName(s.referenceValue)))}class dN extends Ft{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return bm(t)&&hu(t.arrayValue,this.value)}}class fN extends Ft{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&hu(this.value.arrayValue,t)}}class hN extends Ft{constructor(e,t){super(e,"not-in",t)}matches(e){if(hu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!hu(this.value.arrayValue,t)}}class pN extends Ft{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!bm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>hu(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e,t=null,s=[],o=[],l=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=u,this.endAt=d,this.Pe=null}}function N0(n,e=null,t=[],s=[],o=null,l=null,u=null){return new mN(n,e,t,s,o,l,u)}function xm(n){const e=Ke(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Fp(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Hd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Da(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Da(s))).join(",")),e.Pe=t}return e.Pe}function Nm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!oN(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ZS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!x0(n.startAt,e.startAt)&&x0(n.endAt,e.endAt)}function Hp(n){return Ce.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,t=null,s=[],o=[],l=null,u="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=u,this.startAt=d,this.endAt=p,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function gN(n,e,t,s,o,l,u,d){return new Gd(n,e,t,s,o,l,u,d)}function nA(n){return new Gd(n)}function M0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function yN(n){return n.collectionGroup!==null}function nu(n){const e=Ke(n);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Ht(_n.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new wd(l,s))})),t.has(_n.keyField().canonicalString())||e.Te.push(new wd(_n.keyField(),s))}return e.Te}function Ui(n){const e=Ke(n);return e.Ie||(e.Ie=_N(e,nu(n))),e.Ie}function _N(n,e){if(n.limitType==="F")return N0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new wd(o.field,l)}));const t=n.endAt?new Id(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Id(n.startAt.position,n.startAt.inclusive):null;return N0(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function zp(n,e,t){return new Gd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Jd(n,e){return Nm(Ui(n),Ui(e))&&n.limitType===e.limitType}function iA(n){return`${xm(Ui(n))}|lt:${n.limitType}`}function ma(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>eA(o))).join(", ")}]`),Hd(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>Da(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>Da(o))).join(",")),`Target(${s})`})(Ui(n))}; limitType=${n.limitType})`}function Yd(n,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Ce.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,o){for(const l of nu(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(s,o){return!(s.startAt&&!(function(u,d,p){const g=b0(u,d,p);return u.inclusive?g<=0:g<0})(s.startAt,nu(s),o)||s.endAt&&!(function(u,d,p){const g=b0(u,d,p);return u.inclusive?g>=0:g>0})(s.endAt,nu(s),o))})(n,e)}function vN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function sA(n){return(e,t)=>{let s=!1;for(const o of nu(n)){const l=TN(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function TN(n,e,t){const s=n.field.isKeyField()?Ce.comparator(e.key,t.key):(function(l,u,d){const p=u.data.field(l),g=d.data.field(l);return p!==null&&g!==null?Ma(p,g):be(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return be(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Eu(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return jx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=new Nt(Ce.comparator);function Mr(){return EN}const rA=new Nt(Ce.comparator);function Ql(...n){let e=rA;for(const t of n)e=e.insert(t.key,t);return e}function SN(n){let e=rA;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function mo(){return iu()}function oA(){return iu()}function iu(){return new wo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const AN=new Ht(Ce.comparator);function $e(...n){let e=AN;for(const t of n)e=e.add(t);return e}const CN=new Ht(Le);function IN(){return CN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vp(e)?"-0":e}}function RN(n){return{integerValue:""+n}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(){this._=void 0}}function bN(n,e,t){return n instanceof Gp?(function(o,l){const u={fields:{[KS]:{stringValue:YS},[QS]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Rm(l)&&(l=zd(l)),l&&(u.fields[$S]=l),{mapValue:u}})(t,e):n instanceof Rd?aA(n,e):n instanceof bd?lA(n,e):(function(o,l){const u=NN(o,l),d=D0(u)+D0(o.Ee);return Bp(u)&&Bp(o.Ee)?RN(d):wN(o.serializer,d)})(n,e)}function xN(n,e,t){return n instanceof Rd?aA(n,e):n instanceof bd?lA(n,e):t}function NN(n,e){return n instanceof Jp?(function(s){return Bp(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Gp extends Kd{}class Rd extends Kd{constructor(e){super(),this.elements=e}}function aA(n,e){const t=uA(e);for(const s of n.elements)t.some((o=>Vi(o,s)))||t.push(s);return{arrayValue:{values:t}}}class bd extends Kd{constructor(e){super(),this.elements=e}}function lA(n,e){let t=uA(e);for(const s of n.elements)t=t.filter((o=>!Vi(o,s)));return{arrayValue:{values:t}}}class Jp extends Kd{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function D0(n){return xt(n.integerValue||n.doubleValue)}function uA(n){return bm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function MN(n,e){return n.field.isEqual(e.field)&&(function(s,o){return s instanceof Rd&&o instanceof Rd||s instanceof bd&&o instanceof bd?Na(s.elements,o.elements,Vi):s instanceof Jp&&o instanceof Jp?Vi(s.Ee,o.Ee):s instanceof Gp&&o instanceof Gp})(n.transform,e.transform)}class yo{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new yo}static exists(e){return new yo(void 0,e)}static updateTime(e){return new yo(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Mm{}function cA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new kN(n.key,yo.none()):new Dm(n.key,n.data,yo.none());{const t=n.data,s=Di.empty();let o=new Ht(_n.comparator);for(let l of e.fields)if(!o.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?s.delete(l):s.set(l,u),o=o.add(l)}return new $d(n.key,s,new _r(o.toArray()),yo.none())}}function DN(n,e,t){n instanceof Dm?(function(o,l,u){const d=o.value.clone(),p=P0(o.fieldTransforms,l,u.transformResults);d.setAll(p),l.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof $d?(function(o,l,u){if(!dd(o.precondition,l))return void l.convertToUnknownDocument(u.version);const d=P0(o.fieldTransforms,l,u.transformResults),p=l.data;p.setAll(dA(o)),p.setAll(d),l.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(n,e,t):(function(o,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function su(n,e,t,s){return n instanceof Dm?(function(l,u,d,p){if(!dd(l.precondition,u))return d;const g=l.value.clone(),v=L0(l.fieldTransforms,p,u);return g.setAll(v),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),null})(n,e,t,s):n instanceof $d?(function(l,u,d,p){if(!dd(l.precondition,u))return d;const g=L0(l.fieldTransforms,p,u),v=u.data;return v.setAll(dA(l)),v.setAll(g),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(n,e,t,s):(function(l,u,d){return dd(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function k0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Na(s,o,((l,u)=>MN(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Dm extends Mm{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class $d extends Mm{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function dA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function P0(n,e,t){const s=new Map;vt(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let o=0;o<t.length;o++){const l=n[o],u=l.transform,d=e.data.field(l.field);s.set(l.field,xN(u,d,t[o]))}return s}function L0(n,e,t){const s=new Map;for(const o of n){const l=o.transform,u=t.data.field(o.field);s.set(o.field,bN(l,u,e))}return s}class kN extends Mm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&DN(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=su(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=su(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=oA();return this.mutations.forEach((o=>{const l=e.get(o.key),u=l.overlayedDocument;let d=this.applyToLocalView(u,l.mutatedFields);d=t.has(o.key)?null:d;const p=cA(u,d);p!==null&&s.set(o.key,p),u.isValidDocument()||u.convertToNoDocument(Re.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),$e())}isEqual(e){return this.batchId===e.batchId&&Na(this.mutations,e.mutations,((t,s)=>k0(t,s)))&&Na(this.baseMutations,e.baseMutations,((t,s)=>k0(t,s)))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,Ye;function fA(n){if(n===void 0)return _s("GRPC error has no .code"),ue.UNKNOWN;switch(n){case Vt.OK:return ue.OK;case Vt.CANCELLED:return ue.CANCELLED;case Vt.UNKNOWN:return ue.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return ue.INTERNAL;case Vt.UNAVAILABLE:return ue.UNAVAILABLE;case Vt.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Vt.NOT_FOUND:return ue.NOT_FOUND;case Vt.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Vt.ABORTED:return ue.ABORTED;case Vt.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Vt.DATA_LOSS:return ue.DATA_LOSS;default:return be(39323,{code:n})}}(Ye=Vt||(Vt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=new Sr([4294967295,4294967295],0);function U0(n){const e=HS().encode(n),t=new PS;return t.update(e),new Uint8Array(t.digest())}function V0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Sr([t,s],0),new Sr([o,l],0)]}class km{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Xl(`Invalid padding: ${t}`);if(s<0)throw new Xl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Xl(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Xl(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Sr.fromNumber(this.fe)}pe(e,t,s){let o=e.add(t.multiply(Sr.fromNumber(s)));return o.compare(VN)===1&&(o=new Sr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=U0(e),[s,o]=V0(t);for(let l=0;l<this.hashCount;l++){const u=this.pe(s,o,l);if(!this.ye(u))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new km(l,o,t);return s.forEach((d=>u.insert(d))),u}insert(e){if(this.fe===0)return;const t=U0(e),[s,o]=V0(t);for(let l=0;l<this.hashCount;l++){const u=this.pe(s,o,l);this.we(u)}}we(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Xl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Su.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Qd(Re.min(),o,new Nt(Le),Mr(),$e())}}class Su{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Su(s,t,$e(),$e(),$e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,t,s,o){this.Se=e,this.removedTargetIds=t,this.key=s,this.be=o}}class hA{constructor(e,t){this.targetId=e,this.De=t}}class pA{constructor(e,t,s=tn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class O0{constructor(){this.ve=0,this.Ce=q0(),this.Fe=tn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=$e(),t=$e(),s=$e();return this.Ce.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:be(38017,{changeType:l})}})),new Su(this.Fe,this.Me,e,t,s)}ke(){this.xe=!1,this.Ce=q0()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,vt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class ON{constructor(e){this.We=e,this.Ge=new Map,this.ze=Mr(),this.je=ed(),this.Je=ed(),this.He=new Nt(Le)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const s=this.tt(t);switch(e.state){case 0:this.nt(t)&&s.Be(e.resumeToken);break;case 1:s.Ue(),s.Oe||s.ke(),s.Be(e.resumeToken);break;case 2:s.Ue(),s.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(s.Ke(),s.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),s.Be(e.resumeToken));break;default:be(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((s,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,s=e.De.count,o=this.st(t);if(o){const l=o.target;if(Hp(l))if(s===0){const u=new Ce(l.path);this.Xe(t,u,ln.newNoDocument(u,Re.min()))}else vt(s===1,20013,{expectedCount:s});else{const u=this.ot(t);if(u!==s){const d=this._t(e),p=d?this.ut(d,e,u):1;if(p!==0){this.rt(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,g)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let u,d;try{u=xr(s).toUint8Array()}catch(p){if(p instanceof JS)return wr("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new km(u,o,l)}catch(p){return wr(p instanceof Xl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.fe===0?null:d}ut(e,t,s){return t.De.count===s-this.ht(e,t.targetId)?0:2}ht(e,t){const s=this.We.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const u=this.We.lt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,l,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((l,u)=>{const d=this.st(u);if(d){if(l.current&&Hp(d.target)){const p=new Ce(d.target.path);this.Tt(p).has(u)||this.It(u,p)||this.Xe(u,p,ln.newNoDocument(p,e))}l.Ne&&(t.set(u,l.Le()),l.ke())}}));let s=$e();this.Je.forEach(((l,u)=>{let d=!0;u.forEachWhile((p=>{const g=this.st(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(s=s.add(l))})),this.ze.forEach(((l,u)=>u.setReadTime(e)));const o=new Qd(e,t,this.He,this.ze,s);return this.ze=Mr(),this.je=ed(),this.Je=ed(),this.He=new Nt(Le),o}Ze(e,t){if(!this.nt(e))return;const s=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,s),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,s){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),s&&(this.ze=this.ze.insert(t,s))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new O0,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ht(Le),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ht(Le),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new O0),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function ed(){return new Nt(Ce.comparator)}function q0(){return new Nt(Ce.comparator)}const qN={asc:"ASCENDING",desc:"DESCENDING"},BN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FN={and:"AND",or:"OR"};class HN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Yp(n,e){return n.useProto3Json||Hd(e)?e:{value:e}}function zN(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Sa(n){return vt(!!n,49232),Re.fromTimestamp((function(t){const s=br(t);return new Ot(s.seconds,s.nanos)})(n))}function JN(n,e){return Kp(n,e).canonicalString()}function Kp(n,e){const t=(function(o){return new _t(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function mA(n){const e=_t.fromString(n);return vt(TA(e),10190,{key:e.toString()}),e}function vp(n,e){const t=mA(e);if(t.get(1)!==n.databaseId.projectId)throw new Te(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Te(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ce(yA(t))}function gA(n,e){return JN(n.databaseId,e)}function YN(n){const e=mA(n);return e.length===4?_t.emptyPath():yA(e)}function B0(n){return new _t(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function yA(n){return vt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function KN(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:be(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(g,v){return g.useProto3Json?(vt(v===void 0||typeof v=="string",58123),tn.fromBase64String(v||"")):(vt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),tn.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(g){const v=g.code===void 0?ue.UNKNOWN:fA(g.code);return new Te(v,g.message||"")})(u);t=new pA(s,o,l,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=vp(n,s.document.name),l=Sa(s.document.updateTime),u=s.document.createTime?Sa(s.document.createTime):Re.min(),d=new Di({mapValue:{fields:s.document.fields}}),p=ln.newFoundDocument(o,l,u,d),g=s.targetIds||[],v=s.removedTargetIds||[];t=new fd(g,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=vp(n,s.document),l=s.readTime?Sa(s.readTime):Re.min(),u=ln.newNoDocument(o,l),d=s.removedTargetIds||[];t=new fd([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=vp(n,s.document),l=s.removedTargetIds||[];t=new fd([],l,o,null)}else{if(!("filter"in e))return be(11601,{At:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,u=new UN(o,l),d=s.targetId;t=new hA(d,u)}}return t}function $N(n,e){return{documents:[gA(n,e.path)]}}function QN(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=gA(n,o);const l=(function(g){if(g.length!==0)return vA(Oi.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(g){if(g.length!==0)return g.map((v=>(function(S){return{field:ga(S.field),direction:jN(S.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=Yp(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{Vt:t,parent:o}}function XN(n){let e=YN(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){vt(s===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(T){const S=_A(T);return S instanceof Oi&&jS(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(T){return T.map((S=>(function(q){return new wd(ya(q.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let S;return S=typeof T=="object"?T.value:T,Hd(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(T){const S=!!T.before,R=T.values||[];return new Id(R,S)})(t.startAt));let g=null;return t.endAt&&(g=(function(T){const S=!T.before,R=T.values||[];return new Id(R,S)})(t.endAt)),gN(e,o,u,l,d,"F",p,g)}function WN(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _A(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=ya(t.unaryFilter.field);return Ft.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=ya(t.unaryFilter.field);return Ft.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ya(t.unaryFilter.field);return Ft.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ya(t.unaryFilter.field);return Ft.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return be(61313);default:return be(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ft.create(ya(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return be(58110);default:return be(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Oi.create(t.compositeFilter.filters.map((s=>_A(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return be(1026)}})(t.compositeFilter.op))})(n):be(30097,{filter:n})}function jN(n){return qN[n]}function ZN(n){return BN[n]}function e2(n){return FN[n]}function ga(n){return{fieldPath:n.canonicalString()}}function ya(n){return _n.fromServerFormat(n.fieldPath)}function vA(n){return n instanceof Ft?(function(t){if(t.op==="=="){if(R0(t.value))return{unaryFilter:{field:ga(t.field),op:"IS_NAN"}};if(w0(t.value))return{unaryFilter:{field:ga(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(R0(t.value))return{unaryFilter:{field:ga(t.field),op:"IS_NOT_NAN"}};if(w0(t.value))return{unaryFilter:{field:ga(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ga(t.field),op:ZN(t.op),value:t.value}}})(n):n instanceof Oi?(function(t){const s=t.getFilters().map((o=>vA(o)));return s.length===1?s[0]:{compositeFilter:{op:e2(t.op),filters:s}}})(n):be(54877,{filter:n})}function TA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,t,s,o,l=Re.min(),u=Re.min(),d=tn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new vr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e){this.gt=e}}function n2(n){const e=XN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?zp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(){this.Dn=new s2}addToCollectionParentIndex(e,t){return this.Dn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Rr.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Rr.min())}updateCollectionGroup(e,t,s){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class s2{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Ht(_t.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Ht(_t.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},EA=41943040;class Rn{static withCacheSize(e){return new Rn(e,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rn.DEFAULT_COLLECTION_PERCENTILE=10,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rn.DEFAULT=new Rn(EA,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rn.DISABLED=new Rn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new ka(0)}static ur(){return new ka(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="LruGarbageCollector",r2=1048576;function z0([n,e],[t,s]){const o=Le(n,t);return o===0?Le(e,s):o}class o2{constructor(e){this.Tr=e,this.buffer=new Ht(z0),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();z0(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class a2{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){pe(H0,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Oa(t)?pe(H0,"Ignoring IndexedDB error during garbage collection: ",t):await Bd(t)}await this.Rr(3e5)}))}}class l2{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(Fd.ue);const s=new o2(t);return this.Vr.forEachTarget(e,(o=>s.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>s.Er(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(F0)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),F0):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let s,o,l,u,d,p,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,u=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(s=T,d=Date.now(),this.removeTargets(e,s,t)))).next((T=>(l=T,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(g=Date.now(),pa()<=Fe.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${T} documents in `+(g-p)+`ms
Total Duration: ${g-v}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T}))))}}function u2(n,e){return new l2(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(){this.changes=new wo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ln.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?se.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&su(s.mutation,o,_r.empty(),Ot.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,$e()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=$e()){const o=mo();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let u=Ql();return l.forEach(((d,p)=>{u=u.insert(d,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const s=mo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,$e())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,s,o){let l=Mr();const u=iu(),d=(function(){return iu()})();return t.forEach(((p,g)=>{const v=s.get(g.key);o.has(g.key)&&(v===void 0||v.mutation instanceof $d)?l=l.insert(g.key,g):v!==void 0?(u.set(g.key,v.mutation.getFieldMask()),su(v.mutation,g,v.mutation.getFieldMask(),Ot.now())):u.set(g.key,_r.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,v)=>u.set(g,v))),t.forEach(((g,v)=>{var T;return d.set(g,new d2(v,(T=u.get(g))!==null&&T!==void 0?T:null))})),d)))}recalculateAndSaveOverlays(e,t){const s=iu();let o=new Nt(((u,d)=>u-d)),l=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let v=s.get(p)||_r.empty();v=d.applyToLocalView(g,v),s.set(p,v);const T=(o.get(d.batchId)||$e()).add(p);o=o.insert(d.batchId,T)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,v=p.value,T=oA();v.forEach((S=>{if(!l.has(S)){const R=cA(t.get(S),s.get(S));R!==null&&T.set(S,R),l=l.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,g,T))}return se.waitFor(u)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(u){return Ce.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):yN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const u=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):se.resolve(mo());let d=cu,p=l;return u.next((g=>se.forEach(g,((v,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(v)?se.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{p=p.insert(v,S)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,$e()))).next((v=>({batchId:d,changes:SN(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ce(t)).next((s=>{let o=Ql();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let u=Ql();return this.indexManager.getCollectionParents(e,l).next((d=>se.forEach(d,(p=>{const g=(function(T,S){return new Gd(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next((v=>{v.forEach(((T,S)=>{u=u.insert(T,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((u=>{l.forEach(((p,g)=>{const v=g.getKey();u.get(v)===null&&(u=u.insert(v,ln.newInvalidDocument(v)))}));let d=Ql();return u.forEach(((p,g)=>{const v=l.get(p);v!==void 0&&su(v.mutation,g,_r.empty(),Ot.now()),Yd(t,g)&&(d=d.insert(p,g))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return se.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Sa(o.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:n2(o.bundledQuery),readTime:Sa(o.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(){this.overlays=new Nt(Ce.comparator),this.kr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const s=mo();return se.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.wt(e,t,l)})),se.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.kr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(s)),se.resolve()}getOverlaysForCollection(e,t,s){const o=mo(),l=t.length+1,u=new Ce(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>s&&o.set(p.getKey(),p)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new Nt(((g,v)=>g-v));const u=this.overlays.getIterator();for(;u.hasNext();){const g=u.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>s){let v=l.get(g.largestBatchId);v===null&&(v=mo(),l=l.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const d=mo(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,v)=>d.set(g,v))),!(d.size()>=o)););return se.resolve(d)}wt(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const u=this.kr.get(o.largestBatchId).delete(s.key);this.kr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new LN(t,s));let l=this.kr.get(t);l===void 0&&(l=$e(),this.kr.set(t,l)),this.kr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(){this.sessionToken=tn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(){this.qr=new Ht(Kt.Qr),this.$r=new Ht(Kt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const s=new Kt(e,t);this.qr=this.qr.add(s),this.$r=this.$r.add(s)}Kr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new Kt(e,t))}Gr(e,t){e.forEach((s=>this.removeReference(s,t)))}zr(e){const t=new Ce(new _t([])),s=new Kt(t,e),o=new Kt(t,e+1),l=[];return this.$r.forEachInRange([s,o],(u=>{this.Wr(u),l.push(u.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Ce(new _t([])),s=new Kt(t,e),o=new Kt(t,e+1);let l=$e();return this.$r.forEachInRange([s,o],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new Kt(e,0),s=this.qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Kt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Ce.comparator(e.key,t.key)||Le(e.Hr,t.Hr)}static Ur(e,t){return Le(e.Hr,t.Hr)||Ce.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ht(Kt.Qr)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new PN(l,t,s,o);this.mutationQueue.push(u);for(const d of o)this.Yr=this.Yr.add(new Kt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,t){return se.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Xr(s),l=o<0?0:o;return se.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?Qx:this.er-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Kt(t,0),o=new Kt(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([s,o],(u=>{const d=this.Zr(u.Hr);l.push(d)})),se.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ht(Le);return t.forEach((o=>{const l=new Kt(o,0),u=new Kt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,u],(d=>{s=s.add(d.Hr)}))})),se.resolve(this.ei(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;Ce.isDocumentKey(l)||(l=l.child(""));const u=new Kt(new Ce(l),0);let d=new Ht(Le);return this.Yr.forEachWhile((p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(d=d.add(p.Hr)),!0)}),u),se.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((s=>{const o=this.Zr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){vt(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Yr;return se.forEach(t.mutations,(o=>{const l=new Kt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=s}))}rr(e){}containsKey(e,t){const s=new Kt(t,0),o=this.Yr.firstAfterOrEqual(s);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e){this.ni=e,this.docs=(function(){return new Nt(Ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,u=this.ni(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return se.resolve(s?s.document.mutableCopy():ln.newInvalidDocument(t))}getEntries(e,t){let s=Mr();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():ln.newInvalidDocument(o))})),se.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=Mr();const u=t.path,d=new Ce(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!u.isPrefixOf(g.path))break;g.path.length>u.length+1||Jx(Gx(v),s)<=0||(o.has(v.key)||Yd(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return se.resolve(l)}getAllFromCollectionGroup(e,t,s,o){be(9500)}ri(e,t){return se.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new _2(this)}getSize(e){return se.resolve(this.size)}}class _2 extends c2{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(s)})),se.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e){this.persistence=e,this.ii=new wo((t=>xm(t)),Nm),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.si=0,this.oi=new Pm,this.targetCount=0,this._i=ka.ar()}forEachTarget(e,t){return this.ii.forEach(((s,o)=>t(o))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.si&&(this.si=t),se.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new ka(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.hr(t),se.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.ii.forEach(((u,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.ii.delete(u),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),se.waitFor(l).next((()=>o))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const s=this.ii.get(t)||null;return se.resolve(s)}addMatchingKeys(e,t,s){return this.oi.Kr(t,s),se.resolve()}removeMatchingKeys(e,t,s){this.oi.Gr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((u=>{l.push(o.markPotentiallyOrphaned(e,u))})),se.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const s=this.oi.Jr(t);return se.resolve(s)}containsKey(e,t){return se.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,t){this.ai={},this.overlays={},this.ui=new Fd(0),this.ci=!1,this.ci=!0,this.li=new m2,this.referenceDelegate=e(this),this.hi=new v2(this),this.indexManager=new i2,this.remoteDocumentCache=(function(o){return new y2(o)})((s=>this.referenceDelegate.Pi(s))),this.serializer=new t2(t),this.Ti=new h2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new p2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ai[e.toKey()];return s||(s=new g2(t,this.referenceDelegate),this.ai[e.toKey()]=s),s}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,s){pe("MemoryPersistence","Starting transaction:",e);const o=new T2(this.ui.next());return this.referenceDelegate.Ii(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return se.or(Object.values(this.ai).map((s=>()=>s.containsKey(e,t))))}}class T2 extends Kx{constructor(e){super(),this.currentSequenceNumber=e}}class Lm{constructor(e){this.persistence=e,this.Ai=new Pm,this.Ri=null}static Vi(e){return new Lm(e)}get mi(){if(this.Ri)return this.Ri;throw be(60996)}addReference(e,t,s){return this.Ai.addReference(s,t),this.mi.delete(s.toString()),se.resolve()}removeReference(e,t,s){return this.Ai.removeReference(s,t),this.mi.add(s.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.mi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.mi,(s=>{const o=Ce.fromPath(s);return this.fi(e,o).next((l=>{l||t.removeEntry(o,Re.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((s=>{s?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return se.or([()=>se.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class xd{constructor(e,t){this.persistence=e,this.gi=new wo((s=>Xx(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=u2(this,t)}static Vi(e,t){return new xd(e,t)}Ii(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}yr(e){let t=0;return this.gr(e,(s=>{t++})).next((()=>t))}gr(e,t){return se.forEach(this.gi,((s,o)=>this.Sr(e,s,o).next((l=>l?se.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,(u=>this.Sr(e,u,t).next((d=>{d||(s++,l.removeEntry(u,Re.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),se.resolve()}removeReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),se.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=cd(e.data.value)),t}Sr(e,t,s){return se.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return se.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Is=s,this.ds=o}static Es(e,t){let s=$e(),o=$e();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Um(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return Qw()?8:$x(cn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ps(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ys(e,t,o,s).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new E2;return this.ws(e,t,u).next((d=>{if(l.result=d,this.Rs)return this.Ss(e,t,u,d.size)}))})).next((()=>l.result))}Ss(e,t,s,o){return s.documentReadCount<this.Vs?(pa()<=Fe.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",ma(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),se.resolve()):(pa()<=Fe.DEBUG&&pe("QueryEngine","Query:",ma(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.fs*o?(pa()<=Fe.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",ma(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ui(t))):se.resolve())}ps(e,t){if(M0(t))return se.resolve(null);let s=Ui(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=zp(t,null,"F"),s=Ui(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const u=$e(...l);return this.gs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,s).next((p=>{const g=this.bs(t,d);return this.Ds(t,g,u,p.readTime)?this.ps(e,zp(t,null,"F")):this.vs(e,g,t,p)}))))})))))}ys(e,t,s,o){return M0(t)||o.isEqual(Re.min())?se.resolve(null):this.gs.getDocuments(e,s).next((l=>{const u=this.bs(t,l);return this.Ds(t,u,s,o)?se.resolve(null):(pa()<=Fe.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ma(t)),this.vs(e,u,t,zx(o,cu)).next((d=>d)))}))}bs(e,t){let s=new Ht(sA(e));return t.forEach(((o,l)=>{Yd(e,l)&&(s=s.add(l))})),s}Ds(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,s){return pa()<=Fe.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",ma(t)),this.gs.getDocumentsMatchingQuery(e,t,Rr.min(),s)}vs(e,t,s,o){return this.gs.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="LocalStore",A2=3e8;class C2{constructor(e,t,s,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new Nt(Le),this.Ms=new wo((l=>xm(l)),Nm),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(s)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new f2(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function I2(n,e,t,s){return new C2(n,e,t,s)}async function AA(n,e){const t=Ke(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const u=[],d=[];let p=$e();for(const g of o){u.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of l){d.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(s,p).next((g=>({Bs:g,removedBatchIds:u,addedBatchIds:d})))}))}))}function CA(n){const e=Ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function w2(n,e){const t=Ke(n),s=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const d=[];e.targetChanges.forEach(((v,T)=>{const S=o.get(T);if(!S)return;d.push(t.hi.removeMatchingKeys(l,v.removedDocuments,T).next((()=>t.hi.addMatchingKeys(l,v.addedDocuments,T))));let R=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?R=R.withResumeToken(tn.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):v.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(v.resumeToken,s)),o=o.insert(T,R),(function(z,F,ne){return z.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=A2?!0:ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0})(S,R,v)&&d.push(t.hi.updateTargetData(l,R))}));let p=Mr(),g=$e();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(R2(l,u,e.documentUpdates).next((v=>{p=v.Ls,g=v.ks}))),!s.isEqual(Re.min())){const v=t.hi.getLastRemoteSnapshotVersion(l).next((T=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,s)));d.push(v)}return se.waitFor(d).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.Fs=o,l)))}function R2(n,e,t){let s=$e(),o=$e();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let u=Mr();return t.forEach(((d,p)=>{const g=l.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(Re.min())?(e.removeEntry(d,p.readTime),u=u.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),u=u.insert(d,p)):pe(Vm,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)})),{Ls:u,ks:o}}))}function b2(n,e){const t=Ke(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.hi.getTargetData(s,e).next((l=>l?(o=l,se.resolve(o)):t.hi.allocateTargetId(s).next((u=>(o=new vr(e,u,"TargetPurposeListen",s.currentSequenceNumber),t.hi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Fs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(s.targetId,s),t.Ms.set(e,s.targetId)),s}))}async function $p(n,e,t){const s=Ke(n),o=s.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(u=>s.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!Oa(u))throw u;pe(Vm,`Failed to update sequence numbers for target ${e}: ${u}`)}s.Fs=s.Fs.remove(e),s.Ms.delete(o.target)}function G0(n,e,t){const s=Ke(n);let o=Re.min(),l=$e();return s.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,g,v){const T=Ke(p),S=T.Ms.get(v);return S!==void 0?se.resolve(T.Fs.get(S)):T.hi.getTargetData(g,v)})(s,u,Ui(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,s.hi.getMatchingKeysForTargetId(u,d.targetId).next((p=>{l=p}))})).next((()=>s.Cs.getDocumentsMatchingQuery(u,e,t?o:Re.min(),t?l:$e()))).next((d=>(x2(s,vN(e),d),{documents:d,qs:l})))))}function x2(n,e,t){let s=n.xs.get(e)||Re.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.xs.set(e,s)}class J0{constructor(){this.activeTargetIds=IN()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class N2{constructor(){this.Fo=new J0,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,s){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new J0,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="ConnectivityMonitor";class K0{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){pe(Y0,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){pe(Y0,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let td=null;function Qp(){return td===null?td=(function(){return 268435456+Math.round(2147483648*Math.random())})():td++,"0x"+td.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp="RestConnection",D2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class k2{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.Ko=this.databaseId.database===Cd?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,t,s,o,l){const u=Qp(),d=this.Go(e,t.toUriEncodedString());pe(Tp,`Sending RPC '${e}' ${u}:`,d,s);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(p,o,l);const{host:g}=new URL(d),v=kr(g);return this.jo(e,d,p,s,v).then((T=>(pe(Tp,`Received RPC '${e}' ${u}: `,T),T)),(T=>{throw wr(Tp,`RPC '${e}' ${u} failed with error: `,T,"url: ",d,"request:",s),T}))}Jo(e,t,s,o,l,u){return this.Wo(e,t,s,o,l)}zo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Va})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}Go(e,t){const s=D2[e];return`${this.$o}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="WebChannelConnection";class L2 extends k2{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,s,o,l){const u=Qp();return new Promise(((d,p)=>{const g=new LS;g.setWithCredentials(!0),g.listenOnce(US.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case ud.NO_ERROR:const T=g.getResponseJson();pe(on,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),d(T);break;case ud.TIMEOUT:pe(on,`RPC '${e}' ${u} timed out`),p(new Te(ue.DEADLINE_EXCEEDED,"Request time out"));break;case ud.HTTP_ERROR:const S=g.getStatus();if(pe(on,`RPC '${e}' ${u} failed with status:`,S,"response text:",g.getResponseText()),S>0){let R=g.getResponseJson();Array.isArray(R)&&(R=R[0]);const q=R==null?void 0:R.error;if(q&&q.status&&q.message){const z=(function(ne){const K=ne.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(K)>=0?K:ue.UNKNOWN})(q.status);p(new Te(z,q.message))}else p(new Te(ue.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new Te(ue.UNAVAILABLE,"Connection failed."));break;default:be(9055,{c_:e,streamId:u,l_:g.getLastErrorCode(),h_:g.getLastError()})}}finally{pe(on,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(o);pe(on,`RPC '${e}' ${u} sending request:`,o),g.send(t,"POST",v,s,15)}))}P_(e,t,s){const o=Qp(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=qS(),d=OS(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.zo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const v=l.join("");pe(on,`Creating RPC '${e}' stream ${o}: ${v}`,p);const T=u.createWebChannel(v,p);this.T_(T);let S=!1,R=!1;const q=new P2({Ho:F=>{R?pe(on,`Not sending because RPC '${e}' stream ${o} is closed:`,F):(S||(pe(on,`Opening RPC '${e}' stream ${o} transport.`),T.open(),S=!0),pe(on,`RPC '${e}' stream ${o} sending:`,F),T.send(F))},Yo:()=>T.close()}),z=(F,ne,K)=>{F.listen(ne,(W=>{try{K(W)}catch(ie){setTimeout((()=>{throw ie}),0)}}))};return z(T,$l.EventType.OPEN,(()=>{R||(pe(on,`RPC '${e}' stream ${o} transport opened.`),q.s_())})),z(T,$l.EventType.CLOSE,(()=>{R||(R=!0,pe(on,`RPC '${e}' stream ${o} transport closed`),q.__(),this.I_(T))})),z(T,$l.EventType.ERROR,(F=>{R||(R=!0,wr(on,`RPC '${e}' stream ${o} transport errored. Name:`,F.name,"Message:",F.message),q.__(new Te(ue.UNAVAILABLE,"The operation could not be completed")))})),z(T,$l.EventType.MESSAGE,(F=>{var ne;if(!R){const K=F.data[0];vt(!!K,16349);const W=K,ie=(W==null?void 0:W.error)||((ne=W[0])===null||ne===void 0?void 0:ne.error);if(ie){pe(on,`RPC '${e}' stream ${o} received error:`,ie);const de=ie.status;let le=(function(x){const L=Vt[x];if(L!==void 0)return fA(L)})(de),D=ie.message;le===void 0&&(le=ue.INTERNAL,D="Unknown error status: "+de+" with message "+ie.message),R=!0,q.__(new Te(le,D)),T.close()}else pe(on,`RPC '${e}' stream ${o} received:`,K),q.a_(K)}})),z(d,VS.STAT_EVENT,(F=>{F.stat===Pp.PROXY?pe(on,`RPC '${e}' stream ${o} detected buffering proxy`):F.stat===Pp.NOPROXY&&pe(on,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{q.o_()}),0),q}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function Ep(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(n){return new HN(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=s,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-s);o>0&&pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0="PersistentStream";class U2{constructor(e,t,s,o,l,u,d,p){this.Fi=e,this.w_=s,this.S_=o,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new wA(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(_s(t.toString()),_s("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.b_===t&&this.W_(s,o)}),(s=>{e((()=>{const o=new Te(ue.UNKNOWN,"Fetching auth token failed: "+s.message);return this.G_(o)}))}))}W_(e,t){const s=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.e_((()=>{s((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{s((()=>this.G_(o)))})),this.stream.onMessage((o=>{s((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return pe($0,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(pe($0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class V2 extends U2{constructor(e,t,s,o,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,u),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=KN(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Re.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Re.min():u.readTime?Sa(u.readTime):Re.min()})(e);return this.listener.J_(t,s)}H_(e){const t={};t.database=B0(this.serializer),t.addTarget=(function(l,u){let d;const p=u.target;if(d=Hp(p)?{documents:$N(l,p)}:{query:QN(l,p).Vt},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=GN(l,u.resumeToken);const g=Yp(l,u.expectedCount);g!==null&&(d.expectedCount=g)}else if(u.snapshotVersion.compareTo(Re.min())>0){d.readTime=zN(l,u.snapshotVersion.toTimestamp());const g=Yp(l,u.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const s=WN(this.serializer,e);s&&(t.labels=s),this.k_(t)}Y_(e){const t={};t.database=B0(this.serializer),t.removeTarget=e,this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{}class q2 extends O2{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new Te(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Wo(e,Kp(t,s),o,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Te(ue.UNKNOWN,l.toString())}))}Jo(e,t,s,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Jo(e,Kp(t,s),o,u,d,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Te(ue.UNKNOWN,u.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class B2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(_s(t),this._a=!1):pe("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa="RemoteStore";class F2{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((u=>{s.enqueueAndForget((async()=>{Cu(this)&&(pe(Pa,"Restarting streams for network reachability change."),await(async function(p){const g=Ke(p);g.Ia.add(4),await Au(g),g.Aa.set("Unknown"),g.Ia.delete(4),await Xd(g)})(this))}))})),this.Aa=new B2(s,o)}}async function Xd(n){if(Cu(n))for(const e of n.da)await e(!0)}async function Au(n){for(const e of n.da)await e(!1)}function RA(n,e){const t=Ke(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Fm(t)?Bm(t):qa(t).x_()&&qm(t,e))}function Om(n,e){const t=Ke(n),s=qa(t);t.Ta.delete(e),s.x_()&&bA(t,e),t.Ta.size===0&&(s.x_()?s.B_():Cu(t)&&t.Aa.set("Unknown"))}function qm(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}qa(n).H_(e)}function bA(n,e){n.Ra.$e(e),qa(n).Y_(e)}function Bm(n){n.Ra=new ON({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),qa(n).start(),n.Aa.aa()}function Fm(n){return Cu(n)&&!qa(n).M_()&&n.Ta.size>0}function Cu(n){return Ke(n).Ia.size===0}function xA(n){n.Ra=void 0}async function H2(n){n.Aa.set("Online")}async function z2(n){n.Ta.forEach(((e,t)=>{qm(n,e)}))}async function G2(n,e){xA(n),Fm(n)?(n.Aa.la(e),Bm(n)):n.Aa.set("Unknown")}async function J2(n,e,t){if(n.Aa.set("Online"),e instanceof pA&&e.state===2&&e.cause)try{await(async function(o,l){const u=l.cause;for(const d of l.targetIds)o.Ta.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.Ta.delete(d),o.Ra.removeTarget(d))})(n,e)}catch(s){pe(Pa,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Q0(n,s)}else if(e instanceof fd?n.Ra.Ye(e):e instanceof hA?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Re.min()))try{const s=await CA(n.localStore);t.compareTo(s)>=0&&await(function(l,u){const d=l.Ra.Pt(u);return d.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ta.get(g);v&&l.Ta.set(g,v.withResumeToken(p.resumeToken,u))}})),d.targetMismatches.forEach(((p,g)=>{const v=l.Ta.get(p);if(!v)return;l.Ta.set(p,v.withResumeToken(tn.EMPTY_BYTE_STRING,v.snapshotVersion)),bA(l,p);const T=new vr(v.target,p,g,v.sequenceNumber);qm(l,T)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(s){pe(Pa,"Failed to raise snapshot:",s),await Q0(n,s)}}async function Q0(n,e,t){if(!Oa(e))throw e;n.Ia.add(1),await Au(n),n.Aa.set("Offline"),t||(t=()=>CA(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{pe(Pa,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Xd(n)}))}async function X0(n,e){const t=Ke(n);t.asyncQueue.verifyOperationInProgress(),pe(Pa,"RemoteStore received new credentials");const s=Cu(t);t.Ia.add(3),await Au(t),s&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Xd(t)}async function Y2(n,e){const t=Ke(n);e?(t.Ia.delete(2),await Xd(t)):e||(t.Ia.add(2),await Au(t),t.Aa.set("Unknown"))}function qa(n){return n.Va||(n.Va=(function(t,s,o){const l=Ke(t);return l.ia(),new V2(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:H2.bind(null,n),e_:z2.bind(null,n),n_:G2.bind(null,n),J_:J2.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),Fm(n)?Bm(n):n.Aa.set("Unknown")):(await n.Va.stop(),xA(n))}))),n.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new go,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const u=Date.now()+s,d=new Hm(e,t,u,o,l);return d.start(s),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function NA(n,e){if(_s("AsyncQueue",`${e}: ${n}`),Oa(n))return new Te(ue.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{static emptySet(e){return new Aa(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ce.comparator(t.key,s.key):(t,s)=>Ce.comparator(t.key,s.key),this.keyedMap=Ql(),this.sortedSet=new Nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Aa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Aa;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(){this.fa=new Nt(Ce.comparator)}track(e){const t=e.doc.key,s=this.fa.get(t);s?e.type!==0&&s.type===3?this.fa=this.fa.insert(t,e):e.type===3&&s.type!==1?this.fa=this.fa.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.fa=this.fa.remove(t):e.type===1&&s.type===2?this.fa=this.fa.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):be(63341,{At:e,ga:s}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,s)=>{e.push(s)})),e}}class La{constructor(e,t,s,o,l,u,d,p,g){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,s,o,l){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new La(e,t,Aa.emptySet(t),u,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class $2{constructor(){this.queries=j0(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,s){const o=Ke(t),l=o.queries;o.queries=j0(),l.forEach(((u,d)=>{for(const p of d.wa)p.onError(s)}))})(this,new Te(ue.ABORTED,"Firestore shutting down"))}}function j0(){return new wo((n=>iA(n)),Jd)}async function Q2(n,e){const t=Ke(n);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(s=2):(l=new K2,s=e.ba()?0:1);try{switch(s){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=NA(u,`Initialization of query '${ma(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&zm(t)}async function X2(n,e){const t=Ke(n),s=e.query;let o=3;const l=t.queries.get(s);if(l){const u=l.wa.indexOf(e);u>=0&&(l.wa.splice(u,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function W2(n,e){const t=Ke(n);let s=!1;for(const o of e){const l=o.query,u=t.queries.get(l);if(u){for(const d of u.wa)d.Ca(o)&&(s=!0);u.ya=o}}s&&zm(t)}function j2(n,e,t){const s=Ke(n),o=s.queries.get(e);if(o)for(const l of o.wa)l.onError(t);s.queries.delete(e)}function zm(n){n.Da.forEach((e=>{e.next()}))}var Xp,Z0;(Z0=Xp||(Xp={})).Fa="default",Z0.Cache="cache";class Z2{constructor(e,t,s){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=s||{}}Ca(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new La(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const s=t!=="Offline";return(!this.options.ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=La.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Xp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e){this.key=e}}class DA{constructor(e){this.key=e}}class eM{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=$e(),this.mutatedKeys=$e(),this.Xa=sA(e),this.eu=new Aa(this.Xa)}get tu(){return this.Ha}nu(e,t){const s=t?t.ru:new W0,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,T)=>{const S=o.get(v),R=Yd(this.query,T)?T:null,q=!!S&&this.mutatedKeys.has(S.key),z=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let F=!1;S&&R?S.data.isEqual(R.data)?q!==z&&(s.track({type:3,doc:R}),F=!0):this.iu(S,R)||(s.track({type:2,doc:R}),F=!0,(p&&this.Xa(R,p)>0||g&&this.Xa(R,g)<0)&&(d=!0)):!S&&R?(s.track({type:0,doc:R}),F=!0):S&&!R&&(s.track({type:1,doc:S}),F=!0,(p||g)&&(d=!0)),F&&(R?(u=u.add(R),l=z?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{eu:u,ru:s,Ds:d,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort(((v,T)=>(function(R,q){const z=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be(20277,{At:F})}};return z(R)-z(q)})(v.type,T.type)||this.Xa(v.doc,T.doc))),this.su(s),o=o!=null&&o;const d=t&&!o?this.ou():[],p=this.Za.size===0&&this.current&&!o?1:0,g=p!==this.Ya;return this.Ya=p,u.length!==0||g?{snapshot:new La(this.query,e.eu,l,u,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new W0,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=$e(),this.eu.forEach((s=>{this.au(s.key)&&(this.Za=this.Za.add(s.key))}));const t=[];return e.forEach((s=>{this.Za.has(s)||t.push(new DA(s))})),this.Za.forEach((s=>{e.has(s)||t.push(new MA(s))})),t}uu(e){this.Ha=e.qs,this.Za=$e();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return La.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Gm="SyncEngine";class tM{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class nM{constructor(e){this.key=e,this.lu=!1}}class iM{constructor(e,t,s,o,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new wo((d=>iA(d)),Jd),this.Tu=new Map,this.Iu=new Set,this.du=new Nt(Ce.comparator),this.Eu=new Map,this.Au=new Pm,this.Ru={},this.Vu=new Map,this.mu=ka.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function sM(n,e,t=!0){const s=VA(n);let o;const l=s.Pu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await kA(s,e,t,!0),o}async function rM(n,e){const t=VA(n);await kA(t,e,!0,!1)}async function kA(n,e,t,s){const o=await b2(n.localStore,Ui(e)),l=o.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let d;return s&&(d=await oM(n,e,l,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&RA(n.remoteStore,o),d}async function oM(n,e,t,s,o){n.gu=(T,S,R)=>(async function(z,F,ne,K){let W=F.view.nu(ne);W.Ds&&(W=await G0(z.localStore,F.query,!1).then((({documents:D})=>F.view.nu(D,W))));const ie=K&&K.targetChanges.get(F.targetId),de=K&&K.targetMismatches.get(F.targetId)!=null,le=F.view.applyChanges(W,z.isPrimaryClient,ie,de);return tT(z,F.targetId,le._u),le.snapshot})(n,T,S,R);const l=await G0(n.localStore,e,!0),u=new eM(e,l.qs),d=u.nu(l.documents),p=Su.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),g=u.applyChanges(d,n.isPrimaryClient,p);tT(n,t,g._u);const v=new tM(e,t,u);return n.Pu.set(e,v),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),g.snapshot}async function aM(n,e,t){const s=Ke(n),o=s.Pu.get(e),l=s.Tu.get(o.targetId);if(l.length>1)return s.Tu.set(o.targetId,l.filter((u=>!Jd(u,e)))),void s.Pu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await $p(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Om(s.remoteStore,o.targetId),Wp(s,o.targetId)})).catch(Bd)):(Wp(s,o.targetId),await $p(s.localStore,o.targetId,!0))}async function lM(n,e){const t=Ke(n),s=t.Pu.get(e),o=t.Tu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Om(t.remoteStore,s.targetId))}async function PA(n,e){const t=Ke(n);try{const s=await w2(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const u=t.Eu.get(l);u&&(vt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.lu=!0:o.modifiedDocuments.size>0?vt(u.lu,14607):o.removedDocuments.size>0&&(vt(u.lu,42227),u.lu=!1))})),await UA(t,s,e)}catch(s){await Bd(s)}}function eT(n,e,t){const s=Ke(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Pu.forEach(((l,u)=>{const d=u.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const p=Ke(u);p.onlineState=d;let g=!1;p.queries.forEach(((v,T)=>{for(const S of T.wa)S.va(d)&&(g=!0)})),g&&zm(p)})(s.eventManager,e),o.length&&s.hu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function uM(n,e,t){const s=Ke(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Eu.get(e),l=o&&o.key;if(l){let u=new Nt(Ce.comparator);u=u.insert(l,ln.newNoDocument(l,Re.min()));const d=$e().add(l),p=new Qd(Re.min(),new Map,new Nt(Le),u,d);await PA(s,p),s.du=s.du.remove(l),s.Eu.delete(e),Jm(s)}else await $p(s.localStore,e,!1).then((()=>Wp(s,e,t))).catch(Bd)}function Wp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Tu.get(e))n.Pu.delete(s),t&&n.hu.pu(s,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((s=>{n.Au.containsKey(s)||LA(n,s)}))}function LA(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Om(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Jm(n))}function tT(n,e,t){for(const s of t)s instanceof MA?(n.Au.addReference(s.key,e),cM(n,s)):s instanceof DA?(pe(Gm,"Document no longer in limbo: "+s.key),n.Au.removeReference(s.key,e),n.Au.containsKey(s.key)||LA(n,s.key)):be(19791,{yu:s})}function cM(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Iu.has(s)||(pe(Gm,"New document in limbo: "+t),n.Iu.add(s),Jm(n))}function Jm(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Ce(_t.fromString(e)),s=n.mu.next();n.Eu.set(s,new nM(t)),n.du=n.du.insert(t,s),RA(n.remoteStore,new vr(Ui(nA(t.path)),s,"TargetPurposeLimboResolution",Fd.ue))}}async function UA(n,e,t){const s=Ke(n),o=[],l=[],u=[];s.Pu.isEmpty()||(s.Pu.forEach(((d,p)=>{u.push(s.gu(p,e,t).then((g=>{var v;if((g||t)&&s.isPrimaryClient){const T=g?!g.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))===null||v===void 0?void 0:v.current;s.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(g){o.push(g);const T=Um.Es(p.targetId,g);l.push(T)}})))})),await Promise.all(u),s.hu.J_(o),await(async function(p,g){const v=Ke(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>se.forEach(g,(S=>se.forEach(S.Is,(R=>v.persistence.referenceDelegate.addReference(T,S.targetId,R))).next((()=>se.forEach(S.ds,(R=>v.persistence.referenceDelegate.removeReference(T,S.targetId,R)))))))))}catch(T){if(!Oa(T))throw T;pe(Vm,"Failed to update sequence numbers: "+T)}for(const T of g){const S=T.targetId;if(!T.fromCache){const R=v.Fs.get(S),q=R.snapshotVersion,z=R.withLastLimboFreeSnapshotVersion(q);v.Fs=v.Fs.insert(S,z)}}})(s.localStore,l))}async function dM(n,e){const t=Ke(n);if(!t.currentUser.isEqual(e)){pe(Gm,"User change. New user:",e.toKey());const s=await AA(t.localStore,e);t.currentUser=e,(function(l,u){l.Vu.forEach((d=>{d.forEach((p=>{p.reject(new Te(ue.CANCELLED,u))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await UA(t,s.Bs)}}function fM(n,e){const t=Ke(n),s=t.Eu.get(e);if(s&&s.lu)return $e().add(s.key);{let o=$e();const l=t.Tu.get(e);if(!l)return o;for(const u of l){const d=t.Pu.get(u);o=o.unionWith(d.view.tu)}return o}}function VA(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=PA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uM.bind(null,e),e.hu.J_=W2.bind(null,e.eventManager),e.hu.pu=j2.bind(null,e.eventManager),e}class Nd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=IA(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return I2(this.persistence,new S2,e.initialUser,this.serializer)}Du(e){return new SA(Lm.Vi,this.serializer)}bu(e){return new N2}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nd.provider={build:()=>new Nd};class hM extends Nd{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){vt(this.persistence.referenceDelegate instanceof xd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new a2(s,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Rn.withCacheSize(this.cacheSizeBytes):Rn.DEFAULT;return new SA((s=>xd.Vi(s,t)),this.serializer)}}class jp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>eT(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=dM.bind(null,this.syncEngine),await Y2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new $2})()}createDatastore(e){const t=IA(e.databaseInfo.databaseId),s=(function(l){return new L2(l)})(e.databaseInfo);return(function(l,u,d,p){return new q2(l,u,d,p)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,u,d){return new F2(s,o,l,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>eT(this.syncEngine,t,0)),(function(){return K0.C()?new K0:new M2})())}createSyncEngine(e,t){return(function(o,l,u,d,p,g,v){const T=new iM(o,l,u,d,p,g);return v&&(T.fu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Ke(o);pe(Pa,"RemoteStore shutting down."),l.Ia.add(5),await Au(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}jp.provider={build:()=>new jp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):_s("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr="FirestoreClient";class mM{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=an.UNAUTHENTICATED,this.clientId=zS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async u=>{pe(Dr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(s,(u=>(pe(Dr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new go;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=NA(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Sp(n,e){n.asyncQueue.verifyOperationInProgress(),pe(Dr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async o=>{s.isEqual(o)||(await AA(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>{wr("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{pe("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{wr("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),n._offlineComponents=e}async function nT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await gM(n);pe(Dr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>X0(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,o)=>X0(e.remoteStore,o))),n._onlineComponents=e}async function gM(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pe(Dr,"Using user provided OfflineComponentProvider");try{await Sp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ue.FAILED_PRECONDITION||o.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;wr("Error using user provided cache. Falling back to memory cache: "+t),await Sp(n,new Nd)}}else pe(Dr,"Using default OfflineComponentProvider"),await Sp(n,new hM(void 0));return n._offlineComponents}async function yM(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pe(Dr,"Using user provided OnlineComponentProvider"),await nT(n,n._uninitializedComponentsProvider._online)):(pe(Dr,"Using default OnlineComponentProvider"),await nT(n,new jp))),n._onlineComponents}async function _M(n){const e=await yM(n),t=e.eventManager;return t.onListen=sM.bind(null,e.syncEngine),t.onUnlisten=aM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=rM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=lM.bind(null,e.syncEngine),t}function vM(n,e,t={}){const s=new go;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,d,p,g){const v=new pM({next:S=>{v.Ou(),u.enqueueAndForget((()=>X2(l,T))),S.fromCache&&p.source==="server"?g.reject(new Te(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),T=new Z2(d,v,{includeMetadataChanges:!0,ka:!0});return Q2(l,T)})(await _M(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="firestore.googleapis.com",sT=!0;class rT{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new Te(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qA,this.ssl=sT}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:sT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=EA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<r2)throw new Te(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Bx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OA((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Te(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Te(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Te(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ym{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new Mx;switch(s.type){case"firstParty":return new Lx(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Te(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=iT.get(t);s&&(pe("ComponentProvider","Removing Datastore"),iT.delete(t),s.terminate())})(this),Promise.resolve()}}function TM(n,e,t,s={}){var o;n=Up(n,Ym);const l=kr(e),u=n._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),p=`${e}:${t}`;l&&(cm(`https://${p}`),dm("Firestore",!0)),u.host!==qA&&u.host!==p&&wr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},u),{host:p,ssl:l,emulatorOptions:s});if(!vo(g,d)&&(n._setSettings(g),s.mockUserToken)){let v,T;if(typeof s.mockUserToken=="string")v=s.mockUserToken,T=an.MOCK_USER;else{v=QE(s.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new Te(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new an(S)}n._authCredentials=new Dx(new FS(v,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Wd(this.firestore,e,this._query)}}class ti{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ca(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ti(this.firestore,e,this._key)}toJSON(){return{type:ti._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Tu(t,ti._jsonSchema))return new ti(e,s||null,new Ce(_t.fromString(t.referencePath)))}}ti._jsonSchemaVersion="firestore/documentReference/1.0",ti._jsonSchema={type:qt("string",ti._jsonSchemaVersion),referencePath:qt("string")};class Ca extends Wd{constructor(e,t,s){super(e,t,nA(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ti(this.firestore,null,new Ce(e))}withConverter(e){return new Ca(this.firestore,e,this._path)}}function BA(n,e,...t){if(n=xn(n),n instanceof Ym){const s=_t.fromString(e,...t);return _0(s),new Ca(n,null,s)}{if(!(n instanceof ti||n instanceof Ca))throw new Te(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(_t.fromString(e,...t));return _0(s),new Ca(n.firestore,null,s)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="AsyncQueue";class aT{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new wA(this,"async_queue_retry"),this.oc=()=>{const s=Ep();s&&pe(oT,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=e;const t=Ep();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Ep();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new go;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Oa(e))throw e;pe(oT,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((s=>{throw this.tc=s,this.nc=!1,_s("INTERNAL UNHANDLED ERROR: ",lT(s)),s})).then((s=>(this.nc=!1,s))))));return this._c=t,t}enqueueAfterDelay(e,t,s){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=Hm.createAndSchedule(this,e,t,s,(l=>this.lc(l)));return this.ec.push(o),o}ac(){this.tc&&be(47125,{hc:lT(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function lT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class FA extends Ym{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new aT,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new aT(e),this._firestoreClient=void 0,await e}}}function EM(n,e){const t=typeof n=="object"?n:pm(),s=typeof n=="string"?n:Cd,o=Ud(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=YE("firestore");l&&TM(o,...l)}return o}function SM(n){if(n._terminated)throw new Te(ue.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||AM(n),n._firestoreClient}function AM(n){var e,t,s;const o=n._freezeSettings(),l=(function(d,p,g,v){return new eN(d,p,g,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,OA(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new mM(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ki(tn.fromBase64String(e))}catch(t){throw new Te(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ki(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ki._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Tu(e,ki._jsonSchema))return ki.fromBase64String(e.bytes)}}ki._jsonSchemaVersion="firestore/bytes/1.0",ki._jsonSchema={type:qt("string",ki._jsonSchemaVersion),bytes:qt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Te(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _n(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ar._jsonSchemaVersion}}static fromJSON(e){if(Tu(e,Ar._jsonSchema))return new Ar(e.latitude,e.longitude)}}Ar._jsonSchemaVersion="firestore/geoPoint/1.0",Ar._jsonSchema={type:qt("string",Ar._jsonSchemaVersion),latitude:qt("number"),longitude:qt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Cr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Tu(e,Cr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Cr(e.vectorValues);throw new Te(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Cr._jsonSchemaVersion="firestore/vectorValue/1.0",Cr._jsonSchema={type:qt("string",Cr._jsonSchemaVersion),vectorValues:qt("object")};const CM=new RegExp("[~\\*/\\[\\]]");function IM(n,e,t){if(e.search(CM)>=0)throw uT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n);try{return new HA(...e.split("."))._internalPath}catch{throw uT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n)}}function uT(n,e,t,s,o){let l=`Function ${e}() called with invalid data`;l+=". ";let u="";return new Te(ue.INVALID_ARGUMENT,l+n+u)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ti(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(GA("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class wM extends zA{data(){return super.data()}}function GA(n,e){return typeof e=="string"?IM(n,e):e instanceof HA?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Te(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bM{convertValue(e,t="none"){switch(Nr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw be(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Eu(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){var t,s,o;const l=(o=(s=(t=e.fields)===null||t===void 0?void 0:t[Op].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map((u=>xt(u.doubleValue)));return new Cr(l)}convertGeoPoint(e){return new Ar(xt(e.latitude),xt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=zd(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(du(e));default:return null}}convertTimestamp(e){const t=br(e);return new Ot(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=_t.fromString(e);vt(TA(s),9688,{name:e});const o=new fu(s.get(1),s.get(3)),l=new Ce(s.popFirst(5));return o.isEqual(t)||_s(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}class nd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ia extends zA{constructor(e,t,s,o,l,u){super(e,t,s,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(GA("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ia._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ia._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ia._jsonSchema={type:qt("string",Ia._jsonSchemaVersion),bundleSource:qt("string","DocumentSnapshot"),bundleName:qt("string"),bundle:qt("string")};class hd extends Ia{data(e={}){return super.data(e)}}class wa{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new nd(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new hd(this._firestore,this._userDataWriter,s.key,s,new nd(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Te(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const p=new hd(o._firestore,o._userDataWriter,d.doc.key,d.doc,new nd(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new hd(o._firestore,o._userDataWriter,d.doc.key,d.doc,new nd(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,v=-1;return d.type!==0&&(g=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:xM(d.type),doc:p,oldIndex:g,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=wa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=zS.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function xM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be(61501,{type:n})}}wa._jsonSchemaVersion="firestore/querySnapshot/1.0",wa._jsonSchema={type:qt("string",wa._jsonSchemaVersion),bundleSource:qt("string","QuerySnapshot"),bundleName:qt("string"),bundle:qt("string")};class NM extends bM{constructor(e){super(),this.firestore=e}convertBytes(e){return new ki(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ti(this.firestore,null,t)}}function JA(n){n=Up(n,Wd);const e=Up(n.firestore,FA),t=SM(e),s=new NM(e);return RM(n._query),vM(t,n._query).then((o=>new wa(e,s,n,o)))}(function(e,t=!0){(function(o){Va=o})(Io),To(new Ir("firestore",((s,{instanceIdentifier:o,options:l})=>{const u=s.getProvider("app").getImmediate(),d=new FA(new kx(s.getProvider("auth-internal")),new Ux(u,s.getProvider("app-check-internal")),(function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Te(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fu(g.options.projectId,v)})(u,o),u);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Pi(h0,p0,e),Pi(h0,p0,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="firebasestorage.googleapis.com",KA="storageBucket",MM=120*1e3,DM=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It extends qi{constructor(e,t,s=0){super(Ap(e),`Firebase Storage: ${t} (${Ap(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,It.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ap(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ct;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ct||(Ct={}));function Ap(n){return"storage/"+n}function Km(){const n="An unknown error occurred, please check the error payload for server response.";return new It(Ct.UNKNOWN,n)}function kM(n){return new It(Ct.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function PM(n){return new It(Ct.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function LM(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new It(Ct.UNAUTHENTICATED,n)}function UM(){return new It(Ct.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function VM(n){return new It(Ct.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function OM(){return new It(Ct.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function qM(){return new It(Ct.CANCELED,"User canceled the upload/download.")}function BM(n){return new It(Ct.INVALID_URL,"Invalid URL '"+n+"'.")}function FM(n){return new It(Ct.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function HM(){return new It(Ct.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+KA+"' property when initializing the app?")}function zM(){return new It(Ct.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function GM(){return new It(Ct.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function JM(n){return new It(Ct.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Zp(n){return new It(Ct.INVALID_ARGUMENT,n)}function $A(){return new It(Ct.APP_DELETED,"The Firebase app was deleted.")}function YM(n){return new It(Ct.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ru(n,e){return new It(Ct.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Gl(n){throw new It(Ct.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=Bn.makeFromUrl(e,t)}catch{return new Bn(e,"")}if(s.path==="")return s;throw FM(e)}static makeFromUrl(e,t){let s=null;const o="([A-Za-z0-9.\\-_]+)";function l(ie){ie.path.charAt(ie.path.length-1)==="/"&&(ie.path_=ie.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+o+u,"i"),p={bucket:1,path:3};function g(ie){ie.path_=decodeURIComponent(ie.path)}const v="v[A-Za-z0-9_]+",T=t.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",R=new RegExp(`^https?://${T}/${v}/b/${o}/o${S}`,"i"),q={bucket:1,path:3},z=t===YA?"(?:storage.googleapis.com|storage.cloud.google.com)":t,F="([^?#]*)",ne=new RegExp(`^https?://${z}/${o}/${F}`,"i"),W=[{regex:d,indices:p,postModify:l},{regex:R,indices:q,postModify:g},{regex:ne,indices:{bucket:1,path:2},postModify:g}];for(let ie=0;ie<W.length;ie++){const de=W[ie],le=de.regex.exec(e);if(le){const D=le[de.indices.bucket];let N=le[de.indices.path];N||(N=""),s=new Bn(D,N),de.postModify(s);break}}if(s==null)throw BM(e);return s}}class KM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $M(n,e,t){let s=1,o=null,l=null,u=!1,d=0;function p(){return d===2}let g=!1;function v(...F){g||(g=!0,e.apply(null,F))}function T(F){o=setTimeout(()=>{o=null,n(R,p())},F)}function S(){l&&clearTimeout(l)}function R(F,...ne){if(g){S();return}if(F){S(),v.call(null,F,...ne);return}if(p()||u){S(),v.call(null,F,...ne);return}s<64&&(s*=2);let W;d===1?(d=2,W=0):W=(s+Math.random())*1e3,T(W)}let q=!1;function z(F){q||(q=!0,S(),!g&&(o!==null?(F||(d=2),clearTimeout(o),T(0)):F||(d=1)))}return T(0),l=setTimeout(()=>{u=!0,z(!0)},t),z}function QM(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XM(n){return n!==void 0}function WM(n){return typeof n=="object"&&!Array.isArray(n)}function $m(n){return typeof n=="string"||n instanceof String}function cT(n){return Qm()&&n instanceof Blob}function Qm(){return typeof Blob<"u"}function dT(n,e,t,s){if(s<e)throw Zp(`Invalid value for '${n}'. Expected ${e} or greater.`);if(s>t)throw Zp(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(n,e,t){let s=e;return t==null&&(s=`https://${e}`),`${t}://${s}/v0${n}`}function QA(n){const e=encodeURIComponent;let t="?";for(const s in n)if(n.hasOwnProperty(s)){const o=e(s)+"="+e(n[s]);t=t+o+"&"}return t=t.slice(0,-1),t}var _o;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(_o||(_o={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jM(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||o||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e,t,s,o,l,u,d,p,g,v,T,S=!0,R=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=p,this.timeout_=g,this.progressCallback_=v,this.connectionFactory_=T,this.retry=S,this.isUsingEmulator=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((q,z)=>{this.resolve_=q,this.reject_=z,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new id(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const u=d=>{const p=d.loaded,g=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,g)};this.progressCallback_!==null&&l.addUploadProgressListener(u),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(u),this.pendingConnection_=null;const d=l.getErrorCode()===_o.NO_ERROR,p=l.getStatus();if(!d||jM(p,this.additionalRetryCodes_)&&this.retry){const v=l.getErrorCode()===_o.ABORT;s(!1,new id(!1,null,v));return}const g=this.successCodes_.indexOf(p)!==-1;s(!0,new id(g,l))})},t=(s,o)=>{const l=this.resolve_,u=this.reject_,d=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());XM(p)?l(p):l()}catch(p){u(p)}else if(d!==null){const p=Km();p.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,p)):u(p)}else if(o.canceled){const p=this.appDelete_?$A():qM();u(p)}else{const p=OM();u(p)}};this.canceled_?t(!1,new id(!1,null,!0)):this.backoffId_=$M(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&QM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class id{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function eD(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function tD(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function nD(n,e){e&&(n["X-Firebase-GMPID"]=e)}function iD(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function sD(n,e,t,s,o,l,u=!0,d=!1){const p=QA(n.urlParams),g=n.url+p,v=Object.assign({},n.headers);return nD(v,e),eD(v,t),tD(v,l),iD(v,s),new ZM(g,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,u,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function oD(...n){const e=rD();if(e!==void 0){const t=new e;for(let s=0;s<n.length;s++)t.append(n[s]);return t.getBlob()}else{if(Qm())return new Blob(n);throw new It(Ct.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function aD(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(n){if(typeof atob>"u")throw JM("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Cp{constructor(e,t){this.data=e,this.contentType=t||null}}function XA(n,e){switch(n){case pi.RAW:return new Cp(WA(e));case pi.BASE64:case pi.BASE64URL:return new Cp(jA(n,e));case pi.DATA_URL:return new Cp(cD(e),dD(e))}throw Km()}function WA(n){const e=[];for(let t=0;t<n.length;t++){let s=n.charCodeAt(t);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=s,u=n.charCodeAt(++t);s=65536|(l&1023)<<10|u&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function uD(n){let e;try{e=decodeURIComponent(n)}catch{throw ru(pi.DATA_URL,"Malformed data URL.")}return WA(e)}function jA(n,e){switch(n){case pi.BASE64:{const o=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(o||l)throw ru(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case pi.BASE64URL:{const o=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(o||l)throw ru(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=lD(e)}catch(o){throw o.message.includes("polyfill")?o:ru(n,"Invalid character found")}const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}class ZA{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw ru(pi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=t[1]||null;s!=null&&(this.base64=fD(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function cD(n){const e=new ZA(n);return e.base64?jA(pi.BASE64,e.rest):uD(e.rest)}function dD(n){return new ZA(n).contentType}function fD(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,t){let s=0,o="";cT(e)?(this.data_=e,s=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(cT(this.data_)){const s=this.data_,o=aD(s,e,t);return o===null?null:new yr(o)}else{const s=new Uint8Array(this.data_.buffer,e,t-e);return new yr(s,!0)}}static getBlob(...e){if(Qm()){const t=e.map(s=>s instanceof yr?s.data_:s);return new yr(oD.apply(null,t))}else{const t=e.map(u=>$m(u)?XA(pi.RAW,u).data:u.data_);let s=0;t.forEach(u=>{s+=u.byteLength});const o=new Uint8Array(s);let l=0;return t.forEach(u=>{for(let d=0;d<u.length;d++)o[l++]=u[d]}),new yr(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(n){let e;try{e=JSON.parse(n)}catch{return null}return WM(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function pD(n,e){const t=e.split("/").filter(s=>s.length>0).join("/");return n.length===0?t:n+"/"+t}function tC(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(n,e){return e}class yn{constructor(e,t,s,o){this.server=e,this.local=t||e,this.writable=!!s,this.xform=o||mD}}let sd=null;function gD(n){return!$m(n)||n.length<2?n:tC(n)}function nC(){if(sd)return sd;const n=[];n.push(new yn("bucket")),n.push(new yn("generation")),n.push(new yn("metageneration")),n.push(new yn("name","fullPath",!0));function e(l,u){return gD(u)}const t=new yn("name");t.xform=e,n.push(t);function s(l,u){return u!==void 0?Number(u):u}const o=new yn("size");return o.xform=s,n.push(o),n.push(new yn("timeCreated")),n.push(new yn("updated")),n.push(new yn("md5Hash",null,!0)),n.push(new yn("cacheControl",null,!0)),n.push(new yn("contentDisposition",null,!0)),n.push(new yn("contentEncoding",null,!0)),n.push(new yn("contentLanguage",null,!0)),n.push(new yn("contentType",null,!0)),n.push(new yn("metadata","customMetadata",!0)),sd=n,sd}function yD(n,e){function t(){const s=n.bucket,o=n.fullPath,l=new Bn(s,o);return e._makeStorageReference(l)}Object.defineProperty(n,"ref",{get:t})}function _D(n,e,t){const s={};s.type="file";const o=t.length;for(let l=0;l<o;l++){const u=t[l];s[u.local]=u.xform(s,e[u.server])}return yD(s,n),s}function iC(n,e,t){const s=eC(e);return s===null?null:_D(n,s,t)}function vD(n,e,t,s){const o=eC(e);if(o===null||!$m(o.downloadTokens))return null;const l=o.downloadTokens;if(l.length===0)return null;const u=encodeURIComponent;return l.split(",").map(g=>{const v=n.bucket,T=n.fullPath,S="/b/"+u(v)+"/o/"+u(T),R=Xm(S,t,s),q=QA({alt:"media",token:g});return R+q})[0]}function TD(n,e){const t={},s=e.length;for(let o=0;o<s;o++){const l=e[o];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}class sC{constructor(e,t,s,o){this.url=e,this.method=t,this.handler=s,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(n){if(!n)throw Km()}function ED(n,e){function t(s,o){const l=iC(n,o,e);return rC(l!==null),l}return t}function SD(n,e){function t(s,o){const l=iC(n,o,e);return rC(l!==null),vD(l,o,n.host,n._protocol)}return t}function oC(n){function e(t,s){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=UM():o=LM():t.getStatus()===402?o=PM(n.bucket):t.getStatus()===403?o=VM(n.path):o=s,o.status=t.getStatus(),o.serverResponse=s.serverResponse,o}return e}function AD(n){const e=oC(n);function t(s,o){let l=e(s,o);return s.getStatus()===404&&(l=kM(n.path)),l.serverResponse=o.serverResponse,l}return t}function CD(n,e,t){const s=e.fullServerUrl(),o=Xm(s,n.host,n._protocol),l="GET",u=n.maxOperationRetryTime,d=new sC(o,l,SD(n,t),u);return d.errorHandler=AD(e),d}function ID(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function wD(n,e,t){const s=Object.assign({},t);return s.fullPath=n.path,s.size=e.size(),s.contentType||(s.contentType=ID(null,e)),s}function RD(n,e,t,s,o){const l=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function d(){let W="";for(let ie=0;ie<2;ie++)W=W+Math.random().toString().slice(2);return W}const p=d();u["Content-Type"]="multipart/related; boundary="+p;const g=wD(e,s,o),v=TD(g,t),T="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+p+`\r
Content-Type: `+g.contentType+`\r
\r
`,S=`\r
--`+p+"--",R=yr.getBlob(T,s,S);if(R===null)throw zM();const q={name:g.fullPath},z=Xm(l,n.host,n._protocol),F="POST",ne=n.maxUploadRetryTime,K=new sC(z,F,ED(n,t),ne);return K.urlParams=q,K.headers=u,K.body=R.uploadData(),K.errorHandler=oC(e),K}class bD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=_o.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=_o.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=_o.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,s,o,l){if(this.sent_)throw Gl("cannot .send() more than once");if(kr(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),l!==void 0)for(const u in l)l.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,l[u].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Gl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Gl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Gl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Gl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class xD extends bD{initXhr(){this.xhr_.responseType="text"}}function aC(){return new xD}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,t){this._service=e,t instanceof Bn?this._location=t:this._location=Bn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Co(e,t)}get root(){const e=new Bn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return tC(this._location.path)}get storage(){return this._service}get parent(){const e=hD(this._location.path);if(e===null)return null;const t=new Bn(this._location.bucket,e);return new Co(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw YM(e)}}function ND(n,e,t){n._throwIfRoot("uploadBytes");const s=RD(n.storage,n._location,nC(),new yr(e,!0),t);return n.storage.makeRequestWithTokens(s,aC).then(o=>({metadata:o,ref:n}))}function MD(n,e,t=pi.RAW,s){n._throwIfRoot("uploadString");const o=XA(t,e),l=Object.assign({},s);return l.contentType==null&&o.contentType!=null&&(l.contentType=o.contentType),ND(n,o.data,l)}function DD(n){n._throwIfRoot("getDownloadURL");const e=CD(n.storage,n._location,nC());return n.storage.makeRequestWithTokens(e,aC).then(t=>{if(t===null)throw GM();return t})}function kD(n,e){const t=pD(n._location.path,e),s=new Bn(n._location.bucket,t);return new Co(n.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(n){return/^[A-Za-z]+:\/\//.test(n)}function LD(n,e){return new Co(n,e)}function lC(n,e){if(n instanceof Wm){const t=n;if(t._bucket==null)throw HM();const s=new Co(t,t._bucket);return e!=null?lC(s,e):s}else return e!==void 0?kD(n,e):n}function UD(n,e){if(e&&PD(e)){if(n instanceof Wm)return LD(n,e);throw Zp("To use ref(service, url), the first argument must be a Storage instance.")}else return lC(n,e)}function fT(n,e){const t=e==null?void 0:e[KA];return t==null?null:Bn.makeFromBucketSpec(t,n)}function VD(n,e,t,s={}){n.host=`${e}:${t}`;const o=kr(e);o&&(cm(`https://${n.host}/b`),dm("Storage",!0)),n._isUsingEmulator=!0,n._protocol=o?"https":"http";const{mockUserToken:l}=s;l&&(n._overrideAuthToken=typeof l=="string"?l:QE(l,n.app.options.projectId))}class Wm{constructor(e,t,s,o,l,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=o,this._firebaseVersion=l,this._isUsingEmulator=u,this._bucket=null,this._host=YA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=MM,this._maxUploadRetryTime=DM,this._requests=new Set,o!=null?this._bucket=Bn.makeFromBucketSpec(o,this._host):this._bucket=fT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Bn.makeFromBucketSpec(this._url,e):this._bucket=fT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){dT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){dT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Co(this,e)}_makeRequest(e,t,s,o,l=!0){if(this._deleted)return new KM($A());{const u=sD(e,this._appId,s,o,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,o).getPromise()}}const hT="@firebase/storage",pT="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC="storage";function OD(n,e,t,s){return n=xn(n),MD(n,e,t,s)}function qD(n){return n=xn(n),DD(n)}function BD(n,e){return n=xn(n),UD(n,e)}function FD(n=pm(),e){n=xn(n);const s=Ud(n,uC).getImmediate({identifier:e}),o=YE("storage");return o&&HD(s,...o),s}function HD(n,e,t,s={}){VD(n,e,t,s)}function zD(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),s=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new Wm(t,s,o,e,Io)}function GD(){To(new Ir(uC,zD,"PUBLIC").setMultipleInstances(!0)),Pi(hT,pT,""),Pi(hT,pT,"esm2017")}GD();const JD={apiKey:"AIzaSyAoMQ8oVPP5oFjw8YzgF0H1Dy4DAJmNaKM",authDomain:"dresscode-ai-32c50.firebaseapp.com",projectId:"dresscode-ai-32c50",storageBucket:"dresscode-ai-32c50.firebasestorage.app",messagingSenderId:"215593114437",appId:"1:215593114437:web:5d9c1f3161182802f37c2c"},jm=jE(JD),Wl=Rx(jm),YD=new fs,cC=EM(jm),KD=FD(jm);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let $D,QD;function XD(){return{geminiUrl:$D,vertexUrl:QD}}function WD(n,e,t,s){var o,l;if(!(n!=null&&n.baseUrl)){const u=XD();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:t:(l=u.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ts{}function fe(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function m(n,e,t){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const p=n[d];if(Array.isArray(t))for(let g=0;g<p.length;g++){const v=p[g];m(v,e.slice(l+1),t[g])}else for(const g of p)m(g,e.slice(l+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const p=n[d];m(p[0],e.slice(l+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const s=e[e.length-1],o=n[s];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const o=e[s];if(o.endsWith("[]")){const l=o.slice(0,-2);if(l in n){const u=n[l];return Array.isArray(u)?u.map(d=>f(d,e.slice(s+1),t)):t}else return t}else n=n[o]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function jD(n,e){for(const[t,s]of Object.entries(e)){const o=t.split("."),l=s.split("."),u=new Set;let d=-1;for(let p=0;p<o.length;p++)if(o[p]==="*"){d=p;break}if(d!==-1&&l.length>d)for(let p=d;p<l.length;p++){const g=l[p];g!=="*"&&!g.endsWith("[]")&&!g.endsWith("[0]")&&u.add(g)}em(n,o,l,0,u)}}function em(n,e,t,s,o){if(s>=e.length||typeof n!="object"||n===null)return;const l=e[s];if(l.endsWith("[]")){const u=l.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const p of d[u])em(p,e,t,s+1,o)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(g=>!g.startsWith("_")&&!o.has(g)),p={};for(const g of d)p[g]=u[g];for(const[g,v]of Object.entries(p)){const T=[];for(const S of t.slice(s))S==="*"?T.push(g):T.push(S);m(u,T,v)}for(const g of d)delete u[g]}}else{const u=n;l in u&&em(u[l],e,t,s+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zm(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZD(n){const e={},t=f(n,["operationName"]);t!=null&&m(e,["operationName"],t);const s=f(n,["resourceName"]);return s!=null&&m(e,["_url","resourceName"],s),e}function ek(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const s=f(n,["metadata"]);s!=null&&m(e,["metadata"],s);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const l=f(n,["error"]);l!=null&&m(e,["error"],l);const u=f(n,["response","generateVideoResponse"]);return u!=null&&m(e,["response"],nk(u)),e}function tk(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const s=f(n,["metadata"]);s!=null&&m(e,["metadata"],s);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const l=f(n,["error"]);l!=null&&m(e,["error"],l);const u=f(n,["response"]);return u!=null&&m(e,["response"],ik(u)),e}function nk(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>sk(u))),m(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&m(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function ik(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>rk(u))),m(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&m(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function sk(n){const e={},t=f(n,["video"]);return t!=null&&m(e,["video"],dk(t)),e}function rk(n){const e={},t=f(n,["_self"]);return t!=null&&m(e,["video"],fk(t)),e}function ok(n){const e={},t=f(n,["operationName"]);return t!=null&&m(e,["_url","operationName"],t),e}function ak(n){const e={},t=f(n,["operationName"]);return t!=null&&m(e,["_url","operationName"],t),e}function lk(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const s=f(n,["metadata"]);s!=null&&m(e,["metadata"],s);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const l=f(n,["error"]);l!=null&&m(e,["error"],l);const u=f(n,["response"]);return u!=null&&m(e,["response"],uk(u)),e}function uk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&m(e,["parent"],s);const o=f(n,["documentName"]);return o!=null&&m(e,["documentName"],o),e}function dC(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const s=f(n,["metadata"]);s!=null&&m(e,["metadata"],s);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const l=f(n,["error"]);l!=null&&m(e,["error"],l);const u=f(n,["response"]);return u!=null&&m(e,["response"],ck(u)),e}function ck(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&m(e,["parent"],s);const o=f(n,["documentName"]);return o!=null&&m(e,["documentName"],o),e}function dk(n){const e={},t=f(n,["uri"]);t!=null&&m(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&m(e,["videoBytes"],Zm(s));const o=f(n,["encoding"]);return o!=null&&m(e,["mimeType"],o),e}function fk(n){const e={},t=f(n,["gcsUri"]);t!=null&&m(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&m(e,["videoBytes"],Zm(s));const o=f(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var mT;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(mT||(mT={}));var gT;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(gT||(gT={}));var yT;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(yT||(yT={}));var De;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(De||(De={}));var _T;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(_T||(_T={}));var vT;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(vT||(vT={}));var TT;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(TT||(TT={}));var ET;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(ET||(ET={}));var ST;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(ST||(ST={}));var AT;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(AT||(AT={}));var CT;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(CT||(CT={}));var IT;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(IT||(IT={}));var wT;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(wT||(wT={}));var RT;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(RT||(RT={}));var bT;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(bT||(bT={}));var xT;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(xT||(xT={}));var NT;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(NT||(NT={}));var MT;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(MT||(MT={}));var Md;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Md||(Md={}));var DT;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(DT||(DT={}));var kT;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(kT||(kT={}));var PT;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(PT||(PT={}));var tm;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(tm||(tm={}));var LT;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(LT||(LT={}));var UT;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(UT||(UT={}));var VT;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(VT||(VT={}));var OT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(OT||(OT={}));var qT;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(qT||(qT={}));var BT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(BT||(BT={}));var FT;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(FT||(FT={}));var HT;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(HT||(HT={}));var zT;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(zT||(zT={}));var GT;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(GT||(GT={}));var JT;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(JT||(JT={}));var YT;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(YT||(YT={}));var KT;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(KT||(KT={}));var $T;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})($T||($T={}));var QT;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(QT||(QT={}));var XT;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(XT||(XT={}));var WT;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(WT||(WT={}));var jT;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(jT||(jT={}));var ZT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(ZT||(ZT={}));var eE;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(eE||(eE={}));var tE;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(tE||(tE={}));var nE;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(nE||(nE={}));var iE;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(iE||(iE={}));var sE;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(sE||(sE={}));var rE;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(rE||(rE={}));var oE;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(oE||(oE={}));var aE;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(aE||(aE={}));var lE;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(lE||(lE={}));var uE;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(uE||(uE={}));var _a;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(_a||(_a={}));class nm{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Jl{get text(){var e,t,s,o,l,u,d,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let g="",v=!1;const T=[];for(const S of(p=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[R,q]of Object.entries(S))R!=="text"&&R!=="thought"&&(q!==null||q!==void 0)&&T.push(R);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,g+=S.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?g:void 0}get data(){var e,t,s,o,l,u,d,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let g="";const v=[];for(const T of(p=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[S,R]of Object.entries(T))S!=="inlineData"&&(R!==null||R!==void 0)&&v.push(S);T.inlineData&&typeof T.inlineData.data=="string"&&(g+=atob(T.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),g.length>0?btoa(g):void 0}get functionCalls(){var e,t,s,o,l,u,d,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const g=(p=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((g==null?void 0:g.length)!==0)return g}get executableCode(){var e,t,s,o,l,u,d,p,g;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(p=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(g=v==null?void 0:v[0])===null||g===void 0?void 0:g.code}get codeExecutionResult(){var e,t,s,o,l,u,d,p,g;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(p=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(g=v==null?void 0:v[0])===null||g===void 0?void 0:g.output}}class cE{}class dE{}class hk{}class pk{}class mk{}class gk{}class fE{}class hE{}class pE{}class yk{}class Dd{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new Dd;let o;const l=e;return t?o=tk(l):o=ek(l),Object.assign(s,o),s}}class mE{}class gE{}class yE{}class _k{}class vk{}class Tk{}class eg{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new eg,l=lk(e);return Object.assign(s,l),s}}class Ek{}class Sk{}class Ak{}class _E{}class Ck{get text(){var e,t,s;let o="",l=!1;const u=[];for(const d of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[p,g]of Object.entries(d))p!=="text"&&p!=="thought"&&g!==null&&u.push(p);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,o+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var e,t,s;let o="";const l=[];for(const u of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[d,p]of Object.entries(u))d!=="inlineData"&&p!==null&&l.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class Ik{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class tg{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new tg,l=dC(e);return Object.assign(s,l),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function et(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function fC(n,e){const t=et(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function hC(n){return Array.isArray(n)?n.map(e=>kd(e)):[kd(n)]}function kd(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function pC(n){const e=kd(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function mC(n){const e=kd(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function vE(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function gC(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>vE(e)):[vE(n)]}function im(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function TE(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function EE(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function un(n){if(n==null)throw new Error("ContentUnion is required");return im(n)?n:{role:"user",parts:gC(n)}}function ng(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=un(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=un(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>un(t)):[un(e)]}function ni(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(TE(n)||EE(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[un(n)]}const e=[],t=[],s=im(n[0]);for(const o of n){const l=im(o);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(o);else{if(TE(o)||EE(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return s||e.push({role:"user",parts:gC(t)}),e}function wk(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(De).includes(t[0].toUpperCase())?t[0].toUpperCase():De.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(De).includes(s.toUpperCase())?s.toUpperCase():De.TYPE_UNSPECIFIED})}}function Ra(n){const e={},t=["items"],s=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&wk(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(De).includes(d.toUpperCase())?d.toUpperCase():De.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=Ra(d);else if(s.includes(u)){const p=[];for(const g of d){if(g.type=="null"){e.nullable=!0;continue}p.push(Ra(g))}e[u]=p}else if(o.includes(u)){const p={};for(const[g,v]of Object.entries(d))p[g]=Ra(v);e[u]=p}else{if(u==="additionalProperties")continue;e[u]=d}return e}function ig(n){return Ra(n)}function sg(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function rg(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Ba(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ra(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ra(e.response));return n}function Fa(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function Rk(n,e,t,s=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function Es(n,e){if(typeof e!="string")throw new Error("name must be a string");return Rk(n,e,"cachedContents")}function yC(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Vr(n){return Zm(n)}function bk(n){return n!=null&&typeof n=="object"&&"name"in n}function xk(n){return n!=null&&typeof n=="object"&&"video"in n}function Nk(n){return n!=null&&typeof n=="object"&&"uri"in n}function _C(n){var e;let t;if(bk(n)&&(t=n.name),!(Nk(n)&&(t=n.uri,t===void 0))&&!(xk(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function vC(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function TC(n){for(const e of["models","tunedModels","publisherModels"])if(Mk(n,e))return n[e];return[]}function Mk(n,e){return n!==null&&typeof n=="object"&&e in n}function Dk(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function kk(n,e={}){const t=[],s=new Set;for(const o of n){const l=o.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const u=Dk(o,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function EC(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function Pk(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function SC(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let l=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const p=u.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Ha(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function AC(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lk(n){const e={},t=f(n,["responsesFile"]);t!=null&&m(e,["fileName"],t);const s=f(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>fP(u))),m(e,["inlinedResponses"],l)}const o=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["inlinedEmbedContentResponses"],l)}return e}function Uk(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&m(e,["format"],t);const s=f(n,["gcsDestination","outputUriPrefix"]);s!=null&&m(e,["gcsUri"],s);const o=f(n,["bigqueryDestination","outputUri"]);return o!=null&&m(e,["bigqueryUri"],o),e}function Vk(n){const e={},t=f(n,["format"]);t!=null&&m(e,["predictionsFormat"],t);const s=f(n,["gcsUri"]);s!=null&&m(e,["gcsDestination","outputUriPrefix"],s);const o=f(n,["bigqueryUri"]);if(o!=null&&m(e,["bigqueryDestination","outputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function pd(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const s=f(n,["metadata","displayName"]);s!=null&&m(e,["displayName"],s);const o=f(n,["metadata","state"]);o!=null&&m(e,["state"],AC(o));const l=f(n,["metadata","createTime"]);l!=null&&m(e,["createTime"],l);const u=f(n,["metadata","endTime"]);u!=null&&m(e,["endTime"],u);const d=f(n,["metadata","updateTime"]);d!=null&&m(e,["updateTime"],d);const p=f(n,["metadata","model"]);p!=null&&m(e,["model"],p);const g=f(n,["metadata","output"]);return g!=null&&m(e,["dest"],Lk(SC(g))),e}function sm(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const s=f(n,["displayName"]);s!=null&&m(e,["displayName"],s);const o=f(n,["state"]);o!=null&&m(e,["state"],AC(o));const l=f(n,["error"]);l!=null&&m(e,["error"],l);const u=f(n,["createTime"]);u!=null&&m(e,["createTime"],u);const d=f(n,["startTime"]);d!=null&&m(e,["startTime"],d);const p=f(n,["endTime"]);p!=null&&m(e,["endTime"],p);const g=f(n,["updateTime"]);g!=null&&m(e,["updateTime"],g);const v=f(n,["model"]);v!=null&&m(e,["model"],v);const T=f(n,["inputConfig"]);T!=null&&m(e,["src"],Ok(T));const S=f(n,["outputConfig"]);S!=null&&m(e,["dest"],Uk(SC(S)));const R=f(n,["completionStats"]);return R!=null&&m(e,["completionStats"],R),e}function Ok(n){const e={},t=f(n,["instancesFormat"]);t!=null&&m(e,["format"],t);const s=f(n,["gcsSource","uris"]);s!=null&&m(e,["gcsUri"],s);const o=f(n,["bigquerySource","inputUri"]);return o!=null&&m(e,["bigqueryUri"],o),e}function qk(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=f(e,["fileName"]);s!=null&&m(t,["fileName"],s);const o=f(e,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>dP(n,u))),m(t,["requests","requests"],l)}return t}function Bk(n){const e={},t=f(n,["format"]);t!=null&&m(e,["instancesFormat"],t);const s=f(n,["gcsUri"]);s!=null&&m(e,["gcsSource","uris"],s);const o=f(n,["bigqueryUri"]);if(o!=null&&m(e,["bigquerySource","inputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Fk(n){const e={},t=f(n,["data"]);if(t!=null&&m(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function Hk(n,e){const t={},s=f(e,["name"]);return s!=null&&m(t,["_url","name"],Ha(n,s)),t}function zk(n,e){const t={},s=f(e,["name"]);return s!=null&&m(t,["_url","name"],Ha(n,s)),t}function Gk(n){const e={},t=f(n,["content"]);t!=null&&m(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&m(e,["citationMetadata"],Jk(s));const o=f(n,["tokenCount"]);o!=null&&m(e,["tokenCount"],o);const l=f(n,["finishReason"]);l!=null&&m(e,["finishReason"],l);const u=f(n,["avgLogprobs"]);u!=null&&m(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&m(e,["groundingMetadata"],d);const p=f(n,["index"]);p!=null&&m(e,["index"],p);const g=f(n,["logprobsResult"]);g!=null&&m(e,["logprobsResult"],g);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(R=>R)),m(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&m(e,["urlContextMetadata"],T),e}function Jk(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["citations"],s)}return e}function CC(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>vP(l))),m(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&m(e,["role"],s),e}function Yk(n,e){const t={},s=f(n,["displayName"]);if(e!==void 0&&s!=null&&m(e,["batch","displayName"],s),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function Kk(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const o=f(n,["dest"]);return e!==void 0&&o!=null&&m(e,["outputConfig"],Vk(Pk(o))),t}function SE(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],et(n,s));const o=f(e,["src"]);o!=null&&m(t,["batch","inputConfig"],qk(n,EC(n,o)));const l=f(e,["config"]);return l!=null&&Yk(l,t),t}function $k(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["model"],et(n,s));const o=f(e,["src"]);o!=null&&m(t,["inputConfig"],Bk(EC(n,o)));const l=f(e,["config"]);return l!=null&&Kk(l,t),t}function Qk(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&m(e,["batch","displayName"],s),t}function Xk(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],et(n,s));const o=f(e,["src"]);o!=null&&m(t,["batch","inputConfig"],iP(n,o));const l=f(e,["config"]);return l!=null&&Qk(l,t),t}function Wk(n,e){const t={},s=f(e,["name"]);return s!=null&&m(t,["_url","name"],Ha(n,s)),t}function jk(n,e){const t={},s=f(e,["name"]);return s!=null&&m(t,["_url","name"],Ha(n,s)),t}function Zk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&m(e,["name"],s);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const l=f(n,["error"]);return l!=null&&m(e,["error"],l),e}function eP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&m(e,["name"],s);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const l=f(n,["error"]);return l!=null&&m(e,["error"],l),e}function tP(n,e){const t={},s=f(e,["contents"]);if(s!=null){let l=ng(n,s);Array.isArray(l)&&(l=l.map(u=>u)),m(t,["requests[]","request","content"],l)}const o=f(e,["config"]);return o!=null&&(m(t,["_self"],nP(o,t)),jD(t,{"requests[].*":"requests[].request.*"})),t}function nP(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&m(e,["requests[]","taskType"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&m(e,["requests[]","title"],o);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&m(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function iP(n,e){const t={},s=f(e,["fileName"]);s!=null&&m(t,["file_name"],s);const o=f(e,["inlinedRequests"]);return o!=null&&m(t,["requests"],tP(n,o)),t}function sP(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function rP(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&m(t,["systemInstruction"],CC(un(o)));const l=f(e,["temperature"]);l!=null&&m(s,["temperature"],l);const u=f(e,["topP"]);u!=null&&m(s,["topP"],u);const d=f(e,["topK"]);d!=null&&m(s,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&m(s,["candidateCount"],p);const g=f(e,["maxOutputTokens"]);g!=null&&m(s,["maxOutputTokens"],g);const v=f(e,["stopSequences"]);v!=null&&m(s,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&m(s,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&m(s,["logprobs"],S);const R=f(e,["presencePenalty"]);R!=null&&m(s,["presencePenalty"],R);const q=f(e,["frequencyPenalty"]);q!=null&&m(s,["frequencyPenalty"],q);const z=f(e,["seed"]);z!=null&&m(s,["seed"],z);const F=f(e,["responseMimeType"]);F!=null&&m(s,["responseMimeType"],F);const ne=f(e,["responseSchema"]);ne!=null&&m(s,["responseSchema"],ig(ne));const K=f(e,["responseJsonSchema"]);if(K!=null&&m(s,["responseJsonSchema"],K),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const W=f(e,["safetySettings"]);if(t!==void 0&&W!=null){let k=W;Array.isArray(k)&&(k=k.map(M=>TP(M))),m(t,["safetySettings"],k)}const ie=f(e,["tools"]);if(t!==void 0&&ie!=null){let k=Fa(ie);Array.isArray(k)&&(k=k.map(M=>EP(Ba(M)))),m(t,["tools"],k)}const de=f(e,["toolConfig"]);if(t!==void 0&&de!=null&&m(t,["toolConfig"],de),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const le=f(e,["cachedContent"]);t!==void 0&&le!=null&&m(t,["cachedContent"],Es(n,le));const D=f(e,["responseModalities"]);D!=null&&m(s,["responseModalities"],D);const N=f(e,["mediaResolution"]);N!=null&&m(s,["mediaResolution"],N);const x=f(e,["speechConfig"]);if(x!=null&&m(s,["speechConfig"],sg(x)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=f(e,["thinkingConfig"]);L!=null&&m(s,["thinkingConfig"],L);const P=f(e,["imageConfig"]);return P!=null&&m(s,["imageConfig"],P),s}function oP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(g=>Gk(g))),m(e,["candidates"],p)}const o=f(n,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const l=f(n,["promptFeedback"]);l!=null&&m(e,["promptFeedback"],l);const u=f(n,["responseId"]);u!=null&&m(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&m(e,["usageMetadata"],d),e}function aP(n,e){const t={},s=f(e,["name"]);return s!=null&&m(t,["_url","name"],Ha(n,s)),t}function lP(n,e){const t={},s=f(e,["name"]);return s!=null&&m(t,["_url","name"],Ha(n,s)),t}function uP(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function cP(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function dP(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["request","model"],et(n,s));const o=f(e,["contents"]);if(o!=null){let d=ni(o);Array.isArray(d)&&(d=d.map(p=>CC(p))),m(t,["request","contents"],d)}const l=f(e,["metadata"]);l!=null&&m(t,["metadata"],l);const u=f(e,["config"]);return u!=null&&m(t,["request","generationConfig"],rP(n,u,f(t,["request"],{}))),t}function fP(n){const e={},t=f(n,["response"]);t!=null&&m(e,["response"],oP(t));const s=f(n,["error"]);return s!=null&&m(e,["error"],s),e}function hP(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);if(e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function pP(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&m(e,["_query","pageToken"],o);const l=f(n,["filter"]);return e!==void 0&&l!=null&&m(e,["_query","filter"],l),t}function mP(n){const e={},t=f(n,["config"]);return t!=null&&hP(t,e),e}function gP(n){const e={},t=f(n,["config"]);return t!=null&&pP(t,e),e}function yP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=f(n,["operations"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>pd(u))),m(e,["batchJobs"],l)}return e}function _P(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=f(n,["batchPredictionJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>sm(u))),m(e,["batchJobs"],l)}return e}function vP(n){const e={},t=f(n,["functionCall"]);t!=null&&m(e,["functionCall"],t);const s=f(n,["codeExecutionResult"]);s!=null&&m(e,["codeExecutionResult"],s);const o=f(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&m(e,["fileData"],sP(l));const u=f(n,["functionResponse"]);u!=null&&m(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&m(e,["inlineData"],Fk(d));const p=f(n,["text"]);p!=null&&m(e,["text"],p);const g=f(n,["thought"]);g!=null&&m(e,["thought"],g);const v=f(n,["thoughtSignature"]);v!=null&&m(e,["thoughtSignature"],v);const T=f(n,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function TP(n){const e={},t=f(n,["category"]);if(t!=null&&m(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&m(e,["threshold"],s),e}function EP(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),m(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&m(e,["googleSearchRetrieval"],s);const o=f(n,["computerUse"]);o!=null&&m(e,["computerUse"],o);const l=f(n,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&m(e,["googleMaps"],uP(d));const p=f(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],cP(p));const g=f(n,["urlContext"]);return g!=null&&m(e,["urlContext"],g),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var vs;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(vs||(vs={}));class Ro{constructor(e,t,s,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,o)}init(e,t,s){var o,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!s||Object.keys(s).length===0?u={config:{}}:typeof s=="object"?u=Object.assign({},s):u=s,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SP extends Ts{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new Ro(vs.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=SE(this.apiClient,e),s=t._url,o=fe("{model}:batchGenerateContent",s),d=t.batch.inputConfig.requests,p=d.requests,g=[];for(const v of p){const T=Object.assign({},v);if(T.systemInstruction){const S=T.systemInstruction;delete T.systemInstruction;const R=T.request;R.systemInstruction=S,T.request=R}g.push(T)}return d.requests=g,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},o=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${o}`),s.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${o}`;else if(u)s.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const g=$k(this.apiClient,e);return d=fe("batchPredictionJobs",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>sm(v))}else{const g=SE(this.apiClient,e);return d=fe("{model}:batchGenerateContent",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>pd(v))}}async createEmbeddingsInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Xk(this.apiClient,e);return l=fe("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>pd(p))}}async get(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const g=lP(this.apiClient,e);return d=fe("batchPredictionJobs/{name}",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>sm(v))}else{const g=aP(this.apiClient,e);return d=fe("batches/{name}",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>pd(v))}}async cancel(e){var t,s,o,l;let u="",d={};if(this.apiClient.isVertexAI()){const p=zk(this.apiClient,e);u=fe("batchPredictionJobs/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const p=Hk(this.apiClient,e);u=fe("batches/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const g=gP(e);return d=fe("batchPredictionJobs",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=_P(v),S=new _E;return Object.assign(S,T),S})}else{const g=mP(e);return d=fe("batches",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=yP(v),S=new _E;return Object.assign(S,T),S})}}async delete(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const g=jk(this.apiClient,e);return d=fe("batchPredictionJobs/{name}",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>eP(v))}else{const g=Wk(this.apiClient,e);return d=fe("batches/{name}",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>Zk(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AP(n){const e={},t=f(n,["data"]);if(t!=null&&m(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function AE(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>GP(l))),m(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&m(e,["role"],s),e}function CP(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&m(e,["ttl"],s);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&m(e,["expireTime"],o);const l=f(n,["displayName"]);e!==void 0&&l!=null&&m(e,["displayName"],l);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let v=ni(u);Array.isArray(v)&&(v=v.map(T=>AE(T))),m(e,["contents"],v)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&m(e,["systemInstruction"],AE(un(d)));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let v=p;Array.isArray(v)&&(v=v.map(T=>JP(T))),m(e,["tools"],v)}const g=f(n,["toolConfig"]);if(e!==void 0&&g!=null&&m(e,["toolConfig"],g),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function IP(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&m(e,["ttl"],s);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&m(e,["expireTime"],o);const l=f(n,["displayName"]);e!==void 0&&l!=null&&m(e,["displayName"],l);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let T=ni(u);Array.isArray(T)&&(T=T.map(S=>S)),m(e,["contents"],T)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&m(e,["systemInstruction"],un(d));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let T=p;Array.isArray(T)&&(T=T.map(S=>YP(S))),m(e,["tools"],T)}const g=f(n,["toolConfig"]);e!==void 0&&g!=null&&m(e,["toolConfig"],g);const v=f(n,["kmsKeyName"]);return e!==void 0&&v!=null&&m(e,["encryption_spec","kmsKeyName"],v),t}function wP(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["model"],fC(n,s));const o=f(e,["config"]);return o!=null&&CP(o,t),t}function RP(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["model"],fC(n,s));const o=f(e,["config"]);return o!=null&&IP(o,t),t}function bP(n,e){const t={},s=f(e,["name"]);return s!=null&&m(t,["_url","name"],Es(n,s)),t}function xP(n,e){const t={},s=f(e,["name"]);return s!=null&&m(t,["_url","name"],Es(n,s)),t}function NP(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function MP(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function DP(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function kP(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&m(e,["description"],t);const s=f(n,["name"]);s!=null&&m(e,["name"],s);const o=f(n,["parameters"]);o!=null&&m(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&m(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function PP(n,e){const t={},s=f(e,["name"]);return s!=null&&m(t,["_url","name"],Es(n,s)),t}function LP(n,e){const t={},s=f(e,["name"]);return s!=null&&m(t,["_url","name"],Es(n,s)),t}function UP(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function VP(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function OP(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function qP(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function BP(n){const e={},t=f(n,["config"]);return t!=null&&OP(t,e),e}function FP(n){const e={},t=f(n,["config"]);return t!=null&&qP(t,e),e}function HP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=f(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["cachedContents"],l)}return e}function zP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=f(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["cachedContents"],l)}return e}function GP(n){const e={},t=f(n,["functionCall"]);t!=null&&m(e,["functionCall"],t);const s=f(n,["codeExecutionResult"]);s!=null&&m(e,["codeExecutionResult"],s);const o=f(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&m(e,["fileData"],DP(l));const u=f(n,["functionResponse"]);u!=null&&m(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&m(e,["inlineData"],AP(d));const p=f(n,["text"]);p!=null&&m(e,["text"],p);const g=f(n,["thought"]);g!=null&&m(e,["thought"],g);const v=f(n,["thoughtSignature"]);v!=null&&m(e,["thoughtSignature"],v);const T=f(n,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function JP(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),m(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&m(e,["googleSearchRetrieval"],s);const o=f(n,["computerUse"]);o!=null&&m(e,["computerUse"],o);const l=f(n,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&m(e,["googleMaps"],UP(d));const p=f(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],VP(p));const g=f(n,["urlContext"]);return g!=null&&m(e,["urlContext"],g),e}function YP(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>kP(S))),m(e,["functionDeclarations"],T)}const s=f(n,["retrieval"]);s!=null&&m(e,["retrieval"],s);const o=f(n,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const l=f(n,["computerUse"]);if(l!=null&&m(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&m(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const p=f(n,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const g=f(n,["googleSearch"]);g!=null&&m(e,["googleSearch"],g);const v=f(n,["urlContext"]);return v!=null&&m(e,["urlContext"],v),e}function KP(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&m(e,["ttl"],s);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&m(e,["expireTime"],o),t}function $P(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&m(e,["ttl"],s);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&m(e,["expireTime"],o),t}function QP(n,e){const t={},s=f(e,["name"]);s!=null&&m(t,["_url","name"],Es(n,s));const o=f(e,["config"]);return o!=null&&KP(o,t),t}function XP(n,e){const t={},s=f(e,["name"]);s!=null&&m(t,["_url","name"],Es(n,s));const o=f(e,["config"]);return o!=null&&$P(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WP extends Ts{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ro(vs.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const g=RP(this.apiClient,e);return d=fe("cachedContents",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const g=wP(this.apiClient,e);return d=fe("cachedContents",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const g=LP(this.apiClient,e);return d=fe("{name}",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const g=PP(this.apiClient,e);return d=fe("{name}",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const g=xP(this.apiClient,e);return d=fe("{name}",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=MP(v),S=new gE;return Object.assign(S,T),S})}else{const g=bP(this.apiClient,e);return d=fe("{name}",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=NP(v),S=new gE;return Object.assign(S,T),S})}}async update(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const g=XP(this.apiClient,e);return d=fe("{name}",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const g=QP(this.apiClient,e);return d=fe("{name}",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const g=FP(e);return d=fe("cachedContents",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=zP(v),S=new yE;return Object.assign(S,T),S})}else{const g=BP(e);return d=fe("cachedContents",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=HP(v),S=new yE;return Object.assign(S,T),S})}}}function CE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function gt(n){return this instanceof gt?(this.v=n,this):new gt(n)}function ba(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(R){return function(q){return Promise.resolve(q).then(R,T)}}function d(R,q){s[R]&&(o[R]=function(z){return new Promise(function(F,ne){l.push([R,z,F,ne])>1||p(R,z)})},q&&(o[R]=q(o[R])))}function p(R,q){try{g(s[R](q))}catch(z){S(l[0][3],z)}}function g(R){R.value instanceof gt?Promise.resolve(R.value.v).then(v,T):S(l[0][2],R)}function v(R){p("next",R)}function T(R){p("throw",R)}function S(R,q){R(q),l.shift(),l.length&&p(l[0][0],l[0][1])}}function ou(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof CE=="function"?CE(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(u){return new Promise(function(d,p){u=n[l](u),o(d,p,u.done,u.value)})}}function o(l,u,d,p){Promise.resolve(p).then(function(g){l({value:g,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jP(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:IC(t)}function IC(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function ZP(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function IE(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const o=[];let l=!0;for(;s<t&&n[s].role==="model";)o.push(n[s]),l&&!IC(n[s])&&(l=!1),s++;l?e.push(...o):e.pop()}return e}class e4{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new t4(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class t4{constructor(e,t,s,o={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),ZP(l)}async sendMessage(e){var t;await this.sendPromise;const s=un(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,u,d;const p=await o,g=(u=(l=p.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,v=p.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let S=[];v!=null&&(S=(d=v.slice(T))!==null&&d!==void 0?d:[]);const R=g?[g]:[];this.recordHistory(s,R,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const s=un(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?IE(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var s,o;return ba(this,arguments,function*(){var u,d,p,g;const v=[];try{for(var T=!0,S=ou(e),R;R=yield gt(S.next()),u=R.done,!u;T=!0){g=R.value,T=!1;const q=g;if(jP(q)){const z=(o=(s=q.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content;z!==void 0&&v.push(z)}yield yield gt(q)}}catch(q){d={error:q}}finally{try{!T&&!u&&(p=S.return)&&(yield gt(p.call(S)))}finally{if(d)throw d.error}}this.recordHistory(t,v)})}recordHistory(e,t,s){let o=[];t.length>0&&t.every(l=>l.role!==void 0)?o=t:o.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...IE(s)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jd extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,jd.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function n4(n){const e={},t=f(n,["file"]);return t!=null&&m(e,["file"],t),e}function i4(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function s4(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","file"],_C(t)),e}function r4(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function o4(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","file"],_C(t)),e}function a4(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function l4(n){const e={},t=f(n,["config"]);return t!=null&&a4(t,e),e}function u4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=f(n,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class c4 extends Ts{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ro(vs.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=l4(e);return l=fe("files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const g=u4(p),v=new Ek;return Object.assign(v,g),v})}}async createInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=n4(e);return l=fe("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const g=i4(p),v=new Sk;return Object.assign(v,g),v})}}async get(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=o4(e);return l=fe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=s4(e);return l=fe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const g=r4(p),v=new Ak;return Object.assign(v,g),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function md(n){const e={},t=f(n,["data"]);if(t!=null&&m(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function d4(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>w4(l))),m(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&m(e,["role"],s),e}function f4(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function h4(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&m(e,["description"],t);const s=f(n,["name"]);s!=null&&m(e,["name"],s);const o=f(n,["parameters"]);o!=null&&m(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&m(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function p4(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&m(e,["modelConfig"],t);const s=f(n,["responseJsonSchema"]);s!=null&&m(e,["responseJsonSchema"],s);const o=f(n,["audioTimestamp"]);o!=null&&m(e,["audioTimestamp"],o);const l=f(n,["candidateCount"]);l!=null&&m(e,["candidateCount"],l);const u=f(n,["enableAffectiveDialog"]);u!=null&&m(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&m(e,["frequencyPenalty"],d);const p=f(n,["logprobs"]);p!=null&&m(e,["logprobs"],p);const g=f(n,["maxOutputTokens"]);g!=null&&m(e,["maxOutputTokens"],g);const v=f(n,["mediaResolution"]);v!=null&&m(e,["mediaResolution"],v);const T=f(n,["presencePenalty"]);T!=null&&m(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&m(e,["responseLogprobs"],S);const R=f(n,["responseMimeType"]);R!=null&&m(e,["responseMimeType"],R);const q=f(n,["responseModalities"]);q!=null&&m(e,["responseModalities"],q);const z=f(n,["responseSchema"]);z!=null&&m(e,["responseSchema"],z);const F=f(n,["routingConfig"]);F!=null&&m(e,["routingConfig"],F);const ne=f(n,["seed"]);ne!=null&&m(e,["seed"],ne);const K=f(n,["speechConfig"]);K!=null&&m(e,["speechConfig"],wC(K));const W=f(n,["stopSequences"]);W!=null&&m(e,["stopSequences"],W);const ie=f(n,["temperature"]);ie!=null&&m(e,["temperature"],ie);const de=f(n,["thinkingConfig"]);de!=null&&m(e,["thinkingConfig"],de);const le=f(n,["topK"]);le!=null&&m(e,["topK"],le);const D=f(n,["topP"]);if(D!=null&&m(e,["topP"],D),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function m4(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function g4(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function y4(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig"],s);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const g=f(n,["mediaResolution"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","mediaResolution"],g);const v=f(n,["seed"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","speechConfig"],rg(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&m(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],R);const q=f(n,["systemInstruction"]);e!==void 0&&q!=null&&m(e,["setup","systemInstruction"],d4(un(q)));const z=f(n,["tools"]);if(e!==void 0&&z!=null){let le=Fa(z);Array.isArray(le)&&(le=le.map(D=>b4(Ba(D)))),m(e,["setup","tools"],le)}const F=f(n,["sessionResumption"]);e!==void 0&&F!=null&&m(e,["setup","sessionResumption"],R4(F));const ne=f(n,["inputAudioTranscription"]);e!==void 0&&ne!=null&&m(e,["setup","inputAudioTranscription"],ne);const K=f(n,["outputAudioTranscription"]);e!==void 0&&K!=null&&m(e,["setup","outputAudioTranscription"],K);const W=f(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&m(e,["setup","realtimeInputConfig"],W);const ie=f(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&m(e,["setup","contextWindowCompression"],ie);const de=f(n,["proactivity"]);return e!==void 0&&de!=null&&m(e,["setup","proactivity"],de),t}function _4(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig"],p4(s));const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const g=f(n,["mediaResolution"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","mediaResolution"],g);const v=f(n,["seed"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","speechConfig"],wC(rg(T)));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&m(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],R);const q=f(n,["systemInstruction"]);e!==void 0&&q!=null&&m(e,["setup","systemInstruction"],un(q));const z=f(n,["tools"]);if(e!==void 0&&z!=null){let le=Fa(z);Array.isArray(le)&&(le=le.map(D=>x4(Ba(D)))),m(e,["setup","tools"],le)}const F=f(n,["sessionResumption"]);e!==void 0&&F!=null&&m(e,["setup","sessionResumption"],F);const ne=f(n,["inputAudioTranscription"]);e!==void 0&&ne!=null&&m(e,["setup","inputAudioTranscription"],ne);const K=f(n,["outputAudioTranscription"]);e!==void 0&&K!=null&&m(e,["setup","outputAudioTranscription"],K);const W=f(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&m(e,["setup","realtimeInputConfig"],W);const ie=f(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&m(e,["setup","contextWindowCompression"],ie);const de=f(n,["proactivity"]);return e!==void 0&&de!=null&&m(e,["setup","proactivity"],de),t}function v4(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["setup","model"],et(n,s));const o=f(e,["config"]);return o!=null&&m(t,["config"],y4(o,t)),t}function T4(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["setup","model"],et(n,s));const o=f(e,["config"]);return o!=null&&m(t,["config"],_4(o,t)),t}function E4(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&m(e,["musicGenerationConfig"],t),e}function S4(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["weightedPrompts"],s)}return e}function A4(n){const e={},t=f(n,["media"]);if(t!=null){let g=hC(t);Array.isArray(g)&&(g=g.map(v=>md(v))),m(e,["mediaChunks"],g)}const s=f(n,["audio"]);s!=null&&m(e,["audio"],md(mC(s)));const o=f(n,["audioStreamEnd"]);o!=null&&m(e,["audioStreamEnd"],o);const l=f(n,["video"]);l!=null&&m(e,["video"],md(pC(l)));const u=f(n,["text"]);u!=null&&m(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&m(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function C4(n){const e={},t=f(n,["media"]);if(t!=null){let g=hC(t);Array.isArray(g)&&(g=g.map(v=>v)),m(e,["mediaChunks"],g)}const s=f(n,["audio"]);s!=null&&m(e,["audio"],mC(s));const o=f(n,["audioStreamEnd"]);o!=null&&m(e,["audioStreamEnd"],o);const l=f(n,["video"]);l!=null&&m(e,["video"],pC(l));const u=f(n,["text"]);u!=null&&m(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&m(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function I4(n){const e={},t=f(n,["setupComplete"]);t!=null&&m(e,["setupComplete"],t);const s=f(n,["serverContent"]);s!=null&&m(e,["serverContent"],s);const o=f(n,["toolCall"]);o!=null&&m(e,["toolCall"],o);const l=f(n,["toolCallCancellation"]);l!=null&&m(e,["toolCallCancellation"],l);const u=f(n,["usageMetadata"]);u!=null&&m(e,["usageMetadata"],N4(u));const d=f(n,["goAway"]);d!=null&&m(e,["goAway"],d);const p=f(n,["sessionResumptionUpdate"]);return p!=null&&m(e,["sessionResumptionUpdate"],p),e}function w4(n){const e={},t=f(n,["functionCall"]);t!=null&&m(e,["functionCall"],t);const s=f(n,["codeExecutionResult"]);s!=null&&m(e,["codeExecutionResult"],s);const o=f(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&m(e,["fileData"],f4(l));const u=f(n,["functionResponse"]);u!=null&&m(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&m(e,["inlineData"],md(d));const p=f(n,["text"]);p!=null&&m(e,["text"],p);const g=f(n,["thought"]);g!=null&&m(e,["thought"],g);const v=f(n,["thoughtSignature"]);v!=null&&m(e,["thoughtSignature"],v);const T=f(n,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function R4(n){const e={},t=f(n,["handle"]);if(t!=null&&m(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function wC(n){const e={},t=f(n,["languageCode"]);t!=null&&m(e,["languageCode"],t);const s=f(n,["voiceConfig"]);if(s!=null&&m(e,["voiceConfig"],s),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function b4(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),m(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&m(e,["googleSearchRetrieval"],s);const o=f(n,["computerUse"]);o!=null&&m(e,["computerUse"],o);const l=f(n,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&m(e,["googleMaps"],m4(d));const p=f(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],g4(p));const g=f(n,["urlContext"]);return g!=null&&m(e,["urlContext"],g),e}function x4(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>h4(S))),m(e,["functionDeclarations"],T)}const s=f(n,["retrieval"]);s!=null&&m(e,["retrieval"],s);const o=f(n,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const l=f(n,["computerUse"]);if(l!=null&&m(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&m(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const p=f(n,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const g=f(n,["googleSearch"]);g!=null&&m(e,["googleSearch"],g);const v=f(n,["urlContext"]);return v!=null&&m(e,["urlContext"],v),e}function N4(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&m(e,["promptTokenCount"],t);const s=f(n,["cachedContentTokenCount"]);s!=null&&m(e,["cachedContentTokenCount"],s);const o=f(n,["candidatesTokenCount"]);o!=null&&m(e,["responseTokenCount"],o);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&m(e,["toolUsePromptTokenCount"],l);const u=f(n,["thoughtsTokenCount"]);u!=null&&m(e,["thoughtsTokenCount"],u);const d=f(n,["totalTokenCount"]);d!=null&&m(e,["totalTokenCount"],d);const p=f(n,["promptTokensDetails"]);if(p!=null){let R=p;Array.isArray(R)&&(R=R.map(q=>q)),m(e,["promptTokensDetails"],R)}const g=f(n,["cacheTokensDetails"]);if(g!=null){let R=g;Array.isArray(R)&&(R=R.map(q=>q)),m(e,["cacheTokensDetails"],R)}const v=f(n,["candidatesTokensDetails"]);if(v!=null){let R=v;Array.isArray(R)&&(R=R.map(q=>q)),m(e,["responseTokensDetails"],R)}const T=f(n,["toolUsePromptTokensDetails"]);if(T!=null){let R=T;Array.isArray(R)&&(R=R.map(q=>q)),m(e,["toolUsePromptTokensDetails"],R)}const S=f(n,["trafficType"]);return S!=null&&m(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function M4(n){const e={},t=f(n,["data"]);if(t!=null&&m(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function D4(n){const e={},t=f(n,["content"]);t!=null&&m(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&m(e,["citationMetadata"],k4(s));const o=f(n,["tokenCount"]);o!=null&&m(e,["tokenCount"],o);const l=f(n,["finishReason"]);l!=null&&m(e,["finishReason"],l);const u=f(n,["avgLogprobs"]);u!=null&&m(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&m(e,["groundingMetadata"],d);const p=f(n,["index"]);p!=null&&m(e,["index"],p);const g=f(n,["logprobsResult"]);g!=null&&m(e,["logprobsResult"],g);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(R=>R)),m(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&m(e,["urlContextMetadata"],T),e}function k4(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["citations"],s)}return e}function P4(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],et(n,s));const o=f(e,["contents"]);if(o!=null){let l=ni(o);Array.isArray(l)&&(l=l.map(u=>u)),m(t,["contents"],l)}return t}function L4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["tokensInfo"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),m(e,["tokensInfo"],o)}return e}function U4(n){const e={},t=f(n,["values"]);t!=null&&m(e,["values"],t);const s=f(n,["statistics"]);return s!=null&&m(e,["statistics"],V4(s)),e}function V4(n){const e={},t=f(n,["truncated"]);t!=null&&m(e,["truncated"],t);const s=f(n,["token_count"]);return s!=null&&m(e,["tokenCount"],s),e}function Zd(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>HL(l))),m(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&m(e,["role"],s),e}function O4(n){const e={},t=f(n,["controlType"]);t!=null&&m(e,["controlType"],t);const s=f(n,["enableControlImageComputation"]);return s!=null&&m(e,["computeControl"],s),e}function q4(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function B4(n,e){const t={},s=f(n,["systemInstruction"]);e!==void 0&&s!=null&&m(e,["systemInstruction"],un(s));const o=f(n,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>MC(d))),m(e,["tools"],u)}const l=f(n,["generationConfig"]);return e!==void 0&&l!=null&&m(e,["generationConfig"],xL(l)),t}function F4(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],et(n,s));const o=f(e,["contents"]);if(o!=null){let u=ni(o);Array.isArray(u)&&(u=u.map(d=>Zd(d))),m(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&q4(l),t}function H4(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],et(n,s));const o=f(e,["contents"]);if(o!=null){let u=ni(o);Array.isArray(u)&&(u=u.map(d=>d)),m(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&B4(l,t),t}function z4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);s!=null&&m(e,["totalTokens"],s);const o=f(n,["cachedContentTokenCount"]);return o!=null&&m(e,["cachedContentTokenCount"],o),e}function G4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);return s!=null&&m(e,["totalTokens"],s),e}function J4(n,e){const t={},s=f(e,["model"]);return s!=null&&m(t,["_url","name"],et(n,s)),t}function Y4(n,e){const t={},s=f(e,["model"]);return s!=null&&m(t,["_url","name"],et(n,s)),t}function K4(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function $4(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function Q4(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&m(e,["parameters","storageUri"],s);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&m(e,["parameters","negativePrompt"],o);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&m(e,["parameters","sampleCount"],l);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&m(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&m(e,["parameters","guidanceScale"],d);const p=f(n,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const g=f(n,["safetyFilterLevel"]);e!==void 0&&g!=null&&m(e,["parameters","safetySetting"],g);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&m(e,["parameters","personGeneration"],v);const T=f(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&m(e,["parameters","includeSafetyAttributes"],T);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&m(e,["parameters","includeRaiReason"],S);const R=f(n,["language"]);e!==void 0&&R!=null&&m(e,["parameters","language"],R);const q=f(n,["outputMimeType"]);e!==void 0&&q!=null&&m(e,["parameters","outputOptions","mimeType"],q);const z=f(n,["outputCompressionQuality"]);e!==void 0&&z!=null&&m(e,["parameters","outputOptions","compressionQuality"],z);const F=f(n,["addWatermark"]);e!==void 0&&F!=null&&m(e,["parameters","addWatermark"],F);const ne=f(n,["labels"]);e!==void 0&&ne!=null&&m(e,["labels"],ne);const K=f(n,["editMode"]);e!==void 0&&K!=null&&m(e,["parameters","editMode"],K);const W=f(n,["baseSteps"]);return e!==void 0&&W!=null&&m(e,["parameters","editConfig","baseSteps"],W),t}function X4(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],et(n,s));const o=f(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const l=f(e,["referenceImages"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>$L(p))),m(t,["instances[0]","referenceImages"],d)}const u=f(e,["config"]);return u!=null&&Q4(u,t),t}function W4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>ef(l))),m(e,["generatedImages"],o)}return e}function j4(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&m(e,["requests[]","taskType"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&m(e,["requests[]","title"],o);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&m(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Z4(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&m(e,["instances[]","task_type"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&m(e,["instances[]","title"],o);const l=f(n,["outputDimensionality"]);e!==void 0&&l!=null&&m(e,["parameters","outputDimensionality"],l);const u=f(n,["mimeType"]);e!==void 0&&u!=null&&m(e,["instances[]","mimeType"],u);const d=f(n,["autoTruncate"]);return e!==void 0&&d!=null&&m(e,["parameters","autoTruncate"],d),t}function eL(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],et(n,s));const o=f(e,["contents"]);if(o!=null){let d=ng(n,o);Array.isArray(d)&&(d=d.map(p=>p)),m(t,["requests[]","content"],d)}const l=f(e,["config"]);l!=null&&j4(l,t);const u=f(e,["model"]);return u!==void 0&&m(t,["requests[]","model"],et(n,u)),t}function tL(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],et(n,s));const o=f(e,["contents"]);if(o!=null){let u=ng(n,o);Array.isArray(u)&&(u=u.map(d=>d)),m(t,["instances[]","content"],u)}const l=f(e,["config"]);return l!=null&&Z4(l,t),t}function nL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["embeddings"],l)}const o=f(n,["metadata"]);return o!=null&&m(e,["metadata"],o),e}function iL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>U4(u))),m(e,["embeddings"],l)}const o=f(n,["metadata"]);return o!=null&&m(e,["metadata"],o),e}function sL(n){const e={},t=f(n,["endpoint"]);t!=null&&m(e,["name"],t);const s=f(n,["deployedModelId"]);return s!=null&&m(e,["deployedModelId"],s),e}function rL(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function oL(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&m(e,["description"],t);const s=f(n,["name"]);s!=null&&m(e,["name"],s);const o=f(n,["parameters"]);o!=null&&m(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&m(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function aL(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&m(t,["systemInstruction"],Zd(un(o)));const l=f(e,["temperature"]);l!=null&&m(s,["temperature"],l);const u=f(e,["topP"]);u!=null&&m(s,["topP"],u);const d=f(e,["topK"]);d!=null&&m(s,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&m(s,["candidateCount"],p);const g=f(e,["maxOutputTokens"]);g!=null&&m(s,["maxOutputTokens"],g);const v=f(e,["stopSequences"]);v!=null&&m(s,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&m(s,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&m(s,["logprobs"],S);const R=f(e,["presencePenalty"]);R!=null&&m(s,["presencePenalty"],R);const q=f(e,["frequencyPenalty"]);q!=null&&m(s,["frequencyPenalty"],q);const z=f(e,["seed"]);z!=null&&m(s,["seed"],z);const F=f(e,["responseMimeType"]);F!=null&&m(s,["responseMimeType"],F);const ne=f(e,["responseSchema"]);ne!=null&&m(s,["responseSchema"],ig(ne));const K=f(e,["responseJsonSchema"]);if(K!=null&&m(s,["responseJsonSchema"],K),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const W=f(e,["safetySettings"]);if(t!==void 0&&W!=null){let k=W;Array.isArray(k)&&(k=k.map(M=>QL(M))),m(t,["safetySettings"],k)}const ie=f(e,["tools"]);if(t!==void 0&&ie!=null){let k=Fa(ie);Array.isArray(k)&&(k=k.map(M=>tU(Ba(M)))),m(t,["tools"],k)}const de=f(e,["toolConfig"]);if(t!==void 0&&de!=null&&m(t,["toolConfig"],de),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const le=f(e,["cachedContent"]);t!==void 0&&le!=null&&m(t,["cachedContent"],Es(n,le));const D=f(e,["responseModalities"]);D!=null&&m(s,["responseModalities"],D);const N=f(e,["mediaResolution"]);N!=null&&m(s,["mediaResolution"],N);const x=f(e,["speechConfig"]);if(x!=null&&m(s,["speechConfig"],sg(x)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=f(e,["thinkingConfig"]);L!=null&&m(s,["thinkingConfig"],L);const P=f(e,["imageConfig"]);return P!=null&&m(s,["imageConfig"],P),s}function lL(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&m(t,["systemInstruction"],un(o));const l=f(e,["temperature"]);l!=null&&m(s,["temperature"],l);const u=f(e,["topP"]);u!=null&&m(s,["topP"],u);const d=f(e,["topK"]);d!=null&&m(s,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&m(s,["candidateCount"],p);const g=f(e,["maxOutputTokens"]);g!=null&&m(s,["maxOutputTokens"],g);const v=f(e,["stopSequences"]);v!=null&&m(s,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&m(s,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&m(s,["logprobs"],S);const R=f(e,["presencePenalty"]);R!=null&&m(s,["presencePenalty"],R);const q=f(e,["frequencyPenalty"]);q!=null&&m(s,["frequencyPenalty"],q);const z=f(e,["seed"]);z!=null&&m(s,["seed"],z);const F=f(e,["responseMimeType"]);F!=null&&m(s,["responseMimeType"],F);const ne=f(e,["responseSchema"]);ne!=null&&m(s,["responseSchema"],ig(ne));const K=f(e,["responseJsonSchema"]);K!=null&&m(s,["responseJsonSchema"],K);const W=f(e,["routingConfig"]);W!=null&&m(s,["routingConfig"],W);const ie=f(e,["modelSelectionConfig"]);ie!=null&&m(s,["modelConfig"],ie);const de=f(e,["safetySettings"]);if(t!==void 0&&de!=null){let $=de;Array.isArray($)&&($=$.map(oe=>oe)),m(t,["safetySettings"],$)}const le=f(e,["tools"]);if(t!==void 0&&le!=null){let $=Fa(le);Array.isArray($)&&($=$.map(oe=>MC(Ba(oe)))),m(t,["tools"],$)}const D=f(e,["toolConfig"]);t!==void 0&&D!=null&&m(t,["toolConfig"],D);const N=f(e,["labels"]);t!==void 0&&N!=null&&m(t,["labels"],N);const x=f(e,["cachedContent"]);t!==void 0&&x!=null&&m(t,["cachedContent"],Es(n,x));const L=f(e,["responseModalities"]);L!=null&&m(s,["responseModalities"],L);const P=f(e,["mediaResolution"]);P!=null&&m(s,["mediaResolution"],P);const k=f(e,["speechConfig"]);k!=null&&m(s,["speechConfig"],NC(sg(k)));const M=f(e,["audioTimestamp"]);M!=null&&m(s,["audioTimestamp"],M);const Qe=f(e,["thinkingConfig"]);Qe!=null&&m(s,["thinkingConfig"],Qe);const Ie=f(e,["imageConfig"]);return Ie!=null&&m(s,["imageConfig"],Ie),s}function wE(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],et(n,s));const o=f(e,["contents"]);if(o!=null){let u=ni(o);Array.isArray(u)&&(u=u.map(d=>Zd(d))),m(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&m(t,["generationConfig"],aL(n,l,t)),t}function RE(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],et(n,s));const o=f(e,["contents"]);if(o!=null){let u=ni(o);Array.isArray(u)&&(u=u.map(d=>d)),m(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&m(t,["generationConfig"],lL(n,l,t)),t}function bE(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(g=>D4(g))),m(e,["candidates"],p)}const o=f(n,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const l=f(n,["promptFeedback"]);l!=null&&m(e,["promptFeedback"],l);const u=f(n,["responseId"]);u!=null&&m(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&m(e,["usageMetadata"],d),e}function xE(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(v=>v)),m(e,["candidates"],g)}const o=f(n,["createTime"]);o!=null&&m(e,["createTime"],o);const l=f(n,["modelVersion"]);l!=null&&m(e,["modelVersion"],l);const u=f(n,["promptFeedback"]);u!=null&&m(e,["promptFeedback"],u);const d=f(n,["responseId"]);d!=null&&m(e,["responseId"],d);const p=f(n,["usageMetadata"]);return p!=null&&m(e,["usageMetadata"],p),e}function uL(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s);const o=f(n,["aspectRatio"]);e!==void 0&&o!=null&&m(e,["parameters","aspectRatio"],o);const l=f(n,["guidanceScale"]);if(e!==void 0&&l!=null&&m(e,["parameters","guidanceScale"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&m(e,["parameters","safetySetting"],u);const d=f(n,["personGeneration"]);e!==void 0&&d!=null&&m(e,["parameters","personGeneration"],d);const p=f(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&m(e,["parameters","includeSafetyAttributes"],p);const g=f(n,["includeRaiReason"]);e!==void 0&&g!=null&&m(e,["parameters","includeRaiReason"],g);const v=f(n,["language"]);e!==void 0&&v!=null&&m(e,["parameters","language"],v);const T=f(n,["outputMimeType"]);e!==void 0&&T!=null&&m(e,["parameters","outputOptions","mimeType"],T);const S=f(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&m(e,["parameters","outputOptions","compressionQuality"],S),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=f(n,["imageSize"]);if(e!==void 0&&R!=null&&m(e,["parameters","sampleImageSize"],R),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function cL(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&m(e,["parameters","storageUri"],s);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&m(e,["parameters","negativePrompt"],o);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&m(e,["parameters","sampleCount"],l);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&m(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&m(e,["parameters","guidanceScale"],d);const p=f(n,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const g=f(n,["safetyFilterLevel"]);e!==void 0&&g!=null&&m(e,["parameters","safetySetting"],g);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&m(e,["parameters","personGeneration"],v);const T=f(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&m(e,["parameters","includeSafetyAttributes"],T);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&m(e,["parameters","includeRaiReason"],S);const R=f(n,["language"]);e!==void 0&&R!=null&&m(e,["parameters","language"],R);const q=f(n,["outputMimeType"]);e!==void 0&&q!=null&&m(e,["parameters","outputOptions","mimeType"],q);const z=f(n,["outputCompressionQuality"]);e!==void 0&&z!=null&&m(e,["parameters","outputOptions","compressionQuality"],z);const F=f(n,["addWatermark"]);e!==void 0&&F!=null&&m(e,["parameters","addWatermark"],F);const ne=f(n,["labels"]);e!==void 0&&ne!=null&&m(e,["labels"],ne);const K=f(n,["imageSize"]);e!==void 0&&K!=null&&m(e,["parameters","sampleImageSize"],K);const W=f(n,["enhancePrompt"]);return e!==void 0&&W!=null&&m(e,["parameters","enhancePrompt"],W),t}function dL(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],et(n,s));const o=f(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const l=f(e,["config"]);return l!=null&&uL(l,t),t}function fL(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],et(n,s));const o=f(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const l=f(e,["config"]);return l!=null&&cL(l,t),t}function hL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>IL(u))),m(e,["generatedImages"],l)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&m(e,["positivePromptSafetyAttributes"],bC(o)),e}function pL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>ef(u))),m(e,["generatedImages"],l)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&m(e,["positivePromptSafetyAttributes"],xC(o)),e}function mL(n,e){const t={},s=f(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=f(n,["durationSeconds"]);if(e!==void 0&&o!=null&&m(e,["parameters","durationSeconds"],o),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&m(e,["parameters","aspectRatio"],l);const u=f(n,["resolution"]);e!==void 0&&u!=null&&m(e,["parameters","resolution"],u);const d=f(n,["personGeneration"]);if(e!==void 0&&d!=null&&m(e,["parameters","personGeneration"],d),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=f(n,["negativePrompt"]);e!==void 0&&p!=null&&m(e,["parameters","negativePrompt"],p);const g=f(n,["enhancePrompt"]);if(e!==void 0&&g!=null&&m(e,["parameters","enhancePrompt"],g),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=f(n,["lastFrame"]);e!==void 0&&v!=null&&m(e,["instances[0]","lastFrame"],tf(v));const T=f(n,["referenceImages"]);if(e!==void 0&&T!=null){let S=T;Array.isArray(S)&&(S=S.map(R=>pU(R))),m(e,["instances[0]","referenceImages"],S)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function gL(n,e){const t={},s=f(n,["numberOfVideos"]);e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s);const o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const l=f(n,["fps"]);e!==void 0&&l!=null&&m(e,["parameters","fps"],l);const u=f(n,["durationSeconds"]);e!==void 0&&u!=null&&m(e,["parameters","durationSeconds"],u);const d=f(n,["seed"]);e!==void 0&&d!=null&&m(e,["parameters","seed"],d);const p=f(n,["aspectRatio"]);e!==void 0&&p!=null&&m(e,["parameters","aspectRatio"],p);const g=f(n,["resolution"]);e!==void 0&&g!=null&&m(e,["parameters","resolution"],g);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&m(e,["parameters","personGeneration"],v);const T=f(n,["pubsubTopic"]);e!==void 0&&T!=null&&m(e,["parameters","pubsubTopic"],T);const S=f(n,["negativePrompt"]);e!==void 0&&S!=null&&m(e,["parameters","negativePrompt"],S);const R=f(n,["enhancePrompt"]);e!==void 0&&R!=null&&m(e,["parameters","enhancePrompt"],R);const q=f(n,["generateAudio"]);e!==void 0&&q!=null&&m(e,["parameters","generateAudio"],q);const z=f(n,["lastFrame"]);e!==void 0&&z!=null&&m(e,["instances[0]","lastFrame"],gi(z));const F=f(n,["referenceImages"]);if(e!==void 0&&F!=null){let W=F;Array.isArray(W)&&(W=W.map(ie=>mU(ie))),m(e,["instances[0]","referenceImages"],W)}const ne=f(n,["mask"]);e!==void 0&&ne!=null&&m(e,["instances[0]","mask"],hU(ne));const K=f(n,["compressionQuality"]);return e!==void 0&&K!=null&&m(e,["parameters","compressionQuality"],K),t}function yL(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const s=f(n,["metadata"]);s!=null&&m(e,["metadata"],s);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const l=f(n,["error"]);l!=null&&m(e,["error"],l);const u=f(n,["response","generateVideoResponse"]);return u!=null&&m(e,["response"],EL(u)),e}function _L(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const s=f(n,["metadata"]);s!=null&&m(e,["metadata"],s);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const l=f(n,["error"]);l!=null&&m(e,["error"],l);const u=f(n,["response"]);return u!=null&&m(e,["response"],SL(u)),e}function vL(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],et(n,s));const o=f(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const l=f(e,["image"]);l!=null&&m(t,["instances[0]","image"],tf(l));const u=f(e,["video"]);u!=null&&m(t,["instances[0]","video"],DC(u));const d=f(e,["source"]);d!=null&&AL(d,t);const p=f(e,["config"]);return p!=null&&mL(p,t),t}function TL(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],et(n,s));const o=f(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const l=f(e,["image"]);l!=null&&m(t,["instances[0]","image"],gi(l));const u=f(e,["video"]);u!=null&&m(t,["instances[0]","video"],kC(u));const d=f(e,["source"]);d!=null&&CL(d,t);const p=f(e,["config"]);return p!=null&&gL(p,t),t}function EL(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>RL(u))),m(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&m(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function SL(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>bL(u))),m(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&m(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function AL(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&m(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],tf(o));const l=f(n,["video"]);return e!==void 0&&l!=null&&m(e,["instances[0]","video"],DC(l)),t}function CL(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&m(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],gi(o));const l=f(n,["video"]);return e!==void 0&&l!=null&&m(e,["instances[0]","video"],kC(l)),t}function IL(n){const e={},t=f(n,["_self"]);t!=null&&m(e,["image"],PL(t));const s=f(n,["raiFilteredReason"]);s!=null&&m(e,["raiFilteredReason"],s);const o=f(n,["_self"]);return o!=null&&m(e,["safetyAttributes"],bC(o)),e}function ef(n){const e={},t=f(n,["_self"]);t!=null&&m(e,["image"],RC(t));const s=f(n,["raiFilteredReason"]);s!=null&&m(e,["raiFilteredReason"],s);const o=f(n,["_self"]);o!=null&&m(e,["safetyAttributes"],xC(o));const l=f(n,["prompt"]);return l!=null&&m(e,["enhancedPrompt"],l),e}function wL(n){const e={},t=f(n,["_self"]);t!=null&&m(e,["mask"],RC(t));const s=f(n,["labels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),m(e,["labels"],o)}return e}function RL(n){const e={},t=f(n,["video"]);return t!=null&&m(e,["video"],dU(t)),e}function bL(n){const e={},t=f(n,["_self"]);return t!=null&&m(e,["video"],fU(t)),e}function xL(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&m(e,["modelConfig"],t);const s=f(n,["responseJsonSchema"]);s!=null&&m(e,["responseJsonSchema"],s);const o=f(n,["audioTimestamp"]);o!=null&&m(e,["audioTimestamp"],o);const l=f(n,["candidateCount"]);l!=null&&m(e,["candidateCount"],l);const u=f(n,["enableAffectiveDialog"]);u!=null&&m(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&m(e,["frequencyPenalty"],d);const p=f(n,["logprobs"]);p!=null&&m(e,["logprobs"],p);const g=f(n,["maxOutputTokens"]);g!=null&&m(e,["maxOutputTokens"],g);const v=f(n,["mediaResolution"]);v!=null&&m(e,["mediaResolution"],v);const T=f(n,["presencePenalty"]);T!=null&&m(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&m(e,["responseLogprobs"],S);const R=f(n,["responseMimeType"]);R!=null&&m(e,["responseMimeType"],R);const q=f(n,["responseModalities"]);q!=null&&m(e,["responseModalities"],q);const z=f(n,["responseSchema"]);z!=null&&m(e,["responseSchema"],z);const F=f(n,["routingConfig"]);F!=null&&m(e,["routingConfig"],F);const ne=f(n,["seed"]);ne!=null&&m(e,["seed"],ne);const K=f(n,["speechConfig"]);K!=null&&m(e,["speechConfig"],NC(K));const W=f(n,["stopSequences"]);W!=null&&m(e,["stopSequences"],W);const ie=f(n,["temperature"]);ie!=null&&m(e,["temperature"],ie);const de=f(n,["thinkingConfig"]);de!=null&&m(e,["thinkingConfig"],de);const le=f(n,["topK"]);le!=null&&m(e,["topK"],le);const D=f(n,["topP"]);if(D!=null&&m(e,["topP"],D),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function NL(n,e){const t={},s=f(e,["model"]);return s!=null&&m(t,["_url","name"],et(n,s)),t}function ML(n,e){const t={},s=f(e,["model"]);return s!=null&&m(t,["_url","name"],et(n,s)),t}function DL(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function kL(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function PL(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&m(e,["imageBytes"],Vr(t));const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function RC(n){const e={},t=f(n,["gcsUri"]);t!=null&&m(e,["gcsUri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&m(e,["imageBytes"],Vr(s));const o=f(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function tf(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&m(e,["bytesBase64Encoded"],Vr(t));const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function gi(n){const e={},t=f(n,["gcsUri"]);t!=null&&m(e,["gcsUri"],t);const s=f(n,["imageBytes"]);s!=null&&m(e,["bytesBase64Encoded"],Vr(s));const o=f(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function LL(n,e,t){const s={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&m(t,["_query","pageSize"],o);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&m(t,["_query","pageToken"],l);const u=f(e,["filter"]);t!==void 0&&u!=null&&m(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&m(t,["_url","models_url"],vC(n,d)),s}function UL(n,e,t){const s={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&m(t,["_query","pageSize"],o);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&m(t,["_query","pageToken"],l);const u=f(e,["filter"]);t!==void 0&&u!=null&&m(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&m(t,["_url","models_url"],vC(n,d)),s}function VL(n,e){const t={},s=f(e,["config"]);return s!=null&&LL(n,s,t),t}function OL(n,e){const t={},s=f(e,["config"]);return s!=null&&UL(n,s,t),t}function qL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=f(n,["_self"]);if(o!=null){let l=TC(o);Array.isArray(l)&&(l=l.map(u=>rm(u))),m(e,["models"],l)}return e}function BL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=f(n,["_self"]);if(o!=null){let l=TC(o);Array.isArray(l)&&(l=l.map(u=>om(u))),m(e,["models"],l)}return e}function FL(n){const e={},t=f(n,["maskMode"]);t!=null&&m(e,["maskMode"],t);const s=f(n,["segmentationClasses"]);s!=null&&m(e,["maskClasses"],s);const o=f(n,["maskDilation"]);return o!=null&&m(e,["dilation"],o),e}function rm(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const s=f(n,["displayName"]);s!=null&&m(e,["displayName"],s);const o=f(n,["description"]);o!=null&&m(e,["description"],o);const l=f(n,["version"]);l!=null&&m(e,["version"],l);const u=f(n,["_self"]);u!=null&&m(e,["tunedModelInfo"],nU(u));const d=f(n,["inputTokenLimit"]);d!=null&&m(e,["inputTokenLimit"],d);const p=f(n,["outputTokenLimit"]);p!=null&&m(e,["outputTokenLimit"],p);const g=f(n,["supportedGenerationMethods"]);return g!=null&&m(e,["supportedActions"],g),e}function om(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const s=f(n,["displayName"]);s!=null&&m(e,["displayName"],s);const o=f(n,["description"]);o!=null&&m(e,["description"],o);const l=f(n,["versionId"]);l!=null&&m(e,["version"],l);const u=f(n,["deployedModels"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(S=>sL(S))),m(e,["endpoints"],T)}const d=f(n,["labels"]);d!=null&&m(e,["labels"],d);const p=f(n,["_self"]);p!=null&&m(e,["tunedModelInfo"],iU(p));const g=f(n,["defaultCheckpointId"]);g!=null&&m(e,["defaultCheckpointId"],g);const v=f(n,["checkpoints"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(S=>S)),m(e,["checkpoints"],T)}return e}function HL(n){const e={},t=f(n,["functionCall"]);t!=null&&m(e,["functionCall"],t);const s=f(n,["codeExecutionResult"]);s!=null&&m(e,["codeExecutionResult"],s);const o=f(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&m(e,["fileData"],rL(l));const u=f(n,["functionResponse"]);u!=null&&m(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&m(e,["inlineData"],M4(d));const p=f(n,["text"]);p!=null&&m(e,["text"],p);const g=f(n,["thought"]);g!=null&&m(e,["thought"],g);const v=f(n,["thoughtSignature"]);v!=null&&m(e,["thoughtSignature"],v);const T=f(n,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function zL(n){const e={},t=f(n,["productImage"]);return t!=null&&m(e,["image"],gi(t)),e}function GL(n,e){const t={},s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s);const o=f(n,["baseSteps"]);e!==void 0&&o!=null&&m(e,["parameters","editConfig","baseSteps"],o);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&m(e,["parameters","storageUri"],l);const u=f(n,["seed"]);e!==void 0&&u!=null&&m(e,["parameters","seed"],u);const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&m(e,["parameters","safetySetting"],d);const p=f(n,["personGeneration"]);e!==void 0&&p!=null&&m(e,["parameters","personGeneration"],p);const g=f(n,["addWatermark"]);e!==void 0&&g!=null&&m(e,["parameters","addWatermark"],g);const v=f(n,["outputMimeType"]);e!==void 0&&v!=null&&m(e,["parameters","outputOptions","mimeType"],v);const T=f(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&m(e,["parameters","outputOptions","compressionQuality"],T);const S=f(n,["enhancePrompt"]);e!==void 0&&S!=null&&m(e,["parameters","enhancePrompt"],S);const R=f(n,["labels"]);return e!==void 0&&R!=null&&m(e,["labels"],R),t}function JL(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],et(n,s));const o=f(e,["source"]);o!=null&&KL(o,t);const l=f(e,["config"]);return l!=null&&GL(l,t),t}function YL(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>ef(o))),m(e,["generatedImages"],s)}return e}function KL(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&m(e,["instances[0]","prompt"],s);const o=f(n,["personImage"]);e!==void 0&&o!=null&&m(e,["instances[0]","personImage","image"],gi(o));const l=f(n,["productImages"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>zL(d))),m(e,["instances[0]","productImages"],u)}return t}function $L(n){const e={},t=f(n,["referenceImage"]);t!=null&&m(e,["referenceImage"],gi(t));const s=f(n,["referenceId"]);s!=null&&m(e,["referenceId"],s);const o=f(n,["referenceType"]);o!=null&&m(e,["referenceType"],o);const l=f(n,["maskImageConfig"]);l!=null&&m(e,["maskImageConfig"],FL(l));const u=f(n,["controlImageConfig"]);u!=null&&m(e,["controlImageConfig"],O4(u));const d=f(n,["styleImageConfig"]);d!=null&&m(e,["styleImageConfig"],d);const p=f(n,["subjectImageConfig"]);return p!=null&&m(e,["subjectImageConfig"],p),e}function bC(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&m(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&m(e,["scores"],s);const o=f(n,["contentType"]);return o!=null&&m(e,["contentType"],o),e}function xC(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&m(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&m(e,["scores"],s);const o=f(n,["contentType"]);return o!=null&&m(e,["contentType"],o),e}function QL(n){const e={},t=f(n,["category"]);if(t!=null&&m(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&m(e,["threshold"],s),e}function XL(n){const e={},t=f(n,["image"]);return t!=null&&m(e,["image"],gi(t)),e}function WL(n,e){const t={},s=f(n,["mode"]);e!==void 0&&s!=null&&m(e,["parameters","mode"],s);const o=f(n,["maxPredictions"]);e!==void 0&&o!=null&&m(e,["parameters","maxPredictions"],o);const l=f(n,["confidenceThreshold"]);e!==void 0&&l!=null&&m(e,["parameters","confidenceThreshold"],l);const u=f(n,["maskDilation"]);e!==void 0&&u!=null&&m(e,["parameters","maskDilation"],u);const d=f(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&m(e,["parameters","binaryColorThreshold"],d);const p=f(n,["labels"]);return e!==void 0&&p!=null&&m(e,["labels"],p),t}function jL(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],et(n,s));const o=f(e,["source"]);o!=null&&eU(o,t);const l=f(e,["config"]);return l!=null&&WL(l,t),t}function ZL(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>wL(o))),m(e,["generatedMasks"],s)}return e}function eU(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&m(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],gi(o));const l=f(n,["scribbleImage"]);return e!==void 0&&l!=null&&m(e,["instances[0]","scribble"],XL(l)),t}function NC(n){const e={},t=f(n,["languageCode"]);t!=null&&m(e,["languageCode"],t);const s=f(n,["voiceConfig"]);if(s!=null&&m(e,["voiceConfig"],s),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function tU(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),m(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&m(e,["googleSearchRetrieval"],s);const o=f(n,["computerUse"]);o!=null&&m(e,["computerUse"],o);const l=f(n,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&m(e,["googleMaps"],DL(d));const p=f(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],kL(p));const g=f(n,["urlContext"]);return g!=null&&m(e,["urlContext"],g),e}function MC(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>oL(S))),m(e,["functionDeclarations"],T)}const s=f(n,["retrieval"]);s!=null&&m(e,["retrieval"],s);const o=f(n,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const l=f(n,["computerUse"]);if(l!=null&&m(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&m(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const p=f(n,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const g=f(n,["googleSearch"]);g!=null&&m(e,["googleSearch"],g);const v=f(n,["urlContext"]);return v!=null&&m(e,["urlContext"],v),e}function nU(n){const e={},t=f(n,["baseModel"]);t!=null&&m(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&m(e,["createTime"],s);const o=f(n,["updateTime"]);return o!=null&&m(e,["updateTime"],o),e}function iU(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&m(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&m(e,["createTime"],s);const o=f(n,["updateTime"]);return o!=null&&m(e,["updateTime"],o),e}function sU(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const o=f(n,["description"]);e!==void 0&&o!=null&&m(e,["description"],o);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&m(e,["defaultCheckpointId"],l),t}function rU(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const o=f(n,["description"]);e!==void 0&&o!=null&&m(e,["description"],o);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&m(e,["defaultCheckpointId"],l),t}function oU(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","name"],et(n,s));const o=f(e,["config"]);return o!=null&&sU(o,t),t}function aU(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],et(n,s));const o=f(e,["config"]);return o!=null&&rU(o,t),t}function lU(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&m(e,["parameters","storageUri"],s);const o=f(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&m(e,["parameters","safetySetting"],o);const l=f(n,["personGeneration"]);e!==void 0&&l!=null&&m(e,["parameters","personGeneration"],l);const u=f(n,["includeRaiReason"]);e!==void 0&&u!=null&&m(e,["parameters","includeRaiReason"],u);const d=f(n,["outputMimeType"]);e!==void 0&&d!=null&&m(e,["parameters","outputOptions","mimeType"],d);const p=f(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&m(e,["parameters","outputOptions","compressionQuality"],p);const g=f(n,["enhanceInputImage"]);e!==void 0&&g!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],g);const v=f(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const T=f(n,["labels"]);e!==void 0&&T!=null&&m(e,["labels"],T);const S=f(n,["numberOfImages"]);e!==void 0&&S!=null&&m(e,["parameters","sampleCount"],S);const R=f(n,["mode"]);return e!==void 0&&R!=null&&m(e,["parameters","mode"],R),t}function uU(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],et(n,s));const o=f(e,["image"]);o!=null&&m(t,["instances[0]","image"],gi(o));const l=f(e,["upscaleFactor"]);l!=null&&m(t,["parameters","upscaleConfig","upscaleFactor"],l);const u=f(e,["config"]);return u!=null&&lU(u,t),t}function cU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>ef(l))),m(e,["generatedImages"],o)}return e}function dU(n){const e={},t=f(n,["uri"]);t!=null&&m(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&m(e,["videoBytes"],Vr(s));const o=f(n,["encoding"]);return o!=null&&m(e,["mimeType"],o),e}function fU(n){const e={},t=f(n,["gcsUri"]);t!=null&&m(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&m(e,["videoBytes"],Vr(s));const o=f(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function hU(n){const e={},t=f(n,["image"]);t!=null&&m(e,["_self"],gi(t));const s=f(n,["maskMode"]);return s!=null&&m(e,["maskMode"],s),e}function pU(n){const e={},t=f(n,["image"]);t!=null&&m(e,["image"],tf(t));const s=f(n,["referenceType"]);return s!=null&&m(e,["referenceType"],s),e}function mU(n){const e={},t=f(n,["image"]);t!=null&&m(e,["image"],gi(t));const s=f(n,["referenceType"]);return s!=null&&m(e,["referenceType"],s),e}function DC(n){const e={},t=f(n,["uri"]);t!=null&&m(e,["uri"],t);const s=f(n,["videoBytes"]);s!=null&&m(e,["encodedVideo"],Vr(s));const o=f(n,["mimeType"]);return o!=null&&m(e,["encoding"],o),e}function kC(n){const e={},t=f(n,["uri"]);t!=null&&m(e,["gcsUri"],t);const s=f(n,["videoBytes"]);s!=null&&m(e,["bytesBase64Encoded"],Vr(s));const o=f(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gU="Content-Type",yU="X-Server-Timeout",_U="User-Agent",am="x-goog-api-client",vU="1.29.0",TU=`google-genai-sdk/${vU}`,EU="v1beta1",SU="v1beta",NE=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class AU{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:EU,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:SU,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const o=[this.getRequestUrlInternal(t)];return s&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))o.searchParams.append(u,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,o.toString(),e.abortSignal),this.unaryApiCall(o,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(t))typeof l=="object"?s[o]=Object.assign(Object.assign({},s[o]),l):l!==void 0&&(s[o]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,o.toString(),e.abortSignal),this.streamApiCall(o,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,o){if(t&&t.timeout||o){const l=new AbortController,u=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>l.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}o&&o.addEventListener("abort",()=>{l.abort()}),e.signal=u}return t&&t.extraBody!==null&&CU(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await ME(o),new nm(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await ME(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return ba(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";for(;;){const{done:d,value:p}=yield gt(o.read());if(d){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const g=l.decode(p,{stream:!0});try{const T=JSON.parse(g);if("error"in T){const S=JSON.parse(JSON.stringify(T.error)),R=S.status,q=S.code,z=`got status: ${R}. ${JSON.stringify(T)}`;if(q>=400&&q<600)throw new jd({message:z,status:q})}}catch(T){if(T.name==="ApiError")throw T}u+=g;let v=u.match(NE);for(;v;){const T=v[1];try{const S=new Response(T,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield gt(new nm(S)),u=u.slice(v[0].length),v=u.match(NE)}catch(S){throw new Error(`exception parsing stream chunk ${T}. ${S}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=TU+" "+this.clientOptions.userAgentExtra;return e[_U]=t,e[am]=t,e[gU]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[o,l]of Object.entries(e.headers))s.append(o,l);e.timeout&&e.timeout>0&&s.append(yU,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}getFileName(e){var t;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(t=s.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),s}async uploadFile(e,t){var s;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);o.sizeBytes=String(u.size);const d=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=d;const p={file:o},g=this.getFileName(e),v=fe("upload/v1beta/files",p._url),T=await this.fetchUploadUrl(v,o.sizeBytes,o.mimeType,g,p,t==null?void 0:t.httpOptions);return l.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,s){var o;const l=this.clientOptions.uploader,u=await l.stat(t),d=String(u.size),p=(o=s==null?void 0:s.mimeType)!==null&&o!==void 0?o:u.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const g=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),T={};s!=null&&s.customMetadata&&(T.customMetadata=s.customMetadata),s!=null&&s.chunkingConfig&&(T.chunkingConfig=s.chunkingConfig);const S=await this.fetchUploadUrl(g,d,p,v,T,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s,o,l,u){var d;let p={};u?p=u:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${s}`},o?{"X-Goog-Upload-File-Name":o}:{})};const g=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:p});if(!g||!(g!=null&&g.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(d=g==null?void 0:g.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function ME(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(s);throw t>=400&&t<600?new jd({message:o,status:t}):new Error(o)}}function CU(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,u){const d=Object.assign({},l);for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const g=u[p],v=d[p];g&&typeof g=="object"&&!Array.isArray(g)&&v&&typeof v=="object"&&!Array.isArray(v)?d[p]=s(v,g):(v&&g&&typeof v!=typeof g&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof v}, New type: ${typeof g}. Overwriting.`),d[p]=g)}return d}const o=s(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IU="mcp_used/unknown";let wU=!1;function PC(n){for(const e of n)if(RU(e)||typeof e=="object"&&"inputSchema"in e)return!0;return wU}function LC(n){var e;const t=(e=n[am])!==null&&e!==void 0?e:"";n[am]=(t+` ${IU}`).trimStart()}function RU(n){return n!==null&&typeof n=="object"&&n instanceof og}function bU(n,e=100){return ba(this,arguments,function*(){let s,o=0;for(;o<e;){const l=yield gt(n.listTools({cursor:s}));for(const u of l.tools)yield yield gt(u),o++;if(!l.nextCursor)break;s=l.nextCursor}})}class og{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new og(e,t)}async initialize(){var e,t,s,o;if(this.mcpTools.length>0)return;const l={},u=[];for(const v of this.mcpClients)try{for(var d=!0,p=(t=void 0,ou(bU(v))),g;g=await p.next(),e=g.done,!e;d=!0){o=g.value,d=!1;const T=o;u.push(T);const S=T.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=v}}catch(T){t={error:T}}finally{try{!d&&!e&&(s=p.return)&&await s.call(p)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),kk(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await o.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function xU(n,e,t){const s=new Ik;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(s,o),e(s)}class NU{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=kU(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),p=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let g=()=>{};const v=new Promise(W=>{g=W}),T=e.callbacks,S=function(){g({})},R=this.apiClient,q={onopen:S,onmessage:W=>{xU(R,T.onmessage,W)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(W){},onclose:(s=T==null?void 0:T.onclose)!==null&&s!==void 0?s:function(W){}},z=this.webSocketFactory.create(p,DU(u),q);z.connect(),await v;const K={setup:{model:et(this.apiClient,e.model)}};return z.send(JSON.stringify(K)),new MU(z,this.apiClient)}}class MU{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=S4(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=E4(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(_a.PLAY)}pause(){this.sendPlaybackControl(_a.PAUSE)}stop(){this.sendPlaybackControl(_a.STOP)}resetContext(){this.sendPlaybackControl(_a.RESET_CONTEXT)}close(){this.conn.close()}}function DU(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function kU(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PU="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function LU(n,e,t){const s=new Ck;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const l=JSON.parse(o);if(n.isVertexAI()){const u=I4(l);Object.assign(s,u)}else Object.assign(s,l);e(s)}class UU{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new NU(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,o,l,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),g=this.apiClient.getApiVersion();let v;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&PC(e.config.tools)&&LC(T);const S=BU(T);if(this.apiClient.isVertexAI())v=`${p}/ws/google.cloud.aiplatform.${g}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v);else{const x=this.apiClient.getApiKey();let L="BidiGenerateContent",P="key";x!=null&&x.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),g!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),L="BidiGenerateContentConstrained",P="access_token"),v=`${p}/ws/google.ai.generativelanguage.${g}.GenerativeService.${L}?${P}=${x}`}let R=()=>{};const q=new Promise(x=>{R=x}),z=e.callbacks,F=function(){var x;(x=z==null?void 0:z.onopen)===null||x===void 0||x.call(z),R({})},ne=this.apiClient,K={onopen:F,onmessage:x=>{LU(ne,z.onmessage,x)},onerror:(t=z==null?void 0:z.onerror)!==null&&t!==void 0?t:function(x){},onclose:(s=z==null?void 0:z.onclose)!==null&&s!==void 0?s:function(x){}},W=this.webSocketFactory.create(v,qU(S),K);W.connect(),await q;let ie=et(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ie.startsWith("publishers/")){const x=this.apiClient.getProject(),L=this.apiClient.getLocation();ie=`projects/${x}/locations/${L}/`+ie}let de={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Md.AUDIO]}:e.config.responseModalities=[Md.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const le=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],D=[];for(const x of le)if(this.isCallableTool(x)){const L=x;D.push(await L.tool())}else D.push(x);D.length>0&&(e.config.tools=D);const N={model:ie,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?de=T4(this.apiClient,N):de=v4(this.apiClient,N),delete de.config,W.send(JSON.stringify(de)),new OU(W,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const VU={turnComplete:!0};class OU{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=ni(t.turns),e.isVertexAI()||(s=s.map(o=>Zd(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(PU)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},VU),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:C4(e)}:t={realtimeInput:A4(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function qU(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function BU(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DE=10;function kE(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(xa(u)){o=!0;break}if(!o)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function xa(n){return"callTool"in n&&typeof n.callTool=="function"}function FU(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>xa(o)))!==null&&s!==void 0?s:!1}function PE(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((s,o)=>{if(xa(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(o)}),t}function LE(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HU extends Ts{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,o,l,u,d;const p=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!FU(t)||kE(t.config))return await this.generateContentInternal(p);const g=PE(t);if(g.length>0){const z=g.map(F=>`tools[${F}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${z}.`)}let v,T;const S=ni(p.contents),R=(l=(o=(s=p.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:DE;let q=0;for(;q<R&&(v=await this.generateContentInternal(p),!(!v.functionCalls||v.functionCalls.length===0));){const z=v.candidates[0].content,F=[];for(const ne of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(xa(ne)){const W=await ne.callTool(v.functionCalls);F.push(...W)}q++,T={role:"user",parts:F},p.contents=ni(p.contents),p.contents.push(z),p.contents.push(T),LE(p.config)&&(S.push(z),S.push(T))}return LE(p.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),kE(t.config)){const o=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(o)}const s=PE(t);if(s.length>0){const o=s.map(l=>`tools[${l}]`).join(", ");throw new Error(`Incompatible tools found at ${o}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var o;let l;const u=[];if(s!=null&&s.generatedImages)for(const p of s.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((o=p==null?void 0:p.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=p==null?void 0:p.safetyAttributes:u.push(p);let d;return l?d={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:s.sdkHttpResponse},d}),this.list=async t=>{var s;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((s=u.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Ro(vs.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var s,o,l,u,d,p;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(l=t.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((p=(d=t.source)===null||d===void 0?void 0:d.video)===null||p===void 0)&&p.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,o;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const u=await Promise.all(l.map(async p=>xa(p)?await p.tool():p)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&PC(e.config.tools)){const p=(o=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&o!==void 0?o:{};let g=Object.assign({},p);Object.keys(g).length===0&&(g=this.apiClient.getDefaultHeaders()),LC(g),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:g})}return d}async initAfcToolsMap(e){var t,s,o;const l=new Map;for(const u of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(xa(u)){const d=u,p=await d.tool();for(const g of(o=p.functionDeclarations)!==null&&o!==void 0?o:[]){if(!g.name)throw new Error("Function declaration name is required.");if(l.has(g.name))throw new Error(`Duplicate tool declaration name: ${g.name}`);l.set(g.name,d)}}return l}async processAfcStream(e){var t,s,o;const l=(o=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&o!==void 0?o:DE;let u=!1,d=0;const p=await this.initAfcToolsMap(e);return(function(g,v,T){var S,R;return ba(this,arguments,function*(){for(var q,z,F,ne;d<l;){u&&(d++,u=!1);const de=yield gt(g.processParamsMaybeAddMcpUsage(T)),le=yield gt(g.generateContentStreamInternal(de)),D=[],N=[];try{for(var K=!0,W=(z=void 0,ou(le)),ie;ie=yield gt(W.next()),q=ie.done,!q;K=!0){ne=ie.value,K=!1;const x=ne;if(yield yield gt(x),x.candidates&&(!((S=x.candidates[0])===null||S===void 0)&&S.content)){N.push(x.candidates[0].content);for(const L of(R=x.candidates[0].content.parts)!==null&&R!==void 0?R:[])if(d<l&&L.functionCall){if(!L.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(L.functionCall.name)){const P=yield gt(v.get(L.functionCall.name).callTool([L.functionCall]));D.push(...P)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${L.functionCall.name}`)}}}}catch(x){z={error:x}}finally{try{!K&&!q&&(F=W.return)&&(yield gt(F.call(W)))}finally{if(z)throw z.error}}if(D.length>0){u=!0;const x=new Jl;x.candidates=[{content:{role:"user",parts:D}}],yield yield gt(x);const L=[];L.push(...N),L.push({role:"user",parts:D});const P=ni(T.contents).concat(L);T.contents=P}else break}})})(this,p,e)}async generateContentInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const g=RE(this.apiClient,e);return d=fe("{model}:generateContent",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=xE(v),S=new Jl;return Object.assign(S,T),S})}else{const g=wE(this.apiClient,e);return d=fe("{model}:generateContent",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=bE(v),S=new Jl;return Object.assign(S,T),S})}}async generateContentStreamInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const g=RE(this.apiClient,e);return d=fe("{model}:streamGenerateContent?alt=sse",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),u.then(function(T){return ba(this,arguments,function*(){var S,R,q,z;try{for(var F=!0,ne=ou(T),K;K=yield gt(ne.next()),S=K.done,!S;F=!0){z=K.value,F=!1;const W=z,ie=xE(yield gt(W.json()));ie.sdkHttpResponse={headers:W.headers};const de=new Jl;Object.assign(de,ie),yield yield gt(de)}}catch(W){R={error:W}}finally{try{!F&&!S&&(q=ne.return)&&(yield gt(q.call(ne)))}finally{if(R)throw R.error}}})})}else{const g=wE(this.apiClient,e);return d=fe("{model}:streamGenerateContent?alt=sse",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(T){return ba(this,arguments,function*(){var S,R,q,z;try{for(var F=!0,ne=ou(T),K;K=yield gt(ne.next()),S=K.done,!S;F=!0){z=K.value,F=!1;const W=z,ie=bE(yield gt(W.json()));ie.sdkHttpResponse={headers:W.headers};const de=new Jl;Object.assign(de,ie),yield yield gt(de)}}catch(W){R={error:W}}finally{try{!F&&!S&&(q=ne.return)&&(yield gt(q.call(ne)))}finally{if(R)throw R.error}}})})}}async embedContent(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const g=tL(this.apiClient,e);return d=fe("{model}:predict",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=iL(v),S=new cE;return Object.assign(S,T),S})}else{const g=eL(this.apiClient,e);return d=fe("{model}:batchEmbedContents",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=nL(v),S=new cE;return Object.assign(S,T),S})}}async generateImagesInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const g=fL(this.apiClient,e);return d=fe("{model}:predict",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=pL(v),S=new dE;return Object.assign(S,T),S})}else{const g=dL(this.apiClient,e);return d=fe("{model}:predict",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=hL(v),S=new dE;return Object.assign(S,T),S})}}async editImageInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=X4(this.apiClient,e);return l=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const g=W4(p),v=new hk;return Object.assign(v,g),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=uU(this.apiClient,e);return l=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const g=cU(p),v=new pk;return Object.assign(v,g),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=JL(this.apiClient,e);return l=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const g=YL(p),v=new mk;return Object.assign(v,g),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=jL(this.apiClient,e);return l=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const g=ZL(p),v=new gk;return Object.assign(v,g),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const g=ML(this.apiClient,e);return d=fe("{name}",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>om(v))}else{const g=NL(this.apiClient,e);return d=fe("{name}",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>rm(v))}}async listInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const g=OL(this.apiClient,e);return d=fe("{models_url}",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=BL(v),S=new fE;return Object.assign(S,T),S})}else{const g=VL(this.apiClient,e);return d=fe("{models_url}",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=qL(v),S=new fE;return Object.assign(S,T),S})}}async update(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const g=aU(this.apiClient,e);return d=fe("{model}",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>om(v))}else{const g=oU(this.apiClient,e);return d=fe("{name}",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>rm(v))}}async delete(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const g=Y4(this.apiClient,e);return d=fe("{name}",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=$4(v),S=new hE;return Object.assign(S,T),S})}else{const g=J4(this.apiClient,e);return d=fe("{name}",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=K4(v),S=new hE;return Object.assign(S,T),S})}}async countTokens(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const g=H4(this.apiClient,e);return d=fe("{model}:countTokens",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=G4(v),S=new pE;return Object.assign(S,T),S})}else{const g=F4(this.apiClient,e);return d=fe("{model}:countTokens",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=z4(v),S=new pE;return Object.assign(S,T),S})}}async computeTokens(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=P4(this.apiClient,e);return l=fe("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const g=L4(p),v=new yk;return Object.assign(v,g),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const g=TL(this.apiClient,e);return d=fe("{model}:predictLongRunning",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>{const T=_L(v),S=new Dd;return Object.assign(S,T),S})}else{const g=vL(this.apiClient,e);return d=fe("{model}:predictLongRunning",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>{const T=yL(v),S=new Dd;return Object.assign(S,T),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zU extends Ts{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const g=ak(e);return d=fe("{operationName}",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u}else{const g=ok(e);return d=fe("{operationName}",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=ZD(e);return l=fe("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GU(n){const e={},t=f(n,["data"]);if(t!=null&&m(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function JU(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>ZU(l))),m(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&m(e,["role"],s),e}function YU(n,e,t){const s={},o=f(e,["expireTime"]);t!==void 0&&o!=null&&m(t,["expireTime"],o);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&m(t,["newSessionExpireTime"],l);const u=f(e,["uses"]);t!==void 0&&u!=null&&m(t,["uses"],u);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&m(t,["bidiGenerateContentSetup"],jU(n,d));const p=f(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&m(t,["fieldMask"],p),s}function KU(n,e){const t={},s=f(e,["config"]);return s!=null&&m(t,["config"],YU(n,s,t)),t}function $U(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function QU(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function XU(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function WU(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig"],s);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const g=f(n,["mediaResolution"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","mediaResolution"],g);const v=f(n,["seed"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","speechConfig"],rg(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&m(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],R);const q=f(n,["systemInstruction"]);e!==void 0&&q!=null&&m(e,["setup","systemInstruction"],JU(un(q)));const z=f(n,["tools"]);if(e!==void 0&&z!=null){let le=Fa(z);Array.isArray(le)&&(le=le.map(D=>tV(Ba(D)))),m(e,["setup","tools"],le)}const F=f(n,["sessionResumption"]);e!==void 0&&F!=null&&m(e,["setup","sessionResumption"],eV(F));const ne=f(n,["inputAudioTranscription"]);e!==void 0&&ne!=null&&m(e,["setup","inputAudioTranscription"],ne);const K=f(n,["outputAudioTranscription"]);e!==void 0&&K!=null&&m(e,["setup","outputAudioTranscription"],K);const W=f(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&m(e,["setup","realtimeInputConfig"],W);const ie=f(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&m(e,["setup","contextWindowCompression"],ie);const de=f(n,["proactivity"]);return e!==void 0&&de!=null&&m(e,["setup","proactivity"],de),t}function jU(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["setup","model"],et(n,s));const o=f(e,["config"]);return o!=null&&m(t,["config"],WU(o,t)),t}function ZU(n){const e={},t=f(n,["functionCall"]);t!=null&&m(e,["functionCall"],t);const s=f(n,["codeExecutionResult"]);s!=null&&m(e,["codeExecutionResult"],s);const o=f(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&m(e,["fileData"],$U(l));const u=f(n,["functionResponse"]);u!=null&&m(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&m(e,["inlineData"],GU(d));const p=f(n,["text"]);p!=null&&m(e,["text"],p);const g=f(n,["thought"]);g!=null&&m(e,["thought"],g);const v=f(n,["thoughtSignature"]);v!=null&&m(e,["thoughtSignature"],v);const T=f(n,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function eV(n){const e={},t=f(n,["handle"]);if(t!=null&&m(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function tV(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),m(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&m(e,["googleSearchRetrieval"],s);const o=f(n,["computerUse"]);o!=null&&m(e,["computerUse"],o);const l=f(n,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&m(e,["googleMaps"],QU(d));const p=f(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],XU(p));const g=f(n,["urlContext"]);return g!=null&&m(e,["urlContext"],g),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nV(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const o=Object.keys(s).map(l=>`${t}.${l}`);e.push(...o)}else e.push(t)}return e.join(",")}function iV(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const l=nV(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(g=>u.includes(g)?`generationConfig.${g}`:g));const p=[];l&&p.push(l),d.length>0&&p.push(...d),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class sV extends Ts{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=KU(this.apiClient,e);l=fe("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const p=iV(d,e.config);return o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>g)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rV(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&m(e,["displayName"],s),t}function oV(n){const e={},t=f(n,["config"]);return t!=null&&rV(t,e),e}function aV(n,e){const t={},s=f(n,["force"]);return e!==void 0&&s!=null&&m(e,["_query","force"],s),t}function lV(n){const e={},t=f(n,["name"]);t!=null&&m(e,["_url","name"],t);const s=f(n,["config"]);return s!=null&&aV(s,e),e}function uV(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","name"],t),e}function cV(n,e){const t={},s=f(n,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["customMetadata"],l)}const o=f(n,["chunkingConfig"]);return e!==void 0&&o!=null&&m(e,["chunkingConfig"],o),t}function dV(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const s=f(n,["metadata"]);s!=null&&m(e,["metadata"],s);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const l=f(n,["error"]);l!=null&&m(e,["error"],l);const u=f(n,["response"]);return u!=null&&m(e,["response"],hV(u)),e}function fV(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&m(e,["_url","file_search_store_name"],t);const s=f(n,["fileName"]);s!=null&&m(e,["fileName"],s);const o=f(n,["config"]);return o!=null&&cV(o,e),e}function hV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&m(e,["parent"],s);const o=f(n,["documentName"]);return o!=null&&m(e,["documentName"],o),e}function pV(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function mV(n){const e={},t=f(n,["config"]);return t!=null&&pV(t,e),e}function gV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=f(n,["fileSearchStores"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["fileSearchStores"],l)}return e}function yV(n,e){const t={},s=f(n,["mimeType"]);e!==void 0&&s!=null&&m(e,["mimeType"],s);const o=f(n,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const l=f(n,["customMetadata"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>p)),m(e,["customMetadata"],d)}const u=f(n,["chunkingConfig"]);return e!==void 0&&u!=null&&m(e,["chunkingConfig"],u),t}function _V(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&m(e,["_url","file_search_store_name"],t);const s=f(n,["config"]);return s!=null&&yV(s,e),e}function vV(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TV(n,e){const t={},s=f(n,["force"]);return e!==void 0&&s!=null&&m(e,["_query","force"],s),t}function EV(n){const e={},t=f(n,["name"]);t!=null&&m(e,["_url","name"],t);const s=f(n,["config"]);return s!=null&&TV(s,e),e}function SV(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","name"],t),e}function AV(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function CV(n){const e={},t=f(n,["parent"]);t!=null&&m(e,["_url","parent"],t);const s=f(n,["config"]);return s!=null&&AV(s,e),e}function IV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=f(n,["documents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),m(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wV extends Ts{constructor(e){super(),this.apiClient=e,this.list=async t=>new Ro(vs.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:t.parent,config:s.config}),await this.listInternal(t),t)}async get(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=SV(e);return l=fe("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,s;let o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=EV(e);o=fe("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=CV(e);return l=fe("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const g=IV(p),v=new _k;return Object.assign(v,g),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RV extends Ts{constructor(e,t=new wV(e)){super(),this.apiClient=e,this.documents=t,this.list=async(s={})=>new Ro(vs.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=oV(e);return l=fe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async get(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=uV(e);return l=fe("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,s;let o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=lV(e);o=fe("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=mV(e);return l=fe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const g=gV(p),v=new vk;return Object.assign(v,g),v})}}async uploadToFileSearchStoreInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=_V(e);return l=fe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const g=vV(p),v=new Tk;return Object.assign(v,g),v})}}async importFile(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=fV(e);return l=fe("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const g=dV(p),v=new eg;return Object.assign(v,g),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bV(n,e){const t={},s=f(n,["name"]);return s!=null&&m(t,["_url","name"],s),t}function xV(n,e){const t={},s=f(n,["name"]);return s!=null&&m(t,["_url","name"],s),t}function NV(n,e,t){const s={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=f(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&m(e,["displayName"],o),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(n,["epochCount"]);e!==void 0&&l!=null&&m(e,["tuningTask","hyperparameters","epochCount"],l);const u=f(n,["learningRateMultiplier"]);if(u!=null&&m(s,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&m(e,["tuningTask","hyperparameters","batchSize"],d);const p=f(n,["learningRate"]);if(e!==void 0&&p!=null&&m(e,["tuningTask","hyperparameters","learningRate"],p),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function MV(n,e,t){const s={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const R=f(n,["validationDataset"]);e!==void 0&&R!=null&&m(e,["supervisedTuningSpec"],UE(R))}else if(o==="PREFERENCE_TUNING"){const R=f(n,["validationDataset"]);e!==void 0&&R!=null&&m(e,["preferenceOptimizationSpec"],UE(R))}const l=f(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&m(e,["tunedModelDisplayName"],l);const u=f(n,["description"]);e!==void 0&&u!=null&&m(e,["description"],u);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const R=f(n,["epochCount"]);e!==void 0&&R!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],R)}else if(d==="PREFERENCE_TUNING"){const R=f(n,["epochCount"]);e!==void 0&&R!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],R)}let p=f(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const R=f(n,["learningRateMultiplier"]);e!==void 0&&R!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],R)}else if(p==="PREFERENCE_TUNING"){const R=f(n,["learningRateMultiplier"]);e!==void 0&&R!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],R)}let g=f(t,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const R=f(n,["exportLastCheckpointOnly"]);e!==void 0&&R!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],R)}else if(g==="PREFERENCE_TUNING"){const R=f(n,["exportLastCheckpointOnly"]);e!==void 0&&R!=null&&m(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],R)}let v=f(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const R=f(n,["adapterSize"]);e!==void 0&&R!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],R)}else if(v==="PREFERENCE_TUNING"){const R=f(n,["adapterSize"]);e!==void 0&&R!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],R)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=f(n,["labels"]);e!==void 0&&T!=null&&m(e,["labels"],T);const S=f(n,["beta"]);return e!==void 0&&S!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),s}function DV(n,e){const t={},s=f(n,["baseModel"]);s!=null&&m(t,["baseModel"],s);const o=f(n,["preTunedModel"]);o!=null&&m(t,["preTunedModel"],o);const l=f(n,["trainingDataset"]);l!=null&&zV(l);const u=f(n,["config"]);return u!=null&&NV(u,t),t}function kV(n,e){const t={},s=f(n,["baseModel"]);s!=null&&m(t,["baseModel"],s);const o=f(n,["preTunedModel"]);o!=null&&m(t,["preTunedModel"],o);const l=f(n,["trainingDataset"]);l!=null&&GV(l,t,e);const u=f(n,["config"]);return u!=null&&MV(u,t,e),t}function PV(n,e){const t={},s=f(n,["name"]);return s!=null&&m(t,["_url","name"],s),t}function LV(n,e){const t={},s=f(n,["name"]);return s!=null&&m(t,["_url","name"],s),t}function UV(n,e,t){const s={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&m(e,["_query","pageToken"],l);const u=f(n,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),s}function VV(n,e,t){const s={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&m(e,["_query","pageToken"],l);const u=f(n,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),s}function OV(n,e){const t={},s=f(n,["config"]);return s!=null&&UV(s,t),t}function qV(n,e){const t={},s=f(n,["config"]);return s!=null&&VV(s,t),t}function BV(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&m(t,["sdkHttpResponse"],s);const o=f(n,["nextPageToken"]);o!=null&&m(t,["nextPageToken"],o);const l=f(n,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>UC(d))),m(t,["tuningJobs"],u)}return t}function FV(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&m(t,["sdkHttpResponse"],s);const o=f(n,["nextPageToken"]);o!=null&&m(t,["nextPageToken"],o);const l=f(n,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>lm(d))),m(t,["tuningJobs"],u)}return t}function HV(n,e){const t={},s=f(n,["name"]);s!=null&&m(t,["model"],s);const o=f(n,["name"]);return o!=null&&m(t,["endpoint"],o),t}function zV(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=f(n,["examples"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),m(t,["examples","examples"],o)}return t}function GV(n,e,t){const s={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let l=f(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function UC(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&m(t,["sdkHttpResponse"],s);const o=f(n,["name"]);o!=null&&m(t,["name"],o);const l=f(n,["state"]);l!=null&&m(t,["state"],yC(l));const u=f(n,["createTime"]);u!=null&&m(t,["createTime"],u);const d=f(n,["tuningTask","startTime"]);d!=null&&m(t,["startTime"],d);const p=f(n,["tuningTask","completeTime"]);p!=null&&m(t,["endTime"],p);const g=f(n,["updateTime"]);g!=null&&m(t,["updateTime"],g);const v=f(n,["description"]);v!=null&&m(t,["description"],v);const T=f(n,["baseModel"]);T!=null&&m(t,["baseModel"],T);const S=f(n,["_self"]);return S!=null&&m(t,["tunedModel"],HV(S)),t}function lm(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&m(t,["sdkHttpResponse"],s);const o=f(n,["name"]);o!=null&&m(t,["name"],o);const l=f(n,["state"]);l!=null&&m(t,["state"],yC(l));const u=f(n,["createTime"]);u!=null&&m(t,["createTime"],u);const d=f(n,["startTime"]);d!=null&&m(t,["startTime"],d);const p=f(n,["endTime"]);p!=null&&m(t,["endTime"],p);const g=f(n,["updateTime"]);g!=null&&m(t,["updateTime"],g);const v=f(n,["error"]);v!=null&&m(t,["error"],v);const T=f(n,["description"]);T!=null&&m(t,["description"],T);const S=f(n,["baseModel"]);S!=null&&m(t,["baseModel"],S);const R=f(n,["tunedModel"]);R!=null&&m(t,["tunedModel"],R);const q=f(n,["preTunedModel"]);q!=null&&m(t,["preTunedModel"],q);const z=f(n,["supervisedTuningSpec"]);z!=null&&m(t,["supervisedTuningSpec"],z);const F=f(n,["preferenceOptimizationSpec"]);F!=null&&m(t,["preferenceOptimizationSpec"],F);const ne=f(n,["tuningDataStats"]);ne!=null&&m(t,["tuningDataStats"],ne);const K=f(n,["encryptionSpec"]);K!=null&&m(t,["encryptionSpec"],K);const W=f(n,["partnerModelTuningSpec"]);W!=null&&m(t,["partnerModelTuningSpec"],W);const ie=f(n,["customBaseModel"]);ie!=null&&m(t,["customBaseModel"],ie);const de=f(n,["experiment"]);de!=null&&m(t,["experiment"],de);const le=f(n,["labels"]);le!=null&&m(t,["labels"],le);const D=f(n,["outputUri"]);D!=null&&m(t,["outputUri"],D);const N=f(n,["pipelineJob"]);N!=null&&m(t,["pipelineJob"],N);const x=f(n,["serviceAccount"]);x!=null&&m(t,["serviceAccount"],x);const L=f(n,["tunedModelDisplayName"]);L!=null&&m(t,["tunedModelDisplayName"],L);const P=f(n,["veoTuningSpec"]);return P!=null&&m(t,["veoTuningSpec"],P),t}function JV(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&m(t,["sdkHttpResponse"],s);const o=f(n,["name"]);o!=null&&m(t,["name"],o);const l=f(n,["metadata"]);l!=null&&m(t,["metadata"],l);const u=f(n,["done"]);u!=null&&m(t,["done"],u);const d=f(n,["error"]);return d!=null&&m(t,["error"],d),t}function UE(n,e){const t={},s=f(n,["gcsUri"]);s!=null&&m(t,["validationDatasetUri"],s);const o=f(n,["vertexDatasetResource"]);return o!=null&&m(t,["validationDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YV extends Ts{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new Ro(vs.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:o});return l.baseModel=void 0,await this.tuneInternal(l)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),l=await this.tuneMldevInternal(o);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:tm.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const g=LV(e);return d=fe("{name}",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>lm(v))}else{const g=PV(e);return d=fe("{name}",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>UC(v))}}async listInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const g=qV(e);return d=fe("tuningJobs",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=FV(v),S=new mE;return Object.assign(S,T),S})}else{const g=OV(e);return d=fe("tunedModels",g._url),p=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=BV(v),S=new mE;return Object.assign(S,T),S})}}async cancel(e){var t,s,o,l;let u="",d={};if(this.apiClient.isVertexAI()){const p=xV(e);u=fe("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const p=bV(e);u=fe("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=kV(e,e);return l=fe("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>lm(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=DV(e);return l=fe("tunedModels",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>JV(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KV{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const $V=1024*1024*8,QV=3,XV=1e3,WV=2,Pd="x-goog-upload-status";async function jV(n,e,t){var s;const o=await VC(n,e,t),l=await(o==null?void 0:o.json());if(((s=o==null?void 0:o.headers)===null||s===void 0?void 0:s[Pd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function ZV(n,e,t){var s;const o=await VC(n,e,t),l=await(o==null?void 0:o.json());if(((s=o==null?void 0:o.headers)===null||s===void 0?void 0:s[Pd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=dC(l),d=new tg;return Object.assign(d,u),d}async function VC(n,e,t){var s,o;let l=0,u=0,d=new nm(new Response),p="upload";for(l=n.size;u<l;){const g=Math.min($V,l-u),v=n.slice(u,u+g);u+g>=l&&(p+=", finalize");let T=0,S=XV;for(;T<QV&&(d=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(u),"Content-Length":String(g)}}}),!(!((s=d==null?void 0:d.headers)===null||s===void 0)&&s[Pd]));)T++,await t3(S),S=S*WV;if(u+=g,((o=d==null?void 0:d.headers)===null||o===void 0?void 0:o[Pd])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function e3(n){return{size:n.size,type:n.type}}function t3(n){return new Promise(e=>setTimeout(e,n))}class n3{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await jV(e,t,s)}async uploadToFileSearchStore(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await ZV(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await e3(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class i3{create(e,t,s){return new s3(e,t,s)}}class s3{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VE="x-goog-api-key";class r3{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(VE)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(VE,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const o3="gl-node/";class a3{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=WD(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const o=new r3(this.apiKey);this.apiClient=new AU({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:o3+"web",uploader:new n3,downloader:new KV}),this.models=new HU(this.apiClient),this.live=new UU(this.apiClient,o,new i3),this.batches=new SP(this.apiClient),this.chats=new e4(this.models,this.apiClient),this.caches=new WP(this.apiClient),this.files=new c4(this.apiClient),this.operations=new zU(this.apiClient),this.authTokens=new sV(this.apiClient),this.tunings=new YV(this.apiClient),this.fileSearchStores=new RV(this.apiClient)}}const OC={geminiApiKey:"AIzaSyBAzdNikRnpu5iyeg8VJ03fc0HXVG2B2iY",openWeatherApiKey:"074ebc9404ca1a72d5b0759070161539"},nf=new a3({apiKey:OC.geminiApiKey});async function l3(n){const e={text:`Analyse chacune des images de vtements fournies. Pour chaque image, dans l'ordre, extrais les informations suivantes en franais :
    1. Une description concise incluant son type (ex: T-shirt, jean), sa couleur principale, et son style.
    2. Sa catgorie : "Hauts", "Bas", "Chaussures", ou "Accessoires".
    3. Sa couleur principale (ex: "Bleu", "Noir"). Sois concis.
    4. Sa matire principale (ex: "Coton", "Cuir"). Sois concis.
    
    Retourne le rsultat sous la forme d'un objet JSON unique contenant une cl "items", qui est un tableau d'objets. Chaque objet du tableau doit correspondre  une image et contenir les champs : "analysis", "category", "color", et "material".`},t=n.map(o=>({inlineData:{data:o,mimeType:"image/jpeg"}})),s=await nf.models.generateContent({model:"gemini-flash-latest",contents:{parts:[e,...t]},config:{responseMimeType:"application/json",responseSchema:{type:De.OBJECT,properties:{items:{type:De.ARRAY,description:"Un tableau d'analyses pour chaque vtement.",items:{type:De.OBJECT,properties:{analysis:{type:De.STRING,description:"La description concise du vtement."},category:{type:De.STRING,description:'La catgorie du vtement parmi "Hauts", "Bas", "Chaussures", ou "Accessoires".',enum:["Hauts","Bas","Chaussures","Accessoires"]},color:{type:De.STRING,description:"La couleur principale du vtement."},material:{type:De.STRING,description:"La matire principale du vtement."}},required:["analysis","category","color","material"]}}},required:["items"]}}});try{const o=JSON.parse(s.text),l=["Hauts","Bas","Chaussures","Accessoires"];return o.items.forEach(u=>{l.includes(u.category)||(console.warn(`Catgorie invalide reue de l'IA: ${u.category}, fallback sur "Accessoires"`),u.category="Accessoires")}),o.items}catch(o){throw console.error("Erreur de parsing de la rponse de l'IA pour l'analyse par lot:",o),console.error("Rponse reue:",s.text),new Error("L'IA a renvoy une rponse d'analyse malforme.")}}function u3(n){return n&&n.name&&Array.isArray(n.itemIds)}async function c3(n,e,t,s){const o=new Set((e||[]).flatMap(S=>S.itemIds)),u=n.filter(S=>!o.has(S.id)).map(S=>`- ${S.analysis} (Catgorie: ${S.category}, Couleur: ${S.color}, Matire: ${S.material})`).join(`
`),d=e.map(S=>`- ${S.name} (Ensemble)`).join(`
`),p=[u,d].filter(Boolean).join(`
`),g=s?`
**RGLE CRITIQUE : Chaque tenue DOIT imprativement inclure l'article ou l'ensemble suivant : "${u3(s)?s.name:s.analysis}". C'est la pice matresse.**
`:"",v=`
    Tu es un styliste de mode expert. Ta mission est de crer des tenues pour un utilisateur en fonction de sa garde-robe et d'un contexte prcis.

    Contexte de l'utilisateur : "${t}"
    
    RGLE IMPORTANTE : Les articles marqus comme "(Ensemble)" sont des groupes de vtements insparables. Si tu utilises un ensemble, tu dois le lister par son nom (ex: "Costume bleu marine") et ne pas lister ses composants individuels.

    Vtements et Ensembles disponibles :
    ${p}
    ${g}
    En te basant **uniquement** sur les vtements et ensembles lists ci-dessus, cre 3 tenues distinctes et cohrentes qui correspondent au contexte de l'utilisateur.

    Pour chaque tenue, fournis :
    1. Un nom de titre court et accrocheur pour la tenue.
    2. Une brve description de l'ambiance ou du style de la tenue.
    3. La liste exacte des descriptions des vtements ou des noms d'ensembles de la liste fournie  utiliser.

    Rponds en franais.
  `,T=await nf.models.generateContent({model:"gemini-2.5-pro",contents:v,config:{responseMimeType:"application/json",responseSchema:{type:De.OBJECT,properties:{tenues:{type:De.ARRAY,description:"La liste des suggestions de tenues.",items:{type:De.OBJECT,properties:{titre:{type:De.STRING,description:"Le nom de la tenue."},description:{type:De.STRING,description:"Une brve description du style de la tenue."},vetements:{type:De.ARRAY,items:{type:De.STRING,description:"Description d'un vtement ou nom d'un ensemble de la liste fournie."},description:"La liste des descriptions des vtements ou ensembles composant la tenue."}},required:["titre","description","vetements"]}}},required:["tenues"]}}});try{return JSON.parse(T.text).tenues}catch(S){throw console.error("Erreur de parsing JSON de la rponse Gemini:",S),console.error("Rponse reue:",T.text),new Error("L'IA a renvoy une rponse malforme.")}}async function d3(n,e){const t=n.map(l=>`${l.category}: ${l.analysis}, couleur ${l.color}, matire ${l.material}`).join(`
`),s=`Tu es un expert en mode et stylisme. Analyse cette garde-robe et suggre des pices stratgiques  acheter pour la rendre plus versatile et polyvalente.

GARDE-ROBE ACTUELLE (${n.length} pices):
${t}

Analyse la garde-robe et identifie:
1. Les points forts de cette garde-robe
2. Les manques ou gaps  combler
3. Les pices  acheter pour maximiser la polyvalence

Suggre 3-5 pices maximum en priorisant les basiques polyvalents.`,o=await nf.models.generateContent({model:"gemini-2.5-pro",contents:s,config:{responseMimeType:"application/json",responseSchema:{type:De.OBJECT,properties:{summary:{type:De.STRING,description:"Rsum gnral de la garde-robe (2-3 phrases)"},strengths:{type:De.ARRAY,items:{type:De.STRING},description:"Liste des points forts"},gaps:{type:De.ARRAY,items:{type:De.STRING},description:"Liste des manques"},suggestions:{type:De.ARRAY,items:{type:De.OBJECT,properties:{category:{type:De.STRING},description:{type:De.STRING},reason:{type:De.STRING},priority:{type:De.STRING,enum:["high","medium","low"]},estimatedPrice:{type:De.STRING}},required:["category","description","reason","priority","estimatedPrice"]}}},required:["summary","strengths","gaps","suggestions"]}}});try{return JSON.parse(o.text)}catch(l){throw console.error("Erreur:",l),l}}async function f3(n,e,t,s){const o=new Set((e||[]).flatMap(T=>T.itemIds)),u=n.filter(T=>!o.has(T.id)).map(T=>`- ${T.analysis} (Catgorie: ${T.category}, Couleur: ${T.color}, Matire: ${T.material})`).join(`
`),d=e.map(T=>`- ${T.name} (Ensemble)`).join(`
`),p=[u,d].filter(Boolean).join(`
`),g=`
    Tu es un styliste de voyage et un expert en organisation. Ta mission est de crer une valise optimise pour un voyage.

    Dtails du voyage :
    - Dure : ${t} jour(s)
    - Contexte / Mto : "${s}"

    Vtements et Ensembles disponibles dans la garde-robe :
    ${p}
    
    RGLES :
    1. Cre une liste de vtements  emporter qui soit polyvalente et minimale.
    2. Ne slectionne QUE des articles de la liste fournie.
    3. Les articles marqus comme "(Ensemble)" sont insparables.
    4. Assure-toi que la quantit de vtements est approprie pour ${t} jour(s).
    `,v=await nf.models.generateContent({model:"gemini-2.5-pro",contents:g,config:{responseMimeType:"application/json",responseSchema:{type:De.OBJECT,properties:{titre:{type:De.STRING,description:"Le nom du plan de valise."},resume:{type:De.STRING,description:"Un bref rsum de la stratgie de la valise."},valise:{type:De.ARRAY,items:{type:De.STRING},description:"La liste des vtements  emporter."}},required:["titre","resume","valise"]}}});try{return JSON.parse(v.text)}catch(T){throw console.error("Erreur de parsing JSON:",T),new Error("L'IA a renvoy une rponse malforme.")}}const h3=async n=>{try{const e=BA(cC,"users",n,"items");return(await JA(e)).docs.map(o=>({id:o.id,...o.data()}))}catch(e){return console.error("Erreur lors du chargement des vtements:",e),[]}},p3=async n=>{try{const e=BA(cC,"users",n,"sets");return(await JA(e)).docs.map(o=>({id:o.id,...o.data()}))}catch(e){return console.error("Erreur lors du chargement des ensembles:",e),[]}},m3=async(n,e,t)=>{try{const s=BD(KD,`users/${n}/clothing/${t}.jpg`);return await OD(s,e,"data_url"),await qD(s)}catch(s){throw console.error("Erreur lors de l'upload de l'image:",s),s}},g3=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),y3=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),OE=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),_3=()=>A.jsxs("svg",{className:"animate-spin h-8 w-8 text-gold",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),ag=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:A.jsx("path",{d:"M10 3a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0V7H8a1 1 0 110-2h1V4a1 1 0 011-1zM4 9a1 1 0 011 1v1h1a1 1 0 110 2H5v1a1 1 0 11-2 0v-1H2a1 1 0 110-2h1v-1a1 1 0 011-1zM16 9a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})}),qC=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),qE=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.5 6.6C12.5 5.54903 11.651 4.7 10.6 4.7C9.54903 4.7 8.7 5.54903 8.7 6.6V8.7C8.7 9.36274 9.23726 9.9 9.9 9.9H14.1C14.7627 9.9 15.3 9.36274 15.3 8.7V7.8"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.10879 16.5C4.43285 14.805 5.86246 13.5 7.6 13.5H16.4C18.1375 13.5 19.5672 14.805 19.8912 16.5L20.5 19.5H3.5L4.10879 16.5Z"})]}),BC=()=>A.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4 0 1.132-.497 2.16-1.32 2.874-.823.714-1.823 1.126-2.904 1.126H12v.01M12 17h.01"})}),v3=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 4h6l2 5-2 1-3-4-3 4-2-1 2-5z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v10m-3-10v10h6V10"})]}),T3=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 4h12v10H6z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 14v6h-2L6 4"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 14v6h2l1-16"})]}),E3=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 18h16l-3-6H7L4 18z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 12V7a2 2 0 012-2h0a2 2 0 012 2v5"})]}),S3=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 000-18 9 9 0 000 18z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11.5l-3.5 3.5"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.5 8.5l-3.5 3.5"})]}),A3=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),FC=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),sf=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),HC=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:A.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),C3=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),I3=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[A.jsx("path",{d:"M8 3a1 1 0 000 2h4a1 1 0 100-2H8z"}),A.jsx("path",{fillRule:"evenodd",d:"M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 3a1 1 0 011-1h10a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1V7z",clipRule:"evenodd"})]}),w3=({theme:n,toggleTheme:e,children:t})=>A.jsx("header",{className:"bg-snow/80 dark:bg-onyx/80 backdrop-blur-lg border-b border-black/5 dark:border-white/10 sticky top-0 z-50",children:A.jsxs("div",{className:"container mx-auto px-4 lg:px-8 h-24 flex justify-between items-center",children:[A.jsxs("h1",{className:"text-4xl font-serif font-bold tracking-wider text-raisin-black dark:text-snow",children:["Dress ",A.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),A.jsxs("div",{className:"flex items-center gap-4",children:[t,A.jsx("button",{onClick:e,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-black/5 dark:hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx transition-colors","aria-label":"Changer le thme",children:n==="light"?A.jsx(y3,{}):A.jsx(g3,{})})]})]})}),BE=({user:n})=>{var R,q,z;const[e,t]=ge.useState(""),[s,o]=ge.useState(""),[l,u]=ge.useState(!1),[d,p]=ge.useState(!1),g=ge.useRef(null);ge.useEffect(()=>{const F=ne=>{g.current&&!g.current.contains(ne.target)&&p(!1)};return d&&document.addEventListener("mousedown",F),()=>{document.removeEventListener("mousedown",F)}},[d]);const v=async()=>{try{await Ub(Wl,YD)}catch(F){console.error("Erreur de connexion Google:",F)}},T=async F=>{F.preventDefault();try{l?await db(Wl,e,s):await fb(Wl,e,s)}catch(ne){console.error("Erreur d'authentification:",ne)}},S=async()=>{try{await gb(Wl)}catch(F){console.error("Erreur de dconnexion:",F)}};return n?A.jsxs("div",{className:"relative",ref:g,children:[A.jsxs("button",{onClick:()=>p(!d),className:"flex items-center gap-3 px-4 py-2 rounded-full bg-gold/10 hover:bg-gold/20 transition-all border border-gold/30",children:[A.jsx("div",{className:"w-8 h-8 rounded-full bg-gold flex items-center justify-center text-onyx font-bold",children:(((R=n.displayName)==null?void 0:R[0])||((q=n.email)==null?void 0:q[0])||"U").toUpperCase()}),A.jsx("span",{className:"hidden md:block text-sm font-medium",children:n.displayName||((z=n.email)==null?void 0:z.split("@")[0])})]}),d&&A.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-raisin-black rounded-xl shadow-2xl border border-black/10 dark:border-white/10 overflow-hidden z-50",children:[A.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[A.jsx("p",{className:"text-sm font-medium",children:n.displayName||"Utilisateur"}),A.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n.email})]}),A.jsxs("button",{onClick:S,className:"w-full px-4 py-3 text-left text-sm hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors flex items-center gap-2",children:[A.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Dconnexion"]})]})]}):A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl p-8 max-w-md mx-auto border border-black/5 dark:border-white/10",children:[A.jsxs("div",{className:"text-center mb-8",children:[A.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:["Dress ",A.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:l?"Crez votre compte":"Bienvenue"})]}),A.jsxs("button",{onClick:v,className:"w-full mb-6 px-6 py-4 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl hover:border-gold hover:shadow-lg hover:shadow-gold/20 transition-all duration-300 flex items-center justify-center gap-3 group",children:[A.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[A.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),A.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),A.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),A.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),A.jsx("span",{className:"font-semibold group-hover:text-gold transition-colors",children:"Continuer avec Google"})]}),A.jsxs("div",{className:"relative my-6",children:[A.jsx("div",{className:"absolute inset-0 flex items-center",children:A.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),A.jsx("div",{className:"relative flex justify-center text-sm",children:A.jsx("span",{className:"px-4 bg-white dark:bg-raisin-black text-gray-500",children:"Ou avec email"})})]}),A.jsxs("form",{onSubmit:T,className:"space-y-4",children:[A.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:F=>t(F.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),A.jsx("input",{type:"password",placeholder:"Mot de passe",value:s,onChange:F=>o(F.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),A.jsx("button",{type:"submit",className:"w-full px-6 py-4 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all duration-300 font-bold",children:l?"Crer mon compte":"Se connecter"})]}),A.jsx("button",{onClick:()=>u(!l),className:"w-full mt-6 text-sm text-gray-500 hover:text-gold transition-colors",children:l?"Dj un compte ? Se connecter":"Pas encore de compte ? S'inscrire"})]})},R3=({onAnalyze:n,isAnalyzing:e})=>{const t=ge.useRef(null),[s,o]=ge.useState([]),[l,u]=ge.useState(!1),[d,p]=ge.useState(!1);ge.useEffect(()=>{const K=()=>p(window.innerWidth<1024);return K(),window.addEventListener("resize",K),()=>window.removeEventListener("resize",K)},[]),ge.useEffect(()=>()=>{s.forEach(K=>URL.revokeObjectURL(K.preview))},[s]);const g=K=>{const W=K.map(ie=>({id:`${ie.name}-${ie.lastModified}-${Math.random()}`,file:ie,preview:URL.createObjectURL(ie)}));o(ie=>[...ie,...W])},v=K=>{K.target.files&&(g(Array.from(K.target.files)),K.target.value="")},T=()=>{var K;e||(K=t.current)==null||K.click()},S=K=>{d||(K.preventDefault(),K.stopPropagation(),u(!0))},R=K=>{d||(K.preventDefault(),K.stopPropagation(),u(!1))},q=K=>{d||(K.preventDefault(),K.stopPropagation())},z=K=>{d||(K.preventDefault(),K.stopPropagation(),u(!1),K.dataTransfer.files&&K.dataTransfer.files.length>0&&(g(Array.from(K.dataTransfer.files)),K.dataTransfer.clearData()))},F=K=>{const W=s.find(ie=>ie.id===K);W&&URL.revokeObjectURL(W.preview),o(ie=>ie.filter(de=>de.id!==K))},ne=()=>{s.length>0&&!e&&(n(s.map(K=>K.file)),o([]))};return A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",onDragEnter:S,onDragLeave:R,onDragOver:q,onDrop:z,children:[A.jsx("h2",{className:"text-2xl font-serif font-bold mb-6 text-gold",children:"Ajouter  ma garde-robe"}),A.jsxs("div",{onClick:T,className:`relative bg-snow dark:bg-onyx rounded-lg p-12 text-center transition-all duration-300 ring-1 ring-dashed ring-black/20 dark:ring-white/20 ${e?"cursor-default":"cursor-pointer hover:ring-gold dark:hover:ring-gold"}`,children:[A.jsx("input",{type:"file",ref:t,onChange:v,className:"hidden",accept:"image/png, image/jpeg, image/webp",multiple:!0,disabled:e}),A.jsx("div",{className:"flex flex-col items-center justify-center min-h-[8rem]",children:e?A.jsxs(A.Fragment,{children:[A.jsx(_3,{}),A.jsx("p",{className:"mt-4 text-sm font-medium text-gray-500 dark:text-gray-400 tracking-wide",children:"Analyse en cours..."})]}):A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:A.jsx(OE,{})}),A.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:d?"Appuyez pour ajouter des photos":"Glissez-dposez vos photos"}),A.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["ou ",A.jsx("span",{className:"text-gold font-medium",children:"cliquez pour slectionner"})]})]})}),l&&!d&&A.jsxs("div",{className:"absolute inset-0 bg-gold/90 backdrop-blur-sm rounded-lg flex flex-col items-center justify-center transition-opacity",children:[A.jsx("div",{className:"text-black transform-gpu scale-110",children:A.jsx(OE,{})}),A.jsx("p",{className:"mt-2 font-bold text-lg text-black",children:"Dposez pour ajouter"})]})]}),s.length>0&&!e&&A.jsxs("div",{className:"mt-8",children:[A.jsx("h3",{className:"font-semibold mb-4 text-gray-600 dark:text-gray-300",children:"Prts pour l'analyse :"}),A.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 mb-6",children:s.map(K=>A.jsxs("div",{className:"relative group aspect-square",children:[A.jsx("img",{src:K.preview,alt:K.file.name,className:"w-full h-full object-cover rounded-md shadow-md"}),A.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity rounded-md"}),A.jsx("button",{onClick:()=>F(K.id),className:"absolute -top-2 -right-2 p-1 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white opacity-0 group-hover:opacity-100 transition-all hover:bg-red-500 hover:scale-110 focus:opacity-100","aria-label":"Supprimer",children:A.jsx(qC,{})})]},K.id))}),A.jsxs("button",{onClick:ne,disabled:e||s.length===0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[A.jsx(ag,{}),"Analyser les ",s.length," article(s)"]})]})]})},b3=({imageSrc:n,analysis:e,onClick:t,onRemove:s,isSelected:o,isSet:l})=>A.jsxs("div",{onClick:t,className:"group relative aspect-square bg-raisin-black rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 cursor-pointer",children:[A.jsx("img",{src:n,alt:e,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"}),A.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${o?"ring-4 ring-gold":"ring-2 ring-transparent"} rounded-lg`}),A.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),l&&!o&&A.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white",children:A.jsx(sf,{})}),o&&A.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-gold rounded-full text-onyx",children:A.jsx(HC,{})}),A.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:A.jsx("p",{className:"text-white text-sm font-medium line-clamp-2",children:e})}),A.jsx("button",{onClick:s,className:"absolute top-2 right-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-500 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-red-500","aria-label":"Supprimer",children:A.jsx(qC,{})})]}),x3={Hauts:{color:"Toutes",material:"Toutes"},Bas:{color:"Toutes",material:"Toutes"},Chaussures:{color:"Toutes",material:"Toutes"},Accessoires:{color:"Toutes",material:"Toutes"}},N3=({clothingItems:n,clothingSets:e=[],onItemClick:t,onDeleteItem:s,onCreateSet:o})=>{const[l,u]=ge.useState("Hauts"),[d,p]=ge.useState(x3),[g,v]=ge.useState(!1),[T,S]=ge.useState(new Set),R=ge.useMemo(()=>e||[],[e]),q=ge.useMemo(()=>new Set(R.flatMap(P=>P.itemIds||[])),[R]),z=n.length,F=[{name:"Hauts",icon:v3},{name:"Bas",icon:T3},{name:"Chaussures",icon:E3},{name:"Accessoires",icon:S3}],ne=P=>{g?S(k=>{const M=new Set(k);return M.has(P.id)?M.delete(P.id):M.add(P.id),M}):t(P)},K=(P,k)=>{P.stopPropagation(),T.has(k)&&S(M=>{const Qe=new Set(M);return Qe.delete(k),Qe}),s(k)},W=ge.useMemo(()=>n.filter(P=>{if(!(P.category===l))return!1;const M=l?d[l]:{color:"Toutes",material:"Toutes"},Qe=M.color==="Toutes"||P.color===M.color,Ie=M.material==="Toutes"||P.material===M.material;return Qe&&Ie}),[n,l,d]),ie=ge.useMemo(()=>{if(!l)return[];const P=n.filter(k=>k.category===l).map(k=>k.color);return["Toutes",...Array.from(new Set(P))]},[n,l]),de=ge.useMemo(()=>{if(!l)return[];const P=n.filter(k=>k.category===l).map(k=>k.material);return["Toutes",...Array.from(new Set(P))]},[n,l]),le=P=>{l&&p(k=>({...k,[l]:{...k[l],color:P}}))},D=P=>{l&&p(k=>({...k,[l]:{...k[l],material:P}}))},N=P=>{u(l===P?null:P)},x=()=>{v(!g),S(new Set)},L=()=>{if(T.size<2){alert("Veuillez slectionner au moins 2 articles pour crer un ensemble.");return}const P=window.prompt("Donnez un nom  cet ensemble :");P&&(o(P,Array.from(T)),x())};return z===0?A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-8 text-center",children:[A.jsx(qE,{className:"w-20 h-20 mx-auto text-gray-400 dark:text-gray-600 mb-4"}),A.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-700 dark:text-gray-300",children:"Votre garde-robe est vide"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Ajoutez vos premiers vtements pour commencer  crer vos tenues !"})]}):A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",children:[A.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-8",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx(qE,{className:"w-8 h-8 text-gold"}),A.jsxs("div",{children:[A.jsxs("h2",{className:"text-3xl font-serif font-bold tracking-tight",children:[A.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),A.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[z," vtement",z>1?"s":""]})]})]}),g?A.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[A.jsx("button",{onClick:x,className:"flex-shrink-0 px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors text-sm font-medium",children:"Annuler"}),A.jsxs("button",{onClick:L,disabled:T.size<2,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 text-sm disabled:opacity-50",children:["Valider (",T.size,")"]})]}):A.jsxs("button",{onClick:x,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300 text-sm",children:[A.jsx(sf,{}),"Crer un ensemble"]})]}),g&&A.jsxs("div",{className:"bg-gold/10 border border-gold/30 text-gold-dark dark:text-gold p-4 rounded-lg mb-6 text-center",children:[A.jsx("p",{className:"font-semibold",children:"Mode Cration d'Ensemble"}),A.jsx("p",{className:"text-sm",children:"Slectionnez les articles que vous souhaitez lier."})]}),A.jsx("div",{className:"space-y-6",children:F.map(({name:P,icon:k})=>{const M=n.filter(Ie=>Ie.category===P),Qe=l===P;return A.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-lg overflow-hidden",children:[A.jsxs("button",{onClick:()=>N(P),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900/50 hover:bg-gray-100 dark:hover:bg-gray-900 transition-colors",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx(k,{className:"w-5 h-5 text-gold"}),A.jsx("span",{className:"font-semibold text-lg",children:P}),A.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",M.length,")"]})]}),A.jsx(A3,{className:`w-5 h-5 transition-transform ${Qe?"rotate-180":""}`})]}),Qe&&A.jsxs("div",{className:"p-6 space-y-6",children:[A.jsxs("div",{className:"flex flex-wrap gap-4",children:[A.jsxs("div",{className:"flex-1 min-w-[200px]",children:[A.jsx("label",{className:"block text-sm font-medium mb-2",children:"Couleur"}),A.jsx("select",{value:d[P].color,onChange:Ie=>le(Ie.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:ie.map(Ie=>A.jsx("option",{value:Ie,children:Ie},Ie))})]}),A.jsxs("div",{className:"flex-1 min-w-[200px]",children:[A.jsx("label",{className:"block text-sm font-medium mb-2",children:"Matire"}),A.jsx("select",{value:d[P].material,onChange:Ie=>D(Ie.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:de.map(Ie=>A.jsx("option",{value:Ie,children:Ie},Ie))})]})]}),W.length>0?A.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:W.map(Ie=>A.jsx(b3,{imageSrc:Ie.imageSrc,analysis:Ie.analysis,onClick:()=>ne(Ie),onRemove:$=>K($,Ie.id),isSelected:T.has(Ie.id),isSet:q.has(Ie.id)&&!T.has(Ie.id)},Ie.id))}):A.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"Aucun vtement ne correspond aux filtres slectionns."})]})]},P)})})]})},zC=({clothingItems:n,clothingSets:e,onGenerate:t,isGenerating:s,weatherInfo:o,weatherError:l})=>{const[u,d]=jl.useState(""),p=v=>{v.preventDefault(),t(u||"Casual")},g=["Casual","Soire chic","Travail (formel)"];return A.jsxs("div",{children:[A.jsx("h2",{className:"text-2xl font-serif font-bold text-center mb-6 text-gold",children:"Crateur de Tenues"}),A.jsxs("div",{className:"text-center mb-6 p-3 rounded-lg bg-snow dark:bg-onyx border border-black/10 dark:border-white/10",children:[o&&A.jsxs("p",{className:"text-sm font-medium text-blue-500 dark:text-blue-400",children:["Mto : ",o," "]}),l&&A.jsx("p",{className:"text-sm font-medium text-red-500",children:l}),!o&&!l&&A.jsx("p",{className:"text-sm font-medium text-gray-400 animate-pulse",children:"Rcupration de la mto..."})]}),A.jsx("form",{onSubmit:p,children:A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"occasion",className:"block text-sm font-medium text-center text-gray-500 dark:text-gray-400 mb-3",children:"Pour quelle occasion ?"}),A.jsx("div",{className:"flex justify-center gap-2 mb-4",children:g.map(v=>A.jsx("button",{type:"button",onClick:()=>d(v),className:`px-4 py-1.5 rounded-full text-sm font-semibold transition-colors duration-200 ${u===v?"bg-gold text-onyx":"bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 hover:border-gold dark:hover:border-gold text-gray-700 dark:text-gray-300"}`,disabled:s,children:v},v))}),A.jsx("input",{id:"occasion",type:"text",value:u,onChange:v=>d(v.target.value),placeholder:"Ou dcrivez... (ex: Brunch dcontract)",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:s})]}),A.jsxs("button",{type:"submit",disabled:s,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[A.jsx(ag,{}),s?"Gnration...":"Gnrer des Tenues"]})]})})]})},GC=({outfits:n,allClothingItems:e})=>{const[t,s]=ge.useState(null);ge.useEffect(()=>{if(!t)return;const l=u=>{u.key==="Escape"&&s(null)};return window.addEventListener("keydown",l),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",l),document.body.style.overflow="auto"}},[t]);const o=l=>{const u=l.toLowerCase(),d=new Set(u.split(/\s+/));if(e.length===0)return null;const p=e.find(T=>T.analysis.toLowerCase()===u);if(p)return p.imageSrc;const g=e.map(T=>{const S=new Set(T.analysis.toLowerCase().split(/\s+/)),R=new Set([...S].filter(F=>d.has(F))),q=new Set([...S,...d]),z=R.size/q.size;return{item:T,score:z}});g.sort((T,S)=>S.score-T.score);const v=g[0];return v.score===0?null:v.item.imageSrc};return A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"mt-10 space-y-8",children:n.map((l,u)=>A.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5 transition-all duration-300 hover:shadow-lg hover:border-gold/50",children:[A.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:l.titre}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:l.description}),A.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:l.vetements.map((d,p)=>{const g=o(d);return A.jsx("button",{onClick:()=>g&&s(g),className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden transition-transform duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx disabled:cursor-default disabled:hover:scale-100",disabled:!g,"aria-label":`Agrandir l'image de : ${d}`,children:g?A.jsx("img",{src:g,alt:d,className:"w-full h-full object-cover"}):A.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:A.jsx(BC,{})})},p)})}),A.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:l.vetements.map((d,p)=>A.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:d},p))})]},u))}),t&&A.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:()=>s(null),role:"dialog","aria-modal":"true",children:A.jsxs("div",{className:"relative",onClick:l=>l.stopPropagation(),children:[A.jsx("img",{src:t,alt:"Vue agrandie",className:"max-w-[90vw] max-h-[85vh] object-contain rounded-lg shadow-2xl"}),A.jsx("button",{onClick:()=>s(null),className:"absolute -top-3 -right-3 p-1.5 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white hover:bg-red-500 hover:scale-110 transition-all focus:outline-none focus:ring-2 focus:ring-gold","aria-label":"Fermer",children:A.jsx(FC,{})})]})})]})},M3=({item:n,clothingSets:e,onClose:t,onUpdate:s,onGenerateFrom:o,onRemoveSet:l})=>{const[u,d]=ge.useState({analysis:n.analysis,category:n.category,color:n.color,material:n.material}),p=e.find(T=>T.itemIds.includes(n.id));ge.useEffect(()=>{d({analysis:n.analysis,category:n.category,color:n.color,material:n.material})},[n]),ge.useEffect(()=>{const T=S=>{S.key==="Escape"&&t()};return document.body.style.overflow="hidden",window.addEventListener("keydown",T),()=>{document.body.style.overflow="auto",window.removeEventListener("keydown",T)}},[t]);const g=T=>{const{name:S,value:R}=T.target;d(q=>({...q,[S]:R}))},v=T=>{T.preventDefault(),s({...n,...u})};return A.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:t,role:"dialog","aria-modal":"true","aria-labelledby":"clothing-item-title",children:A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col overflow-hidden",onClick:T=>T.stopPropagation(),children:[A.jsxs("div",{className:"relative",children:[A.jsx("img",{src:n.imageSrc,alt:n.analysis,className:"w-full h-auto max-h-[50vh] object-cover"}),A.jsx("button",{onClick:t,className:"absolute top-3 right-3 p-1.5 bg-black/40 backdrop-blur-sm rounded-full text-white hover:bg-black/60 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-raisin-black","aria-label":"Fermer la vue dtaille",children:A.jsx(FC,{})})]}),A.jsxs("form",{onSubmit:v,className:"p-6 overflow-y-auto flex-grow flex flex-col",children:[A.jsxs("div",{className:"space-y-4 flex-grow",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"analysis",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Description"}),A.jsx("textarea",{id:"analysis",name:"analysis",value:u.analysis,onChange:g,rows:3,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Catgorie"}),A.jsx("select",{id:"category",name:"category",value:u.category,onChange:g,className:"mt-1 w-full appearance-none px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow",children:["Hauts","Bas","Chaussures","Accessoires"].map(T=>A.jsx("option",{value:T,children:T},T))})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Couleur"}),A.jsx("input",{type:"text",id:"color",name:"color",value:u.color,onChange:g,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"material",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Matire"}),A.jsx("input",{type:"text",id:"material",name:"material",value:u.material,onChange:g,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]})]}),p&&A.jsxs("div",{className:"bg-gold/10 dark:bg-gold/20 p-3 rounded-lg flex items-center justify-between gap-4",children:[A.jsxs("div",{children:[A.jsx("p",{className:"text-xs font-semibold text-gold uppercase tracking-wider",children:"Fait partie de l'ensemble"}),A.jsx("p",{className:"font-medium text-onyx dark:text-snow truncate",title:p.name,children:p.name})]}),A.jsxs("button",{type:"button",onClick:()=>{l(p.id),t()},className:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white dark:bg-onyx text-rose-500 border border-rose-500/50 rounded-md hover:bg-rose-500 hover:text-white transition-colors",title:"Dissocier l'ensemble",children:[A.jsx(C3,{}),A.jsx("span",{children:"Dissocier"})]})]})]}),A.jsxs("div",{className:"mt-6 pt-4 border-t border-black/10 dark:border-white/10 flex flex-col sm:flex-row gap-3",children:[A.jsxs("button",{type:"button",onClick:()=>o(n),className:"w-full flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300",children:[A.jsx(ag,{}),"Crer une tenue avec cet article"]}),A.jsx("button",{type:"submit",className:"w-full sm:w-auto px-6 py-2.5 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300",children:"Enregistrer"})]})]})]})})},JC=({clothingItems:n,clothingSets:e,onGeneratePlan:t,isGenerating:s})=>{const[o,l]=ge.useState(3),[u,d]=ge.useState(""),p=g=>{g.preventDefault();const v=u||"";v.trim()&&o>0&&t(o,v)};return A.jsxs("div",{children:[A.jsx("h2",{className:"text-2xl font-serif font-bold text-center mb-6 text-gold",children:"Planificateur de Valise"}),A.jsxs("form",{onSubmit:p,className:"space-y-6",children:[A.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 items-end",children:[A.jsxs("div",{className:"sm:col-span-1",children:[A.jsx("label",{htmlFor:"days",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Dure (jours)"}),A.jsx("input",{id:"days",type:"number",value:o,onChange:g=>l(parseInt(g.target.value,10)||1),min:"1",max:"30",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:s,required:!0})]}),A.jsxs("div",{className:"sm:col-span-2",children:[A.jsx("label",{htmlFor:"vacation-context",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Destination / Mto"}),A.jsx("input",{id:"vacation-context",type:"text",value:u,onChange:g=>d(g.target.value),placeholder:"Ex: Weekend  Rome, temps doux",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center sm:text-left",disabled:s,required:!0})]})]}),A.jsxs("button",{type:"submit",disabled:s||!(u||"").trim()||o<=0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[A.jsx(I3,{}),s?"Prparation...":"Gnrer la valise"]})]})]})},YC=({plan:n,allClothingItems:e})=>{const t=s=>{const o=s.toLowerCase(),l=e.find(d=>d.analysis.toLowerCase()===o);if(l)return l.imageSrc;const u=e.map(d=>{const p=new Set(d.analysis.toLowerCase().split(/\s+/)),g=o.split(/\s+/),T=g.filter(S=>p.has(S)).length/g.length;return{item:d,score:T}}).filter(d=>d.score>.5).sort((d,p)=>p.score-d.score)[0];return u?u.item.imageSrc:null};return A.jsx("div",{className:"mt-10",children:A.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5",children:[A.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:n.titre}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:n.resume}),A.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:n.valise.map((s,o)=>{const l=t(s);return A.jsxs("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden relative group",title:s,children:[l?A.jsx("img",{src:l,alt:s,className:"w-full h-full object-cover"}):A.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:A.jsx(BC,{})}),A.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center p-2",children:A.jsx("p",{className:"text-white text-xs text-center line-clamp-3",children:s})})]},o)})}),A.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:n.valise.map((s,o)=>A.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:s},o))})]})})},D3=({onFilesSelected:n,isAnalyzing:e})=>{const[t,s]=ge.useState(!1),o=l=>{const u=Array.from(l.target.files||[]);u.length>0&&(n(u),s(!1))};return A.jsxs(A.Fragment,{children:[A.jsx("button",{onClick:()=>s(!0),disabled:e,className:"md:hidden fixed bottom-24 right-6 w-16 h-16 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-full shadow-2xl hover:shadow-gold/50 transition-all duration-300 flex items-center justify-center z-40 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95","aria-label":"Ajouter un vtement",children:e?A.jsxs("svg",{className:"animate-spin h-8 w-8",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):A.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})}),t&&A.jsx("div",{className:"md:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end",onClick:()=>s(!1),children:A.jsxs("div",{className:"bg-white dark:bg-raisin-black w-full rounded-t-3xl p-6 pb-8 animate-slide-up",onClick:l=>l.stopPropagation(),children:[A.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mb-6"}),A.jsx("h3",{className:"text-xl font-bold mb-6 text-center",children:"Ajouter un vtement"}),A.jsxs("div",{className:"space-y-3",children:[A.jsxs("label",{className:"block",children:[A.jsx("input",{type:"file",accept:"image/*",capture:"environment",multiple:!0,onChange:o,className:"hidden"}),A.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gradient-to-r from-gold/10 to-gold-dark/10 hover:from-gold/20 hover:to-gold-dark/20 border-2 border-gold/30 rounded-xl transition-all cursor-pointer active:scale-98",children:[A.jsx("div",{className:"w-12 h-12 bg-gold rounded-full flex items-center justify-center flex-shrink-0",children:A.jsxs("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("p",{className:"font-semibold",children:"Appareil Photo"}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Prendre une photo"})]})]})]}),A.jsxs("label",{className:"block",children:[A.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:o,className:"hidden"}),A.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 rounded-xl transition-all cursor-pointer active:scale-98",children:[A.jsx("div",{className:"w-12 h-12 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center flex-shrink-0",children:A.jsx("svg",{className:"w-6 h-6 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("p",{className:"font-semibold",children:"Galerie"}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Choisir depuis vos photos"})]})]})]})]}),A.jsx("button",{onClick:()=>s(!1),className:"w-full mt-4 py-3 text-gray-500 dark:text-gray-400 font-medium",children:"Annuler"})]})})]})},k3=({onAnalyzeWardrobe:n,onScrollToOutfits:e,onScrollToVacation:t,onStartSetCreation:s,isAnalyzingWardrobe:o,clothingCount:l})=>A.jsxs("div",{className:"space-y-4 pb-24",children:[A.jsxs("div",{className:"text-center py-6",children:[A.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:[A.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),A.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[l," vtement",l>1?"s":""," dans votre collection"]})]}),A.jsxs("div",{className:"space-y-3 px-4",children:[l>=3&&A.jsx("button",{onClick:n,disabled:o,className:"w-full bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-2xl p-5 text-left transition-all active:scale-98 disabled:opacity-50",children:A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:"w-12 h-12 bg-gold rounded-xl flex items-center justify-center flex-shrink-0",children:o?A.jsxs("svg",{className:"animate-spin h-6 w-6 text-onyx",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):A.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("h3",{className:"text-lg font-bold mb-1",children:" Analyser ma garde-robe"}),A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour plus de polyvalence"})]})]})}),A.jsx("button",{onClick:e,className:"w-full bg-gradient-to-r from-purple-500/10 to-pink-500/10 border-2 border-purple-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center flex-shrink-0",children:A.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("h3",{className:"text-lg font-bold mb-1",children:" Crateur de Tenues"}),A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Gnrez des looks personnaliss avec l'IA"})]})]})}),A.jsx("button",{onClick:t,className:"w-full bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border-2 border-blue-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center flex-shrink-0",children:A.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("h3",{className:"text-lg font-bold mb-1",children:" Planificateur de Valise"}),A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Prparez votre valise optimale pour votre voyage"})]})]})})]}),A.jsx("div",{className:"px-4 pt-6",children:A.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-2xl p-4",children:[A.jsx("h4",{className:"font-semibold mb-3 text-sm text-gray-600 dark:text-gray-400",children:"Aperu rapide"}),A.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center",children:[A.jsx("p",{className:"text-2xl font-bold text-gold",children:l}),A.jsx("p",{className:"text-xs text-gray-500",children:"Vtements"})]}),A.jsxs("button",{onClick:s,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[A.jsx("div",{className:"text-green-500",children:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),A.jsx("p",{className:"text-xs text-gray-500 mt-1.5 font-medium",children:"Crer un ensemble"})]})]})]})})]}),P3=({activeTab:n,onTabChange:e,counts:t})=>{const s=[{id:"home",label:"Home",icon:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),count:null},{id:"hauts",label:"Hauts",icon:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),count:t.hauts},{id:"bas",label:"Bas",icon:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),count:t.bas},{id:"chaussures",label:"Chaussures",icon:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5"})}),count:t.chaussures},{id:"accessoires",label:"Accessoires",icon:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),count:t.accessoires}];return A.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-raisin-black border-t border-black/10 dark:border-white/10 z-30 pb-8",children:A.jsx("div",{className:"flex justify-around items-center h-16",children:s.map(o=>{const l=n===o.id;return A.jsxs("button",{onClick:()=>e(o.id),className:`flex flex-col items-center justify-center gap-1 px-3 py-2 transition-all flex-1 ${l?"text-gold":"text-gray-500 dark:text-gray-400"}`,children:[A.jsxs("div",{className:"relative",children:[o.icon,o.count!==null&&o.count>0&&A.jsx("span",{className:`absolute -top-1 -right-1 text-[10px] font-bold px-1.5 py-0.5 rounded-full ${l?"bg-gold text-onyx":"bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300"}`,children:o.count})]}),A.jsx("span",{className:`text-xs font-medium ${l?"font-bold":""}`,children:o.label})]},o.id)})})})},L3=({analysis:n,onClose:e})=>{if(!n)return null;const t={high:"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20",medium:"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 border-yellow-500/20",low:"bg-green-500/10 text-green-600 dark:text-green-400 border-green-500/20"},s={high:"Priorit haute",medium:"Priorit moyenne",low:"Bonne ide"};return A.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[A.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-gold to-gold-dark p-6 rounded-t-2xl",children:A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsx("h2",{className:"text-2xl font-serif font-bold text-onyx",children:" Suggestions d'Achats"}),A.jsx("button",{onClick:e,className:"p-2 hover:bg-black/10 rounded-full transition",children:A.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),A.jsxs("div",{className:"p-6 space-y-6",children:[A.jsxs("div",{className:"bg-gold/5 border border-gold/20 rounded-xl p-4",children:[A.jsx("h3",{className:"font-semibold text-lg mb-2",children:" Analyse de votre garde-robe"}),A.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:n.summary})]}),A.jsxs("div",{children:[A.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[A.jsx("span",{className:"text-green-500",children:""})," Points forts"]}),A.jsx("div",{className:"grid gap-2",children:n.strengths.map((o,l)=>A.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[A.jsx("span",{className:"text-green-500 mt-0.5",children:""}),A.jsx("span",{children:o})]},l))})]}),A.jsxs("div",{children:[A.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[A.jsx("span",{className:"text-orange-500",children:""})," Opportunits d'amlioration"]}),A.jsx("div",{className:"grid gap-2",children:n.gaps.map((o,l)=>A.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[A.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),A.jsx("span",{children:o})]},l))})]}),A.jsxs("div",{children:[A.jsxs("h3",{className:"font-semibold text-xl mb-4 flex items-center gap-2",children:[A.jsx("span",{children:""})," Pices recommandes"]}),A.jsx("div",{className:"grid gap-4",children:n.suggestions.map((o,l)=>A.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-xl p-5 hover:shadow-lg transition-shadow",children:[A.jsxs("div",{className:"flex justify-between items-start mb-3",children:[A.jsxs("div",{children:[A.jsx("h4",{className:"font-bold text-lg",children:o.description}),A.jsx("p",{className:"text-sm text-gray-500",children:o.category})]}),A.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${t[o.priority]}`,children:s[o.priority]})]}),A.jsxs("p",{className:"text-sm mb-3 text-gray-700 dark:text-gray-300",children:[A.jsx("span",{className:"font-semibold",children:"Pourquoi ?"})," ",o.reason]}),o.estimatedPrice&&A.jsxs("div",{className:"flex items-center gap-2 text-sm text-gold font-semibold",children:[A.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),o.estimatedPrice]})]},l))})]})]})]})})},U3=({clothingItems:n,clothingSets:e,onGenerate:t,isGenerating:s,suggestedOutfits:o,onClose:l,weatherInfo:u,weatherError:d})=>A.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end md:hidden",onClick:l,children:A.jsxs("div",{className:"bg-white dark:bg-raisin-black w-full max-h-[85vh] rounded-t-3xl overflow-hidden animate-slide-up",onClick:p=>p.stopPropagation(),children:[A.jsxs("div",{className:"sticky top-0 bg-white dark:bg-raisin-black border-b border-black/10 dark:border-white/10 p-4 pb-3",children:[A.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mb-3"}),A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx("h2",{className:"text-xl font-bold",children:" Crateur de Tenues"}),A.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),A.jsxs("div",{className:"overflow-y-auto max-h-[calc(85vh-80px)] p-6 space-y-6",children:[A.jsx(zC,{clothingItems:n,clothingSets:e,onGenerate:t,isGenerating:s,weatherInfo:u,weatherError:d}),s&&A.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[A.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),A.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"L'IA compose vos tenues..."})]}),o.length>0&&A.jsx(GC,{outfits:o,allClothingItems:n})]})]})}),V3=({clothingItems:n,clothingSets:e,onGeneratePlan:t,isGenerating:s,vacationPlan:o,onCreateSet:l,onClose:u})=>A.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end md:hidden",onClick:u,children:A.jsxs("div",{className:"bg-white dark:bg-raisin-black w-full max-h-[85vh] rounded-t-3xl overflow-hidden animate-slide-up",onClick:d=>d.stopPropagation(),children:[A.jsxs("div",{className:"sticky top-0 bg-white dark:bg-raisin-black border-b border-black/10 dark:border-white/10 p-4 pb-3",children:[A.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mb-3"}),A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx("h2",{className:"text-xl font-bold",children:" Planificateur de Valise"}),A.jsx("button",{onClick:u,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),A.jsxs("div",{className:"overflow-y-auto max-h-[calc(85vh-80px)] p-6 space-y-6",children:[A.jsx(JC,{clothingItems:n,clothingSets:e,onGeneratePlan:t,isGenerating:s}),s&&A.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[A.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),A.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"Prparation de votre valise..."})]}),o&&A.jsx(YC,{plan:o,allClothingItems:n,onCreateSet:l})]})]})}),O3=({clothingItems:n,clothingSets:e,onClose:t,onCreateSet:s})=>{const[o,l]=ge.useState(new Set),u=new Set(e.flatMap(T=>T.itemIds)),p=n.filter(T=>!u.has(T.id)).reduce((T,S)=>(T[S.category]||(T[S.category]=[]),T[S.category].push(S),T),{}),g=T=>{l(S=>{const R=new Set(S);return R.has(T)?R.delete(T):R.add(T),R})},v=()=>{if(o.size<2){alert("Veuillez slectionner au moins 2 articles.");return}const T=window.prompt("Donnez un nom  cet ensemble :");T&&s(T,Array.from(o))};return A.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end md:hidden",onClick:t,children:A.jsxs("div",{className:"bg-white dark:bg-raisin-black w-full max-h-[85vh] rounded-t-3xl overflow-hidden animate-slide-up flex flex-col",onClick:T=>T.stopPropagation(),children:[A.jsxs("div",{className:"sticky top-0 bg-white dark:bg-raisin-black border-b border-black/10 dark:border-white/10 p-4 pb-3 z-10",children:[A.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mb-3"}),A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx("h2",{className:"text-xl font-bold",children:" Crer un ensemble"}),A.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),A.jsxs("div",{className:"overflow-y-auto flex-1 p-4",children:[A.jsx("p",{className:"text-sm text-center text-gray-500 dark:text-gray-400 mb-4",children:"Slectionnez les articles que vous souhaitez lier (ex: une veste et son pantalon)."}),A.jsx("div",{className:"space-y-4",children:Object.keys(p).map(T=>p[T].length>0&&A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-lg mb-2",children:T}),A.jsx("div",{className:"grid grid-cols-3 gap-3",children:p[T].map(S=>{const R=o.has(S.id);return A.jsxs("button",{onClick:()=>g(S.id),className:"relative rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform border-2",style:{borderColor:R?"#D4AF37":"transparent"},children:[R&&A.jsx("div",{className:"absolute top-1 right-1 p-0.5 bg-gold rounded-full text-onyx z-10",children:A.jsx(HC,{})}),A.jsx("div",{className:"aspect-square",children:A.jsx("img",{src:S.imageSrc,alt:S.analysis,className:"w-full h-full object-cover"})}),A.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),A.jsx("p",{className:"absolute bottom-1 left-1 right-1 text-white text-xs font-medium line-clamp-2 p-1",children:S.analysis})]},S.id)})})]},T))})]}),o.size>0&&A.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10",children:A.jsxs("button",{onClick:v,disabled:o.size<2,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600",children:[A.jsx(sf,{}),"Lier ",o.size," article",o.size>1?"s":""]})})]})})},q3=()=>{const[n,e]=ge.useState(null),[t,s]=ge.useState("dark"),[o,l]=ge.useState([]),[u,d]=ge.useState([]),[p,g]=ge.useState(null),[v,T]=ge.useState(!1),[S,R]=ge.useState(null),[q,z]=ge.useState([]),[F,ne]=ge.useState(!1),[K,W]=ge.useState(null),[ie,de]=ge.useState(!1),[le,D]=ge.useState(null),[N,x]=ge.useState(!1),[L,P]=ge.useState("home"),k=jl.useMemo(()=>o||[],[o]),M=jl.useMemo(()=>u||[],[u]),Qe=jl.useMemo(()=>new Set(M.flatMap(ce=>ce.itemIds||[])),[M]),[Ie,$]=ge.useState(!1),[oe,_e]=ge.useState(!1),[ze,Ge]=ge.useState(!1),[V,Z]=ge.useState(null),[re,he]=ge.useState(null);ge.useEffect(()=>{const ce=mb(Wl,Ue=>{e(Ue)});return()=>ce()},[]),ge.useEffect(()=>{(async()=>{if(n)try{const Ue=await h3(n.uid);l(Ue);const Je=await p3(n.uid);d(Je)}catch(Ue){console.error("Erreur lors du chargement des donnes:",Ue)}else l([]),d([])})()},[n]),ge.useEffect(()=>{t==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]),ge.useEffect(()=>{const ce=async Ue=>{const Je=Ue.coords.latitude,Xe=Ue.coords.longitude,vn=OC.openWeatherApiKey,lt=`https://api.openweathermap.org/data/2.5/weather?lat=${Je}&lon=${Xe}&appid=${vn}&units=metric&lang=fr`;try{const ut=await fetch(lt);if(!ut.ok)throw new Error("Impossible de rcuprer la mto.");const ct=await ut.json(),ri=`${Math.round(ct.main.temp)}C, ${ct.weather[0].description},  ${ct.name}`;Z(ri),he(null)}catch(ut){console.error(ut),he("Mto indisponible.")}};navigator.geolocation?navigator.geolocation.getCurrentPosition(ce,Ue=>{console.error("Erreur de golocalisation:",Ue.message),he("Activez la golocalisation pour la mto.")}):he("Golocalisation non supporte.")},[]);const Se=()=>{s(ce=>ce==="light"?"dark":"light")},xe=ge.useCallback(async ce=>{if(ce.length!==0){T(!0),R(null);try{const Ue=ce.map(ct=>new Promise((ri,oi)=>{const _i=new FileReader;_i.onload=()=>ri(_i.result),_i.onerror=oi,_i.readAsDataURL(ct)})),Je=await Promise.all(Ue),Xe=Je.map(ct=>ct.split(",")[1]),vn=await l3(Xe),lt=Math.min(vn.length,ce.length),ut=[];for(let ct=0;ct<lt;ct++){const ri=`${Date.now()}-${ce[ct].name}-${Math.random()}`;let oi="";if(n)try{oi=await m3(n.uid,Je[ct],ri),console.log(" Image uploaded to Storage:",oi),ut.push({id:ri,imageSrc:oi,...vn[ct]})}catch(_i){console.error(` chec de l'upload pour ${ce[ct].name}. L'article ne sera pas ajout.`,_i),R(`Erreur d'upload pour ${ce[ct].name}. L'article n'a pas t ajout.`)}else{console.warn("Upload impossible: utilisateur non connect."),R("Vous devez tre connect pour ajouter des articles.");break}}vn.length!==ce.length&&(console.warn(`Le nombre de rsultats d'analyse (${vn.length}) ne correspond pas au nombre de fichiers (${ce.length}).`),R(`L'IA a analys ${ut.length} sur ${ce.length} image(s). Certaines ont peut-tre t ignores.`)),l(ct=>[...ct,...ut])}catch(Ue){console.error("Erreur lors de l'analyse par lot des images:",Ue),R("Une erreur est survenue lors de l'analyse des images. L'IA a peut-tre rencontr un problme. Veuillez ressayer.")}finally{T(!1)}}},[n]),ke=ge.useCallback(async(ce,Ue)=>{if(k.length===0){R("Veuillez d'abord ajouter des vtements  votre garde-robe.");return}ne(!0),R(null);const Je=V?`Mto actuelle : ${V}. Occasion : ${ce}`:`Occasion : ${ce}`;console.log("Contexte complet envoy  l'IA:",Je);try{const Xe=await c3(k,M,Je,Ue);z(Xe)}catch(Xe){console.error("Erreur lors de la gnration des tenues:",Xe),Xe instanceof Error?Xe.message.includes("malforme")?R("L'IA a renvoy une rponse inattendue. Veuillez ressayer."):Xe.message.toLowerCase().includes("failed to fetch")?R("Erreur de rseau. Vrifiez votre connexion et ressayez."):R("L'IA est peut-tre surcharge. Veuillez ressayer dans un moment."):R("Une erreur inconnue est survenue. Veuillez ressayer.")}finally{ne(!1)}},[k,M,V]),Mt=ge.useCallback(async(ce,Ue)=>{if(k.length===0){R("Veuillez d'abord ajouter des vtements  votre garde-robe.");return}de(!0),R(null);try{const Je=await f3(k,M,ce,Ue);W(Je)}catch(Je){console.error("Erreur lors de la gnration du plan de valise:",Je),Je instanceof Error?Je.message.includes("malforme")?R("L'IA a renvoy une rponse inattendue. Veuillez ressayer."):Je.message.toLowerCase().includes("failed to fetch")?R("Erreur de rseau. Vrifiez votre connexion et ressayez."):R("L'IA est peut-tre surcharge. Veuillez ressayer dans un moment."):R("Une erreur inconnue est survenue. Veuillez ressayer.")}finally{de(!1)}},[k,M]),ft=ge.useCallback(async()=>{if(k.length<3){R("Ajoutez au moins 3 vtements pour une analyse pertinente.");return}x(!0),R(null);try{const ce=await d3(k,M);D(ce)}catch(ce){console.error("Erreur lors de l'analyse de la garde-robe:",ce),ce instanceof Error?ce.message.includes("malforme")?R("L'IA a renvoy une rponse inattendue. Veuillez ressayer."):ce.message.toLowerCase().includes("failed to fetch")?R("Erreur de rseau. Vrifiez votre connexion et ressayez."):R("L'IA est peut-tre surcharge. Veuillez ressayer dans un moment."):R("Une erreur inconnue est survenue. Veuillez ressayer.")}finally{x(!1)}},[k,M]),Fn=ge.useCallback(()=>{$(!0)},[]),si=ge.useCallback(()=>{_e(!0)},[]),yi=ce=>{g(ce)},Ss=()=>{g(null)},Nn=ce=>{l(Ue=>Ue.filter(Je=>Je.id!==ce)),d(Ue=>Ue.map(Je=>({...Je,itemIds:Je.itemIds.filter(Xe=>Xe!==ce)}))),g(null)},Bi=ce=>{l(Ue=>Ue.map(Je=>Je.id===ce.id?ce:Je)),g(ce)},As=ce=>{const Ue=`Focus sur l'article : ${ce.analysis}`;ke(Ue,ce),g(null),window.innerWidth<768&&$(!0)},Or=ge.useCallback((ce,Ue)=>{var vn;const Je=((vn=o.find(lt=>lt.id===Ue[0]))==null?void 0:vn.imageSrc)||"",Xe={id:`set-${Date.now()}-${Math.random()}`,name:ce,itemIds:Ue,imageSrc:Je};d(lt=>[...lt,Xe])},[o]),bo=ge.useCallback(ce=>{d(Ue=>Ue.filter(Je=>Je.id!==ce))},[]),Cs={hauts:k.filter(ce=>ce.category==="Hauts").length,bas:k.filter(ce=>ce.category==="Bas").length,chaussures:k.filter(ce=>ce.category==="Chaussures").length,accessoires:k.filter(ce=>ce.category==="Accessoires").length},Hn=L==="home"?[]:k.filter(ce=>L==="hauts"?ce.category==="Hauts":L==="bas"?ce.category==="Bas":L==="chaussures"?ce.category==="Chaussures":L==="accessoires"?ce.category==="Accessoires":!1);return A.jsx("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow transition-colors duration-300",children:n?A.jsxs(A.Fragment,{children:[A.jsx(w3,{theme:t,toggleTheme:Se,children:A.jsx(BE,{user:n})}),A.jsxs("main",{className:"container mx-auto px-4 lg:px-8 py-10",children:[S&&A.jsxs("div",{className:"bg-red-500/20 border border-red-500 text-red-300 px-4 py-3 rounded-lg relative mb-8",role:"alert",children:[A.jsx("strong",{className:"font-bold",children:"Erreur: "}),A.jsx("span",{className:"block sm:inline",children:S})]}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[A.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[k.length>=3&&A.jsxs("div",{className:"hidden md:block bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-xl p-4 md:p-6 flex flex-col md:flex-row items-start md:items-center gap-4 md:justify-between",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"text-xl font-bold mb-2",children:" Besoin d'inspiration ?"}),A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour rendre votre garde-robe plus polyvalente"})]}),A.jsx("button",{onClick:ft,disabled:N,className:"px-4 md:px-6 py-3 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm md:text-base flex-shrink-0",children:N?A.jsxs(A.Fragment,{children:[A.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Analyse..."]}):A.jsxs(A.Fragment,{children:[A.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Analyser ma garde-robe"]})})]}),A.jsx("div",{className:"hidden md:block",children:A.jsx(R3,{onAnalyze:xe,isAnalyzing:v})}),A.jsx("div",{className:"hidden md:block",children:A.jsx(N3,{clothingItems:k,clothingSets:M,onItemClick:yi,onDeleteItem:Nn,onCreateSet:Or})}),A.jsxs("div",{className:"md:hidden",children:[L==="home"&&A.jsx(k3,{onAnalyzeWardrobe:ft,onScrollToOutfits:Fn,onScrollToVacation:si,onStartSetCreation:()=>Ge(!0),isAnalyzingWardrobe:N,clothingCount:k.length}),L!=="home"&&A.jsxs("div",{className:"pb-24",children:[A.jsxs("div",{className:"text-center py-6 px-4",children:[A.jsx("h2",{className:"text-2xl font-bold mb-2 capitalize",children:L}),A.jsxs("p",{className:"text-sm text-gray-500",children:[Hn.length," vtement",Hn.length>1?"s":""]})]}),Hn.length>0?A.jsx("div",{className:"grid grid-cols-2 gap-3 px-4",children:Hn.map(ce=>A.jsxs("div",{onClick:()=>yi(ce),className:"relative bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform",children:[Qe.has(ce.id)&&A.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:A.jsx(sf,{})}),A.jsx("div",{className:"aspect-square",children:A.jsx("img",{src:ce.imageSrc,alt:ce.analysis,className:"w-full h-full object-cover"})}),A.jsxs("div",{className:"p-3",children:[A.jsx("p",{className:"text-sm font-medium line-clamp-2",children:ce.analysis}),A.jsx("p",{className:"text-xs text-gray-500 mt-1",children:ce.color})]})]},ce.id))}):A.jsx("div",{className:"text-center py-12 px-4",children:A.jsx("p",{className:"text-gray-500",children:"Aucun vtement dans cette catgorie"})})]})]})]}),A.jsxs("div",{className:"space-y-10 hidden md:block",children:[A.jsx("div",{id:"outfit-generator",children:A.jsx(zC,{clothingItems:k,clothingSets:M,onGenerate:ke,isGenerating:F,weatherInfo:V,weatherError:re})}),q.length>0&&A.jsx(GC,{outfits:q,allClothingItems:k}),A.jsx("div",{id:"vacation-planner",children:A.jsx(JC,{clothingItems:k,clothingSets:M,onGeneratePlan:Mt,isGenerating:ie})}),K&&A.jsx(YC,{plan:K,allClothingItems:k})]})]}),p&&A.jsx(M3,{item:p,clothingSets:M,onClose:Ss,onUpdate:Bi,onGenerateFrom:As,onRemoveSet:bo}),le&&A.jsx(L3,{analysis:le,onClose:()=>D(null)}),A.jsx(D3,{onFilesSelected:xe,isAnalyzing:v}),A.jsx(P3,{activeTab:L,onTabChange:P,counts:Cs}),Ie&&A.jsx(U3,{clothingItems:k,clothingSets:M,onGenerate:ke,isGenerating:F,suggestedOutfits:q,onClose:()=>$(!1),weatherInfo:V,weatherError:re}),oe&&A.jsx(V3,{clothingItems:k,clothingSets:M,onGeneratePlan:Mt,isGenerating:ie,vacationPlan:K,onCreateSet:Or,onClose:()=>_e(!1)}),ze&&A.jsx(O3,{clothingItems:k,clothingSets:M,onClose:()=>Ge(!1),onCreateSet:(ce,Ue)=>{Or(ce,Ue),Ge(!1)}})]})]}):A.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:A.jsx(BE,{user:n})})})},KC=document.getElementById("root");if(!KC)throw new Error("L'lment root est introuvable dans le DOM");const B3=Mw.createRoot(KC);B3.render(A.jsx(jl.StrictMode,{children:A.jsx(q3,{})}));
